import{_ as x}from"./B83gYLgo.js";import{b as y,a as b,r as d,m as w,o as C,C as i,D as o,E as a,F as l,U as I,V as $,I as u,W as D,Q as L,R as M,X as U,Y as B,P as F,Z as h,$ as P,J as S,H as V,_ as q}from"./BBedeHSb.js";const E={class:"piloti-page"},A={class:"page-header"},T={class:"page-subtitle"},z={class:"search-box"},G={key:0,class:"state-box"},O={key:1,class:"state-box state-box--empty"},Q={key:2,class:"state-box"},Y={key:3,class:"pilots-list"},H={class:"lr-name"},J={class:"pilot-avatar"},R={class:"lr-nickname"},W={class:"lr-sessions"},X={class:"lr-last"},Z=y({__name:"index",setup(j){const{currentUser:p}=b(),r=d([]),m=d(!0),c=d(""),v=w(()=>{if(!c.value.trim())return r.value;const s=c.value.toLowerCase();return r.value.filter(e=>{const n=`${e.firstName||""} ${e.lastName||""}`.toLowerCase(),t=(e.nickname||"").toLowerCase(),N=(e.email||"").toLowerCase();return n.includes(s)||t.includes(s)||N.includes(s)})}),_=async()=>{if(p.value)try{const s=U(B(F,"users"),h("role","==","pilot"),h("coachId","==",p.value.uid)),e=await P(s);r.value=e.docs.map(n=>({uid:n.id,...n.data()}))}catch(s){console.error("Error fetching pilots:",s)}finally{m.value=!1}};function f(s){return s.firstName&&s.lastName?`${s.firstName} ${s.lastName}`:s.nickname}function g(s){return s.firstName&&s.lastName?`${s.firstName[0]}${s.lastName[0]}`.toUpperCase():s.nickname.slice(0,2).toUpperCase()}function k(s){if(!s)return"Mai attivo";const e=new Date(s);return`${e.getDate()} ${["Gen","Feb","Mar","Apr","Mag","Giu","Lug","Ago","Set","Ott","Nov","Dic"][e.getMonth()]} ${e.getFullYear()}`}return C(()=>{_()}),(s,e)=>{const n=x;return o(),i("div",E,[e[5]||(e[5]=a("h1",{class:"page-title"},"I MIEI PILOTI",-1)),a("div",A,[a("p",T,l(r.value.length)+" piloti assegnati",1),a("div",z,[e[1]||(e[1]=a("svg",{class:"search-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("circle",{cx:"11",cy:"11",r:"8"}),a("path",{d:"M21 21l-4.35-4.35"})],-1)),I(a("input",{"onUpdate:modelValue":e[0]||(e[0]=t=>c.value=t),type:"text",placeholder:"Cerca pilota...",class:"search-input"},null,512),[[$,c.value]])])]),m.value?(o(),i("div",G," Caricamento piloti... ")):r.value.length===0?(o(),i("div",O,[...e[2]||(e[2]=[a("p",null,"Nessun pilota assegnato",-1),a("small",null,[u("Per assegnare un pilota, vai nella Firebase Console e aggiungi il campo "),a("code",null,"coachId"),u(" con il tuo UID al documento del pilota.")],-1)])])):v.value.length===0?(o(),i("div",Q,' Nessun pilota trovato per "'+l(c.value)+'" ',1)):(o(),i("div",Y,[e[4]||(e[4]=D('<div class="list-header" data-v-edb674a9><span class="lh-name" data-v-edb674a9>Pilota</span><span class="lh-nickname" data-v-edb674a9>Nickname</span><span class="lh-sessions" data-v-edb674a9>Sessioni</span><span class="lh-last" data-v-edb674a9>Ultima attivit√†</span><span class="lh-cta" data-v-edb674a9></span></div>',1)),(o(!0),i(L,null,M(v.value,t=>(o(),S(n,{key:t.uid,to:`/piloti/${t.uid}`,class:"list-row"},{default:V(()=>[a("span",H,[a("span",J,l(g(t)),1),u(" "+l(f(t)),1)]),a("span",R,l(t.nickname),1),a("span",W,l(t.totalSessions||0),1),a("span",X,l(k(t.lastSession)),1),e[3]||(e[3]=a("span",{class:"lr-cta"},[u(" Visualizza "),a("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("path",{d:"M9 18l6-6-6-6"})])],-1))]),_:2},1032,["to"]))),128))]))])}}}),es=q(Z,[["__scopeId","data-v-edb674a9"]]);export{es as default};
