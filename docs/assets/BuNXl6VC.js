const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./D5bvFVRE.js","./error-404.BLrjNXsr.css","./C4JqV51I.js","./error-500.DLkAwcfL.css"])))=>i.map(i=>d[i]);
(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const r of i)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const r={};return i.integrity&&(r.integrity=i.integrity),i.referrerPolicy&&(r.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?r.credentials="include":i.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(i){if(i.ep)return;i.ep=!0;const r=n(i);fetch(i.href,r)}})();function Od(e){const t=Object.create(null);for(const n of e.split(","))t[n]=1;return n=>n in t}const Ut={},_r=[],Vn=()=>{},nv=()=>!1,Ca=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),Ld=e=>e.startsWith("onUpdate:"),be=Object.assign,Nd=(e,t)=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)},DE=Object.prototype.hasOwnProperty,Dt=(e,t)=>DE.call(e,t),dt=Array.isArray,yr=e=>xa(e)==="[object Map]",$c=e=>xa(e)==="[object Set]",ag=e=>xa(e)==="[object Date]",pt=e=>typeof e=="function",Yt=e=>typeof e=="string",In=e=>typeof e=="symbol",Nt=e=>e!==null&&typeof e=="object",Vd=e=>(Nt(e)||pt(e))&&pt(e.then)&&pt(e.catch),sv=Object.prototype.toString,xa=e=>sv.call(e),OE=e=>xa(e).slice(8,-1),iv=e=>xa(e)==="[object Object]",Bc=e=>Yt(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,vr=Od(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Hc=e=>{const t=Object.create(null);return(n=>t[n]||(t[n]=e(n)))},LE=/-\w/g,dn=Hc(e=>e.replace(LE,t=>t.slice(1).toUpperCase())),NE=/\B([A-Z])/g,Gi=Hc(e=>e.replace(NE,"-$1").toLowerCase()),jc=Hc(e=>e.charAt(0).toUpperCase()+e.slice(1)),zu=Hc(e=>e?`on${jc(e)}`:""),$s=(e,t)=>!Object.is(e,t),Ol=(e,...t)=>{for(let n=0;n<e.length;n++)e[n](...t)},rv=(e,t,n,s=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:s,value:n})},zc=e=>{const t=parseFloat(e);return isNaN(t)?e:t},ov=e=>{const t=Yt(e)?Number(e):NaN;return isNaN(t)?e:t};let lg;const Wc=()=>lg||(lg=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function as(e){if(dt(e)){const t={};for(let n=0;n<e.length;n++){const s=e[n],i=Yt(s)?$E(s):as(s);if(i)for(const r in i)t[r]=i[r]}return t}else if(Yt(e)||Nt(e))return e}const VE=/;(?![^(]*\))/g,FE=/:([^]+)/,UE=/\/\*[^]*?\*\//g;function $E(e){const t={};return e.replace(UE,"").split(VE).forEach(n=>{if(n){const s=n.split(FE);s.length>1&&(t[s[0].trim()]=s[1].trim())}}),t}function Rt(e){let t="";if(Yt(e))t=e;else if(dt(e))for(let n=0;n<e.length;n++){const s=Rt(e[n]);s&&(t+=s+" ")}else if(Nt(e))for(const n in e)e[n]&&(t+=n+" ");return t.trim()}function BE(e){if(!e)return null;let{class:t,style:n}=e;return t&&!Yt(t)&&(e.class=Rt(t)),n&&(e.style=as(n)),e}const HE="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",jE=Od(HE);function av(e){return!!e||e===""}function zE(e,t){if(e.length!==t.length)return!1;let n=!0;for(let s=0;n&&s<e.length;s++)n=qc(e[s],t[s]);return n}function qc(e,t){if(e===t)return!0;let n=ag(e),s=ag(t);if(n||s)return n&&s?e.getTime()===t.getTime():!1;if(n=In(e),s=In(t),n||s)return e===t;if(n=dt(e),s=dt(t),n||s)return n&&s?zE(e,t):!1;if(n=Nt(e),s=Nt(t),n||s){if(!n||!s)return!1;const i=Object.keys(e).length,r=Object.keys(t).length;if(i!==r)return!1;for(const o in e){const a=e.hasOwnProperty(o),l=t.hasOwnProperty(o);if(a&&!l||!a&&l||!qc(e[o],t[o]))return!1}}return String(e)===String(t)}function WE(e,t){return e.findIndex(n=>qc(n,t))}const lv=e=>!!(e&&e.__v_isRef===!0),G=e=>Yt(e)?e:e==null?"":dt(e)||Nt(e)&&(e.toString===sv||!pt(e.toString))?lv(e)?G(e.value):JSON.stringify(e,cv,2):String(e),cv=(e,t)=>lv(t)?cv(e,t.value):yr(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((n,[s,i],r)=>(n[Wu(s,r)+" =>"]=i,n),{})}:$c(t)?{[`Set(${t.size})`]:[...t.values()].map(n=>Wu(n))}:In(t)?Wu(t):Nt(t)&&!dt(t)&&!iv(t)?String(t):t,Wu=(e,t="")=>{var n;return In(e)?`Symbol(${(n=e.description)!=null?n:t})`:e};let Pe;class uv{constructor(t=!1){this.detached=t,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Pe,!t&&Pe&&(this.index=(Pe.scopes||(Pe.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].pause();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].resume();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].resume()}}run(t){if(this._active){const n=Pe;try{return Pe=this,t()}finally{Pe=n}}}on(){++this._on===1&&(this.prevScope=Pe,Pe=this)}off(){this._on>0&&--this._on===0&&(Pe=this.prevScope,this.prevScope=void 0)}stop(t){if(this._active){this._active=!1;let n,s;for(n=0,s=this.effects.length;n<s;n++)this.effects[n].stop();for(this.effects.length=0,n=0,s=this.cleanups.length;n<s;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,s=this.scopes.length;n<s;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!t){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.parent=void 0}}}function qE(e){return new uv(e)}function Fd(){return Pe}function GE(e,t=!1){Pe&&Pe.cleanups.push(e)}let Bt;const qu=new WeakSet;class hv{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Pe&&Pe.active&&Pe.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,qu.has(this)&&(qu.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||fv(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,cg(this),pv(this);const t=Bt,n=vn;Bt=this,vn=!0;try{return this.fn()}finally{gv(this),Bt=t,vn=n,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)Bd(t);this.deps=this.depsTail=void 0,cg(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?qu.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Rh(this)&&this.run()}get dirty(){return Rh(this)}}let dv=0,Bo,Ho;function fv(e,t=!1){if(e.flags|=8,t){e.next=Ho,Ho=e;return}e.next=Bo,Bo=e}function Ud(){dv++}function $d(){if(--dv>0)return;if(Ho){let t=Ho;for(Ho=void 0;t;){const n=t.next;t.next=void 0,t.flags&=-9,t=n}}let e;for(;Bo;){let t=Bo;for(Bo=void 0;t;){const n=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(s){e||(e=s)}t=n}}if(e)throw e}function pv(e){for(let t=e.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function gv(e){let t,n=e.depsTail,s=n;for(;s;){const i=s.prevDep;s.version===-1?(s===n&&(n=i),Bd(s),KE(s)):t=s,s.dep.activeLink=s.prevActiveLink,s.prevActiveLink=void 0,s=i}e.deps=t,e.depsTail=n}function Rh(e){for(let t=e.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(mv(t.dep.computed)||t.dep.version!==t.version))return!0;return!!e._dirty}function mv(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===oa)||(e.globalVersion=oa,!e.isSSR&&e.flags&128&&(!e.deps&&!e._dirty||!Rh(e))))return;e.flags|=2;const t=e.dep,n=Bt,s=vn;Bt=e,vn=!0;try{pv(e);const i=e.fn(e._value);(t.version===0||$s(i,e._value))&&(e.flags|=128,e._value=i,t.version++)}catch(i){throw t.version++,i}finally{Bt=n,vn=s,gv(e),e.flags&=-3}}function Bd(e,t=!1){const{dep:n,prevSub:s,nextSub:i}=e;if(s&&(s.nextSub=i,e.prevSub=void 0),i&&(i.prevSub=s,e.nextSub=void 0),n.subs===e&&(n.subs=s,!s&&n.computed)){n.computed.flags&=-5;for(let r=n.computed.deps;r;r=r.nextDep)Bd(r,!0)}!t&&!--n.sc&&n.map&&n.map.delete(n.key)}function KE(e){const{prevDep:t,nextDep:n}=e;t&&(t.nextDep=n,e.prevDep=void 0),n&&(n.prevDep=t,e.nextDep=void 0)}let vn=!0;const _v=[];function cs(){_v.push(vn),vn=!1}function us(){const e=_v.pop();vn=e===void 0?!0:e}function cg(e){const{cleanup:t}=e;if(e.cleanup=void 0,t){const n=Bt;Bt=void 0;try{t()}finally{Bt=n}}}let oa=0;class QE{constructor(t,n){this.sub=t,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Hd{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(t){if(!Bt||!vn||Bt===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==Bt)n=this.activeLink=new QE(Bt,this),Bt.deps?(n.prevDep=Bt.depsTail,Bt.depsTail.nextDep=n,Bt.depsTail=n):Bt.deps=Bt.depsTail=n,yv(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const s=n.nextDep;s.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=s),n.prevDep=Bt.depsTail,n.nextDep=void 0,Bt.depsTail.nextDep=n,Bt.depsTail=n,Bt.deps===n&&(Bt.deps=s)}return n}trigger(t){this.version++,oa++,this.notify(t)}notify(t){Ud();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{$d()}}}function yv(e){if(e.dep.sc++,e.sub.flags&4){const t=e.dep.computed;if(t&&!e.dep.subs){t.flags|=20;for(let s=t.deps;s;s=s.nextDep)yv(s)}const n=e.dep.subs;n!==e&&(e.prevSub=n,n&&(n.nextSub=e)),e.dep.subs=e}}const Yl=new WeakMap,Pi=Symbol(""),Ph=Symbol(""),aa=Symbol("");function De(e,t,n){if(vn&&Bt){let s=Yl.get(e);s||Yl.set(e,s=new Map);let i=s.get(n);i||(s.set(n,i=new Hd),i.map=s,i.key=n),i.track()}}function ss(e,t,n,s,i,r){const o=Yl.get(e);if(!o){oa++;return}const a=l=>{l&&l.trigger()};if(Ud(),t==="clear")o.forEach(a);else{const l=dt(e),c=l&&Bc(n);if(l&&n==="length"){const h=Number(s);o.forEach((d,f)=>{(f==="length"||f===aa||!In(f)&&f>=h)&&a(d)})}else switch((n!==void 0||o.has(void 0))&&a(o.get(n)),c&&a(o.get(aa)),t){case"add":l?c&&a(o.get("length")):(a(o.get(Pi)),yr(e)&&a(o.get(Ph)));break;case"delete":l||(a(o.get(Pi)),yr(e)&&a(o.get(Ph)));break;case"set":yr(e)&&a(o.get(Pi));break}}$d()}function YE(e,t){const n=Yl.get(e);return n&&n.get(t)}function ir(e){const t=St(e);return t===e?t:(De(t,"iterate",aa),nn(e)?t:t.map(Sn))}function Gc(e){return De(e=St(e),"iterate",aa),e}function Rs(e,t){return zn(e)?Bs(e)?Pr(Sn(t)):Pr(t):Sn(t)}const XE={__proto__:null,[Symbol.iterator](){return Gu(this,Symbol.iterator,e=>Rs(this,e))},concat(...e){return ir(this).concat(...e.map(t=>dt(t)?ir(t):t))},entries(){return Gu(this,"entries",e=>(e[1]=Rs(this,e[1]),e))},every(e,t){return Qn(this,"every",e,t,void 0,arguments)},filter(e,t){return Qn(this,"filter",e,t,n=>n.map(s=>Rs(this,s)),arguments)},find(e,t){return Qn(this,"find",e,t,n=>Rs(this,n),arguments)},findIndex(e,t){return Qn(this,"findIndex",e,t,void 0,arguments)},findLast(e,t){return Qn(this,"findLast",e,t,n=>Rs(this,n),arguments)},findLastIndex(e,t){return Qn(this,"findLastIndex",e,t,void 0,arguments)},forEach(e,t){return Qn(this,"forEach",e,t,void 0,arguments)},includes(...e){return Ku(this,"includes",e)},indexOf(...e){return Ku(this,"indexOf",e)},join(e){return ir(this).join(e)},lastIndexOf(...e){return Ku(this,"lastIndexOf",e)},map(e,t){return Qn(this,"map",e,t,void 0,arguments)},pop(){return Eo(this,"pop")},push(...e){return Eo(this,"push",e)},reduce(e,...t){return ug(this,"reduce",e,t)},reduceRight(e,...t){return ug(this,"reduceRight",e,t)},shift(){return Eo(this,"shift")},some(e,t){return Qn(this,"some",e,t,void 0,arguments)},splice(...e){return Eo(this,"splice",e)},toReversed(){return ir(this).toReversed()},toSorted(e){return ir(this).toSorted(e)},toSpliced(...e){return ir(this).toSpliced(...e)},unshift(...e){return Eo(this,"unshift",e)},values(){return Gu(this,"values",e=>Rs(this,e))}};function Gu(e,t,n){const s=Gc(e),i=s[t]();return s!==e&&!nn(e)&&(i._next=i.next,i.next=()=>{const r=i._next();return r.done||(r.value=n(r.value)),r}),i}const JE=Array.prototype;function Qn(e,t,n,s,i,r){const o=Gc(e),a=o!==e&&!nn(e),l=o[t];if(l!==JE[t]){const d=l.apply(e,r);return a?Sn(d):d}let c=n;o!==e&&(a?c=function(d,f){return n.call(this,Rs(e,d),f,e)}:n.length>2&&(c=function(d,f){return n.call(this,d,f,e)}));const h=l.call(o,c,s);return a&&i?i(h):h}function ug(e,t,n,s){const i=Gc(e);let r=n;return i!==e&&(nn(e)?n.length>3&&(r=function(o,a,l){return n.call(this,o,a,l,e)}):r=function(o,a,l){return n.call(this,o,Rs(e,a),l,e)}),i[t](r,...s)}function Ku(e,t,n){const s=St(e);De(s,"iterate",aa);const i=s[t](...n);return(i===-1||i===!1)&&Gr(n[0])?(n[0]=St(n[0]),s[t](...n)):i}function Eo(e,t,n=[]){cs(),Ud();const s=St(e)[t].apply(e,n);return $d(),us(),s}const ZE=Od("__proto__,__v_isRef,__isVue"),vv=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(In));function t1(e){In(e)||(e=String(e));const t=St(this);return De(t,"has",e),t.hasOwnProperty(e)}class bv{constructor(t=!1,n=!1){this._isReadonly=t,this._isShallow=n}get(t,n,s){if(n==="__v_skip")return t.__v_skip;const i=this._isReadonly,r=this._isShallow;if(n==="__v_isReactive")return!i;if(n==="__v_isReadonly")return i;if(n==="__v_isShallow")return r;if(n==="__v_raw")return s===(i?r?u1:Iv:r?Ev:Tv).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(s)?t:void 0;const o=dt(t);if(!i){let l;if(o&&(l=XE[n]))return l;if(n==="hasOwnProperty")return t1}const a=Reflect.get(t,n,ae(t)?t:s);if((In(n)?vv.has(n):ZE(n))||(i||De(t,"get",n),r))return a;if(ae(a)){const l=o&&Bc(n)?a:a.value;return i&&Nt(l)?Dh(l):l}return Nt(a)?i?Dh(a):Qs(a):a}}class wv extends bv{constructor(t=!1){super(!1,t)}set(t,n,s,i){let r=t[n];const o=dt(t)&&Bc(n);if(!this._isShallow){const c=zn(r);if(!nn(s)&&!zn(s)&&(r=St(r),s=St(s)),!o&&ae(r)&&!ae(s))return c||(r.value=s),!0}const a=o?Number(n)<t.length:Dt(t,n),l=Reflect.set(t,n,s,ae(t)?t:i);return t===St(i)&&(a?$s(s,r)&&ss(t,"set",n,s):ss(t,"add",n,s)),l}deleteProperty(t,n){const s=Dt(t,n);t[n];const i=Reflect.deleteProperty(t,n);return i&&s&&ss(t,"delete",n,void 0),i}has(t,n){const s=Reflect.has(t,n);return(!In(n)||!vv.has(n))&&De(t,"has",n),s}ownKeys(t){return De(t,"iterate",dt(t)?"length":Pi),Reflect.ownKeys(t)}}class e1 extends bv{constructor(t=!1){super(!0,t)}set(t,n){return!0}deleteProperty(t,n){return!0}}const n1=new wv,s1=new e1,i1=new wv(!0);const Mh=e=>e,il=e=>Reflect.getPrototypeOf(e);function r1(e,t,n){return function(...s){const i=this.__v_raw,r=St(i),o=yr(r),a=e==="entries"||e===Symbol.iterator&&o,l=e==="keys"&&o,c=i[e](...s),h=n?Mh:t?Pr:Sn;return!t&&De(r,"iterate",l?Ph:Pi),{next(){const{value:d,done:f}=c.next();return f?{value:d,done:f}:{value:a?[h(d[0]),h(d[1])]:h(d),done:f}},[Symbol.iterator](){return this}}}}function rl(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function o1(e,t){const n={get(i){const r=this.__v_raw,o=St(r),a=St(i);e||($s(i,a)&&De(o,"get",i),De(o,"get",a));const{has:l}=il(o),c=t?Mh:e?Pr:Sn;if(l.call(o,i))return c(r.get(i));if(l.call(o,a))return c(r.get(a));r!==o&&r.get(i)},get size(){const i=this.__v_raw;return!e&&De(St(i),"iterate",Pi),i.size},has(i){const r=this.__v_raw,o=St(r),a=St(i);return e||($s(i,a)&&De(o,"has",i),De(o,"has",a)),i===a?r.has(i):r.has(i)||r.has(a)},forEach(i,r){const o=this,a=o.__v_raw,l=St(a),c=t?Mh:e?Pr:Sn;return!e&&De(l,"iterate",Pi),a.forEach((h,d)=>i.call(r,c(h),c(d),o))}};return be(n,e?{add:rl("add"),set:rl("set"),delete:rl("delete"),clear:rl("clear")}:{add(i){!t&&!nn(i)&&!zn(i)&&(i=St(i));const r=St(this);return il(r).has.call(r,i)||(r.add(i),ss(r,"add",i,i)),this},set(i,r){!t&&!nn(r)&&!zn(r)&&(r=St(r));const o=St(this),{has:a,get:l}=il(o);let c=a.call(o,i);c||(i=St(i),c=a.call(o,i));const h=l.call(o,i);return o.set(i,r),c?$s(r,h)&&ss(o,"set",i,r):ss(o,"add",i,r),this},delete(i){const r=St(this),{has:o,get:a}=il(r);let l=o.call(r,i);l||(i=St(i),l=o.call(r,i)),a&&a.call(r,i);const c=r.delete(i);return l&&ss(r,"delete",i,void 0),c},clear(){const i=St(this),r=i.size!==0,o=i.clear();return r&&ss(i,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(i=>{n[i]=r1(i,e,t)}),n}function jd(e,t){const n=o1(e,t);return(s,i,r)=>i==="__v_isReactive"?!e:i==="__v_isReadonly"?e:i==="__v_raw"?s:Reflect.get(Dt(n,i)&&i in s?n:s,i,r)}const a1={get:jd(!1,!1)},l1={get:jd(!1,!0)},c1={get:jd(!0,!1)};const Tv=new WeakMap,Ev=new WeakMap,Iv=new WeakMap,u1=new WeakMap;function h1(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function d1(e){return e.__v_skip||!Object.isExtensible(e)?0:h1(OE(e))}function Qs(e){return zn(e)?e:zd(e,!1,n1,a1,Tv)}function fr(e){return zd(e,!1,i1,l1,Ev)}function Dh(e){return zd(e,!0,s1,c1,Iv)}function zd(e,t,n,s,i){if(!Nt(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const r=d1(e);if(r===0)return e;const o=i.get(e);if(o)return o;const a=new Proxy(e,r===2?s:n);return i.set(e,a),a}function Bs(e){return zn(e)?Bs(e.__v_raw):!!(e&&e.__v_isReactive)}function zn(e){return!!(e&&e.__v_isReadonly)}function nn(e){return!!(e&&e.__v_isShallow)}function Gr(e){return e?!!e.__v_raw:!1}function St(e){const t=e&&e.__v_raw;return t?St(t):e}function f1(e){return!Dt(e,"__v_skip")&&Object.isExtensible(e)&&rv(e,"__v_skip",!0),e}const Sn=e=>Nt(e)?Qs(e):e,Pr=e=>Nt(e)?Dh(e):e;function ae(e){return e?e.__v_isRef===!0:!1}function lt(e){return Sv(e,!1)}function Vi(e){return Sv(e,!0)}function Sv(e,t){return ae(e)?e:new p1(e,t)}class p1{constructor(t,n){this.dep=new Hd,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?t:St(t),this._value=n?t:Sn(t),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(t){const n=this._rawValue,s=this.__v_isShallow||nn(t)||zn(t);t=s?t:St(t),$s(t,n)&&(this._rawValue=t,this._value=s?t:Sn(t),this.dep.trigger())}}function Ht(e){return ae(e)?e.value:e}function g1(e){return pt(e)?e():Ht(e)}const m1={get:(e,t,n)=>t==="__v_raw"?e:Ht(Reflect.get(e,t,n)),set:(e,t,n,s)=>{const i=e[t];return ae(i)&&!ae(n)?(i.value=n,!0):Reflect.set(e,t,n,s)}};function Av(e){return Bs(e)?e:new Proxy(e,m1)}class _1{constructor(t,n,s){this._object=t,this._key=n,this._defaultValue=s,this.__v_isRef=!0,this._value=void 0,this._raw=St(t);let i=!0,r=t;if(!dt(t)||!Bc(String(n)))do i=!Gr(r)||nn(r);while(i&&(r=r.__v_raw));this._shallow=i}get value(){let t=this._object[this._key];return this._shallow&&(t=Ht(t)),this._value=t===void 0?this._defaultValue:t}set value(t){if(this._shallow&&ae(this._raw[this._key])){const n=this._object[this._key];if(ae(n)){n.value=t;return}}this._object[this._key]=t}get dep(){return YE(this._raw,this._key)}}class y1{constructor(t){this._getter=t,this.__v_isRef=!0,this.__v_isReadonly=!0,this._value=void 0}get value(){return this._value=this._getter()}}function v1(e,t,n){return ae(e)?e:pt(e)?new y1(e):Nt(e)&&arguments.length>1?b1(e,t,n):lt(e)}function b1(e,t,n){return new _1(e,t,n)}class w1{constructor(t,n,s){this.fn=t,this.setter=n,this._value=void 0,this.dep=new Hd(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=oa-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=s}notify(){if(this.flags|=16,!(this.flags&8)&&Bt!==this)return fv(this,!0),!0}get value(){const t=this.dep.track();return mv(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function T1(e,t,n=!1){let s,i;return pt(e)?s=e:(s=e.get,i=e.set),new w1(s,i,n)}const ol={},Xl=new WeakMap;let wi;function E1(e,t=!1,n=wi){if(n){let s=Xl.get(n);s||Xl.set(n,s=[]),s.push(e)}}function I1(e,t,n=Ut){const{immediate:s,deep:i,once:r,scheduler:o,augmentJob:a,call:l}=n,c=x=>i?x:nn(x)||i===!1||i===0?is(x,1):is(x);let h,d,f,p,_=!1,y=!1;if(ae(e)?(d=()=>e.value,_=nn(e)):Bs(e)?(d=()=>c(e),_=!0):dt(e)?(y=!0,_=e.some(x=>Bs(x)||nn(x)),d=()=>e.map(x=>{if(ae(x))return x.value;if(Bs(x))return c(x);if(pt(x))return l?l(x,2):x()})):pt(e)?t?d=l?()=>l(e,2):e:d=()=>{if(f){cs();try{f()}finally{us()}}const x=wi;wi=h;try{return l?l(e,3,[p]):e(p)}finally{wi=x}}:d=Vn,t&&i){const x=d,O=i===!0?1/0:i;d=()=>is(x(),O)}const v=Fd(),w=()=>{h.stop(),v&&v.active&&Nd(v.effects,h)};if(r&&t){const x=t;t=(...O)=>{x(...O),w()}}let M=y?new Array(e.length).fill(ol):ol;const E=x=>{if(!(!(h.flags&1)||!h.dirty&&!x))if(t){const O=h.run();if(i||_||(y?O.some((V,A)=>$s(V,M[A])):$s(O,M))){f&&f();const V=wi;wi=h;try{const A=[O,M===ol?void 0:y&&M[0]===ol?[]:M,p];M=O,l?l(t,3,A):t(...A)}finally{wi=V}}}else h.run()};return a&&a(E),h=new hv(d),h.scheduler=o?()=>o(E,!1):E,p=x=>E1(x,!1,h),f=h.onStop=()=>{const x=Xl.get(h);if(x){if(l)l(x,4);else for(const O of x)O();Xl.delete(h)}},t?s?E(!0):M=h.run():o?o(E.bind(null,!0),!0):h.run(),w.pause=h.pause.bind(h),w.resume=h.resume.bind(h),w.stop=w,w}function is(e,t=1/0,n){if(t<=0||!Nt(e)||e.__v_skip||(n=n||new Map,(n.get(e)||0)>=t))return e;if(n.set(e,t),t--,ae(e))is(e.value,t,n);else if(dt(e))for(let s=0;s<e.length;s++)is(e[s],t,n);else if($c(e)||yr(e))e.forEach(s=>{is(s,t,n)});else if(iv(e)){for(const s in e)is(e[s],t,n);for(const s of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,s)&&is(e[s],t,n)}return e}function Ra(e,t,n,s){try{return s?e(...s):e()}catch(i){Kr(i,t,n)}}function An(e,t,n,s){if(pt(e)){const i=Ra(e,t,n,s);return i&&Vd(i)&&i.catch(r=>{Kr(r,t,n)}),i}if(dt(e)){const i=[];for(let r=0;r<e.length;r++)i.push(An(e[r],t,n,s));return i}}function Kr(e,t,n,s=!0){const i=t?t.vnode:null,{errorHandler:r,throwUnhandledErrorInProduction:o}=t&&t.appContext.config||Ut;if(t){let a=t.parent;const l=t.proxy,c=`https://vuejs.org/error-reference/#runtime-${n}`;for(;a;){const h=a.ec;if(h){for(let d=0;d<h.length;d++)if(h[d](e,l,c)===!1)return}a=a.parent}if(r){cs(),Ra(r,null,10,[e,l,c]),us();return}}S1(e,n,i,s,o)}function S1(e,t,n,s=!0,i=!1){if(i)throw e;console.error(e)}const Be=[];let Mn=-1;const br=[];let Ps=null,lr=0;const kv=Promise.resolve();let Jl=null;function Kc(e){const t=Jl||kv;return e?t.then(this?e.bind(this):e):t}function A1(e){let t=Mn+1,n=Be.length;for(;t<n;){const s=t+n>>>1,i=Be[s],r=la(i);r<e||r===e&&i.flags&2?t=s+1:n=s}return t}function Wd(e){if(!(e.flags&1)){const t=la(e),n=Be[Be.length-1];!n||!(e.flags&2)&&t>=la(n)?Be.push(e):Be.splice(A1(t),0,e),e.flags|=1,Cv()}}function Cv(){Jl||(Jl=kv.then(xv))}function Oh(e){dt(e)?br.push(...e):Ps&&e.id===-1?Ps.splice(lr+1,0,e):e.flags&1||(br.push(e),e.flags|=1),Cv()}function hg(e,t,n=Mn+1){for(;n<Be.length;n++){const s=Be[n];if(s&&s.flags&2){if(e&&s.id!==e.uid)continue;Be.splice(n,1),n--,s.flags&4&&(s.flags&=-2),s(),s.flags&4||(s.flags&=-2)}}}function Zl(e){if(br.length){const t=[...new Set(br)].sort((n,s)=>la(n)-la(s));if(br.length=0,Ps){Ps.push(...t);return}for(Ps=t,lr=0;lr<Ps.length;lr++){const n=Ps[lr];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}Ps=null,lr=0}}const la=e=>e.id==null?e.flags&2?-1:1/0:e.id;function xv(e){try{for(Mn=0;Mn<Be.length;Mn++){const t=Be[Mn];t&&!(t.flags&8)&&(t.flags&4&&(t.flags&=-2),Ra(t,t.i,t.i?15:14),t.flags&4||(t.flags&=-2))}}finally{for(;Mn<Be.length;Mn++){const t=Be[Mn];t&&(t.flags&=-2)}Mn=-1,Be.length=0,Zl(),Jl=null,(Be.length||br.length)&&xv()}}let Ae=null,Rv=null;function tc(e){const t=Ae;return Ae=e,Rv=e&&e.type.__scopeId||null,t}function ke(e,t=Ae,n){if(!t||e._n)return e;const s=(...i)=>{s._d&&sc(-1);const r=tc(t);let o;try{o=e(...i)}finally{tc(r),s._d&&sc(1)}return o};return s._n=!0,s._c=!0,s._d=!0,s}function ki(e,t){if(Ae===null)return e;const n=Zc(Ae),s=e.dirs||(e.dirs=[]);for(let i=0;i<t.length;i++){let[r,o,a,l=Ut]=t[i];r&&(pt(r)&&(r={mounted:r,updated:r}),r.deep&&is(o),s.push({dir:r,instance:n,value:o,oldValue:void 0,arg:a,modifiers:l}))}return e}function On(e,t,n,s){const i=e.dirs,r=t&&t.dirs;for(let o=0;o<i.length;o++){const a=i[o];r&&(a.oldValue=r[o].value);let l=a.dir[s];l&&(cs(),An(l,n,8,[e.el,a,e,t]),us())}}function qd(e,t){if(Se){let n=Se.provides;const s=Se.parent&&Se.parent.provides;s===n&&(n=Se.provides=Object.create(s)),n[e]=t}}function Mi(e,t,n=!1){const s=Qr();if(s||Oi){let i=Oi?Oi._context.provides:s?s.parent==null||s.ce?s.vnode.appContext&&s.vnode.appContext.provides:s.parent.provides:void 0;if(i&&e in i)return i[e];if(arguments.length>1)return n&&pt(t)?t.call(s&&s.proxy):t}}function Qc(){return!!(Qr()||Oi)}const k1=Symbol.for("v-scx"),C1=()=>Mi(k1);function x1(e,t){return Gd(e,null,t)}function jo(e,t,n){return Gd(e,t,n)}function Gd(e,t,n=Ut){const{immediate:s,deep:i,flush:r,once:o}=n,a=be({},n),l=t&&s||!t&&r!=="post";let c;if(Or){if(r==="sync"){const p=C1();c=p.__watcherHandles||(p.__watcherHandles=[])}else if(!l){const p=()=>{};return p.stop=Vn,p.resume=Vn,p.pause=Vn,p}}const h=Se;a.call=(p,_,y)=>An(p,h,_,y);let d=!1;r==="post"?a.scheduler=p=>{We(p,h&&h.suspense)}:r!=="sync"&&(d=!0,a.scheduler=(p,_)=>{_?p():Wd(p)}),a.augmentJob=p=>{t&&(p.flags|=4),d&&(p.flags|=2,h&&(p.id=h.uid,p.i=h))};const f=I1(e,t,a);return Or&&(c?c.push(f):l&&f()),f}function R1(e,t,n){const s=this.proxy,i=Yt(e)?e.includes(".")?Pv(s,e):()=>s[e]:e.bind(s,s);let r;pt(t)?r=t:(r=t.handler,n=t);const o=Ma(this),a=Gd(i,r.bind(s),n);return o(),a}function Pv(e,t){const n=t.split(".");return()=>{let s=e;for(let i=0;i<n.length&&s;i++)s=s[n[i]];return s}}const P1=Symbol("_vte"),Mv=e=>e.__isTeleport,es=Symbol("_leaveCb"),al=Symbol("_enterCb");function M1(){const e={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Ys(()=>{e.isMounted=!0}),Qd(()=>{e.isUnmounting=!0}),e}const sn=[Function,Array],Dv={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:sn,onEnter:sn,onAfterEnter:sn,onEnterCancelled:sn,onBeforeLeave:sn,onLeave:sn,onAfterLeave:sn,onLeaveCancelled:sn,onBeforeAppear:sn,onAppear:sn,onAfterAppear:sn,onAppearCancelled:sn},Ov=e=>{const t=e.subTree;return t.component?Ov(t.component):t},D1={name:"BaseTransition",props:Dv,setup(e,{slots:t}){const n=Qr(),s=M1();return()=>{const i=t.default&&Vv(t.default(),!0);if(!i||!i.length)return;const r=Lv(i),o=St(e),{mode:a}=o;if(s.isLeaving)return Qu(r);const l=dg(r);if(!l)return Qu(r);let c=Lh(l,o,s,n,d=>c=d);l.type!==he&&ca(l,c);let h=n.subTree&&dg(n.subTree);if(h&&h.type!==he&&!Nn(h,l)&&Ov(n).type!==he){let d=Lh(h,o,s,n);if(ca(h,d),a==="out-in"&&l.type!==he)return s.isLeaving=!0,d.afterLeave=()=>{s.isLeaving=!1,n.job.flags&8||n.update(),delete d.afterLeave,h=void 0},Qu(r);a==="in-out"&&l.type!==he?d.delayLeave=(f,p,_)=>{const y=Nv(s,h);y[String(h.key)]=h,f[es]=()=>{p(),f[es]=void 0,delete c.delayedLeave,h=void 0},c.delayedLeave=()=>{_(),delete c.delayedLeave,h=void 0}}:h=void 0}else h&&(h=void 0);return r}}};function Lv(e){let t=e[0];if(e.length>1){for(const n of e)if(n.type!==he){t=n;break}}return t}const O1=D1;function Nv(e,t){const{leavingVNodes:n}=e;let s=n.get(t.type);return s||(s=Object.create(null),n.set(t.type,s)),s}function Lh(e,t,n,s,i){const{appear:r,mode:o,persisted:a=!1,onBeforeEnter:l,onEnter:c,onAfterEnter:h,onEnterCancelled:d,onBeforeLeave:f,onLeave:p,onAfterLeave:_,onLeaveCancelled:y,onBeforeAppear:v,onAppear:w,onAfterAppear:M,onAppearCancelled:E}=t,x=String(e.key),O=Nv(n,e),V=(T,k)=>{T&&An(T,s,9,k)},A=(T,k)=>{const P=k[1];V(T,k),dt(T)?T.every(R=>R.length<=1)&&P():T.length<=1&&P()},b={mode:o,persisted:a,beforeEnter(T){let k=l;if(!n.isMounted)if(r)k=v||l;else return;T[es]&&T[es](!0);const P=O[x];P&&Nn(e,P)&&P.el[es]&&P.el[es](),V(k,[T])},enter(T){let k=c,P=h,R=d;if(!n.isMounted)if(r)k=w||c,P=M||h,R=E||d;else return;let C=!1;const rt=T[al]=at=>{C||(C=!0,at?V(R,[T]):V(P,[T]),b.delayedLeave&&b.delayedLeave(),T[al]=void 0)};k?A(k,[T,rt]):rt()},leave(T,k){const P=String(e.key);if(T[al]&&T[al](!0),n.isUnmounting)return k();V(f,[T]);let R=!1;const C=T[es]=rt=>{R||(R=!0,k(),rt?V(y,[T]):V(_,[T]),T[es]=void 0,O[P]===e&&delete O[P])};O[P]=e,p?A(p,[T,C]):C()},clone(T){const k=Lh(T,t,n,s,i);return i&&i(k),k}};return b}function Qu(e){if(Pa(e))return e=bn(e),e.children=null,e}function dg(e){if(!Pa(e))return Mv(e.type)&&e.children?Lv(e.children):e;if(e.component)return e.component.subTree;const{shapeFlag:t,children:n}=e;if(n){if(t&16)return n[0];if(t&32&&pt(n.default))return n.default()}}function ca(e,t){e.shapeFlag&6&&e.component?(e.transition=t,ca(e.component.subTree,t)):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function Vv(e,t=!1,n){let s=[],i=0;for(let r=0;r<e.length;r++){let o=e[r];const a=n==null?o.key:String(n)+String(o.key!=null?o.key:r);o.type===bt?(o.patchFlag&128&&i++,s=s.concat(Vv(o.children,t,a))):(t||o.type!==he)&&s.push(a!=null?bn(o,{key:a}):o)}if(i>1)for(let r=0;r<s.length;r++)s[r].patchFlag=-2;return s}function Vt(e,t){return pt(e)?be({name:e.name},t,{setup:e}):e}function Kd(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}const ec=new WeakMap;function wr(e,t,n,s,i=!1){if(dt(e)){e.forEach((_,y)=>wr(_,t&&(dt(t)?t[y]:t),n,s,i));return}if(Di(s)&&!i){s.shapeFlag&512&&s.type.__asyncResolved&&s.component.subTree.component&&wr(e,t,n,s.component.subTree);return}const r=s.shapeFlag&4?Zc(s.component):s.el,o=i?null:r,{i:a,r:l}=e,c=t&&t.r,h=a.refs===Ut?a.refs={}:a.refs,d=a.setupState,f=St(d),p=d===Ut?nv:_=>Dt(f,_);if(c!=null&&c!==l){if(fg(t),Yt(c))h[c]=null,p(c)&&(d[c]=null);else if(ae(c)){c.value=null;const _=t;_.k&&(h[_.k]=null)}}if(pt(l))Ra(l,a,12,[o,h]);else{const _=Yt(l),y=ae(l);if(_||y){const v=()=>{if(e.f){const w=_?p(l)?d[l]:h[l]:l.value;if(i)dt(w)&&Nd(w,r);else if(dt(w))w.includes(r)||w.push(r);else if(_)h[l]=[r],p(l)&&(d[l]=h[l]);else{const M=[r];l.value=M,e.k&&(h[e.k]=M)}}else _?(h[l]=o,p(l)&&(d[l]=o)):y&&(l.value=o,e.k&&(h[e.k]=o))};if(o){const w=()=>{v(),ec.delete(e)};w.id=-1,ec.set(e,w),We(w,n)}else fg(e),v()}}}function fg(e){const t=ec.get(e);t&&(t.flags|=8,ec.delete(e))}let pg=!1;const rr=()=>{pg||(console.error("Hydration completed but contains mismatches."),pg=!0)},L1=e=>e.namespaceURI.includes("svg")&&e.tagName!=="foreignObject",N1=e=>e.namespaceURI.includes("MathML"),ll=e=>{if(e.nodeType===1){if(L1(e))return"svg";if(N1(e))return"mathml"}},pr=e=>e.nodeType===8;function V1(e){const{mt:t,p:n,o:{patchProp:s,createText:i,nextSibling:r,parentNode:o,remove:a,insert:l,createComment:c}}=e,h=(E,x)=>{if(!x.hasChildNodes()){n(null,E,x),Zl(),x._vnode=E;return}d(x.firstChild,E,null,null,null),Zl(),x._vnode=E},d=(E,x,O,V,A,b=!1)=>{b=b||!!x.dynamicChildren;const T=pr(E)&&E.data==="[",k=()=>y(E,x,O,V,A,T),{type:P,ref:R,shapeFlag:C,patchFlag:rt}=x;let at=E.nodeType;x.el=E,rt===-2&&(b=!1,x.dynamicChildren=null);let Z=null;switch(P){case Li:at!==3?x.children===""?(l(x.el=i(""),o(E),E),Z=E):Z=k():(E.data!==x.children&&(rr(),E.data=x.children),Z=r(E));break;case he:M(E)?(Z=r(E),w(x.el=E.content.firstChild,E,O)):at!==8||T?Z=k():Z=r(E);break;case Wo:if(T&&(E=r(E),at=E.nodeType),at===1||at===3){Z=E;const ot=!x.children.length;for(let et=0;et<x.staticCount;et++)ot&&(x.children+=Z.nodeType===1?Z.outerHTML:Z.data),et===x.staticCount-1&&(x.anchor=Z),Z=r(Z);return T?r(Z):Z}else k();break;case bt:T?Z=_(E,x,O,V,A,b):Z=k();break;default:if(C&1)(at!==1||x.type.toLowerCase()!==E.tagName.toLowerCase())&&!M(E)?Z=k():Z=f(E,x,O,V,A,b);else if(C&6){x.slotScopeIds=A;const ot=o(E);if(T?Z=v(E):pr(E)&&E.data==="teleport start"?Z=v(E,E.data,"teleport end"):Z=r(E),t(x,ot,null,O,V,ll(ot),b),Di(x)&&!x.type.__asyncResolved){let et;T?(et=ht(bt),et.anchor=Z?Z.previousSibling:ot.lastChild):et=E.nodeType===3?$t(""):ht("div"),et.el=E,x.component.subTree=et}}else C&64?at!==8?Z=k():Z=x.type.hydrate(E,x,O,V,A,b,e,p):C&128&&(Z=x.type.hydrate(E,x,O,V,ll(o(E)),A,b,e,d))}return R!=null&&wr(R,null,V,x),Z},f=(E,x,O,V,A,b)=>{b=b||!!x.dynamicChildren;const{type:T,props:k,patchFlag:P,shapeFlag:R,dirs:C,transition:rt}=x,at=T==="input"||T==="option";if(at||P!==-1){C&&On(x,null,O,"created");let Z=!1;if(M(E)){Z=sb(null,rt)&&O&&O.vnode.props&&O.vnode.props.appear;const et=E.content.firstChild;if(Z){const Ct=et.getAttribute("class");Ct&&(et.$cls=Ct),rt.beforeEnter(et)}w(et,E,O),x.el=E=et}if(R&16&&!(k&&(k.innerHTML||k.textContent))){let et=p(E.firstChild,x,E,O,V,A,b);for(;et;){cl(E,1)||rr();const Ct=et;et=et.nextSibling,a(Ct)}}else if(R&8){let et=x.children;et[0]===`
`&&(E.tagName==="PRE"||E.tagName==="TEXTAREA")&&(et=et.slice(1));const{textContent:Ct}=E;Ct!==et&&Ct!==et.replace(/\r\n|\r/g,`
`)&&(cl(E,0)||rr(),E.textContent=x.children)}if(k){if(at||!b||P&48){const et=E.tagName.includes("-");for(const Ct in k)(at&&(Ct.endsWith("value")||Ct==="indeterminate")||Ca(Ct)&&!vr(Ct)||Ct[0]==="."||et)&&s(E,Ct,null,k[Ct],void 0,O)}else if(k.onClick)s(E,"onClick",null,k.onClick,void 0,O);else if(P&4&&Bs(k.style))for(const et in k.style)k.style[et]}let ot;(ot=k&&k.onVnodeBeforeMount)&&an(ot,O,x),C&&On(x,null,O,"beforeMount"),((ot=k&&k.onVnodeMounted)||C||Z)&&cb(()=>{ot&&an(ot,O,x),Z&&rt.enter(E),C&&On(x,null,O,"mounted")},V)}return E.nextSibling},p=(E,x,O,V,A,b,T)=>{T=T||!!x.dynamicChildren;const k=x.children,P=k.length;for(let R=0;R<P;R++){const C=T?k[R]:k[R]=Ze(k[R]),rt=C.type===Li;E?(rt&&!T&&R+1<P&&Ze(k[R+1]).type===Li&&(l(i(E.data.slice(C.children.length)),O,r(E)),E.data=C.children),E=d(E,C,V,A,b,T)):rt&&!C.children?l(C.el=i(""),O):(cl(O,1)||rr(),n(null,C,O,null,V,A,ll(O),b))}return E},_=(E,x,O,V,A,b)=>{const{slotScopeIds:T}=x;T&&(A=A?A.concat(T):T);const k=o(E),P=p(r(E),x,k,O,V,A,b);return P&&pr(P)&&P.data==="]"?r(x.anchor=P):(rr(),l(x.anchor=c("]"),k,P),P)},y=(E,x,O,V,A,b)=>{if(cl(E.parentElement,1)||rr(),x.el=null,b){const P=v(E);for(;;){const R=r(E);if(R&&R!==P)a(R);else break}}const T=r(E),k=o(E);return a(E),n(null,x,k,T,O,V,ll(k),A),O&&(O.vnode.el=x.el,Jc(O,x.el)),T},v=(E,x="[",O="]")=>{let V=0;for(;E;)if(E=r(E),E&&pr(E)&&(E.data===x&&V++,E.data===O)){if(V===0)return r(E);V--}return E},w=(E,x,O)=>{const V=x.parentNode;V&&V.replaceChild(E,x);let A=O;for(;A;)A.vnode.el===x&&(A.vnode.el=A.subTree.el=E),A=A.parent},M=E=>E.nodeType===1&&E.tagName==="TEMPLATE";return[h,d]}const gg="data-allow-mismatch",F1={0:"text",1:"children",2:"class",3:"style",4:"attribute"};function cl(e,t){if(t===0||t===1)for(;e&&!e.hasAttribute(gg);)e=e.parentElement;const n=e&&e.getAttribute(gg);if(n==null)return!1;if(n==="")return!0;{const s=n.split(",");return t===0&&s.includes("children")?!0:s.includes(F1[t])}}Wc().requestIdleCallback;Wc().cancelIdleCallback;function U1(e,t){if(pr(e)&&e.data==="["){let n=1,s=e.nextSibling;for(;s;){if(s.nodeType===1){if(t(s)===!1)break}else if(pr(s))if(s.data==="]"){if(--n===0)break}else s.data==="["&&n++;s=s.nextSibling}}else t(e)}const Di=e=>!!e.type.__asyncLoader;function mg(e){pt(e)&&(e={loader:e});const{loader:t,loadingComponent:n,errorComponent:s,delay:i=200,hydrate:r,timeout:o,suspensible:a=!0,onError:l}=e;let c=null,h,d=0;const f=()=>(d++,c=null,p()),p=()=>{let _;return c||(_=c=t().catch(y=>{if(y=y instanceof Error?y:new Error(String(y)),l)return new Promise((v,w)=>{l(y,()=>v(f()),()=>w(y),d+1)});throw y}).then(y=>_!==c&&c?c:(y&&(y.__esModule||y[Symbol.toStringTag]==="Module")&&(y=y.default),h=y,y)))};return Vt({name:"AsyncComponentWrapper",__asyncLoader:p,__asyncHydrate(_,y,v){let w=!1;(y.bu||(y.bu=[])).push(()=>w=!0);const M=()=>{w||v()},E=r?()=>{const x=r(M,O=>U1(_,O));x&&(y.bum||(y.bum=[])).push(x)}:M;h?E():p().then(()=>!y.isUnmounted&&E())},get __asyncResolved(){return h},setup(){const _=Se;if(Kd(_),h)return()=>ul(h,_);const y=E=>{c=null,Kr(E,_,13,!s)};if(a&&_.suspense||Or)return p().then(E=>()=>ul(E,_)).catch(E=>(y(E),()=>s?ht(s,{error:E}):null));const v=lt(!1),w=lt(),M=lt(!!i);return i&&setTimeout(()=>{M.value=!1},i),o!=null&&setTimeout(()=>{if(!v.value&&!w.value){const E=new Error(`Async component timed out after ${o}ms.`);y(E),w.value=E}},o),p().then(()=>{v.value=!0,_.parent&&Pa(_.parent.vnode)&&_.parent.update()}).catch(E=>{y(E),w.value=E}),()=>{if(v.value&&h)return ul(h,_);if(w.value&&s)return ht(s,{error:w.value});if(n&&!M.value)return ul(n,_)}}})}function ul(e,t){const{ref:n,props:s,children:i,ce:r}=t.vnode,o=ht(e,s,i);return o.ref=n,o.ce=r,delete t.vnode.ce,o}const Pa=e=>e.type.__isKeepAlive;function Fv(e,t){$v(e,"a",t)}function Uv(e,t){$v(e,"da",t)}function $v(e,t,n=Se){const s=e.__wdc||(e.__wdc=()=>{let i=n;for(;i;){if(i.isDeactivated)return;i=i.parent}return e()});if(Yc(t,s,n),n){let i=n.parent;for(;i&&i.parent;)Pa(i.parent.vnode)&&$1(s,t,n,i),i=i.parent}}function $1(e,t,n,s){const i=Yc(t,e,s,!0);Yd(()=>{Nd(s[t],i)},n)}function Yc(e,t,n=Se,s=!1){if(n){const i=n[e]||(n[e]=[]),r=t.__weh||(t.__weh=(...o)=>{cs();const a=Ma(n),l=An(t,n,e,o);return a(),us(),l});return s?i.unshift(r):i.push(r),r}}const gs=e=>(t,n=Se)=>{(!Or||e==="sp")&&Yc(e,(...s)=>t(...s),n)},B1=gs("bm"),Ys=gs("m"),H1=gs("bu"),j1=gs("u"),Qd=gs("bum"),Yd=gs("um"),z1=gs("sp"),W1=gs("rtg"),q1=gs("rtc");function Bv(e,t=Se){Yc("ec",e,t)}const Xd="components",G1="directives";function lU(e,t){return Jd(Xd,e,!0,t)||e}const Hv=Symbol.for("v-ndc");function K1(e){return Yt(e)?Jd(Xd,e,!1)||e:e||Hv}function Q1(e){return Jd(G1,e)}function Jd(e,t,n=!0,s=!1){const i=Ae||Se;if(i){const r=i.type;if(e===Xd){const a=NI(r,!1);if(a&&(a===t||a===dn(t)||a===jc(dn(t))))return r}const o=_g(i[e]||r[e],t)||_g(i.appContext[e],t);return!o&&s?r:o}}function _g(e,t){return e&&(e[t]||e[dn(t)]||e[jc(dn(t))])}function ln(e,t,n,s){let i;const r=n,o=dt(e);if(o||Yt(e)){const a=o&&Bs(e);let l=!1,c=!1;a&&(l=!nn(e),c=zn(e),e=Gc(e)),i=new Array(e.length);for(let h=0,d=e.length;h<d;h++)i[h]=t(l?c?Pr(Sn(e[h])):Sn(e[h]):e[h],h,void 0,r)}else if(typeof e=="number"){i=new Array(e);for(let a=0;a<e;a++)i[a]=t(a+1,a,void 0,r)}else if(Nt(e))if(e[Symbol.iterator])i=Array.from(e,(a,l)=>t(a,l,void 0,r));else{const a=Object.keys(e);i=new Array(a.length);for(let l=0,c=a.length;l<c;l++){const h=a[l];i[l]=t(e[h],h,l,r)}}else i=[];return i}function Zd(e,t,n={},s,i){if(Ae.ce||Ae.parent&&Di(Ae.parent)&&Ae.parent.ce){const c=Object.keys(n).length>0;return H(),Kt(bt,null,[ht("slot",n,s)],c?-2:64)}let r=e[t];r&&r._c&&(r._d=!1),H();const o=r&&jv(r(n)),a=n.key||o&&o.key,l=Kt(bt,{key:(a&&!In(a)?a:`_${t}`)+(!o&&s?"_fb":"")},o||[],o&&e._===1?64:-2);return r&&r._c&&(r._d=!0),l}function jv(e){return e.some(t=>Dr(t)?!(t.type===he||t.type===bt&&!jv(t.children)):!0)?e:null}const Nh=e=>e?pb(e)?Zc(e):Nh(e.parent):null,zo=be(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>Nh(e.parent),$root:e=>Nh(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>Wv(e),$forceUpdate:e=>e.f||(e.f=()=>{Wd(e.update)}),$nextTick:e=>e.n||(e.n=Kc.bind(e.proxy)),$watch:e=>R1.bind(e)}),Yu=(e,t)=>e!==Ut&&!e.__isScriptSetup&&Dt(e,t),Y1={get({_:e},t){if(t==="__v_skip")return!0;const{ctx:n,setupState:s,data:i,props:r,accessCache:o,type:a,appContext:l}=e;if(t[0]!=="$"){const f=o[t];if(f!==void 0)switch(f){case 1:return s[t];case 2:return i[t];case 4:return n[t];case 3:return r[t]}else{if(Yu(s,t))return o[t]=1,s[t];if(i!==Ut&&Dt(i,t))return o[t]=2,i[t];if(Dt(r,t))return o[t]=3,r[t];if(n!==Ut&&Dt(n,t))return o[t]=4,n[t];Vh&&(o[t]=0)}}const c=zo[t];let h,d;if(c)return t==="$attrs"&&De(e.attrs,"get",""),c(e);if((h=a.__cssModules)&&(h=h[t]))return h;if(n!==Ut&&Dt(n,t))return o[t]=4,n[t];if(d=l.config.globalProperties,Dt(d,t))return d[t]},set({_:e},t,n){const{data:s,setupState:i,ctx:r}=e;return Yu(i,t)?(i[t]=n,!0):s!==Ut&&Dt(s,t)?(s[t]=n,!0):Dt(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(r[t]=n,!0)},has({_:{data:e,setupState:t,accessCache:n,ctx:s,appContext:i,props:r,type:o}},a){let l;return!!(n[a]||e!==Ut&&a[0]!=="$"&&Dt(e,a)||Yu(t,a)||Dt(r,a)||Dt(s,a)||Dt(zo,a)||Dt(i.config.globalProperties,a)||(l=o.__cssModules)&&l[a])},defineProperty(e,t,n){return n.get!=null?e._.accessCache[t]=0:Dt(n,"value")&&this.set(e,t,n.value,null),Reflect.defineProperty(e,t,n)}};function yg(e){return dt(e)?e.reduce((t,n)=>(t[n]=null,t),{}):e}let Vh=!0;function X1(e){const t=Wv(e),n=e.proxy,s=e.ctx;Vh=!1,t.beforeCreate&&vg(t.beforeCreate,e,"bc");const{data:i,computed:r,methods:o,watch:a,provide:l,inject:c,created:h,beforeMount:d,mounted:f,beforeUpdate:p,updated:_,activated:y,deactivated:v,beforeDestroy:w,beforeUnmount:M,destroyed:E,unmounted:x,render:O,renderTracked:V,renderTriggered:A,errorCaptured:b,serverPrefetch:T,expose:k,inheritAttrs:P,components:R,directives:C,filters:rt}=t;if(c&&J1(c,s,null),o)for(const ot in o){const et=o[ot];pt(et)&&(s[ot]=et.bind(n))}if(i){const ot=i.call(n,n);Nt(ot)&&(e.data=Qs(ot))}if(Vh=!0,r)for(const ot in r){const et=r[ot],Ct=pt(et)?et.bind(n,n):pt(et.get)?et.get.bind(n,n):Vn,Ye=!pt(et)&&pt(et.set)?et.set.bind(n):Vn,Fe=Gt({get:Ct,set:Ye});Object.defineProperty(s,ot,{enumerable:!0,configurable:!0,get:()=>Fe.value,set:se=>Fe.value=se})}if(a)for(const ot in a)zv(a[ot],s,n,ot);if(l){const ot=pt(l)?l.call(n):l;Reflect.ownKeys(ot).forEach(et=>{qd(et,ot[et])})}h&&vg(h,e,"c");function Z(ot,et){dt(et)?et.forEach(Ct=>ot(Ct.bind(n))):et&&ot(et.bind(n))}if(Z(B1,d),Z(Ys,f),Z(H1,p),Z(j1,_),Z(Fv,y),Z(Uv,v),Z(Bv,b),Z(q1,V),Z(W1,A),Z(Qd,M),Z(Yd,x),Z(z1,T),dt(k))if(k.length){const ot=e.exposed||(e.exposed={});k.forEach(et=>{Object.defineProperty(ot,et,{get:()=>n[et],set:Ct=>n[et]=Ct,enumerable:!0})})}else e.exposed||(e.exposed={});O&&e.render===Vn&&(e.render=O),P!=null&&(e.inheritAttrs=P),R&&(e.components=R),C&&(e.directives=C),T&&Kd(e)}function J1(e,t,n=Vn){dt(e)&&(e=Fh(e));for(const s in e){const i=e[s];let r;Nt(i)?"default"in i?r=Mi(i.from||s,i.default,!0):r=Mi(i.from||s):r=Mi(i),ae(r)?Object.defineProperty(t,s,{enumerable:!0,configurable:!0,get:()=>r.value,set:o=>r.value=o}):t[s]=r}}function vg(e,t,n){An(dt(e)?e.map(s=>s.bind(t.proxy)):e.bind(t.proxy),t,n)}function zv(e,t,n,s){let i=s.includes(".")?Pv(n,s):()=>n[s];if(Yt(e)){const r=t[e];pt(r)&&jo(i,r)}else if(pt(e))jo(i,e.bind(n));else if(Nt(e))if(dt(e))e.forEach(r=>zv(r,t,n,s));else{const r=pt(e.handler)?e.handler.bind(n):t[e.handler];pt(r)&&jo(i,r,e)}}function Wv(e){const t=e.type,{mixins:n,extends:s}=t,{mixins:i,optionsCache:r,config:{optionMergeStrategies:o}}=e.appContext,a=r.get(t);let l;return a?l=a:!i.length&&!n&&!s?l=t:(l={},i.length&&i.forEach(c=>nc(l,c,o,!0)),nc(l,t,o)),Nt(t)&&r.set(t,l),l}function nc(e,t,n,s=!1){const{mixins:i,extends:r}=t;r&&nc(e,r,n,!0),i&&i.forEach(o=>nc(e,o,n,!0));for(const o in t)if(!(s&&o==="expose")){const a=Z1[o]||n&&n[o];e[o]=a?a(e[o],t[o]):t[o]}return e}const Z1={data:bg,props:wg,emits:wg,methods:Po,computed:Po,beforeCreate:$e,created:$e,beforeMount:$e,mounted:$e,beforeUpdate:$e,updated:$e,beforeDestroy:$e,beforeUnmount:$e,destroyed:$e,unmounted:$e,activated:$e,deactivated:$e,errorCaptured:$e,serverPrefetch:$e,components:Po,directives:Po,watch:eI,provide:bg,inject:tI};function bg(e,t){return t?e?function(){return be(pt(e)?e.call(this,this):e,pt(t)?t.call(this,this):t)}:t:e}function tI(e,t){return Po(Fh(e),Fh(t))}function Fh(e){if(dt(e)){const t={};for(let n=0;n<e.length;n++)t[e[n]]=e[n];return t}return e}function $e(e,t){return e?[...new Set([].concat(e,t))]:t}function Po(e,t){return e?be(Object.create(null),e,t):t}function wg(e,t){return e?dt(e)&&dt(t)?[...new Set([...e,...t])]:be(Object.create(null),yg(e),yg(t??{})):t}function eI(e,t){if(!e)return t;if(!t)return e;const n=be(Object.create(null),e);for(const s in t)n[s]=$e(e[s],t[s]);return n}function qv(){return{app:null,config:{isNativeTag:nv,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let nI=0;function sI(e,t){return function(s,i=null){pt(s)||(s=be({},s)),i!=null&&!Nt(i)&&(i=null);const r=qv(),o=new WeakSet,a=[];let l=!1;const c=r.app={_uid:nI++,_component:s,_props:i,_container:null,_context:r,_instance:null,version:mb,get config(){return r.config},set config(h){},use(h,...d){return o.has(h)||(h&&pt(h.install)?(o.add(h),h.install(c,...d)):pt(h)&&(o.add(h),h(c,...d))),c},mixin(h){return r.mixins.includes(h)||r.mixins.push(h),c},component(h,d){return d?(r.components[h]=d,c):r.components[h]},directive(h,d){return d?(r.directives[h]=d,c):r.directives[h]},mount(h,d,f){if(!l){const p=c._ceVNode||ht(s,i);return p.appContext=r,f===!0?f="svg":f===!1&&(f=void 0),d&&t?t(p,h):e(p,h,f),l=!0,c._container=h,h.__vue_app__=c,Zc(p.component)}},onUnmount(h){a.push(h)},unmount(){l&&(An(a,c._instance,16),e(null,c._container),delete c._container.__vue_app__)},provide(h,d){return r.provides[h]=d,c},runWithContext(h){const d=Oi;Oi=c;try{return h()}finally{Oi=d}}};return c}}let Oi=null;const iI=(e,t)=>t==="modelValue"||t==="model-value"?e.modelModifiers:e[`${t}Modifiers`]||e[`${dn(t)}Modifiers`]||e[`${Gi(t)}Modifiers`];function rI(e,t,...n){if(e.isUnmounted)return;const s=e.vnode.props||Ut;let i=n;const r=t.startsWith("update:"),o=r&&iI(s,t.slice(7));o&&(o.trim&&(i=n.map(h=>Yt(h)?h.trim():h)),o.number&&(i=n.map(zc)));let a,l=s[a=zu(t)]||s[a=zu(dn(t))];!l&&r&&(l=s[a=zu(Gi(t))]),l&&An(l,e,6,i);const c=s[a+"Once"];if(c){if(!e.emitted)e.emitted={};else if(e.emitted[a])return;e.emitted[a]=!0,An(c,e,6,i)}}const oI=new WeakMap;function Gv(e,t,n=!1){const s=n?oI:t.emitsCache,i=s.get(e);if(i!==void 0)return i;const r=e.emits;let o={},a=!1;if(!pt(e)){const l=c=>{const h=Gv(c,t,!0);h&&(a=!0,be(o,h))};!n&&t.mixins.length&&t.mixins.forEach(l),e.extends&&l(e.extends),e.mixins&&e.mixins.forEach(l)}return!r&&!a?(Nt(e)&&s.set(e,null),null):(dt(r)?r.forEach(l=>o[l]=null):be(o,r),Nt(e)&&s.set(e,o),o)}function Xc(e,t){return!e||!Ca(t)?!1:(t=t.slice(2).replace(/Once$/,""),Dt(e,t[0].toLowerCase()+t.slice(1))||Dt(e,Gi(t))||Dt(e,t))}function Xu(e){const{type:t,vnode:n,proxy:s,withProxy:i,propsOptions:[r],slots:o,attrs:a,emit:l,render:c,renderCache:h,props:d,data:f,setupState:p,ctx:_,inheritAttrs:y}=e,v=tc(e);let w,M;try{if(n.shapeFlag&4){const x=i||s,O=x;w=Ze(c.call(O,x,h,d,p,f,_)),M=a}else{const x=t;w=Ze(x.length>1?x(d,{attrs:a,slots:o,emit:l}):x(d,null)),M=t.props?a:lI(a)}}catch(x){qo.length=0,Kr(x,e,1),w=ht(he)}let E=w;if(M&&y!==!1){const x=Object.keys(M),{shapeFlag:O}=E;x.length&&O&7&&(r&&x.some(Ld)&&(M=cI(M,r)),E=bn(E,M,!1,!0))}return n.dirs&&(E=bn(E,null,!1,!0),E.dirs=E.dirs?E.dirs.concat(n.dirs):n.dirs),n.transition&&ca(E,n.transition),w=E,tc(v),w}function aI(e,t=!0){let n;for(let s=0;s<e.length;s++){const i=e[s];if(Dr(i)){if(i.type!==he||i.children==="v-if"){if(n)return;n=i}}else return}return n}const lI=e=>{let t;for(const n in e)(n==="class"||n==="style"||Ca(n))&&((t||(t={}))[n]=e[n]);return t},cI=(e,t)=>{const n={};for(const s in e)(!Ld(s)||!(s.slice(9)in t))&&(n[s]=e[s]);return n};function uI(e,t,n){const{props:s,children:i,component:r}=e,{props:o,children:a,patchFlag:l}=t,c=r.emitsOptions;if(t.dirs||t.transition)return!0;if(n&&l>=0){if(l&1024)return!0;if(l&16)return s?Tg(s,o,c):!!o;if(l&8){const h=t.dynamicProps;for(let d=0;d<h.length;d++){const f=h[d];if(o[f]!==s[f]&&!Xc(c,f))return!0}}}else return(i||a)&&(!a||!a.$stable)?!0:s===o?!1:s?o?Tg(s,o,c):!0:!!o;return!1}function Tg(e,t,n){const s=Object.keys(t);if(s.length!==Object.keys(e).length)return!0;for(let i=0;i<s.length;i++){const r=s[i];if(t[r]!==e[r]&&!Xc(n,r))return!0}return!1}function Jc({vnode:e,parent:t},n){for(;t;){const s=t.subTree;if(s.suspense&&s.suspense.activeBranch===e&&(s.el=e.el),s===e)(e=t.vnode).el=n,t=t.parent;else break}}const Kv={},Qv=()=>Object.create(Kv),Yv=e=>Object.getPrototypeOf(e)===Kv;function hI(e,t,n,s=!1){const i={},r=Qv();e.propsDefaults=Object.create(null),Xv(e,t,i,r);for(const o in e.propsOptions[0])o in i||(i[o]=void 0);n?e.props=s?i:fr(i):e.type.props?e.props=i:e.props=r,e.attrs=r}function dI(e,t,n,s){const{props:i,attrs:r,vnode:{patchFlag:o}}=e,a=St(i),[l]=e.propsOptions;let c=!1;if((s||o>0)&&!(o&16)){if(o&8){const h=e.vnode.dynamicProps;for(let d=0;d<h.length;d++){let f=h[d];if(Xc(e.emitsOptions,f))continue;const p=t[f];if(l)if(Dt(r,f))p!==r[f]&&(r[f]=p,c=!0);else{const _=dn(f);i[_]=Uh(l,a,_,p,e,!1)}else p!==r[f]&&(r[f]=p,c=!0)}}}else{Xv(e,t,i,r)&&(c=!0);let h;for(const d in a)(!t||!Dt(t,d)&&((h=Gi(d))===d||!Dt(t,h)))&&(l?n&&(n[d]!==void 0||n[h]!==void 0)&&(i[d]=Uh(l,a,d,void 0,e,!0)):delete i[d]);if(r!==a)for(const d in r)(!t||!Dt(t,d))&&(delete r[d],c=!0)}c&&ss(e.attrs,"set","")}function Xv(e,t,n,s){const[i,r]=e.propsOptions;let o=!1,a;if(t)for(let l in t){if(vr(l))continue;const c=t[l];let h;i&&Dt(i,h=dn(l))?!r||!r.includes(h)?n[h]=c:(a||(a={}))[h]=c:Xc(e.emitsOptions,l)||(!(l in s)||c!==s[l])&&(s[l]=c,o=!0)}if(r){const l=St(n),c=a||Ut;for(let h=0;h<r.length;h++){const d=r[h];n[d]=Uh(i,l,d,c[d],e,!Dt(c,d))}}return o}function Uh(e,t,n,s,i,r){const o=e[n];if(o!=null){const a=Dt(o,"default");if(a&&s===void 0){const l=o.default;if(o.type!==Function&&!o.skipFactory&&pt(l)){const{propsDefaults:c}=i;if(n in c)s=c[n];else{const h=Ma(i);s=c[n]=l.call(null,t),h()}}else s=l;i.ce&&i.ce._setProp(n,s)}o[0]&&(r&&!a?s=!1:o[1]&&(s===""||s===Gi(n))&&(s=!0))}return s}const fI=new WeakMap;function Jv(e,t,n=!1){const s=n?fI:t.propsCache,i=s.get(e);if(i)return i;const r=e.props,o={},a=[];let l=!1;if(!pt(e)){const h=d=>{l=!0;const[f,p]=Jv(d,t,!0);be(o,f),p&&a.push(...p)};!n&&t.mixins.length&&t.mixins.forEach(h),e.extends&&h(e.extends),e.mixins&&e.mixins.forEach(h)}if(!r&&!l)return Nt(e)&&s.set(e,_r),_r;if(dt(r))for(let h=0;h<r.length;h++){const d=dn(r[h]);Eg(d)&&(o[d]=Ut)}else if(r)for(const h in r){const d=dn(h);if(Eg(d)){const f=r[h],p=o[d]=dt(f)||pt(f)?{type:f}:be({},f),_=p.type;let y=!1,v=!0;if(dt(_))for(let w=0;w<_.length;++w){const M=_[w],E=pt(M)&&M.name;if(E==="Boolean"){y=!0;break}else E==="String"&&(v=!1)}else y=pt(_)&&_.name==="Boolean";p[0]=y,p[1]=v,(y||Dt(p,"default"))&&a.push(d)}}const c=[o,a];return Nt(e)&&s.set(e,c),c}function Eg(e){return e[0]!=="$"&&!vr(e)}const tf=e=>e==="_"||e==="_ctx"||e==="$stable",ef=e=>dt(e)?e.map(Ze):[Ze(e)],pI=(e,t,n)=>{if(t._n)return t;const s=ke((...i)=>ef(t(...i)),n);return s._c=!1,s},Zv=(e,t,n)=>{const s=e._ctx;for(const i in e){if(tf(i))continue;const r=e[i];if(pt(r))t[i]=pI(i,r,s);else if(r!=null){const o=ef(r);t[i]=()=>o}}},tb=(e,t)=>{const n=ef(t);e.slots.default=()=>n},eb=(e,t,n)=>{for(const s in t)(n||!tf(s))&&(e[s]=t[s])},gI=(e,t,n)=>{const s=e.slots=Qv();if(e.vnode.shapeFlag&32){const i=t._;i?(eb(s,t,n),n&&rv(s,"_",i,!0)):Zv(t,s)}else t&&tb(e,t)},mI=(e,t,n)=>{const{vnode:s,slots:i}=e;let r=!0,o=Ut;if(s.shapeFlag&32){const a=t._;a?n&&a===1?r=!1:eb(i,t,n):(r=!t.$stable,Zv(t,i)),o=t}else t&&(tb(e,t),o={default:1});if(r)for(const a in i)!tf(a)&&o[a]==null&&delete i[a]},We=cb;function _I(e){return nb(e)}function yI(e){return nb(e,V1)}function nb(e,t){const n=Wc();n.__VUE__=!0;const{insert:s,remove:i,patchProp:r,createElement:o,createText:a,createComment:l,setText:c,setElementText:h,parentNode:d,nextSibling:f,setScopeId:p=Vn,insertStaticContent:_}=e,y=(D,L,U,W=null,B=null,z=null,Q=void 0,K=null,Y=!!L.dynamicChildren)=>{if(D===L)return;D&&!Nn(D,L)&&(W=vs(D),se(D,B,z,!0),D=null),L.patchFlag===-2&&(Y=!1,L.dynamicChildren=null);const{type:q,ref:ct,shapeFlag:tt}=L;switch(q){case Li:v(D,L,U,W);break;case he:w(D,L,U,W);break;case Wo:D==null&&M(L,U,W,Q);break;case bt:R(D,L,U,W,B,z,Q,K,Y);break;default:tt&1?O(D,L,U,W,B,z,Q,K,Y):tt&6?C(D,L,U,W,B,z,Q,K,Y):(tt&64||tt&128)&&q.process(D,L,U,W,B,z,Q,K,Y,bs)}ct!=null&&B?wr(ct,D&&D.ref,z,L||D,!L):ct==null&&D&&D.ref!=null&&wr(D.ref,null,z,D,!0)},v=(D,L,U,W)=>{if(D==null)s(L.el=a(L.children),U,W);else{const B=L.el=D.el;L.children!==D.children&&c(B,L.children)}},w=(D,L,U,W)=>{D==null?s(L.el=l(L.children||""),U,W):L.el=D.el},M=(D,L,U,W)=>{[D.el,D.anchor]=_(D.children,L,U,W,D.el,D.anchor)},E=({el:D,anchor:L},U,W)=>{let B;for(;D&&D!==L;)B=f(D),s(D,U,W),D=B;s(L,U,W)},x=({el:D,anchor:L})=>{let U;for(;D&&D!==L;)U=f(D),i(D),D=U;i(L)},O=(D,L,U,W,B,z,Q,K,Y)=>{if(L.type==="svg"?Q="svg":L.type==="math"&&(Q="mathml"),D==null)V(L,U,W,B,z,Q,K,Y);else{const q=D.el&&D.el._isVueCE?D.el:null;try{q&&q._beginPatch(),T(D,L,B,z,Q,K,Y)}finally{q&&q._endPatch()}}},V=(D,L,U,W,B,z,Q,K)=>{let Y,q;const{props:ct,shapeFlag:tt,transition:st,dirs:mt}=D;if(Y=D.el=o(D.type,z,ct&&ct.is,ct),tt&8?h(Y,D.children):tt&16&&b(D.children,Y,null,W,B,Ju(D,z),Q,K),mt&&On(D,null,W,"created"),A(Y,D,D.scopeId,Q,W),ct){for(const Mt in ct)Mt!=="value"&&!vr(Mt)&&r(Y,Mt,null,ct[Mt],z,W);"value"in ct&&r(Y,"value",null,ct.value,z),(q=ct.onVnodeBeforeMount)&&an(q,W,D)}mt&&On(D,null,W,"beforeMount");const wt=sb(B,st);wt&&st.beforeEnter(Y),s(Y,L,U),((q=ct&&ct.onVnodeMounted)||wt||mt)&&We(()=>{q&&an(q,W,D),wt&&st.enter(Y),mt&&On(D,null,W,"mounted")},B)},A=(D,L,U,W,B)=>{if(U&&p(D,U),W)for(let z=0;z<W.length;z++)p(D,W[z]);if(B){let z=B.subTree;if(L===z||ab(z.type)&&(z.ssContent===L||z.ssFallback===L)){const Q=B.vnode;A(D,Q,Q.scopeId,Q.slotScopeIds,B.parent)}}},b=(D,L,U,W,B,z,Q,K,Y=0)=>{for(let q=Y;q<D.length;q++){const ct=D[q]=K?Ms(D[q]):Ze(D[q]);y(null,ct,L,U,W,B,z,Q,K)}},T=(D,L,U,W,B,z,Q)=>{const K=L.el=D.el;let{patchFlag:Y,dynamicChildren:q,dirs:ct}=L;Y|=D.patchFlag&16;const tt=D.props||Ut,st=L.props||Ut;let mt;if(U&&fi(U,!1),(mt=st.onVnodeBeforeUpdate)&&an(mt,U,L,D),ct&&On(L,D,U,"beforeUpdate"),U&&fi(U,!0),(tt.innerHTML&&st.innerHTML==null||tt.textContent&&st.textContent==null)&&h(K,""),q?k(D.dynamicChildren,q,K,U,W,Ju(L,B),z):Q||et(D,L,K,null,U,W,Ju(L,B),z,!1),Y>0){if(Y&16)P(K,tt,st,U,B);else if(Y&2&&tt.class!==st.class&&r(K,"class",null,st.class,B),Y&4&&r(K,"style",tt.style,st.style,B),Y&8){const wt=L.dynamicProps;for(let Mt=0;Mt<wt.length;Mt++){const xt=wt[Mt],Ce=tt[xt],le=st[xt];(le!==Ce||xt==="value")&&r(K,xt,Ce,le,B,U)}}Y&1&&D.children!==L.children&&h(K,L.children)}else!Q&&q==null&&P(K,tt,st,U,B);((mt=st.onVnodeUpdated)||ct)&&We(()=>{mt&&an(mt,U,L,D),ct&&On(L,D,U,"updated")},W)},k=(D,L,U,W,B,z,Q)=>{for(let K=0;K<L.length;K++){const Y=D[K],q=L[K],ct=Y.el&&(Y.type===bt||!Nn(Y,q)||Y.shapeFlag&198)?d(Y.el):U;y(Y,q,ct,null,W,B,z,Q,!0)}},P=(D,L,U,W,B)=>{if(L!==U){if(L!==Ut)for(const z in L)!vr(z)&&!(z in U)&&r(D,z,L[z],null,B,W);for(const z in U){if(vr(z))continue;const Q=U[z],K=L[z];Q!==K&&z!=="value"&&r(D,z,K,Q,B,W)}"value"in U&&r(D,"value",L.value,U.value,B)}},R=(D,L,U,W,B,z,Q,K,Y)=>{const q=L.el=D?D.el:a(""),ct=L.anchor=D?D.anchor:a("");let{patchFlag:tt,dynamicChildren:st,slotScopeIds:mt}=L;mt&&(K=K?K.concat(mt):mt),D==null?(s(q,U,W),s(ct,U,W),b(L.children||[],U,ct,B,z,Q,K,Y)):tt>0&&tt&64&&st&&D.dynamicChildren&&D.dynamicChildren.length===st.length?(k(D.dynamicChildren,st,U,B,z,Q,K),(L.key!=null||B&&L===B.subTree)&&ib(D,L,!0)):et(D,L,U,ct,B,z,Q,K,Y)},C=(D,L,U,W,B,z,Q,K,Y)=>{L.slotScopeIds=K,D==null?L.shapeFlag&512?B.ctx.activate(L,U,W,Q,Y):rt(L,U,W,B,z,Q,Y):at(D,L,Y)},rt=(D,L,U,W,B,z,Q)=>{const K=D.component=PI(D,W,B);if(Pa(D)&&(K.ctx.renderer=bs),MI(K,!1,Q),K.asyncDep){if(B&&B.registerDep(K,Z,Q),!D.el){const Y=K.subTree=ht(he);w(null,Y,L,U),D.placeholder=Y.el}}else Z(K,D,L,U,B,z,Q)},at=(D,L,U)=>{const W=L.component=D.component;if(uI(D,L,U))if(W.asyncDep&&!W.asyncResolved){ot(W,L,U);return}else W.next=L,W.update();else L.el=D.el,W.vnode=L},Z=(D,L,U,W,B,z,Q)=>{const K=()=>{if(D.isMounted){let{next:tt,bu:st,u:mt,parent:wt,vnode:Mt}=D;{const ce=rb(D);if(ce){tt&&(tt.el=Mt.el,ot(D,tt,Q)),ce.asyncDep.then(()=>{D.isUnmounted||K()});return}}let xt=tt,Ce;fi(D,!1),tt?(tt.el=Mt.el,ot(D,tt,Q)):tt=Mt,st&&Ol(st),(Ce=tt.props&&tt.props.onVnodeBeforeUpdate)&&an(Ce,wt,tt,Mt),fi(D,!0);const le=Xu(D),je=D.subTree;D.subTree=le,y(je,le,d(je.el),vs(je),D,B,z),tt.el=le.el,xt===null&&Jc(D,le.el),mt&&We(mt,B),(Ce=tt.props&&tt.props.onVnodeUpdated)&&We(()=>an(Ce,wt,tt,Mt),B)}else{let tt;const{el:st,props:mt}=L,{bm:wt,m:Mt,parent:xt,root:Ce,type:le}=D,je=Di(L);if(fi(D,!1),wt&&Ol(wt),!je&&(tt=mt&&mt.onVnodeBeforeMount)&&an(tt,xt,L),fi(D,!0),st&&Zi){const ce=()=>{D.subTree=Xu(D),Zi(st,D.subTree,D,B,null)};je&&le.__asyncHydrate?le.__asyncHydrate(st,D,ce):ce()}else{Ce.ce&&Ce.ce._def.shadowRoot!==!1&&Ce.ce._injectChildStyle(le);const ce=D.subTree=Xu(D);y(null,ce,U,W,D,B,z),L.el=ce.el}if(Mt&&We(Mt,B),!je&&(tt=mt&&mt.onVnodeMounted)){const ce=L;We(()=>an(tt,xt,ce),B)}(L.shapeFlag&256||xt&&Di(xt.vnode)&&xt.vnode.shapeFlag&256)&&D.a&&We(D.a,B),D.isMounted=!0,L=U=W=null}};D.scope.on();const Y=D.effect=new hv(K);D.scope.off();const q=D.update=Y.run.bind(Y),ct=D.job=Y.runIfDirty.bind(Y);ct.i=D,ct.id=D.uid,Y.scheduler=()=>Wd(ct),fi(D,!0),q()},ot=(D,L,U)=>{L.component=D;const W=D.vnode.props;D.vnode=L,D.next=null,dI(D,L.props,W,U),mI(D,L.children,U),cs(),hg(D),us()},et=(D,L,U,W,B,z,Q,K,Y=!1)=>{const q=D&&D.children,ct=D?D.shapeFlag:0,tt=L.children,{patchFlag:st,shapeFlag:mt}=L;if(st>0){if(st&128){Ye(q,tt,U,W,B,z,Q,K,Y);return}else if(st&256){Ct(q,tt,U,W,B,z,Q,K,Y);return}}mt&8?(ct&16&&Ee(q,B,z),tt!==q&&h(U,tt)):ct&16?mt&16?Ye(q,tt,U,W,B,z,Q,K,Y):Ee(q,B,z,!0):(ct&8&&h(U,""),mt&16&&b(tt,U,W,B,z,Q,K,Y))},Ct=(D,L,U,W,B,z,Q,K,Y)=>{D=D||_r,L=L||_r;const q=D.length,ct=L.length,tt=Math.min(q,ct);let st;for(st=0;st<tt;st++){const mt=L[st]=Y?Ms(L[st]):Ze(L[st]);y(D[st],mt,U,null,B,z,Q,K,Y)}q>ct?Ee(D,B,z,!0,!1,tt):b(L,U,W,B,z,Q,K,Y,tt)},Ye=(D,L,U,W,B,z,Q,K,Y)=>{let q=0;const ct=L.length;let tt=D.length-1,st=ct-1;for(;q<=tt&&q<=st;){const mt=D[q],wt=L[q]=Y?Ms(L[q]):Ze(L[q]);if(Nn(mt,wt))y(mt,wt,U,null,B,z,Q,K,Y);else break;q++}for(;q<=tt&&q<=st;){const mt=D[tt],wt=L[st]=Y?Ms(L[st]):Ze(L[st]);if(Nn(mt,wt))y(mt,wt,U,null,B,z,Q,K,Y);else break;tt--,st--}if(q>tt){if(q<=st){const mt=st+1,wt=mt<ct?L[mt].el:W;for(;q<=st;)y(null,L[q]=Y?Ms(L[q]):Ze(L[q]),U,wt,B,z,Q,K,Y),q++}}else if(q>st)for(;q<=tt;)se(D[q],B,z,!0),q++;else{const mt=q,wt=q,Mt=new Map;for(q=wt;q<=st;q++){const te=L[q]=Y?Ms(L[q]):Ze(L[q]);te.key!=null&&Mt.set(te.key,q)}let xt,Ce=0;const le=st-wt+1;let je=!1,ce=0;const Kn=new Array(le);for(q=0;q<le;q++)Kn[q]=0;for(q=mt;q<=tt;q++){const te=D[q];if(Ce>=le){se(te,B,z,!0);continue}let Xe;if(te.key!=null)Xe=Mt.get(te.key);else for(xt=wt;xt<=st;xt++)if(Kn[xt-wt]===0&&Nn(te,L[xt])){Xe=xt;break}Xe===void 0?se(te,B,z,!0):(Kn[Xe-wt]=q+1,Xe>=ce?ce=Xe:je=!0,y(te,L[Xe],U,null,B,z,Q,K,Y),Ce++)}const tr=je?vI(Kn):_r;for(xt=tr.length-1,q=le-1;q>=0;q--){const te=wt+q,Xe=L[te],li=L[te+1],ao=te+1<ct?li.el||ob(li):W;Kn[q]===0?y(null,Xe,U,ao,B,z,Q,K,Y):je&&(xt<0||q!==tr[xt]?Fe(Xe,U,ao,2):xt--)}}},Fe=(D,L,U,W,B=null)=>{const{el:z,type:Q,transition:K,children:Y,shapeFlag:q}=D;if(q&6){Fe(D.component.subTree,L,U,W);return}if(q&128){D.suspense.move(L,U,W);return}if(q&64){Q.move(D,L,U,bs);return}if(Q===bt){s(z,L,U);for(let tt=0;tt<Y.length;tt++)Fe(Y[tt],L,U,W);s(D.anchor,L,U);return}if(Q===Wo){E(D,L,U);return}if(W!==2&&q&1&&K)if(W===0)K.beforeEnter(z),s(z,L,U),We(()=>K.enter(z),B);else{const{leave:tt,delayLeave:st,afterLeave:mt}=K,wt=()=>{D.ctx.isUnmounted?i(z):s(z,L,U)},Mt=()=>{z._isLeaving&&z[es](!0),tt(z,()=>{wt(),mt&&mt()})};st?st(z,wt,Mt):Mt()}else s(z,L,U)},se=(D,L,U,W=!1,B=!1)=>{const{type:z,props:Q,ref:K,children:Y,dynamicChildren:q,shapeFlag:ct,patchFlag:tt,dirs:st,cacheIndex:mt}=D;if(tt===-2&&(B=!1),K!=null&&(cs(),wr(K,null,U,D,!0),us()),mt!=null&&(L.renderCache[mt]=void 0),ct&256){L.ctx.deactivate(D);return}const wt=ct&1&&st,Mt=!Di(D);let xt;if(Mt&&(xt=Q&&Q.onVnodeBeforeUnmount)&&an(xt,L,D),ct&6)mn(D.component,U,W);else{if(ct&128){D.suspense.unmount(U,W);return}wt&&On(D,null,L,"beforeUnmount"),ct&64?D.type.remove(D,L,U,bs,W):q&&!q.hasOnce&&(z!==bt||tt>0&&tt&64)?Ee(q,L,U,!1,!0):(z===bt&&tt&384||!B&&ct&16)&&Ee(Y,L,U),W&&gn(D)}(Mt&&(xt=Q&&Q.onVnodeUnmounted)||wt)&&We(()=>{xt&&an(xt,L,D),wt&&On(D,null,L,"unmounted")},U)},gn=D=>{const{type:L,el:U,anchor:W,transition:B}=D;if(L===bt){He(U,W);return}if(L===Wo){x(D);return}const z=()=>{i(U),B&&!B.persisted&&B.afterLeave&&B.afterLeave()};if(D.shapeFlag&1&&B&&!B.persisted){const{leave:Q,delayLeave:K}=B,Y=()=>Q(U,z);K?K(D.el,z,Y):Y()}else z()},He=(D,L)=>{let U;for(;D!==L;)U=f(D),i(D),D=U;i(L)},mn=(D,L,U)=>{const{bum:W,scope:B,job:z,subTree:Q,um:K,m:Y,a:q}=D;Ig(Y),Ig(q),W&&Ol(W),B.stop(),z&&(z.flags|=8,se(Q,D,L,U)),K&&We(K,L),We(()=>{D.isUnmounted=!0},L)},Ee=(D,L,U,W=!1,B=!1,z=0)=>{for(let Q=z;Q<D.length;Q++)se(D[Q],L,U,W,B)},vs=D=>{if(D.shapeFlag&6)return vs(D.component.subTree);if(D.shapeFlag&128)return D.suspense.next();const L=f(D.anchor||D.el),U=L&&L[P1];return U?f(U):L};let ai=!1;const ro=(D,L,U)=>{let W;D==null?L._vnode&&(se(L._vnode,null,null,!0),W=L._vnode.component):y(L._vnode||null,D,L,null,null,null,U),L._vnode=D,ai||(ai=!0,hg(W),Zl(),ai=!1)},bs={p:y,um:se,m:Fe,r:gn,mt:rt,mc:b,pc:et,pbc:k,n:vs,o:e};let oo,Zi;return t&&([oo,Zi]=t(bs)),{render:ro,hydrate:oo,createApp:sI(ro,oo)}}function Ju({type:e,props:t},n){return n==="svg"&&e==="foreignObject"||n==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:n}function fi({effect:e,job:t},n){n?(e.flags|=32,t.flags|=4):(e.flags&=-33,t.flags&=-5)}function sb(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function ib(e,t,n=!1){const s=e.children,i=t.children;if(dt(s)&&dt(i))for(let r=0;r<s.length;r++){const o=s[r];let a=i[r];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=i[r]=Ms(i[r]),a.el=o.el),!n&&a.patchFlag!==-2&&ib(o,a)),a.type===Li&&(a.patchFlag!==-1?a.el=o.el:a.__elIndex=r+(e.type===bt?1:0)),a.type===he&&!a.el&&(a.el=o.el)}}function vI(e){const t=e.slice(),n=[0];let s,i,r,o,a;const l=e.length;for(s=0;s<l;s++){const c=e[s];if(c!==0){if(i=n[n.length-1],e[i]<c){t[s]=i,n.push(s);continue}for(r=0,o=n.length-1;r<o;)a=r+o>>1,e[n[a]]<c?r=a+1:o=a;c<e[n[r]]&&(r>0&&(t[s]=n[r-1]),n[r]=s)}}for(r=n.length,o=n[r-1];r-- >0;)n[r]=o,o=t[o];return n}function rb(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:rb(t)}function Ig(e){if(e)for(let t=0;t<e.length;t++)e[t].flags|=8}function ob(e){if(e.placeholder)return e.placeholder;const t=e.component;return t?ob(t.subTree):null}const ab=e=>e.__isSuspense;let $h=0;const bI={name:"Suspense",__isSuspense:!0,process(e,t,n,s,i,r,o,a,l,c){if(e==null)TI(t,n,s,i,r,o,a,l,c);else{if(r&&r.deps>0&&!e.suspense.isInFallback){t.suspense=e.suspense,t.suspense.vnode=t,t.el=e.el;return}EI(e,t,n,s,i,o,a,l,c)}},hydrate:II,normalize:SI},wI=bI;function ua(e,t){const n=e.props&&e.props[t];pt(n)&&n()}function TI(e,t,n,s,i,r,o,a,l){const{p:c,o:{createElement:h}}=l,d=h("div"),f=e.suspense=lb(e,i,s,t,d,n,r,o,a,l);c(null,f.pendingBranch=e.ssContent,d,null,s,f,r,o),f.deps>0?(ua(e,"onPending"),ua(e,"onFallback"),c(null,e.ssFallback,t,n,s,null,r,o),Tr(f,e.ssFallback)):f.resolve(!1,!0)}function EI(e,t,n,s,i,r,o,a,{p:l,um:c,o:{createElement:h}}){const d=t.suspense=e.suspense;d.vnode=t,t.el=e.el;const f=t.ssContent,p=t.ssFallback,{activeBranch:_,pendingBranch:y,isInFallback:v,isHydrating:w}=d;if(y)d.pendingBranch=f,Nn(y,f)?(l(y,f,d.hiddenContainer,null,i,d,r,o,a),d.deps<=0?d.resolve():v&&(w||(l(_,p,n,s,i,null,r,o,a),Tr(d,p)))):(d.pendingId=$h++,w?(d.isHydrating=!1,d.activeBranch=y):c(y,i,d),d.deps=0,d.effects.length=0,d.hiddenContainer=h("div"),v?(l(null,f,d.hiddenContainer,null,i,d,r,o,a),d.deps<=0?d.resolve():(l(_,p,n,s,i,null,r,o,a),Tr(d,p))):_&&Nn(_,f)?(l(_,f,n,s,i,d,r,o,a),d.resolve(!0)):(l(null,f,d.hiddenContainer,null,i,d,r,o,a),d.deps<=0&&d.resolve()));else if(_&&Nn(_,f))l(_,f,n,s,i,d,r,o,a),Tr(d,f);else if(ua(t,"onPending"),d.pendingBranch=f,f.shapeFlag&512?d.pendingId=f.component.suspenseId:d.pendingId=$h++,l(null,f,d.hiddenContainer,null,i,d,r,o,a),d.deps<=0)d.resolve();else{const{timeout:M,pendingId:E}=d;M>0?setTimeout(()=>{d.pendingId===E&&d.fallback(p)},M):M===0&&d.fallback(p)}}function lb(e,t,n,s,i,r,o,a,l,c,h=!1){const{p:d,m:f,um:p,n:_,o:{parentNode:y,remove:v}}=c;let w;const M=AI(e);M&&t&&t.pendingBranch&&(w=t.pendingId,t.deps++);const E=e.props?ov(e.props.timeout):void 0,x=r,O={vnode:e,parent:t,parentComponent:n,namespace:o,container:s,hiddenContainer:i,deps:0,pendingId:$h++,timeout:typeof E=="number"?E:-1,activeBranch:null,pendingBranch:null,isInFallback:!h,isHydrating:h,isUnmounted:!1,effects:[],resolve(V=!1,A=!1){const{vnode:b,activeBranch:T,pendingBranch:k,pendingId:P,effects:R,parentComponent:C,container:rt,isInFallback:at}=O;let Z=!1;O.isHydrating?O.isHydrating=!1:V||(Z=T&&k.transition&&k.transition.mode==="out-in",Z&&(T.transition.afterLeave=()=>{P===O.pendingId&&(f(k,rt,r===x?_(T):r,0),Oh(R),at&&b.ssFallback&&(b.ssFallback.el=null))}),T&&(y(T.el)===rt&&(r=_(T)),p(T,C,O,!0),!Z&&at&&b.ssFallback&&We(()=>b.ssFallback.el=null,O)),Z||f(k,rt,r,0)),Tr(O,k),O.pendingBranch=null,O.isInFallback=!1;let ot=O.parent,et=!1;for(;ot;){if(ot.pendingBranch){ot.effects.push(...R),et=!0;break}ot=ot.parent}!et&&!Z&&Oh(R),O.effects=[],M&&t&&t.pendingBranch&&w===t.pendingId&&(t.deps--,t.deps===0&&!A&&t.resolve()),ua(b,"onResolve")},fallback(V){if(!O.pendingBranch)return;const{vnode:A,activeBranch:b,parentComponent:T,container:k,namespace:P}=O;ua(A,"onFallback");const R=_(b),C=()=>{O.isInFallback&&(d(null,V,k,R,T,null,P,a,l),Tr(O,V))},rt=V.transition&&V.transition.mode==="out-in";rt&&(b.transition.afterLeave=C),O.isInFallback=!0,p(b,T,null,!0),rt||C()},move(V,A,b){O.activeBranch&&f(O.activeBranch,V,A,b),O.container=V},next(){return O.activeBranch&&_(O.activeBranch)},registerDep(V,A,b){const T=!!O.pendingBranch;T&&O.deps++;const k=V.vnode.el;V.asyncDep.catch(P=>{Kr(P,V,0)}).then(P=>{if(V.isUnmounted||O.isUnmounted||O.pendingId!==V.suspenseId)return;V.asyncResolved=!0;const{vnode:R}=V;Hh(V,P),k&&(R.el=k);const C=!k&&V.subTree.el;A(V,R,y(k||V.subTree.el),k?null:_(V.subTree),O,o,b),C&&(R.placeholder=null,v(C)),Jc(V,R.el),T&&--O.deps===0&&O.resolve()})},unmount(V,A){O.isUnmounted=!0,O.activeBranch&&p(O.activeBranch,n,V,A),O.pendingBranch&&p(O.pendingBranch,n,V,A)}};return O}function II(e,t,n,s,i,r,o,a,l){const c=t.suspense=lb(t,s,n,e.parentNode,document.createElement("div"),null,i,r,o,a,!0),h=l(e,c.pendingBranch=t.ssContent,n,c,r,o);return c.deps===0&&c.resolve(!1,!0),h}function SI(e){const{shapeFlag:t,children:n}=e,s=t&32;e.ssContent=Sg(s?n.default:n),e.ssFallback=s?Sg(n.fallback):ht(he)}function Sg(e){let t;if(pt(e)){const n=Mr&&e._c;n&&(e._d=!1,H()),e=e(),n&&(e._d=!0,t=Qe,ub())}return dt(e)&&(e=aI(e)),e=Ze(e),t&&!e.dynamicChildren&&(e.dynamicChildren=t.filter(n=>n!==e)),e}function cb(e,t){t&&t.pendingBranch?dt(e)?t.effects.push(...e):t.effects.push(e):Oh(e)}function Tr(e,t){e.activeBranch=t;const{vnode:n,parentComponent:s}=e;let i=t.el;for(;!i&&t.component;)t=t.component.subTree,i=t.el;n.el=i,s&&s.subTree===n&&(s.vnode.el=i,Jc(s,i))}function AI(e){const t=e.props&&e.props.suspensible;return t!=null&&t!==!1}const bt=Symbol.for("v-fgt"),Li=Symbol.for("v-txt"),he=Symbol.for("v-cmt"),Wo=Symbol.for("v-stc"),qo=[];let Qe=null;function H(e=!1){qo.push(Qe=e?null:[])}function ub(){qo.pop(),Qe=qo[qo.length-1]||null}let Mr=1;function sc(e,t=!1){Mr+=e,e<0&&Qe&&t&&(Qe.hasOnce=!0)}function hb(e){return e.dynamicChildren=Mr>0?Qe||_r:null,ub(),Mr>0&&Qe&&Qe.push(e),e}function J(e,t,n,s,i,r){return hb(I(e,t,n,s,i,r,!0))}function Kt(e,t,n,s,i){return hb(ht(e,t,n,s,i,!0))}function Dr(e){return e?e.__v_isVNode===!0:!1}function Nn(e,t){return e.type===t.type&&e.key===t.key}const db=({key:e})=>e??null,Ll=({ref:e,ref_key:t,ref_for:n})=>(typeof e=="number"&&(e=""+e),e!=null?Yt(e)||ae(e)||pt(e)?{i:Ae,r:e,k:t,f:!!n}:e:null);function I(e,t=null,n=null,s=0,i=null,r=e===bt?0:1,o=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&db(t),ref:t&&Ll(t),scopeId:Rv,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:r,patchFlag:s,dynamicProps:i,dynamicChildren:null,appContext:null,ctx:Ae};return a?(nf(l,n),r&128&&e.normalize(l)):n&&(l.shapeFlag|=Yt(n)?8:16),Mr>0&&!o&&Qe&&(l.patchFlag>0||r&6)&&l.patchFlag!==32&&Qe.push(l),l}const ht=kI;function kI(e,t=null,n=null,s=0,i=null,r=!1){if((!e||e===Hv)&&(e=he),Dr(e)){const a=bn(e,t,!0);return n&&nf(a,n),Mr>0&&!r&&Qe&&(a.shapeFlag&6?Qe[Qe.indexOf(e)]=a:Qe.push(a)),a.patchFlag=-2,a}if(VI(e)&&(e=e.__vccOpts),t){t=fb(t);let{class:a,style:l}=t;a&&!Yt(a)&&(t.class=Rt(a)),Nt(l)&&(Gr(l)&&!dt(l)&&(l=be({},l)),t.style=as(l))}const o=Yt(e)?1:ab(e)?128:Mv(e)?64:Nt(e)?4:pt(e)?2:0;return I(e,t,n,s,i,o,r,!0)}function fb(e){return e?Gr(e)||Yv(e)?be({},e):e:null}function bn(e,t,n=!1,s=!1){const{props:i,ref:r,patchFlag:o,children:a,transition:l}=e,c=t?CI(i||{},t):i,h={__v_isVNode:!0,__v_skip:!0,type:e.type,props:c,key:c&&db(c),ref:t&&t.ref?n&&r?dt(r)?r.concat(Ll(t)):[r,Ll(t)]:Ll(t):r,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:a,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==bt?o===-1?16:o|16:o,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:l,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&bn(e.ssContent),ssFallback:e.ssFallback&&bn(e.ssFallback),placeholder:e.placeholder,el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return l&&s&&ca(h,l.clone(h)),h}function $t(e=" ",t=0){return ht(Li,null,e,t)}function Er(e,t){const n=ht(Wo,null,e);return n.staticCount=t,n}function Le(e="",t=!1){return t?(H(),Kt(he,null,e)):ht(he,null,e)}function Ze(e){return e==null||typeof e=="boolean"?ht(he):dt(e)?ht(bt,null,e.slice()):Dr(e)?Ms(e):ht(Li,null,String(e))}function Ms(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:bn(e)}function nf(e,t){let n=0;const{shapeFlag:s}=e;if(t==null)t=null;else if(dt(t))n=16;else if(typeof t=="object")if(s&65){const i=t.default;i&&(i._c&&(i._d=!1),nf(e,i()),i._c&&(i._d=!0));return}else{n=32;const i=t._;!i&&!Yv(t)?t._ctx=Ae:i===3&&Ae&&(Ae.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else pt(t)?(t={default:t,_ctx:Ae},n=32):(t=String(t),s&64?(n=16,t=[$t(t)]):n=8);e.children=t,e.shapeFlag|=n}function CI(...e){const t={};for(let n=0;n<e.length;n++){const s=e[n];for(const i in s)if(i==="class")t.class!==s.class&&(t.class=Rt([t.class,s.class]));else if(i==="style")t.style=as([t.style,s.style]);else if(Ca(i)){const r=t[i],o=s[i];o&&r!==o&&!(dt(r)&&r.includes(o))&&(t[i]=r?[].concat(r,o):o)}else i!==""&&(t[i]=s[i])}return t}function an(e,t,n,s=null){An(e,t,7,[n,s])}const xI=qv();let RI=0;function PI(e,t,n){const s=e.type,i=(t?t.appContext:e.appContext)||xI,r={uid:RI++,vnode:e,type:s,parent:t,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new uv(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(i.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Jv(s,i),emitsOptions:Gv(s,i),emit:null,emitted:null,propsDefaults:Ut,inheritAttrs:s.inheritAttrs,ctx:Ut,data:Ut,props:Ut,attrs:Ut,slots:Ut,refs:Ut,setupState:Ut,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return r.ctx={_:r},r.root=t?t.root:r,r.emit=rI.bind(null,r),e.ce&&e.ce(r),r}let Se=null;const Qr=()=>Se||Ae;let ic,Bh;{const e=Wc(),t=(n,s)=>{let i;return(i=e[n])||(i=e[n]=[]),i.push(s),r=>{i.length>1?i.forEach(o=>o(r)):i[0](r)}};ic=t("__VUE_INSTANCE_SETTERS__",n=>Se=n),Bh=t("__VUE_SSR_SETTERS__",n=>Or=n)}const Ma=e=>{const t=Se;return ic(e),e.scope.on(),()=>{e.scope.off(),ic(t)}},Ag=()=>{Se&&Se.scope.off(),ic(null)};function pb(e){return e.vnode.shapeFlag&4}let Or=!1;function MI(e,t=!1,n=!1){t&&Bh(t);const{props:s,children:i}=e.vnode,r=pb(e);hI(e,s,r,t),gI(e,i,n||t);const o=r?DI(e,t):void 0;return t&&Bh(!1),o}function DI(e,t){const n=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,Y1);const{setup:s}=n;if(s){cs();const i=e.setupContext=s.length>1?LI(e):null,r=Ma(e),o=Ra(s,e,0,[e.props,i]),a=Vd(o);if(us(),r(),(a||e.sp)&&!Di(e)&&Kd(e),a){if(o.then(Ag,Ag),t)return o.then(l=>{Hh(e,l)}).catch(l=>{Kr(l,e,0)});e.asyncDep=o}else Hh(e,o)}else gb(e)}function Hh(e,t,n){pt(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:Nt(t)&&(e.setupState=Av(t)),gb(e)}function gb(e,t,n){const s=e.type;e.render||(e.render=s.render||Vn);{const i=Ma(e);cs();try{X1(e)}finally{us(),i()}}}const OI={get(e,t){return De(e,"get",""),e[t]}};function LI(e){const t=n=>{e.exposed=n||{}};return{attrs:new Proxy(e.attrs,OI),slots:e.slots,emit:e.emit,expose:t}}function Zc(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(Av(f1(e.exposed)),{get(t,n){if(n in t)return t[n];if(n in zo)return zo[n](e)},has(t,n){return n in t||n in zo}})):e.proxy}function NI(e,t=!0){return pt(e)?e.displayName||e.name:e.name||t&&e.__name}function VI(e){return pt(e)&&"__vccOpts"in e}const Gt=(e,t)=>T1(e,t,Or);function wn(e,t,n){try{sc(-1);const s=arguments.length;return s===2?Nt(t)&&!dt(t)?Dr(t)?ht(e,null,[t]):ht(e,t):ht(e,null,t):(s>3?n=Array.prototype.slice.call(arguments,2):s===3&&Dr(n)&&(n=[n]),ht(e,t,n))}finally{sc(1)}}const mb="3.5.26";let jh;const kg=typeof window<"u"&&window.trustedTypes;if(kg)try{jh=kg.createPolicy("vue",{createHTML:e=>e})}catch{}const _b=jh?e=>jh.createHTML(e):e=>e,FI="http://www.w3.org/2000/svg",UI="http://www.w3.org/1998/Math/MathML",ts=typeof document<"u"?document:null,Cg=ts&&ts.createElement("template"),$I={insert:(e,t,n)=>{t.insertBefore(e,n||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,n,s)=>{const i=t==="svg"?ts.createElementNS(FI,e):t==="mathml"?ts.createElementNS(UI,e):n?ts.createElement(e,{is:n}):ts.createElement(e);return e==="select"&&s&&s.multiple!=null&&i.setAttribute("multiple",s.multiple),i},createText:e=>ts.createTextNode(e),createComment:e=>ts.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>ts.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,n,s,i,r){const o=n?n.previousSibling:t.lastChild;if(i&&(i===r||i.nextSibling))for(;t.insertBefore(i.cloneNode(!0),n),!(i===r||!(i=i.nextSibling)););else{Cg.innerHTML=_b(s==="svg"?`<svg>${e}</svg>`:s==="mathml"?`<math>${e}</math>`:e);const a=Cg.content;if(s==="svg"||s==="mathml"){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}t.insertBefore(a,n)}return[o?o.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}},ks="transition",Io="animation",ha=Symbol("_vtc"),yb={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},BI=be({},Dv,yb),HI=e=>(e.displayName="Transition",e.props=BI,e),tu=HI((e,{slots:t})=>wn(O1,jI(e),t)),pi=(e,t=[])=>{dt(e)?e.forEach(n=>n(...t)):e&&e(...t)},xg=e=>e?dt(e)?e.some(t=>t.length>1):e.length>1:!1;function jI(e){const t={};for(const R in e)R in yb||(t[R]=e[R]);if(e.css===!1)return t;const{name:n="v",type:s,duration:i,enterFromClass:r=`${n}-enter-from`,enterActiveClass:o=`${n}-enter-active`,enterToClass:a=`${n}-enter-to`,appearFromClass:l=r,appearActiveClass:c=o,appearToClass:h=a,leaveFromClass:d=`${n}-leave-from`,leaveActiveClass:f=`${n}-leave-active`,leaveToClass:p=`${n}-leave-to`}=e,_=zI(i),y=_&&_[0],v=_&&_[1],{onBeforeEnter:w,onEnter:M,onEnterCancelled:E,onLeave:x,onLeaveCancelled:O,onBeforeAppear:V=w,onAppear:A=M,onAppearCancelled:b=E}=t,T=(R,C,rt,at)=>{R._enterCancelled=at,gi(R,C?h:a),gi(R,C?c:o),rt&&rt()},k=(R,C)=>{R._isLeaving=!1,gi(R,d),gi(R,p),gi(R,f),C&&C()},P=R=>(C,rt)=>{const at=R?A:M,Z=()=>T(C,R,rt);pi(at,[C,Z]),Rg(()=>{gi(C,R?l:r),Yn(C,R?h:a),xg(at)||Pg(C,s,y,Z)})};return be(t,{onBeforeEnter(R){pi(w,[R]),Yn(R,r),Yn(R,o)},onBeforeAppear(R){pi(V,[R]),Yn(R,l),Yn(R,c)},onEnter:P(!1),onAppear:P(!0),onLeave(R,C){R._isLeaving=!0;const rt=()=>k(R,C);Yn(R,d),R._enterCancelled?(Yn(R,f),Og(R)):(Og(R),Yn(R,f)),Rg(()=>{R._isLeaving&&(gi(R,d),Yn(R,p),xg(x)||Pg(R,s,v,rt))}),pi(x,[R,rt])},onEnterCancelled(R){T(R,!1,void 0,!0),pi(E,[R])},onAppearCancelled(R){T(R,!0,void 0,!0),pi(b,[R])},onLeaveCancelled(R){k(R),pi(O,[R])}})}function zI(e){if(e==null)return null;if(Nt(e))return[Zu(e.enter),Zu(e.leave)];{const t=Zu(e);return[t,t]}}function Zu(e){return ov(e)}function Yn(e,t){t.split(/\s+/).forEach(n=>n&&e.classList.add(n)),(e[ha]||(e[ha]=new Set)).add(t)}function gi(e,t){t.split(/\s+/).forEach(s=>s&&e.classList.remove(s));const n=e[ha];n&&(n.delete(t),n.size||(e[ha]=void 0))}function Rg(e){requestAnimationFrame(()=>{requestAnimationFrame(e)})}let WI=0;function Pg(e,t,n,s){const i=e._endId=++WI,r=()=>{i===e._endId&&s()};if(n!=null)return setTimeout(r,n);const{type:o,timeout:a,propCount:l}=qI(e,t);if(!o)return s();const c=o+"end";let h=0;const d=()=>{e.removeEventListener(c,f),r()},f=p=>{p.target===e&&++h>=l&&d()};setTimeout(()=>{h<l&&d()},a+1),e.addEventListener(c,f)}function qI(e,t){const n=window.getComputedStyle(e),s=_=>(n[_]||"").split(", "),i=s(`${ks}Delay`),r=s(`${ks}Duration`),o=Mg(i,r),a=s(`${Io}Delay`),l=s(`${Io}Duration`),c=Mg(a,l);let h=null,d=0,f=0;t===ks?o>0&&(h=ks,d=o,f=r.length):t===Io?c>0&&(h=Io,d=c,f=l.length):(d=Math.max(o,c),h=d>0?o>c?ks:Io:null,f=h?h===ks?r.length:l.length:0);const p=h===ks&&/\b(?:transform|all)(?:,|$)/.test(s(`${ks}Property`).toString());return{type:h,timeout:d,propCount:f,hasTransform:p}}function Mg(e,t){for(;e.length<t.length;)e=e.concat(e);return Math.max(...t.map((n,s)=>Dg(n)+Dg(e[s])))}function Dg(e){return e==="auto"?0:Number(e.slice(0,-1).replace(",","."))*1e3}function Og(e){return(e?e.ownerDocument:document).body.offsetHeight}function GI(e,t,n){const s=e[ha];s&&(t=(t?[t,...s]:[...s]).join(" ")),t==null?e.removeAttribute("class"):n?e.setAttribute("class",t):e.className=t}const Lg=Symbol("_vod"),KI=Symbol("_vsh"),QI=Symbol(""),YI=/(?:^|;)\s*display\s*:/;function XI(e,t,n){const s=e.style,i=Yt(n);let r=!1;if(n&&!i){if(t)if(Yt(t))for(const o of t.split(";")){const a=o.slice(0,o.indexOf(":")).trim();n[a]==null&&Nl(s,a,"")}else for(const o in t)n[o]==null&&Nl(s,o,"");for(const o in n)o==="display"&&(r=!0),Nl(s,o,n[o])}else if(i){if(t!==n){const o=s[QI];o&&(n+=";"+o),s.cssText=n,r=YI.test(n)}}else t&&e.removeAttribute("style");Lg in e&&(e[Lg]=r?s.display:"",e[KI]&&(s.display="none"))}const Ng=/\s*!important$/;function Nl(e,t,n){if(dt(n))n.forEach(s=>Nl(e,t,s));else if(n==null&&(n=""),t.startsWith("--"))e.setProperty(t,n);else{const s=JI(e,t);Ng.test(n)?e.setProperty(Gi(s),n.replace(Ng,""),"important"):e[s]=n}}const Vg=["Webkit","Moz","ms"],th={};function JI(e,t){const n=th[t];if(n)return n;let s=dn(t);if(s!=="filter"&&s in e)return th[t]=s;s=jc(s);for(let i=0;i<Vg.length;i++){const r=Vg[i]+s;if(r in e)return th[t]=r}return t}const Fg="http://www.w3.org/1999/xlink";function Ug(e,t,n,s,i,r=jE(t)){s&&t.startsWith("xlink:")?n==null?e.removeAttributeNS(Fg,t.slice(6,t.length)):e.setAttributeNS(Fg,t,n):n==null||r&&!av(n)?e.removeAttribute(t):e.setAttribute(t,r?"":In(n)?String(n):n)}function $g(e,t,n,s,i){if(t==="innerHTML"||t==="textContent"){n!=null&&(e[t]=t==="innerHTML"?_b(n):n);return}const r=e.tagName;if(t==="value"&&r!=="PROGRESS"&&!r.includes("-")){const a=r==="OPTION"?e.getAttribute("value")||"":e.value,l=n==null?e.type==="checkbox"?"on":"":String(n);(a!==l||!("_value"in e))&&(e.value=l),n==null&&e.removeAttribute(t),e._value=n;return}let o=!1;if(n===""||n==null){const a=typeof e[t];a==="boolean"?n=av(n):n==null&&a==="string"?(n="",o=!0):a==="number"&&(n=0,o=!0)}try{e[t]=n}catch{}o&&e.removeAttribute(i||t)}function Si(e,t,n,s){e.addEventListener(t,n,s)}function ZI(e,t,n,s){e.removeEventListener(t,n,s)}const Bg=Symbol("_vei");function tS(e,t,n,s,i=null){const r=e[Bg]||(e[Bg]={}),o=r[t];if(s&&o)o.value=s;else{const[a,l]=eS(t);if(s){const c=r[t]=iS(s,i);Si(e,a,c,l)}else o&&(ZI(e,a,o,l),r[t]=void 0)}}const Hg=/(?:Once|Passive|Capture)$/;function eS(e){let t;if(Hg.test(e)){t={};let s;for(;s=e.match(Hg);)e=e.slice(0,e.length-s[0].length),t[s[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):Gi(e.slice(2)),t]}let eh=0;const nS=Promise.resolve(),sS=()=>eh||(nS.then(()=>eh=0),eh=Date.now());function iS(e,t){const n=s=>{if(!s._vts)s._vts=Date.now();else if(s._vts<=n.attached)return;An(rS(s,n.value),t,5,[s])};return n.value=e,n.attached=sS(),n}function rS(e,t){if(dt(t)){const n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},t.map(s=>i=>!i._stopped&&s&&s(i))}else return t}const jg=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,oS=(e,t,n,s,i,r)=>{const o=i==="svg";t==="class"?GI(e,s,o):t==="style"?XI(e,n,s):Ca(t)?Ld(t)||tS(e,t,n,s,r):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):aS(e,t,s,o))?($g(e,t,s),!e.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&Ug(e,t,s,o,r,t!=="value")):e._isVueCE&&(/[A-Z]/.test(t)||!Yt(s))?$g(e,dn(t),s,r,t):(t==="true-value"?e._trueValue=s:t==="false-value"&&(e._falseValue=s),Ug(e,t,s,o))};function aS(e,t,n,s){if(s)return!!(t==="innerHTML"||t==="textContent"||t in e&&jg(t)&&pt(n));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="autocorrect"||t==="sandbox"&&e.tagName==="IFRAME"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const i=e.tagName;if(i==="IMG"||i==="VIDEO"||i==="CANVAS"||i==="SOURCE")return!1}return jg(t)&&Yt(n)?!1:t in e}const rc=e=>{const t=e.props["onUpdate:modelValue"]||!1;return dt(t)?n=>Ol(t,n):t};function lS(e){e.target.composing=!0}function zg(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const Ir=Symbol("_assign");function Wg(e,t,n){return t&&(e=e.trim()),n&&(e=zc(e)),e}const hl={created(e,{modifiers:{lazy:t,trim:n,number:s}},i){e[Ir]=rc(i);const r=s||i.props&&i.props.type==="number";Si(e,t?"change":"input",o=>{o.target.composing||e[Ir](Wg(e.value,n,r))}),(n||r)&&Si(e,"change",()=>{e.value=Wg(e.value,n,r)}),t||(Si(e,"compositionstart",lS),Si(e,"compositionend",zg),Si(e,"change",zg))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,oldValue:n,modifiers:{lazy:s,trim:i,number:r}},o){if(e[Ir]=rc(o),e.composing)return;const a=(r||e.type==="number")&&!/^0\d/.test(e.value)?zc(e.value):e.value,l=t??"";a!==l&&(document.activeElement===e&&e.type!=="range"&&(s&&t===n||i&&e.value.trim()===l)||(e.value=l))}},qg={deep:!0,created(e,{value:t,modifiers:{number:n}},s){const i=$c(t);Si(e,"change",()=>{const r=Array.prototype.filter.call(e.options,o=>o.selected).map(o=>n?zc(oc(o)):oc(o));e[Ir](e.multiple?i?new Set(r):r:r[0]),e._assigning=!0,Kc(()=>{e._assigning=!1})}),e[Ir]=rc(s)},mounted(e,{value:t}){Gg(e,t)},beforeUpdate(e,t,n){e[Ir]=rc(n)},updated(e,{value:t}){e._assigning||Gg(e,t)}};function Gg(e,t){const n=e.multiple,s=dt(t);if(!(n&&!s&&!$c(t))){for(let i=0,r=e.options.length;i<r;i++){const o=e.options[i],a=oc(o);if(n)if(s){const l=typeof a;l==="string"||l==="number"?o.selected=t.some(c=>String(c)===String(a)):o.selected=WE(t,a)>-1}else o.selected=t.has(a);else if(qc(oc(o),t)){e.selectedIndex!==i&&(e.selectedIndex=i);return}}!n&&e.selectedIndex!==-1&&(e.selectedIndex=-1)}}function oc(e){return"_value"in e?e._value:e.value}const cS=["ctrl","shift","alt","meta"],uS={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>cS.some(n=>e[`${n}Key`]&&!t.includes(n))},Da=(e,t)=>{const n=e._withMods||(e._withMods={}),s=t.join(".");return n[s]||(n[s]=((i,...r)=>{for(let o=0;o<t.length;o++){const a=uS[t[o]];if(a&&a(i,t))return}return e(i,...r)}))},vb=be({patchProp:oS},$I);let Go,Kg=!1;function hS(){return Go||(Go=_I(vb))}function dS(){return Go=Kg?Go:yI(vb),Kg=!0,Go}const fS=((...e)=>{const t=hS().createApp(...e),{mount:n}=t;return t.mount=s=>{const i=wb(s);if(!i)return;const r=t._component;!pt(r)&&!r.render&&!r.template&&(r.template=i.innerHTML),i.nodeType===1&&(i.textContent="");const o=n(i,!1,bb(i));return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),o},t}),pS=((...e)=>{const t=dS().createApp(...e),{mount:n}=t;return t.mount=s=>{const i=wb(s);if(i)return n(i,!0,bb(i))},t});function bb(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function wb(e){return Yt(e)?document.querySelector(e):e}const gS=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,mS=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,_S=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/;function yS(e,t){if(e==="__proto__"||e==="constructor"&&t&&typeof t=="object"&&"prototype"in t){vS(e);return}return t}function vS(e){console.warn(`[destr] Dropping "${e}" key to prevent prototype pollution.`)}function ac(e,t={}){if(typeof e!="string")return e;if(e[0]==='"'&&e[e.length-1]==='"'&&e.indexOf("\\")===-1)return e.slice(1,-1);const n=e.trim();if(n.length<=9)switch(n.toLowerCase()){case"true":return!0;case"false":return!1;case"undefined":return;case"null":return null;case"nan":return Number.NaN;case"infinity":return Number.POSITIVE_INFINITY;case"-infinity":return Number.NEGATIVE_INFINITY}if(!_S.test(e)){if(t.strict)throw new SyntaxError("[destr] Invalid JSON");return e}try{if(gS.test(e)||mS.test(e)){if(t.strict)throw new Error("[destr] Possible prototype pollution");return JSON.parse(e,yS)}return JSON.parse(e)}catch(s){if(t.strict)throw s;return e}}const bS=/#/g,wS=/&/g,TS=/\//g,ES=/=/g,sf=/\+/g,IS=/%5e/gi,SS=/%60/gi,AS=/%7c/gi,kS=/%20/gi;function CS(e){return encodeURI(""+e).replace(AS,"|")}function zh(e){return CS(typeof e=="string"?e:JSON.stringify(e)).replace(sf,"%2B").replace(kS,"+").replace(bS,"%23").replace(wS,"%26").replace(SS,"`").replace(IS,"^").replace(TS,"%2F")}function nh(e){return zh(e).replace(ES,"%3D")}function lc(e=""){try{return decodeURIComponent(""+e)}catch{return""+e}}function xS(e){return lc(e.replace(sf," "))}function RS(e){return lc(e.replace(sf," "))}function rf(e=""){const t=Object.create(null);e[0]==="?"&&(e=e.slice(1));for(const n of e.split("&")){const s=n.match(/([^=]+)=?(.*)/)||[];if(s.length<2)continue;const i=xS(s[1]);if(i==="__proto__"||i==="constructor")continue;const r=RS(s[2]||"");t[i]===void 0?t[i]=r:Array.isArray(t[i])?t[i].push(r):t[i]=[t[i],r]}return t}function PS(e,t){return(typeof t=="number"||typeof t=="boolean")&&(t=String(t)),t?Array.isArray(t)?t.map(n=>`${nh(e)}=${zh(n)}`).join("&"):`${nh(e)}=${zh(t)}`:nh(e)}function Tb(e){return Object.keys(e).filter(t=>e[t]!==void 0).map(t=>PS(t,e[t])).filter(Boolean).join("&")}const MS=/^[\s\w\0+.-]{2,}:([/\\]{1,2})/,DS=/^[\s\w\0+.-]{2,}:([/\\]{2})?/,OS=/^([/\\]\s*){2,}[^/\\]/,LS=/^[\s\0]*(blob|data|javascript|vbscript):$/i,NS=/\/$|\/\?|\/#/,VS=/^\.?\//;function Yr(e,t={}){return typeof t=="boolean"&&(t={acceptRelative:t}),t.strict?MS.test(e):DS.test(e)||(t.acceptRelative?OS.test(e):!1)}function FS(e){return!!e&&LS.test(e)}function Wh(e="",t){return t?NS.test(e):e.endsWith("/")}function Eb(e="",t){if(!t)return(Wh(e)?e.slice(0,-1):e)||"/";if(!Wh(e,!0))return e||"/";let n=e,s="";const i=e.indexOf("#");i!==-1&&(n=e.slice(0,i),s=e.slice(i));const[r,...o]=n.split("?");return((r.endsWith("/")?r.slice(0,-1):r)||"/")+(o.length>0?`?${o.join("?")}`:"")+s}function qh(e="",t){if(!t)return e.endsWith("/")?e:e+"/";if(Wh(e,!0))return e||"/";let n=e,s="";const i=e.indexOf("#");if(i!==-1&&(n=e.slice(0,i),s=e.slice(i),!n))return s;const[r,...o]=n.split("?");return r+"/"+(o.length>0?`?${o.join("?")}`:"")+s}function US(e=""){return e.startsWith("/")}function Qg(e=""){return US(e)?e:"/"+e}function $S(e,t){if(Sb(t)||Yr(e))return e;const n=Eb(t);return e.startsWith(n)?e:eu(n,e)}function BS(e,t){if(Sb(t))return e;const n=Eb(t);if(!e.startsWith(n))return e;const s=e.slice(n.length);return s[0]==="/"?s:"/"+s}function Ib(e,t){const n=Cb(e),s={...rf(n.search),...t};return n.search=Tb(s),xb(n)}function Sb(e){return!e||e==="/"}function HS(e){return e&&e!=="/"}function eu(e,...t){let n=e||"";for(const s of t.filter(i=>HS(i)))if(n){const i=s.replace(VS,"");n=qh(n)+i}else n=s;return n}function Ab(...e){const t=/\/(?!\/)/,n=e.filter(Boolean),s=[];let i=0;for(const o of n)if(!(!o||o==="/")){for(const[a,l]of o.split(t).entries())if(!(!l||l===".")){if(l===".."){if(s.length===1&&Yr(s[0]))continue;s.pop(),i--;continue}if(a===1&&s[s.length-1]?.endsWith(":/")){s[s.length-1]+="/"+l;continue}s.push(l),i++}}let r=s.join("/");return i>=0?n[0]?.startsWith("/")&&!r.startsWith("/")?r="/"+r:n[0]?.startsWith("./")&&!r.startsWith("./")&&(r="./"+r):r="../".repeat(-1*i)+r,n[n.length-1]?.endsWith("/")&&!r.endsWith("/")&&(r+="/"),r}function jS(e,t,n={}){return n.trailingSlash||(e=qh(e),t=qh(t)),n.leadingSlash||(e=Qg(e),t=Qg(t)),n.encoding||(e=lc(e),t=lc(t)),e===t}const kb=Symbol.for("ufo:protocolRelative");function Cb(e="",t){const n=e.match(/^[\s\0]*(blob:|data:|javascript:|vbscript:)(.*)/i);if(n){const[,d,f=""]=n;return{protocol:d.toLowerCase(),pathname:f,href:d+f,auth:"",host:"",search:"",hash:""}}if(!Yr(e,{acceptRelative:!0}))return Yg(e);const[,s="",i,r=""]=e.replace(/\\/g,"/").match(/^[\s\0]*([\w+.-]{2,}:)?\/\/([^/@]+@)?(.*)/)||[];let[,o="",a=""]=r.match(/([^#/?]*)(.*)?/)||[];s==="file:"&&(a=a.replace(/\/(?=[A-Za-z]:)/,""));const{pathname:l,search:c,hash:h}=Yg(a);return{protocol:s.toLowerCase(),auth:i?i.slice(0,Math.max(0,i.length-1)):"",host:o,pathname:l,search:c,hash:h,[kb]:!s}}function Yg(e=""){const[t="",n="",s=""]=(e.match(/([^#?]*)(\?[^#]*)?(#.*)?/)||[]).splice(1);return{pathname:t,search:n,hash:s}}function xb(e){const t=e.pathname||"",n=e.search?(e.search.startsWith("?")?"":"?")+e.search:"",s=e.hash||"",i=e.auth?e.auth+"@":"",r=e.host||"";return(e.protocol||e[kb]?(e.protocol||"")+"//":"")+i+r+t+n+s}class zS extends Error{constructor(t,n){super(t,n),this.name="FetchError",n?.cause&&!this.cause&&(this.cause=n.cause)}}function WS(e){const t=e.error?.message||e.error?.toString()||"",n=e.request?.method||e.options?.method||"GET",s=e.request?.url||String(e.request)||"/",i=`[${n}] ${JSON.stringify(s)}`,r=e.response?`${e.response.status} ${e.response.statusText}`:"<no response>",o=`${i}: ${r}${t?` ${t}`:""}`,a=new zS(o,e.error?{cause:e.error}:void 0);for(const l of["request","options","response"])Object.defineProperty(a,l,{get(){return e[l]}});for(const[l,c]of[["data","_data"],["status","status"],["statusCode","status"],["statusText","statusText"],["statusMessage","statusText"]])Object.defineProperty(a,l,{get(){return e.response&&e.response[c]}});return a}const qS=new Set(Object.freeze(["PATCH","POST","PUT","DELETE"]));function Xg(e="GET"){return qS.has(e.toUpperCase())}function GS(e){if(e===void 0)return!1;const t=typeof e;return t==="string"||t==="number"||t==="boolean"||t===null?!0:t!=="object"?!1:Array.isArray(e)?!0:e.buffer||e instanceof FormData||e instanceof URLSearchParams?!1:e.constructor&&e.constructor.name==="Object"||typeof e.toJSON=="function"}const KS=new Set(["image/svg","application/xml","application/xhtml","application/html"]),QS=/^application\/(?:[\w!#$%&*.^`~-]*\+)?json(;.+)?$/i;function YS(e=""){if(!e)return"json";const t=e.split(";").shift()||"";return QS.test(t)?"json":t==="text/event-stream"?"stream":KS.has(t)||t.startsWith("text/")?"text":"blob"}function XS(e,t,n,s){const i=JS(t?.headers??e?.headers,n?.headers,s);let r;return(n?.query||n?.params||t?.params||t?.query)&&(r={...n?.params,...n?.query,...t?.params,...t?.query}),{...n,...t,query:r,params:r,headers:i}}function JS(e,t,n){if(!t)return new n(e);const s=new n(t);if(e)for(const[i,r]of Symbol.iterator in e||Array.isArray(e)?e:new n(e))s.set(i,r);return s}async function dl(e,t){if(t)if(Array.isArray(t))for(const n of t)await n(e);else await t(e)}const ZS=new Set([408,409,425,429,500,502,503,504]),tA=new Set([101,204,205,304]);function Rb(e={}){const{fetch:t=globalThis.fetch,Headers:n=globalThis.Headers,AbortController:s=globalThis.AbortController}=e;async function i(a){const l=a.error&&a.error.name==="AbortError"&&!a.options.timeout||!1;if(a.options.retry!==!1&&!l){let h;typeof a.options.retry=="number"?h=a.options.retry:h=Xg(a.options.method)?0:1;const d=a.response&&a.response.status||500;if(h>0&&(Array.isArray(a.options.retryStatusCodes)?a.options.retryStatusCodes.includes(d):ZS.has(d))){const f=typeof a.options.retryDelay=="function"?a.options.retryDelay(a):a.options.retryDelay||0;return f>0&&await new Promise(p=>setTimeout(p,f)),r(a.request,{...a.options,retry:h-1})}}const c=WS(a);throw Error.captureStackTrace&&Error.captureStackTrace(c,r),c}const r=async function(l,c={}){const h={request:l,options:XS(l,c,e.defaults,n),response:void 0,error:void 0};if(h.options.method&&(h.options.method=h.options.method.toUpperCase()),h.options.onRequest&&(await dl(h,h.options.onRequest),h.options.headers instanceof n||(h.options.headers=new n(h.options.headers||{}))),typeof h.request=="string"&&(h.options.baseURL&&(h.request=$S(h.request,h.options.baseURL)),h.options.query&&(h.request=Ib(h.request,h.options.query),delete h.options.query),"query"in h.options&&delete h.options.query,"params"in h.options&&delete h.options.params),h.options.body&&Xg(h.options.method))if(GS(h.options.body)){const p=h.options.headers.get("content-type");typeof h.options.body!="string"&&(h.options.body=p==="application/x-www-form-urlencoded"?new URLSearchParams(h.options.body).toString():JSON.stringify(h.options.body)),p||h.options.headers.set("content-type","application/json"),h.options.headers.has("accept")||h.options.headers.set("accept","application/json")}else("pipeTo"in h.options.body&&typeof h.options.body.pipeTo=="function"||typeof h.options.body.pipe=="function")&&("duplex"in h.options||(h.options.duplex="half"));let d;if(!h.options.signal&&h.options.timeout){const p=new s;d=setTimeout(()=>{const _=new Error("[TimeoutError]: The operation was aborted due to timeout");_.name="TimeoutError",_.code=23,p.abort(_)},h.options.timeout),h.options.signal=p.signal}try{h.response=await t(h.request,h.options)}catch(p){return h.error=p,h.options.onRequestError&&await dl(h,h.options.onRequestError),await i(h)}finally{d&&clearTimeout(d)}if((h.response.body||h.response._bodyInit)&&!tA.has(h.response.status)&&h.options.method!=="HEAD"){const p=(h.options.parseResponse?"json":h.options.responseType)||YS(h.response.headers.get("content-type")||"");switch(p){case"json":{const _=await h.response.text(),y=h.options.parseResponse||ac;h.response._data=y(_);break}case"stream":{h.response._data=h.response.body||h.response._bodyInit;break}default:h.response._data=await h.response[p]()}}return h.options.onResponse&&await dl(h,h.options.onResponse),!h.options.ignoreResponseError&&h.response.status>=400&&h.response.status<600?(h.options.onResponseError&&await dl(h,h.options.onResponseError),await i(h)):h.response},o=async function(l,c){return(await r(l,c))._data};return o.raw=r,o.native=(...a)=>t(...a),o.create=(a={},l={})=>Rb({...e,...l,defaults:{...e.defaults,...l.defaults,...a}}),o}const cc=(function(){if(typeof globalThis<"u")return globalThis;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")})(),eA=cc.fetch?(...e)=>cc.fetch(...e):()=>Promise.reject(new Error("[ofetch] global.fetch is not supported!")),nA=cc.Headers,sA=cc.AbortController,iA=Rb({fetch:eA,Headers:nA,AbortController:sA}),rA=iA,oA=()=>window?.__NUXT__?.config||window?.useNuxtApp?.().payload?.config,of=()=>oA().app,aA=()=>of().baseURL,lA=()=>of().buildAssetsDir,af=(...e)=>Ab(Pb(),lA(),...e),Pb=(...e)=>{const t=of(),n=t.cdnURL||t.baseURL;return e.length?Ab(n,...e):n};globalThis.__buildAssetsURL=af,globalThis.__publicAssetsURL=Pb;globalThis.$fetch||(globalThis.$fetch=rA.create({baseURL:aA()}));"global"in globalThis||(globalThis.global=globalThis);function Gh(e,t={},n){for(const s in e){const i=e[s],r=n?`${n}:${s}`:s;typeof i=="object"&&i!==null?Gh(i,t,r):typeof i=="function"&&(t[r]=i)}return t}const cA={run:e=>e()},uA=()=>cA,Mb=typeof console.createTask<"u"?console.createTask:uA;function hA(e,t){const n=t.shift(),s=Mb(n);return e.reduce((i,r)=>i.then(()=>s.run(()=>r(...t))),Promise.resolve())}function dA(e,t){const n=t.shift(),s=Mb(n);return Promise.all(e.map(i=>s.run(()=>i(...t))))}function sh(e,t){for(const n of[...e])n(t)}let fA=class{constructor(){this._hooks={},this._before=void 0,this._after=void 0,this._deprecatedMessages=void 0,this._deprecatedHooks={},this.hook=this.hook.bind(this),this.callHook=this.callHook.bind(this),this.callHookWith=this.callHookWith.bind(this)}hook(t,n,s={}){if(!t||typeof n!="function")return()=>{};const i=t;let r;for(;this._deprecatedHooks[t];)r=this._deprecatedHooks[t],t=r.to;if(r&&!s.allowDeprecated){let o=r.message;o||(o=`${i} hook has been deprecated`+(r.to?`, please use ${r.to}`:"")),this._deprecatedMessages||(this._deprecatedMessages=new Set),this._deprecatedMessages.has(o)||(console.warn(o),this._deprecatedMessages.add(o))}if(!n.name)try{Object.defineProperty(n,"name",{get:()=>"_"+t.replace(/\W+/g,"_")+"_hook_cb",configurable:!0})}catch{}return this._hooks[t]=this._hooks[t]||[],this._hooks[t].push(n),()=>{n&&(this.removeHook(t,n),n=void 0)}}hookOnce(t,n){let s,i=(...r)=>(typeof s=="function"&&s(),s=void 0,i=void 0,n(...r));return s=this.hook(t,i),s}removeHook(t,n){if(this._hooks[t]){const s=this._hooks[t].indexOf(n);s!==-1&&this._hooks[t].splice(s,1),this._hooks[t].length===0&&delete this._hooks[t]}}deprecateHook(t,n){this._deprecatedHooks[t]=typeof n=="string"?{to:n}:n;const s=this._hooks[t]||[];delete this._hooks[t];for(const i of s)this.hook(t,i)}deprecateHooks(t){Object.assign(this._deprecatedHooks,t);for(const n in t)this.deprecateHook(n,t[n])}addHooks(t){const n=Gh(t),s=Object.keys(n).map(i=>this.hook(i,n[i]));return()=>{for(const i of s.splice(0,s.length))i()}}removeHooks(t){const n=Gh(t);for(const s in n)this.removeHook(s,n[s])}removeAllHooks(){for(const t in this._hooks)delete this._hooks[t]}callHook(t,...n){return n.unshift(t),this.callHookWith(hA,t,...n)}callHookParallel(t,...n){return n.unshift(t),this.callHookWith(dA,t,...n)}callHookWith(t,n,...s){const i=this._before||this._after?{name:n,args:s,context:{}}:void 0;this._before&&sh(this._before,i);const r=t(n in this._hooks?[...this._hooks[n]]:[],s);return r instanceof Promise?r.finally(()=>{this._after&&i&&sh(this._after,i)}):(this._after&&i&&sh(this._after,i),r)}beforeEach(t){return this._before=this._before||[],this._before.push(t),()=>{if(this._before!==void 0){const n=this._before.indexOf(t);n!==-1&&this._before.splice(n,1)}}}afterEach(t){return this._after=this._after||[],this._after.push(t),()=>{if(this._after!==void 0){const n=this._after.indexOf(t);n!==-1&&this._after.splice(n,1)}}}};function pA(){return new fA}function gA(e={}){let t,n=!1;const s=o=>{if(t&&t!==o)throw new Error("Context conflict")};let i;if(e.asyncContext){const o=e.AsyncLocalStorage||globalThis.AsyncLocalStorage;o?i=new o:console.warn("[unctx] `AsyncLocalStorage` is not provided.")}const r=()=>{if(i){const o=i.getStore();if(o!==void 0)return o}return t};return{use:()=>{const o=r();if(o===void 0)throw new Error("Context is not available");return o},tryUse:()=>r(),set:(o,a)=>{a||s(o),t=o,n=!0},unset:()=>{t=void 0,n=!1},call:(o,a)=>{s(o),t=o;try{return i?i.run(o,a):a()}finally{n||(t=void 0)}},async callAsync(o,a){t=o;const l=()=>{t=o},c=()=>t===o?l:void 0;Kh.add(c);try{const h=i?i.run(o,a):a();return n||(t=void 0),await h}finally{Kh.delete(c)}}}}function mA(e={}){const t={};return{get(n,s={}){return t[n]||(t[n]=gA({...e,...s})),t[n]}}}const uc=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof global<"u"?global:typeof window<"u"?window:{},Jg="__unctx__",_A=uc[Jg]||(uc[Jg]=mA()),yA=(e,t={})=>_A.get(e,t),Zg="__unctx_async_handlers__",Kh=uc[Zg]||(uc[Zg]=new Set);function Db(e){const t=[];for(const i of Kh){const r=i();r&&t.push(r)}const n=()=>{for(const i of t)i()};let s=e();return s&&typeof s=="object"&&"catch"in s&&(s=s.catch(i=>{throw n(),i})),[s,n]}const tm={id:"__nuxt-loader"},uU={componentName:"NuxtLink",prefetch:!0,prefetchOn:{visibility:!0}},vA="#__nuxt",Ob="nuxt-app",em=36e5,bA="vite:preloadError";function Lb(e=Ob){return yA(e,{asyncContext:!1})}const wA="__nuxt_plugin";function TA(e){let t=0;const n={_id:e.id||Ob||"nuxt-app",_scope:qE(),provide:void 0,versions:{get nuxt(){return"4.2.2"},get vue(){return n.vueApp.version}},payload:fr({...e.ssrContext?.payload||{},data:fr({}),state:Qs({}),once:new Set,_errors:fr({})}),static:{data:{}},runWithContext(i){return n._scope.active&&!Fd()?n._scope.run(()=>nm(n,i)):nm(n,i)},isHydrating:!0,deferHydration(){if(!n.isHydrating)return()=>{};t++;let i=!1;return()=>{if(!i&&(i=!0,t--,t===0))return n.isHydrating=!1,n.callHook("app:suspense:resolve")}},_asyncDataPromises:{},_asyncData:fr({}),_payloadRevivers:{},...e};{const i=window.__NUXT__;if(i)for(const r in i)switch(r){case"data":case"state":case"_errors":Object.assign(n.payload[r],i[r]);break;default:n.payload[r]=i[r]}}n.hooks=pA(),n.hook=n.hooks.hook,n.callHook=n.hooks.callHook,n.provide=(i,r)=>{const o="$"+i;fl(n,o,r),fl(n.vueApp.config.globalProperties,o,r)},fl(n.vueApp,"$nuxt",n),fl(n.vueApp.config.globalProperties,"$nuxt",n);{window.addEventListener(bA,r=>{n.callHook("app:chunkError",{error:r.payload}),r.payload.message.includes("Unable to preload CSS")&&r.preventDefault()}),window.useNuxtApp||=pe;const i=n.hook("app:error",(...r)=>{console.error("[nuxt] error caught during app initialization",...r)});n.hook("app:mounted",i)}const s=n.payload.config;return n.provide("config",s),n}function EA(e,t){t.hooks&&e.hooks.addHooks(t.hooks)}async function IA(e,t){if(typeof t=="function"){const{provide:n}=await e.runWithContext(()=>t(e))||{};if(n&&typeof n=="object")for(const s in n)e.provide(s,n[s])}}async function SA(e,t){const n=new Set,s=[],i=[];let r,o=0;async function a(l){const c=l.dependsOn?.filter(h=>t.some(d=>d._name===h)&&!n.has(h))??[];if(c.length>0)s.push([new Set(c),l]);else{const h=IA(e,l).then(async()=>{l._name&&(n.add(l._name),await Promise.all(s.map(async([d,f])=>{d.has(l._name)&&(d.delete(l._name),d.size===0&&(o++,await a(f)))})))}).catch(d=>{if(!l.parallel&&!e.payload.error)throw d;r||=d});l.parallel?i.push(h):await h}}for(const l of t)EA(e,l);for(const l of t)await a(l);if(await Promise.all(i),o)for(let l=0;l<o;l++)await Promise.all(i);if(r)throw e.payload.error||r}function ms(e){if(typeof e=="function")return e;const t=e._name||e.name;return delete e.name,Object.assign(e.setup||(()=>{}),e,{[wA]:!0,_name:t})}function nm(e,t,n){const s=()=>t();return Lb(e._id).set(e),e.vueApp.runWithContext(s)}function AA(e){let t;return Qc()&&(t=Qr()?.appContext.app.$nuxt),t||=Lb(e).tryUse(),t||null}function pe(e){const t=AA(e);if(!t)throw new Error("[nuxt] instance unavailable");return t}function da(e){return pe().$config}function fl(e,t,n){Object.defineProperty(e,t,{get:()=>n})}function kA(e,t){return{ctx:{table:e},matchAll:n=>Vb(n,e)}}function Nb(e){const t={};for(const n in e)t[n]=n==="dynamic"?new Map(Object.entries(e[n]).map(([s,i])=>[s,Nb(i)])):new Map(Object.entries(e[n]));return t}function CA(e){return kA(Nb(e))}function Vb(e,t,n){e.endsWith("/")&&(e=e.slice(0,-1)||"/");const s=[];for(const[r,o]of sm(t.wildcard))(e===r||e.startsWith(r+"/"))&&s.push(o);for(const[r,o]of sm(t.dynamic))if(e.startsWith(r+"/")){const a="/"+e.slice(r.length).split("/").splice(2).join("/");s.push(...Vb(a,o))}const i=t.static.get(e);return i&&s.push(i),s.filter(Boolean)}function sm(e){return[...e.entries()].sort((t,n)=>t[0].length-n[0].length)}function ih(e){if(e===null||typeof e!="object")return!1;const t=Object.getPrototypeOf(e);return t!==null&&t!==Object.prototype&&Object.getPrototypeOf(t)!==null||Symbol.iterator in e?!1:Symbol.toStringTag in e?Object.prototype.toString.call(e)==="[object Module]":!0}function Qh(e,t,n=".",s){if(!ih(t))return Qh(e,{},n,s);const i=Object.assign({},t);for(const r in e){if(r==="__proto__"||r==="constructor")continue;const o=e[r];o!=null&&(s&&s(i,r,o,n)||(Array.isArray(o)&&Array.isArray(i[r])?i[r]=[...o,...i[r]]:ih(o)&&ih(i[r])?i[r]=Qh(o,i[r],(n?`${n}.`:"")+r.toString(),s):i[r]=o))}return i}function xA(e){return(...t)=>t.reduce((n,s)=>Qh(n,s,"",e),{})}const RA=xA();function PA(e,t){try{return t in e}catch{return!1}}class im extends Error{static __h3_error__=!0;statusCode=500;fatal=!1;unhandled=!1;statusMessage;data;cause;constructor(t,n={}){super(t,n),n.cause&&!this.cause&&(this.cause=n.cause)}toJSON(){const t={message:this.message,statusCode:Yh(this.statusCode,500)};return this.statusMessage&&(t.statusMessage=Fb(this.statusMessage)),this.data!==void 0&&(t.data=this.data),t}}function MA(e){if(typeof e=="string")return new im(e);if(DA(e))return e;const t=new im(e.message??e.statusMessage??"",{cause:e.cause||e});if(PA(e,"stack"))try{Object.defineProperty(t,"stack",{get(){return e.stack}})}catch{try{t.stack=e.stack}catch{}}if(e.data&&(t.data=e.data),e.statusCode?t.statusCode=Yh(e.statusCode,t.statusCode):e.status&&(t.statusCode=Yh(e.status,t.statusCode)),e.statusMessage?t.statusMessage=e.statusMessage:e.statusText&&(t.statusMessage=e.statusText),t.statusMessage){const n=t.statusMessage;Fb(t.statusMessage)!==n&&console.warn("[h3] Please prefer using `message` for longer error messages instead of `statusMessage`. In the future, `statusMessage` will be sanitized by default.")}return e.fatal!==void 0&&(t.fatal=e.fatal),e.unhandled!==void 0&&(t.unhandled=e.unhandled),t}function DA(e){return e?.constructor?.__h3_error__===!0}const OA=/[^\u0009\u0020-\u007E]/g;function Fb(e=""){return e.replace(OA,"")}function Yh(e,t=200){return!e||(typeof e=="string"&&(e=Number.parseInt(e,10)),e<100||e>999)?t:e}const Ub=Symbol("route");import.meta.url.replace(/\/app\/.*$/,"/");const Fi=()=>pe()?.$router,$b=()=>Qc()?Mi(Ub,pe()._route):pe()._route;const LA=()=>{try{if(pe()._processingMiddleware)return!0}catch{return!1}return!1},NA=(e,t)=>{e||="/";const n=typeof e=="string"?e:"path"in e?VA(e):Fi().resolve(e).href;if(t?.open){const{target:l="_blank",windowFeatures:c={}}=t.open,h=[];for(const[d,f]of Object.entries(c))f!==void 0&&h.push(`${d.toLowerCase()}=${f}`);return open(n,l,h.join(", ")),Promise.resolve()}const s=Yr(n,{acceptRelative:!0}),i=t?.external||s;if(i){if(!t?.external)throw new Error("Navigating to an external URL is not allowed by default. Use `navigateTo(url, { external: true })`.");const{protocol:l}=new URL(n,window.location.href);if(l&&FS(l))throw new Error(`Cannot navigate to a URL with '${l}' protocol.`)}const r=LA();if(!i&&r){if(t?.replace){if(typeof e=="string"){const{pathname:l,search:c,hash:h}=Cb(e);return{path:l,...c&&{query:rf(c)},...h&&{hash:h},replace:!0}}return{...e,replace:!0}}return e}const o=Fi(),a=pe();return i?(a._scope.stop(),t?.replace?location.replace(n):location.href=n,r?a.isHydrating?new Promise(()=>{}):!1:Promise.resolve()):t?.replace?o.replace(e):o.push(e)};function VA(e){return Ib(e.path||"",e.query||{})+(e.hash||"")}const Bb="__nuxt_error",lf=()=>v1(pe().payload,"error"),FA=e=>{const t=cf(e);try{const n=lf();pe().hooks.callHook("app:error",t),n.value||=t}catch{throw t}return t},UA=async(e={})=>{const t=pe(),n=lf();t.callHook("app:error:cleared",e),e.redirect&&await Fi().replace(e.redirect),n.value=void 0},$A=e=>!!e&&typeof e=="object"&&Bb in e,cf=e=>{const t=MA(e);return Object.defineProperty(t,Bb,{value:!0,configurable:!1,writable:!1}),t};function BA(e){const t=jA(e),n=new ArrayBuffer(t.length),s=new DataView(n);for(let i=0;i<n.byteLength;i++)s.setUint8(i,t.charCodeAt(i));return n}const HA="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";function jA(e){e.length%4===0&&(e=e.replace(/==?$/,""));let t="",n=0,s=0;for(let i=0;i<e.length;i++)n<<=6,n|=HA.indexOf(e[i]),s+=6,s===24&&(t+=String.fromCharCode((n&16711680)>>16),t+=String.fromCharCode((n&65280)>>8),t+=String.fromCharCode(n&255),n=s=0);return s===12?(n>>=4,t+=String.fromCharCode(n)):s===18&&(n>>=2,t+=String.fromCharCode((n&65280)>>8),t+=String.fromCharCode(n&255)),t}const zA=-1,WA=-2,qA=-3,GA=-4,KA=-5,QA=-6;function YA(e,t){return XA(JSON.parse(e),t)}function XA(e,t){if(typeof e=="number")return i(e,!0);if(!Array.isArray(e)||e.length===0)throw new Error("Invalid input");const n=e,s=Array(n.length);function i(r,o=!1){if(r===zA)return;if(r===qA)return NaN;if(r===GA)return 1/0;if(r===KA)return-1/0;if(r===QA)return-0;if(o||typeof r!="number")throw new Error("Invalid input");if(r in s)return s[r];const a=n[r];if(!a||typeof a!="object")s[r]=a;else if(Array.isArray(a))if(typeof a[0]=="string"){const l=a[0],c=t&&Object.hasOwn(t,l)?t[l]:void 0;if(c){let h=a[1];return typeof h!="number"&&(h=n.push(a[1])-1),s[r]=c(i(h))}switch(l){case"Date":s[r]=new Date(a[1]);break;case"Set":const h=new Set;s[r]=h;for(let p=1;p<a.length;p+=1)h.add(i(a[p]));break;case"Map":const d=new Map;s[r]=d;for(let p=1;p<a.length;p+=2)d.set(i(a[p]),i(a[p+1]));break;case"RegExp":s[r]=new RegExp(a[1],a[2]);break;case"Object":s[r]=Object(a[1]);break;case"BigInt":s[r]=BigInt(a[1]);break;case"null":const f=Object.create(null);s[r]=f;for(let p=1;p<a.length;p+=2)f[a[p]]=i(a[p+1]);break;case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"BigInt64Array":case"BigUint64Array":{const p=globalThis[l],_=new p(i(a[1]));s[r]=a[2]!==void 0?_.subarray(a[2],a[3]):_;break}case"ArrayBuffer":{const p=a[1],_=BA(p);s[r]=_;break}case"Temporal.Duration":case"Temporal.Instant":case"Temporal.PlainDate":case"Temporal.PlainTime":case"Temporal.PlainDateTime":case"Temporal.PlainMonthDay":case"Temporal.PlainYearMonth":case"Temporal.ZonedDateTime":{const p=l.slice(9);s[r]=Temporal[p].from(a[1]);break}case"URL":{const p=new URL(a[1]);s[r]=p;break}case"URLSearchParams":{const p=new URLSearchParams(a[1]);s[r]=p;break}default:throw new Error(`Unknown type ${l}`)}}else{const l=new Array(a.length);s[r]=l;for(let c=0;c<a.length;c+=1){const h=a[c];h!==WA&&(l[c]=i(h))}}else{const l={};s[r]=l;for(const c in a){if(c==="__proto__")throw new Error("Cannot parse an object with a `__proto__` property");const h=a[c];l[c]=i(h)}}return s[r]}return i(0)}const JA=new Set(["link","style","script","noscript"]),ZA=new Set(["title","titleTemplate","script","style","noscript"]),rm=new Set(["base","meta","link","style","script","noscript"]),tk=new Set(["title","base","htmlAttrs","bodyAttrs","meta","link","style","script","noscript"]),ek=new Set(["base","title","titleTemplate","bodyAttrs","htmlAttrs","templateParams"]),nk=new Set(["key","tagPosition","tagPriority","tagDuplicateStrategy","innerHTML","textContent","processTemplateParams"]),sk=new Set(["templateParams","htmlAttrs","bodyAttrs"]),ik=new Set(["theme-color","google-site-verification","og","article","book","profile","twitter","author"]);function Xh(e,t={},n){for(const s in e){const i=e[s],r=n?`${n}:${s}`:s;typeof i=="object"&&i!==null?Xh(i,t,r):typeof i=="function"&&(t[r]=i)}return t}const Hb=(()=>{if(console.createTask)return console.createTask;const e={run:t=>t()};return()=>e})();function jb(e,t,n,s){for(let i=n;i<e.length;i+=1)try{const r=s?s.run(()=>e[i](...t)):e[i](...t);if(r instanceof Promise)return r.then(()=>jb(e,t,i+1,s))}catch(r){return Promise.reject(r)}}function rk(e,t,n){if(e.length>0)return jb(e,t,0,Hb(n))}function ok(e,t,n){if(e.length>0){const s=Hb(n);return Promise.all(e.map(i=>s.run(()=>i(...t))))}}function rh(e,t){for(const n of[...e])n(t)}var ak=class{_hooks;_before;_after;_deprecatedHooks;_deprecatedMessages;constructor(){this._hooks={},this._before=void 0,this._after=void 0,this._deprecatedMessages=void 0,this._deprecatedHooks={},this.hook=this.hook.bind(this),this.callHook=this.callHook.bind(this),this.callHookWith=this.callHookWith.bind(this)}hook(e,t,n={}){if(!e||typeof t!="function")return()=>{};const s=e;let i;for(;this._deprecatedHooks[e];)i=this._deprecatedHooks[e],e=i.to;if(i&&!n.allowDeprecated){let r=i.message;r||(r=`${s} hook has been deprecated`+(i.to?`, please use ${i.to}`:"")),this._deprecatedMessages||(this._deprecatedMessages=new Set),this._deprecatedMessages.has(r)||(console.warn(r),this._deprecatedMessages.add(r))}if(!t.name)try{Object.defineProperty(t,"name",{get:()=>"_"+e.replace(/\W+/g,"_")+"_hook_cb",configurable:!0})}catch{}return this._hooks[e]=this._hooks[e]||[],this._hooks[e].push(t),()=>{t&&(this.removeHook(e,t),t=void 0)}}hookOnce(e,t){let n,s=(...i)=>(typeof n=="function"&&n(),n=void 0,s=void 0,t(...i));return n=this.hook(e,s),n}removeHook(e,t){const n=this._hooks[e];if(n){const s=n.indexOf(t);s!==-1&&n.splice(s,1),n.length===0&&(this._hooks[e]=void 0)}}deprecateHook(e,t){this._deprecatedHooks[e]=typeof t=="string"?{to:t}:t;const n=this._hooks[e]||[];this._hooks[e]=void 0;for(const s of n)this.hook(e,s)}deprecateHooks(e){for(const t in e)this.deprecateHook(t,e[t])}addHooks(e){const t=Xh(e),n=Object.keys(t).map(s=>this.hook(s,t[s]));return()=>{for(const s of n)s();n.length=0}}removeHooks(e){const t=Xh(e);for(const n in t)this.removeHook(n,t[n])}removeAllHooks(){this._hooks={}}callHook(e,...t){return this.callHookWith(rk,e,t)}callHookParallel(e,...t){return this.callHookWith(ok,e,t)}callHookWith(e,t,n){const s=this._before||this._after?{name:t,args:n,context:{}}:void 0;this._before&&rh(this._before,s);const i=e(this._hooks[t]?[...this._hooks[t]]:[],n,t);return i instanceof Promise?i.finally(()=>{this._after&&s&&rh(this._after,s)}):(this._after&&s&&rh(this._after,s),i)}beforeEach(e){return this._before=this._before||[],this._before.push(e),()=>{if(this._before!==void 0){const t=this._before.indexOf(e);t!==-1&&this._before.splice(t,1)}}}afterEach(e){return this._after=this._after||[],this._after.push(e),()=>{if(this._after!==void 0){const t=this._after.indexOf(e);t!==-1&&this._after.splice(t,1)}}}};function lk(){return new ak}const ck=["name","property","http-equiv"],uk=new Set(["viewport","description","keywords","robots"]);function zb(e){const t=e.split(":");return t.length?ik.has(t[1]):!1}function Jh(e){const{props:t,tag:n}=e;if(ek.has(n))return n;if(n==="link"&&t.rel==="canonical")return"canonical";if(t.charset)return"charset";if(e.tag==="meta"){for(const s of ck)if(t[s]!==void 0){const i=t[s],r=i&&typeof i=="string"&&i.includes(":"),o=i&&uk.has(i),l=!(r||o)&&e.key?`:key:${e.key}`:"";return`${n}:${i}${l}`}}if(e.key)return`${n}:key:${e.key}`;if(t.id)return`${n}:id:${t.id}`;if(ZA.has(n)){const s=e.textContent||e.innerHTML;if(s)return`${n}:content:${s}`}}function om(e){const t=e._h||e._d;if(t)return t;const n=e.textContent||e.innerHTML;return n||`${e.tag}:${Object.entries(e.props).map(([s,i])=>`${s}:${String(i)}`).join(",")}`}function hc(e,t,n){typeof e==="function"&&(!n||n!=="titleTemplate"&&!(n[0]==="o"&&n[1]==="n"))&&(e=e());const i=t?t(n,e):e;if(Array.isArray(i))return i.map(r=>hc(r,t));if(i?.constructor===Object){const r={};for(const o of Object.keys(i))r[o]=hc(i[o],t,o);return r}return i}function hk(e,t){const n=e==="style"?new Map:new Set;function s(i){if(i==null||i===void 0)return;const r=String(i).trim();if(r)if(e==="style"){const[o,...a]=r.split(":").map(l=>l?l.trim():"");o&&a.length&&n.set(o,a.join(":"))}else r.split(" ").filter(Boolean).forEach(o=>n.add(o))}return typeof t=="string"?e==="style"?t.split(";").forEach(s):s(t):Array.isArray(t)?t.forEach(i=>s(i)):t&&typeof t=="object"&&Object.entries(t).forEach(([i,r])=>{r&&r!=="false"&&(e==="style"?n.set(String(i).trim(),String(r)):s(i))}),n}function Wb(e,t){return e.props=e.props||{},t?e.tag==="templateParams"?(e.props=t,e):(Object.entries(t).forEach(([n,s])=>{if(s===null){e.props[n]=null;return}if(n==="class"||n==="style"){e.props[n]=hk(n,s);return}if(nk.has(n)){if(["textContent","innerHTML"].includes(n)&&typeof s=="object"){let a=t.type;if(t.type||(a="application/json"),!a?.endsWith("json")&&a!=="speculationrules")return;t.type=a,e.props.type=a,e[n]=JSON.stringify(s)}else e[n]=s;return}const i=String(s),r=n.startsWith("data-"),o=e.tag==="meta"&&n==="content";i==="true"||i===""?e.props[n]=r||o?i:!0:!s&&r&&i==="false"?e.props[n]="false":s!==void 0&&(e.props[n]=s)}),e):e}function dk(e,t){const n=typeof t=="object"&&typeof t!="function"?t:{[e==="script"||e==="noscript"||e==="style"?"innerHTML":"textContent"]:t},s=Wb({tag:e,props:{}},n);return s.key&&JA.has(s.tag)&&(s.props["data-hid"]=s._h=s.key),s.tag==="script"&&typeof s.innerHTML=="object"&&(s.innerHTML=JSON.stringify(s.innerHTML),s.props.type=s.props.type||"application/json"),Array.isArray(s.props.content)?s.props.content.map(i=>({...s,props:{...s.props,content:i}})):s}function fk(e,t){if(!e)return[];typeof e=="function"&&(e=e());const n=(i,r)=>{for(let o=0;o<t.length;o++)r=t[o](i,r);return r};e=n(void 0,e);const s=[];return e=hc(e,n),Object.entries(e||{}).forEach(([i,r])=>{if(r!==void 0)for(const o of Array.isArray(r)?r:[r])s.push(dk(i,o))}),s.flat()}const am=(e,t)=>e._w===t._w?e._p-t._p:e._w-t._w,lm={base:-10,title:10},pk={critical:-8,high:-1,low:2},cm={meta:{"content-security-policy":-30,charset:-20,viewport:-15},link:{preconnect:20,stylesheet:60,preload:70,modulepreload:70,prefetch:90,"dns-prefetch":90,prerender:90},script:{async:30,defer:80,sync:50},style:{imported:40,sync:60}},gk=/@import/,So=e=>e===""||e===!0;function mk(e,t){if(typeof t.tagPriority=="number")return t.tagPriority;let n=100;const s=pk[t.tagPriority]||0,i=e.resolvedOptions.disableCapoSorting?{link:{},script:{},style:{}}:cm;if(t.tag in lm)n=lm[t.tag];else if(t.tag==="meta"){const r=t.props["http-equiv"]==="content-security-policy"?"content-security-policy":t.props.charset?"charset":t.props.name==="viewport"?"viewport":null;r&&(n=cm.meta[r])}else if(t.tag==="link"&&t.props.rel)n=i.link[t.props.rel];else if(t.tag==="script"){const r=String(t.props.type);So(t.props.async)?n=i.script.async:t.props.src&&!So(t.props.defer)&&!So(t.props.async)&&r!=="module"&&!r.endsWith("json")||t.innerHTML&&!r.endsWith("json")?n=i.script.sync:(So(t.props.defer)&&t.props.src&&!So(t.props.async)||r==="module")&&(n=i.script.defer)}else t.tag==="style"&&(n=t.innerHTML&&gk.test(t.innerHTML)?i.style.imported:i.style.sync);return(n||100)+s}function um(e,t){const n=typeof t=="function"?t(e):t,s=n.key||String(e.plugins.size+1);e.plugins.get(s)||(e.plugins.set(s,n),e.hooks.addHooks(n.hooks||{}))}function _k(e={}){const t=lk();t.addHooks(e.hooks||{});const n=!e.document,s=new Map,i=new Map,r=new Set,o={_entryCount:1,plugins:i,dirty:!1,resolvedOptions:e,hooks:t,ssr:n,entries:s,headEntries(){return[...s.values()]},use:a=>um(o,a),push(a,l){const c={...l||{}};delete c.head;const h=c._index??o._entryCount++,d={_i:h,input:a,options:c},f={_poll(p=!1){o.dirty=!0,!p&&r.add(h),t.callHook("entries:updated",o)},dispose(){s.delete(h)&&o.invalidate()},patch(p){(!c.mode||c.mode==="server"&&n||c.mode==="client"&&!n)&&(d.input=p,s.set(h,d),f._poll())}};return f.patch(a),f},async resolveTags(){const a={tagMap:new Map,tags:[],entries:[...o.entries.values()]};for(await t.callHook("entries:resolve",a);r.size;){const f=r.values().next().value;r.delete(f);const p=s.get(f);if(p){const _={tags:fk(p.input,e.propResolvers||[]).map(y=>Object.assign(y,p.options)),entry:p};await t.callHook("entries:normalize",_),p._tags=_.tags.map((y,v)=>(y._w=mk(o,y),y._p=(p._i<<10)+v,y._d=Jh(y),y))}}let l=!1;a.entries.flatMap(f=>(f._tags||[]).map(p=>({...p,props:{...p.props}}))).sort(am).reduce((f,p)=>{const _=String(p._d||p._p);if(!f.has(_))return f.set(_,p);const y=f.get(_);if((p?.tagDuplicateStrategy||(sk.has(p.tag)?"merge":null)||(p.key&&p.key===y.key?"merge":null))==="merge"){const w={...y.props};Object.entries(p.props).forEach(([M,E])=>w[M]=M==="style"?new Map([...y.props.style||new Map,...E]):M==="class"?new Set([...y.props.class||new Set,...E]):E),f.set(_,{...p,props:w})}else p._p>>10===y._p>>10&&p.tag==="meta"&&zb(_)?(f.set(_,Object.assign([...Array.isArray(y)?y:[y],p],p)),l=!0):(p._w===y._w?p._p>y._p:p?._w<y?._w)&&f.set(_,p);return f},a.tagMap);const c=a.tagMap.get("title"),h=a.tagMap.get("titleTemplate");if(o._title=c?.textContent,h){const f=h?.textContent;if(o._titleTemplate=f,f){let p=typeof f=="function"?f(c?.textContent):f;typeof p=="string"&&!o.plugins.has("template-params")&&(p=p.replace("%s",c?.textContent||"")),c?p===null?a.tagMap.delete("title"):a.tagMap.set("title",{...c,textContent:p}):(h.tag="title",h.textContent=p)}}a.tags=Array.from(a.tagMap.values()),l&&(a.tags=a.tags.flat().sort(am)),await t.callHook("tags:beforeResolve",a),await t.callHook("tags:resolve",a),await t.callHook("tags:afterResolve",a);const d=[];for(const f of a.tags){const{innerHTML:p,tag:_,props:y}=f;if(tk.has(_)&&!(Object.keys(y).length===0&&!f.innerHTML&&!f.textContent)&&!(_==="meta"&&!y.content&&!y["http-equiv"]&&!y.charset)){if(_==="script"&&p){if(String(y.type).endsWith("json")){const v=typeof p=="string"?p:JSON.stringify(p);f.innerHTML=v.replace(/</g,"\\u003C")}else typeof p=="string"&&(f.innerHTML=p.replace(new RegExp(`</${_}`,"g"),`<\\/${_}`));f._d=Jh(f)}d.push(f)}}return d},invalidate(){for(const a of s.values())r.add(a._i);o.dirty=!0,t.callHook("entries:updated",o)}};return(e?.plugins||[]).forEach(a=>um(o,a)),o.hooks.callHook("init",o),e.init?.forEach(a=>a&&o.push(a)),o}const yk=(e,t)=>ae(t)?g1(t):t,uf="usehead";function vk(e){return{install(n){n.config.globalProperties.$unhead=e,n.config.globalProperties.$head=e,n.provide(uf,e)}}.install}function bk(){if(Qc()){const e=Mi(uf);if(!e)throw new Error("useHead() was called without provide context, ensure you call it through the setup() function.");return e}throw new Error("useHead() was called without provide context, ensure you call it through the setup() function.")}function wk(e,t={}){const n=t.head||bk();return n.ssr?n.push(e||{},t):Tk(n,e,t)}function Tk(e,t,n={}){const s=lt(!1);let i;return x1(()=>{const o=s.value?{}:hc(t,yk);i?i.patch(o):i=e.push(o,n)}),Qr()&&(Qd(()=>{i.dispose()}),Uv(()=>{s.value=!0}),Fv(()=>{s.value=!1})),i}function qb(e){const t=e||pe();return t.ssrContext?.head||t.runWithContext(()=>{if(Qc()){const n=Mi(uf);if(!n)throw new Error("[nuxt] [unhead] Missing Unhead instance.");return n}})}function hU(e,t={}){const n=t.head||qb(t.nuxt);return wk(e,{head:n,...t})}let Vl,Fl;function Ek(){return Vl=$fetch(af(`builds/meta/${da().app.buildId}.json`),{responseType:"json"}),Vl.then(e=>{Fl=CA(e.matcher)}).catch(e=>{console.error("[nuxt] Error fetching app manifest.",e)}),Vl}function nu(){return Vl||Ek()}async function hf(e){const t=typeof e=="string"?e:e.path;if(await nu(),!Fl)return console.error("[nuxt] Error creating app manifest matcher.",Fl),{};try{return RA({},...Fl.matchAll(t).reverse())}catch(n){return console.error("[nuxt] Error matching route rules.",n),{}}}async function hm(e,t={}){if(!await Kb(e))return null;const s=await Sk(e,t);return await Gb(s)||null}const Ik="_payload.json";async function Sk(e,t={}){const n=new URL(e,"http://localhost");if(n.host!=="localhost"||Yr(n.pathname,{acceptRelative:!0}))throw new Error("Payload URL must not include hostname: "+e);const s=da(),i=t.hash||(t.fresh?Date.now():s.app.buildId),r=s.app.cdnURL,o=r&&await Kb(e)?r:s.app.baseURL;return eu(o,n.pathname,Ik+(i?`?${i}`:""))}async function Gb(e){const t=fetch(e,{cache:"force-cache"}).then(n=>n.text().then(Qb));try{return await t}catch(n){console.warn("[nuxt] Cannot load payload ",e,n)}return null}async function Kb(e=$b().path){const t=pe();return e=e==="/"?e:e.replace(/\/$/,""),(await nu()).prerendered.includes(e)?!0:t.runWithContext(async()=>{const s=await hf({path:e});return!!s.prerender&&!s.redirect})}let mi=null;async function Ak(){if(mi)return mi;const e=document.getElementById("__NUXT_DATA__");if(!e)return{};const t=await Qb(e.textContent||""),n=e.dataset.src?await Gb(e.dataset.src):void 0;return mi={...t,...n,...window.__NUXT__},mi.config?.public&&(mi.config.public=Qs(mi.config.public)),mi}async function Qb(e){return await YA(e,pe()._payloadRevivers)}function kk(e,t){pe()._payloadRevivers[e]=t}const Ck=[["NuxtError",e=>cf(e)],["EmptyShallowRef",e=>Vi(e==="_"?void 0:e==="0n"?BigInt(0):ac(e))],["EmptyRef",e=>lt(e==="_"?void 0:e==="0n"?BigInt(0):ac(e))],["ShallowRef",e=>Vi(e)],["ShallowReactive",e=>fr(e)],["Ref",e=>lt(e)],["Reactive",e=>Qs(e)]],xk=ms({name:"nuxt:revive-payload:client",order:-30,async setup(e){let t,n;for(const[s,i]of Ck)kk(s,i);Object.assign(e.payload,([t,n]=Db(()=>e.runWithContext(Ak)),t=await t,n(),t)),delete window.__NUXT__}});async function df(e,t={}){const n=t.document||e.resolvedOptions.document;if(!n||!e.dirty)return;const s={shouldRender:!0,tags:[]};if(await e.hooks.callHook("dom:beforeRender",s),!!s.shouldRender)return e._domUpdatePromise||(e._domUpdatePromise=new Promise(async i=>{const r=new Map,o=new Promise(p=>{e.resolveTags().then(_=>{p(_.map(y=>{const v=r.get(y._d)||0,w={tag:y,id:(v?`${y._d}:${v}`:y._d)||om(y),shouldRender:!0};return y._d&&zb(y._d)&&r.set(y._d,v+1),w}))})});let a=e._dom;if(!a){a={title:n.title,elMap:new Map().set("htmlAttrs",n.documentElement).set("bodyAttrs",n.body)};for(const p of["body","head"]){const _=n[p]?.children;for(const y of _){const v=y.tagName.toLowerCase();if(!rm.has(v))continue;const w=Wb({tag:v,props:{}},{innerHTML:y.innerHTML,...y.getAttributeNames().reduce((M,E)=>(M[E]=y.getAttribute(E),M),{})||{}});if(w.key=y.getAttribute("data-hid")||void 0,w._d=Jh(w)||om(w),a.elMap.has(w._d)){let M=1,E=w._d;for(;a.elMap.has(E);)E=`${w._d}:${M++}`;a.elMap.set(E,y)}else a.elMap.set(w._d,y)}}}a.pendingSideEffects={...a.sideEffects},a.sideEffects={};function l(p,_,y){const v=`${p}:${_}`;a.sideEffects[v]=y,delete a.pendingSideEffects[v]}function c({id:p,$el:_,tag:y}){const v=y.tag.endsWith("Attrs");a.elMap.set(p,_),v||(y.textContent&&y.textContent!==_.textContent&&(_.textContent=y.textContent),y.innerHTML&&y.innerHTML!==_.innerHTML&&(_.innerHTML=y.innerHTML),l(p,"el",()=>{_?.remove(),a.elMap.delete(p)}));for(const w in y.props){if(!Object.prototype.hasOwnProperty.call(y.props,w))continue;const M=y.props[w];if(w.startsWith("on")&&typeof M=="function"){const x=_?.dataset;if(x&&x[`${w}fired`]){const O=w.slice(0,-5);M.call(_,new Event(O.substring(2)))}_.getAttribute(`data-${w}`)!==""&&((y.tag==="bodyAttrs"?n.defaultView:_).addEventListener(w.substring(2),M.bind(_)),_.setAttribute(`data-${w}`,""));continue}const E=`attr:${w}`;if(w==="class"){if(!M)continue;for(const x of M)v&&l(p,`${E}:${x}`,()=>_.classList.remove(x)),!_.classList.contains(x)&&_.classList.add(x)}else if(w==="style"){if(!M)continue;for(const[x,O]of M)l(p,`${E}:${x}`,()=>{_.style.removeProperty(x)}),_.style.setProperty(x,O)}else M!==!1&&M!==null&&(_.getAttribute(w)!==M&&_.setAttribute(w,M===!0?"":String(M)),v&&l(p,E,()=>_.removeAttribute(w)))}}const h=[],d={bodyClose:void 0,bodyOpen:void 0,head:void 0},f=await o;for(const p of f){const{tag:_,shouldRender:y,id:v}=p;if(y){if(_.tag==="title"){n.title=_.textContent,l("title","",()=>n.title=a.title);continue}p.$el=p.$el||a.elMap.get(v),p.$el?c(p):rm.has(_.tag)&&h.push(p)}}for(const p of h){const _=p.tag.tagPosition||"head";p.$el=n.createElement(p.tag.tag),c(p),d[_]=d[_]||n.createDocumentFragment(),d[_].appendChild(p.$el)}for(const p of f)await e.hooks.callHook("dom:renderTag",p,n,l);d.head&&n.head.appendChild(d.head),d.bodyOpen&&n.body.insertBefore(d.bodyOpen,n.body.firstChild),d.bodyClose&&n.body.appendChild(d.bodyClose);for(const p in a.pendingSideEffects)a.pendingSideEffects[p]();e._dom=a,await e.hooks.callHook("dom:rendered",{renders:f}),i()}).finally(()=>{e._domUpdatePromise=void 0,e.dirty=!1})),e._domUpdatePromise}function Rk(e={}){const t=e.domOptions?.render||df;e.document=e.document||(typeof window<"u"?document:void 0);const n=e.document?.head.querySelector('script[id="unhead:payload"]')?.innerHTML||!1;return _k({...e,plugins:[...e.plugins||[],{key:"client",hooks:{"entries:updated":t}}],init:[n?JSON.parse(n):!1,...e.init||[]]})}function Pk(e,t){let n=0;return()=>{const s=++n;t(()=>{n===s&&e()})}}function Mk(e={}){const t=Rk({domOptions:{render:Pk(()=>df(t),n=>setTimeout(n,0))},...e});return t.install=vk(t),t}const Dk={disableDefaults:!0},Ok=ms({name:"nuxt:head",enforce:"pre",setup(e){const t=Mk(Dk);e.vueApp.use(t);{let n=!0;const s=async()=>{n=!1,await df(t)};t.hooks.hook("dom:beforeRender",i=>{i.shouldRender=!n}),e.hooks.hook("page:start",()=>{n=!0}),e.hooks.hook("page:finish",()=>{e.isHydrating||s()}),e.hooks.hook("app:error",s),e.hooks.hook("app:suspense:resolve",s)}}}),Lk=async e=>{let t,n;const s=([t,n]=Db(()=>hf({path:e.path})),t=await t,n(),t);if(s.redirect){const i=s.redirect.includes("#")?s.redirect:s.redirect+e.hash;return Yr(i,{acceptRelative:!0})?(window.location.href=i,!1):i}},Nk=[Lk];function oh(e){const t=e&&typeof e=="object"?e:{};typeof e=="object"&&(e=xb({pathname:e.path||"",search:Tb(e.query||{}),hash:e.hash||""}));const n=new URL(e.toString(),window.location.href);return{path:n.pathname,fullPath:e,query:rf(n.search),hash:n.hash,params:t.params||{},name:void 0,matched:t.matched||[],redirectedFrom:void 0,meta:t.meta||{},href:e}}const Vk=ms({name:"nuxt:router",enforce:"pre",setup(e){const t=BS(window.location.pathname,da().app.baseURL)+window.location.search+window.location.hash,n=[],s={"navigate:before":[],"resolve:before":[],"navigate:after":[],error:[]},i=(d,f)=>(s[d].push(f),()=>s[d].splice(s[d].indexOf(f),1)),r=da().app.baseURL,o=Qs(oh(t));async function a(d,f){try{const p=oh(d);for(const _ of s["navigate:before"]){const y=await _(p,o);if(y===!1||y instanceof Error)return;if(typeof y=="string"&&y.length)return a(y,!0)}for(const _ of s["resolve:before"])await _(p,o);Object.assign(o,p),window.history[f?"replaceState":"pushState"]({},"",eu(r,p.fullPath)),e.isHydrating||await e.runWithContext(UA);for(const _ of s["navigate:after"])await _(p,o)}catch(p){for(const _ of s.error)await _(p)}}const c={currentRoute:Gt(()=>o),isReady:()=>Promise.resolve(),options:{},install:()=>Promise.resolve(),push:d=>a(d,!1),replace:d=>a(d,!0),back:()=>window.history.go(-1),go:d=>window.history.go(d),forward:()=>window.history.go(1),beforeResolve:d=>i("resolve:before",d),beforeEach:d=>i("navigate:before",d),afterEach:d=>i("navigate:after",d),onError:d=>i("error",d),resolve:oh,addRoute:(d,f)=>{n.push(f)},getRoutes:()=>n,hasRoute:d=>n.some(f=>f.name===d),removeRoute:d=>{const f=n.findIndex(p=>p.name===d);f!==-1&&n.splice(f,1)}};e.vueApp.component("RouterLink",Vt({functional:!0,props:{to:{type:String,required:!0},custom:Boolean,replace:Boolean,activeClass:String,exactActiveClass:String,ariaCurrentValue:String},setup:(d,{slots:f})=>{const p=()=>a(d.to,d.replace);return()=>{const _=c.resolve(d.to);return d.custom?f.default?.({href:d.to,navigate:p,route:_}):wn("a",{href:d.to,onClick:y=>(y.preventDefault(),p())},f)}}})),window.addEventListener("popstate",d=>{const f=d.target.location;c.replace(f.href.replace(f.origin,""))}),e._route=o,e._middleware||={global:[],named:{}};const h=e.payload.state._layout;return e.hooks.hookOnce("app:created",async()=>{c.beforeEach(async(d,f)=>{d.meta=Qs(d.meta||{}),e.isHydrating&&h&&!zn(d.meta.layout)&&(d.meta.layout=h),e._processingMiddleware=!0;{const p=new Set([...Nk,...e._middleware.global]);{const _=await e.runWithContext(()=>hf({path:d.path}));if(_.appMiddleware)for(const y in _.appMiddleware){const v=e._middleware.named[y];if(!v)return;_.appMiddleware[y]?p.add(v):p.delete(v)}}for(const _ of p){const y=await e.runWithContext(()=>_(d,f));if(y!==!0&&(y||y===!1))return y}}}),c.afterEach(()=>{delete e._processingMiddleware}),await c.replace(t),jS(o.fullPath,t)||await e.runWithContext(()=>NA(o.fullPath))}),{provide:{route:o,router:c}}}}),dm=globalThis.requestIdleCallback||(e=>{const t=Date.now(),n={didTimeout:!1,timeRemaining:()=>Math.max(0,50-(Date.now()-t))};return setTimeout(()=>{e(n)},1)}),dU=globalThis.cancelIdleCallback||(e=>{clearTimeout(e)}),ff=e=>{const t=pe();t.isHydrating?t.hooks.hookOnce("app:suspense:resolve",()=>{dm(()=>e())}):dm(()=>e())},Fk=ms({name:"nuxt:payload",setup(e){const t=new Set;Fi().beforeResolve(async(n,s)=>{if(n.path===s.path)return;const i=await hm(n.path);if(i){for(const r of t)delete e.static.data[r];for(const r in i.data)r in e.static.data||t.add(r),e.static.data[r]=i.data[r]}}),ff(()=>{e.hooks.hook("link:prefetch",async n=>{const{hostname:s}=new URL(n,window.location.href);s===window.location.hostname&&await hm(n).catch(()=>{console.warn("[nuxt] Error preloading payload for",n)})}),navigator.connection?.effectiveType!=="slow-2g"&&setTimeout(nu,1e3)})}}),Uk=ms(()=>{const e=Fi();ff(()=>{e.beforeResolve(async()=>{await new Promise(t=>{setTimeout(t,100),requestAnimationFrame(()=>{setTimeout(t,0)})})})})}),$k=ms(e=>{let t;async function n(){let s;try{s=await nu()}catch(i){const r=i;if(!("status"in r&&(r.status===404||r.status===403)))throw r}t&&clearTimeout(t),t=setTimeout(n,em);try{const i=await $fetch(af("builds/latest.json")+`?${Date.now()}`);i.id!==s?.id&&(e.hooks.callHook("app:manifest:update",i),t&&clearTimeout(t))}catch{}}ff(()=>{t=setTimeout(n,em)})});function Bk(e={}){const t=e.path||window.location.pathname;let n={};try{n=ac(sessionStorage.getItem("nuxt:reload")||"{}")}catch{}if(e.force||n?.path!==t||n?.expires<Date.now()){try{sessionStorage.setItem("nuxt:reload",JSON.stringify({path:t,expires:Date.now()+(e.ttl??1e4)}))}catch{}if(e.persistState)try{sessionStorage.setItem("nuxt:reload:state",JSON.stringify({state:pe().payload.state}))}catch{}window.location.pathname!==t?window.location.href=t:window.location.reload()}}const Hk=ms({name:"nuxt:chunk-reload",setup(e){const t=Fi(),n=da(),s=new Set;t.beforeEach(()=>{s.clear()}),e.hook("app:chunkError",({error:r})=>{s.add(r)});function i(r){const o=eu(n.app.baseURL,r.fullPath);Bk({path:o,persistState:!0})}e.hook("app:manifest:update",()=>{t.beforeResolve(i)}),t.onError((r,o)=>{s.has(r)&&i(o)})}}),jk=ms({name:"nuxt:global-components"}),zk={mounted(e,t){e._clickOutside=n=>{e===n.target||e.contains(n.target)||t.value(n)},document.addEventListener("click",e._clickOutside)},unmounted(e){e._clickOutside&&document.removeEventListener("click",e._clickOutside)}},Wk=ms(e=>{e.vueApp.directive("click-outside",zk)}),qk=[xk,Ok,Vk,Fk,Uk,$k,Hk,jk,Wk];function Gk(e,t=!1){if(e){if(e.nodeName==="#comment"&&e.nodeValue==="[")return Yb(e,[],t);if(t){const n=e.cloneNode(!0);return n.querySelectorAll("[data-island-slot]").forEach(s=>{s.innerHTML=""}),[n.outerHTML]}return[e.outerHTML]}}function Yb(e,t=[],n=!1){if(e&&e.nodeName){if(Qk(e))return t;if(!Kk(e)){const s=e.cloneNode(!0);n&&s.querySelectorAll?.("[data-island-slot]").forEach(i=>{i.innerHTML=""}),t.push(s.outerHTML)}Yb(e.nextSibling,t,n)}return t}function ah(e,t){const n=e?Gk(e):[t];return n?Er(n.join(""),n.length):wn("div")}function Kk(e){return e.nodeName==="#comment"&&e.nodeValue==="["}function Qk(e){return e.nodeName==="#comment"&&e.nodeValue==="]"}const pl="<div></div>",lh=new WeakMap;function Yk(e){if(lh.has(e))return lh.get(e);const t={...e};return t.render?t.render=(n,s,i,r,o,a)=>{if(r.mounted$??n.mounted$){const l=e.render?.bind(n)(n,s,i,r,o,a);return l.children===null||typeof l.children=="string"?bn(l):wn(l)}return ah(n._.vnode.el,pl)}:t.template&&=`
      <template v-if="mounted$">${e.template}</template>
      <template v-else>${pl}</template>
    `,t.setup=(n,s)=>{const i=pe(),r=Vi(i.isHydrating===!1),o=Qr();if(i.isHydrating){const l={...o.attrs},c=Xk(o);for(const h in l)delete o.attrs[h];Ys(()=>{Object.assign(o.attrs,l),o.vnode.dirs=c})}Ys(()=>{r.value=!0});const a=e.setup?.(n,s)||{};return Vd(a)?Promise.resolve(a).then(l=>typeof l!="function"?(l||={},l.mounted$=r,l):(...c)=>{if(r.value||!i.isHydrating){const h=l(...c);return h.children===null||typeof h.children=="string"?bn(h):wn(h)}return ah(o?.vnode.el,pl)}):typeof a=="function"?(...l)=>{if(r.value){const c=a(...l),h=t.inheritAttrs!==!1?s.attrs:void 0;return c.children===null||typeof c.children=="string"?bn(c,h):wn(c,h)}return ah(o?.vnode.el,pl)}:Object.assign(a,{mounted$:r})},lh.set(e,t),t}function Xk(e){if(!e||!e.vnode.dirs)return null;const t=e.vnode.dirs;return e.vnode.dirs=null,t}function Jk(e={}){const t=Vi(""),n=Vi(e.politeness||"polite"),s=qb();function i(c="",h="polite"){t.value=c,n.value=h}function r(c){return i(c,"polite")}function o(c){return i(c,"assertive")}function a(){i(document?.title?.trim(),n.value)}function l(){s?.hooks?.removeHook("dom:rendered",a)}return a(),s?.hooks?.hook("dom:rendered",()=>{a()}),{_cleanup:l,message:t,politeness:n,set:i,polite:r,assertive:o}}function Zk(e={}){const t=pe(),n=t._routeAnnouncer||=Jk(e);return e.politeness!==n.politeness.value&&(n.politeness.value=e.politeness||"polite"),Fd()&&(t._routeAnnouncerDeps||=0,t._routeAnnouncerDeps++,GE(()=>{t._routeAnnouncerDeps--,t._routeAnnouncerDeps===0&&(n._cleanup(),delete t._routeAnnouncer)})),n}const tC=Vt({name:"NuxtRouteAnnouncer",props:{atomic:{type:Boolean,default:!1},politeness:{type:String,default:"polite"}},setup(e,{slots:t,expose:n}){const{set:s,polite:i,assertive:r,message:o,politeness:a}=Zk({politeness:e.politeness});return n({set:s,polite:i,assertive:r,message:o,politeness:a}),()=>wn("span",{class:"nuxt-route-announcer",style:{position:"absolute"}},wn("span",{role:"alert","aria-live":a.value,"aria-atomic":e.atomic,style:{border:"0",clip:"rect(0 0 0 0)","clip-path":"inset(50%)",height:"1px",width:"1px",overflow:"hidden",position:"absolute","white-space":"nowrap","word-wrap":"normal",margin:"-1px",padding:"0"}},t.default?t.default({message:o.value}):o.value))}}),eC=["type","value","placeholder","autocomplete","maxlength","disabled"],nC=Vt({__name:"BaseInput",props:{modelValue:{},type:{default:"text"},placeholder:{default:""},autocomplete:{default:"off"},maxlength:{},error:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(e,{emit:t}){const n=t,s=i=>{const r=i.target;n("update:modelValue",r.value)};return(i,r)=>(H(),J("input",{type:e.type,value:e.modelValue,placeholder:e.placeholder,autocomplete:e.autocomplete,maxlength:e.maxlength,disabled:e.disabled,class:Rt(["form-input",{"form-input--error":e.error}]),onInput:s},null,42,eC))}}),Zt=(e,t)=>{const n=e.__vccOpts||e;for(const[s,i]of t)n[s]=i;return n},pf=Object.assign(Zt(nC,[["__scopeId","data-v-91b986db"]]),{__name:"UiBaseInput"}),sC={key:0,class:"form-error"},iC=Vt({__name:"FormError",props:{message:{},visible:{type:Boolean,default:!1}},setup(e){return(t,n)=>e.visible&&e.message?(H(),J("div",sC,G(e.message),1)):Le("",!0)}}),gf=Object.assign(Zt(iC,[["__scopeId","data-v-75d4b223"]]),{__name:"UiFormError"}),rC=["type","disabled"],oC=Vt({__name:"BaseButton",props:{variant:{default:"primary"},loading:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},type:{default:"button"}},emits:["click"],setup(e,{emit:t}){const n=e,s=t,i=r=>{!n.loading&&!n.disabled&&s("click",r)};return(r,o)=>(H(),J("button",{type:e.type,class:Rt(["btn",`btn--${e.variant}`,{"btn--loading":e.loading}]),disabled:e.disabled||e.loading,onClick:i},[Zd(r.$slots,"default",{},void 0)],10,rC))}}),mf=Object.assign(Zt(oC,[["__scopeId","data-v-d54604fc"]]),{__name:"UiBaseButton"}),aC=Vt({__name:"LoginForm",emits:["submit","forgotPassword"],setup(e,{expose:t,emit:n}){const s=lt(""),i=lt(""),r=lt(""),o=lt(!1),a=n,l=()=>{if(r.value="",!s.value.trim()){r.value="Inserisci la tua email.";return}if(!i.value){r.value="Inserisci la password.";return}a("submit",{email:s.value.trim(),password:i.value})},c=()=>{r.value=""};return t({setError:h=>{r.value=h},setLoading:h=>{o.value=h},reset:()=>{s.value="",i.value="",r.value="",o.value=!1}}),(h,d)=>{const f=pf,p=gf,_=mf;return H(),J("form",{class:"auth-form",onSubmit:Da(l,["prevent"])},[ht(f,{modelValue:s.value,"onUpdate:modelValue":d[0]||(d[0]=y=>s.value=y),type:"email",placeholder:"Email",autocomplete:"email",error:!!r.value&&r.value.includes("email"),onInput:c},null,8,["modelValue","error"]),ht(f,{modelValue:i.value,"onUpdate:modelValue":d[1]||(d[1]=y=>i.value=y),type:"password",placeholder:"Password",autocomplete:"current-password",error:!!r.value&&r.value.includes("password"),onInput:c},null,8,["modelValue","error"]),ht(p,{message:r.value,visible:!!r.value},null,8,["message","visible"]),ht(_,{type:"submit",variant:"primary",loading:o.value},{default:ke(()=>[...d[3]||(d[3]=[$t(" ACCEDI ",-1)])]),_:1},8,["loading"]),ht(_,{variant:"link",onClick:d[2]||(d[2]=y=>a("forgotPassword"))},{default:ke(()=>[...d[4]||(d[4]=[$t(" Password dimenticata? ",-1)])]),_:1})],32)}}}),lC=Object.assign(Zt(aC,[["__scopeId","data-v-5927dcd2"]]),{__name:"AuthLoginForm"}),cC=Vt({__name:"RegisterForm",emits:["submit"],setup(e,{expose:t,emit:n}){const s=lt(""),i=lt(""),r=lt(""),o=lt(""),a=lt(""),l=lt(!1),c=n,h=()=>{if(a.value="",!s.value.trim()){a.value="Scegli un nickname.";return}if(s.value.trim().length<3){a.value="Il nickname deve essere di almeno 3 caratteri.";return}if(!i.value.trim()){a.value="Inserisci la tua email.";return}if(!r.value){a.value="Inserisci una password.";return}if(r.value.length<6){a.value="La password deve essere di almeno 6 caratteri.";return}if(!o.value){a.value="Conferma la password.";return}if(r.value!==o.value){a.value="Le password non coincidono.";return}c("submit",{nickname:s.value.trim(),email:i.value.trim(),password:r.value})},d=()=>{a.value=""};return t({setError:f=>{a.value=f},setLoading:f=>{l.value=f},reset:()=>{s.value="",i.value="",r.value="",o.value="",a.value="",l.value=!1}}),(f,p)=>{const _=pf,y=gf,v=mf;return H(),J("form",{class:"auth-form",onSubmit:Da(h,["prevent"])},[ht(_,{modelValue:s.value,"onUpdate:modelValue":p[0]||(p[0]=w=>s.value=w),type:"text",placeholder:"Nickname",autocomplete:"username",maxlength:20,onInput:d},null,8,["modelValue"]),ht(_,{modelValue:i.value,"onUpdate:modelValue":p[1]||(p[1]=w=>i.value=w),type:"email",placeholder:"Email",autocomplete:"email",onInput:d},null,8,["modelValue"]),ht(_,{modelValue:r.value,"onUpdate:modelValue":p[2]||(p[2]=w=>r.value=w),type:"password",placeholder:"Password (min. 6 caratteri)",autocomplete:"new-password",onInput:d},null,8,["modelValue"]),ht(_,{modelValue:o.value,"onUpdate:modelValue":p[3]||(p[3]=w=>o.value=w),type:"password",placeholder:"Conferma Password",autocomplete:"new-password",onInput:d},null,8,["modelValue"]),ht(y,{message:a.value,visible:!!a.value},null,8,["message","visible"]),ht(v,{type:"submit",variant:"primary",loading:l.value},{default:ke(()=>[...p[4]||(p[4]=[$t(" REGISTRATI ",-1)])]),_:1},8,["loading"])],32)}}}),uC=Object.assign(Zt(cC,[["__scopeId","data-v-cea70857"]]),{__name:"AuthRegisterForm"}),hC={class:"reset-form"},dC={key:0,class:"reset-success"},fC=Vt({__name:"ResetPasswordForm",emits:["submit","back"],setup(e,{expose:t,emit:n}){const s=lt(""),i=lt(""),r=lt(!1),o=lt(!1),a=n,l=()=>{if(i.value="",!s.value.trim()){i.value="Inserisci la tua email.";return}a("submit",s.value.trim())},c=()=>{i.value=""};return t({setError:h=>{i.value=h},setLoading:h=>{o.value=h},setSuccess:h=>{r.value=h},reset:()=>{s.value="",i.value="",r.value=!1,o.value=!1}}),(h,d)=>{const f=mf,p=pf,_=gf;return H(),J("div",hC,[r.value?(H(),J("div",dC,[d[4]||(d[4]=I("span",{class:"reset-success__icon"},"",-1)),d[5]||(d[5]=I("p",{class:"reset-success__text"}," Email inviata! Controlla la tua casella di posta (anche spam). ",-1)),ht(f,{variant:"link",onClick:d[0]||(d[0]=y=>a("back"))},{default:ke(()=>[...d[3]||(d[3]=[$t("  Torna al login ",-1)])]),_:1})])):(H(),J("form",{key:1,class:"auth-form",onSubmit:Da(l,["prevent"])},[d[8]||(d[8]=I("h3",{class:"reset-form__title"},"Recupera Password",-1)),d[9]||(d[9]=I("p",{class:"reset-form__description"},[$t(" Inserisci la tua email. Ti invieremo un link per reimpostare la password. "),I("br"),I("small",null,"Controlla anche la cartella spam.")],-1)),ht(p,{modelValue:s.value,"onUpdate:modelValue":d[1]||(d[1]=y=>s.value=y),type:"email",placeholder:"Email",autocomplete:"email",onInput:c},null,8,["modelValue"]),ht(_,{message:i.value,visible:!!i.value},null,8,["message","visible"]),ht(f,{type:"submit",variant:"primary",loading:o.value},{default:ke(()=>[...d[6]||(d[6]=[$t(" INVIA LINK ",-1)])]),_:1},8,["loading"]),ht(f,{variant:"link",onClick:d[2]||(d[2]=y=>a("back"))},{default:ke(()=>[...d[7]||(d[7]=[$t("  Torna al login ",-1)])]),_:1})],32))])}}}),pC=Object.assign(Zt(fC,[["__scopeId","data-v-17ef1ec5"]]),{__name:"AuthResetPasswordForm"}),gC=()=>{};var fm={};const Xb=function(e){const t=[];let n=0;for(let s=0;s<e.length;s++){let i=e.charCodeAt(s);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=i&63|128):(i&64512)===55296&&s+1<e.length&&(e.charCodeAt(s+1)&64512)===56320?(i=65536+((i&1023)<<10)+(e.charCodeAt(++s)&1023),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=i&63|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=i&63|128)}return t},mC=function(e){const t=[];let n=0,s=0;for(;n<e.length;){const i=e[n++];if(i<128)t[s++]=String.fromCharCode(i);else if(i>191&&i<224){const r=e[n++];t[s++]=String.fromCharCode((i&31)<<6|r&63)}else if(i>239&&i<365){const r=e[n++],o=e[n++],a=e[n++],l=((i&7)<<18|(r&63)<<12|(o&63)<<6|a&63)-65536;t[s++]=String.fromCharCode(55296+(l>>10)),t[s++]=String.fromCharCode(56320+(l&1023))}else{const r=e[n++],o=e[n++];t[s++]=String.fromCharCode((i&15)<<12|(r&63)<<6|o&63)}}return t.join("")},Jb={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let i=0;i<e.length;i+=3){const r=e[i],o=i+1<e.length,a=o?e[i+1]:0,l=i+2<e.length,c=l?e[i+2]:0,h=r>>2,d=(r&3)<<4|a>>4;let f=(a&15)<<2|c>>6,p=c&63;l||(p=64,o||(f=64)),s.push(n[h],n[d],n[f],n[p])}return s.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(Xb(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):mC(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let i=0;i<e.length;){const r=n[e.charAt(i++)],a=i<e.length?n[e.charAt(i)]:0;++i;const c=i<e.length?n[e.charAt(i)]:64;++i;const d=i<e.length?n[e.charAt(i)]:64;if(++i,r==null||a==null||c==null||d==null)throw new _C;const f=r<<2|a>>4;if(s.push(f),c!==64){const p=a<<4&240|c>>2;if(s.push(p),d!==64){const _=c<<6&192|d;s.push(_)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class _C extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const yC=function(e){const t=Xb(e);return Jb.encodeByteArray(t,!0)},dc=function(e){return yC(e).replace(/\./g,"")},Zb=function(e){try{return Jb.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function vC(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const bC=()=>vC().__FIREBASE_DEFAULTS__,wC=()=>{if(typeof process>"u"||typeof fm>"u")return;const e=fm.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},TC=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=e&&Zb(e[1]);return t&&JSON.parse(t)},su=()=>{try{return gC()||bC()||wC()||TC()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},t0=e=>su()?.emulatorHosts?.[e],EC=e=>{const t=t0(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const s=parseInt(t.substring(n+1),10);return t[0]==="["?[t.substring(1,n-1),s]:[t.substring(0,n),s]},e0=()=>su()?.config,n0=e=>su()?.[`_${e}`];class IC{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,s))}}}function Xr(e){try{return(e.startsWith("http://")||e.startsWith("https://")?new URL(e).hostname:e).endsWith(".cloudworkstations.dev")}catch{return!1}}async function s0(e){return(await fetch(e,{credentials:"include"})).ok}function SC(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=t||"demo-project",i=e.iat||0,r=e.sub||e.user_id;if(!r)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${s}`,aud:s,iat:i,exp:i+3600,auth_time:i,sub:r,user_id:r,firebase:{sign_in_provider:"custom",identities:{}},...e};return[dc(JSON.stringify(n)),dc(JSON.stringify(o)),""].join(".")}const Ko={};function AC(){const e={prod:[],emulator:[]};for(const t of Object.keys(Ko))Ko[t]?e.emulator.push(t):e.prod.push(t);return e}function kC(e){let t=document.getElementById(e),n=!1;return t||(t=document.createElement("div"),t.setAttribute("id",e),n=!0),{created:n,element:t}}let pm=!1;function i0(e,t){if(typeof window>"u"||typeof document>"u"||!Xr(window.location.host)||Ko[e]===t||Ko[e]||pm)return;Ko[e]=t;function n(f){return`__firebase__banner__${f}`}const s="__firebase__banner",r=AC().prod.length>0;function o(){const f=document.getElementById(s);f&&f.remove()}function a(f){f.style.display="flex",f.style.background="#7faaf0",f.style.position="fixed",f.style.bottom="5px",f.style.left="5px",f.style.padding=".5em",f.style.borderRadius="5px",f.style.alignItems="center"}function l(f,p){f.setAttribute("width","24"),f.setAttribute("id",p),f.setAttribute("height","24"),f.setAttribute("viewBox","0 0 24 24"),f.setAttribute("fill","none"),f.style.marginLeft="-6px"}function c(){const f=document.createElement("span");return f.style.cursor="pointer",f.style.marginLeft="16px",f.style.fontSize="24px",f.innerHTML=" &times;",f.onclick=()=>{pm=!0,o()},f}function h(f,p){f.setAttribute("id",p),f.innerText="Learn more",f.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",f.setAttribute("target","__blank"),f.style.paddingLeft="5px",f.style.textDecoration="underline"}function d(){const f=kC(s),p=n("text"),_=document.getElementById(p)||document.createElement("span"),y=n("learnmore"),v=document.getElementById(y)||document.createElement("a"),w=n("preprendIcon"),M=document.getElementById(w)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(f.created){const E=f.element;a(E),h(v,y);const x=c();l(M,w),E.append(M,_,v,x),document.body.appendChild(E)}r?(_.innerText="Preview backend disconnected.",M.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(M.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,_.innerText="Preview backend running in this workspace."),_.setAttribute("id",p)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",d):d()}function Ve(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function CC(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ve())}function xC(){const e=su()?.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function RC(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function PC(){const e=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof e=="object"&&e.id!==void 0}function MC(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function DC(){const e=Ve();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function OC(){return!xC()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function LC(){try{return typeof indexedDB=="object"}catch{return!1}}function NC(){return new Promise((e,t)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(s);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(s),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{t(i.error?.message||"")}}catch(n){t(n)}})}const VC="FirebaseError";class _s extends Error{constructor(t,n,s){super(n),this.code=t,this.customData=s,this.name=VC,Object.setPrototypeOf(this,_s.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Oa.prototype.create)}}class Oa{constructor(t,n,s){this.service=t,this.serviceName=n,this.errors=s}create(t,...n){const s=n[0]||{},i=`${this.service}/${t}`,r=this.errors[t],o=r?FC(r,s):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new _s(i,a,s)}}function FC(e,t){return e.replace(UC,(n,s)=>{const i=t[s];return i!=null?String(i):`<${s}?>`})}const UC=/\{\$([^}]+)}/g;function $C(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function Ui(e,t){if(e===t)return!0;const n=Object.keys(e),s=Object.keys(t);for(const i of n){if(!s.includes(i))return!1;const r=e[i],o=t[i];if(gm(r)&&gm(o)){if(!Ui(r,o))return!1}else if(r!==o)return!1}for(const i of s)if(!n.includes(i))return!1;return!0}function gm(e){return e!==null&&typeof e=="object"}function La(e){const t=[];for(const[n,s]of Object.entries(e))Array.isArray(s)?s.forEach(i=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(s));return t.length?"&"+t.join("&"):""}function Mo(e){const t={};return e.replace(/^\?/,"").split("&").forEach(s=>{if(s){const[i,r]=s.split("=");t[decodeURIComponent(i)]=decodeURIComponent(r)}}),t}function Do(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}function BC(e,t){const n=new HC(e,t);return n.subscribe.bind(n)}class HC{constructor(t,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{t(this)}).catch(s=>{this.error(s)})}next(t){this.forEachObserver(n=>{n.next(t)})}error(t){this.forEachObserver(n=>{n.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,n,s){let i;if(t===void 0&&n===void 0&&s===void 0)throw new Error("Missing Observer.");jC(t,["next","error","complete"])?i=t:i={next:t,error:n,complete:s},i.next===void 0&&(i.next=ch),i.error===void 0&&(i.error=ch),i.complete===void 0&&(i.complete=ch);const r=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),r}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,t)}sendOne(t,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{n(this.observers[t])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function jC(e,t){if(typeof e!="object"||e===null)return!1;for(const n of t)if(n in e&&typeof e[n]=="function")return!0;return!1}function ch(){}function we(e){return e&&e._delegate?e._delegate:e}class $i{constructor(t,n,s){this.name=t,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}const Ti="[DEFAULT]";class zC{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){const s=new IC;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&s.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){const n=this.normalizeInstanceIdentifier(t?.identifier),s=t?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(qC(t))try{this.getOrInitializeService({instanceIdentifier:Ti})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const r=this.getOrInitializeService({instanceIdentifier:i});s.resolve(r)}catch{}}}}clearInstance(t=Ti){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=Ti){return this.instances.has(t)}getOptions(t=Ti){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:n={}}=t,s=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[r,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(r);s===a&&o.resolve(i)}return i}onInit(t,n){const s=this.normalizeInstanceIdentifier(n),i=this.onInitCallbacks.get(s)??new Set;i.add(t),this.onInitCallbacks.set(s,i);const r=this.instances.get(s);return r&&t(r,s),()=>{i.delete(t)}}invokeOnInitCallbacks(t,n){const s=this.onInitCallbacks.get(n);if(s)for(const i of s)try{i(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let s=this.instances.get(t);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:WC(t),options:n}),this.instances.set(t,s),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(s,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,s)}catch{}return s||null}normalizeInstanceIdentifier(t=Ti){return this.component?this.component.multipleInstances?t:Ti:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function WC(e){return e===Ti?void 0:e}function qC(e){return e.instantiationMode==="EAGER"}class GC{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const n=new zC(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}}var Tt;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})(Tt||(Tt={}));const KC={debug:Tt.DEBUG,verbose:Tt.VERBOSE,info:Tt.INFO,warn:Tt.WARN,error:Tt.ERROR,silent:Tt.SILENT},QC=Tt.INFO,YC={[Tt.DEBUG]:"log",[Tt.VERBOSE]:"log",[Tt.INFO]:"info",[Tt.WARN]:"warn",[Tt.ERROR]:"error"},XC=(e,t,...n)=>{if(t<e.logLevel)return;const s=new Date().toISOString(),i=YC[t];if(i)console[i](`[${s}]  ${e.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class _f{constructor(t){this.name=t,this._logLevel=QC,this._logHandler=XC,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in Tt))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?KC[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,Tt.DEBUG,...t),this._logHandler(this,Tt.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,Tt.VERBOSE,...t),this._logHandler(this,Tt.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,Tt.INFO,...t),this._logHandler(this,Tt.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,Tt.WARN,...t),this._logHandler(this,Tt.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,Tt.ERROR,...t),this._logHandler(this,Tt.ERROR,...t)}}const JC=(e,t)=>t.some(n=>e instanceof n);let mm,_m;function ZC(){return mm||(mm=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function tx(){return _m||(_m=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const r0=new WeakMap,Zh=new WeakMap,o0=new WeakMap,uh=new WeakMap,yf=new WeakMap;function ex(e){const t=new Promise((n,s)=>{const i=()=>{e.removeEventListener("success",r),e.removeEventListener("error",o)},r=()=>{n(Hs(e.result)),i()},o=()=>{s(e.error),i()};e.addEventListener("success",r),e.addEventListener("error",o)});return t.then(n=>{n instanceof IDBCursor&&r0.set(n,e)}).catch(()=>{}),yf.set(t,e),t}function nx(e){if(Zh.has(e))return;const t=new Promise((n,s)=>{const i=()=>{e.removeEventListener("complete",r),e.removeEventListener("error",o),e.removeEventListener("abort",o)},r=()=>{n(),i()},o=()=>{s(e.error||new DOMException("AbortError","AbortError")),i()};e.addEventListener("complete",r),e.addEventListener("error",o),e.addEventListener("abort",o)});Zh.set(e,t)}let td={get(e,t,n){if(e instanceof IDBTransaction){if(t==="done")return Zh.get(e);if(t==="objectStoreNames")return e.objectStoreNames||o0.get(e);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Hs(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function sx(e){td=e(td)}function ix(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){const s=e.call(hh(this),t,...n);return o0.set(s,t.sort?t.sort():[t]),Hs(s)}:tx().includes(e)?function(...t){return e.apply(hh(this),t),Hs(r0.get(this))}:function(...t){return Hs(e.apply(hh(this),t))}}function rx(e){return typeof e=="function"?ix(e):(e instanceof IDBTransaction&&nx(e),JC(e,ZC())?new Proxy(e,td):e)}function Hs(e){if(e instanceof IDBRequest)return ex(e);if(uh.has(e))return uh.get(e);const t=rx(e);return t!==e&&(uh.set(e,t),yf.set(t,e)),t}const hh=e=>yf.get(e);function ox(e,t,{blocked:n,upgrade:s,blocking:i,terminated:r}={}){const o=indexedDB.open(e,t),a=Hs(o);return s&&o.addEventListener("upgradeneeded",l=>{s(Hs(o.result),l.oldVersion,l.newVersion,Hs(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{r&&l.addEventListener("close",()=>r()),i&&l.addEventListener("versionchange",c=>i(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const ax=["get","getKey","getAll","getAllKeys","count"],lx=["put","add","delete","clear"],dh=new Map;function ym(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(dh.get(t))return dh.get(t);const n=t.replace(/FromIndex$/,""),s=t!==n,i=lx.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(i||ax.includes(n)))return;const r=async function(o,...a){const l=this.transaction(o,i?"readwrite":"readonly");let c=l.store;return s&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),i&&l.done]))[0]};return dh.set(t,r),r}sx(e=>({...e,get:(t,n,s)=>ym(t,n)||e.get(t,n,s),has:(t,n)=>!!ym(t,n)||e.has(t,n)}));class cx{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(ux(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function ux(e){return e.getComponent()?.type==="VERSION"}const ed="@firebase/app",vm="0.14.6";const hs=new _f("@firebase/app"),hx="@firebase/app-compat",dx="@firebase/analytics-compat",fx="@firebase/analytics",px="@firebase/app-check-compat",gx="@firebase/app-check",mx="@firebase/auth",_x="@firebase/auth-compat",yx="@firebase/database",vx="@firebase/data-connect",bx="@firebase/database-compat",wx="@firebase/functions",Tx="@firebase/functions-compat",Ex="@firebase/installations",Ix="@firebase/installations-compat",Sx="@firebase/messaging",Ax="@firebase/messaging-compat",kx="@firebase/performance",Cx="@firebase/performance-compat",xx="@firebase/remote-config",Rx="@firebase/remote-config-compat",Px="@firebase/storage",Mx="@firebase/storage-compat",Dx="@firebase/firestore",Ox="@firebase/ai",Lx="@firebase/firestore-compat",Nx="firebase",Vx="12.6.0";const nd="[DEFAULT]",Fx={[ed]:"fire-core",[hx]:"fire-core-compat",[fx]:"fire-analytics",[dx]:"fire-analytics-compat",[gx]:"fire-app-check",[px]:"fire-app-check-compat",[mx]:"fire-auth",[_x]:"fire-auth-compat",[yx]:"fire-rtdb",[vx]:"fire-data-connect",[bx]:"fire-rtdb-compat",[wx]:"fire-fn",[Tx]:"fire-fn-compat",[Ex]:"fire-iid",[Ix]:"fire-iid-compat",[Sx]:"fire-fcm",[Ax]:"fire-fcm-compat",[kx]:"fire-perf",[Cx]:"fire-perf-compat",[xx]:"fire-rc",[Rx]:"fire-rc-compat",[Px]:"fire-gcs",[Mx]:"fire-gcs-compat",[Dx]:"fire-fst",[Lx]:"fire-fst-compat",[Ox]:"fire-vertex","fire-js":"fire-js",[Nx]:"fire-js-all"};const fa=new Map,Ux=new Map,sd=new Map;function bm(e,t){try{e.container.addComponent(t)}catch(n){hs.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function Lr(e){const t=e.name;if(sd.has(t))return hs.debug(`There were multiple attempts to register component ${t}.`),!1;sd.set(t,e);for(const n of fa.values())bm(n,e);for(const n of Ux.values())bm(n,e);return!0}function vf(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function cn(e){return e==null?!1:e.settings!==void 0}const $x={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},js=new Oa("app","Firebase",$x);class Bx{constructor(t,n,s){this._isDeleted=!1,this._options={...t},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new $i("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw js.create("app-deleted",{appName:this._name})}}const Jr=Vx;function a0(e,t={}){let n=e;typeof t!="object"&&(t={name:t});const s={name:nd,automaticDataCollectionEnabled:!0,...t},i=s.name;if(typeof i!="string"||!i)throw js.create("bad-app-name",{appName:String(i)});if(n||(n=e0()),!n)throw js.create("no-options");const r=fa.get(i);if(r){if(Ui(n,r.options)&&Ui(s,r.config))return r;throw js.create("duplicate-app",{appName:i})}const o=new GC(i);for(const l of sd.values())o.addComponent(l);const a=new Bx(n,s,o);return fa.set(i,a),a}function l0(e=nd){const t=fa.get(e);if(!t&&e===nd&&e0())return a0();if(!t)throw js.create("no-app",{appName:e});return t}function wm(){return Array.from(fa.values())}function zs(e,t,n){let s=Fx[e]??e;n&&(s+=`-${n}`);const i=s.match(/\s|\//),r=t.match(/\s|\//);if(i||r){const o=[`Unable to register library "${s}" with version "${t}":`];i&&o.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&r&&o.push("and"),r&&o.push(`version name "${t}" contains illegal characters (whitespace or "/")`),hs.warn(o.join(" "));return}Lr(new $i(`${s}-version`,()=>({library:s,version:t}),"VERSION"))}const Hx="firebase-heartbeat-database",jx=1,pa="firebase-heartbeat-store";let fh=null;function c0(){return fh||(fh=ox(Hx,jx,{upgrade:(e,t)=>{switch(t){case 0:try{e.createObjectStore(pa)}catch(n){console.warn(n)}}}}).catch(e=>{throw js.create("idb-open",{originalErrorMessage:e.message})})),fh}async function zx(e){try{const n=(await c0()).transaction(pa),s=await n.objectStore(pa).get(u0(e));return await n.done,s}catch(t){if(t instanceof _s)hs.warn(t.message);else{const n=js.create("idb-get",{originalErrorMessage:t?.message});hs.warn(n.message)}}}async function Tm(e,t){try{const s=(await c0()).transaction(pa,"readwrite");await s.objectStore(pa).put(t,u0(e)),await s.done}catch(n){if(n instanceof _s)hs.warn(n.message);else{const s=js.create("idb-set",{originalErrorMessage:n?.message});hs.warn(s.message)}}}function u0(e){return`${e.name}!${e.options.appId}`}const Wx=1024,qx=30;class Gx{constructor(t){this.container=t,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new Qx(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=Em();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(i=>i.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:n}),this._heartbeatsCache.heartbeats.length>qx){const i=Yx(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(i,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(t){hs.warn(t)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=Em(),{heartbeatsToSend:n,unsentEntries:s}=Kx(this._heartbeatsCache.heartbeats),i=dc(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(t){return hs.warn(t),""}}}function Em(){return new Date().toISOString().substring(0,10)}function Kx(e,t=Wx){const n=[];let s=e.slice();for(const i of e){const r=n.find(o=>o.agent===i.agent);if(r){if(r.dates.push(i.date),Im(n)>t){r.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Im(n)>t){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class Qx{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return LC()?NC().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await zx(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){if(await this._canUseIndexedDBPromise){const s=await this.read();return Tm(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){if(await this._canUseIndexedDBPromise){const s=await this.read();return Tm(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...t.heartbeats]})}else return}}function Im(e){return dc(JSON.stringify({version:2,heartbeats:e})).length}function Yx(e){if(e.length===0)return-1;let t=0,n=e[0].date;for(let s=1;s<e.length;s++)e[s].date<n&&(n=e[s].date,t=s);return t}function Xx(e){Lr(new $i("platform-logger",t=>new cx(t),"PRIVATE")),Lr(new $i("heartbeat",t=>new Gx(t),"PRIVATE")),zs(ed,vm,e),zs(ed,vm,"esm2020"),zs("fire-js","")}Xx("");function h0(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Jx=h0,d0=new Oa("auth","Firebase",h0());const fc=new _f("@firebase/auth");function Zx(e,...t){fc.logLevel<=Tt.WARN&&fc.warn(`Auth (${Jr}): ${e}`,...t)}function Ul(e,...t){fc.logLevel<=Tt.ERROR&&fc.error(`Auth (${Jr}): ${e}`,...t)}function kn(e,...t){throw bf(e,...t)}function Fn(e,...t){return bf(e,...t)}function f0(e,t,n){const s={...Jx(),[t]:n};return new Oa("auth","Firebase",s).create(t,{appName:e.name})}function ls(e){return f0(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function bf(e,...t){if(typeof e!="string"){const n=t[0],s=[...t.slice(1)];return s[0]&&(s[0].appName=e.name),e._errorFactory.create(n,...s)}return d0.create(e,...t)}function ft(e,t,...n){if(!e)throw bf(t,...n)}function rs(e){const t="INTERNAL ASSERTION FAILED: "+e;throw Ul(t),new Error(t)}function ds(e,t){e||rs(t)}function id(){return typeof self<"u"&&self.location?.href||""}function tR(){return Sm()==="http:"||Sm()==="https:"}function Sm(){return typeof self<"u"&&self.location?.protocol||null}function eR(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(tR()||PC()||"connection"in navigator)?navigator.onLine:!0}function nR(){if(typeof navigator>"u")return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}class Na{constructor(t,n){this.shortDelay=t,this.longDelay=n,ds(n>t,"Short delay should be less than long delay!"),this.isMobile=CC()||MC()}get(){return eR()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function wf(e,t){ds(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}class p0{static initialize(t,n,s){this.fetchImpl=t,n&&(this.headersImpl=n),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;rs("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;rs("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;rs("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const sR={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const iR=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],rR=new Na(3e4,6e4);function ys(e,t){return e.tenantId&&!t.tenantId?{...t,tenantId:e.tenantId}:t}async function Gn(e,t,n,s,i={}){return g0(e,i,async()=>{let r={},o={};s&&(t==="GET"?o=s:r={body:JSON.stringify(s)});const a=La({key:e.config.apiKey,...o}).slice(1),l=await e._getAdditionalHeaders();l["Content-Type"]="application/json",e.languageCode&&(l["X-Firebase-Locale"]=e.languageCode);const c={method:t,headers:l,...r};return RC()||(c.referrerPolicy="no-referrer"),e.emulatorConfig&&Xr(e.emulatorConfig.host)&&(c.credentials="include"),p0.fetch()(await m0(e,e.config.apiHost,n,a),c)})}async function g0(e,t,n){e._canInitEmulator=!1;const s={...sR,...t};try{const i=new aR(e),r=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await r.json();if("needConfirmation"in o)throw gl(e,"account-exists-with-different-credential",o);if(r.ok&&!("errorMessage"in o))return o;{const a=r.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw gl(e,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw gl(e,"email-already-in-use",o);if(l==="USER_DISABLED")throw gl(e,"user-disabled",o);const h=s[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw f0(e,h,c);kn(e,h)}}catch(i){if(i instanceof _s)throw i;kn(e,"network-request-failed",{message:String(i)})}}async function Va(e,t,n,s,i={}){const r=await Gn(e,t,n,s,i);return"mfaPendingCredential"in r&&kn(e,"multi-factor-auth-required",{_serverResponse:r}),r}async function m0(e,t,n,s){const i=`${t}${n}?${s}`,r=e,o=r.config.emulator?wf(e.config,i):`${e.config.apiScheme}://${i}`;return iR.includes(n)&&(await r._persistenceManagerAvailable,r._getPersistenceType()==="COOKIE")?r._getPersistence()._getFinalTarget(o).toString():o}function oR(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class aR{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((n,s)=>{this.timer=setTimeout(()=>s(Fn(this.auth,"network-request-failed")),rR.get())})}}function gl(e,t,n){const s={appName:e.name};n.email&&(s.email=n.email),n.phoneNumber&&(s.phoneNumber=n.phoneNumber);const i=Fn(e,t,s);return i.customData._tokenResponse=n,i}function Am(e){return e!==void 0&&e.enterprise!==void 0}class lR{constructor(t){if(this.siteKey="",this.recaptchaEnforcementState=[],t.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=t.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=t.recaptchaEnforcementState}getProviderEnforcementState(t){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===t)return oR(n.enforcementState);return null}isProviderEnabled(t){return this.getProviderEnforcementState(t)==="ENFORCE"||this.getProviderEnforcementState(t)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function cR(e,t){return Gn(e,"GET","/v2/recaptchaConfig",ys(e,t))}async function uR(e,t){return Gn(e,"POST","/v1/accounts:delete",t)}async function pc(e,t){return Gn(e,"POST","/v1/accounts:lookup",t)}function Qo(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function hR(e,t=!1){const n=we(e),s=await n.getIdToken(t),i=Tf(s);ft(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const r=typeof i.firebase=="object"?i.firebase:void 0,o=r?.sign_in_provider;return{claims:i,token:s,authTime:Qo(ph(i.auth_time)),issuedAtTime:Qo(ph(i.iat)),expirationTime:Qo(ph(i.exp)),signInProvider:o||null,signInSecondFactor:r?.sign_in_second_factor||null}}function ph(e){return Number(e)*1e3}function Tf(e){const[t,n,s]=e.split(".");if(t===void 0||n===void 0||s===void 0)return Ul("JWT malformed, contained fewer than 3 sections"),null;try{const i=Zb(n);return i?JSON.parse(i):(Ul("Failed to decode base64 JWT payload"),null)}catch(i){return Ul("Caught error parsing JWT payload as JSON",i?.toString()),null}}function km(e){const t=Tf(e);return ft(t,"internal-error"),ft(typeof t.exp<"u","internal-error"),ft(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}async function Nr(e,t,n=!1){if(n)return t;try{return await t}catch(s){throw s instanceof _s&&dR(s)&&e.auth.currentUser===e&&await e.auth.signOut(),s}}function dR({code:e}){return e==="auth/user-disabled"||e==="auth/user-token-expired"}class fR{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){if(t){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const s=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,s)}}schedule(t=!1){if(!this.isRunning)return;const n=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){t?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class rd{constructor(t,n){this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Qo(this.lastLoginAt),this.creationTime=Qo(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function gc(e){const t=e.auth,n=await e.getIdToken(),s=await Nr(e,pc(t,{idToken:n}));ft(s?.users.length,t,"internal-error");const i=s.users[0];e._notifyReloadListener(i);const r=i.providerUserInfo?.length?_0(i.providerUserInfo):[],o=gR(e.providerData,r),a=e.isAnonymous,l=!(e.email&&i.passwordHash)&&!o?.length,c=a?l:!1,h={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new rd(i.createdAt,i.lastLoginAt),isAnonymous:c};Object.assign(e,h)}async function pR(e){const t=we(e);await gc(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function gR(e,t){return[...e.filter(s=>!t.some(i=>i.providerId===s.providerId)),...t]}function _0(e){return e.map(({providerId:t,...n})=>({providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}async function mR(e,t){const n=await g0(e,{},async()=>{const s=La({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:i,apiKey:r}=e.config,o=await m0(e,i,"/v1/token",`key=${r}`),a=await e._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";const l={method:"POST",headers:a,body:s};return e.emulatorConfig&&Xr(e.emulatorConfig.host)&&(l.credentials="include"),p0.fetch()(o,l)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function _R(e,t){return Gn(e,"POST","/v2/accounts:revokeToken",ys(e,t))}class Sr{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){ft(t.idToken,"internal-error"),ft(typeof t.idToken<"u","internal-error"),ft(typeof t.refreshToken<"u","internal-error");const n="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):km(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,n)}updateFromIdToken(t){ft(t.length!==0,"internal-error");const n=km(t);this.updateTokensAndExpiration(t,null,n)}async getToken(t,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(ft(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,n){const{accessToken:s,refreshToken:i,expiresIn:r}=await mR(t,n);this.updateTokensAndExpiration(s,i,Number(r))}updateTokensAndExpiration(t,n,s){this.refreshToken=n||null,this.accessToken=t||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(t,n){const{refreshToken:s,accessToken:i,expirationTime:r}=n,o=new Sr;return s&&(ft(typeof s=="string","internal-error",{appName:t}),o.refreshToken=s),i&&(ft(typeof i=="string","internal-error",{appName:t}),o.accessToken=i),r&&(ft(typeof r=="number","internal-error",{appName:t}),o.expirationTime=r),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new Sr,this.toJSON())}_performRefresh(){return rs("not implemented")}}function Cs(e,t){ft(typeof e=="string"||typeof e>"u","internal-error",{appName:t})}class _n{constructor({uid:t,auth:n,stsTokenManager:s,...i}){this.providerId="firebase",this.proactiveRefresh=new fR(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new rd(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(t){const n=await Nr(this,this.stsTokenManager.getToken(this.auth,t));return ft(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(t){return hR(this,t)}reload(){return pR(this)}_assign(t){this!==t&&(ft(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(n=>({...n})),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const n=new _n({...this,auth:t,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(t){ft(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,n=!1){let s=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),s=!0),n&&await gc(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(cn(this.auth.app))return Promise.reject(ls(this.auth));const t=await this.getIdToken();return await Nr(this,uR(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>({...t})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,n){const s=n.displayName??void 0,i=n.email??void 0,r=n.phoneNumber??void 0,o=n.photoURL??void 0,a=n.tenantId??void 0,l=n._redirectEventId??void 0,c=n.createdAt??void 0,h=n.lastLoginAt??void 0,{uid:d,emailVerified:f,isAnonymous:p,providerData:_,stsTokenManager:y}=n;ft(d&&y,t,"internal-error");const v=Sr.fromJSON(this.name,y);ft(typeof d=="string",t,"internal-error"),Cs(s,t.name),Cs(i,t.name),ft(typeof f=="boolean",t,"internal-error"),ft(typeof p=="boolean",t,"internal-error"),Cs(r,t.name),Cs(o,t.name),Cs(a,t.name),Cs(l,t.name),Cs(c,t.name),Cs(h,t.name);const w=new _n({uid:d,auth:t,email:i,emailVerified:f,displayName:s,isAnonymous:p,photoURL:o,phoneNumber:r,tenantId:a,stsTokenManager:v,createdAt:c,lastLoginAt:h});return _&&Array.isArray(_)&&(w.providerData=_.map(M=>({...M}))),l&&(w._redirectEventId=l),w}static async _fromIdTokenResponse(t,n,s=!1){const i=new Sr;i.updateFromServerResponse(n);const r=new _n({uid:n.localId,auth:t,stsTokenManager:i,isAnonymous:s});return await gc(r),r}static async _fromGetAccountInfoResponse(t,n,s){const i=n.users[0];ft(i.localId!==void 0,"internal-error");const r=i.providerUserInfo!==void 0?_0(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!r?.length,a=new Sr;a.updateFromIdToken(s);const l=new _n({uid:i.localId,auth:t,stsTokenManager:a,isAnonymous:o}),c={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:r,metadata:new rd(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!r?.length};return Object.assign(l,c),l}}const Cm=new Map;function os(e){ds(e instanceof Function,"Expected a class definition");let t=Cm.get(e);return t?(ds(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,Cm.set(e,t),t)}class y0{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,n){this.storage[t]=n}async _get(t){const n=this.storage[t];return n===void 0?null:n}async _remove(t){delete this.storage[t]}_addListener(t,n){}_removeListener(t,n){}}y0.type="NONE";const xm=y0;function $l(e,t,n){return`firebase:${e}:${t}:${n}`}class Ar{constructor(t,n,s){this.persistence=t,this.auth=n,this.userKey=s;const{config:i,name:r}=this.auth;this.fullUserKey=$l(this.userKey,i.apiKey,r),this.fullPersistenceKey=$l("persistence",i.apiKey,r),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);if(!t)return null;if(typeof t=="string"){const n=await pc(this.auth,{idToken:t}).catch(()=>{});return n?_n._fromGetAccountInfoResponse(this.auth,n,t):null}return _n._fromJSON(this.auth,t)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,n,s="authUser"){if(!n.length)return new Ar(os(xm),t,s);const i=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let r=i[0]||os(xm);const o=$l(s,t.config.apiKey,t.name);let a=null;for(const c of n)try{const h=await c._get(o);if(h){let d;if(typeof h=="string"){const f=await pc(t,{idToken:h}).catch(()=>{});if(!f)break;d=await _n._fromGetAccountInfoResponse(t,f,h)}else d=_n._fromJSON(t,h);c!==r&&(a=d),r=c;break}}catch{}const l=i.filter(c=>c._shouldAllowMigration);return!r._shouldAllowMigration||!l.length?new Ar(r,t,s):(r=l[0],a&&await r._set(o,a.toJSON()),await Promise.all(n.map(async c=>{if(c!==r)try{await c._remove(o)}catch{}})),new Ar(r,t,s))}}function Rm(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(T0(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(v0(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(I0(t))return"Blackberry";if(S0(t))return"Webos";if(b0(t))return"Safari";if((t.includes("chrome/")||w0(t))&&!t.includes("edge/"))return"Chrome";if(E0(t))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=e.match(n);if(s?.length===2)return s[1]}return"Other"}function v0(e=Ve()){return/firefox\//i.test(e)}function b0(e=Ve()){const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function w0(e=Ve()){return/crios\//i.test(e)}function T0(e=Ve()){return/iemobile/i.test(e)}function E0(e=Ve()){return/android/i.test(e)}function I0(e=Ve()){return/blackberry/i.test(e)}function S0(e=Ve()){return/webos/i.test(e)}function Ef(e=Ve()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function yR(e=Ve()){return Ef(e)&&!!window.navigator?.standalone}function vR(){return DC()&&document.documentMode===10}function A0(e=Ve()){return Ef(e)||E0(e)||S0(e)||I0(e)||/windows phone/i.test(e)||T0(e)}function k0(e,t=[]){let n;switch(e){case"Browser":n=Rm(Ve());break;case"Worker":n=`${Rm(Ve())}-${e}`;break;default:n=e}const s=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${Jr}/${s}`}class bR{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,n){const s=r=>new Promise((o,a)=>{try{const l=t(r);o(l)}catch(l){a(l)}});s.onAbort=n,this.queue.push(s);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const n=[];try{for(const s of this.queue)await s(t),s.onAbort&&n.push(s.onAbort)}catch(s){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s?.message})}}}async function wR(e,t={}){return Gn(e,"GET","/v2/passwordPolicy",ys(e,t))}const TR=6;class ER{constructor(t){const n=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??TR,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=t.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=t.forceUpgradeOnSignin??!1,this.schemaVersion=t.schemaVersion}validatePassword(t){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,n),this.validatePasswordCharacterOptions(t,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(t,n){const s=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;s&&(n.meetsMinPasswordLength=t.length>=s),i&&(n.meetsMaxPasswordLength=t.length<=i)}validatePasswordCharacterOptions(t,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let s;for(let i=0;i<t.length;i++)s=t.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(t,n,s,i,r){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=r))}}class IR{constructor(t,n,s,i){this.app=t,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=s,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Pm(this),this.idTokenSubscription=new Pm(this),this.beforeStateQueue=new bR(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=d0,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(r=>this._resolvePersistenceManagerAvailable=r)}_initializeWithPersistence(t,n){return n&&(this._popupRedirectResolver=os(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Ar.create(this,t),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const n=await pc(this,{idToken:t}),s=await _n._fromGetAccountInfoResponse(this,n,t);await this.directlySetCurrentUser(s)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){if(cn(this.app)){const r=this.app.settings.authIdToken;return r?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(r).then(o,o))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let s=n,i=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const r=this.redirectUser?._redirectEventId,o=s?._redirectEventId,a=await this.tryRedirectSignIn(t);(!r||r===o)&&a?.user&&(s=a.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(r){s=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(r))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return ft(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(t){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(t){try{await gc(t)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=nR()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(cn(this.app))return Promise.reject(ls(this));const n=t?we(t):null;return n&&ft(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(t,n=!1){if(!this._deleted)return t&&ft(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return cn(this.app)?Promise.reject(ls(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return cn(this.app)?Promise.reject(ls(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(os(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await wR(this),n=new ER(t);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(t){this._errorFactory=new Oa("auth","Firebase",t())}onAuthStateChanged(t,n,s){return this.registerStateListener(this.authStateSubscription,t,n,s)}beforeAuthStateChanged(t,n){return this.beforeStateQueue.pushCallback(t,n)}onIdTokenChanged(t,n,s){return this.registerStateListener(this.idTokenSubscription,t,n,s)}authStateReady(){return new Promise((t,n)=>{if(this.currentUser)t();else{const s=this.onAuthStateChanged(()=>{s(),t()},n)}})}async revokeAccessToken(t){if(this.currentUser){const n=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:n};this.tenantId!=null&&(s.tenantId=this.tenantId),await _R(this,s)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(t,n){const s=await this.getOrInitRedirectPersistenceManager(n);return t===null?s.removeCurrentUser():s.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const n=t&&os(t)||this._popupRedirectResolver;ft(n,this,"argument-error"),this.redirectPersistenceManager=await Ar.create(this,[os(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===t?this._currentUser:this.redirectUser?._redirectEventId===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const t=this.currentUser?.uid??null;this.lastNotifiedUid!==t&&(this.lastNotifiedUid=t,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,n,s,i){if(this._deleted)return()=>{};const r=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(ft(a,this,"internal-error"),a.then(()=>{o||r(this.currentUser)}),typeof n=="function"){const l=t.addObserver(n,s,i);return()=>{o=!0,l()}}else{const l=t.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return ft(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=k0(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(t["X-Firebase-Client"]=n);const s=await this._getAppCheckToken();return s&&(t["X-Firebase-AppCheck"]=s),t}async _getAppCheckToken(){if(cn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return t?.error&&Zx(`Error while retrieving App Check token: ${t.error}`),t?.token}}function Ki(e){return we(e)}class Pm{constructor(t){this.auth=t,this.observer=null,this.addObserver=BC(n=>this.observer=n)}get next(){return ft(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let iu={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function SR(e){iu=e}function C0(e){return iu.loadJS(e)}function AR(){return iu.recaptchaEnterpriseScript}function kR(){return iu.gapiScript}function CR(e){return`__${e}${Math.floor(Math.random()*1e6)}`}class xR{constructor(){this.enterprise=new RR}ready(t){t()}execute(t,n){return Promise.resolve("token")}render(t,n){return""}}class RR{ready(t){t()}execute(t,n){return Promise.resolve("token")}render(t,n){return""}}const PR="recaptcha-enterprise",x0="NO_RECAPTCHA";class MR{constructor(t){this.type=PR,this.auth=Ki(t)}async verify(t="verify",n=!1){async function s(r){if(!n){if(r.tenantId==null&&r._agentRecaptchaConfig!=null)return r._agentRecaptchaConfig.siteKey;if(r.tenantId!=null&&r._tenantRecaptchaConfigs[r.tenantId]!==void 0)return r._tenantRecaptchaConfigs[r.tenantId].siteKey}return new Promise(async(o,a)=>{cR(r,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const c=new lR(l);return r.tenantId==null?r._agentRecaptchaConfig=c:r._tenantRecaptchaConfigs[r.tenantId]=c,o(c.siteKey)}}).catch(l=>{a(l)})})}function i(r,o,a){const l=window.grecaptcha;Am(l)?l.enterprise.ready(()=>{l.enterprise.execute(r,{action:t}).then(c=>{o(c)}).catch(()=>{o(x0)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new xR().execute("siteKey",{action:"verify"}):new Promise((r,o)=>{s(this.auth).then(a=>{if(!n&&Am(window.grecaptcha))i(a,r,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=AR();l.length!==0&&(l+=a),C0(l).then(()=>{i(a,r,o)}).catch(c=>{o(c)})}}).catch(a=>{o(a)})})}}async function Mm(e,t,n,s=!1,i=!1){const r=new MR(e);let o;if(i)o=x0;else try{o=await r.verify(n)}catch{o=await r.verify(n,!0)}const a={...t};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in a){const l=a.phoneEnrollmentInfo.phoneNumber,c=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:l,recaptchaToken:c,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){const l=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:l,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return s?Object.assign(a,{captchaResp:o}):Object.assign(a,{captchaResponse:o}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function od(e,t,n,s,i){if(e._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const r=await Mm(e,t,n,n==="getOobCode");return s(e,r)}else return s(e,t).catch(async r=>{if(r.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await Mm(e,t,n,n==="getOobCode");return s(e,o)}else return Promise.reject(r)})}function DR(e,t){const n=vf(e,"auth");if(n.isInitialized()){const i=n.getImmediate(),r=n.getOptions();if(Ui(r,t??{}))return i;kn(i,"already-initialized")}return n.initialize({options:t})}function OR(e,t){const n=t?.persistence||[],s=(Array.isArray(n)?n:[n]).map(os);t?.errorMap&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(s,t?.popupRedirectResolver)}function LR(e,t,n){const s=Ki(e);ft(/^https?:\/\//.test(t),s,"invalid-emulator-scheme");const i=!1,r=R0(t),{host:o,port:a}=NR(t),l=a===null?"":`:${a}`,c={url:`${r}//${o}${l}/`},h=Object.freeze({host:o,port:a,protocol:r.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!s._canInitEmulator){ft(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),ft(Ui(c,s.config.emulator)&&Ui(h,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=c,s.emulatorConfig=h,s.settings.appVerificationDisabledForTesting=!0,Xr(o)?(s0(`${r}//${o}${l}`),i0("Auth",!0)):VR()}function R0(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function NR(e){const t=R0(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const s=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(s);if(i){const r=i[1];return{host:r,port:Dm(s.substr(r.length+1))}}else{const[r,o]=s.split(":");return{host:r,port:Dm(o)}}}function Dm(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}function VR(){function e(){const t=document.createElement("p"),n=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",e):e())}class If{constructor(t,n){this.providerId=t,this.signInMethod=n}toJSON(){return rs("not implemented")}_getIdTokenResponse(t){return rs("not implemented")}_linkToIdToken(t,n){return rs("not implemented")}_getReauthenticationResolver(t){return rs("not implemented")}}async function FR(e,t){return Gn(e,"POST","/v1/accounts:signUp",t)}async function UR(e,t){return Va(e,"POST","/v1/accounts:signInWithPassword",ys(e,t))}async function $R(e,t){return Gn(e,"POST","/v1/accounts:sendOobCode",ys(e,t))}async function BR(e,t){return $R(e,t)}async function HR(e,t){return Va(e,"POST","/v1/accounts:signInWithEmailLink",ys(e,t))}async function jR(e,t){return Va(e,"POST","/v1/accounts:signInWithEmailLink",ys(e,t))}class ga extends If{constructor(t,n,s,i=null){super("password",s),this._email=t,this._password=n,this._tenantId=i}static _fromEmailAndPassword(t,n){return new ga(t,n,"password")}static _fromEmailAndCode(t,n,s=null){return new ga(t,n,"emailLink",s)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(t){const n=typeof t=="string"?JSON.parse(t):t;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(t){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return od(t,n,"signInWithPassword",UR);case"emailLink":return HR(t,{email:this._email,oobCode:this._password});default:kn(t,"internal-error")}}async _linkToIdToken(t,n){switch(this.signInMethod){case"password":const s={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return od(t,s,"signUpPassword",FR);case"emailLink":return jR(t,{idToken:n,email:this._email,oobCode:this._password});default:kn(t,"internal-error")}}_getReauthenticationResolver(t){return this._getIdTokenResponse(t)}}async function kr(e,t){return Va(e,"POST","/v1/accounts:signInWithIdp",ys(e,t))}const zR="http://localhost";class Bi extends If{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const n=new Bi(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(n.idToken=t.idToken),t.accessToken&&(n.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(n.nonce=t.nonce),t.pendingToken&&(n.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(n.accessToken=t.oauthToken,n.secret=t.oauthTokenSecret):kn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const n=typeof t=="string"?JSON.parse(t):t,{providerId:s,signInMethod:i,...r}=n;if(!s||!i)return null;const o=new Bi(s,i);return o.idToken=r.idToken||void 0,o.accessToken=r.accessToken||void 0,o.secret=r.secret,o.nonce=r.nonce,o.pendingToken=r.pendingToken||null,o}_getIdTokenResponse(t){const n=this.buildRequest();return kr(t,n)}_linkToIdToken(t,n){const s=this.buildRequest();return s.idToken=n,kr(t,s)}_getReauthenticationResolver(t){const n=this.buildRequest();return n.autoCreate=!1,kr(t,n)}buildRequest(){const t={requestUri:zR,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),t.postBody=La(n)}return t}}function WR(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function qR(e){const t=Mo(Do(e)).link,n=t?Mo(Do(t)).deep_link_id:null,s=Mo(Do(e)).deep_link_id;return(s?Mo(Do(s)).link:null)||s||n||t||e}class Sf{constructor(t){const n=Mo(Do(t)),s=n.apiKey??null,i=n.oobCode??null,r=WR(n.mode??null);ft(s&&i&&r,"argument-error"),this.apiKey=s,this.operation=r,this.code=i,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(t){const n=qR(t);try{return new Sf(n)}catch{return null}}}class Zr{constructor(){this.providerId=Zr.PROVIDER_ID}static credential(t,n){return ga._fromEmailAndPassword(t,n)}static credentialWithLink(t,n){const s=Sf.parseLink(n);return ft(s,"argument-error"),ga._fromEmailAndCode(t,s.code,s.tenantId)}}Zr.PROVIDER_ID="password";Zr.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Zr.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class P0{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}class Fa extends P0{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}class Ds extends Fa{constructor(){super("facebook.com")}static credential(t){return Bi._fromParams({providerId:Ds.PROVIDER_ID,signInMethod:Ds.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Ds.credentialFromTaggedObject(t)}static credentialFromError(t){return Ds.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Ds.credential(t.oauthAccessToken)}catch{return null}}}Ds.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ds.PROVIDER_ID="facebook.com";class Os extends Fa{constructor(){super("google.com"),this.addScope("profile")}static credential(t,n){return Bi._fromParams({providerId:Os.PROVIDER_ID,signInMethod:Os.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:n})}static credentialFromResult(t){return Os.credentialFromTaggedObject(t)}static credentialFromError(t){return Os.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:n,oauthAccessToken:s}=t;if(!n&&!s)return null;try{return Os.credential(n,s)}catch{return null}}}Os.GOOGLE_SIGN_IN_METHOD="google.com";Os.PROVIDER_ID="google.com";class Ls extends Fa{constructor(){super("github.com")}static credential(t){return Bi._fromParams({providerId:Ls.PROVIDER_ID,signInMethod:Ls.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Ls.credentialFromTaggedObject(t)}static credentialFromError(t){return Ls.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Ls.credential(t.oauthAccessToken)}catch{return null}}}Ls.GITHUB_SIGN_IN_METHOD="github.com";Ls.PROVIDER_ID="github.com";class Ns extends Fa{constructor(){super("twitter.com")}static credential(t,n){return Bi._fromParams({providerId:Ns.PROVIDER_ID,signInMethod:Ns.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:n})}static credentialFromResult(t){return Ns.credentialFromTaggedObject(t)}static credentialFromError(t){return Ns.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:s}=t;if(!n||!s)return null;try{return Ns.credential(n,s)}catch{return null}}}Ns.TWITTER_SIGN_IN_METHOD="twitter.com";Ns.PROVIDER_ID="twitter.com";async function GR(e,t){return Va(e,"POST","/v1/accounts:signUp",ys(e,t))}class Hi{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,n,s,i=!1){const r=await _n._fromIdTokenResponse(t,s,i),o=Om(s);return new Hi({user:r,providerId:o,_tokenResponse:s,operationType:n})}static async _forOperation(t,n,s){await t._updateTokensIfNecessary(s,!0);const i=Om(s);return new Hi({user:t,providerId:i,_tokenResponse:s,operationType:n})}}function Om(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class mc extends _s{constructor(t,n,s,i){super(n.code,n.message),this.operationType=s,this.user=i,Object.setPrototypeOf(this,mc.prototype),this.customData={appName:t.name,tenantId:t.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(t,n,s,i){return new mc(t,n,s,i)}}function M0(e,t,n,s){return(t==="reauthenticate"?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(r=>{throw r.code==="auth/multi-factor-auth-required"?mc._fromErrorAndOperation(e,r,t,s):r})}async function KR(e,t,n=!1){const s=await Nr(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return Hi._forOperation(e,"link",s)}async function QR(e,t,n=!1){const{auth:s}=e;if(cn(s.app))return Promise.reject(ls(s));const i="reauthenticate";try{const r=await Nr(e,M0(s,i,t,e),n);ft(r.idToken,s,"internal-error");const o=Tf(r.idToken);ft(o,s,"internal-error");const{sub:a}=o;return ft(e.uid===a,s,"user-mismatch"),Hi._forOperation(e,i,r)}catch(r){throw r?.code==="auth/user-not-found"&&kn(s,"user-mismatch"),r}}async function D0(e,t,n=!1){if(cn(e.app))return Promise.reject(ls(e));const s="signIn",i=await M0(e,s,t),r=await Hi._fromIdTokenResponse(e,s,i);return n||await e._updateCurrentUser(r.user),r}async function YR(e,t){return D0(Ki(e),t)}async function O0(e){const t=Ki(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function XR(e,t,n){if(cn(e.app))return Promise.reject(ls(e));const s=Ki(e),o=await od(s,{returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",GR).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&O0(e),l}),a=await Hi._fromIdTokenResponse(s,"signIn",o);return await s._updateCurrentUser(a.user),a}function JR(e,t,n){return cn(e.app)?Promise.reject(ls(e)):YR(we(e),Zr.credential(t,n)).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&O0(e),s})}async function Lm(e,t){const n=we(e),i={requestType:"VERIFY_EMAIL",idToken:await e.getIdToken()},{email:r}=await BR(n.auth,i);r!==e.email&&await e.reload()}async function ZR(e,t){return Gn(e,"POST","/v1/accounts:update",t)}async function tP(e,{displayName:t,photoURL:n}){if(t===void 0&&n===void 0)return;const s=we(e),r={idToken:await s.getIdToken(),displayName:t,photoUrl:n,returnSecureToken:!0},o=await Nr(s,ZR(s.auth,r));s.displayName=o.displayName||null,s.photoURL=o.photoUrl||null;const a=s.providerData.find(({providerId:l})=>l==="password");a&&(a.displayName=s.displayName,a.photoURL=s.photoURL),await s._updateTokensIfNecessary(o)}function eP(e,t,n,s){return we(e).onIdTokenChanged(t,n,s)}function nP(e,t,n){return we(e).beforeAuthStateChanged(t,n)}function sP(e,t,n,s){return we(e).onAuthStateChanged(t,n,s)}function iP(e){return we(e).signOut()}const _c="__sak";class L0{constructor(t,n){this.storageRetriever=t,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(_c,"1"),this.storage.removeItem(_c),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,n){return this.storage.setItem(t,JSON.stringify(n)),Promise.resolve()}_get(t){const n=this.storage.getItem(t);return Promise.resolve(n?JSON.parse(n):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}const rP=1e3,oP=10;class N0 extends L0{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,n)=>this.onStorageEvent(t,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=A0(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const n of Object.keys(this.listeners)){const s=this.storage.getItem(n),i=this.localCache[n];s!==i&&t(n,i,s)}}onStorageEvent(t,n=!1){if(!t.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const s=t.key;n?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(s);!n&&this.localCache[s]===o||this.notifyListeners(s,o)},r=this.storage.getItem(s);vR()&&r!==t.newValue&&t.newValue!==t.oldValue?setTimeout(i,oP):i()}notifyListeners(t,n){this.localCache[t]=n;const s=this.listeners[t];if(s)for(const i of Array.from(s))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,n,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:s}),!0)})},rP)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,n){await super._set(t,n),this.localCache[t]=JSON.stringify(n)}async _get(t){const n=await super._get(t);return this.localCache[t]=JSON.stringify(n),n}async _remove(t){await super._remove(t),delete this.localCache[t]}}N0.type="LOCAL";const aP=N0;class V0 extends L0{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,n){}_removeListener(t,n){}}V0.type="SESSION";const F0=V0;function lP(e){return Promise.all(e.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(n){return{fulfilled:!1,reason:n}}}))}class ru{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const n=this.receivers.find(i=>i.isListeningto(t));if(n)return n;const s=new ru(t);return this.receivers.push(s),s}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const n=t,{eventId:s,eventType:i,data:r}=n.data,o=this.handlersMap[i];if(!o?.size)return;n.ports[0].postMessage({status:"ack",eventId:s,eventType:i});const a=Array.from(o).map(async c=>c(n.origin,r)),l=await lP(a);n.ports[0].postMessage({status:"done",eventId:s,eventType:i,response:l})}_subscribe(t,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(n)}_unsubscribe(t,n){this.handlersMap[t]&&n&&this.handlersMap[t].delete(n),(!n||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}ru.receivers=[];function Af(e="",t=10){let n="";for(let s=0;s<t;s++)n+=Math.floor(Math.random()*10);return e+n}class cP{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,n,s=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let r,o;return new Promise((a,l)=>{const c=Af("",20);i.port1.start();const h=setTimeout(()=>{l(new Error("unsupported_event"))},s);o={messageChannel:i,onMessage(d){const f=d;if(f.data.eventId===c)switch(f.data.status){case"ack":clearTimeout(h),r=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(r),a(f.data.response);break;default:clearTimeout(h),clearTimeout(r),l(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:t,eventId:c,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}function Un(){return window}function uP(e){Un().location.href=e}function U0(){return typeof Un().WorkerGlobalScope<"u"&&typeof Un().importScripts=="function"}async function hP(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function dP(){return navigator?.serviceWorker?.controller||null}function fP(){return U0()?self:null}const $0="firebaseLocalStorageDb",pP=1,yc="firebaseLocalStorage",B0="fbase_key";class Ua{constructor(t){this.request=t}toPromise(){return new Promise((t,n)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function ou(e,t){return e.transaction([yc],t?"readwrite":"readonly").objectStore(yc)}function gP(){const e=indexedDB.deleteDatabase($0);return new Ua(e).toPromise()}function ad(){const e=indexedDB.open($0,pP);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const s=e.result;try{s.createObjectStore(yc,{keyPath:B0})}catch(i){n(i)}}),e.addEventListener("success",async()=>{const s=e.result;s.objectStoreNames.contains(yc)?t(s):(s.close(),await gP(),t(await ad()))})})}async function Nm(e,t,n){const s=ou(e,!0).put({[B0]:t,value:n});return new Ua(s).toPromise()}async function mP(e,t){const n=ou(e,!1).get(t),s=await new Ua(n).toPromise();return s===void 0?null:s.value}function Vm(e,t){const n=ou(e,!0).delete(t);return new Ua(n).toPromise()}const _P=800,yP=3;class H0{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await ad(),this.db)}async _withRetries(t){let n=0;for(;;)try{const s=await this._openDb();return await t(s)}catch(s){if(n++>yP)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return U0()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=ru._getInstance(fP()),this.receiver._subscribe("keyChanged",async(t,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(t,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await hP(),!this.activeServiceWorker)return;this.sender=new cP(this.activeServiceWorker);const t=await this.sender._send("ping",{},800);t&&t[0]?.fulfilled&&t[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||dP()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await ad();return await Nm(t,_c,"1"),await Vm(t,_c),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,n){return this._withPendingWrite(async()=>(await this._withRetries(s=>Nm(s,t,n)),this.localCache[t]=n,this.notifyServiceWorker(t)))}async _get(t){const n=await this._withRetries(s=>mP(s,t));return this.localCache[t]=n,n}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(n=>Vm(n,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(i=>{const r=ou(i,!1).getAll();return new Ua(r).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const n=[],s=new Set;if(t.length!==0)for(const{fbase_key:i,value:r}of t)s.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(r)&&(this.notifyListeners(i,r),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!s.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(t,n){this.localCache[t]=n;const s=this.listeners[t];if(s)for(const i of Array.from(s))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),_P)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}H0.type="LOCAL";const vP=H0;new Na(3e4,6e4);function bP(e,t){return t?os(t):(ft(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}class kf extends If{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return kr(t,this._buildIdpRequest())}_linkToIdToken(t,n){return kr(t,this._buildIdpRequest(n))}_getReauthenticationResolver(t){return kr(t,this._buildIdpRequest())}_buildIdpRequest(t){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(n.idToken=t),n}}function wP(e){return D0(e.auth,new kf(e),e.bypassAuthState)}function TP(e){const{auth:t,user:n}=e;return ft(n,t,"internal-error"),QR(n,new kf(e),e.bypassAuthState)}async function EP(e){const{auth:t,user:n}=e;return ft(n,t,"internal-error"),KR(n,new kf(e),e.bypassAuthState)}class j0{constructor(t,n,s,i,r=!1){this.auth=t,this.resolver=s,this.user=i,this.bypassAuthState=r,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(t,n)=>{this.pendingPromise={resolve:t,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(t){const{urlResponse:n,sessionId:s,postBody:i,tenantId:r,error:o,type:a}=t;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:s,tenantId:r||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(c){this.reject(c)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return wP;case"linkViaPopup":case"linkViaRedirect":return EP;case"reauthViaPopup":case"reauthViaRedirect":return TP;default:kn(this.auth,"internal-error")}}resolve(t){ds(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){ds(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const IP=new Na(2e3,1e4);class gr extends j0{constructor(t,n,s,i,r){super(t,n,i,r),this.provider=s,this.authWindow=null,this.pollId=null,gr.currentPopupAction&&gr.currentPopupAction.cancel(),gr.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return ft(t,this.auth,"internal-error"),t}async onExecution(){ds(this.filter.length===1,"Popup operations only handle one event");const t=Af();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Fn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Fn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,gr.currentPopupAction=null}pollUserCancellation(){const t=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Fn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,IP.get())};t()}}gr.currentPopupAction=null;const SP="pendingRedirect",Bl=new Map;class AP extends j0{constructor(t,n,s=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,s),this.eventId=null}async execute(){let t=Bl.get(this.auth._key());if(!t){try{const s=await kP(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(s)}catch(n){t=()=>Promise.reject(n)}Bl.set(this.auth._key(),t)}return this.bypassAuthState||Bl.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const n=await this.auth._redirectUserForId(t.eventId);if(n)return this.user=n,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function kP(e,t){const n=RP(t),s=xP(e);if(!await s._isAvailable())return!1;const i=await s._get(n)==="true";return await s._remove(n),i}function CP(e,t){Bl.set(e._key(),t)}function xP(e){return os(e._redirectPersistence)}function RP(e){return $l(SP,e.config.apiKey,e.name)}async function PP(e,t,n=!1){if(cn(e.app))return Promise.reject(ls(e));const s=Ki(e),i=bP(s,t),o=await new AP(s,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await s._persistUserIfCurrent(o.user),await s._setRedirectUser(null,t)),o}const MP=600*1e3;class DP{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let n=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(t,s)&&(n=!0,this.sendToConsumer(t,s),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!OP(t)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=t,n=!0)),n}sendToConsumer(t,n){if(t.error&&!z0(t)){const s=t.error.code?.split("auth/")[1]||"internal-error";n.onError(Fn(this.auth,s))}else n.onAuthEvent(t)}isEventForConsumer(t,n){const s=n.eventId===null||!!t.eventId&&t.eventId===n.eventId;return n.filter.includes(t.type)&&s}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=MP&&this.cachedEventUids.clear(),this.cachedEventUids.has(Fm(t))}saveEventToCache(t){this.cachedEventUids.add(Fm(t)),this.lastProcessedEventTime=Date.now()}}function Fm(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(t=>t).join("-")}function z0({type:e,error:t}){return e==="unknown"&&t?.code==="auth/no-auth-event"}function OP(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return z0(e);default:return!1}}async function LP(e,t={}){return Gn(e,"GET","/v1/projects",t)}const NP=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,VP=/^https?/;async function FP(e){if(e.config.emulator)return;const{authorizedDomains:t}=await LP(e);for(const n of t)try{if(UP(n))return}catch{}kn(e,"unauthorized-domain")}function UP(e){const t=id(),{protocol:n,hostname:s}=new URL(t);if(e.startsWith("chrome-extension://")){const o=new URL(e);return o.hostname===""&&s===""?n==="chrome-extension:"&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===s}if(!VP.test(n))return!1;if(NP.test(e))return s===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(s)}const $P=new Na(3e4,6e4);function Um(){const e=Un().___jsl;if(e?.H){for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}}function BP(e){return new Promise((t,n)=>{function s(){Um(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{Um(),n(Fn(e,"network-request-failed"))},timeout:$P.get()})}if(Un().gapi?.iframes?.Iframe)t(gapi.iframes.getContext());else if(Un().gapi?.load)s();else{const i=CR("iframefcb");return Un()[i]=()=>{gapi.load?s():n(Fn(e,"network-request-failed"))},C0(`${kR()}?onload=${i}`).catch(r=>n(r))}}).catch(t=>{throw Hl=null,t})}let Hl=null;function HP(e){return Hl=Hl||BP(e),Hl}const jP=new Na(5e3,15e3),zP="__/auth/iframe",WP="emulator/auth/iframe",qP={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},GP=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function KP(e){const t=e.config;ft(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?wf(t,WP):`https://${e.config.authDomain}/${zP}`,s={apiKey:t.apiKey,appName:e.name,v:Jr},i=GP.get(e.config.apiHost);i&&(s.eid=i);const r=e._getFrameworks();return r.length&&(s.fw=r.join(",")),`${n}?${La(s).slice(1)}`}async function QP(e){const t=await HP(e),n=Un().gapi;return ft(n,e,"internal-error"),t.open({where:document.body,url:KP(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:qP,dontclear:!0},s=>new Promise(async(i,r)=>{await s.restyle({setHideOnLeave:!1});const o=Fn(e,"network-request-failed"),a=Un().setTimeout(()=>{r(o)},jP.get());function l(){Un().clearTimeout(a),i(s)}s.ping(l).then(l,()=>{r(o)})}))}const YP={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},XP=500,JP=600,ZP="_blank",t2="http://localhost";class $m{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function e2(e,t,n,s=XP,i=JP){const r=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-s)/2,0).toString();let a="";const l={...YP,width:s.toString(),height:i.toString(),top:r,left:o},c=Ve().toLowerCase();n&&(a=w0(c)?ZP:n),v0(c)&&(t=t||t2,l.scrollbars="yes");const h=Object.entries(l).reduce((f,[p,_])=>`${f}${p}=${_},`,"");if(yR(c)&&a!=="_self")return n2(t||"",a),new $m(null);const d=window.open(t||"",a,h);ft(d,e,"popup-blocked");try{d.focus()}catch{}return new $m(d)}function n2(e,t){const n=document.createElement("a");n.href=e,n.target=t;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(s)}const s2="__/auth/handler",i2="emulator/auth/handler",r2=encodeURIComponent("fac");async function Bm(e,t,n,s,i,r){ft(e.config.authDomain,e,"auth-domain-config-required"),ft(e.config.apiKey,e,"invalid-api-key");const o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:s,v:Jr,eventId:i};if(t instanceof P0){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",$C(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(const[h,d]of Object.entries({}))o[h]=d}if(t instanceof Fa){const h=t.getScopes().filter(d=>d!=="");h.length>0&&(o.scopes=h.join(","))}e.tenantId&&(o.tid=e.tenantId);const a=o;for(const h of Object.keys(a))a[h]===void 0&&delete a[h];const l=await e._getAppCheckToken(),c=l?`#${r2}=${encodeURIComponent(l)}`:"";return`${o2(e)}?${La(a).slice(1)}${c}`}function o2({config:e}){return e.emulator?wf(e,i2):`https://${e.authDomain}/${s2}`}const gh="webStorageSupport";class a2{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=F0,this._completeRedirectFn=PP,this._overrideRedirectResult=CP}async _openPopup(t,n,s,i){ds(this.eventManagers[t._key()]?.manager,"_initialize() not called before _openPopup()");const r=await Bm(t,n,s,id(),i);return e2(t,r,Af())}async _openRedirect(t,n,s,i){await this._originValidation(t);const r=await Bm(t,n,s,id(),i);return uP(r),new Promise(()=>{})}_initialize(t){const n=t._key();if(this.eventManagers[n]){const{manager:i,promise:r}=this.eventManagers[n];return i?Promise.resolve(i):(ds(r,"If manager is not set, promise should be"),r)}const s=this.initAndGetManager(t);return this.eventManagers[n]={promise:s},s.catch(()=>{delete this.eventManagers[n]}),s}async initAndGetManager(t){const n=await QP(t),s=new DP(t);return n.register("authEvent",i=>(ft(i?.authEvent,t,"invalid-auth-event"),{status:s.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:s},this.iframes[t._key()]=n,s}_isIframeWebStorageSupported(t,n){this.iframes[t._key()].send(gh,{type:gh},i=>{const r=i?.[0]?.[gh];r!==void 0&&n(!!r),kn(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const n=t._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=FP(t)),this.originValidationPromises[n]}get _shouldInitProactively(){return A0()||b0()||Ef()}}const l2=a2;var Hm="@firebase/auth",jm="1.12.0";class c2{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const n=this.auth.onIdTokenChanged(s=>{t(s?.stsTokenManager.accessToken||null)});this.internalListeners.set(t,n),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const n=this.internalListeners.get(t);n&&(this.internalListeners.delete(t),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ft(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function u2(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function h2(e){Lr(new $i("auth",(t,{options:n})=>{const s=t.getProvider("app").getImmediate(),i=t.getProvider("heartbeat"),r=t.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=s.options;ft(o&&!o.includes(":"),"invalid-api-key",{appName:s.name});const l={apiKey:o,authDomain:a,clientPlatform:e,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:k0(e)},c=new IR(s,i,r,l);return OR(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,n,s)=>{t.getProvider("auth-internal").initialize()})),Lr(new $i("auth-internal",t=>{const n=Ki(t.getProvider("auth").getImmediate());return(s=>new c2(s))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),zs(Hm,jm,u2(e)),zs(Hm,jm,"esm2020")}const d2=300,f2=n0("authIdTokenMaxAge")||d2;let zm=null;const p2=e=>async t=>{const n=t&&await t.getIdTokenResult(),s=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(s&&s>f2)return;const i=n?.token;zm!==i&&(zm=i,await fetch(e,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function g2(e=l0()){const t=vf(e,"auth");if(t.isInitialized())return t.getImmediate();const n=DR(e,{popupRedirectResolver:l2,persistence:[vP,aP,F0]}),s=n0("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const r=new URL(s,location.origin);if(location.origin===r.origin){const o=p2(r.toString());nP(n,o,()=>o(n.currentUser)),eP(n,a=>o(a))}}const i=t0("auth");return i&&LR(n,`http://${i}`),n}function m2(){return document.getElementsByTagName("head")?.[0]??document}SR({loadJS(e){return new Promise((t,n)=>{const s=document.createElement("script");s.setAttribute("src",e),s.onload=t,s.onerror=i=>{const r=Fn("internal-error");r.customData=i,n(r)},s.type="text/javascript",s.charset="UTF-8",m2().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});h2("Browser");var Wm=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var Ws,W0;(function(){var e;function t(A,b){function T(){}T.prototype=b.prototype,A.F=b.prototype,A.prototype=new T,A.prototype.constructor=A,A.D=function(k,P,R){for(var C=Array(arguments.length-2),rt=2;rt<arguments.length;rt++)C[rt-2]=arguments[rt];return b.prototype[P].apply(k,C)}}function n(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}t(s,n),s.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(A,b,T){T||(T=0);const k=Array(16);if(typeof b=="string")for(var P=0;P<16;++P)k[P]=b.charCodeAt(T++)|b.charCodeAt(T++)<<8|b.charCodeAt(T++)<<16|b.charCodeAt(T++)<<24;else for(P=0;P<16;++P)k[P]=b[T++]|b[T++]<<8|b[T++]<<16|b[T++]<<24;b=A.g[0],T=A.g[1],P=A.g[2];let R=A.g[3],C;C=b+(R^T&(P^R))+k[0]+3614090360&4294967295,b=T+(C<<7&4294967295|C>>>25),C=R+(P^b&(T^P))+k[1]+3905402710&4294967295,R=b+(C<<12&4294967295|C>>>20),C=P+(T^R&(b^T))+k[2]+606105819&4294967295,P=R+(C<<17&4294967295|C>>>15),C=T+(b^P&(R^b))+k[3]+3250441966&4294967295,T=P+(C<<22&4294967295|C>>>10),C=b+(R^T&(P^R))+k[4]+4118548399&4294967295,b=T+(C<<7&4294967295|C>>>25),C=R+(P^b&(T^P))+k[5]+1200080426&4294967295,R=b+(C<<12&4294967295|C>>>20),C=P+(T^R&(b^T))+k[6]+2821735955&4294967295,P=R+(C<<17&4294967295|C>>>15),C=T+(b^P&(R^b))+k[7]+4249261313&4294967295,T=P+(C<<22&4294967295|C>>>10),C=b+(R^T&(P^R))+k[8]+1770035416&4294967295,b=T+(C<<7&4294967295|C>>>25),C=R+(P^b&(T^P))+k[9]+2336552879&4294967295,R=b+(C<<12&4294967295|C>>>20),C=P+(T^R&(b^T))+k[10]+4294925233&4294967295,P=R+(C<<17&4294967295|C>>>15),C=T+(b^P&(R^b))+k[11]+2304563134&4294967295,T=P+(C<<22&4294967295|C>>>10),C=b+(R^T&(P^R))+k[12]+1804603682&4294967295,b=T+(C<<7&4294967295|C>>>25),C=R+(P^b&(T^P))+k[13]+4254626195&4294967295,R=b+(C<<12&4294967295|C>>>20),C=P+(T^R&(b^T))+k[14]+2792965006&4294967295,P=R+(C<<17&4294967295|C>>>15),C=T+(b^P&(R^b))+k[15]+1236535329&4294967295,T=P+(C<<22&4294967295|C>>>10),C=b+(P^R&(T^P))+k[1]+4129170786&4294967295,b=T+(C<<5&4294967295|C>>>27),C=R+(T^P&(b^T))+k[6]+3225465664&4294967295,R=b+(C<<9&4294967295|C>>>23),C=P+(b^T&(R^b))+k[11]+643717713&4294967295,P=R+(C<<14&4294967295|C>>>18),C=T+(R^b&(P^R))+k[0]+3921069994&4294967295,T=P+(C<<20&4294967295|C>>>12),C=b+(P^R&(T^P))+k[5]+3593408605&4294967295,b=T+(C<<5&4294967295|C>>>27),C=R+(T^P&(b^T))+k[10]+38016083&4294967295,R=b+(C<<9&4294967295|C>>>23),C=P+(b^T&(R^b))+k[15]+3634488961&4294967295,P=R+(C<<14&4294967295|C>>>18),C=T+(R^b&(P^R))+k[4]+3889429448&4294967295,T=P+(C<<20&4294967295|C>>>12),C=b+(P^R&(T^P))+k[9]+568446438&4294967295,b=T+(C<<5&4294967295|C>>>27),C=R+(T^P&(b^T))+k[14]+3275163606&4294967295,R=b+(C<<9&4294967295|C>>>23),C=P+(b^T&(R^b))+k[3]+4107603335&4294967295,P=R+(C<<14&4294967295|C>>>18),C=T+(R^b&(P^R))+k[8]+1163531501&4294967295,T=P+(C<<20&4294967295|C>>>12),C=b+(P^R&(T^P))+k[13]+2850285829&4294967295,b=T+(C<<5&4294967295|C>>>27),C=R+(T^P&(b^T))+k[2]+4243563512&4294967295,R=b+(C<<9&4294967295|C>>>23),C=P+(b^T&(R^b))+k[7]+1735328473&4294967295,P=R+(C<<14&4294967295|C>>>18),C=T+(R^b&(P^R))+k[12]+2368359562&4294967295,T=P+(C<<20&4294967295|C>>>12),C=b+(T^P^R)+k[5]+4294588738&4294967295,b=T+(C<<4&4294967295|C>>>28),C=R+(b^T^P)+k[8]+2272392833&4294967295,R=b+(C<<11&4294967295|C>>>21),C=P+(R^b^T)+k[11]+1839030562&4294967295,P=R+(C<<16&4294967295|C>>>16),C=T+(P^R^b)+k[14]+4259657740&4294967295,T=P+(C<<23&4294967295|C>>>9),C=b+(T^P^R)+k[1]+2763975236&4294967295,b=T+(C<<4&4294967295|C>>>28),C=R+(b^T^P)+k[4]+1272893353&4294967295,R=b+(C<<11&4294967295|C>>>21),C=P+(R^b^T)+k[7]+4139469664&4294967295,P=R+(C<<16&4294967295|C>>>16),C=T+(P^R^b)+k[10]+3200236656&4294967295,T=P+(C<<23&4294967295|C>>>9),C=b+(T^P^R)+k[13]+681279174&4294967295,b=T+(C<<4&4294967295|C>>>28),C=R+(b^T^P)+k[0]+3936430074&4294967295,R=b+(C<<11&4294967295|C>>>21),C=P+(R^b^T)+k[3]+3572445317&4294967295,P=R+(C<<16&4294967295|C>>>16),C=T+(P^R^b)+k[6]+76029189&4294967295,T=P+(C<<23&4294967295|C>>>9),C=b+(T^P^R)+k[9]+3654602809&4294967295,b=T+(C<<4&4294967295|C>>>28),C=R+(b^T^P)+k[12]+3873151461&4294967295,R=b+(C<<11&4294967295|C>>>21),C=P+(R^b^T)+k[15]+530742520&4294967295,P=R+(C<<16&4294967295|C>>>16),C=T+(P^R^b)+k[2]+3299628645&4294967295,T=P+(C<<23&4294967295|C>>>9),C=b+(P^(T|~R))+k[0]+4096336452&4294967295,b=T+(C<<6&4294967295|C>>>26),C=R+(T^(b|~P))+k[7]+1126891415&4294967295,R=b+(C<<10&4294967295|C>>>22),C=P+(b^(R|~T))+k[14]+2878612391&4294967295,P=R+(C<<15&4294967295|C>>>17),C=T+(R^(P|~b))+k[5]+4237533241&4294967295,T=P+(C<<21&4294967295|C>>>11),C=b+(P^(T|~R))+k[12]+1700485571&4294967295,b=T+(C<<6&4294967295|C>>>26),C=R+(T^(b|~P))+k[3]+2399980690&4294967295,R=b+(C<<10&4294967295|C>>>22),C=P+(b^(R|~T))+k[10]+4293915773&4294967295,P=R+(C<<15&4294967295|C>>>17),C=T+(R^(P|~b))+k[1]+2240044497&4294967295,T=P+(C<<21&4294967295|C>>>11),C=b+(P^(T|~R))+k[8]+1873313359&4294967295,b=T+(C<<6&4294967295|C>>>26),C=R+(T^(b|~P))+k[15]+4264355552&4294967295,R=b+(C<<10&4294967295|C>>>22),C=P+(b^(R|~T))+k[6]+2734768916&4294967295,P=R+(C<<15&4294967295|C>>>17),C=T+(R^(P|~b))+k[13]+1309151649&4294967295,T=P+(C<<21&4294967295|C>>>11),C=b+(P^(T|~R))+k[4]+4149444226&4294967295,b=T+(C<<6&4294967295|C>>>26),C=R+(T^(b|~P))+k[11]+3174756917&4294967295,R=b+(C<<10&4294967295|C>>>22),C=P+(b^(R|~T))+k[2]+718787259&4294967295,P=R+(C<<15&4294967295|C>>>17),C=T+(R^(P|~b))+k[9]+3951481745&4294967295,A.g[0]=A.g[0]+b&4294967295,A.g[1]=A.g[1]+(P+(C<<21&4294967295|C>>>11))&4294967295,A.g[2]=A.g[2]+P&4294967295,A.g[3]=A.g[3]+R&4294967295}s.prototype.v=function(A,b){b===void 0&&(b=A.length);const T=b-this.blockSize,k=this.C;let P=this.h,R=0;for(;R<b;){if(P==0)for(;R<=T;)i(this,A,R),R+=this.blockSize;if(typeof A=="string"){for(;R<b;)if(k[P++]=A.charCodeAt(R++),P==this.blockSize){i(this,k),P=0;break}}else for(;R<b;)if(k[P++]=A[R++],P==this.blockSize){i(this,k),P=0;break}}this.h=P,this.o+=b},s.prototype.A=function(){var A=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);A[0]=128;for(var b=1;b<A.length-8;++b)A[b]=0;b=this.o*8;for(var T=A.length-8;T<A.length;++T)A[T]=b&255,b/=256;for(this.v(A),A=Array(16),b=0,T=0;T<4;++T)for(let k=0;k<32;k+=8)A[b++]=this.g[T]>>>k&255;return A};function r(A,b){var T=a;return Object.prototype.hasOwnProperty.call(T,A)?T[A]:T[A]=b(A)}function o(A,b){this.h=b;const T=[];let k=!0;for(let P=A.length-1;P>=0;P--){const R=A[P]|0;k&&R==b||(T[P]=R,k=!1)}this.g=T}var a={};function l(A){return-128<=A&&A<128?r(A,function(b){return new o([b|0],b<0?-1:0)}):new o([A|0],A<0?-1:0)}function c(A){if(isNaN(A)||!isFinite(A))return d;if(A<0)return v(c(-A));const b=[];let T=1;for(let k=0;A>=T;k++)b[k]=A/T|0,T*=4294967296;return new o(b,0)}function h(A,b){if(A.length==0)throw Error("number format error: empty string");if(b=b||10,b<2||36<b)throw Error("radix out of range: "+b);if(A.charAt(0)=="-")return v(h(A.substring(1),b));if(A.indexOf("-")>=0)throw Error('number format error: interior "-" character');const T=c(Math.pow(b,8));let k=d;for(let R=0;R<A.length;R+=8){var P=Math.min(8,A.length-R);const C=parseInt(A.substring(R,R+P),b);P<8?(P=c(Math.pow(b,P)),k=k.j(P).add(c(C))):(k=k.j(T),k=k.add(c(C)))}return k}var d=l(0),f=l(1),p=l(16777216);e=o.prototype,e.m=function(){if(y(this))return-v(this).m();let A=0,b=1;for(let T=0;T<this.g.length;T++){const k=this.i(T);A+=(k>=0?k:4294967296+k)*b,b*=4294967296}return A},e.toString=function(A){if(A=A||10,A<2||36<A)throw Error("radix out of range: "+A);if(_(this))return"0";if(y(this))return"-"+v(this).toString(A);const b=c(Math.pow(A,6));var T=this;let k="";for(;;){const P=x(T,b).g;T=w(T,P.j(b));let R=((T.g.length>0?T.g[0]:T.h)>>>0).toString(A);if(T=P,_(T))return R+k;for(;R.length<6;)R="0"+R;k=R+k}},e.i=function(A){return A<0?0:A<this.g.length?this.g[A]:this.h};function _(A){if(A.h!=0)return!1;for(let b=0;b<A.g.length;b++)if(A.g[b]!=0)return!1;return!0}function y(A){return A.h==-1}e.l=function(A){return A=w(this,A),y(A)?-1:_(A)?0:1};function v(A){const b=A.g.length,T=[];for(let k=0;k<b;k++)T[k]=~A.g[k];return new o(T,~A.h).add(f)}e.abs=function(){return y(this)?v(this):this},e.add=function(A){const b=Math.max(this.g.length,A.g.length),T=[];let k=0;for(let P=0;P<=b;P++){let R=k+(this.i(P)&65535)+(A.i(P)&65535),C=(R>>>16)+(this.i(P)>>>16)+(A.i(P)>>>16);k=C>>>16,R&=65535,C&=65535,T[P]=C<<16|R}return new o(T,T[T.length-1]&-2147483648?-1:0)};function w(A,b){return A.add(v(b))}e.j=function(A){if(_(this)||_(A))return d;if(y(this))return y(A)?v(this).j(v(A)):v(v(this).j(A));if(y(A))return v(this.j(v(A)));if(this.l(p)<0&&A.l(p)<0)return c(this.m()*A.m());const b=this.g.length+A.g.length,T=[];for(var k=0;k<2*b;k++)T[k]=0;for(k=0;k<this.g.length;k++)for(let P=0;P<A.g.length;P++){const R=this.i(k)>>>16,C=this.i(k)&65535,rt=A.i(P)>>>16,at=A.i(P)&65535;T[2*k+2*P]+=C*at,M(T,2*k+2*P),T[2*k+2*P+1]+=R*at,M(T,2*k+2*P+1),T[2*k+2*P+1]+=C*rt,M(T,2*k+2*P+1),T[2*k+2*P+2]+=R*rt,M(T,2*k+2*P+2)}for(A=0;A<b;A++)T[A]=T[2*A+1]<<16|T[2*A];for(A=b;A<2*b;A++)T[A]=0;return new o(T,0)};function M(A,b){for(;(A[b]&65535)!=A[b];)A[b+1]+=A[b]>>>16,A[b]&=65535,b++}function E(A,b){this.g=A,this.h=b}function x(A,b){if(_(b))throw Error("division by zero");if(_(A))return new E(d,d);if(y(A))return b=x(v(A),b),new E(v(b.g),v(b.h));if(y(b))return b=x(A,v(b)),new E(v(b.g),b.h);if(A.g.length>30){if(y(A)||y(b))throw Error("slowDivide_ only works with positive integers.");for(var T=f,k=b;k.l(A)<=0;)T=O(T),k=O(k);var P=V(T,1),R=V(k,1);for(k=V(k,2),T=V(T,2);!_(k);){var C=R.add(k);C.l(A)<=0&&(P=P.add(T),R=C),k=V(k,1),T=V(T,1)}return b=w(A,P.j(b)),new E(P,b)}for(P=d;A.l(b)>=0;){for(T=Math.max(1,Math.floor(A.m()/b.m())),k=Math.ceil(Math.log(T)/Math.LN2),k=k<=48?1:Math.pow(2,k-48),R=c(T),C=R.j(b);y(C)||C.l(A)>0;)T-=k,R=c(T),C=R.j(b);_(R)&&(R=f),P=P.add(R),A=w(A,C)}return new E(P,A)}e.B=function(A){return x(this,A).h},e.and=function(A){const b=Math.max(this.g.length,A.g.length),T=[];for(let k=0;k<b;k++)T[k]=this.i(k)&A.i(k);return new o(T,this.h&A.h)},e.or=function(A){const b=Math.max(this.g.length,A.g.length),T=[];for(let k=0;k<b;k++)T[k]=this.i(k)|A.i(k);return new o(T,this.h|A.h)},e.xor=function(A){const b=Math.max(this.g.length,A.g.length),T=[];for(let k=0;k<b;k++)T[k]=this.i(k)^A.i(k);return new o(T,this.h^A.h)};function O(A){const b=A.g.length+1,T=[];for(let k=0;k<b;k++)T[k]=A.i(k)<<1|A.i(k-1)>>>31;return new o(T,A.h)}function V(A,b){const T=b>>5;b%=32;const k=A.g.length-T,P=[];for(let R=0;R<k;R++)P[R]=b>0?A.i(R+T)>>>b|A.i(R+T+1)<<32-b:A.i(R+T);return new o(P,A.h)}s.prototype.digest=s.prototype.A,s.prototype.reset=s.prototype.u,s.prototype.update=s.prototype.v,W0=s,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=h,Ws=o}).apply(typeof Wm<"u"?Wm:typeof self<"u"?self:typeof window<"u"?window:{});var ml=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var q0,Oo,G0,jl,ld,K0,Q0,Y0;(function(){var e,t=Object.defineProperty;function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof ml=="object"&&ml];for(var g=0;g<u.length;++g){var m=u[g];if(m&&m.Math==Math)return m}throw Error("Cannot find global object")}var s=n(this);function i(u,g){if(g)t:{var m=s;u=u.split(".");for(var S=0;S<u.length-1;S++){var N=u[S];if(!(N in m))break t;m=m[N]}u=u[u.length-1],S=m[u],g=g(S),g!=S&&g!=null&&t(m,u,{configurable:!0,writable:!0,value:g})}}i("Symbol.dispose",function(u){return u||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(u){return u||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(u){return u||function(g){var m=[],S;for(S in g)Object.prototype.hasOwnProperty.call(g,S)&&m.push([S,g[S]]);return m}});var r=r||{},o=this||self;function a(u){var g=typeof u;return g=="object"&&u!=null||g=="function"}function l(u,g,m){return u.call.apply(u.bind,arguments)}function c(u,g,m){return c=l,c.apply(null,arguments)}function h(u,g){var m=Array.prototype.slice.call(arguments,1);return function(){var S=m.slice();return S.push.apply(S,arguments),u.apply(this,S)}}function d(u,g){function m(){}m.prototype=g.prototype,u.Z=g.prototype,u.prototype=new m,u.prototype.constructor=u,u.Ob=function(S,N,F){for(var X=Array(arguments.length-2),vt=2;vt<arguments.length;vt++)X[vt-2]=arguments[vt];return g.prototype[N].apply(S,X)}}var f=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?u=>u&&AsyncContext.Snapshot.wrap(u):u=>u;function p(u){const g=u.length;if(g>0){const m=Array(g);for(let S=0;S<g;S++)m[S]=u[S];return m}return[]}function _(u,g){for(let S=1;S<arguments.length;S++){const N=arguments[S];var m=typeof N;if(m=m!="object"?m:N?Array.isArray(N)?"array":m:"null",m=="array"||m=="object"&&typeof N.length=="number"){m=u.length||0;const F=N.length||0;u.length=m+F;for(let X=0;X<F;X++)u[m+X]=N[X]}else u.push(N)}}class y{constructor(g,m){this.i=g,this.j=m,this.h=0,this.g=null}get(){let g;return this.h>0?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function v(u){o.setTimeout(()=>{throw u},0)}function w(){var u=A;let g=null;return u.g&&(g=u.g,u.g=u.g.next,u.g||(u.h=null),g.next=null),g}class M{constructor(){this.h=this.g=null}add(g,m){const S=E.get();S.set(g,m),this.h?this.h.next=S:this.g=S,this.h=S}}var E=new y(()=>new x,u=>u.reset());class x{constructor(){this.next=this.g=this.h=null}set(g,m){this.h=g,this.g=m,this.next=null}reset(){this.next=this.g=this.h=null}}let O,V=!1,A=new M,b=()=>{const u=Promise.resolve(void 0);O=()=>{u.then(T)}};function T(){for(var u;u=w();){try{u.h.call(u.g)}catch(m){v(m)}var g=E;g.j(u),g.h<100&&(g.h++,u.next=g.g,g.g=u)}V=!1}function k(){this.u=this.u,this.C=this.C}k.prototype.u=!1,k.prototype.dispose=function(){this.u||(this.u=!0,this.N())},k.prototype[Symbol.dispose]=function(){this.dispose()},k.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function P(u,g){this.type=u,this.g=this.target=g,this.defaultPrevented=!1}P.prototype.h=function(){this.defaultPrevented=!0};var R=(function(){if(!o.addEventListener||!Object.defineProperty)return!1;var u=!1,g=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const m=()=>{};o.addEventListener("test",m,g),o.removeEventListener("test",m,g)}catch{}return u})();function C(u){return/^[\s\xa0]*$/.test(u)}function rt(u,g){P.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u&&this.init(u,g)}d(rt,P),rt.prototype.init=function(u,g){const m=this.type=u.type,S=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;this.target=u.target||u.srcElement,this.g=g,g=u.relatedTarget,g||(m=="mouseover"?g=u.fromElement:m=="mouseout"&&(g=u.toElement)),this.relatedTarget=g,S?(this.clientX=S.clientX!==void 0?S.clientX:S.pageX,this.clientY=S.clientY!==void 0?S.clientY:S.pageY,this.screenX=S.screenX||0,this.screenY=S.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=u.pointerType,this.state=u.state,this.i=u,u.defaultPrevented&&rt.Z.h.call(this)},rt.prototype.h=function(){rt.Z.h.call(this);const u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var at="closure_listenable_"+(Math.random()*1e6|0),Z=0;function ot(u,g,m,S,N){this.listener=u,this.proxy=null,this.src=g,this.type=m,this.capture=!!S,this.ha=N,this.key=++Z,this.da=this.fa=!1}function et(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function Ct(u,g,m){for(const S in u)g.call(m,u[S],S,u)}function Ye(u,g){for(const m in u)g.call(void 0,u[m],m,u)}function Fe(u){const g={};for(const m in u)g[m]=u[m];return g}const se="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function gn(u,g){let m,S;for(let N=1;N<arguments.length;N++){S=arguments[N];for(m in S)u[m]=S[m];for(let F=0;F<se.length;F++)m=se[F],Object.prototype.hasOwnProperty.call(S,m)&&(u[m]=S[m])}}function He(u){this.src=u,this.g={},this.h=0}He.prototype.add=function(u,g,m,S,N){const F=u.toString();u=this.g[F],u||(u=this.g[F]=[],this.h++);const X=Ee(u,g,S,N);return X>-1?(g=u[X],m||(g.fa=!1)):(g=new ot(g,this.src,F,!!S,N),g.fa=m,u.push(g)),g};function mn(u,g){const m=g.type;if(m in u.g){var S=u.g[m],N=Array.prototype.indexOf.call(S,g,void 0),F;(F=N>=0)&&Array.prototype.splice.call(S,N,1),F&&(et(g),u.g[m].length==0&&(delete u.g[m],u.h--))}}function Ee(u,g,m,S){for(let N=0;N<u.length;++N){const F=u[N];if(!F.da&&F.listener==g&&F.capture==!!m&&F.ha==S)return N}return-1}var vs="closure_lm_"+(Math.random()*1e6|0),ai={};function ro(u,g,m,S,N){if(Array.isArray(g)){for(let F=0;F<g.length;F++)ro(u,g[F],m,S,N);return null}return m=z(m),u&&u[at]?u.J(g,m,a(S)?!!S.capture:!1,N):bs(u,g,m,!1,S,N)}function bs(u,g,m,S,N,F){if(!g)throw Error("Invalid event type");const X=a(N)?!!N.capture:!!N;let vt=W(u);if(vt||(u[vs]=vt=new He(u)),m=vt.add(g,m,S,X,F),m.proxy)return m;if(S=oo(),m.proxy=S,S.src=u,S.listener=m,u.addEventListener)R||(N=X),N===void 0&&(N=!1),u.addEventListener(g.toString(),S,N);else if(u.attachEvent)u.attachEvent(L(g.toString()),S);else if(u.addListener&&u.removeListener)u.addListener(S);else throw Error("addEventListener and attachEvent are unavailable.");return m}function oo(){function u(m){return g.call(u.src,u.listener,m)}const g=U;return u}function Zi(u,g,m,S,N){if(Array.isArray(g))for(var F=0;F<g.length;F++)Zi(u,g[F],m,S,N);else S=a(S)?!!S.capture:!!S,m=z(m),u&&u[at]?(u=u.i,F=String(g).toString(),F in u.g&&(g=u.g[F],m=Ee(g,m,S,N),m>-1&&(et(g[m]),Array.prototype.splice.call(g,m,1),g.length==0&&(delete u.g[F],u.h--)))):u&&(u=W(u))&&(g=u.g[g.toString()],u=-1,g&&(u=Ee(g,m,S,N)),(m=u>-1?g[u]:null)&&D(m))}function D(u){if(typeof u!="number"&&u&&!u.da){var g=u.src;if(g&&g[at])mn(g.i,u);else{var m=u.type,S=u.proxy;g.removeEventListener?g.removeEventListener(m,S,u.capture):g.detachEvent?g.detachEvent(L(m),S):g.addListener&&g.removeListener&&g.removeListener(S),(m=W(g))?(mn(m,u),m.h==0&&(m.src=null,g[vs]=null)):et(u)}}}function L(u){return u in ai?ai[u]:ai[u]="on"+u}function U(u,g){if(u.da)u=!0;else{g=new rt(g,this);const m=u.listener,S=u.ha||u.src;u.fa&&D(u),u=m.call(S,g)}return u}function W(u){return u=u[vs],u instanceof He?u:null}var B="__closure_events_fn_"+(Math.random()*1e9>>>0);function z(u){return typeof u=="function"?u:(u[B]||(u[B]=function(g){return u.handleEvent(g)}),u[B])}function Q(){k.call(this),this.i=new He(this),this.M=this,this.G=null}d(Q,k),Q.prototype[at]=!0,Q.prototype.removeEventListener=function(u,g,m,S){Zi(this,u,g,m,S)};function K(u,g){var m,S=u.G;if(S)for(m=[];S;S=S.G)m.push(S);if(u=u.M,S=g.type||g,typeof g=="string")g=new P(g,u);else if(g instanceof P)g.target=g.target||u;else{var N=g;g=new P(S,u),gn(g,N)}N=!0;let F,X;if(m)for(X=m.length-1;X>=0;X--)F=g.g=m[X],N=Y(F,S,!0,g)&&N;if(F=g.g=u,N=Y(F,S,!0,g)&&N,N=Y(F,S,!1,g)&&N,m)for(X=0;X<m.length;X++)F=g.g=m[X],N=Y(F,S,!1,g)&&N}Q.prototype.N=function(){if(Q.Z.N.call(this),this.i){var u=this.i;for(const g in u.g){const m=u.g[g];for(let S=0;S<m.length;S++)et(m[S]);delete u.g[g],u.h--}}this.G=null},Q.prototype.J=function(u,g,m,S){return this.i.add(String(u),g,!1,m,S)},Q.prototype.K=function(u,g,m,S){return this.i.add(String(u),g,!0,m,S)};function Y(u,g,m,S){if(g=u.i.g[String(g)],!g)return!0;g=g.concat();let N=!0;for(let F=0;F<g.length;++F){const X=g[F];if(X&&!X.da&&X.capture==m){const vt=X.listener,ue=X.ha||X.src;X.fa&&mn(u.i,X),N=vt.call(ue,S)!==!1&&N}}return N&&!S.defaultPrevented}function q(u,g){if(typeof u!="function")if(u&&typeof u.handleEvent=="function")u=c(u.handleEvent,u);else throw Error("Invalid listener argument");return Number(g)>2147483647?-1:o.setTimeout(u,g||0)}function ct(u){u.g=q(()=>{u.g=null,u.i&&(u.i=!1,ct(u))},u.l);const g=u.h;u.h=null,u.m.apply(null,g)}class tt extends k{constructor(g,m){super(),this.m=g,this.l=m,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:ct(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function st(u){k.call(this),this.h=u,this.g={}}d(st,k);var mt=[];function wt(u){Ct(u.g,function(g,m){this.g.hasOwnProperty(m)&&D(g)},u),u.g={}}st.prototype.N=function(){st.Z.N.call(this),wt(this)},st.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Mt=o.JSON.stringify,xt=o.JSON.parse,Ce=class{stringify(u){return o.JSON.stringify(u,void 0)}parse(u){return o.JSON.parse(u,void 0)}};function le(){}function je(){}var ce={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Kn(){P.call(this,"d")}d(Kn,P);function tr(){P.call(this,"c")}d(tr,P);var te={},Xe=null;function li(){return Xe=Xe||new Q}te.Ia="serverreachability";function ao(u){P.call(this,te.Ia,u)}d(ao,P);function lo(u){const g=li();K(g,new ao(g))}te.STAT_EVENT="statevent";function bp(u,g){P.call(this,te.STAT_EVENT,u),this.stat=g}d(bp,P);function Ue(u){const g=li();K(g,new bp(g,u))}te.Ja="timingevent";function wp(u,g){P.call(this,te.Ja,u),this.size=g}d(wp,P);function co(u,g){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){u()},g)}function uo(){this.g=!0}uo.prototype.ua=function(){this.g=!1};function hE(u,g,m,S,N,F){u.info(function(){if(u.g)if(F){var X="",vt=F.split("&");for(let Ft=0;Ft<vt.length;Ft++){var ue=vt[Ft].split("=");if(ue.length>1){const ge=ue[0];ue=ue[1];const xn=ge.split("_");X=xn.length>=2&&xn[1]=="type"?X+(ge+"="+ue+"&"):X+(ge+"=redacted&")}}}else X=null;else X=F;return"XMLHTTP REQ ("+S+") [attempt "+N+"]: "+g+`
`+m+`
`+X})}function dE(u,g,m,S,N,F,X){u.info(function(){return"XMLHTTP RESP ("+S+") [ attempt "+N+"]: "+g+`
`+m+`
`+F+" "+X})}function er(u,g,m,S){u.info(function(){return"XMLHTTP TEXT ("+g+"): "+pE(u,m)+(S?" "+S:"")})}function fE(u,g){u.info(function(){return"TIMEOUT: "+g})}uo.prototype.info=function(){};function pE(u,g){if(!u.g)return g;if(!g)return null;try{const F=JSON.parse(g);if(F){for(u=0;u<F.length;u++)if(Array.isArray(F[u])){var m=F[u];if(!(m.length<2)){var S=m[1];if(Array.isArray(S)&&!(S.length<1)){var N=S[0];if(N!="noop"&&N!="stop"&&N!="close")for(let X=1;X<S.length;X++)S[X]=""}}}}return Mt(F)}catch{return g}}var Ka={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Tp={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Ep;function Ru(){}d(Ru,le),Ru.prototype.g=function(){return new XMLHttpRequest},Ep=new Ru;function ho(u){return encodeURIComponent(String(u))}function gE(u){var g=1;u=u.split(":");const m=[];for(;g>0&&u.length;)m.push(u.shift()),g--;return u.length&&m.push(u.join(":")),m}function ws(u,g,m,S){this.j=u,this.i=g,this.l=m,this.S=S||1,this.V=new st(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Ip}function Ip(){this.i=null,this.g="",this.h=!1}var Sp={},Pu={};function Mu(u,g,m){u.M=1,u.A=Ya(Cn(g)),u.u=m,u.R=!0,Ap(u,null)}function Ap(u,g){u.F=Date.now(),Qa(u),u.B=Cn(u.A);var m=u.B,S=u.S;Array.isArray(S)||(S=[String(S)]),Up(m.i,"t",S),u.C=0,m=u.j.L,u.h=new Ip,u.g=sg(u.j,m?g:null,!u.u),u.P>0&&(u.O=new tt(c(u.Y,u,u.g),u.P)),g=u.V,m=u.g,S=u.ba;var N="readystatechange";Array.isArray(N)||(N&&(mt[0]=N.toString()),N=mt);for(let F=0;F<N.length;F++){const X=ro(m,N[F],S||g.handleEvent,!1,g.h||g);if(!X)break;g.g[X.key]=X}g=u.J?Fe(u.J):{},u.u?(u.v||(u.v="POST"),g["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.B,u.v,u.u,g)):(u.v="GET",u.g.ea(u.B,u.v,null,g)),lo(),hE(u.i,u.v,u.B,u.l,u.S,u.u)}ws.prototype.ba=function(u){u=u.target;const g=this.O;g&&Is(u)==3?g.j():this.Y(u)},ws.prototype.Y=function(u){try{if(u==this.g)t:{const vt=Is(this.g),ue=this.g.ya(),Ft=this.g.ca();if(!(vt<3)&&(vt!=3||this.g&&(this.h.h||this.g.la()||qp(this.g)))){this.K||vt!=4||ue==7||(ue==8||Ft<=0?lo(3):lo(2)),Du(this);var g=this.g.ca();this.X=g;var m=mE(this);if(this.o=g==200,dE(this.i,this.v,this.B,this.l,this.S,vt,g),this.o){if(this.U&&!this.L){e:{if(this.g){var S,N=this.g;if((S=N.g?N.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!C(S)){var F=S;break e}}F=null}if(u=F)er(this.i,this.l,u,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Ou(this,u);else{this.o=!1,this.m=3,Ue(12),ci(this),fo(this);break t}}if(this.R){u=!0;let ge;for(;!this.K&&this.C<m.length;)if(ge=_E(this,m),ge==Pu){vt==4&&(this.m=4,Ue(14),u=!1),er(this.i,this.l,null,"[Incomplete Response]");break}else if(ge==Sp){this.m=4,Ue(15),er(this.i,this.l,m,"[Invalid Chunk]"),u=!1;break}else er(this.i,this.l,ge,null),Ou(this,ge);if(kp(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),vt!=4||m.length!=0||this.h.h||(this.m=1,Ue(16),u=!1),this.o=this.o&&u,!u)er(this.i,this.l,m,"[Invalid Chunked Response]"),ci(this),fo(this);else if(m.length>0&&!this.W){this.W=!0;var X=this.j;X.g==this&&X.aa&&!X.P&&(X.j.info("Great, no buffering proxy detected. Bytes received: "+m.length),Hu(X),X.P=!0,Ue(11))}}else er(this.i,this.l,m,null),Ou(this,m);vt==4&&ci(this),this.o&&!this.K&&(vt==4?Zp(this.j,this):(this.o=!1,Qa(this)))}else PE(this.g),g==400&&m.indexOf("Unknown SID")>0?(this.m=3,Ue(12)):(this.m=0,Ue(13)),ci(this),fo(this)}}}catch{}};function mE(u){if(!kp(u))return u.g.la();const g=qp(u.g);if(g==="")return"";let m="";const S=g.length,N=Is(u.g)==4;if(!u.h.i){if(typeof TextDecoder>"u")return ci(u),fo(u),"";u.h.i=new o.TextDecoder}for(let F=0;F<S;F++)u.h.h=!0,m+=u.h.i.decode(g[F],{stream:!(N&&F==S-1)});return g.length=0,u.h.g+=m,u.C=0,u.h.g}function kp(u){return u.g?u.v=="GET"&&u.M!=2&&u.j.Aa:!1}function _E(u,g){var m=u.C,S=g.indexOf(`
`,m);return S==-1?Pu:(m=Number(g.substring(m,S)),isNaN(m)?Sp:(S+=1,S+m>g.length?Pu:(g=g.slice(S,S+m),u.C=S+m,g)))}ws.prototype.cancel=function(){this.K=!0,ci(this)};function Qa(u){u.T=Date.now()+u.H,Cp(u,u.H)}function Cp(u,g){if(u.D!=null)throw Error("WatchDog timer not null");u.D=co(c(u.aa,u),g)}function Du(u){u.D&&(o.clearTimeout(u.D),u.D=null)}ws.prototype.aa=function(){this.D=null;const u=Date.now();u-this.T>=0?(fE(this.i,this.B),this.M!=2&&(lo(),Ue(17)),ci(this),this.m=2,fo(this)):Cp(this,this.T-u)};function fo(u){u.j.I==0||u.K||Zp(u.j,u)}function ci(u){Du(u);var g=u.O;g&&typeof g.dispose=="function"&&g.dispose(),u.O=null,wt(u.V),u.g&&(g=u.g,u.g=null,g.abort(),g.dispose())}function Ou(u,g){try{var m=u.j;if(m.I!=0&&(m.g==u||Lu(m.h,u))){if(!u.L&&Lu(m.h,u)&&m.I==3){try{var S=m.Ba.g.parse(g)}catch{S=null}if(Array.isArray(S)&&S.length==3){var N=S;if(N[0]==0){t:if(!m.v){if(m.g)if(m.g.F+3e3<u.F)el(m),Za(m);else break t;Bu(m),Ue(18)}}else m.xa=N[1],0<m.xa-m.K&&N[2]<37500&&m.F&&m.A==0&&!m.C&&(m.C=co(c(m.Va,m),6e3));Pp(m.h)<=1&&m.ta&&(m.ta=void 0)}else hi(m,11)}else if((u.L||m.g==u)&&el(m),!C(g))for(N=m.Ba.g.parse(g),g=0;g<N.length;g++){let Ft=N[g];const ge=Ft[0];if(!(ge<=m.K))if(m.K=ge,Ft=Ft[1],m.I==2)if(Ft[0]=="c"){m.M=Ft[1],m.ba=Ft[2];const xn=Ft[3];xn!=null&&(m.ka=xn,m.j.info("VER="+m.ka));const di=Ft[4];di!=null&&(m.za=di,m.j.info("SVER="+m.za));const Ss=Ft[5];Ss!=null&&typeof Ss=="number"&&Ss>0&&(S=1.5*Ss,m.O=S,m.j.info("backChannelRequestTimeoutMs_="+S)),S=m;const As=u.g;if(As){const sl=As.g?As.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(sl){var F=S.h;F.g||sl.indexOf("spdy")==-1&&sl.indexOf("quic")==-1&&sl.indexOf("h2")==-1||(F.j=F.l,F.g=new Set,F.h&&(Nu(F,F.h),F.h=null))}if(S.G){const ju=As.g?As.g.getResponseHeader("X-HTTP-Session-Id"):null;ju&&(S.wa=ju,Wt(S.J,S.G,ju))}}m.I=3,m.l&&m.l.ra(),m.aa&&(m.T=Date.now()-u.F,m.j.info("Handshake RTT: "+m.T+"ms")),S=m;var X=u;if(S.na=ng(S,S.L?S.ba:null,S.W),X.L){Mp(S.h,X);var vt=X,ue=S.O;ue&&(vt.H=ue),vt.D&&(Du(vt),Qa(vt)),S.g=X}else Xp(S);m.i.length>0&&tl(m)}else Ft[0]!="stop"&&Ft[0]!="close"||hi(m,7);else m.I==3&&(Ft[0]=="stop"||Ft[0]=="close"?Ft[0]=="stop"?hi(m,7):$u(m):Ft[0]!="noop"&&m.l&&m.l.qa(Ft),m.A=0)}}lo(4)}catch{}}var yE=class{constructor(u,g){this.g=u,this.map=g}};function xp(u){this.l=u||10,o.PerformanceNavigationTiming?(u=o.performance.getEntriesByType("navigation"),u=u.length>0&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Rp(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function Pp(u){return u.h?1:u.g?u.g.size:0}function Lu(u,g){return u.h?u.h==g:u.g?u.g.has(g):!1}function Nu(u,g){u.g?u.g.add(g):u.h=g}function Mp(u,g){u.h&&u.h==g?u.h=null:u.g&&u.g.has(g)&&u.g.delete(g)}xp.prototype.cancel=function(){if(this.i=Dp(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function Dp(u){if(u.h!=null)return u.i.concat(u.h.G);if(u.g!=null&&u.g.size!==0){let g=u.i;for(const m of u.g.values())g=g.concat(m.G);return g}return p(u.i)}var Op=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function vE(u,g){if(u){u=u.split("&");for(let m=0;m<u.length;m++){const S=u[m].indexOf("=");let N,F=null;S>=0?(N=u[m].substring(0,S),F=u[m].substring(S+1)):N=u[m],g(N,F?decodeURIComponent(F.replace(/\+/g," ")):"")}}}function Ts(u){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let g;u instanceof Ts?(this.l=u.l,po(this,u.j),this.o=u.o,this.g=u.g,go(this,u.u),this.h=u.h,Vu(this,$p(u.i)),this.m=u.m):u&&(g=String(u).match(Op))?(this.l=!1,po(this,g[1]||"",!0),this.o=mo(g[2]||""),this.g=mo(g[3]||"",!0),go(this,g[4]),this.h=mo(g[5]||"",!0),Vu(this,g[6]||"",!0),this.m=mo(g[7]||"")):(this.l=!1,this.i=new yo(null,this.l))}Ts.prototype.toString=function(){const u=[];var g=this.j;g&&u.push(_o(g,Lp,!0),":");var m=this.g;return(m||g=="file")&&(u.push("//"),(g=this.o)&&u.push(_o(g,Lp,!0),"@"),u.push(ho(m).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m=this.u,m!=null&&u.push(":",String(m))),(m=this.h)&&(this.g&&m.charAt(0)!="/"&&u.push("/"),u.push(_o(m,m.charAt(0)=="/"?TE:wE,!0))),(m=this.i.toString())&&u.push("?",m),(m=this.m)&&u.push("#",_o(m,IE)),u.join("")},Ts.prototype.resolve=function(u){const g=Cn(this);let m=!!u.j;m?po(g,u.j):m=!!u.o,m?g.o=u.o:m=!!u.g,m?g.g=u.g:m=u.u!=null;var S=u.h;if(m)go(g,u.u);else if(m=!!u.h){if(S.charAt(0)!="/")if(this.g&&!this.h)S="/"+S;else{var N=g.h.lastIndexOf("/");N!=-1&&(S=g.h.slice(0,N+1)+S)}if(N=S,N==".."||N==".")S="";else if(N.indexOf("./")!=-1||N.indexOf("/.")!=-1){S=N.lastIndexOf("/",0)==0,N=N.split("/");const F=[];for(let X=0;X<N.length;){const vt=N[X++];vt=="."?S&&X==N.length&&F.push(""):vt==".."?((F.length>1||F.length==1&&F[0]!="")&&F.pop(),S&&X==N.length&&F.push("")):(F.push(vt),S=!0)}S=F.join("/")}else S=N}return m?g.h=S:m=u.i.toString()!=="",m?Vu(g,$p(u.i)):m=!!u.m,m&&(g.m=u.m),g};function Cn(u){return new Ts(u)}function po(u,g,m){u.j=m?mo(g,!0):g,u.j&&(u.j=u.j.replace(/:$/,""))}function go(u,g){if(g){if(g=Number(g),isNaN(g)||g<0)throw Error("Bad port number "+g);u.u=g}else u.u=null}function Vu(u,g,m){g instanceof yo?(u.i=g,SE(u.i,u.l)):(m||(g=_o(g,EE)),u.i=new yo(g,u.l))}function Wt(u,g,m){u.i.set(g,m)}function Ya(u){return Wt(u,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),u}function mo(u,g){return u?g?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function _o(u,g,m){return typeof u=="string"?(u=encodeURI(u).replace(g,bE),m&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function bE(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var Lp=/[#\/\?@]/g,wE=/[#\?:]/g,TE=/[#\?]/g,EE=/[#\?@]/g,IE=/#/g;function yo(u,g){this.h=this.g=null,this.i=u||null,this.j=!!g}function ui(u){u.g||(u.g=new Map,u.h=0,u.i&&vE(u.i,function(g,m){u.add(decodeURIComponent(g.replace(/\+/g," ")),m)}))}e=yo.prototype,e.add=function(u,g){ui(this),this.i=null,u=nr(this,u);let m=this.g.get(u);return m||this.g.set(u,m=[]),m.push(g),this.h+=1,this};function Np(u,g){ui(u),g=nr(u,g),u.g.has(g)&&(u.i=null,u.h-=u.g.get(g).length,u.g.delete(g))}function Vp(u,g){return ui(u),g=nr(u,g),u.g.has(g)}e.forEach=function(u,g){ui(this),this.g.forEach(function(m,S){m.forEach(function(N){u.call(g,N,S,this)},this)},this)};function Fp(u,g){ui(u);let m=[];if(typeof g=="string")Vp(u,g)&&(m=m.concat(u.g.get(nr(u,g))));else for(u=Array.from(u.g.values()),g=0;g<u.length;g++)m=m.concat(u[g]);return m}e.set=function(u,g){return ui(this),this.i=null,u=nr(this,u),Vp(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[g]),this.h+=1,this},e.get=function(u,g){return u?(u=Fp(this,u),u.length>0?String(u[0]):g):g};function Up(u,g,m){Np(u,g),m.length>0&&(u.i=null,u.g.set(nr(u,g),p(m)),u.h+=m.length)}e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],g=Array.from(this.g.keys());for(let S=0;S<g.length;S++){var m=g[S];const N=ho(m);m=Fp(this,m);for(let F=0;F<m.length;F++){let X=N;m[F]!==""&&(X+="="+ho(m[F])),u.push(X)}}return this.i=u.join("&")};function $p(u){const g=new yo;return g.i=u.i,u.g&&(g.g=new Map(u.g),g.h=u.h),g}function nr(u,g){return g=String(g),u.j&&(g=g.toLowerCase()),g}function SE(u,g){g&&!u.j&&(ui(u),u.i=null,u.g.forEach(function(m,S){const N=S.toLowerCase();S!=N&&(Np(this,S),Up(this,N,m))},u)),u.j=g}function AE(u,g){const m=new uo;if(o.Image){const S=new Image;S.onload=h(Es,m,"TestLoadImage: loaded",!0,g,S),S.onerror=h(Es,m,"TestLoadImage: error",!1,g,S),S.onabort=h(Es,m,"TestLoadImage: abort",!1,g,S),S.ontimeout=h(Es,m,"TestLoadImage: timeout",!1,g,S),o.setTimeout(function(){S.ontimeout&&S.ontimeout()},1e4),S.src=u}else g(!1)}function kE(u,g){const m=new uo,S=new AbortController,N=setTimeout(()=>{S.abort(),Es(m,"TestPingServer: timeout",!1,g)},1e4);fetch(u,{signal:S.signal}).then(F=>{clearTimeout(N),F.ok?Es(m,"TestPingServer: ok",!0,g):Es(m,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout(N),Es(m,"TestPingServer: error",!1,g)})}function Es(u,g,m,S,N){try{N&&(N.onload=null,N.onerror=null,N.onabort=null,N.ontimeout=null),S(m)}catch{}}function CE(){this.g=new Ce}function Fu(u){this.i=u.Sb||null,this.h=u.ab||!1}d(Fu,le),Fu.prototype.g=function(){return new Xa(this.i,this.h)};function Xa(u,g){Q.call(this),this.H=u,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}d(Xa,Q),e=Xa.prototype,e.open=function(u,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=u,this.D=g,this.readyState=1,bo(this)},e.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const g={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};u&&(g.body=u),(this.H||o).fetch(new Request(this.D,g)).then(this.Pa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,vo(this)),this.readyState=0},e.Pa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,bo(this)),this.g&&(this.readyState=3,bo(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Bp(this)}else u.text().then(this.Oa.bind(this),this.ga.bind(this))};function Bp(u){u.j.read().then(u.Ma.bind(u)).catch(u.ga.bind(u))}e.Ma=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var g=u.value?u.value:new Uint8Array(0);(g=this.B.decode(g,{stream:!u.done}))&&(this.response=this.responseText+=g)}u.done?vo(this):bo(this),this.readyState==3&&Bp(this)}},e.Oa=function(u){this.g&&(this.response=this.responseText=u,vo(this))},e.Na=function(u){this.g&&(this.response=u,vo(this))},e.ga=function(){this.g&&vo(this)};function vo(u){u.readyState=4,u.l=null,u.j=null,u.B=null,bo(u)}e.setRequestHeader=function(u,g){this.A.append(u,g)},e.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],g=this.h.entries();for(var m=g.next();!m.done;)m=m.value,u.push(m[0]+": "+m[1]),m=g.next();return u.join(`\r
`)};function bo(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Xa.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function Hp(u){let g="";return Ct(u,function(m,S){g+=S,g+=":",g+=m,g+=`\r
`}),g}function Uu(u,g,m){t:{for(S in m){var S=!1;break t}S=!0}S||(m=Hp(m),typeof u=="string"?m!=null&&ho(m):Wt(u,g,m))}function Jt(u){Q.call(this),this.headers=new Map,this.L=u||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}d(Jt,Q);var xE=/^https?$/i,RE=["POST","PUT"];e=Jt.prototype,e.Fa=function(u){this.H=u},e.ea=function(u,g,m,S){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);g=g?g.toUpperCase():"GET",this.D=u,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Ep.g(),this.g.onreadystatechange=f(c(this.Ca,this));try{this.B=!0,this.g.open(g,String(u),!0),this.B=!1}catch(F){jp(this,F);return}if(u=m||"",m=new Map(this.headers),S)if(Object.getPrototypeOf(S)===Object.prototype)for(var N in S)m.set(N,S[N]);else if(typeof S.keys=="function"&&typeof S.get=="function")for(const F of S.keys())m.set(F,S.get(F));else throw Error("Unknown input type for opt_headers: "+String(S));S=Array.from(m.keys()).find(F=>F.toLowerCase()=="content-type"),N=o.FormData&&u instanceof o.FormData,!(Array.prototype.indexOf.call(RE,g,void 0)>=0)||S||N||m.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[F,X]of m)this.g.setRequestHeader(F,X);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(u),this.v=!1}catch(F){jp(this,F)}};function jp(u,g){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=g,u.o=5,zp(u),Ja(u)}function zp(u){u.A||(u.A=!0,K(u,"complete"),K(u,"error"))}e.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=u||7,K(this,"complete"),K(this,"abort"),Ja(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ja(this,!0)),Jt.Z.N.call(this)},e.Ca=function(){this.u||(this.B||this.v||this.j?Wp(this):this.Xa())},e.Xa=function(){Wp(this)};function Wp(u){if(u.h&&typeof r<"u"){if(u.v&&Is(u)==4)setTimeout(u.Ca.bind(u),0);else if(K(u,"readystatechange"),Is(u)==4){u.h=!1;try{const F=u.ca();t:switch(F){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break t;default:g=!1}var m;if(!(m=g)){var S;if(S=F===0){let X=String(u.D).match(Op)[1]||null;!X&&o.self&&o.self.location&&(X=o.self.location.protocol.slice(0,-1)),S=!xE.test(X?X.toLowerCase():"")}m=S}if(m)K(u,"complete"),K(u,"success");else{u.o=6;try{var N=Is(u)>2?u.g.statusText:""}catch{N=""}u.l=N+" ["+u.ca()+"]",zp(u)}}finally{Ja(u)}}}}function Ja(u,g){if(u.g){u.m&&(clearTimeout(u.m),u.m=null);const m=u.g;u.g=null,g||K(u,"ready");try{m.onreadystatechange=null}catch{}}}e.isActive=function(){return!!this.g};function Is(u){return u.g?u.g.readyState:0}e.ca=function(){try{return Is(this)>2?this.g.status:-1}catch{return-1}},e.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},e.La=function(u){if(this.g){var g=this.g.responseText;return u&&g.indexOf(u)==0&&(g=g.substring(u.length)),xt(g)}};function qp(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.F){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function PE(u){const g={};u=(u.g&&Is(u)>=2&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let S=0;S<u.length;S++){if(C(u[S]))continue;var m=gE(u[S]);const N=m[0];if(m=m[1],typeof m!="string")continue;m=m.trim();const F=g[N]||[];g[N]=F,F.push(m)}Ye(g,function(S){return S.join(", ")})}e.ya=function(){return this.o},e.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function wo(u,g,m){return m&&m.internalChannelParams&&m.internalChannelParams[u]||g}function Gp(u){this.za=0,this.i=[],this.j=new uo,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=wo("failFast",!1,u),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=wo("baseRetryDelayMs",5e3,u),this.Za=wo("retryDelaySeedMs",1e4,u),this.Ta=wo("forwardChannelMaxRetries",2,u),this.va=wo("forwardChannelRequestTimeoutMs",2e4,u),this.ma=u&&u.xmlHttpFactory||void 0,this.Ua=u&&u.Rb||void 0,this.Aa=u&&u.useFetchStreams||!1,this.O=void 0,this.L=u&&u.supportsCrossDomainXhr||!1,this.M="",this.h=new xp(u&&u.concurrentRequestLimit),this.Ba=new CE,this.S=u&&u.fastHandshake||!1,this.R=u&&u.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=u&&u.Pb||!1,u&&u.ua&&this.j.ua(),u&&u.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&u&&u.detectBufferingProxy||!1,this.ia=void 0,u&&u.longPollingTimeout&&u.longPollingTimeout>0&&(this.ia=u.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}e=Gp.prototype,e.ka=8,e.I=1,e.connect=function(u,g,m,S){Ue(0),this.W=u,this.H=g||{},m&&S!==void 0&&(this.H.OSID=m,this.H.OAID=S),this.F=this.X,this.J=ng(this,null,this.W),tl(this)};function $u(u){if(Kp(u),u.I==3){var g=u.V++,m=Cn(u.J);if(Wt(m,"SID",u.M),Wt(m,"RID",g),Wt(m,"TYPE","terminate"),To(u,m),g=new ws(u,u.j,g),g.M=2,g.A=Ya(Cn(m)),m=!1,o.navigator&&o.navigator.sendBeacon)try{m=o.navigator.sendBeacon(g.A.toString(),"")}catch{}!m&&o.Image&&(new Image().src=g.A,m=!0),m||(g.g=sg(g.j,null),g.g.ea(g.A)),g.F=Date.now(),Qa(g)}eg(u)}function Za(u){u.g&&(Hu(u),u.g.cancel(),u.g=null)}function Kp(u){Za(u),u.v&&(o.clearTimeout(u.v),u.v=null),el(u),u.h.cancel(),u.m&&(typeof u.m=="number"&&o.clearTimeout(u.m),u.m=null)}function tl(u){if(!Rp(u.h)&&!u.m){u.m=!0;var g=u.Ea;O||b(),V||(O(),V=!0),A.add(g,u),u.D=0}}function ME(u,g){return Pp(u.h)>=u.h.j-(u.m?1:0)?!1:u.m?(u.i=g.G.concat(u.i),!0):u.I==1||u.I==2||u.D>=(u.Sa?0:u.Ta)?!1:(u.m=co(c(u.Ea,u,g),tg(u,u.D)),u.D++,!0)}e.Ea=function(u){if(this.m)if(this.m=null,this.I==1){if(!u){this.V=Math.floor(Math.random()*1e5),u=this.V++;const N=new ws(this,this.j,u);let F=this.o;if(this.U&&(F?(F=Fe(F),gn(F,this.U)):F=this.U),this.u!==null||this.R||(N.J=F,F=null),this.S)t:{for(var g=0,m=0;m<this.i.length;m++){e:{var S=this.i[m];if("__data__"in S.map&&(S=S.map.__data__,typeof S=="string")){S=S.length;break e}S=void 0}if(S===void 0)break;if(g+=S,g>4096){g=m;break t}if(g===4096||m===this.i.length-1){g=m+1;break t}}g=1e3}else g=1e3;g=Yp(this,N,g),m=Cn(this.J),Wt(m,"RID",u),Wt(m,"CVER",22),this.G&&Wt(m,"X-HTTP-Session-Id",this.G),To(this,m),F&&(this.R?g="headers="+ho(Hp(F))+"&"+g:this.u&&Uu(m,this.u,F)),Nu(this.h,N),this.Ra&&Wt(m,"TYPE","init"),this.S?(Wt(m,"$req",g),Wt(m,"SID","null"),N.U=!0,Mu(N,m,null)):Mu(N,m,g),this.I=2}}else this.I==3&&(u?Qp(this,u):this.i.length==0||Rp(this.h)||Qp(this))};function Qp(u,g){var m;g?m=g.l:m=u.V++;const S=Cn(u.J);Wt(S,"SID",u.M),Wt(S,"RID",m),Wt(S,"AID",u.K),To(u,S),u.u&&u.o&&Uu(S,u.u,u.o),m=new ws(u,u.j,m,u.D+1),u.u===null&&(m.J=u.o),g&&(u.i=g.G.concat(u.i)),g=Yp(u,m,1e3),m.H=Math.round(u.va*.5)+Math.round(u.va*.5*Math.random()),Nu(u.h,m),Mu(m,S,g)}function To(u,g){u.H&&Ct(u.H,function(m,S){Wt(g,S,m)}),u.l&&Ct({},function(m,S){Wt(g,S,m)})}function Yp(u,g,m){m=Math.min(u.i.length,m);const S=u.l?c(u.l.Ka,u.l,u):null;t:{var N=u.i;let vt=-1;for(;;){const ue=["count="+m];vt==-1?m>0?(vt=N[0].g,ue.push("ofs="+vt)):vt=0:ue.push("ofs="+vt);let Ft=!0;for(let ge=0;ge<m;ge++){var F=N[ge].g;const xn=N[ge].map;if(F-=vt,F<0)vt=Math.max(0,N[ge].g-100),Ft=!1;else try{F="req"+F+"_"||"";try{var X=xn instanceof Map?xn:Object.entries(xn);for(const[di,Ss]of X){let As=Ss;a(Ss)&&(As=Mt(Ss)),ue.push(F+di+"="+encodeURIComponent(As))}}catch(di){throw ue.push(F+"type="+encodeURIComponent("_badmap")),di}}catch{S&&S(xn)}}if(Ft){X=ue.join("&");break t}}X=void 0}return u=u.i.splice(0,m),g.G=u,X}function Xp(u){if(!u.g&&!u.v){u.Y=1;var g=u.Da;O||b(),V||(O(),V=!0),A.add(g,u),u.A=0}}function Bu(u){return u.g||u.v||u.A>=3?!1:(u.Y++,u.v=co(c(u.Da,u),tg(u,u.A)),u.A++,!0)}e.Da=function(){if(this.v=null,Jp(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var u=4*this.T;this.j.info("BP detection timer enabled: "+u),this.B=co(c(this.Wa,this),u)}},e.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Ue(10),Za(this),Jp(this))};function Hu(u){u.B!=null&&(o.clearTimeout(u.B),u.B=null)}function Jp(u){u.g=new ws(u,u.j,"rpc",u.Y),u.u===null&&(u.g.J=u.o),u.g.P=0;var g=Cn(u.na);Wt(g,"RID","rpc"),Wt(g,"SID",u.M),Wt(g,"AID",u.K),Wt(g,"CI",u.F?"0":"1"),!u.F&&u.ia&&Wt(g,"TO",u.ia),Wt(g,"TYPE","xmlhttp"),To(u,g),u.u&&u.o&&Uu(g,u.u,u.o),u.O&&(u.g.H=u.O);var m=u.g;u=u.ba,m.M=1,m.A=Ya(Cn(g)),m.u=null,m.R=!0,Ap(m,u)}e.Va=function(){this.C!=null&&(this.C=null,Za(this),Bu(this),Ue(19))};function el(u){u.C!=null&&(o.clearTimeout(u.C),u.C=null)}function Zp(u,g){var m=null;if(u.g==g){el(u),Hu(u),u.g=null;var S=2}else if(Lu(u.h,g))m=g.G,Mp(u.h,g),S=1;else return;if(u.I!=0){if(g.o)if(S==1){m=g.u?g.u.length:0,g=Date.now()-g.F;var N=u.D;S=li(),K(S,new wp(S,m)),tl(u)}else Xp(u);else if(N=g.m,N==3||N==0&&g.X>0||!(S==1&&ME(u,g)||S==2&&Bu(u)))switch(m&&m.length>0&&(g=u.h,g.i=g.i.concat(m)),N){case 1:hi(u,5);break;case 4:hi(u,10);break;case 3:hi(u,6);break;default:hi(u,2)}}}function tg(u,g){let m=u.Qa+Math.floor(Math.random()*u.Za);return u.isActive()||(m*=2),m*g}function hi(u,g){if(u.j.info("Error code "+g),g==2){var m=c(u.bb,u),S=u.Ua;const N=!S;S=new Ts(S||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||po(S,"https"),Ya(S),N?AE(S.toString(),m):kE(S.toString(),m)}else Ue(2);u.I=0,u.l&&u.l.pa(g),eg(u),Kp(u)}e.bb=function(u){u?(this.j.info("Successfully pinged google.com"),Ue(2)):(this.j.info("Failed to ping google.com"),Ue(1))};function eg(u){if(u.I=0,u.ja=[],u.l){const g=Dp(u.h);(g.length!=0||u.i.length!=0)&&(_(u.ja,g),_(u.ja,u.i),u.h.i.length=0,p(u.i),u.i.length=0),u.l.oa()}}function ng(u,g,m){var S=m instanceof Ts?Cn(m):new Ts(m);if(S.g!="")g&&(S.g=g+"."+S.g),go(S,S.u);else{var N=o.location;S=N.protocol,g=g?g+"."+N.hostname:N.hostname,N=+N.port;const F=new Ts(null);S&&po(F,S),g&&(F.g=g),N&&go(F,N),m&&(F.h=m),S=F}return m=u.G,g=u.wa,m&&g&&Wt(S,m,g),Wt(S,"VER",u.ka),To(u,S),S}function sg(u,g,m){if(g&&!u.L)throw Error("Can't create secondary domain capable XhrIo object.");return g=u.Aa&&!u.ma?new Jt(new Fu({ab:m})):new Jt(u.ma),g.Fa(u.L),g}e.isActive=function(){return!!this.l&&this.l.isActive(this)};function ig(){}e=ig.prototype,e.ra=function(){},e.qa=function(){},e.pa=function(){},e.oa=function(){},e.isActive=function(){return!0},e.Ka=function(){};function nl(){}nl.prototype.g=function(u,g){return new Je(u,g)};function Je(u,g){Q.call(this),this.g=new Gp(g),this.l=u,this.h=g&&g.messageUrlParams||null,u=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(u?u["X-WebChannel-Content-Type"]=g.messageContentType:u={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.sa&&(u?u["X-WebChannel-Client-Profile"]=g.sa:u={"X-WebChannel-Client-Profile":g.sa}),this.g.U=u,(u=g&&g.Qb)&&!C(u)&&(this.g.u=u),this.A=g&&g.supportsCrossDomainXhr||!1,this.v=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!C(g)&&(this.g.G=g,u=this.h,u!==null&&g in u&&(u=this.h,g in u&&delete u[g])),this.j=new sr(this)}d(Je,Q),Je.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Je.prototype.close=function(){$u(this.g)},Je.prototype.o=function(u){var g=this.g;if(typeof u=="string"){var m={};m.__data__=u,u=m}else this.v&&(m={},m.__data__=Mt(u),u=m);g.i.push(new yE(g.Ya++,u)),g.I==3&&tl(g)},Je.prototype.N=function(){this.g.l=null,delete this.j,$u(this.g),delete this.g,Je.Z.N.call(this)};function rg(u){Kn.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var g=u.__sm__;if(g){t:{for(const m in g){u=m;break t}u=void 0}(this.i=u)&&(u=this.i,g=g!==null&&u in g?g[u]:void 0),this.data=g}else this.data=u}d(rg,Kn);function og(){tr.call(this),this.status=1}d(og,tr);function sr(u){this.g=u}d(sr,ig),sr.prototype.ra=function(){K(this.g,"a")},sr.prototype.qa=function(u){K(this.g,new rg(u))},sr.prototype.pa=function(u){K(this.g,new og)},sr.prototype.oa=function(){K(this.g,"b")},nl.prototype.createWebChannel=nl.prototype.g,Je.prototype.send=Je.prototype.o,Je.prototype.open=Je.prototype.m,Je.prototype.close=Je.prototype.close,Y0=function(){return new nl},Q0=function(){return li()},K0=te,ld={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Ka.NO_ERROR=0,Ka.TIMEOUT=8,Ka.HTTP_ERROR=6,jl=Ka,Tp.COMPLETE="complete",G0=Tp,je.EventType=ce,ce.OPEN="a",ce.CLOSE="b",ce.ERROR="c",ce.MESSAGE="d",Q.prototype.listen=Q.prototype.J,Oo=je,Jt.prototype.listenOnce=Jt.prototype.K,Jt.prototype.getLastError=Jt.prototype.Ha,Jt.prototype.getLastErrorCode=Jt.prototype.ya,Jt.prototype.getStatus=Jt.prototype.ca,Jt.prototype.getResponseJson=Jt.prototype.La,Jt.prototype.getResponseText=Jt.prototype.la,Jt.prototype.send=Jt.prototype.ea,Jt.prototype.setWithCredentials=Jt.prototype.Fa,q0=Jt}).apply(typeof ml<"u"?ml:typeof self<"u"?self:typeof window<"u"?window:{});const qm="@firebase/firestore",Gm="4.9.3";class Me{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}Me.UNAUTHENTICATED=new Me(null),Me.GOOGLE_CREDENTIALS=new Me("google-credentials-uid"),Me.FIRST_PARTY=new Me("first-party-uid"),Me.MOCK_USER=new Me("mock-user");let to="12.7.0";const ji=new _f("@firebase/firestore");function cr(){return ji.logLevel}function nt(e,...t){if(ji.logLevel<=Tt.DEBUG){const n=t.map(Cf);ji.debug(`Firestore (${to}): ${e}`,...n)}}function fs(e,...t){if(ji.logLevel<=Tt.ERROR){const n=t.map(Cf);ji.error(`Firestore (${to}): ${e}`,...n)}}function zi(e,...t){if(ji.logLevel<=Tt.WARN){const n=t.map(Cf);ji.warn(`Firestore (${to}): ${e}`,...n)}}function Cf(e){if(typeof e=="string")return e;try{return(function(n){return JSON.stringify(n)})(e)}catch{return e}}function gt(e,t,n){let s="Unexpected state";typeof t=="string"?s=t:n=t,X0(e,s,n)}function X0(e,t,n){let s=`FIRESTORE (${to}) INTERNAL ASSERTION FAILED: ${t} (ID: ${e.toString(16)})`;if(n!==void 0)try{s+=" CONTEXT: "+JSON.stringify(n)}catch{s+=" CONTEXT: "+n}throw fs(s),new Error(s)}function Ot(e,t,n,s){let i="Unexpected state";typeof n=="string"?i=n:s=n,e||X0(t,i,s)}function yt(e,t){return e}const j={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class it extends _s{constructor(t,n){super(t,n),this.code=t,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class qs{constructor(){this.promise=new Promise(((t,n)=>{this.resolve=t,this.reject=n}))}}class J0{constructor(t,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class Z0{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,n){t.enqueueRetryable((()=>n(Me.UNAUTHENTICATED)))}shutdown(){}}class _2{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,n){this.changeListener=n,t.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class y2{constructor(t){this.t=t,this.currentUser=Me.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,n){Ot(this.o===void 0,42304);let s=this.i;const i=l=>this.i!==s?(s=this.i,n(l)):Promise.resolve();let r=new qs;this.o=()=>{this.i++,this.currentUser=this.u(),r.resolve(),r=new qs,t.enqueueRetryable((()=>i(this.currentUser)))};const o=()=>{const l=r;t.enqueueRetryable((async()=>{await l.promise,await i(this.currentUser)}))},a=l=>{nt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit((l=>a(l))),setTimeout((()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(nt("FirebaseAuthCredentialsProvider","Auth not yet detected"),r.resolve(),r=new qs)}}),0),o()}getToken(){const t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((s=>this.i!==t?(nt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(Ot(typeof s.accessToken=="string",31837,{l:s}),new J0(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return Ot(t===null||typeof t=="string",2055,{h:t}),new Me(t)}}class v2{constructor(t,n,s){this.P=t,this.T=n,this.I=s,this.type="FirstParty",this.user=Me.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const t=this.R();return t&&this.A.set("Authorization",t),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class b2{constructor(t,n,s){this.P=t,this.T=n,this.I=s}getToken(){return Promise.resolve(new v2(this.P,this.T,this.I))}start(t,n){t.enqueueRetryable((()=>n(Me.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Km{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class w2{constructor(t,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,cn(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,n){Ot(this.o===void 0,3512);const s=r=>{r.error!=null&&nt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${r.error.message}`);const o=r.token!==this.m;return this.m=r.token,nt("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(r.token):Promise.resolve()};this.o=r=>{t.enqueueRetryable((()=>s(r)))};const i=r=>{nt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=r,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((r=>i(r))),setTimeout((()=>{if(!this.appCheck){const r=this.V.getImmediate({optional:!0});r?i(r):nt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new Km(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((n=>n?(Ot(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new Km(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function T2(e){const t=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(n);else for(let s=0;s<e;s++)n[s]=Math.floor(256*Math.random());return n}class au{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const i=T2(40);for(let r=0;r<i.length;++r)s.length<20&&i[r]<n&&(s+=t.charAt(i[r]%62))}return s}}function Et(e,t){return e<t?-1:e>t?1:0}function cd(e,t){const n=Math.min(e.length,t.length);for(let s=0;s<n;s++){const i=e.charAt(s),r=t.charAt(s);if(i!==r)return mh(i)===mh(r)?Et(i,r):mh(i)?1:-1}return Et(e.length,t.length)}const E2=55296,I2=57343;function mh(e){const t=e.charCodeAt(0);return t>=E2&&t<=I2}function Vr(e,t,n){return e.length===t.length&&e.every(((s,i)=>n(s,t[i])))}const Qm="__name__";class Ln{constructor(t,n,s){n===void 0?n=0:n>t.length&&gt(637,{offset:n,range:t.length}),s===void 0?s=t.length-n:s>t.length-n&&gt(1746,{length:s,range:t.length-n}),this.segments=t,this.offset=n,this.len=s}get length(){return this.len}isEqual(t){return Ln.comparator(this,t)===0}child(t){const n=this.segments.slice(this.offset,this.limit());return t instanceof Ln?t.forEach((s=>{n.push(s)})):n.push(t),this.construct(n)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}forEach(t){for(let n=this.offset,s=this.limit();n<s;n++)t(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,n){const s=Math.min(t.length,n.length);for(let i=0;i<s;i++){const r=Ln.compareSegments(t.get(i),n.get(i));if(r!==0)return r}return Et(t.length,n.length)}static compareSegments(t,n){const s=Ln.isNumericId(t),i=Ln.isNumericId(n);return s&&!i?-1:!s&&i?1:s&&i?Ln.extractNumericId(t).compare(Ln.extractNumericId(n)):cd(t,n)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return Ws.fromString(t.substring(4,t.length-2))}}class Qt extends Ln{construct(t,n,s){return new Qt(t,n,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const n=[];for(const s of t){if(s.indexOf("//")>=0)throw new it(j.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);n.push(...s.split("/").filter((i=>i.length>0)))}return new Qt(n)}static emptyPath(){return new Qt([])}}const S2=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class _e extends Ln{construct(t,n,s){return new _e(t,n,s)}static isValidIdentifier(t){return S2.test(t)}canonicalString(){return this.toArray().map((t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),_e.isValidIdentifier(t)||(t="`"+t+"`"),t))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Qm}static keyField(){return new _e([Qm])}static fromServerFormat(t){const n=[];let s="",i=0;const r=()=>{if(s.length===0)throw new it(j.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(s),s=""};let o=!1;for(;i<t.length;){const a=t[i];if(a==="\\"){if(i+1===t.length)throw new it(j.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const l=t[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new it(j.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);s+=l,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(s+=a,i++):(r(),i++)}if(r(),o)throw new it(j.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new _e(n)}static emptyPath(){return new _e([])}}class ut{constructor(t){this.path=t}static fromPath(t){return new ut(Qt.fromString(t))}static fromName(t){return new ut(Qt.fromString(t).popFirst(5))}static empty(){return new ut(Qt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&Qt.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,n){return Qt.comparator(t.path,n.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new ut(new Qt(t.slice()))}}function A2(e,t,n){if(!n)throw new it(j.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function tw(e,t,n,s){if(t===!0&&s===!0)throw new it(j.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)}function Ym(e){if(!ut.isDocumentKey(e))throw new it(j.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function ew(e){return typeof e=="object"&&e!==null&&(Object.getPrototypeOf(e)===Object.prototype||Object.getPrototypeOf(e)===null)}function xf(e){if(e===void 0)return"undefined";if(e===null)return"null";if(typeof e=="string")return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if(typeof e=="number"||typeof e=="boolean")return""+e;if(typeof e=="object"){if(e instanceof Array)return"an array";{const t=(function(s){return s.constructor?s.constructor.name:null})(e);return t?`a custom ${t} object`:"an object"}}return typeof e=="function"?"a function":gt(12329,{type:typeof e})}function Xs(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new it(j.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=xf(e);throw new it(j.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}function re(e,t){const n={typeString:e};return t&&(n.value=t),n}function $a(e,t){if(!ew(e))throw new it(j.INVALID_ARGUMENT,"JSON must be an object");let n;for(const s in t)if(t[s]){const i=t[s].typeString,r="value"in t[s]?{value:t[s].value}:void 0;if(!(s in e)){n=`JSON missing required field: '${s}'`;break}const o=e[s];if(i&&typeof o!==i){n=`JSON field '${s}' must be a ${i}.`;break}if(r!==void 0&&o!==r.value){n=`Expected '${s}' field to equal '${r.value}'`;break}}if(n)throw new it(j.INVALID_ARGUMENT,n);return!0}const Xm=-62135596800,Jm=1e6;class jt{static now(){return jt.fromMillis(Date.now())}static fromDate(t){return jt.fromMillis(t.getTime())}static fromMillis(t){const n=Math.floor(t/1e3),s=Math.floor((t-1e3*n)*Jm);return new jt(n,s)}constructor(t,n){if(this.seconds=t,this.nanoseconds=n,n<0)throw new it(j.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new it(j.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<Xm)throw new it(j.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new it(j.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Jm}_compareTo(t){return this.seconds===t.seconds?Et(this.nanoseconds,t.nanoseconds):Et(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:jt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(t){if($a(t,jt._jsonSchema))return new jt(t.seconds,t.nanoseconds)}valueOf(){const t=this.seconds-Xm;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}jt._jsonSchemaVersion="firestore/timestamp/1.0",jt._jsonSchema={type:re("string",jt._jsonSchemaVersion),seconds:re("number"),nanoseconds:re("number")};class _t{static fromTimestamp(t){return new _t(t)}static min(){return new _t(new jt(0,0))}static max(){return new _t(new jt(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const ma=-1;function k2(e,t){const n=e.toTimestamp().seconds,s=e.toTimestamp().nanoseconds+1,i=_t.fromTimestamp(s===1e9?new jt(n+1,0):new jt(n,s));return new Js(i,ut.empty(),t)}function C2(e){return new Js(e.readTime,e.key,ma)}class Js{constructor(t,n,s){this.readTime=t,this.documentKey=n,this.largestBatchId=s}static min(){return new Js(_t.min(),ut.empty(),ma)}static max(){return new Js(_t.max(),ut.empty(),ma)}}function x2(e,t){let n=e.readTime.compareTo(t.readTime);return n!==0?n:(n=ut.comparator(e.documentKey,t.documentKey),n!==0?n:Et(e.largestBatchId,t.largestBatchId))}const R2="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class P2{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((t=>t()))}}async function eo(e){if(e.code!==j.FAILED_PRECONDITION||e.message!==R2)throw e;nt("LocalStore","Unexpectedly lost primary lease")}class ${constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(t){return this.next(void 0,t)}next(t,n){return this.callbackAttached&&gt(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new $(((s,i)=>{this.nextCallback=r=>{this.wrapSuccess(t,r).next(s,i)},this.catchCallback=r=>{this.wrapFailure(n,r).next(s,i)}}))}toPromise(){return new Promise(((t,n)=>{this.next(t,n)}))}wrapUserFunction(t){try{const n=t();return n instanceof $?n:$.resolve(n)}catch(n){return $.reject(n)}}wrapSuccess(t,n){return t?this.wrapUserFunction((()=>t(n))):$.resolve(n)}wrapFailure(t,n){return t?this.wrapUserFunction((()=>t(n))):$.reject(n)}static resolve(t){return new $(((n,s)=>{n(t)}))}static reject(t){return new $(((n,s)=>{s(t)}))}static waitFor(t){return new $(((n,s)=>{let i=0,r=0,o=!1;t.forEach((a=>{++i,a.next((()=>{++r,o&&r===i&&n()}),(l=>s(l)))})),o=!0,r===i&&n()}))}static or(t){let n=$.resolve(!1);for(const s of t)n=n.next((i=>i?$.resolve(i):s()));return n}static forEach(t,n){const s=[];return t.forEach(((i,r)=>{s.push(n.call(this,i,r))})),this.waitFor(s)}static mapArray(t,n){return new $(((s,i)=>{const r=t.length,o=new Array(r);let a=0;for(let l=0;l<r;l++){const c=l;n(t[c]).next((h=>{o[c]=h,++a,a===r&&s(o)}),(h=>i(h)))}}))}static doWhile(t,n){return new $(((s,i)=>{const r=()=>{t()===!0?n().next((()=>{r()}),i):s()};r()}))}}function M2(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function no(e){return e.name==="IndexedDbTransactionError"}class lu{constructor(t,n){this.previousValue=t,n&&(n.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>n.writeSequenceNumber(s))}ae(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ue&&this.ue(t),t}}lu.ce=-1;const Rf=-1;function cu(e){return e==null}function vc(e){return e===0&&1/e==-1/0}function D2(e){return typeof e=="number"&&Number.isInteger(e)&&!vc(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}const nw="";function O2(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=Zm(t)),t=L2(e.get(n),t);return Zm(t)}function L2(e,t){let n=t;const s=e.length;for(let i=0;i<s;i++){const r=e.charAt(i);switch(r){case"\0":n+="";break;case nw:n+="";break;default:n+=r}}return n}function Zm(e){return e+nw+""}function t_(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function ri(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function sw(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class Xt{constructor(t,n){this.comparator=t,this.root=n||Ie.EMPTY}insert(t,n){return new Xt(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,Ie.BLACK,null,null))}remove(t){return new Xt(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Ie.BLACK,null,null))}get(t){let n=this.root;for(;!n.isEmpty();){const s=this.comparator(t,n.key);if(s===0)return n.value;s<0?n=n.left:s>0&&(n=n.right)}return null}indexOf(t){let n=0,s=this.root;for(;!s.isEmpty();){const i=this.comparator(t,s.key);if(i===0)return n+s.left.size;i<0?s=s.left:(n+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal(((n,s)=>(t(n,s),!1)))}toString(){const t=[];return this.inorderTraversal(((n,s)=>(t.push(`${n}:${s}`),!1))),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new _l(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new _l(this.root,t,this.comparator,!1)}getReverseIterator(){return new _l(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new _l(this.root,t,this.comparator,!0)}}class _l{constructor(t,n,s,i){this.isReverse=i,this.nodeStack=[];let r=1;for(;!t.isEmpty();)if(r=n?s(t.key,n):1,n&&i&&(r*=-1),r<0)t=this.isReverse?t.left:t.right;else{if(r===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const n={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class Ie{constructor(t,n,s,i,r){this.key=t,this.value=n,this.color=s??Ie.RED,this.left=i??Ie.EMPTY,this.right=r??Ie.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,n,s,i,r){return new Ie(t??this.key,n??this.value,s??this.color,i??this.left,r??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,n,s){let i=this;const r=s(t,i.key);return i=r<0?i.copy(null,null,null,i.left.insert(t,n,s),null):r===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(t,n,s)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Ie.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,n){let s,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(t,i.key)===0){if(i.right.isEmpty())return Ie.EMPTY;s=i.right.min(),i=i.copy(s.key,s.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,Ie.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,Ie.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw gt(43730,{key:this.key,value:this.value});if(this.right.isRed())throw gt(14113,{key:this.key,value:this.value});const t=this.left.check();if(t!==this.right.check())throw gt(27949);return t+(this.isRed()?0:1)}}Ie.EMPTY=null,Ie.RED=!0,Ie.BLACK=!1;Ie.EMPTY=new class{constructor(){this.size=0}get key(){throw gt(57766)}get value(){throw gt(16141)}get color(){throw gt(16727)}get left(){throw gt(29726)}get right(){throw gt(36894)}copy(t,n,s,i,r){return this}insert(t,n,s){return new Ie(t,n)}remove(t,n){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class fe{constructor(t){this.comparator=t,this.data=new Xt(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal(((n,s)=>(t(n),!1)))}forEachInRange(t,n){const s=this.data.getIteratorFrom(t[0]);for(;s.hasNext();){const i=s.getNext();if(this.comparator(i.key,t[1])>=0)return;n(i.key)}}forEachWhile(t,n){let s;for(s=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();s.hasNext();)if(!t(s.getNext().key))return}firstAfterOrEqual(t){const n=this.data.getIteratorFrom(t);return n.hasNext()?n.getNext().key:null}getIterator(){return new e_(this.data.getIterator())}getIteratorFrom(t){return new e_(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let n=this;return n.size<t.size&&(n=t,t=this),t.forEach((s=>{n=n.add(s)})),n}isEqual(t){if(!(t instanceof fe)||this.size!==t.size)return!1;const n=this.data.getIterator(),s=t.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,r=s.getNext().key;if(this.comparator(i,r)!==0)return!1}return!0}toArray(){const t=[];return this.forEach((n=>{t.push(n)})),t}toString(){const t=[];return this.forEach((n=>t.push(n))),"SortedSet("+t.toString()+")"}copy(t){const n=new fe(this.comparator);return n.data=t,n}}class e_{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class en{constructor(t){this.fields=t,t.sort(_e.comparator)}static empty(){return new en([])}unionWith(t){let n=new fe(_e.comparator);for(const s of this.fields)n=n.add(s);for(const s of t)n=n.add(s);return new en(n.toArray())}covers(t){for(const n of this.fields)if(n.isPrefixOf(t))return!0;return!1}isEqual(t){return Vr(this.fields,t.fields,((n,s)=>n.isEqual(s)))}}class iw extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Te{constructor(t){this.binaryString=t}static fromBase64String(t){const n=(function(i){try{return atob(i)}catch(r){throw typeof DOMException<"u"&&r instanceof DOMException?new iw("Invalid base64 string: "+r):r}})(t);return new Te(n)}static fromUint8Array(t){const n=(function(i){let r="";for(let o=0;o<i.length;++o)r+=String.fromCharCode(i[o]);return r})(t);return new Te(n)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const s=new Uint8Array(n.length);for(let i=0;i<n.length;i++)s[i]=n.charCodeAt(i);return s})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return Et(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}Te.EMPTY_BYTE_STRING=new Te("");const N2=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Zs(e){if(Ot(!!e,39018),typeof e=="string"){let t=0;const n=N2.exec(e);if(Ot(!!n,46558,{timestamp:e}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),t=Number(i)}const s=new Date(e);return{seconds:Math.floor(s.getTime()/1e3),nanos:t}}return{seconds:ee(e.seconds),nanos:ee(e.nanos)}}function ee(e){return typeof e=="number"?e:typeof e=="string"?Number(e):0}function ti(e){return typeof e=="string"?Te.fromBase64String(e):Te.fromUint8Array(e)}const rw="server_timestamp",ow="__type__",aw="__previous_value__",lw="__local_write_time__";function Pf(e){return(e?.mapValue?.fields||{})[ow]?.stringValue===rw}function uu(e){const t=e.mapValue.fields[aw];return Pf(t)?uu(t):t}function _a(e){const t=Zs(e.mapValue.fields[lw].timestampValue);return new jt(t.seconds,t.nanos)}class V2{constructor(t,n,s,i,r,o,a,l,c,h){this.databaseId=t,this.appId=n,this.persistenceKey=s,this.host=i,this.ssl=r,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c,this.isUsingEmulator=h}}const bc="(default)";class Fr{constructor(t,n){this.projectId=t,this.database=n||bc}static empty(){return new Fr("","")}get isDefaultDatabase(){return this.database===bc}isEqual(t){return t instanceof Fr&&t.projectId===this.projectId&&t.database===this.database}}const cw="__type__",F2="__max__",yl={mapValue:{}},uw="__vector__",wc="value";function ei(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Pf(e)?4:$2(e)?9007199254740991:U2(e)?10:11:gt(28295,{value:e})}function Wn(e,t){if(e===t)return!0;const n=ei(e);if(n!==ei(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return _a(e).isEqual(_a(t));case 3:return(function(i,r){if(typeof i.timestampValue=="string"&&typeof r.timestampValue=="string"&&i.timestampValue.length===r.timestampValue.length)return i.timestampValue===r.timestampValue;const o=Zs(i.timestampValue),a=Zs(r.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos})(e,t);case 5:return e.stringValue===t.stringValue;case 6:return(function(i,r){return ti(i.bytesValue).isEqual(ti(r.bytesValue))})(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return(function(i,r){return ee(i.geoPointValue.latitude)===ee(r.geoPointValue.latitude)&&ee(i.geoPointValue.longitude)===ee(r.geoPointValue.longitude)})(e,t);case 2:return(function(i,r){if("integerValue"in i&&"integerValue"in r)return ee(i.integerValue)===ee(r.integerValue);if("doubleValue"in i&&"doubleValue"in r){const o=ee(i.doubleValue),a=ee(r.doubleValue);return o===a?vc(o)===vc(a):isNaN(o)&&isNaN(a)}return!1})(e,t);case 9:return Vr(e.arrayValue.values||[],t.arrayValue.values||[],Wn);case 10:case 11:return(function(i,r){const o=i.mapValue.fields||{},a=r.mapValue.fields||{};if(t_(o)!==t_(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!Wn(o[l],a[l])))return!1;return!0})(e,t);default:return gt(52216,{left:e})}}function ya(e,t){return(e.values||[]).find((n=>Wn(n,t)))!==void 0}function Ur(e,t){if(e===t)return 0;const n=ei(e),s=ei(t);if(n!==s)return Et(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return Et(e.booleanValue,t.booleanValue);case 2:return(function(r,o){const a=ee(r.integerValue||r.doubleValue),l=ee(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1})(e,t);case 3:return n_(e.timestampValue,t.timestampValue);case 4:return n_(_a(e),_a(t));case 5:return cd(e.stringValue,t.stringValue);case 6:return(function(r,o){const a=ti(r),l=ti(o);return a.compareTo(l)})(e.bytesValue,t.bytesValue);case 7:return(function(r,o){const a=r.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const h=Et(a[c],l[c]);if(h!==0)return h}return Et(a.length,l.length)})(e.referenceValue,t.referenceValue);case 8:return(function(r,o){const a=Et(ee(r.latitude),ee(o.latitude));return a!==0?a:Et(ee(r.longitude),ee(o.longitude))})(e.geoPointValue,t.geoPointValue);case 9:return s_(e.arrayValue,t.arrayValue);case 10:return(function(r,o){const a=r.fields||{},l=o.fields||{},c=a[wc]?.arrayValue,h=l[wc]?.arrayValue,d=Et(c?.values?.length||0,h?.values?.length||0);return d!==0?d:s_(c,h)})(e.mapValue,t.mapValue);case 11:return(function(r,o){if(r===yl.mapValue&&o===yl.mapValue)return 0;if(r===yl.mapValue)return 1;if(o===yl.mapValue)return-1;const a=r.fields||{},l=Object.keys(a),c=o.fields||{},h=Object.keys(c);l.sort(),h.sort();for(let d=0;d<l.length&&d<h.length;++d){const f=cd(l[d],h[d]);if(f!==0)return f;const p=Ur(a[l[d]],c[h[d]]);if(p!==0)return p}return Et(l.length,h.length)})(e.mapValue,t.mapValue);default:throw gt(23264,{he:n})}}function n_(e,t){if(typeof e=="string"&&typeof t=="string"&&e.length===t.length)return Et(e,t);const n=Zs(e),s=Zs(t),i=Et(n.seconds,s.seconds);return i!==0?i:Et(n.nanos,s.nanos)}function s_(e,t){const n=e.values||[],s=t.values||[];for(let i=0;i<n.length&&i<s.length;++i){const r=Ur(n[i],s[i]);if(r)return r}return Et(n.length,s.length)}function $r(e){return ud(e)}function ud(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?(function(n){const s=Zs(n);return`time(${s.seconds},${s.nanos})`})(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?(function(n){return ti(n).toBase64()})(e.bytesValue):"referenceValue"in e?(function(n){return ut.fromName(n).toString()})(e.referenceValue):"geoPointValue"in e?(function(n){return`geo(${n.latitude},${n.longitude})`})(e.geoPointValue):"arrayValue"in e?(function(n){let s="[",i=!0;for(const r of n.values||[])i?i=!1:s+=",",s+=ud(r);return s+"]"})(e.arrayValue):"mapValue"in e?(function(n){const s=Object.keys(n.fields||{}).sort();let i="{",r=!0;for(const o of s)r?r=!1:i+=",",i+=`${o}:${ud(n.fields[o])}`;return i+"}"})(e.mapValue):gt(61005,{value:e})}function zl(e){switch(ei(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=uu(e);return t?16+zl(t):16;case 5:return 2*e.stringValue.length;case 6:return ti(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return(function(s){return(s.values||[]).reduce(((i,r)=>i+zl(r)),0)})(e.arrayValue);case 10:case 11:return(function(s){let i=0;return ri(s.fields,((r,o)=>{i+=r.length+zl(o)})),i})(e.mapValue);default:throw gt(13486,{value:e})}}function hd(e){return!!e&&"integerValue"in e}function Mf(e){return!!e&&"arrayValue"in e}function i_(e){return!!e&&"nullValue"in e}function r_(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Wl(e){return!!e&&"mapValue"in e}function U2(e){return(e?.mapValue?.fields||{})[cw]?.stringValue===uw}function Yo(e){if(e.geoPointValue)return{geoPointValue:{...e.geoPointValue}};if(e.timestampValue&&typeof e.timestampValue=="object")return{timestampValue:{...e.timestampValue}};if(e.mapValue){const t={mapValue:{fields:{}}};return ri(e.mapValue.fields,((n,s)=>t.mapValue.fields[n]=Yo(s))),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=Yo(e.arrayValue.values[n]);return t}return{...e}}function $2(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===F2}class Ge{constructor(t){this.value=t}static empty(){return new Ge({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let n=this.value;for(let s=0;s<t.length-1;++s)if(n=(n.mapValue.fields||{})[t.get(s)],!Wl(n))return null;return n=(n.mapValue.fields||{})[t.lastSegment()],n||null}}set(t,n){this.getFieldsMap(t.popLast())[t.lastSegment()]=Yo(n)}setAll(t){let n=_e.emptyPath(),s={},i=[];t.forEach(((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,s,i),s={},i=[],n=a.popLast()}o?s[a.lastSegment()]=Yo(o):i.push(a.lastSegment())}));const r=this.getFieldsMap(n);this.applyChanges(r,s,i)}delete(t){const n=this.field(t.popLast());Wl(n)&&n.mapValue.fields&&delete n.mapValue.fields[t.lastSegment()]}isEqual(t){return Wn(this.value,t.value)}getFieldsMap(t){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let s=0;s<t.length;++s){let i=n.mapValue.fields[t.get(s)];Wl(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[t.get(s)]=i),n=i}return n.mapValue.fields}applyChanges(t,n,s){ri(n,((i,r)=>t[i]=r));for(const i of s)delete t[i]}clone(){return new Ge(Yo(this.value))}}function hw(e){const t=[];return ri(e.fields,((n,s)=>{const i=new _e([n]);if(Wl(s)){const r=hw(s.mapValue).fields;if(r.length===0)t.push(i);else for(const o of r)t.push(i.child(o))}else t.push(i)})),new en(t)}class Oe{constructor(t,n,s,i,r,o,a){this.key=t,this.documentType=n,this.version=s,this.readTime=i,this.createTime=r,this.data=o,this.documentState=a}static newInvalidDocument(t){return new Oe(t,0,_t.min(),_t.min(),_t.min(),Ge.empty(),0)}static newFoundDocument(t,n,s,i){return new Oe(t,1,n,_t.min(),s,i,0)}static newNoDocument(t,n){return new Oe(t,2,n,_t.min(),_t.min(),Ge.empty(),0)}static newUnknownDocument(t,n){return new Oe(t,3,n,_t.min(),_t.min(),Ge.empty(),2)}convertToFoundDocument(t,n){return!this.createTime.isEqual(_t.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=Ge.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=Ge.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=_t.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof Oe&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new Oe(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Tc{constructor(t,n){this.position=t,this.inclusive=n}}function o_(e,t,n){let s=0;for(let i=0;i<e.position.length;i++){const r=t[i],o=e.position[i];if(r.field.isKeyField()?s=ut.comparator(ut.fromName(o.referenceValue),n.key):s=Ur(o,n.data.field(r.field)),r.dir==="desc"&&(s*=-1),s!==0)break}return s}function a_(e,t){if(e===null)return t===null;if(t===null||e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Wn(e.position[n],t.position[n]))return!1;return!0}class Ec{constructor(t,n="asc"){this.field=t,this.dir=n}}function B2(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class dw{}class de extends dw{constructor(t,n,s){super(),this.field=t,this.op=n,this.value=s}static create(t,n,s){return t.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(t,n,s):new j2(t,n,s):n==="array-contains"?new q2(t,s):n==="in"?new G2(t,s):n==="not-in"?new K2(t,s):n==="array-contains-any"?new Q2(t,s):new de(t,n,s)}static createKeyFieldInFilter(t,n,s){return n==="in"?new z2(t,s):new W2(t,s)}matches(t){const n=t.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Ur(n,this.value)):n!==null&&ei(this.value)===ei(n)&&this.matchesComparison(Ur(n,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return gt(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class qn extends dw{constructor(t,n){super(),this.filters=t,this.op=n,this.Pe=null}static create(t,n){return new qn(t,n)}matches(t){return fw(this)?this.filters.find((n=>!n.matches(t)))===void 0:this.filters.find((n=>n.matches(t)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((t,n)=>t.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function fw(e){return e.op==="and"}function pw(e){return H2(e)&&fw(e)}function H2(e){for(const t of e.filters)if(t instanceof qn)return!1;return!0}function dd(e){if(e instanceof de)return e.field.canonicalString()+e.op.toString()+$r(e.value);if(pw(e))return e.filters.map((t=>dd(t))).join(",");{const t=e.filters.map((n=>dd(n))).join(",");return`${e.op}(${t})`}}function gw(e,t){return e instanceof de?(function(s,i){return i instanceof de&&s.op===i.op&&s.field.isEqual(i.field)&&Wn(s.value,i.value)})(e,t):e instanceof qn?(function(s,i){return i instanceof qn&&s.op===i.op&&s.filters.length===i.filters.length?s.filters.reduce(((r,o,a)=>r&&gw(o,i.filters[a])),!0):!1})(e,t):void gt(19439)}function mw(e){return e instanceof de?(function(n){return`${n.field.canonicalString()} ${n.op} ${$r(n.value)}`})(e):e instanceof qn?(function(n){return n.op.toString()+" {"+n.getFilters().map(mw).join(" ,")+"}"})(e):"Filter"}class j2 extends de{constructor(t,n,s){super(t,n,s),this.key=ut.fromName(s.referenceValue)}matches(t){const n=ut.comparator(t.key,this.key);return this.matchesComparison(n)}}class z2 extends de{constructor(t,n){super(t,"in",n),this.keys=_w("in",n)}matches(t){return this.keys.some((n=>n.isEqual(t.key)))}}class W2 extends de{constructor(t,n){super(t,"not-in",n),this.keys=_w("not-in",n)}matches(t){return!this.keys.some((n=>n.isEqual(t.key)))}}function _w(e,t){return(t.arrayValue?.values||[]).map((n=>ut.fromName(n.referenceValue)))}class q2 extends de{constructor(t,n){super(t,"array-contains",n)}matches(t){const n=t.data.field(this.field);return Mf(n)&&ya(n.arrayValue,this.value)}}class G2 extends de{constructor(t,n){super(t,"in",n)}matches(t){const n=t.data.field(this.field);return n!==null&&ya(this.value.arrayValue,n)}}class K2 extends de{constructor(t,n){super(t,"not-in",n)}matches(t){if(ya(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=t.data.field(this.field);return n!==null&&n.nullValue===void 0&&!ya(this.value.arrayValue,n)}}class Q2 extends de{constructor(t,n){super(t,"array-contains-any",n)}matches(t){const n=t.data.field(this.field);return!(!Mf(n)||!n.arrayValue.values)&&n.arrayValue.values.some((s=>ya(this.value.arrayValue,s)))}}class Y2{constructor(t,n=null,s=[],i=[],r=null,o=null,a=null){this.path=t,this.collectionGroup=n,this.orderBy=s,this.filters=i,this.limit=r,this.startAt=o,this.endAt=a,this.Te=null}}function l_(e,t=null,n=[],s=[],i=null,r=null,o=null){return new Y2(e,t,n,s,i,r,o)}function Df(e){const t=yt(e);if(t.Te===null){let n=t.path.canonicalString();t.collectionGroup!==null&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map((s=>dd(s))).join(","),n+="|ob:",n+=t.orderBy.map((s=>(function(r){return r.field.canonicalString()+r.dir})(s))).join(","),cu(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((s=>$r(s))).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((s=>$r(s))).join(",")),t.Te=n}return t.Te}function Of(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!B2(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!gw(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!a_(e.startAt,t.startAt)&&a_(e.endAt,t.endAt)}function fd(e){return ut.isDocumentKey(e.path)&&e.collectionGroup===null&&e.filters.length===0}class hu{constructor(t,n=null,s=[],i=[],r=null,o="F",a=null,l=null){this.path=t,this.collectionGroup=n,this.explicitOrderBy=s,this.filters=i,this.limit=r,this.limitType=o,this.startAt=a,this.endAt=l,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function X2(e,t,n,s,i,r,o,a){return new hu(e,t,n,s,i,r,o,a)}function Lf(e){return new hu(e)}function c_(e){return e.filters.length===0&&e.limit===null&&e.startAt==null&&e.endAt==null&&(e.explicitOrderBy.length===0||e.explicitOrderBy.length===1&&e.explicitOrderBy[0].field.isKeyField())}function J2(e){return e.collectionGroup!==null}function Xo(e){const t=yt(e);if(t.Ie===null){t.Ie=[];const n=new Set;for(const r of t.explicitOrderBy)t.Ie.push(r),n.add(r.field.canonicalString());const s=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new fe(_e.comparator);return o.filters.forEach((l=>{l.getFlattenedFilters().forEach((c=>{c.isInequality()&&(a=a.add(c.field))}))})),a})(t).forEach((r=>{n.has(r.canonicalString())||r.isKeyField()||t.Ie.push(new Ec(r,s))})),n.has(_e.keyField().canonicalString())||t.Ie.push(new Ec(_e.keyField(),s))}return t.Ie}function $n(e){const t=yt(e);return t.Ee||(t.Ee=Z2(t,Xo(e))),t.Ee}function Z2(e,t){if(e.limitType==="F")return l_(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map((i=>{const r=i.dir==="desc"?"asc":"desc";return new Ec(i.field,r)}));const n=e.endAt?new Tc(e.endAt.position,e.endAt.inclusive):null,s=e.startAt?new Tc(e.startAt.position,e.startAt.inclusive):null;return l_(e.path,e.collectionGroup,t,e.filters,e.limit,n,s)}}function pd(e,t,n){return new hu(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function du(e,t){return Of($n(e),$n(t))&&e.limitType===t.limitType}function yw(e){return`${Df($n(e))}|lt:${e.limitType}`}function ur(e){return`Query(target=${(function(n){let s=n.path.canonicalString();return n.collectionGroup!==null&&(s+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(s+=`, filters: [${n.filters.map((i=>mw(i))).join(", ")}]`),cu(n.limit)||(s+=", limit: "+n.limit),n.orderBy.length>0&&(s+=`, orderBy: [${n.orderBy.map((i=>(function(o){return`${o.field.canonicalString()} (${o.dir})`})(i))).join(", ")}]`),n.startAt&&(s+=", startAt: ",s+=n.startAt.inclusive?"b:":"a:",s+=n.startAt.position.map((i=>$r(i))).join(",")),n.endAt&&(s+=", endAt: ",s+=n.endAt.inclusive?"a:":"b:",s+=n.endAt.position.map((i=>$r(i))).join(",")),`Target(${s})`})($n(e))}; limitType=${e.limitType})`}function fu(e,t){return t.isFoundDocument()&&(function(s,i){const r=i.key.path;return s.collectionGroup!==null?i.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(r):ut.isDocumentKey(s.path)?s.path.isEqual(r):s.path.isImmediateParentOf(r)})(e,t)&&(function(s,i){for(const r of Xo(s))if(!r.field.isKeyField()&&i.data.field(r.field)===null)return!1;return!0})(e,t)&&(function(s,i){for(const r of s.filters)if(!r.matches(i))return!1;return!0})(e,t)&&(function(s,i){return!(s.startAt&&!(function(o,a,l){const c=o_(o,a,l);return o.inclusive?c<=0:c<0})(s.startAt,Xo(s),i)||s.endAt&&!(function(o,a,l){const c=o_(o,a,l);return o.inclusive?c>=0:c>0})(s.endAt,Xo(s),i))})(e,t)}function tM(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function vw(e){return(t,n)=>{let s=!1;for(const i of Xo(e)){const r=eM(i,t,n);if(r!==0)return r;s=s||i.field.isKeyField()}return 0}}function eM(e,t,n){const s=e.field.isKeyField()?ut.comparator(t.key,n.key):(function(r,o,a){const l=o.data.field(r),c=a.data.field(r);return l!==null&&c!==null?Ur(l,c):gt(42886)})(e.field,t,n);switch(e.dir){case"asc":return s;case"desc":return-1*s;default:return gt(19790,{direction:e.dir})}}class Qi{constructor(t,n){this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}get(t){const n=this.mapKeyFn(t),s=this.inner[n];if(s!==void 0){for(const[i,r]of s)if(this.equalsFn(i,t))return r}}has(t){return this.get(t)!==void 0}set(t,n){const s=this.mapKeyFn(t),i=this.inner[s];if(i===void 0)return this.inner[s]=[[t,n]],void this.innerSize++;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],t))return void(i[r]=[t,n]);i.push([t,n]),this.innerSize++}delete(t){const n=this.mapKeyFn(t),s=this.inner[n];if(s===void 0)return!1;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],t))return s.length===1?delete this.inner[n]:s.splice(i,1),this.innerSize--,!0;return!1}forEach(t){ri(this.inner,((n,s)=>{for(const[i,r]of s)t(i,r)}))}isEmpty(){return sw(this.inner)}size(){return this.innerSize}}const nM=new Xt(ut.comparator);function ps(){return nM}const bw=new Xt(ut.comparator);function Lo(...e){let t=bw;for(const n of e)t=t.insert(n.key,n);return t}function ww(e){let t=bw;return e.forEach(((n,s)=>t=t.insert(n,s.overlayedDocument))),t}function Ci(){return Jo()}function Tw(){return Jo()}function Jo(){return new Qi((e=>e.toString()),((e,t)=>e.isEqual(t)))}const sM=new Xt(ut.comparator),iM=new fe(ut.comparator);function It(...e){let t=iM;for(const n of e)t=t.add(n);return t}const rM=new fe(Et);function oM(){return rM}function Nf(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:vc(t)?"-0":t}}function Ew(e){return{integerValue:""+e}}function aM(e,t){return D2(t)?Ew(t):Nf(e,t)}class pu{constructor(){this._=void 0}}function lM(e,t,n){return e instanceof Ic?(function(i,r){const o={fields:{[ow]:{stringValue:rw},[lw]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return r&&Pf(r)&&(r=uu(r)),r&&(o.fields[aw]=r),{mapValue:o}})(n,t):e instanceof va?Sw(e,t):e instanceof ba?Aw(e,t):(function(i,r){const o=Iw(i,r),a=u_(o)+u_(i.Ae);return hd(o)&&hd(i.Ae)?Ew(a):Nf(i.serializer,a)})(e,t)}function cM(e,t,n){return e instanceof va?Sw(e,t):e instanceof ba?Aw(e,t):n}function Iw(e,t){return e instanceof Sc?(function(s){return hd(s)||(function(r){return!!r&&"doubleValue"in r})(s)})(t)?t:{integerValue:0}:null}class Ic extends pu{}class va extends pu{constructor(t){super(),this.elements=t}}function Sw(e,t){const n=kw(t);for(const s of e.elements)n.some((i=>Wn(i,s)))||n.push(s);return{arrayValue:{values:n}}}class ba extends pu{constructor(t){super(),this.elements=t}}function Aw(e,t){let n=kw(t);for(const s of e.elements)n=n.filter((i=>!Wn(i,s)));return{arrayValue:{values:n}}}class Sc extends pu{constructor(t,n){super(),this.serializer=t,this.Ae=n}}function u_(e){return ee(e.integerValue||e.doubleValue)}function kw(e){return Mf(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}function uM(e,t){return e.field.isEqual(t.field)&&(function(s,i){return s instanceof va&&i instanceof va||s instanceof ba&&i instanceof ba?Vr(s.elements,i.elements,Wn):s instanceof Sc&&i instanceof Sc?Wn(s.Ae,i.Ae):s instanceof Ic&&i instanceof Ic})(e.transform,t.transform)}class hM{constructor(t,n){this.version=t,this.transformResults=n}}class Bn{constructor(t,n){this.updateTime=t,this.exists=n}static none(){return new Bn}static exists(t){return new Bn(void 0,t)}static updateTime(t){return new Bn(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function ql(e,t){return e.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(e.updateTime):e.exists===void 0||e.exists===t.isFoundDocument()}class gu{}function Cw(e,t){if(!e.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return e.isNoDocument()?new Rw(e.key,Bn.none()):new Ba(e.key,e.data,Bn.none());{const n=e.data,s=Ge.empty();let i=new fe(_e.comparator);for(let r of t.fields)if(!i.has(r)){let o=n.field(r);o===null&&r.length>1&&(r=r.popLast(),o=n.field(r)),o===null?s.delete(r):s.set(r,o),i=i.add(r)}return new oi(e.key,s,new en(i.toArray()),Bn.none())}}function dM(e,t,n){e instanceof Ba?(function(i,r,o){const a=i.value.clone(),l=d_(i.fieldTransforms,r,o.transformResults);a.setAll(l),r.convertToFoundDocument(o.version,a).setHasCommittedMutations()})(e,t,n):e instanceof oi?(function(i,r,o){if(!ql(i.precondition,r))return void r.convertToUnknownDocument(o.version);const a=d_(i.fieldTransforms,r,o.transformResults),l=r.data;l.setAll(xw(i)),l.setAll(a),r.convertToFoundDocument(o.version,l).setHasCommittedMutations()})(e,t,n):(function(i,r,o){r.convertToNoDocument(o.version).setHasCommittedMutations()})(0,t,n)}function Zo(e,t,n,s){return e instanceof Ba?(function(r,o,a,l){if(!ql(r.precondition,o))return a;const c=r.value.clone(),h=f_(r.fieldTransforms,l,o);return c.setAll(h),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null})(e,t,n,s):e instanceof oi?(function(r,o,a,l){if(!ql(r.precondition,o))return a;const c=f_(r.fieldTransforms,l,o),h=o.data;return h.setAll(xw(r)),h.setAll(c),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),a===null?null:a.unionWith(r.fieldMask.fields).unionWith(r.fieldTransforms.map((d=>d.field)))})(e,t,n,s):(function(r,o,a){return ql(r.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a})(e,t,n)}function fM(e,t){let n=null;for(const s of e.fieldTransforms){const i=t.data.field(s.field),r=Iw(s.transform,i||null);r!=null&&(n===null&&(n=Ge.empty()),n.set(s.field,r))}return n||null}function h_(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!(function(s,i){return s===void 0&&i===void 0||!(!s||!i)&&Vr(s,i,((r,o)=>uM(r,o)))})(e.fieldTransforms,t.fieldTransforms)&&(e.type===0?e.value.isEqual(t.value):e.type!==1||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class Ba extends gu{constructor(t,n,s,i=[]){super(),this.key=t,this.value=n,this.precondition=s,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class oi extends gu{constructor(t,n,s,i,r=[]){super(),this.key=t,this.data=n,this.fieldMask=s,this.precondition=i,this.fieldTransforms=r,this.type=1}getFieldMask(){return this.fieldMask}}function xw(e){const t=new Map;return e.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const s=e.data.field(n);t.set(n,s)}})),t}function d_(e,t,n){const s=new Map;Ot(e.length===n.length,32656,{Re:n.length,Ve:e.length});for(let i=0;i<n.length;i++){const r=e[i],o=r.transform,a=t.data.field(r.field);s.set(r.field,cM(o,a,n[i]))}return s}function f_(e,t,n){const s=new Map;for(const i of e){const r=i.transform,o=n.data.field(i.field);s.set(i.field,lM(r,o,t))}return s}class Rw extends gu{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class pM extends gu{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class gM{constructor(t,n,s,i){this.batchId=t,this.localWriteTime=n,this.baseMutations=s,this.mutations=i}applyToRemoteDocument(t,n){const s=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const r=this.mutations[i];r.key.isEqual(t.key)&&dM(r,t,s[i])}}applyToLocalView(t,n){for(const s of this.baseMutations)s.key.isEqual(t.key)&&(n=Zo(s,t,n,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(t.key)&&(n=Zo(s,t,n,this.localWriteTime));return n}applyToLocalDocumentSet(t,n){const s=Tw();return this.mutations.forEach((i=>{const r=t.get(i.key),o=r.overlayedDocument;let a=this.applyToLocalView(o,r.mutatedFields);a=n.has(i.key)?null:a;const l=Cw(o,a);l!==null&&s.set(i.key,l),o.isValidDocument()||o.convertToNoDocument(_t.min())})),s}keys(){return this.mutations.reduce(((t,n)=>t.add(n.key)),It())}isEqual(t){return this.batchId===t.batchId&&Vr(this.mutations,t.mutations,((n,s)=>h_(n,s)))&&Vr(this.baseMutations,t.baseMutations,((n,s)=>h_(n,s)))}}class Vf{constructor(t,n,s,i){this.batch=t,this.commitVersion=n,this.mutationResults=s,this.docVersions=i}static from(t,n,s){Ot(t.mutations.length===s.length,58842,{me:t.mutations.length,fe:s.length});let i=(function(){return sM})();const r=t.mutations;for(let o=0;o<r.length;o++)i=i.insert(r[o].key,s[o].version);return new Vf(t,n,s,i)}}class mM{constructor(t,n){this.largestBatchId=t,this.mutation=n}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class _M{constructor(t,n){this.count=t,this.unchangedNames=n}}var ie,At;function yM(e){switch(e){case j.OK:return gt(64938);case j.CANCELLED:case j.UNKNOWN:case j.DEADLINE_EXCEEDED:case j.RESOURCE_EXHAUSTED:case j.INTERNAL:case j.UNAVAILABLE:case j.UNAUTHENTICATED:return!1;case j.INVALID_ARGUMENT:case j.NOT_FOUND:case j.ALREADY_EXISTS:case j.PERMISSION_DENIED:case j.FAILED_PRECONDITION:case j.ABORTED:case j.OUT_OF_RANGE:case j.UNIMPLEMENTED:case j.DATA_LOSS:return!0;default:return gt(15467,{code:e})}}function Pw(e){if(e===void 0)return fs("GRPC error has no .code"),j.UNKNOWN;switch(e){case ie.OK:return j.OK;case ie.CANCELLED:return j.CANCELLED;case ie.UNKNOWN:return j.UNKNOWN;case ie.DEADLINE_EXCEEDED:return j.DEADLINE_EXCEEDED;case ie.RESOURCE_EXHAUSTED:return j.RESOURCE_EXHAUSTED;case ie.INTERNAL:return j.INTERNAL;case ie.UNAVAILABLE:return j.UNAVAILABLE;case ie.UNAUTHENTICATED:return j.UNAUTHENTICATED;case ie.INVALID_ARGUMENT:return j.INVALID_ARGUMENT;case ie.NOT_FOUND:return j.NOT_FOUND;case ie.ALREADY_EXISTS:return j.ALREADY_EXISTS;case ie.PERMISSION_DENIED:return j.PERMISSION_DENIED;case ie.FAILED_PRECONDITION:return j.FAILED_PRECONDITION;case ie.ABORTED:return j.ABORTED;case ie.OUT_OF_RANGE:return j.OUT_OF_RANGE;case ie.UNIMPLEMENTED:return j.UNIMPLEMENTED;case ie.DATA_LOSS:return j.DATA_LOSS;default:return gt(39323,{code:e})}}(At=ie||(ie={}))[At.OK=0]="OK",At[At.CANCELLED=1]="CANCELLED",At[At.UNKNOWN=2]="UNKNOWN",At[At.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",At[At.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",At[At.NOT_FOUND=5]="NOT_FOUND",At[At.ALREADY_EXISTS=6]="ALREADY_EXISTS",At[At.PERMISSION_DENIED=7]="PERMISSION_DENIED",At[At.UNAUTHENTICATED=16]="UNAUTHENTICATED",At[At.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",At[At.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",At[At.ABORTED=10]="ABORTED",At[At.OUT_OF_RANGE=11]="OUT_OF_RANGE",At[At.UNIMPLEMENTED=12]="UNIMPLEMENTED",At[At.INTERNAL=13]="INTERNAL",At[At.UNAVAILABLE=14]="UNAVAILABLE",At[At.DATA_LOSS=15]="DATA_LOSS";function vM(){return new TextEncoder}const bM=new Ws([4294967295,4294967295],0);function p_(e){const t=vM().encode(e),n=new W0;return n.update(t),new Uint8Array(n.digest())}function g_(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),s=t.getUint32(4,!0),i=t.getUint32(8,!0),r=t.getUint32(12,!0);return[new Ws([n,s],0),new Ws([i,r],0)]}class Ff{constructor(t,n,s){if(this.bitmap=t,this.padding=n,this.hashCount=s,n<0||n>=8)throw new No(`Invalid padding: ${n}`);if(s<0)throw new No(`Invalid hash count: ${s}`);if(t.length>0&&this.hashCount===0)throw new No(`Invalid hash count: ${s}`);if(t.length===0&&n!==0)throw new No(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*t.length-n,this.pe=Ws.fromNumber(this.ge)}ye(t,n,s){let i=t.add(n.multiply(Ws.fromNumber(s)));return i.compare(bM)===1&&(i=new Ws([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.ge===0)return!1;const n=p_(t),[s,i]=g_(n);for(let r=0;r<this.hashCount;r++){const o=this.ye(s,i,r);if(!this.we(o))return!1}return!0}static create(t,n,s){const i=t%8==0?0:8-t%8,r=new Uint8Array(Math.ceil(t/8)),o=new Ff(r,i,n);return s.forEach((a=>o.insert(a))),o}insert(t){if(this.ge===0)return;const n=p_(t),[s,i]=g_(n);for(let r=0;r<this.hashCount;r++){const o=this.ye(s,i,r);this.Se(o)}}Se(t){const n=Math.floor(t/8),s=t%8;this.bitmap[n]|=1<<s}}class No extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class mu{constructor(t,n,s,i,r){this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=s,this.documentUpdates=i,this.resolvedLimboDocuments=r}static createSynthesizedRemoteEventForCurrentChange(t,n,s){const i=new Map;return i.set(t,Ha.createSynthesizedTargetChangeForCurrentChange(t,n,s)),new mu(_t.min(),i,new Xt(Et),ps(),It())}}class Ha{constructor(t,n,s,i,r){this.resumeToken=t,this.current=n,this.addedDocuments=s,this.modifiedDocuments=i,this.removedDocuments=r}static createSynthesizedTargetChangeForCurrentChange(t,n,s){return new Ha(s,n,It(),It(),It())}}class Gl{constructor(t,n,s,i){this.be=t,this.removedTargetIds=n,this.key=s,this.De=i}}class Mw{constructor(t,n){this.targetId=t,this.Ce=n}}class Dw{constructor(t,n,s=Te.EMPTY_BYTE_STRING,i=null){this.state=t,this.targetIds=n,this.resumeToken=s,this.cause=i}}class m_{constructor(){this.ve=0,this.Fe=__(),this.Me=Te.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(t){t.approximateByteSize()>0&&(this.Oe=!0,this.Me=t)}ke(){let t=It(),n=It(),s=It();return this.Fe.forEach(((i,r)=>{switch(r){case 0:t=t.add(i);break;case 2:n=n.add(i);break;case 1:s=s.add(i);break;default:gt(38017,{changeType:r})}})),new Ha(this.Me,this.xe,t,n,s)}qe(){this.Oe=!1,this.Fe=__()}Qe(t,n){this.Oe=!0,this.Fe=this.Fe.insert(t,n)}$e(t){this.Oe=!0,this.Fe=this.Fe.remove(t)}Ue(){this.ve+=1}Ke(){this.ve-=1,Ot(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class wM{constructor(t){this.Ge=t,this.ze=new Map,this.je=ps(),this.Je=vl(),this.He=vl(),this.Ye=new Xt(Et)}Ze(t){for(const n of t.be)t.De&&t.De.isFoundDocument()?this.Xe(n,t.De):this.et(n,t.key,t.De);for(const n of t.removedTargetIds)this.et(n,t.key,t.De)}tt(t){this.forEachTarget(t,(n=>{const s=this.nt(n);switch(t.state){case 0:this.rt(n)&&s.Le(t.resumeToken);break;case 1:s.Ke(),s.Ne||s.qe(),s.Le(t.resumeToken);break;case 2:s.Ke(),s.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(s.We(),s.Le(t.resumeToken));break;case 4:this.rt(n)&&(this.it(n),s.Le(t.resumeToken));break;default:gt(56790,{state:t.state})}}))}forEachTarget(t,n){t.targetIds.length>0?t.targetIds.forEach(n):this.ze.forEach(((s,i)=>{this.rt(i)&&n(i)}))}st(t){const n=t.targetId,s=t.Ce.count,i=this.ot(n);if(i){const r=i.target;if(fd(r))if(s===0){const o=new ut(r.path);this.et(n,o,Oe.newNoDocument(o,_t.min()))}else Ot(s===1,20013,{expectedCount:s});else{const o=this._t(n);if(o!==s){const a=this.ut(t),l=a?this.ct(a,t,o):1;if(l!==0){this.it(n);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,c)}}}}}ut(t){const n=t.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:s="",padding:i=0},hashCount:r=0}=n;let o,a;try{o=ti(s).toUint8Array()}catch(l){if(l instanceof iw)return zi("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new Ff(o,i,r)}catch(l){return zi(l instanceof No?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.ge===0?null:a}ct(t,n,s){return n.Ce.count===s-this.Pt(t,n.targetId)?0:2}Pt(t,n){const s=this.Ge.getRemoteKeysForTarget(n);let i=0;return s.forEach((r=>{const o=this.Ge.ht(),a=`projects/${o.projectId}/databases/${o.database}/documents/${r.path.canonicalString()}`;t.mightContain(a)||(this.et(n,r,null),i++)})),i}Tt(t){const n=new Map;this.ze.forEach(((r,o)=>{const a=this.ot(o);if(a){if(r.current&&fd(a.target)){const l=new ut(a.target.path);this.It(l).has(o)||this.Et(o,l)||this.et(o,l,Oe.newNoDocument(l,t))}r.Be&&(n.set(o,r.ke()),r.qe())}}));let s=It();this.He.forEach(((r,o)=>{let a=!0;o.forEachWhile((l=>{const c=this.ot(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)})),a&&(s=s.add(r))})),this.je.forEach(((r,o)=>o.setReadTime(t)));const i=new mu(t,n,this.Ye,this.je,s);return this.je=ps(),this.Je=vl(),this.He=vl(),this.Ye=new Xt(Et),i}Xe(t,n){if(!this.rt(t))return;const s=this.Et(t,n.key)?2:0;this.nt(t).Qe(n.key,s),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(t)),this.He=this.He.insert(n.key,this.dt(n.key).add(t))}et(t,n,s){if(!this.rt(t))return;const i=this.nt(t);this.Et(t,n)?i.Qe(n,1):i.$e(n),this.He=this.He.insert(n,this.dt(n).delete(t)),this.He=this.He.insert(n,this.dt(n).add(t)),s&&(this.je=this.je.insert(n,s))}removeTarget(t){this.ze.delete(t)}_t(t){const n=this.nt(t).ke();return this.Ge.getRemoteKeysForTarget(t).size+n.addedDocuments.size-n.removedDocuments.size}Ue(t){this.nt(t).Ue()}nt(t){let n=this.ze.get(t);return n||(n=new m_,this.ze.set(t,n)),n}dt(t){let n=this.He.get(t);return n||(n=new fe(Et),this.He=this.He.insert(t,n)),n}It(t){let n=this.Je.get(t);return n||(n=new fe(Et),this.Je=this.Je.insert(t,n)),n}rt(t){const n=this.ot(t)!==null;return n||nt("WatchChangeAggregator","Detected inactive target",t),n}ot(t){const n=this.ze.get(t);return n&&n.Ne?null:this.Ge.At(t)}it(t){this.ze.set(t,new m_),this.Ge.getRemoteKeysForTarget(t).forEach((n=>{this.et(t,n,null)}))}Et(t,n){return this.Ge.getRemoteKeysForTarget(t).has(n)}}function vl(){return new Xt(ut.comparator)}function __(){return new Xt(ut.comparator)}const TM={asc:"ASCENDING",desc:"DESCENDING"},EM={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},IM={and:"AND",or:"OR"};class SM{constructor(t,n){this.databaseId=t,this.useProto3Json=n}}function gd(e,t){return e.useProto3Json||cu(t)?t:{value:t}}function Ac(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function Ow(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function AM(e,t){return Ac(e,t.toTimestamp())}function Hn(e){return Ot(!!e,49232),_t.fromTimestamp((function(n){const s=Zs(n);return new jt(s.seconds,s.nanos)})(e))}function Uf(e,t){return md(e,t).canonicalString()}function md(e,t){const n=(function(i){return new Qt(["projects",i.projectId,"databases",i.database])})(e).child("documents");return t===void 0?n:n.child(t)}function Lw(e){const t=Qt.fromString(e);return Ot($w(t),10190,{key:t.toString()}),t}function _d(e,t){return Uf(e.databaseId,t.path)}function _h(e,t){const n=Lw(t);if(n.get(1)!==e.databaseId.projectId)throw new it(j.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new it(j.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new ut(Vw(n))}function Nw(e,t){return Uf(e.databaseId,t)}function kM(e){const t=Lw(e);return t.length===4?Qt.emptyPath():Vw(t)}function yd(e){return new Qt(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Vw(e){return Ot(e.length>4&&e.get(4)==="documents",29091,{key:e.toString()}),e.popFirst(5)}function y_(e,t,n){return{name:_d(e,t),fields:n.value.mapValue.fields}}function CM(e,t){let n;if("targetChange"in t){t.targetChange;const s=(function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:gt(39313,{state:c})})(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],r=(function(c,h){return c.useProto3Json?(Ot(h===void 0||typeof h=="string",58123),Te.fromBase64String(h||"")):(Ot(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),Te.fromUint8Array(h||new Uint8Array))})(e,t.targetChange.resumeToken),o=t.targetChange.cause,a=o&&(function(c){const h=c.code===void 0?j.UNKNOWN:Pw(c.code);return new it(h,c.message||"")})(o);n=new Dw(s,i,r,a||null)}else if("documentChange"in t){t.documentChange;const s=t.documentChange;s.document,s.document.name,s.document.updateTime;const i=_h(e,s.document.name),r=Hn(s.document.updateTime),o=s.document.createTime?Hn(s.document.createTime):_t.min(),a=new Ge({mapValue:{fields:s.document.fields}}),l=Oe.newFoundDocument(i,r,o,a),c=s.targetIds||[],h=s.removedTargetIds||[];n=new Gl(c,h,l.key,l)}else if("documentDelete"in t){t.documentDelete;const s=t.documentDelete;s.document;const i=_h(e,s.document),r=s.readTime?Hn(s.readTime):_t.min(),o=Oe.newNoDocument(i,r),a=s.removedTargetIds||[];n=new Gl([],a,o.key,o)}else if("documentRemove"in t){t.documentRemove;const s=t.documentRemove;s.document;const i=_h(e,s.document),r=s.removedTargetIds||[];n=new Gl([],r,i,null)}else{if(!("filter"in t))return gt(11601,{Rt:t});{t.filter;const s=t.filter;s.targetId;const{count:i=0,unchangedNames:r}=s,o=new _M(i,r),a=s.targetId;n=new Mw(a,o)}}return n}function xM(e,t){let n;if(t instanceof Ba)n={update:y_(e,t.key,t.value)};else if(t instanceof Rw)n={delete:_d(e,t.key)};else if(t instanceof oi)n={update:y_(e,t.key,t.data),updateMask:FM(t.fieldMask)};else{if(!(t instanceof pM))return gt(16599,{Vt:t.type});n={verify:_d(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((s=>(function(r,o){const a=o.transform;if(a instanceof Ic)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof va)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof ba)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Sc)return{fieldPath:o.field.canonicalString(),increment:a.Ae};throw gt(20930,{transform:o.transform})})(0,s)))),t.precondition.isNone||(n.currentDocument=(function(i,r){return r.updateTime!==void 0?{updateTime:AM(i,r.updateTime)}:r.exists!==void 0?{exists:r.exists}:gt(27497)})(e,t.precondition)),n}function RM(e,t){return e&&e.length>0?(Ot(t!==void 0,14353),e.map((n=>(function(i,r){let o=i.updateTime?Hn(i.updateTime):Hn(r);return o.isEqual(_t.min())&&(o=Hn(r)),new hM(o,i.transformResults||[])})(n,t)))):[]}function PM(e,t){return{documents:[Nw(e,t.path)]}}function MM(e,t){const n={structuredQuery:{}},s=t.path;let i;t.collectionGroup!==null?(i=s,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(i=s.popLast(),n.structuredQuery.from=[{collectionId:s.lastSegment()}]),n.parent=Nw(e,i);const r=(function(c){if(c.length!==0)return Uw(qn.create(c,"and"))})(t.filters);r&&(n.structuredQuery.where=r);const o=(function(c){if(c.length!==0)return c.map((h=>(function(f){return{field:hr(f.field),direction:LM(f.dir)}})(h)))})(t.orderBy);o&&(n.structuredQuery.orderBy=o);const a=gd(e,t.limit);return a!==null&&(n.structuredQuery.limit=a),t.startAt&&(n.structuredQuery.startAt=(function(c){return{before:c.inclusive,values:c.position}})(t.startAt)),t.endAt&&(n.structuredQuery.endAt=(function(c){return{before:!c.inclusive,values:c.position}})(t.endAt)),{ft:n,parent:i}}function DM(e){let t=kM(e.parent);const n=e.structuredQuery,s=n.from?n.from.length:0;let i=null;if(s>0){Ot(s===1,65062);const h=n.from[0];h.allDescendants?i=h.collectionId:t=t.child(h.collectionId)}let r=[];n.where&&(r=(function(d){const f=Fw(d);return f instanceof qn&&pw(f)?f.getFilters():[f]})(n.where));let o=[];n.orderBy&&(o=(function(d){return d.map((f=>(function(_){return new Ec(dr(_.field),(function(v){switch(v){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(_.direction))})(f)))})(n.orderBy));let a=null;n.limit&&(a=(function(d){let f;return f=typeof d=="object"?d.value:d,cu(f)?null:f})(n.limit));let l=null;n.startAt&&(l=(function(d){const f=!!d.before,p=d.values||[];return new Tc(p,f)})(n.startAt));let c=null;return n.endAt&&(c=(function(d){const f=!d.before,p=d.values||[];return new Tc(p,f)})(n.endAt)),X2(t,i,o,r,a,"F",l,c)}function OM(e,t){const n=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return gt(28987,{purpose:i})}})(t.purpose);return n==null?null:{"goog-listen-tags":n}}function Fw(e){return e.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const s=dr(n.unaryFilter.field);return de.create(s,"==",{doubleValue:NaN});case"IS_NULL":const i=dr(n.unaryFilter.field);return de.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=dr(n.unaryFilter.field);return de.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=dr(n.unaryFilter.field);return de.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return gt(61313);default:return gt(60726)}})(e):e.fieldFilter!==void 0?(function(n){return de.create(dr(n.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return gt(58110);default:return gt(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(e):e.compositeFilter!==void 0?(function(n){return qn.create(n.compositeFilter.filters.map((s=>Fw(s))),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return gt(1026)}})(n.compositeFilter.op))})(e):gt(30097,{filter:e})}function LM(e){return TM[e]}function NM(e){return EM[e]}function VM(e){return IM[e]}function hr(e){return{fieldPath:e.canonicalString()}}function dr(e){return _e.fromServerFormat(e.fieldPath)}function Uw(e){return e instanceof de?(function(n){if(n.op==="=="){if(r_(n.value))return{unaryFilter:{field:hr(n.field),op:"IS_NAN"}};if(i_(n.value))return{unaryFilter:{field:hr(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(r_(n.value))return{unaryFilter:{field:hr(n.field),op:"IS_NOT_NAN"}};if(i_(n.value))return{unaryFilter:{field:hr(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:hr(n.field),op:NM(n.op),value:n.value}}})(e):e instanceof qn?(function(n){const s=n.getFilters().map((i=>Uw(i)));return s.length===1?s[0]:{compositeFilter:{op:VM(n.op),filters:s}}})(e):gt(54877,{filter:e})}function FM(e){const t=[];return e.fields.forEach((n=>t.push(n.canonicalString()))),{fieldPaths:t}}function $w(e){return e.length>=4&&e.get(0)==="projects"&&e.get(2)==="databases"}class Vs{constructor(t,n,s,i,r=_t.min(),o=_t.min(),a=Te.EMPTY_BYTE_STRING,l=null){this.target=t,this.targetId=n,this.purpose=s,this.sequenceNumber=i,this.snapshotVersion=r,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(t){return new Vs(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,n){return new Vs(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new Vs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new Vs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}class UM{constructor(t){this.yt=t}}function $M(e){const t=DM({parent:e.parent,structuredQuery:e.structuredQuery});return e.limitType==="LAST"?pd(t,t.limit,"L"):t}class BM{constructor(){this.Cn=new HM}addToCollectionParentIndex(t,n){return this.Cn.add(n),$.resolve()}getCollectionParents(t,n){return $.resolve(this.Cn.getEntries(n))}addFieldIndex(t,n){return $.resolve()}deleteFieldIndex(t,n){return $.resolve()}deleteAllFieldIndexes(t){return $.resolve()}createTargetIndexes(t,n){return $.resolve()}getDocumentsMatchingTarget(t,n){return $.resolve(null)}getIndexType(t,n){return $.resolve(0)}getFieldIndexes(t,n){return $.resolve([])}getNextCollectionGroupToUpdate(t){return $.resolve(null)}getMinOffset(t,n){return $.resolve(Js.min())}getMinOffsetFromCollectionGroup(t,n){return $.resolve(Js.min())}updateCollectionGroup(t,n,s){return $.resolve()}updateIndexEntries(t,n){return $.resolve()}}class HM{constructor(){this.index={}}add(t){const n=t.lastSegment(),s=t.popLast(),i=this.index[n]||new fe(Qt.comparator),r=!i.has(s);return this.index[n]=i.add(s),r}has(t){const n=t.lastSegment(),s=t.popLast(),i=this.index[n];return i&&i.has(s)}getEntries(t){return(this.index[t]||new fe(Qt.comparator)).toArray()}}const v_={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Bw=41943040;class qe{static withCacheSize(t){return new qe(t,qe.DEFAULT_COLLECTION_PERCENTILE,qe.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,n,s){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=s}}qe.DEFAULT_COLLECTION_PERCENTILE=10,qe.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,qe.DEFAULT=new qe(Bw,qe.DEFAULT_COLLECTION_PERCENTILE,qe.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),qe.DISABLED=new qe(-1,0,0);class Br{constructor(t){this.ar=t}next(){return this.ar+=2,this.ar}static ur(){return new Br(0)}static cr(){return new Br(-1)}}const b_="LruGarbageCollector",jM=1048576;function w_([e,t],[n,s]){const i=Et(e,n);return i===0?Et(t,s):i}class zM{constructor(t){this.Ir=t,this.buffer=new fe(w_),this.Er=0}dr(){return++this.Er}Ar(t){const n=[t,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const s=this.buffer.last();w_(n,s)<0&&(this.buffer=this.buffer.delete(s).add(n))}}get maxValue(){return this.buffer.last()[0]}}class WM{constructor(t,n,s){this.garbageCollector=t,this.asyncQueue=n,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(t){nt(b_,`Garbage collection scheduled in ${t}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){no(n)?nt(b_,"Ignoring IndexedDB error during garbage collection: ",n):await eo(n)}await this.Vr(3e5)}))}}class qM{constructor(t,n){this.mr=t,this.params=n}calculateTargetCount(t,n){return this.mr.gr(t).next((s=>Math.floor(n/100*s)))}nthSequenceNumber(t,n){if(n===0)return $.resolve(lu.ce);const s=new zM(n);return this.mr.forEachTarget(t,(i=>s.Ar(i.sequenceNumber))).next((()=>this.mr.pr(t,(i=>s.Ar(i))))).next((()=>s.maxValue))}removeTargets(t,n,s){return this.mr.removeTargets(t,n,s)}removeOrphanedDocuments(t,n){return this.mr.removeOrphanedDocuments(t,n)}collect(t,n){return this.params.cacheSizeCollectionThreshold===-1?(nt("LruGarbageCollector","Garbage collection skipped; disabled"),$.resolve(v_)):this.getCacheSize(t).next((s=>s<this.params.cacheSizeCollectionThreshold?(nt("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),v_):this.yr(t,n)))}getCacheSize(t){return this.mr.getCacheSize(t)}yr(t,n){let s,i,r,o,a,l,c;const h=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next((d=>(d>this.params.maximumSequenceNumbersToCollect?(nt("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${d}`),i=this.params.maximumSequenceNumbersToCollect):i=d,o=Date.now(),this.nthSequenceNumber(t,i)))).next((d=>(s=d,a=Date.now(),this.removeTargets(t,s,n)))).next((d=>(r=d,l=Date.now(),this.removeOrphanedDocuments(t,s)))).next((d=>(c=Date.now(),cr()<=Tt.DEBUG&&nt("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-h}ms
	Determined least recently used ${i} in `+(a-o)+`ms
	Removed ${r} targets in `+(l-a)+`ms
	Removed ${d} documents in `+(c-l)+`ms
Total Duration: ${c-h}ms`),$.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:r,documentsRemoved:d}))))}}function GM(e,t){return new qM(e,t)}class KM{constructor(){this.changes=new Qi((t=>t.toString()),((t,n)=>t.isEqual(n))),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,n){this.assertNotApplied(),this.changes.set(t,Oe.newInvalidDocument(t).setReadTime(n))}getEntry(t,n){this.assertNotApplied();const s=this.changes.get(n);return s!==void 0?$.resolve(s):this.getFromCache(t,n)}getEntries(t,n){return this.getAllFromCache(t,n)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}class QM{constructor(t,n){this.overlayedDocument=t,this.mutatedFields=n}}class YM{constructor(t,n,s,i){this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=s,this.indexManager=i}getDocument(t,n){let s=null;return this.documentOverlayCache.getOverlay(t,n).next((i=>(s=i,this.remoteDocumentCache.getEntry(t,n)))).next((i=>(s!==null&&Zo(s.mutation,i,en.empty(),jt.now()),i)))}getDocuments(t,n){return this.remoteDocumentCache.getEntries(t,n).next((s=>this.getLocalViewOfDocuments(t,s,It()).next((()=>s))))}getLocalViewOfDocuments(t,n,s=It()){const i=Ci();return this.populateOverlays(t,i,n).next((()=>this.computeViews(t,n,i,s).next((r=>{let o=Lo();return r.forEach(((a,l)=>{o=o.insert(a,l.overlayedDocument)})),o}))))}getOverlayedDocuments(t,n){const s=Ci();return this.populateOverlays(t,s,n).next((()=>this.computeViews(t,n,s,It())))}populateOverlays(t,n,s){const i=[];return s.forEach((r=>{n.has(r)||i.push(r)})),this.documentOverlayCache.getOverlays(t,i).next((r=>{r.forEach(((o,a)=>{n.set(o,a)}))}))}computeViews(t,n,s,i){let r=ps();const o=Jo(),a=(function(){return Jo()})();return n.forEach(((l,c)=>{const h=s.get(c.key);i.has(c.key)&&(h===void 0||h.mutation instanceof oi)?r=r.insert(c.key,c):h!==void 0?(o.set(c.key,h.mutation.getFieldMask()),Zo(h.mutation,c,h.mutation.getFieldMask(),jt.now())):o.set(c.key,en.empty())})),this.recalculateAndSaveOverlays(t,r).next((l=>(l.forEach(((c,h)=>o.set(c,h))),n.forEach(((c,h)=>a.set(c,new QM(h,o.get(c)??null)))),a)))}recalculateAndSaveOverlays(t,n){const s=Jo();let i=new Xt(((o,a)=>o-a)),r=It();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,n).next((o=>{for(const a of o)a.keys().forEach((l=>{const c=n.get(l);if(c===null)return;let h=s.get(l)||en.empty();h=a.applyToLocalView(c,h),s.set(l,h);const d=(i.get(a.batchId)||It()).add(l);i=i.insert(a.batchId,d)}))})).next((()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,h=l.value,d=Tw();h.forEach((f=>{if(!r.has(f)){const p=Cw(n.get(f),s.get(f));p!==null&&d.set(f,p),r=r.add(f)}})),o.push(this.documentOverlayCache.saveOverlays(t,c,d))}return $.waitFor(o)})).next((()=>s))}recalculateAndSaveOverlaysForDocumentKeys(t,n){return this.remoteDocumentCache.getEntries(t,n).next((s=>this.recalculateAndSaveOverlays(t,s)))}getDocumentsMatchingQuery(t,n,s,i){return(function(o){return ut.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(t,n.path):J2(n)?this.getDocumentsMatchingCollectionGroupQuery(t,n,s,i):this.getDocumentsMatchingCollectionQuery(t,n,s,i)}getNextDocuments(t,n,s,i){return this.remoteDocumentCache.getAllFromCollectionGroup(t,n,s,i).next((r=>{const o=i-r.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,n,s.largestBatchId,i-r.size):$.resolve(Ci());let a=ma,l=r;return o.next((c=>$.forEach(c,((h,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),r.get(h)?$.resolve():this.remoteDocumentCache.getEntry(t,h).next((f=>{l=l.insert(h,f)}))))).next((()=>this.populateOverlays(t,c,r))).next((()=>this.computeViews(t,l,c,It()))).next((h=>({batchId:a,changes:ww(h)})))))}))}getDocumentsMatchingDocumentQuery(t,n){return this.getDocument(t,new ut(n)).next((s=>{let i=Lo();return s.isFoundDocument()&&(i=i.insert(s.key,s)),i}))}getDocumentsMatchingCollectionGroupQuery(t,n,s,i){const r=n.collectionGroup;let o=Lo();return this.indexManager.getCollectionParents(t,r).next((a=>$.forEach(a,(l=>{const c=(function(d,f){return new hu(f,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)})(n,l.child(r));return this.getDocumentsMatchingCollectionQuery(t,c,s,i).next((h=>{h.forEach(((d,f)=>{o=o.insert(d,f)}))}))})).next((()=>o))))}getDocumentsMatchingCollectionQuery(t,n,s,i){let r;return this.documentOverlayCache.getOverlaysForCollection(t,n.path,s.largestBatchId).next((o=>(r=o,this.remoteDocumentCache.getDocumentsMatchingQuery(t,n,s,r,i)))).next((o=>{r.forEach(((l,c)=>{const h=c.getKey();o.get(h)===null&&(o=o.insert(h,Oe.newInvalidDocument(h)))}));let a=Lo();return o.forEach(((l,c)=>{const h=r.get(l);h!==void 0&&Zo(h.mutation,c,en.empty(),jt.now()),fu(n,c)&&(a=a.insert(l,c))})),a}))}}class XM{constructor(t){this.serializer=t,this.Lr=new Map,this.kr=new Map}getBundleMetadata(t,n){return $.resolve(this.Lr.get(n))}saveBundleMetadata(t,n){return this.Lr.set(n.id,(function(i){return{id:i.id,version:i.version,createTime:Hn(i.createTime)}})(n)),$.resolve()}getNamedQuery(t,n){return $.resolve(this.kr.get(n))}saveNamedQuery(t,n){return this.kr.set(n.name,(function(i){return{name:i.name,query:$M(i.bundledQuery),readTime:Hn(i.readTime)}})(n)),$.resolve()}}class JM{constructor(){this.overlays=new Xt(ut.comparator),this.qr=new Map}getOverlay(t,n){return $.resolve(this.overlays.get(n))}getOverlays(t,n){const s=Ci();return $.forEach(n,(i=>this.getOverlay(t,i).next((r=>{r!==null&&s.set(i,r)})))).next((()=>s))}saveOverlays(t,n,s){return s.forEach(((i,r)=>{this.St(t,n,r)})),$.resolve()}removeOverlaysForBatchId(t,n,s){const i=this.qr.get(s);return i!==void 0&&(i.forEach((r=>this.overlays=this.overlays.remove(r))),this.qr.delete(s)),$.resolve()}getOverlaysForCollection(t,n,s){const i=Ci(),r=n.length+1,o=new ut(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===r&&l.largestBatchId>s&&i.set(l.getKey(),l)}return $.resolve(i)}getOverlaysForCollectionGroup(t,n,s,i){let r=new Xt(((c,h)=>c-h));const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>s){let h=r.get(c.largestBatchId);h===null&&(h=Ci(),r=r.insert(c.largestBatchId,h)),h.set(c.getKey(),c)}}const a=Ci(),l=r.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach(((c,h)=>a.set(c,h))),!(a.size()>=i)););return $.resolve(a)}St(t,n,s){const i=this.overlays.get(s.key);if(i!==null){const o=this.qr.get(i.largestBatchId).delete(s.key);this.qr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(s.key,new mM(n,s));let r=this.qr.get(n);r===void 0&&(r=It(),this.qr.set(n,r)),this.qr.set(n,r.add(s.key))}}class ZM{constructor(){this.sessionToken=Te.EMPTY_BYTE_STRING}getSessionToken(t){return $.resolve(this.sessionToken)}setSessionToken(t,n){return this.sessionToken=n,$.resolve()}}class $f{constructor(){this.Qr=new fe(me.$r),this.Ur=new fe(me.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(t,n){const s=new me(t,n);this.Qr=this.Qr.add(s),this.Ur=this.Ur.add(s)}Wr(t,n){t.forEach((s=>this.addReference(s,n)))}removeReference(t,n){this.Gr(new me(t,n))}zr(t,n){t.forEach((s=>this.removeReference(s,n)))}jr(t){const n=new ut(new Qt([])),s=new me(n,t),i=new me(n,t+1),r=[];return this.Ur.forEachInRange([s,i],(o=>{this.Gr(o),r.push(o.key)})),r}Jr(){this.Qr.forEach((t=>this.Gr(t)))}Gr(t){this.Qr=this.Qr.delete(t),this.Ur=this.Ur.delete(t)}Hr(t){const n=new ut(new Qt([])),s=new me(n,t),i=new me(n,t+1);let r=It();return this.Ur.forEachInRange([s,i],(o=>{r=r.add(o.key)})),r}containsKey(t){const n=new me(t,0),s=this.Qr.firstAfterOrEqual(n);return s!==null&&t.isEqual(s.key)}}class me{constructor(t,n){this.key=t,this.Yr=n}static $r(t,n){return ut.comparator(t.key,n.key)||Et(t.Yr,n.Yr)}static Kr(t,n){return Et(t.Yr,n.Yr)||ut.comparator(t.key,n.key)}}class tD{constructor(t,n){this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new fe(me.$r)}checkEmpty(t){return $.resolve(this.mutationQueue.length===0)}addMutationBatch(t,n,s,i){const r=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new gM(r,n,s,i);this.mutationQueue.push(o);for(const a of i)this.Zr=this.Zr.add(new me(a.key,r)),this.indexManager.addToCollectionParentIndex(t,a.key.path.popLast());return $.resolve(o)}lookupMutationBatch(t,n){return $.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(t,n){const s=n+1,i=this.ei(s),r=i<0?0:i;return $.resolve(this.mutationQueue.length>r?this.mutationQueue[r]:null)}getHighestUnacknowledgedBatchId(){return $.resolve(this.mutationQueue.length===0?Rf:this.tr-1)}getAllMutationBatches(t){return $.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,n){const s=new me(n,0),i=new me(n,Number.POSITIVE_INFINITY),r=[];return this.Zr.forEachInRange([s,i],(o=>{const a=this.Xr(o.Yr);r.push(a)})),$.resolve(r)}getAllMutationBatchesAffectingDocumentKeys(t,n){let s=new fe(Et);return n.forEach((i=>{const r=new me(i,0),o=new me(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([r,o],(a=>{s=s.add(a.Yr)}))})),$.resolve(this.ti(s))}getAllMutationBatchesAffectingQuery(t,n){const s=n.path,i=s.length+1;let r=s;ut.isDocumentKey(r)||(r=r.child(""));const o=new me(new ut(r),0);let a=new fe(Et);return this.Zr.forEachWhile((l=>{const c=l.key.path;return!!s.isPrefixOf(c)&&(c.length===i&&(a=a.add(l.Yr)),!0)}),o),$.resolve(this.ti(a))}ti(t){const n=[];return t.forEach((s=>{const i=this.Xr(s);i!==null&&n.push(i)})),n}removeMutationBatch(t,n){Ot(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Zr;return $.forEach(n.mutations,(i=>{const r=new me(i.key,n.batchId);return s=s.delete(r),this.referenceDelegate.markPotentiallyOrphaned(t,i.key)})).next((()=>{this.Zr=s}))}ir(t){}containsKey(t,n){const s=new me(n,0),i=this.Zr.firstAfterOrEqual(s);return $.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(t){return this.mutationQueue.length,$.resolve()}ni(t,n){return this.ei(t)}ei(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Xr(t){const n=this.ei(t);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class eD{constructor(t){this.ri=t,this.docs=(function(){return new Xt(ut.comparator)})(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,n){const s=n.key,i=this.docs.get(s),r=i?i.size:0,o=this.ri(n);return this.docs=this.docs.insert(s,{document:n.mutableCopy(),size:o}),this.size+=o-r,this.indexManager.addToCollectionParentIndex(t,s.path.popLast())}removeEntry(t){const n=this.docs.get(t);n&&(this.docs=this.docs.remove(t),this.size-=n.size)}getEntry(t,n){const s=this.docs.get(n);return $.resolve(s?s.document.mutableCopy():Oe.newInvalidDocument(n))}getEntries(t,n){let s=ps();return n.forEach((i=>{const r=this.docs.get(i);s=s.insert(i,r?r.document.mutableCopy():Oe.newInvalidDocument(i))})),$.resolve(s)}getDocumentsMatchingQuery(t,n,s,i){let r=ps();const o=n.path,a=new ut(o.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:h}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||x2(C2(h),s)<=0||(i.has(h.key)||fu(n,h))&&(r=r.insert(h.key,h.mutableCopy()))}return $.resolve(r)}getAllFromCollectionGroup(t,n,s,i){gt(9500)}ii(t,n){return $.forEach(this.docs,(s=>n(s)))}newChangeBuffer(t){return new nD(this)}getSize(t){return $.resolve(this.size)}}class nD extends KM{constructor(t){super(),this.Nr=t}applyChanges(t){const n=[];return this.changes.forEach(((s,i)=>{i.isValidDocument()?n.push(this.Nr.addEntry(t,i)):this.Nr.removeEntry(s)})),$.waitFor(n)}getFromCache(t,n){return this.Nr.getEntry(t,n)}getAllFromCache(t,n){return this.Nr.getEntries(t,n)}}class sD{constructor(t){this.persistence=t,this.si=new Qi((n=>Df(n)),Of),this.lastRemoteSnapshotVersion=_t.min(),this.highestTargetId=0,this.oi=0,this._i=new $f,this.targetCount=0,this.ai=Br.ur()}forEachTarget(t,n){return this.si.forEach(((s,i)=>n(i))),$.resolve()}getLastRemoteSnapshotVersion(t){return $.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return $.resolve(this.oi)}allocateTargetId(t){return this.highestTargetId=this.ai.next(),$.resolve(this.highestTargetId)}setTargetsMetadata(t,n,s){return s&&(this.lastRemoteSnapshotVersion=s),n>this.oi&&(this.oi=n),$.resolve()}Pr(t){this.si.set(t.target,t);const n=t.targetId;n>this.highestTargetId&&(this.ai=new Br(n),this.highestTargetId=n),t.sequenceNumber>this.oi&&(this.oi=t.sequenceNumber)}addTargetData(t,n){return this.Pr(n),this.targetCount+=1,$.resolve()}updateTargetData(t,n){return this.Pr(n),$.resolve()}removeTargetData(t,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,$.resolve()}removeTargets(t,n,s){let i=0;const r=[];return this.si.forEach(((o,a)=>{a.sequenceNumber<=n&&s.get(a.targetId)===null&&(this.si.delete(o),r.push(this.removeMatchingKeysForTargetId(t,a.targetId)),i++)})),$.waitFor(r).next((()=>i))}getTargetCount(t){return $.resolve(this.targetCount)}getTargetData(t,n){const s=this.si.get(n)||null;return $.resolve(s)}addMatchingKeys(t,n,s){return this._i.Wr(n,s),$.resolve()}removeMatchingKeys(t,n,s){this._i.zr(n,s);const i=this.persistence.referenceDelegate,r=[];return i&&n.forEach((o=>{r.push(i.markPotentiallyOrphaned(t,o))})),$.waitFor(r)}removeMatchingKeysForTargetId(t,n){return this._i.jr(n),$.resolve()}getMatchingKeysForTargetId(t,n){const s=this._i.Hr(n);return $.resolve(s)}containsKey(t,n){return $.resolve(this._i.containsKey(n))}}class Hw{constructor(t,n){this.ui={},this.overlays={},this.ci=new lu(0),this.li=!1,this.li=!0,this.hi=new ZM,this.referenceDelegate=t(this),this.Pi=new sD(this),this.indexManager=new BM,this.remoteDocumentCache=(function(i){return new eD(i)})((s=>this.referenceDelegate.Ti(s))),this.serializer=new UM(n),this.Ii=new XM(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let n=this.overlays[t.toKey()];return n||(n=new JM,this.overlays[t.toKey()]=n),n}getMutationQueue(t,n){let s=this.ui[t.toKey()];return s||(s=new tD(n,this.referenceDelegate),this.ui[t.toKey()]=s),s}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(t,n,s){nt("MemoryPersistence","Starting transaction:",t);const i=new iD(this.ci.next());return this.referenceDelegate.Ei(),s(i).next((r=>this.referenceDelegate.di(i).next((()=>r)))).toPromise().then((r=>(i.raiseOnCommittedEvent(),r)))}Ai(t,n){return $.or(Object.values(this.ui).map((s=>()=>s.containsKey(t,n))))}}class iD extends P2{constructor(t){super(),this.currentSequenceNumber=t}}class Bf{constructor(t){this.persistence=t,this.Ri=new $f,this.Vi=null}static mi(t){return new Bf(t)}get fi(){if(this.Vi)return this.Vi;throw gt(60996)}addReference(t,n,s){return this.Ri.addReference(s,n),this.fi.delete(s.toString()),$.resolve()}removeReference(t,n,s){return this.Ri.removeReference(s,n),this.fi.add(s.toString()),$.resolve()}markPotentiallyOrphaned(t,n){return this.fi.add(n.toString()),$.resolve()}removeTarget(t,n){this.Ri.jr(n.targetId).forEach((i=>this.fi.add(i.toString())));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(t,n.targetId).next((i=>{i.forEach((r=>this.fi.add(r.toString())))})).next((()=>s.removeTargetData(t,n)))}Ei(){this.Vi=new Set}di(t){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return $.forEach(this.fi,(s=>{const i=ut.fromPath(s);return this.gi(t,i).next((r=>{r||n.removeEntry(i,_t.min())}))})).next((()=>(this.Vi=null,n.apply(t))))}updateLimboDocument(t,n){return this.gi(t,n).next((s=>{s?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(t){return 0}gi(t,n){return $.or([()=>$.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(t,n),()=>this.persistence.Ai(t,n)])}}class kc{constructor(t,n){this.persistence=t,this.pi=new Qi((s=>O2(s.path)),((s,i)=>s.isEqual(i))),this.garbageCollector=GM(this,n)}static mi(t,n){return new kc(t,n)}Ei(){}di(t){return $.resolve()}forEachTarget(t,n){return this.persistence.getTargetCache().forEachTarget(t,n)}gr(t){const n=this.wr(t);return this.persistence.getTargetCache().getTargetCount(t).next((s=>n.next((i=>s+i))))}wr(t){let n=0;return this.pr(t,(s=>{n++})).next((()=>n))}pr(t,n){return $.forEach(this.pi,((s,i)=>this.br(t,s,i).next((r=>r?$.resolve():n(i)))))}removeTargets(t,n,s){return this.persistence.getTargetCache().removeTargets(t,n,s)}removeOrphanedDocuments(t,n){let s=0;const i=this.persistence.getRemoteDocumentCache(),r=i.newChangeBuffer();return i.ii(t,(o=>this.br(t,o,n).next((a=>{a||(s++,r.removeEntry(o,_t.min()))})))).next((()=>r.apply(t))).next((()=>s))}markPotentiallyOrphaned(t,n){return this.pi.set(n,t.currentSequenceNumber),$.resolve()}removeTarget(t,n){const s=n.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,s)}addReference(t,n,s){return this.pi.set(s,t.currentSequenceNumber),$.resolve()}removeReference(t,n,s){return this.pi.set(s,t.currentSequenceNumber),$.resolve()}updateLimboDocument(t,n){return this.pi.set(n,t.currentSequenceNumber),$.resolve()}Ti(t){let n=t.key.toString().length;return t.isFoundDocument()&&(n+=zl(t.data.value)),n}br(t,n,s){return $.or([()=>this.persistence.Ai(t,n),()=>this.persistence.getTargetCache().containsKey(t,n),()=>{const i=this.pi.get(n);return $.resolve(i!==void 0&&i>s)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}class Hf{constructor(t,n,s,i){this.targetId=t,this.fromCache=n,this.Es=s,this.ds=i}static As(t,n){let s=It(),i=It();for(const r of n.docChanges)switch(r.type){case 0:s=s.add(r.doc.key);break;case 1:i=i.add(r.doc.key)}return new Hf(t,n.fromCache,s,i)}}class rD{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}class oD{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return OC()?8:M2(Ve())>0?6:4})()}initialize(t,n){this.ps=t,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(t,n,s,i){const r={result:null};return this.ys(t,n).next((o=>{r.result=o})).next((()=>{if(!r.result)return this.ws(t,n,i,s).next((o=>{r.result=o}))})).next((()=>{if(r.result)return;const o=new rD;return this.Ss(t,n,o).next((a=>{if(r.result=a,this.Vs)return this.bs(t,n,o,a.size)}))})).next((()=>r.result))}bs(t,n,s,i){return s.documentReadCount<this.fs?(cr()<=Tt.DEBUG&&nt("QueryEngine","SDK will not create cache indexes for query:",ur(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),$.resolve()):(cr()<=Tt.DEBUG&&nt("QueryEngine","Query:",ur(n),"scans",s.documentReadCount,"local documents and returns",i,"documents as results."),s.documentReadCount>this.gs*i?(cr()<=Tt.DEBUG&&nt("QueryEngine","The SDK decides to create cache indexes for query:",ur(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,$n(n))):$.resolve())}ys(t,n){if(c_(n))return $.resolve(null);let s=$n(n);return this.indexManager.getIndexType(t,s).next((i=>i===0?null:(n.limit!==null&&i===1&&(n=pd(n,null,"F"),s=$n(n)),this.indexManager.getDocumentsMatchingTarget(t,s).next((r=>{const o=It(...r);return this.ps.getDocuments(t,o).next((a=>this.indexManager.getMinOffset(t,s).next((l=>{const c=this.Ds(n,a);return this.Cs(n,c,o,l.readTime)?this.ys(t,pd(n,null,"F")):this.vs(t,c,n,l)}))))})))))}ws(t,n,s,i){return c_(n)||i.isEqual(_t.min())?$.resolve(null):this.ps.getDocuments(t,s).next((r=>{const o=this.Ds(n,r);return this.Cs(n,o,s,i)?$.resolve(null):(cr()<=Tt.DEBUG&&nt("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),ur(n)),this.vs(t,o,n,k2(i,ma)).next((a=>a)))}))}Ds(t,n){let s=new fe(vw(t));return n.forEach(((i,r)=>{fu(t,r)&&(s=s.add(r))})),s}Cs(t,n,s,i){if(t.limit===null)return!1;if(s.size!==n.size)return!0;const r=t.limitType==="F"?n.last():n.first();return!!r&&(r.hasPendingWrites||r.version.compareTo(i)>0)}Ss(t,n,s){return cr()<=Tt.DEBUG&&nt("QueryEngine","Using full collection scan to execute query:",ur(n)),this.ps.getDocumentsMatchingQuery(t,n,Js.min(),s)}vs(t,n,s,i){return this.ps.getDocumentsMatchingQuery(t,s,i).next((r=>(n.forEach((o=>{r=r.insert(o.key,o)})),r)))}}const jf="LocalStore",aD=3e8;class lD{constructor(t,n,s,i){this.persistence=t,this.Fs=n,this.serializer=i,this.Ms=new Xt(Et),this.xs=new Qi((r=>Df(r)),Of),this.Os=new Map,this.Ns=t.getRemoteDocumentCache(),this.Pi=t.getTargetCache(),this.Ii=t.getBundleCache(),this.Bs(s)}Bs(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new YM(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>t.collect(n,this.Ms)))}}function cD(e,t,n,s){return new lD(e,t,n,s)}async function jw(e,t){const n=yt(e);return await n.persistence.runTransaction("Handle user change","readonly",(s=>{let i;return n.mutationQueue.getAllMutationBatches(s).next((r=>(i=r,n.Bs(t),n.mutationQueue.getAllMutationBatches(s)))).next((r=>{const o=[],a=[];let l=It();for(const c of i){o.push(c.batchId);for(const h of c.mutations)l=l.add(h.key)}for(const c of r){a.push(c.batchId);for(const h of c.mutations)l=l.add(h.key)}return n.localDocuments.getDocuments(s,l).next((c=>({Ls:c,removedBatchIds:o,addedBatchIds:a})))}))}))}function uD(e,t){const n=yt(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(s=>{const i=t.batch.keys(),r=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(a,l,c,h){const d=c.batch,f=d.keys();let p=$.resolve();return f.forEach((_=>{p=p.next((()=>h.getEntry(l,_))).next((y=>{const v=c.docVersions.get(_);Ot(v!==null,48541),y.version.compareTo(v)<0&&(d.applyToRemoteDocument(y,c),y.isValidDocument()&&(y.setReadTime(c.commitVersion),h.addEntry(y)))}))})),p.next((()=>a.mutationQueue.removeMutationBatch(l,d)))})(n,s,t,r).next((()=>r.apply(s))).next((()=>n.mutationQueue.performConsistencyCheck(s))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(s,i,t.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,(function(a){let l=It();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l})(t)))).next((()=>n.localDocuments.getDocuments(s,i)))}))}function zw(e){const t=yt(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>t.Pi.getLastRemoteSnapshotVersion(n)))}function hD(e,t){const n=yt(e),s=t.snapshotVersion;let i=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(r=>{const o=n.Ns.newChangeBuffer({trackRemovals:!0});i=n.Ms;const a=[];t.targetChanges.forEach(((h,d)=>{const f=i.get(d);if(!f)return;a.push(n.Pi.removeMatchingKeys(r,h.removedDocuments,d).next((()=>n.Pi.addMatchingKeys(r,h.addedDocuments,d))));let p=f.withSequenceNumber(r.currentSequenceNumber);t.targetMismatches.get(d)!==null?p=p.withResumeToken(Te.EMPTY_BYTE_STRING,_t.min()).withLastLimboFreeSnapshotVersion(_t.min()):h.resumeToken.approximateByteSize()>0&&(p=p.withResumeToken(h.resumeToken,s)),i=i.insert(d,p),(function(y,v,w){return y.resumeToken.approximateByteSize()===0||v.snapshotVersion.toMicroseconds()-y.snapshotVersion.toMicroseconds()>=aD?!0:w.addedDocuments.size+w.modifiedDocuments.size+w.removedDocuments.size>0})(f,p,h)&&a.push(n.Pi.updateTargetData(r,p))}));let l=ps(),c=It();if(t.documentUpdates.forEach((h=>{t.resolvedLimboDocuments.has(h)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(r,h))})),a.push(dD(r,o,t.documentUpdates).next((h=>{l=h.ks,c=h.qs}))),!s.isEqual(_t.min())){const h=n.Pi.getLastRemoteSnapshotVersion(r).next((d=>n.Pi.setTargetsMetadata(r,r.currentSequenceNumber,s)));a.push(h)}return $.waitFor(a).next((()=>o.apply(r))).next((()=>n.localDocuments.getLocalViewOfDocuments(r,l,c))).next((()=>l))})).then((r=>(n.Ms=i,r)))}function dD(e,t,n){let s=It(),i=It();return n.forEach((r=>s=s.add(r))),t.getEntries(e,s).next((r=>{let o=ps();return n.forEach(((a,l)=>{const c=r.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual(_t.min())?(t.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(t.addEntry(l),o=o.insert(a,l)):nt(jf,"Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)})),{ks:o,qs:i}}))}function fD(e,t){const n=yt(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(s=>(t===void 0&&(t=Rf),n.mutationQueue.getNextMutationBatchAfterBatchId(s,t))))}function pD(e,t){const n=yt(e);return n.persistence.runTransaction("Allocate target","readwrite",(s=>{let i;return n.Pi.getTargetData(s,t).next((r=>r?(i=r,$.resolve(i)):n.Pi.allocateTargetId(s).next((o=>(i=new Vs(t,o,"TargetPurposeListen",s.currentSequenceNumber),n.Pi.addTargetData(s,i).next((()=>i)))))))})).then((s=>{const i=n.Ms.get(s.targetId);return(i===null||s.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(s.targetId,s),n.xs.set(t,s.targetId)),s}))}async function vd(e,t,n){const s=yt(e),i=s.Ms.get(t),r=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",r,(o=>s.persistence.referenceDelegate.removeTarget(o,i)))}catch(o){if(!no(o))throw o;nt(jf,`Failed to update sequence numbers for target ${t}: ${o}`)}s.Ms=s.Ms.remove(t),s.xs.delete(i.target)}function T_(e,t,n){const s=yt(e);let i=_t.min(),r=It();return s.persistence.runTransaction("Execute query","readwrite",(o=>(function(l,c,h){const d=yt(l),f=d.xs.get(h);return f!==void 0?$.resolve(d.Ms.get(f)):d.Pi.getTargetData(c,h)})(s,o,$n(t)).next((a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,s.Pi.getMatchingKeysForTargetId(o,a.targetId).next((l=>{r=l}))})).next((()=>s.Fs.getDocumentsMatchingQuery(o,t,n?i:_t.min(),n?r:It()))).next((a=>(gD(s,tM(t),a),{documents:a,Qs:r})))))}function gD(e,t,n){let s=e.Os.get(t)||_t.min();n.forEach(((i,r)=>{r.readTime.compareTo(s)>0&&(s=r.readTime)})),e.Os.set(t,s)}class E_{constructor(){this.activeTargetIds=oM()}zs(t){this.activeTargetIds=this.activeTargetIds.add(t)}js(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Gs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class mD{constructor(){this.Mo=new E_,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,n,s){}addLocalQueryTarget(t,n=!0){return n&&this.Mo.zs(t),this.xo[t]||"not-current"}updateQueryState(t,n,s){this.xo[t]=n}removeLocalQueryTarget(t){this.Mo.js(t)}isLocalQueryTarget(t){return this.Mo.activeTargetIds.has(t)}clearQueryState(t){delete this.xo[t]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(t){return this.Mo.activeTargetIds.has(t)}start(){return this.Mo=new E_,Promise.resolve()}handleUserChange(t,n,s){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}class _D{Oo(t){}shutdown(){}}const I_="ConnectivityMonitor";class S_{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(t){this.qo.push(t)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){nt(I_,"Network connectivity changed: AVAILABLE");for(const t of this.qo)t(0)}ko(){nt(I_,"Network connectivity changed: UNAVAILABLE");for(const t of this.qo)t(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let bl=null;function bd(){return bl===null?bl=(function(){return 268435456+Math.round(2147483648*Math.random())})():bl++,"0x"+bl.toString(16)}const yh="RestConnection",yD={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class vD{get $o(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const n=t.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+t.host,this.Ko=`projects/${s}/databases/${i}`,this.Wo=this.databaseId.database===bc?`project_id=${s}`:`project_id=${s}&database_id=${i}`}Go(t,n,s,i,r){const o=bd(),a=this.zo(t,n.toUriEncodedString());nt(yh,`Sending RPC '${t}' ${o}:`,a,s);const l={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(l,i,r);const{host:c}=new URL(a),h=Xr(c);return this.Jo(t,a,l,s,h).then((d=>(nt(yh,`Received RPC '${t}' ${o}: `,d),d)),(d=>{throw zi(yh,`RPC '${t}' ${o} failed with error: `,d,"url: ",a,"request:",s),d}))}Ho(t,n,s,i,r,o){return this.Go(t,n,s,i,r)}jo(t,n,s){t["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+to})(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((i,r)=>t[r]=i)),s&&s.headers.forEach(((i,r)=>t[r]=i))}zo(t,n){const s=yD[t];return`${this.Uo}/v1/${n}:${s}`}terminate(){}}class bD{constructor(t){this.Yo=t.Yo,this.Zo=t.Zo}Xo(t){this.e_=t}t_(t){this.n_=t}r_(t){this.i_=t}onMessage(t){this.s_=t}close(){this.Zo()}send(t){this.Yo(t)}o_(){this.e_()}__(){this.n_()}a_(t){this.i_(t)}u_(t){this.s_(t)}}const xe="WebChannelConnection";class wD extends vD{constructor(t){super(t),this.c_=[],this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Jo(t,n,s,i,r){const o=bd();return new Promise(((a,l)=>{const c=new q0;c.setWithCredentials(!0),c.listenOnce(G0.COMPLETE,(()=>{try{switch(c.getLastErrorCode()){case jl.NO_ERROR:const d=c.getResponseJson();nt(xe,`XHR for RPC '${t}' ${o} received:`,JSON.stringify(d)),a(d);break;case jl.TIMEOUT:nt(xe,`RPC '${t}' ${o} timed out`),l(new it(j.DEADLINE_EXCEEDED,"Request time out"));break;case jl.HTTP_ERROR:const f=c.getStatus();if(nt(xe,`RPC '${t}' ${o} failed with status:`,f,"response text:",c.getResponseText()),f>0){let p=c.getResponseJson();Array.isArray(p)&&(p=p[0]);const _=p?.error;if(_&&_.status&&_.message){const y=(function(w){const M=w.toLowerCase().replace(/_/g,"-");return Object.values(j).indexOf(M)>=0?M:j.UNKNOWN})(_.status);l(new it(y,_.message))}else l(new it(j.UNKNOWN,"Server responded with status "+c.getStatus()))}else l(new it(j.UNAVAILABLE,"Connection failed."));break;default:gt(9055,{l_:t,streamId:o,h_:c.getLastErrorCode(),P_:c.getLastError()})}}finally{nt(xe,`RPC '${t}' ${o} completed.`)}}));const h=JSON.stringify(i);nt(xe,`RPC '${t}' ${o} sending request:`,i),c.send(n,"POST",h,s,15)}))}T_(t,n,s){const i=bd(),r=[this.Uo,"/","google.firestore.v1.Firestore","/",t,"/channel"],o=Y0(),a=Q0(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.jo(l.initMessageHeaders,n,s),l.encodeInitMessageHeaders=!0;const h=r.join("");nt(xe,`Creating RPC '${t}' stream ${i}: ${h}`,l);const d=o.createWebChannel(h,l);this.I_(d);let f=!1,p=!1;const _=new bD({Yo:v=>{p?nt(xe,`Not sending because RPC '${t}' stream ${i} is closed:`,v):(f||(nt(xe,`Opening RPC '${t}' stream ${i} transport.`),d.open(),f=!0),nt(xe,`RPC '${t}' stream ${i} sending:`,v),d.send(v))},Zo:()=>d.close()}),y=(v,w,M)=>{v.listen(w,(E=>{try{M(E)}catch(x){setTimeout((()=>{throw x}),0)}}))};return y(d,Oo.EventType.OPEN,(()=>{p||(nt(xe,`RPC '${t}' stream ${i} transport opened.`),_.o_())})),y(d,Oo.EventType.CLOSE,(()=>{p||(p=!0,nt(xe,`RPC '${t}' stream ${i} transport closed`),_.a_(),this.E_(d))})),y(d,Oo.EventType.ERROR,(v=>{p||(p=!0,zi(xe,`RPC '${t}' stream ${i} transport errored. Name:`,v.name,"Message:",v.message),_.a_(new it(j.UNAVAILABLE,"The operation could not be completed")))})),y(d,Oo.EventType.MESSAGE,(v=>{if(!p){const w=v.data[0];Ot(!!w,16349);const M=w,E=M?.error||M[0]?.error;if(E){nt(xe,`RPC '${t}' stream ${i} received error:`,E);const x=E.status;let O=(function(b){const T=ie[b];if(T!==void 0)return Pw(T)})(x),V=E.message;O===void 0&&(O=j.INTERNAL,V="Unknown error status: "+x+" with message "+E.message),p=!0,_.a_(new it(O,V)),d.close()}else nt(xe,`RPC '${t}' stream ${i} received:`,w),_.u_(w)}})),y(a,K0.STAT_EVENT,(v=>{v.stat===ld.PROXY?nt(xe,`RPC '${t}' stream ${i} detected buffering proxy`):v.stat===ld.NOPROXY&&nt(xe,`RPC '${t}' stream ${i} detected no buffering proxy`)})),setTimeout((()=>{_.__()}),0),_}terminate(){this.c_.forEach((t=>t.close())),this.c_=[]}I_(t){this.c_.push(t)}E_(t){this.c_=this.c_.filter((n=>n===t))}}function vh(){return typeof document<"u"?document:null}function _u(e){return new SM(e,!0)}class Ww{constructor(t,n,s=1e3,i=1.5,r=6e4){this.Mi=t,this.timerId=n,this.d_=s,this.A_=i,this.R_=r,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(t){this.cancel();const n=Math.floor(this.V_+this.y_()),s=Math.max(0,Date.now()-this.f_),i=Math.max(0,n-s);i>0&&nt("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,(()=>(this.f_=Date.now(),t()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const A_="PersistentStream";class qw{constructor(t,n,s,i,r,o,a,l){this.Mi=t,this.S_=s,this.b_=i,this.connection=r,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Ww(t,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(t){this.Q_(),this.stream.send(t)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(t,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,t!==4?this.M_.reset():n&&n.code===j.RESOURCE_EXHAUSTED?(fs(n.toString()),fs("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===j.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.r_(n)}K_(){}auth(){this.state=1;const t=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([s,i])=>{this.D_===n&&this.G_(s,i)}),(s=>{t((()=>{const i=new it(j.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(i)}))}))}G_(t,n){const s=this.W_(this.D_);this.stream=this.j_(t,n),this.stream.Xo((()=>{s((()=>this.listener.Xo()))})),this.stream.t_((()=>{s((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((i=>{s((()=>this.z_(i)))})),this.stream.onMessage((i=>{s((()=>++this.F_==1?this.J_(i):this.onNext(i)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(t){return nt(A_,`close with error: ${t}`),this.stream=null,this.close(4,t)}W_(t){return n=>{this.Mi.enqueueAndForget((()=>this.D_===t?n():(nt(A_,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class TD extends qw{constructor(t,n,s,i,r,o){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,s,i,o),this.serializer=r}j_(t,n){return this.connection.T_("Listen",t,n)}J_(t){return this.onNext(t)}onNext(t){this.M_.reset();const n=CM(this.serializer,t),s=(function(r){if(!("targetChange"in r))return _t.min();const o=r.targetChange;return o.targetIds&&o.targetIds.length?_t.min():o.readTime?Hn(o.readTime):_t.min()})(t);return this.listener.H_(n,s)}Y_(t){const n={};n.database=yd(this.serializer),n.addTarget=(function(r,o){let a;const l=o.target;if(a=fd(l)?{documents:PM(r,l)}:{query:MM(r,l).ft},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=Ow(r,o.resumeToken);const c=gd(r,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(_t.min())>0){a.readTime=Ac(r,o.snapshotVersion.toTimestamp());const c=gd(r,o.expectedCount);c!==null&&(a.expectedCount=c)}return a})(this.serializer,t);const s=OM(this.serializer,t);s&&(n.labels=s),this.q_(n)}Z_(t){const n={};n.database=yd(this.serializer),n.removeTarget=t,this.q_(n)}}class ED extends qw{constructor(t,n,s,i,r,o){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,s,i,o),this.serializer=r}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(t,n){return this.connection.T_("Write",t,n)}J_(t){return Ot(!!t.streamToken,31322),this.lastStreamToken=t.streamToken,Ot(!t.writeResults||t.writeResults.length===0,55816),this.listener.ta()}onNext(t){Ot(!!t.streamToken,12678),this.lastStreamToken=t.streamToken,this.M_.reset();const n=RM(t.writeResults,t.commitTime),s=Hn(t.commitTime);return this.listener.na(s,n)}ra(){const t={};t.database=yd(this.serializer),this.q_(t)}ea(t){const n={streamToken:this.lastStreamToken,writes:t.map((s=>xM(this.serializer,s)))};this.q_(n)}}class ID{}class SD extends ID{constructor(t,n,s,i){super(),this.authCredentials=t,this.appCheckCredentials=n,this.connection=s,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new it(j.FAILED_PRECONDITION,"The client has already been terminated.")}Go(t,n,s,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([r,o])=>this.connection.Go(t,md(n,s),i,r,o))).catch((r=>{throw r.name==="FirebaseError"?(r.code===j.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),r):new it(j.UNKNOWN,r.toString())}))}Ho(t,n,s,i,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([o,a])=>this.connection.Ho(t,md(n,s),i,o,a,r))).catch((o=>{throw o.name==="FirebaseError"?(o.code===j.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new it(j.UNKNOWN,o.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class AD{constructor(t,n){this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(t){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.ca("Offline")))}set(t){this.Pa(),this.oa=0,t==="Online"&&(this.aa=!1),this.ca(t)}ca(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}la(t){const n=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(fs(n),this.aa=!1):nt("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const Wi="RemoteStore";class kD{constructor(t,n,s,i,r){this.localStore=t,this.datastore=n,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=r,this.Aa.Oo((o=>{s.enqueueAndForget((async()=>{Yi(this)&&(nt(Wi,"Restarting streams for network reachability change."),await(async function(l){const c=yt(l);c.Ea.add(4),await ja(c),c.Ra.set("Unknown"),c.Ea.delete(4),await yu(c)})(this))}))})),this.Ra=new AD(s,i)}}async function yu(e){if(Yi(e))for(const t of e.da)await t(!0)}async function ja(e){for(const t of e.da)await t(!1)}function Gw(e,t){const n=yt(e);n.Ia.has(t.targetId)||(n.Ia.set(t.targetId,t),Gf(n)?qf(n):so(n).O_()&&Wf(n,t))}function zf(e,t){const n=yt(e),s=so(n);n.Ia.delete(t),s.O_()&&Kw(n,t),n.Ia.size===0&&(s.O_()?s.L_():Yi(n)&&n.Ra.set("Unknown"))}function Wf(e,t){if(e.Va.Ue(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(_t.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}so(e).Y_(t)}function Kw(e,t){e.Va.Ue(t),so(e).Z_(t)}function qf(e){e.Va=new wM({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),At:t=>e.Ia.get(t)||null,ht:()=>e.datastore.serializer.databaseId}),so(e).start(),e.Ra.ua()}function Gf(e){return Yi(e)&&!so(e).x_()&&e.Ia.size>0}function Yi(e){return yt(e).Ea.size===0}function Qw(e){e.Va=void 0}async function CD(e){e.Ra.set("Online")}async function xD(e){e.Ia.forEach(((t,n)=>{Wf(e,t)}))}async function RD(e,t){Qw(e),Gf(e)?(e.Ra.ha(t),qf(e)):e.Ra.set("Unknown")}async function PD(e,t,n){if(e.Ra.set("Online"),t instanceof Dw&&t.state===2&&t.cause)try{await(async function(i,r){const o=r.cause;for(const a of r.targetIds)i.Ia.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.Ia.delete(a),i.Va.removeTarget(a))})(e,t)}catch(s){nt(Wi,"Failed to remove targets %s: %s ",t.targetIds.join(","),s),await Cc(e,s)}else if(t instanceof Gl?e.Va.Ze(t):t instanceof Mw?e.Va.st(t):e.Va.tt(t),!n.isEqual(_t.min()))try{const s=await zw(e.localStore);n.compareTo(s)>=0&&await(function(r,o){const a=r.Va.Tt(o);return a.targetChanges.forEach(((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const h=r.Ia.get(c);h&&r.Ia.set(c,h.withResumeToken(l.resumeToken,o))}})),a.targetMismatches.forEach(((l,c)=>{const h=r.Ia.get(l);if(!h)return;r.Ia.set(l,h.withResumeToken(Te.EMPTY_BYTE_STRING,h.snapshotVersion)),Kw(r,l);const d=new Vs(h.target,l,c,h.sequenceNumber);Wf(r,d)})),r.remoteSyncer.applyRemoteEvent(a)})(e,n)}catch(s){nt(Wi,"Failed to raise snapshot:",s),await Cc(e,s)}}async function Cc(e,t,n){if(!no(t))throw t;e.Ea.add(1),await ja(e),e.Ra.set("Offline"),n||(n=()=>zw(e.localStore)),e.asyncQueue.enqueueRetryable((async()=>{nt(Wi,"Retrying IndexedDB access"),await n(),e.Ea.delete(1),await yu(e)}))}function Yw(e,t){return t().catch((n=>Cc(e,n,t)))}async function vu(e){const t=yt(e),n=ni(t);let s=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:Rf;for(;MD(t);)try{const i=await fD(t.localStore,s);if(i===null){t.Ta.length===0&&n.L_();break}s=i.batchId,DD(t,i)}catch(i){await Cc(t,i)}Xw(t)&&Jw(t)}function MD(e){return Yi(e)&&e.Ta.length<10}function DD(e,t){e.Ta.push(t);const n=ni(e);n.O_()&&n.X_&&n.ea(t.mutations)}function Xw(e){return Yi(e)&&!ni(e).x_()&&e.Ta.length>0}function Jw(e){ni(e).start()}async function OD(e){ni(e).ra()}async function LD(e){const t=ni(e);for(const n of e.Ta)t.ea(n.mutations)}async function ND(e,t,n){const s=e.Ta.shift(),i=Vf.from(s,t,n);await Yw(e,(()=>e.remoteSyncer.applySuccessfulWrite(i))),await vu(e)}async function VD(e,t){t&&ni(e).X_&&await(async function(s,i){if((function(o){return yM(o)&&o!==j.ABORTED})(i.code)){const r=s.Ta.shift();ni(s).B_(),await Yw(s,(()=>s.remoteSyncer.rejectFailedWrite(r.batchId,i))),await vu(s)}})(e,t),Xw(e)&&Jw(e)}async function k_(e,t){const n=yt(e);n.asyncQueue.verifyOperationInProgress(),nt(Wi,"RemoteStore received new credentials");const s=Yi(n);n.Ea.add(3),await ja(n),s&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.Ea.delete(3),await yu(n)}async function FD(e,t){const n=yt(e);t?(n.Ea.delete(2),await yu(n)):t||(n.Ea.add(2),await ja(n),n.Ra.set("Unknown"))}function so(e){return e.ma||(e.ma=(function(n,s,i){const r=yt(n);return r.sa(),new TD(s,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,i)})(e.datastore,e.asyncQueue,{Xo:CD.bind(null,e),t_:xD.bind(null,e),r_:RD.bind(null,e),H_:PD.bind(null,e)}),e.da.push((async t=>{t?(e.ma.B_(),Gf(e)?qf(e):e.Ra.set("Unknown")):(await e.ma.stop(),Qw(e))}))),e.ma}function ni(e){return e.fa||(e.fa=(function(n,s,i){const r=yt(n);return r.sa(),new ED(s,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,i)})(e.datastore,e.asyncQueue,{Xo:()=>Promise.resolve(),t_:OD.bind(null,e),r_:VD.bind(null,e),ta:LD.bind(null,e),na:ND.bind(null,e)}),e.da.push((async t=>{t?(e.fa.B_(),await vu(e)):(await e.fa.stop(),e.Ta.length>0&&(nt(Wi,`Stopping write stream with ${e.Ta.length} pending writes`),e.Ta=[]))}))),e.fa}class Kf{constructor(t,n,s,i,r){this.asyncQueue=t,this.timerId=n,this.targetTimeMs=s,this.op=i,this.removalCallback=r,this.deferred=new qs,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((o=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(t,n,s,i,r){const o=Date.now()+s,a=new Kf(t,n,o,i,r);return a.start(s),a}start(t){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new it(j.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((t=>this.deferred.resolve(t)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Qf(e,t){if(fs("AsyncQueue",`${t}: ${e}`),no(e))return new it(j.UNAVAILABLE,`${t}: ${e}`);throw e}class Cr{static emptySet(t){return new Cr(t.comparator)}constructor(t){this.comparator=t?(n,s)=>t(n,s)||ut.comparator(n.key,s.key):(n,s)=>ut.comparator(n.key,s.key),this.keyedMap=Lo(),this.sortedSet=new Xt(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const n=this.keyedMap.get(t);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal(((n,s)=>(t(n),!1)))}add(t){const n=this.delete(t.key);return n.copy(n.keyedMap.insert(t.key,t),n.sortedSet.insert(t,null))}delete(t){const n=this.get(t);return n?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(n)):this}isEqual(t){if(!(t instanceof Cr)||this.size!==t.size)return!1;const n=this.sortedSet.getIterator(),s=t.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,r=s.getNext().key;if(!i.isEqual(r))return!1}return!0}toString(){const t=[];return this.forEach((n=>{t.push(n.toString())})),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,n){const s=new Cr;return s.comparator=this.comparator,s.keyedMap=t,s.sortedSet=n,s}}class C_{constructor(){this.ga=new Xt(ut.comparator)}track(t){const n=t.doc.key,s=this.ga.get(n);s?t.type!==0&&s.type===3?this.ga=this.ga.insert(n,t):t.type===3&&s.type!==1?this.ga=this.ga.insert(n,{type:s.type,doc:t.doc}):t.type===2&&s.type===2?this.ga=this.ga.insert(n,{type:2,doc:t.doc}):t.type===2&&s.type===0?this.ga=this.ga.insert(n,{type:0,doc:t.doc}):t.type===1&&s.type===0?this.ga=this.ga.remove(n):t.type===1&&s.type===2?this.ga=this.ga.insert(n,{type:1,doc:s.doc}):t.type===0&&s.type===1?this.ga=this.ga.insert(n,{type:2,doc:t.doc}):gt(63341,{Rt:t,pa:s}):this.ga=this.ga.insert(n,t)}ya(){const t=[];return this.ga.inorderTraversal(((n,s)=>{t.push(s)})),t}}class Hr{constructor(t,n,s,i,r,o,a,l,c){this.query=t,this.docs=n,this.oldDocs=s,this.docChanges=i,this.mutatedKeys=r,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(t,n,s,i,r){const o=[];return n.forEach((a=>{o.push({type:0,doc:a})})),new Hr(t,n,Cr.emptySet(n),o,s,i,!0,!1,r)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&du(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const n=this.docChanges,s=t.docChanges;if(n.length!==s.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==s[i].type||!n[i].doc.isEqual(s[i].doc))return!1;return!0}}class UD{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((t=>t.Da()))}}class $D{constructor(){this.queries=x_(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,s){const i=yt(n),r=i.queries;i.queries=x_(),r.forEach(((o,a)=>{for(const l of a.Sa)l.onError(s)}))})(this,new it(j.ABORTED,"Firestore shutting down"))}}function x_(){return new Qi((e=>yw(e)),du)}async function BD(e,t){const n=yt(e);let s=3;const i=t.query;let r=n.queries.get(i);r?!r.ba()&&t.Da()&&(s=2):(r=new UD,s=t.Da()?0:1);try{switch(s){case 0:r.wa=await n.onListen(i,!0);break;case 1:r.wa=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const a=Qf(o,`Initialization of query '${ur(t.query)}' failed`);return void t.onError(a)}n.queries.set(i,r),r.Sa.push(t),t.va(n.onlineState),r.wa&&t.Fa(r.wa)&&Yf(n)}async function HD(e,t){const n=yt(e),s=t.query;let i=3;const r=n.queries.get(s);if(r){const o=r.Sa.indexOf(t);o>=0&&(r.Sa.splice(o,1),r.Sa.length===0?i=t.Da()?0:1:!r.ba()&&t.Da()&&(i=2))}switch(i){case 0:return n.queries.delete(s),n.onUnlisten(s,!0);case 1:return n.queries.delete(s),n.onUnlisten(s,!1);case 2:return n.onLastRemoteStoreUnlisten(s);default:return}}function jD(e,t){const n=yt(e);let s=!1;for(const i of t){const r=i.query,o=n.queries.get(r);if(o){for(const a of o.Sa)a.Fa(i)&&(s=!0);o.wa=i}}s&&Yf(n)}function zD(e,t,n){const s=yt(e),i=s.queries.get(t);if(i)for(const r of i.Sa)r.onError(n);s.queries.delete(t)}function Yf(e){e.Ca.forEach((t=>{t.next()}))}var wd,R_;(R_=wd||(wd={})).Ma="default",R_.Cache="cache";class WD{constructor(t,n,s){this.query=t,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(t){if(!this.options.includeMetadataChanges){const s=[];for(const i of t.docChanges)i.type!==3&&s.push(i);t=new Hr(t.query,t.docs,t.oldDocs,s,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let n=!1;return this.Oa?this.Ba(t)&&(this.xa.next(t),n=!0):this.La(t,this.onlineState)&&(this.ka(t),n=!0),this.Na=t,n}onError(t){this.xa.error(t)}va(t){this.onlineState=t;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,t)&&(this.ka(this.Na),n=!0),n}La(t,n){if(!t.fromCache||!this.Da())return!0;const s=n!=="Offline";return(!this.options.qa||!s)&&(!t.docs.isEmpty()||t.hasCachedResults||n==="Offline")}Ba(t){if(t.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(t){t=Hr.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Oa=!0,this.xa.next(t)}Da(){return this.options.source!==wd.Cache}}class Zw{constructor(t){this.key=t}}class tT{constructor(t){this.key=t}}class qD{constructor(t,n){this.query=t,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=It(),this.mutatedKeys=It(),this.eu=vw(t),this.tu=new Cr(this.eu)}get nu(){return this.Ya}ru(t,n){const s=n?n.iu:new C_,i=n?n.tu:this.tu;let r=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,c=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal(((h,d)=>{const f=i.get(h),p=fu(this.query,d)?d:null,_=!!f&&this.mutatedKeys.has(f.key),y=!!p&&(p.hasLocalMutations||this.mutatedKeys.has(p.key)&&p.hasCommittedMutations);let v=!1;f&&p?f.data.isEqual(p.data)?_!==y&&(s.track({type:3,doc:p}),v=!0):this.su(f,p)||(s.track({type:2,doc:p}),v=!0,(l&&this.eu(p,l)>0||c&&this.eu(p,c)<0)&&(a=!0)):!f&&p?(s.track({type:0,doc:p}),v=!0):f&&!p&&(s.track({type:1,doc:f}),v=!0,(l||c)&&(a=!0)),v&&(p?(o=o.add(p),r=y?r.add(h):r.delete(h)):(o=o.delete(h),r=r.delete(h)))})),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),r=r.delete(h.key),s.track({type:1,doc:h})}return{tu:o,iu:s,Cs:a,mutatedKeys:r}}su(t,n){return t.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(t,n,s,i){const r=this.tu;this.tu=t.tu,this.mutatedKeys=t.mutatedKeys;const o=t.iu.ya();o.sort(((h,d)=>(function(p,_){const y=v=>{switch(v){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return gt(20277,{Rt:v})}};return y(p)-y(_)})(h.type,d.type)||this.eu(h.doc,d.doc))),this.ou(s),i=i??!1;const a=n&&!i?this._u():[],l=this.Xa.size===0&&this.current&&!i?1:0,c=l!==this.Za;return this.Za=l,o.length!==0||c?{snapshot:new Hr(this.query,t.tu,r,o,t.mutatedKeys,l===0,c,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:a}:{au:a}}va(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new C_,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(t){return!this.Ya.has(t)&&!!this.tu.has(t)&&!this.tu.get(t).hasLocalMutations}ou(t){t&&(t.addedDocuments.forEach((n=>this.Ya=this.Ya.add(n))),t.modifiedDocuments.forEach((n=>{})),t.removedDocuments.forEach((n=>this.Ya=this.Ya.delete(n))),this.current=t.current)}_u(){if(!this.current)return[];const t=this.Xa;this.Xa=It(),this.tu.forEach((s=>{this.uu(s.key)&&(this.Xa=this.Xa.add(s.key))}));const n=[];return t.forEach((s=>{this.Xa.has(s)||n.push(new tT(s))})),this.Xa.forEach((s=>{t.has(s)||n.push(new Zw(s))})),n}cu(t){this.Ya=t.Qs,this.Xa=It();const n=this.ru(t.documents);return this.applyChanges(n,!0)}lu(){return Hr.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Xf="SyncEngine";class GD{constructor(t,n,s){this.query=t,this.targetId=n,this.view=s}}class KD{constructor(t){this.key=t,this.hu=!1}}class QD{constructor(t,n,s,i,r,o){this.localStore=t,this.remoteStore=n,this.eventManager=s,this.sharedClientState=i,this.currentUser=r,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new Qi((a=>yw(a)),du),this.Iu=new Map,this.Eu=new Set,this.du=new Xt(ut.comparator),this.Au=new Map,this.Ru=new $f,this.Vu={},this.mu=new Map,this.fu=Br.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function YD(e,t,n=!0){const s=oT(e);let i;const r=s.Tu.get(t);return r?(s.sharedClientState.addLocalQueryTarget(r.targetId),i=r.view.lu()):i=await eT(s,t,n,!0),i}async function XD(e,t){const n=oT(e);await eT(n,t,!0,!1)}async function eT(e,t,n,s){const i=await pD(e.localStore,$n(t)),r=i.targetId,o=e.sharedClientState.addLocalQueryTarget(r,n);let a;return s&&(a=await JD(e,t,r,o==="current",i.resumeToken)),e.isPrimaryClient&&n&&Gw(e.remoteStore,i),a}async function JD(e,t,n,s,i){e.pu=(d,f,p)=>(async function(y,v,w,M){let E=v.view.ru(w);E.Cs&&(E=await T_(y.localStore,v.query,!1).then((({documents:A})=>v.view.ru(A,E))));const x=M&&M.targetChanges.get(v.targetId),O=M&&M.targetMismatches.get(v.targetId)!=null,V=v.view.applyChanges(E,y.isPrimaryClient,x,O);return M_(y,v.targetId,V.au),V.snapshot})(e,d,f,p);const r=await T_(e.localStore,t,!0),o=new qD(t,r.Qs),a=o.ru(r.documents),l=Ha.createSynthesizedTargetChangeForCurrentChange(n,s&&e.onlineState!=="Offline",i),c=o.applyChanges(a,e.isPrimaryClient,l);M_(e,n,c.au);const h=new GD(t,n,o);return e.Tu.set(t,h),e.Iu.has(n)?e.Iu.get(n).push(t):e.Iu.set(n,[t]),c.snapshot}async function ZD(e,t,n){const s=yt(e),i=s.Tu.get(t),r=s.Iu.get(i.targetId);if(r.length>1)return s.Iu.set(i.targetId,r.filter((o=>!du(o,t)))),void s.Tu.delete(t);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(i.targetId),s.sharedClientState.isActiveQueryTarget(i.targetId)||await vd(s.localStore,i.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(i.targetId),n&&zf(s.remoteStore,i.targetId),Td(s,i.targetId)})).catch(eo)):(Td(s,i.targetId),await vd(s.localStore,i.targetId,!0))}async function tO(e,t){const n=yt(e),s=n.Tu.get(t),i=n.Iu.get(s.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(s.targetId),zf(n.remoteStore,s.targetId))}async function eO(e,t,n){const s=lO(e);try{const i=await(function(o,a){const l=yt(o),c=jt.now(),h=a.reduce(((p,_)=>p.add(_.key)),It());let d,f;return l.persistence.runTransaction("Locally write mutations","readwrite",(p=>{let _=ps(),y=It();return l.Ns.getEntries(p,h).next((v=>{_=v,_.forEach(((w,M)=>{M.isValidDocument()||(y=y.add(w))}))})).next((()=>l.localDocuments.getOverlayedDocuments(p,_))).next((v=>{d=v;const w=[];for(const M of a){const E=fM(M,d.get(M.key).overlayedDocument);E!=null&&w.push(new oi(M.key,E,hw(E.value.mapValue),Bn.exists(!0)))}return l.mutationQueue.addMutationBatch(p,c,w,a)})).next((v=>{f=v;const w=v.applyToLocalDocumentSet(d,y);return l.documentOverlayCache.saveOverlays(p,v.batchId,w)}))})).then((()=>({batchId:f.batchId,changes:ww(d)})))})(s.localStore,t);s.sharedClientState.addPendingMutation(i.batchId),(function(o,a,l){let c=o.Vu[o.currentUser.toKey()];c||(c=new Xt(Et)),c=c.insert(a,l),o.Vu[o.currentUser.toKey()]=c})(s,i.batchId,n),await za(s,i.changes),await vu(s.remoteStore)}catch(i){const r=Qf(i,"Failed to persist write");n.reject(r)}}async function nT(e,t){const n=yt(e);try{const s=await hD(n.localStore,t);t.targetChanges.forEach(((i,r)=>{const o=n.Au.get(r);o&&(Ot(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?o.hu=!0:i.modifiedDocuments.size>0?Ot(o.hu,14607):i.removedDocuments.size>0&&(Ot(o.hu,42227),o.hu=!1))})),await za(n,s,t)}catch(s){await eo(s)}}function P_(e,t,n){const s=yt(e);if(s.isPrimaryClient&&n===0||!s.isPrimaryClient&&n===1){const i=[];s.Tu.forEach(((r,o)=>{const a=o.view.va(t);a.snapshot&&i.push(a.snapshot)})),(function(o,a){const l=yt(o);l.onlineState=a;let c=!1;l.queries.forEach(((h,d)=>{for(const f of d.Sa)f.va(a)&&(c=!0)})),c&&Yf(l)})(s.eventManager,t),i.length&&s.Pu.H_(i),s.onlineState=t,s.isPrimaryClient&&s.sharedClientState.setOnlineState(t)}}async function nO(e,t,n){const s=yt(e);s.sharedClientState.updateQueryState(t,"rejected",n);const i=s.Au.get(t),r=i&&i.key;if(r){let o=new Xt(ut.comparator);o=o.insert(r,Oe.newNoDocument(r,_t.min()));const a=It().add(r),l=new mu(_t.min(),new Map,new Xt(Et),o,a);await nT(s,l),s.du=s.du.remove(r),s.Au.delete(t),Jf(s)}else await vd(s.localStore,t,!1).then((()=>Td(s,t,n))).catch(eo)}async function sO(e,t){const n=yt(e),s=t.batch.batchId;try{const i=await uD(n.localStore,t);iT(n,s,null),sT(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await za(n,i)}catch(i){await eo(i)}}async function iO(e,t,n){const s=yt(e);try{const i=await(function(o,a){const l=yt(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",(c=>{let h;return l.mutationQueue.lookupMutationBatch(c,a).next((d=>(Ot(d!==null,37113),h=d.keys(),l.mutationQueue.removeMutationBatch(c,d)))).next((()=>l.mutationQueue.performConsistencyCheck(c))).next((()=>l.documentOverlayCache.removeOverlaysForBatchId(c,h,a))).next((()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,h))).next((()=>l.localDocuments.getDocuments(c,h)))}))})(s.localStore,t);iT(s,t,n),sT(s,t),s.sharedClientState.updateMutationState(t,"rejected",n),await za(s,i)}catch(i){await eo(i)}}function sT(e,t){(e.mu.get(t)||[]).forEach((n=>{n.resolve()})),e.mu.delete(t)}function iT(e,t,n){const s=yt(e);let i=s.Vu[s.currentUser.toKey()];if(i){const r=i.get(t);r&&(n?r.reject(n):r.resolve(),i=i.remove(t)),s.Vu[s.currentUser.toKey()]=i}}function Td(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(const s of e.Iu.get(t))e.Tu.delete(s),n&&e.Pu.yu(s,n);e.Iu.delete(t),e.isPrimaryClient&&e.Ru.jr(t).forEach((s=>{e.Ru.containsKey(s)||rT(e,s)}))}function rT(e,t){e.Eu.delete(t.path.canonicalString());const n=e.du.get(t);n!==null&&(zf(e.remoteStore,n),e.du=e.du.remove(t),e.Au.delete(n),Jf(e))}function M_(e,t,n){for(const s of n)s instanceof Zw?(e.Ru.addReference(s.key,t),rO(e,s)):s instanceof tT?(nt(Xf,"Document no longer in limbo: "+s.key),e.Ru.removeReference(s.key,t),e.Ru.containsKey(s.key)||rT(e,s.key)):gt(19791,{wu:s})}function rO(e,t){const n=t.key,s=n.path.canonicalString();e.du.get(n)||e.Eu.has(s)||(nt(Xf,"New document in limbo: "+n),e.Eu.add(s),Jf(e))}function Jf(e){for(;e.Eu.size>0&&e.du.size<e.maxConcurrentLimboResolutions;){const t=e.Eu.values().next().value;e.Eu.delete(t);const n=new ut(Qt.fromString(t)),s=e.fu.next();e.Au.set(s,new KD(n)),e.du=e.du.insert(n,s),Gw(e.remoteStore,new Vs($n(Lf(n.path)),s,"TargetPurposeLimboResolution",lu.ce))}}async function za(e,t,n){const s=yt(e),i=[],r=[],o=[];s.Tu.isEmpty()||(s.Tu.forEach(((a,l)=>{o.push(s.pu(l,t,n).then((c=>{if((c||n)&&s.isPrimaryClient){const h=c?!c.fromCache:n?.targetChanges.get(l.targetId)?.current;s.sharedClientState.updateQueryState(l.targetId,h?"current":"not-current")}if(c){i.push(c);const h=Hf.As(l.targetId,c);r.push(h)}})))})),await Promise.all(o),s.Pu.H_(i),await(async function(l,c){const h=yt(l);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",(d=>$.forEach(c,(f=>$.forEach(f.Es,(p=>h.persistence.referenceDelegate.addReference(d,f.targetId,p))).next((()=>$.forEach(f.ds,(p=>h.persistence.referenceDelegate.removeReference(d,f.targetId,p)))))))))}catch(d){if(!no(d))throw d;nt(jf,"Failed to update sequence numbers: "+d)}for(const d of c){const f=d.targetId;if(!d.fromCache){const p=h.Ms.get(f),_=p.snapshotVersion,y=p.withLastLimboFreeSnapshotVersion(_);h.Ms=h.Ms.insert(f,y)}}})(s.localStore,r))}async function oO(e,t){const n=yt(e);if(!n.currentUser.isEqual(t)){nt(Xf,"User change. New user:",t.toKey());const s=await jw(n.localStore,t);n.currentUser=t,(function(r,o){r.mu.forEach((a=>{a.forEach((l=>{l.reject(new it(j.CANCELLED,o))}))})),r.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,s.removedBatchIds,s.addedBatchIds),await za(n,s.Ls)}}function aO(e,t){const n=yt(e),s=n.Au.get(t);if(s&&s.hu)return It().add(s.key);{let i=It();const r=n.Iu.get(t);if(!r)return i;for(const o of r){const a=n.Tu.get(o);i=i.unionWith(a.view.nu)}return i}}function oT(e){const t=yt(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=nT.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=aO.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=nO.bind(null,t),t.Pu.H_=jD.bind(null,t.eventManager),t.Pu.yu=zD.bind(null,t.eventManager),t}function lO(e){const t=yt(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=sO.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=iO.bind(null,t),t}class xc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=_u(t.databaseInfo.databaseId),this.sharedClientState=this.Du(t),this.persistence=this.Cu(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Fu(t,this.localStore),this.indexBackfillerScheduler=this.Mu(t,this.localStore)}Fu(t,n){return null}Mu(t,n){return null}vu(t){return cD(this.persistence,new oD,t.initialUser,this.serializer)}Cu(t){return new Hw(Bf.mi,this.serializer)}Du(t){return new mD}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}xc.provider={build:()=>new xc};class cO extends xc{constructor(t){super(),this.cacheSizeBytes=t}Fu(t,n){Ot(this.persistence.referenceDelegate instanceof kc,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new WM(s,t.asyncQueue,n)}Cu(t){const n=this.cacheSizeBytes!==void 0?qe.withCacheSize(this.cacheSizeBytes):qe.DEFAULT;return new Hw((s=>kc.mi(s,n)),this.serializer)}}class Ed{async initialize(t,n){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>P_(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=oO.bind(null,this.syncEngine),await FD(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return(function(){return new $D})()}createDatastore(t){const n=_u(t.databaseInfo.databaseId),s=(function(r){return new wD(r)})(t.databaseInfo);return(function(r,o,a,l){return new SD(r,o,a,l)})(t.authCredentials,t.appCheckCredentials,s,n)}createRemoteStore(t){return(function(s,i,r,o,a){return new kD(s,i,r,o,a)})(this.localStore,this.datastore,t.asyncQueue,(n=>P_(this.syncEngine,n,0)),(function(){return S_.v()?new S_:new _D})())}createSyncEngine(t,n){return(function(i,r,o,a,l,c,h){const d=new QD(i,r,o,a,l,c);return h&&(d.gu=!0),d})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,n)}async terminate(){await(async function(n){const s=yt(n);nt(Wi,"RemoteStore shutting down."),s.Ea.add(5),await ja(s),s.Aa.shutdown(),s.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Ed.provider={build:()=>new Ed};class uO{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Ou(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Ou(this.observer.error,t):fs("Uncaught Error in snapshot listener:",t.toString()))}Nu(){this.muted=!0}Ou(t,n){setTimeout((()=>{this.muted||t(n)}),0)}}const si="FirestoreClient";class hO{constructor(t,n,s,i,r){this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=s,this.databaseInfo=i,this.user=Me.UNAUTHENTICATED,this.clientId=au.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=r,this.authCredentials.start(s,(async o=>{nt(si,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(s,(o=>(nt(si,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new qs;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(n){const s=Qf(n,"Failed to shutdown persistence");t.reject(s)}})),t.promise}}async function bh(e,t){e.asyncQueue.verifyOperationInProgress(),nt(si,"Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let s=n.initialUser;e.setCredentialChangeListener((async i=>{s.isEqual(i)||(await jw(t.localStore,i),s=i)})),t.persistence.setDatabaseDeletedListener((()=>e.terminate())),e._offlineComponents=t}async function D_(e,t){e.asyncQueue.verifyOperationInProgress();const n=await dO(e);nt(si,"Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener((s=>k_(t.remoteStore,s))),e.setAppCheckTokenChangeListener(((s,i)=>k_(t.remoteStore,i))),e._onlineComponents=t}async function dO(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){nt(si,"Using user provided OfflineComponentProvider");try{await bh(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!(function(i){return i.name==="FirebaseError"?i.code===j.FAILED_PRECONDITION||i.code===j.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(n))throw n;zi("Error using user provided cache. Falling back to memory cache: "+n),await bh(e,new xc)}}else nt(si,"Using default OfflineComponentProvider"),await bh(e,new cO(void 0));return e._offlineComponents}async function aT(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(nt(si,"Using user provided OnlineComponentProvider"),await D_(e,e._uninitializedComponentsProvider._online)):(nt(si,"Using default OnlineComponentProvider"),await D_(e,new Ed))),e._onlineComponents}function fO(e){return aT(e).then((t=>t.syncEngine))}async function pO(e){const t=await aT(e),n=t.eventManager;return n.onListen=YD.bind(null,t.syncEngine),n.onUnlisten=ZD.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=XD.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=tO.bind(null,t.syncEngine),n}function gO(e,t,n={}){const s=new qs;return e.asyncQueue.enqueueAndForget((async()=>(function(r,o,a,l,c){const h=new uO({next:f=>{h.Nu(),o.enqueueAndForget((()=>HD(r,d)));const p=f.docs.has(a);!p&&f.fromCache?c.reject(new it(j.UNAVAILABLE,"Failed to get document because the client is offline.")):p&&f.fromCache&&l&&l.source==="server"?c.reject(new it(j.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(f)},error:f=>c.reject(f)}),d=new WD(Lf(a.path),h,{includeMetadataChanges:!0,qa:!0});return BD(r,d)})(await pO(e),e.asyncQueue,t,n,s))),s.promise}function lT(e){const t={};return e.timeoutSeconds!==void 0&&(t.timeoutSeconds=e.timeoutSeconds),t}const O_=new Map;const cT="firestore.googleapis.com",L_=!0;class N_{constructor(t){if(t.host===void 0){if(t.ssl!==void 0)throw new it(j.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=cT,this.ssl=L_}else this.host=t.host,this.ssl=t.ssl??L_;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=Bw;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<jM)throw new it(j.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}tw("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=lT(t.experimentalLongPollingOptions??{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new it(j.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new it(j.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new it(j.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&(function(s,i){return s.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class Zf{constructor(t,n,s,i){this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=s,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new N_({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new it(j.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new it(j.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new N_(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=(function(s){if(!s)return new Z0;switch(s.type){case"firstParty":return new b2(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new it(j.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const s=O_.get(n);s&&(nt("ComponentProvider","Removing Datastore"),O_.delete(n),s.terminate())})(this),Promise.resolve()}}function uT(e,t,n,s={}){e=Xs(e,Zf);const i=Xr(t),r=e._getSettings(),o={...r,emulatorOptions:e._getEmulatorOptions()},a=`${t}:${n}`;i&&(s0(`https://${a}`),i0("Firestore",!0)),r.host!==cT&&r.host!==a&&zi("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const l={...r,host:a,ssl:i,emulatorOptions:s};if(!Ui(l,o)&&(e._setSettings(l),s.mockUserToken)){let c,h;if(typeof s.mockUserToken=="string")c=s.mockUserToken,h=Me.MOCK_USER;else{c=SC(s.mockUserToken,e._app?.options.projectId);const d=s.mockUserToken.sub||s.mockUserToken.user_id;if(!d)throw new it(j.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new Me(d)}e._authCredentials=new _2(new J0(c,h))}}class bu{constructor(t,n,s){this.converter=n,this._query=s,this.type="query",this.firestore=t}withConverter(t){return new bu(this.firestore,t,this._query)}}class oe{constructor(t,n,s){this.converter=n,this._key=s,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new jr(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new oe(this.firestore,t,this._key)}toJSON(){return{type:oe._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(t,n,s){if($a(n,oe._jsonSchema))return new oe(t,s||null,new ut(Qt.fromString(n.referencePath)))}}oe._jsonSchemaVersion="firestore/documentReference/1.0",oe._jsonSchema={type:re("string",oe._jsonSchemaVersion),referencePath:re("string")};class jr extends bu{constructor(t,n,s){super(t,n,Lf(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new oe(this.firestore,null,new ut(t))}withConverter(t){return new jr(this.firestore,t,this._path)}}function Id(e,t,...n){if(e=we(e),arguments.length===1&&(t=au.newId()),A2("doc","path",t),e instanceof Zf){const s=Qt.fromString(t,...n);return Ym(s),new oe(e,null,new ut(s))}{if(!(e instanceof oe||e instanceof jr))throw new it(j.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=e._path.child(Qt.fromString(t,...n));return Ym(s),new oe(e.firestore,e instanceof jr?e.converter:null,new ut(s))}}const V_="AsyncQueue";class F_{constructor(t=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Ww(this,"async_queue_retry"),this._c=()=>{const s=vh();s&&nt(V_,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=t;const n=vh();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.uc(),this.cc(t)}enterRestrictedMode(t){if(!this.ec){this.ec=!0,this.sc=t||!1;const n=vh();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(t){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new qs;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(t().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(t){this.enqueueAndForget((()=>(this.Xu.push(t),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(t){if(!no(t))throw t;nt(V_,"Operation failed with retryable error: "+t)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(t){const n=this.ac.then((()=>(this.rc=!0,t().catch((s=>{throw this.nc=s,this.rc=!1,fs("INTERNAL UNHANDLED ERROR: ",U_(s)),s})).then((s=>(this.rc=!1,s))))));return this.ac=n,n}enqueueAfterDelay(t,n,s){this.uc(),this.oc.indexOf(t)>-1&&(n=0);const i=Kf.createAndSchedule(this,t,n,s,(r=>this.hc(r)));return this.tc.push(i),i}uc(){this.nc&&gt(47125,{Pc:U_(this.nc)})}verifyOperationInProgress(){}async Tc(){let t;do t=this.ac,await t;while(t!==this.ac)}Ic(t){for(const n of this.tc)if(n.timerId===t)return!0;return!1}Ec(t){return this.Tc().then((()=>{this.tc.sort(((n,s)=>n.targetTimeMs-s.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),t!=="all"&&n.timerId===t)break;return this.Tc()}))}dc(t){this.oc.push(t)}hc(t){const n=this.tc.indexOf(t);this.tc.splice(n,1)}}function U_(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+`
`+e.stack),t}class Wa extends Zf{constructor(t,n,s,i){super(t,n,s,i),this.type="firestore",this._queue=new F_,this._persistenceKey=i?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new F_(t),this._firestoreClient=void 0,await t}}}function hT(e,t){const n=typeof e=="object"?e:l0(),s=typeof e=="string"?e:bc,i=vf(n,"firestore").getImmediate({identifier:s});if(!i._initialized){const r=EC("firestore");r&&uT(i,...r)}return i}function tp(e){if(e._terminated)throw new it(j.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||mO(e),e._firestoreClient}function mO(e){const t=e._freezeSettings(),n=(function(i,r,o,a){return new V2(i,r,o,a.host,a.ssl,a.experimentalForceLongPolling,a.experimentalAutoDetectLongPolling,lT(a.experimentalLongPollingOptions),a.useFetchStreams,a.isUsingEmulator)})(e._databaseId,e._app?.options.appId||"",e._persistenceKey,t);e._componentsProvider||t.localCache?._offlineComponentProvider&&t.localCache?._onlineComponentProvider&&(e._componentsProvider={_offline:t.localCache._offlineComponentProvider,_online:t.localCache._onlineComponentProvider}),e._firestoreClient=new hO(e._authCredentials,e._appCheckCredentials,e._queue,n,e._componentsProvider&&(function(i){const r=i?._online.build();return{_offline:i?._offline.build(r),_online:r}})(e._componentsProvider))}class tn{constructor(t){this._byteString=t}static fromBase64String(t){try{return new tn(Te.fromBase64String(t))}catch(n){throw new it(j.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(t){return new tn(Te.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}toJSON(){return{type:tn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(t){if($a(t,tn._jsonSchema))return tn.fromBase64String(t.bytes)}}tn._jsonSchemaVersion="firestore/bytes/1.0",tn._jsonSchema={type:re("string",tn._jsonSchemaVersion),bytes:re("string")};class qa{constructor(...t){for(let n=0;n<t.length;++n)if(t[n].length===0)throw new it(j.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new _e(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}class wu{constructor(t){this._methodName=t}}class Tn{constructor(t,n){if(!isFinite(t)||t<-90||t>90)throw new it(j.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new it(j.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}_compareTo(t){return Et(this._lat,t._lat)||Et(this._long,t._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Tn._jsonSchemaVersion}}static fromJSON(t){if($a(t,Tn._jsonSchema))return new Tn(t.latitude,t.longitude)}}Tn._jsonSchemaVersion="firestore/geoPoint/1.0",Tn._jsonSchema={type:re("string",Tn._jsonSchemaVersion),latitude:re("number"),longitude:re("number")};class En{constructor(t){this._values=(t||[]).map((n=>n))}toArray(){return this._values.map((t=>t))}isEqual(t){return(function(s,i){if(s.length!==i.length)return!1;for(let r=0;r<s.length;++r)if(s[r]!==i[r])return!1;return!0})(this._values,t._values)}toJSON(){return{type:En._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(t){if($a(t,En._jsonSchema)){if(Array.isArray(t.vectorValues)&&t.vectorValues.every((n=>typeof n=="number")))return new En(t.vectorValues);throw new it(j.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}En._jsonSchemaVersion="firestore/vectorValue/1.0",En._jsonSchema={type:re("string",En._jsonSchemaVersion),vectorValues:re("object")};const _O=/^__.*__$/;class yO{constructor(t,n,s){this.data=t,this.fieldMask=n,this.fieldTransforms=s}toMutation(t,n){return this.fieldMask!==null?new oi(t,this.data,this.fieldMask,n,this.fieldTransforms):new Ba(t,this.data,n,this.fieldTransforms)}}class dT{constructor(t,n,s){this.data=t,this.fieldMask=n,this.fieldTransforms=s}toMutation(t,n){return new oi(t,this.data,this.fieldMask,n,this.fieldTransforms)}}function fT(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw gt(40011,{Ac:e})}}class ep{constructor(t,n,s,i,r,o){this.settings=t,this.databaseId=n,this.serializer=s,this.ignoreUndefinedProperties=i,r===void 0&&this.Rc(),this.fieldTransforms=r||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(t){return new ep({...this.settings,...t},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(t){const n=this.path?.child(t),s=this.Vc({path:n,fc:!1});return s.gc(t),s}yc(t){const n=this.path?.child(t),s=this.Vc({path:n,fc:!1});return s.Rc(),s}wc(t){return this.Vc({path:void 0,fc:!0})}Sc(t){return Rc(t,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(t){return this.fieldMask.find((n=>t.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>t.isPrefixOf(n.field)))!==void 0}Rc(){if(this.path)for(let t=0;t<this.path.length;t++)this.gc(this.path.get(t))}gc(t){if(t.length===0)throw this.Sc("Document fields must not be empty");if(fT(this.Ac)&&_O.test(t))throw this.Sc('Document fields cannot begin and end with "__"')}}class vO{constructor(t,n,s){this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=s||_u(t)}Cc(t,n,s,i=!1){return new ep({Ac:t,methodName:n,Dc:s,path:_e.emptyPath(),fc:!1,bc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function pT(e){const t=e._freezeSettings(),n=_u(e._databaseId);return new vO(e._databaseId,!!t.ignoreUndefinedProperties,n)}function bO(e,t,n,s,i,r={}){const o=e.Cc(r.merge||r.mergeFields?2:0,t,n,i);np("Data must be an object, but it was:",o,s);const a=gT(s,o);let l,c;if(r.merge)l=new en(o.fieldMask),c=o.fieldTransforms;else if(r.mergeFields){const h=[];for(const d of r.mergeFields){const f=Sd(t,d,n);if(!o.contains(f))throw new it(j.INVALID_ARGUMENT,`Field '${f}' is specified in your field mask but missing from your input data.`);_T(h,f)||h.push(f)}l=new en(h),c=o.fieldTransforms.filter((d=>l.covers(d.field)))}else l=null,c=o.fieldTransforms;return new yO(new Ge(a),l,c)}class Tu extends wu{_toFieldTransform(t){if(t.Ac!==2)throw t.Ac===1?t.Sc(`${this._methodName}() can only appear at the top level of your update data`):t.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof Tu}}function wO(e,t,n,s){const i=e.Cc(1,t,n);np("Data must be an object, but it was:",i,s);const r=[],o=Ge.empty();ri(s,((l,c)=>{const h=sp(t,l,n);c=we(c);const d=i.yc(h);if(c instanceof Tu)r.push(h);else{const f=Eu(c,d);f!=null&&(r.push(h),o.set(h,f))}}));const a=new en(r);return new dT(o,a,i.fieldTransforms)}function TO(e,t,n,s,i,r){const o=e.Cc(1,t,n),a=[Sd(t,s,n)],l=[i];if(r.length%2!=0)throw new it(j.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let f=0;f<r.length;f+=2)a.push(Sd(t,r[f])),l.push(r[f+1]);const c=[],h=Ge.empty();for(let f=a.length-1;f>=0;--f)if(!_T(c,a[f])){const p=a[f];let _=l[f];_=we(_);const y=o.yc(p);if(_ instanceof Tu)c.push(p);else{const v=Eu(_,y);v!=null&&(c.push(p),h.set(p,v))}}const d=new en(c);return new dT(h,d,o.fieldTransforms)}function Eu(e,t){if(mT(e=we(e)))return np("Unsupported field value:",t,e),gT(e,t);if(e instanceof wu)return(function(s,i){if(!fT(i.Ac))throw i.Sc(`${s._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Sc(`${s._methodName}() is not currently supported inside arrays`);const r=s._toFieldTransform(i);r&&i.fieldTransforms.push(r)})(e,t),null;if(e===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.fc&&t.Ac!==4)throw t.Sc("Nested arrays are not supported");return(function(s,i){const r=[];let o=0;for(const a of s){let l=Eu(a,i.wc(o));l==null&&(l={nullValue:"NULL_VALUE"}),r.push(l),o++}return{arrayValue:{values:r}}})(e,t)}return(function(s,i){if((s=we(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return aM(i.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const r=jt.fromDate(s);return{timestampValue:Ac(i.serializer,r)}}if(s instanceof jt){const r=new jt(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:Ac(i.serializer,r)}}if(s instanceof Tn)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof tn)return{bytesValue:Ow(i.serializer,s._byteString)};if(s instanceof oe){const r=i.databaseId,o=s.firestore._databaseId;if(!o.isEqual(r))throw i.Sc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${r.projectId}/${r.database}`);return{referenceValue:Uf(s.firestore._databaseId||i.databaseId,s._key.path)}}if(s instanceof En)return(function(o,a){return{mapValue:{fields:{[cw]:{stringValue:uw},[wc]:{arrayValue:{values:o.toArray().map((c=>{if(typeof c!="number")throw a.Sc("VectorValues must only contain numeric values.");return Nf(a.serializer,c)}))}}}}}})(s,i);throw i.Sc(`Unsupported field value: ${xf(s)}`)})(e,t)}function gT(e,t){const n={};return sw(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):ri(e,((s,i)=>{const r=Eu(i,t.mc(s));r!=null&&(n[s]=r)})),{mapValue:{fields:n}}}function mT(e){return!(typeof e!="object"||e===null||e instanceof Array||e instanceof Date||e instanceof jt||e instanceof Tn||e instanceof tn||e instanceof oe||e instanceof wu||e instanceof En)}function np(e,t,n){if(!mT(n)||!ew(n)){const s=xf(n);throw s==="an object"?t.Sc(e+" a custom object"):t.Sc(e+" "+s)}}function Sd(e,t,n){if((t=we(t))instanceof qa)return t._internalPath;if(typeof t=="string")return sp(e,t);throw Rc("Field path arguments must be of type string or ",e,!1,void 0,n)}const EO=new RegExp("[~\\*/\\[\\]]");function sp(e,t,n){if(t.search(EO)>=0)throw Rc(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new qa(...t.split("."))._internalPath}catch{throw Rc(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function Rc(e,t,n,s,i){const r=s&&!s.isEmpty(),o=i!==void 0;let a=`Function ${t}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(r||o)&&(l+=" (found",r&&(l+=` in field ${s}`),o&&(l+=` in document ${i}`),l+=")"),new it(j.INVALID_ARGUMENT,a+e+l)}function _T(e,t){return e.some((n=>n.isEqual(t)))}class yT{constructor(t,n,s,i,r){this._firestore=t,this._userDataWriter=n,this._key=s,this._document=i,this._converter=r}get id(){return this._key.path.lastSegment()}get ref(){return new oe(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new IO(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const n=this._document.data.field(vT("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n)}}}class IO extends yT{data(){return super.data()}}function vT(e,t){return typeof t=="string"?sp(e,t):t instanceof qa?t._internalPath:t._delegate._internalPath}class bT{convertValue(t,n="none"){switch(ei(t)){case 0:return null;case 1:return t.booleanValue;case 2:return ee(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,n);case 5:return t.stringValue;case 6:return this.convertBytes(ti(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,n);case 11:return this.convertObject(t.mapValue,n);case 10:return this.convertVectorValue(t.mapValue);default:throw gt(62114,{value:t})}}convertObject(t,n){return this.convertObjectMap(t.fields,n)}convertObjectMap(t,n="none"){const s={};return ri(t,((i,r)=>{s[i]=this.convertValue(r,n)})),s}convertVectorValue(t){const n=t.fields?.[wc].arrayValue?.values?.map((s=>ee(s.doubleValue)));return new En(n)}convertGeoPoint(t){return new Tn(ee(t.latitude),ee(t.longitude))}convertArray(t,n){return(t.values||[]).map((s=>this.convertValue(s,n)))}convertServerTimestamp(t,n){switch(n){case"previous":const s=uu(t);return s==null?null:this.convertValue(s,n);case"estimate":return this.convertTimestamp(_a(t));default:return null}}convertTimestamp(t){const n=Zs(t);return new jt(n.seconds,n.nanos)}convertDocumentKey(t,n){const s=Qt.fromString(t);Ot($w(s),9688,{name:t});const i=new Fr(s.get(1),s.get(3)),r=new ut(s.popFirst(5));return i.isEqual(n)||fs(`Document ${r} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),r}}function SO(e,t,n){let s;return s=e?e.toFirestore(t):t,s}class mr{constructor(t,n){this.hasPendingWrites=t,this.fromCache=n}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class Gs extends yT{constructor(t,n,s,i,r,o){super(t,n,s,i,o),this._firestore=t,this._firestoreImpl=t,this.metadata=r}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const n=new ta(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,n={}){if(this._document){const s=this._document.data.field(vT("DocumentSnapshot.get",t));if(s!==null)return this._userDataWriter.convertValue(s,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new it(j.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t=this._document,n={};return n.type=Gs._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!t||!t.isValidDocument()||!t.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(t.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Gs._jsonSchemaVersion="firestore/documentSnapshot/1.0",Gs._jsonSchema={type:re("string",Gs._jsonSchemaVersion),bundleSource:re("string","DocumentSnapshot"),bundleName:re("string"),bundle:re("string")};class ta extends Gs{data(t={}){return super.data(t)}}class xr{constructor(t,n,s,i){this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new mr(i.hasPendingWrites,i.fromCache),this.query=s}get docs(){const t=[];return this.forEach((n=>t.push(n))),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,n){this._snapshot.docs.forEach((s=>{t.call(n,new ta(this._firestore,this._userDataWriter,s.key,s,new mr(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(t={}){const n=!!t.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new it(j.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(i,r){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map((a=>{const l=new ta(i._firestore,i._userDataWriter,a.doc.key,a.doc,new mr(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}}))}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter((a=>r||a.type!==3)).map((a=>{const l=new ta(i._firestore,i._userDataWriter,a.doc.key,a.doc,new mr(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let c=-1,h=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),h=o.indexOf(a.doc.key)),{type:AO(a.type),doc:l,oldIndex:c,newIndex:h}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new it(j.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t={};t.type=xr._jsonSchemaVersion,t.bundleSource="QuerySnapshot",t.bundleName=au.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],s=[],i=[];return this.docs.forEach((r=>{r._document!==null&&(n.push(r._document),s.push(this._userDataWriter.convertObjectMap(r._document.data.value.mapValue.fields,"previous")),i.push(r.ref.path))})),t.bundle=(this._firestore,this.query._query,t.bundleName,"NOT SUPPORTED"),t}}function AO(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return gt(61501,{type:e})}}function wT(e){e=Xs(e,oe);const t=Xs(e.firestore,Wa);return gO(tp(t),e._key).then((n=>xO(t,e,n)))}xr._jsonSchemaVersion="firestore/querySnapshot/1.0",xr._jsonSchema={type:re("string",xr._jsonSchemaVersion),bundleSource:re("string","QuerySnapshot"),bundleName:re("string"),bundle:re("string")};class kO extends bT{constructor(t){super(),this.firestore=t}convertBytes(t){return new tn(t)}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return new oe(this.firestore,null,n)}}function TT(e,t,n){e=Xs(e,oe);const s=Xs(e.firestore,Wa),i=SO(e.converter,t);return ip(s,[bO(pT(s),"setDoc",e._key,i,e.converter!==null,n).toMutation(e._key,Bn.none())])}function CO(e,t,n,...s){e=Xs(e,oe);const i=Xs(e.firestore,Wa),r=pT(i);let o;return o=typeof(t=we(t))=="string"||t instanceof qa?TO(r,"updateDoc",e._key,t,n,s):wO(r,"updateDoc",e._key,t),ip(i,[o.toMutation(e._key,Bn.exists(!0))])}function ip(e,t){return(function(s,i){const r=new qs;return s.asyncQueue.enqueueAndForget((async()=>eO(await fO(s),i,r))),r.promise})(tp(e),t)}function xO(e,t,n){const s=n.docs.get(t._key),i=new kO(e);return new Gs(e,i,t._key,s,new mr(n.hasPendingWrites,n.fromCache),t.converter)}(function(t,n=!0){(function(i){to=i})(Jr),Lr(new $i("firestore",((s,{instanceIdentifier:i,options:r})=>{const o=s.getProvider("app").getImmediate(),a=new Wa(new y2(s.getProvider("auth-internal")),new w2(o,s.getProvider("app-check-internal")),(function(c,h){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new it(j.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Fr(c.options.projectId,h)})(o,i),o);return r={useFetchStreams:n,...r},a._setSettings(r),a}),"PUBLIC").setMultipleInstances(!0)),zs(qm,Gm,t),zs(qm,Gm,"esm2020")})();const RO=Object.freeze(Object.defineProperty({__proto__:null,AbstractUserDataWriter:bT,Bytes:tn,CollectionReference:jr,DocumentReference:oe,DocumentSnapshot:Gs,FieldPath:qa,FieldValue:wu,Firestore:Wa,FirestoreError:it,GeoPoint:Tn,Query:bu,QueryDocumentSnapshot:ta,QuerySnapshot:xr,SnapshotMetadata:mr,Timestamp:jt,VectorValue:En,_AutoId:au,_ByteString:Te,_DatabaseId:Fr,_DocumentKey:ut,_EmptyAuthCredentialsProvider:Z0,_FieldPath:_e,_cast:Xs,_logWarn:zi,_validateIsNotUsedTogether:tw,connectFirestoreEmulator:uT,doc:Id,ensureFirestoreConfigured:tp,executeWrite:ip,getDoc:wT,getFirestore:hT,setDoc:TT,updateDoc:CO},Symbol.toStringTag,{value:"Module"}));var PO="firebase",MO="12.7.0";zs(PO,MO,"app");const DO={apiKey:"AIzaSyCx092q7up_BXFgK2e13A-IQ3uDjwf6J5A",authDomain:"accsuite117.firebaseapp.com",projectId:"accsuite117",storageBucket:"accsuite117.firebasestorage.app",messagingSenderId:"352958845592",appId:"1:352958845592:web:bb6a7fbe04f6181707f6ed"};let wa,Ai,Pc;wm().length?wa=wm()[0]:wa=a0(DO);Ai=g2(wa);Pc=hT(wa);const OO=Object.freeze(Object.defineProperty({__proto__:null,get app(){return wa},get auth(){return Ai},get db(){return Pc}},Symbol.toStringTag,{value:"Module"})),rn=lt(null),$_=lt(!0),_i=lt(null);let B_=!1;function Iu(){const e=Gt(()=>!!rn.value),t=Gt(()=>rn.value?.emailVerified??!1),n=Gt(()=>rn.value?.email??""),s=Gt(()=>rn.value?.displayName??""),i=()=>{B_||(B_=!0,sP(Ai,f=>{rn.value=f,$_.value=!1,console.log("[AUTH] State changed:",f?.email??"logged out")}))},r=async(f,p,_)=>{_i.value=null;try{const v=(await XR(Ai,f,p)).user;return await tP(v,{displayName:_}),await TT(Id(Pc,"users",v.uid),{nickname:_,email:f,createdAt:new Date().toISOString(),emailVerified:!1}),await Lm(v),console.log("[AUTH] Registered:",f,"Verification email sent"),{success:!0,user:v}}catch(y){return console.error("[AUTH] Register error:",y.code),_i.value=d(y.code),{success:!1,error:_i.value}}},o=async(f,p)=>{_i.value=null;try{const _=await JR(Ai,f,p);return console.log("[AUTH] Logged in:",f),{success:!0,user:_.user}}catch(_){return console.error("[AUTH] Login error:",_.code),_i.value=d(_.code),{success:!1,error:_i.value}}},a=async()=>{try{return await iP(Ai),console.log("[AUTH] Logged out"),{success:!0}}catch(f){return console.error("[AUTH] Logout error:",f),{success:!1,error:f.message}}},l=async()=>{if(!rn.value)return{success:!1,error:"Utente non autenticato"};try{return await Lm(rn.value),console.log("[AUTH] Verification email resent"),{success:!0}}catch(f){return console.error("[AUTH] Resend error:",f.code),{success:!1,error:d(f.code)}}},c=async()=>{if(!rn.value)return{verified:!1,error:"Utente non autenticato"};try{await rn.value.reload(),rn.value=Ai.currentUser;const f=rn.value?.emailVerified??!1;return console.log("[AUTH] Email verified check:",f),{verified:f,error:null}}catch(f){return console.error("[AUTH] Check verification error:",f),{verified:!1,error:f.message}}},h=async f=>{try{const p=await wT(Id(Pc,"users",f));return p.exists()?p.data():null}catch(p){return console.error("[AUTH] Get profile error:",p),null}},d=f=>({"auth/email-already-in-use":"Email gi registrata","auth/weak-password":"Password troppo debole (min. 6 caratteri)","auth/invalid-email":"Email non valida","auth/user-not-found":"Utente non trovato","auth/wrong-password":"Password errata","auth/invalid-credential":"Credenziali non valide","auth/too-many-requests":"Troppi tentativi, riprova pi tardi","auth/network-request-failed":"Errore di rete, controlla la connessione"})[f]||"Errore di autenticazione";return i(),{currentUser:rn,isLoading:$_,authError:_i,isAuthenticated:e,isEmailVerified:t,userEmail:n,userDisplayName:s,register:r,login:o,logout:a,resendVerificationEmail:l,checkEmailVerified:c,getUserProfile:h}}const LO={class:"auth-overlay"},NO={class:"auth-card__body"},VO={key:0,class:"auth-nav"},FO={class:"auth-form-container"},UO=Vt({__name:"AuthOverlay",emits:["login-success","register-success"],setup(e,{emit:t}){const n=lt("login"),s=lt("login"),i=lt(),r=lt(),o=lt(),{login:a,register:l}=Iu(),c=lt(!1),h=t,d=Gt(()=>{switch(s.value){case"register":return"form-height--register";case"reset":return"form-height--reset";default:return"form-height--login"}}),f=M=>{n.value=M,s.value=M},p=()=>{s.value="reset"},_=()=>{s.value="login",n.value="login",o.value?.reset()},y=async M=>{c.value=!0;const E=await a(M.email,M.password);c.value=!1,E.success?h("login-success",M.email):i.value?.setError(E.error)},v=async M=>{c.value=!0;const E=await l(M.email,M.password,M.nickname);c.value=!1,E.success?h("register-success",M.email):r.value?.setError(E.error)},w=M=>{console.log("[AUTH] Reset:",M),o.value?.setSuccess(!0)};return(M,E)=>{const x=lC,O=uC,V=pC;return H(),J("div",LO,[E[4]||(E[4]=I("div",{class:"auth-overlay__ambient"},[I("div",{class:"ambient-glow ambient-glow--red"}),I("div",{class:"ambient-glow ambient-glow--gold"})],-1)),I("div",{class:Rt(["auth-card",d.value])},[E[3]||(E[3]=I("div",{class:"auth-card__glow"},null,-1)),I("div",NO,[E[2]||(E[2]=I("header",{class:"auth-header"},[I("div",{class:"brand"},[I("span",{class:"brand__badge"},"ACC"),I("span",{class:"brand__name"},"TELEMETRY")])],-1)),s.value!=="reset"?(H(),J("nav",VO,[I("button",{class:Rt(["auth-nav__item",{"is-active":n.value==="login"}]),onClick:E[0]||(E[0]=A=>f("login"))}," Login ",2),I("button",{class:Rt(["auth-nav__item",{"is-active":n.value==="register"}]),onClick:E[1]||(E[1]=A=>f("register"))}," Registrati ",2)])):Le("",!0),I("div",FO,[ht(tu,{name:"liquid",mode:"out-in"},{default:ke(()=>[s.value==="login"?(H(),Kt(x,{key:"login",ref_key:"loginFormRef",ref:i,onSubmit:y,onForgotPassword:p},null,512)):s.value==="register"?(H(),Kt(O,{key:"register",ref_key:"registerFormRef",ref:r,onSubmit:v},null,512)):(H(),Kt(V,{key:"reset",ref_key:"resetFormRef",ref:o,onSubmit:w,onBack:_},null,512))]),_:1})])])],2)])}}}),$O=Object.assign(Zt(UO,[["__scopeId","data-v-5de86b96"]]),{__name:"AuthOverlay"}),BO={class:"email-verification"},HO={class:"verify-email"},jO={key:0,class:"error-message"},zO={key:1,class:"error-message resend-error"},WO=["disabled"],qO=["disabled"],GO=Vt({__name:"RegistrationSuccess",props:{email:{},requireEmailVerification:{type:Boolean}},emits:["goToDashboard","resendEmail"],setup(e,{emit:t}){const n=t,{checkEmailVerified:s,resendVerificationEmail:i}=Iu(),r=lt(!1),o=lt(!1),a=lt(null),l=lt(!1),c=lt(!1),h=async()=>{r.value=!0,a.value=null,c.value=!1;const f=await i();r.value=!1,f.success?(o.value=!0,setTimeout(()=>o.value=!1,3e3)):a.value=f.error||"Errore invio email",n("resendEmail")},d=async()=>{l.value=!0,c.value=!1;const f=await s();l.value=!1,f.verified?n("goToDashboard"):c.value=!0};return(f,p)=>(H(),J("div",BO,[p[2]||(p[2]=I("div",{class:"verify-icon"},"",-1)),p[3]||(p[3]=I("h2",{class:"verify-title"},"Verifica la tua email",-1)),I("p",HO,G(e.email),1),p[4]||(p[4]=I("div",{class:"verify-box"},[I("p",{class:"verify-text"},"Clicca il link nell'email per attivare l'account."),I("p",{class:"verify-hint"},"Controlla anche Spam")],-1)),c.value?(H(),J("div",jO," Email non verificata ")):Le("",!0),a.value?(H(),J("div",zO,G(a.value),1)):Le("",!0),I("button",{class:Rt(["verify-btn",{"verify-btn--loading":l.value}]),disabled:l.value,onClick:d},[l.value?(H(),J(bt,{key:0},[p[0]||(p[0]=I("span",{class:"spinner"},null,-1)),p[1]||(p[1]=$t(" Controllo... ",-1))],64)):(H(),J(bt,{key:1},[$t(" Ho confermato l'email ")],64))],10,WO),I("button",{class:"resend-btn",disabled:r.value||o.value,onClick:h},[r.value?(H(),J(bt,{key:0},[$t("Invio in corso...")],64)):o.value?(H(),J(bt,{key:1},[$t(" Email inviata")],64)):(H(),J(bt,{key:2},[$t("Rinvia email di verifica")],64))],8,qO)]))}}),KO=Object.assign(Zt(GO,[["__scopeId","data-v-f958603b"]]),{__name:"AuthRegistrationSuccess"}),QO="modulepreload",YO=function(e,t){return new URL(e,t).href},H_={},Mc=function(t,n,s){let i=Promise.resolve();if(n&&n.length>0){let c=function(h){return Promise.all(h.map(d=>Promise.resolve(d).then(f=>({status:"fulfilled",value:f}),f=>({status:"rejected",reason:f}))))};const o=document.getElementsByTagName("link"),a=document.querySelector("meta[property=csp-nonce]"),l=a?.nonce||a?.getAttribute("nonce");i=c(n.map(h=>{if(h=YO(h,s),h in H_)return;H_[h]=!0;const d=h.endsWith(".css"),f=d?'[rel="stylesheet"]':"";if(s)for(let _=o.length-1;_>=0;_--){const y=o[_];if(y.href===h&&(!d||y.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${h}"]${f}`))return;const p=document.createElement("link");if(p.rel=d?"stylesheet":QO,d||(p.as="script"),p.crossOrigin="",p.href=h,l&&p.setAttribute("nonce",l),document.head.appendChild(p),d)return new Promise((_,y)=>{p.addEventListener("load",_),p.addEventListener("error",()=>y(new Error(`Unable to preload CSS for ${h}`)))})}))}function r(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return i.then(o=>{for(const a of o||[])a.status==="rejected"&&r(a.reason);return t().catch(r)})},XO={class:"user-dropdown"},JO={class:"user-name"},ZO={key:0,class:"dropdown-menu"},tL=Vt({__name:"UserDropdown",props:{userName:{}},emits:["logout","goToProfile"],setup(e,{emit:t}){const n=t,s=lt(!1),i=()=>{s.value=!s.value},r=()=>{s.value=!1},o=()=>{r(),n("goToProfile")},a=()=>{r(),n("logout")};return(l,c)=>{const h=Q1("click-outside");return ki((H(),J("div",XO,[I("button",{class:"dropdown-trigger",onClick:i},[I("span",JO,G(e.userName),1),(H(),J("svg",{class:Rt(["arrow-icon",{"arrow-icon--open":s.value}]),width:"12",height:"12",viewBox:"0 0 12 12",fill:"none"},[...c[0]||(c[0]=[I("path",{d:"M3 4.5L6 7.5L9 4.5",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)])],2))]),ht(tu,{name:"dropdown"},{default:ke(()=>[s.value?(H(),J("div",ZO,[I("button",{class:"dropdown-item",onClick:o},[...c[1]||(c[1]=[I("svg",{class:"item-icon",width:"16",height:"16",viewBox:"0 0 16 16",fill:"none"},[I("circle",{cx:"8",cy:"5",r:"3",stroke:"currentColor","stroke-width":"1.5"}),I("path",{d:"M2 14c0-3 2.5-5 6-5s6 2 6 5",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round"})],-1),$t(" Profilo ",-1)])]),c[3]||(c[3]=I("button",{class:"dropdown-item dropdown-item--disabled",disabled:""},[I("svg",{class:"item-icon",width:"16",height:"16",viewBox:"0 0 16 16",fill:"none"},[I("circle",{cx:"8",cy:"8",r:"6",stroke:"currentColor","stroke-width":"1.5"}),I("path",{d:"M8 5v3l2 2",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round"})]),$t(" Impostazioni ")],-1)),c[4]||(c[4]=I("div",{class:"dropdown-divider"},null,-1)),I("button",{class:"dropdown-item dropdown-item--danger",onClick:a},[...c[2]||(c[2]=[I("svg",{class:"item-icon",width:"16",height:"16",viewBox:"0 0 16 16",fill:"none"},[I("path",{d:"M6 2H4a2 2 0 00-2 2v8a2 2 0 002 2h2M11 11l3-3-3-3M14 8H6",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"})],-1),$t(" Logout ",-1)])])])):Le("",!0)]),_:1})])),[[h,r]])}}}),ET=Object.assign(Zt(tL,[["__scopeId","data-v-90fbbde4"]]),{__name:"UiUserDropdown"}),eL={class:"profile-page"},nL={class:"profile-header"},sL={class:"header-inner"},iL={class:"header-left"},rL={class:"header-right"},oL={class:"profile-main"},aL={class:"profile-container"},lL={class:"profile-grid"},cL={class:"profile-sidebar"},uL={class:"user-info"},hL={class:"user-nickname"},dL={class:"user-email"},fL={class:"profile-content"},pL={class:"profile-card"},gL={class:"equipment-form"},mL={class:"form-group"},_L={class:"form-group"},yL={class:"form-group"},vL={class:"form-group"},bL=["disabled"],wL=Vt({__name:"ProfilePage",props:{userEmail:{},userNickname:{}},emits:["logout","back"],setup(e,{emit:t}){const n=e,s=t,{currentUser:i,getUserProfile:r}=Iu(),o=Gt(()=>n.userNickname?n.userNickname:n.userEmail?n.userEmail.split("@")[0]:"Utente"),a=lt({volante:"",corona:"",pedaliera:"",struttura:""}),l=lt(!1),c=lt(!1);Ys(async()=>{if(i.value){const p=await r(i.value.uid);p?.equipment&&(a.value={...a.value,...p.equipment})}});const h=async()=>{if(i.value){l.value=!0;try{const{doc:p,updateDoc:_}=await Mc(async()=>{const{doc:v,updateDoc:w}=await Promise.resolve().then(()=>RO);return{doc:v,updateDoc:w}},void 0,import.meta.url),{db:y}=await Mc(async()=>{const{db:v}=await Promise.resolve().then(()=>OO);return{db:v}},void 0,import.meta.url);await _(p(y,"users",i.value.uid),{equipment:a.value}),c.value=!0,setTimeout(()=>c.value=!1,2e3)}catch(p){console.error("[PROFILE] Save error:",p)}finally{l.value=!1}}},d=()=>s("logout"),f=()=>{};return(p,_)=>{const y=ET;return H(),J("div",eL,[I("header",nL,[I("div",sL,[I("div",iL,[I("button",{class:"back-btn",onClick:_[0]||(_[0]=v=>s("back"))},[..._[5]||(_[5]=[I("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none"},[I("path",{d:"M12 4L6 10L12 16",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1),$t(" Dashboard ",-1)])])]),_[6]||(_[6]=I("div",{class:"header-brand"},[I("span",{class:"brand-badge"},"ACC"),I("span",{class:"brand-name"},"TELEMETRY")],-1)),I("div",rL,[ht(y,{"user-name":o.value,onLogout:d,onGoToProfile:f},null,8,["user-name"])])])]),I("main",oL,[I("div",aL,[_[13]||(_[13]=I("h1",{class:"page-title"},"Profilo Pilota",-1)),I("div",lL,[I("div",cL,[_[7]||(_[7]=Er('<div class="avatar-container" data-v-ddd58d18><svg class="avatar-helmet" viewBox="0 0 100 100" fill="none" data-v-ddd58d18><defs data-v-ddd58d18><linearGradient id="helmetGrad" x1="0%" y1="0%" x2="100%" y2="100%" data-v-ddd58d18><stop offset="0%" stop-color="#e10600" data-v-ddd58d18></stop><stop offset="100%" stop-color="#ff6b00" data-v-ddd58d18></stop></linearGradient></defs><path d="M50 10C30 10 15 25 15 45V60C15 75 25 85 40 88L45 90H55L60 88C75 85 85 75 85 60V45C85 25 70 10 50 10Z" stroke="url(#helmetGrad)" stroke-width="3" fill="none" data-v-ddd58d18></path><path d="M20 45H80C80 45 78 55 50 55C22 55 20 45 20 45Z" stroke="url(#helmetGrad)" stroke-width="2" fill="rgba(225,6,0,0.1)" data-v-ddd58d18></path><line x1="50" y1="15" x2="50" y2="85" stroke="url(#helmetGrad)" stroke-width="1.5" data-v-ddd58d18></line></svg></div>',1)),I("div",uL,[I("h2",hL,G(o.value),1),I("p",dL,G(e.userEmail),1)])]),I("div",fL,[I("div",pL,[_[12]||(_[12]=I("h3",{class:"card-title"},[I("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none"},[I("circle",{cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"2"}),I("circle",{cx:"12",cy:"12",r:"4",stroke:"currentColor","stroke-width":"2"})]),$t(" Attrezzatura Sim Racing ")],-1)),I("div",gL,[I("div",mL,[_[8]||(_[8]=I("label",{class:"form-label"},"Volante / Base",-1)),ki(I("input",{"onUpdate:modelValue":_[1]||(_[1]=v=>a.value.volante=v),type:"text",class:"form-input",placeholder:"Es. Fanatec CSL DD 8Nm"},null,512),[[hl,a.value.volante]])]),I("div",_L,[_[9]||(_[9]=I("label",{class:"form-label"},"Corona / Rim",-1)),ki(I("input",{"onUpdate:modelValue":_[2]||(_[2]=v=>a.value.corona=v),type:"text",class:"form-input",placeholder:"Es. ClubSport Formula V2"},null,512),[[hl,a.value.corona]])]),I("div",yL,[_[10]||(_[10]=I("label",{class:"form-label"},"Pedaliera",-1)),ki(I("input",{"onUpdate:modelValue":_[3]||(_[3]=v=>a.value.pedaliera=v),type:"text",class:"form-input",placeholder:"Es. CSL Pedals + Load Cell"},null,512),[[hl,a.value.pedaliera]])]),I("div",vL,[_[11]||(_[11]=I("label",{class:"form-label"},"Struttura / Rig",-1)),ki(I("input",{"onUpdate:modelValue":_[4]||(_[4]=v=>a.value.struttura=v),type:"text",class:"form-input",placeholder:"Es. Next Level Racing 2.0"},null,512),[[hl,a.value.struttura]])]),I("button",{class:Rt(["save-btn",{"save-btn--success":c.value}]),disabled:l.value,onClick:h},[l.value?(H(),J(bt,{key:0},[$t("Salvataggio...")],64)):c.value?(H(),J(bt,{key:1},[$t(" Salvato")],64)):(H(),J(bt,{key:2},[$t("Salva Modifiche")],64))],10,bL)])])])])])])])}}}),TL=Object.assign(Zt(wL,[["__scopeId","data-v-ddd58d18"]]),{__name:"ProfilePage"}),EL={class:"page-container"},IL=Vt({__name:"PageContainer",setup(e){return(t,n)=>(H(),J("div",EL,[Zd(t.$slots,"default",{},void 0)]))}}),Su=Object.assign(Zt(IL,[["__scopeId","data-v-71e40101"]]),{__name:"LayoutPageContainer"});function Ga(e){return e+.5|0}const Fs=(e,t,n)=>Math.max(Math.min(e,n),t);function Vo(e){return Fs(Ga(e*2.55),0,255)}function Ks(e){return Fs(Ga(e*255),0,255)}function ns(e){return Fs(Ga(e/2.55)/100,0,1)}function j_(e){return Fs(Ga(e*100),0,100)}const on={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},Ad=[..."0123456789ABCDEF"],SL=e=>Ad[e&15],AL=e=>Ad[(e&240)>>4]+Ad[e&15],wl=e=>(e&240)>>4===(e&15),kL=e=>wl(e.r)&&wl(e.g)&&wl(e.b)&&wl(e.a);function CL(e){var t=e.length,n;return e[0]==="#"&&(t===4||t===5?n={r:255&on[e[1]]*17,g:255&on[e[2]]*17,b:255&on[e[3]]*17,a:t===5?on[e[4]]*17:255}:(t===7||t===9)&&(n={r:on[e[1]]<<4|on[e[2]],g:on[e[3]]<<4|on[e[4]],b:on[e[5]]<<4|on[e[6]],a:t===9?on[e[7]]<<4|on[e[8]]:255})),n}const xL=(e,t)=>e<255?t(e):"";function RL(e){var t=kL(e)?SL:AL;return e?"#"+t(e.r)+t(e.g)+t(e.b)+xL(e.a,t):void 0}const PL=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function IT(e,t,n){const s=t*Math.min(n,1-n),i=(r,o=(r+e/30)%12)=>n-s*Math.max(Math.min(o-3,9-o,1),-1);return[i(0),i(8),i(4)]}function ML(e,t,n){const s=(i,r=(i+e/60)%6)=>n-n*t*Math.max(Math.min(r,4-r,1),0);return[s(5),s(3),s(1)]}function DL(e,t,n){const s=IT(e,1,.5);let i;for(t+n>1&&(i=1/(t+n),t*=i,n*=i),i=0;i<3;i++)s[i]*=1-t-n,s[i]+=t;return s}function OL(e,t,n,s,i){return e===i?(t-n)/s+(t<n?6:0):t===i?(n-e)/s+2:(e-t)/s+4}function rp(e){const n=e.r/255,s=e.g/255,i=e.b/255,r=Math.max(n,s,i),o=Math.min(n,s,i),a=(r+o)/2;let l,c,h;return r!==o&&(h=r-o,c=a>.5?h/(2-r-o):h/(r+o),l=OL(n,s,i,h,r),l=l*60+.5),[l|0,c||0,a]}function op(e,t,n,s){return(Array.isArray(t)?e(t[0],t[1],t[2]):e(t,n,s)).map(Ks)}function ap(e,t,n){return op(IT,e,t,n)}function LL(e,t,n){return op(DL,e,t,n)}function NL(e,t,n){return op(ML,e,t,n)}function ST(e){return(e%360+360)%360}function VL(e){const t=PL.exec(e);let n=255,s;if(!t)return;t[5]!==s&&(n=t[6]?Vo(+t[5]):Ks(+t[5]));const i=ST(+t[2]),r=+t[3]/100,o=+t[4]/100;return t[1]==="hwb"?s=LL(i,r,o):t[1]==="hsv"?s=NL(i,r,o):s=ap(i,r,o),{r:s[0],g:s[1],b:s[2],a:n}}function FL(e,t){var n=rp(e);n[0]=ST(n[0]+t),n=ap(n),e.r=n[0],e.g=n[1],e.b=n[2]}function UL(e){if(!e)return;const t=rp(e),n=t[0],s=j_(t[1]),i=j_(t[2]);return e.a<255?`hsla(${n}, ${s}%, ${i}%, ${ns(e.a)})`:`hsl(${n}, ${s}%, ${i}%)`}const z_={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},W_={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function $L(){const e={},t=Object.keys(W_),n=Object.keys(z_);let s,i,r,o,a;for(s=0;s<t.length;s++){for(o=a=t[s],i=0;i<n.length;i++)r=n[i],a=a.replace(r,z_[r]);r=parseInt(W_[o],16),e[a]=[r>>16&255,r>>8&255,r&255]}return e}let Tl;function BL(e){Tl||(Tl=$L(),Tl.transparent=[0,0,0,0]);const t=Tl[e.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:t.length===4?t[3]:255}}const HL=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function jL(e){const t=HL.exec(e);let n=255,s,i,r;if(t){if(t[7]!==s){const o=+t[7];n=t[8]?Vo(o):Fs(o*255,0,255)}return s=+t[1],i=+t[3],r=+t[5],s=255&(t[2]?Vo(s):Fs(s,0,255)),i=255&(t[4]?Vo(i):Fs(i,0,255)),r=255&(t[6]?Vo(r):Fs(r,0,255)),{r:s,g:i,b:r,a:n}}}function zL(e){return e&&(e.a<255?`rgba(${e.r}, ${e.g}, ${e.b}, ${ns(e.a)})`:`rgb(${e.r}, ${e.g}, ${e.b})`)}const wh=e=>e<=.0031308?e*12.92:Math.pow(e,1/2.4)*1.055-.055,or=e=>e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4);function WL(e,t,n){const s=or(ns(e.r)),i=or(ns(e.g)),r=or(ns(e.b));return{r:Ks(wh(s+n*(or(ns(t.r))-s))),g:Ks(wh(i+n*(or(ns(t.g))-i))),b:Ks(wh(r+n*(or(ns(t.b))-r))),a:e.a+n*(t.a-e.a)}}function El(e,t,n){if(e){let s=rp(e);s[t]=Math.max(0,Math.min(s[t]+s[t]*n,t===0?360:1)),s=ap(s),e.r=s[0],e.g=s[1],e.b=s[2]}}function AT(e,t){return e&&Object.assign(t||{},e)}function q_(e){var t={r:0,g:0,b:0,a:255};return Array.isArray(e)?e.length>=3&&(t={r:e[0],g:e[1],b:e[2],a:255},e.length>3&&(t.a=Ks(e[3]))):(t=AT(e,{r:0,g:0,b:0,a:1}),t.a=Ks(t.a)),t}function qL(e){return e.charAt(0)==="r"?jL(e):VL(e)}class Ta{constructor(t){if(t instanceof Ta)return t;const n=typeof t;let s;n==="object"?s=q_(t):n==="string"&&(s=CL(t)||BL(t)||qL(t)),this._rgb=s,this._valid=!!s}get valid(){return this._valid}get rgb(){var t=AT(this._rgb);return t&&(t.a=ns(t.a)),t}set rgb(t){this._rgb=q_(t)}rgbString(){return this._valid?zL(this._rgb):void 0}hexString(){return this._valid?RL(this._rgb):void 0}hslString(){return this._valid?UL(this._rgb):void 0}mix(t,n){if(t){const s=this.rgb,i=t.rgb;let r;const o=n===r?.5:n,a=2*o-1,l=s.a-i.a,c=((a*l===-1?a:(a+l)/(1+a*l))+1)/2;r=1-c,s.r=255&c*s.r+r*i.r+.5,s.g=255&c*s.g+r*i.g+.5,s.b=255&c*s.b+r*i.b+.5,s.a=o*s.a+(1-o)*i.a,this.rgb=s}return this}interpolate(t,n){return t&&(this._rgb=WL(this._rgb,t._rgb,n)),this}clone(){return new Ta(this.rgb)}alpha(t){return this._rgb.a=Ks(t),this}clearer(t){const n=this._rgb;return n.a*=1-t,this}greyscale(){const t=this._rgb,n=Ga(t.r*.3+t.g*.59+t.b*.11);return t.r=t.g=t.b=n,this}opaquer(t){const n=this._rgb;return n.a*=1+t,this}negate(){const t=this._rgb;return t.r=255-t.r,t.g=255-t.g,t.b=255-t.b,this}lighten(t){return El(this._rgb,2,t),this}darken(t){return El(this._rgb,2,-t),this}saturate(t){return El(this._rgb,1,t),this}desaturate(t){return El(this._rgb,1,-t),this}rotate(t){return FL(this._rgb,t),this}}function Xn(){}const GL=(()=>{let e=0;return()=>e++})();function zt(e){return e==null}function ye(e){if(Array.isArray&&Array.isArray(e))return!0;const t=Object.prototype.toString.call(e);return t.slice(0,7)==="[object"&&t.slice(-6)==="Array]"}function Pt(e){return e!==null&&Object.prototype.toString.call(e)==="[object Object]"}function fn(e){return(typeof e=="number"||e instanceof Number)&&isFinite(+e)}function Rn(e,t){return fn(e)?e:t}function kt(e,t){return typeof e>"u"?t:e}const KL=(e,t)=>typeof e=="string"&&e.endsWith("%")?parseFloat(e)/100*t:+e;function qt(e,t,n){if(e&&typeof e.call=="function")return e.apply(n,t)}function Lt(e,t,n,s){let i,r,o;if(ye(e))for(r=e.length,i=0;i<r;i++)t.call(n,e[i],i);else if(Pt(e))for(o=Object.keys(e),r=o.length,i=0;i<r;i++)t.call(n,e[o[i]],o[i])}function Dc(e,t){let n,s,i,r;if(!e||!t||e.length!==t.length)return!1;for(n=0,s=e.length;n<s;++n)if(i=e[n],r=t[n],i.datasetIndex!==r.datasetIndex||i.index!==r.index)return!1;return!0}function Oc(e){if(ye(e))return e.map(Oc);if(Pt(e)){const t=Object.create(null),n=Object.keys(e),s=n.length;let i=0;for(;i<s;++i)t[n[i]]=Oc(e[n[i]]);return t}return e}function kT(e){return["__proto__","prototype","constructor"].indexOf(e)===-1}function QL(e,t,n,s){if(!kT(e))return;const i=t[e],r=n[e];Pt(i)&&Pt(r)?Ea(i,r,s):t[e]=Oc(r)}function Ea(e,t,n){const s=ye(t)?t:[t],i=s.length;if(!Pt(e))return e;n=n||{};const r=n.merger||QL;let o;for(let a=0;a<i;++a){if(o=s[a],!Pt(o))continue;const l=Object.keys(o);for(let c=0,h=l.length;c<h;++c)r(l[c],e,o,n)}return e}function ea(e,t){return Ea(e,t,{merger:YL})}function YL(e,t,n){if(!kT(e))return;const s=t[e],i=n[e];Pt(s)&&Pt(i)?ea(s,i):Object.prototype.hasOwnProperty.call(t,e)||(t[e]=Oc(i))}const G_={"":e=>e,x:e=>e.x,y:e=>e.y};function XL(e){const t=e.split("."),n=[];let s="";for(const i of t)s+=i,s.endsWith("\\")?s=s.slice(0,-1)+".":(n.push(s),s="");return n}function JL(e){const t=XL(e);return n=>{for(const s of t){if(s==="")break;n=n&&n[s]}return n}}function Lc(e,t){return(G_[t]||(G_[t]=JL(t)))(e)}function lp(e){return e.charAt(0).toUpperCase()+e.slice(1)}const Nc=e=>typeof e<"u",ii=e=>typeof e=="function",K_=(e,t)=>{if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0};function ZL(e){return e.type==="mouseup"||e.type==="click"||e.type==="contextmenu"}const ve=Math.PI,jn=2*ve,tN=jn+ve,Vc=Number.POSITIVE_INFINITY,eN=ve/180,yn=ve/2,yi=ve/4,Q_=ve*2/3,CT=Math.log10,zr=Math.sign;function na(e,t,n){return Math.abs(e-t)<n}function Y_(e){const t=Math.round(e);e=na(e,t,e/1e3)?t:e;const n=Math.pow(10,Math.floor(CT(e))),s=e/n;return(s<=1?1:s<=2?2:s<=5?5:10)*n}function nN(e){const t=[],n=Math.sqrt(e);let s;for(s=1;s<n;s++)e%s===0&&(t.push(s),t.push(e/s));return n===(n|0)&&t.push(n),t.sort((i,r)=>i-r).pop(),t}function sN(e){return typeof e=="symbol"||typeof e=="object"&&e!==null&&!(Symbol.toPrimitive in e||"toString"in e||"valueOf"in e)}function Ia(e){return!sN(e)&&!isNaN(parseFloat(e))&&isFinite(e)}function iN(e,t){const n=Math.round(e);return n-t<=e&&n+t>=e}function rN(e,t,n){let s,i,r;for(s=0,i=e.length;s<i;s++)r=e[s][n],isNaN(r)||(t.min=Math.min(t.min,r),t.max=Math.max(t.max,r))}function xi(e){return e*(ve/180)}function oN(e){return e*(180/ve)}function X_(e){if(!fn(e))return;let t=1,n=0;for(;Math.round(e*t)/t!==e;)t*=10,n++;return n}function aN(e,t){const n=t.x-e.x,s=t.y-e.y,i=Math.sqrt(n*n+s*s);let r=Math.atan2(s,n);return r<-.5*ve&&(r+=jn),{angle:r,distance:i}}function kd(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function lN(e,t){return(e-t+tN)%jn-ve}function xs(e){return(e%jn+jn)%jn}function xT(e,t,n,s){const i=xs(e),r=xs(t),o=xs(n),a=xs(r-i),l=xs(o-i),c=xs(i-r),h=xs(i-o);return i===r||i===o||s&&r===o||a>l&&c<h}function un(e,t,n){return Math.max(t,Math.min(n,e))}function cN(e){return un(e,-32768,32767)}function Fo(e,t,n,s=1e-6){return e>=Math.min(t,n)-s&&e<=Math.max(t,n)+s}function cp(e,t,n){n=n||(o=>e[o]<t);let s=e.length-1,i=0,r;for(;s-i>1;)r=i+s>>1,n(r)?i=r:s=r;return{lo:i,hi:s}}const Ri=(e,t,n,s)=>cp(e,n,s?i=>{const r=e[i][t];return r<n||r===n&&e[i+1][t]===n}:i=>e[i][t]<n),uN=(e,t,n)=>cp(e,n,s=>e[s][t]>=n);function hN(e,t,n){let s=0,i=e.length;for(;s<i&&e[s]<t;)s++;for(;i>s&&e[i-1]>n;)i--;return s>0||i<e.length?e.slice(s,i):e}const RT=["push","pop","shift","splice","unshift"];function dN(e,t){if(e._chartjs){e._chartjs.listeners.push(t);return}Object.defineProperty(e,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[t]}}),RT.forEach(n=>{const s="_onData"+lp(n),i=e[n];Object.defineProperty(e,n,{configurable:!0,enumerable:!1,value(...r){const o=i.apply(this,r);return e._chartjs.listeners.forEach(a=>{typeof a[s]=="function"&&a[s](...r)}),o}})})}function J_(e,t){const n=e._chartjs;if(!n)return;const s=n.listeners,i=s.indexOf(t);i!==-1&&s.splice(i,1),!(s.length>0)&&(RT.forEach(r=>{delete e[r]}),delete e._chartjs)}function fN(e){const t=new Set(e);return t.size===e.length?e:Array.from(t)}const PT=(function(){return typeof window>"u"?function(e){return e()}:window.requestAnimationFrame})();function MT(e,t){let n=[],s=!1;return function(...i){n=i,s||(s=!0,PT.call(window,()=>{s=!1,e.apply(t,n)}))}}function pN(e,t){let n;return function(...s){return t?(clearTimeout(n),n=setTimeout(e,t,s)):e.apply(this,s),t}}const up=e=>e==="start"?"left":e==="end"?"right":"center",Re=(e,t,n)=>e==="start"?t:e==="end"?n:(t+n)/2,gN=(e,t,n,s)=>e===(s?"left":"right")?n:e==="center"?(t+n)/2:t;function mN(e,t,n){const s=t.length;let i=0,r=s;if(e._sorted){const{iScale:o,vScale:a,_parsed:l}=e,c=e.dataset&&e.dataset.options?e.dataset.options.spanGaps:null,h=o.axis,{min:d,max:f,minDefined:p,maxDefined:_}=o.getUserBounds();if(p){if(i=Math.min(Ri(l,h,d).lo,n?s:Ri(t,h,o.getPixelForValue(d)).lo),c){const y=l.slice(0,i+1).reverse().findIndex(v=>!zt(v[a.axis]));i-=Math.max(0,y)}i=un(i,0,s-1)}if(_){let y=Math.max(Ri(l,o.axis,f,!0).hi+1,n?0:Ri(t,h,o.getPixelForValue(f),!0).hi+1);if(c){const v=l.slice(y-1).findIndex(w=>!zt(w[a.axis]));y+=Math.max(0,v)}r=un(y,i,s)-i}else r=s-i}return{start:i,count:r}}function _N(e){const{xScale:t,yScale:n,_scaleRanges:s}=e,i={xmin:t.min,xmax:t.max,ymin:n.min,ymax:n.max};if(!s)return e._scaleRanges=i,!0;const r=s.xmin!==t.min||s.xmax!==t.max||s.ymin!==n.min||s.ymax!==n.max;return Object.assign(s,i),r}const Il=e=>e===0||e===1,Z_=(e,t,n)=>-(Math.pow(2,10*(e-=1))*Math.sin((e-t)*jn/n)),ty=(e,t,n)=>Math.pow(2,-10*e)*Math.sin((e-t)*jn/n)+1,sa={linear:e=>e,easeInQuad:e=>e*e,easeOutQuad:e=>-e*(e-2),easeInOutQuad:e=>(e/=.5)<1?.5*e*e:-.5*(--e*(e-2)-1),easeInCubic:e=>e*e*e,easeOutCubic:e=>(e-=1)*e*e+1,easeInOutCubic:e=>(e/=.5)<1?.5*e*e*e:.5*((e-=2)*e*e+2),easeInQuart:e=>e*e*e*e,easeOutQuart:e=>-((e-=1)*e*e*e-1),easeInOutQuart:e=>(e/=.5)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2),easeInQuint:e=>e*e*e*e*e,easeOutQuint:e=>(e-=1)*e*e*e*e+1,easeInOutQuint:e=>(e/=.5)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2),easeInSine:e=>-Math.cos(e*yn)+1,easeOutSine:e=>Math.sin(e*yn),easeInOutSine:e=>-.5*(Math.cos(ve*e)-1),easeInExpo:e=>e===0?0:Math.pow(2,10*(e-1)),easeOutExpo:e=>e===1?1:-Math.pow(2,-10*e)+1,easeInOutExpo:e=>Il(e)?e:e<.5?.5*Math.pow(2,10*(e*2-1)):.5*(-Math.pow(2,-10*(e*2-1))+2),easeInCirc:e=>e>=1?e:-(Math.sqrt(1-e*e)-1),easeOutCirc:e=>Math.sqrt(1-(e-=1)*e),easeInOutCirc:e=>(e/=.5)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1),easeInElastic:e=>Il(e)?e:Z_(e,.075,.3),easeOutElastic:e=>Il(e)?e:ty(e,.075,.3),easeInOutElastic(e){return Il(e)?e:e<.5?.5*Z_(e*2,.1125,.45):.5+.5*ty(e*2-1,.1125,.45)},easeInBack(e){return e*e*((1.70158+1)*e-1.70158)},easeOutBack(e){return(e-=1)*e*((1.70158+1)*e+1.70158)+1},easeInOutBack(e){let t=1.70158;return(e/=.5)<1?.5*(e*e*(((t*=1.525)+1)*e-t)):.5*((e-=2)*e*(((t*=1.525)+1)*e+t)+2)},easeInBounce:e=>1-sa.easeOutBounce(1-e),easeOutBounce(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},easeInOutBounce:e=>e<.5?sa.easeInBounce(e*2)*.5:sa.easeOutBounce(e*2-1)*.5+.5};function hp(e){if(e&&typeof e=="object"){const t=e.toString();return t==="[object CanvasPattern]"||t==="[object CanvasGradient]"}return!1}function ey(e){return hp(e)?e:new Ta(e)}function Th(e){return hp(e)?e:new Ta(e).saturate(.5).darken(.1).hexString()}const yN=["x","y","borderWidth","radius","tension"],vN=["color","borderColor","backgroundColor"];function bN(e){e.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),e.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:t=>t!=="onProgress"&&t!=="onComplete"&&t!=="fn"}),e.set("animations",{colors:{type:"color",properties:vN},numbers:{type:"number",properties:yN}}),e.describe("animations",{_fallback:"animation"}),e.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:t=>t|0}}}})}function wN(e){e.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const ny=new Map;function TN(e,t){t=t||{};const n=e+JSON.stringify(t);let s=ny.get(n);return s||(s=new Intl.NumberFormat(e,t),ny.set(n,s)),s}function DT(e,t,n){return TN(t,n).format(e)}const EN={values(e){return ye(e)?e:""+e},numeric(e,t,n){if(e===0)return"0";const s=this.chart.options.locale;let i,r=e;if(n.length>1){const c=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(c<1e-4||c>1e15)&&(i="scientific"),r=IN(e,n)}const o=CT(Math.abs(r)),a=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),l={notation:i,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),DT(e,s,l)}};function IN(e,t){let n=t.length>3?t[2].value-t[1].value:t[1].value-t[0].value;return Math.abs(n)>=1&&e!==Math.floor(e)&&(n=e-Math.floor(e)),n}var OT={formatters:EN};function SN(e){e.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(t,n)=>n.lineWidth,tickColor:(t,n)=>n.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:OT.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),e.route("scale.ticks","color","","color"),e.route("scale.grid","color","","borderColor"),e.route("scale.border","color","","borderColor"),e.route("scale.title","color","","color"),e.describe("scale",{_fallback:!1,_scriptable:t=>!t.startsWith("before")&&!t.startsWith("after")&&t!=="callback"&&t!=="parser",_indexable:t=>t!=="borderDash"&&t!=="tickBorderDash"&&t!=="dash"}),e.describe("scales",{_fallback:"scale"}),e.describe("scale.ticks",{_scriptable:t=>t!=="backdropPadding"&&t!=="callback",_indexable:t=>t!=="backdropPadding"})}const qi=Object.create(null),Cd=Object.create(null);function ia(e,t){if(!t)return e;const n=t.split(".");for(let s=0,i=n.length;s<i;++s){const r=n[s];e=e[r]||(e[r]=Object.create(null))}return e}function Eh(e,t,n){return typeof t=="string"?Ea(ia(e,t),n):Ea(ia(e,""),t)}class AN{constructor(t,n){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=s=>s.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(s,i)=>Th(i.backgroundColor),this.hoverBorderColor=(s,i)=>Th(i.borderColor),this.hoverColor=(s,i)=>Th(i.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(t),this.apply(n)}set(t,n){return Eh(this,t,n)}get(t){return ia(this,t)}describe(t,n){return Eh(Cd,t,n)}override(t,n){return Eh(qi,t,n)}route(t,n,s,i){const r=ia(this,t),o=ia(this,s),a="_"+n;Object.defineProperties(r,{[a]:{value:r[n],writable:!0},[n]:{enumerable:!0,get(){const l=this[a],c=o[i];return Pt(l)?Object.assign({},c,l):kt(l,c)},set(l){this[a]=l}}})}apply(t){t.forEach(n=>n(this))}}var ne=new AN({_scriptable:e=>!e.startsWith("on"),_indexable:e=>e!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[bN,wN,SN]);function kN(e){return!e||zt(e.size)||zt(e.family)?null:(e.style?e.style+" ":"")+(e.weight?e.weight+" ":"")+e.size+"px "+e.family}function sy(e,t,n,s,i){let r=t[i];return r||(r=t[i]=e.measureText(i).width,n.push(i)),r>s&&(s=r),s}function vi(e,t,n){const s=e.currentDevicePixelRatio,i=n!==0?Math.max(n/2,.5):0;return Math.round((t-i)*s)/s+i}function iy(e,t){!t&&!e||(t=t||e.getContext("2d"),t.save(),t.resetTransform(),t.clearRect(0,0,e.width,e.height),t.restore())}function xd(e,t,n,s){LT(e,t,n,s,null)}function LT(e,t,n,s,i){let r,o,a,l,c,h,d,f;const p=t.pointStyle,_=t.rotation,y=t.radius;let v=(_||0)*eN;if(p&&typeof p=="object"&&(r=p.toString(),r==="[object HTMLImageElement]"||r==="[object HTMLCanvasElement]")){e.save(),e.translate(n,s),e.rotate(v),e.drawImage(p,-p.width/2,-p.height/2,p.width,p.height),e.restore();return}if(!(isNaN(y)||y<=0)){switch(e.beginPath(),p){default:i?e.ellipse(n,s,i/2,y,0,0,jn):e.arc(n,s,y,0,jn),e.closePath();break;case"triangle":h=i?i/2:y,e.moveTo(n+Math.sin(v)*h,s-Math.cos(v)*y),v+=Q_,e.lineTo(n+Math.sin(v)*h,s-Math.cos(v)*y),v+=Q_,e.lineTo(n+Math.sin(v)*h,s-Math.cos(v)*y),e.closePath();break;case"rectRounded":c=y*.516,l=y-c,o=Math.cos(v+yi)*l,d=Math.cos(v+yi)*(i?i/2-c:l),a=Math.sin(v+yi)*l,f=Math.sin(v+yi)*(i?i/2-c:l),e.arc(n-d,s-a,c,v-ve,v-yn),e.arc(n+f,s-o,c,v-yn,v),e.arc(n+d,s+a,c,v,v+yn),e.arc(n-f,s+o,c,v+yn,v+ve),e.closePath();break;case"rect":if(!_){l=Math.SQRT1_2*y,h=i?i/2:l,e.rect(n-h,s-l,2*h,2*l);break}v+=yi;case"rectRot":d=Math.cos(v)*(i?i/2:y),o=Math.cos(v)*y,a=Math.sin(v)*y,f=Math.sin(v)*(i?i/2:y),e.moveTo(n-d,s-a),e.lineTo(n+f,s-o),e.lineTo(n+d,s+a),e.lineTo(n-f,s+o),e.closePath();break;case"crossRot":v+=yi;case"cross":d=Math.cos(v)*(i?i/2:y),o=Math.cos(v)*y,a=Math.sin(v)*y,f=Math.sin(v)*(i?i/2:y),e.moveTo(n-d,s-a),e.lineTo(n+d,s+a),e.moveTo(n+f,s-o),e.lineTo(n-f,s+o);break;case"star":d=Math.cos(v)*(i?i/2:y),o=Math.cos(v)*y,a=Math.sin(v)*y,f=Math.sin(v)*(i?i/2:y),e.moveTo(n-d,s-a),e.lineTo(n+d,s+a),e.moveTo(n+f,s-o),e.lineTo(n-f,s+o),v+=yi,d=Math.cos(v)*(i?i/2:y),o=Math.cos(v)*y,a=Math.sin(v)*y,f=Math.sin(v)*(i?i/2:y),e.moveTo(n-d,s-a),e.lineTo(n+d,s+a),e.moveTo(n+f,s-o),e.lineTo(n-f,s+o);break;case"line":o=i?i/2:Math.cos(v)*y,a=Math.sin(v)*y,e.moveTo(n-o,s-a),e.lineTo(n+o,s+a);break;case"dash":e.moveTo(n,s),e.lineTo(n+Math.cos(v)*(i?i/2:y),s+Math.sin(v)*y);break;case!1:e.closePath();break}e.fill(),t.borderWidth>0&&e.stroke()}}function Sa(e,t,n){return n=n||.5,!t||e&&e.x>t.left-n&&e.x<t.right+n&&e.y>t.top-n&&e.y<t.bottom+n}function dp(e,t){e.save(),e.beginPath(),e.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),e.clip()}function fp(e){e.restore()}function CN(e,t,n,s,i){if(!t)return e.lineTo(n.x,n.y);if(i==="middle"){const r=(t.x+n.x)/2;e.lineTo(r,t.y),e.lineTo(r,n.y)}else i==="after"!=!!s?e.lineTo(t.x,n.y):e.lineTo(n.x,t.y);e.lineTo(n.x,n.y)}function xN(e,t,n,s){if(!t)return e.lineTo(n.x,n.y);e.bezierCurveTo(s?t.cp1x:t.cp2x,s?t.cp1y:t.cp2y,s?n.cp2x:n.cp1x,s?n.cp2y:n.cp1y,n.x,n.y)}function RN(e,t){t.translation&&e.translate(t.translation[0],t.translation[1]),zt(t.rotation)||e.rotate(t.rotation),t.color&&(e.fillStyle=t.color),t.textAlign&&(e.textAlign=t.textAlign),t.textBaseline&&(e.textBaseline=t.textBaseline)}function PN(e,t,n,s,i){if(i.strikethrough||i.underline){const r=e.measureText(s),o=t-r.actualBoundingBoxLeft,a=t+r.actualBoundingBoxRight,l=n-r.actualBoundingBoxAscent,c=n+r.actualBoundingBoxDescent,h=i.strikethrough?(l+c)/2:c;e.strokeStyle=e.fillStyle,e.beginPath(),e.lineWidth=i.decorationWidth||2,e.moveTo(o,h),e.lineTo(a,h),e.stroke()}}function MN(e,t){const n=e.fillStyle;e.fillStyle=t.color,e.fillRect(t.left,t.top,t.width,t.height),e.fillStyle=n}function Aa(e,t,n,s,i,r={}){const o=ye(t)?t:[t],a=r.strokeWidth>0&&r.strokeColor!=="";let l,c;for(e.save(),e.font=i.string,RN(e,r),l=0;l<o.length;++l)c=o[l],r.backdrop&&MN(e,r.backdrop),a&&(r.strokeColor&&(e.strokeStyle=r.strokeColor),zt(r.strokeWidth)||(e.lineWidth=r.strokeWidth),e.strokeText(c,n,s,r.maxWidth)),e.fillText(c,n,s,r.maxWidth),PN(e,n,s,c,r),s+=Number(i.lineHeight);e.restore()}function Rd(e,t){const{x:n,y:s,w:i,h:r,radius:o}=t;e.arc(n+o.topLeft,s+o.topLeft,o.topLeft,1.5*ve,ve,!0),e.lineTo(n,s+r-o.bottomLeft),e.arc(n+o.bottomLeft,s+r-o.bottomLeft,o.bottomLeft,ve,yn,!0),e.lineTo(n+i-o.bottomRight,s+r),e.arc(n+i-o.bottomRight,s+r-o.bottomRight,o.bottomRight,yn,0,!0),e.lineTo(n+i,s+o.topRight),e.arc(n+i-o.topRight,s+o.topRight,o.topRight,0,-yn,!0),e.lineTo(n+o.topLeft,s)}const DN=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,ON=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function LN(e,t){const n=(""+e).match(DN);if(!n||n[1]==="normal")return t*1.2;switch(e=+n[2],n[3]){case"px":return e;case"%":e/=100;break}return t*e}const NN=e=>+e||0;function NT(e,t){const n={},s=Pt(t),i=s?Object.keys(t):t,r=Pt(e)?s?o=>kt(e[o],e[t[o]]):o=>e[o]:()=>e;for(const o of i)n[o]=NN(r(o));return n}function VN(e){return NT(e,{top:"y",right:"x",bottom:"y",left:"x"})}function ra(e){return NT(e,["topLeft","topRight","bottomLeft","bottomRight"])}function pn(e){const t=VN(e);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function Ne(e,t){e=e||{},t=t||ne.font;let n=kt(e.size,t.size);typeof n=="string"&&(n=parseInt(n,10));let s=kt(e.style,t.style);s&&!(""+s).match(ON)&&(console.warn('Invalid font style specified: "'+s+'"'),s=void 0);const i={family:kt(e.family,t.family),lineHeight:LN(kt(e.lineHeight,t.lineHeight),n),size:n,style:s,weight:kt(e.weight,t.weight),string:""};return i.string=kN(i),i}function Sl(e,t,n,s){let i,r,o;for(i=0,r=e.length;i<r;++i)if(o=e[i],o!==void 0&&o!==void 0)return o}function FN(e,t,n){const{min:s,max:i}=e,r=KL(t,(i-s)/2),o=(a,l)=>n&&a===0?0:a+l;return{min:o(s,-Math.abs(r)),max:o(i,r)}}function Xi(e,t){return Object.assign(Object.create(e),t)}function pp(e,t=[""],n,s,i=()=>e[0]){const r=n||e;typeof s>"u"&&(s=$T("_fallback",e));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:e,_rootScopes:r,_fallback:s,_getTarget:i,override:a=>pp([a,...e],t,r,s)};return new Proxy(o,{deleteProperty(a,l){return delete a[l],delete a._keys,delete e[0][l],!0},get(a,l){return FT(a,l,()=>qN(l,t,e,a))},getOwnPropertyDescriptor(a,l){return Reflect.getOwnPropertyDescriptor(a._scopes[0],l)},getPrototypeOf(){return Reflect.getPrototypeOf(e[0])},has(a,l){return oy(a).includes(l)},ownKeys(a){return oy(a)},set(a,l,c){const h=a._storage||(a._storage=i());return a[l]=h[l]=c,delete a._keys,!0}})}function Wr(e,t,n,s){const i={_cacheable:!1,_proxy:e,_context:t,_subProxy:n,_stack:new Set,_descriptors:VT(e,s),setContext:r=>Wr(e,r,n,s),override:r=>Wr(e.override(r),t,n,s)};return new Proxy(i,{deleteProperty(r,o){return delete r[o],delete e[o],!0},get(r,o,a){return FT(r,o,()=>$N(r,o,a))},getOwnPropertyDescriptor(r,o){return r._descriptors.allKeys?Reflect.has(e,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(e,o)},getPrototypeOf(){return Reflect.getPrototypeOf(e)},has(r,o){return Reflect.has(e,o)},ownKeys(){return Reflect.ownKeys(e)},set(r,o,a){return e[o]=a,delete r[o],!0}})}function VT(e,t={scriptable:!0,indexable:!0}){const{_scriptable:n=t.scriptable,_indexable:s=t.indexable,_allKeys:i=t.allKeys}=e;return{allKeys:i,scriptable:n,indexable:s,isScriptable:ii(n)?n:()=>n,isIndexable:ii(s)?s:()=>s}}const UN=(e,t)=>e?e+lp(t):t,gp=(e,t)=>Pt(t)&&e!=="adapters"&&(Object.getPrototypeOf(t)===null||t.constructor===Object);function FT(e,t,n){if(Object.prototype.hasOwnProperty.call(e,t)||t==="constructor")return e[t];const s=n();return e[t]=s,s}function $N(e,t,n){const{_proxy:s,_context:i,_subProxy:r,_descriptors:o}=e;let a=s[t];return ii(a)&&o.isScriptable(t)&&(a=BN(t,a,e,n)),ye(a)&&a.length&&(a=HN(t,a,e,o.isIndexable)),gp(t,a)&&(a=Wr(a,i,r&&r[t],o)),a}function BN(e,t,n,s){const{_proxy:i,_context:r,_subProxy:o,_stack:a}=n;if(a.has(e))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+e);a.add(e);let l=t(r,o||s);return a.delete(e),gp(e,l)&&(l=mp(i._scopes,i,e,l)),l}function HN(e,t,n,s){const{_proxy:i,_context:r,_subProxy:o,_descriptors:a}=n;if(typeof r.index<"u"&&s(e))return t[r.index%t.length];if(Pt(t[0])){const l=t,c=i._scopes.filter(h=>h!==l);t=[];for(const h of l){const d=mp(c,i,e,h);t.push(Wr(d,r,o&&o[e],a))}}return t}function UT(e,t,n){return ii(e)?e(t,n):e}const jN=(e,t)=>e===!0?t:typeof e=="string"?Lc(t,e):void 0;function zN(e,t,n,s,i){for(const r of t){const o=jN(n,r);if(o){e.add(o);const a=UT(o._fallback,n,i);if(typeof a<"u"&&a!==n&&a!==s)return a}else if(o===!1&&typeof s<"u"&&n!==s)return null}return!1}function mp(e,t,n,s){const i=t._rootScopes,r=UT(t._fallback,n,s),o=[...e,...i],a=new Set;a.add(s);let l=ry(a,o,n,r||n,s);return l===null||typeof r<"u"&&r!==n&&(l=ry(a,o,r,l,s),l===null)?!1:pp(Array.from(a),[""],i,r,()=>WN(t,n,s))}function ry(e,t,n,s,i){for(;n;)n=zN(e,t,n,s,i);return n}function WN(e,t,n){const s=e._getTarget();t in s||(s[t]={});const i=s[t];return ye(i)&&Pt(n)?n:i||{}}function qN(e,t,n,s){let i;for(const r of t)if(i=$T(UN(r,e),n),typeof i<"u")return gp(e,i)?mp(n,s,e,i):i}function $T(e,t){for(const n of t){if(!n)continue;const s=n[e];if(typeof s<"u")return s}}function oy(e){let t=e._keys;return t||(t=e._keys=GN(e._scopes)),t}function GN(e){const t=new Set;for(const n of e)for(const s of Object.keys(n).filter(i=>!i.startsWith("_")))t.add(s);return Array.from(t)}const KN=Number.EPSILON||1e-14,qr=(e,t)=>t<e.length&&!e[t].skip&&e[t],BT=e=>e==="x"?"y":"x";function QN(e,t,n,s){const i=e.skip?t:e,r=t,o=n.skip?t:n,a=kd(r,i),l=kd(o,r);let c=a/(a+l),h=l/(a+l);c=isNaN(c)?0:c,h=isNaN(h)?0:h;const d=s*c,f=s*h;return{previous:{x:r.x-d*(o.x-i.x),y:r.y-d*(o.y-i.y)},next:{x:r.x+f*(o.x-i.x),y:r.y+f*(o.y-i.y)}}}function YN(e,t,n){const s=e.length;let i,r,o,a,l,c=qr(e,0);for(let h=0;h<s-1;++h)if(l=c,c=qr(e,h+1),!(!l||!c)){if(na(t[h],0,KN)){n[h]=n[h+1]=0;continue}i=n[h]/t[h],r=n[h+1]/t[h],a=Math.pow(i,2)+Math.pow(r,2),!(a<=9)&&(o=3/Math.sqrt(a),n[h]=i*o*t[h],n[h+1]=r*o*t[h])}}function XN(e,t,n="x"){const s=BT(n),i=e.length;let r,o,a,l=qr(e,0);for(let c=0;c<i;++c){if(o=a,a=l,l=qr(e,c+1),!a)continue;const h=a[n],d=a[s];o&&(r=(h-o[n])/3,a[`cp1${n}`]=h-r,a[`cp1${s}`]=d-r*t[c]),l&&(r=(l[n]-h)/3,a[`cp2${n}`]=h+r,a[`cp2${s}`]=d+r*t[c])}}function JN(e,t="x"){const n=BT(t),s=e.length,i=Array(s).fill(0),r=Array(s);let o,a,l,c=qr(e,0);for(o=0;o<s;++o)if(a=l,l=c,c=qr(e,o+1),!!l){if(c){const h=c[t]-l[t];i[o]=h!==0?(c[n]-l[n])/h:0}r[o]=a?c?zr(i[o-1])!==zr(i[o])?0:(i[o-1]+i[o])/2:i[o-1]:i[o]}YN(e,i,r),XN(e,r,t)}function Al(e,t,n){return Math.max(Math.min(e,n),t)}function ZN(e,t){let n,s,i,r,o,a=Sa(e[0],t);for(n=0,s=e.length;n<s;++n)o=r,r=a,a=n<s-1&&Sa(e[n+1],t),r&&(i=e[n],o&&(i.cp1x=Al(i.cp1x,t.left,t.right),i.cp1y=Al(i.cp1y,t.top,t.bottom)),a&&(i.cp2x=Al(i.cp2x,t.left,t.right),i.cp2y=Al(i.cp2y,t.top,t.bottom)))}function tV(e,t,n,s,i){let r,o,a,l;if(t.spanGaps&&(e=e.filter(c=>!c.skip)),t.cubicInterpolationMode==="monotone")JN(e,i);else{let c=s?e[e.length-1]:e[0];for(r=0,o=e.length;r<o;++r)a=e[r],l=QN(c,a,e[Math.min(r+1,o-(s?0:1))%o],t.tension),a.cp1x=l.previous.x,a.cp1y=l.previous.y,a.cp2x=l.next.x,a.cp2y=l.next.y,c=a}t.capBezierPoints&&ZN(e,n)}function _p(){return typeof window<"u"&&typeof document<"u"}function yp(e){let t=e.parentNode;return t&&t.toString()==="[object ShadowRoot]"&&(t=t.host),t}function Fc(e,t,n){let s;return typeof e=="string"?(s=parseInt(e,10),e.indexOf("%")!==-1&&(s=s/100*t.parentNode[n])):s=e,s}const Au=e=>e.ownerDocument.defaultView.getComputedStyle(e,null);function eV(e,t){return Au(e).getPropertyValue(t)}const nV=["top","right","bottom","left"];function Ni(e,t,n){const s={};n=n?"-"+n:"";for(let i=0;i<4;i++){const r=nV[i];s[r]=parseFloat(e[t+"-"+r+n])||0}return s.width=s.left+s.right,s.height=s.top+s.bottom,s}const sV=(e,t,n)=>(e>0||t>0)&&(!n||!n.shadowRoot);function iV(e,t){const n=e.touches,s=n&&n.length?n[0]:e,{offsetX:i,offsetY:r}=s;let o=!1,a,l;if(sV(i,r,e.target))a=i,l=r;else{const c=t.getBoundingClientRect();a=s.clientX-c.left,l=s.clientY-c.top,o=!0}return{x:a,y:l,box:o}}function Ei(e,t){if("native"in e)return e;const{canvas:n,currentDevicePixelRatio:s}=t,i=Au(n),r=i.boxSizing==="border-box",o=Ni(i,"padding"),a=Ni(i,"border","width"),{x:l,y:c,box:h}=iV(e,n),d=o.left+(h&&a.left),f=o.top+(h&&a.top);let{width:p,height:_}=t;return r&&(p-=o.width+a.width,_-=o.height+a.height),{x:Math.round((l-d)/p*n.width/s),y:Math.round((c-f)/_*n.height/s)}}function rV(e,t,n){let s,i;if(t===void 0||n===void 0){const r=e&&yp(e);if(!r)t=e.clientWidth,n=e.clientHeight;else{const o=r.getBoundingClientRect(),a=Au(r),l=Ni(a,"border","width"),c=Ni(a,"padding");t=o.width-c.width-l.width,n=o.height-c.height-l.height,s=Fc(a.maxWidth,r,"clientWidth"),i=Fc(a.maxHeight,r,"clientHeight")}}return{width:t,height:n,maxWidth:s||Vc,maxHeight:i||Vc}}const Us=e=>Math.round(e*10)/10;function oV(e,t,n,s){const i=Au(e),r=Ni(i,"margin"),o=Fc(i.maxWidth,e,"clientWidth")||Vc,a=Fc(i.maxHeight,e,"clientHeight")||Vc,l=rV(e,t,n);let{width:c,height:h}=l;if(i.boxSizing==="content-box"){const f=Ni(i,"border","width"),p=Ni(i,"padding");c-=p.width+f.width,h-=p.height+f.height}return c=Math.max(0,c-r.width),h=Math.max(0,s?c/s:h-r.height),c=Us(Math.min(c,o,l.maxWidth)),h=Us(Math.min(h,a,l.maxHeight)),c&&!h&&(h=Us(c/2)),(t!==void 0||n!==void 0)&&s&&l.height&&h>l.height&&(h=l.height,c=Us(Math.floor(h*s))),{width:c,height:h}}function ay(e,t,n){const s=t||1,i=Us(e.height*s),r=Us(e.width*s);e.height=Us(e.height),e.width=Us(e.width);const o=e.canvas;return o.style&&(n||!o.style.height&&!o.style.width)&&(o.style.height=`${e.height}px`,o.style.width=`${e.width}px`),e.currentDevicePixelRatio!==s||o.height!==i||o.width!==r?(e.currentDevicePixelRatio=s,o.height=i,o.width=r,e.ctx.setTransform(s,0,0,s,0,0),!0):!1}const aV=(function(){let e=!1;try{const t={get passive(){return e=!0,!1}};_p()&&(window.addEventListener("test",null,t),window.removeEventListener("test",null,t))}catch{}return e})();function ly(e,t){const n=eV(e,t),s=n&&n.match(/^(\d+)(\.\d+)?px$/);return s?+s[1]:void 0}function Ii(e,t,n,s){return{x:e.x+n*(t.x-e.x),y:e.y+n*(t.y-e.y)}}function lV(e,t,n,s){return{x:e.x+n*(t.x-e.x),y:s==="middle"?n<.5?e.y:t.y:s==="after"?n<1?e.y:t.y:n>0?t.y:e.y}}function cV(e,t,n,s){const i={x:e.cp2x,y:e.cp2y},r={x:t.cp1x,y:t.cp1y},o=Ii(e,i,n),a=Ii(i,r,n),l=Ii(r,t,n),c=Ii(o,a,n),h=Ii(a,l,n);return Ii(c,h,n)}const uV=function(e,t){return{x(n){return e+e+t-n},setWidth(n){t=n},textAlign(n){return n==="center"?n:n==="right"?"left":"right"},xPlus(n,s){return n-s},leftForLtr(n,s){return n-s}}},hV=function(){return{x(e){return e},setWidth(e){},textAlign(e){return e},xPlus(e,t){return e+t},leftForLtr(e,t){return e}}};function Rr(e,t,n){return e?uV(t,n):hV()}function HT(e,t){let n,s;(t==="ltr"||t==="rtl")&&(n=e.canvas.style,s=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",t,"important"),e.prevTextDirection=s)}function jT(e,t){t!==void 0&&(delete e.prevTextDirection,e.canvas.style.setProperty("direction",t[0],t[1]))}function zT(e){return e==="angle"?{between:xT,compare:lN,normalize:xs}:{between:Fo,compare:(t,n)=>t-n,normalize:t=>t}}function cy({start:e,end:t,count:n,loop:s,style:i}){return{start:e%n,end:t%n,loop:s&&(t-e+1)%n===0,style:i}}function dV(e,t,n){const{property:s,start:i,end:r}=n,{between:o,normalize:a}=zT(s),l=t.length;let{start:c,end:h,loop:d}=e,f,p;if(d){for(c+=l,h+=l,f=0,p=l;f<p&&o(a(t[c%l][s]),i,r);++f)c--,h--;c%=l,h%=l}return h<c&&(h+=l),{start:c,end:h,loop:d,style:e.style}}function fV(e,t,n){if(!n)return[e];const{property:s,start:i,end:r}=n,o=t.length,{compare:a,between:l,normalize:c}=zT(s),{start:h,end:d,loop:f,style:p}=dV(e,t,n),_=[];let y=!1,v=null,w,M,E;const x=()=>l(i,E,w)&&a(i,E)!==0,O=()=>a(r,w)===0||l(r,E,w),V=()=>y||x(),A=()=>!y||O();for(let b=h,T=h;b<=d;++b)M=t[b%o],!M.skip&&(w=c(M[s]),w!==E&&(y=l(w,i,r),v===null&&V()&&(v=a(w,i)===0?b:T),v!==null&&A()&&(_.push(cy({start:v,end:b,loop:f,count:o,style:p})),v=null),T=b,E=w));return v!==null&&_.push(cy({start:v,end:d,loop:f,count:o,style:p})),_}function pV(e,t){const n=[],s=e.segments;for(let i=0;i<s.length;i++){const r=fV(s[i],e.points,t);r.length&&n.push(...r)}return n}function gV(e,t,n,s){let i=0,r=t-1;if(n&&!s)for(;i<t&&!e[i].skip;)i++;for(;i<t&&e[i].skip;)i++;for(i%=t,n&&(r+=i);r>i&&e[r%t].skip;)r--;return r%=t,{start:i,end:r}}function mV(e,t,n,s){const i=e.length,r=[];let o=t,a=e[t],l;for(l=t+1;l<=n;++l){const c=e[l%i];c.skip||c.stop?a.skip||(s=!1,r.push({start:t%i,end:(l-1)%i,loop:s}),t=o=c.stop?l:null):(o=l,a.skip&&(t=l)),a=c}return o!==null&&r.push({start:t%i,end:o%i,loop:s}),r}function _V(e,t){const n=e.points,s=e.options.spanGaps,i=n.length;if(!i)return[];const r=!!e._loop,{start:o,end:a}=gV(n,i,r,s);if(s===!0)return uy(e,[{start:o,end:a,loop:r}],n,t);const l=a<o?a+i:a,c=!!e._fullLoop&&o===0&&a===i-1;return uy(e,mV(n,o,l,c),n,t)}function uy(e,t,n,s){return!s||!s.setContext||!n?t:yV(e,t,n,s)}function yV(e,t,n,s){const i=e._chart.getContext(),r=hy(e.options),{_datasetIndex:o,options:{spanGaps:a}}=e,l=n.length,c=[];let h=r,d=t[0].start,f=d;function p(_,y,v,w){const M=a?-1:1;if(_!==y){for(_+=l;n[_%l].skip;)_-=M;for(;n[y%l].skip;)y+=M;_%l!==y%l&&(c.push({start:_%l,end:y%l,loop:v,style:w}),h=w,d=y%l)}}for(const _ of t){d=a?d:_.start;let y=n[d%l],v;for(f=d+1;f<=_.end;f++){const w=n[f%l];v=hy(s.setContext(Xi(i,{type:"segment",p0:y,p1:w,p0DataIndex:(f-1)%l,p1DataIndex:f%l,datasetIndex:o}))),vV(v,h)&&p(d,f-1,_.loop,h),y=w,h=v}d<f-1&&p(d,f-1,_.loop,h)}return c}function hy(e){return{backgroundColor:e.backgroundColor,borderCapStyle:e.borderCapStyle,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderJoinStyle:e.borderJoinStyle,borderWidth:e.borderWidth,borderColor:e.borderColor}}function vV(e,t){if(!t)return!1;const n=[],s=function(i,r){return hp(r)?(n.includes(r)||n.push(r),n.indexOf(r)):r};return JSON.stringify(e,s)!==JSON.stringify(t,s)}function kl(e,t,n){return e.options.clip?e[n]:t[n]}function bV(e,t){const{xScale:n,yScale:s}=e;return n&&s?{left:kl(n,t,"left"),right:kl(n,t,"right"),top:kl(s,t,"top"),bottom:kl(s,t,"bottom")}:t}function wV(e,t){const n=t._clip;if(n.disabled)return!1;const s=bV(t,e.chartArea);return{left:n.left===!1?0:s.left-(n.left===!0?0:n.left),right:n.right===!1?e.width:s.right+(n.right===!0?0:n.right),top:n.top===!1?0:s.top-(n.top===!0?0:n.top),bottom:n.bottom===!1?e.height:s.bottom+(n.bottom===!0?0:n.bottom)}}class TV{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(t,n,s,i){const r=n.listeners[i],o=n.duration;r.forEach(a=>a({chart:t,initial:n.initial,numSteps:o,currentStep:Math.min(s-n.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=PT.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(t=Date.now()){let n=0;this._charts.forEach((s,i)=>{if(!s.running||!s.items.length)return;const r=s.items;let o=r.length-1,a=!1,l;for(;o>=0;--o)l=r[o],l._active?(l._total>s.duration&&(s.duration=l._total),l.tick(t),a=!0):(r[o]=r[r.length-1],r.pop());a&&(i.draw(),this._notify(i,s,t,"progress")),r.length||(s.running=!1,this._notify(i,s,t,"complete"),s.initial=!1),n+=r.length}),this._lastDate=t,n===0&&(this._running=!1)}_getAnims(t){const n=this._charts;let s=n.get(t);return s||(s={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},n.set(t,s)),s}listen(t,n,s){this._getAnims(t).listeners[n].push(s)}add(t,n){!n||!n.length||this._getAnims(t).items.push(...n)}has(t){return this._getAnims(t).items.length>0}start(t){const n=this._charts.get(t);n&&(n.running=!0,n.start=Date.now(),n.duration=n.items.reduce((s,i)=>Math.max(s,i._duration),0),this._refresh())}running(t){if(!this._running)return!1;const n=this._charts.get(t);return!(!n||!n.running||!n.items.length)}stop(t){const n=this._charts.get(t);if(!n||!n.items.length)return;const s=n.items;let i=s.length-1;for(;i>=0;--i)s[i].cancel();n.items=[],this._notify(t,n,Date.now(),"complete")}remove(t){return this._charts.delete(t)}}var Jn=new TV;const dy="transparent",EV={boolean(e,t,n){return n>.5?t:e},color(e,t,n){const s=ey(e||dy),i=s.valid&&ey(t||dy);return i&&i.valid?i.mix(s,n).hexString():t},number(e,t,n){return e+(t-e)*n}};class IV{constructor(t,n,s,i){const r=n[s];i=Sl([t.to,i,r,t.from]);const o=Sl([t.from,r,i]);this._active=!0,this._fn=t.fn||EV[t.type||typeof o],this._easing=sa[t.easing]||sa.linear,this._start=Math.floor(Date.now()+(t.delay||0)),this._duration=this._total=Math.floor(t.duration),this._loop=!!t.loop,this._target=n,this._prop=s,this._from=o,this._to=i,this._promises=void 0}active(){return this._active}update(t,n,s){if(this._active){this._notify(!1);const i=this._target[this._prop],r=s-this._start,o=this._duration-r;this._start=s,this._duration=Math.floor(Math.max(o,t.duration)),this._total+=r,this._loop=!!t.loop,this._to=Sl([t.to,n,i,t.from]),this._from=Sl([t.from,i,n])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(t){const n=t-this._start,s=this._duration,i=this._prop,r=this._from,o=this._loop,a=this._to;let l;if(this._active=r!==a&&(o||n<s),!this._active){this._target[i]=a,this._notify(!0);return}if(n<0){this._target[i]=r;return}l=n/s%2,l=o&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[i]=this._fn(r,a,l)}wait(){const t=this._promises||(this._promises=[]);return new Promise((n,s)=>{t.push({res:n,rej:s})})}_notify(t){const n=t?"res":"rej",s=this._promises||[];for(let i=0;i<s.length;i++)s[i][n]()}}class WT{constructor(t,n){this._chart=t,this._properties=new Map,this.configure(n)}configure(t){if(!Pt(t))return;const n=Object.keys(ne.animation),s=this._properties;Object.getOwnPropertyNames(t).forEach(i=>{const r=t[i];if(!Pt(r))return;const o={};for(const a of n)o[a]=r[a];(ye(r.properties)&&r.properties||[i]).forEach(a=>{(a===i||!s.has(a))&&s.set(a,o)})})}_animateOptions(t,n){const s=n.options,i=AV(t,s);if(!i)return[];const r=this._createAnimations(i,s);return s.$shared&&SV(t.options.$animations,s).then(()=>{t.options=s},()=>{}),r}_createAnimations(t,n){const s=this._properties,i=[],r=t.$animations||(t.$animations={}),o=Object.keys(n),a=Date.now();let l;for(l=o.length-1;l>=0;--l){const c=o[l];if(c.charAt(0)==="$")continue;if(c==="options"){i.push(...this._animateOptions(t,n));continue}const h=n[c];let d=r[c];const f=s.get(c);if(d)if(f&&d.active()){d.update(f,h,a);continue}else d.cancel();if(!f||!f.duration){t[c]=h;continue}r[c]=d=new IV(f,t,c,h),i.push(d)}return i}update(t,n){if(this._properties.size===0){Object.assign(t,n);return}const s=this._createAnimations(t,n);if(s.length)return Jn.add(this._chart,s),!0}}function SV(e,t){const n=[],s=Object.keys(t);for(let i=0;i<s.length;i++){const r=e[s[i]];r&&r.active()&&n.push(r.wait())}return Promise.all(n)}function AV(e,t){if(!t)return;let n=e.options;if(!n){e.options=t;return}return n.$shared&&(e.options=n=Object.assign({},n,{$shared:!1,$animations:{}})),n}function fy(e,t){const n=e&&e.options||{},s=n.reverse,i=n.min===void 0?t:0,r=n.max===void 0?t:0;return{start:s?r:i,end:s?i:r}}function kV(e,t,n){if(n===!1)return!1;const s=fy(e,n),i=fy(t,n);return{top:i.end,right:s.end,bottom:i.start,left:s.start}}function CV(e){let t,n,s,i;return Pt(e)?(t=e.top,n=e.right,s=e.bottom,i=e.left):t=n=s=i=e,{top:t,right:n,bottom:s,left:i,disabled:e===!1}}function qT(e,t){const n=[],s=e._getSortedDatasetMetas(t);let i,r;for(i=0,r=s.length;i<r;++i)n.push(s[i].index);return n}function py(e,t,n,s={}){const i=e.keys,r=s.mode==="single";let o,a,l,c;if(t===null)return;let h=!1;for(o=0,a=i.length;o<a;++o){if(l=+i[o],l===n){if(h=!0,s.all)continue;break}c=e.values[l],fn(c)&&(r||t===0||zr(t)===zr(c))&&(t+=c)}return!h&&!s.all?0:t}function xV(e,t){const{iScale:n,vScale:s}=t,i=n.axis==="x"?"x":"y",r=s.axis==="x"?"x":"y",o=Object.keys(e),a=new Array(o.length);let l,c,h;for(l=0,c=o.length;l<c;++l)h=o[l],a[l]={[i]:h,[r]:e[h]};return a}function Ih(e,t){const n=e&&e.options.stacked;return n||n===void 0&&t.stack!==void 0}function RV(e,t,n){return`${e.id}.${t.id}.${n.stack||n.type}`}function PV(e){const{min:t,max:n,minDefined:s,maxDefined:i}=e.getUserBounds();return{min:s?t:Number.NEGATIVE_INFINITY,max:i?n:Number.POSITIVE_INFINITY}}function MV(e,t,n){const s=e[t]||(e[t]={});return s[n]||(s[n]={})}function gy(e,t,n,s){for(const i of t.getMatchingVisibleMetas(s).reverse()){const r=e[i.index];if(n&&r>0||!n&&r<0)return i.index}return null}function my(e,t){const{chart:n,_cachedMeta:s}=e,i=n._stacks||(n._stacks={}),{iScale:r,vScale:o,index:a}=s,l=r.axis,c=o.axis,h=RV(r,o,s),d=t.length;let f;for(let p=0;p<d;++p){const _=t[p],{[l]:y,[c]:v}=_,w=_._stacks||(_._stacks={});f=w[c]=MV(i,h,y),f[a]=v,f._top=gy(f,o,!0,s.type),f._bottom=gy(f,o,!1,s.type);const M=f._visualValues||(f._visualValues={});M[a]=v}}function Sh(e,t){const n=e.scales;return Object.keys(n).filter(s=>n[s].axis===t).shift()}function DV(e,t){return Xi(e,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}function OV(e,t,n){return Xi(e,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:n,index:t,mode:"default",type:"data"})}function Ao(e,t){const n=e.controller.index,s=e.vScale&&e.vScale.axis;if(s){t=t||e._parsed;for(const i of t){const r=i._stacks;if(!r||r[s]===void 0||r[s][n]===void 0)return;delete r[s][n],r[s]._visualValues!==void 0&&r[s]._visualValues[n]!==void 0&&delete r[s]._visualValues[n]}}}const Ah=e=>e==="reset"||e==="none",_y=(e,t)=>t?e:Object.assign({},e),LV=(e,t,n)=>e&&!t.hidden&&t._stacked&&{keys:qT(n,!0),values:null};class GT{static defaults={};static datasetElementType=null;static dataElementType=null;constructor(t,n){this.chart=t,this._ctx=t.ctx,this.index=n,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const t=this._cachedMeta;this.configure(),this.linkScales(),t._stacked=Ih(t.vScale,t),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(t){this.index!==t&&Ao(this._cachedMeta),this.index=t}linkScales(){const t=this.chart,n=this._cachedMeta,s=this.getDataset(),i=(d,f,p,_)=>d==="x"?f:d==="r"?_:p,r=n.xAxisID=kt(s.xAxisID,Sh(t,"x")),o=n.yAxisID=kt(s.yAxisID,Sh(t,"y")),a=n.rAxisID=kt(s.rAxisID,Sh(t,"r")),l=n.indexAxis,c=n.iAxisID=i(l,r,o,a),h=n.vAxisID=i(l,o,r,a);n.xScale=this.getScaleForId(r),n.yScale=this.getScaleForId(o),n.rScale=this.getScaleForId(a),n.iScale=this.getScaleForId(c),n.vScale=this.getScaleForId(h)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(t){return this.chart.scales[t]}_getOtherScale(t){const n=this._cachedMeta;return t===n.iScale?n.vScale:n.iScale}reset(){this._update("reset")}_destroy(){const t=this._cachedMeta;this._data&&J_(this._data,this),t._stacked&&Ao(t)}_dataCheck(){const t=this.getDataset(),n=t.data||(t.data=[]),s=this._data;if(Pt(n)){const i=this._cachedMeta;this._data=xV(n,i)}else if(s!==n){if(s){J_(s,this);const i=this._cachedMeta;Ao(i),i._parsed=[]}n&&Object.isExtensible(n)&&dN(n,this),this._syncList=[],this._data=n}}addElements(){const t=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(t.dataset=new this.datasetElementType)}buildOrUpdateElements(t){const n=this._cachedMeta,s=this.getDataset();let i=!1;this._dataCheck();const r=n._stacked;n._stacked=Ih(n.vScale,n),n.stack!==s.stack&&(i=!0,Ao(n),n.stack=s.stack),this._resyncElements(t),(i||r!==n._stacked)&&(my(this,n._parsed),n._stacked=Ih(n.vScale,n))}configure(){const t=this.chart.config,n=t.datasetScopeKeys(this._type),s=t.getOptionScopes(this.getDataset(),n,!0);this.options=t.createResolver(s,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(t,n){const{_cachedMeta:s,_data:i}=this,{iScale:r,_stacked:o}=s,a=r.axis;let l=t===0&&n===i.length?!0:s._sorted,c=t>0&&s._parsed[t-1],h,d,f;if(this._parsing===!1)s._parsed=i,s._sorted=!0,f=i;else{ye(i[t])?f=this.parseArrayData(s,i,t,n):Pt(i[t])?f=this.parseObjectData(s,i,t,n):f=this.parsePrimitiveData(s,i,t,n);const p=()=>d[a]===null||c&&d[a]<c[a];for(h=0;h<n;++h)s._parsed[h+t]=d=f[h],l&&(p()&&(l=!1),c=d);s._sorted=l}o&&my(this,f)}parsePrimitiveData(t,n,s,i){const{iScale:r,vScale:o}=t,a=r.axis,l=o.axis,c=r.getLabels(),h=r===o,d=new Array(i);let f,p,_;for(f=0,p=i;f<p;++f)_=f+s,d[f]={[a]:h||r.parse(c[_],_),[l]:o.parse(n[_],_)};return d}parseArrayData(t,n,s,i){const{xScale:r,yScale:o}=t,a=new Array(i);let l,c,h,d;for(l=0,c=i;l<c;++l)h=l+s,d=n[h],a[l]={x:r.parse(d[0],h),y:o.parse(d[1],h)};return a}parseObjectData(t,n,s,i){const{xScale:r,yScale:o}=t,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=new Array(i);let h,d,f,p;for(h=0,d=i;h<d;++h)f=h+s,p=n[f],c[h]={x:r.parse(Lc(p,a),f),y:o.parse(Lc(p,l),f)};return c}getParsed(t){return this._cachedMeta._parsed[t]}getDataElement(t){return this._cachedMeta.data[t]}applyStack(t,n,s){const i=this.chart,r=this._cachedMeta,o=n[t.axis],a={keys:qT(i,!0),values:n._stacks[t.axis]._visualValues};return py(a,o,r.index,{mode:s})}updateRangeFromParsed(t,n,s,i){const r=s[n.axis];let o=r===null?NaN:r;const a=i&&s._stacks[n.axis];i&&a&&(i.values=a,o=py(i,r,this._cachedMeta.index)),t.min=Math.min(t.min,o),t.max=Math.max(t.max,o)}getMinMax(t,n){const s=this._cachedMeta,i=s._parsed,r=s._sorted&&t===s.iScale,o=i.length,a=this._getOtherScale(t),l=LV(n,s,this.chart),c={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:h,max:d}=PV(a);let f,p;function _(){p=i[f];const y=p[a.axis];return!fn(p[t.axis])||h>y||d<y}for(f=0;f<o&&!(!_()&&(this.updateRangeFromParsed(c,t,p,l),r));++f);if(r){for(f=o-1;f>=0;--f)if(!_()){this.updateRangeFromParsed(c,t,p,l);break}}return c}getAllParsedValues(t){const n=this._cachedMeta._parsed,s=[];let i,r,o;for(i=0,r=n.length;i<r;++i)o=n[i][t.axis],fn(o)&&s.push(o);return s}getMaxOverflow(){return!1}getLabelAndValue(t){const n=this._cachedMeta,s=n.iScale,i=n.vScale,r=this.getParsed(t);return{label:s?""+s.getLabelForValue(r[s.axis]):"",value:i?""+i.getLabelForValue(r[i.axis]):""}}_update(t){const n=this._cachedMeta;this.update(t||"default"),n._clip=CV(kt(this.options.clip,kV(n.xScale,n.yScale,this.getMaxOverflow())))}update(t){}draw(){const t=this._ctx,n=this.chart,s=this._cachedMeta,i=s.data||[],r=n.chartArea,o=[],a=this._drawStart||0,l=this._drawCount||i.length-a,c=this.options.drawActiveElementsOnTop;let h;for(s.dataset&&s.dataset.draw(t,r,a,l),h=a;h<a+l;++h){const d=i[h];d.hidden||(d.active&&c?o.push(d):d.draw(t,r))}for(h=0;h<o.length;++h)o[h].draw(t,r)}getStyle(t,n){const s=n?"active":"default";return t===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(s):this.resolveDataElementOptions(t||0,s)}getContext(t,n,s){const i=this.getDataset();let r;if(t>=0&&t<this._cachedMeta.data.length){const o=this._cachedMeta.data[t];r=o.$context||(o.$context=OV(this.getContext(),t,o)),r.parsed=this.getParsed(t),r.raw=i.data[t],r.index=r.dataIndex=t}else r=this.$context||(this.$context=DV(this.chart.getContext(),this.index)),r.dataset=i,r.index=r.datasetIndex=this.index;return r.active=!!n,r.mode=s,r}resolveDatasetElementOptions(t){return this._resolveElementOptions(this.datasetElementType.id,t)}resolveDataElementOptions(t,n){return this._resolveElementOptions(this.dataElementType.id,n,t)}_resolveElementOptions(t,n="default",s){const i=n==="active",r=this._cachedDataOpts,o=t+"-"+n,a=r[o],l=this.enableOptionSharing&&Nc(s);if(a)return _y(a,l);const c=this.chart.config,h=c.datasetElementScopeKeys(this._type,t),d=i?[`${t}Hover`,"hover",t,""]:[t,""],f=c.getOptionScopes(this.getDataset(),h),p=Object.keys(ne.elements[t]),_=()=>this.getContext(s,i,n),y=c.resolveNamedOptions(f,p,_,d);return y.$shared&&(y.$shared=l,r[o]=Object.freeze(_y(y,l))),y}_resolveAnimations(t,n,s){const i=this.chart,r=this._cachedDataOpts,o=`animation-${n}`,a=r[o];if(a)return a;let l;if(i.options.animation!==!1){const h=this.chart.config,d=h.datasetAnimationScopeKeys(this._type,n),f=h.getOptionScopes(this.getDataset(),d);l=h.createResolver(f,this.getContext(t,s,n))}const c=new WT(i,l&&l.animations);return l&&l._cacheable&&(r[o]=Object.freeze(c)),c}getSharedOptions(t){if(t.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},t))}includeOptions(t,n){return!n||Ah(t)||this.chart._animationsDisabled}_getSharedOptions(t,n){const s=this.resolveDataElementOptions(t,n),i=this._sharedOptions,r=this.getSharedOptions(s),o=this.includeOptions(n,r)||r!==i;return this.updateSharedOptions(r,n,s),{sharedOptions:r,includeOptions:o}}updateElement(t,n,s,i){Ah(i)?Object.assign(t,s):this._resolveAnimations(n,i).update(t,s)}updateSharedOptions(t,n,s){t&&!Ah(n)&&this._resolveAnimations(void 0,n).update(t,s)}_setStyle(t,n,s,i){t.active=i;const r=this.getStyle(n,i);this._resolveAnimations(n,s,i).update(t,{options:!i&&this.getSharedOptions(r)||r})}removeHoverStyle(t,n,s){this._setStyle(t,s,"active",!1)}setHoverStyle(t,n,s){this._setStyle(t,s,"active",!0)}_removeDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!1)}_setDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!0)}_resyncElements(t){const n=this._data,s=this._cachedMeta.data;for(const[a,l,c]of this._syncList)this[a](l,c);this._syncList=[];const i=s.length,r=n.length,o=Math.min(r,i);o&&this.parse(0,o),r>i?this._insertElements(i,r-i,t):r<i&&this._removeElements(r,i-r)}_insertElements(t,n,s=!0){const i=this._cachedMeta,r=i.data,o=t+n;let a;const l=c=>{for(c.length+=n,a=c.length-1;a>=o;a--)c[a]=c[a-n]};for(l(r),a=t;a<o;++a)r[a]=new this.dataElementType;this._parsing&&l(i._parsed),this.parse(t,n),s&&this.updateElements(r,t,n,"reset")}updateElements(t,n,s,i){}_removeElements(t,n){const s=this._cachedMeta;if(this._parsing){const i=s._parsed.splice(t,n);s._stacked&&Ao(s,i)}s.data.splice(t,n)}_sync(t){if(this._parsing)this._syncList.push(t);else{const[n,s,i]=t;this[n](s,i)}this.chart._dataChanges.push([this.index,...t])}_onDataPush(){const t=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-t,t])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(t,n){n&&this._sync(["_removeElements",t,n]);const s=arguments.length-2;s&&this._sync(["_insertElements",t,s])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}class NV extends GT{static id="line";static defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1};static overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(t){const n=this._cachedMeta,{dataset:s,data:i=[],_dataset:r}=n,o=this.chart._animationsDisabled;let{start:a,count:l}=mN(n,i,o);this._drawStart=a,this._drawCount=l,_N(n)&&(a=0,l=i.length),s._chart=this.chart,s._datasetIndex=this.index,s._decimated=!!r._decimated,s.points=i;const c=this.resolveDatasetElementOptions(t);this.options.showLine||(c.borderWidth=0),c.segment=this.options.segment,this.updateElement(s,void 0,{animated:!o,options:c},t),this.updateElements(i,a,l,t)}updateElements(t,n,s,i){const r=i==="reset",{iScale:o,vScale:a,_stacked:l,_dataset:c}=this._cachedMeta,{sharedOptions:h,includeOptions:d}=this._getSharedOptions(n,i),f=o.axis,p=a.axis,{spanGaps:_,segment:y}=this.options,v=Ia(_)?_:Number.POSITIVE_INFINITY,w=this.chart._animationsDisabled||r||i==="none",M=n+s,E=t.length;let x=n>0&&this.getParsed(n-1);for(let O=0;O<E;++O){const V=t[O],A=w?V:{};if(O<n||O>=M){A.skip=!0;continue}const b=this.getParsed(O),T=zt(b[p]),k=A[f]=o.getPixelForValue(b[f],O),P=A[p]=r||T?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,b,l):b[p],O);A.skip=isNaN(k)||isNaN(P)||T,A.stop=O>0&&Math.abs(b[f]-x[f])>v,y&&(A.parsed=b,A.raw=c.data[O]),d&&(A.options=h||this.resolveDataElementOptions(O,V.active?"active":i)),w||this.updateElement(V,O,A,i),x=b}}getMaxOverflow(){const t=this._cachedMeta,n=t.dataset,s=n.options&&n.options.borderWidth||0,i=t.data||[];if(!i.length)return s;const r=i[0].size(this.resolveDataElementOptions(0)),o=i[i.length-1].size(this.resolveDataElementOptions(i.length-1));return Math.max(s,r,o)/2}draw(){const t=this._cachedMeta;t.dataset.updateControlPoints(this.chart.chartArea,t.iScale.axis),super.draw()}}function bi(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class vp{static override(t){Object.assign(vp.prototype,t)}options;constructor(t){this.options=t||{}}init(){}formats(){return bi()}parse(){return bi()}format(){return bi()}add(){return bi()}diff(){return bi()}startOf(){return bi()}endOf(){return bi()}}var VV={_date:vp};function FV(e,t,n,s){const{controller:i,data:r,_sorted:o}=e,a=i._cachedMeta.iScale,l=e.dataset&&e.dataset.options?e.dataset.options.spanGaps:null;if(a&&t===a.axis&&t!=="r"&&o&&r.length){const c=a._reversePixels?uN:Ri;if(s){if(i._sharedOptions){const h=r[0],d=typeof h.getRange=="function"&&h.getRange(t);if(d){const f=c(r,t,n-d),p=c(r,t,n+d);return{lo:f.lo,hi:p.hi}}}}else{const h=c(r,t,n);if(l){const{vScale:d}=i._cachedMeta,{_parsed:f}=e,p=f.slice(0,h.lo+1).reverse().findIndex(y=>!zt(y[d.axis]));h.lo-=Math.max(0,p);const _=f.slice(h.hi).findIndex(y=>!zt(y[d.axis]));h.hi+=Math.max(0,_)}return h}}return{lo:0,hi:r.length-1}}function ku(e,t,n,s,i){const r=e.getSortedVisibleDatasetMetas(),o=n[t];for(let a=0,l=r.length;a<l;++a){const{index:c,data:h}=r[a],{lo:d,hi:f}=FV(r[a],t,o,i);for(let p=d;p<=f;++p){const _=h[p];_.skip||s(_,c,p)}}}function UV(e){const t=e.indexOf("x")!==-1,n=e.indexOf("y")!==-1;return function(s,i){const r=t?Math.abs(s.x-i.x):0,o=n?Math.abs(s.y-i.y):0;return Math.sqrt(Math.pow(r,2)+Math.pow(o,2))}}function kh(e,t,n,s,i){const r=[];return!i&&!e.isPointInArea(t)||ku(e,n,t,function(a,l,c){!i&&!Sa(a,e.chartArea,0)||a.inRange(t.x,t.y,s)&&r.push({element:a,datasetIndex:l,index:c})},!0),r}function $V(e,t,n,s){let i=[];function r(o,a,l){const{startAngle:c,endAngle:h}=o.getProps(["startAngle","endAngle"],s),{angle:d}=aN(o,{x:t.x,y:t.y});xT(d,c,h)&&i.push({element:o,datasetIndex:a,index:l})}return ku(e,n,t,r),i}function BV(e,t,n,s,i,r){let o=[];const a=UV(n);let l=Number.POSITIVE_INFINITY;function c(h,d,f){const p=h.inRange(t.x,t.y,i);if(s&&!p)return;const _=h.getCenterPoint(i);if(!(!!r||e.isPointInArea(_))&&!p)return;const v=a(t,_);v<l?(o=[{element:h,datasetIndex:d,index:f}],l=v):v===l&&o.push({element:h,datasetIndex:d,index:f})}return ku(e,n,t,c),o}function Ch(e,t,n,s,i,r){return!r&&!e.isPointInArea(t)?[]:n==="r"&&!s?$V(e,t,n,i):BV(e,t,n,s,i,r)}function yy(e,t,n,s,i){const r=[],o=n==="x"?"inXRange":"inYRange";let a=!1;return ku(e,n,t,(l,c,h)=>{l[o]&&l[o](t[n],i)&&(r.push({element:l,datasetIndex:c,index:h}),a=a||l.inRange(t.x,t.y,i))}),s&&!a?[]:r}var HV={modes:{index(e,t,n,s){const i=Ei(t,e),r=n.axis||"x",o=n.includeInvisible||!1,a=n.intersect?kh(e,i,r,s,o):Ch(e,i,r,!1,s,o),l=[];return a.length?(e.getSortedVisibleDatasetMetas().forEach(c=>{const h=a[0].index,d=c.data[h];d&&!d.skip&&l.push({element:d,datasetIndex:c.index,index:h})}),l):[]},dataset(e,t,n,s){const i=Ei(t,e),r=n.axis||"xy",o=n.includeInvisible||!1;let a=n.intersect?kh(e,i,r,s,o):Ch(e,i,r,!1,s,o);if(a.length>0){const l=a[0].datasetIndex,c=e.getDatasetMeta(l).data;a=[];for(let h=0;h<c.length;++h)a.push({element:c[h],datasetIndex:l,index:h})}return a},point(e,t,n,s){const i=Ei(t,e),r=n.axis||"xy",o=n.includeInvisible||!1;return kh(e,i,r,s,o)},nearest(e,t,n,s){const i=Ei(t,e),r=n.axis||"xy",o=n.includeInvisible||!1;return Ch(e,i,r,n.intersect,s,o)},x(e,t,n,s){const i=Ei(t,e);return yy(e,i,"x",n.intersect,s)},y(e,t,n,s){const i=Ei(t,e);return yy(e,i,"y",n.intersect,s)}}};const KT=["left","top","right","bottom"];function ko(e,t){return e.filter(n=>n.pos===t)}function vy(e,t){return e.filter(n=>KT.indexOf(n.pos)===-1&&n.box.axis===t)}function Co(e,t){return e.sort((n,s)=>{const i=t?s:n,r=t?n:s;return i.weight===r.weight?i.index-r.index:i.weight-r.weight})}function jV(e){const t=[];let n,s,i,r,o,a;for(n=0,s=(e||[]).length;n<s;++n)i=e[n],{position:r,options:{stack:o,stackWeight:a=1}}=i,t.push({index:n,box:i,pos:r,horizontal:i.isHorizontal(),weight:i.weight,stack:o&&r+o,stackWeight:a});return t}function zV(e){const t={};for(const n of e){const{stack:s,pos:i,stackWeight:r}=n;if(!s||!KT.includes(i))continue;const o=t[s]||(t[s]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=r}return t}function WV(e,t){const n=zV(e),{vBoxMaxWidth:s,hBoxMaxHeight:i}=t;let r,o,a;for(r=0,o=e.length;r<o;++r){a=e[r];const{fullSize:l}=a.box,c=n[a.stack],h=c&&a.stackWeight/c.weight;a.horizontal?(a.width=h?h*s:l&&t.availableWidth,a.height=i):(a.width=s,a.height=h?h*i:l&&t.availableHeight)}return n}function qV(e){const t=jV(e),n=Co(t.filter(c=>c.box.fullSize),!0),s=Co(ko(t,"left"),!0),i=Co(ko(t,"right")),r=Co(ko(t,"top"),!0),o=Co(ko(t,"bottom")),a=vy(t,"x"),l=vy(t,"y");return{fullSize:n,leftAndTop:s.concat(r),rightAndBottom:i.concat(l).concat(o).concat(a),chartArea:ko(t,"chartArea"),vertical:s.concat(i).concat(l),horizontal:r.concat(o).concat(a)}}function by(e,t,n,s){return Math.max(e[n],t[n])+Math.max(e[s],t[s])}function QT(e,t){e.top=Math.max(e.top,t.top),e.left=Math.max(e.left,t.left),e.bottom=Math.max(e.bottom,t.bottom),e.right=Math.max(e.right,t.right)}function GV(e,t,n,s){const{pos:i,box:r}=n,o=e.maxPadding;if(!Pt(i)){n.size&&(e[i]-=n.size);const d=s[n.stack]||{size:0,count:1};d.size=Math.max(d.size,n.horizontal?r.height:r.width),n.size=d.size/d.count,e[i]+=n.size}r.getPadding&&QT(o,r.getPadding());const a=Math.max(0,t.outerWidth-by(o,e,"left","right")),l=Math.max(0,t.outerHeight-by(o,e,"top","bottom")),c=a!==e.w,h=l!==e.h;return e.w=a,e.h=l,n.horizontal?{same:c,other:h}:{same:h,other:c}}function KV(e){const t=e.maxPadding;function n(s){const i=Math.max(t[s]-e[s],0);return e[s]+=i,i}e.y+=n("top"),e.x+=n("left"),n("right"),n("bottom")}function QV(e,t){const n=t.maxPadding;function s(i){const r={left:0,top:0,right:0,bottom:0};return i.forEach(o=>{r[o]=Math.max(t[o],n[o])}),r}return s(e?["left","right"]:["top","bottom"])}function Uo(e,t,n,s){const i=[];let r,o,a,l,c,h;for(r=0,o=e.length,c=0;r<o;++r){a=e[r],l=a.box,l.update(a.width||t.w,a.height||t.h,QV(a.horizontal,t));const{same:d,other:f}=GV(t,n,a,s);c|=d&&i.length,h=h||f,l.fullSize||i.push(a)}return c&&Uo(i,t,n,s)||h}function Cl(e,t,n,s,i){e.top=n,e.left=t,e.right=t+s,e.bottom=n+i,e.width=s,e.height=i}function wy(e,t,n,s){const i=n.padding;let{x:r,y:o}=t;for(const a of e){const l=a.box,c=s[a.stack]||{placed:0,weight:1},h=a.stackWeight/c.weight||1;if(a.horizontal){const d=t.w*h,f=c.size||l.height;Nc(c.start)&&(o=c.start),l.fullSize?Cl(l,i.left,o,n.outerWidth-i.right-i.left,f):Cl(l,t.left+c.placed,o,d,f),c.start=o,c.placed+=d,o=l.bottom}else{const d=t.h*h,f=c.size||l.width;Nc(c.start)&&(r=c.start),l.fullSize?Cl(l,r,i.top,f,n.outerHeight-i.bottom-i.top):Cl(l,r,t.top+c.placed,f,d),c.start=r,c.placed+=d,r=l.right}}t.x=r,t.y=o}var hn={addBox(e,t){e.boxes||(e.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(n){t.draw(n)}}]},e.boxes.push(t)},removeBox(e,t){const n=e.boxes?e.boxes.indexOf(t):-1;n!==-1&&e.boxes.splice(n,1)},configure(e,t,n){t.fullSize=n.fullSize,t.position=n.position,t.weight=n.weight},update(e,t,n,s){if(!e)return;const i=pn(e.options.layout.padding),r=Math.max(t-i.width,0),o=Math.max(n-i.height,0),a=qV(e.boxes),l=a.vertical,c=a.horizontal;Lt(e.boxes,y=>{typeof y.beforeLayout=="function"&&y.beforeLayout()});const h=l.reduce((y,v)=>v.box.options&&v.box.options.display===!1?y:y+1,0)||1,d=Object.freeze({outerWidth:t,outerHeight:n,padding:i,availableWidth:r,availableHeight:o,vBoxMaxWidth:r/2/h,hBoxMaxHeight:o/2}),f=Object.assign({},i);QT(f,pn(s));const p=Object.assign({maxPadding:f,w:r,h:o,x:i.left,y:i.top},i),_=WV(l.concat(c),d);Uo(a.fullSize,p,d,_),Uo(l,p,d,_),Uo(c,p,d,_)&&Uo(l,p,d,_),KV(p),wy(a.leftAndTop,p,d,_),p.x+=p.w,p.y+=p.h,wy(a.rightAndBottom,p,d,_),e.chartArea={left:p.left,top:p.top,right:p.left+p.w,bottom:p.top+p.h,height:p.h,width:p.w},Lt(a.chartArea,y=>{const v=y.box;Object.assign(v,e.chartArea),v.update(p.w,p.h,{left:0,top:0,right:0,bottom:0})})}};class YT{acquireContext(t,n){}releaseContext(t){return!1}addEventListener(t,n,s){}removeEventListener(t,n,s){}getDevicePixelRatio(){return 1}getMaximumSize(t,n,s,i){return n=Math.max(0,n||t.width),s=s||t.height,{width:n,height:Math.max(0,i?Math.floor(n/i):s)}}isAttached(t){return!0}updateConfig(t){}}class YV extends YT{acquireContext(t){return t&&t.getContext&&t.getContext("2d")||null}updateConfig(t){t.options.animation=!1}}const Kl="$chartjs",XV={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},Ty=e=>e===null||e==="";function JV(e,t){const n=e.style,s=e.getAttribute("height"),i=e.getAttribute("width");if(e[Kl]={initial:{height:s,width:i,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",Ty(i)){const r=ly(e,"width");r!==void 0&&(e.width=r)}if(Ty(s))if(e.style.height==="")e.height=e.width/(t||2);else{const r=ly(e,"height");r!==void 0&&(e.height=r)}return e}const XT=aV?{passive:!0}:!1;function ZV(e,t,n){e&&e.addEventListener(t,n,XT)}function t4(e,t,n){e&&e.canvas&&e.canvas.removeEventListener(t,n,XT)}function e4(e,t){const n=XV[e.type]||e.type,{x:s,y:i}=Ei(e,t);return{type:n,chart:t,native:e,x:s!==void 0?s:null,y:i!==void 0?i:null}}function Uc(e,t){for(const n of e)if(n===t||n.contains(t))return!0}function n4(e,t,n){const s=e.canvas,i=new MutationObserver(r=>{let o=!1;for(const a of r)o=o||Uc(a.addedNodes,s),o=o&&!Uc(a.removedNodes,s);o&&n()});return i.observe(document,{childList:!0,subtree:!0}),i}function s4(e,t,n){const s=e.canvas,i=new MutationObserver(r=>{let o=!1;for(const a of r)o=o||Uc(a.removedNodes,s),o=o&&!Uc(a.addedNodes,s);o&&n()});return i.observe(document,{childList:!0,subtree:!0}),i}const ka=new Map;let Ey=0;function JT(){const e=window.devicePixelRatio;e!==Ey&&(Ey=e,ka.forEach((t,n)=>{n.currentDevicePixelRatio!==e&&t()}))}function i4(e,t){ka.size||window.addEventListener("resize",JT),ka.set(e,t)}function r4(e){ka.delete(e),ka.size||window.removeEventListener("resize",JT)}function o4(e,t,n){const s=e.canvas,i=s&&yp(s);if(!i)return;const r=MT((a,l)=>{const c=i.clientWidth;n(a,l),c<i.clientWidth&&n()},window),o=new ResizeObserver(a=>{const l=a[0],c=l.contentRect.width,h=l.contentRect.height;c===0&&h===0||r(c,h)});return o.observe(i),i4(e,r),o}function xh(e,t,n){n&&n.disconnect(),t==="resize"&&r4(e)}function a4(e,t,n){const s=e.canvas,i=MT(r=>{e.ctx!==null&&n(e4(r,e))},e);return ZV(s,t,i),i}class l4 extends YT{acquireContext(t,n){const s=t&&t.getContext&&t.getContext("2d");return s&&s.canvas===t?(JV(t,n),s):null}releaseContext(t){const n=t.canvas;if(!n[Kl])return!1;const s=n[Kl].initial;["height","width"].forEach(r=>{const o=s[r];zt(o)?n.removeAttribute(r):n.setAttribute(r,o)});const i=s.style||{};return Object.keys(i).forEach(r=>{n.style[r]=i[r]}),n.width=n.width,delete n[Kl],!0}addEventListener(t,n,s){this.removeEventListener(t,n);const i=t.$proxies||(t.$proxies={}),o={attach:n4,detach:s4,resize:o4}[n]||a4;i[n]=o(t,n,s)}removeEventListener(t,n){const s=t.$proxies||(t.$proxies={}),i=s[n];if(!i)return;({attach:xh,detach:xh,resize:xh}[n]||t4)(t,n,i),s[n]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(t,n,s,i){return oV(t,n,s,i)}isAttached(t){const n=t&&yp(t);return!!(n&&n.isConnected)}}function c4(e){return!_p()||typeof OffscreenCanvas<"u"&&e instanceof OffscreenCanvas?YV:l4}let Ji=class{static defaults={};static defaultRoutes=void 0;x;y;active=!1;options;$animations;tooltipPosition(t){const{x:n,y:s}=this.getProps(["x","y"],t);return{x:n,y:s}}hasValue(){return Ia(this.x)&&Ia(this.y)}getProps(t,n){const s=this.$animations;if(!n||!s)return this;const i={};return t.forEach(r=>{i[r]=s[r]&&s[r].active()?s[r]._to:this[r]}),i}};function u4(e,t){const n=e.options.ticks,s=h4(e),i=Math.min(n.maxTicksLimit||s,s),r=n.major.enabled?f4(t):[],o=r.length,a=r[0],l=r[o-1],c=[];if(o>i)return p4(t,c,r,o/i),c;const h=d4(r,t,i);if(o>0){let d,f;const p=o>1?Math.round((l-a)/(o-1)):null;for(xl(t,c,h,zt(p)?0:a-p,a),d=0,f=o-1;d<f;d++)xl(t,c,h,r[d],r[d+1]);return xl(t,c,h,l,zt(p)?t.length:l+p),c}return xl(t,c,h),c}function h4(e){const t=e.options.offset,n=e._tickSize(),s=e._length/n+(t?0:1),i=e._maxLength/n;return Math.floor(Math.min(s,i))}function d4(e,t,n){const s=g4(e),i=t.length/n;if(!s)return Math.max(i,1);const r=nN(s);for(let o=0,a=r.length-1;o<a;o++){const l=r[o];if(l>i)return l}return Math.max(i,1)}function f4(e){const t=[];let n,s;for(n=0,s=e.length;n<s;n++)e[n].major&&t.push(n);return t}function p4(e,t,n,s){let i=0,r=n[0],o;for(s=Math.ceil(s),o=0;o<e.length;o++)o===r&&(t.push(e[o]),i++,r=n[i*s])}function xl(e,t,n,s,i){const r=kt(s,0),o=Math.min(kt(i,e.length),e.length);let a=0,l,c,h;for(n=Math.ceil(n),i&&(l=i-s,n=l/Math.floor(l/n)),h=r;h<0;)a++,h=Math.round(r+a*n);for(c=Math.max(r,0);c<o;c++)c===h&&(t.push(e[c]),a++,h=Math.round(r+a*n))}function g4(e){const t=e.length;let n,s;if(t<2)return!1;for(s=e[0],n=1;n<t;++n)if(e[n]-e[n-1]!==s)return!1;return s}const m4=e=>e==="left"?"right":e==="right"?"left":e,Iy=(e,t,n)=>t==="top"||t==="left"?e[t]+n:e[t]-n,Sy=(e,t)=>Math.min(t||e,e);function Ay(e,t){const n=[],s=e.length/t,i=e.length;let r=0;for(;r<i;r+=s)n.push(e[Math.floor(r)]);return n}function _4(e,t,n){const s=e.ticks.length,i=Math.min(t,s-1),r=e._startPixel,o=e._endPixel,a=1e-6;let l=e.getPixelForTick(i),c;if(!(n&&(s===1?c=Math.max(l-r,o-l):t===0?c=(e.getPixelForTick(1)-l)/2:c=(l-e.getPixelForTick(i-1))/2,l+=i<t?c:-c,l<r-a||l>o+a)))return l}function y4(e,t){Lt(e,n=>{const s=n.gc,i=s.length/2;let r;if(i>t){for(r=0;r<i;++r)delete n.data[s[r]];s.splice(0,i)}})}function xo(e){return e.drawTicks?e.tickLength:0}function ky(e,t){if(!e.display)return 0;const n=Ne(e.font,t),s=pn(e.padding);return(ye(e.text)?e.text.length:1)*n.lineHeight+s.height}function v4(e,t){return Xi(e,{scale:t,type:"scale"})}function b4(e,t,n){return Xi(e,{tick:n,index:t,type:"tick"})}function w4(e,t,n){let s=up(e);return(n&&t!=="right"||!n&&t==="right")&&(s=m4(s)),s}function T4(e,t,n,s){const{top:i,left:r,bottom:o,right:a,chart:l}=e,{chartArea:c,scales:h}=l;let d=0,f,p,_;const y=o-i,v=a-r;if(e.isHorizontal()){if(p=Re(s,r,a),Pt(n)){const w=Object.keys(n)[0],M=n[w];_=h[w].getPixelForValue(M)+y-t}else n==="center"?_=(c.bottom+c.top)/2+y-t:_=Iy(e,n,t);f=a-r}else{if(Pt(n)){const w=Object.keys(n)[0],M=n[w];p=h[w].getPixelForValue(M)-v+t}else n==="center"?p=(c.left+c.right)/2-v+t:p=Iy(e,n,t);_=Re(s,o,i),d=n==="left"?-yn:yn}return{titleX:p,titleY:_,maxWidth:f,rotation:d}}class io extends Ji{constructor(t){super(),this.id=t.id,this.type=t.type,this.options=void 0,this.ctx=t.ctx,this.chart=t.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(t){this.options=t.setContext(this.getContext()),this.axis=t.axis,this._userMin=this.parse(t.min),this._userMax=this.parse(t.max),this._suggestedMin=this.parse(t.suggestedMin),this._suggestedMax=this.parse(t.suggestedMax)}parse(t,n){return t}getUserBounds(){let{_userMin:t,_userMax:n,_suggestedMin:s,_suggestedMax:i}=this;return t=Rn(t,Number.POSITIVE_INFINITY),n=Rn(n,Number.NEGATIVE_INFINITY),s=Rn(s,Number.POSITIVE_INFINITY),i=Rn(i,Number.NEGATIVE_INFINITY),{min:Rn(t,s),max:Rn(n,i),minDefined:fn(t),maxDefined:fn(n)}}getMinMax(t){let{min:n,max:s,minDefined:i,maxDefined:r}=this.getUserBounds(),o;if(i&&r)return{min:n,max:s};const a=this.getMatchingVisibleMetas();for(let l=0,c=a.length;l<c;++l)o=a[l].controller.getMinMax(this,t),i||(n=Math.min(n,o.min)),r||(s=Math.max(s,o.max));return n=r&&n>s?s:n,s=i&&n>s?n:s,{min:Rn(n,Rn(s,n)),max:Rn(s,Rn(n,s))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels||[]}getLabelItems(t=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(t))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){qt(this.options.beforeUpdate,[this])}update(t,n,s){const{beginAtZero:i,grace:r,ticks:o}=this.options,a=o.sampleSize;this.beforeUpdate(),this.maxWidth=t,this.maxHeight=n,this._margins=s=Object.assign({left:0,right:0,top:0,bottom:0},s),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+s.left+s.right:this.height+s.top+s.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=FN(this,r,i),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const l=a<this.ticks.length;this._convertTicksToLabels(l?Ay(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=u4(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let t=this.options.reverse,n,s;this.isHorizontal()?(n=this.left,s=this.right):(n=this.top,s=this.bottom,t=!t),this._startPixel=n,this._endPixel=s,this._reversePixels=t,this._length=s-n,this._alignToPixels=this.options.alignToPixels}afterUpdate(){qt(this.options.afterUpdate,[this])}beforeSetDimensions(){qt(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){qt(this.options.afterSetDimensions,[this])}_callHooks(t){this.chart.notifyPlugins(t,this.getContext()),qt(this.options[t],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){qt(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(t){const n=this.options.ticks;let s,i,r;for(s=0,i=t.length;s<i;s++)r=t[s],r.label=qt(n.callback,[r.value,s,t],this)}afterTickToLabelConversion(){qt(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){qt(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const t=this.options,n=t.ticks,s=Sy(this.ticks.length,t.ticks.maxTicksLimit),i=n.minRotation||0,r=n.maxRotation;let o=i,a,l,c;if(!this._isVisible()||!n.display||i>=r||s<=1||!this.isHorizontal()){this.labelRotation=i;return}const h=this._getLabelSizes(),d=h.widest.width,f=h.highest.height,p=un(this.chart.width-d,0,this.maxWidth);a=t.offset?this.maxWidth/s:p/(s-1),d+6>a&&(a=p/(s-(t.offset?.5:1)),l=this.maxHeight-xo(t.grid)-n.padding-ky(t.title,this.chart.options.font),c=Math.sqrt(d*d+f*f),o=oN(Math.min(Math.asin(un((h.highest.height+6)/a,-1,1)),Math.asin(un(l/c,-1,1))-Math.asin(un(f/c,-1,1)))),o=Math.max(i,Math.min(r,o))),this.labelRotation=o}afterCalculateLabelRotation(){qt(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){qt(this.options.beforeFit,[this])}fit(){const t={width:0,height:0},{chart:n,options:{ticks:s,title:i,grid:r}}=this,o=this._isVisible(),a=this.isHorizontal();if(o){const l=ky(i,n.options.font);if(a?(t.width=this.maxWidth,t.height=xo(r)+l):(t.height=this.maxHeight,t.width=xo(r)+l),s.display&&this.ticks.length){const{first:c,last:h,widest:d,highest:f}=this._getLabelSizes(),p=s.padding*2,_=xi(this.labelRotation),y=Math.cos(_),v=Math.sin(_);if(a){const w=s.mirror?0:v*d.width+y*f.height;t.height=Math.min(this.maxHeight,t.height+w+p)}else{const w=s.mirror?0:y*d.width+v*f.height;t.width=Math.min(this.maxWidth,t.width+w+p)}this._calculatePadding(c,h,v,y)}}this._handleMargins(),a?(this.width=this._length=n.width-this._margins.left-this._margins.right,this.height=t.height):(this.width=t.width,this.height=this._length=n.height-this._margins.top-this._margins.bottom)}_calculatePadding(t,n,s,i){const{ticks:{align:r,padding:o},position:a}=this.options,l=this.labelRotation!==0,c=a!=="top"&&this.axis==="x";if(this.isHorizontal()){const h=this.getPixelForTick(0)-this.left,d=this.right-this.getPixelForTick(this.ticks.length-1);let f=0,p=0;l?c?(f=i*t.width,p=s*n.height):(f=s*t.height,p=i*n.width):r==="start"?p=n.width:r==="end"?f=t.width:r!=="inner"&&(f=t.width/2,p=n.width/2),this.paddingLeft=Math.max((f-h+o)*this.width/(this.width-h),0),this.paddingRight=Math.max((p-d+o)*this.width/(this.width-d),0)}else{let h=n.height/2,d=t.height/2;r==="start"?(h=0,d=t.height):r==="end"&&(h=n.height,d=0),this.paddingTop=h+o,this.paddingBottom=d+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){qt(this.options.afterFit,[this])}isHorizontal(){const{axis:t,position:n}=this.options;return n==="top"||n==="bottom"||t==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(t){this.beforeTickToLabelConversion(),this.generateTickLabels(t);let n,s;for(n=0,s=t.length;n<s;n++)zt(t[n].label)&&(t.splice(n,1),s--,n--);this.afterTickToLabelConversion()}_getLabelSizes(){let t=this._labelSizes;if(!t){const n=this.options.ticks.sampleSize;let s=this.ticks;n<s.length&&(s=Ay(s,n)),this._labelSizes=t=this._computeLabelSizes(s,s.length,this.options.ticks.maxTicksLimit)}return t}_computeLabelSizes(t,n,s){const{ctx:i,_longestTextCache:r}=this,o=[],a=[],l=Math.floor(n/Sy(n,s));let c=0,h=0,d,f,p,_,y,v,w,M,E,x,O;for(d=0;d<n;d+=l){if(_=t[d].label,y=this._resolveTickFontOptions(d),i.font=v=y.string,w=r[v]=r[v]||{data:{},gc:[]},M=y.lineHeight,E=x=0,!zt(_)&&!ye(_))E=sy(i,w.data,w.gc,E,_),x=M;else if(ye(_))for(f=0,p=_.length;f<p;++f)O=_[f],!zt(O)&&!ye(O)&&(E=sy(i,w.data,w.gc,E,O),x+=M);o.push(E),a.push(x),c=Math.max(E,c),h=Math.max(x,h)}y4(r,n);const V=o.indexOf(c),A=a.indexOf(h),b=T=>({width:o[T]||0,height:a[T]||0});return{first:b(0),last:b(n-1),widest:b(V),highest:b(A),widths:o,heights:a}}getLabelForValue(t){return t}getPixelForValue(t,n){return NaN}getValueForPixel(t){}getPixelForTick(t){const n=this.ticks;return t<0||t>n.length-1?null:this.getPixelForValue(n[t].value)}getPixelForDecimal(t){this._reversePixels&&(t=1-t);const n=this._startPixel+t*this._length;return cN(this._alignToPixels?vi(this.chart,n,0):n)}getDecimalForPixel(t){const n=(t-this._startPixel)/this._length;return this._reversePixels?1-n:n}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:t,max:n}=this;return t<0&&n<0?n:t>0&&n>0?t:0}getContext(t){const n=this.ticks||[];if(t>=0&&t<n.length){const s=n[t];return s.$context||(s.$context=b4(this.getContext(),t,s))}return this.$context||(this.$context=v4(this.chart.getContext(),this))}_tickSize(){const t=this.options.ticks,n=xi(this.labelRotation),s=Math.abs(Math.cos(n)),i=Math.abs(Math.sin(n)),r=this._getLabelSizes(),o=t.autoSkipPadding||0,a=r?r.widest.width+o:0,l=r?r.highest.height+o:0;return this.isHorizontal()?l*s>a*i?a/s:l/i:l*i<a*s?l/s:a/i}_isVisible(){const t=this.options.display;return t!=="auto"?!!t:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(t){const n=this.axis,s=this.chart,i=this.options,{grid:r,position:o,border:a}=i,l=r.offset,c=this.isHorizontal(),d=this.ticks.length+(l?1:0),f=xo(r),p=[],_=a.setContext(this.getContext()),y=_.display?_.width:0,v=y/2,w=function(Z){return vi(s,Z,y)};let M,E,x,O,V,A,b,T,k,P,R,C;if(o==="top")M=w(this.bottom),A=this.bottom-f,T=M-v,P=w(t.top)+v,C=t.bottom;else if(o==="bottom")M=w(this.top),P=t.top,C=w(t.bottom)-v,A=M+v,T=this.top+f;else if(o==="left")M=w(this.right),V=this.right-f,b=M-v,k=w(t.left)+v,R=t.right;else if(o==="right")M=w(this.left),k=t.left,R=w(t.right)-v,V=M+v,b=this.left+f;else if(n==="x"){if(o==="center")M=w((t.top+t.bottom)/2+.5);else if(Pt(o)){const Z=Object.keys(o)[0],ot=o[Z];M=w(this.chart.scales[Z].getPixelForValue(ot))}P=t.top,C=t.bottom,A=M+v,T=A+f}else if(n==="y"){if(o==="center")M=w((t.left+t.right)/2);else if(Pt(o)){const Z=Object.keys(o)[0],ot=o[Z];M=w(this.chart.scales[Z].getPixelForValue(ot))}V=M-v,b=V-f,k=t.left,R=t.right}const rt=kt(i.ticks.maxTicksLimit,d),at=Math.max(1,Math.ceil(d/rt));for(E=0;E<d;E+=at){const Z=this.getContext(E),ot=r.setContext(Z),et=a.setContext(Z),Ct=ot.lineWidth,Ye=ot.color,Fe=et.dash||[],se=et.dashOffset,gn=ot.tickWidth,He=ot.tickColor,mn=ot.tickBorderDash||[],Ee=ot.tickBorderDashOffset;x=_4(this,E,l),x!==void 0&&(O=vi(s,x,Ct),c?V=b=k=R=O:A=T=P=C=O,p.push({tx1:V,ty1:A,tx2:b,ty2:T,x1:k,y1:P,x2:R,y2:C,width:Ct,color:Ye,borderDash:Fe,borderDashOffset:se,tickWidth:gn,tickColor:He,tickBorderDash:mn,tickBorderDashOffset:Ee}))}return this._ticksLength=d,this._borderValue=M,p}_computeLabelItems(t){const n=this.axis,s=this.options,{position:i,ticks:r}=s,o=this.isHorizontal(),a=this.ticks,{align:l,crossAlign:c,padding:h,mirror:d}=r,f=xo(s.grid),p=f+h,_=d?-h:p,y=-xi(this.labelRotation),v=[];let w,M,E,x,O,V,A,b,T,k,P,R,C="middle";if(i==="top")V=this.bottom-_,A=this._getXAxisLabelAlignment();else if(i==="bottom")V=this.top+_,A=this._getXAxisLabelAlignment();else if(i==="left"){const at=this._getYAxisLabelAlignment(f);A=at.textAlign,O=at.x}else if(i==="right"){const at=this._getYAxisLabelAlignment(f);A=at.textAlign,O=at.x}else if(n==="x"){if(i==="center")V=(t.top+t.bottom)/2+p;else if(Pt(i)){const at=Object.keys(i)[0],Z=i[at];V=this.chart.scales[at].getPixelForValue(Z)+p}A=this._getXAxisLabelAlignment()}else if(n==="y"){if(i==="center")O=(t.left+t.right)/2-p;else if(Pt(i)){const at=Object.keys(i)[0],Z=i[at];O=this.chart.scales[at].getPixelForValue(Z)}A=this._getYAxisLabelAlignment(f).textAlign}n==="y"&&(l==="start"?C="top":l==="end"&&(C="bottom"));const rt=this._getLabelSizes();for(w=0,M=a.length;w<M;++w){E=a[w],x=E.label;const at=r.setContext(this.getContext(w));b=this.getPixelForTick(w)+r.labelOffset,T=this._resolveTickFontOptions(w),k=T.lineHeight,P=ye(x)?x.length:1;const Z=P/2,ot=at.color,et=at.textStrokeColor,Ct=at.textStrokeWidth;let Ye=A;o?(O=b,A==="inner"&&(w===M-1?Ye=this.options.reverse?"left":"right":w===0?Ye=this.options.reverse?"right":"left":Ye="center"),i==="top"?c==="near"||y!==0?R=-P*k+k/2:c==="center"?R=-rt.highest.height/2-Z*k+k:R=-rt.highest.height+k/2:c==="near"||y!==0?R=k/2:c==="center"?R=rt.highest.height/2-Z*k:R=rt.highest.height-P*k,d&&(R*=-1),y!==0&&!at.showLabelBackdrop&&(O+=k/2*Math.sin(y))):(V=b,R=(1-P)*k/2);let Fe;if(at.showLabelBackdrop){const se=pn(at.backdropPadding),gn=rt.heights[w],He=rt.widths[w];let mn=R-se.top,Ee=0-se.left;switch(C){case"middle":mn-=gn/2;break;case"bottom":mn-=gn;break}switch(A){case"center":Ee-=He/2;break;case"right":Ee-=He;break;case"inner":w===M-1?Ee-=He:w>0&&(Ee-=He/2);break}Fe={left:Ee,top:mn,width:He+se.width,height:gn+se.height,color:at.backdropColor}}v.push({label:x,font:T,textOffset:R,options:{rotation:y,color:ot,strokeColor:et,strokeWidth:Ct,textAlign:Ye,textBaseline:C,translation:[O,V],backdrop:Fe}})}return v}_getXAxisLabelAlignment(){const{position:t,ticks:n}=this.options;if(-xi(this.labelRotation))return t==="top"?"left":"right";let i="center";return n.align==="start"?i="left":n.align==="end"?i="right":n.align==="inner"&&(i="inner"),i}_getYAxisLabelAlignment(t){const{position:n,ticks:{crossAlign:s,mirror:i,padding:r}}=this.options,o=this._getLabelSizes(),a=t+r,l=o.widest.width;let c,h;return n==="left"?i?(h=this.right+r,s==="near"?c="left":s==="center"?(c="center",h+=l/2):(c="right",h+=l)):(h=this.right-a,s==="near"?c="right":s==="center"?(c="center",h-=l/2):(c="left",h=this.left)):n==="right"?i?(h=this.left+r,s==="near"?c="right":s==="center"?(c="center",h-=l/2):(c="left",h-=l)):(h=this.left+a,s==="near"?c="left":s==="center"?(c="center",h+=l/2):(c="right",h=this.right)):c="right",{textAlign:c,x:h}}_computeLabelArea(){if(this.options.ticks.mirror)return;const t=this.chart,n=this.options.position;if(n==="left"||n==="right")return{top:0,left:this.left,bottom:t.height,right:this.right};if(n==="top"||n==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:t.width}}drawBackground(){const{ctx:t,options:{backgroundColor:n},left:s,top:i,width:r,height:o}=this;n&&(t.save(),t.fillStyle=n,t.fillRect(s,i,r,o),t.restore())}getLineWidthForValue(t){const n=this.options.grid;if(!this._isVisible()||!n.display)return 0;const i=this.ticks.findIndex(r=>r.value===t);return i>=0?n.setContext(this.getContext(i)).lineWidth:0}drawGrid(t){const n=this.options.grid,s=this.ctx,i=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(t));let r,o;const a=(l,c,h)=>{!h.width||!h.color||(s.save(),s.lineWidth=h.width,s.strokeStyle=h.color,s.setLineDash(h.borderDash||[]),s.lineDashOffset=h.borderDashOffset,s.beginPath(),s.moveTo(l.x,l.y),s.lineTo(c.x,c.y),s.stroke(),s.restore())};if(n.display)for(r=0,o=i.length;r<o;++r){const l=i[r];n.drawOnChartArea&&a({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),n.drawTicks&&a({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){const{chart:t,ctx:n,options:{border:s,grid:i}}=this,r=s.setContext(this.getContext()),o=s.display?r.width:0;if(!o)return;const a=i.setContext(this.getContext(0)).lineWidth,l=this._borderValue;let c,h,d,f;this.isHorizontal()?(c=vi(t,this.left,o)-o/2,h=vi(t,this.right,a)+a/2,d=f=l):(d=vi(t,this.top,o)-o/2,f=vi(t,this.bottom,a)+a/2,c=h=l),n.save(),n.lineWidth=r.width,n.strokeStyle=r.color,n.beginPath(),n.moveTo(c,d),n.lineTo(h,f),n.stroke(),n.restore()}drawLabels(t){if(!this.options.ticks.display)return;const s=this.ctx,i=this._computeLabelArea();i&&dp(s,i);const r=this.getLabelItems(t);for(const o of r){const a=o.options,l=o.font,c=o.label,h=o.textOffset;Aa(s,c,0,h,l,a)}i&&fp(s)}drawTitle(){const{ctx:t,options:{position:n,title:s,reverse:i}}=this;if(!s.display)return;const r=Ne(s.font),o=pn(s.padding),a=s.align;let l=r.lineHeight/2;n==="bottom"||n==="center"||Pt(n)?(l+=o.bottom,ye(s.text)&&(l+=r.lineHeight*(s.text.length-1))):l+=o.top;const{titleX:c,titleY:h,maxWidth:d,rotation:f}=T4(this,l,n,a);Aa(t,s.text,0,0,r,{color:s.color,maxWidth:d,rotation:f,textAlign:w4(a,n,i),textBaseline:"middle",translation:[c,h]})}draw(t){this._isVisible()&&(this.drawBackground(),this.drawGrid(t),this.drawBorder(),this.drawTitle(),this.drawLabels(t))}_layers(){const t=this.options,n=t.ticks&&t.ticks.z||0,s=kt(t.grid&&t.grid.z,-1),i=kt(t.border&&t.border.z,0);return!this._isVisible()||this.draw!==io.prototype.draw?[{z:n,draw:r=>{this.draw(r)}}]:[{z:s,draw:r=>{this.drawBackground(),this.drawGrid(r),this.drawTitle()}},{z:i,draw:()=>{this.drawBorder()}},{z:n,draw:r=>{this.drawLabels(r)}}]}getMatchingVisibleMetas(t){const n=this.chart.getSortedVisibleDatasetMetas(),s=this.axis+"AxisID",i=[];let r,o;for(r=0,o=n.length;r<o;++r){const a=n[r];a[s]===this.id&&(!t||a.type===t)&&i.push(a)}return i}_resolveTickFontOptions(t){const n=this.options.ticks.setContext(this.getContext(t));return Ne(n.font)}_maxDigits(){const t=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/t}}class Rl{constructor(t,n,s){this.type=t,this.scope=n,this.override=s,this.items=Object.create(null)}isForType(t){return Object.prototype.isPrototypeOf.call(this.type.prototype,t.prototype)}register(t){const n=Object.getPrototypeOf(t);let s;S4(n)&&(s=this.register(n));const i=this.items,r=t.id,o=this.scope+"."+r;if(!r)throw new Error("class does not have id: "+t);return r in i||(i[r]=t,E4(t,o,s),this.override&&ne.override(t.id,t.overrides)),o}get(t){return this.items[t]}unregister(t){const n=this.items,s=t.id,i=this.scope;s in n&&delete n[s],i&&s in ne[i]&&(delete ne[i][s],this.override&&delete qi[s])}}function E4(e,t,n){const s=Ea(Object.create(null),[n?ne.get(n):{},ne.get(t),e.defaults]);ne.set(t,s),e.defaultRoutes&&I4(t,e.defaultRoutes),e.descriptors&&ne.describe(t,e.descriptors)}function I4(e,t){Object.keys(t).forEach(n=>{const s=n.split("."),i=s.pop(),r=[e].concat(s).join("."),o=t[n].split("."),a=o.pop(),l=o.join(".");ne.route(r,i,l,a)})}function S4(e){return"id"in e&&"defaults"in e}class A4{constructor(){this.controllers=new Rl(GT,"datasets",!0),this.elements=new Rl(Ji,"elements"),this.plugins=new Rl(Object,"plugins"),this.scales=new Rl(io,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...t){this._each("register",t)}remove(...t){this._each("unregister",t)}addControllers(...t){this._each("register",t,this.controllers)}addElements(...t){this._each("register",t,this.elements)}addPlugins(...t){this._each("register",t,this.plugins)}addScales(...t){this._each("register",t,this.scales)}getController(t){return this._get(t,this.controllers,"controller")}getElement(t){return this._get(t,this.elements,"element")}getPlugin(t){return this._get(t,this.plugins,"plugin")}getScale(t){return this._get(t,this.scales,"scale")}removeControllers(...t){this._each("unregister",t,this.controllers)}removeElements(...t){this._each("unregister",t,this.elements)}removePlugins(...t){this._each("unregister",t,this.plugins)}removeScales(...t){this._each("unregister",t,this.scales)}_each(t,n,s){[...n].forEach(i=>{const r=s||this._getRegistryForType(i);s||r.isForType(i)||r===this.plugins&&i.id?this._exec(t,r,i):Lt(i,o=>{const a=s||this._getRegistryForType(o);this._exec(t,a,o)})})}_exec(t,n,s){const i=lp(t);qt(s["before"+i],[],s),n[t](s),qt(s["after"+i],[],s)}_getRegistryForType(t){for(let n=0;n<this._typedRegistries.length;n++){const s=this._typedRegistries[n];if(s.isForType(t))return s}return this.plugins}_get(t,n,s){const i=n.get(t);if(i===void 0)throw new Error('"'+t+'" is not a registered '+s+".");return i}}var Dn=new A4;class k4{constructor(){this._init=void 0}notify(t,n,s,i){if(n==="beforeInit"&&(this._init=this._createDescriptors(t,!0),this._notify(this._init,t,"install")),this._init===void 0)return;const r=i?this._descriptors(t).filter(i):this._descriptors(t),o=this._notify(r,t,n,s);return n==="afterDestroy"&&(this._notify(r,t,"stop"),this._notify(this._init,t,"uninstall"),this._init=void 0),o}_notify(t,n,s,i){i=i||{};for(const r of t){const o=r.plugin,a=o[s],l=[n,i,r.options];if(qt(a,l,o)===!1&&i.cancelable)return!1}return!0}invalidate(){zt(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(t){if(this._cache)return this._cache;const n=this._cache=this._createDescriptors(t);return this._notifyStateChanges(t),n}_createDescriptors(t,n){const s=t&&t.config,i=kt(s.options&&s.options.plugins,{}),r=C4(s);return i===!1&&!n?[]:R4(t,r,i,n)}_notifyStateChanges(t){const n=this._oldCache||[],s=this._cache,i=(r,o)=>r.filter(a=>!o.some(l=>a.plugin.id===l.plugin.id));this._notify(i(n,s),t,"stop"),this._notify(i(s,n),t,"start")}}function C4(e){const t={},n=[],s=Object.keys(Dn.plugins.items);for(let r=0;r<s.length;r++)n.push(Dn.getPlugin(s[r]));const i=e.plugins||[];for(let r=0;r<i.length;r++){const o=i[r];n.indexOf(o)===-1&&(n.push(o),t[o.id]=!0)}return{plugins:n,localIds:t}}function x4(e,t){return!t&&e===!1?null:e===!0?{}:e}function R4(e,{plugins:t,localIds:n},s,i){const r=[],o=e.getContext();for(const a of t){const l=a.id,c=x4(s[l],i);c!==null&&r.push({plugin:a,options:P4(e.config,{plugin:a,local:n[l]},c,o)})}return r}function P4(e,{plugin:t,local:n},s,i){const r=e.pluginScopeKeys(t),o=e.getOptionScopes(s,r);return n&&t.defaults&&o.push(t.defaults),e.createResolver(o,i,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function Pd(e,t){const n=ne.datasets[e]||{};return((t.datasets||{})[e]||{}).indexAxis||t.indexAxis||n.indexAxis||"x"}function M4(e,t){let n=e;return e==="_index_"?n=t:e==="_value_"&&(n=t==="x"?"y":"x"),n}function D4(e,t){return e===t?"_index_":"_value_"}function Cy(e){if(e==="x"||e==="y"||e==="r")return e}function O4(e){if(e==="top"||e==="bottom")return"x";if(e==="left"||e==="right")return"y"}function Md(e,...t){if(Cy(e))return e;for(const n of t){const s=n.axis||O4(n.position)||e.length>1&&Cy(e[0].toLowerCase());if(s)return s}throw new Error(`Cannot determine type of '${e}' axis. Please provide 'axis' or 'position' option.`)}function xy(e,t,n){if(n[t+"AxisID"]===e)return{axis:t}}function L4(e,t){if(t.data&&t.data.datasets){const n=t.data.datasets.filter(s=>s.xAxisID===e||s.yAxisID===e);if(n.length)return xy(e,"x",n[0])||xy(e,"y",n[0])}return{}}function N4(e,t){const n=qi[e.type]||{scales:{}},s=t.scales||{},i=Pd(e.type,t),r=Object.create(null);return Object.keys(s).forEach(o=>{const a=s[o];if(!Pt(a))return console.error(`Invalid scale configuration for scale: ${o}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const l=Md(o,a,L4(o,e),ne.scales[a.type]),c=D4(l,i),h=n.scales||{};r[o]=ea(Object.create(null),[{axis:l},a,h[l],h[c]])}),e.data.datasets.forEach(o=>{const a=o.type||e.type,l=o.indexAxis||Pd(a,t),h=(qi[a]||{}).scales||{};Object.keys(h).forEach(d=>{const f=M4(d,l),p=o[f+"AxisID"]||f;r[p]=r[p]||Object.create(null),ea(r[p],[{axis:f},s[p],h[d]])})}),Object.keys(r).forEach(o=>{const a=r[o];ea(a,[ne.scales[a.type],ne.scale])}),r}function ZT(e){const t=e.options||(e.options={});t.plugins=kt(t.plugins,{}),t.scales=N4(e,t)}function tE(e){return e=e||{},e.datasets=e.datasets||[],e.labels=e.labels||[],e}function V4(e){return e=e||{},e.data=tE(e.data),ZT(e),e}const Ry=new Map,eE=new Set;function Pl(e,t){let n=Ry.get(e);return n||(n=t(),Ry.set(e,n),eE.add(n)),n}const Ro=(e,t,n)=>{const s=Lc(t,n);s!==void 0&&e.add(s)};class F4{constructor(t){this._config=V4(t),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(t){this._config.type=t}get data(){return this._config.data}set data(t){this._config.data=tE(t)}get options(){return this._config.options}set options(t){this._config.options=t}get plugins(){return this._config.plugins}update(){const t=this._config;this.clearCache(),ZT(t)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(t){return Pl(t,()=>[[`datasets.${t}`,""]])}datasetAnimationScopeKeys(t,n){return Pl(`${t}.transition.${n}`,()=>[[`datasets.${t}.transitions.${n}`,`transitions.${n}`],[`datasets.${t}`,""]])}datasetElementScopeKeys(t,n){return Pl(`${t}-${n}`,()=>[[`datasets.${t}.elements.${n}`,`datasets.${t}`,`elements.${n}`,""]])}pluginScopeKeys(t){const n=t.id,s=this.type;return Pl(`${s}-plugin-${n}`,()=>[[`plugins.${n}`,...t.additionalOptionScopes||[]]])}_cachedScopes(t,n){const s=this._scopeCache;let i=s.get(t);return(!i||n)&&(i=new Map,s.set(t,i)),i}getOptionScopes(t,n,s){const{options:i,type:r}=this,o=this._cachedScopes(t,s),a=o.get(n);if(a)return a;const l=new Set;n.forEach(h=>{t&&(l.add(t),h.forEach(d=>Ro(l,t,d))),h.forEach(d=>Ro(l,i,d)),h.forEach(d=>Ro(l,qi[r]||{},d)),h.forEach(d=>Ro(l,ne,d)),h.forEach(d=>Ro(l,Cd,d))});const c=Array.from(l);return c.length===0&&c.push(Object.create(null)),eE.has(n)&&o.set(n,c),c}chartOptionScopes(){const{options:t,type:n}=this;return[t,qi[n]||{},ne.datasets[n]||{},{type:n},ne,Cd]}resolveNamedOptions(t,n,s,i=[""]){const r={$shared:!0},{resolver:o,subPrefixes:a}=Py(this._resolverCache,t,i);let l=o;if($4(o,n)){r.$shared=!1,s=ii(s)?s():s;const c=this.createResolver(t,s,a);l=Wr(o,s,c)}for(const c of n)r[c]=l[c];return r}createResolver(t,n,s=[""],i){const{resolver:r}=Py(this._resolverCache,t,s);return Pt(n)?Wr(r,n,void 0,i):r}}function Py(e,t,n){let s=e.get(t);s||(s=new Map,e.set(t,s));const i=n.join();let r=s.get(i);return r||(r={resolver:pp(t,n),subPrefixes:n.filter(a=>!a.toLowerCase().includes("hover"))},s.set(i,r)),r}const U4=e=>Pt(e)&&Object.getOwnPropertyNames(e).some(t=>ii(e[t]));function $4(e,t){const{isScriptable:n,isIndexable:s}=VT(e);for(const i of t){const r=n(i),o=s(i),a=(o||r)&&e[i];if(r&&(ii(a)||U4(a))||o&&ye(a))return!0}return!1}var B4="4.5.1";const H4=["top","bottom","left","right","chartArea"];function My(e,t){return e==="top"||e==="bottom"||H4.indexOf(e)===-1&&t==="x"}function Dy(e,t){return function(n,s){return n[e]===s[e]?n[t]-s[t]:n[e]-s[e]}}function Oy(e){const t=e.chart,n=t.options.animation;t.notifyPlugins("afterRender"),qt(n&&n.onComplete,[e],t)}function j4(e){const t=e.chart,n=t.options.animation;qt(n&&n.onProgress,[e],t)}function nE(e){return _p()&&typeof e=="string"?e=document.getElementById(e):e&&e.length&&(e=e[0]),e&&e.canvas&&(e=e.canvas),e}const Ql={},Ly=e=>{const t=nE(e);return Object.values(Ql).filter(n=>n.canvas===t).pop()};function z4(e,t,n){const s=Object.keys(e);for(const i of s){const r=+i;if(r>=t){const o=e[i];delete e[i],(n>0||r>t)&&(e[r+n]=o)}}}function W4(e,t,n,s){return!n||e.type==="mouseout"?null:s?t:e}let Cu=class{static defaults=ne;static instances=Ql;static overrides=qi;static registry=Dn;static version=B4;static getChart=Ly;static register(...t){Dn.add(...t),Ny()}static unregister(...t){Dn.remove(...t),Ny()}constructor(t,n){const s=this.config=new F4(n),i=nE(t),r=Ly(i);if(r)throw new Error("Canvas is already in use. Chart with ID '"+r.id+"' must be destroyed before the canvas with ID '"+r.canvas.id+"' can be reused.");const o=s.createResolver(s.chartOptionScopes(),this.getContext());this.platform=new(s.platform||c4(i)),this.platform.updateConfig(s);const a=this.platform.acquireContext(i,o.aspectRatio),l=a&&a.canvas,c=l&&l.height,h=l&&l.width;if(this.id=GL(),this.ctx=a,this.canvas=l,this.width=h,this.height=c,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new k4,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=pN(d=>this.update(d),o.resizeDelay||0),this._dataChanges=[],Ql[this.id]=this,!a||!l){console.error("Failed to create chart: can't acquire context from the given item");return}Jn.listen(this,"complete",Oy),Jn.listen(this,"progress",j4),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:t,maintainAspectRatio:n},width:s,height:i,_aspectRatio:r}=this;return zt(t)?n&&r?r:i?s/i:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}get registry(){return Dn}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():ay(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return iy(this.canvas,this.ctx),this}stop(){return Jn.stop(this),this}resize(t,n){Jn.running(this)?this._resizeBeforeDraw={width:t,height:n}:this._resize(t,n)}_resize(t,n){const s=this.options,i=this.canvas,r=s.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(i,t,n,r),a=s.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,ay(this,a,!0)&&(this.notifyPlugins("resize",{size:o}),qt(s.onResize,[this,o],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){const n=this.options.scales||{};Lt(n,(s,i)=>{s.id=i})}buildOrUpdateScales(){const t=this.options,n=t.scales,s=this.scales,i=Object.keys(s).reduce((o,a)=>(o[a]=!1,o),{});let r=[];n&&(r=r.concat(Object.keys(n).map(o=>{const a=n[o],l=Md(o,a),c=l==="r",h=l==="x";return{options:a,dposition:c?"chartArea":h?"bottom":"left",dtype:c?"radialLinear":h?"category":"linear"}}))),Lt(r,o=>{const a=o.options,l=a.id,c=Md(l,a),h=kt(a.type,o.dtype);(a.position===void 0||My(a.position,c)!==My(o.dposition))&&(a.position=o.dposition),i[l]=!0;let d=null;if(l in s&&s[l].type===h)d=s[l];else{const f=Dn.getScale(h);d=new f({id:l,type:h,ctx:this.ctx,chart:this}),s[d.id]=d}d.init(a,t)}),Lt(i,(o,a)=>{o||delete s[a]}),Lt(s,o=>{hn.configure(this,o,o.options),hn.addBox(this,o)})}_updateMetasets(){const t=this._metasets,n=this.data.datasets.length,s=t.length;if(t.sort((i,r)=>i.index-r.index),s>n){for(let i=n;i<s;++i)this._destroyDatasetMeta(i);t.splice(n,s-n)}this._sortedMetasets=t.slice(0).sort(Dy("order","index"))}_removeUnreferencedMetasets(){const{_metasets:t,data:{datasets:n}}=this;t.length>n.length&&delete this._stacks,t.forEach((s,i)=>{n.filter(r=>r===s._dataset).length===0&&this._destroyDatasetMeta(i)})}buildOrUpdateControllers(){const t=[],n=this.data.datasets;let s,i;for(this._removeUnreferencedMetasets(),s=0,i=n.length;s<i;s++){const r=n[s];let o=this.getDatasetMeta(s);const a=r.type||this.config.type;if(o.type&&o.type!==a&&(this._destroyDatasetMeta(s),o=this.getDatasetMeta(s)),o.type=a,o.indexAxis=r.indexAxis||Pd(a,this.options),o.order=r.order||0,o.index=s,o.label=""+r.label,o.visible=this.isDatasetVisible(s),o.controller)o.controller.updateIndex(s),o.controller.linkScales();else{const l=Dn.getController(a),{datasetElementType:c,dataElementType:h}=ne.datasets[a];Object.assign(l,{dataElementType:Dn.getElement(h),datasetElementType:c&&Dn.getElement(c)}),o.controller=new l(this,s),t.push(o.controller)}}return this._updateMetasets(),t}_resetElements(){Lt(this.data.datasets,(t,n)=>{this.getDatasetMeta(n).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(t){const n=this.config;n.update();const s=this._options=n.createResolver(n.chartOptionScopes(),this.getContext()),i=this._animationsDisabled=!s.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0})===!1)return;const r=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let c=0,h=this.data.datasets.length;c<h;c++){const{controller:d}=this.getDatasetMeta(c),f=!i&&r.indexOf(d)===-1;d.buildOrUpdateElements(f),o=Math.max(+d.getMaxOverflow(),o)}o=this._minPadding=s.layout.autoPadding?o:0,this._updateLayout(o),i||Lt(r,c=>{c.reset()}),this._updateDatasets(t),this.notifyPlugins("afterUpdate",{mode:t}),this._layers.sort(Dy("z","_idx"));const{_active:a,_lastEvent:l}=this;l?this._eventHandler(l,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){Lt(this.scales,t=>{hn.removeBox(this,t)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const t=this.options,n=new Set(Object.keys(this._listeners)),s=new Set(t.events);(!K_(n,s)||!!this._responsiveListeners!==t.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:t}=this,n=this._getUniformDataChanges()||[];for(const{method:s,start:i,count:r}of n){const o=s==="_removeElements"?-r:r;z4(t,i,o)}}_getUniformDataChanges(){const t=this._dataChanges;if(!t||!t.length)return;this._dataChanges=[];const n=this.data.datasets.length,s=r=>new Set(t.filter(o=>o[0]===r).map((o,a)=>a+","+o.splice(1).join(","))),i=s(0);for(let r=1;r<n;r++)if(!K_(i,s(r)))return;return Array.from(i).map(r=>r.split(",")).map(r=>({method:r[1],start:+r[2],count:+r[3]}))}_updateLayout(t){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;hn.update(this,this.width,this.height,t);const n=this.chartArea,s=n.width<=0||n.height<=0;this._layers=[],Lt(this.boxes,i=>{s&&i.position==="chartArea"||(i.configure&&i.configure(),this._layers.push(...i._layers()))},this),this._layers.forEach((i,r)=>{i._idx=r}),this.notifyPlugins("afterLayout")}_updateDatasets(t){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})!==!1){for(let n=0,s=this.data.datasets.length;n<s;++n)this.getDatasetMeta(n).controller.configure();for(let n=0,s=this.data.datasets.length;n<s;++n)this._updateDataset(n,ii(t)?t({datasetIndex:n}):t);this.notifyPlugins("afterDatasetsUpdate",{mode:t})}}_updateDataset(t,n){const s=this.getDatasetMeta(t),i={meta:s,index:t,mode:n,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",i)!==!1&&(s.controller._update(n),i.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",i))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(Jn.has(this)?this.attached&&!Jn.running(this)&&Jn.start(this):(this.draw(),Oy({chart:this})))}draw(){let t;if(this._resizeBeforeDraw){const{width:s,height:i}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(s,i)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const n=this._layers;for(t=0;t<n.length&&n[t].z<=0;++t)n[t].draw(this.chartArea);for(this._drawDatasets();t<n.length;++t)n[t].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(t){const n=this._sortedMetasets,s=[];let i,r;for(i=0,r=n.length;i<r;++i){const o=n[i];(!t||o.visible)&&s.push(o)}return s}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const t=this.getSortedVisibleDatasetMetas();for(let n=t.length-1;n>=0;--n)this._drawDataset(t[n]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(t){const n=this.ctx,s={meta:t,index:t.index,cancelable:!0},i=wV(this,t);this.notifyPlugins("beforeDatasetDraw",s)!==!1&&(i&&dp(n,i),t.controller.draw(),i&&fp(n),s.cancelable=!1,this.notifyPlugins("afterDatasetDraw",s))}isPointInArea(t){return Sa(t,this.chartArea,this._minPadding)}getElementsAtEventForMode(t,n,s,i){const r=HV.modes[n];return typeof r=="function"?r(this,t,s,i):[]}getDatasetMeta(t){const n=this.data.datasets[t],s=this._metasets;let i=s.filter(r=>r&&r._dataset===n).pop();return i||(i={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:n&&n.order||0,index:t,_dataset:n,_parsed:[],_sorted:!1},s.push(i)),i}getContext(){return this.$context||(this.$context=Xi(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(t){const n=this.data.datasets[t];if(!n)return!1;const s=this.getDatasetMeta(t);return typeof s.hidden=="boolean"?!s.hidden:!n.hidden}setDatasetVisibility(t,n){const s=this.getDatasetMeta(t);s.hidden=!n}toggleDataVisibility(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}getDataVisibility(t){return!this._hiddenIndices[t]}_updateVisibility(t,n,s){const i=s?"show":"hide",r=this.getDatasetMeta(t),o=r.controller._resolveAnimations(void 0,i);Nc(n)?(r.data[n].hidden=!s,this.update()):(this.setDatasetVisibility(t,s),o.update(r,{visible:s}),this.update(a=>a.datasetIndex===t?i:void 0))}hide(t,n){this._updateVisibility(t,n,!1)}show(t,n){this._updateVisibility(t,n,!0)}_destroyDatasetMeta(t){const n=this._metasets[t];n&&n.controller&&n.controller._destroy(),delete this._metasets[t]}_stop(){let t,n;for(this.stop(),Jn.remove(this),t=0,n=this.data.datasets.length;t<n;++t)this._destroyDatasetMeta(t)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:t,ctx:n}=this;this._stop(),this.config.clearCache(),t&&(this.unbindEvents(),iy(t,n),this.platform.releaseContext(n),this.canvas=null,this.ctx=null),delete Ql[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...t){return this.canvas.toDataURL(...t)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const t=this._listeners,n=this.platform,s=(r,o)=>{n.addEventListener(this,r,o),t[r]=o},i=(r,o,a)=>{r.offsetX=o,r.offsetY=a,this._eventHandler(r)};Lt(this.options.events,r=>s(r,i))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const t=this._responsiveListeners,n=this.platform,s=(l,c)=>{n.addEventListener(this,l,c),t[l]=c},i=(l,c)=>{t[l]&&(n.removeEventListener(this,l,c),delete t[l])},r=(l,c)=>{this.canvas&&this.resize(l,c)};let o;const a=()=>{i("attach",a),this.attached=!0,this.resize(),s("resize",r),s("detach",o)};o=()=>{this.attached=!1,i("resize",r),this._stop(),this._resize(0,0),s("attach",a)},n.isAttached(this.canvas)?a():o()}unbindEvents(){Lt(this._listeners,(t,n)=>{this.platform.removeEventListener(this,n,t)}),this._listeners={},Lt(this._responsiveListeners,(t,n)=>{this.platform.removeEventListener(this,n,t)}),this._responsiveListeners=void 0}updateHoverStyle(t,n,s){const i=s?"set":"remove";let r,o,a,l;for(n==="dataset"&&(r=this.getDatasetMeta(t[0].datasetIndex),r.controller["_"+i+"DatasetHoverStyle"]()),a=0,l=t.length;a<l;++a){o=t[a];const c=o&&this.getDatasetMeta(o.datasetIndex).controller;c&&c[i+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(t){const n=this._active||[],s=t.map(({datasetIndex:r,index:o})=>{const a=this.getDatasetMeta(r);if(!a)throw new Error("No dataset found at index "+r);return{datasetIndex:r,element:a.data[o],index:o}});!Dc(s,n)&&(this._active=s,this._lastEvent=null,this._updateHoverStyles(s,n))}notifyPlugins(t,n,s){return this._plugins.notify(this,t,n,s)}isPluginEnabled(t){return this._plugins._cache.filter(n=>n.plugin.id===t).length===1}_updateHoverStyles(t,n,s){const i=this.options.hover,r=(l,c)=>l.filter(h=>!c.some(d=>h.datasetIndex===d.datasetIndex&&h.index===d.index)),o=r(n,t),a=s?t:r(t,n);o.length&&this.updateHoverStyle(o,i.mode,!1),a.length&&i.mode&&this.updateHoverStyle(a,i.mode,!0)}_eventHandler(t,n){const s={event:t,replay:n,cancelable:!0,inChartArea:this.isPointInArea(t)},i=o=>(o.options.events||this.options.events).includes(t.native.type);if(this.notifyPlugins("beforeEvent",s,i)===!1)return;const r=this._handleEvent(t,n,s.inChartArea);return s.cancelable=!1,this.notifyPlugins("afterEvent",s,i),(r||s.changed)&&this.render(),this}_handleEvent(t,n,s){const{_active:i=[],options:r}=this,o=n,a=this._getActiveElements(t,i,s,o),l=ZL(t),c=W4(t,this._lastEvent,s,l);s&&(this._lastEvent=null,qt(r.onHover,[t,a,this],this),l&&qt(r.onClick,[t,a,this],this));const h=!Dc(a,i);return(h||n)&&(this._active=a,this._updateHoverStyles(a,i,n)),this._lastEvent=c,h}_getActiveElements(t,n,s,i){if(t.type==="mouseout")return[];if(!s)return n;const r=this.options.hover;return this.getElementsAtEventForMode(t,r.mode,r,i)}};function Ny(){return Lt(Cu.instances,e=>e._plugins.invalidate())}function sE(e,t,n=t){e.lineCap=kt(n.borderCapStyle,t.borderCapStyle),e.setLineDash(kt(n.borderDash,t.borderDash)),e.lineDashOffset=kt(n.borderDashOffset,t.borderDashOffset),e.lineJoin=kt(n.borderJoinStyle,t.borderJoinStyle),e.lineWidth=kt(n.borderWidth,t.borderWidth),e.strokeStyle=kt(n.borderColor,t.borderColor)}function q4(e,t,n){e.lineTo(n.x,n.y)}function G4(e){return e.stepped?CN:e.tension||e.cubicInterpolationMode==="monotone"?xN:q4}function iE(e,t,n={}){const s=e.length,{start:i=0,end:r=s-1}=n,{start:o,end:a}=t,l=Math.max(i,o),c=Math.min(r,a),h=i<o&&r<o||i>a&&r>a;return{count:s,start:l,loop:t.loop,ilen:c<l&&!h?s+c-l:c-l}}function K4(e,t,n,s){const{points:i,options:r}=t,{count:o,start:a,loop:l,ilen:c}=iE(i,n,s),h=G4(r);let{move:d=!0,reverse:f}=s||{},p,_,y;for(p=0;p<=c;++p)_=i[(a+(f?c-p:p))%o],!_.skip&&(d?(e.moveTo(_.x,_.y),d=!1):h(e,y,_,f,r.stepped),y=_);return l&&(_=i[(a+(f?c:0))%o],h(e,y,_,f,r.stepped)),!!l}function Q4(e,t,n,s){const i=t.points,{count:r,start:o,ilen:a}=iE(i,n,s),{move:l=!0,reverse:c}=s||{};let h=0,d=0,f,p,_,y,v,w;const M=x=>(o+(c?a-x:x))%r,E=()=>{y!==v&&(e.lineTo(h,v),e.lineTo(h,y),e.lineTo(h,w))};for(l&&(p=i[M(0)],e.moveTo(p.x,p.y)),f=0;f<=a;++f){if(p=i[M(f)],p.skip)continue;const x=p.x,O=p.y,V=x|0;V===_?(O<y?y=O:O>v&&(v=O),h=(d*h+x)/++d):(E(),e.lineTo(x,O),_=V,d=0,y=v=O),w=O}E()}function Dd(e){const t=e.options,n=t.borderDash&&t.borderDash.length;return!e._decimated&&!e._loop&&!t.tension&&t.cubicInterpolationMode!=="monotone"&&!t.stepped&&!n?Q4:K4}function Y4(e){return e.stepped?lV:e.tension||e.cubicInterpolationMode==="monotone"?cV:Ii}function X4(e,t,n,s){let i=t._path;i||(i=t._path=new Path2D,t.path(i,n,s)&&i.closePath()),sE(e,t.options),e.stroke(i)}function J4(e,t,n,s){const{segments:i,options:r}=t,o=Dd(t);for(const a of i)sE(e,r,a.style),e.beginPath(),o(e,t,a,{start:n,end:n+s-1})&&e.closePath(),e.stroke()}const Z4=typeof Path2D=="function";function tF(e,t,n,s){Z4&&!t.options.segment?X4(e,t,n,s):J4(e,t,n,s)}class eF extends Ji{static id="line";static defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};static descriptors={_scriptable:!0,_indexable:t=>t!=="borderDash"&&t!=="fill"};constructor(t){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,t&&Object.assign(this,t)}updateControlPoints(t,n){const s=this.options;if((s.tension||s.cubicInterpolationMode==="monotone")&&!s.stepped&&!this._pointsUpdated){const i=s.spanGaps?this._loop:this._fullLoop;tV(this._points,s,t,i,n),this._pointsUpdated=!0}}set points(t){this._points=t,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=_V(this,this.options.segment))}first(){const t=this.segments,n=this.points;return t.length&&n[t[0].start]}last(){const t=this.segments,n=this.points,s=t.length;return s&&n[t[s-1].end]}interpolate(t,n){const s=this.options,i=t[n],r=this.points,o=pV(this,{property:n,start:i,end:i});if(!o.length)return;const a=[],l=Y4(s);let c,h;for(c=0,h=o.length;c<h;++c){const{start:d,end:f}=o[c],p=r[d],_=r[f];if(p===_){a.push(p);continue}const y=Math.abs((i-p[n])/(_[n]-p[n])),v=l(p,_,y,s.stepped);v[n]=t[n],a.push(v)}return a.length===1?a[0]:a}pathSegment(t,n,s){return Dd(this)(t,this,n,s)}path(t,n,s){const i=this.segments,r=Dd(this);let o=this._loop;n=n||0,s=s||this.points.length-n;for(const a of i)o&=r(t,this,a,{start:n,end:n+s-1});return!!o}draw(t,n,s,i){const r=this.options||{};(this.points||[]).length&&r.borderWidth&&(t.save(),tF(t,this,s,i),t.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}function Vy(e,t,n,s){const i=e.options,{[n]:r}=e.getProps([n],s);return Math.abs(t-r)<i.radius+i.hitRadius}class nF extends Ji{static id="point";parsed;skip;stop;static defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(t){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,t&&Object.assign(this,t)}inRange(t,n,s){const i=this.options,{x:r,y:o}=this.getProps(["x","y"],s);return Math.pow(t-r,2)+Math.pow(n-o,2)<Math.pow(i.hitRadius+i.radius,2)}inXRange(t,n){return Vy(this,t,"x",n)}inYRange(t,n){return Vy(this,t,"y",n)}getCenterPoint(t){const{x:n,y:s}=this.getProps(["x","y"],t);return{x:n,y:s}}size(t){t=t||this.options||{};let n=t.radius||0;n=Math.max(n,n&&t.hoverRadius||0);const s=n&&t.borderWidth||0;return(n+s)*2}draw(t,n){const s=this.options;this.skip||s.radius<.1||!Sa(this,n,this.size(s)/2)||(t.strokeStyle=s.borderColor,t.lineWidth=s.borderWidth,t.fillStyle=s.backgroundColor,xd(t,s,this.x,this.y))}getRange(){const t=this.options||{};return t.radius+t.hitRadius}}const Fy=(e,t)=>{let{boxHeight:n=t,boxWidth:s=t}=e;return e.usePointStyle&&(n=Math.min(n,t),s=e.pointStyleWidth||Math.min(s,t)),{boxWidth:s,boxHeight:n,itemHeight:Math.max(t,n)}},sF=(e,t)=>e!==null&&t!==null&&e.datasetIndex===t.datasetIndex&&e.index===t.index;class Uy extends Ji{constructor(t){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,n,s){this.maxWidth=t,this.maxHeight=n,this._margins=s,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const t=this.options.labels||{};let n=qt(t.generateLabels,[this.chart],this)||[];t.filter&&(n=n.filter(s=>t.filter(s,this.chart.data))),t.sort&&(n=n.sort((s,i)=>t.sort(s,i,this.chart.data))),this.options.reverse&&n.reverse(),this.legendItems=n}fit(){const{options:t,ctx:n}=this;if(!t.display){this.width=this.height=0;return}const s=t.labels,i=Ne(s.font),r=i.size,o=this._computeTitleHeight(),{boxWidth:a,itemHeight:l}=Fy(s,r);let c,h;n.font=i.string,this.isHorizontal()?(c=this.maxWidth,h=this._fitRows(o,r,a,l)+10):(h=this.maxHeight,c=this._fitCols(o,i,a,l)+10),this.width=Math.min(c,t.maxWidth||this.maxWidth),this.height=Math.min(h,t.maxHeight||this.maxHeight)}_fitRows(t,n,s,i){const{ctx:r,maxWidth:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.lineWidths=[0],h=i+a;let d=t;r.textAlign="left",r.textBaseline="middle";let f=-1,p=-h;return this.legendItems.forEach((_,y)=>{const v=s+n/2+r.measureText(_.text).width;(y===0||c[c.length-1]+v+2*a>o)&&(d+=h,c[c.length-(y>0?0:1)]=0,p+=h,f++),l[y]={left:0,top:p,row:f,width:v,height:i},c[c.length-1]+=v+a}),d}_fitCols(t,n,s,i){const{ctx:r,maxHeight:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.columnSizes=[],h=o-t;let d=a,f=0,p=0,_=0,y=0;return this.legendItems.forEach((v,w)=>{const{itemWidth:M,itemHeight:E}=iF(s,n,r,v,i);w>0&&p+E+2*a>h&&(d+=f+a,c.push({width:f,height:p}),_+=f+a,y++,f=p=0),l[w]={left:_,top:p,col:y,width:M,height:E},f=Math.max(f,M),p+=E+a}),d+=f,c.push({width:f,height:p}),d}adjustHitBoxes(){if(!this.options.display)return;const t=this._computeTitleHeight(),{legendHitBoxes:n,options:{align:s,labels:{padding:i},rtl:r}}=this,o=Rr(r,this.left,this.width);if(this.isHorizontal()){let a=0,l=Re(s,this.left+i,this.right-this.lineWidths[a]);for(const c of n)a!==c.row&&(a=c.row,l=Re(s,this.left+i,this.right-this.lineWidths[a])),c.top+=this.top+t+i,c.left=o.leftForLtr(o.x(l),c.width),l+=c.width+i}else{let a=0,l=Re(s,this.top+t+i,this.bottom-this.columnSizes[a].height);for(const c of n)c.col!==a&&(a=c.col,l=Re(s,this.top+t+i,this.bottom-this.columnSizes[a].height)),c.top=l,c.left+=this.left+i,c.left=o.leftForLtr(o.x(c.left),c.width),l+=c.height+i}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const t=this.ctx;dp(t,this),this._draw(),fp(t)}}_draw(){const{options:t,columnSizes:n,lineWidths:s,ctx:i}=this,{align:r,labels:o}=t,a=ne.color,l=Rr(t.rtl,this.left,this.width),c=Ne(o.font),{padding:h}=o,d=c.size,f=d/2;let p;this.drawTitle(),i.textAlign=l.textAlign("left"),i.textBaseline="middle",i.lineWidth=.5,i.font=c.string;const{boxWidth:_,boxHeight:y,itemHeight:v}=Fy(o,d),w=function(V,A,b){if(isNaN(_)||_<=0||isNaN(y)||y<0)return;i.save();const T=kt(b.lineWidth,1);if(i.fillStyle=kt(b.fillStyle,a),i.lineCap=kt(b.lineCap,"butt"),i.lineDashOffset=kt(b.lineDashOffset,0),i.lineJoin=kt(b.lineJoin,"miter"),i.lineWidth=T,i.strokeStyle=kt(b.strokeStyle,a),i.setLineDash(kt(b.lineDash,[])),o.usePointStyle){const k={radius:y*Math.SQRT2/2,pointStyle:b.pointStyle,rotation:b.rotation,borderWidth:T},P=l.xPlus(V,_/2),R=A+f;LT(i,k,P,R,o.pointStyleWidth&&_)}else{const k=A+Math.max((d-y)/2,0),P=l.leftForLtr(V,_),R=ra(b.borderRadius);i.beginPath(),Object.values(R).some(C=>C!==0)?Rd(i,{x:P,y:k,w:_,h:y,radius:R}):i.rect(P,k,_,y),i.fill(),T!==0&&i.stroke()}i.restore()},M=function(V,A,b){Aa(i,b.text,V,A+v/2,c,{strikethrough:b.hidden,textAlign:l.textAlign(b.textAlign)})},E=this.isHorizontal(),x=this._computeTitleHeight();E?p={x:Re(r,this.left+h,this.right-s[0]),y:this.top+h+x,line:0}:p={x:this.left+h,y:Re(r,this.top+x+h,this.bottom-n[0].height),line:0},HT(this.ctx,t.textDirection);const O=v+h;this.legendItems.forEach((V,A)=>{i.strokeStyle=V.fontColor,i.fillStyle=V.fontColor;const b=i.measureText(V.text).width,T=l.textAlign(V.textAlign||(V.textAlign=o.textAlign)),k=_+f+b;let P=p.x,R=p.y;l.setWidth(this.width),E?A>0&&P+k+h>this.right&&(R=p.y+=O,p.line++,P=p.x=Re(r,this.left+h,this.right-s[p.line])):A>0&&R+O>this.bottom&&(P=p.x=P+n[p.line].width+h,p.line++,R=p.y=Re(r,this.top+x+h,this.bottom-n[p.line].height));const C=l.x(P);if(w(C,R,V),P=gN(T,P+_+f,E?P+k:this.right,t.rtl),M(l.x(P),R,V),E)p.x+=k+h;else if(typeof V.text!="string"){const rt=c.lineHeight;p.y+=rE(V,rt)+h}else p.y+=O}),jT(this.ctx,t.textDirection)}drawTitle(){const t=this.options,n=t.title,s=Ne(n.font),i=pn(n.padding);if(!n.display)return;const r=Rr(t.rtl,this.left,this.width),o=this.ctx,a=n.position,l=s.size/2,c=i.top+l;let h,d=this.left,f=this.width;if(this.isHorizontal())f=Math.max(...this.lineWidths),h=this.top+c,d=Re(t.align,d,this.right-f);else{const _=this.columnSizes.reduce((y,v)=>Math.max(y,v.height),0);h=c+Re(t.align,this.top,this.bottom-_-t.labels.padding-this._computeTitleHeight())}const p=Re(a,d,d+f);o.textAlign=r.textAlign(up(a)),o.textBaseline="middle",o.strokeStyle=n.color,o.fillStyle=n.color,o.font=s.string,Aa(o,n.text,p,h,s)}_computeTitleHeight(){const t=this.options.title,n=Ne(t.font),s=pn(t.padding);return t.display?n.lineHeight+s.height:0}_getLegendItemAt(t,n){let s,i,r;if(Fo(t,this.left,this.right)&&Fo(n,this.top,this.bottom)){for(r=this.legendHitBoxes,s=0;s<r.length;++s)if(i=r[s],Fo(t,i.left,i.left+i.width)&&Fo(n,i.top,i.top+i.height))return this.legendItems[s]}return null}handleEvent(t){const n=this.options;if(!aF(t.type,n))return;const s=this._getLegendItemAt(t.x,t.y);if(t.type==="mousemove"||t.type==="mouseout"){const i=this._hoveredItem,r=sF(i,s);i&&!r&&qt(n.onLeave,[t,i,this],this),this._hoveredItem=s,s&&!r&&qt(n.onHover,[t,s,this],this)}else s&&qt(n.onClick,[t,s,this],this)}}function iF(e,t,n,s,i){const r=rF(s,e,t,n),o=oF(i,s,t.lineHeight);return{itemWidth:r,itemHeight:o}}function rF(e,t,n,s){let i=e.text;return i&&typeof i!="string"&&(i=i.reduce((r,o)=>r.length>o.length?r:o)),t+n.size/2+s.measureText(i).width}function oF(e,t,n){let s=e;return typeof t.text!="string"&&(s=rE(t,n)),s}function rE(e,t){const n=e.text?e.text.length:0;return t*n}function aF(e,t){return!!((e==="mousemove"||e==="mouseout")&&(t.onHover||t.onLeave)||t.onClick&&(e==="click"||e==="mouseup"))}var lF={id:"legend",_element:Uy,start(e,t,n){const s=e.legend=new Uy({ctx:e.ctx,options:n,chart:e});hn.configure(e,s,n),hn.addBox(e,s)},stop(e){hn.removeBox(e,e.legend),delete e.legend},beforeUpdate(e,t,n){const s=e.legend;hn.configure(e,s,n),s.options=n},afterUpdate(e){const t=e.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(e,t){t.replay||e.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(e,t,n){const s=t.datasetIndex,i=n.chart;i.isDatasetVisible(s)?(i.hide(s),t.hidden=!0):(i.show(s),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:e=>e.chart.options.color,boxWidth:40,padding:10,generateLabels(e){const t=e.data.datasets,{labels:{usePointStyle:n,pointStyle:s,textAlign:i,color:r,useBorderRadius:o,borderRadius:a}}=e.legend.options;return e._getSortedDatasetMetas().map(l=>{const c=l.controller.getStyle(n?0:void 0),h=pn(c.borderWidth);return{text:t[l.index].label,fillStyle:c.backgroundColor,fontColor:r,hidden:!l.visible,lineCap:c.borderCapStyle,lineDash:c.borderDash,lineDashOffset:c.borderDashOffset,lineJoin:c.borderJoinStyle,lineWidth:(h.width+h.height)/4,strokeStyle:c.borderColor,pointStyle:s||c.pointStyle,rotation:c.rotation,textAlign:i||c.textAlign,borderRadius:o&&(a||c.borderRadius),datasetIndex:l.index}},this)}},title:{color:e=>e.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:e=>!e.startsWith("on"),labels:{_scriptable:e=>!["generateLabels","filter","sort"].includes(e)}}};class oE extends Ji{constructor(t){super(),this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,n){const s=this.options;if(this.left=0,this.top=0,!s.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=t,this.height=this.bottom=n;const i=ye(s.text)?s.text.length:1;this._padding=pn(s.padding);const r=i*Ne(s.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=r:this.width=r}isHorizontal(){const t=this.options.position;return t==="top"||t==="bottom"}_drawArgs(t){const{top:n,left:s,bottom:i,right:r,options:o}=this,a=o.align;let l=0,c,h,d;return this.isHorizontal()?(h=Re(a,s,r),d=n+t,c=r-s):(o.position==="left"?(h=s+t,d=Re(a,i,n),l=ve*-.5):(h=r-t,d=Re(a,n,i),l=ve*.5),c=i-n),{titleX:h,titleY:d,maxWidth:c,rotation:l}}draw(){const t=this.ctx,n=this.options;if(!n.display)return;const s=Ne(n.font),r=s.lineHeight/2+this._padding.top,{titleX:o,titleY:a,maxWidth:l,rotation:c}=this._drawArgs(r);Aa(t,n.text,0,0,s,{color:n.color,maxWidth:l,rotation:c,textAlign:up(n.align),textBaseline:"middle",translation:[o,a]})}}function cF(e,t){const n=new oE({ctx:e.ctx,options:t,chart:e});hn.configure(e,n,t),hn.addBox(e,n),e.titleBlock=n}var uF={id:"title",_element:oE,start(e,t,n){cF(e,n)},stop(e){const t=e.titleBlock;hn.removeBox(e,t),delete e.titleBlock},beforeUpdate(e,t,n){const s=e.titleBlock;hn.configure(e,s,n),s.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const $o={average(e){if(!e.length)return!1;let t,n,s=new Set,i=0,r=0;for(t=0,n=e.length;t<n;++t){const a=e[t].element;if(a&&a.hasValue()){const l=a.tooltipPosition();s.add(l.x),i+=l.y,++r}}return r===0||s.size===0?!1:{x:[...s].reduce((a,l)=>a+l)/s.size,y:i/r}},nearest(e,t){if(!e.length)return!1;let n=t.x,s=t.y,i=Number.POSITIVE_INFINITY,r,o,a;for(r=0,o=e.length;r<o;++r){const l=e[r].element;if(l&&l.hasValue()){const c=l.getCenterPoint(),h=kd(t,c);h<i&&(i=h,a=l)}}if(a){const l=a.tooltipPosition();n=l.x,s=l.y}return{x:n,y:s}}};function Pn(e,t){return t&&(ye(t)?Array.prototype.push.apply(e,t):e.push(t)),e}function Zn(e){return(typeof e=="string"||e instanceof String)&&e.indexOf(`
`)>-1?e.split(`
`):e}function hF(e,t){const{element:n,datasetIndex:s,index:i}=t,r=e.getDatasetMeta(s).controller,{label:o,value:a}=r.getLabelAndValue(i);return{chart:e,label:o,parsed:r.getParsed(i),raw:e.data.datasets[s].data[i],formattedValue:a,dataset:r.getDataset(),dataIndex:i,datasetIndex:s,element:n}}function $y(e,t){const n=e.chart.ctx,{body:s,footer:i,title:r}=e,{boxWidth:o,boxHeight:a}=t,l=Ne(t.bodyFont),c=Ne(t.titleFont),h=Ne(t.footerFont),d=r.length,f=i.length,p=s.length,_=pn(t.padding);let y=_.height,v=0,w=s.reduce((x,O)=>x+O.before.length+O.lines.length+O.after.length,0);if(w+=e.beforeBody.length+e.afterBody.length,d&&(y+=d*c.lineHeight+(d-1)*t.titleSpacing+t.titleMarginBottom),w){const x=t.displayColors?Math.max(a,l.lineHeight):l.lineHeight;y+=p*x+(w-p)*l.lineHeight+(w-1)*t.bodySpacing}f&&(y+=t.footerMarginTop+f*h.lineHeight+(f-1)*t.footerSpacing);let M=0;const E=function(x){v=Math.max(v,n.measureText(x).width+M)};return n.save(),n.font=c.string,Lt(e.title,E),n.font=l.string,Lt(e.beforeBody.concat(e.afterBody),E),M=t.displayColors?o+2+t.boxPadding:0,Lt(s,x=>{Lt(x.before,E),Lt(x.lines,E),Lt(x.after,E)}),M=0,n.font=h.string,Lt(e.footer,E),n.restore(),v+=_.width,{width:v,height:y}}function dF(e,t){const{y:n,height:s}=t;return n<s/2?"top":n>e.height-s/2?"bottom":"center"}function fF(e,t,n,s){const{x:i,width:r}=s,o=n.caretSize+n.caretPadding;if(e==="left"&&i+r+o>t.width||e==="right"&&i-r-o<0)return!0}function pF(e,t,n,s){const{x:i,width:r}=n,{width:o,chartArea:{left:a,right:l}}=e;let c="center";return s==="center"?c=i<=(a+l)/2?"left":"right":i<=r/2?c="left":i>=o-r/2&&(c="right"),fF(c,e,t,n)&&(c="center"),c}function By(e,t,n){const s=n.yAlign||t.yAlign||dF(e,n);return{xAlign:n.xAlign||t.xAlign||pF(e,t,n,s),yAlign:s}}function gF(e,t){let{x:n,width:s}=e;return t==="right"?n-=s:t==="center"&&(n-=s/2),n}function mF(e,t,n){let{y:s,height:i}=e;return t==="top"?s+=n:t==="bottom"?s-=i+n:s-=i/2,s}function Hy(e,t,n,s){const{caretSize:i,caretPadding:r,cornerRadius:o}=e,{xAlign:a,yAlign:l}=n,c=i+r,{topLeft:h,topRight:d,bottomLeft:f,bottomRight:p}=ra(o);let _=gF(t,a);const y=mF(t,l,c);return l==="center"?a==="left"?_+=c:a==="right"&&(_-=c):a==="left"?_-=Math.max(h,f)+i:a==="right"&&(_+=Math.max(d,p)+i),{x:un(_,0,s.width-t.width),y:un(y,0,s.height-t.height)}}function Ml(e,t,n){const s=pn(n.padding);return t==="center"?e.x+e.width/2:t==="right"?e.x+e.width-s.right:e.x+s.left}function jy(e){return Pn([],Zn(e))}function _F(e,t,n){return Xi(e,{tooltip:t,tooltipItems:n,type:"tooltip"})}function zy(e,t){const n=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return n?e.override(n):e}const aE={beforeTitle:Xn,title(e){if(e.length>0){const t=e[0],n=t.chart.data.labels,s=n?n.length:0;if(this&&this.options&&this.options.mode==="dataset")return t.dataset.label||"";if(t.label)return t.label;if(s>0&&t.dataIndex<s)return n[t.dataIndex]}return""},afterTitle:Xn,beforeBody:Xn,beforeLabel:Xn,label(e){if(this&&this.options&&this.options.mode==="dataset")return e.label+": "+e.formattedValue||e.formattedValue;let t=e.dataset.label||"";t&&(t+=": ");const n=e.formattedValue;return zt(n)||(t+=n),t},labelColor(e){const n=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{borderColor:n.borderColor,backgroundColor:n.backgroundColor,borderWidth:n.borderWidth,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(e){const n=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{pointStyle:n.pointStyle,rotation:n.rotation}},afterLabel:Xn,afterBody:Xn,beforeFooter:Xn,footer:Xn,afterFooter:Xn};function ze(e,t,n,s){const i=e[t].call(n,s);return typeof i>"u"?aE[t].call(n,s):i}class Wy extends Ji{static positioners=$o;constructor(t){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=t.chart,this.options=t.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(t){this.options=t,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const t=this._cachedAnimations;if(t)return t;const n=this.chart,s=this.options.setContext(this.getContext()),i=s.enabled&&n.options.animation&&s.animations,r=new WT(this.chart,i);return i._cacheable&&(this._cachedAnimations=Object.freeze(r)),r}getContext(){return this.$context||(this.$context=_F(this.chart.getContext(),this,this._tooltipItems))}getTitle(t,n){const{callbacks:s}=n,i=ze(s,"beforeTitle",this,t),r=ze(s,"title",this,t),o=ze(s,"afterTitle",this,t);let a=[];return a=Pn(a,Zn(i)),a=Pn(a,Zn(r)),a=Pn(a,Zn(o)),a}getBeforeBody(t,n){return jy(ze(n.callbacks,"beforeBody",this,t))}getBody(t,n){const{callbacks:s}=n,i=[];return Lt(t,r=>{const o={before:[],lines:[],after:[]},a=zy(s,r);Pn(o.before,Zn(ze(a,"beforeLabel",this,r))),Pn(o.lines,ze(a,"label",this,r)),Pn(o.after,Zn(ze(a,"afterLabel",this,r))),i.push(o)}),i}getAfterBody(t,n){return jy(ze(n.callbacks,"afterBody",this,t))}getFooter(t,n){const{callbacks:s}=n,i=ze(s,"beforeFooter",this,t),r=ze(s,"footer",this,t),o=ze(s,"afterFooter",this,t);let a=[];return a=Pn(a,Zn(i)),a=Pn(a,Zn(r)),a=Pn(a,Zn(o)),a}_createItems(t){const n=this._active,s=this.chart.data,i=[],r=[],o=[];let a=[],l,c;for(l=0,c=n.length;l<c;++l)a.push(hF(this.chart,n[l]));return t.filter&&(a=a.filter((h,d,f)=>t.filter(h,d,f,s))),t.itemSort&&(a=a.sort((h,d)=>t.itemSort(h,d,s))),Lt(a,h=>{const d=zy(t.callbacks,h);i.push(ze(d,"labelColor",this,h)),r.push(ze(d,"labelPointStyle",this,h)),o.push(ze(d,"labelTextColor",this,h))}),this.labelColors=i,this.labelPointStyles=r,this.labelTextColors=o,this.dataPoints=a,a}update(t,n){const s=this.options.setContext(this.getContext()),i=this._active;let r,o=[];if(!i.length)this.opacity!==0&&(r={opacity:0});else{const a=$o[s.position].call(this,i,this._eventPosition);o=this._createItems(s),this.title=this.getTitle(o,s),this.beforeBody=this.getBeforeBody(o,s),this.body=this.getBody(o,s),this.afterBody=this.getAfterBody(o,s),this.footer=this.getFooter(o,s);const l=this._size=$y(this,s),c=Object.assign({},a,l),h=By(this.chart,s,c),d=Hy(s,c,h,this.chart);this.xAlign=h.xAlign,this.yAlign=h.yAlign,r={opacity:1,x:d.x,y:d.y,width:l.width,height:l.height,caretX:a.x,caretY:a.y}}this._tooltipItems=o,this.$context=void 0,r&&this._resolveAnimations().update(this,r),t&&s.external&&s.external.call(this,{chart:this.chart,tooltip:this,replay:n})}drawCaret(t,n,s,i){const r=this.getCaretPosition(t,s,i);n.lineTo(r.x1,r.y1),n.lineTo(r.x2,r.y2),n.lineTo(r.x3,r.y3)}getCaretPosition(t,n,s){const{xAlign:i,yAlign:r}=this,{caretSize:o,cornerRadius:a}=s,{topLeft:l,topRight:c,bottomLeft:h,bottomRight:d}=ra(a),{x:f,y:p}=t,{width:_,height:y}=n;let v,w,M,E,x,O;return r==="center"?(x=p+y/2,i==="left"?(v=f,w=v-o,E=x+o,O=x-o):(v=f+_,w=v+o,E=x-o,O=x+o),M=v):(i==="left"?w=f+Math.max(l,h)+o:i==="right"?w=f+_-Math.max(c,d)-o:w=this.caretX,r==="top"?(E=p,x=E-o,v=w-o,M=w+o):(E=p+y,x=E+o,v=w+o,M=w-o),O=E),{x1:v,x2:w,x3:M,y1:E,y2:x,y3:O}}drawTitle(t,n,s){const i=this.title,r=i.length;let o,a,l;if(r){const c=Rr(s.rtl,this.x,this.width);for(t.x=Ml(this,s.titleAlign,s),n.textAlign=c.textAlign(s.titleAlign),n.textBaseline="middle",o=Ne(s.titleFont),a=s.titleSpacing,n.fillStyle=s.titleColor,n.font=o.string,l=0;l<r;++l)n.fillText(i[l],c.x(t.x),t.y+o.lineHeight/2),t.y+=o.lineHeight+a,l+1===r&&(t.y+=s.titleMarginBottom-a)}}_drawColorBox(t,n,s,i,r){const o=this.labelColors[s],a=this.labelPointStyles[s],{boxHeight:l,boxWidth:c}=r,h=Ne(r.bodyFont),d=Ml(this,"left",r),f=i.x(d),p=l<h.lineHeight?(h.lineHeight-l)/2:0,_=n.y+p;if(r.usePointStyle){const y={radius:Math.min(c,l)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},v=i.leftForLtr(f,c)+c/2,w=_+l/2;t.strokeStyle=r.multiKeyBackground,t.fillStyle=r.multiKeyBackground,xd(t,y,v,w),t.strokeStyle=o.borderColor,t.fillStyle=o.backgroundColor,xd(t,y,v,w)}else{t.lineWidth=Pt(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,t.strokeStyle=o.borderColor,t.setLineDash(o.borderDash||[]),t.lineDashOffset=o.borderDashOffset||0;const y=i.leftForLtr(f,c),v=i.leftForLtr(i.xPlus(f,1),c-2),w=ra(o.borderRadius);Object.values(w).some(M=>M!==0)?(t.beginPath(),t.fillStyle=r.multiKeyBackground,Rd(t,{x:y,y:_,w:c,h:l,radius:w}),t.fill(),t.stroke(),t.fillStyle=o.backgroundColor,t.beginPath(),Rd(t,{x:v,y:_+1,w:c-2,h:l-2,radius:w}),t.fill()):(t.fillStyle=r.multiKeyBackground,t.fillRect(y,_,c,l),t.strokeRect(y,_,c,l),t.fillStyle=o.backgroundColor,t.fillRect(v,_+1,c-2,l-2))}t.fillStyle=this.labelTextColors[s]}drawBody(t,n,s){const{body:i}=this,{bodySpacing:r,bodyAlign:o,displayColors:a,boxHeight:l,boxWidth:c,boxPadding:h}=s,d=Ne(s.bodyFont);let f=d.lineHeight,p=0;const _=Rr(s.rtl,this.x,this.width),y=function(b){n.fillText(b,_.x(t.x+p),t.y+f/2),t.y+=f+r},v=_.textAlign(o);let w,M,E,x,O,V,A;for(n.textAlign=o,n.textBaseline="middle",n.font=d.string,t.x=Ml(this,v,s),n.fillStyle=s.bodyColor,Lt(this.beforeBody,y),p=a&&v!=="right"?o==="center"?c/2+h:c+2+h:0,x=0,V=i.length;x<V;++x){for(w=i[x],M=this.labelTextColors[x],n.fillStyle=M,Lt(w.before,y),E=w.lines,a&&E.length&&(this._drawColorBox(n,t,x,_,s),f=Math.max(d.lineHeight,l)),O=0,A=E.length;O<A;++O)y(E[O]),f=d.lineHeight;Lt(w.after,y)}p=0,f=d.lineHeight,Lt(this.afterBody,y),t.y-=r}drawFooter(t,n,s){const i=this.footer,r=i.length;let o,a;if(r){const l=Rr(s.rtl,this.x,this.width);for(t.x=Ml(this,s.footerAlign,s),t.y+=s.footerMarginTop,n.textAlign=l.textAlign(s.footerAlign),n.textBaseline="middle",o=Ne(s.footerFont),n.fillStyle=s.footerColor,n.font=o.string,a=0;a<r;++a)n.fillText(i[a],l.x(t.x),t.y+o.lineHeight/2),t.y+=o.lineHeight+s.footerSpacing}}drawBackground(t,n,s,i){const{xAlign:r,yAlign:o}=this,{x:a,y:l}=t,{width:c,height:h}=s,{topLeft:d,topRight:f,bottomLeft:p,bottomRight:_}=ra(i.cornerRadius);n.fillStyle=i.backgroundColor,n.strokeStyle=i.borderColor,n.lineWidth=i.borderWidth,n.beginPath(),n.moveTo(a+d,l),o==="top"&&this.drawCaret(t,n,s,i),n.lineTo(a+c-f,l),n.quadraticCurveTo(a+c,l,a+c,l+f),o==="center"&&r==="right"&&this.drawCaret(t,n,s,i),n.lineTo(a+c,l+h-_),n.quadraticCurveTo(a+c,l+h,a+c-_,l+h),o==="bottom"&&this.drawCaret(t,n,s,i),n.lineTo(a+p,l+h),n.quadraticCurveTo(a,l+h,a,l+h-p),o==="center"&&r==="left"&&this.drawCaret(t,n,s,i),n.lineTo(a,l+d),n.quadraticCurveTo(a,l,a+d,l),n.closePath(),n.fill(),i.borderWidth>0&&n.stroke()}_updateAnimationTarget(t){const n=this.chart,s=this.$animations,i=s&&s.x,r=s&&s.y;if(i||r){const o=$o[t.position].call(this,this._active,this._eventPosition);if(!o)return;const a=this._size=$y(this,t),l=Object.assign({},o,this._size),c=By(n,t,l),h=Hy(t,l,c,n);(i._to!==h.x||r._to!==h.y)&&(this.xAlign=c.xAlign,this.yAlign=c.yAlign,this.width=a.width,this.height=a.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,h))}}_willRender(){return!!this.opacity}draw(t){const n=this.options.setContext(this.getContext());let s=this.opacity;if(!s)return;this._updateAnimationTarget(n);const i={width:this.width,height:this.height},r={x:this.x,y:this.y};s=Math.abs(s)<.001?0:s;const o=pn(n.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;n.enabled&&a&&(t.save(),t.globalAlpha=s,this.drawBackground(r,t,i,n),HT(t,n.textDirection),r.y+=o.top,this.drawTitle(r,t,n),this.drawBody(r,t,n),this.drawFooter(r,t,n),jT(t,n.textDirection),t.restore())}getActiveElements(){return this._active||[]}setActiveElements(t,n){const s=this._active,i=t.map(({datasetIndex:a,index:l})=>{const c=this.chart.getDatasetMeta(a);if(!c)throw new Error("Cannot find a dataset at index "+a);return{datasetIndex:a,element:c.data[l],index:l}}),r=!Dc(s,i),o=this._positionChanged(i,n);(r||o)&&(this._active=i,this._eventPosition=n,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(t,n,s=!0){if(n&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const i=this.options,r=this._active||[],o=this._getActiveElements(t,r,n,s),a=this._positionChanged(o,t),l=n||!Dc(o,r)||a;return l&&(this._active=o,(i.enabled||i.external)&&(this._eventPosition={x:t.x,y:t.y},this.update(!0,n))),l}_getActiveElements(t,n,s,i){const r=this.options;if(t.type==="mouseout")return[];if(!i)return n.filter(a=>this.chart.data.datasets[a.datasetIndex]&&this.chart.getDatasetMeta(a.datasetIndex).controller.getParsed(a.index)!==void 0);const o=this.chart.getElementsAtEventForMode(t,r.mode,r,s);return r.reverse&&o.reverse(),o}_positionChanged(t,n){const{caretX:s,caretY:i,options:r}=this,o=$o[r.position].call(this,t,n);return o!==!1&&(s!==o.x||i!==o.y)}}var yF={id:"tooltip",_element:Wy,positioners:$o,afterInit(e,t,n){n&&(e.tooltip=new Wy({chart:e,options:n}))},beforeUpdate(e,t,n){e.tooltip&&e.tooltip.initialize(n)},reset(e,t,n){e.tooltip&&e.tooltip.initialize(n)},afterDraw(e){const t=e.tooltip;if(t&&t._willRender()){const n={tooltip:t};if(e.notifyPlugins("beforeTooltipDraw",{...n,cancelable:!0})===!1)return;t.draw(e.ctx),e.notifyPlugins("afterTooltipDraw",n)}},afterEvent(e,t){if(e.tooltip){const n=t.replay;e.tooltip.handleEvent(t.event,n,t.inChartArea)&&(t.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(e,t)=>t.bodyFont.size,boxWidth:(e,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:aE},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:e=>e!=="filter"&&e!=="itemSort"&&e!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const vF=(e,t,n,s)=>(typeof t=="string"?(n=e.push(t)-1,s.unshift({index:n,label:t})):isNaN(t)&&(n=null),n);function bF(e,t,n,s){const i=e.indexOf(t);if(i===-1)return vF(e,t,n,s);const r=e.lastIndexOf(t);return i!==r?n:i}const wF=(e,t)=>e===null?null:un(Math.round(e),0,t);function qy(e){const t=this.getLabels();return e>=0&&e<t.length?t[e]:e}class TF extends io{static id="category";static defaults={ticks:{callback:qy}};constructor(t){super(t),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(t){const n=this._addedLabels;if(n.length){const s=this.getLabels();for(const{index:i,label:r}of n)s[i]===r&&s.splice(i,1);this._addedLabels=[]}super.init(t)}parse(t,n){if(zt(t))return null;const s=this.getLabels();return n=isFinite(n)&&s[n]===t?n:bF(s,t,kt(n,t),this._addedLabels),wF(n,s.length-1)}determineDataLimits(){const{minDefined:t,maxDefined:n}=this.getUserBounds();let{min:s,max:i}=this.getMinMax(!0);this.options.bounds==="ticks"&&(t||(s=0),n||(i=this.getLabels().length-1)),this.min=s,this.max=i}buildTicks(){const t=this.min,n=this.max,s=this.options.offset,i=[];let r=this.getLabels();r=t===0&&n===r.length-1?r:r.slice(t,n+1),this._valueRange=Math.max(r.length-(s?0:1),1),this._startValue=this.min-(s?.5:0);for(let o=t;o<=n;o++)i.push({value:o});return i}getLabelForValue(t){return qy.call(this,t)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(t){return typeof t!="number"&&(t=this.parse(t)),t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getPixelForTick(t){const n=this.ticks;return t<0||t>n.length-1?null:this.getPixelForValue(n[t].value)}getValueForPixel(t){return Math.round(this._startValue+this.getDecimalForPixel(t)*this._valueRange)}getBasePixel(){return this.bottom}}function EF(e,t){const n=[],{bounds:i,step:r,min:o,max:a,precision:l,count:c,maxTicks:h,maxDigits:d,includeBounds:f}=e,p=r||1,_=h-1,{min:y,max:v}=t,w=!zt(o),M=!zt(a),E=!zt(c),x=(v-y)/(d+1);let O=Y_((v-y)/_/p)*p,V,A,b,T;if(O<1e-14&&!w&&!M)return[{value:y},{value:v}];T=Math.ceil(v/O)-Math.floor(y/O),T>_&&(O=Y_(T*O/_/p)*p),zt(l)||(V=Math.pow(10,l),O=Math.ceil(O*V)/V),i==="ticks"?(A=Math.floor(y/O)*O,b=Math.ceil(v/O)*O):(A=y,b=v),w&&M&&r&&iN((a-o)/r,O/1e3)?(T=Math.round(Math.min((a-o)/O,h)),O=(a-o)/T,A=o,b=a):E?(A=w?o:A,b=M?a:b,T=c-1,O=(b-A)/T):(T=(b-A)/O,na(T,Math.round(T),O/1e3)?T=Math.round(T):T=Math.ceil(T));const k=Math.max(X_(O),X_(A));V=Math.pow(10,zt(l)?k:l),A=Math.round(A*V)/V,b=Math.round(b*V)/V;let P=0;for(w&&(f&&A!==o?(n.push({value:o}),A<o&&P++,na(Math.round((A+P*O)*V)/V,o,Gy(o,x,e))&&P++):A<o&&P++);P<T;++P){const R=Math.round((A+P*O)*V)/V;if(M&&R>a)break;n.push({value:R})}return M&&f&&b!==a?n.length&&na(n[n.length-1].value,a,Gy(a,x,e))?n[n.length-1].value=a:n.push({value:a}):(!M||b===a)&&n.push({value:b}),n}function Gy(e,t,{horizontal:n,minRotation:s}){const i=xi(s),r=(n?Math.sin(i):Math.cos(i))||.001,o=.75*t*(""+e).length;return Math.min(t/r,o)}class IF extends io{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(t,n){return zt(t)||(typeof t=="number"||t instanceof Number)&&!isFinite(+t)?null:+t}handleTickRangeOptions(){const{beginAtZero:t}=this.options,{minDefined:n,maxDefined:s}=this.getUserBounds();let{min:i,max:r}=this;const o=l=>i=n?i:l,a=l=>r=s?r:l;if(t){const l=zr(i),c=zr(r);l<0&&c<0?a(0):l>0&&c>0&&o(0)}if(i===r){let l=r===0?1:Math.abs(r*.05);a(r+l),t||o(i-l)}this.min=i,this.max=r}getTickLimit(){const t=this.options.ticks;let{maxTicksLimit:n,stepSize:s}=t,i;return s?(i=Math.ceil(this.max/s)-Math.floor(this.min/s)+1,i>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${s} would result generating up to ${i} ticks. Limiting to 1000.`),i=1e3)):(i=this.computeTickLimit(),n=n||11),n&&(i=Math.min(n,i)),i}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const t=this.options,n=t.ticks;let s=this.getTickLimit();s=Math.max(2,s);const i={maxTicks:s,bounds:t.bounds,min:t.min,max:t.max,precision:n.precision,step:n.stepSize,count:n.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:n.minRotation||0,includeBounds:n.includeBounds!==!1},r=this._range||this,o=EF(i,r);return t.bounds==="ticks"&&rN(o,this,"value"),t.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const t=this.ticks;let n=this.min,s=this.max;if(super.configure(),this.options.offset&&t.length){const i=(s-n)/Math.max(t.length-1,1)/2;n-=i,s+=i}this._startValue=n,this._endValue=s,this._valueRange=s-n}getLabelForValue(t){return DT(t,this.chart.options.locale,this.options.ticks.format)}}class SF extends IF{static id="linear";static defaults={ticks:{callback:OT.formatters.numeric}};determineDataLimits(){const{min:t,max:n}=this.getMinMax(!0);this.min=fn(t)?t:0,this.max=fn(n)?n:1,this.handleTickRangeOptions()}computeTickLimit(){const t=this.isHorizontal(),n=t?this.width:this.height,s=xi(this.options.ticks.minRotation),i=(t?Math.sin(s):Math.cos(s))||.001,r=this._resolveTickFontOptions(0);return Math.ceil(n/Math.min(40,r.lineHeight/i))}getPixelForValue(t){return t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getValueForPixel(t){return this._startValue+this.getDecimalForPixel(t)*this._valueRange}}const xu={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Ke=Object.keys(xu);function Ky(e,t){return e-t}function Qy(e,t){if(zt(t))return null;const n=e._adapter,{parser:s,round:i,isoWeekday:r}=e._parseOpts;let o=t;return typeof s=="function"&&(o=s(o)),fn(o)||(o=typeof s=="string"?n.parse(o,s):n.parse(o)),o===null?null:(i&&(o=i==="week"&&(Ia(r)||r===!0)?n.startOf(o,"isoWeek",r):n.startOf(o,i)),+o)}function Yy(e,t,n,s){const i=Ke.length;for(let r=Ke.indexOf(e);r<i-1;++r){const o=xu[Ke[r]],a=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((n-t)/(a*o.size))<=s)return Ke[r]}return Ke[i-1]}function AF(e,t,n,s,i){for(let r=Ke.length-1;r>=Ke.indexOf(n);r--){const o=Ke[r];if(xu[o].common&&e._adapter.diff(i,s,o)>=t-1)return o}return Ke[n?Ke.indexOf(n):0]}function kF(e){for(let t=Ke.indexOf(e)+1,n=Ke.length;t<n;++t)if(xu[Ke[t]].common)return Ke[t]}function Xy(e,t,n){if(!n)e[t]=!0;else if(n.length){const{lo:s,hi:i}=cp(n,t),r=n[s]>=t?n[s]:n[i];e[r]=!0}}function CF(e,t,n,s){const i=e._adapter,r=+i.startOf(t[0].value,s),o=t[t.length-1].value;let a,l;for(a=r;a<=o;a=+i.add(a,1,s))l=n[a],l>=0&&(t[l].major=!0);return t}function Jy(e,t,n){const s=[],i={},r=t.length;let o,a;for(o=0;o<r;++o)a=t[o],i[a]=o,s.push({value:a,major:!1});return r===0||!n?s:CF(e,s,i,n)}class Zy extends io{static id="time";static defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}};constructor(t){super(t),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(t,n={}){const s=t.time||(t.time={}),i=this._adapter=new VV._date(t.adapters.date);i.init(n),ea(s.displayFormats,i.formats()),this._parseOpts={parser:s.parser,round:s.round,isoWeekday:s.isoWeekday},super.init(t),this._normalized=n.normalized}parse(t,n){return t===void 0?null:Qy(this,t)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const t=this.options,n=this._adapter,s=t.time.unit||"day";let{min:i,max:r,minDefined:o,maxDefined:a}=this.getUserBounds();function l(c){!o&&!isNaN(c.min)&&(i=Math.min(i,c.min)),!a&&!isNaN(c.max)&&(r=Math.max(r,c.max))}(!o||!a)&&(l(this._getLabelBounds()),(t.bounds!=="ticks"||t.ticks.source!=="labels")&&l(this.getMinMax(!1))),i=fn(i)&&!isNaN(i)?i:+n.startOf(Date.now(),s),r=fn(r)&&!isNaN(r)?r:+n.endOf(Date.now(),s)+1,this.min=Math.min(i,r-1),this.max=Math.max(i+1,r)}_getLabelBounds(){const t=this.getLabelTimestamps();let n=Number.POSITIVE_INFINITY,s=Number.NEGATIVE_INFINITY;return t.length&&(n=t[0],s=t[t.length-1]),{min:n,max:s}}buildTicks(){const t=this.options,n=t.time,s=t.ticks,i=s.source==="labels"?this.getLabelTimestamps():this._generate();t.bounds==="ticks"&&i.length&&(this.min=this._userMin||i[0],this.max=this._userMax||i[i.length-1]);const r=this.min,o=this.max,a=hN(i,r,o);return this._unit=n.unit||(s.autoSkip?Yy(n.minUnit,this.min,this.max,this._getLabelCapacity(r)):AF(this,a.length,n.minUnit,this.min,this.max)),this._majorUnit=!s.major.enabled||this._unit==="year"?void 0:kF(this._unit),this.initOffsets(i),t.reverse&&a.reverse(),Jy(this,a,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(t=>+t.value))}initOffsets(t=[]){let n=0,s=0,i,r;this.options.offset&&t.length&&(i=this.getDecimalForValue(t[0]),t.length===1?n=1-i:n=(this.getDecimalForValue(t[1])-i)/2,r=this.getDecimalForValue(t[t.length-1]),t.length===1?s=r:s=(r-this.getDecimalForValue(t[t.length-2]))/2);const o=t.length<3?.5:.25;n=un(n,0,o),s=un(s,0,o),this._offsets={start:n,end:s,factor:1/(n+1+s)}}_generate(){const t=this._adapter,n=this.min,s=this.max,i=this.options,r=i.time,o=r.unit||Yy(r.minUnit,n,s,this._getLabelCapacity(n)),a=kt(i.ticks.stepSize,1),l=o==="week"?r.isoWeekday:!1,c=Ia(l)||l===!0,h={};let d=n,f,p;if(c&&(d=+t.startOf(d,"isoWeek",l)),d=+t.startOf(d,c?"day":o),t.diff(s,n,o)>1e5*a)throw new Error(n+" and "+s+" are too far apart with stepSize of "+a+" "+o);const _=i.ticks.source==="data"&&this.getDataTimestamps();for(f=d,p=0;f<s;f=+t.add(f,a,o),p++)Xy(h,f,_);return(f===s||i.bounds==="ticks"||p===1)&&Xy(h,f,_),Object.keys(h).sort(Ky).map(y=>+y)}getLabelForValue(t){const n=this._adapter,s=this.options.time;return s.tooltipFormat?n.format(t,s.tooltipFormat):n.format(t,s.displayFormats.datetime)}format(t,n){const i=this.options.time.displayFormats,r=this._unit,o=n||i[r];return this._adapter.format(t,o)}_tickFormatFunction(t,n,s,i){const r=this.options,o=r.ticks.callback;if(o)return qt(o,[t,n,s],this);const a=r.time.displayFormats,l=this._unit,c=this._majorUnit,h=l&&a[l],d=c&&a[c],f=s[n],p=c&&d&&f&&f.major;return this._adapter.format(t,i||(p?d:h))}generateTickLabels(t){let n,s,i;for(n=0,s=t.length;n<s;++n)i=t[n],i.label=this._tickFormatFunction(i.value,n,t)}getDecimalForValue(t){return t===null?NaN:(t-this.min)/(this.max-this.min)}getPixelForValue(t){const n=this._offsets,s=this.getDecimalForValue(t);return this.getPixelForDecimal((n.start+s)*n.factor)}getValueForPixel(t){const n=this._offsets,s=this.getDecimalForPixel(t)/n.factor-n.end;return this.min+s*(this.max-this.min)}_getLabelSize(t){const n=this.options.ticks,s=this.ctx.measureText(t).width,i=xi(this.isHorizontal()?n.maxRotation:n.minRotation),r=Math.cos(i),o=Math.sin(i),a=this._resolveTickFontOptions(0).size;return{w:s*r+a*o,h:s*o+a*r}}_getLabelCapacity(t){const n=this.options.time,s=n.displayFormats,i=s[n.unit]||s.millisecond,r=this._tickFormatFunction(t,0,Jy(this,[t],this._majorUnit),i),o=this._getLabelSize(r),a=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return a>0?a:1}getDataTimestamps(){let t=this._cache.data||[],n,s;if(t.length)return t;const i=this.getMatchingVisibleMetas();if(this._normalized&&i.length)return this._cache.data=i[0].controller.getAllParsedValues(this);for(n=0,s=i.length;n<s;++n)t=t.concat(i[n].controller.getAllParsedValues(this));return this._cache.data=this.normalize(t)}getLabelTimestamps(){const t=this._cache.labels||[];let n,s;if(t.length)return t;const i=this.getLabels();for(n=0,s=i.length;n<s;++n)t.push(Qy(this,i[n]));return this._cache.labels=this._normalized?t:this.normalize(t)}normalize(t){return fN(t.sort(Ky))}}function Dl(e,t,n){let s=0,i=e.length-1,r,o,a,l;n?(t>=e[s].pos&&t<=e[i].pos&&({lo:s,hi:i}=Ri(e,"pos",t)),{pos:r,time:a}=e[s],{pos:o,time:l}=e[i]):(t>=e[s].time&&t<=e[i].time&&({lo:s,hi:i}=Ri(e,"time",t)),{time:r,pos:a}=e[s],{time:o,pos:l}=e[i]);const c=o-r;return c?a+(l-a)*(t-r)/c:a}class mU extends Zy{static id="timeseries";static defaults=Zy.defaults;constructor(t){super(t),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const t=this._getTimestampsForTable(),n=this._table=this.buildLookupTable(t);this._minPos=Dl(n,this.min),this._tableRange=Dl(n,this.max)-this._minPos,super.initOffsets(t)}buildLookupTable(t){const{min:n,max:s}=this,i=[],r=[];let o,a,l,c,h;for(o=0,a=t.length;o<a;++o)c=t[o],c>=n&&c<=s&&i.push(c);if(i.length<2)return[{time:n,pos:0},{time:s,pos:1}];for(o=0,a=i.length;o<a;++o)h=i[o+1],l=i[o-1],c=i[o],Math.round((h+l)/2)!==c&&r.push({time:c,pos:o/(a-1)});return r}_generate(){const t=this.min,n=this.max;let s=super.getDataTimestamps();return(!s.includes(t)||!s.length)&&s.splice(0,0,t),(!s.includes(n)||s.length===1)&&s.push(n),s.sort((i,r)=>i-r)}_getTimestampsForTable(){let t=this._cache.all||[];if(t.length)return t;const n=this.getDataTimestamps(),s=this.getLabelTimestamps();return n.length&&s.length?t=this.normalize(n.concat(s)):t=n.length?n:s,t=this._cache.all=t,t}getDecimalForValue(t){return(Dl(this._table,t)-this._minPos)/this._tableRange}getValueForPixel(t){const n=this._offsets,s=this.getDecimalForPixel(t)/n.factor-n.end;return Dl(this._table,s*this._tableRange+this._minPos,!0)}}const lE={data:{type:Object,required:!0},options:{type:Object,default:()=>({})},plugins:{type:Array,default:()=>[]},datasetIdKey:{type:String,default:"label"},updateMode:{type:String,default:void 0}},xF={ariaLabel:{type:String},ariaDescribedby:{type:String}},RF={type:{type:String,required:!0},destroyDelay:{type:Number,default:0},...lE,...xF},PF=mb[0]==="2"?(e,t)=>Object.assign(e,{attrs:t}):(e,t)=>Object.assign(e,t);function ar(e){return Gr(e)?St(e):e}function MF(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e;return Gr(t)?new Proxy(e,{}):e}function DF(e,t){const n=e.options;n&&t&&Object.assign(n,t)}function cE(e,t){e.labels=t}function uE(e,t,n){const s=[];e.datasets=t.map(i=>{const r=e.datasets.find(o=>o[n]===i[n]);return!r||!i.data||s.includes(r)?{...i}:(s.push(r),Object.assign(r,i),r)})}function OF(e,t){const n={labels:[],datasets:[]};return cE(n,e.labels),uE(n,e.datasets,t),n}const LF=Vt({props:RF,setup(e,t){let{expose:n,slots:s}=t;const i=lt(null),r=Vi(null);n({chart:r});const o=()=>{if(!i.value)return;const{type:c,data:h,options:d,plugins:f,datasetIdKey:p}=e,_=OF(h,p),y=MF(_,h);r.value=new Cu(i.value,{type:c,data:y,options:{...d},plugins:f})},a=()=>{const c=St(r.value);c&&(e.destroyDelay>0?setTimeout(()=>{c.destroy(),r.value=null},e.destroyDelay):(c.destroy(),r.value=null))},l=c=>{c.update(e.updateMode)};return Ys(o),Yd(a),jo([()=>e.options,()=>e.data],(c,h)=>{let[d,f]=c,[p,_]=h;const y=St(r.value);if(!y)return;let v=!1;if(d){const w=ar(d),M=ar(p);w&&w!==M&&(DF(y,w),v=!0)}if(f){const w=ar(f.labels),M=ar(_.labels),E=ar(f.datasets),x=ar(_.datasets);w!==M&&(cE(y.config.data,w),v=!0),E&&E!==x&&(uE(y.config.data,E,e.datasetIdKey),v=!0)}v&&Kc(()=>{l(y)})},{deep:!0}),()=>wn("canvas",{role:"img","aria-label":e.ariaLabel,"aria-describedby":e.ariaDescribedby,ref:i},[wn("p",{},[s.default?s.default():""])])}});function NF(e,t){return Cu.register(t),Vt({props:lE,setup(n,s){let{expose:i}=s;const r=Vi(null),o=a=>{r.value=a?.chart};return i({chart:r}),()=>wn(LF,PF({ref:o},{type:e,...n}))}})}const VF=NF("line",NV),FF={class:"nav-bar"},UF={class:"session-header"},$F={class:"header-row"},BF={class:"track-name"},HF={class:"header-meta"},jF={class:"car"},zF={class:"start-cond"},WF={class:"summary"},qF={key:0,class:"summary-box"},GF={class:"value"},KF={key:1,class:"summary-box"},QF={class:"value"},YF={class:"master-detail"},XF={class:"master"},JF={class:"master-title"},ZF={class:"stint-list"},t5=["onClick"],e5={class:"stint-num"},n5={class:"stint-fuel"},s5={class:"stint-laps"},i5={class:"stint-best"},r5={class:"stint-avg"},o5={class:"delta-val"},a5={class:"delta-lbl"},l5={class:"detail"},c5={class:"detail-header"},u5={class:"detail-title"},h5={class:"detail-badge"},d5={class:"detail-cond"},f5={class:"theo-box"},p5={class:"theo-main"},g5={class:"theo-lbl"},m5={class:"theo-val"},_5={class:"theo-detail"},y5={class:"theo-detail"},v5={class:"theo-detail"},b5={key:0,class:"limited-data"},w5={class:"chart-section"},T5={class:"chart-title"},E5={class:"chart-wrap"},I5={class:"laps-section"},S5={class:"laps-header"},A5={class:"laps-title"},k5={class:"laps-table-wrap"},C5={class:"laps-table"},x5={class:"time"},R5={class:"status"},P5=Vt({__name:"SessionDetailPage",props:{sessionId:{}},emits:["back","open-track"],setup(e,{emit:t}){Cu.register(TF,SF,nF,eF,uF,yF,lF);const n=e,s=t,i=lt(!1),r=Gt(()=>({id:n.sessionId,track:"Monza",trackId:"monza",type:"practice",date:"6 Gennaio 2026",time:"19:12",car:"Ford Mustang GT3",startConditions:{weather:"Clear",airTemp:12,trackTemp:17},bestQualy:"1:47.234",bestRace:"1:49.123",stints:[{number:1,type:"Q",intent:"Qualy Push",fuelStart:10,laps:6,best:"1:47.234",avg:"1:48.890",theoretical:"1:46.900",deltaVsTheo:"+0.334",conditions:{weather:"Dry",avgTrackTemp:18},breakdown:{base:"1:46.500",deltaTemp:"+0.250",deltaGrip:"+0.150"}},{number:2,type:"R",intent:"Race Pace",fuelStart:55,laps:12,best:"1:49.123",avg:"1:50.456",theoretical:"1:49.500",deltaVsTheo:"-0.377",conditions:{weather:"Dry",avgTrackTemp:22},breakdown:{base:"1:49.100",deltaTemp:"+0.300",deltaGrip:"+0.100"}},{number:3,type:"Q",intent:"Qualy Push",fuelStart:8,laps:5,best:"1:47.890",avg:"1:49.012",theoretical:"1:46.900",deltaVsTheo:"+0.990",conditions:{weather:"Dry",avgTrackTemp:24},breakdown:{base:"1:46.500",deltaTemp:"+0.300",deltaGrip:"+0.100"}},{number:4,type:"R",intent:"Race Pace",fuelStart:60,laps:15,best:"1:49.567",avg:"1:50.890",theoretical:"1:49.500",deltaVsTheo:"+0.067",conditions:{weather:"Dry",avgTrackTemp:25},breakdown:{base:"1:49.100",deltaTemp:"+0.300",deltaGrip:"+0.100"}},{number:5,type:"Q",intent:"Qualy Push",fuelStart:6,laps:4,best:"1:47.012",avg:"1:47.890",theoretical:"1:46.900",deltaVsTheo:"+0.112",conditions:{weather:"Dry",avgTrackTemp:23},breakdown:{base:"1:46.500",deltaTemp:"+0.250",deltaGrip:"+0.150"}},{number:6,type:"R",intent:"Long Run",fuelStart:45,laps:10,best:"1:49.234",avg:"1:50.123",theoretical:"1:49.500",deltaVsTheo:"-0.266",conditions:{weather:"Dry",avgTrackTemp:21},breakdown:{base:"1:49.100",deltaTemp:"+0.250",deltaGrip:"+0.150"}},{number:7,type:"Q",intent:"Qualy Push",fuelStart:5,laps:1,best:"1:48.456",avg:"1:48.456",theoretical:"1:46.900",deltaVsTheo:"+1.556",conditions:{weather:"Dry",avgTrackTemp:19},breakdown:{base:"1:46.500",deltaTemp:"+0.250",deltaGrip:"+0.150"}},{number:8,type:"R",intent:"Race Pace",fuelStart:70,laps:18,best:"1:50.012",avg:"1:51.234",theoretical:"1:49.500",deltaVsTheo:"+0.512",conditions:{weather:"Dry",avgTrackTemp:26},breakdown:{base:"1:49.100",deltaTemp:"+0.300",deltaGrip:"+0.100"}}],lapsData:{1:[{lap:1,time:"1:52.456",delta:"+5.556",valid:!0,pit:!1,sectors:["32.1","42.3","38.0"],fuel:12,trackTemp:17,grip:"Opt"},{lap:2,time:"1:48.123",delta:"+1.223",valid:!0,pit:!1,sectors:["31.2","41.0","35.9"],fuel:11,trackTemp:18,grip:"Opt"},{lap:3,time:"1:47.890",delta:"+0.990",valid:!0,pit:!1,sectors:["31.0","40.8","36.1"],fuel:10,trackTemp:18,grip:"Opt"},{lap:4,time:"1:47.234",delta:"+0.334",valid:!0,pit:!1,sectors:["30.8","40.4","36.0"],fuel:9,trackTemp:19,grip:"Opt"},{lap:5,time:"1:48.012",delta:"+1.112",valid:!1,pit:!1,sectors:["30.9","41.1","36.0"],fuel:8,trackTemp:19,grip:"Opt"},{lap:6,time:"1:49.340",delta:"+2.440",valid:!0,pit:!0,sectors:["31.2","41.8","36.3"],fuel:8,trackTemp:19,grip:"Opt"}],2:[{lap:1,time:"1:51.234",delta:"+1.734",valid:!0,pit:!1,sectors:["32.5","42.0","36.7"],fuel:55,trackTemp:21,grip:"Opt"},{lap:2,time:"1:50.012",delta:"+0.512",valid:!0,pit:!1,sectors:["32.0","41.5","36.5"],fuel:53,trackTemp:22,grip:"Opt"},{lap:3,time:"1:49.567",delta:"+0.067",valid:!0,pit:!1,sectors:["31.8","41.2","36.6"],fuel:51,trackTemp:22,grip:"Opt"},{lap:4,time:"1:49.123",delta:"-0.377",valid:!0,pit:!1,sectors:["31.5","41.0","36.6"],fuel:49,trackTemp:22,grip:"Opt"}],7:[{lap:1,time:"1:48.456",delta:"+1.556",valid:!0,pit:!1,sectors:["31.5","41.0","36.0"],fuel:5,trackTemp:19,grip:"Opt"}]}})),o=lt(1);Ys(()=>{const w=r.value.stints.filter(M=>M.laps>=2);if(w.length>0){let M=w[0],E=parseFloat(M.deltaVsTheo);w.forEach(x=>{const O=parseFloat(x.deltaVsTheo);O<E&&(M=x,E=O)}),o.value=M.number}});const a=Gt(()=>r.value.stints.find(w=>w.number===o.value)),l=Gt(()=>r.value.lapsData[o.value]||r.value.lapsData[1]),c=Gt(()=>l.value.length<=1),h=Gt(()=>{const w=l.value,M=f(a.value?.theoretical||"1:47.000");return{labels:w.map(E=>`G${E.lap}`),datasets:[{label:"Tempo",data:w.map(E=>f(E.time)),borderColor:"#3b82f6",backgroundColor:"rgba(59,130,246,0.1)",pointBackgroundColor:w.map(E=>E.pit?"#6b7280":E.valid?parseFloat(E.delta)<=.3?"#10b981":"#3b82f6":"#ef4444"),pointRadius:5,tension:.2},{label:`Teorico ${a.value?.type}`,data:w.map(()=>M),borderColor:"#f59e0b",borderDash:[5,5],pointRadius:0}]}}),d={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!0,position:"bottom",labels:{color:"rgba(255,255,255,0.6)",font:{size:10}}},tooltip:{backgroundColor:"rgba(15,15,25,0.95)",callbacks:{label:w=>`${w.dataset.label}: ${p(w.raw)}`}}},scales:{x:{grid:{color:"rgba(255,255,255,0.05)"},ticks:{color:"rgba(255,255,255,0.5)",font:{size:10}}},y:{grid:{color:"rgba(255,255,255,0.05)"},ticks:{color:"rgba(255,255,255,0.5)",callback:w=>p(w)}}}};function f(w){const[M,E]=w.split(":").map(Number);return M*60+E}function p(w){return`${Math.floor(w/60)}:${(w%60).toFixed(3).padStart(6,"0")}`}function _(w){return{practice:"PRACTICE",qualify:"QUALIFY",race:"RACE"}[w]||w.toUpperCase()}function y(w){const M=parseFloat(w);return M<=0?"fast":M<=.3?"ok":M<=.5?"margin":"far"}function v(w){const M=parseFloat(w);return M<=0?"FAST":M<=.3?"OK":M<=.5?"MARGIN":"LONTANO"}return(w,M)=>{const E=Su;return H(),Kt(E,{class:"session-detail-page"},{default:ke(()=>[I("div",FF,[I("button",{class:"nav-btn",onClick:M[0]||(M[0]=x=>s("back"))},[...M[3]||(M[3]=[I("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[I("path",{d:"M15 18l-6-6 6-6"})],-1),$t(" Torna alle sessioni ",-1)])]),I("button",{class:"nav-btn nav-btn--accent",onClick:M[1]||(M[1]=x=>s("open-track",r.value.trackId))},[...M[4]||(M[4]=[$t(" Apri pista ",-1),I("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[I("path",{d:"M9 18l6-6-6-6"})],-1)])])]),I("header",UF,[I("div",$F,[I("h1",BF,G(r.value.track.toUpperCase()),1),I("span",{class:Rt(["type-badge",`type-badge--${r.value.type}`])},G(_(r.value.type)),3)]),I("div",HF,[I("span",null,G(r.value.date),1),M[5]||(M[5]=I("span",{class:"sep"},"",-1)),I("span",null,G(r.value.time),1),M[6]||(M[6]=I("span",{class:"sep"},"",-1)),I("span",jF,G(r.value.car),1)]),I("div",zF,[M[7]||(M[7]=I("span",{class:"cond-label"},"CONDIZIONI DI PARTENZA",-1)),I("span",null," "+G(r.value.startConditions.weather),1),I("span",null,"Aria "+G(r.value.startConditions.airTemp)+"",1),I("span",null,"Asfalto "+G(r.value.startConditions.trackTemp)+"",1)])]),I("section",WF,[r.value.bestQualy?(H(),J("div",qF,[M[8]||(M[8]=I("span",{class:"label"},"Best Qualify",-1)),I("span",GF,G(r.value.bestQualy),1)])):Le("",!0),r.value.bestRace?(H(),J("div",KF,[M[9]||(M[9]=I("span",{class:"label"},"Best Race",-1)),I("span",QF,G(r.value.bestRace),1)])):Le("",!0)]),I("div",YF,[I("aside",XF,[I("h2",JF,"Stint ("+G(r.value.stints.length)+")",1),I("div",ZF,[(H(!0),J(bt,null,ln(r.value.stints,x=>(H(),J("button",{key:x.number,class:Rt(["stint-item",{selected:o.value===x.number}]),onClick:O=>o.value=x.number},[I("span",{class:Rt(["stint-type",`stint-type--${x.type.toLowerCase()}`])},G(x.type),3),I("span",e5,"#"+G(x.number),1),I("span",n5,G(x.fuelStart)+"L",1),I("span",s5,G(x.laps)+"g",1),I("span",i5,G(x.best),1),I("span",r5,G(x.avg),1),I("span",{class:Rt(["stint-delta",`delta--${y(x.deltaVsTheo)}`])},[I("span",o5,G(x.deltaVsTheo),1),I("span",a5,G(v(x.deltaVsTheo)),1)],2)],10,t5))),128))])]),I("section",l5,[I("div",c5,[I("h3",u5,G(a.value?.intent),1),I("span",h5,"Stint "+G(o.value)+"  "+G(a.value?.type==="Q"?"Qualy":"Race"),1),I("span",d5,G(a.value?.conditions.weather)+"  Track "+G(a.value?.conditions.avgTrackTemp)+"",1)]),I("div",f5,[I("span",p5,[I("span",g5,"Teorico "+G(a.value?.type)+":",1),I("span",m5,G(a.value?.theoretical),1)]),I("span",_5,"Base: "+G(a.value?.breakdown.base),1),I("span",y5,"Temp: "+G(a.value?.breakdown.deltaTemp),1),I("span",v5,"Grip: "+G(a.value?.breakdown.deltaGrip),1)]),c.value?(H(),J("div",b5,"  Dati limitati ("+G(l.value.length)+" giro) ",1)):Le("",!0),I("div",w5,[I("h4",T5,"Tempi Giro  Stint "+G(o.value),1),I("div",E5,[ht(Ht(VF),{data:h.value,options:d},null,8,["data"])])]),I("div",I5,[I("div",S5,[I("h4",A5,"Tabella Giri  Stint "+G(o.value),1),I("button",{class:"toggle-btn",onClick:M[2]||(M[2]=x=>i.value=!i.value)},G(i.value?"Vista semplice":"Dettagli"),1)]),I("div",k5,[I("table",C5,[I("thead",null,[I("tr",null,[M[16]||(M[16]=I("th",null,"Giro",-1)),M[17]||(M[17]=I("th",null,"Tempo",-1)),M[18]||(M[18]=I("th",null," Teorico",-1)),M[19]||(M[19]=I("th",null,"Stato",-1)),i.value?(H(),J(bt,{key:0},[M[10]||(M[10]=I("th",null,"S1",-1)),M[11]||(M[11]=I("th",null,"S2",-1)),M[12]||(M[12]=I("th",null,"S3",-1)),M[13]||(M[13]=I("th",null,"Fuel",-1)),M[14]||(M[14]=I("th",null,"Track",-1)),M[15]||(M[15]=I("th",null,"Grip",-1))],64)):Le("",!0)])]),I("tbody",null,[(H(!0),J(bt,null,ln(l.value,x=>(H(),J("tr",{key:x.lap,class:Rt({invalid:!x.valid,pit:x.pit})},[I("td",null,G(x.lap),1),I("td",x5,G(x.time),1),I("td",{class:Rt(["delta",`delta--${y(x.delta)}`])},G(x.delta),3),I("td",R5,G(x.pit?"PIT":x.valid?"":"INV"),1),i.value?(H(),J(bt,{key:0},[I("td",null,G(x.sectors[0]),1),I("td",null,G(x.sectors[1]),1),I("td",null,G(x.sectors[2]),1),I("td",null,G(x.fuel)+"L",1),I("td",null,G(x.trackTemp)+"",1),I("td",null,G(x.grip),1)],64)):Le("",!0)],2))),128))])])])])])])]),_:1})}}}),M5=Object.assign(Zt(P5,[["__scopeId","data-v-1184b141"]]),{__name:"PagesSessionDetailPage"}),D5={class:"car-image-container"},O5={key:0,class:"car-placeholder",viewBox:"0 0 400 200",fill:"none"},L5={class:"car-info"},N5={class:"car-name"},V5={class:"car-meta"},F5={class:"car-subtitle"},U5={key:0,class:"car-date"},$5=Vt({__name:"FeaturedCarCard",props:{carName:{},carImage:{},subtitle:{},date:{}},setup(e){return(t,n)=>(H(),J("div",{class:"featured-car",onClick:n[1]||(n[1]=s=>t.$emit("click"))},[I("div",D5,[I("div",{class:"car-image",style:as(e.carImage?{backgroundImage:`url(${e.carImage})`}:{})},[e.carImage?Le("",!0):(H(),J("svg",O5,[...n[2]||(n[2]=[Er('<defs data-v-1b2fbc93><linearGradient id="carGrad" x1="0%" y1="0%" x2="100%" y2="100%" data-v-1b2fbc93><stop offset="0%" stop-color="#e10600" stop-opacity="0.3" data-v-1b2fbc93></stop><stop offset="100%" stop-color="#ff6b00" stop-opacity="0.1" data-v-1b2fbc93></stop></linearGradient></defs><path d="M50 140 L80 120 L120 115 L150 100 L200 95 L280 95 L320 100 L350 115 L380 130 L380 150 L50 150 Z" fill="url(#carGrad)" stroke="#e10600" stroke-width="1.5" data-v-1b2fbc93></path><circle cx="110" cy="150" r="20" fill="#1a1a22" stroke="#e10600" stroke-width="1.5" data-v-1b2fbc93></circle><circle cx="110" cy="150" r="10" fill="none" stroke="#e10600" stroke-width="1" data-v-1b2fbc93></circle><circle cx="310" cy="150" r="20" fill="#1a1a22" stroke="#e10600" stroke-width="1.5" data-v-1b2fbc93></circle><circle cx="310" cy="150" r="10" fill="none" stroke="#e10600" stroke-width="1" data-v-1b2fbc93></circle><path d="M160 100 L200 92 L260 92 L290 100 L280 110 L170 110 Z" fill="rgba(255,255,255,0.05)" stroke="#e10600" stroke-width="1" data-v-1b2fbc93></path>',7)])]))],4),n[4]||(n[4]=I("div",{class:"image-overlay"},null,-1)),I("button",{class:"cta-button",title:"Vedi dettagli",onClick:n[0]||(n[0]=Da(s=>t.$emit("cta-click"),["stop"]))},[...n[3]||(n[3]=[I("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[I("path",{d:"M5 12h14"}),I("path",{d:"M12 5l7 7-7 7"})],-1)])])]),I("div",L5,[I("h2",N5,G(e.carName||"MUSTANG GT3"),1),I("div",V5,[I("span",F5,G(e.subtitle||"Ultima auto utilizzata"),1),e.date?(H(),J("span",U5,G(e.date),1)):Le("",!0)])]),n[5]||(n[5]=I("div",{class:"accent-glow"},null,-1))]))}}),B5=Object.assign(Zt($5,[["__scopeId","data-v-1b2fbc93"]]),{__name:"CardsFeaturedCarCard"}),H5={class:"track-image-container"},j5={class:"title-badge"},z5={class:"track-info"},W5={class:"track-name"},q5={class:"stats-row"},G5={class:"stat-box"},K5={class:"stat-value-row"},Q5={class:"stat-time"},Y5={class:"stat-box"},X5={class:"stat-value-row"},J5={class:"stat-time"},Z5={class:"stat-box stat-box--subtle"},t6={class:"stat-value-row"},e6={class:"stat-time"},n6=Vt({__name:"TrackPerformanceCard",props:{title:{},trackName:{},trackImage:{},bestQualy:{},bestRace:{},avgTime:{}},setup(e){return(t,n)=>(H(),J("div",{class:"track-card",onClick:n[1]||(n[1]=s=>t.$emit("click"))},[I("div",H5,[I("div",{class:"track-image",style:as({backgroundImage:`url(${e.trackImage})`})},null,4),n[3]||(n[3]=I("div",{class:"image-overlay"},null,-1)),I("span",j5,G(e.title),1),I("button",{class:"cta-button",title:"Vedi sessioni",onClick:n[0]||(n[0]=Da(s=>t.$emit("cta-click"),["stop"]))},[...n[2]||(n[2]=[I("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[I("path",{d:"M5 12h14"}),I("path",{d:"M12 5l7 7-7 7"})],-1)])])]),I("div",z5,[I("h2",W5,G(e.trackName),1),I("div",q5,[I("div",G5,[n[5]||(n[5]=I("span",{class:"stat-label"},"BEST QUALY",-1)),I("div",K5,[I("span",Q5,G(e.bestQualy||"--:--.---"),1),n[4]||(n[4]=Er('<svg class="medal-svg medal-gold" viewBox="0 0 48 56" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-00d25e74><path d="M18 0L24 16L30 0H36L28 20L24 28L20 20L12 0H18Z" fill="#E53935" data-v-00d25e74></path><path d="M24 16L30 0H36L28 20L24 28" fill="#C62828" data-v-00d25e74></path><circle cx="24" cy="38" r="16" fill="#FFD54F" data-v-00d25e74></circle><circle cx="24" cy="38" r="16" fill="url(#goldGradient)" data-v-00d25e74></circle><circle cx="24" cy="38" r="13" stroke="#FFC107" stroke-width="2" fill="none" data-v-00d25e74></circle><path d="M24 28L26.5 34H33L28 38L30 45L24 41L18 45L20 38L15 34H21.5L24 28Z" fill="#FFC107" data-v-00d25e74></path><defs data-v-00d25e74><linearGradient id="goldGradient" x1="8" y1="22" x2="40" y2="54" gradientUnits="userSpaceOnUse" data-v-00d25e74><stop stop-color="#FFE082" data-v-00d25e74></stop><stop offset="1" stop-color="#FFB300" data-v-00d25e74></stop></linearGradient></defs></svg>',1))])]),I("div",Y5,[n[7]||(n[7]=I("span",{class:"stat-label"},"BEST RACE",-1)),I("div",X5,[I("span",J5,G(e.bestRace||"--:--.---"),1),n[6]||(n[6]=Er('<svg class="medal-svg medal-silver" viewBox="0 0 48 56" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-00d25e74><path d="M18 0L24 16L30 0H36L28 20L24 28L20 20L12 0H18Z" fill="#1E88E5" data-v-00d25e74></path><path d="M24 16L30 0H36L28 20L24 28" fill="#1565C0" data-v-00d25e74></path><circle cx="24" cy="38" r="16" fill="#E0E0E0" data-v-00d25e74></circle><circle cx="24" cy="38" r="16" fill="url(#silverGradient)" data-v-00d25e74></circle><circle cx="24" cy="38" r="13" stroke="#BDBDBD" stroke-width="2" fill="none" data-v-00d25e74></circle><text x="24" y="43" text-anchor="middle" font-size="14" font-weight="bold" fill="#757575" data-v-00d25e74>2</text><defs data-v-00d25e74><linearGradient id="silverGradient" x1="8" y1="22" x2="40" y2="54" gradientUnits="userSpaceOnUse" data-v-00d25e74><stop stop-color="#F5F5F5" data-v-00d25e74></stop><stop offset="1" stop-color="#9E9E9E" data-v-00d25e74></stop></linearGradient></defs></svg>',1))])]),I("div",Z5,[n[9]||(n[9]=I("span",{class:"stat-label"},"AVG TIME",-1)),I("div",t6,[I("span",e6,G(e.avgTime||"--:--.---"),1),n[8]||(n[8]=Er('<svg class="medal-svg medal-bronze" viewBox="0 0 48 56" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-00d25e74><path d="M18 0L24 16L30 0H36L28 20L24 28L20 20L12 0H18Z" fill="#8D6E63" data-v-00d25e74></path><path d="M24 16L30 0H36L28 20L24 28" fill="#6D4C41" data-v-00d25e74></path><circle cx="24" cy="38" r="16" fill="#BCAAA4" data-v-00d25e74></circle><circle cx="24" cy="38" r="16" fill="url(#bronzeGradient)" data-v-00d25e74></circle><circle cx="24" cy="38" r="13" stroke="#A1887F" stroke-width="2" fill="none" data-v-00d25e74></circle><text x="24" y="43" text-anchor="middle" font-size="14" font-weight="bold" fill="#5D4037" data-v-00d25e74>3</text><defs data-v-00d25e74><linearGradient id="bronzeGradient" x1="8" y1="22" x2="40" y2="54" gradientUnits="userSpaceOnUse" data-v-00d25e74><stop stop-color="#D7CCC8" data-v-00d25e74></stop><stop offset="1" stop-color="#8D6E63" data-v-00d25e74></stop></linearGradient></defs></svg>',1))])])])]),n[10]||(n[10]=I("div",{class:"accent-glow"},null,-1))]))}}),s6=Object.assign(Zt(n6,[["__scopeId","data-v-00d25e74"]]),{__name:"CardsTrackPerformanceCard"}),i6={class:"activity-card"},r6={class:"card-content"},o6={class:"chart-area"},a6={class:"y-axis"},l6={class:"bars-container"},c6={class:"bar-stack"},u6={class:"day-label"},h6={class:"legend"},d6={class:"legend-item legend-item--practice"},f6={class:"legend-text"},p6={class:"legend-value"},g6={class:"legend-sessions"},m6={class:"legend-item legend-item--qualify"},_6={class:"legend-text"},y6={class:"legend-value"},v6={class:"legend-sessions"},b6={class:"legend-item legend-item--race"},w6={class:"legend-text"},T6={class:"legend-value"},E6={class:"legend-sessions"},I6=Vt({__name:"ActivityCard",props:{data:{},practiceTotal:{},qualifyTotal:{},raceTotal:{}},setup(e){const t=e,n=lt(!1);Ys(()=>{setTimeout(()=>{n.value=!0},100)});const s=Gt(()=>t.data||[{day:"Lun",practice:45,qualify:0,race:0},{day:"Mar",practice:0,qualify:0,race:0},{day:"Mer",practice:25,qualify:15,race:0},{day:"Gio",practice:12,qualify:0,race:95},{day:"Ven",practice:35,qualify:8,race:0},{day:"Sab",practice:0,qualify:0,race:38},{day:"Dom",practice:20,qualify:0,race:0}]),i=Gt(()=>{const h=s.value.map(d=>d.practice+d.qualify+d.race);return Math.max(...h,60)}),r=Gt(()=>{const h=i.value;return[0,Math.round(h/2),h]}),o=Gt(()=>t.practiceTotal||{minutes:137,sessions:5}),a=Gt(()=>t.qualifyTotal||{minutes:23,sessions:3}),l=Gt(()=>t.raceTotal||{minutes:133,sessions:2}),c=h=>"sess.";return(h,d)=>(H(),J("div",i6,[d[9]||(d[9]=I("h2",{class:"card-title"},"Attivit (ultimi 7 giorni)",-1)),I("div",r6,[I("div",o6,[I("div",a6,[(H(!0),J(bt,null,ln(r.value.slice().reverse(),f=>(H(),J("span",{key:f},G(f),1))),128))]),I("div",l6,[(H(!0),J(bt,null,ln(s.value,(f,p)=>(H(),J("div",{key:f.day,class:"bar-column"},[I("div",c6,[f.race>0?(H(),J("div",{key:0,class:"bar bar--race",style:as({height:n.value?`${f.race/i.value*100}%`:"0%",transitionDelay:`${p*40+200}ms`})},null,4)):Le("",!0),f.qualify>0?(H(),J("div",{key:1,class:"bar bar--qualify",style:as({height:n.value?`${f.qualify/i.value*100}%`:"0%",transitionDelay:`${p*40+100}ms`})},null,4)):Le("",!0),f.practice>0?(H(),J("div",{key:2,class:"bar bar--practice",style:as({height:n.value?`${f.practice/i.value*100}%`:"0%",transitionDelay:`${p*40}ms`})},null,4)):Le("",!0)]),I("span",u6,G(f.day),1)]))),128))])]),I("div",h6,[I("div",d6,[d[2]||(d[2]=I("span",{class:"legend-dot"},null,-1)),I("div",f6,[d[1]||(d[1]=I("span",{class:"legend-label"},"PRACTICE",-1)),I("span",p6,[$t(G(o.value.minutes),1),d[0]||(d[0]=I("small",null,"min",-1))]),I("span",g6,G(o.value.sessions)+" "+G(c(o.value.sessions)),1)])]),I("div",m6,[d[5]||(d[5]=I("span",{class:"legend-dot"},null,-1)),I("div",_6,[d[4]||(d[4]=I("span",{class:"legend-label"},"QUALIFY",-1)),I("span",y6,[$t(G(a.value.minutes),1),d[3]||(d[3]=I("small",null,"min",-1))]),I("span",v6,G(a.value.sessions)+" "+G(c(a.value.sessions)),1)])]),I("div",b6,[d[8]||(d[8]=I("span",{class:"legend-dot"},null,-1)),I("div",w6,[d[7]||(d[7]=I("span",{class:"legend-label"},"RACE",-1)),I("span",T6,[$t(G(l.value.minutes),1),d[6]||(d[6]=I("small",null,"min",-1))]),I("span",E6,G(l.value.sessions)+" "+G(c(l.value.sessions)),1)])])])]),d[10]||(d[10]=I("div",{class:"accent-glow"},null,-1))]))}}),S6=Object.assign(Zt(I6,[["__scopeId","data-v-44f7baed"]]),{__name:"CardsActivityCard"}),A6=""+new URL("mustang_gt3.DdC5zVl9.png",import.meta.url).href,k6=""+new URL("spa.eyW79qze.jpg",import.meta.url).href,C6=""+new URL("monza.Bfqq58V6.jpg",import.meta.url).href,x6={class:"panoramica-grid"},R6=Vt({__name:"PanoramicaPage",setup(e){return(t,n)=>{const s=B5,i=s6,r=S6,o=Su;return H(),Kt(o,null,{default:ke(()=>[I("div",x6,[ht(s,{"car-name":"MUSTANG GT3","car-image":Ht(A6),subtitle:"Ultima auto utilizzata",date:"12/01/2026"},null,8,["car-image"]),ht(i,{title:"Ultima pista","track-name":"SPA  FRANCORCHAMPS","track-image":Ht(k6),"best-qualy":"2:15.872","best-race":"2:18.430","avg-time":"2:19.256"},null,8,["track-image"]),ht(r),ht(i,{title:"Penultima pista","track-name":"AUTODROMO DI MONZA","track-image":Ht(C6),"best-qualy":"1:47.234","best-race":"1:49.012","avg-time":"1:50.445"},null,8,["track-image"])])]),_:1})}}}),P6=Object.assign(Zt(R6,[["__scopeId","data-v-b507f41f"]]),{__name:"PagesPanoramicaPage"}),M6={class:"filters"},D6={class:"filters-left"},O6={class:"filter-group"},L6={class:"segmented-control"},N6={class:"filter-group"},V6=["value"],F6={class:"filter-group"},U6=["value"],$6={class:"filter-group"},B6={class:"segmented-control segmented-control--compact"},H6={class:"filters-right"},j6={class:"view-toggle"},z6={key:0,class:"no-results"},W6={key:1,class:"day-groups"},q6={class:"day-header"},G6={class:"day-date"},K6={class:"day-count"},Q6={class:"sessions-list"},Y6=["onClick"],X6={class:"row-left"},J6={class:"session-time"},Z6={class:"session-track"},t3={class:"session-car"},e3={class:"row-right"},n3={class:"stat-chips"},s3={class:"stat-chip"},i3={class:"stat-chip"},r3={class:"time-slot"},o3={key:0,class:"time-badge time-badge--qualy"},a3={key:1,class:"time-badge time-badge--qualy time-badge--empty"},l3={class:"time-slot"},c3={key:0,class:"time-badge time-badge--race"},u3={key:1,class:"time-badge time-badge--race time-badge--empty"},h3={key:2,class:"day-cards"},d3={class:"card-header"},f3={class:"card-header-info"},p3={class:"card-date"},g3={class:"card-count"},m3={class:"card-sessions"},_3=["onClick"],y3={class:"card-session-time"},v3={class:"card-session-track"},b3={class:"card-session-car"},w3={class:"card-stat-chips"},T3={class:"stat-chip"},E3={class:"stat-chip"},I3={class:"card-time-slot"},S3={key:0,class:"time-badge time-badge--qualy"},A3={key:1,class:"time-badge time-badge--qualy time-badge--empty"},k3={class:"card-time-slot"},C3={key:0,class:"time-badge time-badge--race"},x3={key:1,class:"time-badge time-badge--race time-badge--empty"},R3=Vt({__name:"SessioniPage",emits:["go-to-session"],setup(e,{emit:t}){const n=t,s=lt("all"),i=lt("all"),r=lt("all"),o=lt("all"),a=lt("list"),l=[{id:"s1",date:"2026-01-13",time:"19:34",type:"practice",track:"Donington",car:"Ford Mustang GT3",laps:18,stints:2,bestQualy:"1:29.456"},{id:"s2",date:"2026-01-13",time:"18:22",type:"practice",track:"Valencia",car:"Ford Mustang GT3",laps:12,stints:1,bestQualy:"1:31.890"},{id:"s3",date:"2026-01-10",time:"20:15",type:"race",track:"Spa",car:"AMR V8 Vantage GT3",laps:18,stints:2,bestRace:"2:17.890"},{id:"s4",date:"2026-01-10",time:"18:45",type:"practice",track:"Spa",car:"AMR V8 Vantage GT3",laps:24,stints:3,bestQualy:"2:16.543",bestRace:"2:18.234"},{id:"s5",date:"2026-01-10",time:"15:30",type:"qualify",track:"Spa",car:"AMR V8 Vantage GT3",laps:8,stints:1,bestQualy:"2:16.874"},{id:"s6",date:"2026-01-06",time:"21:00",type:"race",track:"Monza",car:"Ford Mustang GT3",laps:22,stints:2,bestRace:"1:48.345"},{id:"s7",date:"2026-01-06",time:"19:12",type:"qualify",track:"Monza",car:"Ford Mustang GT3",laps:6,stints:1,bestQualy:"1:47.234"},{id:"s8",date:"2026-01-06",time:"17:45",type:"practice",track:"Monza",car:"Ford Mustang GT3",laps:32,stints:3,bestQualy:"1:47.890",bestRace:"1:48.567"},{id:"s9",date:"2026-01-06",time:"15:30",type:"practice",track:"Monza",car:"Ford Mustang GT3",laps:28,stints:2,bestQualy:"1:48.234"},{id:"s10",date:"2026-01-06",time:"13:00",type:"race",track:"Monza",car:"Ford Mustang GT3",laps:20,stints:2,bestRace:"1:48.567",bestQualy:"1:47.890"},{id:"s11",date:"2026-01-06",time:"11:30",type:"qualify",track:"Monza",car:"Ford Mustang GT3",laps:5,stints:1,bestQualy:"1:47.678"},{id:"s12",date:"2026-01-06",time:"09:00",type:"race",track:"Monza",car:"Ford Mustang GT3",laps:18,stints:2,bestRace:"1:48.123"},{id:"s13",date:"2026-01-03",time:"20:30",type:"race",track:"Monza",car:"Ford Mustang GT3",laps:16,stints:2,bestRace:"1:49.234"},{id:"s14",date:"2026-01-03",time:"18:00",type:"practice",track:"Monza",car:"Ford Mustang GT3",laps:24,stints:2,bestQualy:"1:48.567"},{id:"s15",date:"2026-01-03",time:"16:30",type:"qualify",track:"Monza",car:"Ford Mustang GT3",laps:6,stints:1,bestQualy:"1:48.012",bestRace:"1:49.890"},{id:"s16",date:"2025-12-31",time:"22:00",type:"practice",track:"Paul Ricard",car:"Ford Mustang GT3",laps:20,stints:2,bestQualy:"1:54.234"},{id:"s17",date:"2025-12-31",time:"19:30",type:"practice",track:"Donington",car:"Ford Mustang GT3",laps:18,stints:2,bestQualy:"1:29.890"},{id:"s18",date:"2025-12-30",time:"21:15",type:"practice",track:"Donington",car:"Ford Mustang GT3",laps:27,stints:3,bestQualy:"1:29.123"},{id:"s19",date:"2025-12-30",time:"18:00",type:"practice",track:"Paul Ricard",car:"Ford Mustang GT3",laps:22,stints:2,bestQualy:"1:54.567"},{id:"s20",date:"2025-12-30",time:"15:30",type:"practice",track:"Donington",car:"AMR V8 Vantage GT3",laps:16,stints:2,bestQualy:"1:30.234"},{id:"s21",date:"2025-12-30",time:"12:00",type:"practice",track:"Donington",car:"Ford Mustang GT3",laps:30,stints:3,bestQualy:"1:29.456",bestRace:"1:30.890"}],c=Gt(()=>[...new Set(l.map(v=>v.track))].sort()),h=Gt(()=>[...new Set(l.map(v=>v.car))].sort()),d=Gt(()=>l.filter(v=>{if(s.value!=="all"&&v.type!==s.value||i.value!=="all"&&v.track!==i.value||r.value!=="all"&&v.car!==r.value)return!1;if(o.value!=="all"){const w=new Date("2026-01-13"),M=new Date(v.date),E=Math.floor((w.getTime()-M.getTime())/(1e3*60*60*24));if(o.value==="today"&&E>0||o.value==="7d"&&E>7||o.value==="30d"&&E>30)return!1}return!0})),f=Gt(()=>{const v={};for(const w of d.value)v[w.date]||(v[w.date]=[]),v[w.date].push(w);return Object.entries(v).sort(([w],[M])=>M.localeCompare(w)).map(([w,M])=>({date:w,sessions:M}))});function p(v){const w=new Date(v),M=w.getDate(),x=["GENNAIO","FEBBRAIO","MARZO","APRILE","MAGGIO","GIUGNO","LUGLIO","AGOSTO","SETTEMBRE","OTTOBRE","NOVEMBRE","DICEMBRE"][w.getMonth()],O=w.getFullYear();return`${M} ${x} ${O}`}function _(v){return{practice:"PRACTICE",qualify:"QUALIFY",race:"RACE"}[v]}function y(v){n("go-to-session",v)}return(v,w)=>{const M=Su;return H(),Kt(M,null,{default:ke(()=>[w[19]||(w[19]=I("h1",{class:"page-title"},"SESSIONI",-1)),I("div",M6,[I("div",D6,[I("div",O6,[I("div",L6,[I("button",{class:Rt(["seg-btn",{"seg-btn--active":s.value==="all"}]),onClick:w[0]||(w[0]=E=>s.value="all")},"Tutto",2),I("button",{class:Rt(["seg-btn","seg-btn--practice",{"seg-btn--active":s.value==="practice"}]),onClick:w[1]||(w[1]=E=>s.value="practice")},"Practice",2),I("button",{class:Rt(["seg-btn","seg-btn--qualify",{"seg-btn--active":s.value==="qualify"}]),onClick:w[2]||(w[2]=E=>s.value="qualify")},"Qualify",2),I("button",{class:Rt(["seg-btn","seg-btn--race",{"seg-btn--active":s.value==="race"}]),onClick:w[3]||(w[3]=E=>s.value="race")},"Race",2)])]),I("div",N6,[ki(I("select",{"onUpdate:modelValue":w[4]||(w[4]=E=>i.value=E),class:"filter-select"},[w[12]||(w[12]=I("option",{value:"all"},"Tutte le piste",-1)),(H(!0),J(bt,null,ln(c.value,E=>(H(),J("option",{key:E,value:E},G(E),9,V6))),128))],512),[[qg,i.value]])]),I("div",F6,[ki(I("select",{"onUpdate:modelValue":w[5]||(w[5]=E=>r.value=E),class:"filter-select"},[w[13]||(w[13]=I("option",{value:"all"},"Tutte le auto",-1)),(H(!0),J(bt,null,ln(h.value,E=>(H(),J("option",{key:E,value:E},G(E),9,U6))),128))],512),[[qg,r.value]])]),I("div",$6,[I("div",B6,[I("button",{class:Rt(["seg-btn",{"seg-btn--active":o.value==="today"}]),onClick:w[6]||(w[6]=E=>o.value="today")},"Oggi",2),I("button",{class:Rt(["seg-btn",{"seg-btn--active":o.value==="7d"}]),onClick:w[7]||(w[7]=E=>o.value="7d")},"7g",2),I("button",{class:Rt(["seg-btn",{"seg-btn--active":o.value==="30d"}]),onClick:w[8]||(w[8]=E=>o.value="30d")},"30g",2),I("button",{class:Rt(["seg-btn",{"seg-btn--active":o.value==="all"}]),onClick:w[9]||(w[9]=E=>o.value="all")},"Tutto",2)])])]),I("div",H6,[I("div",j6,[I("button",{class:Rt(["view-btn",{"view-btn--active":a.value==="list"}]),onClick:w[10]||(w[10]=E=>a.value="list"),title:"Vista lista"},[...w[14]||(w[14]=[I("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[I("path",{d:"M8 6h13M8 12h13M8 18h13M3 6h.01M3 12h.01M3 18h.01"})],-1)])],2),I("button",{class:Rt(["view-btn",{"view-btn--active":a.value==="card"}]),onClick:w[11]||(w[11]=E=>a.value="card"),title:"Vista card"},[...w[15]||(w[15]=[I("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[I("rect",{x:"3",y:"3",width:"7",height:"7",rx:"1"}),I("rect",{x:"14",y:"3",width:"7",height:"7",rx:"1"}),I("rect",{x:"3",y:"14",width:"7",height:"7",rx:"1"}),I("rect",{x:"14",y:"14",width:"7",height:"7",rx:"1"})],-1)])],2)])])]),f.value.length===0?(H(),J("div",z6,[...w[16]||(w[16]=[I("p",null,"Nessuna sessione trovata con i filtri selezionati.",-1)])])):a.value==="list"?(H(),J("div",W6,[(H(!0),J(bt,null,ln(f.value,E=>(H(),J("div",{key:E.date,class:"day-group"},[I("div",q6,[I("span",G6,G(p(E.date)),1),I("span",K6,G(E.sessions.length)+" sessioni",1)]),I("div",Q6,[(H(!0),J(bt,null,ln(E.sessions,x=>(H(),J("div",{key:x.id,class:"session-row",onClick:O=>y(x.id)},[I("div",X6,[I("span",{class:Rt(["session-chip",`session-chip--${x.type}`])},G(_(x.type)),3),I("span",J6,G(x.time),1),I("span",Z6,G(x.track),1),I("span",t3,G(x.car),1)]),I("div",e3,[I("div",n3,[I("span",s3,"GIRI "+G(x.laps),1),I("span",i3,"STINT "+G(x.stints),1)]),I("div",r3,[x.bestQualy?(H(),J("span",o3," Q "+G(x.bestQualy),1)):(H(),J("span",a3," Q  "))]),I("div",l3,[x.bestRace?(H(),J("span",c3," R "+G(x.bestRace),1)):(H(),J("span",u3," R  "))]),w[17]||(w[17]=I("span",{class:"session-cta"},[I("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[I("path",{d:"M9 18l6-6-6-6"})])],-1))])],8,Y6))),128))])]))),128))])):(H(),J("div",h3,[(H(!0),J(bt,null,ln(f.value,E=>(H(),J("div",{key:E.date,class:"day-card"},[I("div",d3,[I("div",f3,[I("span",p3,G(p(E.date)),1),I("span",g3,G(E.sessions.length)+" sessioni",1)])]),I("div",m3,[(H(!0),J(bt,null,ln(E.sessions,x=>(H(),J("div",{key:x.id,class:"card-session-row",onClick:O=>y(x.id)},[I("span",{class:Rt(["session-chip",`session-chip--${x.type}`])},G(_(x.type)),3),I("span",y3,G(x.time),1),I("span",v3,G(x.track),1),I("span",b3,G(x.car),1),I("div",w3,[I("span",T3,"GIRI "+G(x.laps),1),I("span",E3,"STINT "+G(x.stints),1)]),I("div",I3,[x.bestQualy?(H(),J("span",S3," Q "+G(x.bestQualy),1)):(H(),J("span",A3," Q  "))]),I("div",k3,[x.bestRace?(H(),J("span",C3," R "+G(x.bestRace),1)):(H(),J("span",x3," R  "))]),w[18]||(w[18]=I("span",{class:"session-cta"},[I("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[I("path",{d:"M9 18l6-6-6-6"})])],-1))],8,_3))),128))])]))),128))]))]),_:1})}}}),P3=Object.assign(Zt(R3,[["__scopeId","data-v-b83b6813"]]),{__name:"PagesSessioniPage"}),M3={class:"tracks-grid"},D3={class:"track-name"},O3={class:"track-stats"},L3=Vt({__name:"PistePage",setup(e){const t=[{name:"Spa",hours:"--",bestQ:"--",bestR:"--"},{name:"Monza",hours:"--",bestQ:"--",bestR:"--"},{name:"Nrburgring",hours:"--",bestQ:"--",bestR:"--"},{name:"Imola",hours:"--",bestQ:"--",bestR:"--"},{name:"Barcelona",hours:"--",bestQ:"--",bestR:"--"},{name:"Silverstone",hours:"--",bestQ:"--",bestR:"--"}];return(n,s)=>{const i=Su;return H(),Kt(i,null,{default:ke(()=>[s[0]||(s[0]=I("h1",{class:"page-title"},"Piste",-1)),I("div",M3,[(H(),J(bt,null,ln(t,r=>I("div",{key:r.name,class:"track-card"},[I("h3",D3,G(r.name),1),I("div",O3,[I("span",null,"Ore: "+G(r.hours),1),I("span",null,"Best Q: "+G(r.bestQ),1),I("span",null,"Best R: "+G(r.bestR),1)])])),64))])]),_:1})}}}),N3=Object.assign(Zt(L3,[["__scopeId","data-v-3010ceb5"]]),{__name:"PagesPistePage"}),V3={class:"topbar"},F3={class:"topbar__inner"},U3={class:"topbar__user"},$3=Vt({__name:"TopBar",props:{userName:{}},emits:["logout","goToProfile"],setup(e,{emit:t}){const n=e,s=t,i=Gt(()=>n.userName||"Utente");return(r,o)=>{const a=ET;return H(),J("header",V3,[I("div",F3,[o[2]||(o[2]=I("div",{class:"topbar__brand"},[I("span",{class:"brand-badge"},"ACC"),I("span",{class:"brand-name"},"TELEMETRY")],-1)),o[3]||(o[3]=I("div",{class:"topbar__spacer"},null,-1)),I("div",U3,[ht(a,{"user-name":Ht(i),onLogout:o[0]||(o[0]=l=>s("logout")),onGoToProfile:o[1]||(o[1]=l=>s("goToProfile"))},null,8,["user-name"])])])])}}}),B3=Object.assign(Zt($3,[["__scopeId","data-v-1f932a7f"]]),{__name:"LayoutTopBar"}),H3={class:"tabsbar"},j3={class:"tabsbar__inner"},z3=["onClick"],W3=Vt({__name:"TabsBar",props:{activeTab:{}},emits:["navigate"],setup(e,{emit:t}){const n=t,s=[{id:"panoramica",label:"PANORAMICA"},{id:"sessioni",label:"SESSIONI"},{id:"piste",label:"PISTE"}];return(i,r)=>(H(),J("nav",H3,[I("div",j3,[(H(),J(bt,null,ln(s,o=>I("button",{key:o.id,class:Rt(["tab",{"tab--active":e.activeTab===o.id}]),onClick:a=>n("navigate",o.id)},G(o.label),11,z3)),64))])]))}}),q3=Object.assign(Zt(W3,[["__scopeId","data-v-8662b1e4"]]),{__name:"LayoutTabsBar"}),G3={class:"main-layout"},K3={class:"main-content"},Q3=Vt({__name:"MainLayout",props:{userName:{},activeTab:{}},emits:["logout","goToProfile","navigate"],setup(e,{emit:t}){const n=t;return(s,i)=>{const r=B3,o=q3;return H(),J("div",G3,[ht(r,{"user-name":e.userName,onLogout:i[0]||(i[0]=a=>n("logout")),onGoToProfile:i[1]||(i[1]=a=>n("goToProfile"))},null,8,["user-name"]),ht(o,{"active-tab":e.activeTab,onNavigate:i[2]||(i[2]=a=>n("navigate",a))},null,8,["active-tab"]),I("main",K3,[Zd(s.$slots,"default",{},void 0)])])}}}),Y3=Object.assign(Zt(Q3,[["__scopeId","data-v-89f8b09a"]]),{__name:"LayoutMainLayout"}),X3=Vt({__name:"DashboardMain",props:{userEmail:{},userNickname:{}},emits:["logout","goToProfile"],setup(e,{emit:t}){const n=e,s=t,i=lt("panoramica"),r=lt(null),o=h=>{i.value=h,r.value=null},a=h=>{r.value=h},l=()=>{r.value=null};qd("goToSession",a);const c=Gt(()=>n.userNickname?n.userNickname:n.userEmail?n.userEmail.split("@")[0]:"Utente");return(h,d)=>{const f=M5,p=P6,_=P3,y=N3,v=Y3;return H(),Kt(v,{"user-name":c.value,"active-tab":i.value,onLogout:d[0]||(d[0]=w=>s("logout")),onGoToProfile:d[1]||(d[1]=w=>s("goToProfile")),onNavigate:o},{default:ke(()=>[ht(tu,{name:"fade",mode:"out-in"},{default:ke(()=>[i.value==="sessioni"&&r.value?(H(),Kt(f,{key:"session-detail","session-id":r.value,onBack:l},null,8,["session-id"])):i.value==="panoramica"?(H(),Kt(p,{key:"panoramica"})):i.value==="sessioni"?(H(),Kt(_,{key:"sessioni",onGoToSession:a})):i.value==="piste"?(H(),Kt(y,{key:"piste"})):Le("",!0)]),_:1})]),_:1},8,["user-name","active-tab"])}}}),J3=Object.assign(Zt(X3,[["__scopeId","data-v-eaeab76e"]]),{__name:"DashboardMain"}),Z3=Yk(tC),tU={id:"app"},eU={key:"register-success",class:"auth-wrapper"},nU={class:"auth-card-standalone"},sU={key:"loading",class:"loading-screen"},iU="dissolve-fade-zoom",rU=Vt({__name:"app",setup(e){const{currentUser:t,userDisplayName:n,logout:s}=Iu(),i=lt("auth"),r=lt("login"),o=lt(""),a=lt(!1);jo(t,y=>{y&&(o.value=y.email||"",a.value&&!y.emailVerified?(i.value!=="auth"||r.value!=="register-success")&&(i.value="auth",r.value="register-success"):i.value==="auth"&&r.value!=="register-success"&&(i.value="loading",setTimeout(()=>{i.value="dashboard"},1e3)))});const l=y=>{if(o.value=y,a.value&&t.value&&!t.value.emailVerified){r.value="register-success";return}i.value="loading",setTimeout(()=>{i.value="dashboard"},1500)},c=y=>{o.value=y,a.value?r.value="register-success":(i.value="loading",setTimeout(()=>{i.value="dashboard"},1500))},h=()=>{i.value="loading",setTimeout(()=>{i.value="dashboard"},1500)},d=()=>{console.log("[AUTH] Resending verification email to:",o.value)},f=async()=>{await s(),o.value="",r.value="login",i.value="auth"},p=()=>{i.value="profile"},_=()=>{i.value="dashboard"};return(y,v)=>{const w=Z3,M=$O,E=KO,x=TL,O=J3;return H(),J("div",tU,[ht(w),ht(tu,{name:iU,mode:"out-in"},{default:ke(()=>[i.value==="auth"&&r.value!=="register-success"?(H(),Kt(M,{key:"auth",onLoginSuccess:l,onRegisterSuccess:c})):i.value==="auth"&&r.value==="register-success"?(H(),J("div",eU,[I("div",nU,[ht(E,{email:o.value,"require-email-verification":a.value,onGoToDashboard:h,onResendEmail:d},null,8,["email","require-email-verification"])])])):i.value==="loading"?(H(),J("div",sU,[...v[0]||(v[0]=[I("div",{class:"loading-content"},[I("div",{class:"loading-spinner"}),I("p",{class:"loading-text"},"Caricamento Dashboard...")],-1)])])):i.value==="profile"?(H(),Kt(x,{key:"profile","user-email":o.value,"user-nickname":Ht(n),onLogout:f,onBack:_},null,8,["user-email","user-nickname"])):(H(),Kt(O,{key:"dashboard","user-email":o.value,"user-nickname":Ht(n),onLogout:f,onGoToProfile:p},null,8,["user-email","user-nickname"]))]),_:1})])}}}),oU={__name:"nuxt-error-page",props:{error:Object},setup(e){const n=e.error,s=Number(n.statusCode||500),i=s===404,r=n.statusMessage??(i?"Page Not Found":"Internal Server Error"),o=n.message||n.toString(),a=void 0,h=i?mg(()=>Mc(()=>import("./D5bvFVRE.js"),__vite__mapDeps([0,1]),import.meta.url)):mg(()=>Mc(()=>import("./C4JqV51I.js"),__vite__mapDeps([2,3]),import.meta.url));return(d,f)=>(H(),Kt(Ht(h),BE(fb({statusCode:Ht(s),statusMessage:Ht(r),description:Ht(o),stack:Ht(a)})),null,16))}},aU={key:0},tv={__name:"nuxt-root",setup(e){const t=()=>null,n=pe(),s=n.deferHydration();if(n.isHydrating){const c=n.hooks.hookOnce("app:error",s);Fi().beforeEach(c)}const i=!1;qd(Ub,$b()),n.hooks.callHookWith(c=>c.map(h=>h()),"vue:setup");const r=lf(),o=!1,a=/bot\b|chrome-lighthouse|facebookexternalhit|google\b/i;Bv((c,h,d)=>{if(n.hooks.callHook("vue:error",c,h,d).catch(f=>console.error("[nuxt] Error in `vue:error` hook",f)),a.test(navigator.userAgent))return n.hooks.callHook("app:error",c),console.error(`[nuxt] Not rendering error page for bot with user agent \`${navigator.userAgent}\`:`,c),!1;if($A(c)&&(c.fatal||c.unhandled))return n.runWithContext(()=>FA(c)),!1});const l=!1;return(c,h)=>(H(),Kt(wI,{onResolve:Ht(s)},{default:ke(()=>[Ht(o)?(H(),J("div",aU)):Ht(r)?(H(),Kt(Ht(oU),{key:1,error:Ht(r)},null,8,["error"])):Ht(l)?(H(),Kt(Ht(t),{key:2,context:Ht(l)},null,8,["context"])):Ht(i)?(H(),Kt(K1(Ht(i)),{key:3})):(H(),Kt(Ht(rU),{key:4}))]),_:1},8,["onResolve"]))}};let ev;{let e;ev=async function(){if(e)return e;const n=!!(window.__NUXT__?.serverRendered??document.getElementById("__NUXT_DATA__")?.dataset.ssr==="true"),s=n?pS(tv):fS(tv),i=TA({vueApp:s});async function r(o){await i.callHook("app:error",o),i.payload.error||=cf(o)}s.config.errorHandler=r,i.hook("app:suspense:resolve",()=>{s.config.errorHandler===r&&(s.config.errorHandler=void 0)}),!n&&tm.id&&i.hook("app:suspense:resolve",()=>{document.getElementById(tm.id)?.remove()});try{await SA(i,qk)}catch(o){r(o)}try{await i.hooks.callHook("app:created",s),await i.hooks.callHook("app:beforeMount",s),s.mount(vA),await i.hooks.callHook("app:mounted",s),await Kc()}catch(o){r(o)}return s},e=ev().catch(t=>{throw console.error("Error while mounting app:",t),t})}export{uU as A,ht as B,ke as C,$t as D,Zt as _,I as a,Fi as b,J as c,Vt as d,pe as e,Ys as f,ff as g,dm as h,Qd as i,dU as j,wn as k,lU as l,VA as m,Gt as n,H as o,rf as p,Yr as q,lt as r,Vi as s,G as t,hU as u,eu as v,da as w,NA as x,qh as y,Eb as z};
