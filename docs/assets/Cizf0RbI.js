const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./CvKoEMZg.js","./error-404.BLrjNXsr.css","./B4tXrLKY.js","./error-500.DLkAwcfL.css"])))=>i.map(i=>d[i]);
(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function n(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(r){if(r.ep)return;r.ep=!0;const i=n(r);fetch(r.href,i)}})();function Cu(t){const e=Object.create(null);for(const n of t.split(","))e[n]=1;return n=>n in e}const Ve={},br=[],un=()=>{},Im=()=>!1,uo=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),Pu=t=>t.startsWith("onUpdate:"),ht=Object.assign,ku=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},pE=Object.prototype.hasOwnProperty,Pe=(t,e)=>pE.call(t,e),ae=Array.isArray,Ir=t=>ho(t)==="[object Map]",tl=t=>ho(t)==="[object Set]",$f=t=>ho(t)==="[object Date]",he=t=>typeof t=="function",qe=t=>typeof t=="string",Yt=t=>typeof t=="symbol",Ne=t=>t!==null&&typeof t=="object",Nu=t=>(Ne(t)||he(t))&&he(t.then)&&he(t.catch),Am=Object.prototype.toString,ho=t=>Am.call(t),mE=t=>ho(t).slice(8,-1),Rm=t=>ho(t)==="[object Object]",nl=t=>qe(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,Ar=Cu(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),sl=t=>{const e=Object.create(null);return(n=>e[n]||(e[n]=t(n)))},gE=/-\w/g,Wt=sl(t=>t.replace(gE,e=>e.slice(1).toUpperCase())),_E=/\B([A-Z])/g,tr=sl(t=>t.replace(_E,"-$1").toLowerCase()),rl=sl(t=>t.charAt(0).toUpperCase()+t.slice(1)),tc=sl(t=>t?`on${rl(t)}`:""),os=(t,e)=>!Object.is(t,e),sa=(t,...e)=>{for(let n=0;n<t.length;n++)t[n](...e)},Sm=(t,e,n,s=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:s,value:n})},il=t=>{const e=parseFloat(t);return isNaN(e)?t:e},Cm=t=>{const e=qe(t)?Number(t):NaN;return isNaN(e)?t:e};let Bf;const ol=()=>Bf||(Bf=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function kn(t){if(ae(t)){const e={};for(let n=0;n<t.length;n++){const s=t[n],r=qe(s)?TE(s):kn(s);if(r)for(const i in r)e[i]=r[i]}return e}else if(qe(t)||Ne(t))return t}const yE=/;(?![^(]*\))/g,vE=/:([^]+)/,EE=/\/\*[^]*?\*\//g;function TE(t){const e={};return t.replace(EE,"").split(yE).forEach(n=>{if(n){const s=n.split(vE);s.length>1&&(e[s[0].trim()]=s[1].trim())}}),e}function Me(t){let e="";if(qe(t))e=t;else if(ae(t))for(let n=0;n<t.length;n++){const s=Me(t[n]);s&&(e+=s+" ")}else if(Ne(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}function wE(t){if(!t)return null;let{class:e,style:n}=t;return e&&!qe(e)&&(t.class=Me(e)),n&&(t.style=kn(n)),t}const bE="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",IE=Cu(bE);function Pm(t){return!!t||t===""}function AE(t,e){if(t.length!==e.length)return!1;let n=!0;for(let s=0;n&&s<t.length;s++)n=al(t[s],e[s]);return n}function al(t,e){if(t===e)return!0;let n=$f(t),s=$f(e);if(n||s)return n&&s?t.getTime()===e.getTime():!1;if(n=Yt(t),s=Yt(e),n||s)return t===e;if(n=ae(t),s=ae(e),n||s)return n&&s?AE(t,e):!1;if(n=Ne(t),s=Ne(e),n||s){if(!n||!s)return!1;const r=Object.keys(t).length,i=Object.keys(e).length;if(r!==i)return!1;for(const o in t){const l=t.hasOwnProperty(o),c=e.hasOwnProperty(o);if(l&&!c||!l&&c||!al(t[o],e[o]))return!1}}return String(t)===String(e)}function RE(t,e){return t.findIndex(n=>al(n,e))}const km=t=>!!(t&&t.__v_isRef===!0),te=t=>qe(t)?t:t==null?"":ae(t)||Ne(t)&&(t.toString===Am||!he(t.toString))?km(t)?te(t.value):JSON.stringify(t,Nm,2):String(t),Nm=(t,e)=>km(e)?Nm(t,e.value):Ir(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[s,r],i)=>(n[nc(s,i)+" =>"]=r,n),{})}:tl(e)?{[`Set(${e.size})`]:[...e.values()].map(n=>nc(n))}:Yt(e)?nc(e):Ne(e)&&!ae(e)&&!Rm(e)?String(e):e,nc=(t,e="")=>{var n;return Yt(t)?`Symbol(${(n=t.description)!=null?n:e})`:t};let Et;class Dm{constructor(e=!1){this.detached=e,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Et,!e&&Et&&(this.index=(Et.scopes||(Et.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].pause();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].resume();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].resume()}}run(e){if(this._active){const n=Et;try{return Et=this,e()}finally{Et=n}}}on(){++this._on===1&&(this.prevScope=Et,Et=this)}off(){this._on>0&&--this._on===0&&(Et=this.prevScope,this.prevScope=void 0)}stop(e){if(this._active){this._active=!1;let n,s;for(n=0,s=this.effects.length;n<s;n++)this.effects[n].stop();for(this.effects.length=0,n=0,s=this.cleanups.length;n<s;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,s=this.scopes.length;n<s;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const r=this.parent.scopes.pop();r&&r!==this&&(this.parent.scopes[this.index]=r,r.index=this.index)}this.parent=void 0}}}function SE(t){return new Dm(t)}function Du(){return Et}function CE(t,e=!1){Et&&Et.cleanups.push(t)}let xe;const sc=new WeakSet;class Om{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Et&&Et.active&&Et.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,sc.has(this)&&(sc.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||xm(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,jf(this),Mm(this);const e=xe,n=zt;xe=this,zt=!0;try{return this.fn()}finally{Lm(this),xe=e,zt=n,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)xu(e);this.deps=this.depsTail=void 0,jf(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?sc.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Dc(this)&&this.run()}get dirty(){return Dc(this)}}let Vm=0,Vi,xi;function xm(t,e=!1){if(t.flags|=8,e){t.next=xi,xi=t;return}t.next=Vi,Vi=t}function Ou(){Vm++}function Vu(){if(--Vm>0)return;if(xi){let e=xi;for(xi=void 0;e;){const n=e.next;e.next=void 0,e.flags&=-9,e=n}}let t;for(;Vi;){let e=Vi;for(Vi=void 0;e;){const n=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(s){t||(t=s)}e=n}}if(t)throw t}function Mm(t){for(let e=t.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function Lm(t){let e,n=t.depsTail,s=n;for(;s;){const r=s.prevDep;s.version===-1?(s===n&&(n=r),xu(s),PE(s)):e=s,s.dep.activeLink=s.prevActiveLink,s.prevActiveLink=void 0,s=r}t.deps=e,t.depsTail=n}function Dc(t){for(let e=t.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(Fm(e.dep.computed)||e.dep.version!==e.version))return!0;return!!t._dirty}function Fm(t){if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===zi)||(t.globalVersion=zi,!t.isSSR&&t.flags&128&&(!t.deps&&!t._dirty||!Dc(t))))return;t.flags|=2;const e=t.dep,n=xe,s=zt;xe=t,zt=!0;try{Mm(t);const r=t.fn(t._value);(e.version===0||os(r,t._value))&&(t.flags|=128,t._value=r,e.version++)}catch(r){throw e.version++,r}finally{xe=n,zt=s,Lm(t),t.flags&=-3}}function xu(t,e=!1){const{dep:n,prevSub:s,nextSub:r}=t;if(s&&(s.nextSub=r,t.prevSub=void 0),r&&(r.prevSub=s,t.nextSub=void 0),n.subs===t&&(n.subs=s,!s&&n.computed)){n.computed.flags&=-5;for(let i=n.computed.deps;i;i=i.nextDep)xu(i,!0)}!e&&!--n.sc&&n.map&&n.map.delete(n.key)}function PE(t){const{prevDep:e,nextDep:n}=t;e&&(e.nextDep=n,t.prevDep=void 0),n&&(n.prevDep=e,t.nextDep=void 0)}let zt=!0;const Um=[];function Dn(){Um.push(zt),zt=!1}function On(){const t=Um.pop();zt=t===void 0?!0:t}function jf(t){const{cleanup:e}=t;if(t.cleanup=void 0,e){const n=xe;xe=void 0;try{e()}finally{xe=n}}}let zi=0;class kE{constructor(e,n){this.sub=e,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Mu{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(e){if(!xe||!zt||xe===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==xe)n=this.activeLink=new kE(xe,this),xe.deps?(n.prevDep=xe.depsTail,xe.depsTail.nextDep=n,xe.depsTail=n):xe.deps=xe.depsTail=n,$m(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const s=n.nextDep;s.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=s),n.prevDep=xe.depsTail,n.nextDep=void 0,xe.depsTail.nextDep=n,xe.depsTail=n,xe.deps===n&&(xe.deps=s)}return n}trigger(e){this.version++,zi++,this.notify(e)}notify(e){Ou();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{Vu()}}}function $m(t){if(t.dep.sc++,t.sub.flags&4){const e=t.dep.computed;if(e&&!t.dep.subs){e.flags|=20;for(let s=e.deps;s;s=s.nextDep)$m(s)}const n=t.dep.subs;n!==t&&(t.prevSub=n,n&&(n.nextSub=t)),t.dep.subs=t}}const ya=new WeakMap,js=Symbol(""),Oc=Symbol(""),Ki=Symbol("");function wt(t,e,n){if(zt&&xe){let s=ya.get(t);s||ya.set(t,s=new Map);let r=s.get(n);r||(s.set(n,r=new Mu),r.map=s,r.key=n),r.track()}}function Rn(t,e,n,s,r,i){const o=ya.get(t);if(!o){zi++;return}const l=c=>{c&&c.trigger()};if(Ou(),e==="clear")o.forEach(l);else{const c=ae(t),u=c&&nl(n);if(c&&n==="length"){const h=Number(s);o.forEach((d,m)=>{(m==="length"||m===Ki||!Yt(m)&&m>=h)&&l(d)})}else switch((n!==void 0||o.has(void 0))&&l(o.get(n)),u&&l(o.get(Ki)),e){case"add":c?u&&l(o.get("length")):(l(o.get(js)),Ir(t)&&l(o.get(Oc)));break;case"delete":c||(l(o.get(js)),Ir(t)&&l(o.get(Oc)));break;case"set":Ir(t)&&l(o.get(js));break}}Vu()}function NE(t,e){const n=ya.get(t);return n&&n.get(e)}function fr(t){const e=Re(t);return e===t?e:(wt(e,"iterate",Ki),Ut(t)?e:e.map(Xt))}function ll(t){return wt(t=Re(t),"iterate",Ki),t}function Xn(t,e){return gn(t)?as(t)?Mr(Xt(e)):Mr(e):Xt(e)}const DE={__proto__:null,[Symbol.iterator](){return rc(this,Symbol.iterator,t=>Xn(this,t))},concat(...t){return fr(this).concat(...t.map(e=>ae(e)?fr(e):e))},entries(){return rc(this,"entries",t=>(t[1]=Xn(this,t[1]),t))},every(t,e){return wn(this,"every",t,e,void 0,arguments)},filter(t,e){return wn(this,"filter",t,e,n=>n.map(s=>Xn(this,s)),arguments)},find(t,e){return wn(this,"find",t,e,n=>Xn(this,n),arguments)},findIndex(t,e){return wn(this,"findIndex",t,e,void 0,arguments)},findLast(t,e){return wn(this,"findLast",t,e,n=>Xn(this,n),arguments)},findLastIndex(t,e){return wn(this,"findLastIndex",t,e,void 0,arguments)},forEach(t,e){return wn(this,"forEach",t,e,void 0,arguments)},includes(...t){return ic(this,"includes",t)},indexOf(...t){return ic(this,"indexOf",t)},join(t){return fr(this).join(t)},lastIndexOf(...t){return ic(this,"lastIndexOf",t)},map(t,e){return wn(this,"map",t,e,void 0,arguments)},pop(){return Ai(this,"pop")},push(...t){return Ai(this,"push",t)},reduce(t,...e){return Hf(this,"reduce",t,e)},reduceRight(t,...e){return Hf(this,"reduceRight",t,e)},shift(){return Ai(this,"shift")},some(t,e){return wn(this,"some",t,e,void 0,arguments)},splice(...t){return Ai(this,"splice",t)},toReversed(){return fr(this).toReversed()},toSorted(t){return fr(this).toSorted(t)},toSpliced(...t){return fr(this).toSpliced(...t)},unshift(...t){return Ai(this,"unshift",t)},values(){return rc(this,"values",t=>Xn(this,t))}};function rc(t,e,n){const s=ll(t),r=s[e]();return s!==t&&!Ut(t)&&(r._next=r.next,r.next=()=>{const i=r._next();return i.done||(i.value=n(i.value)),i}),r}const OE=Array.prototype;function wn(t,e,n,s,r,i){const o=ll(t),l=o!==t&&!Ut(t),c=o[e];if(c!==OE[e]){const d=c.apply(t,i);return l?Xt(d):d}let u=n;o!==t&&(l?u=function(d,m){return n.call(this,Xn(t,d),m,t)}:n.length>2&&(u=function(d,m){return n.call(this,d,m,t)}));const h=c.call(o,u,s);return l&&r?r(h):h}function Hf(t,e,n,s){const r=ll(t);let i=n;return r!==t&&(Ut(t)?n.length>3&&(i=function(o,l,c){return n.call(this,o,l,c,t)}):i=function(o,l,c){return n.call(this,o,Xn(t,l),c,t)}),r[e](i,...s)}function ic(t,e,n){const s=Re(t);wt(s,"iterate",Ki);const r=s[e](...n);return(r===-1||r===!1)&&cl(n[0])?(n[0]=Re(n[0]),s[e](...n)):r}function Ai(t,e,n=[]){Dn(),Ou();const s=Re(t)[e].apply(t,n);return Vu(),On(),s}const VE=Cu("__proto__,__v_isRef,__isVue"),Bm=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(Yt));function xE(t){Yt(t)||(t=String(t));const e=Re(this);return wt(e,"has",t),e.hasOwnProperty(t)}class jm{constructor(e=!1,n=!1){this._isReadonly=e,this._isShallow=n}get(e,n,s){if(n==="__v_skip")return e.__v_skip;const r=this._isReadonly,i=this._isShallow;if(n==="__v_isReactive")return!r;if(n==="__v_isReadonly")return r;if(n==="__v_isShallow")return i;if(n==="__v_raw")return s===(r?i?WE:Gm:i?Wm:qm).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(s)?e:void 0;const o=ae(e);if(!r){let c;if(o&&(c=DE[n]))return c;if(n==="hasOwnProperty")return xE}const l=Reflect.get(e,n,et(e)?e:s);if((Yt(n)?Bm.has(n):VE(n))||(r||wt(e,"get",n),i))return l;if(et(l)){const c=o&&nl(n)?l:l.value;return r&&Ne(c)?xc(c):c}return Ne(l)?r?xc(l):ms(l):l}}class Hm extends jm{constructor(e=!1){super(!1,e)}set(e,n,s,r){let i=e[n];const o=ae(e)&&nl(n);if(!this._isShallow){const u=gn(i);if(!Ut(s)&&!gn(s)&&(i=Re(i),s=Re(s)),!o&&et(i)&&!et(s))return u||(i.value=s),!0}const l=o?Number(n)<e.length:Pe(e,n),c=Reflect.set(e,n,s,et(e)?e:r);return e===Re(r)&&(l?os(s,i)&&Rn(e,"set",n,s):Rn(e,"add",n,s)),c}deleteProperty(e,n){const s=Pe(e,n);e[n];const r=Reflect.deleteProperty(e,n);return r&&s&&Rn(e,"delete",n,void 0),r}has(e,n){const s=Reflect.has(e,n);return(!Yt(n)||!Bm.has(n))&&wt(e,"has",n),s}ownKeys(e){return wt(e,"iterate",ae(e)?"length":js),Reflect.ownKeys(e)}}class ME extends jm{constructor(e=!1){super(!0,e)}set(e,n){return!0}deleteProperty(e,n){return!0}}const LE=new Hm,FE=new ME,UE=new Hm(!0);const Vc=t=>t,$o=t=>Reflect.getPrototypeOf(t);function $E(t,e,n){return function(...s){const r=this.__v_raw,i=Re(r),o=Ir(i),l=t==="entries"||t===Symbol.iterator&&o,c=t==="keys"&&o,u=r[t](...s),h=n?Vc:e?Mr:Xt;return!e&&wt(i,"iterate",c?Oc:js),{next(){const{value:d,done:m}=u.next();return m?{value:d,done:m}:{value:l?[h(d[0]),h(d[1])]:h(d),done:m}},[Symbol.iterator](){return this}}}}function Bo(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function BE(t,e){const n={get(r){const i=this.__v_raw,o=Re(i),l=Re(r);t||(os(r,l)&&wt(o,"get",r),wt(o,"get",l));const{has:c}=$o(o),u=e?Vc:t?Mr:Xt;if(c.call(o,r))return u(i.get(r));if(c.call(o,l))return u(i.get(l));i!==o&&i.get(r)},get size(){const r=this.__v_raw;return!t&&wt(Re(r),"iterate",js),r.size},has(r){const i=this.__v_raw,o=Re(i),l=Re(r);return t||(os(r,l)&&wt(o,"has",r),wt(o,"has",l)),r===l?i.has(r):i.has(r)||i.has(l)},forEach(r,i){const o=this,l=o.__v_raw,c=Re(l),u=e?Vc:t?Mr:Xt;return!t&&wt(c,"iterate",js),l.forEach((h,d)=>r.call(i,u(h),u(d),o))}};return ht(n,t?{add:Bo("add"),set:Bo("set"),delete:Bo("delete"),clear:Bo("clear")}:{add(r){!e&&!Ut(r)&&!gn(r)&&(r=Re(r));const i=Re(this);return $o(i).has.call(i,r)||(i.add(r),Rn(i,"add",r,r)),this},set(r,i){!e&&!Ut(i)&&!gn(i)&&(i=Re(i));const o=Re(this),{has:l,get:c}=$o(o);let u=l.call(o,r);u||(r=Re(r),u=l.call(o,r));const h=c.call(o,r);return o.set(r,i),u?os(i,h)&&Rn(o,"set",r,i):Rn(o,"add",r,i),this},delete(r){const i=Re(this),{has:o,get:l}=$o(i);let c=o.call(i,r);c||(r=Re(r),c=o.call(i,r)),l&&l.call(i,r);const u=i.delete(r);return c&&Rn(i,"delete",r,void 0),u},clear(){const r=Re(this),i=r.size!==0,o=r.clear();return i&&Rn(r,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(r=>{n[r]=$E(r,t,e)}),n}function Lu(t,e){const n=BE(t,e);return(s,r,i)=>r==="__v_isReactive"?!t:r==="__v_isReadonly"?t:r==="__v_raw"?s:Reflect.get(Pe(n,r)&&r in s?n:s,r,i)}const jE={get:Lu(!1,!1)},HE={get:Lu(!1,!0)},qE={get:Lu(!0,!1)};const qm=new WeakMap,Wm=new WeakMap,Gm=new WeakMap,WE=new WeakMap;function GE(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function zE(t){return t.__v_skip||!Object.isExtensible(t)?0:GE(mE(t))}function ms(t){return gn(t)?t:Fu(t,!1,LE,jE,qm)}function vr(t){return Fu(t,!1,UE,HE,Wm)}function xc(t){return Fu(t,!0,FE,qE,Gm)}function Fu(t,e,n,s,r){if(!Ne(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const i=zE(t);if(i===0)return t;const o=r.get(t);if(o)return o;const l=new Proxy(t,i===2?s:n);return r.set(t,l),l}function as(t){return gn(t)?as(t.__v_raw):!!(t&&t.__v_isReactive)}function gn(t){return!!(t&&t.__v_isReadonly)}function Ut(t){return!!(t&&t.__v_isShallow)}function cl(t){return t?!!t.__v_raw:!1}function Re(t){const e=t&&t.__v_raw;return e?Re(e):t}function KE(t){return!Pe(t,"__v_skip")&&Object.isExtensible(t)&&Sm(t,"__v_skip",!0),t}const Xt=t=>Ne(t)?ms(t):t,Mr=t=>Ne(t)?xc(t):t;function et(t){return t?t.__v_isRef===!0:!1}function le(t){return zm(t,!1)}function Qi(t){return zm(t,!0)}function zm(t,e){return et(t)?t:new QE(t,e)}class QE{constructor(e,n){this.dep=new Mu,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?e:Re(e),this._value=n?e:Xt(e),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(e){const n=this._rawValue,s=this.__v_isShallow||Ut(e)||gn(e);e=s?e:Re(e),os(e,n)&&(this._rawValue=e,this._value=s?e:Xt(e),this.dep.trigger())}}function $e(t){return et(t)?t.value:t}function JE(t){return he(t)?t():$e(t)}const YE={get:(t,e,n)=>e==="__v_raw"?t:$e(Reflect.get(t,e,n)),set:(t,e,n,s)=>{const r=t[e];return et(r)&&!et(n)?(r.value=n,!0):Reflect.set(t,e,n,s)}};function Km(t){return as(t)?t:new Proxy(t,YE)}class XE{constructor(e,n,s){this._object=e,this._key=n,this._defaultValue=s,this.__v_isRef=!0,this._value=void 0,this._raw=Re(e);let r=!0,i=e;if(!ae(e)||!nl(String(n)))do r=!cl(i)||Ut(i);while(r&&(i=i.__v_raw));this._shallow=r}get value(){let e=this._object[this._key];return this._shallow&&(e=$e(e)),this._value=e===void 0?this._defaultValue:e}set value(e){if(this._shallow&&et(this._raw[this._key])){const n=this._object[this._key];if(et(n)){n.value=e;return}}this._object[this._key]=e}get dep(){return NE(this._raw,this._key)}}class ZE{constructor(e){this._getter=e,this.__v_isRef=!0,this.__v_isReadonly=!0,this._value=void 0}get value(){return this._value=this._getter()}}function eT(t,e,n){return et(t)?t:he(t)?new ZE(t):Ne(t)&&arguments.length>1?tT(t,e,n):le(t)}function tT(t,e,n){return new XE(t,e,n)}class nT{constructor(e,n,s){this.fn=e,this.setter=n,this._value=void 0,this.dep=new Mu(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=zi-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=s}notify(){if(this.flags|=16,!(this.flags&8)&&xe!==this)return xm(this,!0),!0}get value(){const e=this.dep.track();return Fm(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function sT(t,e,n=!1){let s,r;return he(t)?s=t:(s=t.get,r=t.set),new nT(s,r,n)}const jo={},va=new WeakMap;let Ms;function rT(t,e=!1,n=Ms){if(n){let s=va.get(n);s||va.set(n,s=[]),s.push(t)}}function iT(t,e,n=Ve){const{immediate:s,deep:r,once:i,scheduler:o,augmentJob:l,call:c}=n,u=O=>r?O:Ut(O)||r===!1||r===0?Sn(O,1):Sn(O);let h,d,m,g,v=!1,I=!1;if(et(t)?(d=()=>t.value,v=Ut(t)):as(t)?(d=()=>u(t),v=!0):ae(t)?(I=!0,v=t.some(O=>as(O)||Ut(O)),d=()=>t.map(O=>{if(et(O))return O.value;if(as(O))return u(O);if(he(O))return c?c(O,2):O()})):he(t)?e?d=c?()=>c(t,2):t:d=()=>{if(m){Dn();try{m()}finally{On()}}const O=Ms;Ms=h;try{return c?c(t,3,[g]):t(g)}finally{Ms=O}}:d=un,e&&r){const O=d,L=r===!0?1/0:r;d=()=>Sn(O(),L)}const D=Du(),k=()=>{h.stop(),D&&D.active&&ku(D.effects,h)};if(i&&e){const O=e;e=(...L)=>{O(...L),k()}}let M=I?new Array(t.length).fill(jo):jo;const R=O=>{if(!(!(h.flags&1)||!h.dirty&&!O))if(e){const L=h.run();if(r||v||(I?L.some((z,C)=>os(z,M[C])):os(L,M))){m&&m();const z=Ms;Ms=h;try{const C=[L,M===jo?void 0:I&&M[0]===jo?[]:M,g];M=L,c?c(e,3,C):e(...C)}finally{Ms=z}}}else h.run()};return l&&l(R),h=new Om(d),h.scheduler=o?()=>o(R,!1):R,g=O=>rT(O,!1,h),m=h.onStop=()=>{const O=va.get(h);if(O){if(c)c(O,4);else for(const L of O)L();va.delete(h)}},e?s?R(!0):M=h.run():o?o(R.bind(null,!0),!0):h.run(),k.pause=h.pause.bind(h),k.resume=h.resume.bind(h),k.stop=k,k}function Sn(t,e=1/0,n){if(e<=0||!Ne(t)||t.__v_skip||(n=n||new Map,(n.get(t)||0)>=e))return t;if(n.set(t,e),e--,et(t))Sn(t.value,e,n);else if(ae(t))for(let s=0;s<t.length;s++)Sn(t[s],e,n);else if(tl(t)||Ir(t))t.forEach(s=>{Sn(s,e,n)});else if(Rm(t)){for(const s in t)Sn(t[s],e,n);for(const s of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,s)&&Sn(t[s],e,n)}return t}function fo(t,e,n,s){try{return s?t(...s):t()}catch(r){Jr(r,e,n)}}function Zt(t,e,n,s){if(he(t)){const r=fo(t,e,n,s);return r&&Nu(r)&&r.catch(i=>{Jr(i,e,n)}),r}if(ae(t)){const r=[];for(let i=0;i<t.length;i++)r.push(Zt(t[i],e,n,s));return r}}function Jr(t,e,n,s=!0){const r=e?e.vnode:null,{errorHandler:i,throwUnhandledErrorInProduction:o}=e&&e.appContext.config||Ve;if(e){let l=e.parent;const c=e.proxy,u=`https://vuejs.org/error-reference/#runtime-${n}`;for(;l;){const h=l.ec;if(h){for(let d=0;d<h.length;d++)if(h[d](t,c,u)===!1)return}l=l.parent}if(i){Dn(),fo(i,null,10,[t,c,u]),On();return}}oT(t,n,r,s,o)}function oT(t,e,n,s=!0,r=!1){if(r)throw t;console.error(t)}const St=[];let rn=-1;const Rr=[];let Zn=null,pr=0;const Qm=Promise.resolve();let Ea=null;function Uu(t){const e=Ea||Qm;return t?e.then(this?t.bind(this):t):e}function aT(t){let e=rn+1,n=St.length;for(;e<n;){const s=e+n>>>1,r=St[s],i=Ji(r);i<t||i===t&&r.flags&2?e=s+1:n=s}return e}function $u(t){if(!(t.flags&1)){const e=Ji(t),n=St[St.length-1];!n||!(t.flags&2)&&e>=Ji(n)?St.push(t):St.splice(aT(e),0,t),t.flags|=1,Jm()}}function Jm(){Ea||(Ea=Qm.then(Ym))}function Mc(t){ae(t)?Rr.push(...t):Zn&&t.id===-1?Zn.splice(pr+1,0,t):t.flags&1||(Rr.push(t),t.flags|=1),Jm()}function qf(t,e,n=rn+1){for(;n<St.length;n++){const s=St[n];if(s&&s.flags&2){if(t&&s.id!==t.uid)continue;St.splice(n,1),n--,s.flags&4&&(s.flags&=-2),s(),s.flags&4||(s.flags&=-2)}}}function Ta(t){if(Rr.length){const e=[...new Set(Rr)].sort((n,s)=>Ji(n)-Ji(s));if(Rr.length=0,Zn){Zn.push(...e);return}for(Zn=e,pr=0;pr<Zn.length;pr++){const n=Zn[pr];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}Zn=null,pr=0}}const Ji=t=>t.id==null?t.flags&2?-1:1/0:t.id;function Ym(t){try{for(rn=0;rn<St.length;rn++){const e=St[rn];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),fo(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;rn<St.length;rn++){const e=St[rn];e&&(e.flags&=-2)}rn=-1,St.length=0,Ta(),Ea=null,(St.length||Rr.length)&&Ym()}}let gt=null,Xm=null;function wa(t){const e=gt;return gt=t,Xm=t&&t.type.__scopeId||null,e}function _t(t,e=gt,n){if(!e||t._n)return t;const s=(...r)=>{s._d&&Aa(-1);const i=wa(e);let o;try{o=t(...r)}finally{wa(i),s._d&&Aa(1)}return o};return s._n=!0,s._c=!0,s._d=!0,s}function $s(t,e){if(gt===null)return t;const n=pl(gt),s=t.dirs||(t.dirs=[]);for(let r=0;r<e.length;r++){let[i,o,l,c=Ve]=e[r];i&&(he(i)&&(i={mounted:i,updated:i}),i.deep&&Sn(o),s.push({dir:i,instance:n,value:o,oldValue:void 0,arg:l,modifiers:c}))}return t}function on(t,e,n,s){const r=t.dirs,i=e&&e.dirs;for(let o=0;o<r.length;o++){const l=r[o];i&&(l.oldValue=i[o].value);let c=l.dir[s];c&&(Dn(),Zt(c,n,8,[t.el,l,t,e]),On())}}function Bu(t,e){if(mt){let n=mt.provides;const s=mt.parent&&mt.parent.provides;s===n&&(n=mt.provides=Object.create(s)),n[t]=e}}function Hs(t,e,n=!1){const s=Yr();if(s||Ws){let r=Ws?Ws._context.provides:s?s.parent==null||s.ce?s.vnode.appContext&&s.vnode.appContext.provides:s.parent.provides:void 0;if(r&&t in r)return r[t];if(arguments.length>1)return n&&he(e)?e.call(s&&s.proxy):e}}function ul(){return!!(Yr()||Ws)}const lT=Symbol.for("v-scx"),cT=()=>Hs(lT);function uT(t,e){return ju(t,null,e)}function ra(t,e,n){return ju(t,e,n)}function ju(t,e,n=Ve){const{immediate:s,deep:r,flush:i,once:o}=n,l=ht({},n),c=e&&s||!e&&i!=="post";let u;if($r){if(i==="sync"){const g=cT();u=g.__watcherHandles||(g.__watcherHandles=[])}else if(!c){const g=()=>{};return g.stop=un,g.resume=un,g.pause=un,g}}const h=mt;l.call=(g,v,I)=>Zt(g,h,v,I);let d=!1;i==="post"?l.scheduler=g=>{Pt(g,h&&h.suspense)}:i!=="sync"&&(d=!0,l.scheduler=(g,v)=>{v?g():$u(g)}),l.augmentJob=g=>{e&&(g.flags|=4),d&&(g.flags|=2,h&&(g.id=h.uid,g.i=h))};const m=iT(t,e,l);return $r&&(u?u.push(m):c&&m()),m}function hT(t,e,n){const s=this.proxy,r=qe(t)?t.includes(".")?Zm(s,t):()=>s[t]:t.bind(s,s);let i;he(e)?i=e:(i=e.handler,n=e);const o=mo(this),l=ju(r,i.bind(s),n);return o(),l}function Zm(t,e){const n=e.split(".");return()=>{let s=t;for(let r=0;r<n.length&&s;r++)s=s[n[r]];return s}}const fT=Symbol("_vte"),eg=t=>t.__isTeleport,An=Symbol("_leaveCb"),Ho=Symbol("_enterCb");function dT(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Lr(()=>{t.isMounted=!0}),qu(()=>{t.isUnmounting=!0}),t}const Bt=[Function,Array],tg={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Bt,onEnter:Bt,onAfterEnter:Bt,onEnterCancelled:Bt,onBeforeLeave:Bt,onLeave:Bt,onAfterLeave:Bt,onLeaveCancelled:Bt,onBeforeAppear:Bt,onAppear:Bt,onAfterAppear:Bt,onAppearCancelled:Bt},ng=t=>{const e=t.subTree;return e.component?ng(e.component):e},pT={name:"BaseTransition",props:tg,setup(t,{slots:e}){const n=Yr(),s=dT();return()=>{const r=e.default&&ig(e.default(),!0);if(!r||!r.length)return;const i=sg(r),o=Re(t),{mode:l}=o;if(s.isLeaving)return oc(i);const c=Wf(i);if(!c)return oc(i);let u=Lc(c,o,s,n,d=>u=d);c.type!==rt&&Yi(c,u);let h=n.subTree&&Wf(n.subTree);if(h&&h.type!==rt&&!cn(h,c)&&ng(n).type!==rt){let d=Lc(h,o,s,n);if(Yi(h,d),l==="out-in"&&c.type!==rt)return s.isLeaving=!0,d.afterLeave=()=>{s.isLeaving=!1,n.job.flags&8||n.update(),delete d.afterLeave,h=void 0},oc(i);l==="in-out"&&c.type!==rt?d.delayLeave=(m,g,v)=>{const I=rg(s,h);I[String(h.key)]=h,m[An]=()=>{g(),m[An]=void 0,delete u.delayedLeave,h=void 0},u.delayedLeave=()=>{v(),delete u.delayedLeave,h=void 0}}:h=void 0}else h&&(h=void 0);return i}}};function sg(t){let e=t[0];if(t.length>1){for(const n of t)if(n.type!==rt){e=n;break}}return e}const mT=pT;function rg(t,e){const{leavingVNodes:n}=t;let s=n.get(e.type);return s||(s=Object.create(null),n.set(e.type,s)),s}function Lc(t,e,n,s,r){const{appear:i,mode:o,persisted:l=!1,onBeforeEnter:c,onEnter:u,onAfterEnter:h,onEnterCancelled:d,onBeforeLeave:m,onLeave:g,onAfterLeave:v,onLeaveCancelled:I,onBeforeAppear:D,onAppear:k,onAfterAppear:M,onAppearCancelled:R}=e,O=String(t.key),L=rg(n,t),z=(y,b)=>{y&&Zt(y,s,9,b)},C=(y,b)=>{const S=b[1];z(y,b),ae(y)?y.every(A=>A.length<=1)&&S():y.length<=1&&S()},T={mode:o,persisted:l,beforeEnter(y){let b=c;if(!n.isMounted)if(i)b=D||c;else return;y[An]&&y[An](!0);const S=L[O];S&&cn(t,S)&&S.el[An]&&S.el[An](),z(b,[y])},enter(y){let b=u,S=h,A=d;if(!n.isMounted)if(i)b=k||u,S=M||h,A=R||d;else return;let w=!1;const pe=y[Ho]=Ae=>{w||(w=!0,Ae?z(A,[y]):z(S,[y]),T.delayedLeave&&T.delayedLeave(),y[Ho]=void 0)};b?C(b,[y,pe]):pe()},leave(y,b){const S=String(t.key);if(y[Ho]&&y[Ho](!0),n.isUnmounting)return b();z(m,[y]);let A=!1;const w=y[An]=pe=>{A||(A=!0,b(),pe?z(I,[y]):z(v,[y]),y[An]=void 0,L[S]===t&&delete L[S])};L[S]=t,g?C(g,[y,w]):w()},clone(y){const b=Lc(y,e,n,s,r);return r&&r(b),b}};return T}function oc(t){if(po(t))return t=Kt(t),t.children=null,t}function Wf(t){if(!po(t))return eg(t.type)&&t.children?sg(t.children):t;if(t.component)return t.component.subTree;const{shapeFlag:e,children:n}=t;if(n){if(e&16)return n[0];if(e&32&&he(n.default))return n.default()}}function Yi(t,e){t.shapeFlag&6&&t.component?(t.transition=e,Yi(t.component.subTree,e)):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function ig(t,e=!1,n){let s=[],r=0;for(let i=0;i<t.length;i++){let o=t[i];const l=n==null?o.key:String(n)+String(o.key!=null?o.key:i);o.type===Ie?(o.patchFlag&128&&r++,s=s.concat(ig(o.children,e,l))):(e||o.type!==rt)&&s.push(l!=null?Kt(o,{key:l}):o)}if(r>1)for(let i=0;i<s.length;i++)s[i].patchFlag=-2;return s}function Fe(t,e){return he(t)?ht({name:t.name},e,{setup:t}):t}function Hu(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}const ba=new WeakMap;function Sr(t,e,n,s,r=!1){if(ae(t)){t.forEach((v,I)=>Sr(v,e&&(ae(e)?e[I]:e),n,s,r));return}if(qs(s)&&!r){s.shapeFlag&512&&s.type.__asyncResolved&&s.component.subTree.component&&Sr(t,e,n,s.component.subTree);return}const i=s.shapeFlag&4?pl(s.component):s.el,o=r?null:i,{i:l,r:c}=t,u=e&&e.r,h=l.refs===Ve?l.refs={}:l.refs,d=l.setupState,m=Re(d),g=d===Ve?Im:v=>Pe(m,v);if(u!=null&&u!==c){if(Gf(e),qe(u))h[u]=null,g(u)&&(d[u]=null);else if(et(u)){u.value=null;const v=e;v.k&&(h[v.k]=null)}}if(he(c))fo(c,l,12,[o,h]);else{const v=qe(c),I=et(c);if(v||I){const D=()=>{if(t.f){const k=v?g(c)?d[c]:h[c]:c.value;if(r)ae(k)&&ku(k,i);else if(ae(k))k.includes(i)||k.push(i);else if(v)h[c]=[i],g(c)&&(d[c]=h[c]);else{const M=[i];c.value=M,t.k&&(h[t.k]=M)}}else v?(h[c]=o,g(c)&&(d[c]=o)):I&&(c.value=o,t.k&&(h[t.k]=o))};if(o){const k=()=>{D(),ba.delete(t)};k.id=-1,ba.set(t,k),Pt(k,n)}else Gf(t),D()}}}function Gf(t){const e=ba.get(t);e&&(e.flags|=8,ba.delete(t))}let zf=!1;const dr=()=>{zf||(console.error("Hydration completed but contains mismatches."),zf=!0)},gT=t=>t.namespaceURI.includes("svg")&&t.tagName!=="foreignObject",_T=t=>t.namespaceURI.includes("MathML"),qo=t=>{if(t.nodeType===1){if(gT(t))return"svg";if(_T(t))return"mathml"}},Er=t=>t.nodeType===8;function yT(t){const{mt:e,p:n,o:{patchProp:s,createText:r,nextSibling:i,parentNode:o,remove:l,insert:c,createComment:u}}=t,h=(R,O)=>{if(!O.hasChildNodes()){n(null,R,O),Ta(),O._vnode=R;return}d(O.firstChild,R,null,null,null),Ta(),O._vnode=R},d=(R,O,L,z,C,T=!1)=>{T=T||!!O.dynamicChildren;const y=Er(R)&&R.data==="[",b=()=>I(R,O,L,z,C,y),{type:S,ref:A,shapeFlag:w,patchFlag:pe}=O;let Ae=R.nodeType;O.el=R,pe===-2&&(T=!1,O.dynamicChildren=null);let se=null;switch(S){case Gs:Ae!==3?O.children===""?(c(O.el=r(""),o(R),R),se=R):se=b():(R.data!==O.children&&(dr(),R.data=O.children),se=i(R));break;case rt:M(R)?(se=i(R),k(O.el=R.content.firstChild,R,L)):Ae!==8||y?se=b():se=i(R);break;case Li:if(y&&(R=i(R),Ae=R.nodeType),Ae===1||Ae===3){se=R;const _e=!O.children.length;for(let ee=0;ee<O.staticCount;ee++)_e&&(O.children+=se.nodeType===1?se.outerHTML:se.data),ee===O.staticCount-1&&(O.anchor=se),se=i(se);return y?i(se):se}else b();break;case Ie:y?se=v(R,O,L,z,C,T):se=b();break;default:if(w&1)(Ae!==1||O.type.toLowerCase()!==R.tagName.toLowerCase())&&!M(R)?se=b():se=m(R,O,L,z,C,T);else if(w&6){O.slotScopeIds=C;const _e=o(R);if(y?se=D(R):Er(R)&&R.data==="teleport start"?se=D(R,R.data,"teleport end"):se=i(R),e(O,_e,null,L,z,qo(_e),T),qs(O)&&!O.type.__asyncResolved){let ee;y?(ee=ce(Ie),ee.anchor=se?se.previousSibling:_e.lastChild):ee=R.nodeType===3?Be(""):ce("div"),ee.el=R,O.component.subTree=ee}}else w&64?Ae!==8?se=b():se=O.type.hydrate(R,O,L,z,C,T,t,g):w&128&&(se=O.type.hydrate(R,O,L,z,qo(o(R)),C,T,t,d))}return A!=null&&Sr(A,null,z,O),se},m=(R,O,L,z,C,T)=>{T=T||!!O.dynamicChildren;const{type:y,props:b,patchFlag:S,shapeFlag:A,dirs:w,transition:pe}=O,Ae=y==="input"||y==="option";if(Ae||S!==-1){w&&on(O,null,L,"created");let se=!1;if(M(R)){se=Rg(null,pe)&&L&&L.vnode.props&&L.vnode.props.appear;const ee=R.content.firstChild;if(se){const De=ee.getAttribute("class");De&&(ee.$cls=De),pe.beforeEnter(ee)}k(ee,R,L),O.el=R=ee}if(A&16&&!(b&&(b.innerHTML||b.textContent))){let ee=g(R.firstChild,O,R,L,z,C,T);for(;ee;){Wo(R,1)||dr();const De=ee;ee=ee.nextSibling,l(De)}}else if(A&8){let ee=O.children;ee[0]===`
`&&(R.tagName==="PRE"||R.tagName==="TEXTAREA")&&(ee=ee.slice(1));const{textContent:De}=R;De!==ee&&De!==ee.replace(/\r\n|\r/g,`
`)&&(Wo(R,0)||dr(),R.textContent=O.children)}if(b){if(Ae||!T||S&48){const ee=R.tagName.includes("-");for(const De in b)(Ae&&(De.endsWith("value")||De==="indeterminate")||uo(De)&&!Ar(De)||De[0]==="."||ee)&&s(R,De,null,b[De],void 0,L)}else if(b.onClick)s(R,"onClick",null,b.onClick,void 0,L);else if(S&4&&as(b.style))for(const ee in b.style)b.style[ee]}let _e;(_e=b&&b.onVnodeBeforeMount)&&Ht(_e,L,O),w&&on(O,null,L,"beforeMount"),((_e=b&&b.onVnodeMounted)||w||se)&&Dg(()=>{_e&&Ht(_e,L,O),se&&pe.enter(R),w&&on(O,null,L,"mounted")},z)}return R.nextSibling},g=(R,O,L,z,C,T,y)=>{y=y||!!O.dynamicChildren;const b=O.children,S=b.length;for(let A=0;A<S;A++){const w=y?b[A]:b[A]=Mt(b[A]),pe=w.type===Gs;R?(pe&&!y&&A+1<S&&Mt(b[A+1]).type===Gs&&(c(r(R.data.slice(w.children.length)),L,i(R)),R.data=w.children),R=d(R,w,z,C,T,y)):pe&&!w.children?c(w.el=r(""),L):(Wo(L,1)||dr(),n(null,w,L,null,z,C,qo(L),T))}return R},v=(R,O,L,z,C,T)=>{const{slotScopeIds:y}=O;y&&(C=C?C.concat(y):y);const b=o(R),S=g(i(R),O,b,L,z,C,T);return S&&Er(S)&&S.data==="]"?i(O.anchor=S):(dr(),c(O.anchor=u("]"),b,S),S)},I=(R,O,L,z,C,T)=>{if(Wo(R.parentElement,1)||dr(),O.el=null,T){const S=D(R);for(;;){const A=i(R);if(A&&A!==S)l(A);else break}}const y=i(R),b=o(R);return l(R),n(null,O,b,y,L,z,qo(b),C),L&&(L.vnode.el=O.el,dl(L,O.el)),y},D=(R,O="[",L="]")=>{let z=0;for(;R;)if(R=i(R),R&&Er(R)&&(R.data===O&&z++,R.data===L)){if(z===0)return i(R);z--}return R},k=(R,O,L)=>{const z=O.parentNode;z&&z.replaceChild(R,O);let C=L;for(;C;)C.vnode.el===O&&(C.vnode.el=C.subTree.el=R),C=C.parent},M=R=>R.nodeType===1&&R.tagName==="TEMPLATE";return[h,d]}const Kf="data-allow-mismatch",vT={0:"text",1:"children",2:"class",3:"style",4:"attribute"};function Wo(t,e){if(e===0||e===1)for(;t&&!t.hasAttribute(Kf);)t=t.parentElement;const n=t&&t.getAttribute(Kf);if(n==null)return!1;if(n==="")return!0;{const s=n.split(",");return e===0&&s.includes("children")?!0:s.includes(vT[e])}}ol().requestIdleCallback;ol().cancelIdleCallback;function ET(t,e){if(Er(t)&&t.data==="["){let n=1,s=t.nextSibling;for(;s;){if(s.nodeType===1){if(e(s)===!1)break}else if(Er(s))if(s.data==="]"){if(--n===0)break}else s.data==="["&&n++;s=s.nextSibling}}else e(t)}const qs=t=>!!t.type.__asyncLoader;function Qf(t){he(t)&&(t={loader:t});const{loader:e,loadingComponent:n,errorComponent:s,delay:r=200,hydrate:i,timeout:o,suspensible:l=!0,onError:c}=t;let u=null,h,d=0;const m=()=>(d++,u=null,g()),g=()=>{let v;return u||(v=u=e().catch(I=>{if(I=I instanceof Error?I:new Error(String(I)),c)return new Promise((D,k)=>{c(I,()=>D(m()),()=>k(I),d+1)});throw I}).then(I=>v!==u&&u?u:(I&&(I.__esModule||I[Symbol.toStringTag]==="Module")&&(I=I.default),h=I,I)))};return Fe({name:"AsyncComponentWrapper",__asyncLoader:g,__asyncHydrate(v,I,D){let k=!1;(I.bu||(I.bu=[])).push(()=>k=!0);const M=()=>{k||D()},R=i?()=>{const O=i(M,L=>ET(v,L));O&&(I.bum||(I.bum=[])).push(O)}:M;h?R():g().then(()=>!I.isUnmounted&&R())},get __asyncResolved(){return h},setup(){const v=mt;if(Hu(v),h)return()=>Go(h,v);const I=R=>{u=null,Jr(R,v,13,!s)};if(l&&v.suspense||$r)return g().then(R=>()=>Go(R,v)).catch(R=>(I(R),()=>s?ce(s,{error:R}):null));const D=le(!1),k=le(),M=le(!!r);return r&&setTimeout(()=>{M.value=!1},r),o!=null&&setTimeout(()=>{if(!D.value&&!k.value){const R=new Error(`Async component timed out after ${o}ms.`);I(R),k.value=R}},o),g().then(()=>{D.value=!0,v.parent&&po(v.parent.vnode)&&v.parent.update()}).catch(R=>{I(R),k.value=R}),()=>{if(D.value&&h)return Go(h,v);if(k.value&&s)return ce(s,{error:k.value});if(n&&!M.value)return Go(n,v)}}})}function Go(t,e){const{ref:n,props:s,children:r,ce:i}=e.vnode,o=ce(t,s,r);return o.ref=n,o.ce=i,delete e.vnode.ce,o}const po=t=>t.type.__isKeepAlive;function og(t,e){lg(t,"a",e)}function ag(t,e){lg(t,"da",e)}function lg(t,e,n=mt){const s=t.__wdc||(t.__wdc=()=>{let r=n;for(;r;){if(r.isDeactivated)return;r=r.parent}return t()});if(hl(e,s,n),n){let r=n.parent;for(;r&&r.parent;)po(r.parent.vnode)&&TT(s,e,n,r),r=r.parent}}function TT(t,e,n,s){const r=hl(e,t,s,!0);cg(()=>{ku(s[e],r)},n)}function hl(t,e,n=mt,s=!1){if(n){const r=n[t]||(n[t]=[]),i=e.__weh||(e.__weh=(...o)=>{Dn();const l=mo(n),c=Zt(e,n,t,o);return l(),On(),c});return s?r.unshift(i):r.push(i),i}}const Fn=t=>(e,n=mt)=>{(!$r||t==="sp")&&hl(t,(...s)=>e(...s),n)},wT=Fn("bm"),Lr=Fn("m"),bT=Fn("bu"),IT=Fn("u"),qu=Fn("bum"),cg=Fn("um"),AT=Fn("sp"),RT=Fn("rtg"),ST=Fn("rtc");function ug(t,e=mt){hl("ec",t,e)}const Wu="components",CT="directives";function tV(t,e){return Gu(Wu,t,!0,e)||t}const hg=Symbol.for("v-ndc");function PT(t){return qe(t)?Gu(Wu,t,!1)||t:t||hg}function kT(t){return Gu(CT,t)}function Gu(t,e,n=!0,s=!1){const r=gt||mt;if(r){const i=r.type;if(t===Wu){const l=_w(i,!1);if(l&&(l===e||l===Wt(e)||l===rl(Wt(e))))return i}const o=Jf(r[t]||i[t],e)||Jf(r.appContext[t],e);return!o&&s?i:o}}function Jf(t,e){return t&&(t[e]||t[Wt(e)]||t[rl(Wt(e))])}function ln(t,e,n,s){let r;const i=n,o=ae(t);if(o||qe(t)){const l=o&&as(t);let c=!1,u=!1;l&&(c=!Ut(t),u=gn(t),t=ll(t)),r=new Array(t.length);for(let h=0,d=t.length;h<d;h++)r[h]=e(c?u?Mr(Xt(t[h])):Xt(t[h]):t[h],h,void 0,i)}else if(typeof t=="number"){r=new Array(t);for(let l=0;l<t;l++)r[l]=e(l+1,l,void 0,i)}else if(Ne(t))if(t[Symbol.iterator])r=Array.from(t,(l,c)=>e(l,c,void 0,i));else{const l=Object.keys(t);r=new Array(l.length);for(let c=0,u=l.length;c<u;c++){const h=l[c];r[c]=e(t[h],h,c,i)}}else r=[];return r}function zu(t,e,n={},s,r){if(gt.ce||gt.parent&&qs(gt.parent)&&gt.parent.ce){const u=Object.keys(n).length>0;return W(),je(Ie,null,[ce("slot",n,s)],u?-2:64)}let i=t[e];i&&i._c&&(i._d=!1),W();const o=i&&fg(i(n)),l=n.key||o&&o.key,c=je(Ie,{key:(l&&!Yt(l)?l:`_${e}`)+(!o&&s?"_fb":"")},o||[],o&&t._===1?64:-2);return i&&i._c&&(i._d=!0),c}function fg(t){return t.some(e=>Ur(e)?!(e.type===rt||e.type===Ie&&!fg(e.children)):!0)?t:null}const Fc=t=>t?Lg(t)?pl(t):Fc(t.parent):null,Mi=ht(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>Fc(t.parent),$root:t=>Fc(t.root),$host:t=>t.ce,$emit:t=>t.emit,$options:t=>pg(t),$forceUpdate:t=>t.f||(t.f=()=>{$u(t.update)}),$nextTick:t=>t.n||(t.n=Uu.bind(t.proxy)),$watch:t=>hT.bind(t)}),ac=(t,e)=>t!==Ve&&!t.__isScriptSetup&&Pe(t,e),NT={get({_:t},e){if(e==="__v_skip")return!0;const{ctx:n,setupState:s,data:r,props:i,accessCache:o,type:l,appContext:c}=t;if(e[0]!=="$"){const m=o[e];if(m!==void 0)switch(m){case 1:return s[e];case 2:return r[e];case 4:return n[e];case 3:return i[e]}else{if(ac(s,e))return o[e]=1,s[e];if(r!==Ve&&Pe(r,e))return o[e]=2,r[e];if(Pe(i,e))return o[e]=3,i[e];if(n!==Ve&&Pe(n,e))return o[e]=4,n[e];Uc&&(o[e]=0)}}const u=Mi[e];let h,d;if(u)return e==="$attrs"&&wt(t.attrs,"get",""),u(t);if((h=l.__cssModules)&&(h=h[e]))return h;if(n!==Ve&&Pe(n,e))return o[e]=4,n[e];if(d=c.config.globalProperties,Pe(d,e))return d[e]},set({_:t},e,n){const{data:s,setupState:r,ctx:i}=t;return ac(r,e)?(r[e]=n,!0):s!==Ve&&Pe(s,e)?(s[e]=n,!0):Pe(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(i[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:s,appContext:r,props:i,type:o}},l){let c;return!!(n[l]||t!==Ve&&l[0]!=="$"&&Pe(t,l)||ac(e,l)||Pe(i,l)||Pe(s,l)||Pe(Mi,l)||Pe(r.config.globalProperties,l)||(c=o.__cssModules)&&c[l])},defineProperty(t,e,n){return n.get!=null?t._.accessCache[e]=0:Pe(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}};function Yf(t){return ae(t)?t.reduce((e,n)=>(e[n]=null,e),{}):t}let Uc=!0;function DT(t){const e=pg(t),n=t.proxy,s=t.ctx;Uc=!1,e.beforeCreate&&Xf(e.beforeCreate,t,"bc");const{data:r,computed:i,methods:o,watch:l,provide:c,inject:u,created:h,beforeMount:d,mounted:m,beforeUpdate:g,updated:v,activated:I,deactivated:D,beforeDestroy:k,beforeUnmount:M,destroyed:R,unmounted:O,render:L,renderTracked:z,renderTriggered:C,errorCaptured:T,serverPrefetch:y,expose:b,inheritAttrs:S,components:A,directives:w,filters:pe}=e;if(u&&OT(u,s,null),o)for(const _e in o){const ee=o[_e];he(ee)&&(s[_e]=ee.bind(n))}if(r){const _e=r.call(n,n);Ne(_e)&&(t.data=ms(_e))}if(Uc=!0,i)for(const _e in i){const ee=i[_e],De=he(ee)?ee.bind(n,n):he(ee.get)?ee.get.bind(n,n):un,ir=!he(ee)&&he(ee.set)?ee.set.bind(n):un,tn=Je({get:De,set:ir});Object.defineProperty(s,_e,{enumerable:!0,configurable:!0,get:()=>tn.value,set:Ot=>tn.value=Ot})}if(l)for(const _e in l)dg(l[_e],s,n,_e);if(c){const _e=he(c)?c.call(n):c;Reflect.ownKeys(_e).forEach(ee=>{Bu(ee,_e[ee])})}h&&Xf(h,t,"c");function se(_e,ee){ae(ee)?ee.forEach(De=>_e(De.bind(n))):ee&&_e(ee.bind(n))}if(se(wT,d),se(Lr,m),se(bT,g),se(IT,v),se(og,I),se(ag,D),se(ug,T),se(ST,z),se(RT,C),se(qu,M),se(cg,O),se(AT,y),ae(b))if(b.length){const _e=t.exposed||(t.exposed={});b.forEach(ee=>{Object.defineProperty(_e,ee,{get:()=>n[ee],set:De=>n[ee]=De,enumerable:!0})})}else t.exposed||(t.exposed={});L&&t.render===un&&(t.render=L),S!=null&&(t.inheritAttrs=S),A&&(t.components=A),w&&(t.directives=w),y&&Hu(t)}function OT(t,e,n=un){ae(t)&&(t=$c(t));for(const s in t){const r=t[s];let i;Ne(r)?"default"in r?i=Hs(r.from||s,r.default,!0):i=Hs(r.from||s):i=Hs(r),et(i)?Object.defineProperty(e,s,{enumerable:!0,configurable:!0,get:()=>i.value,set:o=>i.value=o}):e[s]=i}}function Xf(t,e,n){Zt(ae(t)?t.map(s=>s.bind(e.proxy)):t.bind(e.proxy),e,n)}function dg(t,e,n,s){let r=s.includes(".")?Zm(n,s):()=>n[s];if(qe(t)){const i=e[t];he(i)&&ra(r,i)}else if(he(t))ra(r,t.bind(n));else if(Ne(t))if(ae(t))t.forEach(i=>dg(i,e,n,s));else{const i=he(t.handler)?t.handler.bind(n):e[t.handler];he(i)&&ra(r,i,t)}}function pg(t){const e=t.type,{mixins:n,extends:s}=e,{mixins:r,optionsCache:i,config:{optionMergeStrategies:o}}=t.appContext,l=i.get(e);let c;return l?c=l:!r.length&&!n&&!s?c=e:(c={},r.length&&r.forEach(u=>Ia(c,u,o,!0)),Ia(c,e,o)),Ne(e)&&i.set(e,c),c}function Ia(t,e,n,s=!1){const{mixins:r,extends:i}=e;i&&Ia(t,i,n,!0),r&&r.forEach(o=>Ia(t,o,n,!0));for(const o in e)if(!(s&&o==="expose")){const l=VT[o]||n&&n[o];t[o]=l?l(t[o],e[o]):e[o]}return t}const VT={data:Zf,props:ed,emits:ed,methods:Ci,computed:Ci,beforeCreate:Rt,created:Rt,beforeMount:Rt,mounted:Rt,beforeUpdate:Rt,updated:Rt,beforeDestroy:Rt,beforeUnmount:Rt,destroyed:Rt,unmounted:Rt,activated:Rt,deactivated:Rt,errorCaptured:Rt,serverPrefetch:Rt,components:Ci,directives:Ci,watch:MT,provide:Zf,inject:xT};function Zf(t,e){return e?t?function(){return ht(he(t)?t.call(this,this):t,he(e)?e.call(this,this):e)}:e:t}function xT(t,e){return Ci($c(t),$c(e))}function $c(t){if(ae(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function Rt(t,e){return t?[...new Set([].concat(t,e))]:e}function Ci(t,e){return t?ht(Object.create(null),t,e):e}function ed(t,e){return t?ae(t)&&ae(e)?[...new Set([...t,...e])]:ht(Object.create(null),Yf(t),Yf(e??{})):e}function MT(t,e){if(!t)return e;if(!e)return t;const n=ht(Object.create(null),t);for(const s in e)n[s]=Rt(t[s],e[s]);return n}function mg(){return{app:null,config:{isNativeTag:Im,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let LT=0;function FT(t,e){return function(s,r=null){he(s)||(s=ht({},s)),r!=null&&!Ne(r)&&(r=null);const i=mg(),o=new WeakSet,l=[];let c=!1;const u=i.app={_uid:LT++,_component:s,_props:r,_container:null,_context:i,_instance:null,version:vw,get config(){return i.config},set config(h){},use(h,...d){return o.has(h)||(h&&he(h.install)?(o.add(h),h.install(u,...d)):he(h)&&(o.add(h),h(u,...d))),u},mixin(h){return i.mixins.includes(h)||i.mixins.push(h),u},component(h,d){return d?(i.components[h]=d,u):i.components[h]},directive(h,d){return d?(i.directives[h]=d,u):i.directives[h]},mount(h,d,m){if(!c){const g=u._ceVNode||ce(s,r);return g.appContext=i,m===!0?m="svg":m===!1&&(m=void 0),d&&e?e(g,h):t(g,h,m),c=!0,u._container=h,h.__vue_app__=u,pl(g.component)}},onUnmount(h){l.push(h)},unmount(){c&&(Zt(l,u._instance,16),t(null,u._container),delete u._container.__vue_app__)},provide(h,d){return i.provides[h]=d,u},runWithContext(h){const d=Ws;Ws=u;try{return h()}finally{Ws=d}}};return u}}let Ws=null;const UT=(t,e)=>e==="modelValue"||e==="model-value"?t.modelModifiers:t[`${e}Modifiers`]||t[`${Wt(e)}Modifiers`]||t[`${tr(e)}Modifiers`];function $T(t,e,...n){if(t.isUnmounted)return;const s=t.vnode.props||Ve;let r=n;const i=e.startsWith("update:"),o=i&&UT(s,e.slice(7));o&&(o.trim&&(r=n.map(h=>qe(h)?h.trim():h)),o.number&&(r=n.map(il)));let l,c=s[l=tc(e)]||s[l=tc(Wt(e))];!c&&i&&(c=s[l=tc(tr(e))]),c&&Zt(c,t,6,r);const u=s[l+"Once"];if(u){if(!t.emitted)t.emitted={};else if(t.emitted[l])return;t.emitted[l]=!0,Zt(u,t,6,r)}}const BT=new WeakMap;function gg(t,e,n=!1){const s=n?BT:e.emitsCache,r=s.get(t);if(r!==void 0)return r;const i=t.emits;let o={},l=!1;if(!he(t)){const c=u=>{const h=gg(u,e,!0);h&&(l=!0,ht(o,h))};!n&&e.mixins.length&&e.mixins.forEach(c),t.extends&&c(t.extends),t.mixins&&t.mixins.forEach(c)}return!i&&!l?(Ne(t)&&s.set(t,null),null):(ae(i)?i.forEach(c=>o[c]=null):ht(o,i),Ne(t)&&s.set(t,o),o)}function fl(t,e){return!t||!uo(e)?!1:(e=e.slice(2).replace(/Once$/,""),Pe(t,e[0].toLowerCase()+e.slice(1))||Pe(t,tr(e))||Pe(t,e))}function lc(t){const{type:e,vnode:n,proxy:s,withProxy:r,propsOptions:[i],slots:o,attrs:l,emit:c,render:u,renderCache:h,props:d,data:m,setupState:g,ctx:v,inheritAttrs:I}=t,D=wa(t);let k,M;try{if(n.shapeFlag&4){const O=r||s,L=O;k=Mt(u.call(L,O,h,d,g,m,v)),M=l}else{const O=e;k=Mt(O.length>1?O(d,{attrs:l,slots:o,emit:c}):O(d,null)),M=e.props?l:HT(l)}}catch(O){Fi.length=0,Jr(O,t,1),k=ce(rt)}let R=k;if(M&&I!==!1){const O=Object.keys(M),{shapeFlag:L}=R;O.length&&L&7&&(i&&O.some(Pu)&&(M=qT(M,i)),R=Kt(R,M,!1,!0))}return n.dirs&&(R=Kt(R,null,!1,!0),R.dirs=R.dirs?R.dirs.concat(n.dirs):n.dirs),n.transition&&Yi(R,n.transition),k=R,wa(D),k}function jT(t,e=!0){let n;for(let s=0;s<t.length;s++){const r=t[s];if(Ur(r)){if(r.type!==rt||r.children==="v-if"){if(n)return;n=r}}else return}return n}const HT=t=>{let e;for(const n in t)(n==="class"||n==="style"||uo(n))&&((e||(e={}))[n]=t[n]);return e},qT=(t,e)=>{const n={};for(const s in t)(!Pu(s)||!(s.slice(9)in e))&&(n[s]=t[s]);return n};function WT(t,e,n){const{props:s,children:r,component:i}=t,{props:o,children:l,patchFlag:c}=e,u=i.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&c>=0){if(c&1024)return!0;if(c&16)return s?td(s,o,u):!!o;if(c&8){const h=e.dynamicProps;for(let d=0;d<h.length;d++){const m=h[d];if(o[m]!==s[m]&&!fl(u,m))return!0}}}else return(r||l)&&(!l||!l.$stable)?!0:s===o?!1:s?o?td(s,o,u):!0:!!o;return!1}function td(t,e,n){const s=Object.keys(e);if(s.length!==Object.keys(t).length)return!0;for(let r=0;r<s.length;r++){const i=s[r];if(e[i]!==t[i]&&!fl(n,i))return!0}return!1}function dl({vnode:t,parent:e},n){for(;e;){const s=e.subTree;if(s.suspense&&s.suspense.activeBranch===t&&(s.el=t.el),s===t)(t=e.vnode).el=n,e=e.parent;else break}}const _g={},yg=()=>Object.create(_g),vg=t=>Object.getPrototypeOf(t)===_g;function GT(t,e,n,s=!1){const r={},i=yg();t.propsDefaults=Object.create(null),Eg(t,e,r,i);for(const o in t.propsOptions[0])o in r||(r[o]=void 0);n?t.props=s?r:vr(r):t.type.props?t.props=r:t.props=i,t.attrs=i}function zT(t,e,n,s){const{props:r,attrs:i,vnode:{patchFlag:o}}=t,l=Re(r),[c]=t.propsOptions;let u=!1;if((s||o>0)&&!(o&16)){if(o&8){const h=t.vnode.dynamicProps;for(let d=0;d<h.length;d++){let m=h[d];if(fl(t.emitsOptions,m))continue;const g=e[m];if(c)if(Pe(i,m))g!==i[m]&&(i[m]=g,u=!0);else{const v=Wt(m);r[v]=Bc(c,l,v,g,t,!1)}else g!==i[m]&&(i[m]=g,u=!0)}}}else{Eg(t,e,r,i)&&(u=!0);let h;for(const d in l)(!e||!Pe(e,d)&&((h=tr(d))===d||!Pe(e,h)))&&(c?n&&(n[d]!==void 0||n[h]!==void 0)&&(r[d]=Bc(c,l,d,void 0,t,!0)):delete r[d]);if(i!==l)for(const d in i)(!e||!Pe(e,d))&&(delete i[d],u=!0)}u&&Rn(t.attrs,"set","")}function Eg(t,e,n,s){const[r,i]=t.propsOptions;let o=!1,l;if(e)for(let c in e){if(Ar(c))continue;const u=e[c];let h;r&&Pe(r,h=Wt(c))?!i||!i.includes(h)?n[h]=u:(l||(l={}))[h]=u:fl(t.emitsOptions,c)||(!(c in s)||u!==s[c])&&(s[c]=u,o=!0)}if(i){const c=Re(n),u=l||Ve;for(let h=0;h<i.length;h++){const d=i[h];n[d]=Bc(r,c,d,u[d],t,!Pe(u,d))}}return o}function Bc(t,e,n,s,r,i){const o=t[n];if(o!=null){const l=Pe(o,"default");if(l&&s===void 0){const c=o.default;if(o.type!==Function&&!o.skipFactory&&he(c)){const{propsDefaults:u}=r;if(n in u)s=u[n];else{const h=mo(r);s=u[n]=c.call(null,e),h()}}else s=c;r.ce&&r.ce._setProp(n,s)}o[0]&&(i&&!l?s=!1:o[1]&&(s===""||s===tr(n))&&(s=!0))}return s}const KT=new WeakMap;function Tg(t,e,n=!1){const s=n?KT:e.propsCache,r=s.get(t);if(r)return r;const i=t.props,o={},l=[];let c=!1;if(!he(t)){const h=d=>{c=!0;const[m,g]=Tg(d,e,!0);ht(o,m),g&&l.push(...g)};!n&&e.mixins.length&&e.mixins.forEach(h),t.extends&&h(t.extends),t.mixins&&t.mixins.forEach(h)}if(!i&&!c)return Ne(t)&&s.set(t,br),br;if(ae(i))for(let h=0;h<i.length;h++){const d=Wt(i[h]);nd(d)&&(o[d]=Ve)}else if(i)for(const h in i){const d=Wt(h);if(nd(d)){const m=i[h],g=o[d]=ae(m)||he(m)?{type:m}:ht({},m),v=g.type;let I=!1,D=!0;if(ae(v))for(let k=0;k<v.length;++k){const M=v[k],R=he(M)&&M.name;if(R==="Boolean"){I=!0;break}else R==="String"&&(D=!1)}else I=he(v)&&v.name==="Boolean";g[0]=I,g[1]=D,(I||Pe(g,"default"))&&l.push(d)}}const u=[o,l];return Ne(t)&&s.set(t,u),u}function nd(t){return t[0]!=="$"&&!Ar(t)}const Ku=t=>t==="_"||t==="_ctx"||t==="$stable",Qu=t=>ae(t)?t.map(Mt):[Mt(t)],QT=(t,e,n)=>{if(e._n)return e;const s=_t((...r)=>Qu(e(...r)),n);return s._c=!1,s},wg=(t,e,n)=>{const s=t._ctx;for(const r in t){if(Ku(r))continue;const i=t[r];if(he(i))e[r]=QT(r,i,s);else if(i!=null){const o=Qu(i);e[r]=()=>o}}},bg=(t,e)=>{const n=Qu(e);t.slots.default=()=>n},Ig=(t,e,n)=>{for(const s in e)(n||!Ku(s))&&(t[s]=e[s])},JT=(t,e,n)=>{const s=t.slots=yg();if(t.vnode.shapeFlag&32){const r=e._;r?(Ig(s,e,n),n&&Sm(s,"_",r,!0)):wg(e,s)}else e&&bg(t,e)},YT=(t,e,n)=>{const{vnode:s,slots:r}=t;let i=!0,o=Ve;if(s.shapeFlag&32){const l=e._;l?n&&l===1?i=!1:Ig(r,e,n):(i=!e.$stable,wg(e,r)),o=e}else e&&(bg(t,e),o={default:1});if(i)for(const l in r)!Ku(l)&&o[l]==null&&delete r[l]},Pt=Dg;function XT(t){return Ag(t)}function ZT(t){return Ag(t,yT)}function Ag(t,e){const n=ol();n.__VUE__=!0;const{insert:s,remove:r,patchProp:i,createElement:o,createText:l,createComment:c,setText:u,setElementText:h,parentNode:d,nextSibling:m,setScopeId:g=un,insertStaticContent:v}=t,I=(P,N,F,H=null,$=null,j=null,K=void 0,G=null,Q=!!N.dynamicChildren)=>{if(P===N)return;P&&!cn(P,N)&&(H=jn(P),Ot(P,$,j,!0),P=null),N.patchFlag===-2&&(Q=!1,N.dynamicChildren=null);const{type:q,ref:ie,shapeFlag:X}=N;switch(q){case Gs:D(P,N,F,H);break;case rt:k(P,N,F,H);break;case Li:P==null&&M(N,F,H,K);break;case Ie:A(P,N,F,H,$,j,K,G,Q);break;default:X&1?L(P,N,F,H,$,j,K,G,Q):X&6?w(P,N,F,H,$,j,K,G,Q):(X&64||X&128)&&q.process(P,N,F,H,$,j,K,G,Q,Hn)}ie!=null&&$?Sr(ie,P&&P.ref,j,N||P,!N):ie==null&&P&&P.ref!=null&&Sr(P.ref,null,j,P,!0)},D=(P,N,F,H)=>{if(P==null)s(N.el=l(N.children),F,H);else{const $=N.el=P.el;N.children!==P.children&&u($,N.children)}},k=(P,N,F,H)=>{P==null?s(N.el=c(N.children||""),F,H):N.el=P.el},M=(P,N,F,H)=>{[P.el,P.anchor]=v(P.children,N,F,H,P.el,P.anchor)},R=({el:P,anchor:N},F,H)=>{let $;for(;P&&P!==N;)$=m(P),s(P,F,H),P=$;s(N,F,H)},O=({el:P,anchor:N})=>{let F;for(;P&&P!==N;)F=m(P),r(P),P=F;r(N)},L=(P,N,F,H,$,j,K,G,Q)=>{if(N.type==="svg"?K="svg":N.type==="math"&&(K="mathml"),P==null)z(N,F,H,$,j,K,G,Q);else{const q=P.el&&P.el._isVueCE?P.el:null;try{q&&q._beginPatch(),y(P,N,$,j,K,G,Q)}finally{q&&q._endPatch()}}},z=(P,N,F,H,$,j,K,G)=>{let Q,q;const{props:ie,shapeFlag:X,transition:ne,dirs:de}=P;if(Q=P.el=o(P.type,j,ie&&ie.is,ie),X&8?h(Q,P.children):X&16&&T(P.children,Q,null,H,$,cc(P,j),K,G),de&&on(P,null,H,"created"),C(Q,P,P.scopeId,K,H),ie){for(const Ce in ie)Ce!=="value"&&!Ar(Ce)&&i(Q,Ce,null,ie[Ce],j,H);"value"in ie&&i(Q,"value",null,ie.value,j),(q=ie.onVnodeBeforeMount)&&Ht(q,H,P)}de&&on(P,null,H,"beforeMount");const ve=Rg($,ne);ve&&ne.beforeEnter(Q),s(Q,N,F),((q=ie&&ie.onVnodeMounted)||ve||de)&&Pt(()=>{q&&Ht(q,H,P),ve&&ne.enter(Q),de&&on(P,null,H,"mounted")},$)},C=(P,N,F,H,$)=>{if(F&&g(P,F),H)for(let j=0;j<H.length;j++)g(P,H[j]);if($){let j=$.subTree;if(N===j||kg(j.type)&&(j.ssContent===N||j.ssFallback===N)){const K=$.vnode;C(P,K,K.scopeId,K.slotScopeIds,$.parent)}}},T=(P,N,F,H,$,j,K,G,Q=0)=>{for(let q=Q;q<P.length;q++){const ie=P[q]=G?es(P[q]):Mt(P[q]);I(null,ie,N,F,H,$,j,K,G)}},y=(P,N,F,H,$,j,K)=>{const G=N.el=P.el;let{patchFlag:Q,dynamicChildren:q,dirs:ie}=N;Q|=P.patchFlag&16;const X=P.props||Ve,ne=N.props||Ve;let de;if(F&&Ns(F,!1),(de=ne.onVnodeBeforeUpdate)&&Ht(de,F,N,P),ie&&on(N,P,F,"beforeUpdate"),F&&Ns(F,!0),(X.innerHTML&&ne.innerHTML==null||X.textContent&&ne.textContent==null)&&h(G,""),q?b(P.dynamicChildren,q,G,F,H,cc(N,$),j):K||ee(P,N,G,null,F,H,cc(N,$),j,!1),Q>0){if(Q&16)S(G,X,ne,F,$);else if(Q&2&&X.class!==ne.class&&i(G,"class",null,ne.class,$),Q&4&&i(G,"style",X.style,ne.style,$),Q&8){const ve=N.dynamicProps;for(let Ce=0;Ce<ve.length;Ce++){const Se=ve[Ce],yt=X[Se],tt=ne[Se];(tt!==yt||Se==="value")&&i(G,Se,yt,tt,$,F)}}Q&1&&P.children!==N.children&&h(G,N.children)}else!K&&q==null&&S(G,X,ne,F,$);((de=ne.onVnodeUpdated)||ie)&&Pt(()=>{de&&Ht(de,F,N,P),ie&&on(N,P,F,"updated")},H)},b=(P,N,F,H,$,j,K)=>{for(let G=0;G<N.length;G++){const Q=P[G],q=N[G],ie=Q.el&&(Q.type===Ie||!cn(Q,q)||Q.shapeFlag&198)?d(Q.el):F;I(Q,q,ie,null,H,$,j,K,!0)}},S=(P,N,F,H,$)=>{if(N!==F){if(N!==Ve)for(const j in N)!Ar(j)&&!(j in F)&&i(P,j,N[j],null,$,H);for(const j in F){if(Ar(j))continue;const K=F[j],G=N[j];K!==G&&j!=="value"&&i(P,j,G,K,$,H)}"value"in F&&i(P,"value",N.value,F.value,$)}},A=(P,N,F,H,$,j,K,G,Q)=>{const q=N.el=P?P.el:l(""),ie=N.anchor=P?P.anchor:l("");let{patchFlag:X,dynamicChildren:ne,slotScopeIds:de}=N;de&&(G=G?G.concat(de):de),P==null?(s(q,F,H),s(ie,F,H),T(N.children||[],F,ie,$,j,K,G,Q)):X>0&&X&64&&ne&&P.dynamicChildren&&P.dynamicChildren.length===ne.length?(b(P.dynamicChildren,ne,F,$,j,K,G),(N.key!=null||$&&N===$.subTree)&&Sg(P,N,!0)):ee(P,N,F,ie,$,j,K,G,Q)},w=(P,N,F,H,$,j,K,G,Q)=>{N.slotScopeIds=G,P==null?N.shapeFlag&512?$.ctx.activate(N,F,H,K,Q):pe(N,F,H,$,j,K,Q):Ae(P,N,Q)},pe=(P,N,F,H,$,j,K)=>{const G=P.component=fw(P,H,$);if(po(P)&&(G.ctx.renderer=Hn),dw(G,!1,K),G.asyncDep){if($&&$.registerDep(G,se,K),!P.el){const Q=G.subTree=ce(rt);k(null,Q,N,F),P.placeholder=Q.el}}else se(G,P,N,F,$,j,K)},Ae=(P,N,F)=>{const H=N.component=P.component;if(WT(P,N,F))if(H.asyncDep&&!H.asyncResolved){_e(H,N,F);return}else H.next=N,H.update();else N.el=P.el,H.vnode=N},se=(P,N,F,H,$,j,K)=>{const G=()=>{if(P.isMounted){let{next:X,bu:ne,u:de,parent:ve,vnode:Ce}=P;{const nt=Cg(P);if(nt){X&&(X.el=Ce.el,_e(P,X,K)),nt.asyncDep.then(()=>{P.isUnmounted||G()});return}}let Se=X,yt;Ns(P,!1),X?(X.el=Ce.el,_e(P,X,K)):X=Ce,ne&&sa(ne),(yt=X.props&&X.props.onVnodeBeforeUpdate)&&Ht(yt,ve,X,Ce),Ns(P,!0);const tt=lc(P),Ct=P.subTree;P.subTree=tt,I(Ct,tt,d(Ct.el),jn(Ct),P,$,j),X.el=tt.el,Se===null&&dl(P,tt.el),de&&Pt(de,$),(yt=X.props&&X.props.onVnodeUpdated)&&Pt(()=>Ht(yt,ve,X,Ce),$)}else{let X;const{el:ne,props:de}=N,{bm:ve,m:Ce,parent:Se,root:yt,type:tt}=P,Ct=qs(N);if(Ns(P,!1),ve&&sa(ve),!Ct&&(X=de&&de.onVnodeBeforeMount)&&Ht(X,Se,N),Ns(P,!0),ne&&ar){const nt=()=>{P.subTree=lc(P),ar(ne,P.subTree,P,$,null)};Ct&&tt.__asyncHydrate?tt.__asyncHydrate(ne,P,nt):nt()}else{yt.ce&&yt.ce._def.shadowRoot!==!1&&yt.ce._injectChildStyle(tt);const nt=P.subTree=lc(P);I(null,nt,F,H,P,$,j),N.el=nt.el}if(Ce&&Pt(Ce,$),!Ct&&(X=de&&de.onVnodeMounted)){const nt=N;Pt(()=>Ht(X,Se,nt),$)}(N.shapeFlag&256||Se&&qs(Se.vnode)&&Se.vnode.shapeFlag&256)&&P.a&&Pt(P.a,$),P.isMounted=!0,N=F=H=null}};P.scope.on();const Q=P.effect=new Om(G);P.scope.off();const q=P.update=Q.run.bind(Q),ie=P.job=Q.runIfDirty.bind(Q);ie.i=P,ie.id=P.uid,Q.scheduler=()=>$u(ie),Ns(P,!0),q()},_e=(P,N,F)=>{N.component=P;const H=P.vnode.props;P.vnode=N,P.next=null,zT(P,N.props,H,F),YT(P,N.children,F),Dn(),qf(P),On()},ee=(P,N,F,H,$,j,K,G,Q=!1)=>{const q=P&&P.children,ie=P?P.shapeFlag:0,X=N.children,{patchFlag:ne,shapeFlag:de}=N;if(ne>0){if(ne&128){ir(q,X,F,H,$,j,K,G,Q);return}else if(ne&256){De(q,X,F,H,$,j,K,G,Q);return}}de&8?(ie&16&&En(q,$,j),X!==q&&h(F,X)):ie&16?de&16?ir(q,X,F,H,$,j,K,G,Q):En(q,$,j,!0):(ie&8&&h(F,""),de&16&&T(X,F,H,$,j,K,G,Q))},De=(P,N,F,H,$,j,K,G,Q)=>{P=P||br,N=N||br;const q=P.length,ie=N.length,X=Math.min(q,ie);let ne;for(ne=0;ne<X;ne++){const de=N[ne]=Q?es(N[ne]):Mt(N[ne]);I(P[ne],de,F,null,$,j,K,G,Q)}q>ie?En(P,$,j,!0,!1,X):T(N,F,H,$,j,K,G,Q,X)},ir=(P,N,F,H,$,j,K,G,Q)=>{let q=0;const ie=N.length;let X=P.length-1,ne=ie-1;for(;q<=X&&q<=ne;){const de=P[q],ve=N[q]=Q?es(N[q]):Mt(N[q]);if(cn(de,ve))I(de,ve,F,null,$,j,K,G,Q);else break;q++}for(;q<=X&&q<=ne;){const de=P[X],ve=N[ne]=Q?es(N[ne]):Mt(N[ne]);if(cn(de,ve))I(de,ve,F,null,$,j,K,G,Q);else break;X--,ne--}if(q>X){if(q<=ne){const de=ne+1,ve=de<ie?N[de].el:H;for(;q<=ne;)I(null,N[q]=Q?es(N[q]):Mt(N[q]),F,ve,$,j,K,G,Q),q++}}else if(q>ne)for(;q<=X;)Ot(P[q],$,j,!0),q++;else{const de=q,ve=q,Ce=new Map;for(q=ve;q<=ne;q++){const Ke=N[q]=Q?es(N[q]):Mt(N[q]);Ke.key!=null&&Ce.set(Ke.key,q)}let Se,yt=0;const tt=ne-ve+1;let Ct=!1,nt=0;const Tn=new Array(tt);for(q=0;q<tt;q++)Tn[q]=0;for(q=de;q<=X;q++){const Ke=P[q];if(yt>=tt){Ot(Ke,$,j,!0);continue}let Vt;if(Ke.key!=null)Vt=Ce.get(Ke.key);else for(Se=ve;Se<=ne;Se++)if(Tn[Se-ve]===0&&cn(Ke,N[Se])){Vt=Se;break}Vt===void 0?Ot(Ke,$,j,!0):(Tn[Vt-ve]=q+1,Vt>=nt?nt=Vt:Ct=!0,I(Ke,N[Vt],F,null,$,j,K,G,Q),yt++)}const lr=Ct?ew(Tn):br;for(Se=lr.length-1,q=tt-1;q>=0;q--){const Ke=ve+q,Vt=N[Ke],Rs=N[Ke+1],ui=Ke+1<ie?Rs.el||Pg(Rs):H;Tn[q]===0?I(null,Vt,F,ui,$,j,K,G,Q):Ct&&(Se<0||q!==lr[Se]?tn(Vt,F,ui,2):Se--)}}},tn=(P,N,F,H,$=null)=>{const{el:j,type:K,transition:G,children:Q,shapeFlag:q}=P;if(q&6){tn(P.component.subTree,N,F,H);return}if(q&128){P.suspense.move(N,F,H);return}if(q&64){K.move(P,N,F,Hn);return}if(K===Ie){s(j,N,F);for(let X=0;X<Q.length;X++)tn(Q[X],N,F,H);s(P.anchor,N,F);return}if(K===Li){R(P,N,F);return}if(H!==2&&q&1&&G)if(H===0)G.beforeEnter(j),s(j,N,F),Pt(()=>G.enter(j),$);else{const{leave:X,delayLeave:ne,afterLeave:de}=G,ve=()=>{P.ctx.isUnmounted?r(j):s(j,N,F)},Ce=()=>{j._isLeaving&&j[An](!0),X(j,()=>{ve(),de&&de()})};ne?ne(j,ve,Ce):Ce()}else s(j,N,F)},Ot=(P,N,F,H=!1,$=!1)=>{const{type:j,props:K,ref:G,children:Q,dynamicChildren:q,shapeFlag:ie,patchFlag:X,dirs:ne,cacheIndex:de}=P;if(X===-2&&($=!1),G!=null&&(Dn(),Sr(G,null,F,P,!0),On()),de!=null&&(N.renderCache[de]=void 0),ie&256){N.ctx.deactivate(P);return}const ve=ie&1&&ne,Ce=!qs(P);let Se;if(Ce&&(Se=K&&K.onVnodeBeforeUnmount)&&Ht(Se,N,P),ie&6)ai(P.component,F,H);else{if(ie&128){P.suspense.unmount(F,H);return}ve&&on(P,null,N,"beforeUnmount"),ie&64?P.type.remove(P,N,F,Hn,H):q&&!q.hasOnce&&(j!==Ie||X>0&&X&64)?En(q,N,F,!1,!0):(j===Ie&&X&384||!$&&ie&16)&&En(Q,N,F),H&&oi(P)}(Ce&&(Se=K&&K.onVnodeUnmounted)||ve)&&Pt(()=>{Se&&Ht(Se,N,P),ve&&on(P,null,N,"unmounted")},F)},oi=P=>{const{type:N,el:F,anchor:H,transition:$}=P;if(N===Ie){or(F,H);return}if(N===Li){O(P);return}const j=()=>{r(F),$&&!$.persisted&&$.afterLeave&&$.afterLeave()};if(P.shapeFlag&1&&$&&!$.persisted){const{leave:K,delayLeave:G}=$,Q=()=>K(F,j);G?G(P.el,j,Q):Q()}else j()},or=(P,N)=>{let F;for(;P!==N;)F=m(P),r(P),P=F;r(N)},ai=(P,N,F)=>{const{bum:H,scope:$,job:j,subTree:K,um:G,m:Q,a:q}=P;sd(Q),sd(q),H&&sa(H),$.stop(),j&&(j.flags|=8,Ot(K,P,N,F)),G&&Pt(G,N),Pt(()=>{P.isUnmounted=!0},N)},En=(P,N,F,H=!1,$=!1,j=0)=>{for(let K=j;K<P.length;K++)Ot(P[K],N,F,H,$)},jn=P=>{if(P.shapeFlag&6)return jn(P.component.subTree);if(P.shapeFlag&128)return P.suspense.next();const N=m(P.anchor||P.el),F=N&&N[fT];return F?m(F):N};let As=!1;const li=(P,N,F)=>{let H;P==null?N._vnode&&(Ot(N._vnode,null,null,!0),H=N._vnode.component):I(N._vnode||null,P,N,null,null,null,F),N._vnode=P,As||(As=!0,qf(H),Ta(),As=!1)},Hn={p:I,um:Ot,m:tn,r:oi,mt:pe,mc:T,pc:ee,pbc:b,n:jn,o:t};let ci,ar;return e&&([ci,ar]=e(Hn)),{render:li,hydrate:ci,createApp:FT(li,ci)}}function cc({type:t,props:e},n){return n==="svg"&&t==="foreignObject"||n==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:n}function Ns({effect:t,job:e},n){n?(t.flags|=32,e.flags|=4):(t.flags&=-33,e.flags&=-5)}function Rg(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function Sg(t,e,n=!1){const s=t.children,r=e.children;if(ae(s)&&ae(r))for(let i=0;i<s.length;i++){const o=s[i];let l=r[i];l.shapeFlag&1&&!l.dynamicChildren&&((l.patchFlag<=0||l.patchFlag===32)&&(l=r[i]=es(r[i]),l.el=o.el),!n&&l.patchFlag!==-2&&Sg(o,l)),l.type===Gs&&(l.patchFlag!==-1?l.el=o.el:l.__elIndex=i+(t.type===Ie?1:0)),l.type===rt&&!l.el&&(l.el=o.el)}}function ew(t){const e=t.slice(),n=[0];let s,r,i,o,l;const c=t.length;for(s=0;s<c;s++){const u=t[s];if(u!==0){if(r=n[n.length-1],t[r]<u){e[s]=r,n.push(s);continue}for(i=0,o=n.length-1;i<o;)l=i+o>>1,t[n[l]]<u?i=l+1:o=l;u<t[n[i]]&&(i>0&&(e[s]=n[i-1]),n[i]=s)}}for(i=n.length,o=n[i-1];i-- >0;)n[i]=o,o=e[o];return n}function Cg(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:Cg(e)}function sd(t){if(t)for(let e=0;e<t.length;e++)t[e].flags|=8}function Pg(t){if(t.placeholder)return t.placeholder;const e=t.component;return e?Pg(e.subTree):null}const kg=t=>t.__isSuspense;let jc=0;const tw={name:"Suspense",__isSuspense:!0,process(t,e,n,s,r,i,o,l,c,u){if(t==null)sw(e,n,s,r,i,o,l,c,u);else{if(i&&i.deps>0&&!t.suspense.isInFallback){e.suspense=t.suspense,e.suspense.vnode=e,e.el=t.el;return}rw(t,e,n,s,r,o,l,c,u)}},hydrate:iw,normalize:ow},nw=tw;function Xi(t,e){const n=t.props&&t.props[e];he(n)&&n()}function sw(t,e,n,s,r,i,o,l,c){const{p:u,o:{createElement:h}}=c,d=h("div"),m=t.suspense=Ng(t,r,s,e,d,n,i,o,l,c);u(null,m.pendingBranch=t.ssContent,d,null,s,m,i,o),m.deps>0?(Xi(t,"onPending"),Xi(t,"onFallback"),u(null,t.ssFallback,e,n,s,null,i,o),Cr(m,t.ssFallback)):m.resolve(!1,!0)}function rw(t,e,n,s,r,i,o,l,{p:c,um:u,o:{createElement:h}}){const d=e.suspense=t.suspense;d.vnode=e,e.el=t.el;const m=e.ssContent,g=e.ssFallback,{activeBranch:v,pendingBranch:I,isInFallback:D,isHydrating:k}=d;if(I)d.pendingBranch=m,cn(I,m)?(c(I,m,d.hiddenContainer,null,r,d,i,o,l),d.deps<=0?d.resolve():D&&(k||(c(v,g,n,s,r,null,i,o,l),Cr(d,g)))):(d.pendingId=jc++,k?(d.isHydrating=!1,d.activeBranch=I):u(I,r,d),d.deps=0,d.effects.length=0,d.hiddenContainer=h("div"),D?(c(null,m,d.hiddenContainer,null,r,d,i,o,l),d.deps<=0?d.resolve():(c(v,g,n,s,r,null,i,o,l),Cr(d,g))):v&&cn(v,m)?(c(v,m,n,s,r,d,i,o,l),d.resolve(!0)):(c(null,m,d.hiddenContainer,null,r,d,i,o,l),d.deps<=0&&d.resolve()));else if(v&&cn(v,m))c(v,m,n,s,r,d,i,o,l),Cr(d,m);else if(Xi(e,"onPending"),d.pendingBranch=m,m.shapeFlag&512?d.pendingId=m.component.suspenseId:d.pendingId=jc++,c(null,m,d.hiddenContainer,null,r,d,i,o,l),d.deps<=0)d.resolve();else{const{timeout:M,pendingId:R}=d;M>0?setTimeout(()=>{d.pendingId===R&&d.fallback(g)},M):M===0&&d.fallback(g)}}function Ng(t,e,n,s,r,i,o,l,c,u,h=!1){const{p:d,m,um:g,n:v,o:{parentNode:I,remove:D}}=u;let k;const M=aw(t);M&&e&&e.pendingBranch&&(k=e.pendingId,e.deps++);const R=t.props?Cm(t.props.timeout):void 0,O=i,L={vnode:t,parent:e,parentComponent:n,namespace:o,container:s,hiddenContainer:r,deps:0,pendingId:jc++,timeout:typeof R=="number"?R:-1,activeBranch:null,pendingBranch:null,isInFallback:!h,isHydrating:h,isUnmounted:!1,effects:[],resolve(z=!1,C=!1){const{vnode:T,activeBranch:y,pendingBranch:b,pendingId:S,effects:A,parentComponent:w,container:pe,isInFallback:Ae}=L;let se=!1;L.isHydrating?L.isHydrating=!1:z||(se=y&&b.transition&&b.transition.mode==="out-in",se&&(y.transition.afterLeave=()=>{S===L.pendingId&&(m(b,pe,i===O?v(y):i,0),Mc(A),Ae&&T.ssFallback&&(T.ssFallback.el=null))}),y&&(I(y.el)===pe&&(i=v(y)),g(y,w,L,!0),!se&&Ae&&T.ssFallback&&Pt(()=>T.ssFallback.el=null,L)),se||m(b,pe,i,0)),Cr(L,b),L.pendingBranch=null,L.isInFallback=!1;let _e=L.parent,ee=!1;for(;_e;){if(_e.pendingBranch){_e.effects.push(...A),ee=!0;break}_e=_e.parent}!ee&&!se&&Mc(A),L.effects=[],M&&e&&e.pendingBranch&&k===e.pendingId&&(e.deps--,e.deps===0&&!C&&e.resolve()),Xi(T,"onResolve")},fallback(z){if(!L.pendingBranch)return;const{vnode:C,activeBranch:T,parentComponent:y,container:b,namespace:S}=L;Xi(C,"onFallback");const A=v(T),w=()=>{L.isInFallback&&(d(null,z,b,A,y,null,S,l,c),Cr(L,z))},pe=z.transition&&z.transition.mode==="out-in";pe&&(T.transition.afterLeave=w),L.isInFallback=!0,g(T,y,null,!0),pe||w()},move(z,C,T){L.activeBranch&&m(L.activeBranch,z,C,T),L.container=z},next(){return L.activeBranch&&v(L.activeBranch)},registerDep(z,C,T){const y=!!L.pendingBranch;y&&L.deps++;const b=z.vnode.el;z.asyncDep.catch(S=>{Jr(S,z,0)}).then(S=>{if(z.isUnmounted||L.isUnmounted||L.pendingId!==z.suspenseId)return;z.asyncResolved=!0;const{vnode:A}=z;qc(z,S),b&&(A.el=b);const w=!b&&z.subTree.el;C(z,A,I(b||z.subTree.el),b?null:v(z.subTree),L,o,T),w&&(A.placeholder=null,D(w)),dl(z,A.el),y&&--L.deps===0&&L.resolve()})},unmount(z,C){L.isUnmounted=!0,L.activeBranch&&g(L.activeBranch,n,z,C),L.pendingBranch&&g(L.pendingBranch,n,z,C)}};return L}function iw(t,e,n,s,r,i,o,l,c){const u=e.suspense=Ng(e,s,n,t.parentNode,document.createElement("div"),null,r,i,o,l,!0),h=c(t,u.pendingBranch=e.ssContent,n,u,i,o);return u.deps===0&&u.resolve(!1,!0),h}function ow(t){const{shapeFlag:e,children:n}=t,s=e&32;t.ssContent=rd(s?n.default:n),t.ssFallback=s?rd(n.fallback):ce(rt)}function rd(t){let e;if(he(t)){const n=Fr&&t._c;n&&(t._d=!1,W()),t=t(),n&&(t._d=!0,e=Dt,Og())}return ae(t)&&(t=jT(t)),t=Mt(t),e&&!t.dynamicChildren&&(t.dynamicChildren=e.filter(n=>n!==t)),t}function Dg(t,e){e&&e.pendingBranch?ae(t)?e.effects.push(...t):e.effects.push(t):Mc(t)}function Cr(t,e){t.activeBranch=e;const{vnode:n,parentComponent:s}=t;let r=e.el;for(;!r&&e.component;)e=e.component.subTree,r=e.el;n.el=r,s&&s.subTree===n&&(s.vnode.el=r,dl(s,r))}function aw(t){const e=t.props&&t.props.suspensible;return e!=null&&e!==!1}const Ie=Symbol.for("v-fgt"),Gs=Symbol.for("v-txt"),rt=Symbol.for("v-cmt"),Li=Symbol.for("v-stc"),Fi=[];let Dt=null;function W(t=!1){Fi.push(Dt=t?null:[])}function Og(){Fi.pop(),Dt=Fi[Fi.length-1]||null}let Fr=1;function Aa(t,e=!1){Fr+=t,t<0&&Dt&&e&&(Dt.hasOnce=!0)}function Vg(t){return t.dynamicChildren=Fr>0?Dt||br:null,Og(),Fr>0&&Dt&&Dt.push(t),t}function Y(t,e,n,s,r,i){return Vg(E(t,e,n,s,r,i,!0))}function je(t,e,n,s,r){return Vg(ce(t,e,n,s,r,!0))}function Ur(t){return t?t.__v_isVNode===!0:!1}function cn(t,e){return t.type===e.type&&t.key===e.key}const xg=({key:t})=>t??null,ia=({ref:t,ref_key:e,ref_for:n})=>(typeof t=="number"&&(t=""+t),t!=null?qe(t)||et(t)||he(t)?{i:gt,r:t,k:e,f:!!n}:t:null);function E(t,e=null,n=null,s=0,r=null,i=t===Ie?0:1,o=!1,l=!1){const c={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&xg(e),ref:e&&ia(e),scopeId:Xm,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:s,dynamicProps:r,dynamicChildren:null,appContext:null,ctx:gt};return l?(Ju(c,n),i&128&&t.normalize(c)):n&&(c.shapeFlag|=qe(n)?8:16),Fr>0&&!o&&Dt&&(c.patchFlag>0||i&6)&&c.patchFlag!==32&&Dt.push(c),c}const ce=lw;function lw(t,e=null,n=null,s=0,r=null,i=!1){if((!t||t===hg)&&(t=rt),Ur(t)){const l=Kt(t,e,!0);return n&&Ju(l,n),Fr>0&&!i&&Dt&&(l.shapeFlag&6?Dt[Dt.indexOf(t)]=l:Dt.push(l)),l.patchFlag=-2,l}if(yw(t)&&(t=t.__vccOpts),e){e=Mg(e);let{class:l,style:c}=e;l&&!qe(l)&&(e.class=Me(l)),Ne(c)&&(cl(c)&&!ae(c)&&(c=ht({},c)),e.style=kn(c))}const o=qe(t)?1:kg(t)?128:eg(t)?64:Ne(t)?4:he(t)?2:0;return E(t,e,n,s,r,o,i,!0)}function Mg(t){return t?cl(t)||vg(t)?ht({},t):t:null}function Kt(t,e,n=!1,s=!1){const{props:r,ref:i,patchFlag:o,children:l,transition:c}=t,u=e?cw(r||{},e):r,h={__v_isVNode:!0,__v_skip:!0,type:t.type,props:u,key:u&&xg(u),ref:e&&e.ref?n&&i?ae(i)?i.concat(ia(e)):[i,ia(e)]:ia(e):i,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:l,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==Ie?o===-1?16:o|16:o,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:c,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&Kt(t.ssContent),ssFallback:t.ssFallback&&Kt(t.ssFallback),placeholder:t.placeholder,el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return c&&s&&Yi(h,c.clone(h)),h}function Be(t=" ",e=0){return ce(Gs,null,t,e)}function Pr(t,e){const n=ce(Li,null,t);return n.staticCount=e,n}function $t(t="",e=!1){return e?(W(),je(rt,null,t)):ce(rt,null,t)}function Mt(t){return t==null||typeof t=="boolean"?ce(rt):ae(t)?ce(Ie,null,t.slice()):Ur(t)?es(t):ce(Gs,null,String(t))}function es(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:Kt(t)}function Ju(t,e){let n=0;const{shapeFlag:s}=t;if(e==null)e=null;else if(ae(e))n=16;else if(typeof e=="object")if(s&65){const r=e.default;r&&(r._c&&(r._d=!1),Ju(t,r()),r._c&&(r._d=!0));return}else{n=32;const r=e._;!r&&!vg(e)?e._ctx=gt:r===3&&gt&&(gt.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else he(e)?(e={default:e,_ctx:gt},n=32):(e=String(e),s&64?(n=16,e=[Be(e)]):n=8);t.children=e,t.shapeFlag|=n}function cw(...t){const e={};for(let n=0;n<t.length;n++){const s=t[n];for(const r in s)if(r==="class")e.class!==s.class&&(e.class=Me([e.class,s.class]));else if(r==="style")e.style=kn([e.style,s.style]);else if(uo(r)){const i=e[r],o=s[r];o&&i!==o&&!(ae(i)&&i.includes(o))&&(e[r]=i?[].concat(i,o):o)}else r!==""&&(e[r]=s[r])}return e}function Ht(t,e,n,s=null){Zt(t,e,7,[n,s])}const uw=mg();let hw=0;function fw(t,e,n){const s=t.type,r=(e?e.appContext:t.appContext)||uw,i={uid:hw++,vnode:t,type:s,parent:e,appContext:r,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new Dm(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(r.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Tg(s,r),emitsOptions:gg(s,r),emit:null,emitted:null,propsDefaults:Ve,inheritAttrs:s.inheritAttrs,ctx:Ve,data:Ve,props:Ve,attrs:Ve,slots:Ve,refs:Ve,setupState:Ve,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=e?e.root:i,i.emit=$T.bind(null,i),t.ce&&t.ce(i),i}let mt=null;const Yr=()=>mt||gt;let Ra,Hc;{const t=ol(),e=(n,s)=>{let r;return(r=t[n])||(r=t[n]=[]),r.push(s),i=>{r.length>1?r.forEach(o=>o(i)):r[0](i)}};Ra=e("__VUE_INSTANCE_SETTERS__",n=>mt=n),Hc=e("__VUE_SSR_SETTERS__",n=>$r=n)}const mo=t=>{const e=mt;return Ra(t),t.scope.on(),()=>{t.scope.off(),Ra(e)}},id=()=>{mt&&mt.scope.off(),Ra(null)};function Lg(t){return t.vnode.shapeFlag&4}let $r=!1;function dw(t,e=!1,n=!1){e&&Hc(e);const{props:s,children:r}=t.vnode,i=Lg(t);GT(t,s,i,e),JT(t,r,n||e);const o=i?pw(t,e):void 0;return e&&Hc(!1),o}function pw(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,NT);const{setup:s}=n;if(s){Dn();const r=t.setupContext=s.length>1?gw(t):null,i=mo(t),o=fo(s,t,0,[t.props,r]),l=Nu(o);if(On(),i(),(l||t.sp)&&!qs(t)&&Hu(t),l){if(o.then(id,id),e)return o.then(c=>{qc(t,c)}).catch(c=>{Jr(c,t,0)});t.asyncDep=o}else qc(t,o)}else Fg(t)}function qc(t,e,n){he(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:Ne(e)&&(t.setupState=Km(e)),Fg(t)}function Fg(t,e,n){const s=t.type;t.render||(t.render=s.render||un);{const r=mo(t);Dn();try{DT(t)}finally{On(),r()}}}const mw={get(t,e){return wt(t,"get",""),t[e]}};function gw(t){const e=n=>{t.exposed=n||{}};return{attrs:new Proxy(t.attrs,mw),slots:t.slots,emit:t.emit,expose:e}}function pl(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(Km(KE(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in Mi)return Mi[n](t)},has(e,n){return n in e||n in Mi}})):t.proxy}function _w(t,e=!0){return he(t)?t.displayName||t.name:t.name||e&&t.__name}function yw(t){return he(t)&&"__vccOpts"in t}const Je=(t,e)=>sT(t,e,$r);function ls(t,e,n){try{Aa(-1);const s=arguments.length;return s===2?Ne(e)&&!ae(e)?Ur(e)?ce(t,null,[e]):ce(t,e):ce(t,null,e):(s>3?n=Array.prototype.slice.call(arguments,2):s===3&&Ur(n)&&(n=[n]),ce(t,e,n))}finally{Aa(1)}}const vw="3.5.26";let Wc;const od=typeof window<"u"&&window.trustedTypes;if(od)try{Wc=od.createPolicy("vue",{createHTML:t=>t})}catch{}const Ug=Wc?t=>Wc.createHTML(t):t=>t,Ew="http://www.w3.org/2000/svg",Tw="http://www.w3.org/1998/Math/MathML",In=typeof document<"u"?document:null,ad=In&&In.createElement("template"),ww={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,s)=>{const r=e==="svg"?In.createElementNS(Ew,t):e==="mathml"?In.createElementNS(Tw,t):n?In.createElement(t,{is:n}):In.createElement(t);return t==="select"&&s&&s.multiple!=null&&r.setAttribute("multiple",s.multiple),r},createText:t=>In.createTextNode(t),createComment:t=>In.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>In.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,n,s,r,i){const o=n?n.previousSibling:e.lastChild;if(r&&(r===i||r.nextSibling))for(;e.insertBefore(r.cloneNode(!0),n),!(r===i||!(r=r.nextSibling)););else{ad.innerHTML=Ug(s==="svg"?`<svg>${t}</svg>`:s==="mathml"?`<math>${t}</math>`:t);const l=ad.content;if(s==="svg"||s==="mathml"){const c=l.firstChild;for(;c.firstChild;)l.appendChild(c.firstChild);l.removeChild(c)}e.insertBefore(l,n)}return[o?o.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}},Jn="transition",Ri="animation",Zi=Symbol("_vtc"),$g={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},bw=ht({},tg,$g),Iw=t=>(t.displayName="Transition",t.props=bw,t),ml=Iw((t,{slots:e})=>ls(mT,Aw(t),e)),Ds=(t,e=[])=>{ae(t)?t.forEach(n=>n(...e)):t&&t(...e)},ld=t=>t?ae(t)?t.some(e=>e.length>1):t.length>1:!1;function Aw(t){const e={};for(const A in t)A in $g||(e[A]=t[A]);if(t.css===!1)return e;const{name:n="v",type:s,duration:r,enterFromClass:i=`${n}-enter-from`,enterActiveClass:o=`${n}-enter-active`,enterToClass:l=`${n}-enter-to`,appearFromClass:c=i,appearActiveClass:u=o,appearToClass:h=l,leaveFromClass:d=`${n}-leave-from`,leaveActiveClass:m=`${n}-leave-active`,leaveToClass:g=`${n}-leave-to`}=t,v=Rw(r),I=v&&v[0],D=v&&v[1],{onBeforeEnter:k,onEnter:M,onEnterCancelled:R,onLeave:O,onLeaveCancelled:L,onBeforeAppear:z=k,onAppear:C=M,onAppearCancelled:T=R}=e,y=(A,w,pe,Ae)=>{A._enterCancelled=Ae,Os(A,w?h:l),Os(A,w?u:o),pe&&pe()},b=(A,w)=>{A._isLeaving=!1,Os(A,d),Os(A,g),Os(A,m),w&&w()},S=A=>(w,pe)=>{const Ae=A?C:M,se=()=>y(w,A,pe);Ds(Ae,[w,se]),cd(()=>{Os(w,A?c:i),bn(w,A?h:l),ld(Ae)||ud(w,s,I,se)})};return ht(e,{onBeforeEnter(A){Ds(k,[A]),bn(A,i),bn(A,o)},onBeforeAppear(A){Ds(z,[A]),bn(A,c),bn(A,u)},onEnter:S(!1),onAppear:S(!0),onLeave(A,w){A._isLeaving=!0;const pe=()=>b(A,w);bn(A,d),A._enterCancelled?(bn(A,m),dd(A)):(dd(A),bn(A,m)),cd(()=>{A._isLeaving&&(Os(A,d),bn(A,g),ld(O)||ud(A,s,D,pe))}),Ds(O,[A,pe])},onEnterCancelled(A){y(A,!1,void 0,!0),Ds(R,[A])},onAppearCancelled(A){y(A,!0,void 0,!0),Ds(T,[A])},onLeaveCancelled(A){b(A),Ds(L,[A])}})}function Rw(t){if(t==null)return null;if(Ne(t))return[uc(t.enter),uc(t.leave)];{const e=uc(t);return[e,e]}}function uc(t){return Cm(t)}function bn(t,e){e.split(/\s+/).forEach(n=>n&&t.classList.add(n)),(t[Zi]||(t[Zi]=new Set)).add(e)}function Os(t,e){e.split(/\s+/).forEach(s=>s&&t.classList.remove(s));const n=t[Zi];n&&(n.delete(e),n.size||(t[Zi]=void 0))}function cd(t){requestAnimationFrame(()=>{requestAnimationFrame(t)})}let Sw=0;function ud(t,e,n,s){const r=t._endId=++Sw,i=()=>{r===t._endId&&s()};if(n!=null)return setTimeout(i,n);const{type:o,timeout:l,propCount:c}=Cw(t,e);if(!o)return s();const u=o+"end";let h=0;const d=()=>{t.removeEventListener(u,m),i()},m=g=>{g.target===t&&++h>=c&&d()};setTimeout(()=>{h<c&&d()},l+1),t.addEventListener(u,m)}function Cw(t,e){const n=window.getComputedStyle(t),s=v=>(n[v]||"").split(", "),r=s(`${Jn}Delay`),i=s(`${Jn}Duration`),o=hd(r,i),l=s(`${Ri}Delay`),c=s(`${Ri}Duration`),u=hd(l,c);let h=null,d=0,m=0;e===Jn?o>0&&(h=Jn,d=o,m=i.length):e===Ri?u>0&&(h=Ri,d=u,m=c.length):(d=Math.max(o,u),h=d>0?o>u?Jn:Ri:null,m=h?h===Jn?i.length:c.length:0);const g=h===Jn&&/\b(?:transform|all)(?:,|$)/.test(s(`${Jn}Property`).toString());return{type:h,timeout:d,propCount:m,hasTransform:g}}function hd(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max(...e.map((n,s)=>fd(n)+fd(t[s])))}function fd(t){return t==="auto"?0:Number(t.slice(0,-1).replace(",","."))*1e3}function dd(t){return(t?t.ownerDocument:document).body.offsetHeight}function Pw(t,e,n){const s=t[Zi];s&&(e=(e?[e,...s]:[...s]).join(" ")),e==null?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}const pd=Symbol("_vod"),kw=Symbol("_vsh"),Nw=Symbol(""),Dw=/(?:^|;)\s*display\s*:/;function Ow(t,e,n){const s=t.style,r=qe(n);let i=!1;if(n&&!r){if(e)if(qe(e))for(const o of e.split(";")){const l=o.slice(0,o.indexOf(":")).trim();n[l]==null&&oa(s,l,"")}else for(const o in e)n[o]==null&&oa(s,o,"");for(const o in n)o==="display"&&(i=!0),oa(s,o,n[o])}else if(r){if(e!==n){const o=s[Nw];o&&(n+=";"+o),s.cssText=n,i=Dw.test(n)}}else e&&t.removeAttribute("style");pd in t&&(t[pd]=i?s.display:"",t[kw]&&(s.display="none"))}const md=/\s*!important$/;function oa(t,e,n){if(ae(n))n.forEach(s=>oa(t,e,s));else if(n==null&&(n=""),e.startsWith("--"))t.setProperty(e,n);else{const s=Vw(t,e);md.test(n)?t.setProperty(tr(s),n.replace(md,""),"important"):t[s]=n}}const gd=["Webkit","Moz","ms"],hc={};function Vw(t,e){const n=hc[e];if(n)return n;let s=Wt(e);if(s!=="filter"&&s in t)return hc[e]=s;s=rl(s);for(let r=0;r<gd.length;r++){const i=gd[r]+s;if(i in t)return hc[e]=i}return e}const _d="http://www.w3.org/1999/xlink";function yd(t,e,n,s,r,i=IE(e)){s&&e.startsWith("xlink:")?n==null?t.removeAttributeNS(_d,e.slice(6,e.length)):t.setAttributeNS(_d,e,n):n==null||i&&!Pm(n)?t.removeAttribute(e):t.setAttribute(e,i?"":Yt(n)?String(n):n)}function vd(t,e,n,s,r){if(e==="innerHTML"||e==="textContent"){n!=null&&(t[e]=e==="innerHTML"?Ug(n):n);return}const i=t.tagName;if(e==="value"&&i!=="PROGRESS"&&!i.includes("-")){const l=i==="OPTION"?t.getAttribute("value")||"":t.value,c=n==null?t.type==="checkbox"?"on":"":String(n);(l!==c||!("_value"in t))&&(t.value=c),n==null&&t.removeAttribute(e),t._value=n;return}let o=!1;if(n===""||n==null){const l=typeof t[e];l==="boolean"?n=Pm(n):n==null&&l==="string"?(n="",o=!0):l==="number"&&(n=0,o=!0)}try{t[e]=n}catch{}o&&t.removeAttribute(r||e)}function Fs(t,e,n,s){t.addEventListener(e,n,s)}function xw(t,e,n,s){t.removeEventListener(e,n,s)}const Ed=Symbol("_vei");function Mw(t,e,n,s,r=null){const i=t[Ed]||(t[Ed]={}),o=i[e];if(s&&o)o.value=s;else{const[l,c]=Lw(e);if(s){const u=i[e]=$w(s,r);Fs(t,l,u,c)}else o&&(xw(t,l,o,c),i[e]=void 0)}}const Td=/(?:Once|Passive|Capture)$/;function Lw(t){let e;if(Td.test(t)){e={};let s;for(;s=t.match(Td);)t=t.slice(0,t.length-s[0].length),e[s[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):tr(t.slice(2)),e]}let fc=0;const Fw=Promise.resolve(),Uw=()=>fc||(Fw.then(()=>fc=0),fc=Date.now());function $w(t,e){const n=s=>{if(!s._vts)s._vts=Date.now();else if(s._vts<=n.attached)return;Zt(Bw(s,n.value),e,5,[s])};return n.value=t,n.attached=Uw(),n}function Bw(t,e){if(ae(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(s=>r=>!r._stopped&&s&&s(r))}else return e}const wd=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,jw=(t,e,n,s,r,i)=>{const o=r==="svg";e==="class"?Pw(t,s,o):e==="style"?Ow(t,n,s):uo(e)?Pu(e)||Mw(t,e,n,s,i):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):Hw(t,e,s,o))?(vd(t,e,s),!t.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&yd(t,e,s,o,i,e!=="value")):t._isVueCE&&(/[A-Z]/.test(e)||!qe(s))?vd(t,Wt(e),s,i,e):(e==="true-value"?t._trueValue=s:e==="false-value"&&(t._falseValue=s),yd(t,e,s,o))};function Hw(t,e,n,s){if(s)return!!(e==="innerHTML"||e==="textContent"||e in t&&wd(e)&&he(n));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="autocorrect"||e==="sandbox"&&t.tagName==="IFRAME"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const r=t.tagName;if(r==="IMG"||r==="VIDEO"||r==="CANVAS"||r==="SOURCE")return!1}return wd(e)&&qe(n)?!1:e in t}const Sa=t=>{const e=t.props["onUpdate:modelValue"]||!1;return ae(e)?n=>sa(e,n):e};function qw(t){t.target.composing=!0}function bd(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const kr=Symbol("_assign");function Id(t,e,n){return e&&(t=t.trim()),n&&(t=il(t)),t}const zo={created(t,{modifiers:{lazy:e,trim:n,number:s}},r){t[kr]=Sa(r);const i=s||r.props&&r.props.type==="number";Fs(t,e?"change":"input",o=>{o.target.composing||t[kr](Id(t.value,n,i))}),(n||i)&&Fs(t,"change",()=>{t.value=Id(t.value,n,i)}),e||(Fs(t,"compositionstart",qw),Fs(t,"compositionend",bd),Fs(t,"change",bd))},mounted(t,{value:e}){t.value=e??""},beforeUpdate(t,{value:e,oldValue:n,modifiers:{lazy:s,trim:r,number:i}},o){if(t[kr]=Sa(o),t.composing)return;const l=(i||t.type==="number")&&!/^0\d/.test(t.value)?il(t.value):t.value,c=e??"";l!==c&&(document.activeElement===t&&t.type!=="range"&&(s&&e===n||r&&t.value.trim()===c)||(t.value=c))}},Ad={deep:!0,created(t,{value:e,modifiers:{number:n}},s){const r=tl(e);Fs(t,"change",()=>{const i=Array.prototype.filter.call(t.options,o=>o.selected).map(o=>n?il(Ca(o)):Ca(o));t[kr](t.multiple?r?new Set(i):i:i[0]),t._assigning=!0,Uu(()=>{t._assigning=!1})}),t[kr]=Sa(s)},mounted(t,{value:e}){Rd(t,e)},beforeUpdate(t,e,n){t[kr]=Sa(n)},updated(t,{value:e}){t._assigning||Rd(t,e)}};function Rd(t,e){const n=t.multiple,s=ae(e);if(!(n&&!s&&!tl(e))){for(let r=0,i=t.options.length;r<i;r++){const o=t.options[r],l=Ca(o);if(n)if(s){const c=typeof l;c==="string"||c==="number"?o.selected=e.some(u=>String(u)===String(l)):o.selected=RE(e,l)>-1}else o.selected=e.has(l);else if(al(Ca(o),e)){t.selectedIndex!==r&&(t.selectedIndex=r);return}}!n&&t.selectedIndex!==-1&&(t.selectedIndex=-1)}}function Ca(t){return"_value"in t?t._value:t.value}const Ww=["ctrl","shift","alt","meta"],Gw={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>Ww.some(n=>t[`${n}Key`]&&!e.includes(n))},go=(t,e)=>{const n=t._withMods||(t._withMods={}),s=e.join(".");return n[s]||(n[s]=((r,...i)=>{for(let o=0;o<e.length;o++){const l=Gw[e[o]];if(l&&l(r,e))return}return t(r,...i)}))},Bg=ht({patchProp:jw},ww);let Ui,Sd=!1;function zw(){return Ui||(Ui=XT(Bg))}function Kw(){return Ui=Sd?Ui:ZT(Bg),Sd=!0,Ui}const Qw=((...t)=>{const e=zw().createApp(...t),{mount:n}=e;return e.mount=s=>{const r=Hg(s);if(!r)return;const i=e._component;!he(i)&&!i.render&&!i.template&&(i.template=r.innerHTML),r.nodeType===1&&(r.textContent="");const o=n(r,!1,jg(r));return r instanceof Element&&(r.removeAttribute("v-cloak"),r.setAttribute("data-v-app","")),o},e}),Jw=((...t)=>{const e=Kw().createApp(...t),{mount:n}=e;return e.mount=s=>{const r=Hg(s);if(r)return n(r,!0,jg(r))},e});function jg(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function Hg(t){return qe(t)?document.querySelector(t):t}const Yw=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,Xw=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,Zw=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/;function eb(t,e){if(t==="__proto__"||t==="constructor"&&e&&typeof e=="object"&&"prototype"in e){tb(t);return}return e}function tb(t){console.warn(`[destr] Dropping "${t}" key to prevent prototype pollution.`)}function Pa(t,e={}){if(typeof t!="string")return t;if(t[0]==='"'&&t[t.length-1]==='"'&&t.indexOf("\\")===-1)return t.slice(1,-1);const n=t.trim();if(n.length<=9)switch(n.toLowerCase()){case"true":return!0;case"false":return!1;case"undefined":return;case"null":return null;case"nan":return Number.NaN;case"infinity":return Number.POSITIVE_INFINITY;case"-infinity":return Number.NEGATIVE_INFINITY}if(!Zw.test(t)){if(e.strict)throw new SyntaxError("[destr] Invalid JSON");return t}try{if(Yw.test(t)||Xw.test(t)){if(e.strict)throw new Error("[destr] Possible prototype pollution");return JSON.parse(t,eb)}return JSON.parse(t)}catch(s){if(e.strict)throw s;return t}}const nb=/#/g,sb=/&/g,rb=/\//g,ib=/=/g,Yu=/\+/g,ob=/%5e/gi,ab=/%60/gi,lb=/%7c/gi,cb=/%20/gi;function ub(t){return encodeURI(""+t).replace(lb,"|")}function Gc(t){return ub(typeof t=="string"?t:JSON.stringify(t)).replace(Yu,"%2B").replace(cb,"+").replace(nb,"%23").replace(sb,"%26").replace(ab,"`").replace(ob,"^").replace(rb,"%2F")}function dc(t){return Gc(t).replace(ib,"%3D")}function ka(t=""){try{return decodeURIComponent(""+t)}catch{return""+t}}function hb(t){return ka(t.replace(Yu," "))}function fb(t){return ka(t.replace(Yu," "))}function Xu(t=""){const e=Object.create(null);t[0]==="?"&&(t=t.slice(1));for(const n of t.split("&")){const s=n.match(/([^=]+)=?(.*)/)||[];if(s.length<2)continue;const r=hb(s[1]);if(r==="__proto__"||r==="constructor")continue;const i=fb(s[2]||"");e[r]===void 0?e[r]=i:Array.isArray(e[r])?e[r].push(i):e[r]=[e[r],i]}return e}function db(t,e){return(typeof e=="number"||typeof e=="boolean")&&(e=String(e)),e?Array.isArray(e)?e.map(n=>`${dc(t)}=${Gc(n)}`).join("&"):`${dc(t)}=${Gc(e)}`:dc(t)}function qg(t){return Object.keys(t).filter(e=>t[e]!==void 0).map(e=>db(e,t[e])).filter(Boolean).join("&")}const pb=/^[\s\w\0+.-]{2,}:([/\\]{1,2})/,mb=/^[\s\w\0+.-]{2,}:([/\\]{2})?/,gb=/^([/\\]\s*){2,}[^/\\]/,_b=/^[\s\0]*(blob|data|javascript|vbscript):$/i,yb=/\/$|\/\?|\/#/,vb=/^\.?\//;function Xr(t,e={}){return typeof e=="boolean"&&(e={acceptRelative:e}),e.strict?pb.test(t):mb.test(t)||(e.acceptRelative?gb.test(t):!1)}function Eb(t){return!!t&&_b.test(t)}function zc(t="",e){return e?yb.test(t):t.endsWith("/")}function Wg(t="",e){if(!e)return(zc(t)?t.slice(0,-1):t)||"/";if(!zc(t,!0))return t||"/";let n=t,s="";const r=t.indexOf("#");r!==-1&&(n=t.slice(0,r),s=t.slice(r));const[i,...o]=n.split("?");return((i.endsWith("/")?i.slice(0,-1):i)||"/")+(o.length>0?`?${o.join("?")}`:"")+s}function Kc(t="",e){if(!e)return t.endsWith("/")?t:t+"/";if(zc(t,!0))return t||"/";let n=t,s="";const r=t.indexOf("#");if(r!==-1&&(n=t.slice(0,r),s=t.slice(r),!n))return s;const[i,...o]=n.split("?");return i+"/"+(o.length>0?`?${o.join("?")}`:"")+s}function Tb(t=""){return t.startsWith("/")}function Cd(t=""){return Tb(t)?t:"/"+t}function wb(t,e){if(zg(e)||Xr(t))return t;const n=Wg(e);return t.startsWith(n)?t:gl(n,t)}function bb(t,e){if(zg(e))return t;const n=Wg(e);if(!t.startsWith(n))return t;const s=t.slice(n.length);return s[0]==="/"?s:"/"+s}function Gg(t,e){const n=Jg(t),s={...Xu(n.search),...e};return n.search=qg(s),Yg(n)}function zg(t){return!t||t==="/"}function Ib(t){return t&&t!=="/"}function gl(t,...e){let n=t||"";for(const s of e.filter(r=>Ib(r)))if(n){const r=s.replace(vb,"");n=Kc(n)+r}else n=s;return n}function Kg(...t){const e=/\/(?!\/)/,n=t.filter(Boolean),s=[];let r=0;for(const o of n)if(!(!o||o==="/")){for(const[l,c]of o.split(e).entries())if(!(!c||c===".")){if(c===".."){if(s.length===1&&Xr(s[0]))continue;s.pop(),r--;continue}if(l===1&&s[s.length-1]?.endsWith(":/")){s[s.length-1]+="/"+c;continue}s.push(c),r++}}let i=s.join("/");return r>=0?n[0]?.startsWith("/")&&!i.startsWith("/")?i="/"+i:n[0]?.startsWith("./")&&!i.startsWith("./")&&(i="./"+i):i="../".repeat(-1*r)+i,n[n.length-1]?.endsWith("/")&&!i.endsWith("/")&&(i+="/"),i}function Ab(t,e,n={}){return n.trailingSlash||(t=Kc(t),e=Kc(e)),n.leadingSlash||(t=Cd(t),e=Cd(e)),n.encoding||(t=ka(t),e=ka(e)),t===e}const Qg=Symbol.for("ufo:protocolRelative");function Jg(t="",e){const n=t.match(/^[\s\0]*(blob:|data:|javascript:|vbscript:)(.*)/i);if(n){const[,d,m=""]=n;return{protocol:d.toLowerCase(),pathname:m,href:d+m,auth:"",host:"",search:"",hash:""}}if(!Xr(t,{acceptRelative:!0}))return Pd(t);const[,s="",r,i=""]=t.replace(/\\/g,"/").match(/^[\s\0]*([\w+.-]{2,}:)?\/\/([^/@]+@)?(.*)/)||[];let[,o="",l=""]=i.match(/([^#/?]*)(.*)?/)||[];s==="file:"&&(l=l.replace(/\/(?=[A-Za-z]:)/,""));const{pathname:c,search:u,hash:h}=Pd(l);return{protocol:s.toLowerCase(),auth:r?r.slice(0,Math.max(0,r.length-1)):"",host:o,pathname:c,search:u,hash:h,[Qg]:!s}}function Pd(t=""){const[e="",n="",s=""]=(t.match(/([^#?]*)(\?[^#]*)?(#.*)?/)||[]).splice(1);return{pathname:e,search:n,hash:s}}function Yg(t){const e=t.pathname||"",n=t.search?(t.search.startsWith("?")?"":"?")+t.search:"",s=t.hash||"",r=t.auth?t.auth+"@":"",i=t.host||"";return(t.protocol||t[Qg]?(t.protocol||"")+"//":"")+r+i+e+n+s}class Rb extends Error{constructor(e,n){super(e,n),this.name="FetchError",n?.cause&&!this.cause&&(this.cause=n.cause)}}function Sb(t){const e=t.error?.message||t.error?.toString()||"",n=t.request?.method||t.options?.method||"GET",s=t.request?.url||String(t.request)||"/",r=`[${n}] ${JSON.stringify(s)}`,i=t.response?`${t.response.status} ${t.response.statusText}`:"<no response>",o=`${r}: ${i}${e?` ${e}`:""}`,l=new Rb(o,t.error?{cause:t.error}:void 0);for(const c of["request","options","response"])Object.defineProperty(l,c,{get(){return t[c]}});for(const[c,u]of[["data","_data"],["status","status"],["statusCode","status"],["statusText","statusText"],["statusMessage","statusText"]])Object.defineProperty(l,c,{get(){return t.response&&t.response[u]}});return l}const Cb=new Set(Object.freeze(["PATCH","POST","PUT","DELETE"]));function kd(t="GET"){return Cb.has(t.toUpperCase())}function Pb(t){if(t===void 0)return!1;const e=typeof t;return e==="string"||e==="number"||e==="boolean"||e===null?!0:e!=="object"?!1:Array.isArray(t)?!0:t.buffer||t instanceof FormData||t instanceof URLSearchParams?!1:t.constructor&&t.constructor.name==="Object"||typeof t.toJSON=="function"}const kb=new Set(["image/svg","application/xml","application/xhtml","application/html"]),Nb=/^application\/(?:[\w!#$%&*.^`~-]*\+)?json(;.+)?$/i;function Db(t=""){if(!t)return"json";const e=t.split(";").shift()||"";return Nb.test(e)?"json":e==="text/event-stream"?"stream":kb.has(e)||e.startsWith("text/")?"text":"blob"}function Ob(t,e,n,s){const r=Vb(e?.headers??t?.headers,n?.headers,s);let i;return(n?.query||n?.params||e?.params||e?.query)&&(i={...n?.params,...n?.query,...e?.params,...e?.query}),{...n,...e,query:i,params:i,headers:r}}function Vb(t,e,n){if(!e)return new n(t);const s=new n(e);if(t)for(const[r,i]of Symbol.iterator in t||Array.isArray(t)?t:new n(t))s.set(r,i);return s}async function Ko(t,e){if(e)if(Array.isArray(e))for(const n of e)await n(t);else await e(t)}const xb=new Set([408,409,425,429,500,502,503,504]),Mb=new Set([101,204,205,304]);function Xg(t={}){const{fetch:e=globalThis.fetch,Headers:n=globalThis.Headers,AbortController:s=globalThis.AbortController}=t;async function r(l){const c=l.error&&l.error.name==="AbortError"&&!l.options.timeout||!1;if(l.options.retry!==!1&&!c){let h;typeof l.options.retry=="number"?h=l.options.retry:h=kd(l.options.method)?0:1;const d=l.response&&l.response.status||500;if(h>0&&(Array.isArray(l.options.retryStatusCodes)?l.options.retryStatusCodes.includes(d):xb.has(d))){const m=typeof l.options.retryDelay=="function"?l.options.retryDelay(l):l.options.retryDelay||0;return m>0&&await new Promise(g=>setTimeout(g,m)),i(l.request,{...l.options,retry:h-1})}}const u=Sb(l);throw Error.captureStackTrace&&Error.captureStackTrace(u,i),u}const i=async function(c,u={}){const h={request:c,options:Ob(c,u,t.defaults,n),response:void 0,error:void 0};if(h.options.method&&(h.options.method=h.options.method.toUpperCase()),h.options.onRequest&&(await Ko(h,h.options.onRequest),h.options.headers instanceof n||(h.options.headers=new n(h.options.headers||{}))),typeof h.request=="string"&&(h.options.baseURL&&(h.request=wb(h.request,h.options.baseURL)),h.options.query&&(h.request=Gg(h.request,h.options.query),delete h.options.query),"query"in h.options&&delete h.options.query,"params"in h.options&&delete h.options.params),h.options.body&&kd(h.options.method))if(Pb(h.options.body)){const g=h.options.headers.get("content-type");typeof h.options.body!="string"&&(h.options.body=g==="application/x-www-form-urlencoded"?new URLSearchParams(h.options.body).toString():JSON.stringify(h.options.body)),g||h.options.headers.set("content-type","application/json"),h.options.headers.has("accept")||h.options.headers.set("accept","application/json")}else("pipeTo"in h.options.body&&typeof h.options.body.pipeTo=="function"||typeof h.options.body.pipe=="function")&&("duplex"in h.options||(h.options.duplex="half"));let d;if(!h.options.signal&&h.options.timeout){const g=new s;d=setTimeout(()=>{const v=new Error("[TimeoutError]: The operation was aborted due to timeout");v.name="TimeoutError",v.code=23,g.abort(v)},h.options.timeout),h.options.signal=g.signal}try{h.response=await e(h.request,h.options)}catch(g){return h.error=g,h.options.onRequestError&&await Ko(h,h.options.onRequestError),await r(h)}finally{d&&clearTimeout(d)}if((h.response.body||h.response._bodyInit)&&!Mb.has(h.response.status)&&h.options.method!=="HEAD"){const g=(h.options.parseResponse?"json":h.options.responseType)||Db(h.response.headers.get("content-type")||"");switch(g){case"json":{const v=await h.response.text(),I=h.options.parseResponse||Pa;h.response._data=I(v);break}case"stream":{h.response._data=h.response.body||h.response._bodyInit;break}default:h.response._data=await h.response[g]()}}return h.options.onResponse&&await Ko(h,h.options.onResponse),!h.options.ignoreResponseError&&h.response.status>=400&&h.response.status<600?(h.options.onResponseError&&await Ko(h,h.options.onResponseError),await r(h)):h.response},o=async function(c,u){return(await i(c,u))._data};return o.raw=i,o.native=(...l)=>e(...l),o.create=(l={},c={})=>Xg({...t,...c,defaults:{...t.defaults,...c.defaults,...l}}),o}const Na=(function(){if(typeof globalThis<"u")return globalThis;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")})(),Lb=Na.fetch?(...t)=>Na.fetch(...t):()=>Promise.reject(new Error("[ofetch] global.fetch is not supported!")),Fb=Na.Headers,Ub=Na.AbortController,$b=Xg({fetch:Lb,Headers:Fb,AbortController:Ub}),Bb=$b,jb=()=>window?.__NUXT__?.config||window?.useNuxtApp?.().payload?.config,Zu=()=>jb().app,Hb=()=>Zu().baseURL,qb=()=>Zu().buildAssetsDir,eh=(...t)=>Kg(Zg(),qb(),...t),Zg=(...t)=>{const e=Zu(),n=e.cdnURL||e.baseURL;return t.length?Kg(n,...t):n};globalThis.__buildAssetsURL=eh,globalThis.__publicAssetsURL=Zg;globalThis.$fetch||(globalThis.$fetch=Bb.create({baseURL:Hb()}));"global"in globalThis||(globalThis.global=globalThis);function Qc(t,e={},n){for(const s in t){const r=t[s],i=n?`${n}:${s}`:s;typeof r=="object"&&r!==null?Qc(r,e,i):typeof r=="function"&&(e[i]=r)}return e}const Wb={run:t=>t()},Gb=()=>Wb,e_=typeof console.createTask<"u"?console.createTask:Gb;function zb(t,e){const n=e.shift(),s=e_(n);return t.reduce((r,i)=>r.then(()=>s.run(()=>i(...e))),Promise.resolve())}function Kb(t,e){const n=e.shift(),s=e_(n);return Promise.all(t.map(r=>s.run(()=>r(...e))))}function pc(t,e){for(const n of[...t])n(e)}let Qb=class{constructor(){this._hooks={},this._before=void 0,this._after=void 0,this._deprecatedMessages=void 0,this._deprecatedHooks={},this.hook=this.hook.bind(this),this.callHook=this.callHook.bind(this),this.callHookWith=this.callHookWith.bind(this)}hook(e,n,s={}){if(!e||typeof n!="function")return()=>{};const r=e;let i;for(;this._deprecatedHooks[e];)i=this._deprecatedHooks[e],e=i.to;if(i&&!s.allowDeprecated){let o=i.message;o||(o=`${r} hook has been deprecated`+(i.to?`, please use ${i.to}`:"")),this._deprecatedMessages||(this._deprecatedMessages=new Set),this._deprecatedMessages.has(o)||(console.warn(o),this._deprecatedMessages.add(o))}if(!n.name)try{Object.defineProperty(n,"name",{get:()=>"_"+e.replace(/\W+/g,"_")+"_hook_cb",configurable:!0})}catch{}return this._hooks[e]=this._hooks[e]||[],this._hooks[e].push(n),()=>{n&&(this.removeHook(e,n),n=void 0)}}hookOnce(e,n){let s,r=(...i)=>(typeof s=="function"&&s(),s=void 0,r=void 0,n(...i));return s=this.hook(e,r),s}removeHook(e,n){if(this._hooks[e]){const s=this._hooks[e].indexOf(n);s!==-1&&this._hooks[e].splice(s,1),this._hooks[e].length===0&&delete this._hooks[e]}}deprecateHook(e,n){this._deprecatedHooks[e]=typeof n=="string"?{to:n}:n;const s=this._hooks[e]||[];delete this._hooks[e];for(const r of s)this.hook(e,r)}deprecateHooks(e){Object.assign(this._deprecatedHooks,e);for(const n in e)this.deprecateHook(n,e[n])}addHooks(e){const n=Qc(e),s=Object.keys(n).map(r=>this.hook(r,n[r]));return()=>{for(const r of s.splice(0,s.length))r()}}removeHooks(e){const n=Qc(e);for(const s in n)this.removeHook(s,n[s])}removeAllHooks(){for(const e in this._hooks)delete this._hooks[e]}callHook(e,...n){return n.unshift(e),this.callHookWith(zb,e,...n)}callHookParallel(e,...n){return n.unshift(e),this.callHookWith(Kb,e,...n)}callHookWith(e,n,...s){const r=this._before||this._after?{name:n,args:s,context:{}}:void 0;this._before&&pc(this._before,r);const i=e(n in this._hooks?[...this._hooks[n]]:[],s);return i instanceof Promise?i.finally(()=>{this._after&&r&&pc(this._after,r)}):(this._after&&r&&pc(this._after,r),i)}beforeEach(e){return this._before=this._before||[],this._before.push(e),()=>{if(this._before!==void 0){const n=this._before.indexOf(e);n!==-1&&this._before.splice(n,1)}}}afterEach(e){return this._after=this._after||[],this._after.push(e),()=>{if(this._after!==void 0){const n=this._after.indexOf(e);n!==-1&&this._after.splice(n,1)}}}};function Jb(){return new Qb}function Yb(t={}){let e,n=!1;const s=o=>{if(e&&e!==o)throw new Error("Context conflict")};let r;if(t.asyncContext){const o=t.AsyncLocalStorage||globalThis.AsyncLocalStorage;o?r=new o:console.warn("[unctx] `AsyncLocalStorage` is not provided.")}const i=()=>{if(r){const o=r.getStore();if(o!==void 0)return o}return e};return{use:()=>{const o=i();if(o===void 0)throw new Error("Context is not available");return o},tryUse:()=>i(),set:(o,l)=>{l||s(o),e=o,n=!0},unset:()=>{e=void 0,n=!1},call:(o,l)=>{s(o),e=o;try{return r?r.run(o,l):l()}finally{n||(e=void 0)}},async callAsync(o,l){e=o;const c=()=>{e=o},u=()=>e===o?c:void 0;Jc.add(u);try{const h=r?r.run(o,l):l();return n||(e=void 0),await h}finally{Jc.delete(u)}}}}function Xb(t={}){const e={};return{get(n,s={}){return e[n]||(e[n]=Yb({...t,...s})),e[n]}}}const Da=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof global<"u"?global:typeof window<"u"?window:{},Nd="__unctx__",Zb=Da[Nd]||(Da[Nd]=Xb()),eI=(t,e={})=>Zb.get(t,e),Dd="__unctx_async_handlers__",Jc=Da[Dd]||(Da[Dd]=new Set);function t_(t){const e=[];for(const r of Jc){const i=r();i&&e.push(i)}const n=()=>{for(const r of e)r()};let s=t();return s&&typeof s=="object"&&"catch"in s&&(s=s.catch(r=>{throw n(),r})),[s,n]}const Od={id:"__nuxt-loader"},sV={componentName:"NuxtLink",prefetch:!0,prefetchOn:{visibility:!0}},tI="#__nuxt",n_="nuxt-app",Vd=36e5,nI="vite:preloadError";function s_(t=n_){return eI(t,{asyncContext:!1})}const sI="__nuxt_plugin";function rI(t){let e=0;const n={_id:t.id||n_||"nuxt-app",_scope:SE(),provide:void 0,versions:{get nuxt(){return"4.2.2"},get vue(){return n.vueApp.version}},payload:vr({...t.ssrContext?.payload||{},data:vr({}),state:ms({}),once:new Set,_errors:vr({})}),static:{data:{}},runWithContext(r){return n._scope.active&&!Du()?n._scope.run(()=>xd(n,r)):xd(n,r)},isHydrating:!0,deferHydration(){if(!n.isHydrating)return()=>{};e++;let r=!1;return()=>{if(!r&&(r=!0,e--,e===0))return n.isHydrating=!1,n.callHook("app:suspense:resolve")}},_asyncDataPromises:{},_asyncData:vr({}),_payloadRevivers:{},...t};{const r=window.__NUXT__;if(r)for(const i in r)switch(i){case"data":case"state":case"_errors":Object.assign(n.payload[i],r[i]);break;default:n.payload[i]=r[i]}}n.hooks=Jb(),n.hook=n.hooks.hook,n.callHook=n.hooks.callHook,n.provide=(r,i)=>{const o="$"+r;Qo(n,o,i),Qo(n.vueApp.config.globalProperties,o,i)},Qo(n.vueApp,"$nuxt",n),Qo(n.vueApp.config.globalProperties,"$nuxt",n);{window.addEventListener(nI,i=>{n.callHook("app:chunkError",{error:i.payload}),i.payload.message.includes("Unable to preload CSS")&&i.preventDefault()}),window.useNuxtApp||=at;const r=n.hook("app:error",(...i)=>{console.error("[nuxt] error caught during app initialization",...i)});n.hook("app:mounted",r)}const s=n.payload.config;return n.provide("config",s),n}function iI(t,e){e.hooks&&t.hooks.addHooks(e.hooks)}async function oI(t,e){if(typeof e=="function"){const{provide:n}=await t.runWithContext(()=>e(t))||{};if(n&&typeof n=="object")for(const s in n)t.provide(s,n[s])}}async function aI(t,e){const n=new Set,s=[],r=[];let i,o=0;async function l(c){const u=c.dependsOn?.filter(h=>e.some(d=>d._name===h)&&!n.has(h))??[];if(u.length>0)s.push([new Set(u),c]);else{const h=oI(t,c).then(async()=>{c._name&&(n.add(c._name),await Promise.all(s.map(async([d,m])=>{d.has(c._name)&&(d.delete(c._name),d.size===0&&(o++,await l(m)))})))}).catch(d=>{if(!c.parallel&&!t.payload.error)throw d;i||=d});c.parallel?r.push(h):await h}}for(const c of e)iI(t,c);for(const c of e)await l(c);if(await Promise.all(r),o)for(let c=0;c<o;c++)await Promise.all(r);if(i)throw t.payload.error||i}function Un(t){if(typeof t=="function")return t;const e=t._name||t.name;return delete t.name,Object.assign(t.setup||(()=>{}),t,{[sI]:!0,_name:e})}function xd(t,e,n){const s=()=>e();return s_(t._id).set(t),t.vueApp.runWithContext(s)}function lI(t){let e;return ul()&&(e=Yr()?.appContext.app.$nuxt),e||=s_(t).tryUse(),e||null}function at(t){const e=lI(t);if(!e)throw new Error("[nuxt] instance unavailable");return e}function eo(t){return at().$config}function Qo(t,e,n){Object.defineProperty(t,e,{get:()=>n})}function cI(t,e){return{ctx:{table:t},matchAll:n=>i_(n,t)}}function r_(t){const e={};for(const n in t)e[n]=n==="dynamic"?new Map(Object.entries(t[n]).map(([s,r])=>[s,r_(r)])):new Map(Object.entries(t[n]));return e}function uI(t){return cI(r_(t))}function i_(t,e,n){t.endsWith("/")&&(t=t.slice(0,-1)||"/");const s=[];for(const[i,o]of Md(e.wildcard))(t===i||t.startsWith(i+"/"))&&s.push(o);for(const[i,o]of Md(e.dynamic))if(t.startsWith(i+"/")){const l="/"+t.slice(i.length).split("/").splice(2).join("/");s.push(...i_(l,o))}const r=e.static.get(t);return r&&s.push(r),s.filter(Boolean)}function Md(t){return[...t.entries()].sort((e,n)=>e[0].length-n[0].length)}function mc(t){if(t===null||typeof t!="object")return!1;const e=Object.getPrototypeOf(t);return e!==null&&e!==Object.prototype&&Object.getPrototypeOf(e)!==null||Symbol.iterator in t?!1:Symbol.toStringTag in t?Object.prototype.toString.call(t)==="[object Module]":!0}function Yc(t,e,n=".",s){if(!mc(e))return Yc(t,{},n,s);const r=Object.assign({},e);for(const i in t){if(i==="__proto__"||i==="constructor")continue;const o=t[i];o!=null&&(s&&s(r,i,o,n)||(Array.isArray(o)&&Array.isArray(r[i])?r[i]=[...o,...r[i]]:mc(o)&&mc(r[i])?r[i]=Yc(o,r[i],(n?`${n}.`:"")+i.toString(),s):r[i]=o))}return r}function hI(t){return(...e)=>e.reduce((n,s)=>Yc(n,s,"",t),{})}const fI=hI();function dI(t,e){try{return e in t}catch{return!1}}class Ld extends Error{static __h3_error__=!0;statusCode=500;fatal=!1;unhandled=!1;statusMessage;data;cause;constructor(e,n={}){super(e,n),n.cause&&!this.cause&&(this.cause=n.cause)}toJSON(){const e={message:this.message,statusCode:Xc(this.statusCode,500)};return this.statusMessage&&(e.statusMessage=o_(this.statusMessage)),this.data!==void 0&&(e.data=this.data),e}}function pI(t){if(typeof t=="string")return new Ld(t);if(mI(t))return t;const e=new Ld(t.message??t.statusMessage??"",{cause:t.cause||t});if(dI(t,"stack"))try{Object.defineProperty(e,"stack",{get(){return t.stack}})}catch{try{e.stack=t.stack}catch{}}if(t.data&&(e.data=t.data),t.statusCode?e.statusCode=Xc(t.statusCode,e.statusCode):t.status&&(e.statusCode=Xc(t.status,e.statusCode)),t.statusMessage?e.statusMessage=t.statusMessage:t.statusText&&(e.statusMessage=t.statusText),e.statusMessage){const n=e.statusMessage;o_(e.statusMessage)!==n&&console.warn("[h3] Please prefer using `message` for longer error messages instead of `statusMessage`. In the future, `statusMessage` will be sanitized by default.")}return t.fatal!==void 0&&(e.fatal=t.fatal),t.unhandled!==void 0&&(e.unhandled=t.unhandled),e}function mI(t){return t?.constructor?.__h3_error__===!0}const gI=/[^\u0009\u0020-\u007E]/g;function o_(t=""){return t.replace(gI,"")}function Xc(t,e=200){return!t||(typeof t=="string"&&(t=Number.parseInt(t,10)),t<100||t>999)?e:t}const a_=Symbol("route");import.meta.url.replace(/\/app\/.*$/,"/");const zs=()=>at()?.$router,l_=()=>ul()?Hs(a_,at()._route):at()._route;const _I=()=>{try{if(at()._processingMiddleware)return!0}catch{return!1}return!1},yI=(t,e)=>{t||="/";const n=typeof t=="string"?t:"path"in t?vI(t):zs().resolve(t).href;if(e?.open){const{target:c="_blank",windowFeatures:u={}}=e.open,h=[];for(const[d,m]of Object.entries(u))m!==void 0&&h.push(`${d.toLowerCase()}=${m}`);return open(n,c,h.join(", ")),Promise.resolve()}const s=Xr(n,{acceptRelative:!0}),r=e?.external||s;if(r){if(!e?.external)throw new Error("Navigating to an external URL is not allowed by default. Use `navigateTo(url, { external: true })`.");const{protocol:c}=new URL(n,window.location.href);if(c&&Eb(c))throw new Error(`Cannot navigate to a URL with '${c}' protocol.`)}const i=_I();if(!r&&i){if(e?.replace){if(typeof t=="string"){const{pathname:c,search:u,hash:h}=Jg(t);return{path:c,...u&&{query:Xu(u)},...h&&{hash:h},replace:!0}}return{...t,replace:!0}}return t}const o=zs(),l=at();return r?(l._scope.stop(),e?.replace?location.replace(n):location.href=n,i?l.isHydrating?new Promise(()=>{}):!1:Promise.resolve()):e?.replace?o.replace(t):o.push(t)};function vI(t){return Gg(t.path||"",t.query||{})+(t.hash||"")}const c_="__nuxt_error",th=()=>eT(at().payload,"error"),EI=t=>{const e=nh(t);try{const n=th();at().hooks.callHook("app:error",e),n.value||=e}catch{throw e}return e},TI=async(t={})=>{const e=at(),n=th();e.callHook("app:error:cleared",t),t.redirect&&await zs().replace(t.redirect),n.value=void 0},wI=t=>!!t&&typeof t=="object"&&c_ in t,nh=t=>{const e=pI(t);return Object.defineProperty(e,c_,{value:!0,configurable:!1,writable:!1}),e};function bI(t){const e=AI(t),n=new ArrayBuffer(e.length),s=new DataView(n);for(let r=0;r<n.byteLength;r++)s.setUint8(r,e.charCodeAt(r));return n}const II="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";function AI(t){t.length%4===0&&(t=t.replace(/==?$/,""));let e="",n=0,s=0;for(let r=0;r<t.length;r++)n<<=6,n|=II.indexOf(t[r]),s+=6,s===24&&(e+=String.fromCharCode((n&16711680)>>16),e+=String.fromCharCode((n&65280)>>8),e+=String.fromCharCode(n&255),n=s=0);return s===12?(n>>=4,e+=String.fromCharCode(n)):s===18&&(n>>=2,e+=String.fromCharCode((n&65280)>>8),e+=String.fromCharCode(n&255)),e}const RI=-1,SI=-2,CI=-3,PI=-4,kI=-5,NI=-6;function DI(t,e){return OI(JSON.parse(t),e)}function OI(t,e){if(typeof t=="number")return r(t,!0);if(!Array.isArray(t)||t.length===0)throw new Error("Invalid input");const n=t,s=Array(n.length);function r(i,o=!1){if(i===RI)return;if(i===CI)return NaN;if(i===PI)return 1/0;if(i===kI)return-1/0;if(i===NI)return-0;if(o||typeof i!="number")throw new Error("Invalid input");if(i in s)return s[i];const l=n[i];if(!l||typeof l!="object")s[i]=l;else if(Array.isArray(l))if(typeof l[0]=="string"){const c=l[0],u=e&&Object.hasOwn(e,c)?e[c]:void 0;if(u){let h=l[1];return typeof h!="number"&&(h=n.push(l[1])-1),s[i]=u(r(h))}switch(c){case"Date":s[i]=new Date(l[1]);break;case"Set":const h=new Set;s[i]=h;for(let g=1;g<l.length;g+=1)h.add(r(l[g]));break;case"Map":const d=new Map;s[i]=d;for(let g=1;g<l.length;g+=2)d.set(r(l[g]),r(l[g+1]));break;case"RegExp":s[i]=new RegExp(l[1],l[2]);break;case"Object":s[i]=Object(l[1]);break;case"BigInt":s[i]=BigInt(l[1]);break;case"null":const m=Object.create(null);s[i]=m;for(let g=1;g<l.length;g+=2)m[l[g]]=r(l[g+1]);break;case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"BigInt64Array":case"BigUint64Array":{const g=globalThis[c],v=new g(r(l[1]));s[i]=l[2]!==void 0?v.subarray(l[2],l[3]):v;break}case"ArrayBuffer":{const g=l[1],v=bI(g);s[i]=v;break}case"Temporal.Duration":case"Temporal.Instant":case"Temporal.PlainDate":case"Temporal.PlainTime":case"Temporal.PlainDateTime":case"Temporal.PlainMonthDay":case"Temporal.PlainYearMonth":case"Temporal.ZonedDateTime":{const g=c.slice(9);s[i]=Temporal[g].from(l[1]);break}case"URL":{const g=new URL(l[1]);s[i]=g;break}case"URLSearchParams":{const g=new URLSearchParams(l[1]);s[i]=g;break}default:throw new Error(`Unknown type ${c}`)}}else{const c=new Array(l.length);s[i]=c;for(let u=0;u<l.length;u+=1){const h=l[u];h!==SI&&(c[u]=r(h))}}else{const c={};s[i]=c;for(const u in l){if(u==="__proto__")throw new Error("Cannot parse an object with a `__proto__` property");const h=l[u];c[u]=r(h)}}return s[i]}return r(0)}const VI=new Set(["link","style","script","noscript"]),xI=new Set(["title","titleTemplate","script","style","noscript"]),Fd=new Set(["base","meta","link","style","script","noscript"]),MI=new Set(["title","base","htmlAttrs","bodyAttrs","meta","link","style","script","noscript"]),LI=new Set(["base","title","titleTemplate","bodyAttrs","htmlAttrs","templateParams"]),FI=new Set(["key","tagPosition","tagPriority","tagDuplicateStrategy","innerHTML","textContent","processTemplateParams"]),UI=new Set(["templateParams","htmlAttrs","bodyAttrs"]),$I=new Set(["theme-color","google-site-verification","og","article","book","profile","twitter","author"]);function Zc(t,e={},n){for(const s in t){const r=t[s],i=n?`${n}:${s}`:s;typeof r=="object"&&r!==null?Zc(r,e,i):typeof r=="function"&&(e[i]=r)}return e}const u_=(()=>{if(console.createTask)return console.createTask;const t={run:e=>e()};return()=>t})();function h_(t,e,n,s){for(let r=n;r<t.length;r+=1)try{const i=s?s.run(()=>t[r](...e)):t[r](...e);if(i instanceof Promise)return i.then(()=>h_(t,e,r+1,s))}catch(i){return Promise.reject(i)}}function BI(t,e,n){if(t.length>0)return h_(t,e,0,u_(n))}function jI(t,e,n){if(t.length>0){const s=u_(n);return Promise.all(t.map(r=>s.run(()=>r(...e))))}}function gc(t,e){for(const n of[...t])n(e)}var HI=class{_hooks;_before;_after;_deprecatedHooks;_deprecatedMessages;constructor(){this._hooks={},this._before=void 0,this._after=void 0,this._deprecatedMessages=void 0,this._deprecatedHooks={},this.hook=this.hook.bind(this),this.callHook=this.callHook.bind(this),this.callHookWith=this.callHookWith.bind(this)}hook(t,e,n={}){if(!t||typeof e!="function")return()=>{};const s=t;let r;for(;this._deprecatedHooks[t];)r=this._deprecatedHooks[t],t=r.to;if(r&&!n.allowDeprecated){let i=r.message;i||(i=`${s} hook has been deprecated`+(r.to?`, please use ${r.to}`:"")),this._deprecatedMessages||(this._deprecatedMessages=new Set),this._deprecatedMessages.has(i)||(console.warn(i),this._deprecatedMessages.add(i))}if(!e.name)try{Object.defineProperty(e,"name",{get:()=>"_"+t.replace(/\W+/g,"_")+"_hook_cb",configurable:!0})}catch{}return this._hooks[t]=this._hooks[t]||[],this._hooks[t].push(e),()=>{e&&(this.removeHook(t,e),e=void 0)}}hookOnce(t,e){let n,s=(...r)=>(typeof n=="function"&&n(),n=void 0,s=void 0,e(...r));return n=this.hook(t,s),n}removeHook(t,e){const n=this._hooks[t];if(n){const s=n.indexOf(e);s!==-1&&n.splice(s,1),n.length===0&&(this._hooks[t]=void 0)}}deprecateHook(t,e){this._deprecatedHooks[t]=typeof e=="string"?{to:e}:e;const n=this._hooks[t]||[];this._hooks[t]=void 0;for(const s of n)this.hook(t,s)}deprecateHooks(t){for(const e in t)this.deprecateHook(e,t[e])}addHooks(t){const e=Zc(t),n=Object.keys(e).map(s=>this.hook(s,e[s]));return()=>{for(const s of n)s();n.length=0}}removeHooks(t){const e=Zc(t);for(const n in e)this.removeHook(n,e[n])}removeAllHooks(){this._hooks={}}callHook(t,...e){return this.callHookWith(BI,t,e)}callHookParallel(t,...e){return this.callHookWith(jI,t,e)}callHookWith(t,e,n){const s=this._before||this._after?{name:e,args:n,context:{}}:void 0;this._before&&gc(this._before,s);const r=t(this._hooks[e]?[...this._hooks[e]]:[],n,e);return r instanceof Promise?r.finally(()=>{this._after&&s&&gc(this._after,s)}):(this._after&&s&&gc(this._after,s),r)}beforeEach(t){return this._before=this._before||[],this._before.push(t),()=>{if(this._before!==void 0){const e=this._before.indexOf(t);e!==-1&&this._before.splice(e,1)}}}afterEach(t){return this._after=this._after||[],this._after.push(t),()=>{if(this._after!==void 0){const e=this._after.indexOf(t);e!==-1&&this._after.splice(e,1)}}}};function qI(){return new HI}const WI=["name","property","http-equiv"],GI=new Set(["viewport","description","keywords","robots"]);function f_(t){const e=t.split(":");return e.length?$I.has(e[1]):!1}function eu(t){const{props:e,tag:n}=t;if(LI.has(n))return n;if(n==="link"&&e.rel==="canonical")return"canonical";if(e.charset)return"charset";if(t.tag==="meta"){for(const s of WI)if(e[s]!==void 0){const r=e[s],i=r&&typeof r=="string"&&r.includes(":"),o=r&&GI.has(r),c=!(i||o)&&t.key?`:key:${t.key}`:"";return`${n}:${r}${c}`}}if(t.key)return`${n}:key:${t.key}`;if(e.id)return`${n}:id:${e.id}`;if(xI.has(n)){const s=t.textContent||t.innerHTML;if(s)return`${n}:content:${s}`}}function Ud(t){const e=t._h||t._d;if(e)return e;const n=t.textContent||t.innerHTML;return n||`${t.tag}:${Object.entries(t.props).map(([s,r])=>`${s}:${String(r)}`).join(",")}`}function Oa(t,e,n){typeof t==="function"&&(!n||n!=="titleTemplate"&&!(n[0]==="o"&&n[1]==="n"))&&(t=t());const r=e?e(n,t):t;if(Array.isArray(r))return r.map(i=>Oa(i,e));if(r?.constructor===Object){const i={};for(const o of Object.keys(r))i[o]=Oa(r[o],e,o);return i}return r}function zI(t,e){const n=t==="style"?new Map:new Set;function s(r){if(r==null||r===void 0)return;const i=String(r).trim();if(i)if(t==="style"){const[o,...l]=i.split(":").map(c=>c?c.trim():"");o&&l.length&&n.set(o,l.join(":"))}else i.split(" ").filter(Boolean).forEach(o=>n.add(o))}return typeof e=="string"?t==="style"?e.split(";").forEach(s):s(e):Array.isArray(e)?e.forEach(r=>s(r)):e&&typeof e=="object"&&Object.entries(e).forEach(([r,i])=>{i&&i!=="false"&&(t==="style"?n.set(String(r).trim(),String(i)):s(r))}),n}function d_(t,e){return t.props=t.props||{},e?t.tag==="templateParams"?(t.props=e,t):(Object.entries(e).forEach(([n,s])=>{if(s===null){t.props[n]=null;return}if(n==="class"||n==="style"){t.props[n]=zI(n,s);return}if(FI.has(n)){if(["textContent","innerHTML"].includes(n)&&typeof s=="object"){let l=e.type;if(e.type||(l="application/json"),!l?.endsWith("json")&&l!=="speculationrules")return;e.type=l,t.props.type=l,t[n]=JSON.stringify(s)}else t[n]=s;return}const r=String(s),i=n.startsWith("data-"),o=t.tag==="meta"&&n==="content";r==="true"||r===""?t.props[n]=i||o?r:!0:!s&&i&&r==="false"?t.props[n]="false":s!==void 0&&(t.props[n]=s)}),t):t}function KI(t,e){const n=typeof e=="object"&&typeof e!="function"?e:{[t==="script"||t==="noscript"||t==="style"?"innerHTML":"textContent"]:e},s=d_({tag:t,props:{}},n);return s.key&&VI.has(s.tag)&&(s.props["data-hid"]=s._h=s.key),s.tag==="script"&&typeof s.innerHTML=="object"&&(s.innerHTML=JSON.stringify(s.innerHTML),s.props.type=s.props.type||"application/json"),Array.isArray(s.props.content)?s.props.content.map(r=>({...s,props:{...s.props,content:r}})):s}function QI(t,e){if(!t)return[];typeof t=="function"&&(t=t());const n=(r,i)=>{for(let o=0;o<e.length;o++)i=e[o](r,i);return i};t=n(void 0,t);const s=[];return t=Oa(t,n),Object.entries(t||{}).forEach(([r,i])=>{if(i!==void 0)for(const o of Array.isArray(i)?i:[i])s.push(KI(r,o))}),s.flat()}const $d=(t,e)=>t._w===e._w?t._p-e._p:t._w-e._w,Bd={base:-10,title:10},JI={critical:-8,high:-1,low:2},jd={meta:{"content-security-policy":-30,charset:-20,viewport:-15},link:{preconnect:20,stylesheet:60,preload:70,modulepreload:70,prefetch:90,"dns-prefetch":90,prerender:90},script:{async:30,defer:80,sync:50},style:{imported:40,sync:60}},YI=/@import/,Si=t=>t===""||t===!0;function XI(t,e){if(typeof e.tagPriority=="number")return e.tagPriority;let n=100;const s=JI[e.tagPriority]||0,r=t.resolvedOptions.disableCapoSorting?{link:{},script:{},style:{}}:jd;if(e.tag in Bd)n=Bd[e.tag];else if(e.tag==="meta"){const i=e.props["http-equiv"]==="content-security-policy"?"content-security-policy":e.props.charset?"charset":e.props.name==="viewport"?"viewport":null;i&&(n=jd.meta[i])}else if(e.tag==="link"&&e.props.rel)n=r.link[e.props.rel];else if(e.tag==="script"){const i=String(e.props.type);Si(e.props.async)?n=r.script.async:e.props.src&&!Si(e.props.defer)&&!Si(e.props.async)&&i!=="module"&&!i.endsWith("json")||e.innerHTML&&!i.endsWith("json")?n=r.script.sync:(Si(e.props.defer)&&e.props.src&&!Si(e.props.async)||i==="module")&&(n=r.script.defer)}else e.tag==="style"&&(n=e.innerHTML&&YI.test(e.innerHTML)?r.style.imported:r.style.sync);return(n||100)+s}function Hd(t,e){const n=typeof e=="function"?e(t):e,s=n.key||String(t.plugins.size+1);t.plugins.get(s)||(t.plugins.set(s,n),t.hooks.addHooks(n.hooks||{}))}function ZI(t={}){const e=qI();e.addHooks(t.hooks||{});const n=!t.document,s=new Map,r=new Map,i=new Set,o={_entryCount:1,plugins:r,dirty:!1,resolvedOptions:t,hooks:e,ssr:n,entries:s,headEntries(){return[...s.values()]},use:l=>Hd(o,l),push(l,c){const u={...c||{}};delete u.head;const h=u._index??o._entryCount++,d={_i:h,input:l,options:u},m={_poll(g=!1){o.dirty=!0,!g&&i.add(h),e.callHook("entries:updated",o)},dispose(){s.delete(h)&&o.invalidate()},patch(g){(!u.mode||u.mode==="server"&&n||u.mode==="client"&&!n)&&(d.input=g,s.set(h,d),m._poll())}};return m.patch(l),m},async resolveTags(){const l={tagMap:new Map,tags:[],entries:[...o.entries.values()]};for(await e.callHook("entries:resolve",l);i.size;){const m=i.values().next().value;i.delete(m);const g=s.get(m);if(g){const v={tags:QI(g.input,t.propResolvers||[]).map(I=>Object.assign(I,g.options)),entry:g};await e.callHook("entries:normalize",v),g._tags=v.tags.map((I,D)=>(I._w=XI(o,I),I._p=(g._i<<10)+D,I._d=eu(I),I))}}let c=!1;l.entries.flatMap(m=>(m._tags||[]).map(g=>({...g,props:{...g.props}}))).sort($d).reduce((m,g)=>{const v=String(g._d||g._p);if(!m.has(v))return m.set(v,g);const I=m.get(v);if((g?.tagDuplicateStrategy||(UI.has(g.tag)?"merge":null)||(g.key&&g.key===I.key?"merge":null))==="merge"){const k={...I.props};Object.entries(g.props).forEach(([M,R])=>k[M]=M==="style"?new Map([...I.props.style||new Map,...R]):M==="class"?new Set([...I.props.class||new Set,...R]):R),m.set(v,{...g,props:k})}else g._p>>10===I._p>>10&&g.tag==="meta"&&f_(v)?(m.set(v,Object.assign([...Array.isArray(I)?I:[I],g],g)),c=!0):(g._w===I._w?g._p>I._p:g?._w<I?._w)&&m.set(v,g);return m},l.tagMap);const u=l.tagMap.get("title"),h=l.tagMap.get("titleTemplate");if(o._title=u?.textContent,h){const m=h?.textContent;if(o._titleTemplate=m,m){let g=typeof m=="function"?m(u?.textContent):m;typeof g=="string"&&!o.plugins.has("template-params")&&(g=g.replace("%s",u?.textContent||"")),u?g===null?l.tagMap.delete("title"):l.tagMap.set("title",{...u,textContent:g}):(h.tag="title",h.textContent=g)}}l.tags=Array.from(l.tagMap.values()),c&&(l.tags=l.tags.flat().sort($d)),await e.callHook("tags:beforeResolve",l),await e.callHook("tags:resolve",l),await e.callHook("tags:afterResolve",l);const d=[];for(const m of l.tags){const{innerHTML:g,tag:v,props:I}=m;if(MI.has(v)&&!(Object.keys(I).length===0&&!m.innerHTML&&!m.textContent)&&!(v==="meta"&&!I.content&&!I["http-equiv"]&&!I.charset)){if(v==="script"&&g){if(String(I.type).endsWith("json")){const D=typeof g=="string"?g:JSON.stringify(g);m.innerHTML=D.replace(/</g,"\\u003C")}else typeof g=="string"&&(m.innerHTML=g.replace(new RegExp(`</${v}`,"g"),`<\\/${v}`));m._d=eu(m)}d.push(m)}}return d},invalidate(){for(const l of s.values())i.add(l._i);o.dirty=!0,e.callHook("entries:updated",o)}};return(t?.plugins||[]).forEach(l=>Hd(o,l)),o.hooks.callHook("init",o),t.init?.forEach(l=>l&&o.push(l)),o}const e0=(t,e)=>et(e)?JE(e):e,sh="usehead";function t0(t){return{install(n){n.config.globalProperties.$unhead=t,n.config.globalProperties.$head=t,n.provide(sh,t)}}.install}function n0(){if(ul()){const t=Hs(sh);if(!t)throw new Error("useHead() was called without provide context, ensure you call it through the setup() function.");return t}throw new Error("useHead() was called without provide context, ensure you call it through the setup() function.")}function s0(t,e={}){const n=e.head||n0();return n.ssr?n.push(t||{},e):r0(n,t,e)}function r0(t,e,n={}){const s=le(!1);let r;return uT(()=>{const o=s.value?{}:Oa(e,e0);r?r.patch(o):r=t.push(o,n)}),Yr()&&(qu(()=>{r.dispose()}),ag(()=>{s.value=!0}),og(()=>{s.value=!1})),r}function p_(t){const e=t||at();return e.ssrContext?.head||e.runWithContext(()=>{if(ul()){const n=Hs(sh);if(!n)throw new Error("[nuxt] [unhead] Missing Unhead instance.");return n}})}function rV(t,e={}){const n=e.head||p_(e.nuxt);return s0(t,{head:n,...e})}let aa,la;function i0(){return aa=$fetch(eh(`builds/meta/${eo().app.buildId}.json`),{responseType:"json"}),aa.then(t=>{la=uI(t.matcher)}).catch(t=>{console.error("[nuxt] Error fetching app manifest.",t)}),aa}function _l(){return aa||i0()}async function rh(t){const e=typeof t=="string"?t:t.path;if(await _l(),!la)return console.error("[nuxt] Error creating app manifest matcher.",la),{};try{return fI({},...la.matchAll(e).reverse())}catch(n){return console.error("[nuxt] Error matching route rules.",n),{}}}async function qd(t,e={}){if(!await g_(t))return null;const s=await a0(t,e);return await m_(s)||null}const o0="_payload.json";async function a0(t,e={}){const n=new URL(t,"http://localhost");if(n.host!=="localhost"||Xr(n.pathname,{acceptRelative:!0}))throw new Error("Payload URL must not include hostname: "+t);const s=eo(),r=e.hash||(e.fresh?Date.now():s.app.buildId),i=s.app.cdnURL,o=i&&await g_(t)?i:s.app.baseURL;return gl(o,n.pathname,o0+(r?`?${r}`:""))}async function m_(t){const e=fetch(t,{cache:"force-cache"}).then(n=>n.text().then(__));try{return await e}catch(n){console.warn("[nuxt] Cannot load payload ",t,n)}return null}async function g_(t=l_().path){const e=at();return t=t==="/"?t:t.replace(/\/$/,""),(await _l()).prerendered.includes(t)?!0:e.runWithContext(async()=>{const s=await rh({path:t});return!!s.prerender&&!s.redirect})}let Vs=null;async function l0(){if(Vs)return Vs;const t=document.getElementById("__NUXT_DATA__");if(!t)return{};const e=await __(t.textContent||""),n=t.dataset.src?await m_(t.dataset.src):void 0;return Vs={...e,...n,...window.__NUXT__},Vs.config?.public&&(Vs.config.public=ms(Vs.config.public)),Vs}async function __(t){return await DI(t,at()._payloadRevivers)}function c0(t,e){at()._payloadRevivers[t]=e}const u0=[["NuxtError",t=>nh(t)],["EmptyShallowRef",t=>Qi(t==="_"?void 0:t==="0n"?BigInt(0):Pa(t))],["EmptyRef",t=>le(t==="_"?void 0:t==="0n"?BigInt(0):Pa(t))],["ShallowRef",t=>Qi(t)],["ShallowReactive",t=>vr(t)],["Ref",t=>le(t)],["Reactive",t=>ms(t)]],h0=Un({name:"nuxt:revive-payload:client",order:-30,async setup(t){let e,n;for(const[s,r]of u0)c0(s,r);Object.assign(t.payload,([e,n]=t_(()=>t.runWithContext(l0)),e=await e,n(),e)),delete window.__NUXT__}});async function ih(t,e={}){const n=e.document||t.resolvedOptions.document;if(!n||!t.dirty)return;const s={shouldRender:!0,tags:[]};if(await t.hooks.callHook("dom:beforeRender",s),!!s.shouldRender)return t._domUpdatePromise||(t._domUpdatePromise=new Promise(async r=>{const i=new Map,o=new Promise(g=>{t.resolveTags().then(v=>{g(v.map(I=>{const D=i.get(I._d)||0,k={tag:I,id:(D?`${I._d}:${D}`:I._d)||Ud(I),shouldRender:!0};return I._d&&f_(I._d)&&i.set(I._d,D+1),k}))})});let l=t._dom;if(!l){l={title:n.title,elMap:new Map().set("htmlAttrs",n.documentElement).set("bodyAttrs",n.body)};for(const g of["body","head"]){const v=n[g]?.children;for(const I of v){const D=I.tagName.toLowerCase();if(!Fd.has(D))continue;const k=d_({tag:D,props:{}},{innerHTML:I.innerHTML,...I.getAttributeNames().reduce((M,R)=>(M[R]=I.getAttribute(R),M),{})||{}});if(k.key=I.getAttribute("data-hid")||void 0,k._d=eu(k)||Ud(k),l.elMap.has(k._d)){let M=1,R=k._d;for(;l.elMap.has(R);)R=`${k._d}:${M++}`;l.elMap.set(R,I)}else l.elMap.set(k._d,I)}}}l.pendingSideEffects={...l.sideEffects},l.sideEffects={};function c(g,v,I){const D=`${g}:${v}`;l.sideEffects[D]=I,delete l.pendingSideEffects[D]}function u({id:g,$el:v,tag:I}){const D=I.tag.endsWith("Attrs");l.elMap.set(g,v),D||(I.textContent&&I.textContent!==v.textContent&&(v.textContent=I.textContent),I.innerHTML&&I.innerHTML!==v.innerHTML&&(v.innerHTML=I.innerHTML),c(g,"el",()=>{v?.remove(),l.elMap.delete(g)}));for(const k in I.props){if(!Object.prototype.hasOwnProperty.call(I.props,k))continue;const M=I.props[k];if(k.startsWith("on")&&typeof M=="function"){const O=v?.dataset;if(O&&O[`${k}fired`]){const L=k.slice(0,-5);M.call(v,new Event(L.substring(2)))}v.getAttribute(`data-${k}`)!==""&&((I.tag==="bodyAttrs"?n.defaultView:v).addEventListener(k.substring(2),M.bind(v)),v.setAttribute(`data-${k}`,""));continue}const R=`attr:${k}`;if(k==="class"){if(!M)continue;for(const O of M)D&&c(g,`${R}:${O}`,()=>v.classList.remove(O)),!v.classList.contains(O)&&v.classList.add(O)}else if(k==="style"){if(!M)continue;for(const[O,L]of M)c(g,`${R}:${O}`,()=>{v.style.removeProperty(O)}),v.style.setProperty(O,L)}else M!==!1&&M!==null&&(v.getAttribute(k)!==M&&v.setAttribute(k,M===!0?"":String(M)),D&&c(g,R,()=>v.removeAttribute(k)))}}const h=[],d={bodyClose:void 0,bodyOpen:void 0,head:void 0},m=await o;for(const g of m){const{tag:v,shouldRender:I,id:D}=g;if(I){if(v.tag==="title"){n.title=v.textContent,c("title","",()=>n.title=l.title);continue}g.$el=g.$el||l.elMap.get(D),g.$el?u(g):Fd.has(v.tag)&&h.push(g)}}for(const g of h){const v=g.tag.tagPosition||"head";g.$el=n.createElement(g.tag.tag),u(g),d[v]=d[v]||n.createDocumentFragment(),d[v].appendChild(g.$el)}for(const g of m)await t.hooks.callHook("dom:renderTag",g,n,c);d.head&&n.head.appendChild(d.head),d.bodyOpen&&n.body.insertBefore(d.bodyOpen,n.body.firstChild),d.bodyClose&&n.body.appendChild(d.bodyClose);for(const g in l.pendingSideEffects)l.pendingSideEffects[g]();t._dom=l,await t.hooks.callHook("dom:rendered",{renders:m}),r()}).finally(()=>{t._domUpdatePromise=void 0,t.dirty=!1})),t._domUpdatePromise}function f0(t={}){const e=t.domOptions?.render||ih;t.document=t.document||(typeof window<"u"?document:void 0);const n=t.document?.head.querySelector('script[id="unhead:payload"]')?.innerHTML||!1;return ZI({...t,plugins:[...t.plugins||[],{key:"client",hooks:{"entries:updated":e}}],init:[n?JSON.parse(n):!1,...t.init||[]]})}function d0(t,e){let n=0;return()=>{const s=++n;e(()=>{n===s&&t()})}}function p0(t={}){const e=f0({domOptions:{render:d0(()=>ih(e),n=>setTimeout(n,0))},...t});return e.install=t0(e),e}const m0={disableDefaults:!0},g0=Un({name:"nuxt:head",enforce:"pre",setup(t){const e=p0(m0);t.vueApp.use(e);{let n=!0;const s=async()=>{n=!1,await ih(e)};e.hooks.hook("dom:beforeRender",r=>{r.shouldRender=!n}),t.hooks.hook("page:start",()=>{n=!0}),t.hooks.hook("page:finish",()=>{t.isHydrating||s()}),t.hooks.hook("app:error",s),t.hooks.hook("app:suspense:resolve",s)}}}),_0=async t=>{let e,n;const s=([e,n]=t_(()=>rh({path:t.path})),e=await e,n(),e);if(s.redirect){const r=s.redirect.includes("#")?s.redirect:s.redirect+t.hash;return Xr(r,{acceptRelative:!0})?(window.location.href=r,!1):r}},y0=[_0];function _c(t){const e=t&&typeof t=="object"?t:{};typeof t=="object"&&(t=Yg({pathname:t.path||"",search:qg(t.query||{}),hash:t.hash||""}));const n=new URL(t.toString(),window.location.href);return{path:n.pathname,fullPath:t,query:Xu(n.search),hash:n.hash,params:e.params||{},name:void 0,matched:e.matched||[],redirectedFrom:void 0,meta:e.meta||{},href:t}}const v0=Un({name:"nuxt:router",enforce:"pre",setup(t){const e=bb(window.location.pathname,eo().app.baseURL)+window.location.search+window.location.hash,n=[],s={"navigate:before":[],"resolve:before":[],"navigate:after":[],error:[]},r=(d,m)=>(s[d].push(m),()=>s[d].splice(s[d].indexOf(m),1)),i=eo().app.baseURL,o=ms(_c(e));async function l(d,m){try{const g=_c(d);for(const v of s["navigate:before"]){const I=await v(g,o);if(I===!1||I instanceof Error)return;if(typeof I=="string"&&I.length)return l(I,!0)}for(const v of s["resolve:before"])await v(g,o);Object.assign(o,g),window.history[m?"replaceState":"pushState"]({},"",gl(i,g.fullPath)),t.isHydrating||await t.runWithContext(TI);for(const v of s["navigate:after"])await v(g,o)}catch(g){for(const v of s.error)await v(g)}}const u={currentRoute:Je(()=>o),isReady:()=>Promise.resolve(),options:{},install:()=>Promise.resolve(),push:d=>l(d,!1),replace:d=>l(d,!0),back:()=>window.history.go(-1),go:d=>window.history.go(d),forward:()=>window.history.go(1),beforeResolve:d=>r("resolve:before",d),beforeEach:d=>r("navigate:before",d),afterEach:d=>r("navigate:after",d),onError:d=>r("error",d),resolve:_c,addRoute:(d,m)=>{n.push(m)},getRoutes:()=>n,hasRoute:d=>n.some(m=>m.name===d),removeRoute:d=>{const m=n.findIndex(g=>g.name===d);m!==-1&&n.splice(m,1)}};t.vueApp.component("RouterLink",Fe({functional:!0,props:{to:{type:String,required:!0},custom:Boolean,replace:Boolean,activeClass:String,exactActiveClass:String,ariaCurrentValue:String},setup:(d,{slots:m})=>{const g=()=>l(d.to,d.replace);return()=>{const v=u.resolve(d.to);return d.custom?m.default?.({href:d.to,navigate:g,route:v}):ls("a",{href:d.to,onClick:I=>(I.preventDefault(),g())},m)}}})),window.addEventListener("popstate",d=>{const m=d.target.location;u.replace(m.href.replace(m.origin,""))}),t._route=o,t._middleware||={global:[],named:{}};const h=t.payload.state._layout;return t.hooks.hookOnce("app:created",async()=>{u.beforeEach(async(d,m)=>{d.meta=ms(d.meta||{}),t.isHydrating&&h&&!gn(d.meta.layout)&&(d.meta.layout=h),t._processingMiddleware=!0;{const g=new Set([...y0,...t._middleware.global]);{const v=await t.runWithContext(()=>rh({path:d.path}));if(v.appMiddleware)for(const I in v.appMiddleware){const D=t._middleware.named[I];if(!D)return;v.appMiddleware[I]?g.add(D):g.delete(D)}}for(const v of g){const I=await t.runWithContext(()=>v(d,m));if(I!==!0&&(I||I===!1))return I}}}),u.afterEach(()=>{delete t._processingMiddleware}),await u.replace(e),Ab(o.fullPath,e)||await t.runWithContext(()=>yI(o.fullPath))}),{provide:{route:o,router:u}}}}),Wd=globalThis.requestIdleCallback||(t=>{const e=Date.now(),n={didTimeout:!1,timeRemaining:()=>Math.max(0,50-(Date.now()-e))};return setTimeout(()=>{t(n)},1)}),iV=globalThis.cancelIdleCallback||(t=>{clearTimeout(t)}),oh=t=>{const e=at();e.isHydrating?e.hooks.hookOnce("app:suspense:resolve",()=>{Wd(()=>t())}):Wd(()=>t())},E0=Un({name:"nuxt:payload",setup(t){const e=new Set;zs().beforeResolve(async(n,s)=>{if(n.path===s.path)return;const r=await qd(n.path);if(r){for(const i of e)delete t.static.data[i];for(const i in r.data)i in t.static.data||e.add(i),t.static.data[i]=r.data[i]}}),oh(()=>{t.hooks.hook("link:prefetch",async n=>{const{hostname:s}=new URL(n,window.location.href);s===window.location.hostname&&await qd(n).catch(()=>{console.warn("[nuxt] Error preloading payload for",n)})}),navigator.connection?.effectiveType!=="slow-2g"&&setTimeout(_l,1e3)})}}),T0=Un(()=>{const t=zs();oh(()=>{t.beforeResolve(async()=>{await new Promise(e=>{setTimeout(e,100),requestAnimationFrame(()=>{setTimeout(e,0)})})})})}),w0=Un(t=>{let e;async function n(){let s;try{s=await _l()}catch(r){const i=r;if(!("status"in i&&(i.status===404||i.status===403)))throw i}e&&clearTimeout(e),e=setTimeout(n,Vd);try{const r=await $fetch(eh("builds/latest.json")+`?${Date.now()}`);r.id!==s?.id&&(t.hooks.callHook("app:manifest:update",r),e&&clearTimeout(e))}catch{}}oh(()=>{e=setTimeout(n,Vd)})});function b0(t={}){const e=t.path||window.location.pathname;let n={};try{n=Pa(sessionStorage.getItem("nuxt:reload")||"{}")}catch{}if(t.force||n?.path!==e||n?.expires<Date.now()){try{sessionStorage.setItem("nuxt:reload",JSON.stringify({path:e,expires:Date.now()+(t.ttl??1e4)}))}catch{}if(t.persistState)try{sessionStorage.setItem("nuxt:reload:state",JSON.stringify({state:at().payload.state}))}catch{}window.location.pathname!==e?window.location.href=e:window.location.reload()}}const I0=Un({name:"nuxt:chunk-reload",setup(t){const e=zs(),n=eo(),s=new Set;e.beforeEach(()=>{s.clear()}),t.hook("app:chunkError",({error:i})=>{s.add(i)});function r(i){const o=gl(n.app.baseURL,i.fullPath);b0({path:o,persistState:!0})}t.hook("app:manifest:update",()=>{e.beforeResolve(r)}),e.onError((i,o)=>{s.has(i)&&r(o)})}}),A0=Un({name:"nuxt:global-components"}),R0={mounted(t,e){t._clickOutside=n=>{t===n.target||t.contains(n.target)||e.value(n)},document.addEventListener("click",t._clickOutside)},unmounted(t){t._clickOutside&&document.removeEventListener("click",t._clickOutside)}},S0=Un(t=>{t.vueApp.directive("click-outside",R0)}),C0=[h0,g0,v0,E0,T0,w0,I0,A0,S0];function P0(t,e=!1){if(t){if(t.nodeName==="#comment"&&t.nodeValue==="[")return y_(t,[],e);if(e){const n=t.cloneNode(!0);return n.querySelectorAll("[data-island-slot]").forEach(s=>{s.innerHTML=""}),[n.outerHTML]}return[t.outerHTML]}}function y_(t,e=[],n=!1){if(t&&t.nodeName){if(N0(t))return e;if(!k0(t)){const s=t.cloneNode(!0);n&&s.querySelectorAll?.("[data-island-slot]").forEach(r=>{r.innerHTML=""}),e.push(s.outerHTML)}y_(t.nextSibling,e,n)}return e}function yc(t,e){const n=t?P0(t):[e];return n?Pr(n.join(""),n.length):ls("div")}function k0(t){return t.nodeName==="#comment"&&t.nodeValue==="["}function N0(t){return t.nodeName==="#comment"&&t.nodeValue==="]"}const Jo="<div></div>",vc=new WeakMap;function D0(t){if(vc.has(t))return vc.get(t);const e={...t};return e.render?e.render=(n,s,r,i,o,l)=>{if(i.mounted$??n.mounted$){const c=t.render?.bind(n)(n,s,r,i,o,l);return c.children===null||typeof c.children=="string"?Kt(c):ls(c)}return yc(n._.vnode.el,Jo)}:e.template&&=`
      <template v-if="mounted$">${t.template}</template>
      <template v-else>${Jo}</template>
    `,e.setup=(n,s)=>{const r=at(),i=Qi(r.isHydrating===!1),o=Yr();if(r.isHydrating){const c={...o.attrs},u=O0(o);for(const h in c)delete o.attrs[h];Lr(()=>{Object.assign(o.attrs,c),o.vnode.dirs=u})}Lr(()=>{i.value=!0});const l=t.setup?.(n,s)||{};return Nu(l)?Promise.resolve(l).then(c=>typeof c!="function"?(c||={},c.mounted$=i,c):(...u)=>{if(i.value||!r.isHydrating){const h=c(...u);return h.children===null||typeof h.children=="string"?Kt(h):ls(h)}return yc(o?.vnode.el,Jo)}):typeof l=="function"?(...c)=>{if(i.value){const u=l(...c),h=e.inheritAttrs!==!1?s.attrs:void 0;return u.children===null||typeof u.children=="string"?Kt(u,h):ls(u,h)}return yc(o?.vnode.el,Jo)}:Object.assign(l,{mounted$:i})},vc.set(t,e),e}function O0(t){if(!t||!t.vnode.dirs)return null;const e=t.vnode.dirs;return t.vnode.dirs=null,e}function V0(t={}){const e=Qi(""),n=Qi(t.politeness||"polite"),s=p_();function r(u="",h="polite"){e.value=u,n.value=h}function i(u){return r(u,"polite")}function o(u){return r(u,"assertive")}function l(){r(document?.title?.trim(),n.value)}function c(){s?.hooks?.removeHook("dom:rendered",l)}return l(),s?.hooks?.hook("dom:rendered",()=>{l()}),{_cleanup:c,message:e,politeness:n,set:r,polite:i,assertive:o}}function x0(t={}){const e=at(),n=e._routeAnnouncer||=V0(t);return t.politeness!==n.politeness.value&&(n.politeness.value=t.politeness||"polite"),Du()&&(e._routeAnnouncerDeps||=0,e._routeAnnouncerDeps++,CE(()=>{e._routeAnnouncerDeps--,e._routeAnnouncerDeps===0&&(n._cleanup(),delete e._routeAnnouncer)})),n}const M0=Fe({name:"NuxtRouteAnnouncer",props:{atomic:{type:Boolean,default:!1},politeness:{type:String,default:"polite"}},setup(t,{slots:e,expose:n}){const{set:s,polite:r,assertive:i,message:o,politeness:l}=x0({politeness:t.politeness});return n({set:s,polite:r,assertive:i,message:o,politeness:l}),()=>ls("span",{class:"nuxt-route-announcer",style:{position:"absolute"}},ls("span",{role:"alert","aria-live":l.value,"aria-atomic":t.atomic,style:{border:"0",clip:"rect(0 0 0 0)","clip-path":"inset(50%)",height:"1px",width:"1px",overflow:"hidden",position:"absolute","white-space":"nowrap","word-wrap":"normal",margin:"-1px",padding:"0"}},e.default?e.default({message:o.value}):o.value))}}),L0=["type","value","placeholder","autocomplete","maxlength","disabled"],F0=Fe({__name:"BaseInput",props:{modelValue:{},type:{default:"text"},placeholder:{default:""},autocomplete:{default:"off"},maxlength:{},error:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(t,{emit:e}){const n=e,s=r=>{const i=r.target;n("update:modelValue",i.value)};return(r,i)=>(W(),Y("input",{type:t.type,value:t.modelValue,placeholder:t.placeholder,autocomplete:t.autocomplete,maxlength:t.maxlength,disabled:t.disabled,class:Me(["form-input",{"form-input--error":t.error}]),onInput:s},null,42,L0))}}),ze=(t,e)=>{const n=t.__vccOpts||t;for(const[s,r]of e)n[s]=r;return n},ah=Object.assign(ze(F0,[["__scopeId","data-v-91b986db"]]),{__name:"UiBaseInput"}),U0={key:0,class:"form-error"},$0=Fe({__name:"FormError",props:{message:{},visible:{type:Boolean,default:!1}},setup(t){return(e,n)=>t.visible&&t.message?(W(),Y("div",U0,te(t.message),1)):$t("",!0)}}),lh=Object.assign(ze($0,[["__scopeId","data-v-75d4b223"]]),{__name:"UiFormError"}),B0=["type","disabled"],j0=Fe({__name:"BaseButton",props:{variant:{default:"primary"},loading:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},type:{default:"button"}},emits:["click"],setup(t,{emit:e}){const n=t,s=e,r=i=>{!n.loading&&!n.disabled&&s("click",i)};return(i,o)=>(W(),Y("button",{type:t.type,class:Me(["btn",`btn--${t.variant}`,{"btn--loading":t.loading}]),disabled:t.disabled||t.loading,onClick:r},[zu(i.$slots,"default",{},void 0)],10,B0))}}),ch=Object.assign(ze(j0,[["__scopeId","data-v-d54604fc"]]),{__name:"UiBaseButton"}),H0=Fe({__name:"LoginForm",emits:["submit","forgotPassword"],setup(t,{expose:e,emit:n}){const s=le(""),r=le(""),i=le(""),o=le(!1),l=n,c=()=>{if(i.value="",!s.value.trim()){i.value="Inserisci la tua email.";return}if(!r.value){i.value="Inserisci la password.";return}l("submit",{email:s.value.trim(),password:r.value})},u=()=>{i.value=""};return e({setError:h=>{i.value=h},setLoading:h=>{o.value=h},reset:()=>{s.value="",r.value="",i.value="",o.value=!1}}),(h,d)=>{const m=ah,g=lh,v=ch;return W(),Y("form",{class:"auth-form",onSubmit:go(c,["prevent"])},[ce(m,{modelValue:s.value,"onUpdate:modelValue":d[0]||(d[0]=I=>s.value=I),type:"email",placeholder:"Email",autocomplete:"email",error:!!i.value&&i.value.includes("email"),onInput:u},null,8,["modelValue","error"]),ce(m,{modelValue:r.value,"onUpdate:modelValue":d[1]||(d[1]=I=>r.value=I),type:"password",placeholder:"Password",autocomplete:"current-password",error:!!i.value&&i.value.includes("password"),onInput:u},null,8,["modelValue","error"]),ce(g,{message:i.value,visible:!!i.value},null,8,["message","visible"]),ce(v,{type:"submit",variant:"primary",loading:o.value},{default:_t(()=>[...d[3]||(d[3]=[Be(" ACCEDI ",-1)])]),_:1},8,["loading"]),ce(v,{variant:"link",onClick:d[2]||(d[2]=I=>l("forgotPassword"))},{default:_t(()=>[...d[4]||(d[4]=[Be(" Password dimenticata? ",-1)])]),_:1})],32)}}}),q0=Object.assign(ze(H0,[["__scopeId","data-v-5927dcd2"]]),{__name:"AuthLoginForm"}),W0=Fe({__name:"RegisterForm",emits:["submit"],setup(t,{expose:e,emit:n}){const s=le(""),r=le(""),i=le(""),o=le(""),l=le(""),c=le(!1),u=n,h=()=>{if(l.value="",!s.value.trim()){l.value="Scegli un nickname.";return}if(s.value.trim().length<3){l.value="Il nickname deve essere di almeno 3 caratteri.";return}if(!r.value.trim()){l.value="Inserisci la tua email.";return}if(!i.value){l.value="Inserisci una password.";return}if(i.value.length<6){l.value="La password deve essere di almeno 6 caratteri.";return}if(!o.value){l.value="Conferma la password.";return}if(i.value!==o.value){l.value="Le password non coincidono.";return}u("submit",{nickname:s.value.trim(),email:r.value.trim(),password:i.value})},d=()=>{l.value=""};return e({setError:m=>{l.value=m},setLoading:m=>{c.value=m},reset:()=>{s.value="",r.value="",i.value="",o.value="",l.value="",c.value=!1}}),(m,g)=>{const v=ah,I=lh,D=ch;return W(),Y("form",{class:"auth-form",onSubmit:go(h,["prevent"])},[ce(v,{modelValue:s.value,"onUpdate:modelValue":g[0]||(g[0]=k=>s.value=k),type:"text",placeholder:"Nickname",autocomplete:"username",maxlength:20,onInput:d},null,8,["modelValue"]),ce(v,{modelValue:r.value,"onUpdate:modelValue":g[1]||(g[1]=k=>r.value=k),type:"email",placeholder:"Email",autocomplete:"email",onInput:d},null,8,["modelValue"]),ce(v,{modelValue:i.value,"onUpdate:modelValue":g[2]||(g[2]=k=>i.value=k),type:"password",placeholder:"Password (min. 6 caratteri)",autocomplete:"new-password",onInput:d},null,8,["modelValue"]),ce(v,{modelValue:o.value,"onUpdate:modelValue":g[3]||(g[3]=k=>o.value=k),type:"password",placeholder:"Conferma Password",autocomplete:"new-password",onInput:d},null,8,["modelValue"]),ce(I,{message:l.value,visible:!!l.value},null,8,["message","visible"]),ce(D,{type:"submit",variant:"primary",loading:c.value},{default:_t(()=>[...g[4]||(g[4]=[Be(" REGISTRATI ",-1)])]),_:1},8,["loading"])],32)}}}),G0=Object.assign(ze(W0,[["__scopeId","data-v-cea70857"]]),{__name:"AuthRegisterForm"}),z0={class:"reset-form"},K0={key:0,class:"reset-success"},Q0=Fe({__name:"ResetPasswordForm",emits:["submit","back"],setup(t,{expose:e,emit:n}){const s=le(""),r=le(""),i=le(!1),o=le(!1),l=n,c=()=>{if(r.value="",!s.value.trim()){r.value="Inserisci la tua email.";return}l("submit",s.value.trim())},u=()=>{r.value=""};return e({setError:h=>{r.value=h},setLoading:h=>{o.value=h},setSuccess:h=>{i.value=h},reset:()=>{s.value="",r.value="",i.value=!1,o.value=!1}}),(h,d)=>{const m=ch,g=ah,v=lh;return W(),Y("div",z0,[i.value?(W(),Y("div",K0,[d[4]||(d[4]=E("span",{class:"reset-success__icon"},"",-1)),d[5]||(d[5]=E("p",{class:"reset-success__text"}," Email inviata! Controlla la tua casella di posta (anche spam). ",-1)),ce(m,{variant:"link",onClick:d[0]||(d[0]=I=>l("back"))},{default:_t(()=>[...d[3]||(d[3]=[Be("  Torna al login ",-1)])]),_:1})])):(W(),Y("form",{key:1,class:"auth-form",onSubmit:go(c,["prevent"])},[d[8]||(d[8]=E("h3",{class:"reset-form__title"},"Recupera Password",-1)),d[9]||(d[9]=E("p",{class:"reset-form__description"},[Be(" Inserisci la tua email. Ti invieremo un link per reimpostare la password. "),E("br"),E("small",null,"Controlla anche la cartella spam.")],-1)),ce(g,{modelValue:s.value,"onUpdate:modelValue":d[1]||(d[1]=I=>s.value=I),type:"email",placeholder:"Email",autocomplete:"email",onInput:u},null,8,["modelValue"]),ce(v,{message:r.value,visible:!!r.value},null,8,["message","visible"]),ce(m,{type:"submit",variant:"primary",loading:o.value},{default:_t(()=>[...d[6]||(d[6]=[Be(" INVIA LINK ",-1)])]),_:1},8,["loading"]),ce(m,{variant:"link",onClick:d[2]||(d[2]=I=>l("back"))},{default:_t(()=>[...d[7]||(d[7]=[Be("  Torna al login ",-1)])]),_:1})],32))])}}}),J0=Object.assign(ze(Q0,[["__scopeId","data-v-17ef1ec5"]]),{__name:"AuthResetPasswordForm"}),Y0=()=>{};var Gd={};const v_=function(t){const e=[];let n=0;for(let s=0;s<t.length;s++){let r=t.charCodeAt(s);r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=r&63|128):(r&64512)===55296&&s+1<t.length&&(t.charCodeAt(s+1)&64512)===56320?(r=65536+((r&1023)<<10)+(t.charCodeAt(++s)&1023),e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=r&63|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=r&63|128)}return e},X0=function(t){const e=[];let n=0,s=0;for(;n<t.length;){const r=t[n++];if(r<128)e[s++]=String.fromCharCode(r);else if(r>191&&r<224){const i=t[n++];e[s++]=String.fromCharCode((r&31)<<6|i&63)}else if(r>239&&r<365){const i=t[n++],o=t[n++],l=t[n++],c=((r&7)<<18|(i&63)<<12|(o&63)<<6|l&63)-65536;e[s++]=String.fromCharCode(55296+(c>>10)),e[s++]=String.fromCharCode(56320+(c&1023))}else{const i=t[n++],o=t[n++];e[s++]=String.fromCharCode((r&15)<<12|(i&63)<<6|o&63)}}return e.join("")},E_={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let r=0;r<t.length;r+=3){const i=t[r],o=r+1<t.length,l=o?t[r+1]:0,c=r+2<t.length,u=c?t[r+2]:0,h=i>>2,d=(i&3)<<4|l>>4;let m=(l&15)<<2|u>>6,g=u&63;c||(g=64,o||(m=64)),s.push(n[h],n[d],n[m],n[g])}return s.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(v_(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):X0(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let r=0;r<t.length;){const i=n[t.charAt(r++)],l=r<t.length?n[t.charAt(r)]:0;++r;const u=r<t.length?n[t.charAt(r)]:64;++r;const d=r<t.length?n[t.charAt(r)]:64;if(++r,i==null||l==null||u==null||d==null)throw new Z0;const m=i<<2|l>>4;if(s.push(m),u!==64){const g=l<<4&240|u>>2;if(s.push(g),d!==64){const v=u<<6&192|d;s.push(v)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class Z0 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const eA=function(t){const e=v_(t);return E_.encodeByteArray(e,!0)},Va=function(t){return eA(t).replace(/\./g,"")},T_=function(t){try{return E_.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function tA(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const nA=()=>tA().__FIREBASE_DEFAULTS__,sA=()=>{if(typeof process>"u"||typeof Gd>"u")return;const t=Gd.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},rA=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&T_(t[1]);return e&&JSON.parse(e)},yl=()=>{try{return Y0()||nA()||sA()||rA()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},w_=t=>yl()?.emulatorHosts?.[t],iA=t=>{const e=w_(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),s]:[e.substring(0,n),s]},b_=()=>yl()?.config,I_=t=>yl()?.[`_${t}`];class oA{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,s))}}}function Zr(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function A_(t){return(await fetch(t,{credentials:"include"})).ok}function aA(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=e||"demo-project",r=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${s}`,aud:s,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...t};return[Va(JSON.stringify(n)),Va(JSON.stringify(o)),""].join(".")}const $i={};function lA(){const t={prod:[],emulator:[]};for(const e of Object.keys($i))$i[e]?t.emulator.push(e):t.prod.push(e);return t}function cA(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let zd=!1;function R_(t,e){if(typeof window>"u"||typeof document>"u"||!Zr(window.location.host)||$i[t]===e||$i[t]||zd)return;$i[t]=e;function n(m){return`__firebase__banner__${m}`}const s="__firebase__banner",i=lA().prod.length>0;function o(){const m=document.getElementById(s);m&&m.remove()}function l(m){m.style.display="flex",m.style.background="#7faaf0",m.style.position="fixed",m.style.bottom="5px",m.style.left="5px",m.style.padding=".5em",m.style.borderRadius="5px",m.style.alignItems="center"}function c(m,g){m.setAttribute("width","24"),m.setAttribute("id",g),m.setAttribute("height","24"),m.setAttribute("viewBox","0 0 24 24"),m.setAttribute("fill","none"),m.style.marginLeft="-6px"}function u(){const m=document.createElement("span");return m.style.cursor="pointer",m.style.marginLeft="16px",m.style.fontSize="24px",m.innerHTML=" &times;",m.onclick=()=>{zd=!0,o()},m}function h(m,g){m.setAttribute("id",g),m.innerText="Learn more",m.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",m.setAttribute("target","__blank"),m.style.paddingLeft="5px",m.style.textDecoration="underline"}function d(){const m=cA(s),g=n("text"),v=document.getElementById(g)||document.createElement("span"),I=n("learnmore"),D=document.getElementById(I)||document.createElement("a"),k=n("preprendIcon"),M=document.getElementById(k)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(m.created){const R=m.element;l(R),h(D,I);const O=u();c(M,k),R.append(M,v,D,O),document.body.appendChild(R)}i?(v.innerText="Preview backend disconnected.",M.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(M.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,v.innerText="Preview backend running in this workspace."),v.setAttribute("id",g)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",d):d()}function It(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function uA(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(It())}function hA(){const t=yl()?.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function fA(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function dA(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function pA(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function mA(){const t=It();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function gA(){return!hA()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function _A(){try{return typeof indexedDB=="object"}catch{return!1}}function yA(){return new Promise((t,e)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(s);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(s),t(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{e(r.error?.message||"")}}catch(n){e(n)}})}const vA="FirebaseError";class $n extends Error{constructor(e,n,s){super(n),this.code=e,this.customData=s,this.name=vA,Object.setPrototypeOf(this,$n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,_o.prototype.create)}}class _o{constructor(e,n,s){this.service=e,this.serviceName=n,this.errors=s}create(e,...n){const s=n[0]||{},r=`${this.service}/${e}`,i=this.errors[e],o=i?EA(i,s):"Error",l=`${this.serviceName}: ${o} (${r}).`;return new $n(r,l,s)}}function EA(t,e){return t.replace(TA,(n,s)=>{const r=e[s];return r!=null?String(r):`<${s}?>`})}const TA=/\{\$([^}]+)}/g;function wA(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Ks(t,e){if(t===e)return!0;const n=Object.keys(t),s=Object.keys(e);for(const r of n){if(!s.includes(r))return!1;const i=t[r],o=e[r];if(Kd(i)&&Kd(o)){if(!Ks(i,o))return!1}else if(i!==o)return!1}for(const r of s)if(!n.includes(r))return!1;return!0}function Kd(t){return t!==null&&typeof t=="object"}function yo(t){const e=[];for(const[n,s]of Object.entries(t))Array.isArray(s)?s.forEach(r=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function Pi(t){const e={};return t.replace(/^\?/,"").split("&").forEach(s=>{if(s){const[r,i]=s.split("=");e[decodeURIComponent(r)]=decodeURIComponent(i)}}),e}function ki(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function bA(t,e){const n=new IA(t,e);return n.subscribe.bind(n)}class IA{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,s){let r;if(e===void 0&&n===void 0&&s===void 0)throw new Error("Missing Observer.");AA(e,["next","error","complete"])?r=e:r={next:e,error:n,complete:s},r.next===void 0&&(r.next=Ec),r.error===void 0&&(r.error=Ec),r.complete===void 0&&(r.complete=Ec);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function AA(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Ec(){}function ft(t){return t&&t._delegate?t._delegate:t}class Qs{constructor(e,n,s){this.name=e,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Ls="[DEFAULT]";class RA{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const s=new oA;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:n});r&&s.resolve(r)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e?.identifier),s=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(r){if(s)return null;throw r}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(CA(e))try{this.getOrInitializeService({instanceIdentifier:Ls})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:r});s.resolve(i)}catch{}}}}clearInstance(e=Ls){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ls){return this.instances.has(e)}getOptions(e=Ls){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[i,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(i);s===l&&o.resolve(r)}return r}onInit(e,n){const s=this.normalizeInstanceIdentifier(n),r=this.onInitCallbacks.get(s)??new Set;r.add(e),this.onInitCallbacks.set(s,r);const i=this.instances.get(s);return i&&e(i,s),()=>{r.delete(e)}}invokeOnInitCallbacks(e,n){const s=this.onInitCallbacks.get(n);if(s)for(const r of s)try{r(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:SA(e),options:n}),this.instances.set(e,s),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=Ls){return this.component?this.component.multipleInstances?e:Ls:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function SA(t){return t===Ls?void 0:t}function CA(t){return t.instantiationMode==="EAGER"}class PA{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new RA(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}var Ee;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Ee||(Ee={}));const kA={debug:Ee.DEBUG,verbose:Ee.VERBOSE,info:Ee.INFO,warn:Ee.WARN,error:Ee.ERROR,silent:Ee.SILENT},NA=Ee.INFO,DA={[Ee.DEBUG]:"log",[Ee.VERBOSE]:"log",[Ee.INFO]:"info",[Ee.WARN]:"warn",[Ee.ERROR]:"error"},OA=(t,e,...n)=>{if(e<t.logLevel)return;const s=new Date().toISOString(),r=DA[e];if(r)console[r](`[${s}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class uh{constructor(e){this.name=e,this._logLevel=NA,this._logHandler=OA,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ee))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?kA[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ee.DEBUG,...e),this._logHandler(this,Ee.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ee.VERBOSE,...e),this._logHandler(this,Ee.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ee.INFO,...e),this._logHandler(this,Ee.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ee.WARN,...e),this._logHandler(this,Ee.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ee.ERROR,...e),this._logHandler(this,Ee.ERROR,...e)}}const VA=(t,e)=>e.some(n=>t instanceof n);let Qd,Jd;function xA(){return Qd||(Qd=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function MA(){return Jd||(Jd=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const S_=new WeakMap,tu=new WeakMap,C_=new WeakMap,Tc=new WeakMap,hh=new WeakMap;function LA(t){const e=new Promise((n,s)=>{const r=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(cs(t.result)),r()},o=()=>{s(t.error),r()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&S_.set(n,t)}).catch(()=>{}),hh.set(e,t),e}function FA(t){if(tu.has(t))return;const e=new Promise((n,s)=>{const r=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),r()},o=()=>{s(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});tu.set(t,e)}let nu={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return tu.get(t);if(e==="objectStoreNames")return t.objectStoreNames||C_.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return cs(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function UA(t){nu=t(nu)}function $A(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const s=t.call(wc(this),e,...n);return C_.set(s,e.sort?e.sort():[e]),cs(s)}:MA().includes(t)?function(...e){return t.apply(wc(this),e),cs(S_.get(this))}:function(...e){return cs(t.apply(wc(this),e))}}function BA(t){return typeof t=="function"?$A(t):(t instanceof IDBTransaction&&FA(t),VA(t,xA())?new Proxy(t,nu):t)}function cs(t){if(t instanceof IDBRequest)return LA(t);if(Tc.has(t))return Tc.get(t);const e=BA(t);return e!==t&&(Tc.set(t,e),hh.set(e,t)),e}const wc=t=>hh.get(t);function jA(t,e,{blocked:n,upgrade:s,blocking:r,terminated:i}={}){const o=indexedDB.open(t,e),l=cs(o);return s&&o.addEventListener("upgradeneeded",c=>{s(cs(o.result),c.oldVersion,c.newVersion,cs(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),l.then(c=>{i&&c.addEventListener("close",()=>i()),r&&c.addEventListener("versionchange",u=>r(u.oldVersion,u.newVersion,u))}).catch(()=>{}),l}const HA=["get","getKey","getAll","getAllKeys","count"],qA=["put","add","delete","clear"],bc=new Map;function Yd(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(bc.get(e))return bc.get(e);const n=e.replace(/FromIndex$/,""),s=e!==n,r=qA.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(r||HA.includes(n)))return;const i=async function(o,...l){const c=this.transaction(o,r?"readwrite":"readonly");let u=c.store;return s&&(u=u.index(l.shift())),(await Promise.all([u[n](...l),r&&c.done]))[0]};return bc.set(e,i),i}UA(t=>({...t,get:(e,n,s)=>Yd(e,n)||t.get(e,n,s),has:(e,n)=>!!Yd(e,n)||t.has(e,n)}));class WA{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(GA(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function GA(t){return t.getComponent()?.type==="VERSION"}const su="@firebase/app",Xd="0.14.6";const Vn=new uh("@firebase/app"),zA="@firebase/app-compat",KA="@firebase/analytics-compat",QA="@firebase/analytics",JA="@firebase/app-check-compat",YA="@firebase/app-check",XA="@firebase/auth",ZA="@firebase/auth-compat",e1="@firebase/database",t1="@firebase/data-connect",n1="@firebase/database-compat",s1="@firebase/functions",r1="@firebase/functions-compat",i1="@firebase/installations",o1="@firebase/installations-compat",a1="@firebase/messaging",l1="@firebase/messaging-compat",c1="@firebase/performance",u1="@firebase/performance-compat",h1="@firebase/remote-config",f1="@firebase/remote-config-compat",d1="@firebase/storage",p1="@firebase/storage-compat",m1="@firebase/firestore",g1="@firebase/ai",_1="@firebase/firestore-compat",y1="firebase",v1="12.6.0";const ru="[DEFAULT]",E1={[su]:"fire-core",[zA]:"fire-core-compat",[QA]:"fire-analytics",[KA]:"fire-analytics-compat",[YA]:"fire-app-check",[JA]:"fire-app-check-compat",[XA]:"fire-auth",[ZA]:"fire-auth-compat",[e1]:"fire-rtdb",[t1]:"fire-data-connect",[n1]:"fire-rtdb-compat",[s1]:"fire-fn",[r1]:"fire-fn-compat",[i1]:"fire-iid",[o1]:"fire-iid-compat",[a1]:"fire-fcm",[l1]:"fire-fcm-compat",[c1]:"fire-perf",[u1]:"fire-perf-compat",[h1]:"fire-rc",[f1]:"fire-rc-compat",[d1]:"fire-gcs",[p1]:"fire-gcs-compat",[m1]:"fire-fst",[_1]:"fire-fst-compat",[g1]:"fire-vertex","fire-js":"fire-js",[y1]:"fire-js-all"};const to=new Map,T1=new Map,iu=new Map;function Zd(t,e){try{t.container.addComponent(e)}catch(n){Vn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Br(t){const e=t.name;if(iu.has(e))return Vn.debug(`There were multiple attempts to register component ${e}.`),!1;iu.set(e,t);for(const n of to.values())Zd(n,t);for(const n of T1.values())Zd(n,t);return!0}function fh(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function qt(t){return t==null?!1:t.settings!==void 0}const w1={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},us=new _o("app","Firebase",w1);class b1{constructor(e,n,s){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new Qs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw us.create("app-deleted",{appName:this._name})}}const ei=v1;function P_(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const s={name:ru,automaticDataCollectionEnabled:!0,...e},r=s.name;if(typeof r!="string"||!r)throw us.create("bad-app-name",{appName:String(r)});if(n||(n=b_()),!n)throw us.create("no-options");const i=to.get(r);if(i){if(Ks(n,i.options)&&Ks(s,i.config))return i;throw us.create("duplicate-app",{appName:r})}const o=new PA(r);for(const c of iu.values())o.addComponent(c);const l=new b1(n,s,o);return to.set(r,l),l}function k_(t=ru){const e=to.get(t);if(!e&&t===ru&&b_())return P_();if(!e)throw us.create("no-app",{appName:t});return e}function ep(){return Array.from(to.values())}function hs(t,e,n){let s=E1[t]??t;n&&(s+=`-${n}`);const r=s.match(/\s|\//),i=e.match(/\s|\//);if(r||i){const o=[`Unable to register library "${s}" with version "${e}":`];r&&o.push(`library name "${s}" contains illegal characters (whitespace or "/")`),r&&i&&o.push("and"),i&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Vn.warn(o.join(" "));return}Br(new Qs(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}const I1="firebase-heartbeat-database",A1=1,no="firebase-heartbeat-store";let Ic=null;function N_(){return Ic||(Ic=jA(I1,A1,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(no)}catch(n){console.warn(n)}}}}).catch(t=>{throw us.create("idb-open",{originalErrorMessage:t.message})})),Ic}async function R1(t){try{const n=(await N_()).transaction(no),s=await n.objectStore(no).get(D_(t));return await n.done,s}catch(e){if(e instanceof $n)Vn.warn(e.message);else{const n=us.create("idb-get",{originalErrorMessage:e?.message});Vn.warn(n.message)}}}async function tp(t,e){try{const s=(await N_()).transaction(no,"readwrite");await s.objectStore(no).put(e,D_(t)),await s.done}catch(n){if(n instanceof $n)Vn.warn(n.message);else{const s=us.create("idb-set",{originalErrorMessage:n?.message});Vn.warn(s.message)}}}function D_(t){return`${t.name}!${t.options.appId}`}const S1=1024,C1=30;class P1{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new N1(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=np();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(r=>r.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:n}),this._heartbeatsCache.heartbeats.length>C1){const r=D1(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(r,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Vn.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=np(),{heartbeatsToSend:n,unsentEntries:s}=k1(this._heartbeatsCache.heartbeats),r=Va(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}catch(e){return Vn.warn(e),""}}}function np(){return new Date().toISOString().substring(0,10)}function k1(t,e=S1){const n=[];let s=t.slice();for(const r of t){const i=n.find(o=>o.agent===r.agent);if(i){if(i.dates.push(r.date),sp(n)>e){i.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),sp(n)>e){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class N1{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return _A()?yA().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await R1(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return tp(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return tp(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function sp(t){return Va(JSON.stringify({version:2,heartbeats:t})).length}function D1(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let s=1;s<t.length;s++)t[s].date<n&&(n=t[s].date,e=s);return e}function O1(t){Br(new Qs("platform-logger",e=>new WA(e),"PRIVATE")),Br(new Qs("heartbeat",e=>new P1(e),"PRIVATE")),hs(su,Xd,t),hs(su,Xd,"esm2020"),hs("fire-js","")}O1("");function O_(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const V1=O_,V_=new _o("auth","Firebase",O_());const xa=new uh("@firebase/auth");function x1(t,...e){xa.logLevel<=Ee.WARN&&xa.warn(`Auth (${ei}): ${t}`,...e)}function ca(t,...e){xa.logLevel<=Ee.ERROR&&xa.error(`Auth (${ei}): ${t}`,...e)}function en(t,...e){throw dh(t,...e)}function hn(t,...e){return dh(t,...e)}function x_(t,e,n){const s={...V1(),[e]:n};return new _o("auth","Firebase",s).create(e,{appName:t.name})}function Nn(t){return x_(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function dh(t,...e){if(typeof t!="string"){const n=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=t.name),t._errorFactory.create(n,...s)}return V_.create(t,...e)}function ue(t,e,...n){if(!t)throw dh(e,...n)}function Cn(t){const e="INTERNAL ASSERTION FAILED: "+t;throw ca(e),new Error(e)}function xn(t,e){t||Cn(e)}function ou(){return typeof self<"u"&&self.location?.href||""}function M1(){return rp()==="http:"||rp()==="https:"}function rp(){return typeof self<"u"&&self.location?.protocol||null}function L1(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(M1()||dA()||"connection"in navigator)?navigator.onLine:!0}function F1(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}class vo{constructor(e,n){this.shortDelay=e,this.longDelay=n,xn(n>e,"Short delay should be less than long delay!"),this.isMobile=uA()||pA()}get(){return L1()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function ph(t,e){xn(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}class M_{static initialize(e,n,s){this.fetchImpl=e,n&&(this.headersImpl=n),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Cn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Cn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Cn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const U1={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const $1=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],B1=new vo(3e4,6e4);function Bn(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function vn(t,e,n,s,r={}){return L_(t,r,async()=>{let i={},o={};s&&(e==="GET"?o=s:i={body:JSON.stringify(s)});const l=yo({key:t.config.apiKey,...o}).slice(1),c=await t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const u={method:e,headers:c,...i};return fA()||(u.referrerPolicy="no-referrer"),t.emulatorConfig&&Zr(t.emulatorConfig.host)&&(u.credentials="include"),M_.fetch()(await F_(t,t.config.apiHost,n,l),u)})}async function L_(t,e,n){t._canInitEmulator=!1;const s={...U1,...e};try{const r=new H1(t),i=await Promise.race([n(),r.promise]);r.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw Yo(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const l=i.ok?o.errorMessage:o.error.message,[c,u]=l.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw Yo(t,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw Yo(t,"email-already-in-use",o);if(c==="USER_DISABLED")throw Yo(t,"user-disabled",o);const h=s[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw x_(t,h,u);en(t,h)}}catch(r){if(r instanceof $n)throw r;en(t,"network-request-failed",{message:String(r)})}}async function Eo(t,e,n,s,r={}){const i=await vn(t,e,n,s,r);return"mfaPendingCredential"in i&&en(t,"multi-factor-auth-required",{_serverResponse:i}),i}async function F_(t,e,n,s){const r=`${e}${n}?${s}`,i=t,o=i.config.emulator?ph(t.config,r):`${t.config.apiScheme}://${r}`;return $1.includes(n)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(o).toString():o}function j1(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class H1{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,s)=>{this.timer=setTimeout(()=>s(hn(this.auth,"network-request-failed")),B1.get())})}}function Yo(t,e,n){const s={appName:t.name};n.email&&(s.email=n.email),n.phoneNumber&&(s.phoneNumber=n.phoneNumber);const r=hn(t,e,s);return r.customData._tokenResponse=n,r}function ip(t){return t!==void 0&&t.enterprise!==void 0}class q1{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return j1(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function W1(t,e){return vn(t,"GET","/v2/recaptchaConfig",Bn(t,e))}async function G1(t,e){return vn(t,"POST","/v1/accounts:delete",e)}async function Ma(t,e){return vn(t,"POST","/v1/accounts:lookup",e)}function Bi(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function z1(t,e=!1){const n=ft(t),s=await n.getIdToken(e),r=mh(s);ue(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");const i=typeof r.firebase=="object"?r.firebase:void 0,o=i?.sign_in_provider;return{claims:r,token:s,authTime:Bi(Ac(r.auth_time)),issuedAtTime:Bi(Ac(r.iat)),expirationTime:Bi(Ac(r.exp)),signInProvider:o||null,signInSecondFactor:i?.sign_in_second_factor||null}}function Ac(t){return Number(t)*1e3}function mh(t){const[e,n,s]=t.split(".");if(e===void 0||n===void 0||s===void 0)return ca("JWT malformed, contained fewer than 3 sections"),null;try{const r=T_(n);return r?JSON.parse(r):(ca("Failed to decode base64 JWT payload"),null)}catch(r){return ca("Caught error parsing JWT payload as JSON",r?.toString()),null}}function op(t){const e=mh(t);return ue(e,"internal-error"),ue(typeof e.exp<"u","internal-error"),ue(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function jr(t,e,n=!1){if(n)return e;try{return await e}catch(s){throw s instanceof $n&&K1(s)&&t.auth.currentUser===t&&await t.auth.signOut(),s}}function K1({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}class Q1{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const s=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class au{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Bi(this.lastLoginAt),this.creationTime=Bi(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function La(t){const e=t.auth,n=await t.getIdToken(),s=await jr(t,Ma(e,{idToken:n}));ue(s?.users.length,e,"internal-error");const r=s.users[0];t._notifyReloadListener(r);const i=r.providerUserInfo?.length?U_(r.providerUserInfo):[],o=Y1(t.providerData,i),l=t.isAnonymous,c=!(t.email&&r.passwordHash)&&!o?.length,u=l?c:!1,h={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:o,metadata:new au(r.createdAt,r.lastLoginAt),isAnonymous:u};Object.assign(t,h)}async function J1(t){const e=ft(t);await La(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function Y1(t,e){return[...t.filter(s=>!e.some(r=>r.providerId===s.providerId)),...e]}function U_(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}async function X1(t,e){const n=await L_(t,{},async()=>{const s=yo({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:i}=t.config,o=await F_(t,r,"/v1/token",`key=${i}`),l=await t._getAdditionalHeaders();l["Content-Type"]="application/x-www-form-urlencoded";const c={method:"POST",headers:l,body:s};return t.emulatorConfig&&Zr(t.emulatorConfig.host)&&(c.credentials="include"),M_.fetch()(o,c)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function Z1(t,e){return vn(t,"POST","/v2/accounts:revokeToken",Bn(t,e))}class Nr{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ue(e.idToken,"internal-error"),ue(typeof e.idToken<"u","internal-error"),ue(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):op(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){ue(e.length!==0,"internal-error");const n=op(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(ue(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:s,refreshToken:r,expiresIn:i}=await X1(e,n);this.updateTokensAndExpiration(s,r,Number(i))}updateTokensAndExpiration(e,n,s){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,n){const{refreshToken:s,accessToken:r,expirationTime:i}=n,o=new Nr;return s&&(ue(typeof s=="string","internal-error",{appName:e}),o.refreshToken=s),r&&(ue(typeof r=="string","internal-error",{appName:e}),o.accessToken=r),i&&(ue(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Nr,this.toJSON())}_performRefresh(){return Cn("not implemented")}}function Yn(t,e){ue(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Gt{constructor({uid:e,auth:n,stsTokenManager:s,...r}){this.providerId="firebase",this.proactiveRefresh=new Q1(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.providerData=r.providerData?[...r.providerData]:[],this.metadata=new au(r.createdAt||void 0,r.lastLoginAt||void 0)}async getIdToken(e){const n=await jr(this,this.stsTokenManager.getToken(this.auth,e));return ue(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return z1(this,e)}reload(){return J1(this)}_assign(e){this!==e&&(ue(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Gt({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){ue(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),n&&await La(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(qt(this.auth.app))return Promise.reject(Nn(this.auth));const e=await this.getIdToken();return await jr(this,G1(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const s=n.displayName??void 0,r=n.email??void 0,i=n.phoneNumber??void 0,o=n.photoURL??void 0,l=n.tenantId??void 0,c=n._redirectEventId??void 0,u=n.createdAt??void 0,h=n.lastLoginAt??void 0,{uid:d,emailVerified:m,isAnonymous:g,providerData:v,stsTokenManager:I}=n;ue(d&&I,e,"internal-error");const D=Nr.fromJSON(this.name,I);ue(typeof d=="string",e,"internal-error"),Yn(s,e.name),Yn(r,e.name),ue(typeof m=="boolean",e,"internal-error"),ue(typeof g=="boolean",e,"internal-error"),Yn(i,e.name),Yn(o,e.name),Yn(l,e.name),Yn(c,e.name),Yn(u,e.name),Yn(h,e.name);const k=new Gt({uid:d,auth:e,email:r,emailVerified:m,displayName:s,isAnonymous:g,photoURL:o,phoneNumber:i,tenantId:l,stsTokenManager:D,createdAt:u,lastLoginAt:h});return v&&Array.isArray(v)&&(k.providerData=v.map(M=>({...M}))),c&&(k._redirectEventId=c),k}static async _fromIdTokenResponse(e,n,s=!1){const r=new Nr;r.updateFromServerResponse(n);const i=new Gt({uid:n.localId,auth:e,stsTokenManager:r,isAnonymous:s});return await La(i),i}static async _fromGetAccountInfoResponse(e,n,s){const r=n.users[0];ue(r.localId!==void 0,"internal-error");const i=r.providerUserInfo!==void 0?U_(r.providerUserInfo):[],o=!(r.email&&r.passwordHash)&&!i?.length,l=new Nr;l.updateFromIdToken(s);const c=new Gt({uid:r.localId,auth:e,stsTokenManager:l,isAnonymous:o}),u={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:i,metadata:new au(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!i?.length};return Object.assign(c,u),c}}const ap=new Map;function Pn(t){xn(t instanceof Function,"Expected a class definition");let e=ap.get(t);return e?(xn(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,ap.set(t,e),e)}class $_{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}$_.type="NONE";const lp=$_;function ua(t,e,n){return`firebase:${t}:${e}:${n}`}class Dr{constructor(e,n,s){this.persistence=e,this.auth=n,this.userKey=s;const{config:r,name:i}=this.auth;this.fullUserKey=ua(this.userKey,r.apiKey,i),this.fullPersistenceKey=ua("persistence",r.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Ma(this.auth,{idToken:e}).catch(()=>{});return n?Gt._fromGetAccountInfoResponse(this.auth,n,e):null}return Gt._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,s="authUser"){if(!n.length)return new Dr(Pn(lp),e,s);const r=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let i=r[0]||Pn(lp);const o=ua(s,e.config.apiKey,e.name);let l=null;for(const u of n)try{const h=await u._get(o);if(h){let d;if(typeof h=="string"){const m=await Ma(e,{idToken:h}).catch(()=>{});if(!m)break;d=await Gt._fromGetAccountInfoResponse(e,m,h)}else d=Gt._fromJSON(e,h);u!==i&&(l=d),i=u;break}}catch{}const c=r.filter(u=>u._shouldAllowMigration);return!i._shouldAllowMigration||!c.length?new Dr(i,e,s):(i=c[0],l&&await i._set(o,l.toJSON()),await Promise.all(n.map(async u=>{if(u!==i)try{await u._remove(o)}catch{}})),new Dr(i,e,s))}}function cp(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(q_(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(B_(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(G_(e))return"Blackberry";if(z_(e))return"Webos";if(j_(e))return"Safari";if((e.includes("chrome/")||H_(e))&&!e.includes("edge/"))return"Chrome";if(W_(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=t.match(n);if(s?.length===2)return s[1]}return"Other"}function B_(t=It()){return/firefox\//i.test(t)}function j_(t=It()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function H_(t=It()){return/crios\//i.test(t)}function q_(t=It()){return/iemobile/i.test(t)}function W_(t=It()){return/android/i.test(t)}function G_(t=It()){return/blackberry/i.test(t)}function z_(t=It()){return/webos/i.test(t)}function gh(t=It()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function eR(t=It()){return gh(t)&&!!window.navigator?.standalone}function tR(){return mA()&&document.documentMode===10}function K_(t=It()){return gh(t)||W_(t)||z_(t)||G_(t)||/windows phone/i.test(t)||q_(t)}function Q_(t,e=[]){let n;switch(t){case"Browser":n=cp(It());break;case"Worker":n=`${cp(It())}-${t}`;break;default:n=t}const s=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${ei}/${s}`}class nR{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const s=i=>new Promise((o,l)=>{try{const c=e(i);o(c)}catch(c){l(c)}});s.onAbort=n,this.queue.push(s);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const s of this.queue)await s(e),s.onAbort&&n.push(s.onAbort)}catch(s){n.reverse();for(const r of n)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s?.message})}}}async function sR(t,e={}){return vn(t,"GET","/v2/passwordPolicy",Bn(t,e))}const rR=6;class iR{constructor(e){const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??rR,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const s=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;s&&(n.meetsMinPasswordLength=e.length>=s),r&&(n.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let s;for(let r=0;r<e.length;r++)s=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(n,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,n,s,r,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}class oR{constructor(e,n,s,r){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=s,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new up(this),this.idTokenSubscription=new up(this),this.beforeStateQueue=new nR(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=V_,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Pn(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Dr.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Ma(this,{idToken:e}),s=await Gt._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(s)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(qt(this.app)){const i=this.app.settings.authIdToken;return i?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(i).then(o,o))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let s=n,r=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const i=this.redirectUser?._redirectEventId,o=s?._redirectEventId,l=await this.tryRedirectSignIn(e);(!i||i===o)&&l?.user&&(s=l.user,r=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(s)}catch(i){s=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(i))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return ue(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await La(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=F1()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(qt(this.app))return Promise.reject(Nn(this));const n=e?ft(e):null;return n&&ue(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&ue(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return qt(this.app)?Promise.reject(Nn(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return qt(this.app)?Promise.reject(Nn(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Pn(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await sR(this),n=new iR(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new _o("auth","Firebase",e())}onAuthStateChanged(e,n,s){return this.registerStateListener(this.authStateSubscription,e,n,s)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,s){return this.registerStateListener(this.idTokenSubscription,e,n,s)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(s.tenantId=this.tenantId),await Z1(this,s)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,n){const s=await this.getOrInitRedirectPersistenceManager(n);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Pn(e)||this._popupRedirectResolver;ue(n,this,"argument-error"),this.redirectPersistenceManager=await Dr.create(this,[Pn(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,s,r){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(ue(l,this,"internal-error"),l.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const c=e.addObserver(n,s,r);return()=>{o=!0,c()}}else{const c=e.addObserver(n);return()=>{o=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ue(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Q_(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(e["X-Firebase-Client"]=n);const s=await this._getAppCheckToken();return s&&(e["X-Firebase-AppCheck"]=s),e}async _getAppCheckToken(){if(qt(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&x1(`Error while retrieving App Check token: ${e.error}`),e?.token}}function nr(t){return ft(t)}class up{constructor(e){this.auth=e,this.observer=null,this.addObserver=bA(n=>this.observer=n)}get next(){return ue(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let vl={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function aR(t){vl=t}function J_(t){return vl.loadJS(t)}function lR(){return vl.recaptchaEnterpriseScript}function cR(){return vl.gapiScript}function uR(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class hR{constructor(){this.enterprise=new fR}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class fR{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const dR="recaptcha-enterprise",Y_="NO_RECAPTCHA";class pR{constructor(e){this.type=dR,this.auth=nr(e)}async verify(e="verify",n=!1){async function s(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(o,l)=>{W1(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)l(new Error("recaptcha Enterprise site key undefined"));else{const u=new q1(c);return i.tenantId==null?i._agentRecaptchaConfig=u:i._tenantRecaptchaConfigs[i.tenantId]=u,o(u.siteKey)}}).catch(c=>{l(c)})})}function r(i,o,l){const c=window.grecaptcha;ip(c)?c.enterprise.ready(()=>{c.enterprise.execute(i,{action:e}).then(u=>{o(u)}).catch(()=>{o(Y_)})}):l(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new hR().execute("siteKey",{action:"verify"}):new Promise((i,o)=>{s(this.auth).then(l=>{if(!n&&ip(window.grecaptcha))r(l,i,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let c=lR();c.length!==0&&(c+=l),J_(c).then(()=>{r(l,i,o)}).catch(u=>{o(u)})}}).catch(l=>{o(l)})})}}async function hp(t,e,n,s=!1,r=!1){const i=new pR(t);let o;if(r)o=Y_;else try{o=await i.verify(n)}catch{o=await i.verify(n,!0)}const l={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in l){const c=l.phoneEnrollmentInfo.phoneNumber,u=l.phoneEnrollmentInfo.recaptchaToken;Object.assign(l,{phoneEnrollmentInfo:{phoneNumber:c,recaptchaToken:u,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in l){const c=l.phoneSignInInfo.recaptchaToken;Object.assign(l,{phoneSignInInfo:{recaptchaToken:c,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return l}return s?Object.assign(l,{captchaResp:o}):Object.assign(l,{captchaResponse:o}),Object.assign(l,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(l,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),l}async function lu(t,e,n,s,r){if(t._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await hp(t,e,n,n==="getOobCode");return s(t,i)}else return s(t,e).catch(async i=>{if(i.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await hp(t,e,n,n==="getOobCode");return s(t,o)}else return Promise.reject(i)})}function mR(t,e){const n=fh(t,"auth");if(n.isInitialized()){const r=n.getImmediate(),i=n.getOptions();if(Ks(i,e??{}))return r;en(r,"already-initialized")}return n.initialize({options:e})}function gR(t,e){const n=e?.persistence||[],s=(Array.isArray(n)?n:[n]).map(Pn);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(s,e?.popupRedirectResolver)}function _R(t,e,n){const s=nr(t);ue(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const r=!1,i=X_(e),{host:o,port:l}=yR(e),c=l===null?"":`:${l}`,u={url:`${i}//${o}${c}/`},h=Object.freeze({host:o,port:l,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:r})});if(!s._canInitEmulator){ue(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),ue(Ks(u,s.config.emulator)&&Ks(h,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=u,s.emulatorConfig=h,s.settings.appVerificationDisabledForTesting=!0,Zr(o)?(A_(`${i}//${o}${c}`),R_("Auth",!0)):vR()}function X_(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function yR(t){const e=X_(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const s=n[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(s);if(r){const i=r[1];return{host:i,port:fp(s.substr(i.length+1))}}else{const[i,o]=s.split(":");return{host:i,port:fp(o)}}}function fp(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function vR(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}class _h{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Cn("not implemented")}_getIdTokenResponse(e){return Cn("not implemented")}_linkToIdToken(e,n){return Cn("not implemented")}_getReauthenticationResolver(e){return Cn("not implemented")}}async function ER(t,e){return vn(t,"POST","/v1/accounts:signUp",e)}async function TR(t,e){return Eo(t,"POST","/v1/accounts:signInWithPassword",Bn(t,e))}async function wR(t,e){return vn(t,"POST","/v1/accounts:sendOobCode",Bn(t,e))}async function bR(t,e){return wR(t,e)}async function IR(t,e){return Eo(t,"POST","/v1/accounts:signInWithEmailLink",Bn(t,e))}async function AR(t,e){return Eo(t,"POST","/v1/accounts:signInWithEmailLink",Bn(t,e))}class so extends _h{constructor(e,n,s,r=null){super("password",s),this._email=e,this._password=n,this._tenantId=r}static _fromEmailAndPassword(e,n){return new so(e,n,"password")}static _fromEmailAndCode(e,n,s=null){return new so(e,n,"emailLink",s)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return lu(e,n,"signInWithPassword",TR);case"emailLink":return IR(e,{email:this._email,oobCode:this._password});default:en(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const s={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return lu(e,s,"signUpPassword",ER);case"emailLink":return AR(e,{idToken:n,email:this._email,oobCode:this._password});default:en(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function Or(t,e){return Eo(t,"POST","/v1/accounts:signInWithIdp",Bn(t,e))}const RR="http://localhost";class Js extends _h{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Js(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):en("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:r,...i}=n;if(!s||!r)return null;const o=new Js(s,r);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Or(e,n)}_linkToIdToken(e,n){const s=this.buildRequest();return s.idToken=n,Or(e,s)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Or(e,n)}buildRequest(){const e={requestUri:RR,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=yo(n)}return e}}function SR(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function CR(t){const e=Pi(ki(t)).link,n=e?Pi(ki(e)).deep_link_id:null,s=Pi(ki(t)).deep_link_id;return(s?Pi(ki(s)).link:null)||s||n||e||t}class yh{constructor(e){const n=Pi(ki(e)),s=n.apiKey??null,r=n.oobCode??null,i=SR(n.mode??null);ue(s&&r&&i,"argument-error"),this.apiKey=s,this.operation=i,this.code=r,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=CR(e);try{return new yh(n)}catch{return null}}}class ti{constructor(){this.providerId=ti.PROVIDER_ID}static credential(e,n){return so._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const s=yh.parseLink(n);return ue(s,"argument-error"),so._fromEmailAndCode(e,s.code,s.tenantId)}}ti.PROVIDER_ID="password";ti.EMAIL_PASSWORD_SIGN_IN_METHOD="password";ti.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class Z_{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class To extends Z_{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class ts extends To{constructor(){super("facebook.com")}static credential(e){return Js._fromParams({providerId:ts.PROVIDER_ID,signInMethod:ts.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ts.credentialFromTaggedObject(e)}static credentialFromError(e){return ts.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ts.credential(e.oauthAccessToken)}catch{return null}}}ts.FACEBOOK_SIGN_IN_METHOD="facebook.com";ts.PROVIDER_ID="facebook.com";class ns extends To{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Js._fromParams({providerId:ns.PROVIDER_ID,signInMethod:ns.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return ns.credentialFromTaggedObject(e)}static credentialFromError(e){return ns.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:s}=e;if(!n&&!s)return null;try{return ns.credential(n,s)}catch{return null}}}ns.GOOGLE_SIGN_IN_METHOD="google.com";ns.PROVIDER_ID="google.com";class ss extends To{constructor(){super("github.com")}static credential(e){return Js._fromParams({providerId:ss.PROVIDER_ID,signInMethod:ss.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ss.credentialFromTaggedObject(e)}static credentialFromError(e){return ss.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ss.credential(e.oauthAccessToken)}catch{return null}}}ss.GITHUB_SIGN_IN_METHOD="github.com";ss.PROVIDER_ID="github.com";class rs extends To{constructor(){super("twitter.com")}static credential(e,n){return Js._fromParams({providerId:rs.PROVIDER_ID,signInMethod:rs.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return rs.credentialFromTaggedObject(e)}static credentialFromError(e){return rs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:s}=e;if(!n||!s)return null;try{return rs.credential(n,s)}catch{return null}}}rs.TWITTER_SIGN_IN_METHOD="twitter.com";rs.PROVIDER_ID="twitter.com";async function PR(t,e){return Eo(t,"POST","/v1/accounts:signUp",Bn(t,e))}class Ys{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,s,r=!1){const i=await Gt._fromIdTokenResponse(e,s,r),o=dp(s);return new Ys({user:i,providerId:o,_tokenResponse:s,operationType:n})}static async _forOperation(e,n,s){await e._updateTokensIfNecessary(s,!0);const r=dp(s);return new Ys({user:e,providerId:r,_tokenResponse:s,operationType:n})}}function dp(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}class Fa extends $n{constructor(e,n,s,r){super(n.code,n.message),this.operationType=s,this.user=r,Object.setPrototypeOf(this,Fa.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,n,s,r){return new Fa(e,n,s,r)}}function ey(t,e,n,s){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?Fa._fromErrorAndOperation(t,i,e,s):i})}async function kR(t,e,n=!1){const s=await jr(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Ys._forOperation(t,"link",s)}async function NR(t,e,n=!1){const{auth:s}=t;if(qt(s.app))return Promise.reject(Nn(s));const r="reauthenticate";try{const i=await jr(t,ey(s,r,e,t),n);ue(i.idToken,s,"internal-error");const o=mh(i.idToken);ue(o,s,"internal-error");const{sub:l}=o;return ue(t.uid===l,s,"user-mismatch"),Ys._forOperation(t,r,i)}catch(i){throw i?.code==="auth/user-not-found"&&en(s,"user-mismatch"),i}}async function ty(t,e,n=!1){if(qt(t.app))return Promise.reject(Nn(t));const s="signIn",r=await ey(t,s,e),i=await Ys._fromIdTokenResponse(t,s,r);return n||await t._updateCurrentUser(i.user),i}async function DR(t,e){return ty(nr(t),e)}async function ny(t){const e=nr(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function OR(t,e,n){if(qt(t.app))return Promise.reject(Nn(t));const s=nr(t),o=await lu(s,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",PR).catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&ny(t),c}),l=await Ys._fromIdTokenResponse(s,"signIn",o);return await s._updateCurrentUser(l.user),l}function VR(t,e,n){return qt(t.app)?Promise.reject(Nn(t)):DR(ft(t),ti.credential(e,n)).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&ny(t),s})}async function pp(t,e){const n=ft(t),r={requestType:"VERIFY_EMAIL",idToken:await t.getIdToken()},{email:i}=await bR(n.auth,r);i!==t.email&&await t.reload()}async function xR(t,e){return vn(t,"POST","/v1/accounts:update",e)}async function MR(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const s=ft(t),i={idToken:await s.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},o=await jr(s,xR(s.auth,i));s.displayName=o.displayName||null,s.photoURL=o.photoUrl||null;const l=s.providerData.find(({providerId:c})=>c==="password");l&&(l.displayName=s.displayName,l.photoURL=s.photoURL),await s._updateTokensIfNecessary(o)}function LR(t,e,n,s){return ft(t).onIdTokenChanged(e,n,s)}function FR(t,e,n){return ft(t).beforeAuthStateChanged(e,n)}function UR(t,e,n,s){return ft(t).onAuthStateChanged(e,n,s)}function $R(t){return ft(t).signOut()}const Ua="__sak";class sy{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Ua,"1"),this.storage.removeItem(Ua),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const BR=1e3,jR=10;class ry extends sy{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=K_(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const s=this.storage.getItem(n),r=this.localCache[n];s!==r&&e(n,r,s)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,l,c)=>{this.notifyListeners(o,c)});return}const s=e.key;n?this.detachListener():this.stopPolling();const r=()=>{const o=this.storage.getItem(s);!n&&this.localCache[s]===o||this.notifyListeners(s,o)},i=this.storage.getItem(s);tR()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,jR):r()}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const r of Array.from(s))r(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:s}),!0)})},BR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}ry.type="LOCAL";const HR=ry;class iy extends sy{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}iy.type="SESSION";const oy=iy;function qR(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}class El{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(r=>r.isListeningto(e));if(n)return n;const s=new El(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:s,eventType:r,data:i}=n.data,o=this.handlersMap[r];if(!o?.size)return;n.ports[0].postMessage({status:"ack",eventId:s,eventType:r});const l=Array.from(o).map(async u=>u(n.origin,i)),c=await qR(l);n.ports[0].postMessage({status:"done",eventId:s,eventType:r,response:c})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}El.receivers=[];function vh(t="",e=10){let n="";for(let s=0;s<e;s++)n+=Math.floor(Math.random()*10);return t+n}class WR{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,s=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,o;return new Promise((l,c)=>{const u=vh("",20);r.port1.start();const h=setTimeout(()=>{c(new Error("unsupported_event"))},s);o={messageChannel:r,onMessage(d){const m=d;if(m.data.eventId===u)switch(m.data.status){case"ack":clearTimeout(h),i=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),l(m.data.response);break;default:clearTimeout(h),clearTimeout(i),c(new Error("invalid_response"));break}}},this.handlers.add(o),r.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:n},[r.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}function fn(){return window}function GR(t){fn().location.href=t}function ay(){return typeof fn().WorkerGlobalScope<"u"&&typeof fn().importScripts=="function"}async function zR(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function KR(){return navigator?.serviceWorker?.controller||null}function QR(){return ay()?self:null}const ly="firebaseLocalStorageDb",JR=1,$a="firebaseLocalStorage",cy="fbase_key";class wo{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Tl(t,e){return t.transaction([$a],e?"readwrite":"readonly").objectStore($a)}function YR(){const t=indexedDB.deleteDatabase(ly);return new wo(t).toPromise()}function cu(){const t=indexedDB.open(ly,JR);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const s=t.result;try{s.createObjectStore($a,{keyPath:cy})}catch(r){n(r)}}),t.addEventListener("success",async()=>{const s=t.result;s.objectStoreNames.contains($a)?e(s):(s.close(),await YR(),e(await cu()))})})}async function mp(t,e,n){const s=Tl(t,!0).put({[cy]:e,value:n});return new wo(s).toPromise()}async function XR(t,e){const n=Tl(t,!1).get(e),s=await new wo(n).toPromise();return s===void 0?null:s.value}function gp(t,e){const n=Tl(t,!0).delete(e);return new wo(n).toPromise()}const ZR=800,eS=3;class uy{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await cu(),this.db)}async _withRetries(e){let n=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(n++>eS)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return ay()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=El._getInstance(QR()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await zR(),!this.activeServiceWorker)return;this.sender=new WR(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||KR()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await cu();return await mp(e,Ua,"1"),await gp(e,Ua),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(s=>mp(s,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(s=>XR(s,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>gp(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(r=>{const i=Tl(r,!1).getAll();return new wo(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],s=new Set;if(e.length!==0)for(const{fbase_key:r,value:i}of e)s.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),n.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!s.has(r)&&(this.notifyListeners(r,null),n.push(r));return n}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const r of Array.from(s))r(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),ZR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}uy.type="LOCAL";const tS=uy;new vo(3e4,6e4);function nS(t,e){return e?Pn(e):(ue(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}class Eh extends _h{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Or(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Or(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Or(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function sS(t){return ty(t.auth,new Eh(t),t.bypassAuthState)}function rS(t){const{auth:e,user:n}=t;return ue(n,e,"internal-error"),NR(n,new Eh(t),t.bypassAuthState)}async function iS(t){const{auth:e,user:n}=t;return ue(n,e,"internal-error"),kR(n,new Eh(t),t.bypassAuthState)}class hy{constructor(e,n,s,r,i=!1){this.auth=e,this.resolver=s,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:s,postBody:r,tenantId:i,error:o,type:l}=e;if(o){this.reject(o);return}const c={auth:this.auth,requestUri:n,sessionId:s,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(c))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return sS;case"linkViaPopup":case"linkViaRedirect":return iS;case"reauthViaPopup":case"reauthViaRedirect":return rS;default:en(this.auth,"internal-error")}}resolve(e){xn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){xn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const oS=new vo(2e3,1e4);class Tr extends hy{constructor(e,n,s,r,i){super(e,n,r,i),this.provider=s,this.authWindow=null,this.pollId=null,Tr.currentPopupAction&&Tr.currentPopupAction.cancel(),Tr.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ue(e,this.auth,"internal-error"),e}async onExecution(){xn(this.filter.length===1,"Popup operations only handle one event");const e=vh();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(hn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(hn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Tr.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(hn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,oS.get())};e()}}Tr.currentPopupAction=null;const aS="pendingRedirect",ha=new Map;class lS extends hy{constructor(e,n,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,s),this.eventId=null}async execute(){let e=ha.get(this.auth._key());if(!e){try{const s=await cS(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(n){e=()=>Promise.reject(n)}ha.set(this.auth._key(),e)}return this.bypassAuthState||ha.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function cS(t,e){const n=fS(e),s=hS(t);if(!await s._isAvailable())return!1;const r=await s._get(n)==="true";return await s._remove(n),r}function uS(t,e){ha.set(t._key(),e)}function hS(t){return Pn(t._redirectPersistence)}function fS(t){return ua(aS,t.config.apiKey,t.name)}async function dS(t,e,n=!1){if(qt(t.app))return Promise.reject(Nn(t));const s=nr(t),r=nS(s,e),o=await new lS(s,r,n).execute();return o&&!n&&(delete o.user._redirectEventId,await s._persistUserIfCurrent(o.user),await s._setRedirectUser(null,e)),o}const pS=600*1e3;class mS{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(n=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!gS(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){if(e.error&&!fy(e)){const s=e.error.code?.split("auth/")[1]||"internal-error";n.onError(hn(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const s=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=pS&&this.cachedEventUids.clear(),this.cachedEventUids.has(_p(e))}saveEventToCache(e){this.cachedEventUids.add(_p(e)),this.lastProcessedEventTime=Date.now()}}function _p(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function fy({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function gS(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return fy(t);default:return!1}}async function _S(t,e={}){return vn(t,"GET","/v1/projects",e)}const yS=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,vS=/^https?/;async function ES(t){if(t.config.emulator)return;const{authorizedDomains:e}=await _S(t);for(const n of e)try{if(TS(n))return}catch{}en(t,"unauthorized-domain")}function TS(t){const e=ou(),{protocol:n,hostname:s}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&s===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===s}if(!vS.test(n))return!1;if(yS.test(t))return s===t;const r=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(s)}const wS=new vo(3e4,6e4);function yp(){const t=fn().___jsl;if(t?.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function bS(t){return new Promise((e,n)=>{function s(){yp(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{yp(),n(hn(t,"network-request-failed"))},timeout:wS.get()})}if(fn().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(fn().gapi?.load)s();else{const r=uR("iframefcb");return fn()[r]=()=>{gapi.load?s():n(hn(t,"network-request-failed"))},J_(`${cR()}?onload=${r}`).catch(i=>n(i))}}).catch(e=>{throw fa=null,e})}let fa=null;function IS(t){return fa=fa||bS(t),fa}const AS=new vo(5e3,15e3),RS="__/auth/iframe",SS="emulator/auth/iframe",CS={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},PS=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function kS(t){const e=t.config;ue(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?ph(e,SS):`https://${t.config.authDomain}/${RS}`,s={apiKey:e.apiKey,appName:t.name,v:ei},r=PS.get(t.config.apiHost);r&&(s.eid=r);const i=t._getFrameworks();return i.length&&(s.fw=i.join(",")),`${n}?${yo(s).slice(1)}`}async function NS(t){const e=await IS(t),n=fn().gapi;return ue(n,t,"internal-error"),e.open({where:document.body,url:kS(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:CS,dontclear:!0},s=>new Promise(async(r,i)=>{await s.restyle({setHideOnLeave:!1});const o=hn(t,"network-request-failed"),l=fn().setTimeout(()=>{i(o)},AS.get());function c(){fn().clearTimeout(l),r(s)}s.ping(c).then(c,()=>{i(o)})}))}const DS={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},OS=500,VS=600,xS="_blank",MS="http://localhost";class vp{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function LS(t,e,n,s=OS,r=VS){const i=Math.max((window.screen.availHeight-r)/2,0).toString(),o=Math.max((window.screen.availWidth-s)/2,0).toString();let l="";const c={...DS,width:s.toString(),height:r.toString(),top:i,left:o},u=It().toLowerCase();n&&(l=H_(u)?xS:n),B_(u)&&(e=e||MS,c.scrollbars="yes");const h=Object.entries(c).reduce((m,[g,v])=>`${m}${g}=${v},`,"");if(eR(u)&&l!=="_self")return FS(e||"",l),new vp(null);const d=window.open(e||"",l,h);ue(d,t,"popup-blocked");try{d.focus()}catch{}return new vp(d)}function FS(t,e){const n=document.createElement("a");n.href=t,n.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(s)}const US="__/auth/handler",$S="emulator/auth/handler",BS=encodeURIComponent("fac");async function Ep(t,e,n,s,r,i){ue(t.config.authDomain,t,"auth-domain-config-required"),ue(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:s,v:ei,eventId:r};if(e instanceof Z_){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",wA(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,d]of Object.entries({}))o[h]=d}if(e instanceof To){const h=e.getScopes().filter(d=>d!=="");h.length>0&&(o.scopes=h.join(","))}t.tenantId&&(o.tid=t.tenantId);const l=o;for(const h of Object.keys(l))l[h]===void 0&&delete l[h];const c=await t._getAppCheckToken(),u=c?`#${BS}=${encodeURIComponent(c)}`:"";return`${jS(t)}?${yo(l).slice(1)}${u}`}function jS({config:t}){return t.emulator?ph(t,$S):`https://${t.authDomain}/${US}`}const Rc="webStorageSupport";class HS{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=oy,this._completeRedirectFn=dS,this._overrideRedirectResult=uS}async _openPopup(e,n,s,r){xn(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const i=await Ep(e,n,s,ou(),r);return LS(e,i,vh())}async _openRedirect(e,n,s,r){await this._originValidation(e);const i=await Ep(e,n,s,ou(),r);return GR(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:r,promise:i}=this.eventManagers[n];return r?Promise.resolve(r):(xn(i,"If manager is not set, promise should be"),i)}const s=this.initAndGetManager(e);return this.eventManagers[n]={promise:s},s.catch(()=>{delete this.eventManagers[n]}),s}async initAndGetManager(e){const n=await NS(e),s=new mS(e);return n.register("authEvent",r=>(ue(r?.authEvent,e,"invalid-auth-event"),{status:s.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=n,s}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Rc,{type:Rc},r=>{const i=r?.[0]?.[Rc];i!==void 0&&n(!!i),en(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=ES(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return K_()||j_()||gh()}}const qS=HS;var Tp="@firebase/auth",wp="1.12.0";class WS{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(s=>{e(s?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ue(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function GS(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function zS(t){Br(new Qs("auth",(e,{options:n})=>{const s=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:l}=s.options;ue(o&&!o.includes(":"),"invalid-api-key",{appName:s.name});const c={apiKey:o,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Q_(t)},u=new oR(s,r,i,c);return gR(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,s)=>{e.getProvider("auth-internal").initialize()})),Br(new Qs("auth-internal",e=>{const n=nr(e.getProvider("auth").getImmediate());return(s=>new WS(s))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),hs(Tp,wp,GS(t)),hs(Tp,wp,"esm2020")}const KS=300,QS=I_("authIdTokenMaxAge")||KS;let bp=null;const JS=t=>async e=>{const n=e&&await e.getIdTokenResult(),s=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(s&&s>QS)return;const r=n?.token;bp!==r&&(bp=r,await fetch(t,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))};function YS(t=k_()){const e=fh(t,"auth");if(e.isInitialized())return e.getImmediate();const n=mR(t,{popupRedirectResolver:qS,persistence:[tS,HR,oy]}),s=I_("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(s,location.origin);if(location.origin===i.origin){const o=JS(i.toString());FR(n,o,()=>o(n.currentUser)),LR(n,l=>o(l))}}const r=w_("auth");return r&&_R(n,`http://${r}`),n}function XS(){return document.getElementsByTagName("head")?.[0]??document}aR({loadJS(t){return new Promise((e,n)=>{const s=document.createElement("script");s.setAttribute("src",t),s.onload=e,s.onerror=r=>{const i=hn("internal-error");i.customData=r,n(i)},s.type="text/javascript",s.charset="UTF-8",XS().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});zS("Browser");var Ip=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var fs,dy;(function(){var t;function e(C,T){function y(){}y.prototype=T.prototype,C.F=T.prototype,C.prototype=new y,C.prototype.constructor=C,C.D=function(b,S,A){for(var w=Array(arguments.length-2),pe=2;pe<arguments.length;pe++)w[pe-2]=arguments[pe];return T.prototype[S].apply(b,w)}}function n(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(s,n),s.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(C,T,y){y||(y=0);const b=Array(16);if(typeof T=="string")for(var S=0;S<16;++S)b[S]=T.charCodeAt(y++)|T.charCodeAt(y++)<<8|T.charCodeAt(y++)<<16|T.charCodeAt(y++)<<24;else for(S=0;S<16;++S)b[S]=T[y++]|T[y++]<<8|T[y++]<<16|T[y++]<<24;T=C.g[0],y=C.g[1],S=C.g[2];let A=C.g[3],w;w=T+(A^y&(S^A))+b[0]+3614090360&4294967295,T=y+(w<<7&4294967295|w>>>25),w=A+(S^T&(y^S))+b[1]+3905402710&4294967295,A=T+(w<<12&4294967295|w>>>20),w=S+(y^A&(T^y))+b[2]+606105819&4294967295,S=A+(w<<17&4294967295|w>>>15),w=y+(T^S&(A^T))+b[3]+3250441966&4294967295,y=S+(w<<22&4294967295|w>>>10),w=T+(A^y&(S^A))+b[4]+4118548399&4294967295,T=y+(w<<7&4294967295|w>>>25),w=A+(S^T&(y^S))+b[5]+1200080426&4294967295,A=T+(w<<12&4294967295|w>>>20),w=S+(y^A&(T^y))+b[6]+2821735955&4294967295,S=A+(w<<17&4294967295|w>>>15),w=y+(T^S&(A^T))+b[7]+4249261313&4294967295,y=S+(w<<22&4294967295|w>>>10),w=T+(A^y&(S^A))+b[8]+1770035416&4294967295,T=y+(w<<7&4294967295|w>>>25),w=A+(S^T&(y^S))+b[9]+2336552879&4294967295,A=T+(w<<12&4294967295|w>>>20),w=S+(y^A&(T^y))+b[10]+4294925233&4294967295,S=A+(w<<17&4294967295|w>>>15),w=y+(T^S&(A^T))+b[11]+2304563134&4294967295,y=S+(w<<22&4294967295|w>>>10),w=T+(A^y&(S^A))+b[12]+1804603682&4294967295,T=y+(w<<7&4294967295|w>>>25),w=A+(S^T&(y^S))+b[13]+4254626195&4294967295,A=T+(w<<12&4294967295|w>>>20),w=S+(y^A&(T^y))+b[14]+2792965006&4294967295,S=A+(w<<17&4294967295|w>>>15),w=y+(T^S&(A^T))+b[15]+1236535329&4294967295,y=S+(w<<22&4294967295|w>>>10),w=T+(S^A&(y^S))+b[1]+4129170786&4294967295,T=y+(w<<5&4294967295|w>>>27),w=A+(y^S&(T^y))+b[6]+3225465664&4294967295,A=T+(w<<9&4294967295|w>>>23),w=S+(T^y&(A^T))+b[11]+643717713&4294967295,S=A+(w<<14&4294967295|w>>>18),w=y+(A^T&(S^A))+b[0]+3921069994&4294967295,y=S+(w<<20&4294967295|w>>>12),w=T+(S^A&(y^S))+b[5]+3593408605&4294967295,T=y+(w<<5&4294967295|w>>>27),w=A+(y^S&(T^y))+b[10]+38016083&4294967295,A=T+(w<<9&4294967295|w>>>23),w=S+(T^y&(A^T))+b[15]+3634488961&4294967295,S=A+(w<<14&4294967295|w>>>18),w=y+(A^T&(S^A))+b[4]+3889429448&4294967295,y=S+(w<<20&4294967295|w>>>12),w=T+(S^A&(y^S))+b[9]+568446438&4294967295,T=y+(w<<5&4294967295|w>>>27),w=A+(y^S&(T^y))+b[14]+3275163606&4294967295,A=T+(w<<9&4294967295|w>>>23),w=S+(T^y&(A^T))+b[3]+4107603335&4294967295,S=A+(w<<14&4294967295|w>>>18),w=y+(A^T&(S^A))+b[8]+1163531501&4294967295,y=S+(w<<20&4294967295|w>>>12),w=T+(S^A&(y^S))+b[13]+2850285829&4294967295,T=y+(w<<5&4294967295|w>>>27),w=A+(y^S&(T^y))+b[2]+4243563512&4294967295,A=T+(w<<9&4294967295|w>>>23),w=S+(T^y&(A^T))+b[7]+1735328473&4294967295,S=A+(w<<14&4294967295|w>>>18),w=y+(A^T&(S^A))+b[12]+2368359562&4294967295,y=S+(w<<20&4294967295|w>>>12),w=T+(y^S^A)+b[5]+4294588738&4294967295,T=y+(w<<4&4294967295|w>>>28),w=A+(T^y^S)+b[8]+2272392833&4294967295,A=T+(w<<11&4294967295|w>>>21),w=S+(A^T^y)+b[11]+1839030562&4294967295,S=A+(w<<16&4294967295|w>>>16),w=y+(S^A^T)+b[14]+4259657740&4294967295,y=S+(w<<23&4294967295|w>>>9),w=T+(y^S^A)+b[1]+2763975236&4294967295,T=y+(w<<4&4294967295|w>>>28),w=A+(T^y^S)+b[4]+1272893353&4294967295,A=T+(w<<11&4294967295|w>>>21),w=S+(A^T^y)+b[7]+4139469664&4294967295,S=A+(w<<16&4294967295|w>>>16),w=y+(S^A^T)+b[10]+3200236656&4294967295,y=S+(w<<23&4294967295|w>>>9),w=T+(y^S^A)+b[13]+681279174&4294967295,T=y+(w<<4&4294967295|w>>>28),w=A+(T^y^S)+b[0]+3936430074&4294967295,A=T+(w<<11&4294967295|w>>>21),w=S+(A^T^y)+b[3]+3572445317&4294967295,S=A+(w<<16&4294967295|w>>>16),w=y+(S^A^T)+b[6]+76029189&4294967295,y=S+(w<<23&4294967295|w>>>9),w=T+(y^S^A)+b[9]+3654602809&4294967295,T=y+(w<<4&4294967295|w>>>28),w=A+(T^y^S)+b[12]+3873151461&4294967295,A=T+(w<<11&4294967295|w>>>21),w=S+(A^T^y)+b[15]+530742520&4294967295,S=A+(w<<16&4294967295|w>>>16),w=y+(S^A^T)+b[2]+3299628645&4294967295,y=S+(w<<23&4294967295|w>>>9),w=T+(S^(y|~A))+b[0]+4096336452&4294967295,T=y+(w<<6&4294967295|w>>>26),w=A+(y^(T|~S))+b[7]+1126891415&4294967295,A=T+(w<<10&4294967295|w>>>22),w=S+(T^(A|~y))+b[14]+2878612391&4294967295,S=A+(w<<15&4294967295|w>>>17),w=y+(A^(S|~T))+b[5]+4237533241&4294967295,y=S+(w<<21&4294967295|w>>>11),w=T+(S^(y|~A))+b[12]+1700485571&4294967295,T=y+(w<<6&4294967295|w>>>26),w=A+(y^(T|~S))+b[3]+2399980690&4294967295,A=T+(w<<10&4294967295|w>>>22),w=S+(T^(A|~y))+b[10]+4293915773&4294967295,S=A+(w<<15&4294967295|w>>>17),w=y+(A^(S|~T))+b[1]+2240044497&4294967295,y=S+(w<<21&4294967295|w>>>11),w=T+(S^(y|~A))+b[8]+1873313359&4294967295,T=y+(w<<6&4294967295|w>>>26),w=A+(y^(T|~S))+b[15]+4264355552&4294967295,A=T+(w<<10&4294967295|w>>>22),w=S+(T^(A|~y))+b[6]+2734768916&4294967295,S=A+(w<<15&4294967295|w>>>17),w=y+(A^(S|~T))+b[13]+1309151649&4294967295,y=S+(w<<21&4294967295|w>>>11),w=T+(S^(y|~A))+b[4]+4149444226&4294967295,T=y+(w<<6&4294967295|w>>>26),w=A+(y^(T|~S))+b[11]+3174756917&4294967295,A=T+(w<<10&4294967295|w>>>22),w=S+(T^(A|~y))+b[2]+718787259&4294967295,S=A+(w<<15&4294967295|w>>>17),w=y+(A^(S|~T))+b[9]+3951481745&4294967295,C.g[0]=C.g[0]+T&4294967295,C.g[1]=C.g[1]+(S+(w<<21&4294967295|w>>>11))&4294967295,C.g[2]=C.g[2]+S&4294967295,C.g[3]=C.g[3]+A&4294967295}s.prototype.v=function(C,T){T===void 0&&(T=C.length);const y=T-this.blockSize,b=this.C;let S=this.h,A=0;for(;A<T;){if(S==0)for(;A<=y;)r(this,C,A),A+=this.blockSize;if(typeof C=="string"){for(;A<T;)if(b[S++]=C.charCodeAt(A++),S==this.blockSize){r(this,b),S=0;break}}else for(;A<T;)if(b[S++]=C[A++],S==this.blockSize){r(this,b),S=0;break}}this.h=S,this.o+=T},s.prototype.A=function(){var C=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);C[0]=128;for(var T=1;T<C.length-8;++T)C[T]=0;T=this.o*8;for(var y=C.length-8;y<C.length;++y)C[y]=T&255,T/=256;for(this.v(C),C=Array(16),T=0,y=0;y<4;++y)for(let b=0;b<32;b+=8)C[T++]=this.g[y]>>>b&255;return C};function i(C,T){var y=l;return Object.prototype.hasOwnProperty.call(y,C)?y[C]:y[C]=T(C)}function o(C,T){this.h=T;const y=[];let b=!0;for(let S=C.length-1;S>=0;S--){const A=C[S]|0;b&&A==T||(y[S]=A,b=!1)}this.g=y}var l={};function c(C){return-128<=C&&C<128?i(C,function(T){return new o([T|0],T<0?-1:0)}):new o([C|0],C<0?-1:0)}function u(C){if(isNaN(C)||!isFinite(C))return d;if(C<0)return D(u(-C));const T=[];let y=1;for(let b=0;C>=y;b++)T[b]=C/y|0,y*=4294967296;return new o(T,0)}function h(C,T){if(C.length==0)throw Error("number format error: empty string");if(T=T||10,T<2||36<T)throw Error("radix out of range: "+T);if(C.charAt(0)=="-")return D(h(C.substring(1),T));if(C.indexOf("-")>=0)throw Error('number format error: interior "-" character');const y=u(Math.pow(T,8));let b=d;for(let A=0;A<C.length;A+=8){var S=Math.min(8,C.length-A);const w=parseInt(C.substring(A,A+S),T);S<8?(S=u(Math.pow(T,S)),b=b.j(S).add(u(w))):(b=b.j(y),b=b.add(u(w)))}return b}var d=c(0),m=c(1),g=c(16777216);t=o.prototype,t.m=function(){if(I(this))return-D(this).m();let C=0,T=1;for(let y=0;y<this.g.length;y++){const b=this.i(y);C+=(b>=0?b:4294967296+b)*T,T*=4294967296}return C},t.toString=function(C){if(C=C||10,C<2||36<C)throw Error("radix out of range: "+C);if(v(this))return"0";if(I(this))return"-"+D(this).toString(C);const T=u(Math.pow(C,6));var y=this;let b="";for(;;){const S=O(y,T).g;y=k(y,S.j(T));let A=((y.g.length>0?y.g[0]:y.h)>>>0).toString(C);if(y=S,v(y))return A+b;for(;A.length<6;)A="0"+A;b=A+b}},t.i=function(C){return C<0?0:C<this.g.length?this.g[C]:this.h};function v(C){if(C.h!=0)return!1;for(let T=0;T<C.g.length;T++)if(C.g[T]!=0)return!1;return!0}function I(C){return C.h==-1}t.l=function(C){return C=k(this,C),I(C)?-1:v(C)?0:1};function D(C){const T=C.g.length,y=[];for(let b=0;b<T;b++)y[b]=~C.g[b];return new o(y,~C.h).add(m)}t.abs=function(){return I(this)?D(this):this},t.add=function(C){const T=Math.max(this.g.length,C.g.length),y=[];let b=0;for(let S=0;S<=T;S++){let A=b+(this.i(S)&65535)+(C.i(S)&65535),w=(A>>>16)+(this.i(S)>>>16)+(C.i(S)>>>16);b=w>>>16,A&=65535,w&=65535,y[S]=w<<16|A}return new o(y,y[y.length-1]&-2147483648?-1:0)};function k(C,T){return C.add(D(T))}t.j=function(C){if(v(this)||v(C))return d;if(I(this))return I(C)?D(this).j(D(C)):D(D(this).j(C));if(I(C))return D(this.j(D(C)));if(this.l(g)<0&&C.l(g)<0)return u(this.m()*C.m());const T=this.g.length+C.g.length,y=[];for(var b=0;b<2*T;b++)y[b]=0;for(b=0;b<this.g.length;b++)for(let S=0;S<C.g.length;S++){const A=this.i(b)>>>16,w=this.i(b)&65535,pe=C.i(S)>>>16,Ae=C.i(S)&65535;y[2*b+2*S]+=w*Ae,M(y,2*b+2*S),y[2*b+2*S+1]+=A*Ae,M(y,2*b+2*S+1),y[2*b+2*S+1]+=w*pe,M(y,2*b+2*S+1),y[2*b+2*S+2]+=A*pe,M(y,2*b+2*S+2)}for(C=0;C<T;C++)y[C]=y[2*C+1]<<16|y[2*C];for(C=T;C<2*T;C++)y[C]=0;return new o(y,0)};function M(C,T){for(;(C[T]&65535)!=C[T];)C[T+1]+=C[T]>>>16,C[T]&=65535,T++}function R(C,T){this.g=C,this.h=T}function O(C,T){if(v(T))throw Error("division by zero");if(v(C))return new R(d,d);if(I(C))return T=O(D(C),T),new R(D(T.g),D(T.h));if(I(T))return T=O(C,D(T)),new R(D(T.g),T.h);if(C.g.length>30){if(I(C)||I(T))throw Error("slowDivide_ only works with positive integers.");for(var y=m,b=T;b.l(C)<=0;)y=L(y),b=L(b);var S=z(y,1),A=z(b,1);for(b=z(b,2),y=z(y,2);!v(b);){var w=A.add(b);w.l(C)<=0&&(S=S.add(y),A=w),b=z(b,1),y=z(y,1)}return T=k(C,S.j(T)),new R(S,T)}for(S=d;C.l(T)>=0;){for(y=Math.max(1,Math.floor(C.m()/T.m())),b=Math.ceil(Math.log(y)/Math.LN2),b=b<=48?1:Math.pow(2,b-48),A=u(y),w=A.j(T);I(w)||w.l(C)>0;)y-=b,A=u(y),w=A.j(T);v(A)&&(A=m),S=S.add(A),C=k(C,w)}return new R(S,C)}t.B=function(C){return O(this,C).h},t.and=function(C){const T=Math.max(this.g.length,C.g.length),y=[];for(let b=0;b<T;b++)y[b]=this.i(b)&C.i(b);return new o(y,this.h&C.h)},t.or=function(C){const T=Math.max(this.g.length,C.g.length),y=[];for(let b=0;b<T;b++)y[b]=this.i(b)|C.i(b);return new o(y,this.h|C.h)},t.xor=function(C){const T=Math.max(this.g.length,C.g.length),y=[];for(let b=0;b<T;b++)y[b]=this.i(b)^C.i(b);return new o(y,this.h^C.h)};function L(C){const T=C.g.length+1,y=[];for(let b=0;b<T;b++)y[b]=C.i(b)<<1|C.i(b-1)>>>31;return new o(y,C.h)}function z(C,T){const y=T>>5;T%=32;const b=C.g.length-y,S=[];for(let A=0;A<b;A++)S[A]=T>0?C.i(A+y)>>>T|C.i(A+y+1)<<32-T:C.i(A+y);return new o(S,C.h)}s.prototype.digest=s.prototype.A,s.prototype.reset=s.prototype.u,s.prototype.update=s.prototype.v,dy=s,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=u,o.fromString=h,fs=o}).apply(typeof Ip<"u"?Ip:typeof self<"u"?self:typeof window<"u"?window:{});var Xo=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var py,Ni,my,da,uu,gy,_y,yy;(function(){var t,e=Object.defineProperty;function n(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof Xo=="object"&&Xo];for(var f=0;f<a.length;++f){var p=a[f];if(p&&p.Math==Math)return p}throw Error("Cannot find global object")}var s=n(this);function r(a,f){if(f)e:{var p=s;a=a.split(".");for(var _=0;_<a.length-1;_++){var V=a[_];if(!(V in p))break e;p=p[V]}a=a[a.length-1],_=p[a],f=f(_),f!=_&&f!=null&&e(p,a,{configurable:!0,writable:!0,value:f})}}r("Symbol.dispose",function(a){return a||Symbol("Symbol.dispose")}),r("Array.prototype.values",function(a){return a||function(){return this[Symbol.iterator]()}}),r("Object.entries",function(a){return a||function(f){var p=[],_;for(_ in f)Object.prototype.hasOwnProperty.call(f,_)&&p.push([_,f[_]]);return p}});var i=i||{},o=this||self;function l(a){var f=typeof a;return f=="object"&&a!=null||f=="function"}function c(a,f,p){return a.call.apply(a.bind,arguments)}function u(a,f,p){return u=c,u.apply(null,arguments)}function h(a,f){var p=Array.prototype.slice.call(arguments,1);return function(){var _=p.slice();return _.push.apply(_,arguments),a.apply(this,_)}}function d(a,f){function p(){}p.prototype=f.prototype,a.Z=f.prototype,a.prototype=new p,a.prototype.constructor=a,a.Ob=function(_,V,x){for(var J=Array(arguments.length-2),ye=2;ye<arguments.length;ye++)J[ye-2]=arguments[ye];return f.prototype[V].apply(_,J)}}var m=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?a=>a&&AsyncContext.Snapshot.wrap(a):a=>a;function g(a){const f=a.length;if(f>0){const p=Array(f);for(let _=0;_<f;_++)p[_]=a[_];return p}return[]}function v(a,f){for(let _=1;_<arguments.length;_++){const V=arguments[_];var p=typeof V;if(p=p!="object"?p:V?Array.isArray(V)?"array":p:"null",p=="array"||p=="object"&&typeof V.length=="number"){p=a.length||0;const x=V.length||0;a.length=p+x;for(let J=0;J<x;J++)a[p+J]=V[J]}else a.push(V)}}class I{constructor(f,p){this.i=f,this.j=p,this.h=0,this.g=null}get(){let f;return this.h>0?(this.h--,f=this.g,this.g=f.next,f.next=null):f=this.i(),f}}function D(a){o.setTimeout(()=>{throw a},0)}function k(){var a=C;let f=null;return a.g&&(f=a.g,a.g=a.g.next,a.g||(a.h=null),f.next=null),f}class M{constructor(){this.h=this.g=null}add(f,p){const _=R.get();_.set(f,p),this.h?this.h.next=_:this.g=_,this.h=_}}var R=new I(()=>new O,a=>a.reset());class O{constructor(){this.next=this.g=this.h=null}set(f,p){this.h=f,this.g=p,this.next=null}reset(){this.next=this.g=this.h=null}}let L,z=!1,C=new M,T=()=>{const a=Promise.resolve(void 0);L=()=>{a.then(y)}};function y(){for(var a;a=k();){try{a.h.call(a.g)}catch(p){D(p)}var f=R;f.j(a),f.h<100&&(f.h++,a.next=f.g,f.g=a)}z=!1}function b(){this.u=this.u,this.C=this.C}b.prototype.u=!1,b.prototype.dispose=function(){this.u||(this.u=!0,this.N())},b.prototype[Symbol.dispose]=function(){this.dispose()},b.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function S(a,f){this.type=a,this.g=this.target=f,this.defaultPrevented=!1}S.prototype.h=function(){this.defaultPrevented=!0};var A=(function(){if(!o.addEventListener||!Object.defineProperty)return!1;var a=!1,f=Object.defineProperty({},"passive",{get:function(){a=!0}});try{const p=()=>{};o.addEventListener("test",p,f),o.removeEventListener("test",p,f)}catch{}return a})();function w(a){return/^[\s\xa0]*$/.test(a)}function pe(a,f){S.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a&&this.init(a,f)}d(pe,S),pe.prototype.init=function(a,f){const p=this.type=a.type,_=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;this.target=a.target||a.srcElement,this.g=f,f=a.relatedTarget,f||(p=="mouseover"?f=a.fromElement:p=="mouseout"&&(f=a.toElement)),this.relatedTarget=f,_?(this.clientX=_.clientX!==void 0?_.clientX:_.pageX,this.clientY=_.clientY!==void 0?_.clientY:_.pageY,this.screenX=_.screenX||0,this.screenY=_.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=a.pointerType,this.state=a.state,this.i=a,a.defaultPrevented&&pe.Z.h.call(this)},pe.prototype.h=function(){pe.Z.h.call(this);const a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var Ae="closure_listenable_"+(Math.random()*1e6|0),se=0;function _e(a,f,p,_,V){this.listener=a,this.proxy=null,this.src=f,this.type=p,this.capture=!!_,this.ha=V,this.key=++se,this.da=this.fa=!1}function ee(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function De(a,f,p){for(const _ in a)f.call(p,a[_],_,a)}function ir(a,f){for(const p in a)f.call(void 0,a[p],p,a)}function tn(a){const f={};for(const p in a)f[p]=a[p];return f}const Ot="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function oi(a,f){let p,_;for(let V=1;V<arguments.length;V++){_=arguments[V];for(p in _)a[p]=_[p];for(let x=0;x<Ot.length;x++)p=Ot[x],Object.prototype.hasOwnProperty.call(_,p)&&(a[p]=_[p])}}function or(a){this.src=a,this.g={},this.h=0}or.prototype.add=function(a,f,p,_,V){const x=a.toString();a=this.g[x],a||(a=this.g[x]=[],this.h++);const J=En(a,f,_,V);return J>-1?(f=a[J],p||(f.fa=!1)):(f=new _e(f,this.src,x,!!_,V),f.fa=p,a.push(f)),f};function ai(a,f){const p=f.type;if(p in a.g){var _=a.g[p],V=Array.prototype.indexOf.call(_,f,void 0),x;(x=V>=0)&&Array.prototype.splice.call(_,V,1),x&&(ee(f),a.g[p].length==0&&(delete a.g[p],a.h--))}}function En(a,f,p,_){for(let V=0;V<a.length;++V){const x=a[V];if(!x.da&&x.listener==f&&x.capture==!!p&&x.ha==_)return V}return-1}var jn="closure_lm_"+(Math.random()*1e6|0),As={};function li(a,f,p,_,V){if(Array.isArray(f)){for(let x=0;x<f.length;x++)li(a,f[x],p,_,V);return null}return p=j(p),a&&a[Ae]?a.J(f,p,l(_)?!!_.capture:!1,V):Hn(a,f,p,!1,_,V)}function Hn(a,f,p,_,V,x){if(!f)throw Error("Invalid event type");const J=l(V)?!!V.capture:!!V;let ye=H(a);if(ye||(a[jn]=ye=new or(a)),p=ye.add(f,p,_,J,x),p.proxy)return p;if(_=ci(),p.proxy=_,_.src=a,_.listener=p,a.addEventListener)A||(V=J),V===void 0&&(V=!1),a.addEventListener(f.toString(),_,V);else if(a.attachEvent)a.attachEvent(N(f.toString()),_);else if(a.addListener&&a.removeListener)a.addListener(_);else throw Error("addEventListener and attachEvent are unavailable.");return p}function ci(){function a(p){return f.call(a.src,a.listener,p)}const f=F;return a}function ar(a,f,p,_,V){if(Array.isArray(f))for(var x=0;x<f.length;x++)ar(a,f[x],p,_,V);else _=l(_)?!!_.capture:!!_,p=j(p),a&&a[Ae]?(a=a.i,x=String(f).toString(),x in a.g&&(f=a.g[x],p=En(f,p,_,V),p>-1&&(ee(f[p]),Array.prototype.splice.call(f,p,1),f.length==0&&(delete a.g[x],a.h--)))):a&&(a=H(a))&&(f=a.g[f.toString()],a=-1,f&&(a=En(f,p,_,V)),(p=a>-1?f[a]:null)&&P(p))}function P(a){if(typeof a!="number"&&a&&!a.da){var f=a.src;if(f&&f[Ae])ai(f.i,a);else{var p=a.type,_=a.proxy;f.removeEventListener?f.removeEventListener(p,_,a.capture):f.detachEvent?f.detachEvent(N(p),_):f.addListener&&f.removeListener&&f.removeListener(_),(p=H(f))?(ai(p,a),p.h==0&&(p.src=null,f[jn]=null)):ee(a)}}}function N(a){return a in As?As[a]:As[a]="on"+a}function F(a,f){if(a.da)a=!0;else{f=new pe(f,this);const p=a.listener,_=a.ha||a.src;a.fa&&P(a),a=p.call(_,f)}return a}function H(a){return a=a[jn],a instanceof or?a:null}var $="__closure_events_fn_"+(Math.random()*1e9>>>0);function j(a){return typeof a=="function"?a:(a[$]||(a[$]=function(f){return a.handleEvent(f)}),a[$])}function K(){b.call(this),this.i=new or(this),this.M=this,this.G=null}d(K,b),K.prototype[Ae]=!0,K.prototype.removeEventListener=function(a,f,p,_){ar(this,a,f,p,_)};function G(a,f){var p,_=a.G;if(_)for(p=[];_;_=_.G)p.push(_);if(a=a.M,_=f.type||f,typeof f=="string")f=new S(f,a);else if(f instanceof S)f.target=f.target||a;else{var V=f;f=new S(_,a),oi(f,V)}V=!0;let x,J;if(p)for(J=p.length-1;J>=0;J--)x=f.g=p[J],V=Q(x,_,!0,f)&&V;if(x=f.g=a,V=Q(x,_,!0,f)&&V,V=Q(x,_,!1,f)&&V,p)for(J=0;J<p.length;J++)x=f.g=p[J],V=Q(x,_,!1,f)&&V}K.prototype.N=function(){if(K.Z.N.call(this),this.i){var a=this.i;for(const f in a.g){const p=a.g[f];for(let _=0;_<p.length;_++)ee(p[_]);delete a.g[f],a.h--}}this.G=null},K.prototype.J=function(a,f,p,_){return this.i.add(String(a),f,!1,p,_)},K.prototype.K=function(a,f,p,_){return this.i.add(String(a),f,!0,p,_)};function Q(a,f,p,_){if(f=a.i.g[String(f)],!f)return!0;f=f.concat();let V=!0;for(let x=0;x<f.length;++x){const J=f[x];if(J&&!J.da&&J.capture==p){const ye=J.listener,st=J.ha||J.src;J.fa&&ai(a.i,J),V=ye.call(st,_)!==!1&&V}}return V&&!_.defaultPrevented}function q(a,f){if(typeof a!="function")if(a&&typeof a.handleEvent=="function")a=u(a.handleEvent,a);else throw Error("Invalid listener argument");return Number(f)>2147483647?-1:o.setTimeout(a,f||0)}function ie(a){a.g=q(()=>{a.g=null,a.i&&(a.i=!1,ie(a))},a.l);const f=a.h;a.h=null,a.m.apply(null,f)}class X extends b{constructor(f,p){super(),this.m=f,this.l=p,this.h=null,this.i=!1,this.g=null}j(f){this.h=arguments,this.g?this.i=!0:ie(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ne(a){b.call(this),this.h=a,this.g={}}d(ne,b);var de=[];function ve(a){De(a.g,function(f,p){this.g.hasOwnProperty(p)&&P(f)},a),a.g={}}ne.prototype.N=function(){ne.Z.N.call(this),ve(this)},ne.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ce=o.JSON.stringify,Se=o.JSON.parse,yt=class{stringify(a){return o.JSON.stringify(a,void 0)}parse(a){return o.JSON.parse(a,void 0)}};function tt(){}function Ct(){}var nt={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Tn(){S.call(this,"d")}d(Tn,S);function lr(){S.call(this,"c")}d(lr,S);var Ke={},Vt=null;function Rs(){return Vt=Vt||new K}Ke.Ia="serverreachability";function ui(a){S.call(this,Ke.Ia,a)}d(ui,S);function hi(a){const f=Rs();G(f,new ui(f))}Ke.STAT_EVENT="statevent";function Xh(a,f){S.call(this,Ke.STAT_EVENT,a),this.stat=f}d(Xh,S);function At(a){const f=Rs();G(f,new Xh(f,a))}Ke.Ja="timingevent";function Zh(a,f){S.call(this,Ke.Ja,a),this.size=f}d(Zh,S);function fi(a,f){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){a()},f)}function di(){this.g=!0}di.prototype.ua=function(){this.g=!1};function Gv(a,f,p,_,V,x){a.info(function(){if(a.g)if(x){var J="",ye=x.split("&");for(let Oe=0;Oe<ye.length;Oe++){var st=ye[Oe].split("=");if(st.length>1){const lt=st[0];st=st[1];const sn=lt.split("_");J=sn.length>=2&&sn[1]=="type"?J+(lt+"="+st+"&"):J+(lt+"=redacted&")}}}else J=null;else J=x;return"XMLHTTP REQ ("+_+") [attempt "+V+"]: "+f+`
`+p+`
`+J})}function zv(a,f,p,_,V,x,J){a.info(function(){return"XMLHTTP RESP ("+_+") [ attempt "+V+"]: "+f+`
`+p+`
`+x+" "+J})}function cr(a,f,p,_){a.info(function(){return"XMLHTTP TEXT ("+f+"): "+Qv(a,p)+(_?" "+_:"")})}function Kv(a,f){a.info(function(){return"TIMEOUT: "+f})}di.prototype.info=function(){};function Qv(a,f){if(!a.g)return f;if(!f)return null;try{const x=JSON.parse(f);if(x){for(a=0;a<x.length;a++)if(Array.isArray(x[a])){var p=x[a];if(!(p.length<2)){var _=p[1];if(Array.isArray(_)&&!(_.length<1)){var V=_[0];if(V!="noop"&&V!="stop"&&V!="close")for(let J=1;J<_.length;J++)_[J]=""}}}}return Ce(x)}catch{return f}}var ko={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},ef={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},tf;function Bl(){}d(Bl,tt),Bl.prototype.g=function(){return new XMLHttpRequest},tf=new Bl;function pi(a){return encodeURIComponent(String(a))}function Jv(a){var f=1;a=a.split(":");const p=[];for(;f>0&&a.length;)p.push(a.shift()),f--;return a.length&&p.push(a.join(":")),p}function qn(a,f,p,_){this.j=a,this.i=f,this.l=p,this.S=_||1,this.V=new ne(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new nf}function nf(){this.i=null,this.g="",this.h=!1}var sf={},jl={};function Hl(a,f,p){a.M=1,a.A=Do(nn(f)),a.u=p,a.R=!0,rf(a,null)}function rf(a,f){a.F=Date.now(),No(a),a.B=nn(a.A);var p=a.B,_=a.S;Array.isArray(_)||(_=[String(_)]),yf(p.i,"t",_),a.C=0,p=a.j.L,a.h=new nf,a.g=Mf(a.j,p?f:null,!a.u),a.P>0&&(a.O=new X(u(a.Y,a,a.g),a.P)),f=a.V,p=a.g,_=a.ba;var V="readystatechange";Array.isArray(V)||(V&&(de[0]=V.toString()),V=de);for(let x=0;x<V.length;x++){const J=li(p,V[x],_||f.handleEvent,!1,f.h||f);if(!J)break;f.g[J.key]=J}f=a.J?tn(a.J):{},a.u?(a.v||(a.v="POST"),f["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.B,a.v,a.u,f)):(a.v="GET",a.g.ea(a.B,a.v,null,f)),hi(),Gv(a.i,a.v,a.B,a.l,a.S,a.u)}qn.prototype.ba=function(a){a=a.target;const f=this.O;f&&zn(a)==3?f.j():this.Y(a)},qn.prototype.Y=function(a){try{if(a==this.g)e:{const ye=zn(this.g),st=this.g.ya(),Oe=this.g.ca();if(!(ye<3)&&(ye!=3||this.g&&(this.h.h||this.g.la()||Af(this.g)))){this.K||ye!=4||st==7||(st==8||Oe<=0?hi(3):hi(2)),ql(this);var f=this.g.ca();this.X=f;var p=Yv(this);if(this.o=f==200,zv(this.i,this.v,this.B,this.l,this.S,ye,f),this.o){if(this.U&&!this.L){t:{if(this.g){var _,V=this.g;if((_=V.g?V.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!w(_)){var x=_;break t}}x=null}if(a=x)cr(this.i,this.l,a,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Wl(this,a);else{this.o=!1,this.m=3,At(12),Ss(this),mi(this);break e}}if(this.R){a=!0;let lt;for(;!this.K&&this.C<p.length;)if(lt=Xv(this,p),lt==jl){ye==4&&(this.m=4,At(14),a=!1),cr(this.i,this.l,null,"[Incomplete Response]");break}else if(lt==sf){this.m=4,At(15),cr(this.i,this.l,p,"[Invalid Chunk]"),a=!1;break}else cr(this.i,this.l,lt,null),Wl(this,lt);if(of(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ye!=4||p.length!=0||this.h.h||(this.m=1,At(16),a=!1),this.o=this.o&&a,!a)cr(this.i,this.l,p,"[Invalid Chunked Response]"),Ss(this),mi(this);else if(p.length>0&&!this.W){this.W=!0;var J=this.j;J.g==this&&J.aa&&!J.P&&(J.j.info("Great, no buffering proxy detected. Bytes received: "+p.length),Zl(J),J.P=!0,At(11))}}else cr(this.i,this.l,p,null),Wl(this,p);ye==4&&Ss(this),this.o&&!this.K&&(ye==4?Df(this.j,this):(this.o=!1,No(this)))}else fE(this.g),f==400&&p.indexOf("Unknown SID")>0?(this.m=3,At(12)):(this.m=0,At(13)),Ss(this),mi(this)}}}catch{}};function Yv(a){if(!of(a))return a.g.la();const f=Af(a.g);if(f==="")return"";let p="";const _=f.length,V=zn(a.g)==4;if(!a.h.i){if(typeof TextDecoder>"u")return Ss(a),mi(a),"";a.h.i=new o.TextDecoder}for(let x=0;x<_;x++)a.h.h=!0,p+=a.h.i.decode(f[x],{stream:!(V&&x==_-1)});return f.length=0,a.h.g+=p,a.C=0,a.h.g}function of(a){return a.g?a.v=="GET"&&a.M!=2&&a.j.Aa:!1}function Xv(a,f){var p=a.C,_=f.indexOf(`
`,p);return _==-1?jl:(p=Number(f.substring(p,_)),isNaN(p)?sf:(_+=1,_+p>f.length?jl:(f=f.slice(_,_+p),a.C=_+p,f)))}qn.prototype.cancel=function(){this.K=!0,Ss(this)};function No(a){a.T=Date.now()+a.H,af(a,a.H)}function af(a,f){if(a.D!=null)throw Error("WatchDog timer not null");a.D=fi(u(a.aa,a),f)}function ql(a){a.D&&(o.clearTimeout(a.D),a.D=null)}qn.prototype.aa=function(){this.D=null;const a=Date.now();a-this.T>=0?(Kv(this.i,this.B),this.M!=2&&(hi(),At(17)),Ss(this),this.m=2,mi(this)):af(this,this.T-a)};function mi(a){a.j.I==0||a.K||Df(a.j,a)}function Ss(a){ql(a);var f=a.O;f&&typeof f.dispose=="function"&&f.dispose(),a.O=null,ve(a.V),a.g&&(f=a.g,a.g=null,f.abort(),f.dispose())}function Wl(a,f){try{var p=a.j;if(p.I!=0&&(p.g==a||Gl(p.h,a))){if(!a.L&&Gl(p.h,a)&&p.I==3){try{var _=p.Ba.g.parse(f)}catch{_=null}if(Array.isArray(_)&&_.length==3){var V=_;if(V[0]==0){e:if(!p.v){if(p.g)if(p.g.F+3e3<a.F)Lo(p),xo(p);else break e;Xl(p),At(18)}}else p.xa=V[1],0<p.xa-p.K&&V[2]<37500&&p.F&&p.A==0&&!p.C&&(p.C=fi(u(p.Va,p),6e3));uf(p.h)<=1&&p.ta&&(p.ta=void 0)}else Ps(p,11)}else if((a.L||p.g==a)&&Lo(p),!w(f))for(V=p.Ba.g.parse(f),f=0;f<V.length;f++){let Oe=V[f];const lt=Oe[0];if(!(lt<=p.K))if(p.K=lt,Oe=Oe[1],p.I==2)if(Oe[0]=="c"){p.M=Oe[1],p.ba=Oe[2];const sn=Oe[3];sn!=null&&(p.ka=sn,p.j.info("VER="+p.ka));const ks=Oe[4];ks!=null&&(p.za=ks,p.j.info("SVER="+p.za));const Kn=Oe[5];Kn!=null&&typeof Kn=="number"&&Kn>0&&(_=1.5*Kn,p.O=_,p.j.info("backChannelRequestTimeoutMs_="+_)),_=p;const Qn=a.g;if(Qn){const Uo=Qn.g?Qn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Uo){var x=_.h;x.g||Uo.indexOf("spdy")==-1&&Uo.indexOf("quic")==-1&&Uo.indexOf("h2")==-1||(x.j=x.l,x.g=new Set,x.h&&(zl(x,x.h),x.h=null))}if(_.G){const ec=Qn.g?Qn.g.getResponseHeader("X-HTTP-Session-Id"):null;ec&&(_.wa=ec,Ue(_.J,_.G,ec))}}p.I=3,p.l&&p.l.ra(),p.aa&&(p.T=Date.now()-a.F,p.j.info("Handshake RTT: "+p.T+"ms")),_=p;var J=a;if(_.na=xf(_,_.L?_.ba:null,_.W),J.L){hf(_.h,J);var ye=J,st=_.O;st&&(ye.H=st),ye.D&&(ql(ye),No(ye)),_.g=J}else kf(_);p.i.length>0&&Mo(p)}else Oe[0]!="stop"&&Oe[0]!="close"||Ps(p,7);else p.I==3&&(Oe[0]=="stop"||Oe[0]=="close"?Oe[0]=="stop"?Ps(p,7):Yl(p):Oe[0]!="noop"&&p.l&&p.l.qa(Oe),p.A=0)}}hi(4)}catch{}}var Zv=class{constructor(a,f){this.g=a,this.map=f}};function lf(a){this.l=a||10,o.PerformanceNavigationTiming?(a=o.performance.getEntriesByType("navigation"),a=a.length>0&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function cf(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function uf(a){return a.h?1:a.g?a.g.size:0}function Gl(a,f){return a.h?a.h==f:a.g?a.g.has(f):!1}function zl(a,f){a.g?a.g.add(f):a.h=f}function hf(a,f){a.h&&a.h==f?a.h=null:a.g&&a.g.has(f)&&a.g.delete(f)}lf.prototype.cancel=function(){if(this.i=ff(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const a of this.g.values())a.cancel();this.g.clear()}};function ff(a){if(a.h!=null)return a.i.concat(a.h.G);if(a.g!=null&&a.g.size!==0){let f=a.i;for(const p of a.g.values())f=f.concat(p.G);return f}return g(a.i)}var df=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function eE(a,f){if(a){a=a.split("&");for(let p=0;p<a.length;p++){const _=a[p].indexOf("=");let V,x=null;_>=0?(V=a[p].substring(0,_),x=a[p].substring(_+1)):V=a[p],f(V,x?decodeURIComponent(x.replace(/\+/g," ")):"")}}}function Wn(a){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let f;a instanceof Wn?(this.l=a.l,gi(this,a.j),this.o=a.o,this.g=a.g,_i(this,a.u),this.h=a.h,Kl(this,vf(a.i)),this.m=a.m):a&&(f=String(a).match(df))?(this.l=!1,gi(this,f[1]||"",!0),this.o=yi(f[2]||""),this.g=yi(f[3]||"",!0),_i(this,f[4]),this.h=yi(f[5]||"",!0),Kl(this,f[6]||"",!0),this.m=yi(f[7]||"")):(this.l=!1,this.i=new Ei(null,this.l))}Wn.prototype.toString=function(){const a=[];var f=this.j;f&&a.push(vi(f,pf,!0),":");var p=this.g;return(p||f=="file")&&(a.push("//"),(f=this.o)&&a.push(vi(f,pf,!0),"@"),a.push(pi(p).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p=this.u,p!=null&&a.push(":",String(p))),(p=this.h)&&(this.g&&p.charAt(0)!="/"&&a.push("/"),a.push(vi(p,p.charAt(0)=="/"?sE:nE,!0))),(p=this.i.toString())&&a.push("?",p),(p=this.m)&&a.push("#",vi(p,iE)),a.join("")},Wn.prototype.resolve=function(a){const f=nn(this);let p=!!a.j;p?gi(f,a.j):p=!!a.o,p?f.o=a.o:p=!!a.g,p?f.g=a.g:p=a.u!=null;var _=a.h;if(p)_i(f,a.u);else if(p=!!a.h){if(_.charAt(0)!="/")if(this.g&&!this.h)_="/"+_;else{var V=f.h.lastIndexOf("/");V!=-1&&(_=f.h.slice(0,V+1)+_)}if(V=_,V==".."||V==".")_="";else if(V.indexOf("./")!=-1||V.indexOf("/.")!=-1){_=V.lastIndexOf("/",0)==0,V=V.split("/");const x=[];for(let J=0;J<V.length;){const ye=V[J++];ye=="."?_&&J==V.length&&x.push(""):ye==".."?((x.length>1||x.length==1&&x[0]!="")&&x.pop(),_&&J==V.length&&x.push("")):(x.push(ye),_=!0)}_=x.join("/")}else _=V}return p?f.h=_:p=a.i.toString()!=="",p?Kl(f,vf(a.i)):p=!!a.m,p&&(f.m=a.m),f};function nn(a){return new Wn(a)}function gi(a,f,p){a.j=p?yi(f,!0):f,a.j&&(a.j=a.j.replace(/:$/,""))}function _i(a,f){if(f){if(f=Number(f),isNaN(f)||f<0)throw Error("Bad port number "+f);a.u=f}else a.u=null}function Kl(a,f,p){f instanceof Ei?(a.i=f,oE(a.i,a.l)):(p||(f=vi(f,rE)),a.i=new Ei(f,a.l))}function Ue(a,f,p){a.i.set(f,p)}function Do(a){return Ue(a,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),a}function yi(a,f){return a?f?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function vi(a,f,p){return typeof a=="string"?(a=encodeURI(a).replace(f,tE),p&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function tE(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var pf=/[#\/\?@]/g,nE=/[#\?:]/g,sE=/[#\?]/g,rE=/[#\?@]/g,iE=/#/g;function Ei(a,f){this.h=this.g=null,this.i=a||null,this.j=!!f}function Cs(a){a.g||(a.g=new Map,a.h=0,a.i&&eE(a.i,function(f,p){a.add(decodeURIComponent(f.replace(/\+/g," ")),p)}))}t=Ei.prototype,t.add=function(a,f){Cs(this),this.i=null,a=ur(this,a);let p=this.g.get(a);return p||this.g.set(a,p=[]),p.push(f),this.h+=1,this};function mf(a,f){Cs(a),f=ur(a,f),a.g.has(f)&&(a.i=null,a.h-=a.g.get(f).length,a.g.delete(f))}function gf(a,f){return Cs(a),f=ur(a,f),a.g.has(f)}t.forEach=function(a,f){Cs(this),this.g.forEach(function(p,_){p.forEach(function(V){a.call(f,V,_,this)},this)},this)};function _f(a,f){Cs(a);let p=[];if(typeof f=="string")gf(a,f)&&(p=p.concat(a.g.get(ur(a,f))));else for(a=Array.from(a.g.values()),f=0;f<a.length;f++)p=p.concat(a[f]);return p}t.set=function(a,f){return Cs(this),this.i=null,a=ur(this,a),gf(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[f]),this.h+=1,this},t.get=function(a,f){return a?(a=_f(this,a),a.length>0?String(a[0]):f):f};function yf(a,f,p){mf(a,f),p.length>0&&(a.i=null,a.g.set(ur(a,f),g(p)),a.h+=p.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const a=[],f=Array.from(this.g.keys());for(let _=0;_<f.length;_++){var p=f[_];const V=pi(p);p=_f(this,p);for(let x=0;x<p.length;x++){let J=V;p[x]!==""&&(J+="="+pi(p[x])),a.push(J)}}return this.i=a.join("&")};function vf(a){const f=new Ei;return f.i=a.i,a.g&&(f.g=new Map(a.g),f.h=a.h),f}function ur(a,f){return f=String(f),a.j&&(f=f.toLowerCase()),f}function oE(a,f){f&&!a.j&&(Cs(a),a.i=null,a.g.forEach(function(p,_){const V=_.toLowerCase();_!=V&&(mf(this,_),yf(this,V,p))},a)),a.j=f}function aE(a,f){const p=new di;if(o.Image){const _=new Image;_.onload=h(Gn,p,"TestLoadImage: loaded",!0,f,_),_.onerror=h(Gn,p,"TestLoadImage: error",!1,f,_),_.onabort=h(Gn,p,"TestLoadImage: abort",!1,f,_),_.ontimeout=h(Gn,p,"TestLoadImage: timeout",!1,f,_),o.setTimeout(function(){_.ontimeout&&_.ontimeout()},1e4),_.src=a}else f(!1)}function lE(a,f){const p=new di,_=new AbortController,V=setTimeout(()=>{_.abort(),Gn(p,"TestPingServer: timeout",!1,f)},1e4);fetch(a,{signal:_.signal}).then(x=>{clearTimeout(V),x.ok?Gn(p,"TestPingServer: ok",!0,f):Gn(p,"TestPingServer: server error",!1,f)}).catch(()=>{clearTimeout(V),Gn(p,"TestPingServer: error",!1,f)})}function Gn(a,f,p,_,V){try{V&&(V.onload=null,V.onerror=null,V.onabort=null,V.ontimeout=null),_(p)}catch{}}function cE(){this.g=new yt}function Ql(a){this.i=a.Sb||null,this.h=a.ab||!1}d(Ql,tt),Ql.prototype.g=function(){return new Oo(this.i,this.h)};function Oo(a,f){K.call(this),this.H=a,this.o=f,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}d(Oo,K),t=Oo.prototype,t.open=function(a,f){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=a,this.D=f,this.readyState=1,wi(this)},t.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const f={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};a&&(f.body=a),(this.H||o).fetch(new Request(this.D,f)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Ti(this)),this.readyState=0},t.Pa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,wi(this)),this.g&&(this.readyState=3,wi(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Ef(this)}else a.text().then(this.Oa.bind(this),this.ga.bind(this))};function Ef(a){a.j.read().then(a.Ma.bind(a)).catch(a.ga.bind(a))}t.Ma=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var f=a.value?a.value:new Uint8Array(0);(f=this.B.decode(f,{stream:!a.done}))&&(this.response=this.responseText+=f)}a.done?Ti(this):wi(this),this.readyState==3&&Ef(this)}},t.Oa=function(a){this.g&&(this.response=this.responseText=a,Ti(this))},t.Na=function(a){this.g&&(this.response=a,Ti(this))},t.ga=function(){this.g&&Ti(this)};function Ti(a){a.readyState=4,a.l=null,a.j=null,a.B=null,wi(a)}t.setRequestHeader=function(a,f){this.A.append(a,f)},t.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const a=[],f=this.h.entries();for(var p=f.next();!p.done;)p=p.value,a.push(p[0]+": "+p[1]),p=f.next();return a.join(`\r
`)};function wi(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(Oo.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function Tf(a){let f="";return De(a,function(p,_){f+=_,f+=":",f+=p,f+=`\r
`}),f}function Jl(a,f,p){e:{for(_ in p){var _=!1;break e}_=!0}_||(p=Tf(p),typeof a=="string"?p!=null&&pi(p):Ue(a,f,p))}function Ge(a){K.call(this),this.headers=new Map,this.L=a||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}d(Ge,K);var uE=/^https?$/i,hE=["POST","PUT"];t=Ge.prototype,t.Fa=function(a){this.H=a},t.ea=function(a,f,p,_){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);f=f?f.toUpperCase():"GET",this.D=a,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():tf.g(),this.g.onreadystatechange=m(u(this.Ca,this));try{this.B=!0,this.g.open(f,String(a),!0),this.B=!1}catch(x){wf(this,x);return}if(a=p||"",p=new Map(this.headers),_)if(Object.getPrototypeOf(_)===Object.prototype)for(var V in _)p.set(V,_[V]);else if(typeof _.keys=="function"&&typeof _.get=="function")for(const x of _.keys())p.set(x,_.get(x));else throw Error("Unknown input type for opt_headers: "+String(_));_=Array.from(p.keys()).find(x=>x.toLowerCase()=="content-type"),V=o.FormData&&a instanceof o.FormData,!(Array.prototype.indexOf.call(hE,f,void 0)>=0)||_||V||p.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[x,J]of p)this.g.setRequestHeader(x,J);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(a),this.v=!1}catch(x){wf(this,x)}};function wf(a,f){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=f,a.o=5,bf(a),Vo(a)}function bf(a){a.A||(a.A=!0,G(a,"complete"),G(a,"error"))}t.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=a||7,G(this,"complete"),G(this,"abort"),Vo(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Vo(this,!0)),Ge.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?If(this):this.Xa())},t.Xa=function(){If(this)};function If(a){if(a.h&&typeof i<"u"){if(a.v&&zn(a)==4)setTimeout(a.Ca.bind(a),0);else if(G(a,"readystatechange"),zn(a)==4){a.h=!1;try{const x=a.ca();e:switch(x){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var f=!0;break e;default:f=!1}var p;if(!(p=f)){var _;if(_=x===0){let J=String(a.D).match(df)[1]||null;!J&&o.self&&o.self.location&&(J=o.self.location.protocol.slice(0,-1)),_=!uE.test(J?J.toLowerCase():"")}p=_}if(p)G(a,"complete"),G(a,"success");else{a.o=6;try{var V=zn(a)>2?a.g.statusText:""}catch{V=""}a.l=V+" ["+a.ca()+"]",bf(a)}}finally{Vo(a)}}}}function Vo(a,f){if(a.g){a.m&&(clearTimeout(a.m),a.m=null);const p=a.g;a.g=null,f||G(a,"ready");try{p.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function zn(a){return a.g?a.g.readyState:0}t.ca=function(){try{return zn(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(a){if(this.g){var f=this.g.responseText;return a&&f.indexOf(a)==0&&(f=f.substring(a.length)),Se(f)}};function Af(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.F){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function fE(a){const f={};a=(a.g&&zn(a)>=2&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let _=0;_<a.length;_++){if(w(a[_]))continue;var p=Jv(a[_]);const V=p[0];if(p=p[1],typeof p!="string")continue;p=p.trim();const x=f[V]||[];f[V]=x,x.push(p)}ir(f,function(_){return _.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function bi(a,f,p){return p&&p.internalChannelParams&&p.internalChannelParams[a]||f}function Rf(a){this.za=0,this.i=[],this.j=new di,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=bi("failFast",!1,a),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=bi("baseRetryDelayMs",5e3,a),this.Za=bi("retryDelaySeedMs",1e4,a),this.Ta=bi("forwardChannelMaxRetries",2,a),this.va=bi("forwardChannelRequestTimeoutMs",2e4,a),this.ma=a&&a.xmlHttpFactory||void 0,this.Ua=a&&a.Rb||void 0,this.Aa=a&&a.useFetchStreams||!1,this.O=void 0,this.L=a&&a.supportsCrossDomainXhr||!1,this.M="",this.h=new lf(a&&a.concurrentRequestLimit),this.Ba=new cE,this.S=a&&a.fastHandshake||!1,this.R=a&&a.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=a&&a.Pb||!1,a&&a.ua&&this.j.ua(),a&&a.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&a&&a.detectBufferingProxy||!1,this.ia=void 0,a&&a.longPollingTimeout&&a.longPollingTimeout>0&&(this.ia=a.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=Rf.prototype,t.ka=8,t.I=1,t.connect=function(a,f,p,_){At(0),this.W=a,this.H=f||{},p&&_!==void 0&&(this.H.OSID=p,this.H.OAID=_),this.F=this.X,this.J=xf(this,null,this.W),Mo(this)};function Yl(a){if(Sf(a),a.I==3){var f=a.V++,p=nn(a.J);if(Ue(p,"SID",a.M),Ue(p,"RID",f),Ue(p,"TYPE","terminate"),Ii(a,p),f=new qn(a,a.j,f),f.M=2,f.A=Do(nn(p)),p=!1,o.navigator&&o.navigator.sendBeacon)try{p=o.navigator.sendBeacon(f.A.toString(),"")}catch{}!p&&o.Image&&(new Image().src=f.A,p=!0),p||(f.g=Mf(f.j,null),f.g.ea(f.A)),f.F=Date.now(),No(f)}Vf(a)}function xo(a){a.g&&(Zl(a),a.g.cancel(),a.g=null)}function Sf(a){xo(a),a.v&&(o.clearTimeout(a.v),a.v=null),Lo(a),a.h.cancel(),a.m&&(typeof a.m=="number"&&o.clearTimeout(a.m),a.m=null)}function Mo(a){if(!cf(a.h)&&!a.m){a.m=!0;var f=a.Ea;L||T(),z||(L(),z=!0),C.add(f,a),a.D=0}}function dE(a,f){return uf(a.h)>=a.h.j-(a.m?1:0)?!1:a.m?(a.i=f.G.concat(a.i),!0):a.I==1||a.I==2||a.D>=(a.Sa?0:a.Ta)?!1:(a.m=fi(u(a.Ea,a,f),Of(a,a.D)),a.D++,!0)}t.Ea=function(a){if(this.m)if(this.m=null,this.I==1){if(!a){this.V=Math.floor(Math.random()*1e5),a=this.V++;const V=new qn(this,this.j,a);let x=this.o;if(this.U&&(x?(x=tn(x),oi(x,this.U)):x=this.U),this.u!==null||this.R||(V.J=x,x=null),this.S)e:{for(var f=0,p=0;p<this.i.length;p++){t:{var _=this.i[p];if("__data__"in _.map&&(_=_.map.__data__,typeof _=="string")){_=_.length;break t}_=void 0}if(_===void 0)break;if(f+=_,f>4096){f=p;break e}if(f===4096||p===this.i.length-1){f=p+1;break e}}f=1e3}else f=1e3;f=Pf(this,V,f),p=nn(this.J),Ue(p,"RID",a),Ue(p,"CVER",22),this.G&&Ue(p,"X-HTTP-Session-Id",this.G),Ii(this,p),x&&(this.R?f="headers="+pi(Tf(x))+"&"+f:this.u&&Jl(p,this.u,x)),zl(this.h,V),this.Ra&&Ue(p,"TYPE","init"),this.S?(Ue(p,"$req",f),Ue(p,"SID","null"),V.U=!0,Hl(V,p,null)):Hl(V,p,f),this.I=2}}else this.I==3&&(a?Cf(this,a):this.i.length==0||cf(this.h)||Cf(this))};function Cf(a,f){var p;f?p=f.l:p=a.V++;const _=nn(a.J);Ue(_,"SID",a.M),Ue(_,"RID",p),Ue(_,"AID",a.K),Ii(a,_),a.u&&a.o&&Jl(_,a.u,a.o),p=new qn(a,a.j,p,a.D+1),a.u===null&&(p.J=a.o),f&&(a.i=f.G.concat(a.i)),f=Pf(a,p,1e3),p.H=Math.round(a.va*.5)+Math.round(a.va*.5*Math.random()),zl(a.h,p),Hl(p,_,f)}function Ii(a,f){a.H&&De(a.H,function(p,_){Ue(f,_,p)}),a.l&&De({},function(p,_){Ue(f,_,p)})}function Pf(a,f,p){p=Math.min(a.i.length,p);const _=a.l?u(a.l.Ka,a.l,a):null;e:{var V=a.i;let ye=-1;for(;;){const st=["count="+p];ye==-1?p>0?(ye=V[0].g,st.push("ofs="+ye)):ye=0:st.push("ofs="+ye);let Oe=!0;for(let lt=0;lt<p;lt++){var x=V[lt].g;const sn=V[lt].map;if(x-=ye,x<0)ye=Math.max(0,V[lt].g-100),Oe=!1;else try{x="req"+x+"_"||"";try{var J=sn instanceof Map?sn:Object.entries(sn);for(const[ks,Kn]of J){let Qn=Kn;l(Kn)&&(Qn=Ce(Kn)),st.push(x+ks+"="+encodeURIComponent(Qn))}}catch(ks){throw st.push(x+"type="+encodeURIComponent("_badmap")),ks}}catch{_&&_(sn)}}if(Oe){J=st.join("&");break e}}J=void 0}return a=a.i.splice(0,p),f.G=a,J}function kf(a){if(!a.g&&!a.v){a.Y=1;var f=a.Da;L||T(),z||(L(),z=!0),C.add(f,a),a.A=0}}function Xl(a){return a.g||a.v||a.A>=3?!1:(a.Y++,a.v=fi(u(a.Da,a),Of(a,a.A)),a.A++,!0)}t.Da=function(){if(this.v=null,Nf(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var a=4*this.T;this.j.info("BP detection timer enabled: "+a),this.B=fi(u(this.Wa,this),a)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,At(10),xo(this),Nf(this))};function Zl(a){a.B!=null&&(o.clearTimeout(a.B),a.B=null)}function Nf(a){a.g=new qn(a,a.j,"rpc",a.Y),a.u===null&&(a.g.J=a.o),a.g.P=0;var f=nn(a.na);Ue(f,"RID","rpc"),Ue(f,"SID",a.M),Ue(f,"AID",a.K),Ue(f,"CI",a.F?"0":"1"),!a.F&&a.ia&&Ue(f,"TO",a.ia),Ue(f,"TYPE","xmlhttp"),Ii(a,f),a.u&&a.o&&Jl(f,a.u,a.o),a.O&&(a.g.H=a.O);var p=a.g;a=a.ba,p.M=1,p.A=Do(nn(f)),p.u=null,p.R=!0,rf(p,a)}t.Va=function(){this.C!=null&&(this.C=null,xo(this),Xl(this),At(19))};function Lo(a){a.C!=null&&(o.clearTimeout(a.C),a.C=null)}function Df(a,f){var p=null;if(a.g==f){Lo(a),Zl(a),a.g=null;var _=2}else if(Gl(a.h,f))p=f.G,hf(a.h,f),_=1;else return;if(a.I!=0){if(f.o)if(_==1){p=f.u?f.u.length:0,f=Date.now()-f.F;var V=a.D;_=Rs(),G(_,new Zh(_,p)),Mo(a)}else kf(a);else if(V=f.m,V==3||V==0&&f.X>0||!(_==1&&dE(a,f)||_==2&&Xl(a)))switch(p&&p.length>0&&(f=a.h,f.i=f.i.concat(p)),V){case 1:Ps(a,5);break;case 4:Ps(a,10);break;case 3:Ps(a,6);break;default:Ps(a,2)}}}function Of(a,f){let p=a.Qa+Math.floor(Math.random()*a.Za);return a.isActive()||(p*=2),p*f}function Ps(a,f){if(a.j.info("Error code "+f),f==2){var p=u(a.bb,a),_=a.Ua;const V=!_;_=new Wn(_||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||gi(_,"https"),Do(_),V?aE(_.toString(),p):lE(_.toString(),p)}else At(2);a.I=0,a.l&&a.l.pa(f),Vf(a),Sf(a)}t.bb=function(a){a?(this.j.info("Successfully pinged google.com"),At(2)):(this.j.info("Failed to ping google.com"),At(1))};function Vf(a){if(a.I=0,a.ja=[],a.l){const f=ff(a.h);(f.length!=0||a.i.length!=0)&&(v(a.ja,f),v(a.ja,a.i),a.h.i.length=0,g(a.i),a.i.length=0),a.l.oa()}}function xf(a,f,p){var _=p instanceof Wn?nn(p):new Wn(p);if(_.g!="")f&&(_.g=f+"."+_.g),_i(_,_.u);else{var V=o.location;_=V.protocol,f=f?f+"."+V.hostname:V.hostname,V=+V.port;const x=new Wn(null);_&&gi(x,_),f&&(x.g=f),V&&_i(x,V),p&&(x.h=p),_=x}return p=a.G,f=a.wa,p&&f&&Ue(_,p,f),Ue(_,"VER",a.ka),Ii(a,_),_}function Mf(a,f,p){if(f&&!a.L)throw Error("Can't create secondary domain capable XhrIo object.");return f=a.Aa&&!a.ma?new Ge(new Ql({ab:p})):new Ge(a.ma),f.Fa(a.L),f}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Lf(){}t=Lf.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function Fo(){}Fo.prototype.g=function(a,f){return new xt(a,f)};function xt(a,f){K.call(this),this.g=new Rf(f),this.l=a,this.h=f&&f.messageUrlParams||null,a=f&&f.messageHeaders||null,f&&f.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=f&&f.initMessageHeaders||null,f&&f.messageContentType&&(a?a["X-WebChannel-Content-Type"]=f.messageContentType:a={"X-WebChannel-Content-Type":f.messageContentType}),f&&f.sa&&(a?a["X-WebChannel-Client-Profile"]=f.sa:a={"X-WebChannel-Client-Profile":f.sa}),this.g.U=a,(a=f&&f.Qb)&&!w(a)&&(this.g.u=a),this.A=f&&f.supportsCrossDomainXhr||!1,this.v=f&&f.sendRawJson||!1,(f=f&&f.httpSessionIdParam)&&!w(f)&&(this.g.G=f,a=this.h,a!==null&&f in a&&(a=this.h,f in a&&delete a[f])),this.j=new hr(this)}d(xt,K),xt.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},xt.prototype.close=function(){Yl(this.g)},xt.prototype.o=function(a){var f=this.g;if(typeof a=="string"){var p={};p.__data__=a,a=p}else this.v&&(p={},p.__data__=Ce(a),a=p);f.i.push(new Zv(f.Ya++,a)),f.I==3&&Mo(f)},xt.prototype.N=function(){this.g.l=null,delete this.j,Yl(this.g),delete this.g,xt.Z.N.call(this)};function Ff(a){Tn.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var f=a.__sm__;if(f){e:{for(const p in f){a=p;break e}a=void 0}(this.i=a)&&(a=this.i,f=f!==null&&a in f?f[a]:void 0),this.data=f}else this.data=a}d(Ff,Tn);function Uf(){lr.call(this),this.status=1}d(Uf,lr);function hr(a){this.g=a}d(hr,Lf),hr.prototype.ra=function(){G(this.g,"a")},hr.prototype.qa=function(a){G(this.g,new Ff(a))},hr.prototype.pa=function(a){G(this.g,new Uf)},hr.prototype.oa=function(){G(this.g,"b")},Fo.prototype.createWebChannel=Fo.prototype.g,xt.prototype.send=xt.prototype.o,xt.prototype.open=xt.prototype.m,xt.prototype.close=xt.prototype.close,yy=function(){return new Fo},_y=function(){return Rs()},gy=Ke,uu={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},ko.NO_ERROR=0,ko.TIMEOUT=8,ko.HTTP_ERROR=6,da=ko,ef.COMPLETE="complete",my=ef,Ct.EventType=nt,nt.OPEN="a",nt.CLOSE="b",nt.ERROR="c",nt.MESSAGE="d",K.prototype.listen=K.prototype.J,Ni=Ct,Ge.prototype.listenOnce=Ge.prototype.K,Ge.prototype.getLastError=Ge.prototype.Ha,Ge.prototype.getLastErrorCode=Ge.prototype.ya,Ge.prototype.getStatus=Ge.prototype.ca,Ge.prototype.getResponseJson=Ge.prototype.La,Ge.prototype.getResponseText=Ge.prototype.la,Ge.prototype.send=Ge.prototype.ea,Ge.prototype.setWithCredentials=Ge.prototype.Fa,py=Ge}).apply(typeof Xo<"u"?Xo:typeof self<"u"?self:typeof window<"u"?window:{});const Ap="@firebase/firestore",Rp="4.9.3";class Tt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Tt.UNAUTHENTICATED=new Tt(null),Tt.GOOGLE_CREDENTIALS=new Tt("google-credentials-uid"),Tt.FIRST_PARTY=new Tt("first-party-uid"),Tt.MOCK_USER=new Tt("mock-user");let ni="12.7.0";const Xs=new uh("@firebase/firestore");function mr(){return Xs.logLevel}function Z(t,...e){if(Xs.logLevel<=Ee.DEBUG){const n=e.map(Th);Xs.debug(`Firestore (${ni}): ${t}`,...n)}}function Mn(t,...e){if(Xs.logLevel<=Ee.ERROR){const n=e.map(Th);Xs.error(`Firestore (${ni}): ${t}`,...n)}}function Zs(t,...e){if(Xs.logLevel<=Ee.WARN){const n=e.map(Th);Xs.warn(`Firestore (${ni}): ${t}`,...n)}}function Th(t){if(typeof t=="string")return t;try{return(function(n){return JSON.stringify(n)})(t)}catch{return t}}function fe(t,e,n){let s="Unexpected state";typeof e=="string"?s=e:n=e,vy(t,s,n)}function vy(t,e,n){let s=`FIRESTORE (${ni}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{s+=" CONTEXT: "+JSON.stringify(n)}catch{s+=" CONTEXT: "+n}throw Mn(s),new Error(s)}function ke(t,e,n,s){let r="Unexpected state";typeof n=="string"?r=n:s=n,t||vy(e,r,s)}function ge(t,e){return t}const B={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class re extends $n{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class ds{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}class Ey{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Ty{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(Tt.UNAUTHENTICATED)))}shutdown(){}}class ZS{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class eC{constructor(e){this.t=e,this.currentUser=Tt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){ke(this.o===void 0,42304);let s=this.i;const r=c=>this.i!==s?(s=this.i,n(c)):Promise.resolve();let i=new ds;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new ds,e.enqueueRetryable((()=>r(this.currentUser)))};const o=()=>{const c=i;e.enqueueRetryable((async()=>{await c.promise,await r(this.currentUser)}))},l=c=>{Z("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit((c=>l(c))),setTimeout((()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?l(c):(Z("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new ds)}}),0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((s=>this.i!==e?(Z("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(ke(typeof s.accessToken=="string",31837,{l:s}),new Ey(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ke(e===null||typeof e=="string",2055,{h:e}),new Tt(e)}}class tC{constructor(e,n,s){this.P=e,this.T=n,this.I=s,this.type="FirstParty",this.user=Tt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class nC{constructor(e,n,s){this.P=e,this.T=n,this.I=s}getToken(){return Promise.resolve(new tC(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(Tt.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Sp{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class sC{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,qt(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){ke(this.o===void 0,3512);const s=i=>{i.error!=null&&Z("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.m;return this.m=i.token,Z("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable((()=>s(i)))};const r=i=>{Z("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((i=>r(i))),setTimeout((()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?r(i):Z("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new Sp(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(ke(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new Sp(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function rC(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let s=0;s<t;s++)n[s]=Math.floor(256*Math.random());return n}class wl{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const r=rC(40);for(let i=0;i<r.length;++i)s.length<20&&r[i]<n&&(s+=e.charAt(r[i]%62))}return s}}function Te(t,e){return t<e?-1:t>e?1:0}function hu(t,e){const n=Math.min(t.length,e.length);for(let s=0;s<n;s++){const r=t.charAt(s),i=e.charAt(s);if(r!==i)return Sc(r)===Sc(i)?Te(r,i):Sc(r)?1:-1}return Te(t.length,e.length)}const iC=55296,oC=57343;function Sc(t){const e=t.charCodeAt(0);return e>=iC&&e<=oC}function Hr(t,e,n){return t.length===e.length&&t.every(((s,r)=>n(s,e[r])))}const Cp="__name__";class an{constructor(e,n,s){n===void 0?n=0:n>e.length&&fe(637,{offset:n,range:e.length}),s===void 0?s=e.length-n:s>e.length-n&&fe(1746,{length:s,range:e.length-n}),this.segments=e,this.offset=n,this.len=s}get length(){return this.len}isEqual(e){return an.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof an?e.forEach((s=>{n.push(s)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,s=this.limit();n<s;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const s=Math.min(e.length,n.length);for(let r=0;r<s;r++){const i=an.compareSegments(e.get(r),n.get(r));if(i!==0)return i}return Te(e.length,n.length)}static compareSegments(e,n){const s=an.isNumericId(e),r=an.isNumericId(n);return s&&!r?-1:!s&&r?1:s&&r?an.extractNumericId(e).compare(an.extractNumericId(n)):hu(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return fs.fromString(e.substring(4,e.length-2))}}class He extends an{construct(e,n,s){return new He(e,n,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const s of e){if(s.indexOf("//")>=0)throw new re(B.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);n.push(...s.split("/").filter((r=>r.length>0)))}return new He(n)}static emptyPath(){return new He([])}}const aC=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ut extends an{construct(e,n,s){return new ut(e,n,s)}static isValidIdentifier(e){return aC.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ut.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Cp}static keyField(){return new ut([Cp])}static fromServerFormat(e){const n=[];let s="",r=0;const i=()=>{if(s.length===0)throw new re(B.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(s),s=""};let o=!1;for(;r<e.length;){const l=e[r];if(l==="\\"){if(r+1===e.length)throw new re(B.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[r+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new re(B.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=c,r+=2}else l==="`"?(o=!o,r++):l!=="."||o?(s+=l,r++):(i(),r++)}if(i(),o)throw new re(B.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ut(n)}static emptyPath(){return new ut([])}}class oe{constructor(e){this.path=e}static fromPath(e){return new oe(He.fromString(e))}static fromName(e){return new oe(He.fromString(e).popFirst(5))}static empty(){return new oe(He.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&He.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return He.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new oe(new He(e.slice()))}}function lC(t,e,n){if(!n)throw new re(B.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function wy(t,e,n,s){if(e===!0&&s===!0)throw new re(B.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Pp(t){if(!oe.isDocumentKey(t))throw new re(B.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function by(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function wh(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=(function(s){return s.constructor?s.constructor.name:null})(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":fe(12329,{type:typeof t})}function gs(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new re(B.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=wh(t);throw new re(B.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function Xe(t,e){const n={typeString:t};return e&&(n.value=e),n}function bo(t,e){if(!by(t))throw new re(B.INVALID_ARGUMENT,"JSON must be an object");let n;for(const s in e)if(e[s]){const r=e[s].typeString,i="value"in e[s]?{value:e[s].value}:void 0;if(!(s in t)){n=`JSON missing required field: '${s}'`;break}const o=t[s];if(r&&typeof o!==r){n=`JSON field '${s}' must be a ${r}.`;break}if(i!==void 0&&o!==i.value){n=`Expected '${s}' field to equal '${i.value}'`;break}}if(n)throw new re(B.INVALID_ARGUMENT,n);return!0}const kp=-62135596800,Np=1e6;class Le{static now(){return Le.fromMillis(Date.now())}static fromDate(e){return Le.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),s=Math.floor((e-1e3*n)*Np);return new Le(n,s)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new re(B.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new re(B.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<kp)throw new re(B.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new re(B.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Np}_compareTo(e){return this.seconds===e.seconds?Te(this.nanoseconds,e.nanoseconds):Te(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Le._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(bo(e,Le._jsonSchema))return new Le(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-kp;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Le._jsonSchemaVersion="firestore/timestamp/1.0",Le._jsonSchema={type:Xe("string",Le._jsonSchemaVersion),seconds:Xe("number"),nanoseconds:Xe("number")};class me{static fromTimestamp(e){return new me(e)}static min(){return new me(new Le(0,0))}static max(){return new me(new Le(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const ro=-1;function cC(t,e){const n=t.toTimestamp().seconds,s=t.toTimestamp().nanoseconds+1,r=me.fromTimestamp(s===1e9?new Le(n+1,0):new Le(n,s));return new _s(r,oe.empty(),e)}function uC(t){return new _s(t.readTime,t.key,ro)}class _s{constructor(e,n,s){this.readTime=e,this.documentKey=n,this.largestBatchId=s}static min(){return new _s(me.min(),oe.empty(),ro)}static max(){return new _s(me.max(),oe.empty(),ro)}}function hC(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=oe.comparator(t.documentKey,e.documentKey),n!==0?n:Te(t.largestBatchId,e.largestBatchId))}const fC="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class dC{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function si(t){if(t.code!==B.FAILED_PRECONDITION||t.message!==fC)throw t;Z("LocalStore","Unexpectedly lost primary lease")}class U{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&fe(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new U(((s,r)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(s,r)},this.catchCallback=i=>{this.wrapFailure(n,i).next(s,r)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof U?n:U.resolve(n)}catch(n){return U.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):U.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):U.reject(n)}static resolve(e){return new U(((n,s)=>{n(e)}))}static reject(e){return new U(((n,s)=>{s(e)}))}static waitFor(e){return new U(((n,s)=>{let r=0,i=0,o=!1;e.forEach((l=>{++r,l.next((()=>{++i,o&&i===r&&n()}),(c=>s(c)))})),o=!0,i===r&&n()}))}static or(e){let n=U.resolve(!1);for(const s of e)n=n.next((r=>r?U.resolve(r):s()));return n}static forEach(e,n){const s=[];return e.forEach(((r,i)=>{s.push(n.call(this,r,i))})),this.waitFor(s)}static mapArray(e,n){return new U(((s,r)=>{const i=e.length,o=new Array(i);let l=0;for(let c=0;c<i;c++){const u=c;n(e[u]).next((h=>{o[u]=h,++l,l===i&&s(o)}),(h=>r(h)))}}))}static doWhile(e,n){return new U(((s,r)=>{const i=()=>{e()===!0?n().next((()=>{i()}),r):s()};i()}))}}function pC(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function ri(t){return t.name==="IndexedDbTransactionError"}class bl{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>n.writeSequenceNumber(s))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}bl.ce=-1;const bh=-1;function Il(t){return t==null}function Ba(t){return t===0&&1/t==-1/0}function mC(t){return typeof t=="number"&&Number.isInteger(t)&&!Ba(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}const Iy="";function gC(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=Dp(e)),e=_C(t.get(n),e);return Dp(e)}function _C(t,e){let n=e;const s=t.length;for(let r=0;r<s;r++){const i=t.charAt(r);switch(i){case"\0":n+="";break;case Iy:n+="";break;default:n+=i}}return n}function Dp(t){return t+Iy+""}function Op(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function bs(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Ay(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}class We{constructor(e,n){this.comparator=e,this.root=n||pt.EMPTY}insert(e,n){return new We(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,pt.BLACK,null,null))}remove(e){return new We(this.comparator,this.root.remove(e,this.comparator).copy(null,null,pt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return n.value;s<0?n=n.left:s>0&&(n=n.right)}return null}indexOf(e){let n=0,s=this.root;for(;!s.isEmpty();){const r=this.comparator(e,s.key);if(r===0)return n+s.left.size;r<0?s=s.left:(n+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,s)=>(e(n,s),!1)))}toString(){const e=[];return this.inorderTraversal(((n,s)=>(e.push(`${n}:${s}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Zo(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Zo(this.root,e,this.comparator,!1)}getReverseIterator(){return new Zo(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Zo(this.root,e,this.comparator,!0)}}class Zo{constructor(e,n,s,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?s(e.key,n):1,n&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class pt{constructor(e,n,s,r,i){this.key=e,this.value=n,this.color=s??pt.RED,this.left=r??pt.EMPTY,this.right=i??pt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,s,r,i){return new pt(e??this.key,n??this.value,s??this.color,r??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,s){let r=this;const i=s(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,n,s),null):i===0?r.copy(null,n,null,null,null):r.copy(null,null,null,null,r.right.insert(e,n,s)),r.fixUp()}removeMin(){if(this.left.isEmpty())return pt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let s,r=this;if(n(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),n(e,r.key)===0){if(r.right.isEmpty())return pt.EMPTY;s=r.right.min(),r=r.copy(s.key,s.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,pt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,pt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw fe(43730,{key:this.key,value:this.value});if(this.right.isRed())throw fe(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw fe(27949);return e+(this.isRed()?0:1)}}pt.EMPTY=null,pt.RED=!0,pt.BLACK=!1;pt.EMPTY=new class{constructor(){this.size=0}get key(){throw fe(57766)}get value(){throw fe(16141)}get color(){throw fe(16727)}get left(){throw fe(29726)}get right(){throw fe(36894)}copy(e,n,s,r,i){return this}insert(e,n,s){return new pt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class ot{constructor(e){this.comparator=e,this.data=new We(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,s)=>(e(n),!1)))}forEachInRange(e,n){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const r=s.getNext();if(this.comparator(r.key,e[1])>=0)return;n(r.key)}}forEachWhile(e,n){let s;for(s=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Vp(this.data.getIterator())}getIteratorFrom(e){return new Vp(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((s=>{n=n.add(s)})),n}isEqual(e){if(!(e instanceof ot)||this.size!==e.size)return!1;const n=this.data.getIterator(),s=e.data.getIterator();for(;n.hasNext();){const r=n.getNext().key,i=s.getNext().key;if(this.comparator(r,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new ot(this.comparator);return n.data=e,n}}class Vp{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class Ft{constructor(e){this.fields=e,e.sort(ut.comparator)}static empty(){return new Ft([])}unionWith(e){let n=new ot(ut.comparator);for(const s of this.fields)n=n.add(s);for(const s of e)n=n.add(s);return new Ft(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Hr(this.fields,e.fields,((n,s)=>n.isEqual(s)))}}class Ry extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class dt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(r){try{return atob(r)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new Ry("Invalid base64 string: "+i):i}})(e);return new dt(n)}static fromUint8Array(e){const n=(function(r){let i="";for(let o=0;o<r.length;++o)i+=String.fromCharCode(r[o]);return i})(e);return new dt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const s=new Uint8Array(n.length);for(let r=0;r<n.length;r++)s[r]=n.charCodeAt(r);return s})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Te(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}dt.EMPTY_BYTE_STRING=new dt("");const yC=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ys(t){if(ke(!!t,39018),typeof t=="string"){let e=0;const n=yC.exec(t);if(ke(!!n,46558,{timestamp:t}),n[1]){let r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}const s=new Date(t);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:Qe(t.seconds),nanos:Qe(t.nanos)}}function Qe(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function vs(t){return typeof t=="string"?dt.fromBase64String(t):dt.fromUint8Array(t)}const Sy="server_timestamp",Cy="__type__",Py="__previous_value__",ky="__local_write_time__";function Ih(t){return(t?.mapValue?.fields||{})[Cy]?.stringValue===Sy}function Al(t){const e=t.mapValue.fields[Py];return Ih(e)?Al(e):e}function io(t){const e=ys(t.mapValue.fields[ky].timestampValue);return new Le(e.seconds,e.nanos)}class vC{constructor(e,n,s,r,i,o,l,c,u,h){this.databaseId=e,this.appId=n,this.persistenceKey=s,this.host=r,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=l,this.longPollingOptions=c,this.useFetchStreams=u,this.isUsingEmulator=h}}const ja="(default)";class qr{constructor(e,n){this.projectId=e,this.database=n||ja}static empty(){return new qr("","")}get isDefaultDatabase(){return this.database===ja}isEqual(e){return e instanceof qr&&e.projectId===this.projectId&&e.database===this.database}}const Ny="__type__",EC="__max__",ea={mapValue:{}},Dy="__vector__",Ha="value";function Es(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Ih(t)?4:wC(t)?9007199254740991:TC(t)?10:11:fe(28295,{value:t})}function _n(t,e){if(t===e)return!0;const n=Es(t);if(n!==Es(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return io(t).isEqual(io(e));case 3:return(function(r,i){if(typeof r.timestampValue=="string"&&typeof i.timestampValue=="string"&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const o=ys(r.timestampValue),l=ys(i.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos})(t,e);case 5:return t.stringValue===e.stringValue;case 6:return(function(r,i){return vs(r.bytesValue).isEqual(vs(i.bytesValue))})(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return(function(r,i){return Qe(r.geoPointValue.latitude)===Qe(i.geoPointValue.latitude)&&Qe(r.geoPointValue.longitude)===Qe(i.geoPointValue.longitude)})(t,e);case 2:return(function(r,i){if("integerValue"in r&&"integerValue"in i)return Qe(r.integerValue)===Qe(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const o=Qe(r.doubleValue),l=Qe(i.doubleValue);return o===l?Ba(o)===Ba(l):isNaN(o)&&isNaN(l)}return!1})(t,e);case 9:return Hr(t.arrayValue.values||[],e.arrayValue.values||[],_n);case 10:case 11:return(function(r,i){const o=r.mapValue.fields||{},l=i.mapValue.fields||{};if(Op(o)!==Op(l))return!1;for(const c in o)if(o.hasOwnProperty(c)&&(l[c]===void 0||!_n(o[c],l[c])))return!1;return!0})(t,e);default:return fe(52216,{left:t})}}function oo(t,e){return(t.values||[]).find((n=>_n(n,e)))!==void 0}function Wr(t,e){if(t===e)return 0;const n=Es(t),s=Es(e);if(n!==s)return Te(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return Te(t.booleanValue,e.booleanValue);case 2:return(function(i,o){const l=Qe(i.integerValue||i.doubleValue),c=Qe(o.integerValue||o.doubleValue);return l<c?-1:l>c?1:l===c?0:isNaN(l)?isNaN(c)?0:-1:1})(t,e);case 3:return xp(t.timestampValue,e.timestampValue);case 4:return xp(io(t),io(e));case 5:return hu(t.stringValue,e.stringValue);case 6:return(function(i,o){const l=vs(i),c=vs(o);return l.compareTo(c)})(t.bytesValue,e.bytesValue);case 7:return(function(i,o){const l=i.split("/"),c=o.split("/");for(let u=0;u<l.length&&u<c.length;u++){const h=Te(l[u],c[u]);if(h!==0)return h}return Te(l.length,c.length)})(t.referenceValue,e.referenceValue);case 8:return(function(i,o){const l=Te(Qe(i.latitude),Qe(o.latitude));return l!==0?l:Te(Qe(i.longitude),Qe(o.longitude))})(t.geoPointValue,e.geoPointValue);case 9:return Mp(t.arrayValue,e.arrayValue);case 10:return(function(i,o){const l=i.fields||{},c=o.fields||{},u=l[Ha]?.arrayValue,h=c[Ha]?.arrayValue,d=Te(u?.values?.length||0,h?.values?.length||0);return d!==0?d:Mp(u,h)})(t.mapValue,e.mapValue);case 11:return(function(i,o){if(i===ea.mapValue&&o===ea.mapValue)return 0;if(i===ea.mapValue)return 1;if(o===ea.mapValue)return-1;const l=i.fields||{},c=Object.keys(l),u=o.fields||{},h=Object.keys(u);c.sort(),h.sort();for(let d=0;d<c.length&&d<h.length;++d){const m=hu(c[d],h[d]);if(m!==0)return m;const g=Wr(l[c[d]],u[h[d]]);if(g!==0)return g}return Te(c.length,h.length)})(t.mapValue,e.mapValue);default:throw fe(23264,{he:n})}}function xp(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Te(t,e);const n=ys(t),s=ys(e),r=Te(n.seconds,s.seconds);return r!==0?r:Te(n.nanos,s.nanos)}function Mp(t,e){const n=t.values||[],s=e.values||[];for(let r=0;r<n.length&&r<s.length;++r){const i=Wr(n[r],s[r]);if(i)return i}return Te(n.length,s.length)}function Gr(t){return fu(t)}function fu(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(function(n){const s=ys(n);return`time(${s.seconds},${s.nanos})`})(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?(function(n){return vs(n).toBase64()})(t.bytesValue):"referenceValue"in t?(function(n){return oe.fromName(n).toString()})(t.referenceValue):"geoPointValue"in t?(function(n){return`geo(${n.latitude},${n.longitude})`})(t.geoPointValue):"arrayValue"in t?(function(n){let s="[",r=!0;for(const i of n.values||[])r?r=!1:s+=",",s+=fu(i);return s+"]"})(t.arrayValue):"mapValue"in t?(function(n){const s=Object.keys(n.fields||{}).sort();let r="{",i=!0;for(const o of s)i?i=!1:r+=",",r+=`${o}:${fu(n.fields[o])}`;return r+"}"})(t.mapValue):fe(61005,{value:t})}function pa(t){switch(Es(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Al(t);return e?16+pa(e):16;case 5:return 2*t.stringValue.length;case 6:return vs(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return(function(s){return(s.values||[]).reduce(((r,i)=>r+pa(i)),0)})(t.arrayValue);case 10:case 11:return(function(s){let r=0;return bs(s.fields,((i,o)=>{r+=i.length+pa(o)})),r})(t.mapValue);default:throw fe(13486,{value:t})}}function du(t){return!!t&&"integerValue"in t}function Ah(t){return!!t&&"arrayValue"in t}function Lp(t){return!!t&&"nullValue"in t}function Fp(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function ma(t){return!!t&&"mapValue"in t}function TC(t){return(t?.mapValue?.fields||{})[Ny]?.stringValue===Dy}function ji(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return bs(t.mapValue.fields,((n,s)=>e.mapValue.fields[n]=ji(s))),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=ji(t.arrayValue.values[n]);return e}return{...t}}function wC(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===EC}class Nt{constructor(e){this.value=e}static empty(){return new Nt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let s=0;s<e.length-1;++s)if(n=(n.mapValue.fields||{})[e.get(s)],!ma(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=ji(n)}setAll(e){let n=ut.emptyPath(),s={},r=[];e.forEach(((o,l)=>{if(!n.isImmediateParentOf(l)){const c=this.getFieldsMap(n);this.applyChanges(c,s,r),s={},r=[],n=l.popLast()}o?s[l.lastSegment()]=ji(o):r.push(l.lastSegment())}));const i=this.getFieldsMap(n);this.applyChanges(i,s,r)}delete(e){const n=this.field(e.popLast());ma(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return _n(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let s=0;s<e.length;++s){let r=n.mapValue.fields[e.get(s)];ma(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},n.mapValue.fields[e.get(s)]=r),n=r}return n.mapValue.fields}applyChanges(e,n,s){bs(n,((r,i)=>e[r]=i));for(const r of s)delete e[r]}clone(){return new Nt(ji(this.value))}}function Oy(t){const e=[];return bs(t.fields,((n,s)=>{const r=new ut([n]);if(ma(s)){const i=Oy(s.mapValue).fields;if(i.length===0)e.push(r);else for(const o of i)e.push(r.child(o))}else e.push(r)})),new Ft(e)}class bt{constructor(e,n,s,r,i,o,l){this.key=e,this.documentType=n,this.version=s,this.readTime=r,this.createTime=i,this.data=o,this.documentState=l}static newInvalidDocument(e){return new bt(e,0,me.min(),me.min(),me.min(),Nt.empty(),0)}static newFoundDocument(e,n,s,r){return new bt(e,1,n,me.min(),s,r,0)}static newNoDocument(e,n){return new bt(e,2,n,me.min(),me.min(),Nt.empty(),0)}static newUnknownDocument(e,n){return new bt(e,3,n,me.min(),me.min(),Nt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(me.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Nt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Nt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=me.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof bt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new bt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class qa{constructor(e,n){this.position=e,this.inclusive=n}}function Up(t,e,n){let s=0;for(let r=0;r<t.position.length;r++){const i=e[r],o=t.position[r];if(i.field.isKeyField()?s=oe.comparator(oe.fromName(o.referenceValue),n.key):s=Wr(o,n.data.field(i.field)),i.dir==="desc"&&(s*=-1),s!==0)break}return s}function $p(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!_n(t.position[n],e.position[n]))return!1;return!0}class Wa{constructor(e,n="asc"){this.field=e,this.dir=n}}function bC(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}class Vy{}class it extends Vy{constructor(e,n,s){super(),this.field=e,this.op=n,this.value=s}static create(e,n,s){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,s):new AC(e,n,s):n==="array-contains"?new CC(e,s):n==="in"?new PC(e,s):n==="not-in"?new kC(e,s):n==="array-contains-any"?new NC(e,s):new it(e,n,s)}static createKeyFieldInFilter(e,n,s){return n==="in"?new RC(e,s):new SC(e,s)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Wr(n,this.value)):n!==null&&Es(this.value)===Es(n)&&this.matchesComparison(Wr(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return fe(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class yn extends Vy{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new yn(e,n)}matches(e){return xy(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function xy(t){return t.op==="and"}function My(t){return IC(t)&&xy(t)}function IC(t){for(const e of t.filters)if(e instanceof yn)return!1;return!0}function pu(t){if(t instanceof it)return t.field.canonicalString()+t.op.toString()+Gr(t.value);if(My(t))return t.filters.map((e=>pu(e))).join(",");{const e=t.filters.map((n=>pu(n))).join(",");return`${t.op}(${e})`}}function Ly(t,e){return t instanceof it?(function(s,r){return r instanceof it&&s.op===r.op&&s.field.isEqual(r.field)&&_n(s.value,r.value)})(t,e):t instanceof yn?(function(s,r){return r instanceof yn&&s.op===r.op&&s.filters.length===r.filters.length?s.filters.reduce(((i,o,l)=>i&&Ly(o,r.filters[l])),!0):!1})(t,e):void fe(19439)}function Fy(t){return t instanceof it?(function(n){return`${n.field.canonicalString()} ${n.op} ${Gr(n.value)}`})(t):t instanceof yn?(function(n){return n.op.toString()+" {"+n.getFilters().map(Fy).join(" ,")+"}"})(t):"Filter"}class AC extends it{constructor(e,n,s){super(e,n,s),this.key=oe.fromName(s.referenceValue)}matches(e){const n=oe.comparator(e.key,this.key);return this.matchesComparison(n)}}class RC extends it{constructor(e,n){super(e,"in",n),this.keys=Uy("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class SC extends it{constructor(e,n){super(e,"not-in",n),this.keys=Uy("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function Uy(t,e){return(e.arrayValue?.values||[]).map((n=>oe.fromName(n.referenceValue)))}class CC extends it{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Ah(n)&&oo(n.arrayValue,this.value)}}class PC extends it{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&oo(this.value.arrayValue,n)}}class kC extends it{constructor(e,n){super(e,"not-in",n)}matches(e){if(oo(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!oo(this.value.arrayValue,n)}}class NC extends it{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Ah(n)||!n.arrayValue.values)&&n.arrayValue.values.some((s=>oo(this.value.arrayValue,s)))}}class DC{constructor(e,n=null,s=[],r=[],i=null,o=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=s,this.filters=r,this.limit=i,this.startAt=o,this.endAt=l,this.Te=null}}function Bp(t,e=null,n=[],s=[],r=null,i=null,o=null){return new DC(t,e,n,s,r,i,o)}function Rh(t){const e=ge(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((s=>pu(s))).join(","),n+="|ob:",n+=e.orderBy.map((s=>(function(i){return i.field.canonicalString()+i.dir})(s))).join(","),Il(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((s=>Gr(s))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((s=>Gr(s))).join(",")),e.Te=n}return e.Te}function Sh(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!bC(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!Ly(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!$p(t.startAt,e.startAt)&&$p(t.endAt,e.endAt)}function mu(t){return oe.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}class Rl{constructor(e,n=null,s=[],r=[],i=null,o="F",l=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=s,this.filters=r,this.limit=i,this.limitType=o,this.startAt=l,this.endAt=c,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function OC(t,e,n,s,r,i,o,l){return new Rl(t,e,n,s,r,i,o,l)}function Ch(t){return new Rl(t)}function jp(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function VC(t){return t.collectionGroup!==null}function Hi(t){const e=ge(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const i of e.explicitOrderBy)e.Ie.push(i),n.add(i.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let l=new ot(ut.comparator);return o.filters.forEach((c=>{c.getFlattenedFilters().forEach((u=>{u.isInequality()&&(l=l.add(u.field))}))})),l})(e).forEach((i=>{n.has(i.canonicalString())||i.isKeyField()||e.Ie.push(new Wa(i,s))})),n.has(ut.keyField().canonicalString())||e.Ie.push(new Wa(ut.keyField(),s))}return e.Ie}function dn(t){const e=ge(t);return e.Ee||(e.Ee=xC(e,Hi(t))),e.Ee}function xC(t,e){if(t.limitType==="F")return Bp(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map((r=>{const i=r.dir==="desc"?"asc":"desc";return new Wa(r.field,i)}));const n=t.endAt?new qa(t.endAt.position,t.endAt.inclusive):null,s=t.startAt?new qa(t.startAt.position,t.startAt.inclusive):null;return Bp(t.path,t.collectionGroup,e,t.filters,t.limit,n,s)}}function gu(t,e,n){return new Rl(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Sl(t,e){return Sh(dn(t),dn(e))&&t.limitType===e.limitType}function $y(t){return`${Rh(dn(t))}|lt:${t.limitType}`}function gr(t){return`Query(target=${(function(n){let s=n.path.canonicalString();return n.collectionGroup!==null&&(s+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(s+=`, filters: [${n.filters.map((r=>Fy(r))).join(", ")}]`),Il(n.limit)||(s+=", limit: "+n.limit),n.orderBy.length>0&&(s+=`, orderBy: [${n.orderBy.map((r=>(function(o){return`${o.field.canonicalString()} (${o.dir})`})(r))).join(", ")}]`),n.startAt&&(s+=", startAt: ",s+=n.startAt.inclusive?"b:":"a:",s+=n.startAt.position.map((r=>Gr(r))).join(",")),n.endAt&&(s+=", endAt: ",s+=n.endAt.inclusive?"a:":"b:",s+=n.endAt.position.map((r=>Gr(r))).join(",")),`Target(${s})`})(dn(t))}; limitType=${t.limitType})`}function Cl(t,e){return e.isFoundDocument()&&(function(s,r){const i=r.key.path;return s.collectionGroup!==null?r.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(i):oe.isDocumentKey(s.path)?s.path.isEqual(i):s.path.isImmediateParentOf(i)})(t,e)&&(function(s,r){for(const i of Hi(s))if(!i.field.isKeyField()&&r.data.field(i.field)===null)return!1;return!0})(t,e)&&(function(s,r){for(const i of s.filters)if(!i.matches(r))return!1;return!0})(t,e)&&(function(s,r){return!(s.startAt&&!(function(o,l,c){const u=Up(o,l,c);return o.inclusive?u<=0:u<0})(s.startAt,Hi(s),r)||s.endAt&&!(function(o,l,c){const u=Up(o,l,c);return o.inclusive?u>=0:u>0})(s.endAt,Hi(s),r))})(t,e)}function MC(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function By(t){return(e,n)=>{let s=!1;for(const r of Hi(t)){const i=LC(r,e,n);if(i!==0)return i;s=s||r.field.isKeyField()}return 0}}function LC(t,e,n){const s=t.field.isKeyField()?oe.comparator(e.key,n.key):(function(i,o,l){const c=o.data.field(i),u=l.data.field(i);return c!==null&&u!==null?Wr(c,u):fe(42886)})(t.field,e,n);switch(t.dir){case"asc":return s;case"desc":return-1*s;default:return fe(19790,{direction:t.dir})}}class sr{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s!==void 0){for(const[r,i]of s)if(this.equalsFn(r,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const s=this.mapKeyFn(e),r=this.inner[s];if(r===void 0)return this.inner[s]=[[e,n]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,n]);r.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return!1;for(let r=0;r<s.length;r++)if(this.equalsFn(s[r][0],e))return s.length===1?delete this.inner[n]:s.splice(r,1),this.innerSize--,!0;return!1}forEach(e){bs(this.inner,((n,s)=>{for(const[r,i]of s)e(r,i)}))}isEmpty(){return Ay(this.inner)}size(){return this.innerSize}}const FC=new We(oe.comparator);function Ln(){return FC}const jy=new We(oe.comparator);function Di(...t){let e=jy;for(const n of t)e=e.insert(n.key,n);return e}function Hy(t){let e=jy;return t.forEach(((n,s)=>e=e.insert(n,s.overlayedDocument))),e}function Bs(){return qi()}function qy(){return qi()}function qi(){return new sr((t=>t.toString()),((t,e)=>t.isEqual(e)))}const UC=new We(oe.comparator),$C=new ot(oe.comparator);function we(...t){let e=$C;for(const n of t)e=e.add(n);return e}const BC=new ot(Te);function jC(){return BC}function Ph(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ba(e)?"-0":e}}function Wy(t){return{integerValue:""+t}}function HC(t,e){return mC(e)?Wy(e):Ph(t,e)}class Pl{constructor(){this._=void 0}}function qC(t,e,n){return t instanceof Ga?(function(r,i){const o={fields:{[Cy]:{stringValue:Sy},[ky]:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&Ih(i)&&(i=Al(i)),i&&(o.fields[Py]=i),{mapValue:o}})(n,e):t instanceof ao?zy(t,e):t instanceof lo?Ky(t,e):(function(r,i){const o=Gy(r,i),l=Hp(o)+Hp(r.Ae);return du(o)&&du(r.Ae)?Wy(l):Ph(r.serializer,l)})(t,e)}function WC(t,e,n){return t instanceof ao?zy(t,e):t instanceof lo?Ky(t,e):n}function Gy(t,e){return t instanceof za?(function(s){return du(s)||(function(i){return!!i&&"doubleValue"in i})(s)})(e)?e:{integerValue:0}:null}class Ga extends Pl{}class ao extends Pl{constructor(e){super(),this.elements=e}}function zy(t,e){const n=Qy(e);for(const s of t.elements)n.some((r=>_n(r,s)))||n.push(s);return{arrayValue:{values:n}}}class lo extends Pl{constructor(e){super(),this.elements=e}}function Ky(t,e){let n=Qy(e);for(const s of t.elements)n=n.filter((r=>!_n(r,s)));return{arrayValue:{values:n}}}class za extends Pl{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function Hp(t){return Qe(t.integerValue||t.doubleValue)}function Qy(t){return Ah(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function GC(t,e){return t.field.isEqual(e.field)&&(function(s,r){return s instanceof ao&&r instanceof ao||s instanceof lo&&r instanceof lo?Hr(s.elements,r.elements,_n):s instanceof za&&r instanceof za?_n(s.Ae,r.Ae):s instanceof Ga&&r instanceof Ga})(t.transform,e.transform)}class zC{constructor(e,n){this.version=e,this.transformResults=n}}class pn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new pn}static exists(e){return new pn(void 0,e)}static updateTime(e){return new pn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function ga(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class kl{}function Jy(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Xy(t.key,pn.none()):new Io(t.key,t.data,pn.none());{const n=t.data,s=Nt.empty();let r=new ot(ut.comparator);for(let i of e.fields)if(!r.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?s.delete(i):s.set(i,o),r=r.add(i)}return new Is(t.key,s,new Ft(r.toArray()),pn.none())}}function KC(t,e,n){t instanceof Io?(function(r,i,o){const l=r.value.clone(),c=Wp(r.fieldTransforms,i,o.transformResults);l.setAll(c),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()})(t,e,n):t instanceof Is?(function(r,i,o){if(!ga(r.precondition,i))return void i.convertToUnknownDocument(o.version);const l=Wp(r.fieldTransforms,i,o.transformResults),c=i.data;c.setAll(Yy(r)),c.setAll(l),i.convertToFoundDocument(o.version,c).setHasCommittedMutations()})(t,e,n):(function(r,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()})(0,e,n)}function Wi(t,e,n,s){return t instanceof Io?(function(i,o,l,c){if(!ga(i.precondition,o))return l;const u=i.value.clone(),h=Gp(i.fieldTransforms,c,o);return u.setAll(h),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null})(t,e,n,s):t instanceof Is?(function(i,o,l,c){if(!ga(i.precondition,o))return l;const u=Gp(i.fieldTransforms,c,o),h=o.data;return h.setAll(Yy(i)),h.setAll(u),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),l===null?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map((d=>d.field)))})(t,e,n,s):(function(i,o,l){return ga(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l})(t,e,n)}function QC(t,e){let n=null;for(const s of t.fieldTransforms){const r=e.data.field(s.field),i=Gy(s.transform,r||null);i!=null&&(n===null&&(n=Nt.empty()),n.set(s.field,i))}return n||null}function qp(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!(function(s,r){return s===void 0&&r===void 0||!(!s||!r)&&Hr(s,r,((i,o)=>GC(i,o)))})(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Io extends kl{constructor(e,n,s,r=[]){super(),this.key=e,this.value=n,this.precondition=s,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Is extends kl{constructor(e,n,s,r,i=[]){super(),this.key=e,this.data=n,this.fieldMask=s,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function Yy(t){const e=new Map;return t.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const s=t.data.field(n);e.set(n,s)}})),e}function Wp(t,e,n){const s=new Map;ke(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let r=0;r<n.length;r++){const i=t[r],o=i.transform,l=e.data.field(i.field);s.set(i.field,WC(o,l,n[r]))}return s}function Gp(t,e,n){const s=new Map;for(const r of t){const i=r.transform,o=n.data.field(r.field);s.set(r.field,qC(i,o,e))}return s}class Xy extends kl{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class JC extends kl{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class YC{constructor(e,n,s,r){this.batchId=e,this.localWriteTime=n,this.baseMutations=s,this.mutations=r}applyToRemoteDocument(e,n){const s=n.mutationResults;for(let r=0;r<this.mutations.length;r++){const i=this.mutations[r];i.key.isEqual(e.key)&&KC(i,e,s[r])}}applyToLocalView(e,n){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(n=Wi(s,e,n,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(n=Wi(s,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const s=qy();return this.mutations.forEach((r=>{const i=e.get(r.key),o=i.overlayedDocument;let l=this.applyToLocalView(o,i.mutatedFields);l=n.has(r.key)?null:l;const c=Jy(o,l);c!==null&&s.set(r.key,c),o.isValidDocument()||o.convertToNoDocument(me.min())})),s}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),we())}isEqual(e){return this.batchId===e.batchId&&Hr(this.mutations,e.mutations,((n,s)=>qp(n,s)))&&Hr(this.baseMutations,e.baseMutations,((n,s)=>qp(n,s)))}}class kh{constructor(e,n,s,r){this.batch=e,this.commitVersion=n,this.mutationResults=s,this.docVersions=r}static from(e,n,s){ke(e.mutations.length===s.length,58842,{me:e.mutations.length,fe:s.length});let r=(function(){return UC})();const i=e.mutations;for(let o=0;o<i.length;o++)r=r.insert(i[o].key,s[o].version);return new kh(e,n,s,r)}}class XC{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class ZC{constructor(e,n){this.count=e,this.unchangedNames=n}}var Ye,be;function eP(t){switch(t){case B.OK:return fe(64938);case B.CANCELLED:case B.UNKNOWN:case B.DEADLINE_EXCEEDED:case B.RESOURCE_EXHAUSTED:case B.INTERNAL:case B.UNAVAILABLE:case B.UNAUTHENTICATED:return!1;case B.INVALID_ARGUMENT:case B.NOT_FOUND:case B.ALREADY_EXISTS:case B.PERMISSION_DENIED:case B.FAILED_PRECONDITION:case B.ABORTED:case B.OUT_OF_RANGE:case B.UNIMPLEMENTED:case B.DATA_LOSS:return!0;default:return fe(15467,{code:t})}}function Zy(t){if(t===void 0)return Mn("GRPC error has no .code"),B.UNKNOWN;switch(t){case Ye.OK:return B.OK;case Ye.CANCELLED:return B.CANCELLED;case Ye.UNKNOWN:return B.UNKNOWN;case Ye.DEADLINE_EXCEEDED:return B.DEADLINE_EXCEEDED;case Ye.RESOURCE_EXHAUSTED:return B.RESOURCE_EXHAUSTED;case Ye.INTERNAL:return B.INTERNAL;case Ye.UNAVAILABLE:return B.UNAVAILABLE;case Ye.UNAUTHENTICATED:return B.UNAUTHENTICATED;case Ye.INVALID_ARGUMENT:return B.INVALID_ARGUMENT;case Ye.NOT_FOUND:return B.NOT_FOUND;case Ye.ALREADY_EXISTS:return B.ALREADY_EXISTS;case Ye.PERMISSION_DENIED:return B.PERMISSION_DENIED;case Ye.FAILED_PRECONDITION:return B.FAILED_PRECONDITION;case Ye.ABORTED:return B.ABORTED;case Ye.OUT_OF_RANGE:return B.OUT_OF_RANGE;case Ye.UNIMPLEMENTED:return B.UNIMPLEMENTED;case Ye.DATA_LOSS:return B.DATA_LOSS;default:return fe(39323,{code:t})}}(be=Ye||(Ye={}))[be.OK=0]="OK",be[be.CANCELLED=1]="CANCELLED",be[be.UNKNOWN=2]="UNKNOWN",be[be.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",be[be.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",be[be.NOT_FOUND=5]="NOT_FOUND",be[be.ALREADY_EXISTS=6]="ALREADY_EXISTS",be[be.PERMISSION_DENIED=7]="PERMISSION_DENIED",be[be.UNAUTHENTICATED=16]="UNAUTHENTICATED",be[be.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",be[be.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",be[be.ABORTED=10]="ABORTED",be[be.OUT_OF_RANGE=11]="OUT_OF_RANGE",be[be.UNIMPLEMENTED=12]="UNIMPLEMENTED",be[be.INTERNAL=13]="INTERNAL",be[be.UNAVAILABLE=14]="UNAVAILABLE",be[be.DATA_LOSS=15]="DATA_LOSS";function tP(){return new TextEncoder}const nP=new fs([4294967295,4294967295],0);function zp(t){const e=tP().encode(t),n=new dy;return n.update(e),new Uint8Array(n.digest())}function Kp(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),s=e.getUint32(4,!0),r=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new fs([n,s],0),new fs([r,i],0)]}class Nh{constructor(e,n,s){if(this.bitmap=e,this.padding=n,this.hashCount=s,n<0||n>=8)throw new Oi(`Invalid padding: ${n}`);if(s<0)throw new Oi(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new Oi(`Invalid hash count: ${s}`);if(e.length===0&&n!==0)throw new Oi(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=fs.fromNumber(this.ge)}ye(e,n,s){let r=e.add(n.multiply(fs.fromNumber(s)));return r.compare(nP)===1&&(r=new fs([r.getBits(0),r.getBits(1)],0)),r.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=zp(e),[s,r]=Kp(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(s,r,i);if(!this.we(o))return!1}return!0}static create(e,n,s){const r=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new Nh(i,r,n);return s.forEach((l=>o.insert(l))),o}insert(e){if(this.ge===0)return;const n=zp(e),[s,r]=Kp(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(s,r,i);this.Se(o)}}Se(e){const n=Math.floor(e/8),s=e%8;this.bitmap[n]|=1<<s}}class Oi extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Nl{constructor(e,n,s,r,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=s,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,s){const r=new Map;return r.set(e,Ao.createSynthesizedTargetChangeForCurrentChange(e,n,s)),new Nl(me.min(),r,new We(Te),Ln(),we())}}class Ao{constructor(e,n,s,r,i){this.resumeToken=e,this.current=n,this.addedDocuments=s,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,s){return new Ao(s,n,we(),we(),we())}}class _a{constructor(e,n,s,r){this.be=e,this.removedTargetIds=n,this.key=s,this.De=r}}class ev{constructor(e,n){this.targetId=e,this.Ce=n}}class tv{constructor(e,n,s=dt.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=n,this.resumeToken=s,this.cause=r}}class Qp{constructor(){this.ve=0,this.Fe=Jp(),this.Me=dt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=we(),n=we(),s=we();return this.Fe.forEach(((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:n=n.add(r);break;case 1:s=s.add(r);break;default:fe(38017,{changeType:i})}})),new Ao(this.Me,this.xe,e,n,s)}qe(){this.Oe=!1,this.Fe=Jp()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,ke(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class sP{constructor(e){this.Ge=e,this.ze=new Map,this.je=Ln(),this.Je=ta(),this.He=ta(),this.Ye=new We(Te)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const s=this.nt(n);switch(e.state){case 0:this.rt(n)&&s.Le(e.resumeToken);break;case 1:s.Ke(),s.Ne||s.qe(),s.Le(e.resumeToken);break;case 2:s.Ke(),s.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(s.We(),s.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),s.Le(e.resumeToken));break;default:fe(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((s,r)=>{this.rt(r)&&n(r)}))}st(e){const n=e.targetId,s=e.Ce.count,r=this.ot(n);if(r){const i=r.target;if(mu(i))if(s===0){const o=new oe(i.path);this.et(n,o,bt.newNoDocument(o,me.min()))}else ke(s===1,20013,{expectedCount:s});else{const o=this._t(n);if(o!==s){const l=this.ut(e),c=l?this.ct(l,e,o):1;if(c!==0){this.it(n);const u=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,u)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:s="",padding:r=0},hashCount:i=0}=n;let o,l;try{o=vs(s).toUint8Array()}catch(c){if(c instanceof Ry)return Zs("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{l=new Nh(o,r,i)}catch(c){return Zs(c instanceof Oi?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return l.ge===0?null:l}ct(e,n,s){return n.Ce.count===s-this.Pt(e,n.targetId)?0:2}Pt(e,n){const s=this.Ge.getRemoteKeysForTarget(n);let r=0;return s.forEach((i=>{const o=this.Ge.ht(),l=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(l)||(this.et(n,i,null),r++)})),r}Tt(e){const n=new Map;this.ze.forEach(((i,o)=>{const l=this.ot(o);if(l){if(i.current&&mu(l.target)){const c=new oe(l.target.path);this.It(c).has(o)||this.Et(o,c)||this.et(o,c,bt.newNoDocument(c,e))}i.Be&&(n.set(o,i.ke()),i.qe())}}));let s=we();this.He.forEach(((i,o)=>{let l=!0;o.forEachWhile((c=>{const u=this.ot(c);return!u||u.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)})),l&&(s=s.add(i))})),this.je.forEach(((i,o)=>o.setReadTime(e)));const r=new Nl(e,n,this.Ye,this.je,s);return this.je=Ln(),this.Je=ta(),this.He=ta(),this.Ye=new We(Te),r}Xe(e,n){if(!this.rt(e))return;const s=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,s),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,s){if(!this.rt(e))return;const r=this.nt(e);this.Et(e,n)?r.Qe(n,1):r.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),s&&(this.je=this.je.insert(n,s))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new Qp,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new ot(Te),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new ot(Te),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||Z("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Qp),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function ta(){return new We(oe.comparator)}function Jp(){return new We(oe.comparator)}const rP={asc:"ASCENDING",desc:"DESCENDING"},iP={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},oP={and:"AND",or:"OR"};class aP{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function _u(t,e){return t.useProto3Json||Il(e)?e:{value:e}}function Ka(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function nv(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function lP(t,e){return Ka(t,e.toTimestamp())}function mn(t){return ke(!!t,49232),me.fromTimestamp((function(n){const s=ys(n);return new Le(s.seconds,s.nanos)})(t))}function Dh(t,e){return yu(t,e).canonicalString()}function yu(t,e){const n=(function(r){return new He(["projects",r.projectId,"databases",r.database])})(t).child("documents");return e===void 0?n:n.child(e)}function sv(t){const e=He.fromString(t);return ke(lv(e),10190,{key:e.toString()}),e}function vu(t,e){return Dh(t.databaseId,e.path)}function Cc(t,e){const n=sv(e);if(n.get(1)!==t.databaseId.projectId)throw new re(B.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new re(B.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new oe(iv(n))}function rv(t,e){return Dh(t.databaseId,e)}function cP(t){const e=sv(t);return e.length===4?He.emptyPath():iv(e)}function Eu(t){return new He(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function iv(t){return ke(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function Yp(t,e,n){return{name:vu(t,e),fields:n.value.mapValue.fields}}function uP(t,e){let n;if("targetChange"in e){e.targetChange;const s=(function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:fe(39313,{state:u})})(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],i=(function(u,h){return u.useProto3Json?(ke(h===void 0||typeof h=="string",58123),dt.fromBase64String(h||"")):(ke(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),dt.fromUint8Array(h||new Uint8Array))})(t,e.targetChange.resumeToken),o=e.targetChange.cause,l=o&&(function(u){const h=u.code===void 0?B.UNKNOWN:Zy(u.code);return new re(h,u.message||"")})(o);n=new tv(s,r,i,l||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const r=Cc(t,s.document.name),i=mn(s.document.updateTime),o=s.document.createTime?mn(s.document.createTime):me.min(),l=new Nt({mapValue:{fields:s.document.fields}}),c=bt.newFoundDocument(r,i,o,l),u=s.targetIds||[],h=s.removedTargetIds||[];n=new _a(u,h,c.key,c)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const r=Cc(t,s.document),i=s.readTime?mn(s.readTime):me.min(),o=bt.newNoDocument(r,i),l=s.removedTargetIds||[];n=new _a([],l,o.key,o)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const r=Cc(t,s.document),i=s.removedTargetIds||[];n=new _a([],i,r,null)}else{if(!("filter"in e))return fe(11601,{Rt:e});{e.filter;const s=e.filter;s.targetId;const{count:r=0,unchangedNames:i}=s,o=new ZC(r,i),l=s.targetId;n=new ev(l,o)}}return n}function hP(t,e){let n;if(e instanceof Io)n={update:Yp(t,e.key,e.value)};else if(e instanceof Xy)n={delete:vu(t,e.key)};else if(e instanceof Is)n={update:Yp(t,e.key,e.data),updateMask:EP(e.fieldMask)};else{if(!(e instanceof JC))return fe(16599,{Vt:e.type});n={verify:vu(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((s=>(function(i,o){const l=o.transform;if(l instanceof Ga)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof ao)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof lo)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof za)return{fieldPath:o.field.canonicalString(),increment:l.Ae};throw fe(20930,{transform:o.transform})})(0,s)))),e.precondition.isNone||(n.currentDocument=(function(r,i){return i.updateTime!==void 0?{updateTime:lP(r,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:fe(27497)})(t,e.precondition)),n}function fP(t,e){return t&&t.length>0?(ke(e!==void 0,14353),t.map((n=>(function(r,i){let o=r.updateTime?mn(r.updateTime):mn(i);return o.isEqual(me.min())&&(o=mn(i)),new zC(o,r.transformResults||[])})(n,e)))):[]}function dP(t,e){return{documents:[rv(t,e.path)]}}function pP(t,e){const n={structuredQuery:{}},s=e.path;let r;e.collectionGroup!==null?(r=s,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=s.popLast(),n.structuredQuery.from=[{collectionId:s.lastSegment()}]),n.parent=rv(t,r);const i=(function(u){if(u.length!==0)return av(yn.create(u,"and"))})(e.filters);i&&(n.structuredQuery.where=i);const o=(function(u){if(u.length!==0)return u.map((h=>(function(m){return{field:_r(m.field),direction:_P(m.dir)}})(h)))})(e.orderBy);o&&(n.structuredQuery.orderBy=o);const l=_u(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=(function(u){return{before:u.inclusive,values:u.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(u){return{before:!u.inclusive,values:u.position}})(e.endAt)),{ft:n,parent:r}}function mP(t){let e=cP(t.parent);const n=t.structuredQuery,s=n.from?n.from.length:0;let r=null;if(s>0){ke(s===1,65062);const h=n.from[0];h.allDescendants?r=h.collectionId:e=e.child(h.collectionId)}let i=[];n.where&&(i=(function(d){const m=ov(d);return m instanceof yn&&My(m)?m.getFilters():[m]})(n.where));let o=[];n.orderBy&&(o=(function(d){return d.map((m=>(function(v){return new Wa(yr(v.field),(function(D){switch(D){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(v.direction))})(m)))})(n.orderBy));let l=null;n.limit&&(l=(function(d){let m;return m=typeof d=="object"?d.value:d,Il(m)?null:m})(n.limit));let c=null;n.startAt&&(c=(function(d){const m=!!d.before,g=d.values||[];return new qa(g,m)})(n.startAt));let u=null;return n.endAt&&(u=(function(d){const m=!d.before,g=d.values||[];return new qa(g,m)})(n.endAt)),OC(e,r,o,i,l,"F",c,u)}function gP(t,e){const n=(function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return fe(28987,{purpose:r})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function ov(t){return t.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const s=yr(n.unaryFilter.field);return it.create(s,"==",{doubleValue:NaN});case"IS_NULL":const r=yr(n.unaryFilter.field);return it.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=yr(n.unaryFilter.field);return it.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=yr(n.unaryFilter.field);return it.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return fe(61313);default:return fe(60726)}})(t):t.fieldFilter!==void 0?(function(n){return it.create(yr(n.fieldFilter.field),(function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return fe(58110);default:return fe(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(t):t.compositeFilter!==void 0?(function(n){return yn.create(n.compositeFilter.filters.map((s=>ov(s))),(function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return fe(1026)}})(n.compositeFilter.op))})(t):fe(30097,{filter:t})}function _P(t){return rP[t]}function yP(t){return iP[t]}function vP(t){return oP[t]}function _r(t){return{fieldPath:t.canonicalString()}}function yr(t){return ut.fromServerFormat(t.fieldPath)}function av(t){return t instanceof it?(function(n){if(n.op==="=="){if(Fp(n.value))return{unaryFilter:{field:_r(n.field),op:"IS_NAN"}};if(Lp(n.value))return{unaryFilter:{field:_r(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Fp(n.value))return{unaryFilter:{field:_r(n.field),op:"IS_NOT_NAN"}};if(Lp(n.value))return{unaryFilter:{field:_r(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:_r(n.field),op:yP(n.op),value:n.value}}})(t):t instanceof yn?(function(n){const s=n.getFilters().map((r=>av(r)));return s.length===1?s[0]:{compositeFilter:{op:vP(n.op),filters:s}}})(t):fe(54877,{filter:t})}function EP(t){const e=[];return t.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function lv(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}class is{constructor(e,n,s,r,i=me.min(),o=me.min(),l=dt.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=s,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=l,this.expectedCount=c}withSequenceNumber(e){return new is(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new is(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new is(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new is(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class TP{constructor(e){this.yt=e}}function wP(t){const e=mP({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?gu(e,e.limit,"L"):e}class bP{constructor(){this.Cn=new IP}addToCollectionParentIndex(e,n){return this.Cn.add(n),U.resolve()}getCollectionParents(e,n){return U.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return U.resolve()}deleteFieldIndex(e,n){return U.resolve()}deleteAllFieldIndexes(e){return U.resolve()}createTargetIndexes(e,n){return U.resolve()}getDocumentsMatchingTarget(e,n){return U.resolve(null)}getIndexType(e,n){return U.resolve(0)}getFieldIndexes(e,n){return U.resolve([])}getNextCollectionGroupToUpdate(e){return U.resolve(null)}getMinOffset(e,n){return U.resolve(_s.min())}getMinOffsetFromCollectionGroup(e,n){return U.resolve(_s.min())}updateCollectionGroup(e,n,s){return U.resolve()}updateIndexEntries(e,n){return U.resolve()}}class IP{constructor(){this.index={}}add(e){const n=e.lastSegment(),s=e.popLast(),r=this.index[n]||new ot(He.comparator),i=!r.has(s);return this.index[n]=r.add(s),i}has(e){const n=e.lastSegment(),s=e.popLast(),r=this.index[n];return r&&r.has(s)}getEntries(e){return(this.index[e]||new ot(He.comparator)).toArray()}}const Xp={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},cv=41943040;class kt{static withCacheSize(e){return new kt(e,kt.DEFAULT_COLLECTION_PERCENTILE,kt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=s}}kt.DEFAULT_COLLECTION_PERCENTILE=10,kt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,kt.DEFAULT=new kt(cv,kt.DEFAULT_COLLECTION_PERCENTILE,kt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),kt.DISABLED=new kt(-1,0,0);class zr{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new zr(0)}static cr(){return new zr(-1)}}const Zp="LruGarbageCollector",AP=1048576;function em([t,e],[n,s]){const r=Te(t,n);return r===0?Te(e,s):r}class RP{constructor(e){this.Ir=e,this.buffer=new ot(em),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const s=this.buffer.last();em(n,s)<0&&(this.buffer=this.buffer.delete(s).add(n))}}get maxValue(){return this.buffer.last()[0]}}class SP{constructor(e,n,s){this.garbageCollector=e,this.asyncQueue=n,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){Z(Zp,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){ri(n)?Z(Zp,"Ignoring IndexedDB error during garbage collection: ",n):await si(n)}await this.Vr(3e5)}))}}class CP{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next((s=>Math.floor(n/100*s)))}nthSequenceNumber(e,n){if(n===0)return U.resolve(bl.ce);const s=new RP(n);return this.mr.forEachTarget(e,(r=>s.Ar(r.sequenceNumber))).next((()=>this.mr.pr(e,(r=>s.Ar(r))))).next((()=>s.maxValue))}removeTargets(e,n,s){return this.mr.removeTargets(e,n,s)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(Z("LruGarbageCollector","Garbage collection skipped; disabled"),U.resolve(Xp)):this.getCacheSize(e).next((s=>s<this.params.cacheSizeCollectionThreshold?(Z("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Xp):this.yr(e,n)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let s,r,i,o,l,c,u;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((d=>(d>this.params.maximumSequenceNumbersToCollect?(Z("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${d}`),r=this.params.maximumSequenceNumbersToCollect):r=d,o=Date.now(),this.nthSequenceNumber(e,r)))).next((d=>(s=d,l=Date.now(),this.removeTargets(e,s,n)))).next((d=>(i=d,c=Date.now(),this.removeOrphanedDocuments(e,s)))).next((d=>(u=Date.now(),mr()<=Ee.DEBUG&&Z("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-h}ms
	Determined least recently used ${r} in `+(l-o)+`ms
	Removed ${i} targets in `+(c-l)+`ms
	Removed ${d} documents in `+(u-c)+`ms
Total Duration: ${u-h}ms`),U.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:d}))))}}function PP(t,e){return new CP(t,e)}class kP{constructor(){this.changes=new sr((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,bt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const s=this.changes.get(n);return s!==void 0?U.resolve(s):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class NP{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}class DP{constructor(e,n,s,r){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=s,this.indexManager=r}getDocument(e,n){let s=null;return this.documentOverlayCache.getOverlay(e,n).next((r=>(s=r,this.remoteDocumentCache.getEntry(e,n)))).next((r=>(s!==null&&Wi(s.mutation,r,Ft.empty(),Le.now()),r)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((s=>this.getLocalViewOfDocuments(e,s,we()).next((()=>s))))}getLocalViewOfDocuments(e,n,s=we()){const r=Bs();return this.populateOverlays(e,r,n).next((()=>this.computeViews(e,n,r,s).next((i=>{let o=Di();return i.forEach(((l,c)=>{o=o.insert(l,c.overlayedDocument)})),o}))))}getOverlayedDocuments(e,n){const s=Bs();return this.populateOverlays(e,s,n).next((()=>this.computeViews(e,n,s,we())))}populateOverlays(e,n,s){const r=[];return s.forEach((i=>{n.has(i)||r.push(i)})),this.documentOverlayCache.getOverlays(e,r).next((i=>{i.forEach(((o,l)=>{n.set(o,l)}))}))}computeViews(e,n,s,r){let i=Ln();const o=qi(),l=(function(){return qi()})();return n.forEach(((c,u)=>{const h=s.get(u.key);r.has(u.key)&&(h===void 0||h.mutation instanceof Is)?i=i.insert(u.key,u):h!==void 0?(o.set(u.key,h.mutation.getFieldMask()),Wi(h.mutation,u,h.mutation.getFieldMask(),Le.now())):o.set(u.key,Ft.empty())})),this.recalculateAndSaveOverlays(e,i).next((c=>(c.forEach(((u,h)=>o.set(u,h))),n.forEach(((u,h)=>l.set(u,new NP(h,o.get(u)??null)))),l)))}recalculateAndSaveOverlays(e,n){const s=qi();let r=new We(((o,l)=>o-l)),i=we();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((o=>{for(const l of o)l.keys().forEach((c=>{const u=n.get(c);if(u===null)return;let h=s.get(c)||Ft.empty();h=l.applyToLocalView(u,h),s.set(c,h);const d=(r.get(l.batchId)||we()).add(c);r=r.insert(l.batchId,d)}))})).next((()=>{const o=[],l=r.getReverseIterator();for(;l.hasNext();){const c=l.getNext(),u=c.key,h=c.value,d=qy();h.forEach((m=>{if(!i.has(m)){const g=Jy(n.get(m),s.get(m));g!==null&&d.set(m,g),i=i.add(m)}})),o.push(this.documentOverlayCache.saveOverlays(e,u,d))}return U.waitFor(o)})).next((()=>s))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((s=>this.recalculateAndSaveOverlays(e,s)))}getDocumentsMatchingQuery(e,n,s,r){return(function(o){return oe.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):VC(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,s,r):this.getDocumentsMatchingCollectionQuery(e,n,s,r)}getNextDocuments(e,n,s,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,s,r).next((i=>{const o=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,s.largestBatchId,r-i.size):U.resolve(Bs());let l=ro,c=i;return o.next((u=>U.forEach(u,((h,d)=>(l<d.largestBatchId&&(l=d.largestBatchId),i.get(h)?U.resolve():this.remoteDocumentCache.getEntry(e,h).next((m=>{c=c.insert(h,m)}))))).next((()=>this.populateOverlays(e,u,i))).next((()=>this.computeViews(e,c,u,we()))).next((h=>({batchId:l,changes:Hy(h)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new oe(n)).next((s=>{let r=Di();return s.isFoundDocument()&&(r=r.insert(s.key,s)),r}))}getDocumentsMatchingCollectionGroupQuery(e,n,s,r){const i=n.collectionGroup;let o=Di();return this.indexManager.getCollectionParents(e,i).next((l=>U.forEach(l,(c=>{const u=(function(d,m){return new Rl(m,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)})(n,c.child(i));return this.getDocumentsMatchingCollectionQuery(e,u,s,r).next((h=>{h.forEach(((d,m)=>{o=o.insert(d,m)}))}))})).next((()=>o))))}getDocumentsMatchingCollectionQuery(e,n,s,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,s.largestBatchId).next((o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,s,i,r)))).next((o=>{i.forEach(((c,u)=>{const h=u.getKey();o.get(h)===null&&(o=o.insert(h,bt.newInvalidDocument(h)))}));let l=Di();return o.forEach(((c,u)=>{const h=i.get(c);h!==void 0&&Wi(h.mutation,u,Ft.empty(),Le.now()),Cl(n,u)&&(l=l.insert(c,u))})),l}))}}class OP{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return U.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,(function(r){return{id:r.id,version:r.version,createTime:mn(r.createTime)}})(n)),U.resolve()}getNamedQuery(e,n){return U.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,(function(r){return{name:r.name,query:wP(r.bundledQuery),readTime:mn(r.readTime)}})(n)),U.resolve()}}class VP{constructor(){this.overlays=new We(oe.comparator),this.qr=new Map}getOverlay(e,n){return U.resolve(this.overlays.get(n))}getOverlays(e,n){const s=Bs();return U.forEach(n,(r=>this.getOverlay(e,r).next((i=>{i!==null&&s.set(r,i)})))).next((()=>s))}saveOverlays(e,n,s){return s.forEach(((r,i)=>{this.St(e,n,i)})),U.resolve()}removeOverlaysForBatchId(e,n,s){const r=this.qr.get(s);return r!==void 0&&(r.forEach((i=>this.overlays=this.overlays.remove(i))),this.qr.delete(s)),U.resolve()}getOverlaysForCollection(e,n,s){const r=Bs(),i=n.length+1,o=new oe(n.child("")),l=this.overlays.getIteratorFrom(o);for(;l.hasNext();){const c=l.getNext().value,u=c.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===i&&c.largestBatchId>s&&r.set(c.getKey(),c)}return U.resolve(r)}getOverlaysForCollectionGroup(e,n,s,r){let i=new We(((u,h)=>u-h));const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>s){let h=i.get(u.largestBatchId);h===null&&(h=Bs(),i=i.insert(u.largestBatchId,h)),h.set(u.getKey(),u)}}const l=Bs(),c=i.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach(((u,h)=>l.set(u,h))),!(l.size()>=r)););return U.resolve(l)}St(e,n,s){const r=this.overlays.get(s.key);if(r!==null){const o=this.qr.get(r.largestBatchId).delete(s.key);this.qr.set(r.largestBatchId,o)}this.overlays=this.overlays.insert(s.key,new XC(n,s));let i=this.qr.get(n);i===void 0&&(i=we(),this.qr.set(n,i)),this.qr.set(n,i.add(s.key))}}class xP{constructor(){this.sessionToken=dt.EMPTY_BYTE_STRING}getSessionToken(e){return U.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,U.resolve()}}class Oh{constructor(){this.Qr=new ot(ct.$r),this.Ur=new ot(ct.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const s=new ct(e,n);this.Qr=this.Qr.add(s),this.Ur=this.Ur.add(s)}Wr(e,n){e.forEach((s=>this.addReference(s,n)))}removeReference(e,n){this.Gr(new ct(e,n))}zr(e,n){e.forEach((s=>this.removeReference(s,n)))}jr(e){const n=new oe(new He([])),s=new ct(n,e),r=new ct(n,e+1),i=[];return this.Ur.forEachInRange([s,r],(o=>{this.Gr(o),i.push(o.key)})),i}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new oe(new He([])),s=new ct(n,e),r=new ct(n,e+1);let i=we();return this.Ur.forEachInRange([s,r],(o=>{i=i.add(o.key)})),i}containsKey(e){const n=new ct(e,0),s=this.Qr.firstAfterOrEqual(n);return s!==null&&e.isEqual(s.key)}}class ct{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return oe.comparator(e.key,n.key)||Te(e.Yr,n.Yr)}static Kr(e,n){return Te(e.Yr,n.Yr)||oe.comparator(e.key,n.key)}}class MP{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new ot(ct.$r)}checkEmpty(e){return U.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,s,r){const i=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new YC(i,n,s,r);this.mutationQueue.push(o);for(const l of r)this.Zr=this.Zr.add(new ct(l.key,i)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return U.resolve(o)}lookupMutationBatch(e,n){return U.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const s=n+1,r=this.ei(s),i=r<0?0:r;return U.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return U.resolve(this.mutationQueue.length===0?bh:this.tr-1)}getAllMutationBatches(e){return U.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const s=new ct(n,0),r=new ct(n,Number.POSITIVE_INFINITY),i=[];return this.Zr.forEachInRange([s,r],(o=>{const l=this.Xr(o.Yr);i.push(l)})),U.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let s=new ot(Te);return n.forEach((r=>{const i=new ct(r,0),o=new ct(r,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([i,o],(l=>{s=s.add(l.Yr)}))})),U.resolve(this.ti(s))}getAllMutationBatchesAffectingQuery(e,n){const s=n.path,r=s.length+1;let i=s;oe.isDocumentKey(i)||(i=i.child(""));const o=new ct(new oe(i),0);let l=new ot(Te);return this.Zr.forEachWhile((c=>{const u=c.key.path;return!!s.isPrefixOf(u)&&(u.length===r&&(l=l.add(c.Yr)),!0)}),o),U.resolve(this.ti(l))}ti(e){const n=[];return e.forEach((s=>{const r=this.Xr(s);r!==null&&n.push(r)})),n}removeMutationBatch(e,n){ke(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Zr;return U.forEach(n.mutations,(r=>{const i=new ct(r.key,n.batchId);return s=s.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)})).next((()=>{this.Zr=s}))}ir(e){}containsKey(e,n){const s=new ct(n,0),r=this.Zr.firstAfterOrEqual(s);return U.resolve(n.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,U.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class LP{constructor(e){this.ri=e,this.docs=(function(){return new We(oe.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const s=n.key,r=this.docs.get(s),i=r?r.size:0,o=this.ri(n);return this.docs=this.docs.insert(s,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const s=this.docs.get(n);return U.resolve(s?s.document.mutableCopy():bt.newInvalidDocument(n))}getEntries(e,n){let s=Ln();return n.forEach((r=>{const i=this.docs.get(r);s=s.insert(r,i?i.document.mutableCopy():bt.newInvalidDocument(r))})),U.resolve(s)}getDocumentsMatchingQuery(e,n,s,r){let i=Ln();const o=n.path,l=new oe(o.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(l);for(;c.hasNext();){const{key:u,value:{document:h}}=c.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||hC(uC(h),s)<=0||(r.has(h.key)||Cl(n,h))&&(i=i.insert(h.key,h.mutableCopy()))}return U.resolve(i)}getAllFromCollectionGroup(e,n,s,r){fe(9500)}ii(e,n){return U.forEach(this.docs,(s=>n(s)))}newChangeBuffer(e){return new FP(this)}getSize(e){return U.resolve(this.size)}}class FP extends kP{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach(((s,r)=>{r.isValidDocument()?n.push(this.Nr.addEntry(e,r)):this.Nr.removeEntry(s)})),U.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}class UP{constructor(e){this.persistence=e,this.si=new sr((n=>Rh(n)),Sh),this.lastRemoteSnapshotVersion=me.min(),this.highestTargetId=0,this.oi=0,this._i=new Oh,this.targetCount=0,this.ai=zr.ur()}forEachTarget(e,n){return this.si.forEach(((s,r)=>n(r))),U.resolve()}getLastRemoteSnapshotVersion(e){return U.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return U.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),U.resolve(this.highestTargetId)}setTargetsMetadata(e,n,s){return s&&(this.lastRemoteSnapshotVersion=s),n>this.oi&&(this.oi=n),U.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new zr(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,U.resolve()}updateTargetData(e,n){return this.Pr(n),U.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,U.resolve()}removeTargets(e,n,s){let r=0;const i=[];return this.si.forEach(((o,l)=>{l.sequenceNumber<=n&&s.get(l.targetId)===null&&(this.si.delete(o),i.push(this.removeMatchingKeysForTargetId(e,l.targetId)),r++)})),U.waitFor(i).next((()=>r))}getTargetCount(e){return U.resolve(this.targetCount)}getTargetData(e,n){const s=this.si.get(n)||null;return U.resolve(s)}addMatchingKeys(e,n,s){return this._i.Wr(n,s),U.resolve()}removeMatchingKeys(e,n,s){this._i.zr(n,s);const r=this.persistence.referenceDelegate,i=[];return r&&n.forEach((o=>{i.push(r.markPotentiallyOrphaned(e,o))})),U.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),U.resolve()}getMatchingKeysForTargetId(e,n){const s=this._i.Hr(n);return U.resolve(s)}containsKey(e,n){return U.resolve(this._i.containsKey(n))}}class uv{constructor(e,n){this.ui={},this.overlays={},this.ci=new bl(0),this.li=!1,this.li=!0,this.hi=new xP,this.referenceDelegate=e(this),this.Pi=new UP(this),this.indexManager=new bP,this.remoteDocumentCache=(function(r){return new LP(r)})((s=>this.referenceDelegate.Ti(s))),this.serializer=new TP(n),this.Ii=new OP(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new VP,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let s=this.ui[e.toKey()];return s||(s=new MP(n,this.referenceDelegate),this.ui[e.toKey()]=s),s}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,s){Z("MemoryPersistence","Starting transaction:",e);const r=new $P(this.ci.next());return this.referenceDelegate.Ei(),s(r).next((i=>this.referenceDelegate.di(r).next((()=>i)))).toPromise().then((i=>(r.raiseOnCommittedEvent(),i)))}Ai(e,n){return U.or(Object.values(this.ui).map((s=>()=>s.containsKey(e,n))))}}class $P extends dC{constructor(e){super(),this.currentSequenceNumber=e}}class Vh{constructor(e){this.persistence=e,this.Ri=new Oh,this.Vi=null}static mi(e){return new Vh(e)}get fi(){if(this.Vi)return this.Vi;throw fe(60996)}addReference(e,n,s){return this.Ri.addReference(s,n),this.fi.delete(s.toString()),U.resolve()}removeReference(e,n,s){return this.Ri.removeReference(s,n),this.fi.add(s.toString()),U.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),U.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach((r=>this.fi.add(r.toString())));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,n.targetId).next((r=>{r.forEach((i=>this.fi.add(i.toString())))})).next((()=>s.removeTargetData(e,n)))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return U.forEach(this.fi,(s=>{const r=oe.fromPath(s);return this.gi(e,r).next((i=>{i||n.removeEntry(r,me.min())}))})).next((()=>(this.Vi=null,n.apply(e))))}updateLimboDocument(e,n){return this.gi(e,n).next((s=>{s?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(e){return 0}gi(e,n){return U.or([()=>U.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class Qa{constructor(e,n){this.persistence=e,this.pi=new sr((s=>gC(s.path)),((s,r)=>s.isEqual(r))),this.garbageCollector=PP(this,n)}static mi(e,n){return new Qa(e,n)}Ei(){}di(e){return U.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((s=>n.next((r=>s+r))))}wr(e){let n=0;return this.pr(e,(s=>{n++})).next((()=>n))}pr(e,n){return U.forEach(this.pi,((s,r)=>this.br(e,s,r).next((i=>i?U.resolve():n(r)))))}removeTargets(e,n,s){return this.persistence.getTargetCache().removeTargets(e,n,s)}removeOrphanedDocuments(e,n){let s=0;const r=this.persistence.getRemoteDocumentCache(),i=r.newChangeBuffer();return r.ii(e,(o=>this.br(e,o,n).next((l=>{l||(s++,i.removeEntry(o,me.min()))})))).next((()=>i.apply(e))).next((()=>s))}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),U.resolve()}removeTarget(e,n){const s=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,n,s){return this.pi.set(s,e.currentSequenceNumber),U.resolve()}removeReference(e,n,s){return this.pi.set(s,e.currentSequenceNumber),U.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),U.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=pa(e.data.value)),n}br(e,n,s){return U.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const r=this.pi.get(n);return U.resolve(r!==void 0&&r>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class xh{constructor(e,n,s,r){this.targetId=e,this.fromCache=n,this.Es=s,this.ds=r}static As(e,n){let s=we(),r=we();for(const i of n.docChanges)switch(i.type){case 0:s=s.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new xh(e,n.fromCache,s,r)}}class BP{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class jP{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return gA()?8:pC(It())>0?6:4})()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,s,r){const i={result:null};return this.ys(e,n).next((o=>{i.result=o})).next((()=>{if(!i.result)return this.ws(e,n,r,s).next((o=>{i.result=o}))})).next((()=>{if(i.result)return;const o=new BP;return this.Ss(e,n,o).next((l=>{if(i.result=l,this.Vs)return this.bs(e,n,o,l.size)}))})).next((()=>i.result))}bs(e,n,s,r){return s.documentReadCount<this.fs?(mr()<=Ee.DEBUG&&Z("QueryEngine","SDK will not create cache indexes for query:",gr(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),U.resolve()):(mr()<=Ee.DEBUG&&Z("QueryEngine","Query:",gr(n),"scans",s.documentReadCount,"local documents and returns",r,"documents as results."),s.documentReadCount>this.gs*r?(mr()<=Ee.DEBUG&&Z("QueryEngine","The SDK decides to create cache indexes for query:",gr(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,dn(n))):U.resolve())}ys(e,n){if(jp(n))return U.resolve(null);let s=dn(n);return this.indexManager.getIndexType(e,s).next((r=>r===0?null:(n.limit!==null&&r===1&&(n=gu(n,null,"F"),s=dn(n)),this.indexManager.getDocumentsMatchingTarget(e,s).next((i=>{const o=we(...i);return this.ps.getDocuments(e,o).next((l=>this.indexManager.getMinOffset(e,s).next((c=>{const u=this.Ds(n,l);return this.Cs(n,u,o,c.readTime)?this.ys(e,gu(n,null,"F")):this.vs(e,u,n,c)}))))})))))}ws(e,n,s,r){return jp(n)||r.isEqual(me.min())?U.resolve(null):this.ps.getDocuments(e,s).next((i=>{const o=this.Ds(n,i);return this.Cs(n,o,s,r)?U.resolve(null):(mr()<=Ee.DEBUG&&Z("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),gr(n)),this.vs(e,o,n,cC(r,ro)).next((l=>l)))}))}Ds(e,n){let s=new ot(By(e));return n.forEach(((r,i)=>{Cl(e,i)&&(s=s.add(i))})),s}Cs(e,n,s,r){if(e.limit===null)return!1;if(s.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Ss(e,n,s){return mr()<=Ee.DEBUG&&Z("QueryEngine","Using full collection scan to execute query:",gr(n)),this.ps.getDocumentsMatchingQuery(e,n,_s.min(),s)}vs(e,n,s,r){return this.ps.getDocumentsMatchingQuery(e,s,r).next((i=>(n.forEach((o=>{i=i.insert(o.key,o)})),i)))}}const Mh="LocalStore",HP=3e8;class qP{constructor(e,n,s,r){this.persistence=e,this.Fs=n,this.serializer=r,this.Ms=new We(Te),this.xs=new sr((i=>Rh(i)),Sh),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(s)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new DP(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.Ms)))}}function WP(t,e,n,s){return new qP(t,e,n,s)}async function hv(t,e){const n=ge(t);return await n.persistence.runTransaction("Handle user change","readonly",(s=>{let r;return n.mutationQueue.getAllMutationBatches(s).next((i=>(r=i,n.Bs(e),n.mutationQueue.getAllMutationBatches(s)))).next((i=>{const o=[],l=[];let c=we();for(const u of r){o.push(u.batchId);for(const h of u.mutations)c=c.add(h.key)}for(const u of i){l.push(u.batchId);for(const h of u.mutations)c=c.add(h.key)}return n.localDocuments.getDocuments(s,c).next((u=>({Ls:u,removedBatchIds:o,addedBatchIds:l})))}))}))}function GP(t,e){const n=ge(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(s=>{const r=e.batch.keys(),i=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(l,c,u,h){const d=u.batch,m=d.keys();let g=U.resolve();return m.forEach((v=>{g=g.next((()=>h.getEntry(c,v))).next((I=>{const D=u.docVersions.get(v);ke(D!==null,48541),I.version.compareTo(D)<0&&(d.applyToRemoteDocument(I,u),I.isValidDocument()&&(I.setReadTime(u.commitVersion),h.addEntry(I)))}))})),g.next((()=>l.mutationQueue.removeMutationBatch(c,d)))})(n,s,e,i).next((()=>i.apply(s))).next((()=>n.mutationQueue.performConsistencyCheck(s))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(s,r,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,(function(l){let c=we();for(let u=0;u<l.mutationResults.length;++u)l.mutationResults[u].transformResults.length>0&&(c=c.add(l.batch.mutations[u].key));return c})(e)))).next((()=>n.localDocuments.getDocuments(s,r)))}))}function fv(t){const e=ge(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.Pi.getLastRemoteSnapshotVersion(n)))}function zP(t,e){const n=ge(t),s=e.snapshotVersion;let r=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(i=>{const o=n.Ns.newChangeBuffer({trackRemovals:!0});r=n.Ms;const l=[];e.targetChanges.forEach(((h,d)=>{const m=r.get(d);if(!m)return;l.push(n.Pi.removeMatchingKeys(i,h.removedDocuments,d).next((()=>n.Pi.addMatchingKeys(i,h.addedDocuments,d))));let g=m.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(d)!==null?g=g.withResumeToken(dt.EMPTY_BYTE_STRING,me.min()).withLastLimboFreeSnapshotVersion(me.min()):h.resumeToken.approximateByteSize()>0&&(g=g.withResumeToken(h.resumeToken,s)),r=r.insert(d,g),(function(I,D,k){return I.resumeToken.approximateByteSize()===0||D.snapshotVersion.toMicroseconds()-I.snapshotVersion.toMicroseconds()>=HP?!0:k.addedDocuments.size+k.modifiedDocuments.size+k.removedDocuments.size>0})(m,g,h)&&l.push(n.Pi.updateTargetData(i,g))}));let c=Ln(),u=we();if(e.documentUpdates.forEach((h=>{e.resolvedLimboDocuments.has(h)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(i,h))})),l.push(KP(i,o,e.documentUpdates).next((h=>{c=h.ks,u=h.qs}))),!s.isEqual(me.min())){const h=n.Pi.getLastRemoteSnapshotVersion(i).next((d=>n.Pi.setTargetsMetadata(i,i.currentSequenceNumber,s)));l.push(h)}return U.waitFor(l).next((()=>o.apply(i))).next((()=>n.localDocuments.getLocalViewOfDocuments(i,c,u))).next((()=>c))})).then((i=>(n.Ms=r,i)))}function KP(t,e,n){let s=we(),r=we();return n.forEach((i=>s=s.add(i))),e.getEntries(t,s).next((i=>{let o=Ln();return n.forEach(((l,c)=>{const u=i.get(l);c.isFoundDocument()!==u.isFoundDocument()&&(r=r.add(l)),c.isNoDocument()&&c.version.isEqual(me.min())?(e.removeEntry(l,c.readTime),o=o.insert(l,c)):!u.isValidDocument()||c.version.compareTo(u.version)>0||c.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(c),o=o.insert(l,c)):Z(Mh,"Ignoring outdated watch update for ",l,". Current version:",u.version," Watch version:",c.version)})),{ks:o,qs:r}}))}function QP(t,e){const n=ge(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(s=>(e===void 0&&(e=bh),n.mutationQueue.getNextMutationBatchAfterBatchId(s,e))))}function JP(t,e){const n=ge(t);return n.persistence.runTransaction("Allocate target","readwrite",(s=>{let r;return n.Pi.getTargetData(s,e).next((i=>i?(r=i,U.resolve(r)):n.Pi.allocateTargetId(s).next((o=>(r=new is(e,o,"TargetPurposeListen",s.currentSequenceNumber),n.Pi.addTargetData(s,r).next((()=>r)))))))})).then((s=>{const r=n.Ms.get(s.targetId);return(r===null||s.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(s.targetId,s),n.xs.set(e,s.targetId)),s}))}async function Tu(t,e,n){const s=ge(t),r=s.Ms.get(e),i=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",i,(o=>s.persistence.referenceDelegate.removeTarget(o,r)))}catch(o){if(!ri(o))throw o;Z(Mh,`Failed to update sequence numbers for target ${e}: ${o}`)}s.Ms=s.Ms.remove(e),s.xs.delete(r.target)}function tm(t,e,n){const s=ge(t);let r=me.min(),i=we();return s.persistence.runTransaction("Execute query","readwrite",(o=>(function(c,u,h){const d=ge(c),m=d.xs.get(h);return m!==void 0?U.resolve(d.Ms.get(m)):d.Pi.getTargetData(u,h)})(s,o,dn(e)).next((l=>{if(l)return r=l.lastLimboFreeSnapshotVersion,s.Pi.getMatchingKeysForTargetId(o,l.targetId).next((c=>{i=c}))})).next((()=>s.Fs.getDocumentsMatchingQuery(o,e,n?r:me.min(),n?i:we()))).next((l=>(YP(s,MC(e),l),{documents:l,Qs:i})))))}function YP(t,e,n){let s=t.Os.get(e)||me.min();n.forEach(((r,i)=>{i.readTime.compareTo(s)>0&&(s=i.readTime)})),t.Os.set(e,s)}class nm{constructor(){this.activeTargetIds=jC()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class XP{constructor(){this.Mo=new nm,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,s){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,s){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new nm,Promise.resolve()}handleUserChange(e,n,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class ZP{Oo(e){}shutdown(){}}const sm="ConnectivityMonitor";class rm{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){Z(sm,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){Z(sm,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let na=null;function wu(){return na===null?na=(function(){return 268435456+Math.round(2147483648*Math.random())})():na++,"0x"+na.toString(16)}const Pc="RestConnection",ek={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class tk{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${s}/databases/${r}`,this.Wo=this.databaseId.database===ja?`project_id=${s}`:`project_id=${s}&database_id=${r}`}Go(e,n,s,r,i){const o=wu(),l=this.zo(e,n.toUriEncodedString());Z(Pc,`Sending RPC '${e}' ${o}:`,l,s);const c={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(c,r,i);const{host:u}=new URL(l),h=Zr(u);return this.Jo(e,l,c,s,h).then((d=>(Z(Pc,`Received RPC '${e}' ${o}: `,d),d)),(d=>{throw Zs(Pc,`RPC '${e}' ${o} failed with error: `,d,"url: ",l,"request:",s),d}))}Ho(e,n,s,r,i,o){return this.Go(e,n,s,r,i)}jo(e,n,s){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+ni})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((r,i)=>e[i]=r)),s&&s.headers.forEach(((r,i)=>e[i]=r))}zo(e,n){const s=ek[e];return`${this.Uo}/v1/${n}:${s}`}terminate(){}}class nk{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const vt="WebChannelConnection";class sk extends tk{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,s,r,i){const o=wu();return new Promise(((l,c)=>{const u=new py;u.setWithCredentials(!0),u.listenOnce(my.COMPLETE,(()=>{try{switch(u.getLastErrorCode()){case da.NO_ERROR:const d=u.getResponseJson();Z(vt,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(d)),l(d);break;case da.TIMEOUT:Z(vt,`RPC '${e}' ${o} timed out`),c(new re(B.DEADLINE_EXCEEDED,"Request time out"));break;case da.HTTP_ERROR:const m=u.getStatus();if(Z(vt,`RPC '${e}' ${o} failed with status:`,m,"response text:",u.getResponseText()),m>0){let g=u.getResponseJson();Array.isArray(g)&&(g=g[0]);const v=g?.error;if(v&&v.status&&v.message){const I=(function(k){const M=k.toLowerCase().replace(/_/g,"-");return Object.values(B).indexOf(M)>=0?M:B.UNKNOWN})(v.status);c(new re(I,v.message))}else c(new re(B.UNKNOWN,"Server responded with status "+u.getStatus()))}else c(new re(B.UNAVAILABLE,"Connection failed."));break;default:fe(9055,{l_:e,streamId:o,h_:u.getLastErrorCode(),P_:u.getLastError()})}}finally{Z(vt,`RPC '${e}' ${o} completed.`)}}));const h=JSON.stringify(r);Z(vt,`RPC '${e}' ${o} sending request:`,r),u.send(n,"POST",h,s,15)}))}T_(e,n,s){const r=wu(),i=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=yy(),l=_y(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(c.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(c.useFetchStreams=!0),this.jo(c.initMessageHeaders,n,s),c.encodeInitMessageHeaders=!0;const h=i.join("");Z(vt,`Creating RPC '${e}' stream ${r}: ${h}`,c);const d=o.createWebChannel(h,c);this.I_(d);let m=!1,g=!1;const v=new nk({Yo:D=>{g?Z(vt,`Not sending because RPC '${e}' stream ${r} is closed:`,D):(m||(Z(vt,`Opening RPC '${e}' stream ${r} transport.`),d.open(),m=!0),Z(vt,`RPC '${e}' stream ${r} sending:`,D),d.send(D))},Zo:()=>d.close()}),I=(D,k,M)=>{D.listen(k,(R=>{try{M(R)}catch(O){setTimeout((()=>{throw O}),0)}}))};return I(d,Ni.EventType.OPEN,(()=>{g||(Z(vt,`RPC '${e}' stream ${r} transport opened.`),v.o_())})),I(d,Ni.EventType.CLOSE,(()=>{g||(g=!0,Z(vt,`RPC '${e}' stream ${r} transport closed`),v.a_(),this.E_(d))})),I(d,Ni.EventType.ERROR,(D=>{g||(g=!0,Zs(vt,`RPC '${e}' stream ${r} transport errored. Name:`,D.name,"Message:",D.message),v.a_(new re(B.UNAVAILABLE,"The operation could not be completed")))})),I(d,Ni.EventType.MESSAGE,(D=>{if(!g){const k=D.data[0];ke(!!k,16349);const M=k,R=M?.error||M[0]?.error;if(R){Z(vt,`RPC '${e}' stream ${r} received error:`,R);const O=R.status;let L=(function(T){const y=Ye[T];if(y!==void 0)return Zy(y)})(O),z=R.message;L===void 0&&(L=B.INTERNAL,z="Unknown error status: "+O+" with message "+R.message),g=!0,v.a_(new re(L,z)),d.close()}else Z(vt,`RPC '${e}' stream ${r} received:`,k),v.u_(k)}})),I(l,gy.STAT_EVENT,(D=>{D.stat===uu.PROXY?Z(vt,`RPC '${e}' stream ${r} detected buffering proxy`):D.stat===uu.NOPROXY&&Z(vt,`RPC '${e}' stream ${r} detected no buffering proxy`)})),setTimeout((()=>{v.__()}),0),v}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((n=>n===e))}}function kc(){return typeof document<"u"?document:null}function Dl(t){return new aP(t,!0)}class dv{constructor(e,n,s=1e3,r=1.5,i=6e4){this.Mi=e,this.timerId=n,this.d_=s,this.A_=r,this.R_=i,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),s=Math.max(0,Date.now()-this.f_),r=Math.max(0,n-s);r>0&&Z("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,r,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const im="PersistentStream";class pv{constructor(e,n,s,r,i,o,l,c){this.Mi=e,this.S_=s,this.b_=r,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=l,this.listener=c,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new dv(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===B.RESOURCE_EXHAUSTED?(Mn(n.toString()),Mn("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===B.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([s,r])=>{this.D_===n&&this.G_(s,r)}),(s=>{e((()=>{const r=new re(B.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(r)}))}))}G_(e,n){const s=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo((()=>{s((()=>this.listener.Xo()))})),this.stream.t_((()=>{s((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((r=>{s((()=>this.z_(r)))})),this.stream.onMessage((r=>{s((()=>++this.F_==1?this.J_(r):this.onNext(r)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return Z(im,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget((()=>this.D_===e?n():(Z(im,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class rk extends pv{constructor(e,n,s,r,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,s,r,o),this.serializer=i}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=uP(this.serializer,e),s=(function(i){if(!("targetChange"in i))return me.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?me.min():o.readTime?mn(o.readTime):me.min()})(e);return this.listener.H_(n,s)}Y_(e){const n={};n.database=Eu(this.serializer),n.addTarget=(function(i,o){let l;const c=o.target;if(l=mu(c)?{documents:dP(i,c)}:{query:pP(i,c).ft},l.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){l.resumeToken=nv(i,o.resumeToken);const u=_u(i,o.expectedCount);u!==null&&(l.expectedCount=u)}else if(o.snapshotVersion.compareTo(me.min())>0){l.readTime=Ka(i,o.snapshotVersion.toTimestamp());const u=_u(i,o.expectedCount);u!==null&&(l.expectedCount=u)}return l})(this.serializer,e);const s=gP(this.serializer,e);s&&(n.labels=s),this.q_(n)}Z_(e){const n={};n.database=Eu(this.serializer),n.removeTarget=e,this.q_(n)}}class ik extends pv{constructor(e,n,s,r,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,s,r,o),this.serializer=i}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return ke(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ke(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){ke(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=fP(e.writeResults,e.commitTime),s=mn(e.commitTime);return this.listener.na(s,n)}ra(){const e={};e.database=Eu(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((s=>hP(this.serializer,s)))};this.q_(n)}}class ok{}class ak extends ok{constructor(e,n,s,r){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=s,this.serializer=r,this.ia=!1}sa(){if(this.ia)throw new re(B.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,s,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([i,o])=>this.connection.Go(e,yu(n,s),r,i,o))).catch((i=>{throw i.name==="FirebaseError"?(i.code===B.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new re(B.UNKNOWN,i.toString())}))}Ho(e,n,s,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([o,l])=>this.connection.Ho(e,yu(n,s),r,o,l,i))).catch((o=>{throw o.name==="FirebaseError"?(o.code===B.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new re(B.UNKNOWN,o.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class lk{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Mn(n),this.aa=!1):Z("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const er="RemoteStore";class ck{constructor(e,n,s,r,i){this.localStore=e,this.datastore=n,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=i,this.Aa.Oo((o=>{s.enqueueAndForget((async()=>{rr(this)&&(Z(er,"Restarting streams for network reachability change."),await(async function(c){const u=ge(c);u.Ea.add(4),await Ro(u),u.Ra.set("Unknown"),u.Ea.delete(4),await Ol(u)})(this))}))})),this.Ra=new lk(s,r)}}async function Ol(t){if(rr(t))for(const e of t.da)await e(!0)}async function Ro(t){for(const e of t.da)await e(!1)}function mv(t,e){const n=ge(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),$h(n)?Uh(n):ii(n).O_()&&Fh(n,e))}function Lh(t,e){const n=ge(t),s=ii(n);n.Ia.delete(e),s.O_()&&gv(n,e),n.Ia.size===0&&(s.O_()?s.L_():rr(n)&&n.Ra.set("Unknown"))}function Fh(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(me.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}ii(t).Y_(e)}function gv(t,e){t.Va.Ue(e),ii(t).Z_(e)}function Uh(t){t.Va=new sP({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),ii(t).start(),t.Ra.ua()}function $h(t){return rr(t)&&!ii(t).x_()&&t.Ia.size>0}function rr(t){return ge(t).Ea.size===0}function _v(t){t.Va=void 0}async function uk(t){t.Ra.set("Online")}async function hk(t){t.Ia.forEach(((e,n)=>{Fh(t,e)}))}async function fk(t,e){_v(t),$h(t)?(t.Ra.ha(e),Uh(t)):t.Ra.set("Unknown")}async function dk(t,e,n){if(t.Ra.set("Online"),e instanceof tv&&e.state===2&&e.cause)try{await(async function(r,i){const o=i.cause;for(const l of i.targetIds)r.Ia.has(l)&&(await r.remoteSyncer.rejectListen(l,o),r.Ia.delete(l),r.Va.removeTarget(l))})(t,e)}catch(s){Z(er,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await Ja(t,s)}else if(e instanceof _a?t.Va.Ze(e):e instanceof ev?t.Va.st(e):t.Va.tt(e),!n.isEqual(me.min()))try{const s=await fv(t.localStore);n.compareTo(s)>=0&&await(function(i,o){const l=i.Va.Tt(o);return l.targetChanges.forEach(((c,u)=>{if(c.resumeToken.approximateByteSize()>0){const h=i.Ia.get(u);h&&i.Ia.set(u,h.withResumeToken(c.resumeToken,o))}})),l.targetMismatches.forEach(((c,u)=>{const h=i.Ia.get(c);if(!h)return;i.Ia.set(c,h.withResumeToken(dt.EMPTY_BYTE_STRING,h.snapshotVersion)),gv(i,c);const d=new is(h.target,c,u,h.sequenceNumber);Fh(i,d)})),i.remoteSyncer.applyRemoteEvent(l)})(t,n)}catch(s){Z(er,"Failed to raise snapshot:",s),await Ja(t,s)}}async function Ja(t,e,n){if(!ri(e))throw e;t.Ea.add(1),await Ro(t),t.Ra.set("Offline"),n||(n=()=>fv(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{Z(er,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await Ol(t)}))}function yv(t,e){return e().catch((n=>Ja(t,n,e)))}async function Vl(t){const e=ge(t),n=Ts(e);let s=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:bh;for(;pk(e);)try{const r=await QP(e.localStore,s);if(r===null){e.Ta.length===0&&n.L_();break}s=r.batchId,mk(e,r)}catch(r){await Ja(e,r)}vv(e)&&Ev(e)}function pk(t){return rr(t)&&t.Ta.length<10}function mk(t,e){t.Ta.push(e);const n=Ts(t);n.O_()&&n.X_&&n.ea(e.mutations)}function vv(t){return rr(t)&&!Ts(t).x_()&&t.Ta.length>0}function Ev(t){Ts(t).start()}async function gk(t){Ts(t).ra()}async function _k(t){const e=Ts(t);for(const n of t.Ta)e.ea(n.mutations)}async function yk(t,e,n){const s=t.Ta.shift(),r=kh.from(s,e,n);await yv(t,(()=>t.remoteSyncer.applySuccessfulWrite(r))),await Vl(t)}async function vk(t,e){e&&Ts(t).X_&&await(async function(s,r){if((function(o){return eP(o)&&o!==B.ABORTED})(r.code)){const i=s.Ta.shift();Ts(s).B_(),await yv(s,(()=>s.remoteSyncer.rejectFailedWrite(i.batchId,r))),await Vl(s)}})(t,e),vv(t)&&Ev(t)}async function om(t,e){const n=ge(t);n.asyncQueue.verifyOperationInProgress(),Z(er,"RemoteStore received new credentials");const s=rr(n);n.Ea.add(3),await Ro(n),s&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Ol(n)}async function Ek(t,e){const n=ge(t);e?(n.Ea.delete(2),await Ol(n)):e||(n.Ea.add(2),await Ro(n),n.Ra.set("Unknown"))}function ii(t){return t.ma||(t.ma=(function(n,s,r){const i=ge(n);return i.sa(),new rk(s,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)})(t.datastore,t.asyncQueue,{Xo:uk.bind(null,t),t_:hk.bind(null,t),r_:fk.bind(null,t),H_:dk.bind(null,t)}),t.da.push((async e=>{e?(t.ma.B_(),$h(t)?Uh(t):t.Ra.set("Unknown")):(await t.ma.stop(),_v(t))}))),t.ma}function Ts(t){return t.fa||(t.fa=(function(n,s,r){const i=ge(n);return i.sa(),new ik(s,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)})(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:gk.bind(null,t),r_:vk.bind(null,t),ta:_k.bind(null,t),na:yk.bind(null,t)}),t.da.push((async e=>{e?(t.fa.B_(),await Vl(t)):(await t.fa.stop(),t.Ta.length>0&&(Z(er,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))}))),t.fa}class Bh{constructor(e,n,s,r,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=s,this.op=r,this.removalCallback=i,this.deferred=new ds,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((o=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,s,r,i){const o=Date.now()+s,l=new Bh(e,n,o,r,i);return l.start(s),l}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new re(B.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function jh(t,e){if(Mn("AsyncQueue",`${e}: ${t}`),ri(t))return new re(B.UNAVAILABLE,`${e}: ${t}`);throw t}class Vr{static emptySet(e){return new Vr(e.comparator)}constructor(e){this.comparator=e?(n,s)=>e(n,s)||oe.comparator(n.key,s.key):(n,s)=>oe.comparator(n.key,s.key),this.keyedMap=Di(),this.sortedSet=new We(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,s)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Vr)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;n.hasNext();){const r=n.getNext().key,i=s.getNext().key;if(!r.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const s=new Vr;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=n,s}}class am{constructor(){this.ga=new We(oe.comparator)}track(e){const n=e.doc.key,s=this.ga.get(n);s?e.type!==0&&s.type===3?this.ga=this.ga.insert(n,e):e.type===3&&s.type!==1?this.ga=this.ga.insert(n,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.ga=this.ga.remove(n):e.type===1&&s.type===2?this.ga=this.ga.insert(n,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):fe(63341,{Rt:e,pa:s}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,s)=>{e.push(s)})),e}}class Kr{constructor(e,n,s,r,i,o,l,c,u){this.query=e,this.docs=n,this.oldDocs=s,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=l,this.excludesMetadataChanges=c,this.hasCachedResults=u}static fromInitialDocuments(e,n,s,r,i){const o=[];return n.forEach((l=>{o.push({type:0,doc:l})})),new Kr(e,n,Vr.emptySet(n),o,s,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Sl(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,s=e.docChanges;if(n.length!==s.length)return!1;for(let r=0;r<n.length;r++)if(n[r].type!==s[r].type||!n[r].doc.isEqual(s[r].doc))return!1;return!0}}class Tk{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class wk{constructor(){this.queries=lm(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,s){const r=ge(n),i=r.queries;r.queries=lm(),i.forEach(((o,l)=>{for(const c of l.Sa)c.onError(s)}))})(this,new re(B.ABORTED,"Firestore shutting down"))}}function lm(){return new sr((t=>$y(t)),Sl)}async function bk(t,e){const n=ge(t);let s=3;const r=e.query;let i=n.queries.get(r);i?!i.ba()&&e.Da()&&(s=2):(i=new Tk,s=e.Da()?0:1);try{switch(s){case 0:i.wa=await n.onListen(r,!0);break;case 1:i.wa=await n.onListen(r,!1);break;case 2:await n.onFirstRemoteStoreListen(r)}}catch(o){const l=jh(o,`Initialization of query '${gr(e.query)}' failed`);return void e.onError(l)}n.queries.set(r,i),i.Sa.push(e),e.va(n.onlineState),i.wa&&e.Fa(i.wa)&&Hh(n)}async function Ik(t,e){const n=ge(t),s=e.query;let r=3;const i=n.queries.get(s);if(i){const o=i.Sa.indexOf(e);o>=0&&(i.Sa.splice(o,1),i.Sa.length===0?r=e.Da()?0:1:!i.ba()&&e.Da()&&(r=2))}switch(r){case 0:return n.queries.delete(s),n.onUnlisten(s,!0);case 1:return n.queries.delete(s),n.onUnlisten(s,!1);case 2:return n.onLastRemoteStoreUnlisten(s);default:return}}function Ak(t,e){const n=ge(t);let s=!1;for(const r of e){const i=r.query,o=n.queries.get(i);if(o){for(const l of o.Sa)l.Fa(r)&&(s=!0);o.wa=r}}s&&Hh(n)}function Rk(t,e,n){const s=ge(t),r=s.queries.get(e);if(r)for(const i of r.Sa)i.onError(n);s.queries.delete(e)}function Hh(t){t.Ca.forEach((e=>{e.next()}))}var bu,cm;(cm=bu||(bu={})).Ma="default",cm.Cache="cache";class Sk{constructor(e,n,s){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(e){if(!this.options.includeMetadataChanges){const s=[];for(const r of e.docChanges)r.type!==3&&s.push(r);e=new Kr(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const s=n!=="Offline";return(!this.options.qa||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Kr.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==bu.Cache}}class Tv{constructor(e){this.key=e}}class wv{constructor(e){this.key=e}}class Ck{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=we(),this.mutatedKeys=we(),this.eu=By(e),this.tu=new Vr(this.eu)}get nu(){return this.Ya}ru(e,n){const s=n?n.iu:new am,r=n?n.tu:this.tu;let i=n?n.mutatedKeys:this.mutatedKeys,o=r,l=!1;const c=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,u=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal(((h,d)=>{const m=r.get(h),g=Cl(this.query,d)?d:null,v=!!m&&this.mutatedKeys.has(m.key),I=!!g&&(g.hasLocalMutations||this.mutatedKeys.has(g.key)&&g.hasCommittedMutations);let D=!1;m&&g?m.data.isEqual(g.data)?v!==I&&(s.track({type:3,doc:g}),D=!0):this.su(m,g)||(s.track({type:2,doc:g}),D=!0,(c&&this.eu(g,c)>0||u&&this.eu(g,u)<0)&&(l=!0)):!m&&g?(s.track({type:0,doc:g}),D=!0):m&&!g&&(s.track({type:1,doc:m}),D=!0,(c||u)&&(l=!0)),D&&(g?(o=o.add(g),i=I?i.add(h):i.delete(h)):(o=o.delete(h),i=i.delete(h)))})),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),i=i.delete(h.key),s.track({type:1,doc:h})}return{tu:o,iu:s,Cs:l,mutatedKeys:i}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,s,r){const i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort(((h,d)=>(function(g,v){const I=D=>{switch(D){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return fe(20277,{Rt:D})}};return I(g)-I(v)})(h.type,d.type)||this.eu(h.doc,d.doc))),this.ou(s),r=r??!1;const l=n&&!r?this._u():[],c=this.Xa.size===0&&this.current&&!r?1:0,u=c!==this.Za;return this.Za=c,o.length!==0||u?{snapshot:new Kr(this.query,e.tu,i,o,e.mutatedKeys,c===0,u,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:l}:{au:l}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new am,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Ya=this.Ya.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ya=this.Ya.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=we(),this.tu.forEach((s=>{this.uu(s.key)&&(this.Xa=this.Xa.add(s.key))}));const n=[];return e.forEach((s=>{this.Xa.has(s)||n.push(new wv(s))})),this.Xa.forEach((s=>{e.has(s)||n.push(new Tv(s))})),n}cu(e){this.Ya=e.Qs,this.Xa=we();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Kr.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const qh="SyncEngine";class Pk{constructor(e,n,s){this.query=e,this.targetId=n,this.view=s}}class kk{constructor(e){this.key=e,this.hu=!1}}class Nk{constructor(e,n,s,r,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=s,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new sr((l=>$y(l)),Sl),this.Iu=new Map,this.Eu=new Set,this.du=new We(oe.comparator),this.Au=new Map,this.Ru=new Oh,this.Vu={},this.mu=new Map,this.fu=zr.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function Dk(t,e,n=!0){const s=Cv(t);let r;const i=s.Tu.get(e);return i?(s.sharedClientState.addLocalQueryTarget(i.targetId),r=i.view.lu()):r=await bv(s,e,n,!0),r}async function Ok(t,e){const n=Cv(t);await bv(n,e,!0,!1)}async function bv(t,e,n,s){const r=await JP(t.localStore,dn(e)),i=r.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let l;return s&&(l=await Vk(t,e,i,o==="current",r.resumeToken)),t.isPrimaryClient&&n&&mv(t.remoteStore,r),l}async function Vk(t,e,n,s,r){t.pu=(d,m,g)=>(async function(I,D,k,M){let R=D.view.ru(k);R.Cs&&(R=await tm(I.localStore,D.query,!1).then((({documents:C})=>D.view.ru(C,R))));const O=M&&M.targetChanges.get(D.targetId),L=M&&M.targetMismatches.get(D.targetId)!=null,z=D.view.applyChanges(R,I.isPrimaryClient,O,L);return hm(I,D.targetId,z.au),z.snapshot})(t,d,m,g);const i=await tm(t.localStore,e,!0),o=new Ck(e,i.Qs),l=o.ru(i.documents),c=Ao.createSynthesizedTargetChangeForCurrentChange(n,s&&t.onlineState!=="Offline",r),u=o.applyChanges(l,t.isPrimaryClient,c);hm(t,n,u.au);const h=new Pk(e,n,o);return t.Tu.set(e,h),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),u.snapshot}async function xk(t,e,n){const s=ge(t),r=s.Tu.get(e),i=s.Iu.get(r.targetId);if(i.length>1)return s.Iu.set(r.targetId,i.filter((o=>!Sl(o,e)))),void s.Tu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(r.targetId),s.sharedClientState.isActiveQueryTarget(r.targetId)||await Tu(s.localStore,r.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(r.targetId),n&&Lh(s.remoteStore,r.targetId),Iu(s,r.targetId)})).catch(si)):(Iu(s,r.targetId),await Tu(s.localStore,r.targetId,!0))}async function Mk(t,e){const n=ge(t),s=n.Tu.get(e),r=n.Iu.get(s.targetId);n.isPrimaryClient&&r.length===1&&(n.sharedClientState.removeLocalQueryTarget(s.targetId),Lh(n.remoteStore,s.targetId))}async function Lk(t,e,n){const s=qk(t);try{const r=await(function(o,l){const c=ge(o),u=Le.now(),h=l.reduce(((g,v)=>g.add(v.key)),we());let d,m;return c.persistence.runTransaction("Locally write mutations","readwrite",(g=>{let v=Ln(),I=we();return c.Ns.getEntries(g,h).next((D=>{v=D,v.forEach(((k,M)=>{M.isValidDocument()||(I=I.add(k))}))})).next((()=>c.localDocuments.getOverlayedDocuments(g,v))).next((D=>{d=D;const k=[];for(const M of l){const R=QC(M,d.get(M.key).overlayedDocument);R!=null&&k.push(new Is(M.key,R,Oy(R.value.mapValue),pn.exists(!0)))}return c.mutationQueue.addMutationBatch(g,u,k,l)})).next((D=>{m=D;const k=D.applyToLocalDocumentSet(d,I);return c.documentOverlayCache.saveOverlays(g,D.batchId,k)}))})).then((()=>({batchId:m.batchId,changes:Hy(d)})))})(s.localStore,e);s.sharedClientState.addPendingMutation(r.batchId),(function(o,l,c){let u=o.Vu[o.currentUser.toKey()];u||(u=new We(Te)),u=u.insert(l,c),o.Vu[o.currentUser.toKey()]=u})(s,r.batchId,n),await So(s,r.changes),await Vl(s.remoteStore)}catch(r){const i=jh(r,"Failed to persist write");n.reject(i)}}async function Iv(t,e){const n=ge(t);try{const s=await zP(n.localStore,e);e.targetChanges.forEach(((r,i)=>{const o=n.Au.get(i);o&&(ke(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1,22616),r.addedDocuments.size>0?o.hu=!0:r.modifiedDocuments.size>0?ke(o.hu,14607):r.removedDocuments.size>0&&(ke(o.hu,42227),o.hu=!1))})),await So(n,s,e)}catch(s){await si(s)}}function um(t,e,n){const s=ge(t);if(s.isPrimaryClient&&n===0||!s.isPrimaryClient&&n===1){const r=[];s.Tu.forEach(((i,o)=>{const l=o.view.va(e);l.snapshot&&r.push(l.snapshot)})),(function(o,l){const c=ge(o);c.onlineState=l;let u=!1;c.queries.forEach(((h,d)=>{for(const m of d.Sa)m.va(l)&&(u=!0)})),u&&Hh(c)})(s.eventManager,e),r.length&&s.Pu.H_(r),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function Fk(t,e,n){const s=ge(t);s.sharedClientState.updateQueryState(e,"rejected",n);const r=s.Au.get(e),i=r&&r.key;if(i){let o=new We(oe.comparator);o=o.insert(i,bt.newNoDocument(i,me.min()));const l=we().add(i),c=new Nl(me.min(),new Map,new We(Te),o,l);await Iv(s,c),s.du=s.du.remove(i),s.Au.delete(e),Wh(s)}else await Tu(s.localStore,e,!1).then((()=>Iu(s,e,n))).catch(si)}async function Uk(t,e){const n=ge(t),s=e.batch.batchId;try{const r=await GP(n.localStore,e);Rv(n,s,null),Av(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await So(n,r)}catch(r){await si(r)}}async function $k(t,e,n){const s=ge(t);try{const r=await(function(o,l){const c=ge(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",(u=>{let h;return c.mutationQueue.lookupMutationBatch(u,l).next((d=>(ke(d!==null,37113),h=d.keys(),c.mutationQueue.removeMutationBatch(u,d)))).next((()=>c.mutationQueue.performConsistencyCheck(u))).next((()=>c.documentOverlayCache.removeOverlaysForBatchId(u,h,l))).next((()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,h))).next((()=>c.localDocuments.getDocuments(u,h)))}))})(s.localStore,e);Rv(s,e,n),Av(s,e),s.sharedClientState.updateMutationState(e,"rejected",n),await So(s,r)}catch(r){await si(r)}}function Av(t,e){(t.mu.get(e)||[]).forEach((n=>{n.resolve()})),t.mu.delete(e)}function Rv(t,e,n){const s=ge(t);let r=s.Vu[s.currentUser.toKey()];if(r){const i=r.get(e);i&&(n?i.reject(n):i.resolve(),r=r.remove(e)),s.Vu[s.currentUser.toKey()]=r}}function Iu(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const s of t.Iu.get(e))t.Tu.delete(s),n&&t.Pu.yu(s,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach((s=>{t.Ru.containsKey(s)||Sv(t,s)}))}function Sv(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(Lh(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),Wh(t))}function hm(t,e,n){for(const s of n)s instanceof Tv?(t.Ru.addReference(s.key,e),Bk(t,s)):s instanceof wv?(Z(qh,"Document no longer in limbo: "+s.key),t.Ru.removeReference(s.key,e),t.Ru.containsKey(s.key)||Sv(t,s.key)):fe(19791,{wu:s})}function Bk(t,e){const n=e.key,s=n.path.canonicalString();t.du.get(n)||t.Eu.has(s)||(Z(qh,"New document in limbo: "+n),t.Eu.add(s),Wh(t))}function Wh(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new oe(He.fromString(e)),s=t.fu.next();t.Au.set(s,new kk(n)),t.du=t.du.insert(n,s),mv(t.remoteStore,new is(dn(Ch(n.path)),s,"TargetPurposeLimboResolution",bl.ce))}}async function So(t,e,n){const s=ge(t),r=[],i=[],o=[];s.Tu.isEmpty()||(s.Tu.forEach(((l,c)=>{o.push(s.pu(c,e,n).then((u=>{if((u||n)&&s.isPrimaryClient){const h=u?!u.fromCache:n?.targetChanges.get(c.targetId)?.current;s.sharedClientState.updateQueryState(c.targetId,h?"current":"not-current")}if(u){r.push(u);const h=xh.As(c.targetId,u);i.push(h)}})))})),await Promise.all(o),s.Pu.H_(r),await(async function(c,u){const h=ge(c);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",(d=>U.forEach(u,(m=>U.forEach(m.Es,(g=>h.persistence.referenceDelegate.addReference(d,m.targetId,g))).next((()=>U.forEach(m.ds,(g=>h.persistence.referenceDelegate.removeReference(d,m.targetId,g)))))))))}catch(d){if(!ri(d))throw d;Z(Mh,"Failed to update sequence numbers: "+d)}for(const d of u){const m=d.targetId;if(!d.fromCache){const g=h.Ms.get(m),v=g.snapshotVersion,I=g.withLastLimboFreeSnapshotVersion(v);h.Ms=h.Ms.insert(m,I)}}})(s.localStore,i))}async function jk(t,e){const n=ge(t);if(!n.currentUser.isEqual(e)){Z(qh,"User change. New user:",e.toKey());const s=await hv(n.localStore,e);n.currentUser=e,(function(i,o){i.mu.forEach((l=>{l.forEach((c=>{c.reject(new re(B.CANCELLED,o))}))})),i.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await So(n,s.Ls)}}function Hk(t,e){const n=ge(t),s=n.Au.get(e);if(s&&s.hu)return we().add(s.key);{let r=we();const i=n.Iu.get(e);if(!i)return r;for(const o of i){const l=n.Tu.get(o);r=r.unionWith(l.view.nu)}return r}}function Cv(t){const e=ge(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Iv.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Hk.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Fk.bind(null,e),e.Pu.H_=Ak.bind(null,e.eventManager),e.Pu.yu=Rk.bind(null,e.eventManager),e}function qk(t){const e=ge(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Uk.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=$k.bind(null,e),e}class Ya{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Dl(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return WP(this.persistence,new jP,e.initialUser,this.serializer)}Cu(e){return new uv(Vh.mi,this.serializer)}Du(e){return new XP}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Ya.provider={build:()=>new Ya};class Wk extends Ya{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){ke(this.persistence.referenceDelegate instanceof Qa,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new SP(s,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?kt.withCacheSize(this.cacheSizeBytes):kt.DEFAULT;return new uv((s=>Qa.mi(s,n)),this.serializer)}}class Au{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>um(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=jk.bind(null,this.syncEngine),await Ek(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new wk})()}createDatastore(e){const n=Dl(e.databaseInfo.databaseId),s=(function(i){return new sk(i)})(e.databaseInfo);return(function(i,o,l,c){return new ak(i,o,l,c)})(e.authCredentials,e.appCheckCredentials,s,n)}createRemoteStore(e){return(function(s,r,i,o,l){return new ck(s,r,i,o,l)})(this.localStore,this.datastore,e.asyncQueue,(n=>um(this.syncEngine,n,0)),(function(){return rm.v()?new rm:new ZP})())}createSyncEngine(e,n){return(function(r,i,o,l,c,u,h){const d=new Nk(r,i,o,l,c,u);return h&&(d.gu=!0),d})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){await(async function(n){const s=ge(n);Z(er,"RemoteStore shutting down."),s.Ea.add(5),await Ro(s),s.Aa.shutdown(),s.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Au.provider={build:()=>new Au};class Gk{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Mn("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}const ws="FirestoreClient";class zk{constructor(e,n,s,r,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=s,this.databaseInfo=r,this.user=Tt.UNAUTHENTICATED,this.clientId=wl.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(s,(async o=>{Z(ws,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(s,(o=>(Z(ws,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ds;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const s=jh(n,"Failed to shutdown persistence");e.reject(s)}})),e.promise}}async function Nc(t,e){t.asyncQueue.verifyOperationInProgress(),Z(ws,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let s=n.initialUser;t.setCredentialChangeListener((async r=>{s.isEqual(r)||(await hv(e.localStore,r),s=r)})),e.persistence.setDatabaseDeletedListener((()=>t.terminate())),t._offlineComponents=e}async function fm(t,e){t.asyncQueue.verifyOperationInProgress();const n=await Kk(t);Z(ws,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener((s=>om(e.remoteStore,s))),t.setAppCheckTokenChangeListener(((s,r)=>om(e.remoteStore,r))),t._onlineComponents=e}async function Kk(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Z(ws,"Using user provided OfflineComponentProvider");try{await Nc(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(r){return r.name==="FirebaseError"?r.code===B.FAILED_PRECONDITION||r.code===B.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11})(n))throw n;Zs("Error using user provided cache. Falling back to memory cache: "+n),await Nc(t,new Ya)}}else Z(ws,"Using default OfflineComponentProvider"),await Nc(t,new Wk(void 0));return t._offlineComponents}async function Pv(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Z(ws,"Using user provided OnlineComponentProvider"),await fm(t,t._uninitializedComponentsProvider._online)):(Z(ws,"Using default OnlineComponentProvider"),await fm(t,new Au))),t._onlineComponents}function Qk(t){return Pv(t).then((e=>e.syncEngine))}async function Jk(t){const e=await Pv(t),n=e.eventManager;return n.onListen=Dk.bind(null,e.syncEngine),n.onUnlisten=xk.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=Ok.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=Mk.bind(null,e.syncEngine),n}function Yk(t,e,n={}){const s=new ds;return t.asyncQueue.enqueueAndForget((async()=>(function(i,o,l,c,u){const h=new Gk({next:m=>{h.Nu(),o.enqueueAndForget((()=>Ik(i,d)));const g=m.docs.has(l);!g&&m.fromCache?u.reject(new re(B.UNAVAILABLE,"Failed to get document because the client is offline.")):g&&m.fromCache&&c&&c.source==="server"?u.reject(new re(B.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(m)},error:m=>u.reject(m)}),d=new Sk(Ch(l.path),h,{includeMetadataChanges:!0,qa:!0});return bk(i,d)})(await Jk(t),t.asyncQueue,e,n,s))),s.promise}function kv(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}const dm=new Map;const Nv="firestore.googleapis.com",pm=!0;class mm{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new re(B.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Nv,this.ssl=pm}else this.host=e.host,this.ssl=e.ssl??pm;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=cv;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<AP)throw new re(B.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}wy("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=kv(e.experimentalLongPollingOptions??{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new re(B.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new re(B.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new re(B.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(s,r){return s.timeoutSeconds===r.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Gh{constructor(e,n,s,r){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=s,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new mm({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new re(B.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new re(B.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new mm(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(s){if(!s)return new Ty;switch(s.type){case"firstParty":return new nC(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new re(B.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const s=dm.get(n);s&&(Z("ComponentProvider","Removing Datastore"),dm.delete(n),s.terminate())})(this),Promise.resolve()}}function Dv(t,e,n,s={}){t=gs(t,Gh);const r=Zr(e),i=t._getSettings(),o={...i,emulatorOptions:t._getEmulatorOptions()},l=`${e}:${n}`;r&&(A_(`https://${l}`),R_("Firestore",!0)),i.host!==Nv&&i.host!==l&&Zs("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const c={...i,host:l,ssl:r,emulatorOptions:s};if(!Ks(c,o)&&(t._setSettings(c),s.mockUserToken)){let u,h;if(typeof s.mockUserToken=="string")u=s.mockUserToken,h=Tt.MOCK_USER;else{u=aA(s.mockUserToken,t._app?.options.projectId);const d=s.mockUserToken.sub||s.mockUserToken.user_id;if(!d)throw new re(B.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new Tt(d)}t._authCredentials=new ZS(new Ey(u,h))}}class xl{constructor(e,n,s){this.converter=n,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new xl(this.firestore,e,this._query)}}class Ze{constructor(e,n,s){this.converter=n,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Qr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ze(this.firestore,e,this._key)}toJSON(){return{type:Ze._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,s){if(bo(n,Ze._jsonSchema))return new Ze(e,s||null,new oe(He.fromString(n.referencePath)))}}Ze._jsonSchemaVersion="firestore/documentReference/1.0",Ze._jsonSchema={type:Xe("string",Ze._jsonSchemaVersion),referencePath:Xe("string")};class Qr extends xl{constructor(e,n,s){super(e,n,Ch(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ze(this.firestore,null,new oe(e))}withConverter(e){return new Qr(this.firestore,e,this._path)}}function Ru(t,e,...n){if(t=ft(t),arguments.length===1&&(e=wl.newId()),lC("doc","path",e),t instanceof Gh){const s=He.fromString(e,...n);return Pp(s),new Ze(t,null,new oe(s))}{if(!(t instanceof Ze||t instanceof Qr))throw new re(B.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=t._path.child(He.fromString(e,...n));return Pp(s),new Ze(t.firestore,t instanceof Qr?t.converter:null,new oe(s))}}const gm="AsyncQueue";class _m{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new dv(this,"async_queue_retry"),this._c=()=>{const s=kc();s&&Z(gm,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=e;const n=kc();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=kc();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new ds;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!ri(e))throw e;Z(gm,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((s=>{throw this.nc=s,this.rc=!1,Mn("INTERNAL UNHANDLED ERROR: ",ym(s)),s})).then((s=>(this.rc=!1,s))))));return this.ac=n,n}enqueueAfterDelay(e,n,s){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const r=Bh.createAndSchedule(this,e,n,s,(i=>this.hc(i)));return this.tc.push(r),r}uc(){this.nc&&fe(47125,{Pc:ym(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,s)=>n.targetTimeMs-s.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function ym(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class Co extends Gh{constructor(e,n,s,r){super(e,n,s,r),this.type="firestore",this._queue=new _m,this._persistenceKey=r?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new _m(e),this._firestoreClient=void 0,await e}}}function Ov(t,e){const n=typeof t=="object"?t:k_(),s=typeof t=="string"?t:ja,r=fh(n,"firestore").getImmediate({identifier:s});if(!r._initialized){const i=iA("firestore");i&&Dv(r,...i)}return r}function zh(t){if(t._terminated)throw new re(B.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||Xk(t),t._firestoreClient}function Xk(t){const e=t._freezeSettings(),n=(function(r,i,o,l){return new vC(r,i,o,l.host,l.ssl,l.experimentalForceLongPolling,l.experimentalAutoDetectLongPolling,kv(l.experimentalLongPollingOptions),l.useFetchStreams,l.isUsingEmulator)})(t._databaseId,t._app?.options.appId||"",t._persistenceKey,e);t._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new zk(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&(function(r){const i=r?._online.build();return{_offline:r?._offline.build(i),_online:i}})(t._componentsProvider))}class Lt{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Lt(dt.fromBase64String(e))}catch(n){throw new re(B.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Lt(dt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Lt._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(bo(e,Lt._jsonSchema))return Lt.fromBase64String(e.bytes)}}Lt._jsonSchemaVersion="firestore/bytes/1.0",Lt._jsonSchema={type:Xe("string",Lt._jsonSchemaVersion),bytes:Xe("string")};class Po{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new re(B.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ut(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Ml{constructor(e){this._methodName=e}}class Qt{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new re(B.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new re(B.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Te(this._lat,e._lat)||Te(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Qt._jsonSchemaVersion}}static fromJSON(e){if(bo(e,Qt._jsonSchema))return new Qt(e.latitude,e.longitude)}}Qt._jsonSchemaVersion="firestore/geoPoint/1.0",Qt._jsonSchema={type:Xe("string",Qt._jsonSchemaVersion),latitude:Xe("number"),longitude:Xe("number")};class Jt{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(s,r){if(s.length!==r.length)return!1;for(let i=0;i<s.length;++i)if(s[i]!==r[i])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Jt._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(bo(e,Jt._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new Jt(e.vectorValues);throw new re(B.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Jt._jsonSchemaVersion="firestore/vectorValue/1.0",Jt._jsonSchema={type:Xe("string",Jt._jsonSchemaVersion),vectorValues:Xe("object")};const Zk=/^__.*__$/;class e2{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return this.fieldMask!==null?new Is(e,this.data,this.fieldMask,n,this.fieldTransforms):new Io(e,this.data,n,this.fieldTransforms)}}class Vv{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return new Is(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function xv(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw fe(40011,{Ac:t})}}class Kh{constructor(e,n,s,r,i,o){this.settings=e,this.databaseId=n,this.serializer=s,this.ignoreUndefinedProperties=r,i===void 0&&this.Rc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Kh({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const n=this.path?.child(e),s=this.Vc({path:n,fc:!1});return s.gc(e),s}yc(e){const n=this.path?.child(e),s=this.Vc({path:n,fc:!1});return s.Rc(),s}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Xa(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(xv(this.Ac)&&Zk.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class t2{constructor(e,n,s){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=s||Dl(e)}Cc(e,n,s,r=!1){return new Kh({Ac:e,methodName:n,Dc:s,path:ut.emptyPath(),fc:!1,bc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Mv(t){const e=t._freezeSettings(),n=Dl(t._databaseId);return new t2(t._databaseId,!!e.ignoreUndefinedProperties,n)}function n2(t,e,n,s,r,i={}){const o=t.Cc(i.merge||i.mergeFields?2:0,e,n,r);Qh("Data must be an object, but it was:",o,s);const l=Lv(s,o);let c,u;if(i.merge)c=new Ft(o.fieldMask),u=o.fieldTransforms;else if(i.mergeFields){const h=[];for(const d of i.mergeFields){const m=Su(e,d,n);if(!o.contains(m))throw new re(B.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);Uv(h,m)||h.push(m)}c=new Ft(h),u=o.fieldTransforms.filter((d=>c.covers(d.field)))}else c=null,u=o.fieldTransforms;return new e2(new Nt(l),c,u)}class Ll extends Ml{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Ll}}function s2(t,e,n,s){const r=t.Cc(1,e,n);Qh("Data must be an object, but it was:",r,s);const i=[],o=Nt.empty();bs(s,((c,u)=>{const h=Jh(e,c,n);u=ft(u);const d=r.yc(h);if(u instanceof Ll)i.push(h);else{const m=Fl(u,d);m!=null&&(i.push(h),o.set(h,m))}}));const l=new Ft(i);return new Vv(o,l,r.fieldTransforms)}function r2(t,e,n,s,r,i){const o=t.Cc(1,e,n),l=[Su(e,s,n)],c=[r];if(i.length%2!=0)throw new re(B.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<i.length;m+=2)l.push(Su(e,i[m])),c.push(i[m+1]);const u=[],h=Nt.empty();for(let m=l.length-1;m>=0;--m)if(!Uv(u,l[m])){const g=l[m];let v=c[m];v=ft(v);const I=o.yc(g);if(v instanceof Ll)u.push(g);else{const D=Fl(v,I);D!=null&&(u.push(g),h.set(g,D))}}const d=new Ft(u);return new Vv(h,d,o.fieldTransforms)}function Fl(t,e){if(Fv(t=ft(t)))return Qh("Unsupported field value:",e,t),Lv(t,e);if(t instanceof Ml)return(function(s,r){if(!xv(r.Ac))throw r.Sc(`${s._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Sc(`${s._methodName}() is not currently supported inside arrays`);const i=s._toFieldTransform(r);i&&r.fieldTransforms.push(i)})(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(s,r){const i=[];let o=0;for(const l of s){let c=Fl(l,r.wc(o));c==null&&(c={nullValue:"NULL_VALUE"}),i.push(c),o++}return{arrayValue:{values:i}}})(t,e)}return(function(s,r){if((s=ft(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return HC(r.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const i=Le.fromDate(s);return{timestampValue:Ka(r.serializer,i)}}if(s instanceof Le){const i=new Le(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:Ka(r.serializer,i)}}if(s instanceof Qt)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof Lt)return{bytesValue:nv(r.serializer,s._byteString)};if(s instanceof Ze){const i=r.databaseId,o=s.firestore._databaseId;if(!o.isEqual(i))throw r.Sc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Dh(s.firestore._databaseId||r.databaseId,s._key.path)}}if(s instanceof Jt)return(function(o,l){return{mapValue:{fields:{[Ny]:{stringValue:Dy},[Ha]:{arrayValue:{values:o.toArray().map((u=>{if(typeof u!="number")throw l.Sc("VectorValues must only contain numeric values.");return Ph(l.serializer,u)}))}}}}}})(s,r);throw r.Sc(`Unsupported field value: ${wh(s)}`)})(t,e)}function Lv(t,e){const n={};return Ay(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):bs(t,((s,r)=>{const i=Fl(r,e.mc(s));i!=null&&(n[s]=i)})),{mapValue:{fields:n}}}function Fv(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Le||t instanceof Qt||t instanceof Lt||t instanceof Ze||t instanceof Ml||t instanceof Jt)}function Qh(t,e,n){if(!Fv(n)||!by(n)){const s=wh(n);throw s==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+s)}}function Su(t,e,n){if((e=ft(e))instanceof Po)return e._internalPath;if(typeof e=="string")return Jh(t,e);throw Xa("Field path arguments must be of type string or ",t,!1,void 0,n)}const i2=new RegExp("[~\\*/\\[\\]]");function Jh(t,e,n){if(e.search(i2)>=0)throw Xa(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Po(...e.split("."))._internalPath}catch{throw Xa(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Xa(t,e,n,s,r){const i=s&&!s.isEmpty(),o=r!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let c="";return(i||o)&&(c+=" (found",i&&(c+=` in field ${s}`),o&&(c+=` in document ${r}`),c+=")"),new re(B.INVALID_ARGUMENT,l+t+c)}function Uv(t,e){return t.some((n=>n.isEqual(e)))}class $v{constructor(e,n,s,r,i){this._firestore=e,this._userDataWriter=n,this._key=s,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Ze(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new o2(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Bv("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class o2 extends $v{data(){return super.data()}}function Bv(t,e){return typeof e=="string"?Jh(t,e):e instanceof Po?e._internalPath:e._delegate._internalPath}class jv{convertValue(e,n="none"){switch(Es(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Qe(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(vs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw fe(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const s={};return bs(e,((r,i)=>{s[r]=this.convertValue(i,n)})),s}convertVectorValue(e){const n=e.fields?.[Ha].arrayValue?.values?.map((s=>Qe(s.doubleValue)));return new Jt(n)}convertGeoPoint(e){return new Qt(Qe(e.latitude),Qe(e.longitude))}convertArray(e,n){return(e.values||[]).map((s=>this.convertValue(s,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const s=Al(e);return s==null?null:this.convertValue(s,n);case"estimate":return this.convertTimestamp(io(e));default:return null}}convertTimestamp(e){const n=ys(e);return new Le(n.seconds,n.nanos)}convertDocumentKey(e,n){const s=He.fromString(e);ke(lv(s),9688,{name:e});const r=new qr(s.get(1),s.get(3)),i=new oe(s.popFirst(5));return r.isEqual(n)||Mn(`Document ${i} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}function a2(t,e,n){let s;return s=t?t.toFirestore(e):e,s}class wr{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ps extends $v{constructor(e,n,s,r,i,o){super(e,n,s,r,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Gi(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const s=this._document.data.field(Bv("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new re(B.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=ps._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}ps._jsonSchemaVersion="firestore/documentSnapshot/1.0",ps._jsonSchema={type:Xe("string",ps._jsonSchemaVersion),bundleSource:Xe("string","DocumentSnapshot"),bundleName:Xe("string"),bundle:Xe("string")};class Gi extends ps{data(e={}){return super.data(e)}}class xr{constructor(e,n,s,r){this._firestore=e,this._userDataWriter=n,this._snapshot=r,this.metadata=new wr(r.hasPendingWrites,r.fromCache),this.query=s}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((s=>{e.call(n,new Gi(this._firestore,this._userDataWriter,s.key,s,new wr(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new re(B.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(r,i){if(r._snapshot.oldDocs.isEmpty()){let o=0;return r._snapshot.docChanges.map((l=>{const c=new Gi(r._firestore,r._userDataWriter,l.doc.key,l.doc,new wr(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);return l.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}}))}{let o=r._snapshot.oldDocs;return r._snapshot.docChanges.filter((l=>i||l.type!==3)).map((l=>{const c=new Gi(r._firestore,r._userDataWriter,l.doc.key,l.doc,new wr(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);let u=-1,h=-1;return l.type!==0&&(u=o.indexOf(l.doc.key),o=o.delete(l.doc.key)),l.type!==1&&(o=o.add(l.doc),h=o.indexOf(l.doc.key)),{type:l2(l.type),doc:c,oldIndex:u,newIndex:h}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new re(B.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=xr._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=wl.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],s=[],r=[];return this.docs.forEach((i=>{i._document!==null&&(n.push(i._document),s.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),r.push(i.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function l2(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return fe(61501,{type:t})}}function Hv(t){t=gs(t,Ze);const e=gs(t.firestore,Co);return Yk(zh(e),t._key).then((n=>h2(e,t,n)))}xr._jsonSchemaVersion="firestore/querySnapshot/1.0",xr._jsonSchema={type:Xe("string",xr._jsonSchemaVersion),bundleSource:Xe("string","QuerySnapshot"),bundleName:Xe("string"),bundle:Xe("string")};class c2 extends jv{constructor(e){super(),this.firestore=e}convertBytes(e){return new Lt(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Ze(this.firestore,null,n)}}function qv(t,e,n){t=gs(t,Ze);const s=gs(t.firestore,Co),r=a2(t.converter,e);return Yh(s,[n2(Mv(s),"setDoc",t._key,r,t.converter!==null,n).toMutation(t._key,pn.none())])}function u2(t,e,n,...s){t=gs(t,Ze);const r=gs(t.firestore,Co),i=Mv(r);let o;return o=typeof(e=ft(e))=="string"||e instanceof Po?r2(i,"updateDoc",t._key,e,n,s):s2(i,"updateDoc",t._key,e),Yh(r,[o.toMutation(t._key,pn.exists(!0))])}function Yh(t,e){return(function(s,r){const i=new ds;return s.asyncQueue.enqueueAndForget((async()=>Lk(await Qk(s),r,i))),i.promise})(zh(t),e)}function h2(t,e,n){const s=n.docs.get(e._key),r=new c2(t);return new ps(t,r,e._key,s,new wr(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(r){ni=r})(ei),Br(new Qs("firestore",((s,{instanceIdentifier:r,options:i})=>{const o=s.getProvider("app").getImmediate(),l=new Co(new eC(s.getProvider("auth-internal")),new sC(o,s.getProvider("app-check-internal")),(function(u,h){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new re(B.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new qr(u.options.projectId,h)})(o,r),o);return i={useFetchStreams:n,...i},l._setSettings(i),l}),"PUBLIC").setMultipleInstances(!0)),hs(Ap,Rp,e),hs(Ap,Rp,"esm2020")})();const f2=Object.freeze(Object.defineProperty({__proto__:null,AbstractUserDataWriter:jv,Bytes:Lt,CollectionReference:Qr,DocumentReference:Ze,DocumentSnapshot:ps,FieldPath:Po,FieldValue:Ml,Firestore:Co,FirestoreError:re,GeoPoint:Qt,Query:xl,QueryDocumentSnapshot:Gi,QuerySnapshot:xr,SnapshotMetadata:wr,Timestamp:Le,VectorValue:Jt,_AutoId:wl,_ByteString:dt,_DatabaseId:qr,_DocumentKey:oe,_EmptyAuthCredentialsProvider:Ty,_FieldPath:ut,_cast:gs,_logWarn:Zs,_validateIsNotUsedTogether:wy,connectFirestoreEmulator:Dv,doc:Ru,ensureFirestoreConfigured:zh,executeWrite:Yh,getDoc:Hv,getFirestore:Ov,setDoc:qv,updateDoc:u2},Symbol.toStringTag,{value:"Module"}));var d2="firebase",p2="12.7.0";hs(d2,p2,"app");const m2={apiKey:"AIzaSyCx092q7up_BXFgK2e13A-IQ3uDjwf6J5A",authDomain:"accsuite117.firebaseapp.com",projectId:"accsuite117",storageBucket:"accsuite117.firebasestorage.app",messagingSenderId:"352958845592",appId:"1:352958845592:web:bb6a7fbe04f6181707f6ed"};let co,Us,Za;ep().length?co=ep()[0]:co=P_(m2);Us=YS(co);Za=Ov(co);const g2=Object.freeze(Object.defineProperty({__proto__:null,get app(){return co},get auth(){return Us},get db(){return Za}},Symbol.toStringTag,{value:"Module"})),jt=le(null),vm=le(!0),xs=le(null);let Em=!1;function Ul(){const t=Je(()=>!!jt.value),e=Je(()=>jt.value?.emailVerified??!1),n=Je(()=>jt.value?.email??""),s=Je(()=>jt.value?.displayName??""),r=()=>{Em||(Em=!0,UR(Us,m=>{jt.value=m,vm.value=!1,console.log("[AUTH] State changed:",m?.email??"logged out")}))},i=async(m,g,v)=>{xs.value=null;try{const D=(await OR(Us,m,g)).user;return await MR(D,{displayName:v}),await qv(Ru(Za,"users",D.uid),{nickname:v,email:m,createdAt:new Date().toISOString(),emailVerified:!1}),await pp(D),console.log("[AUTH] Registered:",m,"Verification email sent"),{success:!0,user:D}}catch(I){return console.error("[AUTH] Register error:",I.code),xs.value=d(I.code),{success:!1,error:xs.value}}},o=async(m,g)=>{xs.value=null;try{const v=await VR(Us,m,g);return console.log("[AUTH] Logged in:",m),{success:!0,user:v.user}}catch(v){return console.error("[AUTH] Login error:",v.code),xs.value=d(v.code),{success:!1,error:xs.value}}},l=async()=>{try{return await $R(Us),console.log("[AUTH] Logged out"),{success:!0}}catch(m){return console.error("[AUTH] Logout error:",m),{success:!1,error:m.message}}},c=async()=>{if(!jt.value)return{success:!1,error:"Utente non autenticato"};try{return await pp(jt.value),console.log("[AUTH] Verification email resent"),{success:!0}}catch(m){return console.error("[AUTH] Resend error:",m.code),{success:!1,error:d(m.code)}}},u=async()=>{if(!jt.value)return{verified:!1,error:"Utente non autenticato"};try{await jt.value.reload(),jt.value=Us.currentUser;const m=jt.value?.emailVerified??!1;return console.log("[AUTH] Email verified check:",m),{verified:m,error:null}}catch(m){return console.error("[AUTH] Check verification error:",m),{verified:!1,error:m.message}}},h=async m=>{try{const g=await Hv(Ru(Za,"users",m));return g.exists()?g.data():null}catch(g){return console.error("[AUTH] Get profile error:",g),null}},d=m=>({"auth/email-already-in-use":"Email gi registrata","auth/weak-password":"Password troppo debole (min. 6 caratteri)","auth/invalid-email":"Email non valida","auth/user-not-found":"Utente non trovato","auth/wrong-password":"Password errata","auth/invalid-credential":"Credenziali non valide","auth/too-many-requests":"Troppi tentativi, riprova pi tardi","auth/network-request-failed":"Errore di rete, controlla la connessione"})[m]||"Errore di autenticazione";return r(),{currentUser:jt,isLoading:vm,authError:xs,isAuthenticated:t,isEmailVerified:e,userEmail:n,userDisplayName:s,register:i,login:o,logout:l,resendVerificationEmail:c,checkEmailVerified:u,getUserProfile:h}}const _2={class:"auth-overlay"},y2={class:"auth-card__body"},v2={key:0,class:"auth-nav"},E2={class:"auth-form-container"},T2=Fe({__name:"AuthOverlay",emits:["login-success","register-success"],setup(t,{emit:e}){const n=le("login"),s=le("login"),r=le(),i=le(),o=le(),{login:l,register:c}=Ul(),u=le(!1),h=e,d=Je(()=>{switch(s.value){case"register":return"form-height--register";case"reset":return"form-height--reset";default:return"form-height--login"}}),m=M=>{n.value=M,s.value=M},g=()=>{s.value="reset"},v=()=>{s.value="login",n.value="login",o.value?.reset()},I=async M=>{u.value=!0;const R=await l(M.email,M.password);u.value=!1,R.success?h("login-success",M.email):r.value?.setError(R.error)},D=async M=>{u.value=!0;const R=await c(M.email,M.password,M.nickname);u.value=!1,R.success?h("register-success",M.email):i.value?.setError(R.error)},k=M=>{console.log("[AUTH] Reset:",M),o.value?.setSuccess(!0)};return(M,R)=>{const O=q0,L=G0,z=J0;return W(),Y("div",_2,[R[4]||(R[4]=E("div",{class:"auth-overlay__ambient"},[E("div",{class:"ambient-glow ambient-glow--red"}),E("div",{class:"ambient-glow ambient-glow--gold"})],-1)),E("div",{class:Me(["auth-card",d.value])},[R[3]||(R[3]=E("div",{class:"auth-card__glow"},null,-1)),E("div",y2,[R[2]||(R[2]=E("header",{class:"auth-header"},[E("div",{class:"brand"},[E("span",{class:"brand__badge"},"ACC"),E("span",{class:"brand__name"},"TELEMETRY")])],-1)),s.value!=="reset"?(W(),Y("nav",v2,[E("button",{class:Me(["auth-nav__item",{"is-active":n.value==="login"}]),onClick:R[0]||(R[0]=C=>m("login"))}," Login ",2),E("button",{class:Me(["auth-nav__item",{"is-active":n.value==="register"}]),onClick:R[1]||(R[1]=C=>m("register"))}," Registrati ",2)])):$t("",!0),E("div",E2,[ce(ml,{name:"liquid",mode:"out-in"},{default:_t(()=>[s.value==="login"?(W(),je(O,{key:"login",ref_key:"loginFormRef",ref:r,onSubmit:I,onForgotPassword:g},null,512)):s.value==="register"?(W(),je(L,{key:"register",ref_key:"registerFormRef",ref:i,onSubmit:D},null,512)):(W(),je(z,{key:"reset",ref_key:"resetFormRef",ref:o,onSubmit:k,onBack:v},null,512))]),_:1})])])],2)])}}}),w2=Object.assign(ze(T2,[["__scopeId","data-v-5de86b96"]]),{__name:"AuthOverlay"}),b2={class:"email-verification"},I2={class:"verify-email"},A2={key:0,class:"error-message"},R2={key:1,class:"error-message resend-error"},S2=["disabled"],C2=["disabled"],P2=Fe({__name:"RegistrationSuccess",props:{email:{},requireEmailVerification:{type:Boolean}},emits:["goToDashboard","resendEmail"],setup(t,{emit:e}){const n=e,{checkEmailVerified:s,resendVerificationEmail:r}=Ul(),i=le(!1),o=le(!1),l=le(null),c=le(!1),u=le(!1),h=async()=>{i.value=!0,l.value=null,u.value=!1;const m=await r();i.value=!1,m.success?(o.value=!0,setTimeout(()=>o.value=!1,3e3)):l.value=m.error||"Errore invio email",n("resendEmail")},d=async()=>{c.value=!0,u.value=!1;const m=await s();c.value=!1,m.verified?n("goToDashboard"):u.value=!0};return(m,g)=>(W(),Y("div",b2,[g[2]||(g[2]=E("div",{class:"verify-icon"},"",-1)),g[3]||(g[3]=E("h2",{class:"verify-title"},"Verifica la tua email",-1)),E("p",I2,te(t.email),1),g[4]||(g[4]=E("div",{class:"verify-box"},[E("p",{class:"verify-text"},"Clicca il link nell'email per attivare l'account."),E("p",{class:"verify-hint"},"Controlla anche Spam")],-1)),u.value?(W(),Y("div",A2," Email non verificata ")):$t("",!0),l.value?(W(),Y("div",R2,te(l.value),1)):$t("",!0),E("button",{class:Me(["verify-btn",{"verify-btn--loading":c.value}]),disabled:c.value,onClick:d},[c.value?(W(),Y(Ie,{key:0},[g[0]||(g[0]=E("span",{class:"spinner"},null,-1)),g[1]||(g[1]=Be(" Controllo... ",-1))],64)):(W(),Y(Ie,{key:1},[Be(" Ho confermato l'email ")],64))],10,S2),E("button",{class:"resend-btn",disabled:i.value||o.value,onClick:h},[i.value?(W(),Y(Ie,{key:0},[Be("Invio in corso...")],64)):o.value?(W(),Y(Ie,{key:1},[Be(" Email inviata")],64)):(W(),Y(Ie,{key:2},[Be("Rinvia email di verifica")],64))],8,C2)]))}}),k2=Object.assign(ze(P2,[["__scopeId","data-v-f958603b"]]),{__name:"AuthRegistrationSuccess"}),N2="modulepreload",D2=function(t,e){return new URL(t,e).href},Tm={},el=function(e,n,s){let r=Promise.resolve();if(n&&n.length>0){let u=function(h){return Promise.all(h.map(d=>Promise.resolve(d).then(m=>({status:"fulfilled",value:m}),m=>({status:"rejected",reason:m}))))};const o=document.getElementsByTagName("link"),l=document.querySelector("meta[property=csp-nonce]"),c=l?.nonce||l?.getAttribute("nonce");r=u(n.map(h=>{if(h=D2(h,s),h in Tm)return;Tm[h]=!0;const d=h.endsWith(".css"),m=d?'[rel="stylesheet"]':"";if(s)for(let v=o.length-1;v>=0;v--){const I=o[v];if(I.href===h&&(!d||I.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${h}"]${m}`))return;const g=document.createElement("link");if(g.rel=d?"stylesheet":N2,d||(g.as="script"),g.crossOrigin="",g.href=h,c&&g.setAttribute("nonce",c),document.head.appendChild(g),d)return new Promise((v,I)=>{g.addEventListener("load",v),g.addEventListener("error",()=>I(new Error(`Unable to preload CSS for ${h}`)))})}))}function i(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return r.then(o=>{for(const l of o||[])l.status==="rejected"&&i(l.reason);return e().catch(i)})},O2={class:"user-dropdown"},V2={class:"user-name"},x2={key:0,class:"dropdown-menu"},M2=Fe({__name:"UserDropdown",props:{userName:{}},emits:["logout","goToProfile"],setup(t,{emit:e}){const n=e,s=le(!1),r=()=>{s.value=!s.value},i=()=>{s.value=!1},o=()=>{i(),n("goToProfile")},l=()=>{i(),n("logout")};return(c,u)=>{const h=kT("click-outside");return $s((W(),Y("div",O2,[E("button",{class:"dropdown-trigger",onClick:r},[E("span",V2,te(t.userName),1),(W(),Y("svg",{class:Me(["arrow-icon",{"arrow-icon--open":s.value}]),width:"12",height:"12",viewBox:"0 0 12 12",fill:"none"},[...u[0]||(u[0]=[E("path",{d:"M3 4.5L6 7.5L9 4.5",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)])],2))]),ce(ml,{name:"dropdown"},{default:_t(()=>[s.value?(W(),Y("div",x2,[E("button",{class:"dropdown-item",onClick:o},[...u[1]||(u[1]=[E("svg",{class:"item-icon",width:"16",height:"16",viewBox:"0 0 16 16",fill:"none"},[E("circle",{cx:"8",cy:"5",r:"3",stroke:"currentColor","stroke-width":"1.5"}),E("path",{d:"M2 14c0-3 2.5-5 6-5s6 2 6 5",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round"})],-1),Be(" Profilo ",-1)])]),u[3]||(u[3]=E("button",{class:"dropdown-item dropdown-item--disabled",disabled:""},[E("svg",{class:"item-icon",width:"16",height:"16",viewBox:"0 0 16 16",fill:"none"},[E("circle",{cx:"8",cy:"8",r:"6",stroke:"currentColor","stroke-width":"1.5"}),E("path",{d:"M8 5v3l2 2",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round"})]),Be(" Impostazioni ")],-1)),u[4]||(u[4]=E("div",{class:"dropdown-divider"},null,-1)),E("button",{class:"dropdown-item dropdown-item--danger",onClick:l},[...u[2]||(u[2]=[E("svg",{class:"item-icon",width:"16",height:"16",viewBox:"0 0 16 16",fill:"none"},[E("path",{d:"M6 2H4a2 2 0 00-2 2v8a2 2 0 002 2h2M11 11l3-3-3-3M14 8H6",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"})],-1),Be(" Logout ",-1)])])])):$t("",!0)]),_:1})])),[[h,i]])}}}),Wv=Object.assign(ze(M2,[["__scopeId","data-v-90fbbde4"]]),{__name:"UiUserDropdown"}),L2={class:"profile-page"},F2={class:"profile-header"},U2={class:"header-inner"},$2={class:"header-left"},B2={class:"header-right"},j2={class:"profile-main"},H2={class:"profile-container"},q2={class:"profile-grid"},W2={class:"profile-sidebar"},G2={class:"user-info"},z2={class:"user-nickname"},K2={class:"user-email"},Q2={class:"profile-content"},J2={class:"profile-card"},Y2={class:"equipment-form"},X2={class:"form-group"},Z2={class:"form-group"},eN={class:"form-group"},tN={class:"form-group"},nN=["disabled"],sN=Fe({__name:"ProfilePage",props:{userEmail:{},userNickname:{}},emits:["logout","back"],setup(t,{emit:e}){const n=t,s=e,{currentUser:r,getUserProfile:i}=Ul(),o=Je(()=>n.userNickname?n.userNickname:n.userEmail?n.userEmail.split("@")[0]:"Utente"),l=le({volante:"",corona:"",pedaliera:"",struttura:""}),c=le(!1),u=le(!1);Lr(async()=>{if(r.value){const g=await i(r.value.uid);g?.equipment&&(l.value={...l.value,...g.equipment})}});const h=async()=>{if(r.value){c.value=!0;try{const{doc:g,updateDoc:v}=await el(async()=>{const{doc:D,updateDoc:k}=await Promise.resolve().then(()=>f2);return{doc:D,updateDoc:k}},void 0,import.meta.url),{db:I}=await el(async()=>{const{db:D}=await Promise.resolve().then(()=>g2);return{db:D}},void 0,import.meta.url);await v(g(I,"users",r.value.uid),{equipment:l.value}),u.value=!0,setTimeout(()=>u.value=!1,2e3)}catch(g){console.error("[PROFILE] Save error:",g)}finally{c.value=!1}}},d=()=>s("logout"),m=()=>{};return(g,v)=>{const I=Wv;return W(),Y("div",L2,[E("header",F2,[E("div",U2,[E("div",$2,[E("button",{class:"back-btn",onClick:v[0]||(v[0]=D=>s("back"))},[...v[5]||(v[5]=[E("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none"},[E("path",{d:"M12 4L6 10L12 16",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1),Be(" Dashboard ",-1)])])]),v[6]||(v[6]=E("div",{class:"header-brand"},[E("span",{class:"brand-badge"},"ACC"),E("span",{class:"brand-name"},"TELEMETRY")],-1)),E("div",B2,[ce(I,{"user-name":o.value,onLogout:d,onGoToProfile:m},null,8,["user-name"])])])]),E("main",j2,[E("div",H2,[v[13]||(v[13]=E("h1",{class:"page-title"},"Profilo Pilota",-1)),E("div",q2,[E("div",W2,[v[7]||(v[7]=Pr('<div class="avatar-container" data-v-ddd58d18><svg class="avatar-helmet" viewBox="0 0 100 100" fill="none" data-v-ddd58d18><defs data-v-ddd58d18><linearGradient id="helmetGrad" x1="0%" y1="0%" x2="100%" y2="100%" data-v-ddd58d18><stop offset="0%" stop-color="#e10600" data-v-ddd58d18></stop><stop offset="100%" stop-color="#ff6b00" data-v-ddd58d18></stop></linearGradient></defs><path d="M50 10C30 10 15 25 15 45V60C15 75 25 85 40 88L45 90H55L60 88C75 85 85 75 85 60V45C85 25 70 10 50 10Z" stroke="url(#helmetGrad)" stroke-width="3" fill="none" data-v-ddd58d18></path><path d="M20 45H80C80 45 78 55 50 55C22 55 20 45 20 45Z" stroke="url(#helmetGrad)" stroke-width="2" fill="rgba(225,6,0,0.1)" data-v-ddd58d18></path><line x1="50" y1="15" x2="50" y2="85" stroke="url(#helmetGrad)" stroke-width="1.5" data-v-ddd58d18></line></svg></div>',1)),E("div",G2,[E("h2",z2,te(o.value),1),E("p",K2,te(t.userEmail),1)])]),E("div",Q2,[E("div",J2,[v[12]||(v[12]=E("h3",{class:"card-title"},[E("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none"},[E("circle",{cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"2"}),E("circle",{cx:"12",cy:"12",r:"4",stroke:"currentColor","stroke-width":"2"})]),Be(" Attrezzatura Sim Racing ")],-1)),E("div",Y2,[E("div",X2,[v[8]||(v[8]=E("label",{class:"form-label"},"Volante / Base",-1)),$s(E("input",{"onUpdate:modelValue":v[1]||(v[1]=D=>l.value.volante=D),type:"text",class:"form-input",placeholder:"Es. Fanatec CSL DD 8Nm"},null,512),[[zo,l.value.volante]])]),E("div",Z2,[v[9]||(v[9]=E("label",{class:"form-label"},"Corona / Rim",-1)),$s(E("input",{"onUpdate:modelValue":v[2]||(v[2]=D=>l.value.corona=D),type:"text",class:"form-input",placeholder:"Es. ClubSport Formula V2"},null,512),[[zo,l.value.corona]])]),E("div",eN,[v[10]||(v[10]=E("label",{class:"form-label"},"Pedaliera",-1)),$s(E("input",{"onUpdate:modelValue":v[3]||(v[3]=D=>l.value.pedaliera=D),type:"text",class:"form-input",placeholder:"Es. CSL Pedals + Load Cell"},null,512),[[zo,l.value.pedaliera]])]),E("div",tN,[v[11]||(v[11]=E("label",{class:"form-label"},"Struttura / Rig",-1)),$s(E("input",{"onUpdate:modelValue":v[4]||(v[4]=D=>l.value.struttura=D),type:"text",class:"form-input",placeholder:"Es. Next Level Racing 2.0"},null,512),[[zo,l.value.struttura]])]),E("button",{class:Me(["save-btn",{"save-btn--success":u.value}]),disabled:c.value,onClick:h},[c.value?(W(),Y(Ie,{key:0},[Be("Salvataggio...")],64)):u.value?(W(),Y(Ie,{key:1},[Be(" Salvato")],64)):(W(),Y(Ie,{key:2},[Be("Salva Modifiche")],64))],10,nN)])])])])])])])}}}),rN=Object.assign(ze(sN,[["__scopeId","data-v-ddd58d18"]]),{__name:"ProfilePage"}),iN={class:"page-container"},oN=Fe({__name:"PageContainer",setup(t){return(e,n)=>(W(),Y("div",iN,[zu(e.$slots,"default",{},void 0)]))}}),$l=Object.assign(ze(oN,[["__scopeId","data-v-71e40101"]]),{__name:"LayoutPageContainer"}),aN={class:"session-header"},lN={class:"header-main"},cN={class:"track-name"},uN={class:"header-meta"},hN={class:"meta-item"},fN={class:"meta-item"},dN={class:"meta-item meta-item--car"},pN={class:"section times-section"},mN={class:"times-grid"},gN={key:0,class:"time-card"},_N={class:"time-value"},yN={key:1,class:"time-card"},vN={class:"time-value"},EN={class:"time-card time-card--subtle"},TN={class:"time-value"},wN={class:"section"},bN={class:"placeholder-box"},IN=Fe({__name:"SessionDetailPage",props:{sessionId:{}},emits:["back"],setup(t,{emit:e}){const n=t,s=e,r=Je(()=>({id:n.sessionId,date:"6 GENNAIO 2026",time:"19:12",type:"qualify",track:"Monza",car:"Ford Mustang GT3",laps:6,stints:1,bestQualy:"1:47.234",bestRace:void 0,avgTime:"1:48.890"}));function i(o){return{practice:"PRACTICE",qualify:"QUALIFY",race:"RACE"}[o]||o.toUpperCase()}return(o,l)=>{const c=$l;return W(),je(c,null,{default:_t(()=>[E("button",{class:"back-button",onClick:l[0]||(l[0]=u=>s("back"))},[...l[1]||(l[1]=[E("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[E("path",{d:"M15 18l-6-6 6-6"})],-1),E("span",null,"Torna alle sessioni",-1)])]),E("header",aN,[E("div",lN,[E("span",{class:Me(["type-chip",`type-chip--${r.value.type}`])},te(i(r.value.type)),3),E("h1",cN,te(r.value.track),1)]),E("div",uN,[E("span",hN,te(r.value.date),1),l[2]||(l[2]=E("span",{class:"meta-separator"},"",-1)),E("span",fN,te(r.value.time),1),l[3]||(l[3]=E("span",{class:"meta-separator"},"",-1)),E("span",dN,te(r.value.car),1)])]),E("section",pN,[l[7]||(l[7]=E("h2",{class:"section-title"},"Riepilogo Tempi",-1)),E("div",mN,[r.value.bestQualy?(W(),Y("div",gN,[l[4]||(l[4]=E("span",{class:"time-label"},"BEST QUALIFY",-1)),E("span",_N,te(r.value.bestQualy),1)])):$t("",!0),r.value.bestRace?(W(),Y("div",yN,[l[5]||(l[5]=E("span",{class:"time-label"},"BEST RACE",-1)),E("span",vN,te(r.value.bestRace),1)])):$t("",!0),E("div",EN,[l[6]||(l[6]=E("span",{class:"time-label"},"AVERAGE TIME",-1)),E("span",TN,te(r.value.avgTime||""),1)])])]),E("section",wN,[l[9]||(l[9]=E("h2",{class:"section-title"},"Stint",-1)),E("div",bN,[E("p",null,te(r.value.stints)+" stint  "+te(r.value.laps)+" giri",1),l[8]||(l[8]=E("p",{class:"placeholder-note"},"Dettaglio stint in arrivo...",-1))])]),l[10]||(l[10]=E("section",{class:"section"},[E("h2",{class:"section-title"},"Grafici"),E("div",{class:"graphs-grid"},[E("div",{class:"placeholder-box"},[E("p",{class:"placeholder-title"},"Tempi Giro"),E("p",{class:"placeholder-note"},"Grafico in arrivo...")]),E("div",{class:"placeholder-box"},[E("p",{class:"placeholder-title"},"Costanza"),E("p",{class:"placeholder-note"},"Grafico in arrivo...")]),E("div",{class:"placeholder-box"},[E("p",{class:"placeholder-title"},"Degrado"),E("p",{class:"placeholder-note"},"Grafico in arrivo...")])])],-1))]),_:1})}}}),AN=Object.assign(ze(IN,[["__scopeId","data-v-10082ce6"]]),{__name:"PagesSessionDetailPage"}),RN={class:"car-image-container"},SN={key:0,class:"car-placeholder",viewBox:"0 0 400 200",fill:"none"},CN={class:"car-info"},PN={class:"car-name"},kN={class:"car-meta"},NN={class:"car-subtitle"},DN={key:0,class:"car-date"},ON=Fe({__name:"FeaturedCarCard",props:{carName:{},carImage:{},subtitle:{},date:{}},setup(t){return(e,n)=>(W(),Y("div",{class:"featured-car",onClick:n[1]||(n[1]=s=>e.$emit("click"))},[E("div",RN,[E("div",{class:"car-image",style:kn(t.carImage?{backgroundImage:`url(${t.carImage})`}:{})},[t.carImage?$t("",!0):(W(),Y("svg",SN,[...n[2]||(n[2]=[Pr('<defs data-v-1b2fbc93><linearGradient id="carGrad" x1="0%" y1="0%" x2="100%" y2="100%" data-v-1b2fbc93><stop offset="0%" stop-color="#e10600" stop-opacity="0.3" data-v-1b2fbc93></stop><stop offset="100%" stop-color="#ff6b00" stop-opacity="0.1" data-v-1b2fbc93></stop></linearGradient></defs><path d="M50 140 L80 120 L120 115 L150 100 L200 95 L280 95 L320 100 L350 115 L380 130 L380 150 L50 150 Z" fill="url(#carGrad)" stroke="#e10600" stroke-width="1.5" data-v-1b2fbc93></path><circle cx="110" cy="150" r="20" fill="#1a1a22" stroke="#e10600" stroke-width="1.5" data-v-1b2fbc93></circle><circle cx="110" cy="150" r="10" fill="none" stroke="#e10600" stroke-width="1" data-v-1b2fbc93></circle><circle cx="310" cy="150" r="20" fill="#1a1a22" stroke="#e10600" stroke-width="1.5" data-v-1b2fbc93></circle><circle cx="310" cy="150" r="10" fill="none" stroke="#e10600" stroke-width="1" data-v-1b2fbc93></circle><path d="M160 100 L200 92 L260 92 L290 100 L280 110 L170 110 Z" fill="rgba(255,255,255,0.05)" stroke="#e10600" stroke-width="1" data-v-1b2fbc93></path>',7)])]))],4),n[4]||(n[4]=E("div",{class:"image-overlay"},null,-1)),E("button",{class:"cta-button",title:"Vedi dettagli",onClick:n[0]||(n[0]=go(s=>e.$emit("cta-click"),["stop"]))},[...n[3]||(n[3]=[E("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[E("path",{d:"M5 12h14"}),E("path",{d:"M12 5l7 7-7 7"})],-1)])])]),E("div",CN,[E("h2",PN,te(t.carName||"MUSTANG GT3"),1),E("div",kN,[E("span",NN,te(t.subtitle||"Ultima auto utilizzata"),1),t.date?(W(),Y("span",DN,te(t.date),1)):$t("",!0)])]),n[5]||(n[5]=E("div",{class:"accent-glow"},null,-1))]))}}),VN=Object.assign(ze(ON,[["__scopeId","data-v-1b2fbc93"]]),{__name:"CardsFeaturedCarCard"}),xN={class:"track-image-container"},MN={class:"title-badge"},LN={class:"track-info"},FN={class:"track-name"},UN={class:"stats-row"},$N={class:"stat-box"},BN={class:"stat-value-row"},jN={class:"stat-time"},HN={class:"stat-box"},qN={class:"stat-value-row"},WN={class:"stat-time"},GN={class:"stat-box stat-box--subtle"},zN={class:"stat-value-row"},KN={class:"stat-time"},QN=Fe({__name:"TrackPerformanceCard",props:{title:{},trackName:{},trackImage:{},bestQualy:{},bestRace:{},avgTime:{}},setup(t){return(e,n)=>(W(),Y("div",{class:"track-card",onClick:n[1]||(n[1]=s=>e.$emit("click"))},[E("div",xN,[E("div",{class:"track-image",style:kn({backgroundImage:`url(${t.trackImage})`})},null,4),n[3]||(n[3]=E("div",{class:"image-overlay"},null,-1)),E("span",MN,te(t.title),1),E("button",{class:"cta-button",title:"Vedi sessioni",onClick:n[0]||(n[0]=go(s=>e.$emit("cta-click"),["stop"]))},[...n[2]||(n[2]=[E("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[E("path",{d:"M5 12h14"}),E("path",{d:"M12 5l7 7-7 7"})],-1)])])]),E("div",LN,[E("h2",FN,te(t.trackName),1),E("div",UN,[E("div",$N,[n[5]||(n[5]=E("span",{class:"stat-label"},"BEST QUALY",-1)),E("div",BN,[E("span",jN,te(t.bestQualy||"--:--.---"),1),n[4]||(n[4]=Pr('<svg class="medal-svg medal-gold" viewBox="0 0 48 56" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-00d25e74><path d="M18 0L24 16L30 0H36L28 20L24 28L20 20L12 0H18Z" fill="#E53935" data-v-00d25e74></path><path d="M24 16L30 0H36L28 20L24 28" fill="#C62828" data-v-00d25e74></path><circle cx="24" cy="38" r="16" fill="#FFD54F" data-v-00d25e74></circle><circle cx="24" cy="38" r="16" fill="url(#goldGradient)" data-v-00d25e74></circle><circle cx="24" cy="38" r="13" stroke="#FFC107" stroke-width="2" fill="none" data-v-00d25e74></circle><path d="M24 28L26.5 34H33L28 38L30 45L24 41L18 45L20 38L15 34H21.5L24 28Z" fill="#FFC107" data-v-00d25e74></path><defs data-v-00d25e74><linearGradient id="goldGradient" x1="8" y1="22" x2="40" y2="54" gradientUnits="userSpaceOnUse" data-v-00d25e74><stop stop-color="#FFE082" data-v-00d25e74></stop><stop offset="1" stop-color="#FFB300" data-v-00d25e74></stop></linearGradient></defs></svg>',1))])]),E("div",HN,[n[7]||(n[7]=E("span",{class:"stat-label"},"BEST RACE",-1)),E("div",qN,[E("span",WN,te(t.bestRace||"--:--.---"),1),n[6]||(n[6]=Pr('<svg class="medal-svg medal-silver" viewBox="0 0 48 56" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-00d25e74><path d="M18 0L24 16L30 0H36L28 20L24 28L20 20L12 0H18Z" fill="#1E88E5" data-v-00d25e74></path><path d="M24 16L30 0H36L28 20L24 28" fill="#1565C0" data-v-00d25e74></path><circle cx="24" cy="38" r="16" fill="#E0E0E0" data-v-00d25e74></circle><circle cx="24" cy="38" r="16" fill="url(#silverGradient)" data-v-00d25e74></circle><circle cx="24" cy="38" r="13" stroke="#BDBDBD" stroke-width="2" fill="none" data-v-00d25e74></circle><text x="24" y="43" text-anchor="middle" font-size="14" font-weight="bold" fill="#757575" data-v-00d25e74>2</text><defs data-v-00d25e74><linearGradient id="silverGradient" x1="8" y1="22" x2="40" y2="54" gradientUnits="userSpaceOnUse" data-v-00d25e74><stop stop-color="#F5F5F5" data-v-00d25e74></stop><stop offset="1" stop-color="#9E9E9E" data-v-00d25e74></stop></linearGradient></defs></svg>',1))])]),E("div",GN,[n[9]||(n[9]=E("span",{class:"stat-label"},"AVG TIME",-1)),E("div",zN,[E("span",KN,te(t.avgTime||"--:--.---"),1),n[8]||(n[8]=Pr('<svg class="medal-svg medal-bronze" viewBox="0 0 48 56" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-00d25e74><path d="M18 0L24 16L30 0H36L28 20L24 28L20 20L12 0H18Z" fill="#8D6E63" data-v-00d25e74></path><path d="M24 16L30 0H36L28 20L24 28" fill="#6D4C41" data-v-00d25e74></path><circle cx="24" cy="38" r="16" fill="#BCAAA4" data-v-00d25e74></circle><circle cx="24" cy="38" r="16" fill="url(#bronzeGradient)" data-v-00d25e74></circle><circle cx="24" cy="38" r="13" stroke="#A1887F" stroke-width="2" fill="none" data-v-00d25e74></circle><text x="24" y="43" text-anchor="middle" font-size="14" font-weight="bold" fill="#5D4037" data-v-00d25e74>3</text><defs data-v-00d25e74><linearGradient id="bronzeGradient" x1="8" y1="22" x2="40" y2="54" gradientUnits="userSpaceOnUse" data-v-00d25e74><stop stop-color="#D7CCC8" data-v-00d25e74></stop><stop offset="1" stop-color="#8D6E63" data-v-00d25e74></stop></linearGradient></defs></svg>',1))])])])]),n[10]||(n[10]=E("div",{class:"accent-glow"},null,-1))]))}}),JN=Object.assign(ze(QN,[["__scopeId","data-v-00d25e74"]]),{__name:"CardsTrackPerformanceCard"}),YN={class:"activity-card"},XN={class:"card-content"},ZN={class:"chart-area"},eD={class:"y-axis"},tD={class:"bars-container"},nD={class:"bar-stack"},sD={class:"day-label"},rD={class:"legend"},iD={class:"legend-item legend-item--practice"},oD={class:"legend-text"},aD={class:"legend-value"},lD={class:"legend-sessions"},cD={class:"legend-item legend-item--qualify"},uD={class:"legend-text"},hD={class:"legend-value"},fD={class:"legend-sessions"},dD={class:"legend-item legend-item--race"},pD={class:"legend-text"},mD={class:"legend-value"},gD={class:"legend-sessions"},_D=Fe({__name:"ActivityCard",props:{data:{},practiceTotal:{},qualifyTotal:{},raceTotal:{}},setup(t){const e=t,n=le(!1);Lr(()=>{setTimeout(()=>{n.value=!0},100)});const s=Je(()=>e.data||[{day:"Lun",practice:45,qualify:0,race:0},{day:"Mar",practice:0,qualify:0,race:0},{day:"Mer",practice:25,qualify:15,race:0},{day:"Gio",practice:12,qualify:0,race:95},{day:"Ven",practice:35,qualify:8,race:0},{day:"Sab",practice:0,qualify:0,race:38},{day:"Dom",practice:20,qualify:0,race:0}]),r=Je(()=>{const h=s.value.map(d=>d.practice+d.qualify+d.race);return Math.max(...h,60)}),i=Je(()=>{const h=r.value;return[0,Math.round(h/2),h]}),o=Je(()=>e.practiceTotal||{minutes:137,sessions:5}),l=Je(()=>e.qualifyTotal||{minutes:23,sessions:3}),c=Je(()=>e.raceTotal||{minutes:133,sessions:2}),u=h=>"sess.";return(h,d)=>(W(),Y("div",YN,[d[9]||(d[9]=E("h2",{class:"card-title"},"Attivit (ultimi 7 giorni)",-1)),E("div",XN,[E("div",ZN,[E("div",eD,[(W(!0),Y(Ie,null,ln(i.value.slice().reverse(),m=>(W(),Y("span",{key:m},te(m),1))),128))]),E("div",tD,[(W(!0),Y(Ie,null,ln(s.value,(m,g)=>(W(),Y("div",{key:m.day,class:"bar-column"},[E("div",nD,[m.race>0?(W(),Y("div",{key:0,class:"bar bar--race",style:kn({height:n.value?`${m.race/r.value*100}%`:"0%",transitionDelay:`${g*40+200}ms`})},null,4)):$t("",!0),m.qualify>0?(W(),Y("div",{key:1,class:"bar bar--qualify",style:kn({height:n.value?`${m.qualify/r.value*100}%`:"0%",transitionDelay:`${g*40+100}ms`})},null,4)):$t("",!0),m.practice>0?(W(),Y("div",{key:2,class:"bar bar--practice",style:kn({height:n.value?`${m.practice/r.value*100}%`:"0%",transitionDelay:`${g*40}ms`})},null,4)):$t("",!0)]),E("span",sD,te(m.day),1)]))),128))])]),E("div",rD,[E("div",iD,[d[2]||(d[2]=E("span",{class:"legend-dot"},null,-1)),E("div",oD,[d[1]||(d[1]=E("span",{class:"legend-label"},"PRACTICE",-1)),E("span",aD,[Be(te(o.value.minutes),1),d[0]||(d[0]=E("small",null,"min",-1))]),E("span",lD,te(o.value.sessions)+" "+te(u(o.value.sessions)),1)])]),E("div",cD,[d[5]||(d[5]=E("span",{class:"legend-dot"},null,-1)),E("div",uD,[d[4]||(d[4]=E("span",{class:"legend-label"},"QUALIFY",-1)),E("span",hD,[Be(te(l.value.minutes),1),d[3]||(d[3]=E("small",null,"min",-1))]),E("span",fD,te(l.value.sessions)+" "+te(u(l.value.sessions)),1)])]),E("div",dD,[d[8]||(d[8]=E("span",{class:"legend-dot"},null,-1)),E("div",pD,[d[7]||(d[7]=E("span",{class:"legend-label"},"RACE",-1)),E("span",mD,[Be(te(c.value.minutes),1),d[6]||(d[6]=E("small",null,"min",-1))]),E("span",gD,te(c.value.sessions)+" "+te(u(c.value.sessions)),1)])])])]),d[10]||(d[10]=E("div",{class:"accent-glow"},null,-1))]))}}),yD=Object.assign(ze(_D,[["__scopeId","data-v-7fe38644"]]),{__name:"CardsActivityCard"}),vD=""+new URL("mustang_gt3.DdC5zVl9.png",import.meta.url).href,ED=""+new URL("spa.BMiNF95I.png",import.meta.url).href,TD=""+new URL("monza.uK1oQ10z.png",import.meta.url).href,wD={class:"panoramica-grid"},bD=Fe({__name:"PanoramicaPage",setup(t){return(e,n)=>{const s=VN,r=JN,i=yD,o=$l;return W(),je(o,null,{default:_t(()=>[E("div",wD,[ce(s,{"car-name":"MUSTANG GT3","car-image":$e(vD),subtitle:"Ultima auto utilizzata",date:"12/01/2026"},null,8,["car-image"]),ce(r,{title:"Ultima pista","track-name":"SPA  FRANCORCHAMPS","track-image":$e(ED),"best-qualy":"2:15.872","best-race":"2:18.430","avg-time":"2:19.256"},null,8,["track-image"]),ce(i),ce(r,{title:"Penultima pista","track-name":"AUTODROMO DI MONZA","track-image":$e(TD),"best-qualy":"1:47.234","best-race":"1:49.012","avg-time":"1:50.445"},null,8,["track-image"])])]),_:1})}}}),ID=Object.assign(ze(bD,[["__scopeId","data-v-d3bc2a3b"]]),{__name:"PagesPanoramicaPage"}),AD={class:"filters"},RD={class:"filters-left"},SD={class:"filter-group"},CD={class:"segmented-control"},PD={class:"filter-group"},kD=["value"],ND={class:"filter-group"},DD=["value"],OD={class:"filter-group"},VD={class:"segmented-control segmented-control--compact"},xD={class:"filters-right"},MD={class:"view-toggle"},LD={key:0,class:"no-results"},FD={key:1,class:"day-groups"},UD={class:"day-header"},$D={class:"day-date"},BD={class:"day-count"},jD={class:"sessions-list"},HD=["onClick"],qD={class:"row-left"},WD={class:"session-time"},GD={class:"session-track"},zD={class:"session-car"},KD={class:"row-right"},QD={class:"stat-chips"},JD={class:"stat-chip"},YD={class:"stat-chip"},XD={class:"time-slot"},ZD={key:0,class:"time-badge time-badge--qualy"},eO={key:1,class:"time-badge time-badge--qualy time-badge--empty"},tO={class:"time-slot"},nO={key:0,class:"time-badge time-badge--race"},sO={key:1,class:"time-badge time-badge--race time-badge--empty"},rO={key:2,class:"day-cards"},iO={class:"card-header"},oO={class:"card-header-info"},aO={class:"card-date"},lO={class:"card-count"},cO={class:"card-sessions"},uO=["onClick"],hO={class:"card-session-time"},fO={class:"card-session-track"},dO={class:"card-session-car"},pO={class:"card-stat-chips"},mO={class:"stat-chip"},gO={class:"stat-chip"},_O={class:"card-time-slot"},yO={key:0,class:"time-badge time-badge--qualy"},vO={key:1,class:"time-badge time-badge--qualy time-badge--empty"},EO={class:"card-time-slot"},TO={key:0,class:"time-badge time-badge--race"},wO={key:1,class:"time-badge time-badge--race time-badge--empty"},bO=Fe({__name:"SessioniPage",emits:["go-to-session"],setup(t,{emit:e}){const n=e,s=le("all"),r=le("all"),i=le("all"),o=le("all"),l=le("list"),c=[{id:"s1",date:"2026-01-13",time:"19:34",type:"practice",track:"Donington",car:"Ford Mustang GT3",laps:18,stints:2,bestQualy:"1:29.456"},{id:"s2",date:"2026-01-13",time:"18:22",type:"practice",track:"Valencia",car:"Ford Mustang GT3",laps:12,stints:1,bestQualy:"1:31.890"},{id:"s3",date:"2026-01-10",time:"20:15",type:"race",track:"Spa",car:"AMR V8 Vantage GT3",laps:18,stints:2,bestRace:"2:17.890"},{id:"s4",date:"2026-01-10",time:"18:45",type:"practice",track:"Spa",car:"AMR V8 Vantage GT3",laps:24,stints:3,bestQualy:"2:16.543",bestRace:"2:18.234"},{id:"s5",date:"2026-01-10",time:"15:30",type:"qualify",track:"Spa",car:"AMR V8 Vantage GT3",laps:8,stints:1,bestQualy:"2:16.874"},{id:"s6",date:"2026-01-06",time:"21:00",type:"race",track:"Monza",car:"Ford Mustang GT3",laps:22,stints:2,bestRace:"1:48.345"},{id:"s7",date:"2026-01-06",time:"19:12",type:"qualify",track:"Monza",car:"Ford Mustang GT3",laps:6,stints:1,bestQualy:"1:47.234"},{id:"s8",date:"2026-01-06",time:"17:45",type:"practice",track:"Monza",car:"Ford Mustang GT3",laps:32,stints:3,bestQualy:"1:47.890",bestRace:"1:48.567"},{id:"s9",date:"2026-01-06",time:"15:30",type:"practice",track:"Monza",car:"Ford Mustang GT3",laps:28,stints:2,bestQualy:"1:48.234"},{id:"s10",date:"2026-01-06",time:"13:00",type:"race",track:"Monza",car:"Ford Mustang GT3",laps:20,stints:2,bestRace:"1:48.567",bestQualy:"1:47.890"},{id:"s11",date:"2026-01-06",time:"11:30",type:"qualify",track:"Monza",car:"Ford Mustang GT3",laps:5,stints:1,bestQualy:"1:47.678"},{id:"s12",date:"2026-01-06",time:"09:00",type:"race",track:"Monza",car:"Ford Mustang GT3",laps:18,stints:2,bestRace:"1:48.123"},{id:"s13",date:"2026-01-03",time:"20:30",type:"race",track:"Monza",car:"Ford Mustang GT3",laps:16,stints:2,bestRace:"1:49.234"},{id:"s14",date:"2026-01-03",time:"18:00",type:"practice",track:"Monza",car:"Ford Mustang GT3",laps:24,stints:2,bestQualy:"1:48.567"},{id:"s15",date:"2026-01-03",time:"16:30",type:"qualify",track:"Monza",car:"Ford Mustang GT3",laps:6,stints:1,bestQualy:"1:48.012",bestRace:"1:49.890"},{id:"s16",date:"2025-12-31",time:"22:00",type:"practice",track:"Paul Ricard",car:"Ford Mustang GT3",laps:20,stints:2,bestQualy:"1:54.234"},{id:"s17",date:"2025-12-31",time:"19:30",type:"practice",track:"Donington",car:"Ford Mustang GT3",laps:18,stints:2,bestQualy:"1:29.890"},{id:"s18",date:"2025-12-30",time:"21:15",type:"practice",track:"Donington",car:"Ford Mustang GT3",laps:27,stints:3,bestQualy:"1:29.123"},{id:"s19",date:"2025-12-30",time:"18:00",type:"practice",track:"Paul Ricard",car:"Ford Mustang GT3",laps:22,stints:2,bestQualy:"1:54.567"},{id:"s20",date:"2025-12-30",time:"15:30",type:"practice",track:"Donington",car:"AMR V8 Vantage GT3",laps:16,stints:2,bestQualy:"1:30.234"},{id:"s21",date:"2025-12-30",time:"12:00",type:"practice",track:"Donington",car:"Ford Mustang GT3",laps:30,stints:3,bestQualy:"1:29.456",bestRace:"1:30.890"}],u=Je(()=>[...new Set(c.map(D=>D.track))].sort()),h=Je(()=>[...new Set(c.map(D=>D.car))].sort()),d=Je(()=>c.filter(D=>{if(s.value!=="all"&&D.type!==s.value||r.value!=="all"&&D.track!==r.value||i.value!=="all"&&D.car!==i.value)return!1;if(o.value!=="all"){const k=new Date("2026-01-13"),M=new Date(D.date),R=Math.floor((k.getTime()-M.getTime())/(1e3*60*60*24));if(o.value==="today"&&R>0||o.value==="7d"&&R>7||o.value==="30d"&&R>30)return!1}return!0})),m=Je(()=>{const D={};for(const k of d.value)D[k.date]||(D[k.date]=[]),D[k.date].push(k);return Object.entries(D).sort(([k],[M])=>M.localeCompare(k)).map(([k,M])=>({date:k,sessions:M}))});function g(D){const k=new Date(D),M=k.getDate(),O=["GENNAIO","FEBBRAIO","MARZO","APRILE","MAGGIO","GIUGNO","LUGLIO","AGOSTO","SETTEMBRE","OTTOBRE","NOVEMBRE","DICEMBRE"][k.getMonth()],L=k.getFullYear();return`${M} ${O} ${L}`}function v(D){return{practice:"PRACTICE",qualify:"QUALIFY",race:"RACE"}[D]}function I(D){n("go-to-session",D)}return(D,k)=>{const M=$l;return W(),je(M,null,{default:_t(()=>[k[19]||(k[19]=E("h1",{class:"page-title"},"SESSIONI",-1)),E("div",AD,[E("div",RD,[E("div",SD,[E("div",CD,[E("button",{class:Me(["seg-btn",{"seg-btn--active":s.value==="all"}]),onClick:k[0]||(k[0]=R=>s.value="all")},"Tutto",2),E("button",{class:Me(["seg-btn","seg-btn--practice",{"seg-btn--active":s.value==="practice"}]),onClick:k[1]||(k[1]=R=>s.value="practice")},"Practice",2),E("button",{class:Me(["seg-btn","seg-btn--qualify",{"seg-btn--active":s.value==="qualify"}]),onClick:k[2]||(k[2]=R=>s.value="qualify")},"Qualify",2),E("button",{class:Me(["seg-btn","seg-btn--race",{"seg-btn--active":s.value==="race"}]),onClick:k[3]||(k[3]=R=>s.value="race")},"Race",2)])]),E("div",PD,[$s(E("select",{"onUpdate:modelValue":k[4]||(k[4]=R=>r.value=R),class:"filter-select"},[k[12]||(k[12]=E("option",{value:"all"},"Tutte le piste",-1)),(W(!0),Y(Ie,null,ln(u.value,R=>(W(),Y("option",{key:R,value:R},te(R),9,kD))),128))],512),[[Ad,r.value]])]),E("div",ND,[$s(E("select",{"onUpdate:modelValue":k[5]||(k[5]=R=>i.value=R),class:"filter-select"},[k[13]||(k[13]=E("option",{value:"all"},"Tutte le auto",-1)),(W(!0),Y(Ie,null,ln(h.value,R=>(W(),Y("option",{key:R,value:R},te(R),9,DD))),128))],512),[[Ad,i.value]])]),E("div",OD,[E("div",VD,[E("button",{class:Me(["seg-btn",{"seg-btn--active":o.value==="today"}]),onClick:k[6]||(k[6]=R=>o.value="today")},"Oggi",2),E("button",{class:Me(["seg-btn",{"seg-btn--active":o.value==="7d"}]),onClick:k[7]||(k[7]=R=>o.value="7d")},"7g",2),E("button",{class:Me(["seg-btn",{"seg-btn--active":o.value==="30d"}]),onClick:k[8]||(k[8]=R=>o.value="30d")},"30g",2),E("button",{class:Me(["seg-btn",{"seg-btn--active":o.value==="all"}]),onClick:k[9]||(k[9]=R=>o.value="all")},"Tutto",2)])])]),E("div",xD,[E("div",MD,[E("button",{class:Me(["view-btn",{"view-btn--active":l.value==="list"}]),onClick:k[10]||(k[10]=R=>l.value="list"),title:"Vista lista"},[...k[14]||(k[14]=[E("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[E("path",{d:"M8 6h13M8 12h13M8 18h13M3 6h.01M3 12h.01M3 18h.01"})],-1)])],2),E("button",{class:Me(["view-btn",{"view-btn--active":l.value==="card"}]),onClick:k[11]||(k[11]=R=>l.value="card"),title:"Vista card"},[...k[15]||(k[15]=[E("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[E("rect",{x:"3",y:"3",width:"7",height:"7",rx:"1"}),E("rect",{x:"14",y:"3",width:"7",height:"7",rx:"1"}),E("rect",{x:"3",y:"14",width:"7",height:"7",rx:"1"}),E("rect",{x:"14",y:"14",width:"7",height:"7",rx:"1"})],-1)])],2)])])]),m.value.length===0?(W(),Y("div",LD,[...k[16]||(k[16]=[E("p",null,"Nessuna sessione trovata con i filtri selezionati.",-1)])])):l.value==="list"?(W(),Y("div",FD,[(W(!0),Y(Ie,null,ln(m.value,R=>(W(),Y("div",{key:R.date,class:"day-group"},[E("div",UD,[E("span",$D,te(g(R.date)),1),E("span",BD,te(R.sessions.length)+" sessioni",1)]),E("div",jD,[(W(!0),Y(Ie,null,ln(R.sessions,O=>(W(),Y("div",{key:O.id,class:"session-row",onClick:L=>I(O.id)},[E("div",qD,[E("span",{class:Me(["session-chip",`session-chip--${O.type}`])},te(v(O.type)),3),E("span",WD,te(O.time),1),E("span",GD,te(O.track),1),E("span",zD,te(O.car),1)]),E("div",KD,[E("div",QD,[E("span",JD,"GIRI "+te(O.laps),1),E("span",YD,"STINT "+te(O.stints),1)]),E("div",XD,[O.bestQualy?(W(),Y("span",ZD," Q "+te(O.bestQualy),1)):(W(),Y("span",eO," Q  "))]),E("div",tO,[O.bestRace?(W(),Y("span",nO," R "+te(O.bestRace),1)):(W(),Y("span",sO," R  "))]),k[17]||(k[17]=E("span",{class:"session-cta"},[E("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[E("path",{d:"M9 18l6-6-6-6"})])],-1))])],8,HD))),128))])]))),128))])):(W(),Y("div",rO,[(W(!0),Y(Ie,null,ln(m.value,R=>(W(),Y("div",{key:R.date,class:"day-card"},[E("div",iO,[E("div",oO,[E("span",aO,te(g(R.date)),1),E("span",lO,te(R.sessions.length)+" sessioni",1)])]),E("div",cO,[(W(!0),Y(Ie,null,ln(R.sessions,O=>(W(),Y("div",{key:O.id,class:"card-session-row",onClick:L=>I(O.id)},[E("span",{class:Me(["session-chip",`session-chip--${O.type}`])},te(v(O.type)),3),E("span",hO,te(O.time),1),E("span",fO,te(O.track),1),E("span",dO,te(O.car),1),E("div",pO,[E("span",mO,"GIRI "+te(O.laps),1),E("span",gO,"STINT "+te(O.stints),1)]),E("div",_O,[O.bestQualy?(W(),Y("span",yO," Q "+te(O.bestQualy),1)):(W(),Y("span",vO," Q  "))]),E("div",EO,[O.bestRace?(W(),Y("span",TO," R "+te(O.bestRace),1)):(W(),Y("span",wO," R  "))]),k[18]||(k[18]=E("span",{class:"session-cta"},[E("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[E("path",{d:"M9 18l6-6-6-6"})])],-1))],8,uO))),128))])]))),128))]))]),_:1})}}}),IO=Object.assign(ze(bO,[["__scopeId","data-v-b83b6813"]]),{__name:"PagesSessioniPage"}),AO={class:"tracks-grid"},RO={class:"track-name"},SO={class:"track-stats"},CO=Fe({__name:"PistePage",setup(t){const e=[{name:"Spa",hours:"--",bestQ:"--",bestR:"--"},{name:"Monza",hours:"--",bestQ:"--",bestR:"--"},{name:"Nrburgring",hours:"--",bestQ:"--",bestR:"--"},{name:"Imola",hours:"--",bestQ:"--",bestR:"--"},{name:"Barcelona",hours:"--",bestQ:"--",bestR:"--"},{name:"Silverstone",hours:"--",bestQ:"--",bestR:"--"}];return(n,s)=>{const r=$l;return W(),je(r,null,{default:_t(()=>[s[0]||(s[0]=E("h1",{class:"page-title"},"Piste",-1)),E("div",AO,[(W(),Y(Ie,null,ln(e,i=>E("div",{key:i.name,class:"track-card"},[E("h3",RO,te(i.name),1),E("div",SO,[E("span",null,"Ore: "+te(i.hours),1),E("span",null,"Best Q: "+te(i.bestQ),1),E("span",null,"Best R: "+te(i.bestR),1)])])),64))])]),_:1})}}}),PO=Object.assign(ze(CO,[["__scopeId","data-v-3010ceb5"]]),{__name:"PagesPistePage"}),kO={class:"topbar"},NO={class:"topbar__inner"},DO={class:"topbar__user"},OO=Fe({__name:"TopBar",props:{userName:{}},emits:["logout","goToProfile"],setup(t,{emit:e}){const n=t,s=e,r=Je(()=>n.userName||"Utente");return(i,o)=>{const l=Wv;return W(),Y("header",kO,[E("div",NO,[o[2]||(o[2]=E("div",{class:"topbar__brand"},[E("span",{class:"brand-badge"},"ACC"),E("span",{class:"brand-name"},"TELEMETRY")],-1)),o[3]||(o[3]=E("div",{class:"topbar__spacer"},null,-1)),E("div",DO,[ce(l,{"user-name":$e(r),onLogout:o[0]||(o[0]=c=>s("logout")),onGoToProfile:o[1]||(o[1]=c=>s("goToProfile"))},null,8,["user-name"])])])])}}}),VO=Object.assign(ze(OO,[["__scopeId","data-v-1f932a7f"]]),{__name:"LayoutTopBar"}),xO={class:"tabsbar"},MO={class:"tabsbar__inner"},LO=["onClick"],FO=Fe({__name:"TabsBar",props:{activeTab:{}},emits:["navigate"],setup(t,{emit:e}){const n=e,s=[{id:"panoramica",label:"PANORAMICA"},{id:"sessioni",label:"SESSIONI"},{id:"piste",label:"PISTE"}];return(r,i)=>(W(),Y("nav",xO,[E("div",MO,[(W(),Y(Ie,null,ln(s,o=>E("button",{key:o.id,class:Me(["tab",{"tab--active":t.activeTab===o.id}]),onClick:l=>n("navigate",o.id)},te(o.label),11,LO)),64))])]))}}),UO=Object.assign(ze(FO,[["__scopeId","data-v-8662b1e4"]]),{__name:"LayoutTabsBar"}),$O={class:"main-layout"},BO={class:"main-content"},jO=Fe({__name:"MainLayout",props:{userName:{},activeTab:{}},emits:["logout","goToProfile","navigate"],setup(t,{emit:e}){const n=e;return(s,r)=>{const i=VO,o=UO;return W(),Y("div",$O,[ce(i,{"user-name":t.userName,onLogout:r[0]||(r[0]=l=>n("logout")),onGoToProfile:r[1]||(r[1]=l=>n("goToProfile"))},null,8,["user-name"]),ce(o,{"active-tab":t.activeTab,onNavigate:r[2]||(r[2]=l=>n("navigate",l))},null,8,["active-tab"]),E("main",BO,[zu(s.$slots,"default",{},void 0)])])}}}),HO=Object.assign(ze(jO,[["__scopeId","data-v-89f8b09a"]]),{__name:"LayoutMainLayout"}),qO=Fe({__name:"DashboardMain",props:{userEmail:{},userNickname:{}},emits:["logout","goToProfile"],setup(t,{emit:e}){const n=t,s=e,r=le("panoramica"),i=le(null),o=h=>{r.value=h,i.value=null},l=h=>{i.value=h},c=()=>{i.value=null};Bu("goToSession",l);const u=Je(()=>n.userNickname?n.userNickname:n.userEmail?n.userEmail.split("@")[0]:"Utente");return(h,d)=>{const m=AN,g=ID,v=IO,I=PO,D=HO;return W(),je(D,{"user-name":u.value,"active-tab":r.value,onLogout:d[0]||(d[0]=k=>s("logout")),onGoToProfile:d[1]||(d[1]=k=>s("goToProfile")),onNavigate:o},{default:_t(()=>[ce(ml,{name:"fade",mode:"out-in"},{default:_t(()=>[r.value==="sessioni"&&i.value?(W(),je(m,{key:"session-detail","session-id":i.value,onBack:c},null,8,["session-id"])):r.value==="panoramica"?(W(),je(g,{key:"panoramica"})):r.value==="sessioni"?(W(),je(v,{key:"sessioni",onGoToSession:l})):r.value==="piste"?(W(),je(I,{key:"piste"})):$t("",!0)]),_:1})]),_:1},8,["user-name","active-tab"])}}}),WO=Object.assign(ze(qO,[["__scopeId","data-v-eaeab76e"]]),{__name:"DashboardMain"}),GO=D0(M0),zO={id:"app"},KO={key:"register-success",class:"auth-wrapper"},QO={class:"auth-card-standalone"},JO={key:"loading",class:"loading-screen"},YO="dissolve-fade-zoom",XO=Fe({__name:"app",setup(t){const{currentUser:e,userDisplayName:n,logout:s}=Ul(),r=le("auth"),i=le("login"),o=le(""),l=le(!1);ra(e,I=>{I&&(o.value=I.email||"",l.value&&!I.emailVerified?(r.value!=="auth"||i.value!=="register-success")&&(r.value="auth",i.value="register-success"):r.value==="auth"&&i.value!=="register-success"&&(r.value="loading",setTimeout(()=>{r.value="dashboard"},1e3)))});const c=I=>{if(o.value=I,l.value&&e.value&&!e.value.emailVerified){i.value="register-success";return}r.value="loading",setTimeout(()=>{r.value="dashboard"},1500)},u=I=>{o.value=I,l.value?i.value="register-success":(r.value="loading",setTimeout(()=>{r.value="dashboard"},1500))},h=()=>{r.value="loading",setTimeout(()=>{r.value="dashboard"},1500)},d=()=>{console.log("[AUTH] Resending verification email to:",o.value)},m=async()=>{await s(),o.value="",i.value="login",r.value="auth"},g=()=>{r.value="profile"},v=()=>{r.value="dashboard"};return(I,D)=>{const k=GO,M=w2,R=k2,O=rN,L=WO;return W(),Y("div",zO,[ce(k),ce(ml,{name:YO,mode:"out-in"},{default:_t(()=>[r.value==="auth"&&i.value!=="register-success"?(W(),je(M,{key:"auth",onLoginSuccess:c,onRegisterSuccess:u})):r.value==="auth"&&i.value==="register-success"?(W(),Y("div",KO,[E("div",QO,[ce(R,{email:o.value,"require-email-verification":l.value,onGoToDashboard:h,onResendEmail:d},null,8,["email","require-email-verification"])])])):r.value==="loading"?(W(),Y("div",JO,[...D[0]||(D[0]=[E("div",{class:"loading-content"},[E("div",{class:"loading-spinner"}),E("p",{class:"loading-text"},"Caricamento Dashboard...")],-1)])])):r.value==="profile"?(W(),je(O,{key:"profile","user-email":o.value,"user-nickname":$e(n),onLogout:m,onBack:v},null,8,["user-email","user-nickname"])):(W(),je(L,{key:"dashboard","user-email":o.value,"user-nickname":$e(n),onLogout:m,onGoToProfile:g},null,8,["user-email","user-nickname"]))]),_:1})])}}}),ZO={__name:"nuxt-error-page",props:{error:Object},setup(t){const n=t.error,s=Number(n.statusCode||500),r=s===404,i=n.statusMessage??(r?"Page Not Found":"Internal Server Error"),o=n.message||n.toString(),l=void 0,h=r?Qf(()=>el(()=>import("./CvKoEMZg.js"),__vite__mapDeps([0,1]),import.meta.url)):Qf(()=>el(()=>import("./B4tXrLKY.js"),__vite__mapDeps([2,3]),import.meta.url));return(d,m)=>(W(),je($e(h),wE(Mg({statusCode:$e(s),statusMessage:$e(i),description:$e(o),stack:$e(l)})),null,16))}},eV={key:0},wm={__name:"nuxt-root",setup(t){const e=()=>null,n=at(),s=n.deferHydration();if(n.isHydrating){const u=n.hooks.hookOnce("app:error",s);zs().beforeEach(u)}const r=!1;Bu(a_,l_()),n.hooks.callHookWith(u=>u.map(h=>h()),"vue:setup");const i=th(),o=!1,l=/bot\b|chrome-lighthouse|facebookexternalhit|google\b/i;ug((u,h,d)=>{if(n.hooks.callHook("vue:error",u,h,d).catch(m=>console.error("[nuxt] Error in `vue:error` hook",m)),l.test(navigator.userAgent))return n.hooks.callHook("app:error",u),console.error(`[nuxt] Not rendering error page for bot with user agent \`${navigator.userAgent}\`:`,u),!1;if(wI(u)&&(u.fatal||u.unhandled))return n.runWithContext(()=>EI(u)),!1});const c=!1;return(u,h)=>(W(),je(nw,{onResolve:$e(s)},{default:_t(()=>[$e(o)?(W(),Y("div",eV)):$e(i)?(W(),je($e(ZO),{key:1,error:$e(i)},null,8,["error"])):$e(c)?(W(),je($e(e),{key:2,context:$e(c)},null,8,["context"])):$e(r)?(W(),je(PT($e(r)),{key:3})):(W(),je($e(XO),{key:4}))]),_:1},8,["onResolve"]))}};let bm;{let t;bm=async function(){if(t)return t;const n=!!(window.__NUXT__?.serverRendered??document.getElementById("__NUXT_DATA__")?.dataset.ssr==="true"),s=n?Jw(wm):Qw(wm),r=rI({vueApp:s});async function i(o){await r.callHook("app:error",o),r.payload.error||=nh(o)}s.config.errorHandler=i,r.hook("app:suspense:resolve",()=>{s.config.errorHandler===i&&(s.config.errorHandler=void 0)}),!n&&Od.id&&r.hook("app:suspense:resolve",()=>{document.getElementById(Od.id)?.remove()});try{await aI(r,C0)}catch(o){i(o)}try{await r.hooks.callHook("app:created",s),await r.hooks.callHook("app:beforeMount",s),s.mount(tI),await r.hooks.callHook("app:mounted",s),await Uu()}catch(o){i(o)}return s},t=bm().catch(e=>{throw console.error("Error while mounting app:",e),e})}export{sV as A,ce as B,_t as C,Be as D,ze as _,E as a,zs as b,Y as c,Fe as d,at as e,Lr as f,oh as g,Wd as h,qu as i,iV as j,ls as k,tV as l,vI as m,Je as n,W as o,Xu as p,Xr as q,le as r,Qi as s,te as t,rV as u,gl as v,eo as w,yI as x,Kc as y,Wg as z};
