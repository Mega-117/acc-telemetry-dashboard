import{u as R,_ as M}from"./DrO2fqEv.js";import{b as Q,$ as T,o as z,r as D,m as _,a1 as u,J as I,D as o,H as L,E as t,C as r,F as n,Z as l,O as h,P as y,K as $,I as d,_ as E}from"./V-qzf9OZ.js";import{u as G}from"./DFOx_paA.js";const U={class:"page-header"},A={class:"page-subtitle"},F={class:"view-toggle"},N={key:0,class:"tracks-grid"},O=["onClick"],H={class:"card-image-section"},Z=["src","alt"],V={key:1,class:"card-image-placeholder"},j={class:"card-content"},q={class:"track-name"},J={class:"track-stats"},K={class:"track-sessions"},W={class:"track-last"},Y={class:"track-times"},X={key:1,class:"tracks-list"},ss=["onClick"],ts={class:"lr-name"},as={class:"lr-country"},es={class:"lr-sessions"},ns={class:"lr-last"},os=Q({__name:"PistePage",emits:["go-to-track"],setup(is,{emit:v}){const{getPublicPath:b}=G(),w=v,{trackStats:f,loadSessions:S}=T(),C=R();z(async()=>{await S(C.value||void 0)});const m=D("card"),x={monza:{name:"Monza",country:"IT",length:"5.793 km",image:"/tracks/track_monza.png"},donington:{name:"Donington Park",country:"GB",length:"4.020 km",image:"/tracks/track_donington.png"},spa:{name:"Spa-Francorchamps",country:"BE",length:"7.004 km",image:"/tracks/track_spa.png"},paul_ricard:{name:"Paul Ricard",country:"FR",length:"5.842 km",image:"/tracks/track_paul_ricard.png"},valencia:{name:"Valencia",country:"ES",length:"4.005 km",image:"/tracks/track_valencia.png"},barcelona:{name:"Barcelona-Catalunya",country:"ES",length:"4.655 km",image:"/tracks/track_barcelona.png"},brands_hatch:{name:"Brands Hatch",country:"GB",length:"3.908 km",image:"/tracks/track_brands_hatch.png"},hungaroring:{name:"Hungaroring",country:"HU",length:"4.381 km",image:"/tracks/track_hungaroring.png"},imola:{name:"Imola",country:"IT",length:"4.909 km",image:"/tracks/track_imola.png"},kyalami:{name:"Kyalami",country:"ZA",length:"4.522 km",image:"/tracks/track_kyalami.png"},laguna_seca:{name:"Laguna Seca",country:"US",length:"3.602 km",image:"/tracks/track_laguna_seca.png"},misano:{name:"Misano",country:"IT",length:"4.226 km",image:"/tracks/track_misano.png"},mount_panorama:{name:"Mount Panorama",country:"AU",length:"6.213 km",image:"/tracks/track_mount_panorama.png"},nurburgring:{name:"NÃ¼rburgring",country:"DE",length:"5.148 km",image:"/tracks/track_nurburgring.png"},oulton_park:{name:"Oulton Park",country:"GB",length:"4.307 km",image:"/tracks/track_oulton_park.png"},silverstone:{name:"Silverstone",country:"GB",length:"5.891 km",image:"/tracks/track_silverstone.png"},snetterton:{name:"Snetterton",country:"GB",length:"4.779 km",image:"/tracks/track_snetterton.png"},suzuka:{name:"Suzuka",country:"JP",length:"5.807 km",image:"/tracks/track_suzuka.png"},watkins_glen:{name:"Watkins Glen",country:"US",length:"5.472 km",image:"/tracks/track_watkins_glen.png"},zandvoort:{name:"Zandvoort",country:"NL",length:"4.259 km",image:"/tracks/track_zandvoort.png"},zolder:{name:"Zolder",country:"BE",length:"4.011 km",image:"/tracks/track_zolder.png"},cota:{name:"COTA",country:"US",length:"5.513 km",image:"/tracks/track_cota.png"},indianapolis:{name:"Indianapolis",country:"US",length:"4.192 km",image:"/tracks/track_indianapolis.png"},red_bull_ring:{name:"Red Bull Ring",country:"AT",length:"4.318 km",image:"/tracks/track_red_bull_ring.png"}},B=_(()=>{const e=Object.entries(x).map(([s,i])=>({id:s,...i,sessions:0,lastSession:void 0,bestQualy:void 0,bestRace:void 0}));for(const s of f.value){const i=s.track.toLowerCase().replace(/[^a-z0-9]/g,"_"),a=e.find(c=>c.id===i||c.name.toLowerCase()===s.track.toLowerCase());a?(a.sessions=s.sessions,a.lastSession=s.lastSession?.split("T")[0],a.bestQualy=s.bestQualy?u(s.bestQualy):void 0,a.bestRace=s.bestRace?u(s.bestRace):void 0):e.push({id:i,name:s.track,country:"??",length:"?.??? km",image:void 0,sessions:s.sessions,lastSession:s.lastSession?.split("T")[0],bestQualy:s.bestQualy?u(s.bestQualy):void 0,bestRace:s.bestRace?u(s.bestRace):void 0})}return e}),g=_(()=>[...B.value].sort((e,s)=>e.sessions>0&&s.sessions>0?(s.lastSession||"").localeCompare(e.lastSession||""):e.sessions>0&&s.sessions===0?-1:e.sessions===0&&s.sessions>0?1:e.name.localeCompare(s.name)));function k(e){if(!e)return"Nessuna sessione";const s=new Date(e),i=s.getDate(),c=["Gen","Feb","Mar","Apr","Mag","Giu","Lug","Ago","Set","Ott","Nov","Dic"][s.getMonth()],P=s.getFullYear();return`${i} ${c} ${P}`}function p(e){w("go-to-track",e)}return(e,s)=>{const i=M;return o(),I(i,null,{default:L(()=>[s[9]||(s[9]=t("h1",{class:"page-title"},"PISTE",-1)),t("div",U,[t("p",A,n(g.value.filter(a=>a.sessions>0).length)+" piste visitate su "+n(g.value.length)+" totali",1),t("div",F,[t("button",{class:l(["view-btn",{"view-btn--active":m.value==="card"}]),onClick:s[0]||(s[0]=a=>m.value="card"),title:"Card"},[...s[2]||(s[2]=[t("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("rect",{x:"3",y:"3",width:"7",height:"7",rx:"1"}),t("rect",{x:"14",y:"3",width:"7",height:"7",rx:"1"}),t("rect",{x:"3",y:"14",width:"7",height:"7",rx:"1"}),t("rect",{x:"14",y:"14",width:"7",height:"7",rx:"1"})],-1)])],2),t("button",{class:l(["view-btn",{"view-btn--active":m.value==="list"}]),onClick:s[1]||(s[1]=a=>m.value="list"),title:"Lista"},[...s[3]||(s[3]=[t("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("path",{d:"M8 6h13M8 12h13M8 18h13M3 6h.01M3 12h.01M3 18h.01"})],-1)])],2)])]),m.value==="card"?(o(),r("div",N,[(o(!0),r(h,null,y(g.value,a=>(o(),r("div",{key:a.id,class:l(["track-card",{"track-card--unplayed":a.sessions===0}]),onClick:c=>p(a.id)},[t("div",H,[a.image?(o(),r("img",{key:0,src:$(b)(a.image),alt:a.name,class:"card-track-image"},null,8,Z)):(o(),r("div",V,[...s[4]||(s[4]=[t("span",{class:"placeholder-icon"},"ðŸ",-1)])]))]),t("div",j,[t("h3",q,n(a.name),1),t("div",J,[t("span",K,n(a.sessions)+" sessioni",1),s[5]||(s[5]=t("span",{class:"track-separator"},"Â·",-1)),t("span",W,n(k(a.lastSession)),1)]),t("div",Y,[t("span",{class:l(["time-badge","time-badge--qualy",{"time-badge--empty":!a.bestQualy}])}," Q "+n(a.bestQualy||"â€”:â€”.---"),3),t("span",{class:l(["time-badge","time-badge--race",{"time-badge--empty":!a.bestRace}])}," R "+n(a.bestRace||"â€”:â€”.---"),3)]),s[6]||(s[6]=t("button",{class:"track-cta"},[d(" Dettaglio pista "),t("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("path",{d:"M9 18l6-6-6-6"})])],-1))])],10,O))),128))])):(o(),r("div",X,[s[8]||(s[8]=t("div",{class:"list-header"},[t("span",{class:"lh-name"},"Pista"),t("span",{class:"lh-sessions"},"Sessioni"),t("span",{class:"lh-last"},"Ultima sessione"),t("span",{class:"lh-best"},"Best Q"),t("span",{class:"lh-best"},"Best R"),t("span",{class:"lh-cta"})],-1)),(o(!0),r(h,null,y(g.value,a=>(o(),r("div",{key:a.id,class:l(["list-row",{"list-row--unplayed":a.sessions===0}]),onClick:c=>p(a.id)},[t("span",ts,[t("span",as,n(a.country),1),d(" "+n(a.name),1)]),t("span",es,n(a.sessions),1),t("span",ns,n(k(a.lastSession)),1),t("span",{class:l(["lr-time","lr-time--qualy",{"lr-time--empty":!a.bestQualy}])}," Q "+n(a.bestQualy||"â€”:â€”.---"),3),t("span",{class:l(["lr-time","lr-time--race",{"lr-time--empty":!a.bestRace}])}," R "+n(a.bestRace||"â€”:â€”.---"),3),s[7]||(s[7]=t("span",{class:"lr-cta"},[d(" Dettaglio "),t("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("path",{d:"M9 18l6-6-6-6"})])],-1))],10,ss))),128))]))]),_:1})}}}),ms=Object.assign(E(os,[["__scopeId","data-v-93362a04"]]),{__name:"PagesPistePage"});export{ms as _};
