const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./uT4-c6VP.js","./index.Du2RZnax.css","./Camlx3YZ.js","./_...BBgSxync.css","./qJnGVHJE.js","./G_wLCzBx.js","./dev-upload.CAfU5vij.css","./BGbXHLbF.js","./C4guQoft.js","./DohYDBO7.js","./PageContainer.DMW25oBZ.css","./BD8iScxk.js","./D42-Tgau.js","./PanoramicaPage.i9JPIuPs.css","./CTytCgdU.js","./CQWEf73e.js","./CNoZtg5k.js","./PaginationControls.CNLm8WGw.css","./3RLIVK0Z.js","./TrackDetailPage.urSrkZ7K.css","./BCJJWujk.js","./dev-cleanup.DSSvWY_E.css","./yx8uBltH.js","./BpUNc225.js","./SessionDetailPage.FR4O9qwW.css","./BuaHXrZO.js","./SessioniPage.BxYhrgzv.css","./Ug4LMga0.js","./PistePage.CNmJAgPo.css","./_id_.D9laFF8O.css","./CLG_hfQA.js","./BA3lmt6x.js","./index.Dzufv81H.css","./DntJuIsg.js","./DrxA0LUx.js","./dev-data-audit.5t95g-Ny.css","./fmfgdFLK.js","./CrZpwbKJ.js","./coach.Fr5SOs7k.css","./DW1eNnXe.js","./dashboard.jH60z8Xe.css","./DVqtoUAH.js","./error-404.BLrjNXsr.css","./BsnIpOlo.js","./error-500.DLkAwcfL.css"])))=>i.map(i=>d[i]);
(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function n(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(r){if(r.ep)return;r.ep=!0;const i=n(r);fetch(r.href,i)}})();function Fh(t){const e=Object.create(null);for(const n of t.split(","))e[n]=1;return n=>n in e}const Ke={},ii=[],Ln=()=>{},u_=()=>!1,ea=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),Uh=t=>t.startsWith("onUpdate:"),Ct=Object.assign,Bh=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},Tw=Object.prototype.hasOwnProperty,je=(t,e)=>Tw.call(t,e),ye=Array.isArray,oi=t=>Vi(t)==="[object Map]",Oi=t=>Vi(t)==="[object Set]",Xd=t=>Vi(t)==="[object Date]",ww=t=>Vi(t)==="[object RegExp]",Ae=t=>typeof t=="function",et=t=>typeof t=="string",Tn=t=>typeof t=="symbol",Ge=t=>t!==null&&typeof t=="object",$h=t=>(Ge(t)||Ae(t))&&Ae(t.then)&&Ae(t.catch),h_=Object.prototype.toString,Vi=t=>h_.call(t),bw=t=>Vi(t).slice(8,-1),f_=t=>Vi(t)==="[object Object]",Qc=t=>et(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,ai=Fh(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Yc=t=>{const e=Object.create(null);return(n=>e[n]||(e[n]=t(n)))},Iw=/-\w/g,dn=Yc(t=>t.replace(Iw,e=>e.slice(1).toUpperCase())),Aw=/\B([A-Z])/g,xr=Yc(t=>t.replace(Aw,"-$1").toLowerCase()),Jc=Yc(t=>t.charAt(0).toUpperCase()+t.slice(1)),Jl=Yc(t=>t?`on${Jc(t)}`:""),Bs=(t,e)=>!Object.is(t,e),ci=(t,...e)=>{for(let n=0;n<t.length;n++)t[n](...e)},d_=(t,e,n,s=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:s,value:n})},Xc=t=>{const e=parseFloat(t);return isNaN(e)?t:e},p_=t=>{const e=et(t)?Number(t):NaN;return isNaN(e)?t:e};let Zd;const Zc=()=>Zd||(Zd=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function el(t){if(ye(t)){const e={};for(let n=0;n<t.length;n++){const s=t[n],r=et(s)?Pw(s):el(s);if(r)for(const i in r)e[i]=r[i]}return e}else if(et(t)||Ge(t))return t}const Rw=/;(?![^(]*\))/g,Sw=/:([^]+)/,Cw=/\/\*[^]*?\*\//g;function Pw(t){const e={};return t.replace(Cw,"").split(Rw).forEach(n=>{if(n){const s=n.split(Sw);s.length>1&&(e[s[0].trim()]=s[1].trim())}}),e}function Bt(t){let e="";if(et(t))e=t;else if(ye(t))for(let n=0;n<t.length;n++){const s=Bt(t[n]);s&&(e+=s+" ")}else if(Ge(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}function kw(t){if(!t)return null;let{class:e,style:n}=t;return e&&!et(e)&&(t.class=Bt(e)),n&&(t.style=el(n)),t}const Nw="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Dw=Fh(Nw);function m_(t){return!!t||t===""}function Ow(t,e){if(t.length!==e.length)return!1;let n=!0;for(let s=0;n&&s<t.length;s++)n=ta(t[s],e[s]);return n}function ta(t,e){if(t===e)return!0;let n=Xd(t),s=Xd(e);if(n||s)return n&&s?t.getTime()===e.getTime():!1;if(n=Tn(t),s=Tn(e),n||s)return t===e;if(n=ye(t),s=ye(e),n||s)return n&&s?Ow(t,e):!1;if(n=Ge(t),s=Ge(e),n||s){if(!n||!s)return!1;const r=Object.keys(t).length,i=Object.keys(e).length;if(r!==i)return!1;for(const o in t){const a=t.hasOwnProperty(o),l=e.hasOwnProperty(o);if(a&&!l||!a&&l||!ta(t[o],e[o]))return!1}}return String(t)===String(e)}function Hh(t,e){return t.findIndex(n=>ta(n,e))}const g_=t=>!!(t&&t.__v_isRef===!0),On=t=>et(t)?t:t==null?"":ye(t)||Ge(t)&&(t.toString===h_||!Ae(t.toString))?g_(t)?On(t.value):JSON.stringify(t,__,2):String(t),__=(t,e)=>g_(e)?__(t,e.value):oi(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[s,r],i)=>(n[Xl(s,i)+" =>"]=r,n),{})}:Oi(e)?{[`Set(${e.size})`]:[...e.values()].map(n=>Xl(n))}:Tn(e)?Xl(e):Ge(e)&&!ye(e)&&!f_(e)?String(e):e,Xl=(t,e="")=>{var n;return Tn(t)?`Symbol(${(n=t.description)!=null?n:e})`:t};let Mt;class y_{constructor(e=!1){this.detached=e,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Mt,!e&&Mt&&(this.index=(Mt.scopes||(Mt.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].pause();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].resume();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].resume()}}run(e){if(this._active){const n=Mt;try{return Mt=this,e()}finally{Mt=n}}}on(){++this._on===1&&(this.prevScope=Mt,Mt=this)}off(){this._on>0&&--this._on===0&&(Mt=this.prevScope,this.prevScope=void 0)}stop(e){if(this._active){this._active=!1;let n,s;for(n=0,s=this.effects.length;n<s;n++)this.effects[n].stop();for(this.effects.length=0,n=0,s=this.cleanups.length;n<s;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,s=this.scopes.length;n<s;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const r=this.parent.scopes.pop();r&&r!==this&&(this.parent.scopes[this.index]=r,r.index=this.index)}this.parent=void 0}}}function Vw(t){return new y_(t)}function jh(){return Mt}function Lw(t,e=!1){Mt&&Mt.cleanups.push(t)}let Qe;const Zl=new WeakSet;class v_{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Mt&&Mt.active&&Mt.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,Zl.has(this)&&(Zl.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||T_(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,ep(this),w_(this);const e=Qe,n=_n;Qe=this,_n=!0;try{return this.fn()}finally{b_(this),Qe=e,_n=n,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)Gh(e);this.deps=this.depsTail=void 0,ep(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?Zl.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Lu(this)&&this.run()}get dirty(){return Lu(this)}}let E_=0,Eo,To;function T_(t,e=!1){if(t.flags|=8,e){t.next=To,To=t;return}t.next=Eo,Eo=t}function qh(){E_++}function Wh(){if(--E_>0)return;if(To){let e=To;for(To=void 0;e;){const n=e.next;e.next=void 0,e.flags&=-9,e=n}}let t;for(;Eo;){let e=Eo;for(Eo=void 0;e;){const n=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(s){t||(t=s)}e=n}}if(t)throw t}function w_(t){for(let e=t.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function b_(t){let e,n=t.depsTail,s=n;for(;s;){const r=s.prevDep;s.version===-1?(s===n&&(n=r),Gh(s),Mw(s)):e=s,s.dep.activeLink=s.prevActiveLink,s.prevActiveLink=void 0,s=r}t.deps=e,t.depsTail=n}function Lu(t){for(let e=t.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(I_(e.dep.computed)||e.dep.version!==e.version))return!0;return!!t._dirty}function I_(t){if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===Mo)||(t.globalVersion=Mo,!t.isSSR&&t.flags&128&&(!t.deps&&!t._dirty||!Lu(t))))return;t.flags|=2;const e=t.dep,n=Qe,s=_n;Qe=t,_n=!0;try{w_(t);const r=t.fn(t._value);(e.version===0||Bs(r,t._value))&&(t.flags|=128,t._value=r,e.version++)}catch(r){throw e.version++,r}finally{Qe=n,_n=s,b_(t),t.flags&=-3}}function Gh(t,e=!1){const{dep:n,prevSub:s,nextSub:r}=t;if(s&&(s.nextSub=r,t.prevSub=void 0),r&&(r.prevSub=s,t.nextSub=void 0),n.subs===t&&(n.subs=s,!s&&n.computed)){n.computed.flags&=-5;for(let i=n.computed.deps;i;i=i.nextDep)Gh(i,!0)}!e&&!--n.sc&&n.map&&n.map.delete(n.key)}function Mw(t){const{prevDep:e,nextDep:n}=t;e&&(e.nextDep=n,t.prevDep=void 0),n&&(n.prevDep=e,t.nextDep=void 0)}let _n=!0;const A_=[];function as(){A_.push(_n),_n=!1}function cs(){const t=A_.pop();_n=t===void 0?!0:t}function ep(t){const{cleanup:e}=t;if(t.cleanup=void 0,e){const n=Qe;Qe=void 0;try{e()}finally{Qe=n}}}let Mo=0;class xw{constructor(e,n){this.sub=e,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class zh{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(e){if(!Qe||!_n||Qe===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==Qe)n=this.activeLink=new xw(Qe,this),Qe.deps?(n.prevDep=Qe.depsTail,Qe.depsTail.nextDep=n,Qe.depsTail=n):Qe.deps=Qe.depsTail=n,R_(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const s=n.nextDep;s.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=s),n.prevDep=Qe.depsTail,n.nextDep=void 0,Qe.depsTail.nextDep=n,Qe.depsTail=n,Qe.deps===n&&(Qe.deps=s)}return n}trigger(e){this.version++,Mo++,this.notify(e)}notify(e){qh();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{Wh()}}}function R_(t){if(t.dep.sc++,t.sub.flags&4){const e=t.dep.computed;if(e&&!t.dep.subs){e.flags|=20;for(let s=e.deps;s;s=s.nextDep)R_(s)}const n=t.dep.subs;n!==t&&(t.prevSub=n,n&&(n.nextSub=t)),t.dep.subs=t}}const dc=new WeakMap,wr=Symbol(""),Mu=Symbol(""),xo=Symbol("");function Ft(t,e,n){if(_n&&Qe){let s=dc.get(t);s||dc.set(t,s=new Map);let r=s.get(n);r||(s.set(n,r=new zh),r.map=s,r.key=n),r.track()}}function Jn(t,e,n,s,r,i){const o=dc.get(t);if(!o){Mo++;return}const a=l=>{l&&l.trigger()};if(qh(),e==="clear")o.forEach(a);else{const l=ye(t),u=l&&Qc(n);if(l&&n==="length"){const h=Number(s);o.forEach((f,p)=>{(p==="length"||p===xo||!Tn(p)&&p>=h)&&a(f)})}else switch((n!==void 0||o.has(void 0))&&a(o.get(n)),u&&a(o.get(xo)),e){case"add":l?u&&a(o.get("length")):(a(o.get(wr)),oi(t)&&a(o.get(Mu)));break;case"delete":l||(a(o.get(wr)),oi(t)&&a(o.get(Mu)));break;case"set":oi(t)&&a(o.get(wr));break}}Wh()}function Fw(t,e){const n=dc.get(t);return n&&n.get(e)}function Kr(t){const e=Ue(t);return e===t?e:(Ft(e,"iterate",xo),on(t)?e:e.map(wn))}function tl(t){return Ft(t=Ue(t),"iterate",xo),t}function Cs(t,e){return $n(t)?$s(t)?_i(wn(e)):_i(e):wn(e)}const Uw={__proto__:null,[Symbol.iterator](){return eu(this,Symbol.iterator,t=>Cs(this,t))},concat(...t){return Kr(this).concat(...t.map(e=>ye(e)?Kr(e):e))},entries(){return eu(this,"entries",t=>(t[1]=Cs(this,t[1]),t))},every(t,e){return Gn(this,"every",t,e,void 0,arguments)},filter(t,e){return Gn(this,"filter",t,e,n=>n.map(s=>Cs(this,s)),arguments)},find(t,e){return Gn(this,"find",t,e,n=>Cs(this,n),arguments)},findIndex(t,e){return Gn(this,"findIndex",t,e,void 0,arguments)},findLast(t,e){return Gn(this,"findLast",t,e,n=>Cs(this,n),arguments)},findLastIndex(t,e){return Gn(this,"findLastIndex",t,e,void 0,arguments)},forEach(t,e){return Gn(this,"forEach",t,e,void 0,arguments)},includes(...t){return tu(this,"includes",t)},indexOf(...t){return tu(this,"indexOf",t)},join(t){return Kr(this).join(t)},lastIndexOf(...t){return tu(this,"lastIndexOf",t)},map(t,e){return Gn(this,"map",t,e,void 0,arguments)},pop(){return ao(this,"pop")},push(...t){return ao(this,"push",t)},reduce(t,...e){return tp(this,"reduce",t,e)},reduceRight(t,...e){return tp(this,"reduceRight",t,e)},shift(){return ao(this,"shift")},some(t,e){return Gn(this,"some",t,e,void 0,arguments)},splice(...t){return ao(this,"splice",t)},toReversed(){return Kr(this).toReversed()},toSorted(t){return Kr(this).toSorted(t)},toSpliced(...t){return Kr(this).toSpliced(...t)},unshift(...t){return ao(this,"unshift",t)},values(){return eu(this,"values",t=>Cs(this,t))}};function eu(t,e,n){const s=tl(t),r=s[e]();return s!==t&&!on(t)&&(r._next=r.next,r.next=()=>{const i=r._next();return i.done||(i.value=n(i.value)),i}),r}const Bw=Array.prototype;function Gn(t,e,n,s,r,i){const o=tl(t),a=o!==t&&!on(t),l=o[e];if(l!==Bw[e]){const f=l.apply(t,i);return a?wn(f):f}let u=n;o!==t&&(a?u=function(f,p){return n.call(this,Cs(t,f),p,t)}:n.length>2&&(u=function(f,p){return n.call(this,f,p,t)}));const h=l.call(o,u,s);return a&&r?r(h):h}function tp(t,e,n,s){const r=tl(t);let i=n;return r!==t&&(on(t)?n.length>3&&(i=function(o,a,l){return n.call(this,o,a,l,t)}):i=function(o,a,l){return n.call(this,o,Cs(t,a),l,t)}),r[e](i,...s)}function tu(t,e,n){const s=Ue(t);Ft(s,"iterate",xo);const r=s[e](...n);return(r===-1||r===!1)&&nl(n[0])?(n[0]=Ue(n[0]),s[e](...n)):r}function ao(t,e,n=[]){as(),qh();const s=Ue(t)[e].apply(t,n);return Wh(),cs(),s}const $w=Fh("__proto__,__v_isRef,__isVue"),S_=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(Tn));function Hw(t){Tn(t)||(t=String(t));const e=Ue(this);return Ft(e,"has",t),e.hasOwnProperty(t)}class C_{constructor(e=!1,n=!1){this._isReadonly=e,this._isShallow=n}get(e,n,s){if(n==="__v_skip")return e.__v_skip;const r=this._isReadonly,i=this._isShallow;if(n==="__v_isReactive")return!r;if(n==="__v_isReadonly")return r;if(n==="__v_isShallow")return i;if(n==="__v_raw")return s===(r?i?Xw:D_:i?N_:k_).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(s)?e:void 0;const o=ye(e);if(!r){let l;if(o&&(l=Uw[n]))return l;if(n==="hasOwnProperty")return Hw}const a=Reflect.get(e,n,_t(e)?e:s);if((Tn(n)?S_.has(n):$w(n))||(r||Ft(e,"get",n),i))return a;if(_t(a)){const l=o&&Qc(n)?a:a.value;return r&&Ge(l)?Fu(l):l}return Ge(a)?r?Fu(a):nr(a):a}}class P_ extends C_{constructor(e=!1){super(!1,e)}set(e,n,s,r){let i=e[n];const o=ye(e)&&Qc(n);if(!this._isShallow){const u=$n(i);if(!on(s)&&!$n(s)&&(i=Ue(i),s=Ue(s)),!o&&_t(i)&&!_t(s))return u||(i.value=s),!0}const a=o?Number(n)<e.length:je(e,n),l=Reflect.set(e,n,s,_t(e)?e:r);return e===Ue(r)&&(a?Bs(s,i)&&Jn(e,"set",n,s):Jn(e,"add",n,s)),l}deleteProperty(e,n){const s=je(e,n);e[n];const r=Reflect.deleteProperty(e,n);return r&&s&&Jn(e,"delete",n,void 0),r}has(e,n){const s=Reflect.has(e,n);return(!Tn(n)||!S_.has(n))&&Ft(e,"has",n),s}ownKeys(e){return Ft(e,"iterate",ye(e)?"length":wr),Reflect.ownKeys(e)}}class jw extends C_{constructor(e=!1){super(!0,e)}set(e,n){return!0}deleteProperty(e,n){return!0}}const qw=new P_,Ww=new jw,Gw=new P_(!0);const xu=t=>t,Da=t=>Reflect.getPrototypeOf(t);function zw(t,e,n){return function(...s){const r=this.__v_raw,i=Ue(r),o=oi(i),a=t==="entries"||t===Symbol.iterator&&o,l=t==="keys"&&o,u=r[t](...s),h=n?xu:e?_i:wn;return!e&&Ft(i,"iterate",l?Mu:wr),{next(){const{value:f,done:p}=u.next();return p?{value:f,done:p}:{value:a?[h(f[0]),h(f[1])]:h(f),done:p}},[Symbol.iterator](){return this}}}}function Oa(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function Kw(t,e){const n={get(r){const i=this.__v_raw,o=Ue(i),a=Ue(r);t||(Bs(r,a)&&Ft(o,"get",r),Ft(o,"get",a));const{has:l}=Da(o),u=e?xu:t?_i:wn;if(l.call(o,r))return u(i.get(r));if(l.call(o,a))return u(i.get(a));i!==o&&i.get(r)},get size(){const r=this.__v_raw;return!t&&Ft(Ue(r),"iterate",wr),r.size},has(r){const i=this.__v_raw,o=Ue(i),a=Ue(r);return t||(Bs(r,a)&&Ft(o,"has",r),Ft(o,"has",a)),r===a?i.has(r):i.has(r)||i.has(a)},forEach(r,i){const o=this,a=o.__v_raw,l=Ue(a),u=e?xu:t?_i:wn;return!t&&Ft(l,"iterate",wr),a.forEach((h,f)=>r.call(i,u(h),u(f),o))}};return Ct(n,t?{add:Oa("add"),set:Oa("set"),delete:Oa("delete"),clear:Oa("clear")}:{add(r){!e&&!on(r)&&!$n(r)&&(r=Ue(r));const i=Ue(this);return Da(i).has.call(i,r)||(i.add(r),Jn(i,"add",r,r)),this},set(r,i){!e&&!on(i)&&!$n(i)&&(i=Ue(i));const o=Ue(this),{has:a,get:l}=Da(o);let u=a.call(o,r);u||(r=Ue(r),u=a.call(o,r));const h=l.call(o,r);return o.set(r,i),u?Bs(i,h)&&Jn(o,"set",r,i):Jn(o,"add",r,i),this},delete(r){const i=Ue(this),{has:o,get:a}=Da(i);let l=o.call(i,r);l||(r=Ue(r),l=o.call(i,r)),a&&a.call(i,r);const u=i.delete(r);return l&&Jn(i,"delete",r,void 0),u},clear(){const r=Ue(this),i=r.size!==0,o=r.clear();return i&&Jn(r,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(r=>{n[r]=zw(r,t,e)}),n}function Kh(t,e){const n=Kw(t,e);return(s,r,i)=>r==="__v_isReactive"?!t:r==="__v_isReadonly"?t:r==="__v_raw"?s:Reflect.get(je(n,r)&&r in s?n:s,r,i)}const Qw={get:Kh(!1,!1)},Yw={get:Kh(!1,!0)},Jw={get:Kh(!0,!1)};const k_=new WeakMap,N_=new WeakMap,D_=new WeakMap,Xw=new WeakMap;function Zw(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function eb(t){return t.__v_skip||!Object.isExtensible(t)?0:Zw(bw(t))}function nr(t){return $n(t)?t:Qh(t,!1,qw,Qw,k_)}function Vn(t){return Qh(t,!1,Gw,Yw,N_)}function Fu(t){return Qh(t,!0,Ww,Jw,D_)}function Qh(t,e,n,s,r){if(!Ge(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const i=eb(t);if(i===0)return t;const o=r.get(t);if(o)return o;const a=new Proxy(t,i===2?s:n);return r.set(t,a),a}function $s(t){return $n(t)?$s(t.__v_raw):!!(t&&t.__v_isReactive)}function $n(t){return!!(t&&t.__v_isReadonly)}function on(t){return!!(t&&t.__v_isShallow)}function nl(t){return t?!!t.__v_raw:!1}function Ue(t){const e=t&&t.__v_raw;return e?Ue(e):t}function tb(t){return!je(t,"__v_skip")&&Object.isExtensible(t)&&d_(t,"__v_skip",!0),t}const wn=t=>Ge(t)?nr(t):t,_i=t=>Ge(t)?Fu(t):t;function _t(t){return t?t.__v_isRef===!0:!1}function de(t){return O_(t,!1)}function ls(t){return O_(t,!0)}function O_(t,e){return _t(t)?t:new nb(t,e)}class nb{constructor(e,n){this.dep=new zh,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?e:Ue(e),this._value=n?e:wn(e),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(e){const n=this._rawValue,s=this.__v_isShallow||on(e)||$n(e);e=s?e:Ue(e),Bs(e,n)&&(this._rawValue=e,this._value=s?e:wn(e),this.dep.trigger())}}function We(t){return _t(t)?t.value:t}function sb(t){return Ae(t)?t():We(t)}const rb={get:(t,e,n)=>e==="__v_raw"?t:We(Reflect.get(t,e,n)),set:(t,e,n,s)=>{const r=t[e];return _t(r)&&!_t(n)?(r.value=n,!0):Reflect.set(t,e,n,s)}};function V_(t){return $s(t)?t:new Proxy(t,rb)}class ib{constructor(e,n,s){this._object=e,this._key=n,this._defaultValue=s,this.__v_isRef=!0,this._value=void 0,this._raw=Ue(e);let r=!0,i=e;if(!ye(e)||!Qc(String(n)))do r=!nl(i)||on(i);while(r&&(i=i.__v_raw));this._shallow=r}get value(){let e=this._object[this._key];return this._shallow&&(e=We(e)),this._value=e===void 0?this._defaultValue:e}set value(e){if(this._shallow&&_t(this._raw[this._key])){const n=this._object[this._key];if(_t(n)){n.value=e;return}}this._object[this._key]=e}get dep(){return Fw(this._raw,this._key)}}class ob{constructor(e){this._getter=e,this.__v_isRef=!0,this.__v_isReadonly=!0,this._value=void 0}get value(){return this._value=this._getter()}}function ab(t,e,n){return _t(t)?t:Ae(t)?new ob(t):Ge(t)&&arguments.length>1?cb(t,e,n):de(t)}function cb(t,e,n){return new ib(t,e,n)}class lb{constructor(e,n,s){this.fn=e,this.setter=n,this._value=void 0,this.dep=new zh(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Mo-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=s}notify(){if(this.flags|=16,!(this.flags&8)&&Qe!==this)return T_(this,!0),!0}get value(){const e=this.dep.track();return I_(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function ub(t,e,n=!1){let s,r;return Ae(t)?s=t:(s=t.get,r=t.set),new lb(s,r,n)}const Va={},pc=new WeakMap;let gr;function hb(t,e=!1,n=gr){if(n){let s=pc.get(n);s||pc.set(n,s=[]),s.push(t)}}function fb(t,e,n=Ke){const{immediate:s,deep:r,once:i,scheduler:o,augmentJob:a,call:l}=n,u=R=>r?R:on(R)||r===!1||r===0?Xn(R,1):Xn(R);let h,f,p,g,A=!1,v=!1;if(_t(t)?(f=()=>t.value,A=on(t)):$s(t)?(f=()=>u(t),A=!0):ye(t)?(v=!0,A=t.some(R=>$s(R)||on(R)),f=()=>t.map(R=>{if(_t(R))return R.value;if($s(R))return u(R);if(Ae(R))return l?l(R,2):R()})):Ae(t)?e?f=l?()=>l(t,2):t:f=()=>{if(p){as();try{p()}finally{cs()}}const R=gr;gr=h;try{return l?l(t,3,[g]):t(g)}finally{gr=R}}:f=Ln,e&&r){const R=f,O=r===!0?1/0:r;f=()=>Xn(R(),O)}const D=jh(),V=()=>{h.stop(),D&&D.active&&Bh(D.effects,h)};if(i&&e){const R=e;e=(...O)=>{R(...O),V()}}let N=v?new Array(t.length).fill(Va):Va;const _=R=>{if(!(!(h.flags&1)||!h.dirty&&!R))if(e){const O=h.run();if(r||A||(v?O.some((U,E)=>Bs(U,N[E])):Bs(O,N))){p&&p();const U=gr;gr=h;try{const E=[O,N===Va?void 0:v&&N[0]===Va?[]:N,g];N=O,l?l(e,3,E):e(...E)}finally{gr=U}}}else h.run()};return a&&a(_),h=new v_(f),h.scheduler=o?()=>o(_,!1):_,g=R=>hb(R,!1,h),p=h.onStop=()=>{const R=pc.get(h);if(R){if(l)l(R,4);else for(const O of R)O();pc.delete(h)}},e?s?_(!0):N=h.run():o?o(_.bind(null,!0),!0):h.run(),V.pause=h.pause.bind(h),V.resume=h.resume.bind(h),V.stop=V,V}function Xn(t,e=1/0,n){if(e<=0||!Ge(t)||t.__v_skip||(n=n||new Map,(n.get(t)||0)>=e))return t;if(n.set(t,e),e--,_t(t))Xn(t.value,e,n);else if(ye(t))for(let s=0;s<t.length;s++)Xn(t[s],e,n);else if(Oi(t)||oi(t))t.forEach(s=>{Xn(s,e,n)});else if(f_(t)){for(const s in t)Xn(t[s],e,n);for(const s of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,s)&&Xn(t[s],e,n)}return t}function na(t,e,n,s){try{return s?t(...s):t()}catch(r){Li(r,e,n)}}function bn(t,e,n,s){if(Ae(t)){const r=na(t,e,n,s);return r&&$h(r)&&r.catch(i=>{Li(i,e,n)}),r}if(ye(t)){const r=[];for(let i=0;i<t.length;i++)r.push(bn(t[i],e,n,s));return r}}function Li(t,e,n,s=!0){const r=e?e.vnode:null,{errorHandler:i,throwUnhandledErrorInProduction:o}=e&&e.appContext.config||Ke;if(e){let a=e.parent;const l=e.proxy,u=`https://vuejs.org/error-reference/#runtime-${n}`;for(;a;){const h=a.ec;if(h){for(let f=0;f<h.length;f++)if(h[f](t,l,u)===!1)return}a=a.parent}if(i){as(),na(i,null,10,[t,l,u]),cs();return}}db(t,n,r,s,o)}function db(t,e,n,s=!0,r=!1){if(r)throw t;console.error(t)}const Wt=[];let kn=-1;const li=[];let Ps=null,Yr=0;const L_=Promise.resolve();let mc=null;function zs(t){const e=mc||L_;return t?e.then(this?t.bind(this):t):e}function pb(t){let e=kn+1,n=Wt.length;for(;e<n;){const s=e+n>>>1,r=Wt[s],i=Fo(r);i<t||i===t&&r.flags&2?e=s+1:n=s}return e}function Yh(t){if(!(t.flags&1)){const e=Fo(t),n=Wt[Wt.length-1];!n||!(t.flags&2)&&e>=Fo(n)?Wt.push(t):Wt.splice(pb(e),0,t),t.flags|=1,M_()}}function M_(){mc||(mc=L_.then(x_))}function Uu(t){ye(t)?li.push(...t):Ps&&t.id===-1?Ps.splice(Yr+1,0,t):t.flags&1||(li.push(t),t.flags|=1),M_()}function np(t,e,n=kn+1){for(;n<Wt.length;n++){const s=Wt[n];if(s&&s.flags&2){if(t&&s.id!==t.uid)continue;Wt.splice(n,1),n--,s.flags&4&&(s.flags&=-2),s(),s.flags&4||(s.flags&=-2)}}}function gc(t){if(li.length){const e=[...new Set(li)].sort((n,s)=>Fo(n)-Fo(s));if(li.length=0,Ps){Ps.push(...e);return}for(Ps=e,Yr=0;Yr<Ps.length;Yr++){const n=Ps[Yr];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}Ps=null,Yr=0}}const Fo=t=>t.id==null?t.flags&2?-1:1/0:t.id;function x_(t){try{for(kn=0;kn<Wt.length;kn++){const e=Wt[kn];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),na(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;kn<Wt.length;kn++){const e=Wt[kn];e&&(e.flags&=-2)}kn=-1,Wt.length=0,gc(),mc=null,(Wt.length||li.length)&&x_()}}let Dt=null,F_=null;function _c(t){const e=Dt;return Dt=t,F_=t&&t.type.__scopeId||null,e}function an(t,e=Dt,n){if(!e||t._n)return t;const s=(...r)=>{s._d&&bc(-1);const i=_c(e);let o;try{o=t(...r)}finally{_c(i),s._d&&bc(1)}return o};return s._n=!0,s._c=!0,s._d=!0,s}function ho(t,e){if(Dt===null)return t;const n=al(Dt),s=t.dirs||(t.dirs=[]);for(let r=0;r<e.length;r++){let[i,o,a,l=Ke]=e[r];i&&(Ae(i)&&(i={mounted:i,updated:i}),i.deep&&Xn(o),s.push({dir:i,instance:n,value:o,oldValue:void 0,arg:a,modifiers:l}))}return t}function Nn(t,e,n,s){const r=t.dirs,i=e&&e.dirs;for(let o=0;o<r.length;o++){const a=r[o];i&&(a.oldValue=i[o].value);let l=a.dir[s];l&&(as(),bn(l,n,8,[t.el,a,t,e]),cs())}}function ts(t,e){if(Nt){let n=Nt.provides;const s=Nt.parent&&Nt.parent.provides;s===n&&(n=Nt.provides=Object.create(s)),n[t]=e}}function Ot(t,e,n=!1){const s=Fr();if(s||br){let r=br?br._context.provides:s?s.parent==null||s.ce?s.vnode.appContext&&s.vnode.appContext.provides:s.parent.provides:void 0;if(r&&t in r)return r[t];if(arguments.length>1)return n&&Ae(e)?e.call(s&&s.proxy):e}}function sl(){return!!(Fr()||br)}const mb=Symbol.for("v-scx"),gb=()=>Ot(mb);function _b(t,e){return Jh(t,null,e)}function Mn(t,e,n){return Jh(t,e,n)}function Jh(t,e,n=Ke){const{immediate:s,deep:r,flush:i,once:o}=n,a=Ct({},n),l=e&&s||!e&&i!=="post";let u;if(Ei){if(i==="sync"){const g=gb();u=g.__watcherHandles||(g.__watcherHandles=[])}else if(!l){const g=()=>{};return g.stop=Ln,g.resume=Ln,g.pause=Ln,g}}const h=Nt;a.call=(g,A,v)=>bn(g,h,A,v);let f=!1;i==="post"?a.scheduler=g=>{At(g,h&&h.suspense)}:i!=="sync"&&(f=!0,a.scheduler=(g,A)=>{A?g():Yh(g)}),a.augmentJob=g=>{e&&(g.flags|=4),f&&(g.flags|=2,h&&(g.id=h.uid,g.i=h))};const p=fb(t,e,a);return Ei&&(u?u.push(p):l&&p()),p}function yb(t,e,n){const s=this.proxy,r=et(t)?t.includes(".")?U_(s,t):()=>s[t]:t.bind(s,s);let i;Ae(e)?i=e:(i=e.handler,n=e);const o=ia(this),a=Jh(r,i.bind(s),n);return o(),a}function U_(t,e){const n=e.split(".");return()=>{let s=t;for(let r=0;r<n.length&&s;r++)s=s[n[r]];return s}}const vb=Symbol("_vte"),B_=t=>t.__isTeleport,Yn=Symbol("_leaveCb"),La=Symbol("_enterCb");function Eb(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Ks(()=>{t.isMounted=!0}),ra(()=>{t.isUnmounting=!0}),t}const cn=[Function,Array],$_={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:cn,onEnter:cn,onAfterEnter:cn,onEnterCancelled:cn,onBeforeLeave:cn,onLeave:cn,onAfterLeave:cn,onLeaveCancelled:cn,onBeforeAppear:cn,onAppear:cn,onAfterAppear:cn,onAppearCancelled:cn},H_=t=>{const e=t.subTree;return e.component?H_(e.component):e},Tb={name:"BaseTransition",props:$_,setup(t,{slots:e}){const n=Fr(),s=Eb();return()=>{const r=e.default&&W_(e.default(),!0);if(!r||!r.length)return;const i=j_(r),o=Ue(t),{mode:a}=o;if(s.isLeaving)return nu(i);const l=sp(i);if(!l)return nu(i);let u=Bu(l,o,s,n,f=>u=f);l.type!==pt&&yi(l,u);let h=n.subTree&&sp(n.subTree);if(h&&h.type!==pt&&!mn(h,l)&&H_(n).type!==pt){let f=Bu(h,o,s,n);if(yi(h,f),a==="out-in"&&l.type!==pt)return s.isLeaving=!0,f.afterLeave=()=>{s.isLeaving=!1,n.job.flags&8||n.update(),delete f.afterLeave,h=void 0},nu(i);a==="in-out"&&l.type!==pt?f.delayLeave=(p,g,A)=>{const v=q_(s,h);v[String(h.key)]=h,p[Yn]=()=>{g(),p[Yn]=void 0,delete u.delayedLeave,h=void 0},u.delayedLeave=()=>{A(),delete u.delayedLeave,h=void 0}}:h=void 0}else h&&(h=void 0);return i}}};function j_(t){let e=t[0];if(t.length>1){for(const n of t)if(n.type!==pt){e=n;break}}return e}const wb=Tb;function q_(t,e){const{leavingVNodes:n}=t;let s=n.get(e.type);return s||(s=Object.create(null),n.set(e.type,s)),s}function Bu(t,e,n,s,r){const{appear:i,mode:o,persisted:a=!1,onBeforeEnter:l,onEnter:u,onAfterEnter:h,onEnterCancelled:f,onBeforeLeave:p,onLeave:g,onAfterLeave:A,onLeaveCancelled:v,onBeforeAppear:D,onAppear:V,onAfterAppear:N,onAppearCancelled:_}=e,R=String(t.key),O=q_(n,t),U=(y,C)=>{y&&bn(y,s,9,C)},E=(y,C)=>{const P=C[1];U(y,C),ye(y)?y.every(S=>S.length<=1)&&P():y.length<=1&&P()},I={mode:o,persisted:a,beforeEnter(y){let C=l;if(!n.isMounted)if(i)C=D||l;else return;y[Yn]&&y[Yn](!0);const P=O[R];P&&mn(t,P)&&P.el[Yn]&&P.el[Yn](),U(C,[y])},enter(y){let C=u,P=h,S=f;if(!n.isMounted)if(i)C=V||u,P=N||h,S=_||f;else return;let w=!1;const he=y[La]=Ee=>{w||(w=!0,Ee?U(S,[y]):U(P,[y]),I.delayedLeave&&I.delayedLeave(),y[La]=void 0)};C?E(C,[y,he]):he()},leave(y,C){const P=String(t.key);if(y[La]&&y[La](!0),n.isUnmounting)return C();U(p,[y]);let S=!1;const w=y[Yn]=he=>{S||(S=!0,C(),he?U(v,[y]):U(A,[y]),y[Yn]=void 0,O[P]===t&&delete O[P])};O[P]=t,g?E(g,[y,w]):w()},clone(y){const C=Bu(y,e,n,s,r);return r&&r(C),C}};return I}function nu(t){if(sa(t))return t=fn(t),t.children=null,t}function sp(t){if(!sa(t))return B_(t.type)&&t.children?j_(t.children):t;if(t.component)return t.component.subTree;const{shapeFlag:e,children:n}=t;if(n){if(e&16)return n[0];if(e&32&&Ae(n.default))return n.default()}}function yi(t,e){t.shapeFlag&6&&t.component?(t.transition=e,yi(t.component.subTree,e)):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function W_(t,e=!1,n){let s=[],r=0;for(let i=0;i<t.length;i++){let o=t[i];const a=n==null?o.key:String(n)+String(o.key!=null?o.key:i);o.type===Ze?(o.patchFlag&128&&r++,s=s.concat(W_(o.children,e,a))):(e||o.type!==pt)&&s.push(a!=null?fn(o,{key:a}):o)}if(r>1)for(let i=0;i<s.length;i++)s[i].patchFlag=-2;return s}function ct(t,e){return Ae(t)?Ct({name:t.name},e,{setup:t}):t}function Xh(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}const yc=new WeakMap;function ui(t,e,n,s,r=!1){if(ye(t)){t.forEach((A,v)=>ui(A,e&&(ye(e)?e[v]:e),n,s,r));return}if(ns(s)&&!r){s.shapeFlag&512&&s.type.__asyncResolved&&s.component.subTree.component&&ui(t,e,n,s.component.subTree);return}const i=s.shapeFlag&4?al(s.component):s.el,o=r?null:i,{i:a,r:l}=t,u=e&&e.r,h=a.refs===Ke?a.refs={}:a.refs,f=a.setupState,p=Ue(f),g=f===Ke?u_:A=>je(p,A);if(u!=null&&u!==l){if(rp(e),et(u))h[u]=null,g(u)&&(f[u]=null);else if(_t(u)){u.value=null;const A=e;A.k&&(h[A.k]=null)}}if(Ae(l))na(l,a,12,[o,h]);else{const A=et(l),v=_t(l);if(A||v){const D=()=>{if(t.f){const V=A?g(l)?f[l]:h[l]:l.value;if(r)ye(V)&&Bh(V,i);else if(ye(V))V.includes(i)||V.push(i);else if(A)h[l]=[i],g(l)&&(f[l]=h[l]);else{const N=[i];l.value=N,t.k&&(h[t.k]=N)}}else A?(h[l]=o,g(l)&&(f[l]=o)):v&&(l.value=o,t.k&&(h[t.k]=o))};if(o){const V=()=>{D(),yc.delete(t)};V.id=-1,yc.set(t,V),At(V,n)}else rp(t),D()}}}function rp(t){const e=yc.get(t);e&&(e.flags|=8,yc.delete(t))}let ip=!1;const Qr=()=>{ip||(console.error("Hydration completed but contains mismatches."),ip=!0)},bb=t=>t.namespaceURI.includes("svg")&&t.tagName!=="foreignObject",Ib=t=>t.namespaceURI.includes("MathML"),Ma=t=>{if(t.nodeType===1){if(bb(t))return"svg";if(Ib(t))return"mathml"}},ni=t=>t.nodeType===8;function Ab(t){const{mt:e,p:n,o:{patchProp:s,createText:r,nextSibling:i,parentNode:o,remove:a,insert:l,createComment:u}}=t,h=(_,R)=>{if(!R.hasChildNodes()){n(null,_,R),gc(),R._vnode=_;return}f(R.firstChild,_,null,null,null),gc(),R._vnode=_},f=(_,R,O,U,E,I=!1)=>{I=I||!!R.dynamicChildren;const y=ni(_)&&_.data==="[",C=()=>v(_,R,O,U,E,y),{type:P,ref:S,shapeFlag:w,patchFlag:he}=R;let Ee=_.nodeType;R.el=_,he===-2&&(I=!1,R.dynamicChildren=null);let ce=null;switch(P){case Ir:Ee!==3?R.children===""?(l(R.el=r(""),o(_),_),ce=_):ce=C():(_.data!==R.children&&(Qr(),_.data=R.children),ce=i(_));break;case pt:N(_)?(ce=i(_),V(R.el=_.content.firstChild,_,O)):Ee!==8||y?ce=C():ce=i(_);break;case bo:if(y&&(_=i(_),Ee=_.nodeType),Ee===1||Ee===3){ce=_;const q=!R.children.length;for(let L=0;L<R.staticCount;L++)q&&(R.children+=ce.nodeType===1?ce.outerHTML:ce.data),L===R.staticCount-1&&(R.anchor=ce),ce=i(ce);return y?i(ce):ce}else C();break;case Ze:y?ce=A(_,R,O,U,E,I):ce=C();break;default:if(w&1)(Ee!==1||R.type.toLowerCase()!==_.tagName.toLowerCase())&&!N(_)?ce=C():ce=p(_,R,O,U,E,I);else if(w&6){R.slotScopeIds=E;const q=o(_);if(y?ce=D(_):ni(_)&&_.data==="teleport start"?ce=D(_,_.data,"teleport end"):ce=i(_),e(R,q,null,O,U,Ma(q),I),ns(R)&&!R.type.__asyncResolved){let L;y?(L=be(Ze),L.anchor=ce?ce.previousSibling:q.lastChild):L=_.nodeType===3?rt(""):be("div"),L.el=_,R.component.subTree=L}}else w&64?Ee!==8?ce=C():ce=R.type.hydrate(_,R,O,U,E,I,t,g):w&128&&(ce=R.type.hydrate(_,R,O,U,Ma(o(_)),E,I,t,f))}return S!=null&&ui(S,null,U,R),ce},p=(_,R,O,U,E,I)=>{I=I||!!R.dynamicChildren;const{type:y,props:C,patchFlag:P,shapeFlag:S,dirs:w,transition:he}=R,Ee=y==="input"||y==="option";if(Ee||P!==-1){w&&Nn(R,null,O,"created");let ce=!1;if(N(_)){ce=dy(null,he)&&O&&O.vnode.props&&O.vnode.props.appear;const L=_.content.firstChild;if(ce){const G=L.getAttribute("class");G&&(L.$cls=G),he.beforeEnter(L)}V(L,_,O),R.el=_=L}if(S&16&&!(C&&(C.innerHTML||C.textContent))){let L=g(_.firstChild,R,_,O,U,E,I);for(;L;){xa(_,1)||Qr();const G=L;L=L.nextSibling,a(G)}}else if(S&8){let L=R.children;L[0]===`
`&&(_.tagName==="PRE"||_.tagName==="TEXTAREA")&&(L=L.slice(1));const{textContent:G}=_;G!==L&&G!==L.replace(/\r\n|\r/g,`
`)&&(xa(_,0)||Qr(),_.textContent=R.children)}if(C){if(Ee||!I||P&48){const L=_.tagName.includes("-");for(const G in C)(Ee&&(G.endsWith("value")||G==="indeterminate")||ea(G)&&!ai(G)||G[0]==="."||L)&&s(_,G,null,C[G],void 0,O)}else if(C.onClick)s(_,"onClick",null,C.onClick,void 0,O);else if(P&4&&$s(C.style))for(const L in C.style)C.style[L]}let q;(q=C&&C.onVnodeBeforeMount)&&Kt(q,O,R),w&&Nn(R,null,O,"beforeMount"),((q=C&&C.onVnodeMounted)||w||ce)&&yy(()=>{q&&Kt(q,O,R),ce&&he.enter(_),w&&Nn(R,null,O,"mounted")},U)}return _.nextSibling},g=(_,R,O,U,E,I,y)=>{y=y||!!R.dynamicChildren;const C=R.children,P=C.length;for(let S=0;S<P;S++){const w=y?C[S]:C[S]=nn(C[S]),he=w.type===Ir;_?(he&&!y&&S+1<P&&nn(C[S+1]).type===Ir&&(l(r(_.data.slice(w.children.length)),O,i(_)),_.data=w.children),_=f(_,w,U,E,I,y)):he&&!w.children?l(w.el=r(""),O):(xa(O,1)||Qr(),n(null,w,O,null,U,E,Ma(O),I))}return _},A=(_,R,O,U,E,I)=>{const{slotScopeIds:y}=R;y&&(E=E?E.concat(y):y);const C=o(_),P=g(i(_),R,C,O,U,E,I);return P&&ni(P)&&P.data==="]"?i(R.anchor=P):(Qr(),l(R.anchor=u("]"),C,P),P)},v=(_,R,O,U,E,I)=>{if(xa(_.parentElement,1)||Qr(),R.el=null,I){const P=D(_);for(;;){const S=i(_);if(S&&S!==P)a(S);else break}}const y=i(_),C=o(_);return a(_),n(null,R,C,y,O,U,Ma(C),E),O&&(O.vnode.el=R.el,ol(O,R.el)),y},D=(_,R="[",O="]")=>{let U=0;for(;_;)if(_=i(_),_&&ni(_)&&(_.data===R&&U++,_.data===O)){if(U===0)return i(_);U--}return _},V=(_,R,O)=>{const U=R.parentNode;U&&U.replaceChild(_,R);let E=O;for(;E;)E.vnode.el===R&&(E.vnode.el=E.subTree.el=_),E=E.parent},N=_=>_.nodeType===1&&_.tagName==="TEMPLATE";return[h,f]}const op="data-allow-mismatch",Rb={0:"text",1:"children",2:"class",3:"style",4:"attribute"};function xa(t,e){if(e===0||e===1)for(;t&&!t.hasAttribute(op);)t=t.parentElement;const n=t&&t.getAttribute(op);if(n==null)return!1;if(n==="")return!0;{const s=n.split(",");return e===0&&s.includes("children")?!0:s.includes(Rb[e])}}Zc().requestIdleCallback;Zc().cancelIdleCallback;function Sb(t,e){if(ni(t)&&t.data==="["){let n=1,s=t.nextSibling;for(;s;){if(s.nodeType===1){if(e(s)===!1)break}else if(ni(s))if(s.data==="]"){if(--n===0)break}else s.data==="["&&n++;s=s.nextSibling}}else e(t)}const ns=t=>!!t.type.__asyncLoader;function vc(t){Ae(t)&&(t={loader:t});const{loader:e,loadingComponent:n,errorComponent:s,delay:r=200,hydrate:i,timeout:o,suspensible:a=!0,onError:l}=t;let u=null,h,f=0;const p=()=>(f++,u=null,g()),g=()=>{let A;return u||(A=u=e().catch(v=>{if(v=v instanceof Error?v:new Error(String(v)),l)return new Promise((D,V)=>{l(v,()=>D(p()),()=>V(v),f+1)});throw v}).then(v=>A!==u&&u?u:(v&&(v.__esModule||v[Symbol.toStringTag]==="Module")&&(v=v.default),h=v,v)))};return ct({name:"AsyncComponentWrapper",__asyncLoader:g,__asyncHydrate(A,v,D){let V=!1;(v.bu||(v.bu=[])).push(()=>V=!0);const N=()=>{V||D()},_=i?()=>{const R=i(N,O=>Sb(A,O));R&&(v.bum||(v.bum=[])).push(R)}:N;h?_():g().then(()=>!v.isUnmounted&&_())},get __asyncResolved(){return h},setup(){const A=Nt;if(Xh(A),h)return()=>Fa(h,A);const v=_=>{u=null,Li(_,A,13,!s)};if(a&&A.suspense||Ei)return g().then(_=>()=>Fa(_,A)).catch(_=>(v(_),()=>s?be(s,{error:_}):null));const D=de(!1),V=de(),N=de(!!r);return r&&setTimeout(()=>{N.value=!1},r),o!=null&&setTimeout(()=>{if(!D.value&&!V.value){const _=new Error(`Async component timed out after ${o}ms.`);v(_),V.value=_}},o),g().then(()=>{D.value=!0,A.parent&&sa(A.parent.vnode)&&A.parent.update()}).catch(_=>{v(_),V.value=_}),()=>{if(D.value&&h)return Fa(h,A);if(V.value&&s)return be(s,{error:V.value});if(n&&!N.value)return Fa(n,A)}}})}function Fa(t,e){const{ref:n,props:s,children:r,ce:i}=e.vnode,o=be(t,s,r);return o.ref=n,o.ce=i,delete e.vnode.ce,o}const sa=t=>t.type.__isKeepAlive,Cb={name:"KeepAlive",__isKeepAlive:!0,props:{include:[String,RegExp,Array],exclude:[String,RegExp,Array],max:[String,Number]},setup(t,{slots:e}){const n=Fr(),s=n.ctx;if(!s.renderer)return()=>{const N=e.default&&e.default();return N&&N.length===1?N[0]:N};const r=new Map,i=new Set;let o=null;const a=n.suspense,{renderer:{p:l,m:u,um:h,o:{createElement:f}}}=s,p=f("div");s.activate=(N,_,R,O,U)=>{const E=N.component;u(N,_,R,0,a),l(E.vnode,N,_,R,E,a,O,N.slotScopeIds,U),At(()=>{E.isDeactivated=!1,E.a&&ci(E.a);const I=N.props&&N.props.onVnodeMounted;I&&Kt(I,E.parent,N)},a)},s.deactivate=N=>{const _=N.component;Tc(_.m),Tc(_.a),u(N,p,null,1,a),At(()=>{_.da&&ci(_.da);const R=N.props&&N.props.onVnodeUnmounted;R&&Kt(R,_.parent,N),_.isDeactivated=!0},a)};function g(N){su(N),h(N,n,a,!0)}function A(N){r.forEach((_,R)=>{const O=Ku(ns(_)?_.type.__asyncResolved||{}:_.type);O&&!N(O)&&v(R)})}function v(N){const _=r.get(N);_&&(!o||!mn(_,o))?g(_):o&&su(o),r.delete(N),i.delete(N)}Mn(()=>[t.include,t.exclude],([N,_])=>{N&&A(R=>fo(N,R)),_&&A(R=>!fo(_,R))},{flush:"post",deep:!0});let D=null;const V=()=>{D!=null&&(wc(n.subTree.type)?At(()=>{r.set(D,Ua(n.subTree))},n.subTree.suspense):r.set(D,Ua(n.subTree)))};return Ks(V),Q_(V),ra(()=>{r.forEach(N=>{const{subTree:_,suspense:R}=n,O=Ua(_);if(N.type===O.type&&N.key===O.key){su(O);const U=O.component.da;U&&At(U,R);return}g(N)})}),()=>{if(D=null,!e.default)return o=null;const N=e.default(),_=N[0];if(N.length>1)return o=null,N;if(!Cr(_)||!(_.shapeFlag&4)&&!(_.shapeFlag&128))return o=null,_;let R=Ua(_);if(R.type===pt)return o=null,R;const O=R.type,U=Ku(ns(R)?R.type.__asyncResolved||{}:O),{include:E,exclude:I,max:y}=t;if(E&&(!U||!fo(E,U))||I&&U&&fo(I,U))return R.shapeFlag&=-257,o=R,_;const C=R.key==null?O:R.key,P=r.get(C);return R.el&&(R=fn(R),_.shapeFlag&128&&(_.ssContent=R)),D=C,P?(R.el=P.el,R.component=P.component,R.transition&&yi(R,R.transition),R.shapeFlag|=512,i.delete(C),i.add(C)):(i.add(C),y&&i.size>parseInt(y,10)&&v(i.values().next().value)),R.shapeFlag|=256,o=R,wc(_.type)?_:R}}},Pb=Cb;function fo(t,e){return ye(t)?t.some(n=>fo(n,e)):et(t)?t.split(",").includes(e):ww(t)?(t.lastIndex=0,t.test(e)):!1}function G_(t,e){K_(t,"a",e)}function z_(t,e){K_(t,"da",e)}function K_(t,e,n=Nt){const s=t.__wdc||(t.__wdc=()=>{let r=n;for(;r;){if(r.isDeactivated)return;r=r.parent}return t()});if(rl(e,s,n),n){let r=n.parent;for(;r&&r.parent;)sa(r.parent.vnode)&&kb(s,e,n,r),r=r.parent}}function kb(t,e,n,s){const r=rl(e,t,s,!0);Y_(()=>{Bh(s[e],r)},n)}function su(t){t.shapeFlag&=-257,t.shapeFlag&=-513}function Ua(t){return t.shapeFlag&128?t.ssContent:t}function rl(t,e,n=Nt,s=!1){if(n){const r=n[t]||(n[t]=[]),i=e.__weh||(e.__weh=(...o)=>{as();const a=ia(n),l=bn(e,n,t,o);return a(),cs(),l});return s?r.unshift(i):r.push(i),i}}const ps=t=>(e,n=Nt)=>{(!Ei||t==="sp")&&rl(t,(...s)=>e(...s),n)},Nb=ps("bm"),Ks=ps("m"),Db=ps("bu"),Q_=ps("u"),ra=ps("bum"),Y_=ps("um"),Ob=ps("sp"),Vb=ps("rtg"),Lb=ps("rtc");function J_(t,e=Nt){rl("ec",t,e)}const Zh="components",Mb="directives";function SM(t,e){return ef(Zh,t,!0,e)||t}const X_=Symbol.for("v-ndc");function xb(t){return et(t)?ef(Zh,t,!1)||t:t||X_}function Fb(t){return ef(Mb,t)}function ef(t,e,n=!0,s=!1){const r=Dt||Nt;if(r){const i=r.type;if(t===Zh){const a=Ku(i,!1);if(a&&(a===e||a===dn(e)||a===Jc(dn(e))))return i}const o=ap(r[t]||i[t],e)||ap(r.appContext[t],e);return!o&&s?i:o}}function ap(t,e){return t&&(t[e]||t[dn(e)]||t[Jc(dn(e))])}function CM(t,e,n,s){let r;const i=n,o=ye(t);if(o||et(t)){const a=o&&$s(t);let l=!1,u=!1;a&&(l=!on(t),u=$n(t),t=tl(t)),r=new Array(t.length);for(let h=0,f=t.length;h<f;h++)r[h]=e(l?u?_i(wn(t[h])):wn(t[h]):t[h],h,void 0,i)}else if(typeof t=="number"){r=new Array(t);for(let a=0;a<t;a++)r[a]=e(a+1,a,void 0,i)}else if(Ge(t))if(t[Symbol.iterator])r=Array.from(t,(a,l)=>e(a,l,void 0,i));else{const a=Object.keys(t);r=new Array(a.length);for(let l=0,u=a.length;l<u;l++){const h=a[l];r[l]=e(t[h],h,l,i)}}else r=[];return r}function Ub(t,e,n={},s,r){if(Dt.ce||Dt.parent&&ns(Dt.parent)&&Dt.parent.ce){const u=Object.keys(n).length>0;return Te(),Yt(Ze,null,[be("slot",n,s)],u?-2:64)}let i=t[e];i&&i._c&&(i._d=!1),Te();const o=i&&Z_(i(n)),a=n.key||o&&o.key,l=Yt(Ze,{key:(a&&!Tn(a)?a:`_${e}`)+(!o&&s?"_fb":"")},o||[],o&&t._===1?64:-2);return i&&i._c&&(i._d=!0),l}function Z_(t){return t.some(e=>Cr(e)?!(e.type===pt||e.type===Ze&&!Z_(e.children)):!0)?t:null}const $u=t=>t?Ay(t)?al(t):$u(t.parent):null,wo=Ct(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>$u(t.parent),$root:t=>$u(t.root),$host:t=>t.ce,$emit:t=>t.emit,$options:t=>ty(t),$forceUpdate:t=>t.f||(t.f=()=>{Yh(t.update)}),$nextTick:t=>t.n||(t.n=zs.bind(t.proxy)),$watch:t=>yb.bind(t)}),ru=(t,e)=>t!==Ke&&!t.__isScriptSetup&&je(t,e),Bb={get({_:t},e){if(e==="__v_skip")return!0;const{ctx:n,setupState:s,data:r,props:i,accessCache:o,type:a,appContext:l}=t;if(e[0]!=="$"){const p=o[e];if(p!==void 0)switch(p){case 1:return s[e];case 2:return r[e];case 4:return n[e];case 3:return i[e]}else{if(ru(s,e))return o[e]=1,s[e];if(r!==Ke&&je(r,e))return o[e]=2,r[e];if(je(i,e))return o[e]=3,i[e];if(n!==Ke&&je(n,e))return o[e]=4,n[e];Hu&&(o[e]=0)}}const u=wo[e];let h,f;if(u)return e==="$attrs"&&Ft(t.attrs,"get",""),u(t);if((h=a.__cssModules)&&(h=h[e]))return h;if(n!==Ke&&je(n,e))return o[e]=4,n[e];if(f=l.config.globalProperties,je(f,e))return f[e]},set({_:t},e,n){const{data:s,setupState:r,ctx:i}=t;return ru(r,e)?(r[e]=n,!0):s!==Ke&&je(s,e)?(s[e]=n,!0):je(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(i[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:s,appContext:r,props:i,type:o}},a){let l;return!!(n[a]||t!==Ke&&a[0]!=="$"&&je(t,a)||ru(e,a)||je(i,a)||je(s,a)||je(wo,a)||je(r.config.globalProperties,a)||(l=o.__cssModules)&&l[a])},defineProperty(t,e,n){return n.get!=null?t._.accessCache[e]=0:je(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}};function cp(t){return ye(t)?t.reduce((e,n)=>(e[n]=null,e),{}):t}let Hu=!0;function $b(t){const e=ty(t),n=t.proxy,s=t.ctx;Hu=!1,e.beforeCreate&&lp(e.beforeCreate,t,"bc");const{data:r,computed:i,methods:o,watch:a,provide:l,inject:u,created:h,beforeMount:f,mounted:p,beforeUpdate:g,updated:A,activated:v,deactivated:D,beforeDestroy:V,beforeUnmount:N,destroyed:_,unmounted:R,render:O,renderTracked:U,renderTriggered:E,errorCaptured:I,serverPrefetch:y,expose:C,inheritAttrs:P,components:S,directives:w,filters:he}=e;if(u&&Hb(u,s,null),o)for(const q in o){const L=o[q];Ae(L)&&(s[q]=L.bind(n))}if(r){const q=r.call(n,n);Ge(q)&&(t.data=nr(q))}if(Hu=!0,i)for(const q in i){const L=i[q],G=Ae(L)?L.bind(n,n):Ae(L.get)?L.get.bind(n,n):Ln,H=!Ae(L)&&Ae(L.set)?L.set.bind(n):Ln,B=Fe({get:G,set:H});Object.defineProperty(s,q,{enumerable:!0,configurable:!0,get:()=>B.value,set:j=>B.value=j})}if(a)for(const q in a)ey(a[q],s,n,q);if(l){const q=Ae(l)?l.call(n):l;Reflect.ownKeys(q).forEach(L=>{ts(L,q[L])})}h&&lp(h,t,"c");function ce(q,L){ye(L)?L.forEach(G=>q(G.bind(n))):L&&q(L.bind(n))}if(ce(Nb,f),ce(Ks,p),ce(Db,g),ce(Q_,A),ce(G_,v),ce(z_,D),ce(J_,I),ce(Lb,U),ce(Vb,E),ce(ra,N),ce(Y_,R),ce(Ob,y),ye(C))if(C.length){const q=t.exposed||(t.exposed={});C.forEach(L=>{Object.defineProperty(q,L,{get:()=>n[L],set:G=>n[L]=G,enumerable:!0})})}else t.exposed||(t.exposed={});O&&t.render===Ln&&(t.render=O),P!=null&&(t.inheritAttrs=P),S&&(t.components=S),w&&(t.directives=w),y&&Xh(t)}function Hb(t,e,n=Ln){ye(t)&&(t=ju(t));for(const s in t){const r=t[s];let i;Ge(r)?"default"in r?i=Ot(r.from||s,r.default,!0):i=Ot(r.from||s):i=Ot(r),_t(i)?Object.defineProperty(e,s,{enumerable:!0,configurable:!0,get:()=>i.value,set:o=>i.value=o}):e[s]=i}}function lp(t,e,n){bn(ye(t)?t.map(s=>s.bind(e.proxy)):t.bind(e.proxy),e,n)}function ey(t,e,n,s){let r=s.includes(".")?U_(n,s):()=>n[s];if(et(t)){const i=e[t];Ae(i)&&Mn(r,i)}else if(Ae(t))Mn(r,t.bind(n));else if(Ge(t))if(ye(t))t.forEach(i=>ey(i,e,n,s));else{const i=Ae(t.handler)?t.handler.bind(n):e[t.handler];Ae(i)&&Mn(r,i,t)}}function ty(t){const e=t.type,{mixins:n,extends:s}=e,{mixins:r,optionsCache:i,config:{optionMergeStrategies:o}}=t.appContext,a=i.get(e);let l;return a?l=a:!r.length&&!n&&!s?l=e:(l={},r.length&&r.forEach(u=>Ec(l,u,o,!0)),Ec(l,e,o)),Ge(e)&&i.set(e,l),l}function Ec(t,e,n,s=!1){const{mixins:r,extends:i}=e;i&&Ec(t,i,n,!0),r&&r.forEach(o=>Ec(t,o,n,!0));for(const o in e)if(!(s&&o==="expose")){const a=jb[o]||n&&n[o];t[o]=a?a(t[o],e[o]):e[o]}return t}const jb={data:up,props:hp,emits:hp,methods:po,computed:po,beforeCreate:jt,created:jt,beforeMount:jt,mounted:jt,beforeUpdate:jt,updated:jt,beforeDestroy:jt,beforeUnmount:jt,destroyed:jt,unmounted:jt,activated:jt,deactivated:jt,errorCaptured:jt,serverPrefetch:jt,components:po,directives:po,watch:Wb,provide:up,inject:qb};function up(t,e){return e?t?function(){return Ct(Ae(t)?t.call(this,this):t,Ae(e)?e.call(this,this):e)}:e:t}function qb(t,e){return po(ju(t),ju(e))}function ju(t){if(ye(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function jt(t,e){return t?[...new Set([].concat(t,e))]:e}function po(t,e){return t?Ct(Object.create(null),t,e):e}function hp(t,e){return t?ye(t)&&ye(e)?[...new Set([...t,...e])]:Ct(Object.create(null),cp(t),cp(e??{})):e}function Wb(t,e){if(!t)return e;if(!e)return t;const n=Ct(Object.create(null),t);for(const s in e)n[s]=jt(t[s],e[s]);return n}function ny(){return{app:null,config:{isNativeTag:u_,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Gb=0;function zb(t,e){return function(s,r=null){Ae(s)||(s=Ct({},s)),r!=null&&!Ge(r)&&(r=null);const i=ny(),o=new WeakSet,a=[];let l=!1;const u=i.app={_uid:Gb++,_component:s,_props:r,_container:null,_context:i,_instance:null,version:AI,get config(){return i.config},set config(h){},use(h,...f){return o.has(h)||(h&&Ae(h.install)?(o.add(h),h.install(u,...f)):Ae(h)&&(o.add(h),h(u,...f))),u},mixin(h){return i.mixins.includes(h)||i.mixins.push(h),u},component(h,f){return f?(i.components[h]=f,u):i.components[h]},directive(h,f){return f?(i.directives[h]=f,u):i.directives[h]},mount(h,f,p){if(!l){const g=u._ceVNode||be(s,r);return g.appContext=i,p===!0?p="svg":p===!1&&(p=void 0),f&&e?e(g,h):t(g,h,p),l=!0,u._container=h,h.__vue_app__=u,al(g.component)}},onUnmount(h){a.push(h)},unmount(){l&&(bn(a,u._instance,16),t(null,u._container),delete u._container.__vue_app__)},provide(h,f){return i.provides[h]=f,u},runWithContext(h){const f=br;br=u;try{return h()}finally{br=f}}};return u}}let br=null;const Kb=(t,e)=>e==="modelValue"||e==="model-value"?t.modelModifiers:t[`${e}Modifiers`]||t[`${dn(e)}Modifiers`]||t[`${xr(e)}Modifiers`];function Qb(t,e,...n){if(t.isUnmounted)return;const s=t.vnode.props||Ke;let r=n;const i=e.startsWith("update:"),o=i&&Kb(s,e.slice(7));o&&(o.trim&&(r=n.map(h=>et(h)?h.trim():h)),o.number&&(r=n.map(Xc)));let a,l=s[a=Jl(e)]||s[a=Jl(dn(e))];!l&&i&&(l=s[a=Jl(xr(e))]),l&&bn(l,t,6,r);const u=s[a+"Once"];if(u){if(!t.emitted)t.emitted={};else if(t.emitted[a])return;t.emitted[a]=!0,bn(u,t,6,r)}}const Yb=new WeakMap;function sy(t,e,n=!1){const s=n?Yb:e.emitsCache,r=s.get(t);if(r!==void 0)return r;const i=t.emits;let o={},a=!1;if(!Ae(t)){const l=u=>{const h=sy(u,e,!0);h&&(a=!0,Ct(o,h))};!n&&e.mixins.length&&e.mixins.forEach(l),t.extends&&l(t.extends),t.mixins&&t.mixins.forEach(l)}return!i&&!a?(Ge(t)&&s.set(t,null),null):(ye(i)?i.forEach(l=>o[l]=null):Ct(o,i),Ge(t)&&s.set(t,o),o)}function il(t,e){return!t||!ea(e)?!1:(e=e.slice(2).replace(/Once$/,""),je(t,e[0].toLowerCase()+e.slice(1))||je(t,xr(e))||je(t,e))}function iu(t){const{type:e,vnode:n,proxy:s,withProxy:r,propsOptions:[i],slots:o,attrs:a,emit:l,render:u,renderCache:h,props:f,data:p,setupState:g,ctx:A,inheritAttrs:v}=t,D=_c(t);let V,N;try{if(n.shapeFlag&4){const R=r||s,O=R;V=nn(u.call(O,R,h,f,g,p,A)),N=a}else{const R=e;V=nn(R.length>1?R(f,{attrs:a,slots:o,emit:l}):R(f,null)),N=e.props?a:Xb(a)}}catch(R){Io.length=0,Li(R,t,1),V=be(pt)}let _=V;if(N&&v!==!1){const R=Object.keys(N),{shapeFlag:O}=_;R.length&&O&7&&(i&&R.some(Uh)&&(N=Zb(N,i)),_=fn(_,N,!1,!0))}return n.dirs&&(_=fn(_,null,!1,!0),_.dirs=_.dirs?_.dirs.concat(n.dirs):n.dirs),n.transition&&yi(_,n.transition),V=_,_c(D),V}function Jb(t,e=!0){let n;for(let s=0;s<t.length;s++){const r=t[s];if(Cr(r)){if(r.type!==pt||r.children==="v-if"){if(n)return;n=r}}else return}return n}const Xb=t=>{let e;for(const n in t)(n==="class"||n==="style"||ea(n))&&((e||(e={}))[n]=t[n]);return e},Zb=(t,e)=>{const n={};for(const s in t)(!Uh(s)||!(s.slice(9)in e))&&(n[s]=t[s]);return n};function eI(t,e,n){const{props:s,children:r,component:i}=t,{props:o,children:a,patchFlag:l}=e,u=i.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&l>=0){if(l&1024)return!0;if(l&16)return s?fp(s,o,u):!!o;if(l&8){const h=e.dynamicProps;for(let f=0;f<h.length;f++){const p=h[f];if(o[p]!==s[p]&&!il(u,p))return!0}}}else return(r||a)&&(!a||!a.$stable)?!0:s===o?!1:s?o?fp(s,o,u):!0:!!o;return!1}function fp(t,e,n){const s=Object.keys(e);if(s.length!==Object.keys(t).length)return!0;for(let r=0;r<s.length;r++){const i=s[r];if(e[i]!==t[i]&&!il(n,i))return!0}return!1}function ol({vnode:t,parent:e},n){for(;e;){const s=e.subTree;if(s.suspense&&s.suspense.activeBranch===t&&(s.el=t.el),s===t)(t=e.vnode).el=n,e=e.parent;else break}}const ry={},iy=()=>Object.create(ry),oy=t=>Object.getPrototypeOf(t)===ry;function tI(t,e,n,s=!1){const r={},i=iy();t.propsDefaults=Object.create(null),ay(t,e,r,i);for(const o in t.propsOptions[0])o in r||(r[o]=void 0);n?t.props=s?r:Vn(r):t.type.props?t.props=r:t.props=i,t.attrs=i}function nI(t,e,n,s){const{props:r,attrs:i,vnode:{patchFlag:o}}=t,a=Ue(r),[l]=t.propsOptions;let u=!1;if((s||o>0)&&!(o&16)){if(o&8){const h=t.vnode.dynamicProps;for(let f=0;f<h.length;f++){let p=h[f];if(il(t.emitsOptions,p))continue;const g=e[p];if(l)if(je(i,p))g!==i[p]&&(i[p]=g,u=!0);else{const A=dn(p);r[A]=qu(l,a,A,g,t,!1)}else g!==i[p]&&(i[p]=g,u=!0)}}}else{ay(t,e,r,i)&&(u=!0);let h;for(const f in a)(!e||!je(e,f)&&((h=xr(f))===f||!je(e,h)))&&(l?n&&(n[f]!==void 0||n[h]!==void 0)&&(r[f]=qu(l,a,f,void 0,t,!0)):delete r[f]);if(i!==a)for(const f in i)(!e||!je(e,f))&&(delete i[f],u=!0)}u&&Jn(t.attrs,"set","")}function ay(t,e,n,s){const[r,i]=t.propsOptions;let o=!1,a;if(e)for(let l in e){if(ai(l))continue;const u=e[l];let h;r&&je(r,h=dn(l))?!i||!i.includes(h)?n[h]=u:(a||(a={}))[h]=u:il(t.emitsOptions,l)||(!(l in s)||u!==s[l])&&(s[l]=u,o=!0)}if(i){const l=Ue(n),u=a||Ke;for(let h=0;h<i.length;h++){const f=i[h];n[f]=qu(r,l,f,u[f],t,!je(u,f))}}return o}function qu(t,e,n,s,r,i){const o=t[n];if(o!=null){const a=je(o,"default");if(a&&s===void 0){const l=o.default;if(o.type!==Function&&!o.skipFactory&&Ae(l)){const{propsDefaults:u}=r;if(n in u)s=u[n];else{const h=ia(r);s=u[n]=l.call(null,e),h()}}else s=l;r.ce&&r.ce._setProp(n,s)}o[0]&&(i&&!a?s=!1:o[1]&&(s===""||s===xr(n))&&(s=!0))}return s}const sI=new WeakMap;function cy(t,e,n=!1){const s=n?sI:e.propsCache,r=s.get(t);if(r)return r;const i=t.props,o={},a=[];let l=!1;if(!Ae(t)){const h=f=>{l=!0;const[p,g]=cy(f,e,!0);Ct(o,p),g&&a.push(...g)};!n&&e.mixins.length&&e.mixins.forEach(h),t.extends&&h(t.extends),t.mixins&&t.mixins.forEach(h)}if(!i&&!l)return Ge(t)&&s.set(t,ii),ii;if(ye(i))for(let h=0;h<i.length;h++){const f=dn(i[h]);dp(f)&&(o[f]=Ke)}else if(i)for(const h in i){const f=dn(h);if(dp(f)){const p=i[h],g=o[f]=ye(p)||Ae(p)?{type:p}:Ct({},p),A=g.type;let v=!1,D=!0;if(ye(A))for(let V=0;V<A.length;++V){const N=A[V],_=Ae(N)&&N.name;if(_==="Boolean"){v=!0;break}else _==="String"&&(D=!1)}else v=Ae(A)&&A.name==="Boolean";g[0]=v,g[1]=D,(v||je(g,"default"))&&a.push(f)}}const u=[o,a];return Ge(t)&&s.set(t,u),u}function dp(t){return t[0]!=="$"&&!ai(t)}const tf=t=>t==="_"||t==="_ctx"||t==="$stable",nf=t=>ye(t)?t.map(nn):[nn(t)],rI=(t,e,n)=>{if(e._n)return e;const s=an((...r)=>nf(e(...r)),n);return s._c=!1,s},ly=(t,e,n)=>{const s=t._ctx;for(const r in t){if(tf(r))continue;const i=t[r];if(Ae(i))e[r]=rI(r,i,s);else if(i!=null){const o=nf(i);e[r]=()=>o}}},uy=(t,e)=>{const n=nf(e);t.slots.default=()=>n},hy=(t,e,n)=>{for(const s in e)(n||!tf(s))&&(t[s]=e[s])},iI=(t,e,n)=>{const s=t.slots=iy();if(t.vnode.shapeFlag&32){const r=e._;r?(hy(s,e,n),n&&d_(s,"_",r,!0)):ly(e,s)}else e&&uy(t,e)},oI=(t,e,n)=>{const{vnode:s,slots:r}=t;let i=!0,o=Ke;if(s.shapeFlag&32){const a=e._;a?n&&a===1?i=!1:hy(r,e,n):(i=!e.$stable,ly(e,r)),o=e}else e&&(uy(t,e),o={default:1});if(i)for(const a in r)!tf(a)&&o[a]==null&&delete r[a]},At=yy;function aI(t){return fy(t)}function cI(t){return fy(t,Ab)}function fy(t,e){const n=Zc();n.__VUE__=!0;const{insert:s,remove:r,patchProp:i,createElement:o,createText:a,createComment:l,setText:u,setElementText:h,parentNode:f,nextSibling:p,setScopeId:g=Ln,insertStaticContent:A}=t,v=(b,k,x,J=null,z=null,Z=null,re=void 0,ne=null,ie=!!k.dynamicChildren)=>{if(b===k)return;b&&!mn(b,k)&&(J=M(b),j(b,z,Z,!0),b=null),k.patchFlag===-2&&(ie=!1,k.dynamicChildren=null);const{type:ee,ref:ve,shapeFlag:ue}=k;switch(ee){case Ir:D(b,k,x,J);break;case pt:V(b,k,x,J);break;case bo:b==null&&N(k,x,J,re);break;case Ze:S(b,k,x,J,z,Z,re,ne,ie);break;default:ue&1?O(b,k,x,J,z,Z,re,ne,ie):ue&6?w(b,k,x,J,z,Z,re,ne,ie):(ue&64||ue&128)&&ee.process(b,k,x,J,z,Z,re,ne,ie,K)}ve!=null&&z?ui(ve,b&&b.ref,Z,k||b,!k):ve==null&&b&&b.ref!=null&&ui(b.ref,null,Z,b,!0)},D=(b,k,x,J)=>{if(b==null)s(k.el=a(k.children),x,J);else{const z=k.el=b.el;k.children!==b.children&&u(z,k.children)}},V=(b,k,x,J)=>{b==null?s(k.el=l(k.children||""),x,J):k.el=b.el},N=(b,k,x,J)=>{[b.el,b.anchor]=A(b.children,k,x,J,b.el,b.anchor)},_=({el:b,anchor:k},x,J)=>{let z;for(;b&&b!==k;)z=p(b),s(b,x,J),b=z;s(k,x,J)},R=({el:b,anchor:k})=>{let x;for(;b&&b!==k;)x=p(b),r(b),b=x;r(k)},O=(b,k,x,J,z,Z,re,ne,ie)=>{if(k.type==="svg"?re="svg":k.type==="math"&&(re="mathml"),b==null)U(k,x,J,z,Z,re,ne,ie);else{const ee=b.el&&b.el._isVueCE?b.el:null;try{ee&&ee._beginPatch(),y(b,k,z,Z,re,ne,ie)}finally{ee&&ee._endPatch()}}},U=(b,k,x,J,z,Z,re,ne)=>{let ie,ee;const{props:ve,shapeFlag:ue,transition:me,dirs:Se}=b;if(ie=b.el=o(b.type,Z,ve&&ve.is,ve),ue&8?h(ie,b.children):ue&16&&I(b.children,ie,null,J,z,ou(b,Z),re,ne),Se&&Nn(b,null,J,"created"),E(ie,b,b.scopeId,re,J),ve){for(const $e in ve)$e!=="value"&&!ai($e)&&i(ie,$e,null,ve[$e],Z,J);"value"in ve&&i(ie,"value",null,ve.value,Z),(ee=ve.onVnodeBeforeMount)&&Kt(ee,J,b)}Se&&Nn(b,null,J,"beforeMount");const De=dy(z,me);De&&me.beforeEnter(ie),s(ie,k,x),((ee=ve&&ve.onVnodeMounted)||De||Se)&&At(()=>{ee&&Kt(ee,J,b),De&&me.enter(ie),Se&&Nn(b,null,J,"mounted")},z)},E=(b,k,x,J,z)=>{if(x&&g(b,x),J)for(let Z=0;Z<J.length;Z++)g(b,J[Z]);if(z){let Z=z.subTree;if(k===Z||wc(Z.type)&&(Z.ssContent===k||Z.ssFallback===k)){const re=z.vnode;E(b,re,re.scopeId,re.slotScopeIds,z.parent)}}},I=(b,k,x,J,z,Z,re,ne,ie=0)=>{for(let ee=ie;ee<b.length;ee++){const ve=b[ee]=ne?ks(b[ee]):nn(b[ee]);v(null,ve,k,x,J,z,Z,re,ne)}},y=(b,k,x,J,z,Z,re)=>{const ne=k.el=b.el;let{patchFlag:ie,dynamicChildren:ee,dirs:ve}=k;ie|=b.patchFlag&16;const ue=b.props||Ke,me=k.props||Ke;let Se;if(x&&hr(x,!1),(Se=me.onVnodeBeforeUpdate)&&Kt(Se,x,k,b),ve&&Nn(k,b,x,"beforeUpdate"),x&&hr(x,!0),(ue.innerHTML&&me.innerHTML==null||ue.textContent&&me.textContent==null)&&h(ne,""),ee?C(b.dynamicChildren,ee,ne,x,J,ou(k,z),Z):re||L(b,k,ne,null,x,J,ou(k,z),Z,!1),ie>0){if(ie&16)P(ne,ue,me,x,z);else if(ie&2&&ue.class!==me.class&&i(ne,"class",null,me.class,z),ie&4&&i(ne,"style",ue.style,me.style,z),ie&8){const De=k.dynamicProps;for(let $e=0;$e<De.length;$e++){const Be=De[$e],Vt=ue[Be],vt=me[Be];(vt!==Vt||Be==="value")&&i(ne,Be,Vt,vt,z,x)}}ie&1&&b.children!==k.children&&h(ne,k.children)}else!re&&ee==null&&P(ne,ue,me,x,z);((Se=me.onVnodeUpdated)||ve)&&At(()=>{Se&&Kt(Se,x,k,b),ve&&Nn(k,b,x,"updated")},J)},C=(b,k,x,J,z,Z,re)=>{for(let ne=0;ne<k.length;ne++){const ie=b[ne],ee=k[ne],ve=ie.el&&(ie.type===Ze||!mn(ie,ee)||ie.shapeFlag&198)?f(ie.el):x;v(ie,ee,ve,null,J,z,Z,re,!0)}},P=(b,k,x,J,z)=>{if(k!==x){if(k!==Ke)for(const Z in k)!ai(Z)&&!(Z in x)&&i(b,Z,k[Z],null,z,J);for(const Z in x){if(ai(Z))continue;const re=x[Z],ne=k[Z];re!==ne&&Z!=="value"&&i(b,Z,ne,re,z,J)}"value"in x&&i(b,"value",k.value,x.value,z)}},S=(b,k,x,J,z,Z,re,ne,ie)=>{const ee=k.el=b?b.el:a(""),ve=k.anchor=b?b.anchor:a("");let{patchFlag:ue,dynamicChildren:me,slotScopeIds:Se}=k;Se&&(ne=ne?ne.concat(Se):Se),b==null?(s(ee,x,J),s(ve,x,J),I(k.children||[],x,ve,z,Z,re,ne,ie)):ue>0&&ue&64&&me&&b.dynamicChildren&&b.dynamicChildren.length===me.length?(C(b.dynamicChildren,me,x,z,Z,re,ne),(k.key!=null||z&&k===z.subTree)&&py(b,k,!0)):L(b,k,x,ve,z,Z,re,ne,ie)},w=(b,k,x,J,z,Z,re,ne,ie)=>{k.slotScopeIds=ne,b==null?k.shapeFlag&512?z.ctx.activate(k,x,J,re,ie):he(k,x,J,z,Z,re,ie):Ee(b,k,ie)},he=(b,k,x,J,z,Z,re)=>{const ne=b.component=vI(b,J,z);if(sa(b)&&(ne.ctx.renderer=K),EI(ne,!1,re),ne.asyncDep){if(z&&z.registerDep(ne,ce,re),!b.el){const ie=ne.subTree=be(pt);V(null,ie,k,x),b.placeholder=ie.el}}else ce(ne,b,k,x,z,Z,re)},Ee=(b,k,x)=>{const J=k.component=b.component;if(eI(b,k,x))if(J.asyncDep&&!J.asyncResolved){q(J,k,x);return}else J.next=k,J.update();else k.el=b.el,J.vnode=k},ce=(b,k,x,J,z,Z,re)=>{const ne=()=>{if(b.isMounted){let{next:ue,bu:me,u:Se,parent:De,vnode:$e}=b;{const Et=my(b);if(Et){ue&&(ue.el=$e.el,q(b,ue,re)),Et.asyncDep.then(()=>{b.isUnmounted||ne()});return}}let Be=ue,Vt;hr(b,!1),ue?(ue.el=$e.el,q(b,ue,re)):ue=$e,me&&ci(me),(Vt=ue.props&&ue.props.onVnodeBeforeUpdate)&&Kt(Vt,De,ue,$e),hr(b,!0);const vt=iu(b),zt=b.subTree;b.subTree=vt,v(zt,vt,f(zt.el),M(zt),b,z,Z),ue.el=vt.el,Be===null&&ol(b,vt.el),Se&&At(Se,z),(Vt=ue.props&&ue.props.onVnodeUpdated)&&At(()=>Kt(Vt,De,ue,$e),z)}else{let ue;const{el:me,props:Se}=k,{bm:De,m:$e,parent:Be,root:Vt,type:vt}=b,zt=ns(k);if(hr(b,!1),De&&ci(De),!zt&&(ue=Se&&Se.onVnodeBeforeMount)&&Kt(ue,Be,k),hr(b,!0),me&&Ne){const Et=()=>{b.subTree=iu(b),Ne(me,b.subTree,b,z,null)};zt&&vt.__asyncHydrate?vt.__asyncHydrate(me,b,Et):Et()}else{Vt.ce&&Vt.ce._def.shadowRoot!==!1&&Vt.ce._injectChildStyle(vt);const Et=b.subTree=iu(b);v(null,Et,x,J,b,z,Z),k.el=Et.el}if($e&&At($e,z),!zt&&(ue=Se&&Se.onVnodeMounted)){const Et=k;At(()=>Kt(ue,Be,Et),z)}(k.shapeFlag&256||Be&&ns(Be.vnode)&&Be.vnode.shapeFlag&256)&&b.a&&At(b.a,z),b.isMounted=!0,k=x=J=null}};b.scope.on();const ie=b.effect=new v_(ne);b.scope.off();const ee=b.update=ie.run.bind(ie),ve=b.job=ie.runIfDirty.bind(ie);ve.i=b,ve.id=b.uid,ie.scheduler=()=>Yh(ve),hr(b,!0),ee()},q=(b,k,x)=>{k.component=b;const J=b.vnode.props;b.vnode=k,b.next=null,nI(b,k.props,J,x),oI(b,k.children,x),as(),np(b),cs()},L=(b,k,x,J,z,Z,re,ne,ie=!1)=>{const ee=b&&b.children,ve=b?b.shapeFlag:0,ue=k.children,{patchFlag:me,shapeFlag:Se}=k;if(me>0){if(me&128){H(ee,ue,x,J,z,Z,re,ne,ie);return}else if(me&256){G(ee,ue,x,J,z,Z,re,ne,ie);return}}Se&8?(ve&16&&ae(ee,z,Z),ue!==ee&&h(x,ue)):ve&16?Se&16?H(ee,ue,x,J,z,Z,re,ne,ie):ae(ee,z,Z,!0):(ve&8&&h(x,""),Se&16&&I(ue,x,J,z,Z,re,ne,ie))},G=(b,k,x,J,z,Z,re,ne,ie)=>{b=b||ii,k=k||ii;const ee=b.length,ve=k.length,ue=Math.min(ee,ve);let me;for(me=0;me<ue;me++){const Se=k[me]=ie?ks(k[me]):nn(k[me]);v(b[me],Se,x,null,z,Z,re,ne,ie)}ee>ve?ae(b,z,Z,!0,!1,ue):I(k,x,J,z,Z,re,ne,ie,ue)},H=(b,k,x,J,z,Z,re,ne,ie)=>{let ee=0;const ve=k.length;let ue=b.length-1,me=ve-1;for(;ee<=ue&&ee<=me;){const Se=b[ee],De=k[ee]=ie?ks(k[ee]):nn(k[ee]);if(mn(Se,De))v(Se,De,x,null,z,Z,re,ne,ie);else break;ee++}for(;ee<=ue&&ee<=me;){const Se=b[ue],De=k[me]=ie?ks(k[me]):nn(k[me]);if(mn(Se,De))v(Se,De,x,null,z,Z,re,ne,ie);else break;ue--,me--}if(ee>ue){if(ee<=me){const Se=me+1,De=Se<ve?k[Se].el:J;for(;ee<=me;)v(null,k[ee]=ie?ks(k[ee]):nn(k[ee]),x,De,z,Z,re,ne,ie),ee++}}else if(ee>me)for(;ee<=ue;)j(b[ee],z,Z,!0),ee++;else{const Se=ee,De=ee,$e=new Map;for(ee=De;ee<=me;ee++){const lt=k[ee]=ie?ks(k[ee]):nn(k[ee]);lt.key!=null&&$e.set(lt.key,ee)}let Be,Vt=0;const vt=me-De+1;let zt=!1,Et=0;const Wn=new Array(vt);for(ee=0;ee<vt;ee++)Wn[ee]=0;for(ee=Se;ee<=ue;ee++){const lt=b[ee];if(Vt>=vt){j(lt,z,Z,!0);continue}let en;if(lt.key!=null)en=$e.get(lt.key);else for(Be=De;Be<=me;Be++)if(Wn[Be-De]===0&&mn(lt,k[Be])){en=Be;break}en===void 0?j(lt,z,Z,!0):(Wn[en-De]=ee+1,en>=Et?Et=en:zt=!0,v(lt,k[en],x,null,z,Z,re,ne,ie),Vt++)}const qr=zt?lI(Wn):ii;for(Be=qr.length-1,ee=vt-1;ee>=0;ee--){const lt=De+ee,en=k[lt],or=k[lt+1],Gi=lt+1<ve?or.el||gy(or):J;Wn[ee]===0?v(null,en,x,Gi,z,Z,re,ne,ie):zt&&(Be<0||ee!==qr[Be]?B(en,x,Gi,2):Be--)}}},B=(b,k,x,J,z=null)=>{const{el:Z,type:re,transition:ne,children:ie,shapeFlag:ee}=b;if(ee&6){B(b.component.subTree,k,x,J);return}if(ee&128){b.suspense.move(k,x,J);return}if(ee&64){re.move(b,k,x,K);return}if(re===Ze){s(Z,k,x);for(let ue=0;ue<ie.length;ue++)B(ie[ue],k,x,J);s(b.anchor,k,x);return}if(re===bo){_(b,k,x);return}if(J!==2&&ee&1&&ne)if(J===0)ne.beforeEnter(Z),s(Z,k,x),At(()=>ne.enter(Z),z);else{const{leave:ue,delayLeave:me,afterLeave:Se}=ne,De=()=>{b.ctx.isUnmounted?r(Z):s(Z,k,x)},$e=()=>{Z._isLeaving&&Z[Yn](!0),ue(Z,()=>{De(),Se&&Se()})};me?me(Z,De,$e):$e()}else s(Z,k,x)},j=(b,k,x,J=!1,z=!1)=>{const{type:Z,props:re,ref:ne,children:ie,dynamicChildren:ee,shapeFlag:ve,patchFlag:ue,dirs:me,cacheIndex:Se}=b;if(ue===-2&&(z=!1),ne!=null&&(as(),ui(ne,null,x,b,!0),cs()),Se!=null&&(k.renderCache[Se]=void 0),ve&256){k.ctx.deactivate(b);return}const De=ve&1&&me,$e=!ns(b);let Be;if($e&&(Be=re&&re.onVnodeBeforeUnmount)&&Kt(Be,k,b),ve&6)we(b.component,x,J);else{if(ve&128){b.suspense.unmount(x,J);return}De&&Nn(b,null,k,"beforeUnmount"),ve&64?b.type.remove(b,k,x,K,J):ee&&!ee.hasOnce&&(Z!==Ze||ue>0&&ue&64)?ae(ee,k,x,!1,!0):(Z===Ze&&ue&384||!z&&ve&16)&&ae(ie,k,x),J&&se(b)}($e&&(Be=re&&re.onVnodeUnmounted)||De)&&At(()=>{Be&&Kt(Be,k,b),De&&Nn(b,null,k,"unmounted")},x)},se=b=>{const{type:k,el:x,anchor:J,transition:z}=b;if(k===Ze){pe(x,J);return}if(k===bo){R(b);return}const Z=()=>{r(x),z&&!z.persisted&&z.afterLeave&&z.afterLeave()};if(b.shapeFlag&1&&z&&!z.persisted){const{leave:re,delayLeave:ne}=z,ie=()=>re(x,Z);ne?ne(b.el,Z,ie):ie()}else Z()},pe=(b,k)=>{let x;for(;b!==k;)x=p(b),r(b),b=x;r(k)},we=(b,k,x)=>{const{bum:J,scope:z,job:Z,subTree:re,um:ne,m:ie,a:ee}=b;Tc(ie),Tc(ee),J&&ci(J),z.stop(),Z&&(Z.flags|=8,j(re,b,k,x)),ne&&At(ne,k),At(()=>{b.isUnmounted=!0},k)},ae=(b,k,x,J=!1,z=!1,Z=0)=>{for(let re=Z;re<b.length;re++)j(b[re],k,x,J,z)},M=b=>{if(b.shapeFlag&6)return M(b.component.subTree);if(b.shapeFlag&128)return b.suspense.next();const k=p(b.anchor||b.el),x=k&&k[vb];return x?p(x):k};let te=!1;const W=(b,k,x)=>{let J;b==null?k._vnode&&(j(k._vnode,null,null,!0),J=k._vnode.component):v(k._vnode||null,b,k,null,null,null,x),k._vnode=b,te||(te=!0,np(J),gc(),te=!1)},K={p:v,um:j,m:B,r:se,mt:he,mc:I,pc:L,pbc:C,n:M,o:t};let ge,Ne;return e&&([ge,Ne]=e(K)),{render:W,hydrate:ge,createApp:zb(W,ge)}}function ou({type:t,props:e},n){return n==="svg"&&t==="foreignObject"||n==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:n}function hr({effect:t,job:e},n){n?(t.flags|=32,e.flags|=4):(t.flags&=-33,e.flags&=-5)}function dy(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function py(t,e,n=!1){const s=t.children,r=e.children;if(ye(s)&&ye(r))for(let i=0;i<s.length;i++){const o=s[i];let a=r[i];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=r[i]=ks(r[i]),a.el=o.el),!n&&a.patchFlag!==-2&&py(o,a)),a.type===Ir&&(a.patchFlag!==-1?a.el=o.el:a.__elIndex=i+(t.type===Ze?1:0)),a.type===pt&&!a.el&&(a.el=o.el)}}function lI(t){const e=t.slice(),n=[0];let s,r,i,o,a;const l=t.length;for(s=0;s<l;s++){const u=t[s];if(u!==0){if(r=n[n.length-1],t[r]<u){e[s]=r,n.push(s);continue}for(i=0,o=n.length-1;i<o;)a=i+o>>1,t[n[a]]<u?i=a+1:o=a;u<t[n[i]]&&(i>0&&(e[s]=n[i-1]),n[i]=s)}}for(i=n.length,o=n[i-1];i-- >0;)n[i]=o,o=e[o];return n}function my(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:my(e)}function Tc(t){if(t)for(let e=0;e<t.length;e++)t[e].flags|=8}function gy(t){if(t.placeholder)return t.placeholder;const e=t.component;return e?gy(e.subTree):null}const wc=t=>t.__isSuspense;let Wu=0;const uI={name:"Suspense",__isSuspense:!0,process(t,e,n,s,r,i,o,a,l,u){if(t==null)hI(e,n,s,r,i,o,a,l,u);else{if(i&&i.deps>0&&!t.suspense.isInFallback){e.suspense=t.suspense,e.suspense.vnode=e,e.el=t.el;return}fI(t,e,n,s,r,o,a,l,u)}},hydrate:dI,normalize:pI},sf=uI;function Uo(t,e){const n=t.props&&t.props[e];Ae(n)&&n()}function hI(t,e,n,s,r,i,o,a,l){const{p:u,o:{createElement:h}}=l,f=h("div"),p=t.suspense=_y(t,r,s,e,f,n,i,o,a,l);u(null,p.pendingBranch=t.ssContent,f,null,s,p,i,o),p.deps>0?(Uo(t,"onPending"),Uo(t,"onFallback"),u(null,t.ssFallback,e,n,s,null,i,o),hi(p,t.ssFallback)):p.resolve(!1,!0)}function fI(t,e,n,s,r,i,o,a,{p:l,um:u,o:{createElement:h}}){const f=e.suspense=t.suspense;f.vnode=e,e.el=t.el;const p=e.ssContent,g=e.ssFallback,{activeBranch:A,pendingBranch:v,isInFallback:D,isHydrating:V}=f;if(v)f.pendingBranch=p,mn(v,p)?(l(v,p,f.hiddenContainer,null,r,f,i,o,a),f.deps<=0?f.resolve():D&&(V||(l(A,g,n,s,r,null,i,o,a),hi(f,g)))):(f.pendingId=Wu++,V?(f.isHydrating=!1,f.activeBranch=v):u(v,r,f),f.deps=0,f.effects.length=0,f.hiddenContainer=h("div"),D?(l(null,p,f.hiddenContainer,null,r,f,i,o,a),f.deps<=0?f.resolve():(l(A,g,n,s,r,null,i,o,a),hi(f,g))):A&&mn(A,p)?(l(A,p,n,s,r,f,i,o,a),f.resolve(!0)):(l(null,p,f.hiddenContainer,null,r,f,i,o,a),f.deps<=0&&f.resolve()));else if(A&&mn(A,p))l(A,p,n,s,r,f,i,o,a),hi(f,p);else if(Uo(e,"onPending"),f.pendingBranch=p,p.shapeFlag&512?f.pendingId=p.component.suspenseId:f.pendingId=Wu++,l(null,p,f.hiddenContainer,null,r,f,i,o,a),f.deps<=0)f.resolve();else{const{timeout:N,pendingId:_}=f;N>0?setTimeout(()=>{f.pendingId===_&&f.fallback(g)},N):N===0&&f.fallback(g)}}function _y(t,e,n,s,r,i,o,a,l,u,h=!1){const{p:f,m:p,um:g,n:A,o:{parentNode:v,remove:D}}=u;let V;const N=mI(t);N&&e&&e.pendingBranch&&(V=e.pendingId,e.deps++);const _=t.props?p_(t.props.timeout):void 0,R=i,O={vnode:t,parent:e,parentComponent:n,namespace:o,container:s,hiddenContainer:r,deps:0,pendingId:Wu++,timeout:typeof _=="number"?_:-1,activeBranch:null,pendingBranch:null,isInFallback:!h,isHydrating:h,isUnmounted:!1,effects:[],resolve(U=!1,E=!1){const{vnode:I,activeBranch:y,pendingBranch:C,pendingId:P,effects:S,parentComponent:w,container:he,isInFallback:Ee}=O;let ce=!1;O.isHydrating?O.isHydrating=!1:U||(ce=y&&C.transition&&C.transition.mode==="out-in",ce&&(y.transition.afterLeave=()=>{P===O.pendingId&&(p(C,he,i===R?A(y):i,0),Uu(S),Ee&&I.ssFallback&&(I.ssFallback.el=null))}),y&&(v(y.el)===he&&(i=A(y)),g(y,w,O,!0),!ce&&Ee&&I.ssFallback&&At(()=>I.ssFallback.el=null,O)),ce||p(C,he,i,0)),hi(O,C),O.pendingBranch=null,O.isInFallback=!1;let q=O.parent,L=!1;for(;q;){if(q.pendingBranch){q.effects.push(...S),L=!0;break}q=q.parent}!L&&!ce&&Uu(S),O.effects=[],N&&e&&e.pendingBranch&&V===e.pendingId&&(e.deps--,e.deps===0&&!E&&e.resolve()),Uo(I,"onResolve")},fallback(U){if(!O.pendingBranch)return;const{vnode:E,activeBranch:I,parentComponent:y,container:C,namespace:P}=O;Uo(E,"onFallback");const S=A(I),w=()=>{O.isInFallback&&(f(null,U,C,S,y,null,P,a,l),hi(O,U))},he=U.transition&&U.transition.mode==="out-in";he&&(I.transition.afterLeave=w),O.isInFallback=!0,g(I,y,null,!0),he||w()},move(U,E,I){O.activeBranch&&p(O.activeBranch,U,E,I),O.container=U},next(){return O.activeBranch&&A(O.activeBranch)},registerDep(U,E,I){const y=!!O.pendingBranch;y&&O.deps++;const C=U.vnode.el;U.asyncDep.catch(P=>{Li(P,U,0)}).then(P=>{if(U.isUnmounted||O.isUnmounted||O.pendingId!==U.suspenseId)return;U.asyncResolved=!0;const{vnode:S}=U;zu(U,P),C&&(S.el=C);const w=!C&&U.subTree.el;E(U,S,v(C||U.subTree.el),C?null:A(U.subTree),O,o,I),w&&(S.placeholder=null,D(w)),ol(U,S.el),y&&--O.deps===0&&O.resolve()})},unmount(U,E){O.isUnmounted=!0,O.activeBranch&&g(O.activeBranch,n,U,E),O.pendingBranch&&g(O.pendingBranch,n,U,E)}};return O}function dI(t,e,n,s,r,i,o,a,l){const u=e.suspense=_y(e,s,n,t.parentNode,document.createElement("div"),null,r,i,o,a,!0),h=l(t,u.pendingBranch=e.ssContent,n,u,i,o);return u.deps===0&&u.resolve(!1,!0),h}function pI(t){const{shapeFlag:e,children:n}=t,s=e&32;t.ssContent=pp(s?n.default:n),t.ssFallback=s?pp(n.fallback):be(pt)}function pp(t){let e;if(Ae(t)){const n=vi&&t._c;n&&(t._d=!1,Te()),t=t(),n&&(t._d=!0,e=Zt,vy())}return ye(t)&&(t=Jb(t)),t=nn(t),e&&!t.dynamicChildren&&(t.dynamicChildren=e.filter(n=>n!==t)),t}function yy(t,e){e&&e.pendingBranch?ye(t)?e.effects.push(...t):e.effects.push(t):Uu(t)}function hi(t,e){t.activeBranch=e;const{vnode:n,parentComponent:s}=t;let r=e.el;for(;!r&&e.component;)e=e.component.subTree,r=e.el;n.el=r,s&&s.subTree===n&&(s.vnode.el=r,ol(s,r))}function mI(t){const e=t.props&&t.props.suspensible;return e!=null&&e!==!1}const Ze=Symbol.for("v-fgt"),Ir=Symbol.for("v-txt"),pt=Symbol.for("v-cmt"),bo=Symbol.for("v-stc"),Io=[];let Zt=null;function Te(t=!1){Io.push(Zt=t?null:[])}function vy(){Io.pop(),Zt=Io[Io.length-1]||null}let vi=1;function bc(t,e=!1){vi+=t,t<0&&Zt&&e&&(Zt.hasOnce=!0)}function Ey(t){return t.dynamicChildren=vi>0?Zt||ii:null,vy(),vi>0&&Zt&&Zt.push(t),t}function Oe(t,e,n,s,r,i){return Ey(Q(t,e,n,s,r,i,!0))}function Yt(t,e,n,s,r){return Ey(be(t,e,n,s,r,!0))}function Cr(t){return t?t.__v_isVNode===!0:!1}function mn(t,e){return t.type===e.type&&t.key===e.key}const Ty=({key:t})=>t??null,Xa=({ref:t,ref_key:e,ref_for:n})=>(typeof t=="number"&&(t=""+t),t!=null?et(t)||_t(t)||Ae(t)?{i:Dt,r:t,k:e,f:!!n}:t:null);function Q(t,e=null,n=null,s=0,r=null,i=t===Ze?0:1,o=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&Ty(e),ref:e&&Xa(e),scopeId:F_,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:s,dynamicProps:r,dynamicChildren:null,appContext:null,ctx:Dt};return a?(rf(l,n),i&128&&t.normalize(l)):n&&(l.shapeFlag|=et(n)?8:16),vi>0&&!o&&Zt&&(l.patchFlag>0||i&6)&&l.patchFlag!==32&&Zt.push(l),l}const be=gI;function gI(t,e=null,n=null,s=0,r=null,i=!1){if((!t||t===X_)&&(t=pt),Cr(t)){const a=fn(t,e,!0);return n&&rf(a,n),vi>0&&!i&&Zt&&(a.shapeFlag&6?Zt[Zt.indexOf(t)]=a:Zt.push(a)),a.patchFlag=-2,a}if(II(t)&&(t=t.__vccOpts),e){e=wy(e);let{class:a,style:l}=e;a&&!et(a)&&(e.class=Bt(a)),Ge(l)&&(nl(l)&&!ye(l)&&(l=Ct({},l)),e.style=el(l))}const o=et(t)?1:wc(t)?128:B_(t)?64:Ge(t)?4:Ae(t)?2:0;return Q(t,e,n,s,r,o,i,!0)}function wy(t){return t?nl(t)||oy(t)?Ct({},t):t:null}function fn(t,e,n=!1,s=!1){const{props:r,ref:i,patchFlag:o,children:a,transition:l}=t,u=e?Iy(r||{},e):r,h={__v_isVNode:!0,__v_skip:!0,type:t.type,props:u,key:u&&Ty(u),ref:e&&e.ref?n&&i?ye(i)?i.concat(Xa(e)):[i,Xa(e)]:Xa(e):i,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:a,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==Ze?o===-1?16:o|16:o,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:l,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&fn(t.ssContent),ssFallback:t.ssFallback&&fn(t.ssFallback),placeholder:t.placeholder,el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return l&&s&&yi(h,l.clone(h)),h}function rt(t=" ",e=0){return be(Ir,null,t,e)}function by(t,e){const n=be(bo,null,t);return n.staticCount=e,n}function Qs(t="",e=!1){return e?(Te(),Yt(pt,null,t)):be(pt,null,t)}function nn(t){return t==null||typeof t=="boolean"?be(pt):ye(t)?be(Ze,null,t.slice()):Cr(t)?ks(t):be(Ir,null,String(t))}function ks(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:fn(t)}function rf(t,e){let n=0;const{shapeFlag:s}=t;if(e==null)e=null;else if(ye(e))n=16;else if(typeof e=="object")if(s&65){const r=e.default;r&&(r._c&&(r._d=!1),rf(t,r()),r._c&&(r._d=!0));return}else{n=32;const r=e._;!r&&!oy(e)?e._ctx=Dt:r===3&&Dt&&(Dt.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else Ae(e)?(e={default:e,_ctx:Dt},n=32):(e=String(e),s&64?(n=16,e=[rt(e)]):n=8);t.children=e,t.shapeFlag|=n}function Iy(...t){const e={};for(let n=0;n<t.length;n++){const s=t[n];for(const r in s)if(r==="class")e.class!==s.class&&(e.class=Bt([e.class,s.class]));else if(r==="style")e.style=el([e.style,s.style]);else if(ea(r)){const i=e[r],o=s[r];o&&i!==o&&!(ye(i)&&i.includes(o))&&(e[r]=i?[].concat(i,o):o)}else r!==""&&(e[r]=s[r])}return e}function Kt(t,e,n,s=null){bn(t,e,7,[n,s])}const _I=ny();let yI=0;function vI(t,e,n){const s=t.type,r=(e?e.appContext:t.appContext)||_I,i={uid:yI++,vnode:t,type:s,parent:e,appContext:r,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new y_(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(r.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:cy(s,r),emitsOptions:sy(s,r),emit:null,emitted:null,propsDefaults:Ke,inheritAttrs:s.inheritAttrs,ctx:Ke,data:Ke,props:Ke,attrs:Ke,slots:Ke,refs:Ke,setupState:Ke,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=e?e.root:i,i.emit=Qb.bind(null,i),t.ce&&t.ce(i),i}let Nt=null;const Fr=()=>Nt||Dt;let Ic,Gu;{const t=Zc(),e=(n,s)=>{let r;return(r=t[n])||(r=t[n]=[]),r.push(s),i=>{r.length>1?r.forEach(o=>o(i)):r[0](i)}};Ic=e("__VUE_INSTANCE_SETTERS__",n=>Nt=n),Gu=e("__VUE_SSR_SETTERS__",n=>Ei=n)}const ia=t=>{const e=Nt;return Ic(t),t.scope.on(),()=>{t.scope.off(),Ic(e)}},mp=()=>{Nt&&Nt.scope.off(),Ic(null)};function Ay(t){return t.vnode.shapeFlag&4}let Ei=!1;function EI(t,e=!1,n=!1){e&&Gu(e);const{props:s,children:r}=t.vnode,i=Ay(t);tI(t,s,i,e),iI(t,r,n||e);const o=i?TI(t,e):void 0;return e&&Gu(!1),o}function TI(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,Bb);const{setup:s}=n;if(s){as();const r=t.setupContext=s.length>1?bI(t):null,i=ia(t),o=na(s,t,0,[t.props,r]),a=$h(o);if(cs(),i(),(a||t.sp)&&!ns(t)&&Xh(t),a){if(o.then(mp,mp),e)return o.then(l=>{zu(t,l)}).catch(l=>{Li(l,t,0)});t.asyncDep=o}else zu(t,o)}else Ry(t)}function zu(t,e,n){Ae(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:Ge(e)&&(t.setupState=V_(e)),Ry(t)}function Ry(t,e,n){const s=t.type;t.render||(t.render=s.render||Ln);{const r=ia(t);as();try{$b(t)}finally{cs(),r()}}}const wI={get(t,e){return Ft(t,"get",""),t[e]}};function bI(t){const e=n=>{t.exposed=n||{}};return{attrs:new Proxy(t.attrs,wI),slots:t.slots,emit:t.emit,expose:e}}function al(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(V_(tb(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in wo)return wo[n](t)},has(e,n){return n in e||n in wo}})):t.proxy}function Ku(t,e=!0){return Ae(t)?t.displayName||t.name:t.name||e&&t.__name}function II(t){return Ae(t)&&"__vccOpts"in t}const Fe=(t,e)=>ub(t,e,Ei);function it(t,e,n){try{bc(-1);const s=arguments.length;return s===2?Ge(e)&&!ye(e)?Cr(e)?be(t,null,[e]):be(t,e):be(t,null,e):(s>3?n=Array.prototype.slice.call(arguments,2):s===3&&Cr(n)&&(n=[n]),be(t,e,n))}finally{bc(1)}}const AI="3.5.26";let Qu;const gp=typeof window<"u"&&window.trustedTypes;if(gp)try{Qu=gp.createPolicy("vue",{createHTML:t=>t})}catch{}const Sy=Qu?t=>Qu.createHTML(t):t=>t,RI="http://www.w3.org/2000/svg",SI="http://www.w3.org/1998/Math/MathML",Qn=typeof document<"u"?document:null,_p=Qn&&Qn.createElement("template"),CI={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,s)=>{const r=e==="svg"?Qn.createElementNS(RI,t):e==="mathml"?Qn.createElementNS(SI,t):n?Qn.createElement(t,{is:n}):Qn.createElement(t);return t==="select"&&s&&s.multiple!=null&&r.setAttribute("multiple",s.multiple),r},createText:t=>Qn.createTextNode(t),createComment:t=>Qn.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>Qn.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,n,s,r,i){const o=n?n.previousSibling:e.lastChild;if(r&&(r===i||r.nextSibling))for(;e.insertBefore(r.cloneNode(!0),n),!(r===i||!(r=r.nextSibling)););else{_p.innerHTML=Sy(s==="svg"?`<svg>${t}</svg>`:s==="mathml"?`<math>${t}</math>`:t);const a=_p.content;if(s==="svg"||s==="mathml"){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}e.insertBefore(a,n)}return[o?o.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}},bs="transition",co="animation",Bo=Symbol("_vtc"),Cy={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},PI=Ct({},$_,Cy),kI=t=>(t.displayName="Transition",t.props=PI,t),oa=kI((t,{slots:e})=>it(wb,NI(t),e)),fr=(t,e=[])=>{ye(t)?t.forEach(n=>n(...e)):t&&t(...e)},yp=t=>t?ye(t)?t.some(e=>e.length>1):t.length>1:!1;function NI(t){const e={};for(const S in t)S in Cy||(e[S]=t[S]);if(t.css===!1)return e;const{name:n="v",type:s,duration:r,enterFromClass:i=`${n}-enter-from`,enterActiveClass:o=`${n}-enter-active`,enterToClass:a=`${n}-enter-to`,appearFromClass:l=i,appearActiveClass:u=o,appearToClass:h=a,leaveFromClass:f=`${n}-leave-from`,leaveActiveClass:p=`${n}-leave-active`,leaveToClass:g=`${n}-leave-to`}=t,A=DI(r),v=A&&A[0],D=A&&A[1],{onBeforeEnter:V,onEnter:N,onEnterCancelled:_,onLeave:R,onLeaveCancelled:O,onBeforeAppear:U=V,onAppear:E=N,onAppearCancelled:I=_}=e,y=(S,w,he,Ee)=>{S._enterCancelled=Ee,dr(S,w?h:a),dr(S,w?u:o),he&&he()},C=(S,w)=>{S._isLeaving=!1,dr(S,f),dr(S,g),dr(S,p),w&&w()},P=S=>(w,he)=>{const Ee=S?E:N,ce=()=>y(w,S,he);fr(Ee,[w,ce]),vp(()=>{dr(w,S?l:i),zn(w,S?h:a),yp(Ee)||Ep(w,s,v,ce)})};return Ct(e,{onBeforeEnter(S){fr(V,[S]),zn(S,i),zn(S,o)},onBeforeAppear(S){fr(U,[S]),zn(S,l),zn(S,u)},onEnter:P(!1),onAppear:P(!0),onLeave(S,w){S._isLeaving=!0;const he=()=>C(S,w);zn(S,f),S._enterCancelled?(zn(S,p),bp(S)):(bp(S),zn(S,p)),vp(()=>{S._isLeaving&&(dr(S,f),zn(S,g),yp(R)||Ep(S,s,D,he))}),fr(R,[S,he])},onEnterCancelled(S){y(S,!1,void 0,!0),fr(_,[S])},onAppearCancelled(S){y(S,!0,void 0,!0),fr(I,[S])},onLeaveCancelled(S){C(S),fr(O,[S])}})}function DI(t){if(t==null)return null;if(Ge(t))return[au(t.enter),au(t.leave)];{const e=au(t);return[e,e]}}function au(t){return p_(t)}function zn(t,e){e.split(/\s+/).forEach(n=>n&&t.classList.add(n)),(t[Bo]||(t[Bo]=new Set)).add(e)}function dr(t,e){e.split(/\s+/).forEach(s=>s&&t.classList.remove(s));const n=t[Bo];n&&(n.delete(e),n.size||(t[Bo]=void 0))}function vp(t){requestAnimationFrame(()=>{requestAnimationFrame(t)})}let OI=0;function Ep(t,e,n,s){const r=t._endId=++OI,i=()=>{r===t._endId&&s()};if(n!=null)return setTimeout(i,n);const{type:o,timeout:a,propCount:l}=VI(t,e);if(!o)return s();const u=o+"end";let h=0;const f=()=>{t.removeEventListener(u,p),i()},p=g=>{g.target===t&&++h>=l&&f()};setTimeout(()=>{h<l&&f()},a+1),t.addEventListener(u,p)}function VI(t,e){const n=window.getComputedStyle(t),s=A=>(n[A]||"").split(", "),r=s(`${bs}Delay`),i=s(`${bs}Duration`),o=Tp(r,i),a=s(`${co}Delay`),l=s(`${co}Duration`),u=Tp(a,l);let h=null,f=0,p=0;e===bs?o>0&&(h=bs,f=o,p=i.length):e===co?u>0&&(h=co,f=u,p=l.length):(f=Math.max(o,u),h=f>0?o>u?bs:co:null,p=h?h===bs?i.length:l.length:0);const g=h===bs&&/\b(?:transform|all)(?:,|$)/.test(s(`${bs}Property`).toString());return{type:h,timeout:f,propCount:p,hasTransform:g}}function Tp(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max(...e.map((n,s)=>wp(n)+wp(t[s])))}function wp(t){return t==="auto"?0:Number(t.slice(0,-1).replace(",","."))*1e3}function bp(t){return(t?t.ownerDocument:document).body.offsetHeight}function LI(t,e,n){const s=t[Bo];s&&(e=(e?[e,...s]:[...s]).join(" ")),e==null?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}const Ip=Symbol("_vod"),MI=Symbol("_vsh"),xI=Symbol(""),FI=/(?:^|;)\s*display\s*:/;function UI(t,e,n){const s=t.style,r=et(n);let i=!1;if(n&&!r){if(e)if(et(e))for(const o of e.split(";")){const a=o.slice(0,o.indexOf(":")).trim();n[a]==null&&Za(s,a,"")}else for(const o in e)n[o]==null&&Za(s,o,"");for(const o in n)o==="display"&&(i=!0),Za(s,o,n[o])}else if(r){if(e!==n){const o=s[xI];o&&(n+=";"+o),s.cssText=n,i=FI.test(n)}}else e&&t.removeAttribute("style");Ip in t&&(t[Ip]=i?s.display:"",t[MI]&&(s.display="none"))}const Ap=/\s*!important$/;function Za(t,e,n){if(ye(n))n.forEach(s=>Za(t,e,s));else if(n==null&&(n=""),e.startsWith("--"))t.setProperty(e,n);else{const s=BI(t,e);Ap.test(n)?t.setProperty(xr(s),n.replace(Ap,""),"important"):t[s]=n}}const Rp=["Webkit","Moz","ms"],cu={};function BI(t,e){const n=cu[e];if(n)return n;let s=dn(e);if(s!=="filter"&&s in t)return cu[e]=s;s=Jc(s);for(let r=0;r<Rp.length;r++){const i=Rp[r]+s;if(i in t)return cu[e]=i}return e}const Sp="http://www.w3.org/1999/xlink";function Cp(t,e,n,s,r,i=Dw(e)){s&&e.startsWith("xlink:")?n==null?t.removeAttributeNS(Sp,e.slice(6,e.length)):t.setAttributeNS(Sp,e,n):n==null||i&&!m_(n)?t.removeAttribute(e):t.setAttribute(e,i?"":Tn(n)?String(n):n)}function Pp(t,e,n,s,r){if(e==="innerHTML"||e==="textContent"){n!=null&&(t[e]=e==="innerHTML"?Sy(n):n);return}const i=t.tagName;if(e==="value"&&i!=="PROGRESS"&&!i.includes("-")){const a=i==="OPTION"?t.getAttribute("value")||"":t.value,l=n==null?t.type==="checkbox"?"on":"":String(n);(a!==l||!("_value"in t))&&(t.value=l),n==null&&t.removeAttribute(e),t._value=n;return}let o=!1;if(n===""||n==null){const a=typeof t[e];a==="boolean"?n=m_(n):n==null&&a==="string"?(n="",o=!0):a==="number"&&(n=0,o=!0)}try{t[e]=n}catch{}o&&t.removeAttribute(r||e)}function Ds(t,e,n,s){t.addEventListener(e,n,s)}function $I(t,e,n,s){t.removeEventListener(e,n,s)}const kp=Symbol("_vei");function HI(t,e,n,s,r=null){const i=t[kp]||(t[kp]={}),o=i[e];if(s&&o)o.value=s;else{const[a,l]=jI(e);if(s){const u=i[e]=GI(s,r);Ds(t,a,u,l)}else o&&($I(t,a,o,l),i[e]=void 0)}}const Np=/(?:Once|Passive|Capture)$/;function jI(t){let e;if(Np.test(t)){e={};let s;for(;s=t.match(Np);)t=t.slice(0,t.length-s[0].length),e[s[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):xr(t.slice(2)),e]}let lu=0;const qI=Promise.resolve(),WI=()=>lu||(qI.then(()=>lu=0),lu=Date.now());function GI(t,e){const n=s=>{if(!s._vts)s._vts=Date.now();else if(s._vts<=n.attached)return;bn(zI(s,n.value),e,5,[s])};return n.value=t,n.attached=WI(),n}function zI(t,e){if(ye(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(s=>r=>!r._stopped&&s&&s(r))}else return e}const Dp=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,KI=(t,e,n,s,r,i)=>{const o=r==="svg";e==="class"?LI(t,s,o):e==="style"?UI(t,n,s):ea(e)?Uh(e)||HI(t,e,n,s,i):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):QI(t,e,s,o))?(Pp(t,e,s),!t.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&Cp(t,e,s,o,i,e!=="value")):t._isVueCE&&(/[A-Z]/.test(e)||!et(s))?Pp(t,dn(e),s,i,e):(e==="true-value"?t._trueValue=s:e==="false-value"&&(t._falseValue=s),Cp(t,e,s,o))};function QI(t,e,n,s){if(s)return!!(e==="innerHTML"||e==="textContent"||e in t&&Dp(e)&&Ae(n));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="autocorrect"||e==="sandbox"&&t.tagName==="IFRAME"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const r=t.tagName;if(r==="IMG"||r==="VIDEO"||r==="CANVAS"||r==="SOURCE")return!1}return Dp(e)&&et(n)?!1:e in t}const Ti=t=>{const e=t.props["onUpdate:modelValue"]||!1;return ye(e)?n=>ci(e,n):e};function YI(t){t.target.composing=!0}function Op(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const ss=Symbol("_assign");function Vp(t,e,n){return e&&(t=t.trim()),n&&(t=Xc(t)),t}const Ba={created(t,{modifiers:{lazy:e,trim:n,number:s}},r){t[ss]=Ti(r);const i=s||r.props&&r.props.type==="number";Ds(t,e?"change":"input",o=>{o.target.composing||t[ss](Vp(t.value,n,i))}),(n||i)&&Ds(t,"change",()=>{t.value=Vp(t.value,n,i)}),e||(Ds(t,"compositionstart",YI),Ds(t,"compositionend",Op),Ds(t,"change",Op))},mounted(t,{value:e}){t.value=e??""},beforeUpdate(t,{value:e,oldValue:n,modifiers:{lazy:s,trim:r,number:i}},o){if(t[ss]=Ti(o),t.composing)return;const a=(i||t.type==="number")&&!/^0\d/.test(t.value)?Xc(t.value):t.value,l=e??"";a!==l&&(document.activeElement===t&&t.type!=="range"&&(s&&e===n||r&&t.value.trim()===l)||(t.value=l))}},PM={deep:!0,created(t,e,n){t[ss]=Ti(n),Ds(t,"change",()=>{const s=t._modelValue,r=$o(t),i=t.checked,o=t[ss];if(ye(s)){const a=Hh(s,r),l=a!==-1;if(i&&!l)o(s.concat(r));else if(!i&&l){const u=[...s];u.splice(a,1),o(u)}}else if(Oi(s)){const a=new Set(s);i?a.add(r):a.delete(r),o(a)}else o(Py(t,i))})},mounted:Lp,beforeUpdate(t,e,n){t[ss]=Ti(n),Lp(t,e,n)}};function Lp(t,{value:e,oldValue:n},s){t._modelValue=e;let r;if(ye(e))r=Hh(e,s.props.value)>-1;else if(Oi(e))r=e.has(s.props.value);else{if(e===n)return;r=ta(e,Py(t,!0))}t.checked!==r&&(t.checked=r)}const kM={deep:!0,created(t,{value:e,modifiers:{number:n}},s){const r=Oi(e);Ds(t,"change",()=>{const i=Array.prototype.filter.call(t.options,o=>o.selected).map(o=>n?Xc($o(o)):$o(o));t[ss](t.multiple?r?new Set(i):i:i[0]),t._assigning=!0,zs(()=>{t._assigning=!1})}),t[ss]=Ti(s)},mounted(t,{value:e}){Mp(t,e)},beforeUpdate(t,e,n){t[ss]=Ti(n)},updated(t,{value:e}){t._assigning||Mp(t,e)}};function Mp(t,e){const n=t.multiple,s=ye(e);if(!(n&&!s&&!Oi(e))){for(let r=0,i=t.options.length;r<i;r++){const o=t.options[r],a=$o(o);if(n)if(s){const l=typeof a;l==="string"||l==="number"?o.selected=e.some(u=>String(u)===String(a)):o.selected=Hh(e,a)>-1}else o.selected=e.has(a);else if(ta($o(o),e)){t.selectedIndex!==r&&(t.selectedIndex=r);return}}!n&&t.selectedIndex!==-1&&(t.selectedIndex=-1)}}function $o(t){return"_value"in t?t._value:t.value}function Py(t,e){const n=e?"_trueValue":"_falseValue";return n in t?t[n]:e}const JI=["ctrl","shift","alt","meta"],XI={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>JI.some(n=>t[`${n}Key`]&&!e.includes(n))},cl=(t,e)=>{const n=t._withMods||(t._withMods={}),s=e.join(".");return n[s]||(n[s]=((r,...i)=>{for(let o=0;o<e.length;o++){const a=XI[e[o]];if(a&&a(r,e))return}return t(r,...i)}))},ky=Ct({patchProp:KI},CI);let Ao,xp=!1;function ZI(){return Ao||(Ao=aI(ky))}function eA(){return Ao=xp?Ao:cI(ky),xp=!0,Ao}const tA=((...t)=>{const e=ZI().createApp(...t),{mount:n}=e;return e.mount=s=>{const r=Dy(s);if(!r)return;const i=e._component;!Ae(i)&&!i.render&&!i.template&&(i.template=r.innerHTML),r.nodeType===1&&(r.textContent="");const o=n(r,!1,Ny(r));return r instanceof Element&&(r.removeAttribute("v-cloak"),r.setAttribute("data-v-app","")),o},e}),nA=((...t)=>{const e=eA().createApp(...t),{mount:n}=e;return e.mount=s=>{const r=Dy(s);if(r)return n(r,!0,Ny(r))},e});function Ny(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function Dy(t){return et(t)?document.querySelector(t):t}const sA=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,rA=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,iA=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/;function oA(t,e){if(t==="__proto__"||t==="constructor"&&e&&typeof e=="object"&&"prototype"in e){aA(t);return}return e}function aA(t){console.warn(`[destr] Dropping "${t}" key to prevent prototype pollution.`)}function Ac(t,e={}){if(typeof t!="string")return t;if(t[0]==='"'&&t[t.length-1]==='"'&&t.indexOf("\\")===-1)return t.slice(1,-1);const n=t.trim();if(n.length<=9)switch(n.toLowerCase()){case"true":return!0;case"false":return!1;case"undefined":return;case"null":return null;case"nan":return Number.NaN;case"infinity":return Number.POSITIVE_INFINITY;case"-infinity":return Number.NEGATIVE_INFINITY}if(!iA.test(t)){if(e.strict)throw new SyntaxError("[destr] Invalid JSON");return t}try{if(sA.test(t)||rA.test(t)){if(e.strict)throw new Error("[destr] Possible prototype pollution");return JSON.parse(t,oA)}return JSON.parse(t)}catch(s){if(e.strict)throw s;return t}}const cA=/#/g,lA=/&/g,uA=/\//g,hA=/=/g,of=/\+/g,fA=/%5e/gi,dA=/%60/gi,pA=/%7c/gi,mA=/%20/gi;function gA(t){return encodeURI(""+t).replace(pA,"|")}function Yu(t){return gA(typeof t=="string"?t:JSON.stringify(t)).replace(of,"%2B").replace(mA,"+").replace(cA,"%23").replace(lA,"%26").replace(dA,"`").replace(fA,"^").replace(uA,"%2F")}function uu(t){return Yu(t).replace(hA,"%3D")}function Rc(t=""){try{return decodeURIComponent(""+t)}catch{return""+t}}function _A(t){return Rc(t.replace(of," "))}function yA(t){return Rc(t.replace(of," "))}function Oy(t=""){const e=Object.create(null);t[0]==="?"&&(t=t.slice(1));for(const n of t.split("&")){const s=n.match(/([^=]+)=?(.*)/)||[];if(s.length<2)continue;const r=_A(s[1]);if(r==="__proto__"||r==="constructor")continue;const i=yA(s[2]||"");e[r]===void 0?e[r]=i:Array.isArray(e[r])?e[r].push(i):e[r]=[e[r],i]}return e}function vA(t,e){return(typeof e=="number"||typeof e=="boolean")&&(e=String(e)),e?Array.isArray(e)?e.map(n=>`${uu(t)}=${Yu(n)}`).join("&"):`${uu(t)}=${Yu(e)}`:uu(t)}function EA(t){return Object.keys(t).filter(e=>t[e]!==void 0).map(e=>vA(e,t[e])).filter(Boolean).join("&")}const TA=/^[\s\w\0+.-]{2,}:([/\\]{1,2})/,wA=/^[\s\w\0+.-]{2,}:([/\\]{2})?/,bA=/^([/\\]\s*){2,}[^/\\]/,IA=/^[\s\0]*(blob|data|javascript|vbscript):$/i,AA=/\/$|\/\?|\/#/,RA=/^\.?\//;function Ur(t,e={}){return typeof e=="boolean"&&(e={acceptRelative:e}),e.strict?TA.test(t):wA.test(t)||(e.acceptRelative?bA.test(t):!1)}function SA(t){return!!t&&IA.test(t)}function Ju(t="",e){return e?AA.test(t):t.endsWith("/")}function Sc(t="",e){if(!e)return(Ju(t)?t.slice(0,-1):t)||"/";if(!Ju(t,!0))return t||"/";let n=t,s="";const r=t.indexOf("#");r!==-1&&(n=t.slice(0,r),s=t.slice(r));const[i,...o]=n.split("?");return((i.endsWith("/")?i.slice(0,-1):i)||"/")+(o.length>0?`?${o.join("?")}`:"")+s}function CA(t="",e){if(!e)return t.endsWith("/")?t:t+"/";if(Ju(t,!0))return t||"/";let n=t,s="";const r=t.indexOf("#");if(r!==-1&&(n=t.slice(0,r),s=t.slice(r),!n))return s;const[i,...o]=n.split("?");return i+"/"+(o.length>0?`?${o.join("?")}`:"")+s}function PA(t,e){if(Ly(e)||Ur(t))return t;const n=Sc(e);return t.startsWith(n)?t:af(n,t)}function Fp(t,e){if(Ly(e))return t;const n=Sc(e);if(!t.startsWith(n))return t;const s=t.slice(n.length);return s[0]==="/"?s:"/"+s}function Vy(t,e){const n=Fy(t),s={...Oy(n.search),...e};return n.search=EA(s),DA(n)}function Ly(t){return!t||t==="/"}function kA(t){return t&&t!=="/"}function af(t,...e){let n=t||"";for(const s of e.filter(r=>kA(r)))if(n){const r=s.replace(RA,"");n=CA(n)+r}else n=s;return n}function My(...t){const e=/\/(?!\/)/,n=t.filter(Boolean),s=[];let r=0;for(const o of n)if(!(!o||o==="/")){for(const[a,l]of o.split(e).entries())if(!(!l||l===".")){if(l===".."){if(s.length===1&&Ur(s[0]))continue;s.pop(),r--;continue}if(a===1&&s[s.length-1]?.endsWith(":/")){s[s.length-1]+="/"+l;continue}s.push(l),r++}}let i=s.join("/");return r>=0?n[0]?.startsWith("/")&&!i.startsWith("/")?i="/"+i:n[0]?.startsWith("./")&&!i.startsWith("./")&&(i="./"+i):i="../".repeat(-1*r)+i,n[n.length-1]?.endsWith("/")&&!i.endsWith("/")&&(i+="/"),i}function NA(t,e){return Rc(Sc(t))===Rc(Sc(e))}const xy=Symbol.for("ufo:protocolRelative");function Fy(t="",e){const n=t.match(/^[\s\0]*(blob:|data:|javascript:|vbscript:)(.*)/i);if(n){const[,f,p=""]=n;return{protocol:f.toLowerCase(),pathname:p,href:f+p,auth:"",host:"",search:"",hash:""}}if(!Ur(t,{acceptRelative:!0}))return Up(t);const[,s="",r,i=""]=t.replace(/\\/g,"/").match(/^[\s\0]*([\w+.-]{2,}:)?\/\/([^/@]+@)?(.*)/)||[];let[,o="",a=""]=i.match(/([^#/?]*)(.*)?/)||[];s==="file:"&&(a=a.replace(/\/(?=[A-Za-z]:)/,""));const{pathname:l,search:u,hash:h}=Up(a);return{protocol:s.toLowerCase(),auth:r?r.slice(0,Math.max(0,r.length-1)):"",host:o,pathname:l,search:u,hash:h,[xy]:!s}}function Up(t=""){const[e="",n="",s=""]=(t.match(/([^#?]*)(\?[^#]*)?(#.*)?/)||[]).splice(1);return{pathname:e,search:n,hash:s}}function DA(t){const e=t.pathname||"",n=t.search?(t.search.startsWith("?")?"":"?")+t.search:"",s=t.hash||"",r=t.auth?t.auth+"@":"",i=t.host||"";return(t.protocol||t[xy]?(t.protocol||"")+"//":"")+r+i+e+n+s}class OA extends Error{constructor(e,n){super(e,n),this.name="FetchError",n?.cause&&!this.cause&&(this.cause=n.cause)}}function VA(t){const e=t.error?.message||t.error?.toString()||"",n=t.request?.method||t.options?.method||"GET",s=t.request?.url||String(t.request)||"/",r=`[${n}] ${JSON.stringify(s)}`,i=t.response?`${t.response.status} ${t.response.statusText}`:"<no response>",o=`${r}: ${i}${e?` ${e}`:""}`,a=new OA(o,t.error?{cause:t.error}:void 0);for(const l of["request","options","response"])Object.defineProperty(a,l,{get(){return t[l]}});for(const[l,u]of[["data","_data"],["status","status"],["statusCode","status"],["statusText","statusText"],["statusMessage","statusText"]])Object.defineProperty(a,l,{get(){return t.response&&t.response[u]}});return a}const LA=new Set(Object.freeze(["PATCH","POST","PUT","DELETE"]));function Bp(t="GET"){return LA.has(t.toUpperCase())}function MA(t){if(t===void 0)return!1;const e=typeof t;return e==="string"||e==="number"||e==="boolean"||e===null?!0:e!=="object"?!1:Array.isArray(t)?!0:t.buffer||t instanceof FormData||t instanceof URLSearchParams?!1:t.constructor&&t.constructor.name==="Object"||typeof t.toJSON=="function"}const xA=new Set(["image/svg","application/xml","application/xhtml","application/html"]),FA=/^application\/(?:[\w!#$%&*.^`~-]*\+)?json(;.+)?$/i;function UA(t=""){if(!t)return"json";const e=t.split(";").shift()||"";return FA.test(e)?"json":e==="text/event-stream"?"stream":xA.has(e)||e.startsWith("text/")?"text":"blob"}function BA(t,e,n,s){const r=$A(e?.headers??t?.headers,n?.headers,s);let i;return(n?.query||n?.params||e?.params||e?.query)&&(i={...n?.params,...n?.query,...e?.params,...e?.query}),{...n,...e,query:i,params:i,headers:r}}function $A(t,e,n){if(!e)return new n(t);const s=new n(e);if(t)for(const[r,i]of Symbol.iterator in t||Array.isArray(t)?t:new n(t))s.set(r,i);return s}async function $a(t,e){if(e)if(Array.isArray(e))for(const n of e)await n(t);else await e(t)}const HA=new Set([408,409,425,429,500,502,503,504]),jA=new Set([101,204,205,304]);function Uy(t={}){const{fetch:e=globalThis.fetch,Headers:n=globalThis.Headers,AbortController:s=globalThis.AbortController}=t;async function r(a){const l=a.error&&a.error.name==="AbortError"&&!a.options.timeout||!1;if(a.options.retry!==!1&&!l){let h;typeof a.options.retry=="number"?h=a.options.retry:h=Bp(a.options.method)?0:1;const f=a.response&&a.response.status||500;if(h>0&&(Array.isArray(a.options.retryStatusCodes)?a.options.retryStatusCodes.includes(f):HA.has(f))){const p=typeof a.options.retryDelay=="function"?a.options.retryDelay(a):a.options.retryDelay||0;return p>0&&await new Promise(g=>setTimeout(g,p)),i(a.request,{...a.options,retry:h-1})}}const u=VA(a);throw Error.captureStackTrace&&Error.captureStackTrace(u,i),u}const i=async function(l,u={}){const h={request:l,options:BA(l,u,t.defaults,n),response:void 0,error:void 0};if(h.options.method&&(h.options.method=h.options.method.toUpperCase()),h.options.onRequest&&(await $a(h,h.options.onRequest),h.options.headers instanceof n||(h.options.headers=new n(h.options.headers||{}))),typeof h.request=="string"&&(h.options.baseURL&&(h.request=PA(h.request,h.options.baseURL)),h.options.query&&(h.request=Vy(h.request,h.options.query),delete h.options.query),"query"in h.options&&delete h.options.query,"params"in h.options&&delete h.options.params),h.options.body&&Bp(h.options.method))if(MA(h.options.body)){const g=h.options.headers.get("content-type");typeof h.options.body!="string"&&(h.options.body=g==="application/x-www-form-urlencoded"?new URLSearchParams(h.options.body).toString():JSON.stringify(h.options.body)),g||h.options.headers.set("content-type","application/json"),h.options.headers.has("accept")||h.options.headers.set("accept","application/json")}else("pipeTo"in h.options.body&&typeof h.options.body.pipeTo=="function"||typeof h.options.body.pipe=="function")&&("duplex"in h.options||(h.options.duplex="half"));let f;if(!h.options.signal&&h.options.timeout){const g=new s;f=setTimeout(()=>{const A=new Error("[TimeoutError]: The operation was aborted due to timeout");A.name="TimeoutError",A.code=23,g.abort(A)},h.options.timeout),h.options.signal=g.signal}try{h.response=await e(h.request,h.options)}catch(g){return h.error=g,h.options.onRequestError&&await $a(h,h.options.onRequestError),await r(h)}finally{f&&clearTimeout(f)}if((h.response.body||h.response._bodyInit)&&!jA.has(h.response.status)&&h.options.method!=="HEAD"){const g=(h.options.parseResponse?"json":h.options.responseType)||UA(h.response.headers.get("content-type")||"");switch(g){case"json":{const A=await h.response.text(),v=h.options.parseResponse||Ac;h.response._data=v(A);break}case"stream":{h.response._data=h.response.body||h.response._bodyInit;break}default:h.response._data=await h.response[g]()}}return h.options.onResponse&&await $a(h,h.options.onResponse),!h.options.ignoreResponseError&&h.response.status>=400&&h.response.status<600?(h.options.onResponseError&&await $a(h,h.options.onResponseError),await r(h)):h.response},o=async function(l,u){return(await i(l,u))._data};return o.raw=i,o.native=(...a)=>e(...a),o.create=(a={},l={})=>Uy({...t,...l,defaults:{...t.defaults,...l.defaults,...a}}),o}const Cc=(function(){if(typeof globalThis<"u")return globalThis;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")})(),qA=Cc.fetch?(...t)=>Cc.fetch(...t):()=>Promise.reject(new Error("[ofetch] global.fetch is not supported!")),WA=Cc.Headers,GA=Cc.AbortController,zA=Uy({fetch:qA,Headers:WA,AbortController:GA}),KA=zA,QA=()=>window?.__NUXT__?.config||window?.useNuxtApp?.().payload?.config,cf=()=>QA().app,YA=()=>cf().baseURL,JA=()=>cf().buildAssetsDir,lf=(...t)=>My(By(),JA(),...t),By=(...t)=>{const e=cf(),n=e.cdnURL||e.baseURL;return t.length?My(n,...t):n};globalThis.__buildAssetsURL=lf,globalThis.__publicAssetsURL=By;globalThis.$fetch||(globalThis.$fetch=KA.create({baseURL:YA()}));"global"in globalThis||(globalThis.global=globalThis);function Xu(t,e={},n){for(const s in t){const r=t[s],i=n?`${n}:${s}`:s;typeof r=="object"&&r!==null?Xu(r,e,i):typeof r=="function"&&(e[i]=r)}return e}const XA={run:t=>t()},ZA=()=>XA,$y=typeof console.createTask<"u"?console.createTask:ZA;function eR(t,e){const n=e.shift(),s=$y(n);return t.reduce((r,i)=>r.then(()=>s.run(()=>i(...e))),Promise.resolve())}function tR(t,e){const n=e.shift(),s=$y(n);return Promise.all(t.map(r=>s.run(()=>r(...e))))}function hu(t,e){for(const n of[...t])n(e)}let nR=class{constructor(){this._hooks={},this._before=void 0,this._after=void 0,this._deprecatedMessages=void 0,this._deprecatedHooks={},this.hook=this.hook.bind(this),this.callHook=this.callHook.bind(this),this.callHookWith=this.callHookWith.bind(this)}hook(e,n,s={}){if(!e||typeof n!="function")return()=>{};const r=e;let i;for(;this._deprecatedHooks[e];)i=this._deprecatedHooks[e],e=i.to;if(i&&!s.allowDeprecated){let o=i.message;o||(o=`${r} hook has been deprecated`+(i.to?`, please use ${i.to}`:"")),this._deprecatedMessages||(this._deprecatedMessages=new Set),this._deprecatedMessages.has(o)||(console.warn(o),this._deprecatedMessages.add(o))}if(!n.name)try{Object.defineProperty(n,"name",{get:()=>"_"+e.replace(/\W+/g,"_")+"_hook_cb",configurable:!0})}catch{}return this._hooks[e]=this._hooks[e]||[],this._hooks[e].push(n),()=>{n&&(this.removeHook(e,n),n=void 0)}}hookOnce(e,n){let s,r=(...i)=>(typeof s=="function"&&s(),s=void 0,r=void 0,n(...i));return s=this.hook(e,r),s}removeHook(e,n){if(this._hooks[e]){const s=this._hooks[e].indexOf(n);s!==-1&&this._hooks[e].splice(s,1),this._hooks[e].length===0&&delete this._hooks[e]}}deprecateHook(e,n){this._deprecatedHooks[e]=typeof n=="string"?{to:n}:n;const s=this._hooks[e]||[];delete this._hooks[e];for(const r of s)this.hook(e,r)}deprecateHooks(e){Object.assign(this._deprecatedHooks,e);for(const n in e)this.deprecateHook(n,e[n])}addHooks(e){const n=Xu(e),s=Object.keys(n).map(r=>this.hook(r,n[r]));return()=>{for(const r of s.splice(0,s.length))r()}}removeHooks(e){const n=Xu(e);for(const s in n)this.removeHook(s,n[s])}removeAllHooks(){for(const e in this._hooks)delete this._hooks[e]}callHook(e,...n){return n.unshift(e),this.callHookWith(eR,e,...n)}callHookParallel(e,...n){return n.unshift(e),this.callHookWith(tR,e,...n)}callHookWith(e,n,...s){const r=this._before||this._after?{name:n,args:s,context:{}}:void 0;this._before&&hu(this._before,r);const i=e(n in this._hooks?[...this._hooks[n]]:[],s);return i instanceof Promise?i.finally(()=>{this._after&&r&&hu(this._after,r)}):(this._after&&r&&hu(this._after,r),i)}beforeEach(e){return this._before=this._before||[],this._before.push(e),()=>{if(this._before!==void 0){const n=this._before.indexOf(e);n!==-1&&this._before.splice(n,1)}}}afterEach(e){return this._after=this._after||[],this._after.push(e),()=>{if(this._after!==void 0){const n=this._after.indexOf(e);n!==-1&&this._after.splice(n,1)}}}};function sR(){return new nR}function rR(t={}){let e,n=!1;const s=o=>{if(e&&e!==o)throw new Error("Context conflict")};let r;if(t.asyncContext){const o=t.AsyncLocalStorage||globalThis.AsyncLocalStorage;o?r=new o:console.warn("[unctx] `AsyncLocalStorage` is not provided.")}const i=()=>{if(r){const o=r.getStore();if(o!==void 0)return o}return e};return{use:()=>{const o=i();if(o===void 0)throw new Error("Context is not available");return o},tryUse:()=>i(),set:(o,a)=>{a||s(o),e=o,n=!0},unset:()=>{e=void 0,n=!1},call:(o,a)=>{s(o),e=o;try{return r?r.run(o,a):a()}finally{n||(e=void 0)}},async callAsync(o,a){e=o;const l=()=>{e=o},u=()=>e===o?l:void 0;Zu.add(u);try{const h=r?r.run(o,a):a();return n||(e=void 0),await h}finally{Zu.delete(u)}}}}function iR(t={}){const e={};return{get(n,s={}){return e[n]||(e[n]=rR({...t,...s})),e[n]}}}const Pc=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof global<"u"?global:typeof window<"u"?window:{},$p="__unctx__",oR=Pc[$p]||(Pc[$p]=iR()),aR=(t,e={})=>oR.get(t,e),Hp="__unctx_async_handlers__",Zu=Pc[Hp]||(Pc[Hp]=new Set);function fi(t){const e=[];for(const r of Zu){const i=r();i&&e.push(i)}const n=()=>{for(const r of e)r()};let s=t();return s&&typeof s=="object"&&"catch"in s&&(s=s.catch(r=>{throw n(),r})),[s,n]}const jp={name:"page-fade",mode:"out-in"},cR=!1,lR=!1,qp={id:"__nuxt-loader"},DM={componentName:"NuxtLink",prefetch:!0,prefetchOn:{visibility:!0}},uR="#__nuxt",Hy="nuxt-app",Wp=36e5,hR="vite:preloadError";function jy(t=Hy){return aR(t,{asyncContext:!1})}const fR="__nuxt_plugin";function dR(t){let e=0;const n={_id:t.id||Hy||"nuxt-app",_scope:Vw(),provide:void 0,versions:{get nuxt(){return"4.2.2"},get vue(){return n.vueApp.version}},payload:Vn({...t.ssrContext?.payload||{},data:Vn({}),state:nr({}),once:new Set,_errors:Vn({})}),static:{data:{}},runWithContext(r){return n._scope.active&&!jh()?n._scope.run(()=>Gp(n,r)):Gp(n,r)},isHydrating:!0,deferHydration(){if(!n.isHydrating)return()=>{};e++;let r=!1;return()=>{if(!r&&(r=!0,e--,e===0))return n.isHydrating=!1,n.callHook("app:suspense:resolve")}},_asyncDataPromises:{},_asyncData:Vn({}),_payloadRevivers:{},...t};{const r=window.__NUXT__;if(r)for(const i in r)switch(i){case"data":case"state":case"_errors":Object.assign(n.payload[i],r[i]);break;default:n.payload[i]=r[i]}}n.hooks=sR(),n.hook=n.hooks.hook,n.callHook=n.hooks.callHook,n.provide=(r,i)=>{const o="$"+r;Ha(n,o,i),Ha(n.vueApp.config.globalProperties,o,i)},Ha(n.vueApp,"$nuxt",n),Ha(n.vueApp.config.globalProperties,"$nuxt",n);{window.addEventListener(hR,i=>{n.callHook("app:chunkError",{error:i.payload}),i.payload.message.includes("Unable to preload CSS")&&i.preventDefault()}),window.useNuxtApp||=at;const r=n.hook("app:error",(...i)=>{console.error("[nuxt] error caught during app initialization",...i)});n.hook("app:mounted",r)}const s=n.payload.config;return n.provide("config",s),n}function pR(t,e){e.hooks&&t.hooks.addHooks(e.hooks)}async function mR(t,e){if(typeof e=="function"){const{provide:n}=await t.runWithContext(()=>e(t))||{};if(n&&typeof n=="object")for(const s in n)t.provide(s,n[s])}}async function gR(t,e){const n=new Set,s=[],r=[];let i,o=0;async function a(l){const u=l.dependsOn?.filter(h=>e.some(f=>f._name===h)&&!n.has(h))??[];if(u.length>0)s.push([new Set(u),l]);else{const h=mR(t,l).then(async()=>{l._name&&(n.add(l._name),await Promise.all(s.map(async([f,p])=>{f.has(l._name)&&(f.delete(l._name),f.size===0&&(o++,await a(p)))})))}).catch(f=>{if(!l.parallel&&!t.payload.error)throw f;i||=f});l.parallel?r.push(h):await h}}for(const l of e)pR(t,l);for(const l of e)await a(l);if(await Promise.all(r),o)for(let l=0;l<o;l++)await Promise.all(r);if(i)throw t.payload.error||i}function jn(t){if(typeof t=="function")return t;const e=t._name||t.name;return delete t.name,Object.assign(t.setup||(()=>{}),t,{[fR]:!0,_name:e})}function Gp(t,e,n){const s=()=>e();return jy(t._id).set(t),t.vueApp.runWithContext(s)}function _R(t){let e;return sl()&&(e=Fr()?.appContext.app.$nuxt),e||=jy(t).tryUse(),e||null}function at(t){const e=_R(t);if(!e)throw new Error("[nuxt] instance unavailable");return e}function ll(t){return at().$config}function Ha(t,e,n){Object.defineProperty(t,e,{get:()=>n})}function yR(t,e){return{ctx:{table:t},matchAll:n=>Wy(n,t)}}function qy(t){const e={};for(const n in t)e[n]=n==="dynamic"?new Map(Object.entries(t[n]).map(([s,r])=>[s,qy(r)])):new Map(Object.entries(t[n]));return e}function vR(t){return yR(qy(t))}function Wy(t,e,n){t.endsWith("/")&&(t=t.slice(0,-1)||"/");const s=[];for(const[i,o]of zp(e.wildcard))(t===i||t.startsWith(i+"/"))&&s.push(o);for(const[i,o]of zp(e.dynamic))if(t.startsWith(i+"/")){const a="/"+t.slice(i.length).split("/").splice(2).join("/");s.push(...Wy(a,o))}const r=e.static.get(t);return r&&s.push(r),s.filter(Boolean)}function zp(t){return[...t.entries()].sort((e,n)=>e[0].length-n[0].length)}function fu(t){if(t===null||typeof t!="object")return!1;const e=Object.getPrototypeOf(t);return e!==null&&e!==Object.prototype&&Object.getPrototypeOf(e)!==null||Symbol.iterator in t?!1:Symbol.toStringTag in t?Object.prototype.toString.call(t)==="[object Module]":!0}function eh(t,e,n=".",s){if(!fu(e))return eh(t,{},n,s);const r=Object.assign({},e);for(const i in t){if(i==="__proto__"||i==="constructor")continue;const o=t[i];o!=null&&(s&&s(r,i,o,n)||(Array.isArray(o)&&Array.isArray(r[i])?r[i]=[...o,...r[i]]:fu(o)&&fu(r[i])?r[i]=eh(o,r[i],(n?`${n}.`:"")+i.toString(),s):r[i]=o))}return r}function ER(t){return(...e)=>e.reduce((n,s)=>eh(n,s,"",t),{})}const Gy=ER();function TR(t,e){try{return e in t}catch{return!1}}class Kp extends Error{static __h3_error__=!0;statusCode=500;fatal=!1;unhandled=!1;statusMessage;data;cause;constructor(e,n={}){super(e,n),n.cause&&!this.cause&&(this.cause=n.cause)}toJSON(){const e={message:this.message,statusCode:th(this.statusCode,500)};return this.statusMessage&&(e.statusMessage=zy(this.statusMessage)),this.data!==void 0&&(e.data=this.data),e}}function wR(t){if(typeof t=="string")return new Kp(t);if(bR(t))return t;const e=new Kp(t.message??t.statusMessage??"",{cause:t.cause||t});if(TR(t,"stack"))try{Object.defineProperty(e,"stack",{get(){return t.stack}})}catch{try{e.stack=t.stack}catch{}}if(t.data&&(e.data=t.data),t.statusCode?e.statusCode=th(t.statusCode,e.statusCode):t.status&&(e.statusCode=th(t.status,e.statusCode)),t.statusMessage?e.statusMessage=t.statusMessage:t.statusText&&(e.statusMessage=t.statusText),e.statusMessage){const n=e.statusMessage;zy(e.statusMessage)!==n&&console.warn("[h3] Please prefer using `message` for longer error messages instead of `statusMessage`. In the future, `statusMessage` will be sanitized by default.")}return t.fatal!==void 0&&(e.fatal=t.fatal),t.unhandled!==void 0&&(e.unhandled=t.unhandled),e}function bR(t){return t?.constructor?.__h3_error__===!0}const IR=/[^\u0009\u0020-\u007E]/g;function zy(t=""){return t.replace(IR,"")}function th(t,e=200){return!t||(typeof t=="string"&&(t=Number.parseInt(t,10)),t<100||t>999)?e:t}const Ky=Symbol("layout-meta"),Pr=Symbol("route");import.meta.url.replace(/\/app\/.*$/,"/");const Gt=()=>at()?.$router,Mi=()=>sl()?Ot(Pr,at()._route):at()._route;function OM(t){return t}const AR=()=>{try{if(at()._processingMiddleware)return!0}catch{return!1}return!1},VM=(t,e)=>{t||="/";const n=typeof t=="string"?t:"path"in t?RR(t):Gt().resolve(t).href;if(e?.open){const{target:l="_blank",windowFeatures:u={}}=e.open,h=[];for(const[f,p]of Object.entries(u))p!==void 0&&h.push(`${f.toLowerCase()}=${p}`);return open(n,l,h.join(", ")),Promise.resolve()}const s=Ur(n,{acceptRelative:!0}),r=e?.external||s;if(r){if(!e?.external)throw new Error("Navigating to an external URL is not allowed by default. Use `navigateTo(url, { external: true })`.");const{protocol:l}=new URL(n,window.location.href);if(l&&SA(l))throw new Error(`Cannot navigate to a URL with '${l}' protocol.`)}const i=AR();if(!r&&i){if(e?.replace){if(typeof t=="string"){const{pathname:l,search:u,hash:h}=Fy(t);return{path:l,...u&&{query:Oy(u)},...h&&{hash:h},replace:!0}}return{...t,replace:!0}}return t}const o=Gt(),a=at();return r?(a._scope.stop(),e?.replace?location.replace(n):location.href=n,i?a.isHydrating?new Promise(()=>{}):!1:Promise.resolve()):e?.replace?o.replace(t):o.push(t)};function RR(t){return Vy(t.path||"",t.query||{})+(t.hash||"")}const Qy="__nuxt_error",ul=()=>ab(at().payload,"error"),_r=t=>{const e=Ar(t);try{const n=ul();at().hooks.callHook("app:error",e),n.value||=e}catch{throw e}return e},SR=async(t={})=>{const e=at(),n=ul();e.callHook("app:error:cleared",t),t.redirect&&await Gt().replace(t.redirect),n.value=void 0},Yy=t=>!!t&&typeof t=="object"&&Qy in t,Ar=t=>{const e=wR(t);return Object.defineProperty(e,Qy,{value:!0,configurable:!1,writable:!1}),e};function CR(t){const e=kR(t),n=new ArrayBuffer(e.length),s=new DataView(n);for(let r=0;r<n.byteLength;r++)s.setUint8(r,e.charCodeAt(r));return n}const PR="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";function kR(t){t.length%4===0&&(t=t.replace(/==?$/,""));let e="",n=0,s=0;for(let r=0;r<t.length;r++)n<<=6,n|=PR.indexOf(t[r]),s+=6,s===24&&(e+=String.fromCharCode((n&16711680)>>16),e+=String.fromCharCode((n&65280)>>8),e+=String.fromCharCode(n&255),n=s=0);return s===12?(n>>=4,e+=String.fromCharCode(n)):s===18&&(n>>=2,e+=String.fromCharCode((n&65280)>>8),e+=String.fromCharCode(n&255)),e}const NR=-1,DR=-2,OR=-3,VR=-4,LR=-5,MR=-6;function xR(t,e){return FR(JSON.parse(t),e)}function FR(t,e){if(typeof t=="number")return r(t,!0);if(!Array.isArray(t)||t.length===0)throw new Error("Invalid input");const n=t,s=Array(n.length);function r(i,o=!1){if(i===NR)return;if(i===OR)return NaN;if(i===VR)return 1/0;if(i===LR)return-1/0;if(i===MR)return-0;if(o||typeof i!="number")throw new Error("Invalid input");if(i in s)return s[i];const a=n[i];if(!a||typeof a!="object")s[i]=a;else if(Array.isArray(a))if(typeof a[0]=="string"){const l=a[0],u=e&&Object.hasOwn(e,l)?e[l]:void 0;if(u){let h=a[1];return typeof h!="number"&&(h=n.push(a[1])-1),s[i]=u(r(h))}switch(l){case"Date":s[i]=new Date(a[1]);break;case"Set":const h=new Set;s[i]=h;for(let g=1;g<a.length;g+=1)h.add(r(a[g]));break;case"Map":const f=new Map;s[i]=f;for(let g=1;g<a.length;g+=2)f.set(r(a[g]),r(a[g+1]));break;case"RegExp":s[i]=new RegExp(a[1],a[2]);break;case"Object":s[i]=Object(a[1]);break;case"BigInt":s[i]=BigInt(a[1]);break;case"null":const p=Object.create(null);s[i]=p;for(let g=1;g<a.length;g+=2)p[a[g]]=r(a[g+1]);break;case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"BigInt64Array":case"BigUint64Array":{const g=globalThis[l],A=new g(r(a[1]));s[i]=a[2]!==void 0?A.subarray(a[2],a[3]):A;break}case"ArrayBuffer":{const g=a[1],A=CR(g);s[i]=A;break}case"Temporal.Duration":case"Temporal.Instant":case"Temporal.PlainDate":case"Temporal.PlainTime":case"Temporal.PlainDateTime":case"Temporal.PlainMonthDay":case"Temporal.PlainYearMonth":case"Temporal.ZonedDateTime":{const g=l.slice(9);s[i]=Temporal[g].from(a[1]);break}case"URL":{const g=new URL(a[1]);s[i]=g;break}case"URLSearchParams":{const g=new URLSearchParams(a[1]);s[i]=g;break}default:throw new Error(`Unknown type ${l}`)}}else{const l=new Array(a.length);s[i]=l;for(let u=0;u<a.length;u+=1){const h=a[u];h!==DR&&(l[u]=r(h))}}else{const l={};s[i]=l;for(const u in a){if(u==="__proto__")throw new Error("Cannot parse an object with a `__proto__` property");const h=a[u];l[u]=r(h)}}return s[i]}return r(0)}const UR=new Set(["link","style","script","noscript"]),BR=new Set(["title","titleTemplate","script","style","noscript"]),Qp=new Set(["base","meta","link","style","script","noscript"]),$R=new Set(["title","base","htmlAttrs","bodyAttrs","meta","link","style","script","noscript"]),HR=new Set(["base","title","titleTemplate","bodyAttrs","htmlAttrs","templateParams"]),jR=new Set(["key","tagPosition","tagPriority","tagDuplicateStrategy","innerHTML","textContent","processTemplateParams"]),qR=new Set(["templateParams","htmlAttrs","bodyAttrs"]),WR=new Set(["theme-color","google-site-verification","og","article","book","profile","twitter","author"]);function nh(t,e={},n){for(const s in t){const r=t[s],i=n?`${n}:${s}`:s;typeof r=="object"&&r!==null?nh(r,e,i):typeof r=="function"&&(e[i]=r)}return e}const Jy=(()=>{if(console.createTask)return console.createTask;const t={run:e=>e()};return()=>t})();function Xy(t,e,n,s){for(let r=n;r<t.length;r+=1)try{const i=s?s.run(()=>t[r](...e)):t[r](...e);if(i instanceof Promise)return i.then(()=>Xy(t,e,r+1,s))}catch(i){return Promise.reject(i)}}function GR(t,e,n){if(t.length>0)return Xy(t,e,0,Jy(n))}function zR(t,e,n){if(t.length>0){const s=Jy(n);return Promise.all(t.map(r=>s.run(()=>r(...e))))}}function du(t,e){for(const n of[...t])n(e)}var KR=class{_hooks;_before;_after;_deprecatedHooks;_deprecatedMessages;constructor(){this._hooks={},this._before=void 0,this._after=void 0,this._deprecatedMessages=void 0,this._deprecatedHooks={},this.hook=this.hook.bind(this),this.callHook=this.callHook.bind(this),this.callHookWith=this.callHookWith.bind(this)}hook(t,e,n={}){if(!t||typeof e!="function")return()=>{};const s=t;let r;for(;this._deprecatedHooks[t];)r=this._deprecatedHooks[t],t=r.to;if(r&&!n.allowDeprecated){let i=r.message;i||(i=`${s} hook has been deprecated`+(r.to?`, please use ${r.to}`:"")),this._deprecatedMessages||(this._deprecatedMessages=new Set),this._deprecatedMessages.has(i)||(console.warn(i),this._deprecatedMessages.add(i))}if(!e.name)try{Object.defineProperty(e,"name",{get:()=>"_"+t.replace(/\W+/g,"_")+"_hook_cb",configurable:!0})}catch{}return this._hooks[t]=this._hooks[t]||[],this._hooks[t].push(e),()=>{e&&(this.removeHook(t,e),e=void 0)}}hookOnce(t,e){let n,s=(...r)=>(typeof n=="function"&&n(),n=void 0,s=void 0,e(...r));return n=this.hook(t,s),n}removeHook(t,e){const n=this._hooks[t];if(n){const s=n.indexOf(e);s!==-1&&n.splice(s,1),n.length===0&&(this._hooks[t]=void 0)}}deprecateHook(t,e){this._deprecatedHooks[t]=typeof e=="string"?{to:e}:e;const n=this._hooks[t]||[];this._hooks[t]=void 0;for(const s of n)this.hook(t,s)}deprecateHooks(t){for(const e in t)this.deprecateHook(e,t[e])}addHooks(t){const e=nh(t),n=Object.keys(e).map(s=>this.hook(s,e[s]));return()=>{for(const s of n)s();n.length=0}}removeHooks(t){const e=nh(t);for(const n in e)this.removeHook(n,e[n])}removeAllHooks(){this._hooks={}}callHook(t,...e){return this.callHookWith(GR,t,e)}callHookParallel(t,...e){return this.callHookWith(zR,t,e)}callHookWith(t,e,n){const s=this._before||this._after?{name:e,args:n,context:{}}:void 0;this._before&&du(this._before,s);const r=t(this._hooks[e]?[...this._hooks[e]]:[],n,e);return r instanceof Promise?r.finally(()=>{this._after&&s&&du(this._after,s)}):(this._after&&s&&du(this._after,s),r)}beforeEach(t){return this._before=this._before||[],this._before.push(t),()=>{if(this._before!==void 0){const e=this._before.indexOf(t);e!==-1&&this._before.splice(e,1)}}}afterEach(t){return this._after=this._after||[],this._after.push(t),()=>{if(this._after!==void 0){const e=this._after.indexOf(t);e!==-1&&this._after.splice(e,1)}}}};function QR(){return new KR}const YR=["name","property","http-equiv"],JR=new Set(["viewport","description","keywords","robots"]);function Zy(t){const e=t.split(":");return e.length?WR.has(e[1]):!1}function sh(t){const{props:e,tag:n}=t;if(HR.has(n))return n;if(n==="link"&&e.rel==="canonical")return"canonical";if(e.charset)return"charset";if(t.tag==="meta"){for(const s of YR)if(e[s]!==void 0){const r=e[s],i=r&&typeof r=="string"&&r.includes(":"),o=r&&JR.has(r),l=!(i||o)&&t.key?`:key:${t.key}`:"";return`${n}:${r}${l}`}}if(t.key)return`${n}:key:${t.key}`;if(e.id)return`${n}:id:${e.id}`;if(BR.has(n)){const s=t.textContent||t.innerHTML;if(s)return`${n}:content:${s}`}}function Yp(t){const e=t._h||t._d;if(e)return e;const n=t.textContent||t.innerHTML;return n||`${t.tag}:${Object.entries(t.props).map(([s,r])=>`${s}:${String(r)}`).join(",")}`}function kc(t,e,n){typeof t==="function"&&(!n||n!=="titleTemplate"&&!(n[0]==="o"&&n[1]==="n"))&&(t=t());const r=e?e(n,t):t;if(Array.isArray(r))return r.map(i=>kc(i,e));if(r?.constructor===Object){const i={};for(const o of Object.keys(r))i[o]=kc(r[o],e,o);return i}return r}function XR(t,e){const n=t==="style"?new Map:new Set;function s(r){if(r==null||r===void 0)return;const i=String(r).trim();if(i)if(t==="style"){const[o,...a]=i.split(":").map(l=>l?l.trim():"");o&&a.length&&n.set(o,a.join(":"))}else i.split(" ").filter(Boolean).forEach(o=>n.add(o))}return typeof e=="string"?t==="style"?e.split(";").forEach(s):s(e):Array.isArray(e)?e.forEach(r=>s(r)):e&&typeof e=="object"&&Object.entries(e).forEach(([r,i])=>{i&&i!=="false"&&(t==="style"?n.set(String(r).trim(),String(i)):s(r))}),n}function ev(t,e){return t.props=t.props||{},e?t.tag==="templateParams"?(t.props=e,t):(Object.entries(e).forEach(([n,s])=>{if(s===null){t.props[n]=null;return}if(n==="class"||n==="style"){t.props[n]=XR(n,s);return}if(jR.has(n)){if(["textContent","innerHTML"].includes(n)&&typeof s=="object"){let a=e.type;if(e.type||(a="application/json"),!a?.endsWith("json")&&a!=="speculationrules")return;e.type=a,t.props.type=a,t[n]=JSON.stringify(s)}else t[n]=s;return}const r=String(s),i=n.startsWith("data-"),o=t.tag==="meta"&&n==="content";r==="true"||r===""?t.props[n]=i||o?r:!0:!s&&i&&r==="false"?t.props[n]="false":s!==void 0&&(t.props[n]=s)}),t):t}function ZR(t,e){const n=typeof e=="object"&&typeof e!="function"?e:{[t==="script"||t==="noscript"||t==="style"?"innerHTML":"textContent"]:e},s=ev({tag:t,props:{}},n);return s.key&&UR.has(s.tag)&&(s.props["data-hid"]=s._h=s.key),s.tag==="script"&&typeof s.innerHTML=="object"&&(s.innerHTML=JSON.stringify(s.innerHTML),s.props.type=s.props.type||"application/json"),Array.isArray(s.props.content)?s.props.content.map(r=>({...s,props:{...s.props,content:r}})):s}function e0(t,e){if(!t)return[];typeof t=="function"&&(t=t());const n=(r,i)=>{for(let o=0;o<e.length;o++)i=e[o](r,i);return i};t=n(void 0,t);const s=[];return t=kc(t,n),Object.entries(t||{}).forEach(([r,i])=>{if(i!==void 0)for(const o of Array.isArray(i)?i:[i])s.push(ZR(r,o))}),s.flat()}const Jp=(t,e)=>t._w===e._w?t._p-e._p:t._w-e._w,Xp={base:-10,title:10},t0={critical:-8,high:-1,low:2},Zp={meta:{"content-security-policy":-30,charset:-20,viewport:-15},link:{preconnect:20,stylesheet:60,preload:70,modulepreload:70,prefetch:90,"dns-prefetch":90,prerender:90},script:{async:30,defer:80,sync:50},style:{imported:40,sync:60}},n0=/@import/,lo=t=>t===""||t===!0;function s0(t,e){if(typeof e.tagPriority=="number")return e.tagPriority;let n=100;const s=t0[e.tagPriority]||0,r=t.resolvedOptions.disableCapoSorting?{link:{},script:{},style:{}}:Zp;if(e.tag in Xp)n=Xp[e.tag];else if(e.tag==="meta"){const i=e.props["http-equiv"]==="content-security-policy"?"content-security-policy":e.props.charset?"charset":e.props.name==="viewport"?"viewport":null;i&&(n=Zp.meta[i])}else if(e.tag==="link"&&e.props.rel)n=r.link[e.props.rel];else if(e.tag==="script"){const i=String(e.props.type);lo(e.props.async)?n=r.script.async:e.props.src&&!lo(e.props.defer)&&!lo(e.props.async)&&i!=="module"&&!i.endsWith("json")||e.innerHTML&&!i.endsWith("json")?n=r.script.sync:(lo(e.props.defer)&&e.props.src&&!lo(e.props.async)||i==="module")&&(n=r.script.defer)}else e.tag==="style"&&(n=e.innerHTML&&n0.test(e.innerHTML)?r.style.imported:r.style.sync);return(n||100)+s}function em(t,e){const n=typeof e=="function"?e(t):e,s=n.key||String(t.plugins.size+1);t.plugins.get(s)||(t.plugins.set(s,n),t.hooks.addHooks(n.hooks||{}))}function r0(t={}){const e=QR();e.addHooks(t.hooks||{});const n=!t.document,s=new Map,r=new Map,i=new Set,o={_entryCount:1,plugins:r,dirty:!1,resolvedOptions:t,hooks:e,ssr:n,entries:s,headEntries(){return[...s.values()]},use:a=>em(o,a),push(a,l){const u={...l||{}};delete u.head;const h=u._index??o._entryCount++,f={_i:h,input:a,options:u},p={_poll(g=!1){o.dirty=!0,!g&&i.add(h),e.callHook("entries:updated",o)},dispose(){s.delete(h)&&o.invalidate()},patch(g){(!u.mode||u.mode==="server"&&n||u.mode==="client"&&!n)&&(f.input=g,s.set(h,f),p._poll())}};return p.patch(a),p},async resolveTags(){const a={tagMap:new Map,tags:[],entries:[...o.entries.values()]};for(await e.callHook("entries:resolve",a);i.size;){const p=i.values().next().value;i.delete(p);const g=s.get(p);if(g){const A={tags:e0(g.input,t.propResolvers||[]).map(v=>Object.assign(v,g.options)),entry:g};await e.callHook("entries:normalize",A),g._tags=A.tags.map((v,D)=>(v._w=s0(o,v),v._p=(g._i<<10)+D,v._d=sh(v),v))}}let l=!1;a.entries.flatMap(p=>(p._tags||[]).map(g=>({...g,props:{...g.props}}))).sort(Jp).reduce((p,g)=>{const A=String(g._d||g._p);if(!p.has(A))return p.set(A,g);const v=p.get(A);if((g?.tagDuplicateStrategy||(qR.has(g.tag)?"merge":null)||(g.key&&g.key===v.key?"merge":null))==="merge"){const V={...v.props};Object.entries(g.props).forEach(([N,_])=>V[N]=N==="style"?new Map([...v.props.style||new Map,..._]):N==="class"?new Set([...v.props.class||new Set,..._]):_),p.set(A,{...g,props:V})}else g._p>>10===v._p>>10&&g.tag==="meta"&&Zy(A)?(p.set(A,Object.assign([...Array.isArray(v)?v:[v],g],g)),l=!0):(g._w===v._w?g._p>v._p:g?._w<v?._w)&&p.set(A,g);return p},a.tagMap);const u=a.tagMap.get("title"),h=a.tagMap.get("titleTemplate");if(o._title=u?.textContent,h){const p=h?.textContent;if(o._titleTemplate=p,p){let g=typeof p=="function"?p(u?.textContent):p;typeof g=="string"&&!o.plugins.has("template-params")&&(g=g.replace("%s",u?.textContent||"")),u?g===null?a.tagMap.delete("title"):a.tagMap.set("title",{...u,textContent:g}):(h.tag="title",h.textContent=g)}}a.tags=Array.from(a.tagMap.values()),l&&(a.tags=a.tags.flat().sort(Jp)),await e.callHook("tags:beforeResolve",a),await e.callHook("tags:resolve",a),await e.callHook("tags:afterResolve",a);const f=[];for(const p of a.tags){const{innerHTML:g,tag:A,props:v}=p;if($R.has(A)&&!(Object.keys(v).length===0&&!p.innerHTML&&!p.textContent)&&!(A==="meta"&&!v.content&&!v["http-equiv"]&&!v.charset)){if(A==="script"&&g){if(String(v.type).endsWith("json")){const D=typeof g=="string"?g:JSON.stringify(g);p.innerHTML=D.replace(/</g,"\\u003C")}else typeof g=="string"&&(p.innerHTML=g.replace(new RegExp(`</${A}`,"g"),`<\\/${A}`));p._d=sh(p)}f.push(p)}}return f},invalidate(){for(const a of s.values())i.add(a._i);o.dirty=!0,e.callHook("entries:updated",o)}};return(t?.plugins||[]).forEach(a=>em(o,a)),o.hooks.callHook("init",o),t.init?.forEach(a=>a&&o.push(a)),o}const i0=(t,e)=>_t(e)?sb(e):e,uf="usehead";function o0(t){return{install(n){n.config.globalProperties.$unhead=t,n.config.globalProperties.$head=t,n.provide(uf,t)}}.install}function a0(){if(sl()){const t=Ot(uf);if(!t)throw new Error("useHead() was called without provide context, ensure you call it through the setup() function.");return t}throw new Error("useHead() was called without provide context, ensure you call it through the setup() function.")}function c0(t,e={}){const n=e.head||a0();return n.ssr?n.push(t||{},e):l0(n,t,e)}function l0(t,e,n={}){const s=de(!1);let r;return _b(()=>{const o=s.value?{}:kc(e,i0);r?r.patch(o):r=t.push(o,n)}),Fr()&&(ra(()=>{r.dispose()}),z_(()=>{s.value=!0}),G_(()=>{s.value=!1})),r}function tv(t){const e=t||at();return e.ssrContext?.head||e.runWithContext(()=>{if(sl()){const n=Ot(uf);if(!n)throw new Error("[nuxt] [unhead] Missing Unhead instance.");return n}})}function LM(t,e={}){const n=e.head||tv(e.nuxt);return c0(t,{head:n,...e})}let ec,tc;function u0(){return ec=$fetch(lf(`builds/meta/${ll().app.buildId}.json`),{responseType:"json"}),ec.then(t=>{tc=vR(t.matcher)}).catch(t=>{console.error("[nuxt] Error fetching app manifest.",t)}),ec}function hl(){return ec||u0()}async function hf(t){const e=typeof t=="string"?t:t.path;if(await hl(),!tc)return console.error("[nuxt] Error creating app manifest matcher.",tc),{};try{return Gy({},...tc.matchAll(e).reverse())}catch(n){return console.error("[nuxt] Error matching route rules.",n),{}}}async function tm(t,e={}){if(!await sv(t))return null;const s=await f0(t,e);return await nv(s)||null}const h0="_payload.json";async function f0(t,e={}){const n=new URL(t,"http://localhost");if(n.host!=="localhost"||Ur(n.pathname,{acceptRelative:!0}))throw new Error("Payload URL must not include hostname: "+t);const s=ll(),r=e.hash||(e.fresh?Date.now():s.app.buildId),i=s.app.cdnURL,o=i&&await sv(t)?i:s.app.baseURL;return af(o,n.pathname,h0+(r?`?${r}`:""))}async function nv(t){const e=fetch(t,{cache:"force-cache"}).then(n=>n.text().then(rv));try{return await e}catch(n){console.warn("[nuxt] Cannot load payload ",t,n)}return null}async function sv(t=Mi().path){const e=at();return t=t==="/"?t:t.replace(/\/$/,""),(await hl()).prerendered.includes(t)?!0:e.runWithContext(async()=>{const s=await hf({path:t});return!!s.prerender&&!s.redirect})}let pr=null;async function d0(){if(pr)return pr;const t=document.getElementById("__NUXT_DATA__");if(!t)return{};const e=await rv(t.textContent||""),n=t.dataset.src?await nv(t.dataset.src):void 0;return pr={...e,...n,...window.__NUXT__},pr.config?.public&&(pr.config.public=nr(pr.config.public)),pr}async function rv(t){return await xR(t,at()._payloadRevivers)}function p0(t,e){at()._payloadRevivers[t]=e}const m0=[["NuxtError",t=>Ar(t)],["EmptyShallowRef",t=>ls(t==="_"?void 0:t==="0n"?BigInt(0):Ac(t))],["EmptyRef",t=>de(t==="_"?void 0:t==="0n"?BigInt(0):Ac(t))],["ShallowRef",t=>ls(t)],["ShallowReactive",t=>Vn(t)],["Ref",t=>de(t)],["Reactive",t=>nr(t)]],g0=jn({name:"nuxt:revive-payload:client",order:-30,async setup(t){let e,n;for(const[s,r]of m0)p0(s,r);Object.assign(t.payload,([e,n]=fi(()=>t.runWithContext(d0)),e=await e,n(),e)),delete window.__NUXT__}});async function ff(t,e={}){const n=e.document||t.resolvedOptions.document;if(!n||!t.dirty)return;const s={shouldRender:!0,tags:[]};if(await t.hooks.callHook("dom:beforeRender",s),!!s.shouldRender)return t._domUpdatePromise||(t._domUpdatePromise=new Promise(async r=>{const i=new Map,o=new Promise(g=>{t.resolveTags().then(A=>{g(A.map(v=>{const D=i.get(v._d)||0,V={tag:v,id:(D?`${v._d}:${D}`:v._d)||Yp(v),shouldRender:!0};return v._d&&Zy(v._d)&&i.set(v._d,D+1),V}))})});let a=t._dom;if(!a){a={title:n.title,elMap:new Map().set("htmlAttrs",n.documentElement).set("bodyAttrs",n.body)};for(const g of["body","head"]){const A=n[g]?.children;for(const v of A){const D=v.tagName.toLowerCase();if(!Qp.has(D))continue;const V=ev({tag:D,props:{}},{innerHTML:v.innerHTML,...v.getAttributeNames().reduce((N,_)=>(N[_]=v.getAttribute(_),N),{})||{}});if(V.key=v.getAttribute("data-hid")||void 0,V._d=sh(V)||Yp(V),a.elMap.has(V._d)){let N=1,_=V._d;for(;a.elMap.has(_);)_=`${V._d}:${N++}`;a.elMap.set(_,v)}else a.elMap.set(V._d,v)}}}a.pendingSideEffects={...a.sideEffects},a.sideEffects={};function l(g,A,v){const D=`${g}:${A}`;a.sideEffects[D]=v,delete a.pendingSideEffects[D]}function u({id:g,$el:A,tag:v}){const D=v.tag.endsWith("Attrs");a.elMap.set(g,A),D||(v.textContent&&v.textContent!==A.textContent&&(A.textContent=v.textContent),v.innerHTML&&v.innerHTML!==A.innerHTML&&(A.innerHTML=v.innerHTML),l(g,"el",()=>{A?.remove(),a.elMap.delete(g)}));for(const V in v.props){if(!Object.prototype.hasOwnProperty.call(v.props,V))continue;const N=v.props[V];if(V.startsWith("on")&&typeof N=="function"){const R=A?.dataset;if(R&&R[`${V}fired`]){const O=V.slice(0,-5);N.call(A,new Event(O.substring(2)))}A.getAttribute(`data-${V}`)!==""&&((v.tag==="bodyAttrs"?n.defaultView:A).addEventListener(V.substring(2),N.bind(A)),A.setAttribute(`data-${V}`,""));continue}const _=`attr:${V}`;if(V==="class"){if(!N)continue;for(const R of N)D&&l(g,`${_}:${R}`,()=>A.classList.remove(R)),!A.classList.contains(R)&&A.classList.add(R)}else if(V==="style"){if(!N)continue;for(const[R,O]of N)l(g,`${_}:${R}`,()=>{A.style.removeProperty(R)}),A.style.setProperty(R,O)}else N!==!1&&N!==null&&(A.getAttribute(V)!==N&&A.setAttribute(V,N===!0?"":String(N)),D&&l(g,_,()=>A.removeAttribute(V)))}}const h=[],f={bodyClose:void 0,bodyOpen:void 0,head:void 0},p=await o;for(const g of p){const{tag:A,shouldRender:v,id:D}=g;if(v){if(A.tag==="title"){n.title=A.textContent,l("title","",()=>n.title=a.title);continue}g.$el=g.$el||a.elMap.get(D),g.$el?u(g):Qp.has(A.tag)&&h.push(g)}}for(const g of h){const A=g.tag.tagPosition||"head";g.$el=n.createElement(g.tag.tag),u(g),f[A]=f[A]||n.createDocumentFragment(),f[A].appendChild(g.$el)}for(const g of p)await t.hooks.callHook("dom:renderTag",g,n,l);f.head&&n.head.appendChild(f.head),f.bodyOpen&&n.body.insertBefore(f.bodyOpen,n.body.firstChild),f.bodyClose&&n.body.appendChild(f.bodyClose);for(const g in a.pendingSideEffects)a.pendingSideEffects[g]();t._dom=a,await t.hooks.callHook("dom:rendered",{renders:p}),r()}).finally(()=>{t._domUpdatePromise=void 0,t.dirty=!1})),t._domUpdatePromise}function _0(t={}){const e=t.domOptions?.render||ff;t.document=t.document||(typeof window<"u"?document:void 0);const n=t.document?.head.querySelector('script[id="unhead:payload"]')?.innerHTML||!1;return r0({...t,plugins:[...t.plugins||[],{key:"client",hooks:{"entries:updated":e}}],init:[n?JSON.parse(n):!1,...t.init||[]]})}function y0(t,e){let n=0;return()=>{const s=++n;e(()=>{n===s&&t()})}}function v0(t={}){const e=_0({domOptions:{render:y0(()=>ff(e),n=>setTimeout(n,0))},...t});return e.install=o0(e),e}const E0={disableDefaults:!0},T0=jn({name:"nuxt:head",enforce:"pre",setup(t){const e=v0(E0);t.vueApp.use(e);{let n=!0;const s=async()=>{n=!1,await ff(e)};e.hooks.hook("dom:beforeRender",r=>{r.shouldRender=!n}),t.hooks.hook("page:start",()=>{n=!0}),t.hooks.hook("page:finish",()=>{t.isHydrating||s()}),t.hooks.hook("app:error",s),t.hooks.hook("app:suspense:resolve",s)}}});const Jr=typeof document<"u";function iv(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function w0(t){return t.__esModule||t[Symbol.toStringTag]==="Module"||t.default&&iv(t.default)}const He=Object.assign;function pu(t,e){const n={};for(const s in e){const r=e[s];n[s]=In(r)?r.map(t):t(r)}return n}const Ro=()=>{},In=Array.isArray;function nm(t,e){const n={};for(const s in t)n[s]=s in e?e[s]:t[s];return n}const ov=/#/g,b0=/&/g,I0=/\//g,A0=/=/g,R0=/\?/g,av=/\+/g,S0=/%5B/g,C0=/%5D/g,cv=/%5E/g,P0=/%60/g,lv=/%7B/g,k0=/%7C/g,uv=/%7D/g,N0=/%20/g;function df(t){return t==null?"":encodeURI(""+t).replace(k0,"|").replace(S0,"[").replace(C0,"]")}function D0(t){return df(t).replace(lv,"{").replace(uv,"}").replace(cv,"^")}function rh(t){return df(t).replace(av,"%2B").replace(N0,"+").replace(ov,"%23").replace(b0,"%26").replace(P0,"`").replace(lv,"{").replace(uv,"}").replace(cv,"^")}function O0(t){return rh(t).replace(A0,"%3D")}function V0(t){return df(t).replace(ov,"%23").replace(R0,"%3F")}function L0(t){return V0(t).replace(I0,"%2F")}function Ho(t){if(t==null)return null;try{return decodeURIComponent(""+t)}catch{}return""+t}const M0=/\/$/,x0=t=>t.replace(M0,"");function mu(t,e,n="/"){let s,r={},i="",o="";const a=e.indexOf("#");let l=e.indexOf("?");return l=a>=0&&l>a?-1:l,l>=0&&(s=e.slice(0,l),i=e.slice(l,a>0?a:e.length),r=t(i.slice(1))),a>=0&&(s=s||e.slice(0,a),o=e.slice(a,e.length)),s=$0(s??e,n),{fullPath:s+i+o,path:s,query:r,hash:Ho(o)}}function F0(t,e){const n=e.query?t(e.query):"";return e.path+(n&&"?")+n+(e.hash||"")}function sm(t,e){return!e||!t.toLowerCase().startsWith(e.toLowerCase())?t:t.slice(e.length)||"/"}function U0(t,e,n){const s=e.matched.length-1,r=n.matched.length-1;return s>-1&&s===r&&wi(e.matched[s],n.matched[r])&&hv(e.params,n.params)&&t(e.query)===t(n.query)&&e.hash===n.hash}function wi(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function hv(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(var n in t)if(!B0(t[n],e[n]))return!1;return!0}function B0(t,e){return In(t)?rm(t,e):In(e)?rm(e,t):t?.valueOf()===e?.valueOf()}function rm(t,e){return In(e)?t.length===e.length&&t.every((n,s)=>n===e[s]):t.length===1&&t[0]===e}function $0(t,e){if(t.startsWith("/"))return t;if(!t)return e;const n=e.split("/"),s=t.split("/"),r=s[s.length-1];(r===".."||r===".")&&s.push("");let i=n.length-1,o,a;for(o=0;o<s.length;o++)if(a=s[o],a!==".")if(a==="..")i>1&&i--;else break;return n.slice(0,i).join("/")+"/"+s.slice(o).join("/")}const un={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};let ih=(function(t){return t.pop="pop",t.push="push",t})({}),gu=(function(t){return t.back="back",t.forward="forward",t.unknown="",t})({});function H0(t){if(!t)if(Jr){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),x0(t)}const j0=/^[^#]+#/;function q0(t,e){return t.replace(j0,"#")+e}function W0(t,e){const n=document.documentElement.getBoundingClientRect(),s=t.getBoundingClientRect();return{behavior:e.behavior,left:s.left-n.left-(e.left||0),top:s.top-n.top-(e.top||0)}}const fl=()=>({left:window.scrollX,top:window.scrollY});function G0(t){let e;if("el"in t){const n=t.el,s=typeof n=="string"&&n.startsWith("#"),r=typeof n=="string"?s?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!r)return;e=W0(r,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.scrollX,e.top!=null?e.top:window.scrollY)}function im(t,e){return(history.state?history.state.position-e:-1)+t}const oh=new Map;function z0(t,e){oh.set(t,e)}function K0(t){const e=oh.get(t);return oh.delete(t),e}function Q0(t){return typeof t=="string"||t&&typeof t=="object"}function fv(t){return typeof t=="string"||typeof t=="symbol"}let st=(function(t){return t[t.MATCHER_NOT_FOUND=1]="MATCHER_NOT_FOUND",t[t.NAVIGATION_GUARD_REDIRECT=2]="NAVIGATION_GUARD_REDIRECT",t[t.NAVIGATION_ABORTED=4]="NAVIGATION_ABORTED",t[t.NAVIGATION_CANCELLED=8]="NAVIGATION_CANCELLED",t[t.NAVIGATION_DUPLICATED=16]="NAVIGATION_DUPLICATED",t})({});const dv=Symbol("");st.MATCHER_NOT_FOUND+"",st.NAVIGATION_GUARD_REDIRECT+"",st.NAVIGATION_ABORTED+"",st.NAVIGATION_CANCELLED+"",st.NAVIGATION_DUPLICATED+"";function bi(t,e){return He(new Error,{type:t,[dv]:!0},e)}function Kn(t,e){return t instanceof Error&&dv in t&&(e==null||!!(t.type&e))}const Y0=["params","query","hash"];function J0(t){if(typeof t=="string")return t;if(t.path!=null)return t.path;const e={};for(const n of Y0)n in t&&(e[n]=t[n]);return JSON.stringify(e,null,2)}function X0(t){const e={};if(t===""||t==="?")return e;const n=(t[0]==="?"?t.slice(1):t).split("&");for(let s=0;s<n.length;++s){const r=n[s].replace(av," "),i=r.indexOf("="),o=Ho(i<0?r:r.slice(0,i)),a=i<0?null:Ho(r.slice(i+1));if(o in e){let l=e[o];In(l)||(l=e[o]=[l]),l.push(a)}else e[o]=a}return e}function om(t){let e="";for(let n in t){const s=t[n];if(n=O0(n),s==null){s!==void 0&&(e+=(e.length?"&":"")+n);continue}(In(s)?s.map(r=>r&&rh(r)):[s&&rh(s)]).forEach(r=>{r!==void 0&&(e+=(e.length?"&":"")+n,r!=null&&(e+="="+r))})}return e}function Z0(t){const e={};for(const n in t){const s=t[n];s!==void 0&&(e[n]=In(s)?s.map(r=>r==null?null:""+r):s==null?s:""+s)}return e}const eS=Symbol(""),am=Symbol(""),pf=Symbol(""),mf=Symbol(""),ah=Symbol("");function uo(){let t=[];function e(s){return t.push(s),()=>{const r=t.indexOf(s);r>-1&&t.splice(r,1)}}function n(){t=[]}return{add:e,list:()=>t.slice(),reset:n}}function Ns(t,e,n,s,r,i=o=>o()){const o=s&&(s.enterCallbacks[r]=s.enterCallbacks[r]||[]);return()=>new Promise((a,l)=>{const u=p=>{p===!1?l(bi(st.NAVIGATION_ABORTED,{from:n,to:e})):p instanceof Error?l(p):Q0(p)?l(bi(st.NAVIGATION_GUARD_REDIRECT,{from:e,to:p})):(o&&s.enterCallbacks[r]===o&&typeof p=="function"&&o.push(p),a())},h=i(()=>t.call(s&&s.instances[r],e,n,u));let f=Promise.resolve(h);t.length<3&&(f=f.then(u)),f.catch(p=>l(p))})}function _u(t,e,n,s,r=i=>i()){const i=[];for(const o of t)for(const a in o.components){let l=o.components[a];if(!(e!=="beforeRouteEnter"&&!o.instances[a]))if(iv(l)){const u=(l.__vccOpts||l)[e];u&&i.push(Ns(u,n,s,o,a,r))}else{let u=l();i.push(()=>u.then(h=>{if(!h)throw new Error(`Couldn't resolve component "${a}" at "${o.path}"`);const f=w0(h)?h.default:h;o.mods[a]=h,o.components[a]=f;const p=(f.__vccOpts||f)[e];return p&&Ns(p,n,s,o,a,r)()}))}}return i}function tS(t,e){const n=[],s=[],r=[],i=Math.max(e.matched.length,t.matched.length);for(let o=0;o<i;o++){const a=e.matched[o];a&&(t.matched.find(u=>wi(u,a))?s.push(a):n.push(a));const l=t.matched[o];l&&(e.matched.find(u=>wi(u,l))||r.push(l))}return[n,s,r]}let nS=()=>location.protocol+"//"+location.host;function pv(t,e){const{pathname:n,search:s,hash:r}=e,i=t.indexOf("#");if(i>-1){let o=r.includes(t.slice(i))?t.slice(i).length:1,a=r.slice(o);return a[0]!=="/"&&(a="/"+a),sm(a,"")}return sm(n,t)+s+r}function sS(t,e,n,s){let r=[],i=[],o=null;const a=({state:p})=>{const g=pv(t,location),A=n.value,v=e.value;let D=0;if(p){if(n.value=g,e.value=p,o&&o===A){o=null;return}D=v?p.position-v.position:0}else s(g);r.forEach(V=>{V(n.value,A,{delta:D,type:ih.pop,direction:D?D>0?gu.forward:gu.back:gu.unknown})})};function l(){o=n.value}function u(p){r.push(p);const g=()=>{const A=r.indexOf(p);A>-1&&r.splice(A,1)};return i.push(g),g}function h(){if(document.visibilityState==="hidden"){const{history:p}=window;if(!p.state)return;p.replaceState(He({},p.state,{scroll:fl()}),"")}}function f(){for(const p of i)p();i=[],window.removeEventListener("popstate",a),window.removeEventListener("pagehide",h),document.removeEventListener("visibilitychange",h)}return window.addEventListener("popstate",a),window.addEventListener("pagehide",h),document.addEventListener("visibilitychange",h),{pauseListeners:l,listen:u,destroy:f}}function cm(t,e,n,s=!1,r=!1){return{back:t,current:e,forward:n,replaced:s,position:window.history.length,scroll:r?fl():null}}function rS(t){const{history:e,location:n}=window,s={value:pv(t,n)},r={value:e.state};r.value||i(s.value,{back:null,current:s.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function i(l,u,h){const f=t.indexOf("#"),p=f>-1?(n.host&&document.querySelector("base")?t:t.slice(f))+l:nS()+t+l;try{e[h?"replaceState":"pushState"](u,"",p),r.value=u}catch(g){console.error(g),n[h?"replace":"assign"](p)}}function o(l,u){i(l,He({},e.state,cm(r.value.back,l,r.value.forward,!0),u,{position:r.value.position}),!0),s.value=l}function a(l,u){const h=He({},r.value,e.state,{forward:l,scroll:fl()});i(h.current,h,!0),i(l,He({},cm(s.value,l,null),{position:h.position+1},u),!1),s.value=l}return{location:s,state:r,push:a,replace:o}}function iS(t){t=H0(t);const e=rS(t),n=sS(t,e.state,e.location,e.replace);function s(i,o=!0){o||n.pauseListeners(),history.go(i)}const r=He({location:"",base:t,go:s,createHref:q0.bind(null,t)},e,n);return Object.defineProperty(r,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(r,"state",{enumerable:!0,get:()=>e.state.value}),r}let Er=(function(t){return t[t.Static=0]="Static",t[t.Param=1]="Param",t[t.Group=2]="Group",t})({});var wt=(function(t){return t[t.Static=0]="Static",t[t.Param=1]="Param",t[t.ParamRegExp=2]="ParamRegExp",t[t.ParamRegExpEnd=3]="ParamRegExpEnd",t[t.EscapeNext=4]="EscapeNext",t})(wt||{});const oS={type:Er.Static,value:""},aS=/[a-zA-Z0-9_]/;function cS(t){if(!t)return[[]];if(t==="/")return[[oS]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(g){throw new Error(`ERR (${n})/"${u}": ${g}`)}let n=wt.Static,s=n;const r=[];let i;function o(){i&&r.push(i),i=[]}let a=0,l,u="",h="";function f(){u&&(n===wt.Static?i.push({type:Er.Static,value:u}):n===wt.Param||n===wt.ParamRegExp||n===wt.ParamRegExpEnd?(i.length>1&&(l==="*"||l==="+")&&e(`A repeatable param (${u}) must be alone in its segment. eg: '/:ids+.`),i.push({type:Er.Param,value:u,regexp:h,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):e("Invalid state to consume buffer"),u="")}function p(){u+=l}for(;a<t.length;){if(l=t[a++],l==="\\"&&n!==wt.ParamRegExp){s=n,n=wt.EscapeNext;continue}switch(n){case wt.Static:l==="/"?(u&&f(),o()):l===":"?(f(),n=wt.Param):p();break;case wt.EscapeNext:p(),n=s;break;case wt.Param:l==="("?n=wt.ParamRegExp:aS.test(l)?p():(f(),n=wt.Static,l!=="*"&&l!=="?"&&l!=="+"&&a--);break;case wt.ParamRegExp:l===")"?h[h.length-1]=="\\"?h=h.slice(0,-1)+l:n=wt.ParamRegExpEnd:h+=l;break;case wt.ParamRegExpEnd:f(),n=wt.Static,l!=="*"&&l!=="?"&&l!=="+"&&a--,h="";break;default:e("Unknown state");break}}return n===wt.ParamRegExp&&e(`Unfinished custom RegExp for param "${u}"`),f(),o(),r}const lm="[^/]+?",lS={sensitive:!1,strict:!1,start:!0,end:!0};var qt=(function(t){return t[t._multiplier=10]="_multiplier",t[t.Root=90]="Root",t[t.Segment=40]="Segment",t[t.SubSegment=30]="SubSegment",t[t.Static=40]="Static",t[t.Dynamic=20]="Dynamic",t[t.BonusCustomRegExp=10]="BonusCustomRegExp",t[t.BonusWildcard=-50]="BonusWildcard",t[t.BonusRepeatable=-20]="BonusRepeatable",t[t.BonusOptional=-8]="BonusOptional",t[t.BonusStrict=.7000000000000001]="BonusStrict",t[t.BonusCaseSensitive=.25]="BonusCaseSensitive",t})(qt||{});const uS=/[.+*?^${}()[\]/\\]/g;function hS(t,e){const n=He({},lS,e),s=[];let r=n.start?"^":"";const i=[];for(const u of t){const h=u.length?[]:[qt.Root];n.strict&&!u.length&&(r+="/");for(let f=0;f<u.length;f++){const p=u[f];let g=qt.Segment+(n.sensitive?qt.BonusCaseSensitive:0);if(p.type===Er.Static)f||(r+="/"),r+=p.value.replace(uS,"\\$&"),g+=qt.Static;else if(p.type===Er.Param){const{value:A,repeatable:v,optional:D,regexp:V}=p;i.push({name:A,repeatable:v,optional:D});const N=V||lm;if(N!==lm){g+=qt.BonusCustomRegExp;try{`${N}`}catch(R){throw new Error(`Invalid custom RegExp for param "${A}" (${N}): `+R.message)}}let _=v?`((?:${N})(?:/(?:${N}))*)`:`(${N})`;f||(_=D&&u.length<2?`(?:/${_})`:"/"+_),D&&(_+="?"),r+=_,g+=qt.Dynamic,D&&(g+=qt.BonusOptional),v&&(g+=qt.BonusRepeatable),N===".*"&&(g+=qt.BonusWildcard)}h.push(g)}s.push(h)}if(n.strict&&n.end){const u=s.length-1;s[u][s[u].length-1]+=qt.BonusStrict}n.strict||(r+="/?"),n.end?r+="$":n.strict&&!r.endsWith("/")&&(r+="(?:/|$)");const o=new RegExp(r,n.sensitive?"":"i");function a(u){const h=u.match(o),f={};if(!h)return null;for(let p=1;p<h.length;p++){const g=h[p]||"",A=i[p-1];f[A.name]=g&&A.repeatable?g.split("/"):g}return f}function l(u){let h="",f=!1;for(const p of t){(!f||!h.endsWith("/"))&&(h+="/"),f=!1;for(const g of p)if(g.type===Er.Static)h+=g.value;else if(g.type===Er.Param){const{value:A,repeatable:v,optional:D}=g,V=A in u?u[A]:"";if(In(V)&&!v)throw new Error(`Provided param "${A}" is an array but it is not repeatable (* or + modifiers)`);const N=In(V)?V.join("/"):V;if(!N)if(D)p.length<2&&(h.endsWith("/")?h=h.slice(0,-1):f=!0);else throw new Error(`Missing required param "${A}"`);h+=N}}return h||"/"}return{re:o,score:s,keys:i,parse:a,stringify:l}}function fS(t,e){let n=0;for(;n<t.length&&n<e.length;){const s=e[n]-t[n];if(s)return s;n++}return t.length<e.length?t.length===1&&t[0]===qt.Static+qt.Segment?-1:1:t.length>e.length?e.length===1&&e[0]===qt.Static+qt.Segment?1:-1:0}function mv(t,e){let n=0;const s=t.score,r=e.score;for(;n<s.length&&n<r.length;){const i=fS(s[n],r[n]);if(i)return i;n++}if(Math.abs(r.length-s.length)===1){if(um(s))return 1;if(um(r))return-1}return r.length-s.length}function um(t){const e=t[t.length-1];return t.length>0&&e[e.length-1]<0}const dS={strict:!1,end:!0,sensitive:!1};function pS(t,e,n){const s=hS(cS(t.path),n),r=He(s,{record:t,parent:e,children:[],alias:[]});return e&&!r.record.aliasOf==!e.record.aliasOf&&e.children.push(r),r}function mS(t,e){const n=[],s=new Map;e=nm(dS,e);function r(f){return s.get(f)}function i(f,p,g){const A=!g,v=fm(f);v.aliasOf=g&&g.record;const D=nm(e,f),V=[v];if("alias"in f){const R=typeof f.alias=="string"?[f.alias]:f.alias;for(const O of R)V.push(fm(He({},v,{components:g?g.record.components:v.components,path:O,aliasOf:g?g.record:v})))}let N,_;for(const R of V){const{path:O}=R;if(p&&O[0]!=="/"){const U=p.record.path,E=U[U.length-1]==="/"?"":"/";R.path=p.record.path+(O&&E+O)}if(N=pS(R,p,D),g?g.alias.push(N):(_=_||N,_!==N&&_.alias.push(N),A&&f.name&&!dm(N)&&o(f.name)),gv(N)&&l(N),v.children){const U=v.children;for(let E=0;E<U.length;E++)i(U[E],N,g&&g.children[E])}g=g||N}return _?()=>{o(_)}:Ro}function o(f){if(fv(f)){const p=s.get(f);p&&(s.delete(f),n.splice(n.indexOf(p),1),p.children.forEach(o),p.alias.forEach(o))}else{const p=n.indexOf(f);p>-1&&(n.splice(p,1),f.record.name&&s.delete(f.record.name),f.children.forEach(o),f.alias.forEach(o))}}function a(){return n}function l(f){const p=yS(f,n);n.splice(p,0,f),f.record.name&&!dm(f)&&s.set(f.record.name,f)}function u(f,p){let g,A={},v,D;if("name"in f&&f.name){if(g=s.get(f.name),!g)throw bi(st.MATCHER_NOT_FOUND,{location:f});D=g.record.name,A=He(hm(p.params,g.keys.filter(_=>!_.optional).concat(g.parent?g.parent.keys.filter(_=>_.optional):[]).map(_=>_.name)),f.params&&hm(f.params,g.keys.map(_=>_.name))),v=g.stringify(A)}else if(f.path!=null)v=f.path,g=n.find(_=>_.re.test(v)),g&&(A=g.parse(v),D=g.record.name);else{if(g=p.name?s.get(p.name):n.find(_=>_.re.test(p.path)),!g)throw bi(st.MATCHER_NOT_FOUND,{location:f,currentLocation:p});D=g.record.name,A=He({},p.params,f.params),v=g.stringify(A)}const V=[];let N=g;for(;N;)V.unshift(N.record),N=N.parent;return{name:D,path:v,params:A,matched:V,meta:_S(V)}}t.forEach(f=>i(f));function h(){n.length=0,s.clear()}return{addRoute:i,resolve:u,removeRoute:o,clearRoutes:h,getRoutes:a,getRecordMatcher:r}}function hm(t,e){const n={};for(const s of e)s in t&&(n[s]=t[s]);return n}function fm(t){const e={path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:t.aliasOf,beforeEnter:t.beforeEnter,props:gS(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}};return Object.defineProperty(e,"mods",{value:{}}),e}function gS(t){const e={},n=t.props||!1;if("component"in t)e.default=n;else for(const s in t.components)e[s]=typeof n=="object"?n[s]:n;return e}function dm(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function _S(t){return t.reduce((e,n)=>He(e,n.meta),{})}function yS(t,e){let n=0,s=e.length;for(;n!==s;){const i=n+s>>1;mv(t,e[i])<0?s=i:n=i+1}const r=vS(t);return r&&(s=e.lastIndexOf(r,s-1)),s}function vS(t){let e=t;for(;e=e.parent;)if(gv(e)&&mv(t,e)===0)return e}function gv({record:t}){return!!(t.name||t.components&&Object.keys(t.components).length||t.redirect)}function pm(t){const e=Ot(pf),n=Ot(mf),s=Fe(()=>{const l=We(t.to);return e.resolve(l)}),r=Fe(()=>{const{matched:l}=s.value,{length:u}=l,h=l[u-1],f=n.matched;if(!h||!f.length)return-1;const p=f.findIndex(wi.bind(null,h));if(p>-1)return p;const g=mm(l[u-2]);return u>1&&mm(h)===g&&f[f.length-1].path!==g?f.findIndex(wi.bind(null,l[u-2])):p}),i=Fe(()=>r.value>-1&&IS(n.params,s.value.params)),o=Fe(()=>r.value>-1&&r.value===n.matched.length-1&&hv(n.params,s.value.params));function a(l={}){if(bS(l)){const u=e[We(t.replace)?"replace":"push"](We(t.to)).catch(Ro);return t.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>u),u}return Promise.resolve()}return{route:s,href:Fe(()=>s.value.href),isActive:i,isExactActive:o,navigate:a}}function ES(t){return t.length===1?t[0]:t}const TS=ct({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:pm,setup(t,{slots:e}){const n=nr(pm(t)),{options:s}=Ot(pf),r=Fe(()=>({[gm(t.activeClass,s.linkActiveClass,"router-link-active")]:n.isActive,[gm(t.exactActiveClass,s.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const i=e.default&&ES(e.default(n));return t.custom?i:it("a",{"aria-current":n.isExactActive?t.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:r.value},i)}}}),wS=TS;function bS(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function IS(t,e){for(const n in e){const s=e[n],r=t[n];if(typeof s=="string"){if(s!==r)return!1}else if(!In(r)||r.length!==s.length||s.some((i,o)=>i.valueOf()!==r[o].valueOf()))return!1}return!0}function mm(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const gm=(t,e,n)=>t??e??n,AS=ct({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:e,slots:n}){const s=Ot(ah),r=Fe(()=>t.route||s.value),i=Ot(am,0),o=Fe(()=>{let u=We(i);const{matched:h}=r.value;let f;for(;(f=h[u])&&!f.components;)u++;return u}),a=Fe(()=>r.value.matched[o.value]);ts(am,Fe(()=>o.value+1)),ts(eS,a),ts(ah,r);const l=de();return Mn(()=>[l.value,a.value,t.name],([u,h,f],[p,g,A])=>{h&&(h.instances[f]=u,g&&g!==h&&u&&u===p&&(h.leaveGuards.size||(h.leaveGuards=g.leaveGuards),h.updateGuards.size||(h.updateGuards=g.updateGuards))),u&&h&&(!g||!wi(h,g)||!p)&&(h.enterCallbacks[f]||[]).forEach(v=>v(u))},{flush:"post"}),()=>{const u=r.value,h=t.name,f=a.value,p=f&&f.components[h];if(!p)return _m(n.default,{Component:p,route:u});const g=f.props[h],A=g?g===!0?u.params:typeof g=="function"?g(u):g:null,D=it(p,He({},A,e,{onVnodeUnmounted:V=>{V.component.isUnmounted&&(f.instances[h]=null)},ref:l}));return _m(n.default,{Component:D,route:u})||D}}});function _m(t,e){if(!t)return null;const n=t(e);return n.length===1?n[0]:n}const _v=AS;function RS(t){const e=mS(t.routes,t),n=t.parseQuery||X0,s=t.stringifyQuery||om,r=t.history,i=uo(),o=uo(),a=uo(),l=ls(un);let u=un;Jr&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const h=pu.bind(null,M=>""+M),f=pu.bind(null,L0),p=pu.bind(null,Ho);function g(M,te){let W,K;return fv(M)?(W=e.getRecordMatcher(M),K=te):K=M,e.addRoute(K,W)}function A(M){const te=e.getRecordMatcher(M);te&&e.removeRoute(te)}function v(){return e.getRoutes().map(M=>M.record)}function D(M){return!!e.getRecordMatcher(M)}function V(M,te){if(te=He({},te||l.value),typeof M=="string"){const k=mu(n,M,te.path),x=e.resolve({path:k.path},te),J=r.createHref(k.fullPath);return He(k,x,{params:p(x.params),hash:Ho(k.hash),redirectedFrom:void 0,href:J})}let W;if(M.path!=null)W=He({},M,{path:mu(n,M.path,te.path).path});else{const k=He({},M.params);for(const x in k)k[x]==null&&delete k[x];W=He({},M,{params:f(k)}),te.params=f(te.params)}const K=e.resolve(W,te),ge=M.hash||"";K.params=h(p(K.params));const Ne=F0(s,He({},M,{hash:D0(ge),path:K.path})),b=r.createHref(Ne);return He({fullPath:Ne,hash:ge,query:s===om?Z0(M.query):M.query||{}},K,{redirectedFrom:void 0,href:b})}function N(M){return typeof M=="string"?mu(n,M,l.value.path):He({},M)}function _(M,te){if(u!==M)return bi(st.NAVIGATION_CANCELLED,{from:te,to:M})}function R(M){return E(M)}function O(M){return R(He(N(M),{replace:!0}))}function U(M,te){const W=M.matched[M.matched.length-1];if(W&&W.redirect){const{redirect:K}=W;let ge=typeof K=="function"?K(M,te):K;return typeof ge=="string"&&(ge=ge.includes("?")||ge.includes("#")?ge=N(ge):{path:ge},ge.params={}),He({query:M.query,hash:M.hash,params:ge.path!=null?{}:M.params},ge)}}function E(M,te){const W=u=V(M),K=l.value,ge=M.state,Ne=M.force,b=M.replace===!0,k=U(W,K);if(k)return E(He(N(k),{state:typeof k=="object"?He({},ge,k.state):ge,force:Ne,replace:b}),te||W);const x=W;x.redirectedFrom=te;let J;return!Ne&&U0(s,K,W)&&(J=bi(st.NAVIGATION_DUPLICATED,{to:x,from:K}),B(K,K,!0,!1)),(J?Promise.resolve(J):C(x,K)).catch(z=>Kn(z)?Kn(z,st.NAVIGATION_GUARD_REDIRECT)?z:H(z):L(z,x,K)).then(z=>{if(z){if(Kn(z,st.NAVIGATION_GUARD_REDIRECT))return E(He({replace:b},N(z.to),{state:typeof z.to=="object"?He({},ge,z.to.state):ge,force:Ne}),te||x)}else z=S(x,K,!0,b,ge);return P(x,K,z),z})}function I(M,te){const W=_(M,te);return W?Promise.reject(W):Promise.resolve()}function y(M){const te=pe.values().next().value;return te&&typeof te.runWithContext=="function"?te.runWithContext(M):M()}function C(M,te){let W;const[K,ge,Ne]=tS(M,te);W=_u(K.reverse(),"beforeRouteLeave",M,te);for(const k of K)k.leaveGuards.forEach(x=>{W.push(Ns(x,M,te))});const b=I.bind(null,M,te);return W.push(b),ae(W).then(()=>{W=[];for(const k of i.list())W.push(Ns(k,M,te));return W.push(b),ae(W)}).then(()=>{W=_u(ge,"beforeRouteUpdate",M,te);for(const k of ge)k.updateGuards.forEach(x=>{W.push(Ns(x,M,te))});return W.push(b),ae(W)}).then(()=>{W=[];for(const k of Ne)if(k.beforeEnter)if(In(k.beforeEnter))for(const x of k.beforeEnter)W.push(Ns(x,M,te));else W.push(Ns(k.beforeEnter,M,te));return W.push(b),ae(W)}).then(()=>(M.matched.forEach(k=>k.enterCallbacks={}),W=_u(Ne,"beforeRouteEnter",M,te,y),W.push(b),ae(W))).then(()=>{W=[];for(const k of o.list())W.push(Ns(k,M,te));return W.push(b),ae(W)}).catch(k=>Kn(k,st.NAVIGATION_CANCELLED)?k:Promise.reject(k))}function P(M,te,W){a.list().forEach(K=>y(()=>K(M,te,W)))}function S(M,te,W,K,ge){const Ne=_(M,te);if(Ne)return Ne;const b=te===un,k=Jr?history.state:{};W&&(K||b?r.replace(M.fullPath,He({scroll:b&&k&&k.scroll},ge)):r.push(M.fullPath,ge)),l.value=M,B(M,te,W,b),H()}let w;function he(){w||(w=r.listen((M,te,W)=>{if(!we.listening)return;const K=V(M),ge=U(K,we.currentRoute.value);if(ge){E(He(ge,{replace:!0,force:!0}),K).catch(Ro);return}u=K;const Ne=l.value;Jr&&z0(im(Ne.fullPath,W.delta),fl()),C(K,Ne).catch(b=>Kn(b,st.NAVIGATION_ABORTED|st.NAVIGATION_CANCELLED)?b:Kn(b,st.NAVIGATION_GUARD_REDIRECT)?(E(He(N(b.to),{force:!0}),K).then(k=>{Kn(k,st.NAVIGATION_ABORTED|st.NAVIGATION_DUPLICATED)&&!W.delta&&W.type===ih.pop&&r.go(-1,!1)}).catch(Ro),Promise.reject()):(W.delta&&r.go(-W.delta,!1),L(b,K,Ne))).then(b=>{b=b||S(K,Ne,!1),b&&(W.delta&&!Kn(b,st.NAVIGATION_CANCELLED)?r.go(-W.delta,!1):W.type===ih.pop&&Kn(b,st.NAVIGATION_ABORTED|st.NAVIGATION_DUPLICATED)&&r.go(-1,!1)),P(K,Ne,b)}).catch(Ro)}))}let Ee=uo(),ce=uo(),q;function L(M,te,W){H(M);const K=ce.list();return K.length?K.forEach(ge=>ge(M,te,W)):console.error(M),Promise.reject(M)}function G(){return q&&l.value!==un?Promise.resolve():new Promise((M,te)=>{Ee.add([M,te])})}function H(M){return q||(q=!M,he(),Ee.list().forEach(([te,W])=>M?W(M):te()),Ee.reset()),M}function B(M,te,W,K){const{scrollBehavior:ge}=t;if(!Jr||!ge)return Promise.resolve();const Ne=!W&&K0(im(M.fullPath,0))||(K||!W)&&history.state&&history.state.scroll||null;return zs().then(()=>ge(M,te,Ne)).then(b=>b&&G0(b)).catch(b=>L(b,M,te))}const j=M=>r.go(M);let se;const pe=new Set,we={currentRoute:l,listening:!0,addRoute:g,removeRoute:A,clearRoutes:e.clearRoutes,hasRoute:D,getRoutes:v,resolve:V,options:t,push:R,replace:O,go:j,back:()=>j(-1),forward:()=>j(1),beforeEach:i.add,beforeResolve:o.add,afterEach:a.add,onError:ce.add,isReady:G,install(M){M.component("RouterLink",wS),M.component("RouterView",_v),M.config.globalProperties.$router=we,Object.defineProperty(M.config.globalProperties,"$route",{enumerable:!0,get:()=>We(l)}),Jr&&!se&&l.value===un&&(se=!0,R(r.location).catch(K=>{}));const te={};for(const K in un)Object.defineProperty(te,K,{get:()=>l.value[K],enumerable:!0});M.provide(pf,we),M.provide(mf,Vn(te)),M.provide(ah,l);const W=M.unmount;pe.add(M),M.unmount=function(){pe.delete(M),pe.size<1&&(u=un,w&&w(),w=null,l.value=un,se=!1,q=!1),W()}}};function ae(M){return M.reduce((te,W)=>te.then(()=>y(W)),Promise.resolve())}return we}function yv(t){return Ot(mf)}const SS=/(:\w+)\([^)]+\)/g,CS=/(:\w+)[?+*]/g,PS=/:\w+/g,kS=(t,e)=>e.path.replace(SS,"$1").replace(CS,"$1").replace(PS,n=>t.params[n.slice(1)]?.toString()||""),ch=(t,e)=>{const n=t.route.matched.find(r=>r.components?.default===t.Component.type),s=e??n?.meta.key??(n&&kS(t.route,n));return typeof s=="function"?s(t.route):s},NS=(t,e)=>({default:()=>t?it(Pb,t===!0?{}:t,e):e});function gf(t){return Array.isArray(t)?t:[t]}const DS="modulepreload",OS=function(t,e){return new URL(t,e).href},ym={},ut=function(e,n,s){let r=Promise.resolve();if(n&&n.length>0){let u=function(h){return Promise.all(h.map(f=>Promise.resolve(f).then(p=>({status:"fulfilled",value:p}),p=>({status:"rejected",reason:p}))))};const o=document.getElementsByTagName("link"),a=document.querySelector("meta[property=csp-nonce]"),l=a?.nonce||a?.getAttribute("nonce");r=u(n.map(h=>{if(h=OS(h,s),h in ym)return;ym[h]=!0;const f=h.endsWith(".css"),p=f?'[rel="stylesheet"]':"";if(s)for(let A=o.length-1;A>=0;A--){const v=o[A];if(v.href===h&&(!f||v.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${h}"]${p}`))return;const g=document.createElement("link");if(g.rel=f?"stylesheet":DS,f||(g.as="script"),g.crossOrigin="",g.href=h,l&&g.setAttribute("nonce",l),document.head.appendChild(g),f)return new Promise((A,v)=>{g.addEventListener("load",A),g.addEventListener("error",()=>v(new Error(`Unable to preload CSS for ${h}`)))})}))}function i(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return r.then(o=>{for(const a of o||[])a.status==="rejected"&&i(a.reason);return e().catch(i)})},VS={layout:!1},LS={layout:!1},MS={layout:!1},xS={layout:"dashboard"},FS={layout:"dashboard"},US={layout:"coach"},BS={layout:"dashboard"},$S={layout:"coach"},HS={layout:"dashboard"},jS={layout:"dashboard"},yu=[{name:"index",path:"/",meta:VS||{},component:()=>ut(()=>import("./uT4-c6VP.js"),__vite__mapDeps([0,1]),import.meta.url)},{name:"profilo",path:"/profilo",meta:LS||{},component:()=>ut(()=>import("./C9A45a8z.js"),[],import.meta.url)},{name:"slug",path:"/:slug(.*)*",component:()=>ut(()=>import("./Camlx3YZ.js"),__vite__mapDeps([2,3]),import.meta.url)},{name:"dev-upload",path:"/dev-upload",meta:MS||{},component:()=>ut(()=>import("./qJnGVHJE.js"),__vite__mapDeps([4,5,6]),import.meta.url)},{name:"panoramica",path:"/panoramica",meta:xS||{},component:()=>ut(()=>import("./BGbXHLbF.js"),__vite__mapDeps([7,8,9,10,11,12,13]),import.meta.url)},{name:"piste-id",path:"/piste/:id()",meta:FS||{},component:()=>ut(()=>import("./CTytCgdU.js"),__vite__mapDeps([14,15,16,17,9,10,18,11,12,19]),import.meta.url)},{name:"dev-cleanup",path:"/dev-cleanup",component:()=>ut(()=>import("./BCJJWujk.js"),__vite__mapDeps([20,5,9,10,21]),import.meta.url)},{name:"piloti-id",path:"/piloti/:id()",meta:{...US||{},middleware:["coach-or-admin"]},component:()=>ut(()=>import("./yx8uBltH.js"),__vite__mapDeps([22,5,15,16,17,9,10,18,11,12,19,23,24,8,13,25,26,27,28,29]),import.meta.url)},{name:"piste",path:"/piste",meta:BS||{},component:()=>ut(()=>import("./CLG_hfQA.js"),__vite__mapDeps([30,27,9,10,11,12,28]),import.meta.url)},{name:"piloti",path:"/piloti",meta:{...$S||{},middleware:["coach-or-admin"]},component:()=>ut(()=>import("./BA3lmt6x.js"),__vite__mapDeps([31,5,32]),import.meta.url)},{name:"sessioni-id",path:"/sessioni/:id()",meta:HS||{},component:()=>ut(()=>import("./DntJuIsg.js"),__vite__mapDeps([33,23,9,10,18,12,24]),import.meta.url)},{name:"dev-data-audit",path:"/dev-data-audit",component:()=>ut(()=>import("./DrxA0LUx.js"),__vite__mapDeps([34,5,9,10,35]),import.meta.url)},{name:"sessioni",path:"/sessioni",meta:jS||{},component:()=>ut(()=>import("./fmfgdFLK.js"),__vite__mapDeps([36,25,16,17,9,10,12,26]),import.meta.url)}],vv=(t,e)=>({default:()=>t?it(oa,t===!0?{}:t,e):e.default?.()}),qS=/(:\w+)\([^)]+\)/g,WS=/(:\w+)[?+*]/g,GS=/:\w+/g;function vm(t){const e=t?.meta.key??t.path.replace(qS,"$1").replace(WS,"$1").replace(GS,n=>t.params[n.slice(1)]?.toString()||"");return typeof e=="function"?e(t):e}function zS(t,e){return t===e||e===un?!1:vm(t)!==vm(e)?!0:!t.matched.every((s,r)=>s.components&&s.components.default===e.matched[r]?.components?.default)}function KS(t,e=!1){if(t){if(t.nodeName==="#comment"&&t.nodeValue==="[")return Ev(t,[],e);if(e){const n=t.cloneNode(!0);return n.querySelectorAll("[data-island-slot]").forEach(s=>{s.innerHTML=""}),[n.outerHTML]}return[t.outerHTML]}}function Ev(t,e=[],n=!1){if(t&&t.nodeName){if(YS(t))return e;if(!QS(t)){const s=t.cloneNode(!0);n&&s.querySelectorAll?.("[data-island-slot]").forEach(r=>{r.innerHTML=""}),e.push(s.outerHTML)}Ev(t.nextSibling,e,n)}return e}function vu(t,e){const n=t?KS(t):[e];return n?by(n.join(""),n.length):it("div")}function QS(t){return t.nodeName==="#comment"&&t.nodeValue==="["}function YS(t){return t.nodeName==="#comment"&&t.nodeValue==="]"}const JS={scrollBehavior(t,e,n){const s=at(),r=Gt().options?.scrollBehaviorType??"auto";if(t.path.replace(/\/$/,"")===e.path.replace(/\/$/,""))return e.hash&&!t.hash?{left:0,top:0}:t.hash?{el:t.hash,top:Tv(t.hash),behavior:r}:!1;if((typeof t.meta.scrollToTop=="function"?t.meta.scrollToTop(t,e):t.meta.scrollToTop)===!1)return!1;const o=s._runningTransition?"page:transition:finish":"page:loading:end";return new Promise(a=>{if(e===un){a(Em(t,e,n,r));return}s.hooks.hookOnce(o,()=>{requestAnimationFrame(()=>a(Em(t,e,n,r)))})})}};function Tv(t){try{const e=document.querySelector(t);if(e)return(Number.parseFloat(getComputedStyle(e).scrollMarginTop)||0)+(Number.parseFloat(getComputedStyle(document.documentElement).scrollPaddingTop)||0)}catch{}return 0}function Em(t,e,n,s){if(n)return n;const r=zS(t,e);return t.hash?{el:t.hash,top:Tv(t.hash),behavior:r?s:"instant"}:{left:0,top:0}}const XS={hashMode:!1,scrollBehaviorType:"auto"},Is={...XS,...JS},ZS=async(t,e)=>{let n,s;if(!t.meta?.validate)return;const r=([n,s]=fi(()=>Promise.resolve(t.meta.validate(t))),n=await n,s(),n);if(r===!0)return;const i=Ar({fatal:!0,statusCode:r&&r.statusCode||404,statusMessage:r&&r.statusMessage||`Page Not Found: ${t.fullPath}`,data:{path:t.fullPath}});return typeof window<"u"&&window.history.pushState({},"",e.fullPath),i},eC=async t=>{let e,n;const s=([e,n]=fi(()=>hf({path:t.path})),e=await e,n(),e);if(s.redirect){const r=s.redirect.includes("#")?s.redirect:s.redirect+t.hash;return Ur(r,{acceptRelative:!0})?(window.location.href=r,!1):r}},tC=[ZS,eC],lh={"coach-or-admin":()=>ut(()=>import("./Di5gcl7L.js"),[],import.meta.url),coach:()=>ut(()=>import("./Jm5lT-WL.js"),[],import.meta.url)};function nC(t,e,n){const{pathname:s,search:r,hash:i}=e,o=t.indexOf("#");if(o>-1){const u=i.includes(t.slice(o))?t.slice(o).length:1;let h=i.slice(u);return h[0]!=="/"&&(h="/"+h),Fp(h,"")}const a=Fp(s,t),l=!n||NA(a,n)?a:n;return l+(l.includes("?")?"":r)+i}const sC=jn({name:"nuxt:router",enforce:"pre",async setup(t){let e,n,s=ll().app.baseURL;const r=Is.history?.(s)??iS(s),i=Is.routes?([e,n]=fi(()=>Is.routes(yu)),e=await e,n(),e??yu):yu;let o;const a=RS({...Is,scrollBehavior:(D,V,N)=>{if(V===un){o=N;return}if(Is.scrollBehavior){if(a.options.scrollBehavior=Is.scrollBehavior,"scrollRestoration"in window.history){const _=a.beforeEach(()=>{_(),window.history.scrollRestoration="manual"})}return Is.scrollBehavior(D,un,o||N)}},history:r,routes:i});"scrollRestoration"in window.history&&(window.history.scrollRestoration="auto"),t.vueApp.use(a);const l=ls(a.currentRoute.value);a.afterEach((D,V)=>{l.value=V}),Object.defineProperty(t.vueApp.config.globalProperties,"previousRoute",{get:()=>l.value});const u=nC(s,window.location,t.payload.path),h=ls(a.currentRoute.value),f=()=>{h.value=a.currentRoute.value};a.afterEach((D,V)=>{D.matched.at(-1)?.components?.default===V.matched.at(-1)?.components?.default&&f()});const p={sync:f};for(const D in h.value)Object.defineProperty(p,D,{get:()=>h.value[D],enumerable:!0});t._route=Vn(p),t._middleware||={global:[],named:{}};const g=ul();a.afterEach(async(D,V,N)=>{delete t._processingMiddleware,!t.isHydrating&&g.value&&await t.runWithContext(SR),N&&await t.callHook("page:loading:end")});try{[e,n]=fi(()=>a.isReady()),await e,n()}catch(D){[e,n]=fi(()=>t.runWithContext(()=>_r(D))),await e,n()}const A=u!==a.currentRoute.value.fullPath?a.resolve(u):a.currentRoute.value;f();const v=t.payload.state._layout;return a.beforeEach(async(D,V)=>{await t.callHook("page:loading:start"),D.meta=nr(D.meta),t.isHydrating&&v&&!$n(D.meta.layout)&&(D.meta.layout=v),t._processingMiddleware=!0;{const N=new Set([...tC,...t._middleware.global]);for(const _ of D.matched){const R=_.meta.middleware;if(R)for(const O of gf(R))N.add(O)}{const _=await t.runWithContext(()=>hf({path:D.path}));if(_.appMiddleware)for(const R in _.appMiddleware)_.appMiddleware[R]?N.add(R):N.delete(R)}for(const _ of N){const R=typeof _=="string"?t._middleware.named[_]||await lh[_]?.().then(O=>O.default||O):_;if(!R)throw new Error(`Unknown route middleware: '${_}'.`);try{const O=await t.runWithContext(()=>R(D,V));if(!t.payload.serverRendered&&t.isHydrating&&(O===!1||O instanceof Error)){const U=O||Ar({statusCode:404,statusMessage:`Page Not Found: ${u}`});return await t.runWithContext(()=>_r(U)),!1}if(O===!0)continue;if(O===!1)return O;if(O)return Yy(O)&&O.fatal&&await t.runWithContext(()=>_r(O)),O}catch(O){const U=Ar(O);return U.fatal&&await t.runWithContext(()=>_r(U)),U}}}}),a.onError(async()=>{delete t._processingMiddleware,await t.callHook("page:loading:end")}),a.afterEach(D=>{if(D.matched.length===0)return t.runWithContext(()=>_r(Ar({statusCode:404,fatal:!1,statusMessage:`Page not found: ${D.fullPath}`,data:{path:D.fullPath}})))}),t.hooks.hookOnce("app:created",async()=>{try{"name"in A&&(A.name=void 0),await a.replace({...A,force:!0}),a.options.scrollBehavior=Is.scrollBehavior}catch(D){await t.runWithContext(()=>_r(D))}}),{provide:{router:a}}}}),Tm=globalThis.requestIdleCallback||(t=>{const e=Date.now(),n={didTimeout:!1,timeRemaining:()=>Math.max(0,50-(Date.now()-e))};return setTimeout(()=>{t(n)},1)}),MM=globalThis.cancelIdleCallback||(t=>{clearTimeout(t)}),_f=t=>{const e=at();e.isHydrating?e.hooks.hookOnce("app:suspense:resolve",()=>{Tm(()=>t())}):Tm(()=>t())},rC=jn({name:"nuxt:payload",setup(t){const e=new Set;Gt().beforeResolve(async(n,s)=>{if(n.path===s.path)return;const r=await tm(n.path);if(r){for(const i of e)delete t.static.data[i];for(const i in r.data)i in t.static.data||e.add(i),t.static.data[i]=r.data[i]}}),_f(()=>{t.hooks.hook("link:prefetch",async n=>{const{hostname:s}=new URL(n,window.location.href);s===window.location.hostname&&await tm(n).catch(()=>{console.warn("[nuxt] Error preloading payload for",n)})}),navigator.connection?.effectiveType!=="slow-2g"&&setTimeout(hl,1e3)})}}),iC=jn(()=>{const t=Gt();_f(()=>{t.beforeResolve(async()=>{await new Promise(e=>{setTimeout(e,100),requestAnimationFrame(()=>{setTimeout(e,0)})})})})}),oC=jn(t=>{let e;async function n(){let s;try{s=await hl()}catch(r){const i=r;if(!("status"in i&&(i.status===404||i.status===403)))throw i}e&&clearTimeout(e),e=setTimeout(n,Wp);try{const r=await $fetch(lf("builds/latest.json")+`?${Date.now()}`);r.id!==s?.id&&(t.hooks.callHook("app:manifest:update",r),e&&clearTimeout(e))}catch{}}_f(()=>{e=setTimeout(n,Wp)})});function aC(t={}){const e=t.path||window.location.pathname;let n={};try{n=Ac(sessionStorage.getItem("nuxt:reload")||"{}")}catch{}if(t.force||n?.path!==e||n?.expires<Date.now()){try{sessionStorage.setItem("nuxt:reload",JSON.stringify({path:e,expires:Date.now()+(t.ttl??1e4)}))}catch{}if(t.persistState)try{sessionStorage.setItem("nuxt:reload:state",JSON.stringify({state:at().payload.state}))}catch{}window.location.pathname!==e?window.location.href=e:window.location.reload()}}const cC=jn({name:"nuxt:chunk-reload",setup(t){const e=Gt(),n=ll(),s=new Set;e.beforeEach(()=>{s.clear()}),t.hook("app:chunkError",({error:i})=>{s.add(i)});function r(i){const o=af(n.app.baseURL,i.fullPath);aC({path:o,persistState:!0})}t.hook("app:manifest:update",()=>{e.beforeResolve(r)}),e.onError((i,o)=>{s.has(i)&&r(o)})}}),lC=jn({name:"nuxt:global-components"}),xs={coach:vc(()=>ut(()=>import("./CrZpwbKJ.js"),__vite__mapDeps([37,38]),import.meta.url).then(t=>t.default||t)),dashboard:vc(()=>ut(()=>import("./DW1eNnXe.js"),__vite__mapDeps([39,5,40]),import.meta.url).then(t=>t.default||t))};function uC(t){if(t?.__asyncLoader&&!t.__asyncResolved)return t.__asyncLoader()}async function hC(t,e=Gt()){const{path:n,matched:s}=e.resolve(t);if(!s.length||(e._routePreloaded||=new Set,e._routePreloaded.has(n)))return;const r=e._preloadPromises||=[];if(r.length>4)return Promise.all(r).then(()=>hC(t,e));e._routePreloaded.add(n);for(const i of s){const o=i.components?.default;if(typeof o!="function")continue;const a=Promise.resolve(o()).catch(()=>{}).finally(()=>r.splice(r.indexOf(a)));r.push(a)}await Promise.all(r)}const fC=jn({name:"nuxt:prefetch",setup(t){const e=Gt();t.hooks.hook("app:mounted",()=>{e.beforeEach(async n=>{const s=n?.meta?.layout;s&&typeof xs[s]=="function"&&await xs[s]()})}),t.hooks.hook("link:prefetch",n=>{if(Ur(n))return;const s=e.resolve(n);if(!s)return;const r=s.meta.layout;let i=gf(s.meta.middleware);i=i.filter(o=>typeof o=="string");for(const o of i)typeof lh[o]=="function"&&lh[o]();typeof r=="string"&&r in xs&&uC(xs[r])})}}),dC={mounted(t,e){t._clickOutside=n=>{t===n.target||t.contains(n.target)||e.value(n)},document.addEventListener("click",t._clickOutside)},unmounted(t){t._clickOutside&&document.removeEventListener("click",t._clickOutside)}},pC=jn(t=>{t.vueApp.directive("click-outside",dC)}),mC=[g0,T0,sC,rC,iC,oC,cC,lC,fC,pC],gC={class:"notification-icon"},_C={key:0,width:"16",height:"16",viewBox:"0 0 16 16"},yC={key:1,width:"16",height:"16",viewBox:"0 0 16 16"},vC={key:2,width:"16",height:"16",viewBox:"0 0 16 16"},EC={class:"notification-message"},TC=ct({__name:"SyncNotification",props:{results:{},visible:{type:Boolean}},emits:["close"],setup(t,{emit:e}){const n=t,s=e,r=de(!1);let i=null;Mn(()=>n.visible,h=>{r.value=h,h&&i&&clearTimeout(i),h&&(i=setTimeout(()=>{r.value=!1,s("close")},5e3))});const o=Fe(()=>{const h=n.results.filter(A=>A.status==="created").length,f=n.results.filter(A=>A.status==="updated").length,p=n.results.filter(A=>A.status==="skipped").length,g=n.results.filter(A=>A.status==="error").length;return{created:h,updated:f,skipped:p,errors:g,total:n.results.length}}),a=Fe(()=>o.value.errors>0?"error":o.value.created>0||o.value.updated>0?"success":(o.value.total===0,"info")),l=Fe(()=>{const h=o.value;return h.total===0?"Nessun file da sincronizzare":h.errors>0?`${h.errors} errori durante la sincronizzazione`:h.created>0&&h.updated>0?`${h.created} nuovi, ${h.updated} aggiornati`:h.created>0?`${h.created} sessioni sincronizzate`:h.updated>0?`${h.updated} sessioni aggiornate`:h.skipped>0?`${h.skipped} file saltati (gi sincronizzati o di altri utenti)`:"Sincronizzazione completata"}),u=()=>{r.value=!1,s("close")};return(h,f)=>(Te(),Yt(oa,{name:"slide"},{default:an(()=>[r.value?(Te(),Oe("div",{key:0,class:Bt(["sync-notification",a.value]),onClick:u},[Q("div",gC,[a.value==="success"?(Te(),Oe("svg",_C,[...f[0]||(f[0]=[Q("path",{d:"M6 10.8l-3-3L1.6 9.2l4.4 4.4 9-9L13.6 3 6 10.8z",fill:"currentColor"},null,-1)])])):a.value==="error"?(Te(),Oe("svg",yC,[...f[1]||(f[1]=[Q("path",{d:"M8 1a7 7 0 100 14A7 7 0 008 1zm0 10.5a1 1 0 110-2 1 1 0 010 2zM9 7H7V4h2v3z",fill:"currentColor"},null,-1)])])):(Te(),Oe("svg",vC,[...f[2]||(f[2]=[Q("path",{d:"M8 1a7 7 0 100 14A7 7 0 008 1zm1 10H7V9h2v2zm0-3H7V4h2v4z",fill:"currentColor"},null,-1)])]))]),Q("span",EC,On(l.value),1),Q("button",{class:"notification-close",onClick:cl(u,["stop"])},"")],2)):Qs("",!0)]),_:1}))}}),pn=(t,e)=>{const n=t.__vccOpts||t;for(const[s,r]of e)n[s]=r;return n},wC=Object.assign(pn(TC,[["__scopeId","data-v-2cbc757e"]]),{__name:"ElectronSyncNotification"}),bC=()=>{};var wm={};const wv=function(t){const e=[];let n=0;for(let s=0;s<t.length;s++){let r=t.charCodeAt(s);r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=r&63|128):(r&64512)===55296&&s+1<t.length&&(t.charCodeAt(s+1)&64512)===56320?(r=65536+((r&1023)<<10)+(t.charCodeAt(++s)&1023),e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=r&63|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=r&63|128)}return e},IC=function(t){const e=[];let n=0,s=0;for(;n<t.length;){const r=t[n++];if(r<128)e[s++]=String.fromCharCode(r);else if(r>191&&r<224){const i=t[n++];e[s++]=String.fromCharCode((r&31)<<6|i&63)}else if(r>239&&r<365){const i=t[n++],o=t[n++],a=t[n++],l=((r&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;e[s++]=String.fromCharCode(55296+(l>>10)),e[s++]=String.fromCharCode(56320+(l&1023))}else{const i=t[n++],o=t[n++];e[s++]=String.fromCharCode((r&15)<<12|(i&63)<<6|o&63)}}return e.join("")},bv={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let r=0;r<t.length;r+=3){const i=t[r],o=r+1<t.length,a=o?t[r+1]:0,l=r+2<t.length,u=l?t[r+2]:0,h=i>>2,f=(i&3)<<4|a>>4;let p=(a&15)<<2|u>>6,g=u&63;l||(g=64,o||(p=64)),s.push(n[h],n[f],n[p],n[g])}return s.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(wv(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):IC(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let r=0;r<t.length;){const i=n[t.charAt(r++)],a=r<t.length?n[t.charAt(r)]:0;++r;const u=r<t.length?n[t.charAt(r)]:64;++r;const f=r<t.length?n[t.charAt(r)]:64;if(++r,i==null||a==null||u==null||f==null)throw new AC;const p=i<<2|a>>4;if(s.push(p),u!==64){const g=a<<4&240|u>>2;if(s.push(g),f!==64){const A=u<<6&192|f;s.push(A)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class AC extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const RC=function(t){const e=wv(t);return bv.encodeByteArray(e,!0)},Nc=function(t){return RC(t).replace(/\./g,"")},Iv=function(t){try{return bv.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function SC(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const CC=()=>SC().__FIREBASE_DEFAULTS__,PC=()=>{if(typeof process>"u"||typeof wm>"u")return;const t=wm.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},kC=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Iv(t[1]);return e&&JSON.parse(e)},dl=()=>{try{return bC()||CC()||PC()||kC()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Av=t=>dl()?.emulatorHosts?.[t],NC=t=>{const e=Av(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),s]:[e.substring(0,n),s]},Rv=()=>dl()?.config,Sv=t=>dl()?.[`_${t}`];class DC{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,s))}}}function xi(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Cv(t){return(await fetch(t,{credentials:"include"})).ok}function OC(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=e||"demo-project",r=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${s}`,aud:s,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...t};return[Nc(JSON.stringify(n)),Nc(JSON.stringify(o)),""].join(".")}const So={};function VC(){const t={prod:[],emulator:[]};for(const e of Object.keys(So))So[e]?t.emulator.push(e):t.prod.push(e);return t}function LC(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let bm=!1;function Pv(t,e){if(typeof window>"u"||typeof document>"u"||!xi(window.location.host)||So[t]===e||So[t]||bm)return;So[t]=e;function n(p){return`__firebase__banner__${p}`}const s="__firebase__banner",i=VC().prod.length>0;function o(){const p=document.getElementById(s);p&&p.remove()}function a(p){p.style.display="flex",p.style.background="#7faaf0",p.style.position="fixed",p.style.bottom="5px",p.style.left="5px",p.style.padding=".5em",p.style.borderRadius="5px",p.style.alignItems="center"}function l(p,g){p.setAttribute("width","24"),p.setAttribute("id",g),p.setAttribute("height","24"),p.setAttribute("viewBox","0 0 24 24"),p.setAttribute("fill","none"),p.style.marginLeft="-6px"}function u(){const p=document.createElement("span");return p.style.cursor="pointer",p.style.marginLeft="16px",p.style.fontSize="24px",p.innerHTML=" &times;",p.onclick=()=>{bm=!0,o()},p}function h(p,g){p.setAttribute("id",g),p.innerText="Learn more",p.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",p.setAttribute("target","__blank"),p.style.paddingLeft="5px",p.style.textDecoration="underline"}function f(){const p=LC(s),g=n("text"),A=document.getElementById(g)||document.createElement("span"),v=n("learnmore"),D=document.getElementById(v)||document.createElement("a"),V=n("preprendIcon"),N=document.getElementById(V)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(p.created){const _=p.element;a(_),h(D,v);const R=u();l(N,V),_.append(N,A,D,R),document.body.appendChild(_)}i?(A.innerText="Preview backend disconnected.",N.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(N.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,A.innerText="Preview backend running in this workspace."),A.setAttribute("id",g)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",f):f()}function $t(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function MC(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test($t())}function xC(){const t=dl()?.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function FC(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function UC(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function BC(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function $C(){const t=$t();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function HC(){return!xC()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function jC(){try{return typeof indexedDB=="object"}catch{return!1}}function qC(){return new Promise((t,e)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(s);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(s),t(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{e(r.error?.message||"")}}catch(n){e(n)}})}const WC="FirebaseError";class ms extends Error{constructor(e,n,s){super(n),this.code=e,this.customData=s,this.name=WC,Object.setPrototypeOf(this,ms.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,aa.prototype.create)}}class aa{constructor(e,n,s){this.service=e,this.serviceName=n,this.errors=s}create(e,...n){const s=n[0]||{},r=`${this.service}/${e}`,i=this.errors[e],o=i?GC(i,s):"Error",a=`${this.serviceName}: ${o} (${r}).`;return new ms(r,a,s)}}function GC(t,e){return t.replace(zC,(n,s)=>{const r=e[s];return r!=null?String(r):`<${s}?>`})}const zC=/\{\$([^}]+)}/g;function KC(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function kr(t,e){if(t===e)return!0;const n=Object.keys(t),s=Object.keys(e);for(const r of n){if(!s.includes(r))return!1;const i=t[r],o=e[r];if(Im(i)&&Im(o)){if(!kr(i,o))return!1}else if(i!==o)return!1}for(const r of s)if(!n.includes(r))return!1;return!0}function Im(t){return t!==null&&typeof t=="object"}function ca(t){const e=[];for(const[n,s]of Object.entries(t))Array.isArray(s)?s.forEach(r=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function mo(t){const e={};return t.replace(/^\?/,"").split("&").forEach(s=>{if(s){const[r,i]=s.split("=");e[decodeURIComponent(r)]=decodeURIComponent(i)}}),e}function go(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function QC(t,e){const n=new YC(t,e);return n.subscribe.bind(n)}class YC{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,s){let r;if(e===void 0&&n===void 0&&s===void 0)throw new Error("Missing Observer.");JC(e,["next","error","complete"])?r=e:r={next:e,error:n,complete:s},r.next===void 0&&(r.next=Eu),r.error===void 0&&(r.error=Eu),r.complete===void 0&&(r.complete=Eu);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function JC(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Eu(){}function yt(t){return t&&t._delegate?t._delegate:t}class Nr{constructor(e,n,s){this.name=e,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const yr="[DEFAULT]";class XC{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const s=new DC;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:n});r&&s.resolve(r)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e?.identifier),s=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(r){if(s)return null;throw r}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(eP(e))try{this.getOrInitializeService({instanceIdentifier:yr})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:r});s.resolve(i)}catch{}}}}clearInstance(e=yr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=yr){return this.instances.has(e)}getOptions(e=yr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[i,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);s===a&&o.resolve(r)}return r}onInit(e,n){const s=this.normalizeInstanceIdentifier(n),r=this.onInitCallbacks.get(s)??new Set;r.add(e),this.onInitCallbacks.set(s,r);const i=this.instances.get(s);return i&&e(i,s),()=>{r.delete(e)}}invokeOnInitCallbacks(e,n){const s=this.onInitCallbacks.get(n);if(s)for(const r of s)try{r(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:ZC(e),options:n}),this.instances.set(e,s),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=yr){return this.component?this.component.multipleInstances?e:yr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function ZC(t){return t===yr?void 0:t}function eP(t){return t.instantiationMode==="EAGER"}class tP{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new XC(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}var Ve;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Ve||(Ve={}));const nP={debug:Ve.DEBUG,verbose:Ve.VERBOSE,info:Ve.INFO,warn:Ve.WARN,error:Ve.ERROR,silent:Ve.SILENT},sP=Ve.INFO,rP={[Ve.DEBUG]:"log",[Ve.VERBOSE]:"log",[Ve.INFO]:"info",[Ve.WARN]:"warn",[Ve.ERROR]:"error"},iP=(t,e,...n)=>{if(e<t.logLevel)return;const s=new Date().toISOString(),r=rP[e];if(r)console[r](`[${s}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class yf{constructor(e){this.name=e,this._logLevel=sP,this._logHandler=iP,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ve))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?nP[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ve.DEBUG,...e),this._logHandler(this,Ve.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ve.VERBOSE,...e),this._logHandler(this,Ve.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ve.INFO,...e),this._logHandler(this,Ve.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ve.WARN,...e),this._logHandler(this,Ve.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ve.ERROR,...e),this._logHandler(this,Ve.ERROR,...e)}}const oP=(t,e)=>e.some(n=>t instanceof n);let Am,Rm;function aP(){return Am||(Am=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function cP(){return Rm||(Rm=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const kv=new WeakMap,uh=new WeakMap,Nv=new WeakMap,Tu=new WeakMap,vf=new WeakMap;function lP(t){const e=new Promise((n,s)=>{const r=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(Hs(t.result)),r()},o=()=>{s(t.error),r()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&kv.set(n,t)}).catch(()=>{}),vf.set(e,t),e}function uP(t){if(uh.has(t))return;const e=new Promise((n,s)=>{const r=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),r()},o=()=>{s(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});uh.set(t,e)}let hh={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return uh.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Nv.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Hs(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function hP(t){hh=t(hh)}function fP(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const s=t.call(wu(this),e,...n);return Nv.set(s,e.sort?e.sort():[e]),Hs(s)}:cP().includes(t)?function(...e){return t.apply(wu(this),e),Hs(kv.get(this))}:function(...e){return Hs(t.apply(wu(this),e))}}function dP(t){return typeof t=="function"?fP(t):(t instanceof IDBTransaction&&uP(t),oP(t,aP())?new Proxy(t,hh):t)}function Hs(t){if(t instanceof IDBRequest)return lP(t);if(Tu.has(t))return Tu.get(t);const e=dP(t);return e!==t&&(Tu.set(t,e),vf.set(e,t)),e}const wu=t=>vf.get(t);function pP(t,e,{blocked:n,upgrade:s,blocking:r,terminated:i}={}){const o=indexedDB.open(t,e),a=Hs(o);return s&&o.addEventListener("upgradeneeded",l=>{s(Hs(o.result),l.oldVersion,l.newVersion,Hs(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{i&&l.addEventListener("close",()=>i()),r&&l.addEventListener("versionchange",u=>r(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}const mP=["get","getKey","getAll","getAllKeys","count"],gP=["put","add","delete","clear"],bu=new Map;function Sm(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(bu.get(e))return bu.get(e);const n=e.replace(/FromIndex$/,""),s=e!==n,r=gP.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(r||mP.includes(n)))return;const i=async function(o,...a){const l=this.transaction(o,r?"readwrite":"readonly");let u=l.store;return s&&(u=u.index(a.shift())),(await Promise.all([u[n](...a),r&&l.done]))[0]};return bu.set(e,i),i}hP(t=>({...t,get:(e,n,s)=>Sm(e,n)||t.get(e,n,s),has:(e,n)=>!!Sm(e,n)||t.has(e,n)}));class _P{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(yP(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function yP(t){return t.getComponent()?.type==="VERSION"}const fh="@firebase/app",Cm="0.14.6";const us=new yf("@firebase/app"),vP="@firebase/app-compat",EP="@firebase/analytics-compat",TP="@firebase/analytics",wP="@firebase/app-check-compat",bP="@firebase/app-check",IP="@firebase/auth",AP="@firebase/auth-compat",RP="@firebase/database",SP="@firebase/data-connect",CP="@firebase/database-compat",PP="@firebase/functions",kP="@firebase/functions-compat",NP="@firebase/installations",DP="@firebase/installations-compat",OP="@firebase/messaging",VP="@firebase/messaging-compat",LP="@firebase/performance",MP="@firebase/performance-compat",xP="@firebase/remote-config",FP="@firebase/remote-config-compat",UP="@firebase/storage",BP="@firebase/storage-compat",$P="@firebase/firestore",HP="@firebase/ai",jP="@firebase/firestore-compat",qP="firebase",WP="12.6.0";const dh="[DEFAULT]",GP={[fh]:"fire-core",[vP]:"fire-core-compat",[TP]:"fire-analytics",[EP]:"fire-analytics-compat",[bP]:"fire-app-check",[wP]:"fire-app-check-compat",[IP]:"fire-auth",[AP]:"fire-auth-compat",[RP]:"fire-rtdb",[SP]:"fire-data-connect",[CP]:"fire-rtdb-compat",[PP]:"fire-fn",[kP]:"fire-fn-compat",[NP]:"fire-iid",[DP]:"fire-iid-compat",[OP]:"fire-fcm",[VP]:"fire-fcm-compat",[LP]:"fire-perf",[MP]:"fire-perf-compat",[xP]:"fire-rc",[FP]:"fire-rc-compat",[UP]:"fire-gcs",[BP]:"fire-gcs-compat",[$P]:"fire-fst",[jP]:"fire-fst-compat",[HP]:"fire-vertex","fire-js":"fire-js",[qP]:"fire-js-all"};const jo=new Map,zP=new Map,ph=new Map;function Pm(t,e){try{t.container.addComponent(e)}catch(n){us.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Ii(t){const e=t.name;if(ph.has(e))return us.debug(`There were multiple attempts to register component ${e}.`),!1;ph.set(e,t);for(const n of jo.values())Pm(n,t);for(const n of zP.values())Pm(n,t);return!0}function Ef(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function hn(t){return t==null?!1:t.settings!==void 0}const KP={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},js=new aa("app","Firebase",KP);class QP{constructor(e,n,s){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new Nr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw js.create("app-deleted",{appName:this._name})}}const Fi=WP;function Dv(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const s={name:dh,automaticDataCollectionEnabled:!0,...e},r=s.name;if(typeof r!="string"||!r)throw js.create("bad-app-name",{appName:String(r)});if(n||(n=Rv()),!n)throw js.create("no-options");const i=jo.get(r);if(i){if(kr(n,i.options)&&kr(s,i.config))return i;throw js.create("duplicate-app",{appName:r})}const o=new tP(r);for(const l of ph.values())o.addComponent(l);const a=new QP(n,s,o);return jo.set(r,a),a}function Ov(t=dh){const e=jo.get(t);if(!e&&t===dh&&Rv())return Dv();if(!e)throw js.create("no-app",{appName:t});return e}function km(){return Array.from(jo.values())}function qs(t,e,n){let s=GP[t]??t;n&&(s+=`-${n}`);const r=s.match(/\s|\//),i=e.match(/\s|\//);if(r||i){const o=[`Unable to register library "${s}" with version "${e}":`];r&&o.push(`library name "${s}" contains illegal characters (whitespace or "/")`),r&&i&&o.push("and"),i&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),us.warn(o.join(" "));return}Ii(new Nr(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}const YP="firebase-heartbeat-database",JP=1,qo="firebase-heartbeat-store";let Iu=null;function Vv(){return Iu||(Iu=pP(YP,JP,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(qo)}catch(n){console.warn(n)}}}}).catch(t=>{throw js.create("idb-open",{originalErrorMessage:t.message})})),Iu}async function XP(t){try{const n=(await Vv()).transaction(qo),s=await n.objectStore(qo).get(Lv(t));return await n.done,s}catch(e){if(e instanceof ms)us.warn(e.message);else{const n=js.create("idb-get",{originalErrorMessage:e?.message});us.warn(n.message)}}}async function Nm(t,e){try{const s=(await Vv()).transaction(qo,"readwrite");await s.objectStore(qo).put(e,Lv(t)),await s.done}catch(n){if(n instanceof ms)us.warn(n.message);else{const s=js.create("idb-set",{originalErrorMessage:n?.message});us.warn(s.message)}}}function Lv(t){return`${t.name}!${t.options.appId}`}const ZP=1024,ek=30;class tk{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new sk(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=Dm();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(r=>r.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:n}),this._heartbeatsCache.heartbeats.length>ek){const r=rk(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(r,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){us.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=Dm(),{heartbeatsToSend:n,unsentEntries:s}=nk(this._heartbeatsCache.heartbeats),r=Nc(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}catch(e){return us.warn(e),""}}}function Dm(){return new Date().toISOString().substring(0,10)}function nk(t,e=ZP){const n=[];let s=t.slice();for(const r of t){const i=n.find(o=>o.agent===r.agent);if(i){if(i.dates.push(r.date),Om(n)>e){i.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),Om(n)>e){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class sk{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return jC()?qC().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await XP(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return Nm(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return Nm(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function Om(t){return Nc(JSON.stringify({version:2,heartbeats:t})).length}function rk(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let s=1;s<t.length;s++)t[s].date<n&&(n=t[s].date,e=s);return e}function ik(t){Ii(new Nr("platform-logger",e=>new _P(e),"PRIVATE")),Ii(new Nr("heartbeat",e=>new tk(e),"PRIVATE")),qs(fh,Cm,t),qs(fh,Cm,"esm2020"),qs("fire-js","")}ik("");function Mv(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const ok=Mv,xv=new aa("auth","Firebase",Mv());const Dc=new yf("@firebase/auth");function ak(t,...e){Dc.logLevel<=Ve.WARN&&Dc.warn(`Auth (${Fi}): ${t}`,...e)}function nc(t,...e){Dc.logLevel<=Ve.ERROR&&Dc.error(`Auth (${Fi}): ${t}`,...e)}function An(t,...e){throw Tf(t,...e)}function xn(t,...e){return Tf(t,...e)}function Fv(t,e,n){const s={...ok(),[e]:n};return new aa("auth","Firebase",s).create(e,{appName:t.name})}function rs(t){return Fv(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Tf(t,...e){if(typeof t!="string"){const n=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=t.name),t._errorFactory.create(n,...s)}return xv.create(t,...e)}function Ie(t,e,...n){if(!t)throw Tf(e,...n)}function Zn(t){const e="INTERNAL ASSERTION FAILED: "+t;throw nc(e),new Error(e)}function hs(t,e){t||Zn(e)}function mh(){return typeof self<"u"&&self.location?.href||""}function ck(){return Vm()==="http:"||Vm()==="https:"}function Vm(){return typeof self<"u"&&self.location?.protocol||null}function lk(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(ck()||UC()||"connection"in navigator)?navigator.onLine:!0}function uk(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}class la{constructor(e,n){this.shortDelay=e,this.longDelay=n,hs(n>e,"Short delay should be less than long delay!"),this.isMobile=MC()||BC()}get(){return lk()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function wf(t,e){hs(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}class Uv{static initialize(e,n,s){this.fetchImpl=e,n&&(this.headersImpl=n),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Zn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Zn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Zn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const hk={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const fk=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],dk=new la(3e4,6e4);function gs(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function qn(t,e,n,s,r={}){return Bv(t,r,async()=>{let i={},o={};s&&(e==="GET"?o=s:i={body:JSON.stringify(s)});const a=ca({key:t.config.apiKey,...o}).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const u={method:e,headers:l,...i};return FC()||(u.referrerPolicy="no-referrer"),t.emulatorConfig&&xi(t.emulatorConfig.host)&&(u.credentials="include"),Uv.fetch()(await $v(t,t.config.apiHost,n,a),u)})}async function Bv(t,e,n){t._canInitEmulator=!1;const s={...hk,...e};try{const r=new mk(t),i=await Promise.race([n(),r.promise]);r.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw ja(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const a=i.ok?o.errorMessage:o.error.message,[l,u]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw ja(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw ja(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw ja(t,"user-disabled",o);const h=s[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw Fv(t,h,u);An(t,h)}}catch(r){if(r instanceof ms)throw r;An(t,"network-request-failed",{message:String(r)})}}async function ua(t,e,n,s,r={}){const i=await qn(t,e,n,s,r);return"mfaPendingCredential"in i&&An(t,"multi-factor-auth-required",{_serverResponse:i}),i}async function $v(t,e,n,s){const r=`${e}${n}?${s}`,i=t,o=i.config.emulator?wf(t.config,r):`${t.config.apiScheme}://${r}`;return fk.includes(n)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(o).toString():o}function pk(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class mk{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,s)=>{this.timer=setTimeout(()=>s(xn(this.auth,"network-request-failed")),dk.get())})}}function ja(t,e,n){const s={appName:t.name};n.email&&(s.email=n.email),n.phoneNumber&&(s.phoneNumber=n.phoneNumber);const r=xn(t,e,s);return r.customData._tokenResponse=n,r}function Lm(t){return t!==void 0&&t.enterprise!==void 0}class gk{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return pk(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function _k(t,e){return qn(t,"GET","/v2/recaptchaConfig",gs(t,e))}async function yk(t,e){return qn(t,"POST","/v1/accounts:delete",e)}async function Oc(t,e){return qn(t,"POST","/v1/accounts:lookup",e)}function Co(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function vk(t,e=!1){const n=yt(t),s=await n.getIdToken(e),r=bf(s);Ie(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");const i=typeof r.firebase=="object"?r.firebase:void 0,o=i?.sign_in_provider;return{claims:r,token:s,authTime:Co(Au(r.auth_time)),issuedAtTime:Co(Au(r.iat)),expirationTime:Co(Au(r.exp)),signInProvider:o||null,signInSecondFactor:i?.sign_in_second_factor||null}}function Au(t){return Number(t)*1e3}function bf(t){const[e,n,s]=t.split(".");if(e===void 0||n===void 0||s===void 0)return nc("JWT malformed, contained fewer than 3 sections"),null;try{const r=Iv(n);return r?JSON.parse(r):(nc("Failed to decode base64 JWT payload"),null)}catch(r){return nc("Caught error parsing JWT payload as JSON",r?.toString()),null}}function Mm(t){const e=bf(t);return Ie(e,"internal-error"),Ie(typeof e.exp<"u","internal-error"),Ie(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function Ai(t,e,n=!1){if(n)return e;try{return await e}catch(s){throw s instanceof ms&&Ek(s)&&t.auth.currentUser===t&&await t.auth.signOut(),s}}function Ek({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}class Tk{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const s=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class gh{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Co(this.lastLoginAt),this.creationTime=Co(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Vc(t){const e=t.auth,n=await t.getIdToken(),s=await Ai(t,Oc(e,{idToken:n}));Ie(s?.users.length,e,"internal-error");const r=s.users[0];t._notifyReloadListener(r);const i=r.providerUserInfo?.length?Hv(r.providerUserInfo):[],o=bk(t.providerData,i),a=t.isAnonymous,l=!(t.email&&r.passwordHash)&&!o?.length,u=a?l:!1,h={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:o,metadata:new gh(r.createdAt,r.lastLoginAt),isAnonymous:u};Object.assign(t,h)}async function wk(t){const e=yt(t);await Vc(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function bk(t,e){return[...t.filter(s=>!e.some(r=>r.providerId===s.providerId)),...e]}function Hv(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}async function Ik(t,e){const n=await Bv(t,{},async()=>{const s=ca({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:i}=t.config,o=await $v(t,r,"/v1/token",`key=${i}`),a=await t._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";const l={method:"POST",headers:a,body:s};return t.emulatorConfig&&xi(t.emulatorConfig.host)&&(l.credentials="include"),Uv.fetch()(o,l)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function Ak(t,e){return qn(t,"POST","/v2/accounts:revokeToken",gs(t,e))}class di{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ie(e.idToken,"internal-error"),Ie(typeof e.idToken<"u","internal-error"),Ie(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Mm(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Ie(e.length!==0,"internal-error");const n=Mm(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Ie(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:s,refreshToken:r,expiresIn:i}=await Ik(e,n);this.updateTokensAndExpiration(s,r,Number(i))}updateTokensAndExpiration(e,n,s){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,n){const{refreshToken:s,accessToken:r,expirationTime:i}=n,o=new di;return s&&(Ie(typeof s=="string","internal-error",{appName:e}),o.refreshToken=s),r&&(Ie(typeof r=="string","internal-error",{appName:e}),o.accessToken=r),i&&(Ie(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new di,this.toJSON())}_performRefresh(){return Zn("not implemented")}}function As(t,e){Ie(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class gn{constructor({uid:e,auth:n,stsTokenManager:s,...r}){this.providerId="firebase",this.proactiveRefresh=new Tk(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.providerData=r.providerData?[...r.providerData]:[],this.metadata=new gh(r.createdAt||void 0,r.lastLoginAt||void 0)}async getIdToken(e){const n=await Ai(this,this.stsTokenManager.getToken(this.auth,e));return Ie(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return vk(this,e)}reload(){return wk(this)}_assign(e){this!==e&&(Ie(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new gn({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){Ie(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),n&&await Vc(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(hn(this.auth.app))return Promise.reject(rs(this.auth));const e=await this.getIdToken();return await Ai(this,yk(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const s=n.displayName??void 0,r=n.email??void 0,i=n.phoneNumber??void 0,o=n.photoURL??void 0,a=n.tenantId??void 0,l=n._redirectEventId??void 0,u=n.createdAt??void 0,h=n.lastLoginAt??void 0,{uid:f,emailVerified:p,isAnonymous:g,providerData:A,stsTokenManager:v}=n;Ie(f&&v,e,"internal-error");const D=di.fromJSON(this.name,v);Ie(typeof f=="string",e,"internal-error"),As(s,e.name),As(r,e.name),Ie(typeof p=="boolean",e,"internal-error"),Ie(typeof g=="boolean",e,"internal-error"),As(i,e.name),As(o,e.name),As(a,e.name),As(l,e.name),As(u,e.name),As(h,e.name);const V=new gn({uid:f,auth:e,email:r,emailVerified:p,displayName:s,isAnonymous:g,photoURL:o,phoneNumber:i,tenantId:a,stsTokenManager:D,createdAt:u,lastLoginAt:h});return A&&Array.isArray(A)&&(V.providerData=A.map(N=>({...N}))),l&&(V._redirectEventId=l),V}static async _fromIdTokenResponse(e,n,s=!1){const r=new di;r.updateFromServerResponse(n);const i=new gn({uid:n.localId,auth:e,stsTokenManager:r,isAnonymous:s});return await Vc(i),i}static async _fromGetAccountInfoResponse(e,n,s){const r=n.users[0];Ie(r.localId!==void 0,"internal-error");const i=r.providerUserInfo!==void 0?Hv(r.providerUserInfo):[],o=!(r.email&&r.passwordHash)&&!i?.length,a=new di;a.updateFromIdToken(s);const l=new gn({uid:r.localId,auth:e,stsTokenManager:a,isAnonymous:o}),u={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:i,metadata:new gh(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!i?.length};return Object.assign(l,u),l}}const xm=new Map;function es(t){hs(t instanceof Function,"Expected a class definition");let e=xm.get(t);return e?(hs(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,xm.set(t,e),e)}class jv{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}jv.type="NONE";const Fm=jv;function sc(t,e,n){return`firebase:${t}:${e}:${n}`}class pi{constructor(e,n,s){this.persistence=e,this.auth=n,this.userKey=s;const{config:r,name:i}=this.auth;this.fullUserKey=sc(this.userKey,r.apiKey,i),this.fullPersistenceKey=sc("persistence",r.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Oc(this.auth,{idToken:e}).catch(()=>{});return n?gn._fromGetAccountInfoResponse(this.auth,n,e):null}return gn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,s="authUser"){if(!n.length)return new pi(es(Fm),e,s);const r=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let i=r[0]||es(Fm);const o=sc(s,e.config.apiKey,e.name);let a=null;for(const u of n)try{const h=await u._get(o);if(h){let f;if(typeof h=="string"){const p=await Oc(e,{idToken:h}).catch(()=>{});if(!p)break;f=await gn._fromGetAccountInfoResponse(e,p,h)}else f=gn._fromJSON(e,h);u!==i&&(a=f),i=u;break}}catch{}const l=r.filter(u=>u._shouldAllowMigration);return!i._shouldAllowMigration||!l.length?new pi(i,e,s):(i=l[0],a&&await i._set(o,a.toJSON()),await Promise.all(n.map(async u=>{if(u!==i)try{await u._remove(o)}catch{}})),new pi(i,e,s))}}function Um(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(zv(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(qv(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Qv(e))return"Blackberry";if(Yv(e))return"Webos";if(Wv(e))return"Safari";if((e.includes("chrome/")||Gv(e))&&!e.includes("edge/"))return"Chrome";if(Kv(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=t.match(n);if(s?.length===2)return s[1]}return"Other"}function qv(t=$t()){return/firefox\//i.test(t)}function Wv(t=$t()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Gv(t=$t()){return/crios\//i.test(t)}function zv(t=$t()){return/iemobile/i.test(t)}function Kv(t=$t()){return/android/i.test(t)}function Qv(t=$t()){return/blackberry/i.test(t)}function Yv(t=$t()){return/webos/i.test(t)}function If(t=$t()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function Rk(t=$t()){return If(t)&&!!window.navigator?.standalone}function Sk(){return $C()&&document.documentMode===10}function Jv(t=$t()){return If(t)||Kv(t)||Yv(t)||Qv(t)||/windows phone/i.test(t)||zv(t)}function Xv(t,e=[]){let n;switch(t){case"Browser":n=Um($t());break;case"Worker":n=`${Um($t())}-${t}`;break;default:n=t}const s=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Fi}/${s}`}class Ck{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const s=i=>new Promise((o,a)=>{try{const l=e(i);o(l)}catch(l){a(l)}});s.onAbort=n,this.queue.push(s);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const s of this.queue)await s(e),s.onAbort&&n.push(s.onAbort)}catch(s){n.reverse();for(const r of n)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s?.message})}}}async function Pk(t,e={}){return qn(t,"GET","/v2/passwordPolicy",gs(t,e))}const kk=6;class Nk{constructor(e){const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??kk,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const s=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;s&&(n.meetsMinPasswordLength=e.length>=s),r&&(n.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let s;for(let r=0;r<e.length;r++)s=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(n,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,n,s,r,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}class Dk{constructor(e,n,s,r){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=s,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Bm(this),this.idTokenSubscription=new Bm(this),this.beforeStateQueue=new Ck(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=xv,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=es(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await pi.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Oc(this,{idToken:e}),s=await gn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(s)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(hn(this.app)){const i=this.app.settings.authIdToken;return i?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(i).then(o,o))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let s=n,r=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const i=this.redirectUser?._redirectEventId,o=s?._redirectEventId,a=await this.tryRedirectSignIn(e);(!i||i===o)&&a?.user&&(s=a.user,r=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(s)}catch(i){s=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(i))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Ie(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Vc(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=uk()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(hn(this.app))return Promise.reject(rs(this));const n=e?yt(e):null;return n&&Ie(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Ie(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return hn(this.app)?Promise.reject(rs(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return hn(this.app)?Promise.reject(rs(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(es(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await Pk(this),n=new Nk(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new aa("auth","Firebase",e())}onAuthStateChanged(e,n,s){return this.registerStateListener(this.authStateSubscription,e,n,s)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,s){return this.registerStateListener(this.idTokenSubscription,e,n,s)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(s.tenantId=this.tenantId),await Ak(this,s)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,n){const s=await this.getOrInitRedirectPersistenceManager(n);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&es(e)||this._popupRedirectResolver;Ie(n,this,"argument-error"),this.redirectPersistenceManager=await pi.create(this,[es(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,s,r){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ie(a,this,"internal-error"),a.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,s,r);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ie(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Xv(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(e["X-Firebase-Client"]=n);const s=await this._getAppCheckToken();return s&&(e["X-Firebase-AppCheck"]=s),e}async _getAppCheckToken(){if(hn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&ak(`Error while retrieving App Check token: ${e.error}`),e?.token}}function Br(t){return yt(t)}class Bm{constructor(e){this.auth=e,this.observer=null,this.addObserver=QC(n=>this.observer=n)}get next(){return Ie(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let pl={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Ok(t){pl=t}function Zv(t){return pl.loadJS(t)}function Vk(){return pl.recaptchaEnterpriseScript}function Lk(){return pl.gapiScript}function Mk(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class xk{constructor(){this.enterprise=new Fk}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class Fk{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const Uk="recaptcha-enterprise",eE="NO_RECAPTCHA";class Bk{constructor(e){this.type=Uk,this.auth=Br(e)}async verify(e="verify",n=!1){async function s(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(o,a)=>{_k(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const u=new gk(l);return i.tenantId==null?i._agentRecaptchaConfig=u:i._tenantRecaptchaConfigs[i.tenantId]=u,o(u.siteKey)}}).catch(l=>{a(l)})})}function r(i,o,a){const l=window.grecaptcha;Lm(l)?l.enterprise.ready(()=>{l.enterprise.execute(i,{action:e}).then(u=>{o(u)}).catch(()=>{o(eE)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new xk().execute("siteKey",{action:"verify"}):new Promise((i,o)=>{s(this.auth).then(a=>{if(!n&&Lm(window.grecaptcha))r(a,i,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=Vk();l.length!==0&&(l+=a),Zv(l).then(()=>{r(a,i,o)}).catch(u=>{o(u)})}}).catch(a=>{o(a)})})}}async function $m(t,e,n,s=!1,r=!1){const i=new Bk(t);let o;if(r)o=eE;else try{o=await i.verify(n)}catch{o=await i.verify(n,!0)}const a={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in a){const l=a.phoneEnrollmentInfo.phoneNumber,u=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:l,recaptchaToken:u,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){const l=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:l,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return s?Object.assign(a,{captchaResp:o}):Object.assign(a,{captchaResponse:o}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function _h(t,e,n,s,r){if(t._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await $m(t,e,n,n==="getOobCode");return s(t,i)}else return s(t,e).catch(async i=>{if(i.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await $m(t,e,n,n==="getOobCode");return s(t,o)}else return Promise.reject(i)})}function $k(t,e){const n=Ef(t,"auth");if(n.isInitialized()){const r=n.getImmediate(),i=n.getOptions();if(kr(i,e??{}))return r;An(r,"already-initialized")}return n.initialize({options:e})}function Hk(t,e){const n=e?.persistence||[],s=(Array.isArray(n)?n:[n]).map(es);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(s,e?.popupRedirectResolver)}function jk(t,e,n){const s=Br(t);Ie(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const r=!1,i=tE(e),{host:o,port:a}=qk(e),l=a===null?"":`:${a}`,u={url:`${i}//${o}${l}/`},h=Object.freeze({host:o,port:a,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:r})});if(!s._canInitEmulator){Ie(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),Ie(kr(u,s.config.emulator)&&kr(h,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=u,s.emulatorConfig=h,s.settings.appVerificationDisabledForTesting=!0,xi(o)?(Cv(`${i}//${o}${l}`),Pv("Auth",!0)):Wk()}function tE(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function qk(t){const e=tE(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const s=n[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(s);if(r){const i=r[1];return{host:i,port:Hm(s.substr(i.length+1))}}else{const[i,o]=s.split(":");return{host:i,port:Hm(o)}}}function Hm(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function Wk(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}class Af{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Zn("not implemented")}_getIdTokenResponse(e){return Zn("not implemented")}_linkToIdToken(e,n){return Zn("not implemented")}_getReauthenticationResolver(e){return Zn("not implemented")}}async function Gk(t,e){return qn(t,"POST","/v1/accounts:signUp",e)}async function zk(t,e){return ua(t,"POST","/v1/accounts:signInWithPassword",gs(t,e))}async function Kk(t,e){return qn(t,"POST","/v1/accounts:sendOobCode",gs(t,e))}async function Qk(t,e){return Kk(t,e)}async function Yk(t,e){return ua(t,"POST","/v1/accounts:signInWithEmailLink",gs(t,e))}async function Jk(t,e){return ua(t,"POST","/v1/accounts:signInWithEmailLink",gs(t,e))}class Wo extends Af{constructor(e,n,s,r=null){super("password",s),this._email=e,this._password=n,this._tenantId=r}static _fromEmailAndPassword(e,n){return new Wo(e,n,"password")}static _fromEmailAndCode(e,n,s=null){return new Wo(e,n,"emailLink",s)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return _h(e,n,"signInWithPassword",zk);case"emailLink":return Yk(e,{email:this._email,oobCode:this._password});default:An(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const s={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return _h(e,s,"signUpPassword",Gk);case"emailLink":return Jk(e,{idToken:n,email:this._email,oobCode:this._password});default:An(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function mi(t,e){return ua(t,"POST","/v1/accounts:signInWithIdp",gs(t,e))}const Xk="http://localhost";class Dr extends Af{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Dr(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):An("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:r,...i}=n;if(!s||!r)return null;const o=new Dr(s,r);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return mi(e,n)}_linkToIdToken(e,n){const s=this.buildRequest();return s.idToken=n,mi(e,s)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,mi(e,n)}buildRequest(){const e={requestUri:Xk,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=ca(n)}return e}}function Zk(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function e1(t){const e=mo(go(t)).link,n=e?mo(go(e)).deep_link_id:null,s=mo(go(t)).deep_link_id;return(s?mo(go(s)).link:null)||s||n||e||t}class Rf{constructor(e){const n=mo(go(e)),s=n.apiKey??null,r=n.oobCode??null,i=Zk(n.mode??null);Ie(s&&r&&i,"argument-error"),this.apiKey=s,this.operation=i,this.code=r,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=e1(e);try{return new Rf(n)}catch{return null}}}class Ui{constructor(){this.providerId=Ui.PROVIDER_ID}static credential(e,n){return Wo._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const s=Rf.parseLink(n);return Ie(s,"argument-error"),Wo._fromEmailAndCode(e,s.code,s.tenantId)}}Ui.PROVIDER_ID="password";Ui.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Ui.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class nE{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class ha extends nE{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Os extends ha{constructor(){super("facebook.com")}static credential(e){return Dr._fromParams({providerId:Os.PROVIDER_ID,signInMethod:Os.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Os.credentialFromTaggedObject(e)}static credentialFromError(e){return Os.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Os.credential(e.oauthAccessToken)}catch{return null}}}Os.FACEBOOK_SIGN_IN_METHOD="facebook.com";Os.PROVIDER_ID="facebook.com";class Vs extends ha{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Dr._fromParams({providerId:Vs.PROVIDER_ID,signInMethod:Vs.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Vs.credentialFromTaggedObject(e)}static credentialFromError(e){return Vs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:s}=e;if(!n&&!s)return null;try{return Vs.credential(n,s)}catch{return null}}}Vs.GOOGLE_SIGN_IN_METHOD="google.com";Vs.PROVIDER_ID="google.com";class Ls extends ha{constructor(){super("github.com")}static credential(e){return Dr._fromParams({providerId:Ls.PROVIDER_ID,signInMethod:Ls.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ls.credentialFromTaggedObject(e)}static credentialFromError(e){return Ls.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ls.credential(e.oauthAccessToken)}catch{return null}}}Ls.GITHUB_SIGN_IN_METHOD="github.com";Ls.PROVIDER_ID="github.com";class Ms extends ha{constructor(){super("twitter.com")}static credential(e,n){return Dr._fromParams({providerId:Ms.PROVIDER_ID,signInMethod:Ms.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Ms.credentialFromTaggedObject(e)}static credentialFromError(e){return Ms.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:s}=e;if(!n||!s)return null;try{return Ms.credential(n,s)}catch{return null}}}Ms.TWITTER_SIGN_IN_METHOD="twitter.com";Ms.PROVIDER_ID="twitter.com";async function t1(t,e){return ua(t,"POST","/v1/accounts:signUp",gs(t,e))}class Or{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,s,r=!1){const i=await gn._fromIdTokenResponse(e,s,r),o=jm(s);return new Or({user:i,providerId:o,_tokenResponse:s,operationType:n})}static async _forOperation(e,n,s){await e._updateTokensIfNecessary(s,!0);const r=jm(s);return new Or({user:e,providerId:r,_tokenResponse:s,operationType:n})}}function jm(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}class Lc extends ms{constructor(e,n,s,r){super(n.code,n.message),this.operationType=s,this.user=r,Object.setPrototypeOf(this,Lc.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,n,s,r){return new Lc(e,n,s,r)}}function sE(t,e,n,s){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?Lc._fromErrorAndOperation(t,i,e,s):i})}async function n1(t,e,n=!1){const s=await Ai(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Or._forOperation(t,"link",s)}async function s1(t,e,n=!1){const{auth:s}=t;if(hn(s.app))return Promise.reject(rs(s));const r="reauthenticate";try{const i=await Ai(t,sE(s,r,e,t),n);Ie(i.idToken,s,"internal-error");const o=bf(i.idToken);Ie(o,s,"internal-error");const{sub:a}=o;return Ie(t.uid===a,s,"user-mismatch"),Or._forOperation(t,r,i)}catch(i){throw i?.code==="auth/user-not-found"&&An(s,"user-mismatch"),i}}async function rE(t,e,n=!1){if(hn(t.app))return Promise.reject(rs(t));const s="signIn",r=await sE(t,s,e),i=await Or._fromIdTokenResponse(t,s,r);return n||await t._updateCurrentUser(i.user),i}async function r1(t,e){return rE(Br(t),e)}async function iE(t){const e=Br(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function i1(t,e,n){if(hn(t.app))return Promise.reject(rs(t));const s=Br(t),o=await _h(s,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",t1).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&iE(t),l}),a=await Or._fromIdTokenResponse(s,"signIn",o);return await s._updateCurrentUser(a.user),a}function o1(t,e,n){return hn(t.app)?Promise.reject(rs(t)):r1(yt(t),Ui.credential(e,n)).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&iE(t),s})}async function qm(t,e){const n=yt(t),r={requestType:"VERIFY_EMAIL",idToken:await t.getIdToken()},{email:i}=await Qk(n.auth,r);i!==t.email&&await t.reload()}async function a1(t,e){return qn(t,"POST","/v1/accounts:update",e)}async function c1(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const s=yt(t),i={idToken:await s.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},o=await Ai(s,a1(s.auth,i));s.displayName=o.displayName||null,s.photoURL=o.photoUrl||null;const a=s.providerData.find(({providerId:l})=>l==="password");a&&(a.displayName=s.displayName,a.photoURL=s.photoURL),await s._updateTokensIfNecessary(o)}function l1(t,e,n,s){return yt(t).onIdTokenChanged(e,n,s)}function u1(t,e,n){return yt(t).beforeAuthStateChanged(e,n)}function h1(t,e,n,s){return yt(t).onAuthStateChanged(e,n,s)}function f1(t){return yt(t).signOut()}const Mc="__sak";class oE{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Mc,"1"),this.storage.removeItem(Mc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const d1=1e3,p1=10;class aE extends oE{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Jv(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const s=this.storage.getItem(n),r=this.localCache[n];s!==r&&e(n,r,s)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const s=e.key;n?this.detachListener():this.stopPolling();const r=()=>{const o=this.storage.getItem(s);!n&&this.localCache[s]===o||this.notifyListeners(s,o)},i=this.storage.getItem(s);Sk()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,p1):r()}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const r of Array.from(s))r(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:s}),!0)})},d1)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}aE.type="LOCAL";const m1=aE;class cE extends oE{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}cE.type="SESSION";const lE=cE;function g1(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}class ml{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(r=>r.isListeningto(e));if(n)return n;const s=new ml(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:s,eventType:r,data:i}=n.data,o=this.handlersMap[r];if(!o?.size)return;n.ports[0].postMessage({status:"ack",eventId:s,eventType:r});const a=Array.from(o).map(async u=>u(n.origin,i)),l=await g1(a);n.ports[0].postMessage({status:"done",eventId:s,eventType:r,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}ml.receivers=[];function Sf(t="",e=10){let n="";for(let s=0;s<e;s++)n+=Math.floor(Math.random()*10);return t+n}class _1{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,s=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,o;return new Promise((a,l)=>{const u=Sf("",20);r.port1.start();const h=setTimeout(()=>{l(new Error("unsupported_event"))},s);o={messageChannel:r,onMessage(f){const p=f;if(p.data.eventId===u)switch(p.data.status){case"ack":clearTimeout(h),i=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),a(p.data.response);break;default:clearTimeout(h),clearTimeout(i),l(new Error("invalid_response"));break}}},this.handlers.add(o),r.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:n},[r.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}function Fn(){return window}function y1(t){Fn().location.href=t}function uE(){return typeof Fn().WorkerGlobalScope<"u"&&typeof Fn().importScripts=="function"}async function v1(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function E1(){return navigator?.serviceWorker?.controller||null}function T1(){return uE()?self:null}const hE="firebaseLocalStorageDb",w1=1,xc="firebaseLocalStorage",fE="fbase_key";class fa{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function gl(t,e){return t.transaction([xc],e?"readwrite":"readonly").objectStore(xc)}function b1(){const t=indexedDB.deleteDatabase(hE);return new fa(t).toPromise()}function yh(){const t=indexedDB.open(hE,w1);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const s=t.result;try{s.createObjectStore(xc,{keyPath:fE})}catch(r){n(r)}}),t.addEventListener("success",async()=>{const s=t.result;s.objectStoreNames.contains(xc)?e(s):(s.close(),await b1(),e(await yh()))})})}async function Wm(t,e,n){const s=gl(t,!0).put({[fE]:e,value:n});return new fa(s).toPromise()}async function I1(t,e){const n=gl(t,!1).get(e),s=await new fa(n).toPromise();return s===void 0?null:s.value}function Gm(t,e){const n=gl(t,!0).delete(e);return new fa(n).toPromise()}const A1=800,R1=3;class dE{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await yh(),this.db)}async _withRetries(e){let n=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(n++>R1)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return uE()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=ml._getInstance(T1()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await v1(),!this.activeServiceWorker)return;this.sender=new _1(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||E1()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await yh();return await Wm(e,Mc,"1"),await Gm(e,Mc),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(s=>Wm(s,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(s=>I1(s,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Gm(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(r=>{const i=gl(r,!1).getAll();return new fa(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],s=new Set;if(e.length!==0)for(const{fbase_key:r,value:i}of e)s.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),n.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!s.has(r)&&(this.notifyListeners(r,null),n.push(r));return n}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const r of Array.from(s))r(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),A1)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}dE.type="LOCAL";const S1=dE;new la(3e4,6e4);function C1(t,e){return e?es(e):(Ie(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}class Cf extends Af{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return mi(e,this._buildIdpRequest())}_linkToIdToken(e,n){return mi(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return mi(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function P1(t){return rE(t.auth,new Cf(t),t.bypassAuthState)}function k1(t){const{auth:e,user:n}=t;return Ie(n,e,"internal-error"),s1(n,new Cf(t),t.bypassAuthState)}async function N1(t){const{auth:e,user:n}=t;return Ie(n,e,"internal-error"),n1(n,new Cf(t),t.bypassAuthState)}class pE{constructor(e,n,s,r,i=!1){this.auth=e,this.resolver=s,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:s,postBody:r,tenantId:i,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:s,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return P1;case"linkViaPopup":case"linkViaRedirect":return N1;case"reauthViaPopup":case"reauthViaRedirect":return k1;default:An(this.auth,"internal-error")}}resolve(e){hs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){hs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const D1=new la(2e3,1e4);class si extends pE{constructor(e,n,s,r,i){super(e,n,r,i),this.provider=s,this.authWindow=null,this.pollId=null,si.currentPopupAction&&si.currentPopupAction.cancel(),si.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ie(e,this.auth,"internal-error"),e}async onExecution(){hs(this.filter.length===1,"Popup operations only handle one event");const e=Sf();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(xn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(xn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,si.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(xn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,D1.get())};e()}}si.currentPopupAction=null;const O1="pendingRedirect",rc=new Map;class V1 extends pE{constructor(e,n,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,s),this.eventId=null}async execute(){let e=rc.get(this.auth._key());if(!e){try{const s=await L1(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(n){e=()=>Promise.reject(n)}rc.set(this.auth._key(),e)}return this.bypassAuthState||rc.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function L1(t,e){const n=F1(e),s=x1(t);if(!await s._isAvailable())return!1;const r=await s._get(n)==="true";return await s._remove(n),r}function M1(t,e){rc.set(t._key(),e)}function x1(t){return es(t._redirectPersistence)}function F1(t){return sc(O1,t.config.apiKey,t.name)}async function U1(t,e,n=!1){if(hn(t.app))return Promise.reject(rs(t));const s=Br(t),r=C1(s,e),o=await new V1(s,r,n).execute();return o&&!n&&(delete o.user._redirectEventId,await s._persistUserIfCurrent(o.user),await s._setRedirectUser(null,e)),o}const B1=600*1e3;class $1{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(n=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!H1(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){if(e.error&&!mE(e)){const s=e.error.code?.split("auth/")[1]||"internal-error";n.onError(xn(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const s=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=B1&&this.cachedEventUids.clear(),this.cachedEventUids.has(zm(e))}saveEventToCache(e){this.cachedEventUids.add(zm(e)),this.lastProcessedEventTime=Date.now()}}function zm(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function mE({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function H1(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return mE(t);default:return!1}}async function j1(t,e={}){return qn(t,"GET","/v1/projects",e)}const q1=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,W1=/^https?/;async function G1(t){if(t.config.emulator)return;const{authorizedDomains:e}=await j1(t);for(const n of e)try{if(z1(n))return}catch{}An(t,"unauthorized-domain")}function z1(t){const e=mh(),{protocol:n,hostname:s}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&s===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===s}if(!W1.test(n))return!1;if(q1.test(t))return s===t;const r=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(s)}const K1=new la(3e4,6e4);function Km(){const t=Fn().___jsl;if(t?.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function Q1(t){return new Promise((e,n)=>{function s(){Km(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Km(),n(xn(t,"network-request-failed"))},timeout:K1.get()})}if(Fn().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(Fn().gapi?.load)s();else{const r=Mk("iframefcb");return Fn()[r]=()=>{gapi.load?s():n(xn(t,"network-request-failed"))},Zv(`${Lk()}?onload=${r}`).catch(i=>n(i))}}).catch(e=>{throw ic=null,e})}let ic=null;function Y1(t){return ic=ic||Q1(t),ic}const J1=new la(5e3,15e3),X1="__/auth/iframe",Z1="emulator/auth/iframe",eN={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},tN=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function nN(t){const e=t.config;Ie(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?wf(e,Z1):`https://${t.config.authDomain}/${X1}`,s={apiKey:e.apiKey,appName:t.name,v:Fi},r=tN.get(t.config.apiHost);r&&(s.eid=r);const i=t._getFrameworks();return i.length&&(s.fw=i.join(",")),`${n}?${ca(s).slice(1)}`}async function sN(t){const e=await Y1(t),n=Fn().gapi;return Ie(n,t,"internal-error"),e.open({where:document.body,url:nN(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:eN,dontclear:!0},s=>new Promise(async(r,i)=>{await s.restyle({setHideOnLeave:!1});const o=xn(t,"network-request-failed"),a=Fn().setTimeout(()=>{i(o)},J1.get());function l(){Fn().clearTimeout(a),r(s)}s.ping(l).then(l,()=>{i(o)})}))}const rN={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},iN=500,oN=600,aN="_blank",cN="http://localhost";class Qm{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function lN(t,e,n,s=iN,r=oN){const i=Math.max((window.screen.availHeight-r)/2,0).toString(),o=Math.max((window.screen.availWidth-s)/2,0).toString();let a="";const l={...rN,width:s.toString(),height:r.toString(),top:i,left:o},u=$t().toLowerCase();n&&(a=Gv(u)?aN:n),qv(u)&&(e=e||cN,l.scrollbars="yes");const h=Object.entries(l).reduce((p,[g,A])=>`${p}${g}=${A},`,"");if(Rk(u)&&a!=="_self")return uN(e||"",a),new Qm(null);const f=window.open(e||"",a,h);Ie(f,t,"popup-blocked");try{f.focus()}catch{}return new Qm(f)}function uN(t,e){const n=document.createElement("a");n.href=t,n.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(s)}const hN="__/auth/handler",fN="emulator/auth/handler",dN=encodeURIComponent("fac");async function Ym(t,e,n,s,r,i){Ie(t.config.authDomain,t,"auth-domain-config-required"),Ie(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:s,v:Fi,eventId:r};if(e instanceof nE){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",KC(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,f]of Object.entries({}))o[h]=f}if(e instanceof ha){const h=e.getScopes().filter(f=>f!=="");h.length>0&&(o.scopes=h.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const h of Object.keys(a))a[h]===void 0&&delete a[h];const l=await t._getAppCheckToken(),u=l?`#${dN}=${encodeURIComponent(l)}`:"";return`${pN(t)}?${ca(a).slice(1)}${u}`}function pN({config:t}){return t.emulator?wf(t,fN):`https://${t.authDomain}/${hN}`}const Ru="webStorageSupport";class mN{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=lE,this._completeRedirectFn=U1,this._overrideRedirectResult=M1}async _openPopup(e,n,s,r){hs(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const i=await Ym(e,n,s,mh(),r);return lN(e,i,Sf())}async _openRedirect(e,n,s,r){await this._originValidation(e);const i=await Ym(e,n,s,mh(),r);return y1(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:r,promise:i}=this.eventManagers[n];return r?Promise.resolve(r):(hs(i,"If manager is not set, promise should be"),i)}const s=this.initAndGetManager(e);return this.eventManagers[n]={promise:s},s.catch(()=>{delete this.eventManagers[n]}),s}async initAndGetManager(e){const n=await sN(e),s=new $1(e);return n.register("authEvent",r=>(Ie(r?.authEvent,e,"invalid-auth-event"),{status:s.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=n,s}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Ru,{type:Ru},r=>{const i=r?.[0]?.[Ru];i!==void 0&&n(!!i),An(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=G1(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return Jv()||Wv()||If()}}const gN=mN;var Jm="@firebase/auth",Xm="1.12.0";class _N{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(s=>{e(s?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Ie(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function yN(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function vN(t){Ii(new Nr("auth",(e,{options:n})=>{const s=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=s.options;Ie(o&&!o.includes(":"),"invalid-api-key",{appName:s.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Xv(t)},u=new Dk(s,r,i,l);return Hk(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,s)=>{e.getProvider("auth-internal").initialize()})),Ii(new Nr("auth-internal",e=>{const n=Br(e.getProvider("auth").getImmediate());return(s=>new _N(s))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),qs(Jm,Xm,yN(t)),qs(Jm,Xm,"esm2020")}const EN=300,TN=Sv("authIdTokenMaxAge")||EN;let Zm=null;const wN=t=>async e=>{const n=e&&await e.getIdTokenResult(),s=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(s&&s>TN)return;const r=n?.token;Zm!==r&&(Zm=r,await fetch(t,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))};function bN(t=Ov()){const e=Ef(t,"auth");if(e.isInitialized())return e.getImmediate();const n=$k(t,{popupRedirectResolver:gN,persistence:[S1,m1,lE]}),s=Sv("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(s,location.origin);if(location.origin===i.origin){const o=wN(i.toString());u1(n,o,()=>o(n.currentUser)),l1(n,a=>o(a))}}const r=Av("auth");return r&&jk(n,`http://${r}`),n}function IN(){return document.getElementsByTagName("head")?.[0]??document}Ok({loadJS(t){return new Promise((e,n)=>{const s=document.createElement("script");s.setAttribute("src",t),s.onload=e,s.onerror=r=>{const i=xn("internal-error");i.customData=r,n(i)},s.type="text/javascript",s.charset="UTF-8",IN().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});vN("Browser");var eg=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var Ws,gE;(function(){var t;function e(E,I){function y(){}y.prototype=I.prototype,E.F=I.prototype,E.prototype=new y,E.prototype.constructor=E,E.D=function(C,P,S){for(var w=Array(arguments.length-2),he=2;he<arguments.length;he++)w[he-2]=arguments[he];return I.prototype[P].apply(C,w)}}function n(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(s,n),s.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(E,I,y){y||(y=0);const C=Array(16);if(typeof I=="string")for(var P=0;P<16;++P)C[P]=I.charCodeAt(y++)|I.charCodeAt(y++)<<8|I.charCodeAt(y++)<<16|I.charCodeAt(y++)<<24;else for(P=0;P<16;++P)C[P]=I[y++]|I[y++]<<8|I[y++]<<16|I[y++]<<24;I=E.g[0],y=E.g[1],P=E.g[2];let S=E.g[3],w;w=I+(S^y&(P^S))+C[0]+3614090360&4294967295,I=y+(w<<7&4294967295|w>>>25),w=S+(P^I&(y^P))+C[1]+3905402710&4294967295,S=I+(w<<12&4294967295|w>>>20),w=P+(y^S&(I^y))+C[2]+606105819&4294967295,P=S+(w<<17&4294967295|w>>>15),w=y+(I^P&(S^I))+C[3]+3250441966&4294967295,y=P+(w<<22&4294967295|w>>>10),w=I+(S^y&(P^S))+C[4]+4118548399&4294967295,I=y+(w<<7&4294967295|w>>>25),w=S+(P^I&(y^P))+C[5]+1200080426&4294967295,S=I+(w<<12&4294967295|w>>>20),w=P+(y^S&(I^y))+C[6]+2821735955&4294967295,P=S+(w<<17&4294967295|w>>>15),w=y+(I^P&(S^I))+C[7]+4249261313&4294967295,y=P+(w<<22&4294967295|w>>>10),w=I+(S^y&(P^S))+C[8]+1770035416&4294967295,I=y+(w<<7&4294967295|w>>>25),w=S+(P^I&(y^P))+C[9]+2336552879&4294967295,S=I+(w<<12&4294967295|w>>>20),w=P+(y^S&(I^y))+C[10]+4294925233&4294967295,P=S+(w<<17&4294967295|w>>>15),w=y+(I^P&(S^I))+C[11]+2304563134&4294967295,y=P+(w<<22&4294967295|w>>>10),w=I+(S^y&(P^S))+C[12]+1804603682&4294967295,I=y+(w<<7&4294967295|w>>>25),w=S+(P^I&(y^P))+C[13]+4254626195&4294967295,S=I+(w<<12&4294967295|w>>>20),w=P+(y^S&(I^y))+C[14]+2792965006&4294967295,P=S+(w<<17&4294967295|w>>>15),w=y+(I^P&(S^I))+C[15]+1236535329&4294967295,y=P+(w<<22&4294967295|w>>>10),w=I+(P^S&(y^P))+C[1]+4129170786&4294967295,I=y+(w<<5&4294967295|w>>>27),w=S+(y^P&(I^y))+C[6]+3225465664&4294967295,S=I+(w<<9&4294967295|w>>>23),w=P+(I^y&(S^I))+C[11]+643717713&4294967295,P=S+(w<<14&4294967295|w>>>18),w=y+(S^I&(P^S))+C[0]+3921069994&4294967295,y=P+(w<<20&4294967295|w>>>12),w=I+(P^S&(y^P))+C[5]+3593408605&4294967295,I=y+(w<<5&4294967295|w>>>27),w=S+(y^P&(I^y))+C[10]+38016083&4294967295,S=I+(w<<9&4294967295|w>>>23),w=P+(I^y&(S^I))+C[15]+3634488961&4294967295,P=S+(w<<14&4294967295|w>>>18),w=y+(S^I&(P^S))+C[4]+3889429448&4294967295,y=P+(w<<20&4294967295|w>>>12),w=I+(P^S&(y^P))+C[9]+568446438&4294967295,I=y+(w<<5&4294967295|w>>>27),w=S+(y^P&(I^y))+C[14]+3275163606&4294967295,S=I+(w<<9&4294967295|w>>>23),w=P+(I^y&(S^I))+C[3]+4107603335&4294967295,P=S+(w<<14&4294967295|w>>>18),w=y+(S^I&(P^S))+C[8]+1163531501&4294967295,y=P+(w<<20&4294967295|w>>>12),w=I+(P^S&(y^P))+C[13]+2850285829&4294967295,I=y+(w<<5&4294967295|w>>>27),w=S+(y^P&(I^y))+C[2]+4243563512&4294967295,S=I+(w<<9&4294967295|w>>>23),w=P+(I^y&(S^I))+C[7]+1735328473&4294967295,P=S+(w<<14&4294967295|w>>>18),w=y+(S^I&(P^S))+C[12]+2368359562&4294967295,y=P+(w<<20&4294967295|w>>>12),w=I+(y^P^S)+C[5]+4294588738&4294967295,I=y+(w<<4&4294967295|w>>>28),w=S+(I^y^P)+C[8]+2272392833&4294967295,S=I+(w<<11&4294967295|w>>>21),w=P+(S^I^y)+C[11]+1839030562&4294967295,P=S+(w<<16&4294967295|w>>>16),w=y+(P^S^I)+C[14]+4259657740&4294967295,y=P+(w<<23&4294967295|w>>>9),w=I+(y^P^S)+C[1]+2763975236&4294967295,I=y+(w<<4&4294967295|w>>>28),w=S+(I^y^P)+C[4]+1272893353&4294967295,S=I+(w<<11&4294967295|w>>>21),w=P+(S^I^y)+C[7]+4139469664&4294967295,P=S+(w<<16&4294967295|w>>>16),w=y+(P^S^I)+C[10]+3200236656&4294967295,y=P+(w<<23&4294967295|w>>>9),w=I+(y^P^S)+C[13]+681279174&4294967295,I=y+(w<<4&4294967295|w>>>28),w=S+(I^y^P)+C[0]+3936430074&4294967295,S=I+(w<<11&4294967295|w>>>21),w=P+(S^I^y)+C[3]+3572445317&4294967295,P=S+(w<<16&4294967295|w>>>16),w=y+(P^S^I)+C[6]+76029189&4294967295,y=P+(w<<23&4294967295|w>>>9),w=I+(y^P^S)+C[9]+3654602809&4294967295,I=y+(w<<4&4294967295|w>>>28),w=S+(I^y^P)+C[12]+3873151461&4294967295,S=I+(w<<11&4294967295|w>>>21),w=P+(S^I^y)+C[15]+530742520&4294967295,P=S+(w<<16&4294967295|w>>>16),w=y+(P^S^I)+C[2]+3299628645&4294967295,y=P+(w<<23&4294967295|w>>>9),w=I+(P^(y|~S))+C[0]+4096336452&4294967295,I=y+(w<<6&4294967295|w>>>26),w=S+(y^(I|~P))+C[7]+1126891415&4294967295,S=I+(w<<10&4294967295|w>>>22),w=P+(I^(S|~y))+C[14]+2878612391&4294967295,P=S+(w<<15&4294967295|w>>>17),w=y+(S^(P|~I))+C[5]+4237533241&4294967295,y=P+(w<<21&4294967295|w>>>11),w=I+(P^(y|~S))+C[12]+1700485571&4294967295,I=y+(w<<6&4294967295|w>>>26),w=S+(y^(I|~P))+C[3]+2399980690&4294967295,S=I+(w<<10&4294967295|w>>>22),w=P+(I^(S|~y))+C[10]+4293915773&4294967295,P=S+(w<<15&4294967295|w>>>17),w=y+(S^(P|~I))+C[1]+2240044497&4294967295,y=P+(w<<21&4294967295|w>>>11),w=I+(P^(y|~S))+C[8]+1873313359&4294967295,I=y+(w<<6&4294967295|w>>>26),w=S+(y^(I|~P))+C[15]+4264355552&4294967295,S=I+(w<<10&4294967295|w>>>22),w=P+(I^(S|~y))+C[6]+2734768916&4294967295,P=S+(w<<15&4294967295|w>>>17),w=y+(S^(P|~I))+C[13]+1309151649&4294967295,y=P+(w<<21&4294967295|w>>>11),w=I+(P^(y|~S))+C[4]+4149444226&4294967295,I=y+(w<<6&4294967295|w>>>26),w=S+(y^(I|~P))+C[11]+3174756917&4294967295,S=I+(w<<10&4294967295|w>>>22),w=P+(I^(S|~y))+C[2]+718787259&4294967295,P=S+(w<<15&4294967295|w>>>17),w=y+(S^(P|~I))+C[9]+3951481745&4294967295,E.g[0]=E.g[0]+I&4294967295,E.g[1]=E.g[1]+(P+(w<<21&4294967295|w>>>11))&4294967295,E.g[2]=E.g[2]+P&4294967295,E.g[3]=E.g[3]+S&4294967295}s.prototype.v=function(E,I){I===void 0&&(I=E.length);const y=I-this.blockSize,C=this.C;let P=this.h,S=0;for(;S<I;){if(P==0)for(;S<=y;)r(this,E,S),S+=this.blockSize;if(typeof E=="string"){for(;S<I;)if(C[P++]=E.charCodeAt(S++),P==this.blockSize){r(this,C),P=0;break}}else for(;S<I;)if(C[P++]=E[S++],P==this.blockSize){r(this,C),P=0;break}}this.h=P,this.o+=I},s.prototype.A=function(){var E=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);E[0]=128;for(var I=1;I<E.length-8;++I)E[I]=0;I=this.o*8;for(var y=E.length-8;y<E.length;++y)E[y]=I&255,I/=256;for(this.v(E),E=Array(16),I=0,y=0;y<4;++y)for(let C=0;C<32;C+=8)E[I++]=this.g[y]>>>C&255;return E};function i(E,I){var y=a;return Object.prototype.hasOwnProperty.call(y,E)?y[E]:y[E]=I(E)}function o(E,I){this.h=I;const y=[];let C=!0;for(let P=E.length-1;P>=0;P--){const S=E[P]|0;C&&S==I||(y[P]=S,C=!1)}this.g=y}var a={};function l(E){return-128<=E&&E<128?i(E,function(I){return new o([I|0],I<0?-1:0)}):new o([E|0],E<0?-1:0)}function u(E){if(isNaN(E)||!isFinite(E))return f;if(E<0)return D(u(-E));const I=[];let y=1;for(let C=0;E>=y;C++)I[C]=E/y|0,y*=4294967296;return new o(I,0)}function h(E,I){if(E.length==0)throw Error("number format error: empty string");if(I=I||10,I<2||36<I)throw Error("radix out of range: "+I);if(E.charAt(0)=="-")return D(h(E.substring(1),I));if(E.indexOf("-")>=0)throw Error('number format error: interior "-" character');const y=u(Math.pow(I,8));let C=f;for(let S=0;S<E.length;S+=8){var P=Math.min(8,E.length-S);const w=parseInt(E.substring(S,S+P),I);P<8?(P=u(Math.pow(I,P)),C=C.j(P).add(u(w))):(C=C.j(y),C=C.add(u(w)))}return C}var f=l(0),p=l(1),g=l(16777216);t=o.prototype,t.m=function(){if(v(this))return-D(this).m();let E=0,I=1;for(let y=0;y<this.g.length;y++){const C=this.i(y);E+=(C>=0?C:4294967296+C)*I,I*=4294967296}return E},t.toString=function(E){if(E=E||10,E<2||36<E)throw Error("radix out of range: "+E);if(A(this))return"0";if(v(this))return"-"+D(this).toString(E);const I=u(Math.pow(E,6));var y=this;let C="";for(;;){const P=R(y,I).g;y=V(y,P.j(I));let S=((y.g.length>0?y.g[0]:y.h)>>>0).toString(E);if(y=P,A(y))return S+C;for(;S.length<6;)S="0"+S;C=S+C}},t.i=function(E){return E<0?0:E<this.g.length?this.g[E]:this.h};function A(E){if(E.h!=0)return!1;for(let I=0;I<E.g.length;I++)if(E.g[I]!=0)return!1;return!0}function v(E){return E.h==-1}t.l=function(E){return E=V(this,E),v(E)?-1:A(E)?0:1};function D(E){const I=E.g.length,y=[];for(let C=0;C<I;C++)y[C]=~E.g[C];return new o(y,~E.h).add(p)}t.abs=function(){return v(this)?D(this):this},t.add=function(E){const I=Math.max(this.g.length,E.g.length),y=[];let C=0;for(let P=0;P<=I;P++){let S=C+(this.i(P)&65535)+(E.i(P)&65535),w=(S>>>16)+(this.i(P)>>>16)+(E.i(P)>>>16);C=w>>>16,S&=65535,w&=65535,y[P]=w<<16|S}return new o(y,y[y.length-1]&-2147483648?-1:0)};function V(E,I){return E.add(D(I))}t.j=function(E){if(A(this)||A(E))return f;if(v(this))return v(E)?D(this).j(D(E)):D(D(this).j(E));if(v(E))return D(this.j(D(E)));if(this.l(g)<0&&E.l(g)<0)return u(this.m()*E.m());const I=this.g.length+E.g.length,y=[];for(var C=0;C<2*I;C++)y[C]=0;for(C=0;C<this.g.length;C++)for(let P=0;P<E.g.length;P++){const S=this.i(C)>>>16,w=this.i(C)&65535,he=E.i(P)>>>16,Ee=E.i(P)&65535;y[2*C+2*P]+=w*Ee,N(y,2*C+2*P),y[2*C+2*P+1]+=S*Ee,N(y,2*C+2*P+1),y[2*C+2*P+1]+=w*he,N(y,2*C+2*P+1),y[2*C+2*P+2]+=S*he,N(y,2*C+2*P+2)}for(E=0;E<I;E++)y[E]=y[2*E+1]<<16|y[2*E];for(E=I;E<2*I;E++)y[E]=0;return new o(y,0)};function N(E,I){for(;(E[I]&65535)!=E[I];)E[I+1]+=E[I]>>>16,E[I]&=65535,I++}function _(E,I){this.g=E,this.h=I}function R(E,I){if(A(I))throw Error("division by zero");if(A(E))return new _(f,f);if(v(E))return I=R(D(E),I),new _(D(I.g),D(I.h));if(v(I))return I=R(E,D(I)),new _(D(I.g),I.h);if(E.g.length>30){if(v(E)||v(I))throw Error("slowDivide_ only works with positive integers.");for(var y=p,C=I;C.l(E)<=0;)y=O(y),C=O(C);var P=U(y,1),S=U(C,1);for(C=U(C,2),y=U(y,2);!A(C);){var w=S.add(C);w.l(E)<=0&&(P=P.add(y),S=w),C=U(C,1),y=U(y,1)}return I=V(E,P.j(I)),new _(P,I)}for(P=f;E.l(I)>=0;){for(y=Math.max(1,Math.floor(E.m()/I.m())),C=Math.ceil(Math.log(y)/Math.LN2),C=C<=48?1:Math.pow(2,C-48),S=u(y),w=S.j(I);v(w)||w.l(E)>0;)y-=C,S=u(y),w=S.j(I);A(S)&&(S=p),P=P.add(S),E=V(E,w)}return new _(P,E)}t.B=function(E){return R(this,E).h},t.and=function(E){const I=Math.max(this.g.length,E.g.length),y=[];for(let C=0;C<I;C++)y[C]=this.i(C)&E.i(C);return new o(y,this.h&E.h)},t.or=function(E){const I=Math.max(this.g.length,E.g.length),y=[];for(let C=0;C<I;C++)y[C]=this.i(C)|E.i(C);return new o(y,this.h|E.h)},t.xor=function(E){const I=Math.max(this.g.length,E.g.length),y=[];for(let C=0;C<I;C++)y[C]=this.i(C)^E.i(C);return new o(y,this.h^E.h)};function O(E){const I=E.g.length+1,y=[];for(let C=0;C<I;C++)y[C]=E.i(C)<<1|E.i(C-1)>>>31;return new o(y,E.h)}function U(E,I){const y=I>>5;I%=32;const C=E.g.length-y,P=[];for(let S=0;S<C;S++)P[S]=I>0?E.i(S+y)>>>I|E.i(S+y+1)<<32-I:E.i(S+y);return new o(P,E.h)}s.prototype.digest=s.prototype.A,s.prototype.reset=s.prototype.u,s.prototype.update=s.prototype.v,gE=s,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=u,o.fromString=h,Ws=o}).apply(typeof eg<"u"?eg:typeof self<"u"?self:typeof window<"u"?window:{});var qa=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var _E,_o,yE,oc,vh,vE,EE,TE;(function(){var t,e=Object.defineProperty;function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof qa=="object"&&qa];for(var d=0;d<c.length;++d){var m=c[d];if(m&&m.Math==Math)return m}throw Error("Cannot find global object")}var s=n(this);function r(c,d){if(d)e:{var m=s;c=c.split(".");for(var T=0;T<c.length-1;T++){var F=c[T];if(!(F in m))break e;m=m[F]}c=c[c.length-1],T=m[c],d=d(T),d!=T&&d!=null&&e(m,c,{configurable:!0,writable:!0,value:d})}}r("Symbol.dispose",function(c){return c||Symbol("Symbol.dispose")}),r("Array.prototype.values",function(c){return c||function(){return this[Symbol.iterator]()}}),r("Object.entries",function(c){return c||function(d){var m=[],T;for(T in d)Object.prototype.hasOwnProperty.call(d,T)&&m.push([T,d[T]]);return m}});var i=i||{},o=this||self;function a(c){var d=typeof c;return d=="object"&&c!=null||d=="function"}function l(c,d,m){return c.call.apply(c.bind,arguments)}function u(c,d,m){return u=l,u.apply(null,arguments)}function h(c,d){var m=Array.prototype.slice.call(arguments,1);return function(){var T=m.slice();return T.push.apply(T,arguments),c.apply(this,T)}}function f(c,d){function m(){}m.prototype=d.prototype,c.Z=d.prototype,c.prototype=new m,c.prototype.constructor=c,c.Ob=function(T,F,$){for(var oe=Array(arguments.length-2),ke=2;ke<arguments.length;ke++)oe[ke-2]=arguments[ke];return d.prototype[F].apply(T,oe)}}var p=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?c=>c&&AsyncContext.Snapshot.wrap(c):c=>c;function g(c){const d=c.length;if(d>0){const m=Array(d);for(let T=0;T<d;T++)m[T]=c[T];return m}return[]}function A(c,d){for(let T=1;T<arguments.length;T++){const F=arguments[T];var m=typeof F;if(m=m!="object"?m:F?Array.isArray(F)?"array":m:"null",m=="array"||m=="object"&&typeof F.length=="number"){m=c.length||0;const $=F.length||0;c.length=m+$;for(let oe=0;oe<$;oe++)c[m+oe]=F[oe]}else c.push(F)}}class v{constructor(d,m){this.i=d,this.j=m,this.h=0,this.g=null}get(){let d;return this.h>0?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function D(c){o.setTimeout(()=>{throw c},0)}function V(){var c=E;let d=null;return c.g&&(d=c.g,c.g=c.g.next,c.g||(c.h=null),d.next=null),d}class N{constructor(){this.h=this.g=null}add(d,m){const T=_.get();T.set(d,m),this.h?this.h.next=T:this.g=T,this.h=T}}var _=new v(()=>new R,c=>c.reset());class R{constructor(){this.next=this.g=this.h=null}set(d,m){this.h=d,this.g=m,this.next=null}reset(){this.next=this.g=this.h=null}}let O,U=!1,E=new N,I=()=>{const c=Promise.resolve(void 0);O=()=>{c.then(y)}};function y(){for(var c;c=V();){try{c.h.call(c.g)}catch(m){D(m)}var d=_;d.j(c),d.h<100&&(d.h++,c.next=d.g,d.g=c)}U=!1}function C(){this.u=this.u,this.C=this.C}C.prototype.u=!1,C.prototype.dispose=function(){this.u||(this.u=!0,this.N())},C.prototype[Symbol.dispose]=function(){this.dispose()},C.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function P(c,d){this.type=c,this.g=this.target=d,this.defaultPrevented=!1}P.prototype.h=function(){this.defaultPrevented=!0};var S=(function(){if(!o.addEventListener||!Object.defineProperty)return!1;var c=!1,d=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const m=()=>{};o.addEventListener("test",m,d),o.removeEventListener("test",m,d)}catch{}return c})();function w(c){return/^[\s\xa0]*$/.test(c)}function he(c,d){P.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c&&this.init(c,d)}f(he,P),he.prototype.init=function(c,d){const m=this.type=c.type,T=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;this.target=c.target||c.srcElement,this.g=d,d=c.relatedTarget,d||(m=="mouseover"?d=c.fromElement:m=="mouseout"&&(d=c.toElement)),this.relatedTarget=d,T?(this.clientX=T.clientX!==void 0?T.clientX:T.pageX,this.clientY=T.clientY!==void 0?T.clientY:T.pageY,this.screenX=T.screenX||0,this.screenY=T.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=c.pointerType,this.state=c.state,this.i=c,c.defaultPrevented&&he.Z.h.call(this)},he.prototype.h=function(){he.Z.h.call(this);const c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var Ee="closure_listenable_"+(Math.random()*1e6|0),ce=0;function q(c,d,m,T,F){this.listener=c,this.proxy=null,this.src=d,this.type=m,this.capture=!!T,this.ha=F,this.key=++ce,this.da=this.fa=!1}function L(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function G(c,d,m){for(const T in c)d.call(m,c[T],T,c)}function H(c,d){for(const m in c)d.call(void 0,c[m],m,c)}function B(c){const d={};for(const m in c)d[m]=c[m];return d}const j="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function se(c,d){let m,T;for(let F=1;F<arguments.length;F++){T=arguments[F];for(m in T)c[m]=T[m];for(let $=0;$<j.length;$++)m=j[$],Object.prototype.hasOwnProperty.call(T,m)&&(c[m]=T[m])}}function pe(c){this.src=c,this.g={},this.h=0}pe.prototype.add=function(c,d,m,T,F){const $=c.toString();c=this.g[$],c||(c=this.g[$]=[],this.h++);const oe=ae(c,d,T,F);return oe>-1?(d=c[oe],m||(d.fa=!1)):(d=new q(d,this.src,$,!!T,F),d.fa=m,c.push(d)),d};function we(c,d){const m=d.type;if(m in c.g){var T=c.g[m],F=Array.prototype.indexOf.call(T,d,void 0),$;($=F>=0)&&Array.prototype.splice.call(T,F,1),$&&(L(d),c.g[m].length==0&&(delete c.g[m],c.h--))}}function ae(c,d,m,T){for(let F=0;F<c.length;++F){const $=c[F];if(!$.da&&$.listener==d&&$.capture==!!m&&$.ha==T)return F}return-1}var M="closure_lm_"+(Math.random()*1e6|0),te={};function W(c,d,m,T,F){if(Array.isArray(d)){for(let $=0;$<d.length;$++)W(c,d[$],m,T,F);return null}return m=Z(m),c&&c[Ee]?c.J(d,m,a(T)?!!T.capture:!1,F):K(c,d,m,!1,T,F)}function K(c,d,m,T,F,$){if(!d)throw Error("Invalid event type");const oe=a(F)?!!F.capture:!!F;let ke=J(c);if(ke||(c[M]=ke=new pe(c)),m=ke.add(d,m,T,oe,$),m.proxy)return m;if(T=ge(),m.proxy=T,T.src=c,T.listener=m,c.addEventListener)S||(F=oe),F===void 0&&(F=!1),c.addEventListener(d.toString(),T,F);else if(c.attachEvent)c.attachEvent(k(d.toString()),T);else if(c.addListener&&c.removeListener)c.addListener(T);else throw Error("addEventListener and attachEvent are unavailable.");return m}function ge(){function c(m){return d.call(c.src,c.listener,m)}const d=x;return c}function Ne(c,d,m,T,F){if(Array.isArray(d))for(var $=0;$<d.length;$++)Ne(c,d[$],m,T,F);else T=a(T)?!!T.capture:!!T,m=Z(m),c&&c[Ee]?(c=c.i,$=String(d).toString(),$ in c.g&&(d=c.g[$],m=ae(d,m,T,F),m>-1&&(L(d[m]),Array.prototype.splice.call(d,m,1),d.length==0&&(delete c.g[$],c.h--)))):c&&(c=J(c))&&(d=c.g[d.toString()],c=-1,d&&(c=ae(d,m,T,F)),(m=c>-1?d[c]:null)&&b(m))}function b(c){if(typeof c!="number"&&c&&!c.da){var d=c.src;if(d&&d[Ee])we(d.i,c);else{var m=c.type,T=c.proxy;d.removeEventListener?d.removeEventListener(m,T,c.capture):d.detachEvent?d.detachEvent(k(m),T):d.addListener&&d.removeListener&&d.removeListener(T),(m=J(d))?(we(m,c),m.h==0&&(m.src=null,d[M]=null)):L(c)}}}function k(c){return c in te?te[c]:te[c]="on"+c}function x(c,d){if(c.da)c=!0;else{d=new he(d,this);const m=c.listener,T=c.ha||c.src;c.fa&&b(c),c=m.call(T,d)}return c}function J(c){return c=c[M],c instanceof pe?c:null}var z="__closure_events_fn_"+(Math.random()*1e9>>>0);function Z(c){return typeof c=="function"?c:(c[z]||(c[z]=function(d){return c.handleEvent(d)}),c[z])}function re(){C.call(this),this.i=new pe(this),this.M=this,this.G=null}f(re,C),re.prototype[Ee]=!0,re.prototype.removeEventListener=function(c,d,m,T){Ne(this,c,d,m,T)};function ne(c,d){var m,T=c.G;if(T)for(m=[];T;T=T.G)m.push(T);if(c=c.M,T=d.type||d,typeof d=="string")d=new P(d,c);else if(d instanceof P)d.target=d.target||c;else{var F=d;d=new P(T,c),se(d,F)}F=!0;let $,oe;if(m)for(oe=m.length-1;oe>=0;oe--)$=d.g=m[oe],F=ie($,T,!0,d)&&F;if($=d.g=c,F=ie($,T,!0,d)&&F,F=ie($,T,!1,d)&&F,m)for(oe=0;oe<m.length;oe++)$=d.g=m[oe],F=ie($,T,!1,d)&&F}re.prototype.N=function(){if(re.Z.N.call(this),this.i){var c=this.i;for(const d in c.g){const m=c.g[d];for(let T=0;T<m.length;T++)L(m[T]);delete c.g[d],c.h--}}this.G=null},re.prototype.J=function(c,d,m,T){return this.i.add(String(c),d,!1,m,T)},re.prototype.K=function(c,d,m,T){return this.i.add(String(c),d,!0,m,T)};function ie(c,d,m,T){if(d=c.i.g[String(d)],!d)return!0;d=d.concat();let F=!0;for(let $=0;$<d.length;++$){const oe=d[$];if(oe&&!oe.da&&oe.capture==m){const ke=oe.listener,Tt=oe.ha||oe.src;oe.fa&&we(c.i,oe),F=ke.call(Tt,T)!==!1&&F}}return F&&!T.defaultPrevented}function ee(c,d){if(typeof c!="function")if(c&&typeof c.handleEvent=="function")c=u(c.handleEvent,c);else throw Error("Invalid listener argument");return Number(d)>2147483647?-1:o.setTimeout(c,d||0)}function ve(c){c.g=ee(()=>{c.g=null,c.i&&(c.i=!1,ve(c))},c.l);const d=c.h;c.h=null,c.m.apply(null,d)}class ue extends C{constructor(d,m){super(),this.m=d,this.l=m,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:ve(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function me(c){C.call(this),this.h=c,this.g={}}f(me,C);var Se=[];function De(c){G(c.g,function(d,m){this.g.hasOwnProperty(m)&&b(d)},c),c.g={}}me.prototype.N=function(){me.Z.N.call(this),De(this)},me.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var $e=o.JSON.stringify,Be=o.JSON.parse,Vt=class{stringify(c){return o.JSON.stringify(c,void 0)}parse(c){return o.JSON.parse(c,void 0)}};function vt(){}function zt(){}var Et={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Wn(){P.call(this,"d")}f(Wn,P);function qr(){P.call(this,"c")}f(qr,P);var lt={},en=null;function or(){return en=en||new re}lt.Ia="serverreachability";function Gi(c){P.call(this,lt.Ia,c)}f(Gi,P);function zi(c){const d=or();ne(d,new Gi(d))}lt.STAT_EVENT="statevent";function hd(c,d){P.call(this,lt.STAT_EVENT,c),this.stat=d}f(hd,P);function Ht(c){const d=or();ne(d,new hd(d,c))}lt.Ja="timingevent";function fd(c,d){P.call(this,lt.Ja,c),this.size=d}f(fd,P);function Ki(c,d){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){c()},d)}function Qi(){this.g=!0}Qi.prototype.ua=function(){this.g=!1};function ZT(c,d,m,T,F,$){c.info(function(){if(c.g)if($){var oe="",ke=$.split("&");for(let ze=0;ze<ke.length;ze++){var Tt=ke[ze].split("=");if(Tt.length>1){const It=Tt[0];Tt=Tt[1];const Pn=It.split("_");oe=Pn.length>=2&&Pn[1]=="type"?oe+(It+"="+Tt+"&"):oe+(It+"=redacted&")}}}else oe=null;else oe=$;return"XMLHTTP REQ ("+T+") [attempt "+F+"]: "+d+`
`+m+`
`+oe})}function ew(c,d,m,T,F,$,oe){c.info(function(){return"XMLHTTP RESP ("+T+") [ attempt "+F+"]: "+d+`
`+m+`
`+$+" "+oe})}function Wr(c,d,m,T){c.info(function(){return"XMLHTTP TEXT ("+d+"): "+nw(c,m)+(T?" "+T:"")})}function tw(c,d){c.info(function(){return"TIMEOUT: "+d})}Qi.prototype.info=function(){};function nw(c,d){if(!c.g)return d;if(!d)return null;try{const $=JSON.parse(d);if($){for(c=0;c<$.length;c++)if(Array.isArray($[c])){var m=$[c];if(!(m.length<2)){var T=m[1];if(Array.isArray(T)&&!(T.length<1)){var F=T[0];if(F!="noop"&&F!="stop"&&F!="close")for(let oe=1;oe<T.length;oe++)T[oe]=""}}}}return $e($)}catch{return d}}var wa={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},dd={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},pd;function xl(){}f(xl,vt),xl.prototype.g=function(){return new XMLHttpRequest},pd=new xl;function Yi(c){return encodeURIComponent(String(c))}function sw(c){var d=1;c=c.split(":");const m=[];for(;d>0&&c.length;)m.push(c.shift()),d--;return c.length&&m.push(c.join(":")),m}function _s(c,d,m,T){this.j=c,this.i=d,this.l=m,this.S=T||1,this.V=new me(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new md}function md(){this.i=null,this.g="",this.h=!1}var gd={},Fl={};function Ul(c,d,m){c.M=1,c.A=Ia(Cn(d)),c.u=m,c.R=!0,_d(c,null)}function _d(c,d){c.F=Date.now(),ba(c),c.B=Cn(c.A);var m=c.B,T=c.S;Array.isArray(T)||(T=[String(T)]),kd(m.i,"t",T),c.C=0,m=c.j.L,c.h=new md,c.g=Kd(c.j,m?d:null,!c.u),c.P>0&&(c.O=new ue(u(c.Y,c,c.g),c.P)),d=c.V,m=c.g,T=c.ba;var F="readystatechange";Array.isArray(F)||(F&&(Se[0]=F.toString()),F=Se);for(let $=0;$<F.length;$++){const oe=W(m,F[$],T||d.handleEvent,!1,d.h||d);if(!oe)break;d.g[oe.key]=oe}d=c.J?B(c.J):{},c.u?(c.v||(c.v="POST"),d["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.B,c.v,c.u,d)):(c.v="GET",c.g.ea(c.B,c.v,null,d)),zi(),ZT(c.i,c.v,c.B,c.l,c.S,c.u)}_s.prototype.ba=function(c){c=c.target;const d=this.O;d&&Es(c)==3?d.j():this.Y(c)},_s.prototype.Y=function(c){try{if(c==this.g)e:{const ke=Es(this.g),Tt=this.g.ya(),ze=this.g.ca();if(!(ke<3)&&(ke!=3||this.g&&(this.h.h||this.g.la()||xd(this.g)))){this.K||ke!=4||Tt==7||(Tt==8||ze<=0?zi(3):zi(2)),Bl(this);var d=this.g.ca();this.X=d;var m=rw(this);if(this.o=d==200,ew(this.i,this.v,this.B,this.l,this.S,ke,d),this.o){if(this.U&&!this.L){t:{if(this.g){var T,F=this.g;if((T=F.g?F.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!w(T)){var $=T;break t}}$=null}if(c=$)Wr(this.i,this.l,c,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,$l(this,c);else{this.o=!1,this.m=3,Ht(12),ar(this),Ji(this);break e}}if(this.R){c=!0;let It;for(;!this.K&&this.C<m.length;)if(It=iw(this,m),It==Fl){ke==4&&(this.m=4,Ht(14),c=!1),Wr(this.i,this.l,null,"[Incomplete Response]");break}else if(It==gd){this.m=4,Ht(15),Wr(this.i,this.l,m,"[Invalid Chunk]"),c=!1;break}else Wr(this.i,this.l,It,null),$l(this,It);if(yd(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ke!=4||m.length!=0||this.h.h||(this.m=1,Ht(16),c=!1),this.o=this.o&&c,!c)Wr(this.i,this.l,m,"[Invalid Chunked Response]"),ar(this),Ji(this);else if(m.length>0&&!this.W){this.W=!0;var oe=this.j;oe.g==this&&oe.aa&&!oe.P&&(oe.j.info("Great, no buffering proxy detected. Bytes received: "+m.length),Ql(oe),oe.P=!0,Ht(11))}}else Wr(this.i,this.l,m,null),$l(this,m);ke==4&&ar(this),this.o&&!this.K&&(ke==4?qd(this.j,this):(this.o=!1,ba(this)))}else vw(this.g),d==400&&m.indexOf("Unknown SID")>0?(this.m=3,Ht(12)):(this.m=0,Ht(13)),ar(this),Ji(this)}}}catch{}};function rw(c){if(!yd(c))return c.g.la();const d=xd(c.g);if(d==="")return"";let m="";const T=d.length,F=Es(c.g)==4;if(!c.h.i){if(typeof TextDecoder>"u")return ar(c),Ji(c),"";c.h.i=new o.TextDecoder}for(let $=0;$<T;$++)c.h.h=!0,m+=c.h.i.decode(d[$],{stream:!(F&&$==T-1)});return d.length=0,c.h.g+=m,c.C=0,c.h.g}function yd(c){return c.g?c.v=="GET"&&c.M!=2&&c.j.Aa:!1}function iw(c,d){var m=c.C,T=d.indexOf(`
`,m);return T==-1?Fl:(m=Number(d.substring(m,T)),isNaN(m)?gd:(T+=1,T+m>d.length?Fl:(d=d.slice(T,T+m),c.C=T+m,d)))}_s.prototype.cancel=function(){this.K=!0,ar(this)};function ba(c){c.T=Date.now()+c.H,vd(c,c.H)}function vd(c,d){if(c.D!=null)throw Error("WatchDog timer not null");c.D=Ki(u(c.aa,c),d)}function Bl(c){c.D&&(o.clearTimeout(c.D),c.D=null)}_s.prototype.aa=function(){this.D=null;const c=Date.now();c-this.T>=0?(tw(this.i,this.B),this.M!=2&&(zi(),Ht(17)),ar(this),this.m=2,Ji(this)):vd(this,this.T-c)};function Ji(c){c.j.I==0||c.K||qd(c.j,c)}function ar(c){Bl(c);var d=c.O;d&&typeof d.dispose=="function"&&d.dispose(),c.O=null,De(c.V),c.g&&(d=c.g,c.g=null,d.abort(),d.dispose())}function $l(c,d){try{var m=c.j;if(m.I!=0&&(m.g==c||Hl(m.h,c))){if(!c.L&&Hl(m.h,c)&&m.I==3){try{var T=m.Ba.g.parse(d)}catch{T=null}if(Array.isArray(T)&&T.length==3){var F=T;if(F[0]==0){e:if(!m.v){if(m.g)if(m.g.F+3e3<c.F)Pa(m),Sa(m);else break e;Kl(m),Ht(18)}}else m.xa=F[1],0<m.xa-m.K&&F[2]<37500&&m.F&&m.A==0&&!m.C&&(m.C=Ki(u(m.Va,m),6e3));wd(m.h)<=1&&m.ta&&(m.ta=void 0)}else lr(m,11)}else if((c.L||m.g==c)&&Pa(m),!w(d))for(F=m.Ba.g.parse(d),d=0;d<F.length;d++){let ze=F[d];const It=ze[0];if(!(It<=m.K))if(m.K=It,ze=ze[1],m.I==2)if(ze[0]=="c"){m.M=ze[1],m.ba=ze[2];const Pn=ze[3];Pn!=null&&(m.ka=Pn,m.j.info("VER="+m.ka));const ur=ze[4];ur!=null&&(m.za=ur,m.j.info("SVER="+m.za));const Ts=ze[5];Ts!=null&&typeof Ts=="number"&&Ts>0&&(T=1.5*Ts,m.O=T,m.j.info("backChannelRequestTimeoutMs_="+T)),T=m;const ws=c.g;if(ws){const Na=ws.g?ws.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Na){var $=T.h;$.g||Na.indexOf("spdy")==-1&&Na.indexOf("quic")==-1&&Na.indexOf("h2")==-1||($.j=$.l,$.g=new Set,$.h&&(jl($,$.h),$.h=null))}if(T.G){const Yl=ws.g?ws.g.getResponseHeader("X-HTTP-Session-Id"):null;Yl&&(T.wa=Yl,Xe(T.J,T.G,Yl))}}m.I=3,m.l&&m.l.ra(),m.aa&&(m.T=Date.now()-c.F,m.j.info("Handshake RTT: "+m.T+"ms")),T=m;var oe=c;if(T.na=zd(T,T.L?T.ba:null,T.W),oe.L){bd(T.h,oe);var ke=oe,Tt=T.O;Tt&&(ke.H=Tt),ke.D&&(Bl(ke),ba(ke)),T.g=oe}else Hd(T);m.i.length>0&&Ca(m)}else ze[0]!="stop"&&ze[0]!="close"||lr(m,7);else m.I==3&&(ze[0]=="stop"||ze[0]=="close"?ze[0]=="stop"?lr(m,7):zl(m):ze[0]!="noop"&&m.l&&m.l.qa(ze),m.A=0)}}zi(4)}catch{}}var ow=class{constructor(c,d){this.g=c,this.map=d}};function Ed(c){this.l=c||10,o.PerformanceNavigationTiming?(c=o.performance.getEntriesByType("navigation"),c=c.length>0&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Td(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function wd(c){return c.h?1:c.g?c.g.size:0}function Hl(c,d){return c.h?c.h==d:c.g?c.g.has(d):!1}function jl(c,d){c.g?c.g.add(d):c.h=d}function bd(c,d){c.h&&c.h==d?c.h=null:c.g&&c.g.has(d)&&c.g.delete(d)}Ed.prototype.cancel=function(){if(this.i=Id(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function Id(c){if(c.h!=null)return c.i.concat(c.h.G);if(c.g!=null&&c.g.size!==0){let d=c.i;for(const m of c.g.values())d=d.concat(m.G);return d}return g(c.i)}var Ad=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function aw(c,d){if(c){c=c.split("&");for(let m=0;m<c.length;m++){const T=c[m].indexOf("=");let F,$=null;T>=0?(F=c[m].substring(0,T),$=c[m].substring(T+1)):F=c[m],d(F,$?decodeURIComponent($.replace(/\+/g," ")):"")}}}function ys(c){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let d;c instanceof ys?(this.l=c.l,Xi(this,c.j),this.o=c.o,this.g=c.g,Zi(this,c.u),this.h=c.h,ql(this,Nd(c.i)),this.m=c.m):c&&(d=String(c).match(Ad))?(this.l=!1,Xi(this,d[1]||"",!0),this.o=eo(d[2]||""),this.g=eo(d[3]||"",!0),Zi(this,d[4]),this.h=eo(d[5]||"",!0),ql(this,d[6]||"",!0),this.m=eo(d[7]||"")):(this.l=!1,this.i=new no(null,this.l))}ys.prototype.toString=function(){const c=[];var d=this.j;d&&c.push(to(d,Rd,!0),":");var m=this.g;return(m||d=="file")&&(c.push("//"),(d=this.o)&&c.push(to(d,Rd,!0),"@"),c.push(Yi(m).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m=this.u,m!=null&&c.push(":",String(m))),(m=this.h)&&(this.g&&m.charAt(0)!="/"&&c.push("/"),c.push(to(m,m.charAt(0)=="/"?uw:lw,!0))),(m=this.i.toString())&&c.push("?",m),(m=this.m)&&c.push("#",to(m,fw)),c.join("")},ys.prototype.resolve=function(c){const d=Cn(this);let m=!!c.j;m?Xi(d,c.j):m=!!c.o,m?d.o=c.o:m=!!c.g,m?d.g=c.g:m=c.u!=null;var T=c.h;if(m)Zi(d,c.u);else if(m=!!c.h){if(T.charAt(0)!="/")if(this.g&&!this.h)T="/"+T;else{var F=d.h.lastIndexOf("/");F!=-1&&(T=d.h.slice(0,F+1)+T)}if(F=T,F==".."||F==".")T="";else if(F.indexOf("./")!=-1||F.indexOf("/.")!=-1){T=F.lastIndexOf("/",0)==0,F=F.split("/");const $=[];for(let oe=0;oe<F.length;){const ke=F[oe++];ke=="."?T&&oe==F.length&&$.push(""):ke==".."?(($.length>1||$.length==1&&$[0]!="")&&$.pop(),T&&oe==F.length&&$.push("")):($.push(ke),T=!0)}T=$.join("/")}else T=F}return m?d.h=T:m=c.i.toString()!=="",m?ql(d,Nd(c.i)):m=!!c.m,m&&(d.m=c.m),d};function Cn(c){return new ys(c)}function Xi(c,d,m){c.j=m?eo(d,!0):d,c.j&&(c.j=c.j.replace(/:$/,""))}function Zi(c,d){if(d){if(d=Number(d),isNaN(d)||d<0)throw Error("Bad port number "+d);c.u=d}else c.u=null}function ql(c,d,m){d instanceof no?(c.i=d,dw(c.i,c.l)):(m||(d=to(d,hw)),c.i=new no(d,c.l))}function Xe(c,d,m){c.i.set(d,m)}function Ia(c){return Xe(c,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),c}function eo(c,d){return c?d?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function to(c,d,m){return typeof c=="string"?(c=encodeURI(c).replace(d,cw),m&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function cw(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var Rd=/[#\/\?@]/g,lw=/[#\?:]/g,uw=/[#\?]/g,hw=/[#\?@]/g,fw=/#/g;function no(c,d){this.h=this.g=null,this.i=c||null,this.j=!!d}function cr(c){c.g||(c.g=new Map,c.h=0,c.i&&aw(c.i,function(d,m){c.add(decodeURIComponent(d.replace(/\+/g," ")),m)}))}t=no.prototype,t.add=function(c,d){cr(this),this.i=null,c=Gr(this,c);let m=this.g.get(c);return m||this.g.set(c,m=[]),m.push(d),this.h+=1,this};function Sd(c,d){cr(c),d=Gr(c,d),c.g.has(d)&&(c.i=null,c.h-=c.g.get(d).length,c.g.delete(d))}function Cd(c,d){return cr(c),d=Gr(c,d),c.g.has(d)}t.forEach=function(c,d){cr(this),this.g.forEach(function(m,T){m.forEach(function(F){c.call(d,F,T,this)},this)},this)};function Pd(c,d){cr(c);let m=[];if(typeof d=="string")Cd(c,d)&&(m=m.concat(c.g.get(Gr(c,d))));else for(c=Array.from(c.g.values()),d=0;d<c.length;d++)m=m.concat(c[d]);return m}t.set=function(c,d){return cr(this),this.i=null,c=Gr(this,c),Cd(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[d]),this.h+=1,this},t.get=function(c,d){return c?(c=Pd(this,c),c.length>0?String(c[0]):d):d};function kd(c,d,m){Sd(c,d),m.length>0&&(c.i=null,c.g.set(Gr(c,d),g(m)),c.h+=m.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],d=Array.from(this.g.keys());for(let T=0;T<d.length;T++){var m=d[T];const F=Yi(m);m=Pd(this,m);for(let $=0;$<m.length;$++){let oe=F;m[$]!==""&&(oe+="="+Yi(m[$])),c.push(oe)}}return this.i=c.join("&")};function Nd(c){const d=new no;return d.i=c.i,c.g&&(d.g=new Map(c.g),d.h=c.h),d}function Gr(c,d){return d=String(d),c.j&&(d=d.toLowerCase()),d}function dw(c,d){d&&!c.j&&(cr(c),c.i=null,c.g.forEach(function(m,T){const F=T.toLowerCase();T!=F&&(Sd(this,T),kd(this,F,m))},c)),c.j=d}function pw(c,d){const m=new Qi;if(o.Image){const T=new Image;T.onload=h(vs,m,"TestLoadImage: loaded",!0,d,T),T.onerror=h(vs,m,"TestLoadImage: error",!1,d,T),T.onabort=h(vs,m,"TestLoadImage: abort",!1,d,T),T.ontimeout=h(vs,m,"TestLoadImage: timeout",!1,d,T),o.setTimeout(function(){T.ontimeout&&T.ontimeout()},1e4),T.src=c}else d(!1)}function mw(c,d){const m=new Qi,T=new AbortController,F=setTimeout(()=>{T.abort(),vs(m,"TestPingServer: timeout",!1,d)},1e4);fetch(c,{signal:T.signal}).then($=>{clearTimeout(F),$.ok?vs(m,"TestPingServer: ok",!0,d):vs(m,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(F),vs(m,"TestPingServer: error",!1,d)})}function vs(c,d,m,T,F){try{F&&(F.onload=null,F.onerror=null,F.onabort=null,F.ontimeout=null),T(m)}catch{}}function gw(){this.g=new Vt}function Wl(c){this.i=c.Sb||null,this.h=c.ab||!1}f(Wl,vt),Wl.prototype.g=function(){return new Aa(this.i,this.h)};function Aa(c,d){re.call(this),this.H=c,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}f(Aa,re),t=Aa.prototype,t.open=function(c,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=c,this.D=d,this.readyState=1,ro(this)},t.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const d={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};c&&(d.body=c),(this.H||o).fetch(new Request(this.D,d)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,so(this)),this.readyState=0},t.Pa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,ro(this)),this.g&&(this.readyState=3,ro(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Dd(this)}else c.text().then(this.Oa.bind(this),this.ga.bind(this))};function Dd(c){c.j.read().then(c.Ma.bind(c)).catch(c.ga.bind(c))}t.Ma=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var d=c.value?c.value:new Uint8Array(0);(d=this.B.decode(d,{stream:!c.done}))&&(this.response=this.responseText+=d)}c.done?so(this):ro(this),this.readyState==3&&Dd(this)}},t.Oa=function(c){this.g&&(this.response=this.responseText=c,so(this))},t.Na=function(c){this.g&&(this.response=c,so(this))},t.ga=function(){this.g&&so(this)};function so(c){c.readyState=4,c.l=null,c.j=null,c.B=null,ro(c)}t.setRequestHeader=function(c,d){this.A.append(c,d)},t.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],d=this.h.entries();for(var m=d.next();!m.done;)m=m.value,c.push(m[0]+": "+m[1]),m=d.next();return c.join(`\r
`)};function ro(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(Aa.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function Od(c){let d="";return G(c,function(m,T){d+=T,d+=":",d+=m,d+=`\r
`}),d}function Gl(c,d,m){e:{for(T in m){var T=!1;break e}T=!0}T||(m=Od(m),typeof c=="string"?m!=null&&Yi(m):Xe(c,d,m))}function nt(c){re.call(this),this.headers=new Map,this.L=c||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}f(nt,re);var _w=/^https?$/i,yw=["POST","PUT"];t=nt.prototype,t.Fa=function(c){this.H=c},t.ea=function(c,d,m,T){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);d=d?d.toUpperCase():"GET",this.D=c,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():pd.g(),this.g.onreadystatechange=p(u(this.Ca,this));try{this.B=!0,this.g.open(d,String(c),!0),this.B=!1}catch($){Vd(this,$);return}if(c=m||"",m=new Map(this.headers),T)if(Object.getPrototypeOf(T)===Object.prototype)for(var F in T)m.set(F,T[F]);else if(typeof T.keys=="function"&&typeof T.get=="function")for(const $ of T.keys())m.set($,T.get($));else throw Error("Unknown input type for opt_headers: "+String(T));T=Array.from(m.keys()).find($=>$.toLowerCase()=="content-type"),F=o.FormData&&c instanceof o.FormData,!(Array.prototype.indexOf.call(yw,d,void 0)>=0)||T||F||m.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[$,oe]of m)this.g.setRequestHeader($,oe);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(c),this.v=!1}catch($){Vd(this,$)}};function Vd(c,d){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=d,c.o=5,Ld(c),Ra(c)}function Ld(c){c.A||(c.A=!0,ne(c,"complete"),ne(c,"error"))}t.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=c||7,ne(this,"complete"),ne(this,"abort"),Ra(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ra(this,!0)),nt.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?Md(this):this.Xa())},t.Xa=function(){Md(this)};function Md(c){if(c.h&&typeof i<"u"){if(c.v&&Es(c)==4)setTimeout(c.Ca.bind(c),0);else if(ne(c,"readystatechange"),Es(c)==4){c.h=!1;try{const $=c.ca();e:switch($){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var m;if(!(m=d)){var T;if(T=$===0){let oe=String(c.D).match(Ad)[1]||null;!oe&&o.self&&o.self.location&&(oe=o.self.location.protocol.slice(0,-1)),T=!_w.test(oe?oe.toLowerCase():"")}m=T}if(m)ne(c,"complete"),ne(c,"success");else{c.o=6;try{var F=Es(c)>2?c.g.statusText:""}catch{F=""}c.l=F+" ["+c.ca()+"]",Ld(c)}}finally{Ra(c)}}}}function Ra(c,d){if(c.g){c.m&&(clearTimeout(c.m),c.m=null);const m=c.g;c.g=null,d||ne(c,"ready");try{m.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function Es(c){return c.g?c.g.readyState:0}t.ca=function(){try{return Es(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(c){if(this.g){var d=this.g.responseText;return c&&d.indexOf(c)==0&&(d=d.substring(c.length)),Be(d)}};function xd(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.F){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function vw(c){const d={};c=(c.g&&Es(c)>=2&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let T=0;T<c.length;T++){if(w(c[T]))continue;var m=sw(c[T]);const F=m[0];if(m=m[1],typeof m!="string")continue;m=m.trim();const $=d[F]||[];d[F]=$,$.push(m)}H(d,function(T){return T.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function io(c,d,m){return m&&m.internalChannelParams&&m.internalChannelParams[c]||d}function Fd(c){this.za=0,this.i=[],this.j=new Qi,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=io("failFast",!1,c),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=io("baseRetryDelayMs",5e3,c),this.Za=io("retryDelaySeedMs",1e4,c),this.Ta=io("forwardChannelMaxRetries",2,c),this.va=io("forwardChannelRequestTimeoutMs",2e4,c),this.ma=c&&c.xmlHttpFactory||void 0,this.Ua=c&&c.Rb||void 0,this.Aa=c&&c.useFetchStreams||!1,this.O=void 0,this.L=c&&c.supportsCrossDomainXhr||!1,this.M="",this.h=new Ed(c&&c.concurrentRequestLimit),this.Ba=new gw,this.S=c&&c.fastHandshake||!1,this.R=c&&c.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=c&&c.Pb||!1,c&&c.ua&&this.j.ua(),c&&c.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&c&&c.detectBufferingProxy||!1,this.ia=void 0,c&&c.longPollingTimeout&&c.longPollingTimeout>0&&(this.ia=c.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=Fd.prototype,t.ka=8,t.I=1,t.connect=function(c,d,m,T){Ht(0),this.W=c,this.H=d||{},m&&T!==void 0&&(this.H.OSID=m,this.H.OAID=T),this.F=this.X,this.J=zd(this,null,this.W),Ca(this)};function zl(c){if(Ud(c),c.I==3){var d=c.V++,m=Cn(c.J);if(Xe(m,"SID",c.M),Xe(m,"RID",d),Xe(m,"TYPE","terminate"),oo(c,m),d=new _s(c,c.j,d),d.M=2,d.A=Ia(Cn(m)),m=!1,o.navigator&&o.navigator.sendBeacon)try{m=o.navigator.sendBeacon(d.A.toString(),"")}catch{}!m&&o.Image&&(new Image().src=d.A,m=!0),m||(d.g=Kd(d.j,null),d.g.ea(d.A)),d.F=Date.now(),ba(d)}Gd(c)}function Sa(c){c.g&&(Ql(c),c.g.cancel(),c.g=null)}function Ud(c){Sa(c),c.v&&(o.clearTimeout(c.v),c.v=null),Pa(c),c.h.cancel(),c.m&&(typeof c.m=="number"&&o.clearTimeout(c.m),c.m=null)}function Ca(c){if(!Td(c.h)&&!c.m){c.m=!0;var d=c.Ea;O||I(),U||(O(),U=!0),E.add(d,c),c.D=0}}function Ew(c,d){return wd(c.h)>=c.h.j-(c.m?1:0)?!1:c.m?(c.i=d.G.concat(c.i),!0):c.I==1||c.I==2||c.D>=(c.Sa?0:c.Ta)?!1:(c.m=Ki(u(c.Ea,c,d),Wd(c,c.D)),c.D++,!0)}t.Ea=function(c){if(this.m)if(this.m=null,this.I==1){if(!c){this.V=Math.floor(Math.random()*1e5),c=this.V++;const F=new _s(this,this.j,c);let $=this.o;if(this.U&&($?($=B($),se($,this.U)):$=this.U),this.u!==null||this.R||(F.J=$,$=null),this.S)e:{for(var d=0,m=0;m<this.i.length;m++){t:{var T=this.i[m];if("__data__"in T.map&&(T=T.map.__data__,typeof T=="string")){T=T.length;break t}T=void 0}if(T===void 0)break;if(d+=T,d>4096){d=m;break e}if(d===4096||m===this.i.length-1){d=m+1;break e}}d=1e3}else d=1e3;d=$d(this,F,d),m=Cn(this.J),Xe(m,"RID",c),Xe(m,"CVER",22),this.G&&Xe(m,"X-HTTP-Session-Id",this.G),oo(this,m),$&&(this.R?d="headers="+Yi(Od($))+"&"+d:this.u&&Gl(m,this.u,$)),jl(this.h,F),this.Ra&&Xe(m,"TYPE","init"),this.S?(Xe(m,"$req",d),Xe(m,"SID","null"),F.U=!0,Ul(F,m,null)):Ul(F,m,d),this.I=2}}else this.I==3&&(c?Bd(this,c):this.i.length==0||Td(this.h)||Bd(this))};function Bd(c,d){var m;d?m=d.l:m=c.V++;const T=Cn(c.J);Xe(T,"SID",c.M),Xe(T,"RID",m),Xe(T,"AID",c.K),oo(c,T),c.u&&c.o&&Gl(T,c.u,c.o),m=new _s(c,c.j,m,c.D+1),c.u===null&&(m.J=c.o),d&&(c.i=d.G.concat(c.i)),d=$d(c,m,1e3),m.H=Math.round(c.va*.5)+Math.round(c.va*.5*Math.random()),jl(c.h,m),Ul(m,T,d)}function oo(c,d){c.H&&G(c.H,function(m,T){Xe(d,T,m)}),c.l&&G({},function(m,T){Xe(d,T,m)})}function $d(c,d,m){m=Math.min(c.i.length,m);const T=c.l?u(c.l.Ka,c.l,c):null;e:{var F=c.i;let ke=-1;for(;;){const Tt=["count="+m];ke==-1?m>0?(ke=F[0].g,Tt.push("ofs="+ke)):ke=0:Tt.push("ofs="+ke);let ze=!0;for(let It=0;It<m;It++){var $=F[It].g;const Pn=F[It].map;if($-=ke,$<0)ke=Math.max(0,F[It].g-100),ze=!1;else try{$="req"+$+"_"||"";try{var oe=Pn instanceof Map?Pn:Object.entries(Pn);for(const[ur,Ts]of oe){let ws=Ts;a(Ts)&&(ws=$e(Ts)),Tt.push($+ur+"="+encodeURIComponent(ws))}}catch(ur){throw Tt.push($+"type="+encodeURIComponent("_badmap")),ur}}catch{T&&T(Pn)}}if(ze){oe=Tt.join("&");break e}}oe=void 0}return c=c.i.splice(0,m),d.G=c,oe}function Hd(c){if(!c.g&&!c.v){c.Y=1;var d=c.Da;O||I(),U||(O(),U=!0),E.add(d,c),c.A=0}}function Kl(c){return c.g||c.v||c.A>=3?!1:(c.Y++,c.v=Ki(u(c.Da,c),Wd(c,c.A)),c.A++,!0)}t.Da=function(){if(this.v=null,jd(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var c=4*this.T;this.j.info("BP detection timer enabled: "+c),this.B=Ki(u(this.Wa,this),c)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Ht(10),Sa(this),jd(this))};function Ql(c){c.B!=null&&(o.clearTimeout(c.B),c.B=null)}function jd(c){c.g=new _s(c,c.j,"rpc",c.Y),c.u===null&&(c.g.J=c.o),c.g.P=0;var d=Cn(c.na);Xe(d,"RID","rpc"),Xe(d,"SID",c.M),Xe(d,"AID",c.K),Xe(d,"CI",c.F?"0":"1"),!c.F&&c.ia&&Xe(d,"TO",c.ia),Xe(d,"TYPE","xmlhttp"),oo(c,d),c.u&&c.o&&Gl(d,c.u,c.o),c.O&&(c.g.H=c.O);var m=c.g;c=c.ba,m.M=1,m.A=Ia(Cn(d)),m.u=null,m.R=!0,_d(m,c)}t.Va=function(){this.C!=null&&(this.C=null,Sa(this),Kl(this),Ht(19))};function Pa(c){c.C!=null&&(o.clearTimeout(c.C),c.C=null)}function qd(c,d){var m=null;if(c.g==d){Pa(c),Ql(c),c.g=null;var T=2}else if(Hl(c.h,d))m=d.G,bd(c.h,d),T=1;else return;if(c.I!=0){if(d.o)if(T==1){m=d.u?d.u.length:0,d=Date.now()-d.F;var F=c.D;T=or(),ne(T,new fd(T,m)),Ca(c)}else Hd(c);else if(F=d.m,F==3||F==0&&d.X>0||!(T==1&&Ew(c,d)||T==2&&Kl(c)))switch(m&&m.length>0&&(d=c.h,d.i=d.i.concat(m)),F){case 1:lr(c,5);break;case 4:lr(c,10);break;case 3:lr(c,6);break;default:lr(c,2)}}}function Wd(c,d){let m=c.Qa+Math.floor(Math.random()*c.Za);return c.isActive()||(m*=2),m*d}function lr(c,d){if(c.j.info("Error code "+d),d==2){var m=u(c.bb,c),T=c.Ua;const F=!T;T=new ys(T||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||Xi(T,"https"),Ia(T),F?pw(T.toString(),m):mw(T.toString(),m)}else Ht(2);c.I=0,c.l&&c.l.pa(d),Gd(c),Ud(c)}t.bb=function(c){c?(this.j.info("Successfully pinged google.com"),Ht(2)):(this.j.info("Failed to ping google.com"),Ht(1))};function Gd(c){if(c.I=0,c.ja=[],c.l){const d=Id(c.h);(d.length!=0||c.i.length!=0)&&(A(c.ja,d),A(c.ja,c.i),c.h.i.length=0,g(c.i),c.i.length=0),c.l.oa()}}function zd(c,d,m){var T=m instanceof ys?Cn(m):new ys(m);if(T.g!="")d&&(T.g=d+"."+T.g),Zi(T,T.u);else{var F=o.location;T=F.protocol,d=d?d+"."+F.hostname:F.hostname,F=+F.port;const $=new ys(null);T&&Xi($,T),d&&($.g=d),F&&Zi($,F),m&&($.h=m),T=$}return m=c.G,d=c.wa,m&&d&&Xe(T,m,d),Xe(T,"VER",c.ka),oo(c,T),T}function Kd(c,d,m){if(d&&!c.L)throw Error("Can't create secondary domain capable XhrIo object.");return d=c.Aa&&!c.ma?new nt(new Wl({ab:m})):new nt(c.ma),d.Fa(c.L),d}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Qd(){}t=Qd.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function ka(){}ka.prototype.g=function(c,d){return new tn(c,d)};function tn(c,d){re.call(this),this.g=new Fd(d),this.l=c,this.h=d&&d.messageUrlParams||null,c=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(c?c["X-WebChannel-Content-Type"]=d.messageContentType:c={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.sa&&(c?c["X-WebChannel-Client-Profile"]=d.sa:c={"X-WebChannel-Client-Profile":d.sa}),this.g.U=c,(c=d&&d.Qb)&&!w(c)&&(this.g.u=c),this.A=d&&d.supportsCrossDomainXhr||!1,this.v=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!w(d)&&(this.g.G=d,c=this.h,c!==null&&d in c&&(c=this.h,d in c&&delete c[d])),this.j=new zr(this)}f(tn,re),tn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},tn.prototype.close=function(){zl(this.g)},tn.prototype.o=function(c){var d=this.g;if(typeof c=="string"){var m={};m.__data__=c,c=m}else this.v&&(m={},m.__data__=$e(c),c=m);d.i.push(new ow(d.Ya++,c)),d.I==3&&Ca(d)},tn.prototype.N=function(){this.g.l=null,delete this.j,zl(this.g),delete this.g,tn.Z.N.call(this)};function Yd(c){Wn.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var d=c.__sm__;if(d){e:{for(const m in d){c=m;break e}c=void 0}(this.i=c)&&(c=this.i,d=d!==null&&c in d?d[c]:void 0),this.data=d}else this.data=c}f(Yd,Wn);function Jd(){qr.call(this),this.status=1}f(Jd,qr);function zr(c){this.g=c}f(zr,Qd),zr.prototype.ra=function(){ne(this.g,"a")},zr.prototype.qa=function(c){ne(this.g,new Yd(c))},zr.prototype.pa=function(c){ne(this.g,new Jd)},zr.prototype.oa=function(){ne(this.g,"b")},ka.prototype.createWebChannel=ka.prototype.g,tn.prototype.send=tn.prototype.o,tn.prototype.open=tn.prototype.m,tn.prototype.close=tn.prototype.close,TE=function(){return new ka},EE=function(){return or()},vE=lt,vh={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},wa.NO_ERROR=0,wa.TIMEOUT=8,wa.HTTP_ERROR=6,oc=wa,dd.COMPLETE="complete",yE=dd,zt.EventType=Et,Et.OPEN="a",Et.CLOSE="b",Et.ERROR="c",Et.MESSAGE="d",re.prototype.listen=re.prototype.J,_o=zt,nt.prototype.listenOnce=nt.prototype.K,nt.prototype.getLastError=nt.prototype.Ha,nt.prototype.getLastErrorCode=nt.prototype.ya,nt.prototype.getStatus=nt.prototype.ca,nt.prototype.getResponseJson=nt.prototype.La,nt.prototype.getResponseText=nt.prototype.la,nt.prototype.send=nt.prototype.ea,nt.prototype.setWithCredentials=nt.prototype.Fa,_E=nt}).apply(typeof qa<"u"?qa:typeof self<"u"?self:typeof window<"u"?window:{});const tg="@firebase/firestore",ng="4.9.3";class xt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}xt.UNAUTHENTICATED=new xt(null),xt.GOOGLE_CREDENTIALS=new xt("google-credentials-uid"),xt.FIRST_PARTY=new xt("first-party-uid"),xt.MOCK_USER=new xt("mock-user");let Bi="12.7.0";const Vr=new yf("@firebase/firestore");function Xr(){return Vr.logLevel}function fe(t,...e){if(Vr.logLevel<=Ve.DEBUG){const n=e.map(Pf);Vr.debug(`Firestore (${Bi}): ${t}`,...n)}}function fs(t,...e){if(Vr.logLevel<=Ve.ERROR){const n=e.map(Pf);Vr.error(`Firestore (${Bi}): ${t}`,...n)}}function Lr(t,...e){if(Vr.logLevel<=Ve.WARN){const n=e.map(Pf);Vr.warn(`Firestore (${Bi}): ${t}`,...n)}}function Pf(t){if(typeof t=="string")return t;try{return(function(n){return JSON.stringify(n)})(t)}catch{return t}}function Re(t,e,n){let s="Unexpected state";typeof e=="string"?s=e:n=e,wE(t,s,n)}function wE(t,e,n){let s=`FIRESTORE (${Bi}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{s+=" CONTEXT: "+JSON.stringify(n)}catch{s+=" CONTEXT: "+n}throw fs(s),new Error(s)}function qe(t,e,n,s){let r="Unexpected state";typeof n=="string"?r=n:s=n,t||wE(e,r,s)}function Pe(t,e){return t}const Y={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class le extends ms{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class is{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}class bE{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class IE{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(xt.UNAUTHENTICATED)))}shutdown(){}}class AN{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class RN{constructor(e){this.t=e,this.currentUser=xt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){qe(this.o===void 0,42304);let s=this.i;const r=l=>this.i!==s?(s=this.i,n(l)):Promise.resolve();let i=new is;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new is,e.enqueueRetryable((()=>r(this.currentUser)))};const o=()=>{const l=i;e.enqueueRetryable((async()=>{await l.promise,await r(this.currentUser)}))},a=l=>{fe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit((l=>a(l))),setTimeout((()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(fe("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new is)}}),0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((s=>this.i!==e?(fe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(qe(typeof s.accessToken=="string",31837,{l:s}),new bE(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return qe(e===null||typeof e=="string",2055,{h:e}),new xt(e)}}class SN{constructor(e,n,s){this.P=e,this.T=n,this.I=s,this.type="FirstParty",this.user=xt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class CN{constructor(e,n,s){this.P=e,this.T=n,this.I=s}getToken(){return Promise.resolve(new SN(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(xt.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class sg{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class PN{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,hn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){qe(this.o===void 0,3512);const s=i=>{i.error!=null&&fe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.m;return this.m=i.token,fe("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable((()=>s(i)))};const r=i=>{fe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((i=>r(i))),setTimeout((()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?r(i):fe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new sg(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(qe(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new sg(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function kN(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let s=0;s<t;s++)n[s]=Math.floor(256*Math.random());return n}class _l{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const r=kN(40);for(let i=0;i<r.length;++i)s.length<20&&r[i]<n&&(s+=e.charAt(r[i]%62))}return s}}function Le(t,e){return t<e?-1:t>e?1:0}function Eh(t,e){const n=Math.min(t.length,e.length);for(let s=0;s<n;s++){const r=t.charAt(s),i=e.charAt(s);if(r!==i)return Su(r)===Su(i)?Le(r,i):Su(r)?1:-1}return Le(t.length,e.length)}const NN=55296,DN=57343;function Su(t){const e=t.charCodeAt(0);return e>=NN&&e<=DN}function Ri(t,e,n){return t.length===e.length&&t.every(((s,r)=>n(s,e[r])))}const rg="__name__";class Dn{constructor(e,n,s){n===void 0?n=0:n>e.length&&Re(637,{offset:n,range:e.length}),s===void 0?s=e.length-n:s>e.length-n&&Re(1746,{length:s,range:e.length-n}),this.segments=e,this.offset=n,this.len=s}get length(){return this.len}isEqual(e){return Dn.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Dn?e.forEach((s=>{n.push(s)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,s=this.limit();n<s;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const s=Math.min(e.length,n.length);for(let r=0;r<s;r++){const i=Dn.compareSegments(e.get(r),n.get(r));if(i!==0)return i}return Le(e.length,n.length)}static compareSegments(e,n){const s=Dn.isNumericId(e),r=Dn.isNumericId(n);return s&&!r?-1:!s&&r?1:s&&r?Dn.extractNumericId(e).compare(Dn.extractNumericId(n)):Eh(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ws.fromString(e.substring(4,e.length-2))}}class Ye extends Dn{construct(e,n,s){return new Ye(e,n,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const s of e){if(s.indexOf("//")>=0)throw new le(Y.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);n.push(...s.split("/").filter((r=>r.length>0)))}return new Ye(n)}static emptyPath(){return new Ye([])}}const ON=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class St extends Dn{construct(e,n,s){return new St(e,n,s)}static isValidIdentifier(e){return ON.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),St.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===rg}static keyField(){return new St([rg])}static fromServerFormat(e){const n=[];let s="",r=0;const i=()=>{if(s.length===0)throw new le(Y.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(s),s=""};let o=!1;for(;r<e.length;){const a=e[r];if(a==="\\"){if(r+1===e.length)throw new le(Y.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[r+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new le(Y.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=l,r+=2}else a==="`"?(o=!o,r++):a!=="."||o?(s+=a,r++):(i(),r++)}if(i(),o)throw new le(Y.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new St(n)}static emptyPath(){return new St([])}}class _e{constructor(e){this.path=e}static fromPath(e){return new _e(Ye.fromString(e))}static fromName(e){return new _e(Ye.fromString(e).popFirst(5))}static empty(){return new _e(Ye.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ye.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ye.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new _e(new Ye(e.slice()))}}function AE(t,e,n){if(!n)throw new le(Y.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function RE(t,e,n,s){if(e===!0&&s===!0)throw new le(Y.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function ig(t){if(!_e.isDocumentKey(t))throw new le(Y.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function og(t){if(_e.isDocumentKey(t))throw new le(Y.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function SE(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function yl(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=(function(s){return s.constructor?s.constructor.name:null})(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Re(12329,{type:typeof t})}function Rn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new le(Y.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=yl(t);throw new le(Y.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function gt(t,e){const n={typeString:t};return e&&(n.value=e),n}function da(t,e){if(!SE(t))throw new le(Y.INVALID_ARGUMENT,"JSON must be an object");let n;for(const s in e)if(e[s]){const r=e[s].typeString,i="value"in e[s]?{value:e[s].value}:void 0;if(!(s in t)){n=`JSON missing required field: '${s}'`;break}const o=t[s];if(r&&typeof o!==r){n=`JSON field '${s}' must be a ${r}.`;break}if(i!==void 0&&o!==i.value){n=`Expected '${s}' field to equal '${i.value}'`;break}}if(n)throw new le(Y.INVALID_ARGUMENT,n);return!0}const ag=-62135596800,cg=1e6;class Je{static now(){return Je.fromMillis(Date.now())}static fromDate(e){return Je.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),s=Math.floor((e-1e3*n)*cg);return new Je(n,s)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new le(Y.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new le(Y.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<ag)throw new le(Y.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new le(Y.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/cg}_compareTo(e){return this.seconds===e.seconds?Le(this.nanoseconds,e.nanoseconds):Le(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Je._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(da(e,Je._jsonSchema))return new Je(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-ag;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Je._jsonSchemaVersion="firestore/timestamp/1.0",Je._jsonSchema={type:gt("string",Je._jsonSchemaVersion),seconds:gt("number"),nanoseconds:gt("number")};class Ce{static fromTimestamp(e){return new Ce(e)}static min(){return new Ce(new Je(0,0))}static max(){return new Ce(new Je(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const Go=-1;function VN(t,e){const n=t.toTimestamp().seconds,s=t.toTimestamp().nanoseconds+1,r=Ce.fromTimestamp(s===1e9?new Je(n+1,0):new Je(n,s));return new Ys(r,_e.empty(),e)}function LN(t){return new Ys(t.readTime,t.key,Go)}class Ys{constructor(e,n,s){this.readTime=e,this.documentKey=n,this.largestBatchId=s}static min(){return new Ys(Ce.min(),_e.empty(),Go)}static max(){return new Ys(Ce.max(),_e.empty(),Go)}}function MN(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=_e.comparator(t.documentKey,e.documentKey),n!==0?n:Le(t.largestBatchId,e.largestBatchId))}const xN="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class FN{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function $i(t){if(t.code!==Y.FAILED_PRECONDITION||t.message!==xN)throw t;fe("LocalStore","Unexpectedly lost primary lease")}class X{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Re(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new X(((s,r)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(s,r)},this.catchCallback=i=>{this.wrapFailure(n,i).next(s,r)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof X?n:X.resolve(n)}catch(n){return X.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):X.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):X.reject(n)}static resolve(e){return new X(((n,s)=>{n(e)}))}static reject(e){return new X(((n,s)=>{s(e)}))}static waitFor(e){return new X(((n,s)=>{let r=0,i=0,o=!1;e.forEach((a=>{++r,a.next((()=>{++i,o&&i===r&&n()}),(l=>s(l)))})),o=!0,i===r&&n()}))}static or(e){let n=X.resolve(!1);for(const s of e)n=n.next((r=>r?X.resolve(r):s()));return n}static forEach(e,n){const s=[];return e.forEach(((r,i)=>{s.push(n.call(this,r,i))})),this.waitFor(s)}static mapArray(e,n){return new X(((s,r)=>{const i=e.length,o=new Array(i);let a=0;for(let l=0;l<i;l++){const u=l;n(e[u]).next((h=>{o[u]=h,++a,a===i&&s(o)}),(h=>r(h)))}}))}static doWhile(e,n){return new X(((s,r)=>{const i=()=>{e()===!0?n().next((()=>{i()}),r):s()};i()}))}}function UN(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Hi(t){return t.name==="IndexedDbTransactionError"}class vl{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>n.writeSequenceNumber(s))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}vl.ce=-1;const kf=-1;function El(t){return t==null}function Fc(t){return t===0&&1/t==-1/0}function BN(t){return typeof t=="number"&&Number.isInteger(t)&&!Fc(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}const CE="";function $N(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=lg(e)),e=HN(t.get(n),e);return lg(e)}function HN(t,e){let n=e;const s=t.length;for(let r=0;r<s;r++){const i=t.charAt(r);switch(i){case"\0":n+="";break;case CE:n+="";break;default:n+=i}}return n}function lg(t){return t+CE+""}function ug(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function sr(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function PE(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}class tt{constructor(e,n){this.comparator=e,this.root=n||kt.EMPTY}insert(e,n){return new tt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,kt.BLACK,null,null))}remove(e){return new tt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,kt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return n.value;s<0?n=n.left:s>0&&(n=n.right)}return null}indexOf(e){let n=0,s=this.root;for(;!s.isEmpty();){const r=this.comparator(e,s.key);if(r===0)return n+s.left.size;r<0?s=s.left:(n+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,s)=>(e(n,s),!1)))}toString(){const e=[];return this.inorderTraversal(((n,s)=>(e.push(`${n}:${s}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Wa(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Wa(this.root,e,this.comparator,!1)}getReverseIterator(){return new Wa(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Wa(this.root,e,this.comparator,!0)}}class Wa{constructor(e,n,s,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?s(e.key,n):1,n&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class kt{constructor(e,n,s,r,i){this.key=e,this.value=n,this.color=s??kt.RED,this.left=r??kt.EMPTY,this.right=i??kt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,s,r,i){return new kt(e??this.key,n??this.value,s??this.color,r??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,s){let r=this;const i=s(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,n,s),null):i===0?r.copy(null,n,null,null,null):r.copy(null,null,null,null,r.right.insert(e,n,s)),r.fixUp()}removeMin(){if(this.left.isEmpty())return kt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let s,r=this;if(n(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),n(e,r.key)===0){if(r.right.isEmpty())return kt.EMPTY;s=r.right.min(),r=r.copy(s.key,s.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,kt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,kt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Re(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Re(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Re(27949);return e+(this.isRed()?0:1)}}kt.EMPTY=null,kt.RED=!0,kt.BLACK=!1;kt.EMPTY=new class{constructor(){this.size=0}get key(){throw Re(57766)}get value(){throw Re(16141)}get color(){throw Re(16727)}get left(){throw Re(29726)}get right(){throw Re(36894)}copy(e,n,s,r,i){return this}insert(e,n,s){return new kt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class bt{constructor(e){this.comparator=e,this.data=new tt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,s)=>(e(n),!1)))}forEachInRange(e,n){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const r=s.getNext();if(this.comparator(r.key,e[1])>=0)return;n(r.key)}}forEachWhile(e,n){let s;for(s=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new hg(this.data.getIterator())}getIteratorFrom(e){return new hg(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((s=>{n=n.add(s)})),n}isEqual(e){if(!(e instanceof bt)||this.size!==e.size)return!1;const n=this.data.getIterator(),s=e.data.getIterator();for(;n.hasNext();){const r=n.getNext().key,i=s.getNext().key;if(this.comparator(r,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new bt(this.comparator);return n.data=e,n}}class hg{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class rn{constructor(e){this.fields=e,e.sort(St.comparator)}static empty(){return new rn([])}unionWith(e){let n=new bt(St.comparator);for(const s of this.fields)n=n.add(s);for(const s of e)n=n.add(s);return new rn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Ri(this.fields,e.fields,((n,s)=>n.isEqual(s)))}}class kE extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Pt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(r){try{return atob(r)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new kE("Invalid base64 string: "+i):i}})(e);return new Pt(n)}static fromUint8Array(e){const n=(function(r){let i="";for(let o=0;o<r.length;++o)i+=String.fromCharCode(r[o]);return i})(e);return new Pt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const s=new Uint8Array(n.length);for(let r=0;r<n.length;r++)s[r]=n.charCodeAt(r);return s})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Le(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Pt.EMPTY_BYTE_STRING=new Pt("");const jN=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Js(t){if(qe(!!t,39018),typeof t=="string"){let e=0;const n=jN.exec(t);if(qe(!!n,46558,{timestamp:t}),n[1]){let r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}const s=new Date(t);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:ht(t.seconds),nanos:ht(t.nanos)}}function ht(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Xs(t){return typeof t=="string"?Pt.fromBase64String(t):Pt.fromUint8Array(t)}const NE="server_timestamp",DE="__type__",OE="__previous_value__",VE="__local_write_time__";function Nf(t){return(t?.mapValue?.fields||{})[DE]?.stringValue===NE}function Tl(t){const e=t.mapValue.fields[OE];return Nf(e)?Tl(e):e}function zo(t){const e=Js(t.mapValue.fields[VE].timestampValue);return new Je(e.seconds,e.nanos)}class qN{constructor(e,n,s,r,i,o,a,l,u,h){this.databaseId=e,this.appId=n,this.persistenceKey=s,this.host=r,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=u,this.isUsingEmulator=h}}const Uc="(default)";class Si{constructor(e,n){this.projectId=e,this.database=n||Uc}static empty(){return new Si("","")}get isDefaultDatabase(){return this.database===Uc}isEqual(e){return e instanceof Si&&e.projectId===this.projectId&&e.database===this.database}}const LE="__type__",WN="__max__",Ga={mapValue:{}},ME="__vector__",Bc="value";function Zs(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Nf(t)?4:zN(t)?9007199254740991:GN(t)?10:11:Re(28295,{value:t})}function Hn(t,e){if(t===e)return!0;const n=Zs(t);if(n!==Zs(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return zo(t).isEqual(zo(e));case 3:return(function(r,i){if(typeof r.timestampValue=="string"&&typeof i.timestampValue=="string"&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const o=Js(r.timestampValue),a=Js(i.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos})(t,e);case 5:return t.stringValue===e.stringValue;case 6:return(function(r,i){return Xs(r.bytesValue).isEqual(Xs(i.bytesValue))})(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return(function(r,i){return ht(r.geoPointValue.latitude)===ht(i.geoPointValue.latitude)&&ht(r.geoPointValue.longitude)===ht(i.geoPointValue.longitude)})(t,e);case 2:return(function(r,i){if("integerValue"in r&&"integerValue"in i)return ht(r.integerValue)===ht(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const o=ht(r.doubleValue),a=ht(i.doubleValue);return o===a?Fc(o)===Fc(a):isNaN(o)&&isNaN(a)}return!1})(t,e);case 9:return Ri(t.arrayValue.values||[],e.arrayValue.values||[],Hn);case 10:case 11:return(function(r,i){const o=r.mapValue.fields||{},a=i.mapValue.fields||{};if(ug(o)!==ug(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!Hn(o[l],a[l])))return!1;return!0})(t,e);default:return Re(52216,{left:t})}}function Ko(t,e){return(t.values||[]).find((n=>Hn(n,e)))!==void 0}function Ci(t,e){if(t===e)return 0;const n=Zs(t),s=Zs(e);if(n!==s)return Le(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return Le(t.booleanValue,e.booleanValue);case 2:return(function(i,o){const a=ht(i.integerValue||i.doubleValue),l=ht(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1})(t,e);case 3:return fg(t.timestampValue,e.timestampValue);case 4:return fg(zo(t),zo(e));case 5:return Eh(t.stringValue,e.stringValue);case 6:return(function(i,o){const a=Xs(i),l=Xs(o);return a.compareTo(l)})(t.bytesValue,e.bytesValue);case 7:return(function(i,o){const a=i.split("/"),l=o.split("/");for(let u=0;u<a.length&&u<l.length;u++){const h=Le(a[u],l[u]);if(h!==0)return h}return Le(a.length,l.length)})(t.referenceValue,e.referenceValue);case 8:return(function(i,o){const a=Le(ht(i.latitude),ht(o.latitude));return a!==0?a:Le(ht(i.longitude),ht(o.longitude))})(t.geoPointValue,e.geoPointValue);case 9:return dg(t.arrayValue,e.arrayValue);case 10:return(function(i,o){const a=i.fields||{},l=o.fields||{},u=a[Bc]?.arrayValue,h=l[Bc]?.arrayValue,f=Le(u?.values?.length||0,h?.values?.length||0);return f!==0?f:dg(u,h)})(t.mapValue,e.mapValue);case 11:return(function(i,o){if(i===Ga.mapValue&&o===Ga.mapValue)return 0;if(i===Ga.mapValue)return 1;if(o===Ga.mapValue)return-1;const a=i.fields||{},l=Object.keys(a),u=o.fields||{},h=Object.keys(u);l.sort(),h.sort();for(let f=0;f<l.length&&f<h.length;++f){const p=Eh(l[f],h[f]);if(p!==0)return p;const g=Ci(a[l[f]],u[h[f]]);if(g!==0)return g}return Le(l.length,h.length)})(t.mapValue,e.mapValue);default:throw Re(23264,{he:n})}}function fg(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Le(t,e);const n=Js(t),s=Js(e),r=Le(n.seconds,s.seconds);return r!==0?r:Le(n.nanos,s.nanos)}function dg(t,e){const n=t.values||[],s=e.values||[];for(let r=0;r<n.length&&r<s.length;++r){const i=Ci(n[r],s[r]);if(i)return i}return Le(n.length,s.length)}function Pi(t){return Th(t)}function Th(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(function(n){const s=Js(n);return`time(${s.seconds},${s.nanos})`})(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?(function(n){return Xs(n).toBase64()})(t.bytesValue):"referenceValue"in t?(function(n){return _e.fromName(n).toString()})(t.referenceValue):"geoPointValue"in t?(function(n){return`geo(${n.latitude},${n.longitude})`})(t.geoPointValue):"arrayValue"in t?(function(n){let s="[",r=!0;for(const i of n.values||[])r?r=!1:s+=",",s+=Th(i);return s+"]"})(t.arrayValue):"mapValue"in t?(function(n){const s=Object.keys(n.fields||{}).sort();let r="{",i=!0;for(const o of s)i?i=!1:r+=",",r+=`${o}:${Th(n.fields[o])}`;return r+"}"})(t.mapValue):Re(61005,{value:t})}function ac(t){switch(Zs(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Tl(t);return e?16+ac(e):16;case 5:return 2*t.stringValue.length;case 6:return Xs(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return(function(s){return(s.values||[]).reduce(((r,i)=>r+ac(i)),0)})(t.arrayValue);case 10:case 11:return(function(s){let r=0;return sr(s.fields,((i,o)=>{r+=i.length+ac(o)})),r})(t.mapValue);default:throw Re(13486,{value:t})}}function pg(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function wh(t){return!!t&&"integerValue"in t}function Df(t){return!!t&&"arrayValue"in t}function mg(t){return!!t&&"nullValue"in t}function gg(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function cc(t){return!!t&&"mapValue"in t}function GN(t){return(t?.mapValue?.fields||{})[LE]?.stringValue===ME}function Po(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return sr(t.mapValue.fields,((n,s)=>e.mapValue.fields[n]=Po(s))),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Po(t.arrayValue.values[n]);return e}return{...t}}function zN(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===WN}class Jt{constructor(e){this.value=e}static empty(){return new Jt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let s=0;s<e.length-1;++s)if(n=(n.mapValue.fields||{})[e.get(s)],!cc(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Po(n)}setAll(e){let n=St.emptyPath(),s={},r=[];e.forEach(((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,s,r),s={},r=[],n=a.popLast()}o?s[a.lastSegment()]=Po(o):r.push(a.lastSegment())}));const i=this.getFieldsMap(n);this.applyChanges(i,s,r)}delete(e){const n=this.field(e.popLast());cc(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Hn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let s=0;s<e.length;++s){let r=n.mapValue.fields[e.get(s)];cc(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},n.mapValue.fields[e.get(s)]=r),n=r}return n.mapValue.fields}applyChanges(e,n,s){sr(n,((r,i)=>e[r]=i));for(const r of s)delete e[r]}clone(){return new Jt(Po(this.value))}}function xE(t){const e=[];return sr(t.fields,((n,s)=>{const r=new St([n]);if(cc(s)){const i=xE(s.mapValue).fields;if(i.length===0)e.push(r);else for(const o of i)e.push(r.child(o))}else e.push(r)})),new rn(e)}class Ut{constructor(e,n,s,r,i,o,a){this.key=e,this.documentType=n,this.version=s,this.readTime=r,this.createTime=i,this.data=o,this.documentState=a}static newInvalidDocument(e){return new Ut(e,0,Ce.min(),Ce.min(),Ce.min(),Jt.empty(),0)}static newFoundDocument(e,n,s,r){return new Ut(e,1,n,Ce.min(),s,r,0)}static newNoDocument(e,n){return new Ut(e,2,n,Ce.min(),Ce.min(),Jt.empty(),0)}static newUnknownDocument(e,n){return new Ut(e,3,n,Ce.min(),Ce.min(),Jt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Ce.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Jt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Jt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ce.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Ut&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ut(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class $c{constructor(e,n){this.position=e,this.inclusive=n}}function _g(t,e,n){let s=0;for(let r=0;r<t.position.length;r++){const i=e[r],o=t.position[r];if(i.field.isKeyField()?s=_e.comparator(_e.fromName(o.referenceValue),n.key):s=Ci(o,n.data.field(i.field)),i.dir==="desc"&&(s*=-1),s!==0)break}return s}function yg(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Hn(t.position[n],e.position[n]))return!1;return!0}class Qo{constructor(e,n="asc"){this.field=e,this.dir=n}}function KN(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}class FE{}class mt extends FE{constructor(e,n,s){super(),this.field=e,this.op=n,this.value=s}static create(e,n,s){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,s):new YN(e,n,s):n==="array-contains"?new ZN(e,s):n==="in"?new eD(e,s):n==="not-in"?new tD(e,s):n==="array-contains-any"?new nD(e,s):new mt(e,n,s)}static createKeyFieldInFilter(e,n,s){return n==="in"?new JN(e,s):new XN(e,s)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Ci(n,this.value)):n!==null&&Zs(this.value)===Zs(n)&&this.matchesComparison(Ci(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Re(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Sn extends FE{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Sn(e,n)}matches(e){return UE(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function UE(t){return t.op==="and"}function BE(t){return QN(t)&&UE(t)}function QN(t){for(const e of t.filters)if(e instanceof Sn)return!1;return!0}function bh(t){if(t instanceof mt)return t.field.canonicalString()+t.op.toString()+Pi(t.value);if(BE(t))return t.filters.map((e=>bh(e))).join(",");{const e=t.filters.map((n=>bh(n))).join(",");return`${t.op}(${e})`}}function $E(t,e){return t instanceof mt?(function(s,r){return r instanceof mt&&s.op===r.op&&s.field.isEqual(r.field)&&Hn(s.value,r.value)})(t,e):t instanceof Sn?(function(s,r){return r instanceof Sn&&s.op===r.op&&s.filters.length===r.filters.length?s.filters.reduce(((i,o,a)=>i&&$E(o,r.filters[a])),!0):!1})(t,e):void Re(19439)}function HE(t){return t instanceof mt?(function(n){return`${n.field.canonicalString()} ${n.op} ${Pi(n.value)}`})(t):t instanceof Sn?(function(n){return n.op.toString()+" {"+n.getFilters().map(HE).join(" ,")+"}"})(t):"Filter"}class YN extends mt{constructor(e,n,s){super(e,n,s),this.key=_e.fromName(s.referenceValue)}matches(e){const n=_e.comparator(e.key,this.key);return this.matchesComparison(n)}}class JN extends mt{constructor(e,n){super(e,"in",n),this.keys=jE("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class XN extends mt{constructor(e,n){super(e,"not-in",n),this.keys=jE("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function jE(t,e){return(e.arrayValue?.values||[]).map((n=>_e.fromName(n.referenceValue)))}class ZN extends mt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Df(n)&&Ko(n.arrayValue,this.value)}}class eD extends mt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Ko(this.value.arrayValue,n)}}class tD extends mt{constructor(e,n){super(e,"not-in",n)}matches(e){if(Ko(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Ko(this.value.arrayValue,n)}}class nD extends mt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Df(n)||!n.arrayValue.values)&&n.arrayValue.values.some((s=>Ko(this.value.arrayValue,s)))}}class sD{constructor(e,n=null,s=[],r=[],i=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=s,this.filters=r,this.limit=i,this.startAt=o,this.endAt=a,this.Te=null}}function vg(t,e=null,n=[],s=[],r=null,i=null,o=null){return new sD(t,e,n,s,r,i,o)}function Of(t){const e=Pe(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((s=>bh(s))).join(","),n+="|ob:",n+=e.orderBy.map((s=>(function(i){return i.field.canonicalString()+i.dir})(s))).join(","),El(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((s=>Pi(s))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((s=>Pi(s))).join(",")),e.Te=n}return e.Te}function Vf(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!KN(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!$E(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!yg(t.startAt,e.startAt)&&yg(t.endAt,e.endAt)}function Ih(t){return _e.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}class ji{constructor(e,n=null,s=[],r=[],i=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=s,this.filters=r,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=l,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function rD(t,e,n,s,r,i,o,a){return new ji(t,e,n,s,r,i,o,a)}function Lf(t){return new ji(t)}function Eg(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function qE(t){return t.collectionGroup!==null}function ko(t){const e=Pe(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const i of e.explicitOrderBy)e.Ie.push(i),n.add(i.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new bt(St.comparator);return o.filters.forEach((l=>{l.getFlattenedFilters().forEach((u=>{u.isInequality()&&(a=a.add(u.field))}))})),a})(e).forEach((i=>{n.has(i.canonicalString())||i.isKeyField()||e.Ie.push(new Qo(i,s))})),n.has(St.keyField().canonicalString())||e.Ie.push(new Qo(St.keyField(),s))}return e.Ie}function Un(t){const e=Pe(t);return e.Ee||(e.Ee=iD(e,ko(t))),e.Ee}function iD(t,e){if(t.limitType==="F")return vg(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map((r=>{const i=r.dir==="desc"?"asc":"desc";return new Qo(r.field,i)}));const n=t.endAt?new $c(t.endAt.position,t.endAt.inclusive):null,s=t.startAt?new $c(t.startAt.position,t.startAt.inclusive):null;return vg(t.path,t.collectionGroup,e,t.filters,t.limit,n,s)}}function Ah(t,e){const n=t.filters.concat([e]);return new ji(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Rh(t,e,n){return new ji(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function wl(t,e){return Vf(Un(t),Un(e))&&t.limitType===e.limitType}function WE(t){return`${Of(Un(t))}|lt:${t.limitType}`}function Zr(t){return`Query(target=${(function(n){let s=n.path.canonicalString();return n.collectionGroup!==null&&(s+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(s+=`, filters: [${n.filters.map((r=>HE(r))).join(", ")}]`),El(n.limit)||(s+=", limit: "+n.limit),n.orderBy.length>0&&(s+=`, orderBy: [${n.orderBy.map((r=>(function(o){return`${o.field.canonicalString()} (${o.dir})`})(r))).join(", ")}]`),n.startAt&&(s+=", startAt: ",s+=n.startAt.inclusive?"b:":"a:",s+=n.startAt.position.map((r=>Pi(r))).join(",")),n.endAt&&(s+=", endAt: ",s+=n.endAt.inclusive?"a:":"b:",s+=n.endAt.position.map((r=>Pi(r))).join(",")),`Target(${s})`})(Un(t))}; limitType=${t.limitType})`}function bl(t,e){return e.isFoundDocument()&&(function(s,r){const i=r.key.path;return s.collectionGroup!==null?r.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(i):_e.isDocumentKey(s.path)?s.path.isEqual(i):s.path.isImmediateParentOf(i)})(t,e)&&(function(s,r){for(const i of ko(s))if(!i.field.isKeyField()&&r.data.field(i.field)===null)return!1;return!0})(t,e)&&(function(s,r){for(const i of s.filters)if(!i.matches(r))return!1;return!0})(t,e)&&(function(s,r){return!(s.startAt&&!(function(o,a,l){const u=_g(o,a,l);return o.inclusive?u<=0:u<0})(s.startAt,ko(s),r)||s.endAt&&!(function(o,a,l){const u=_g(o,a,l);return o.inclusive?u>=0:u>0})(s.endAt,ko(s),r))})(t,e)}function oD(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function GE(t){return(e,n)=>{let s=!1;for(const r of ko(t)){const i=aD(r,e,n);if(i!==0)return i;s=s||r.field.isKeyField()}return 0}}function aD(t,e,n){const s=t.field.isKeyField()?_e.comparator(e.key,n.key):(function(i,o,a){const l=o.data.field(i),u=a.data.field(i);return l!==null&&u!==null?Ci(l,u):Re(42886)})(t.field,e,n);switch(t.dir){case"asc":return s;case"desc":return-1*s;default:return Re(19790,{direction:t.dir})}}class $r{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s!==void 0){for(const[r,i]of s)if(this.equalsFn(r,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const s=this.mapKeyFn(e),r=this.inner[s];if(r===void 0)return this.inner[s]=[[e,n]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,n]);r.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return!1;for(let r=0;r<s.length;r++)if(this.equalsFn(s[r][0],e))return s.length===1?delete this.inner[n]:s.splice(r,1),this.innerSize--,!0;return!1}forEach(e){sr(this.inner,((n,s)=>{for(const[r,i]of s)e(r,i)}))}isEmpty(){return PE(this.inner)}size(){return this.innerSize}}const cD=new tt(_e.comparator);function ds(){return cD}const zE=new tt(_e.comparator);function yo(...t){let e=zE;for(const n of t)e=e.insert(n.key,n);return e}function KE(t){let e=zE;return t.forEach(((n,s)=>e=e.insert(n,s.overlayedDocument))),e}function Tr(){return No()}function QE(){return No()}function No(){return new $r((t=>t.toString()),((t,e)=>t.isEqual(e)))}const lD=new tt(_e.comparator),uD=new bt(_e.comparator);function Me(...t){let e=uD;for(const n of t)e=e.add(n);return e}const hD=new bt(Le);function fD(){return hD}function Mf(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Fc(e)?"-0":e}}function YE(t){return{integerValue:""+t}}function dD(t,e){return BN(e)?YE(e):Mf(t,e)}class Il{constructor(){this._=void 0}}function pD(t,e,n){return t instanceof Yo?(function(r,i){const o={fields:{[DE]:{stringValue:NE},[VE]:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&Nf(i)&&(i=Tl(i)),i&&(o.fields[OE]=i),{mapValue:o}})(n,e):t instanceof Jo?XE(t,e):t instanceof Xo?ZE(t,e):(function(r,i){const o=JE(r,i),a=Tg(o)+Tg(r.Ae);return wh(o)&&wh(r.Ae)?YE(a):Mf(r.serializer,a)})(t,e)}function mD(t,e,n){return t instanceof Jo?XE(t,e):t instanceof Xo?ZE(t,e):n}function JE(t,e){return t instanceof Hc?(function(s){return wh(s)||(function(i){return!!i&&"doubleValue"in i})(s)})(e)?e:{integerValue:0}:null}class Yo extends Il{}class Jo extends Il{constructor(e){super(),this.elements=e}}function XE(t,e){const n=eT(e);for(const s of t.elements)n.some((r=>Hn(r,s)))||n.push(s);return{arrayValue:{values:n}}}class Xo extends Il{constructor(e){super(),this.elements=e}}function ZE(t,e){let n=eT(e);for(const s of t.elements)n=n.filter((r=>!Hn(r,s)));return{arrayValue:{values:n}}}class Hc extends Il{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function Tg(t){return ht(t.integerValue||t.doubleValue)}function eT(t){return Df(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}class gD{constructor(e,n){this.field=e,this.transform=n}}function _D(t,e){return t.field.isEqual(e.field)&&(function(s,r){return s instanceof Jo&&r instanceof Jo||s instanceof Xo&&r instanceof Xo?Ri(s.elements,r.elements,Hn):s instanceof Hc&&r instanceof Hc?Hn(s.Ae,r.Ae):s instanceof Yo&&r instanceof Yo})(t.transform,e.transform)}class yD{constructor(e,n){this.version=e,this.transformResults=n}}class yn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new yn}static exists(e){return new yn(void 0,e)}static updateTime(e){return new yn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function lc(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Al{}function tT(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new xf(t.key,yn.none()):new pa(t.key,t.data,yn.none());{const n=t.data,s=Jt.empty();let r=new bt(St.comparator);for(let i of e.fields)if(!r.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?s.delete(i):s.set(i,o),r=r.add(i)}return new rr(t.key,s,new rn(r.toArray()),yn.none())}}function vD(t,e,n){t instanceof pa?(function(r,i,o){const a=r.value.clone(),l=bg(r.fieldTransforms,i,o.transformResults);a.setAll(l),i.convertToFoundDocument(o.version,a).setHasCommittedMutations()})(t,e,n):t instanceof rr?(function(r,i,o){if(!lc(r.precondition,i))return void i.convertToUnknownDocument(o.version);const a=bg(r.fieldTransforms,i,o.transformResults),l=i.data;l.setAll(nT(r)),l.setAll(a),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()})(t,e,n):(function(r,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()})(0,e,n)}function Do(t,e,n,s){return t instanceof pa?(function(i,o,a,l){if(!lc(i.precondition,o))return a;const u=i.value.clone(),h=Ig(i.fieldTransforms,l,o);return u.setAll(h),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null})(t,e,n,s):t instanceof rr?(function(i,o,a,l){if(!lc(i.precondition,o))return a;const u=Ig(i.fieldTransforms,l,o),h=o.data;return h.setAll(nT(i)),h.setAll(u),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),a===null?null:a.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map((f=>f.field)))})(t,e,n,s):(function(i,o,a){return lc(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a})(t,e,n)}function ED(t,e){let n=null;for(const s of t.fieldTransforms){const r=e.data.field(s.field),i=JE(s.transform,r||null);i!=null&&(n===null&&(n=Jt.empty()),n.set(s.field,i))}return n||null}function wg(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!(function(s,r){return s===void 0&&r===void 0||!(!s||!r)&&Ri(s,r,((i,o)=>_D(i,o)))})(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class pa extends Al{constructor(e,n,s,r=[]){super(),this.key=e,this.value=n,this.precondition=s,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class rr extends Al{constructor(e,n,s,r,i=[]){super(),this.key=e,this.data=n,this.fieldMask=s,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function nT(t){const e=new Map;return t.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const s=t.data.field(n);e.set(n,s)}})),e}function bg(t,e,n){const s=new Map;qe(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let r=0;r<n.length;r++){const i=t[r],o=i.transform,a=e.data.field(i.field);s.set(i.field,mD(o,a,n[r]))}return s}function Ig(t,e,n){const s=new Map;for(const r of t){const i=r.transform,o=n.data.field(r.field);s.set(r.field,pD(i,o,e))}return s}class xf extends Al{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class TD extends Al{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class wD{constructor(e,n,s,r){this.batchId=e,this.localWriteTime=n,this.baseMutations=s,this.mutations=r}applyToRemoteDocument(e,n){const s=n.mutationResults;for(let r=0;r<this.mutations.length;r++){const i=this.mutations[r];i.key.isEqual(e.key)&&vD(i,e,s[r])}}applyToLocalView(e,n){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(n=Do(s,e,n,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(n=Do(s,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const s=QE();return this.mutations.forEach((r=>{const i=e.get(r.key),o=i.overlayedDocument;let a=this.applyToLocalView(o,i.mutatedFields);a=n.has(r.key)?null:a;const l=tT(o,a);l!==null&&s.set(r.key,l),o.isValidDocument()||o.convertToNoDocument(Ce.min())})),s}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),Me())}isEqual(e){return this.batchId===e.batchId&&Ri(this.mutations,e.mutations,((n,s)=>wg(n,s)))&&Ri(this.baseMutations,e.baseMutations,((n,s)=>wg(n,s)))}}class Ff{constructor(e,n,s,r){this.batch=e,this.commitVersion=n,this.mutationResults=s,this.docVersions=r}static from(e,n,s){qe(e.mutations.length===s.length,58842,{me:e.mutations.length,fe:s.length});let r=(function(){return lD})();const i=e.mutations;for(let o=0;o<i.length;o++)r=r.insert(i[o].key,s[o].version);return new Ff(e,n,s,r)}}class bD{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class ID{constructor(e,n){this.count=e,this.unchangedNames=n}}var dt,xe;function AD(t){switch(t){case Y.OK:return Re(64938);case Y.CANCELLED:case Y.UNKNOWN:case Y.DEADLINE_EXCEEDED:case Y.RESOURCE_EXHAUSTED:case Y.INTERNAL:case Y.UNAVAILABLE:case Y.UNAUTHENTICATED:return!1;case Y.INVALID_ARGUMENT:case Y.NOT_FOUND:case Y.ALREADY_EXISTS:case Y.PERMISSION_DENIED:case Y.FAILED_PRECONDITION:case Y.ABORTED:case Y.OUT_OF_RANGE:case Y.UNIMPLEMENTED:case Y.DATA_LOSS:return!0;default:return Re(15467,{code:t})}}function sT(t){if(t===void 0)return fs("GRPC error has no .code"),Y.UNKNOWN;switch(t){case dt.OK:return Y.OK;case dt.CANCELLED:return Y.CANCELLED;case dt.UNKNOWN:return Y.UNKNOWN;case dt.DEADLINE_EXCEEDED:return Y.DEADLINE_EXCEEDED;case dt.RESOURCE_EXHAUSTED:return Y.RESOURCE_EXHAUSTED;case dt.INTERNAL:return Y.INTERNAL;case dt.UNAVAILABLE:return Y.UNAVAILABLE;case dt.UNAUTHENTICATED:return Y.UNAUTHENTICATED;case dt.INVALID_ARGUMENT:return Y.INVALID_ARGUMENT;case dt.NOT_FOUND:return Y.NOT_FOUND;case dt.ALREADY_EXISTS:return Y.ALREADY_EXISTS;case dt.PERMISSION_DENIED:return Y.PERMISSION_DENIED;case dt.FAILED_PRECONDITION:return Y.FAILED_PRECONDITION;case dt.ABORTED:return Y.ABORTED;case dt.OUT_OF_RANGE:return Y.OUT_OF_RANGE;case dt.UNIMPLEMENTED:return Y.UNIMPLEMENTED;case dt.DATA_LOSS:return Y.DATA_LOSS;default:return Re(39323,{code:t})}}(xe=dt||(dt={}))[xe.OK=0]="OK",xe[xe.CANCELLED=1]="CANCELLED",xe[xe.UNKNOWN=2]="UNKNOWN",xe[xe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",xe[xe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",xe[xe.NOT_FOUND=5]="NOT_FOUND",xe[xe.ALREADY_EXISTS=6]="ALREADY_EXISTS",xe[xe.PERMISSION_DENIED=7]="PERMISSION_DENIED",xe[xe.UNAUTHENTICATED=16]="UNAUTHENTICATED",xe[xe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",xe[xe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",xe[xe.ABORTED=10]="ABORTED",xe[xe.OUT_OF_RANGE=11]="OUT_OF_RANGE",xe[xe.UNIMPLEMENTED=12]="UNIMPLEMENTED",xe[xe.INTERNAL=13]="INTERNAL",xe[xe.UNAVAILABLE=14]="UNAVAILABLE",xe[xe.DATA_LOSS=15]="DATA_LOSS";function RD(){return new TextEncoder}const SD=new Ws([4294967295,4294967295],0);function Ag(t){const e=RD().encode(t),n=new gE;return n.update(e),new Uint8Array(n.digest())}function Rg(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),s=e.getUint32(4,!0),r=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new Ws([n,s],0),new Ws([r,i],0)]}class Uf{constructor(e,n,s){if(this.bitmap=e,this.padding=n,this.hashCount=s,n<0||n>=8)throw new vo(`Invalid padding: ${n}`);if(s<0)throw new vo(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new vo(`Invalid hash count: ${s}`);if(e.length===0&&n!==0)throw new vo(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Ws.fromNumber(this.ge)}ye(e,n,s){let r=e.add(n.multiply(Ws.fromNumber(s)));return r.compare(SD)===1&&(r=new Ws([r.getBits(0),r.getBits(1)],0)),r.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=Ag(e),[s,r]=Rg(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(s,r,i);if(!this.we(o))return!1}return!0}static create(e,n,s){const r=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new Uf(i,r,n);return s.forEach((a=>o.insert(a))),o}insert(e){if(this.ge===0)return;const n=Ag(e),[s,r]=Rg(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(s,r,i);this.Se(o)}}Se(e){const n=Math.floor(e/8),s=e%8;this.bitmap[n]|=1<<s}}class vo extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Rl{constructor(e,n,s,r,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=s,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,s){const r=new Map;return r.set(e,ma.createSynthesizedTargetChangeForCurrentChange(e,n,s)),new Rl(Ce.min(),r,new tt(Le),ds(),Me())}}class ma{constructor(e,n,s,r,i){this.resumeToken=e,this.current=n,this.addedDocuments=s,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,s){return new ma(s,n,Me(),Me(),Me())}}class uc{constructor(e,n,s,r){this.be=e,this.removedTargetIds=n,this.key=s,this.De=r}}class rT{constructor(e,n){this.targetId=e,this.Ce=n}}class iT{constructor(e,n,s=Pt.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=n,this.resumeToken=s,this.cause=r}}class Sg{constructor(){this.ve=0,this.Fe=Cg(),this.Me=Pt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Me(),n=Me(),s=Me();return this.Fe.forEach(((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:n=n.add(r);break;case 1:s=s.add(r);break;default:Re(38017,{changeType:i})}})),new ma(this.Me,this.xe,e,n,s)}qe(){this.Oe=!1,this.Fe=Cg()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,qe(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class CD{constructor(e){this.Ge=e,this.ze=new Map,this.je=ds(),this.Je=za(),this.He=za(),this.Ye=new tt(Le)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const s=this.nt(n);switch(e.state){case 0:this.rt(n)&&s.Le(e.resumeToken);break;case 1:s.Ke(),s.Ne||s.qe(),s.Le(e.resumeToken);break;case 2:s.Ke(),s.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(s.We(),s.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),s.Le(e.resumeToken));break;default:Re(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((s,r)=>{this.rt(r)&&n(r)}))}st(e){const n=e.targetId,s=e.Ce.count,r=this.ot(n);if(r){const i=r.target;if(Ih(i))if(s===0){const o=new _e(i.path);this.et(n,o,Ut.newNoDocument(o,Ce.min()))}else qe(s===1,20013,{expectedCount:s});else{const o=this._t(n);if(o!==s){const a=this.ut(e),l=a?this.ct(a,e,o):1;if(l!==0){this.it(n);const u=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,u)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:s="",padding:r=0},hashCount:i=0}=n;let o,a;try{o=Xs(s).toUint8Array()}catch(l){if(l instanceof kE)return Lr("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new Uf(o,r,i)}catch(l){return Lr(l instanceof vo?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.ge===0?null:a}ct(e,n,s){return n.Ce.count===s-this.Pt(e,n.targetId)?0:2}Pt(e,n){const s=this.Ge.getRemoteKeysForTarget(n);let r=0;return s.forEach((i=>{const o=this.Ge.ht(),a=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(a)||(this.et(n,i,null),r++)})),r}Tt(e){const n=new Map;this.ze.forEach(((i,o)=>{const a=this.ot(o);if(a){if(i.current&&Ih(a.target)){const l=new _e(a.target.path);this.It(l).has(o)||this.Et(o,l)||this.et(o,l,Ut.newNoDocument(l,e))}i.Be&&(n.set(o,i.ke()),i.qe())}}));let s=Me();this.He.forEach(((i,o)=>{let a=!0;o.forEachWhile((l=>{const u=this.ot(l);return!u||u.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)})),a&&(s=s.add(i))})),this.je.forEach(((i,o)=>o.setReadTime(e)));const r=new Rl(e,n,this.Ye,this.je,s);return this.je=ds(),this.Je=za(),this.He=za(),this.Ye=new tt(Le),r}Xe(e,n){if(!this.rt(e))return;const s=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,s),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,s){if(!this.rt(e))return;const r=this.nt(e);this.Et(e,n)?r.Qe(n,1):r.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),s&&(this.je=this.je.insert(n,s))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new Sg,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new bt(Le),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new bt(Le),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||fe("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Sg),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function za(){return new tt(_e.comparator)}function Cg(){return new tt(_e.comparator)}const PD={asc:"ASCENDING",desc:"DESCENDING"},kD={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},ND={and:"AND",or:"OR"};class DD{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Sh(t,e){return t.useProto3Json||El(e)?e:{value:e}}function jc(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function oT(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function OD(t,e){return jc(t,e.toTimestamp())}function Bn(t){return qe(!!t,49232),Ce.fromTimestamp((function(n){const s=Js(n);return new Je(s.seconds,s.nanos)})(t))}function Bf(t,e){return Ch(t,e).canonicalString()}function Ch(t,e){const n=(function(r){return new Ye(["projects",r.projectId,"databases",r.database])})(t).child("documents");return e===void 0?n:n.child(e)}function aT(t){const e=Ye.fromString(t);return qe(fT(e),10190,{key:e.toString()}),e}function Ph(t,e){return Bf(t.databaseId,e.path)}function Cu(t,e){const n=aT(e);if(n.get(1)!==t.databaseId.projectId)throw new le(Y.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new le(Y.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new _e(lT(n))}function cT(t,e){return Bf(t.databaseId,e)}function VD(t){const e=aT(t);return e.length===4?Ye.emptyPath():lT(e)}function kh(t){return new Ye(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function lT(t){return qe(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function Pg(t,e,n){return{name:Ph(t,e),fields:n.value.mapValue.fields}}function LD(t,e){let n;if("targetChange"in e){e.targetChange;const s=(function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:Re(39313,{state:u})})(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],i=(function(u,h){return u.useProto3Json?(qe(h===void 0||typeof h=="string",58123),Pt.fromBase64String(h||"")):(qe(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),Pt.fromUint8Array(h||new Uint8Array))})(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&(function(u){const h=u.code===void 0?Y.UNKNOWN:sT(u.code);return new le(h,u.message||"")})(o);n=new iT(s,r,i,a||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const r=Cu(t,s.document.name),i=Bn(s.document.updateTime),o=s.document.createTime?Bn(s.document.createTime):Ce.min(),a=new Jt({mapValue:{fields:s.document.fields}}),l=Ut.newFoundDocument(r,i,o,a),u=s.targetIds||[],h=s.removedTargetIds||[];n=new uc(u,h,l.key,l)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const r=Cu(t,s.document),i=s.readTime?Bn(s.readTime):Ce.min(),o=Ut.newNoDocument(r,i),a=s.removedTargetIds||[];n=new uc([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const r=Cu(t,s.document),i=s.removedTargetIds||[];n=new uc([],i,r,null)}else{if(!("filter"in e))return Re(11601,{Rt:e});{e.filter;const s=e.filter;s.targetId;const{count:r=0,unchangedNames:i}=s,o=new ID(r,i),a=s.targetId;n=new rT(a,o)}}return n}function MD(t,e){let n;if(e instanceof pa)n={update:Pg(t,e.key,e.value)};else if(e instanceof xf)n={delete:Ph(t,e.key)};else if(e instanceof rr)n={update:Pg(t,e.key,e.data),updateMask:WD(e.fieldMask)};else{if(!(e instanceof TD))return Re(16599,{Vt:e.type});n={verify:Ph(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((s=>(function(i,o){const a=o.transform;if(a instanceof Yo)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Jo)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Xo)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Hc)return{fieldPath:o.field.canonicalString(),increment:a.Ae};throw Re(20930,{transform:o.transform})})(0,s)))),e.precondition.isNone||(n.currentDocument=(function(r,i){return i.updateTime!==void 0?{updateTime:OD(r,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:Re(27497)})(t,e.precondition)),n}function xD(t,e){return t&&t.length>0?(qe(e!==void 0,14353),t.map((n=>(function(r,i){let o=r.updateTime?Bn(r.updateTime):Bn(i);return o.isEqual(Ce.min())&&(o=Bn(i)),new yD(o,r.transformResults||[])})(n,e)))):[]}function FD(t,e){return{documents:[cT(t,e.path)]}}function UD(t,e){const n={structuredQuery:{}},s=e.path;let r;e.collectionGroup!==null?(r=s,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=s.popLast(),n.structuredQuery.from=[{collectionId:s.lastSegment()}]),n.parent=cT(t,r);const i=(function(u){if(u.length!==0)return hT(Sn.create(u,"and"))})(e.filters);i&&(n.structuredQuery.where=i);const o=(function(u){if(u.length!==0)return u.map((h=>(function(p){return{field:ei(p.field),direction:HD(p.dir)}})(h)))})(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=Sh(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=(function(u){return{before:u.inclusive,values:u.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(u){return{before:!u.inclusive,values:u.position}})(e.endAt)),{ft:n,parent:r}}function BD(t){let e=VD(t.parent);const n=t.structuredQuery,s=n.from?n.from.length:0;let r=null;if(s>0){qe(s===1,65062);const h=n.from[0];h.allDescendants?r=h.collectionId:e=e.child(h.collectionId)}let i=[];n.where&&(i=(function(f){const p=uT(f);return p instanceof Sn&&BE(p)?p.getFilters():[p]})(n.where));let o=[];n.orderBy&&(o=(function(f){return f.map((p=>(function(A){return new Qo(ti(A.field),(function(D){switch(D){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(A.direction))})(p)))})(n.orderBy));let a=null;n.limit&&(a=(function(f){let p;return p=typeof f=="object"?f.value:f,El(p)?null:p})(n.limit));let l=null;n.startAt&&(l=(function(f){const p=!!f.before,g=f.values||[];return new $c(g,p)})(n.startAt));let u=null;return n.endAt&&(u=(function(f){const p=!f.before,g=f.values||[];return new $c(g,p)})(n.endAt)),rD(e,r,o,i,a,"F",l,u)}function $D(t,e){const n=(function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Re(28987,{purpose:r})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function uT(t){return t.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const s=ti(n.unaryFilter.field);return mt.create(s,"==",{doubleValue:NaN});case"IS_NULL":const r=ti(n.unaryFilter.field);return mt.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=ti(n.unaryFilter.field);return mt.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=ti(n.unaryFilter.field);return mt.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Re(61313);default:return Re(60726)}})(t):t.fieldFilter!==void 0?(function(n){return mt.create(ti(n.fieldFilter.field),(function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Re(58110);default:return Re(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(t):t.compositeFilter!==void 0?(function(n){return Sn.create(n.compositeFilter.filters.map((s=>uT(s))),(function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return Re(1026)}})(n.compositeFilter.op))})(t):Re(30097,{filter:t})}function HD(t){return PD[t]}function jD(t){return kD[t]}function qD(t){return ND[t]}function ei(t){return{fieldPath:t.canonicalString()}}function ti(t){return St.fromServerFormat(t.fieldPath)}function hT(t){return t instanceof mt?(function(n){if(n.op==="=="){if(gg(n.value))return{unaryFilter:{field:ei(n.field),op:"IS_NAN"}};if(mg(n.value))return{unaryFilter:{field:ei(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(gg(n.value))return{unaryFilter:{field:ei(n.field),op:"IS_NOT_NAN"}};if(mg(n.value))return{unaryFilter:{field:ei(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ei(n.field),op:jD(n.op),value:n.value}}})(t):t instanceof Sn?(function(n){const s=n.getFilters().map((r=>hT(r)));return s.length===1?s[0]:{compositeFilter:{op:qD(n.op),filters:s}}})(t):Re(54877,{filter:t})}function WD(t){const e=[];return t.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function fT(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}class Fs{constructor(e,n,s,r,i=Ce.min(),o=Ce.min(),a=Pt.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=s,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new Fs(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Fs(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Fs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Fs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class GD{constructor(e){this.yt=e}}function zD(t){const e=BD({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Rh(e,e.limit,"L"):e}class KD{constructor(){this.Cn=new QD}addToCollectionParentIndex(e,n){return this.Cn.add(n),X.resolve()}getCollectionParents(e,n){return X.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return X.resolve()}deleteFieldIndex(e,n){return X.resolve()}deleteAllFieldIndexes(e){return X.resolve()}createTargetIndexes(e,n){return X.resolve()}getDocumentsMatchingTarget(e,n){return X.resolve(null)}getIndexType(e,n){return X.resolve(0)}getFieldIndexes(e,n){return X.resolve([])}getNextCollectionGroupToUpdate(e){return X.resolve(null)}getMinOffset(e,n){return X.resolve(Ys.min())}getMinOffsetFromCollectionGroup(e,n){return X.resolve(Ys.min())}updateCollectionGroup(e,n,s){return X.resolve()}updateIndexEntries(e,n){return X.resolve()}}class QD{constructor(){this.index={}}add(e){const n=e.lastSegment(),s=e.popLast(),r=this.index[n]||new bt(Ye.comparator),i=!r.has(s);return this.index[n]=r.add(s),i}has(e){const n=e.lastSegment(),s=e.popLast(),r=this.index[n];return r&&r.has(s)}getEntries(e){return(this.index[e]||new bt(Ye.comparator)).toArray()}}const kg={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},dT=41943040;class Qt{static withCacheSize(e){return new Qt(e,Qt.DEFAULT_COLLECTION_PERCENTILE,Qt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=s}}Qt.DEFAULT_COLLECTION_PERCENTILE=10,Qt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Qt.DEFAULT=new Qt(dT,Qt.DEFAULT_COLLECTION_PERCENTILE,Qt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Qt.DISABLED=new Qt(-1,0,0);class ki{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new ki(0)}static cr(){return new ki(-1)}}const Ng="LruGarbageCollector",YD=1048576;function Dg([t,e],[n,s]){const r=Le(t,n);return r===0?Le(e,s):r}class JD{constructor(e){this.Ir=e,this.buffer=new bt(Dg),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const s=this.buffer.last();Dg(n,s)<0&&(this.buffer=this.buffer.delete(s).add(n))}}get maxValue(){return this.buffer.last()[0]}}class XD{constructor(e,n,s){this.garbageCollector=e,this.asyncQueue=n,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){fe(Ng,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Hi(n)?fe(Ng,"Ignoring IndexedDB error during garbage collection: ",n):await $i(n)}await this.Vr(3e5)}))}}class ZD{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next((s=>Math.floor(n/100*s)))}nthSequenceNumber(e,n){if(n===0)return X.resolve(vl.ce);const s=new JD(n);return this.mr.forEachTarget(e,(r=>s.Ar(r.sequenceNumber))).next((()=>this.mr.pr(e,(r=>s.Ar(r))))).next((()=>s.maxValue))}removeTargets(e,n,s){return this.mr.removeTargets(e,n,s)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(fe("LruGarbageCollector","Garbage collection skipped; disabled"),X.resolve(kg)):this.getCacheSize(e).next((s=>s<this.params.cacheSizeCollectionThreshold?(fe("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),kg):this.yr(e,n)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let s,r,i,o,a,l,u;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((f=>(f>this.params.maximumSequenceNumbersToCollect?(fe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),r=this.params.maximumSequenceNumbersToCollect):r=f,o=Date.now(),this.nthSequenceNumber(e,r)))).next((f=>(s=f,a=Date.now(),this.removeTargets(e,s,n)))).next((f=>(i=f,l=Date.now(),this.removeOrphanedDocuments(e,s)))).next((f=>(u=Date.now(),Xr()<=Ve.DEBUG&&fe("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-h}ms
	Determined least recently used ${r} in `+(a-o)+`ms
	Removed ${i} targets in `+(l-a)+`ms
	Removed ${f} documents in `+(u-l)+`ms
Total Duration: ${u-h}ms`),X.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:f}))))}}function eO(t,e){return new ZD(t,e)}class tO{constructor(){this.changes=new $r((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Ut.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const s=this.changes.get(n);return s!==void 0?X.resolve(s):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class nO{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}class sO{constructor(e,n,s,r){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=s,this.indexManager=r}getDocument(e,n){let s=null;return this.documentOverlayCache.getOverlay(e,n).next((r=>(s=r,this.remoteDocumentCache.getEntry(e,n)))).next((r=>(s!==null&&Do(s.mutation,r,rn.empty(),Je.now()),r)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((s=>this.getLocalViewOfDocuments(e,s,Me()).next((()=>s))))}getLocalViewOfDocuments(e,n,s=Me()){const r=Tr();return this.populateOverlays(e,r,n).next((()=>this.computeViews(e,n,r,s).next((i=>{let o=yo();return i.forEach(((a,l)=>{o=o.insert(a,l.overlayedDocument)})),o}))))}getOverlayedDocuments(e,n){const s=Tr();return this.populateOverlays(e,s,n).next((()=>this.computeViews(e,n,s,Me())))}populateOverlays(e,n,s){const r=[];return s.forEach((i=>{n.has(i)||r.push(i)})),this.documentOverlayCache.getOverlays(e,r).next((i=>{i.forEach(((o,a)=>{n.set(o,a)}))}))}computeViews(e,n,s,r){let i=ds();const o=No(),a=(function(){return No()})();return n.forEach(((l,u)=>{const h=s.get(u.key);r.has(u.key)&&(h===void 0||h.mutation instanceof rr)?i=i.insert(u.key,u):h!==void 0?(o.set(u.key,h.mutation.getFieldMask()),Do(h.mutation,u,h.mutation.getFieldMask(),Je.now())):o.set(u.key,rn.empty())})),this.recalculateAndSaveOverlays(e,i).next((l=>(l.forEach(((u,h)=>o.set(u,h))),n.forEach(((u,h)=>a.set(u,new nO(h,o.get(u)??null)))),a)))}recalculateAndSaveOverlays(e,n){const s=No();let r=new tt(((o,a)=>o-a)),i=Me();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((o=>{for(const a of o)a.keys().forEach((l=>{const u=n.get(l);if(u===null)return;let h=s.get(l)||rn.empty();h=a.applyToLocalView(u,h),s.set(l,h);const f=(r.get(a.batchId)||Me()).add(l);r=r.insert(a.batchId,f)}))})).next((()=>{const o=[],a=r.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),u=l.key,h=l.value,f=QE();h.forEach((p=>{if(!i.has(p)){const g=tT(n.get(p),s.get(p));g!==null&&f.set(p,g),i=i.add(p)}})),o.push(this.documentOverlayCache.saveOverlays(e,u,f))}return X.waitFor(o)})).next((()=>s))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((s=>this.recalculateAndSaveOverlays(e,s)))}getDocumentsMatchingQuery(e,n,s,r){return(function(o){return _e.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):qE(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,s,r):this.getDocumentsMatchingCollectionQuery(e,n,s,r)}getNextDocuments(e,n,s,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,s,r).next((i=>{const o=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,s.largestBatchId,r-i.size):X.resolve(Tr());let a=Go,l=i;return o.next((u=>X.forEach(u,((h,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),i.get(h)?X.resolve():this.remoteDocumentCache.getEntry(e,h).next((p=>{l=l.insert(h,p)}))))).next((()=>this.populateOverlays(e,u,i))).next((()=>this.computeViews(e,l,u,Me()))).next((h=>({batchId:a,changes:KE(h)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new _e(n)).next((s=>{let r=yo();return s.isFoundDocument()&&(r=r.insert(s.key,s)),r}))}getDocumentsMatchingCollectionGroupQuery(e,n,s,r){const i=n.collectionGroup;let o=yo();return this.indexManager.getCollectionParents(e,i).next((a=>X.forEach(a,(l=>{const u=(function(f,p){return new ji(p,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)})(n,l.child(i));return this.getDocumentsMatchingCollectionQuery(e,u,s,r).next((h=>{h.forEach(((f,p)=>{o=o.insert(f,p)}))}))})).next((()=>o))))}getDocumentsMatchingCollectionQuery(e,n,s,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,s.largestBatchId).next((o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,s,i,r)))).next((o=>{i.forEach(((l,u)=>{const h=u.getKey();o.get(h)===null&&(o=o.insert(h,Ut.newInvalidDocument(h)))}));let a=yo();return o.forEach(((l,u)=>{const h=i.get(l);h!==void 0&&Do(h.mutation,u,rn.empty(),Je.now()),bl(n,u)&&(a=a.insert(l,u))})),a}))}}class rO{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return X.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,(function(r){return{id:r.id,version:r.version,createTime:Bn(r.createTime)}})(n)),X.resolve()}getNamedQuery(e,n){return X.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,(function(r){return{name:r.name,query:zD(r.bundledQuery),readTime:Bn(r.readTime)}})(n)),X.resolve()}}class iO{constructor(){this.overlays=new tt(_e.comparator),this.qr=new Map}getOverlay(e,n){return X.resolve(this.overlays.get(n))}getOverlays(e,n){const s=Tr();return X.forEach(n,(r=>this.getOverlay(e,r).next((i=>{i!==null&&s.set(r,i)})))).next((()=>s))}saveOverlays(e,n,s){return s.forEach(((r,i)=>{this.St(e,n,i)})),X.resolve()}removeOverlaysForBatchId(e,n,s){const r=this.qr.get(s);return r!==void 0&&(r.forEach((i=>this.overlays=this.overlays.remove(i))),this.qr.delete(s)),X.resolve()}getOverlaysForCollection(e,n,s){const r=Tr(),i=n.length+1,o=new _e(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,u=l.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===i&&l.largestBatchId>s&&r.set(l.getKey(),l)}return X.resolve(r)}getOverlaysForCollectionGroup(e,n,s,r){let i=new tt(((u,h)=>u-h));const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>s){let h=i.get(u.largestBatchId);h===null&&(h=Tr(),i=i.insert(u.largestBatchId,h)),h.set(u.getKey(),u)}}const a=Tr(),l=i.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach(((u,h)=>a.set(u,h))),!(a.size()>=r)););return X.resolve(a)}St(e,n,s){const r=this.overlays.get(s.key);if(r!==null){const o=this.qr.get(r.largestBatchId).delete(s.key);this.qr.set(r.largestBatchId,o)}this.overlays=this.overlays.insert(s.key,new bD(n,s));let i=this.qr.get(n);i===void 0&&(i=Me(),this.qr.set(n,i)),this.qr.set(n,i.add(s.key))}}class oO{constructor(){this.sessionToken=Pt.EMPTY_BYTE_STRING}getSessionToken(e){return X.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,X.resolve()}}class $f{constructor(){this.Qr=new bt(Rt.$r),this.Ur=new bt(Rt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const s=new Rt(e,n);this.Qr=this.Qr.add(s),this.Ur=this.Ur.add(s)}Wr(e,n){e.forEach((s=>this.addReference(s,n)))}removeReference(e,n){this.Gr(new Rt(e,n))}zr(e,n){e.forEach((s=>this.removeReference(s,n)))}jr(e){const n=new _e(new Ye([])),s=new Rt(n,e),r=new Rt(n,e+1),i=[];return this.Ur.forEachInRange([s,r],(o=>{this.Gr(o),i.push(o.key)})),i}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new _e(new Ye([])),s=new Rt(n,e),r=new Rt(n,e+1);let i=Me();return this.Ur.forEachInRange([s,r],(o=>{i=i.add(o.key)})),i}containsKey(e){const n=new Rt(e,0),s=this.Qr.firstAfterOrEqual(n);return s!==null&&e.isEqual(s.key)}}class Rt{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return _e.comparator(e.key,n.key)||Le(e.Yr,n.Yr)}static Kr(e,n){return Le(e.Yr,n.Yr)||_e.comparator(e.key,n.key)}}class aO{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new bt(Rt.$r)}checkEmpty(e){return X.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,s,r){const i=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new wD(i,n,s,r);this.mutationQueue.push(o);for(const a of r)this.Zr=this.Zr.add(new Rt(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return X.resolve(o)}lookupMutationBatch(e,n){return X.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const s=n+1,r=this.ei(s),i=r<0?0:r;return X.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return X.resolve(this.mutationQueue.length===0?kf:this.tr-1)}getAllMutationBatches(e){return X.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const s=new Rt(n,0),r=new Rt(n,Number.POSITIVE_INFINITY),i=[];return this.Zr.forEachInRange([s,r],(o=>{const a=this.Xr(o.Yr);i.push(a)})),X.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let s=new bt(Le);return n.forEach((r=>{const i=new Rt(r,0),o=new Rt(r,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([i,o],(a=>{s=s.add(a.Yr)}))})),X.resolve(this.ti(s))}getAllMutationBatchesAffectingQuery(e,n){const s=n.path,r=s.length+1;let i=s;_e.isDocumentKey(i)||(i=i.child(""));const o=new Rt(new _e(i),0);let a=new bt(Le);return this.Zr.forEachWhile((l=>{const u=l.key.path;return!!s.isPrefixOf(u)&&(u.length===r&&(a=a.add(l.Yr)),!0)}),o),X.resolve(this.ti(a))}ti(e){const n=[];return e.forEach((s=>{const r=this.Xr(s);r!==null&&n.push(r)})),n}removeMutationBatch(e,n){qe(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Zr;return X.forEach(n.mutations,(r=>{const i=new Rt(r.key,n.batchId);return s=s.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)})).next((()=>{this.Zr=s}))}ir(e){}containsKey(e,n){const s=new Rt(n,0),r=this.Zr.firstAfterOrEqual(s);return X.resolve(n.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,X.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class cO{constructor(e){this.ri=e,this.docs=(function(){return new tt(_e.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const s=n.key,r=this.docs.get(s),i=r?r.size:0,o=this.ri(n);return this.docs=this.docs.insert(s,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const s=this.docs.get(n);return X.resolve(s?s.document.mutableCopy():Ut.newInvalidDocument(n))}getEntries(e,n){let s=ds();return n.forEach((r=>{const i=this.docs.get(r);s=s.insert(r,i?i.document.mutableCopy():Ut.newInvalidDocument(r))})),X.resolve(s)}getDocumentsMatchingQuery(e,n,s,r){let i=ds();const o=n.path,a=new _e(o.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:u,value:{document:h}}=l.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||MN(LN(h),s)<=0||(r.has(h.key)||bl(n,h))&&(i=i.insert(h.key,h.mutableCopy()))}return X.resolve(i)}getAllFromCollectionGroup(e,n,s,r){Re(9500)}ii(e,n){return X.forEach(this.docs,(s=>n(s)))}newChangeBuffer(e){return new lO(this)}getSize(e){return X.resolve(this.size)}}class lO extends tO{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach(((s,r)=>{r.isValidDocument()?n.push(this.Nr.addEntry(e,r)):this.Nr.removeEntry(s)})),X.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}class uO{constructor(e){this.persistence=e,this.si=new $r((n=>Of(n)),Vf),this.lastRemoteSnapshotVersion=Ce.min(),this.highestTargetId=0,this.oi=0,this._i=new $f,this.targetCount=0,this.ai=ki.ur()}forEachTarget(e,n){return this.si.forEach(((s,r)=>n(r))),X.resolve()}getLastRemoteSnapshotVersion(e){return X.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return X.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),X.resolve(this.highestTargetId)}setTargetsMetadata(e,n,s){return s&&(this.lastRemoteSnapshotVersion=s),n>this.oi&&(this.oi=n),X.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new ki(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,X.resolve()}updateTargetData(e,n){return this.Pr(n),X.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,X.resolve()}removeTargets(e,n,s){let r=0;const i=[];return this.si.forEach(((o,a)=>{a.sequenceNumber<=n&&s.get(a.targetId)===null&&(this.si.delete(o),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),r++)})),X.waitFor(i).next((()=>r))}getTargetCount(e){return X.resolve(this.targetCount)}getTargetData(e,n){const s=this.si.get(n)||null;return X.resolve(s)}addMatchingKeys(e,n,s){return this._i.Wr(n,s),X.resolve()}removeMatchingKeys(e,n,s){this._i.zr(n,s);const r=this.persistence.referenceDelegate,i=[];return r&&n.forEach((o=>{i.push(r.markPotentiallyOrphaned(e,o))})),X.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),X.resolve()}getMatchingKeysForTargetId(e,n){const s=this._i.Hr(n);return X.resolve(s)}containsKey(e,n){return X.resolve(this._i.containsKey(n))}}class pT{constructor(e,n){this.ui={},this.overlays={},this.ci=new vl(0),this.li=!1,this.li=!0,this.hi=new oO,this.referenceDelegate=e(this),this.Pi=new uO(this),this.indexManager=new KD,this.remoteDocumentCache=(function(r){return new cO(r)})((s=>this.referenceDelegate.Ti(s))),this.serializer=new GD(n),this.Ii=new rO(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new iO,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let s=this.ui[e.toKey()];return s||(s=new aO(n,this.referenceDelegate),this.ui[e.toKey()]=s),s}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,s){fe("MemoryPersistence","Starting transaction:",e);const r=new hO(this.ci.next());return this.referenceDelegate.Ei(),s(r).next((i=>this.referenceDelegate.di(r).next((()=>i)))).toPromise().then((i=>(r.raiseOnCommittedEvent(),i)))}Ai(e,n){return X.or(Object.values(this.ui).map((s=>()=>s.containsKey(e,n))))}}class hO extends FN{constructor(e){super(),this.currentSequenceNumber=e}}class Hf{constructor(e){this.persistence=e,this.Ri=new $f,this.Vi=null}static mi(e){return new Hf(e)}get fi(){if(this.Vi)return this.Vi;throw Re(60996)}addReference(e,n,s){return this.Ri.addReference(s,n),this.fi.delete(s.toString()),X.resolve()}removeReference(e,n,s){return this.Ri.removeReference(s,n),this.fi.add(s.toString()),X.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),X.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach((r=>this.fi.add(r.toString())));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,n.targetId).next((r=>{r.forEach((i=>this.fi.add(i.toString())))})).next((()=>s.removeTargetData(e,n)))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return X.forEach(this.fi,(s=>{const r=_e.fromPath(s);return this.gi(e,r).next((i=>{i||n.removeEntry(r,Ce.min())}))})).next((()=>(this.Vi=null,n.apply(e))))}updateLimboDocument(e,n){return this.gi(e,n).next((s=>{s?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(e){return 0}gi(e,n){return X.or([()=>X.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class qc{constructor(e,n){this.persistence=e,this.pi=new $r((s=>$N(s.path)),((s,r)=>s.isEqual(r))),this.garbageCollector=eO(this,n)}static mi(e,n){return new qc(e,n)}Ei(){}di(e){return X.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((s=>n.next((r=>s+r))))}wr(e){let n=0;return this.pr(e,(s=>{n++})).next((()=>n))}pr(e,n){return X.forEach(this.pi,((s,r)=>this.br(e,s,r).next((i=>i?X.resolve():n(r)))))}removeTargets(e,n,s){return this.persistence.getTargetCache().removeTargets(e,n,s)}removeOrphanedDocuments(e,n){let s=0;const r=this.persistence.getRemoteDocumentCache(),i=r.newChangeBuffer();return r.ii(e,(o=>this.br(e,o,n).next((a=>{a||(s++,i.removeEntry(o,Ce.min()))})))).next((()=>i.apply(e))).next((()=>s))}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),X.resolve()}removeTarget(e,n){const s=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,n,s){return this.pi.set(s,e.currentSequenceNumber),X.resolve()}removeReference(e,n,s){return this.pi.set(s,e.currentSequenceNumber),X.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),X.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=ac(e.data.value)),n}br(e,n,s){return X.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const r=this.pi.get(n);return X.resolve(r!==void 0&&r>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class jf{constructor(e,n,s,r){this.targetId=e,this.fromCache=n,this.Es=s,this.ds=r}static As(e,n){let s=Me(),r=Me();for(const i of n.docChanges)switch(i.type){case 0:s=s.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new jf(e,n.fromCache,s,r)}}class fO{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class dO{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return HC()?8:UN($t())>0?6:4})()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,s,r){const i={result:null};return this.ys(e,n).next((o=>{i.result=o})).next((()=>{if(!i.result)return this.ws(e,n,r,s).next((o=>{i.result=o}))})).next((()=>{if(i.result)return;const o=new fO;return this.Ss(e,n,o).next((a=>{if(i.result=a,this.Vs)return this.bs(e,n,o,a.size)}))})).next((()=>i.result))}bs(e,n,s,r){return s.documentReadCount<this.fs?(Xr()<=Ve.DEBUG&&fe("QueryEngine","SDK will not create cache indexes for query:",Zr(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),X.resolve()):(Xr()<=Ve.DEBUG&&fe("QueryEngine","Query:",Zr(n),"scans",s.documentReadCount,"local documents and returns",r,"documents as results."),s.documentReadCount>this.gs*r?(Xr()<=Ve.DEBUG&&fe("QueryEngine","The SDK decides to create cache indexes for query:",Zr(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Un(n))):X.resolve())}ys(e,n){if(Eg(n))return X.resolve(null);let s=Un(n);return this.indexManager.getIndexType(e,s).next((r=>r===0?null:(n.limit!==null&&r===1&&(n=Rh(n,null,"F"),s=Un(n)),this.indexManager.getDocumentsMatchingTarget(e,s).next((i=>{const o=Me(...i);return this.ps.getDocuments(e,o).next((a=>this.indexManager.getMinOffset(e,s).next((l=>{const u=this.Ds(n,a);return this.Cs(n,u,o,l.readTime)?this.ys(e,Rh(n,null,"F")):this.vs(e,u,n,l)}))))})))))}ws(e,n,s,r){return Eg(n)||r.isEqual(Ce.min())?X.resolve(null):this.ps.getDocuments(e,s).next((i=>{const o=this.Ds(n,i);return this.Cs(n,o,s,r)?X.resolve(null):(Xr()<=Ve.DEBUG&&fe("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Zr(n)),this.vs(e,o,n,VN(r,Go)).next((a=>a)))}))}Ds(e,n){let s=new bt(GE(e));return n.forEach(((r,i)=>{bl(e,i)&&(s=s.add(i))})),s}Cs(e,n,s,r){if(e.limit===null)return!1;if(s.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Ss(e,n,s){return Xr()<=Ve.DEBUG&&fe("QueryEngine","Using full collection scan to execute query:",Zr(n)),this.ps.getDocumentsMatchingQuery(e,n,Ys.min(),s)}vs(e,n,s,r){return this.ps.getDocumentsMatchingQuery(e,s,r).next((i=>(n.forEach((o=>{i=i.insert(o.key,o)})),i)))}}const qf="LocalStore",pO=3e8;class mO{constructor(e,n,s,r){this.persistence=e,this.Fs=n,this.serializer=r,this.Ms=new tt(Le),this.xs=new $r((i=>Of(i)),Vf),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(s)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new sO(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.Ms)))}}function gO(t,e,n,s){return new mO(t,e,n,s)}async function mT(t,e){const n=Pe(t);return await n.persistence.runTransaction("Handle user change","readonly",(s=>{let r;return n.mutationQueue.getAllMutationBatches(s).next((i=>(r=i,n.Bs(e),n.mutationQueue.getAllMutationBatches(s)))).next((i=>{const o=[],a=[];let l=Me();for(const u of r){o.push(u.batchId);for(const h of u.mutations)l=l.add(h.key)}for(const u of i){a.push(u.batchId);for(const h of u.mutations)l=l.add(h.key)}return n.localDocuments.getDocuments(s,l).next((u=>({Ls:u,removedBatchIds:o,addedBatchIds:a})))}))}))}function _O(t,e){const n=Pe(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(s=>{const r=e.batch.keys(),i=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(a,l,u,h){const f=u.batch,p=f.keys();let g=X.resolve();return p.forEach((A=>{g=g.next((()=>h.getEntry(l,A))).next((v=>{const D=u.docVersions.get(A);qe(D!==null,48541),v.version.compareTo(D)<0&&(f.applyToRemoteDocument(v,u),v.isValidDocument()&&(v.setReadTime(u.commitVersion),h.addEntry(v)))}))})),g.next((()=>a.mutationQueue.removeMutationBatch(l,f)))})(n,s,e,i).next((()=>i.apply(s))).next((()=>n.mutationQueue.performConsistencyCheck(s))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(s,r,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,(function(a){let l=Me();for(let u=0;u<a.mutationResults.length;++u)a.mutationResults[u].transformResults.length>0&&(l=l.add(a.batch.mutations[u].key));return l})(e)))).next((()=>n.localDocuments.getDocuments(s,r)))}))}function gT(t){const e=Pe(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.Pi.getLastRemoteSnapshotVersion(n)))}function yO(t,e){const n=Pe(t),s=e.snapshotVersion;let r=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(i=>{const o=n.Ns.newChangeBuffer({trackRemovals:!0});r=n.Ms;const a=[];e.targetChanges.forEach(((h,f)=>{const p=r.get(f);if(!p)return;a.push(n.Pi.removeMatchingKeys(i,h.removedDocuments,f).next((()=>n.Pi.addMatchingKeys(i,h.addedDocuments,f))));let g=p.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(f)!==null?g=g.withResumeToken(Pt.EMPTY_BYTE_STRING,Ce.min()).withLastLimboFreeSnapshotVersion(Ce.min()):h.resumeToken.approximateByteSize()>0&&(g=g.withResumeToken(h.resumeToken,s)),r=r.insert(f,g),(function(v,D,V){return v.resumeToken.approximateByteSize()===0||D.snapshotVersion.toMicroseconds()-v.snapshotVersion.toMicroseconds()>=pO?!0:V.addedDocuments.size+V.modifiedDocuments.size+V.removedDocuments.size>0})(p,g,h)&&a.push(n.Pi.updateTargetData(i,g))}));let l=ds(),u=Me();if(e.documentUpdates.forEach((h=>{e.resolvedLimboDocuments.has(h)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(i,h))})),a.push(vO(i,o,e.documentUpdates).next((h=>{l=h.ks,u=h.qs}))),!s.isEqual(Ce.min())){const h=n.Pi.getLastRemoteSnapshotVersion(i).next((f=>n.Pi.setTargetsMetadata(i,i.currentSequenceNumber,s)));a.push(h)}return X.waitFor(a).next((()=>o.apply(i))).next((()=>n.localDocuments.getLocalViewOfDocuments(i,l,u))).next((()=>l))})).then((i=>(n.Ms=r,i)))}function vO(t,e,n){let s=Me(),r=Me();return n.forEach((i=>s=s.add(i))),e.getEntries(t,s).next((i=>{let o=ds();return n.forEach(((a,l)=>{const u=i.get(a);l.isFoundDocument()!==u.isFoundDocument()&&(r=r.add(a)),l.isNoDocument()&&l.version.isEqual(Ce.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!u.isValidDocument()||l.version.compareTo(u.version)>0||l.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):fe(qf,"Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",l.version)})),{ks:o,qs:r}}))}function EO(t,e){const n=Pe(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(s=>(e===void 0&&(e=kf),n.mutationQueue.getNextMutationBatchAfterBatchId(s,e))))}function TO(t,e){const n=Pe(t);return n.persistence.runTransaction("Allocate target","readwrite",(s=>{let r;return n.Pi.getTargetData(s,e).next((i=>i?(r=i,X.resolve(r)):n.Pi.allocateTargetId(s).next((o=>(r=new Fs(e,o,"TargetPurposeListen",s.currentSequenceNumber),n.Pi.addTargetData(s,r).next((()=>r)))))))})).then((s=>{const r=n.Ms.get(s.targetId);return(r===null||s.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(s.targetId,s),n.xs.set(e,s.targetId)),s}))}async function Nh(t,e,n){const s=Pe(t),r=s.Ms.get(e),i=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",i,(o=>s.persistence.referenceDelegate.removeTarget(o,r)))}catch(o){if(!Hi(o))throw o;fe(qf,`Failed to update sequence numbers for target ${e}: ${o}`)}s.Ms=s.Ms.remove(e),s.xs.delete(r.target)}function Og(t,e,n){const s=Pe(t);let r=Ce.min(),i=Me();return s.persistence.runTransaction("Execute query","readwrite",(o=>(function(l,u,h){const f=Pe(l),p=f.xs.get(h);return p!==void 0?X.resolve(f.Ms.get(p)):f.Pi.getTargetData(u,h)})(s,o,Un(e)).next((a=>{if(a)return r=a.lastLimboFreeSnapshotVersion,s.Pi.getMatchingKeysForTargetId(o,a.targetId).next((l=>{i=l}))})).next((()=>s.Fs.getDocumentsMatchingQuery(o,e,n?r:Ce.min(),n?i:Me()))).next((a=>(wO(s,oD(e),a),{documents:a,Qs:i})))))}function wO(t,e,n){let s=t.Os.get(e)||Ce.min();n.forEach(((r,i)=>{i.readTime.compareTo(s)>0&&(s=i.readTime)})),t.Os.set(e,s)}class Vg{constructor(){this.activeTargetIds=fD()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class bO{constructor(){this.Mo=new Vg,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,s){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,s){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Vg,Promise.resolve()}handleUserChange(e,n,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class IO{Oo(e){}shutdown(){}}const Lg="ConnectivityMonitor";class Mg{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){fe(Lg,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){fe(Lg,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let Ka=null;function Dh(){return Ka===null?Ka=(function(){return 268435456+Math.round(2147483648*Math.random())})():Ka++,"0x"+Ka.toString(16)}const Pu="RestConnection",AO={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class RO{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${s}/databases/${r}`,this.Wo=this.databaseId.database===Uc?`project_id=${s}`:`project_id=${s}&database_id=${r}`}Go(e,n,s,r,i){const o=Dh(),a=this.zo(e,n.toUriEncodedString());fe(Pu,`Sending RPC '${e}' ${o}:`,a,s);const l={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(l,r,i);const{host:u}=new URL(a),h=xi(u);return this.Jo(e,a,l,s,h).then((f=>(fe(Pu,`Received RPC '${e}' ${o}: `,f),f)),(f=>{throw Lr(Pu,`RPC '${e}' ${o} failed with error: `,f,"url: ",a,"request:",s),f}))}Ho(e,n,s,r,i,o){return this.Go(e,n,s,r,i)}jo(e,n,s){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Bi})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((r,i)=>e[i]=r)),s&&s.headers.forEach(((r,i)=>e[i]=r))}zo(e,n){const s=AO[e];return`${this.Uo}/v1/${n}:${s}`}terminate(){}}class SO{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const Lt="WebChannelConnection";class CO extends RO{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,s,r,i){const o=Dh();return new Promise(((a,l)=>{const u=new _E;u.setWithCredentials(!0),u.listenOnce(yE.COMPLETE,(()=>{try{switch(u.getLastErrorCode()){case oc.NO_ERROR:const f=u.getResponseJson();fe(Lt,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(f)),a(f);break;case oc.TIMEOUT:fe(Lt,`RPC '${e}' ${o} timed out`),l(new le(Y.DEADLINE_EXCEEDED,"Request time out"));break;case oc.HTTP_ERROR:const p=u.getStatus();if(fe(Lt,`RPC '${e}' ${o} failed with status:`,p,"response text:",u.getResponseText()),p>0){let g=u.getResponseJson();Array.isArray(g)&&(g=g[0]);const A=g?.error;if(A&&A.status&&A.message){const v=(function(V){const N=V.toLowerCase().replace(/_/g,"-");return Object.values(Y).indexOf(N)>=0?N:Y.UNKNOWN})(A.status);l(new le(v,A.message))}else l(new le(Y.UNKNOWN,"Server responded with status "+u.getStatus()))}else l(new le(Y.UNAVAILABLE,"Connection failed."));break;default:Re(9055,{l_:e,streamId:o,h_:u.getLastErrorCode(),P_:u.getLastError()})}}finally{fe(Lt,`RPC '${e}' ${o} completed.`)}}));const h=JSON.stringify(r);fe(Lt,`RPC '${e}' ${o} sending request:`,r),u.send(n,"POST",h,s,15)}))}T_(e,n,s){const r=Dh(),i=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=TE(),a=EE(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(l.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(l.useFetchStreams=!0),this.jo(l.initMessageHeaders,n,s),l.encodeInitMessageHeaders=!0;const h=i.join("");fe(Lt,`Creating RPC '${e}' stream ${r}: ${h}`,l);const f=o.createWebChannel(h,l);this.I_(f);let p=!1,g=!1;const A=new SO({Yo:D=>{g?fe(Lt,`Not sending because RPC '${e}' stream ${r} is closed:`,D):(p||(fe(Lt,`Opening RPC '${e}' stream ${r} transport.`),f.open(),p=!0),fe(Lt,`RPC '${e}' stream ${r} sending:`,D),f.send(D))},Zo:()=>f.close()}),v=(D,V,N)=>{D.listen(V,(_=>{try{N(_)}catch(R){setTimeout((()=>{throw R}),0)}}))};return v(f,_o.EventType.OPEN,(()=>{g||(fe(Lt,`RPC '${e}' stream ${r} transport opened.`),A.o_())})),v(f,_o.EventType.CLOSE,(()=>{g||(g=!0,fe(Lt,`RPC '${e}' stream ${r} transport closed`),A.a_(),this.E_(f))})),v(f,_o.EventType.ERROR,(D=>{g||(g=!0,Lr(Lt,`RPC '${e}' stream ${r} transport errored. Name:`,D.name,"Message:",D.message),A.a_(new le(Y.UNAVAILABLE,"The operation could not be completed")))})),v(f,_o.EventType.MESSAGE,(D=>{if(!g){const V=D.data[0];qe(!!V,16349);const N=V,_=N?.error||N[0]?.error;if(_){fe(Lt,`RPC '${e}' stream ${r} received error:`,_);const R=_.status;let O=(function(I){const y=dt[I];if(y!==void 0)return sT(y)})(R),U=_.message;O===void 0&&(O=Y.INTERNAL,U="Unknown error status: "+R+" with message "+_.message),g=!0,A.a_(new le(O,U)),f.close()}else fe(Lt,`RPC '${e}' stream ${r} received:`,V),A.u_(V)}})),v(a,vE.STAT_EVENT,(D=>{D.stat===vh.PROXY?fe(Lt,`RPC '${e}' stream ${r} detected buffering proxy`):D.stat===vh.NOPROXY&&fe(Lt,`RPC '${e}' stream ${r} detected no buffering proxy`)})),setTimeout((()=>{A.__()}),0),A}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((n=>n===e))}}function ku(){return typeof document<"u"?document:null}function Sl(t){return new DD(t,!0)}class _T{constructor(e,n,s=1e3,r=1.5,i=6e4){this.Mi=e,this.timerId=n,this.d_=s,this.A_=r,this.R_=i,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),s=Math.max(0,Date.now()-this.f_),r=Math.max(0,n-s);r>0&&fe("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,r,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const xg="PersistentStream";class yT{constructor(e,n,s,r,i,o,a,l){this.Mi=e,this.S_=s,this.b_=r,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new _T(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===Y.RESOURCE_EXHAUSTED?(fs(n.toString()),fs("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===Y.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([s,r])=>{this.D_===n&&this.G_(s,r)}),(s=>{e((()=>{const r=new le(Y.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(r)}))}))}G_(e,n){const s=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo((()=>{s((()=>this.listener.Xo()))})),this.stream.t_((()=>{s((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((r=>{s((()=>this.z_(r)))})),this.stream.onMessage((r=>{s((()=>++this.F_==1?this.J_(r):this.onNext(r)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return fe(xg,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget((()=>this.D_===e?n():(fe(xg,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class PO extends yT{constructor(e,n,s,r,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,s,r,o),this.serializer=i}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=LD(this.serializer,e),s=(function(i){if(!("targetChange"in i))return Ce.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?Ce.min():o.readTime?Bn(o.readTime):Ce.min()})(e);return this.listener.H_(n,s)}Y_(e){const n={};n.database=kh(this.serializer),n.addTarget=(function(i,o){let a;const l=o.target;if(a=Ih(l)?{documents:FD(i,l)}:{query:UD(i,l).ft},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=oT(i,o.resumeToken);const u=Sh(i,o.expectedCount);u!==null&&(a.expectedCount=u)}else if(o.snapshotVersion.compareTo(Ce.min())>0){a.readTime=jc(i,o.snapshotVersion.toTimestamp());const u=Sh(i,o.expectedCount);u!==null&&(a.expectedCount=u)}return a})(this.serializer,e);const s=$D(this.serializer,e);s&&(n.labels=s),this.q_(n)}Z_(e){const n={};n.database=kh(this.serializer),n.removeTarget=e,this.q_(n)}}class kO extends yT{constructor(e,n,s,r,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,s,r,o),this.serializer=i}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return qe(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,qe(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){qe(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=xD(e.writeResults,e.commitTime),s=Bn(e.commitTime);return this.listener.na(s,n)}ra(){const e={};e.database=kh(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((s=>MD(this.serializer,s)))};this.q_(n)}}class NO{}class DO extends NO{constructor(e,n,s,r){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=s,this.serializer=r,this.ia=!1}sa(){if(this.ia)throw new le(Y.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,s,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([i,o])=>this.connection.Go(e,Ch(n,s),r,i,o))).catch((i=>{throw i.name==="FirebaseError"?(i.code===Y.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new le(Y.UNKNOWN,i.toString())}))}Ho(e,n,s,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([o,a])=>this.connection.Ho(e,Ch(n,s),r,o,a,i))).catch((o=>{throw o.name==="FirebaseError"?(o.code===Y.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new le(Y.UNKNOWN,o.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class OO{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(fs(n),this.aa=!1):fe("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const Mr="RemoteStore";class VO{constructor(e,n,s,r,i){this.localStore=e,this.datastore=n,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=i,this.Aa.Oo((o=>{s.enqueueAndForget((async()=>{Hr(this)&&(fe(Mr,"Restarting streams for network reachability change."),await(async function(l){const u=Pe(l);u.Ea.add(4),await ga(u),u.Ra.set("Unknown"),u.Ea.delete(4),await Cl(u)})(this))}))})),this.Ra=new OO(s,r)}}async function Cl(t){if(Hr(t))for(const e of t.da)await e(!0)}async function ga(t){for(const e of t.da)await e(!1)}function vT(t,e){const n=Pe(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),Kf(n)?zf(n):qi(n).O_()&&Gf(n,e))}function Wf(t,e){const n=Pe(t),s=qi(n);n.Ia.delete(e),s.O_()&&ET(n,e),n.Ia.size===0&&(s.O_()?s.L_():Hr(n)&&n.Ra.set("Unknown"))}function Gf(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ce.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}qi(t).Y_(e)}function ET(t,e){t.Va.Ue(e),qi(t).Z_(e)}function zf(t){t.Va=new CD({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),qi(t).start(),t.Ra.ua()}function Kf(t){return Hr(t)&&!qi(t).x_()&&t.Ia.size>0}function Hr(t){return Pe(t).Ea.size===0}function TT(t){t.Va=void 0}async function LO(t){t.Ra.set("Online")}async function MO(t){t.Ia.forEach(((e,n)=>{Gf(t,e)}))}async function xO(t,e){TT(t),Kf(t)?(t.Ra.ha(e),zf(t)):t.Ra.set("Unknown")}async function FO(t,e,n){if(t.Ra.set("Online"),e instanceof iT&&e.state===2&&e.cause)try{await(async function(r,i){const o=i.cause;for(const a of i.targetIds)r.Ia.has(a)&&(await r.remoteSyncer.rejectListen(a,o),r.Ia.delete(a),r.Va.removeTarget(a))})(t,e)}catch(s){fe(Mr,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await Wc(t,s)}else if(e instanceof uc?t.Va.Ze(e):e instanceof rT?t.Va.st(e):t.Va.tt(e),!n.isEqual(Ce.min()))try{const s=await gT(t.localStore);n.compareTo(s)>=0&&await(function(i,o){const a=i.Va.Tt(o);return a.targetChanges.forEach(((l,u)=>{if(l.resumeToken.approximateByteSize()>0){const h=i.Ia.get(u);h&&i.Ia.set(u,h.withResumeToken(l.resumeToken,o))}})),a.targetMismatches.forEach(((l,u)=>{const h=i.Ia.get(l);if(!h)return;i.Ia.set(l,h.withResumeToken(Pt.EMPTY_BYTE_STRING,h.snapshotVersion)),ET(i,l);const f=new Fs(h.target,l,u,h.sequenceNumber);Gf(i,f)})),i.remoteSyncer.applyRemoteEvent(a)})(t,n)}catch(s){fe(Mr,"Failed to raise snapshot:",s),await Wc(t,s)}}async function Wc(t,e,n){if(!Hi(e))throw e;t.Ea.add(1),await ga(t),t.Ra.set("Offline"),n||(n=()=>gT(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{fe(Mr,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await Cl(t)}))}function wT(t,e){return e().catch((n=>Wc(t,n,e)))}async function Pl(t){const e=Pe(t),n=er(e);let s=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:kf;for(;UO(e);)try{const r=await EO(e.localStore,s);if(r===null){e.Ta.length===0&&n.L_();break}s=r.batchId,BO(e,r)}catch(r){await Wc(e,r)}bT(e)&&IT(e)}function UO(t){return Hr(t)&&t.Ta.length<10}function BO(t,e){t.Ta.push(e);const n=er(t);n.O_()&&n.X_&&n.ea(e.mutations)}function bT(t){return Hr(t)&&!er(t).x_()&&t.Ta.length>0}function IT(t){er(t).start()}async function $O(t){er(t).ra()}async function HO(t){const e=er(t);for(const n of t.Ta)e.ea(n.mutations)}async function jO(t,e,n){const s=t.Ta.shift(),r=Ff.from(s,e,n);await wT(t,(()=>t.remoteSyncer.applySuccessfulWrite(r))),await Pl(t)}async function qO(t,e){e&&er(t).X_&&await(async function(s,r){if((function(o){return AD(o)&&o!==Y.ABORTED})(r.code)){const i=s.Ta.shift();er(s).B_(),await wT(s,(()=>s.remoteSyncer.rejectFailedWrite(i.batchId,r))),await Pl(s)}})(t,e),bT(t)&&IT(t)}async function Fg(t,e){const n=Pe(t);n.asyncQueue.verifyOperationInProgress(),fe(Mr,"RemoteStore received new credentials");const s=Hr(n);n.Ea.add(3),await ga(n),s&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Cl(n)}async function WO(t,e){const n=Pe(t);e?(n.Ea.delete(2),await Cl(n)):e||(n.Ea.add(2),await ga(n),n.Ra.set("Unknown"))}function qi(t){return t.ma||(t.ma=(function(n,s,r){const i=Pe(n);return i.sa(),new PO(s,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)})(t.datastore,t.asyncQueue,{Xo:LO.bind(null,t),t_:MO.bind(null,t),r_:xO.bind(null,t),H_:FO.bind(null,t)}),t.da.push((async e=>{e?(t.ma.B_(),Kf(t)?zf(t):t.Ra.set("Unknown")):(await t.ma.stop(),TT(t))}))),t.ma}function er(t){return t.fa||(t.fa=(function(n,s,r){const i=Pe(n);return i.sa(),new kO(s,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)})(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:$O.bind(null,t),r_:qO.bind(null,t),ta:HO.bind(null,t),na:jO.bind(null,t)}),t.da.push((async e=>{e?(t.fa.B_(),await Pl(t)):(await t.fa.stop(),t.Ta.length>0&&(fe(Mr,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))}))),t.fa}class Qf{constructor(e,n,s,r,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=s,this.op=r,this.removalCallback=i,this.deferred=new is,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((o=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,s,r,i){const o=Date.now()+s,a=new Qf(e,n,o,r,i);return a.start(s),a}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new le(Y.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Yf(t,e){if(fs("AsyncQueue",`${e}: ${t}`),Hi(t))return new le(Y.UNAVAILABLE,`${e}: ${t}`);throw t}class gi{static emptySet(e){return new gi(e.comparator)}constructor(e){this.comparator=e?(n,s)=>e(n,s)||_e.comparator(n.key,s.key):(n,s)=>_e.comparator(n.key,s.key),this.keyedMap=yo(),this.sortedSet=new tt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,s)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof gi)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;n.hasNext();){const r=n.getNext().key,i=s.getNext().key;if(!r.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const s=new gi;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=n,s}}class Ug{constructor(){this.ga=new tt(_e.comparator)}track(e){const n=e.doc.key,s=this.ga.get(n);s?e.type!==0&&s.type===3?this.ga=this.ga.insert(n,e):e.type===3&&s.type!==1?this.ga=this.ga.insert(n,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.ga=this.ga.remove(n):e.type===1&&s.type===2?this.ga=this.ga.insert(n,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):Re(63341,{Rt:e,pa:s}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,s)=>{e.push(s)})),e}}class Ni{constructor(e,n,s,r,i,o,a,l,u){this.query=e,this.docs=n,this.oldDocs=s,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=u}static fromInitialDocuments(e,n,s,r,i){const o=[];return n.forEach((a=>{o.push({type:0,doc:a})})),new Ni(e,n,gi.emptySet(n),o,s,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&wl(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,s=e.docChanges;if(n.length!==s.length)return!1;for(let r=0;r<n.length;r++)if(n[r].type!==s[r].type||!n[r].doc.isEqual(s[r].doc))return!1;return!0}}class GO{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class zO{constructor(){this.queries=Bg(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,s){const r=Pe(n),i=r.queries;r.queries=Bg(),i.forEach(((o,a)=>{for(const l of a.Sa)l.onError(s)}))})(this,new le(Y.ABORTED,"Firestore shutting down"))}}function Bg(){return new $r((t=>WE(t)),wl)}async function AT(t,e){const n=Pe(t);let s=3;const r=e.query;let i=n.queries.get(r);i?!i.ba()&&e.Da()&&(s=2):(i=new GO,s=e.Da()?0:1);try{switch(s){case 0:i.wa=await n.onListen(r,!0);break;case 1:i.wa=await n.onListen(r,!1);break;case 2:await n.onFirstRemoteStoreListen(r)}}catch(o){const a=Yf(o,`Initialization of query '${Zr(e.query)}' failed`);return void e.onError(a)}n.queries.set(r,i),i.Sa.push(e),e.va(n.onlineState),i.wa&&e.Fa(i.wa)&&Jf(n)}async function RT(t,e){const n=Pe(t),s=e.query;let r=3;const i=n.queries.get(s);if(i){const o=i.Sa.indexOf(e);o>=0&&(i.Sa.splice(o,1),i.Sa.length===0?r=e.Da()?0:1:!i.ba()&&e.Da()&&(r=2))}switch(r){case 0:return n.queries.delete(s),n.onUnlisten(s,!0);case 1:return n.queries.delete(s),n.onUnlisten(s,!1);case 2:return n.onLastRemoteStoreUnlisten(s);default:return}}function KO(t,e){const n=Pe(t);let s=!1;for(const r of e){const i=r.query,o=n.queries.get(i);if(o){for(const a of o.Sa)a.Fa(r)&&(s=!0);o.wa=r}}s&&Jf(n)}function QO(t,e,n){const s=Pe(t),r=s.queries.get(e);if(r)for(const i of r.Sa)i.onError(n);s.queries.delete(e)}function Jf(t){t.Ca.forEach((e=>{e.next()}))}var Oh,$g;($g=Oh||(Oh={})).Ma="default",$g.Cache="cache";class ST{constructor(e,n,s){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(e){if(!this.options.includeMetadataChanges){const s=[];for(const r of e.docChanges)r.type!==3&&s.push(r);e=new Ni(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const s=n!=="Offline";return(!this.options.qa||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Ni.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Oh.Cache}}class CT{constructor(e){this.key=e}}class PT{constructor(e){this.key=e}}class YO{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Me(),this.mutatedKeys=Me(),this.eu=GE(e),this.tu=new gi(this.eu)}get nu(){return this.Ya}ru(e,n){const s=n?n.iu:new Ug,r=n?n.tu:this.tu;let i=n?n.mutatedKeys:this.mutatedKeys,o=r,a=!1;const l=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,u=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal(((h,f)=>{const p=r.get(h),g=bl(this.query,f)?f:null,A=!!p&&this.mutatedKeys.has(p.key),v=!!g&&(g.hasLocalMutations||this.mutatedKeys.has(g.key)&&g.hasCommittedMutations);let D=!1;p&&g?p.data.isEqual(g.data)?A!==v&&(s.track({type:3,doc:g}),D=!0):this.su(p,g)||(s.track({type:2,doc:g}),D=!0,(l&&this.eu(g,l)>0||u&&this.eu(g,u)<0)&&(a=!0)):!p&&g?(s.track({type:0,doc:g}),D=!0):p&&!g&&(s.track({type:1,doc:p}),D=!0,(l||u)&&(a=!0)),D&&(g?(o=o.add(g),i=v?i.add(h):i.delete(h)):(o=o.delete(h),i=i.delete(h)))})),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),i=i.delete(h.key),s.track({type:1,doc:h})}return{tu:o,iu:s,Cs:a,mutatedKeys:i}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,s,r){const i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort(((h,f)=>(function(g,A){const v=D=>{switch(D){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Re(20277,{Rt:D})}};return v(g)-v(A)})(h.type,f.type)||this.eu(h.doc,f.doc))),this.ou(s),r=r??!1;const a=n&&!r?this._u():[],l=this.Xa.size===0&&this.current&&!r?1:0,u=l!==this.Za;return this.Za=l,o.length!==0||u?{snapshot:new Ni(this.query,e.tu,i,o,e.mutatedKeys,l===0,u,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:a}:{au:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Ug,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Ya=this.Ya.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ya=this.Ya.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Me(),this.tu.forEach((s=>{this.uu(s.key)&&(this.Xa=this.Xa.add(s.key))}));const n=[];return e.forEach((s=>{this.Xa.has(s)||n.push(new PT(s))})),this.Xa.forEach((s=>{e.has(s)||n.push(new CT(s))})),n}cu(e){this.Ya=e.Qs,this.Xa=Me();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Ni.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Xf="SyncEngine";class JO{constructor(e,n,s){this.query=e,this.targetId=n,this.view=s}}class XO{constructor(e){this.key=e,this.hu=!1}}class ZO{constructor(e,n,s,r,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=s,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new $r((a=>WE(a)),wl),this.Iu=new Map,this.Eu=new Set,this.du=new tt(_e.comparator),this.Au=new Map,this.Ru=new $f,this.Vu={},this.mu=new Map,this.fu=ki.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function eV(t,e,n=!0){const s=LT(t);let r;const i=s.Tu.get(e);return i?(s.sharedClientState.addLocalQueryTarget(i.targetId),r=i.view.lu()):r=await kT(s,e,n,!0),r}async function tV(t,e){const n=LT(t);await kT(n,e,!0,!1)}async function kT(t,e,n,s){const r=await TO(t.localStore,Un(e)),i=r.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let a;return s&&(a=await nV(t,e,i,o==="current",r.resumeToken)),t.isPrimaryClient&&n&&vT(t.remoteStore,r),a}async function nV(t,e,n,s,r){t.pu=(f,p,g)=>(async function(v,D,V,N){let _=D.view.ru(V);_.Cs&&(_=await Og(v.localStore,D.query,!1).then((({documents:E})=>D.view.ru(E,_))));const R=N&&N.targetChanges.get(D.targetId),O=N&&N.targetMismatches.get(D.targetId)!=null,U=D.view.applyChanges(_,v.isPrimaryClient,R,O);return jg(v,D.targetId,U.au),U.snapshot})(t,f,p,g);const i=await Og(t.localStore,e,!0),o=new YO(e,i.Qs),a=o.ru(i.documents),l=ma.createSynthesizedTargetChangeForCurrentChange(n,s&&t.onlineState!=="Offline",r),u=o.applyChanges(a,t.isPrimaryClient,l);jg(t,n,u.au);const h=new JO(e,n,o);return t.Tu.set(e,h),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),u.snapshot}async function sV(t,e,n){const s=Pe(t),r=s.Tu.get(e),i=s.Iu.get(r.targetId);if(i.length>1)return s.Iu.set(r.targetId,i.filter((o=>!wl(o,e)))),void s.Tu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(r.targetId),s.sharedClientState.isActiveQueryTarget(r.targetId)||await Nh(s.localStore,r.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(r.targetId),n&&Wf(s.remoteStore,r.targetId),Vh(s,r.targetId)})).catch($i)):(Vh(s,r.targetId),await Nh(s.localStore,r.targetId,!0))}async function rV(t,e){const n=Pe(t),s=n.Tu.get(e),r=n.Iu.get(s.targetId);n.isPrimaryClient&&r.length===1&&(n.sharedClientState.removeLocalQueryTarget(s.targetId),Wf(n.remoteStore,s.targetId))}async function iV(t,e,n){const s=fV(t);try{const r=await(function(o,a){const l=Pe(o),u=Je.now(),h=a.reduce(((g,A)=>g.add(A.key)),Me());let f,p;return l.persistence.runTransaction("Locally write mutations","readwrite",(g=>{let A=ds(),v=Me();return l.Ns.getEntries(g,h).next((D=>{A=D,A.forEach(((V,N)=>{N.isValidDocument()||(v=v.add(V))}))})).next((()=>l.localDocuments.getOverlayedDocuments(g,A))).next((D=>{f=D;const V=[];for(const N of a){const _=ED(N,f.get(N.key).overlayedDocument);_!=null&&V.push(new rr(N.key,_,xE(_.value.mapValue),yn.exists(!0)))}return l.mutationQueue.addMutationBatch(g,u,V,a)})).next((D=>{p=D;const V=D.applyToLocalDocumentSet(f,v);return l.documentOverlayCache.saveOverlays(g,D.batchId,V)}))})).then((()=>({batchId:p.batchId,changes:KE(f)})))})(s.localStore,e);s.sharedClientState.addPendingMutation(r.batchId),(function(o,a,l){let u=o.Vu[o.currentUser.toKey()];u||(u=new tt(Le)),u=u.insert(a,l),o.Vu[o.currentUser.toKey()]=u})(s,r.batchId,n),await _a(s,r.changes),await Pl(s.remoteStore)}catch(r){const i=Yf(r,"Failed to persist write");n.reject(i)}}async function NT(t,e){const n=Pe(t);try{const s=await yO(n.localStore,e);e.targetChanges.forEach(((r,i)=>{const o=n.Au.get(i);o&&(qe(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1,22616),r.addedDocuments.size>0?o.hu=!0:r.modifiedDocuments.size>0?qe(o.hu,14607):r.removedDocuments.size>0&&(qe(o.hu,42227),o.hu=!1))})),await _a(n,s,e)}catch(s){await $i(s)}}function Hg(t,e,n){const s=Pe(t);if(s.isPrimaryClient&&n===0||!s.isPrimaryClient&&n===1){const r=[];s.Tu.forEach(((i,o)=>{const a=o.view.va(e);a.snapshot&&r.push(a.snapshot)})),(function(o,a){const l=Pe(o);l.onlineState=a;let u=!1;l.queries.forEach(((h,f)=>{for(const p of f.Sa)p.va(a)&&(u=!0)})),u&&Jf(l)})(s.eventManager,e),r.length&&s.Pu.H_(r),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function oV(t,e,n){const s=Pe(t);s.sharedClientState.updateQueryState(e,"rejected",n);const r=s.Au.get(e),i=r&&r.key;if(i){let o=new tt(_e.comparator);o=o.insert(i,Ut.newNoDocument(i,Ce.min()));const a=Me().add(i),l=new Rl(Ce.min(),new Map,new tt(Le),o,a);await NT(s,l),s.du=s.du.remove(i),s.Au.delete(e),Zf(s)}else await Nh(s.localStore,e,!1).then((()=>Vh(s,e,n))).catch($i)}async function aV(t,e){const n=Pe(t),s=e.batch.batchId;try{const r=await _O(n.localStore,e);OT(n,s,null),DT(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await _a(n,r)}catch(r){await $i(r)}}async function cV(t,e,n){const s=Pe(t);try{const r=await(function(o,a){const l=Pe(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",(u=>{let h;return l.mutationQueue.lookupMutationBatch(u,a).next((f=>(qe(f!==null,37113),h=f.keys(),l.mutationQueue.removeMutationBatch(u,f)))).next((()=>l.mutationQueue.performConsistencyCheck(u))).next((()=>l.documentOverlayCache.removeOverlaysForBatchId(u,h,a))).next((()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,h))).next((()=>l.localDocuments.getDocuments(u,h)))}))})(s.localStore,e);OT(s,e,n),DT(s,e),s.sharedClientState.updateMutationState(e,"rejected",n),await _a(s,r)}catch(r){await $i(r)}}function DT(t,e){(t.mu.get(e)||[]).forEach((n=>{n.resolve()})),t.mu.delete(e)}function OT(t,e,n){const s=Pe(t);let r=s.Vu[s.currentUser.toKey()];if(r){const i=r.get(e);i&&(n?i.reject(n):i.resolve(),r=r.remove(e)),s.Vu[s.currentUser.toKey()]=r}}function Vh(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const s of t.Iu.get(e))t.Tu.delete(s),n&&t.Pu.yu(s,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach((s=>{t.Ru.containsKey(s)||VT(t,s)}))}function VT(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(Wf(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),Zf(t))}function jg(t,e,n){for(const s of n)s instanceof CT?(t.Ru.addReference(s.key,e),lV(t,s)):s instanceof PT?(fe(Xf,"Document no longer in limbo: "+s.key),t.Ru.removeReference(s.key,e),t.Ru.containsKey(s.key)||VT(t,s.key)):Re(19791,{wu:s})}function lV(t,e){const n=e.key,s=n.path.canonicalString();t.du.get(n)||t.Eu.has(s)||(fe(Xf,"New document in limbo: "+n),t.Eu.add(s),Zf(t))}function Zf(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new _e(Ye.fromString(e)),s=t.fu.next();t.Au.set(s,new XO(n)),t.du=t.du.insert(n,s),vT(t.remoteStore,new Fs(Un(Lf(n.path)),s,"TargetPurposeLimboResolution",vl.ce))}}async function _a(t,e,n){const s=Pe(t),r=[],i=[],o=[];s.Tu.isEmpty()||(s.Tu.forEach(((a,l)=>{o.push(s.pu(l,e,n).then((u=>{if((u||n)&&s.isPrimaryClient){const h=u?!u.fromCache:n?.targetChanges.get(l.targetId)?.current;s.sharedClientState.updateQueryState(l.targetId,h?"current":"not-current")}if(u){r.push(u);const h=jf.As(l.targetId,u);i.push(h)}})))})),await Promise.all(o),s.Pu.H_(r),await(async function(l,u){const h=Pe(l);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",(f=>X.forEach(u,(p=>X.forEach(p.Es,(g=>h.persistence.referenceDelegate.addReference(f,p.targetId,g))).next((()=>X.forEach(p.ds,(g=>h.persistence.referenceDelegate.removeReference(f,p.targetId,g)))))))))}catch(f){if(!Hi(f))throw f;fe(qf,"Failed to update sequence numbers: "+f)}for(const f of u){const p=f.targetId;if(!f.fromCache){const g=h.Ms.get(p),A=g.snapshotVersion,v=g.withLastLimboFreeSnapshotVersion(A);h.Ms=h.Ms.insert(p,v)}}})(s.localStore,i))}async function uV(t,e){const n=Pe(t);if(!n.currentUser.isEqual(e)){fe(Xf,"User change. New user:",e.toKey());const s=await mT(n.localStore,e);n.currentUser=e,(function(i,o){i.mu.forEach((a=>{a.forEach((l=>{l.reject(new le(Y.CANCELLED,o))}))})),i.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await _a(n,s.Ls)}}function hV(t,e){const n=Pe(t),s=n.Au.get(e);if(s&&s.hu)return Me().add(s.key);{let r=Me();const i=n.Iu.get(e);if(!i)return r;for(const o of i){const a=n.Tu.get(o);r=r.unionWith(a.view.nu)}return r}}function LT(t){const e=Pe(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=NT.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=hV.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=oV.bind(null,e),e.Pu.H_=KO.bind(null,e.eventManager),e.Pu.yu=QO.bind(null,e.eventManager),e}function fV(t){const e=Pe(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=aV.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=cV.bind(null,e),e}class Gc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Sl(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return gO(this.persistence,new dO,e.initialUser,this.serializer)}Cu(e){return new pT(Hf.mi,this.serializer)}Du(e){return new bO}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Gc.provider={build:()=>new Gc};class dV extends Gc{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){qe(this.persistence.referenceDelegate instanceof qc,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new XD(s,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Qt.withCacheSize(this.cacheSizeBytes):Qt.DEFAULT;return new pT((s=>qc.mi(s,n)),this.serializer)}}class Lh{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>Hg(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=uV.bind(null,this.syncEngine),await WO(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new zO})()}createDatastore(e){const n=Sl(e.databaseInfo.databaseId),s=(function(i){return new CO(i)})(e.databaseInfo);return(function(i,o,a,l){return new DO(i,o,a,l)})(e.authCredentials,e.appCheckCredentials,s,n)}createRemoteStore(e){return(function(s,r,i,o,a){return new VO(s,r,i,o,a)})(this.localStore,this.datastore,e.asyncQueue,(n=>Hg(this.syncEngine,n,0)),(function(){return Mg.v()?new Mg:new IO})())}createSyncEngine(e,n){return(function(r,i,o,a,l,u,h){const f=new ZO(r,i,o,a,l,u);return h&&(f.gu=!0),f})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){await(async function(n){const s=Pe(n);fe(Mr,"RemoteStore shutting down."),s.Ea.add(5),await ga(s),s.Aa.shutdown(),s.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Lh.provider={build:()=>new Lh};class MT{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):fs("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}const tr="FirestoreClient";class pV{constructor(e,n,s,r,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=s,this.databaseInfo=r,this.user=xt.UNAUTHENTICATED,this.clientId=_l.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(s,(async o=>{fe(tr,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(s,(o=>(fe(tr,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new is;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const s=Yf(n,"Failed to shutdown persistence");e.reject(s)}})),e.promise}}async function Nu(t,e){t.asyncQueue.verifyOperationInProgress(),fe(tr,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let s=n.initialUser;t.setCredentialChangeListener((async r=>{s.isEqual(r)||(await mT(e.localStore,r),s=r)})),e.persistence.setDatabaseDeletedListener((()=>t.terminate())),t._offlineComponents=e}async function qg(t,e){t.asyncQueue.verifyOperationInProgress();const n=await mV(t);fe(tr,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener((s=>Fg(e.remoteStore,s))),t.setAppCheckTokenChangeListener(((s,r)=>Fg(e.remoteStore,r))),t._onlineComponents=e}async function mV(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){fe(tr,"Using user provided OfflineComponentProvider");try{await Nu(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(r){return r.name==="FirebaseError"?r.code===Y.FAILED_PRECONDITION||r.code===Y.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11})(n))throw n;Lr("Error using user provided cache. Falling back to memory cache: "+n),await Nu(t,new Gc)}}else fe(tr,"Using default OfflineComponentProvider"),await Nu(t,new dV(void 0));return t._offlineComponents}async function xT(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(fe(tr,"Using user provided OnlineComponentProvider"),await qg(t,t._uninitializedComponentsProvider._online)):(fe(tr,"Using default OnlineComponentProvider"),await qg(t,new Lh))),t._onlineComponents}function gV(t){return xT(t).then((e=>e.syncEngine))}async function FT(t){const e=await xT(t),n=e.eventManager;return n.onListen=eV.bind(null,e.syncEngine),n.onUnlisten=sV.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=tV.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=rV.bind(null,e.syncEngine),n}function _V(t,e,n={}){const s=new is;return t.asyncQueue.enqueueAndForget((async()=>(function(i,o,a,l,u){const h=new MT({next:p=>{h.Nu(),o.enqueueAndForget((()=>RT(i,f)));const g=p.docs.has(a);!g&&p.fromCache?u.reject(new le(Y.UNAVAILABLE,"Failed to get document because the client is offline.")):g&&p.fromCache&&l&&l.source==="server"?u.reject(new le(Y.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(p)},error:p=>u.reject(p)}),f=new ST(Lf(a.path),h,{includeMetadataChanges:!0,qa:!0});return AT(i,f)})(await FT(t),t.asyncQueue,e,n,s))),s.promise}function yV(t,e,n={}){const s=new is;return t.asyncQueue.enqueueAndForget((async()=>(function(i,o,a,l,u){const h=new MT({next:p=>{h.Nu(),o.enqueueAndForget((()=>RT(i,f))),p.fromCache&&l.source==="server"?u.reject(new le(Y.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(p)},error:p=>u.reject(p)}),f=new ST(a,h,{includeMetadataChanges:!0,qa:!0});return AT(i,f)})(await FT(t),t.asyncQueue,e,n,s))),s.promise}function UT(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}const Wg=new Map;const BT="firestore.googleapis.com",Gg=!0;class zg{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new le(Y.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=BT,this.ssl=Gg}else this.host=e.host,this.ssl=e.ssl??Gg;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=dT;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<YD)throw new le(Y.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}RE("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=UT(e.experimentalLongPollingOptions??{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new le(Y.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new le(Y.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new le(Y.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(s,r){return s.timeoutSeconds===r.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class kl{constructor(e,n,s,r){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=s,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new zg({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new le(Y.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new le(Y.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new zg(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(s){if(!s)return new IE;switch(s.type){case"firstParty":return new CN(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new le(Y.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const s=Wg.get(n);s&&(fe("ComponentProvider","Removing Datastore"),Wg.delete(n),s.terminate())})(this),Promise.resolve()}}function $T(t,e,n,s={}){t=Rn(t,kl);const r=xi(e),i=t._getSettings(),o={...i,emulatorOptions:t._getEmulatorOptions()},a=`${e}:${n}`;r&&(Cv(`https://${a}`),Pv("Firestore",!0)),i.host!==BT&&i.host!==a&&Lr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const l={...i,host:a,ssl:r,emulatorOptions:s};if(!kr(l,o)&&(t._setSettings(l),s.mockUserToken)){let u,h;if(typeof s.mockUserToken=="string")u=s.mockUserToken,h=xt.MOCK_USER;else{u=OC(s.mockUserToken,t._app?.options.projectId);const f=s.mockUserToken.sub||s.mockUserToken.user_id;if(!f)throw new le(Y.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new xt(f)}t._authCredentials=new AN(new bE(u,h))}}class ir{constructor(e,n,s){this.converter=n,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new ir(this.firestore,e,this._query)}}class ot{constructor(e,n,s){this.converter=n,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new os(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ot(this.firestore,e,this._key)}toJSON(){return{type:ot._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,s){if(da(n,ot._jsonSchema))return new ot(e,s||null,new _e(Ye.fromString(n.referencePath)))}}ot._jsonSchemaVersion="firestore/documentReference/1.0",ot._jsonSchema={type:gt("string",ot._jsonSchemaVersion),referencePath:gt("string")};class os extends ir{constructor(e,n,s){super(e,n,Lf(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ot(this.firestore,null,new _e(e))}withConverter(e){return new os(this.firestore,e,this._path)}}function Rr(t,e,...n){if(t=yt(t),AE("collection","path",e),t instanceof kl){const s=Ye.fromString(e,...n);return og(s),new os(t,null,s)}{if(!(t instanceof ot||t instanceof os))throw new le(Y.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=t._path.child(Ye.fromString(e,...n));return og(s),new os(t.firestore,null,s)}}function Xt(t,e,...n){if(t=yt(t),arguments.length===1&&(e=_l.newId()),AE("doc","path",e),t instanceof kl){const s=Ye.fromString(e,...n);return ig(s),new ot(t,null,new _e(s))}{if(!(t instanceof ot||t instanceof os))throw new le(Y.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=t._path.child(Ye.fromString(e,...n));return ig(s),new ot(t.firestore,t instanceof os?t.converter:null,new _e(s))}}const Kg="AsyncQueue";class Qg{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new _T(this,"async_queue_retry"),this._c=()=>{const s=ku();s&&fe(Kg,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=e;const n=ku();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=ku();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new is;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Hi(e))throw e;fe(Kg,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((s=>{throw this.nc=s,this.rc=!1,fs("INTERNAL UNHANDLED ERROR: ",Yg(s)),s})).then((s=>(this.rc=!1,s))))));return this.ac=n,n}enqueueAfterDelay(e,n,s){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const r=Qf.createAndSchedule(this,e,n,s,(i=>this.hc(i)));return this.tc.push(r),r}uc(){this.nc&&Re(47125,{Pc:Yg(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,s)=>n.targetTimeMs-s.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function Yg(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class jr extends kl{constructor(e,n,s,r){super(e,n,s,r),this.type="firestore",this._queue=new Qg,this._persistenceKey=r?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Qg(e),this._firestoreClient=void 0,await e}}}function HT(t,e){const n=typeof t=="object"?t:Ov(),s=typeof t=="string"?t:Uc,r=Ef(n,"firestore").getImmediate({identifier:s});if(!r._initialized){const i=NC("firestore");i&&$T(r,...i)}return r}function Nl(t){if(t._terminated)throw new le(Y.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||vV(t),t._firestoreClient}function vV(t){const e=t._freezeSettings(),n=(function(r,i,o,a){return new qN(r,i,o,a.host,a.ssl,a.experimentalForceLongPolling,a.experimentalAutoDetectLongPolling,UT(a.experimentalLongPollingOptions),a.useFetchStreams,a.isUsingEmulator)})(t._databaseId,t._app?.options.appId||"",t._persistenceKey,e);t._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new pV(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&(function(r){const i=r?._online.build();return{_offline:r?._offline.build(i),_online:i}})(t._componentsProvider))}class sn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new sn(Pt.fromBase64String(e))}catch(n){throw new le(Y.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new sn(Pt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:sn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(da(e,sn._jsonSchema))return sn.fromBase64String(e.bytes)}}sn._jsonSchemaVersion="firestore/bytes/1.0",sn._jsonSchema={type:gt("string",sn._jsonSchemaVersion),bytes:gt("string")};class ya{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new le(Y.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new St(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class va{constructor(e){this._methodName=e}}class vn{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new le(Y.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new le(Y.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Le(this._lat,e._lat)||Le(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:vn._jsonSchemaVersion}}static fromJSON(e){if(da(e,vn._jsonSchema))return new vn(e.latitude,e.longitude)}}vn._jsonSchemaVersion="firestore/geoPoint/1.0",vn._jsonSchema={type:gt("string",vn._jsonSchemaVersion),latitude:gt("number"),longitude:gt("number")};class En{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(s,r){if(s.length!==r.length)return!1;for(let i=0;i<s.length;++i)if(s[i]!==r[i])return!1;return!0})(this._values,e._values)}toJSON(){return{type:En._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(da(e,En._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new En(e.vectorValues);throw new le(Y.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}En._jsonSchemaVersion="firestore/vectorValue/1.0",En._jsonSchema={type:gt("string",En._jsonSchemaVersion),vectorValues:gt("object")};const EV=/^__.*__$/;class TV{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return this.fieldMask!==null?new rr(e,this.data,this.fieldMask,n,this.fieldTransforms):new pa(e,this.data,n,this.fieldTransforms)}}class jT{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return new rr(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function qT(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Re(40011,{Ac:t})}}class ed{constructor(e,n,s,r,i,o){this.settings=e,this.databaseId=n,this.serializer=s,this.ignoreUndefinedProperties=r,i===void 0&&this.Rc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new ed({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const n=this.path?.child(e),s=this.Vc({path:n,fc:!1});return s.gc(e),s}yc(e){const n=this.path?.child(e),s=this.Vc({path:n,fc:!1});return s.Rc(),s}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return zc(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(qT(this.Ac)&&EV.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class wV{constructor(e,n,s){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=s||Sl(e)}Cc(e,n,s,r=!1){return new ed({Ac:e,methodName:n,Dc:s,path:St.emptyPath(),fc:!1,bc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function td(t){const e=t._freezeSettings(),n=Sl(t._databaseId);return new wV(t._databaseId,!!e.ignoreUndefinedProperties,n)}function bV(t,e,n,s,r,i={}){const o=t.Cc(i.merge||i.mergeFields?2:0,e,n,r);sd("Data must be an object, but it was:",o,s);const a=WT(s,o);let l,u;if(i.merge)l=new rn(o.fieldMask),u=o.fieldTransforms;else if(i.mergeFields){const h=[];for(const f of i.mergeFields){const p=Mh(e,f,n);if(!o.contains(p))throw new le(Y.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);zT(h,p)||h.push(p)}l=new rn(h),u=o.fieldTransforms.filter((f=>l.covers(f.field)))}else l=null,u=o.fieldTransforms;return new TV(new Jt(a),l,u)}class Dl extends va{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Dl}}class nd extends va{_toFieldTransform(e){return new gD(e.path,new Yo)}isEqual(e){return e instanceof nd}}function IV(t,e,n,s){const r=t.Cc(1,e,n);sd("Data must be an object, but it was:",r,s);const i=[],o=Jt.empty();sr(s,((l,u)=>{const h=rd(e,l,n);u=yt(u);const f=r.yc(h);if(u instanceof Dl)i.push(h);else{const p=Ea(u,f);p!=null&&(i.push(h),o.set(h,p))}}));const a=new rn(i);return new jT(o,a,r.fieldTransforms)}function AV(t,e,n,s,r,i){const o=t.Cc(1,e,n),a=[Mh(e,s,n)],l=[r];if(i.length%2!=0)throw new le(Y.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let p=0;p<i.length;p+=2)a.push(Mh(e,i[p])),l.push(i[p+1]);const u=[],h=Jt.empty();for(let p=a.length-1;p>=0;--p)if(!zT(u,a[p])){const g=a[p];let A=l[p];A=yt(A);const v=o.yc(g);if(A instanceof Dl)u.push(g);else{const D=Ea(A,v);D!=null&&(u.push(g),h.set(g,D))}}const f=new rn(u);return new jT(h,f,o.fieldTransforms)}function RV(t,e,n,s=!1){return Ea(n,t.Cc(s?4:3,e))}function Ea(t,e){if(GT(t=yt(t)))return sd("Unsupported field value:",e,t),WT(t,e);if(t instanceof va)return(function(s,r){if(!qT(r.Ac))throw r.Sc(`${s._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Sc(`${s._methodName}() is not currently supported inside arrays`);const i=s._toFieldTransform(r);i&&r.fieldTransforms.push(i)})(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(s,r){const i=[];let o=0;for(const a of s){let l=Ea(a,r.wc(o));l==null&&(l={nullValue:"NULL_VALUE"}),i.push(l),o++}return{arrayValue:{values:i}}})(t,e)}return(function(s,r){if((s=yt(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return dD(r.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const i=Je.fromDate(s);return{timestampValue:jc(r.serializer,i)}}if(s instanceof Je){const i=new Je(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:jc(r.serializer,i)}}if(s instanceof vn)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof sn)return{bytesValue:oT(r.serializer,s._byteString)};if(s instanceof ot){const i=r.databaseId,o=s.firestore._databaseId;if(!o.isEqual(i))throw r.Sc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Bf(s.firestore._databaseId||r.databaseId,s._key.path)}}if(s instanceof En)return(function(o,a){return{mapValue:{fields:{[LE]:{stringValue:ME},[Bc]:{arrayValue:{values:o.toArray().map((u=>{if(typeof u!="number")throw a.Sc("VectorValues must only contain numeric values.");return Mf(a.serializer,u)}))}}}}}})(s,r);throw r.Sc(`Unsupported field value: ${yl(s)}`)})(t,e)}function WT(t,e){const n={};return PE(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):sr(t,((s,r)=>{const i=Ea(r,e.mc(s));i!=null&&(n[s]=i)})),{mapValue:{fields:n}}}function GT(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Je||t instanceof vn||t instanceof sn||t instanceof ot||t instanceof va||t instanceof En)}function sd(t,e,n){if(!GT(n)||!SE(n)){const s=yl(n);throw s==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+s)}}function Mh(t,e,n){if((e=yt(e))instanceof ya)return e._internalPath;if(typeof e=="string")return rd(t,e);throw zc("Field path arguments must be of type string or ",t,!1,void 0,n)}const SV=new RegExp("[~\\*/\\[\\]]");function rd(t,e,n){if(e.search(SV)>=0)throw zc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new ya(...e.split("."))._internalPath}catch{throw zc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function zc(t,e,n,s,r){const i=s&&!s.isEmpty(),o=r!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(i||o)&&(l+=" (found",i&&(l+=` in field ${s}`),o&&(l+=` in document ${r}`),l+=")"),new le(Y.INVALID_ARGUMENT,a+t+l)}function zT(t,e){return t.some((n=>n.isEqual(e)))}class KT{constructor(e,n,s,r,i){this._firestore=e,this._userDataWriter=n,this._key=s,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new ot(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new CV(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Ol("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class CV extends KT{data(){return super.data()}}function Ol(t,e){return typeof e=="string"?rd(t,e):e instanceof ya?e._internalPath:e._delegate._internalPath}function PV(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new le(Y.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class id{}class od extends id{}function hc(t,e,...n){let s=[];e instanceof id&&s.push(e),s=s.concat(n),(function(i){const o=i.filter((l=>l instanceof Vl)).length,a=i.filter((l=>l instanceof Ta)).length;if(o>1||o>0&&a>0)throw new le(Y.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(s);for(const r of s)t=r._apply(t);return t}class Ta extends od{constructor(e,n,s){super(),this._field=e,this._op=n,this._value=s,this.type="where"}static _create(e,n,s){return new Ta(e,n,s)}_apply(e){const n=this._parse(e);return QT(e._query,n),new ir(e.firestore,e.converter,Ah(e._query,n))}_parse(e){const n=td(e.firestore);return(function(i,o,a,l,u,h,f){let p;if(u.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new le(Y.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){Xg(f,h);const A=[];for(const v of f)A.push(Jg(l,i,v));p={arrayValue:{values:A}}}else p=Jg(l,i,f)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||Xg(f,h),p=RV(a,o,f,h==="in"||h==="not-in");return mt.create(u,h,p)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function kV(t,e,n){const s=e,r=Ol("where",t);return Ta._create(r,s,n)}class Vl extends id{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Vl(e,n)}_parse(e){const n=this._queryConstraints.map((s=>s._parse(e))).filter((s=>s.getFilters().length>0));return n.length===1?n[0]:Sn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(r,i){let o=r;const a=i.getFlattenedFilters();for(const l of a)QT(o,l),o=Ah(o,l)})(e._query,n),new ir(e.firestore,e.converter,Ah(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Ll extends od{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Ll(e,n)}_apply(e){const n=(function(r,i,o){if(r.startAt!==null)throw new le(Y.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(r.endAt!==null)throw new le(Y.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Qo(i,o)})(e._query,this._field,this._direction);return new ir(e.firestore,e.converter,(function(r,i){const o=r.explicitOrderBy.concat([i]);return new ji(r.path,r.collectionGroup,o,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)})(e._query,n))}}function xh(t,e="asc"){const n=e,s=Ol("orderBy",t);return Ll._create(s,n)}function Jg(t,e,n){if(typeof(n=yt(n))=="string"){if(n==="")throw new le(Y.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!qE(e)&&n.indexOf("/")!==-1)throw new le(Y.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const s=e.path.child(Ye.fromString(n));if(!_e.isDocumentKey(s))throw new le(Y.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return pg(t,new _e(s))}if(n instanceof ot)return pg(t,n._key);throw new le(Y.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${yl(n)}.`)}function Xg(t,e){if(!Array.isArray(t)||t.length===0)throw new le(Y.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function QT(t,e){const n=(function(r,i){for(const o of r)for(const a of o.getFlattenedFilters())if(i.indexOf(a.op)>=0)return a.op;return null})(t.filters,(function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new le(Y.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new le(Y.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class YT{convertValue(e,n="none"){switch(Zs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ht(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Xs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Re(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const s={};return sr(e,((r,i)=>{s[r]=this.convertValue(i,n)})),s}convertVectorValue(e){const n=e.fields?.[Bc].arrayValue?.values?.map((s=>ht(s.doubleValue)));return new En(n)}convertGeoPoint(e){return new vn(ht(e.latitude),ht(e.longitude))}convertArray(e,n){return(e.values||[]).map((s=>this.convertValue(s,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const s=Tl(e);return s==null?null:this.convertValue(s,n);case"estimate":return this.convertTimestamp(zo(e));default:return null}}convertTimestamp(e){const n=Js(e);return new Je(n.seconds,n.nanos)}convertDocumentKey(e,n){const s=Ye.fromString(e);qe(fT(s),9688,{name:e});const r=new Si(s.get(1),s.get(3)),i=new _e(s.popFirst(5));return r.isEqual(n)||fs(`Document ${i} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}function NV(t,e,n){let s;return s=t?t.toFirestore(e):e,s}class ri{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Gs extends KT{constructor(e,n,s,r,i,o){super(e,n,s,r,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Oo(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const s=this._document.data.field(Ol("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new le(Y.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Gs._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Gs._jsonSchemaVersion="firestore/documentSnapshot/1.0",Gs._jsonSchema={type:gt("string",Gs._jsonSchemaVersion),bundleSource:gt("string","DocumentSnapshot"),bundleName:gt("string"),bundle:gt("string")};class Oo extends Gs{data(e={}){return super.data(e)}}class Sr{constructor(e,n,s,r){this._firestore=e,this._userDataWriter=n,this._snapshot=r,this.metadata=new ri(r.hasPendingWrites,r.fromCache),this.query=s}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((s=>{e.call(n,new Oo(this._firestore,this._userDataWriter,s.key,s,new ri(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new le(Y.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(r,i){if(r._snapshot.oldDocs.isEmpty()){let o=0;return r._snapshot.docChanges.map((a=>{const l=new Oo(r._firestore,r._userDataWriter,a.doc.key,a.doc,new ri(r._snapshot.mutatedKeys.has(a.doc.key),r._snapshot.fromCache),r.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}}))}{let o=r._snapshot.oldDocs;return r._snapshot.docChanges.filter((a=>i||a.type!==3)).map((a=>{const l=new Oo(r._firestore,r._userDataWriter,a.doc.key,a.doc,new ri(r._snapshot.mutatedKeys.has(a.doc.key),r._snapshot.fromCache),r.query.converter);let u=-1,h=-1;return a.type!==0&&(u=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),h=o.indexOf(a.doc.key)),{type:DV(a.type),doc:l,oldIndex:u,newIndex:h}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new le(Y.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Sr._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=_l.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],s=[],r=[];return this.docs.forEach((i=>{i._document!==null&&(n.push(i._document),s.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),r.push(i.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function DV(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Re(61501,{type:t})}}function Di(t){t=Rn(t,ot);const e=Rn(t.firestore,jr);return _V(Nl(e),t._key).then((n=>VV(e,t,n)))}Sr._jsonSchemaVersion="firestore/querySnapshot/1.0",Sr._jsonSchema={type:gt("string",Sr._jsonSchemaVersion),bundleSource:gt("string","QuerySnapshot"),bundleName:gt("string"),bundle:gt("string")};class JT extends YT{constructor(e){super(),this.firestore=e}convertBytes(e){return new sn(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new ot(this.firestore,null,n)}}function Vo(t){t=Rn(t,ir);const e=Rn(t.firestore,jr),n=Nl(e),s=new JT(e);return PV(t._query),yV(n,t._query).then((r=>new Sr(e,s,t,r)))}function Us(t,e,n){t=Rn(t,ot);const s=Rn(t.firestore,jr),r=NV(t.converter,e);return Ml(s,[bV(td(s),"setDoc",t._key,r,t.converter!==null,n).toMutation(t._key,yn.none())])}function OV(t,e,n,...s){t=Rn(t,ot);const r=Rn(t.firestore,jr),i=td(r);let o;return o=typeof(e=yt(e))=="string"||e instanceof ya?AV(i,"updateDoc",t._key,e,n,s):IV(i,"updateDoc",t._key,e),Ml(r,[o.toMutation(t._key,yn.exists(!0))])}function Lo(t){return Ml(Rn(t.firestore,jr),[new xf(t._key,yn.none())])}function Ml(t,e){return(function(s,r){const i=new is;return s.asyncQueue.enqueueAndForget((async()=>iV(await gV(s),r,i))),i.promise})(Nl(t),e)}function VV(t,e,n){const s=n.docs.get(e._key),r=new JT(t);return new Gs(t,r,e._key,s,new ri(n.hasPendingWrites,n.fromCache),e.converter)}function fc(){return new nd("serverTimestamp")}(function(e,n=!0){(function(r){Bi=r})(Fi),Ii(new Nr("firestore",((s,{instanceIdentifier:r,options:i})=>{const o=s.getProvider("app").getImmediate(),a=new jr(new RN(s.getProvider("auth-internal")),new PN(o,s.getProvider("app-check-internal")),(function(u,h){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new le(Y.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Si(u.options.projectId,h)})(o,r),o);return i={useFetchStreams:n,...i},a._setSettings(i),a}),"PUBLIC").setMultipleInstances(!0)),qs(tg,ng,e),qs(tg,ng,"esm2020")})();const LV=Object.freeze(Object.defineProperty({__proto__:null,AbstractUserDataWriter:YT,Bytes:sn,CollectionReference:os,DocumentReference:ot,DocumentSnapshot:Gs,FieldPath:ya,FieldValue:va,Firestore:jr,FirestoreError:le,GeoPoint:vn,Query:ir,QueryCompositeFilterConstraint:Vl,QueryConstraint:od,QueryDocumentSnapshot:Oo,QueryFieldFilterConstraint:Ta,QueryOrderByConstraint:Ll,QuerySnapshot:Sr,SnapshotMetadata:ri,Timestamp:Je,VectorValue:En,_AutoId:_l,_ByteString:Pt,_DatabaseId:Si,_DocumentKey:_e,_EmptyAuthCredentialsProvider:IE,_FieldPath:St,_cast:Rn,_logWarn:Lr,_validateIsNotUsedTogether:RE,collection:Rr,connectFirestoreEmulator:$T,deleteDoc:Lo,doc:Xt,ensureFirestoreConfigured:Nl,executeWrite:Ml,getDoc:Di,getDocs:Vo,getFirestore:HT,orderBy:xh,query:hc,serverTimestamp:fc,setDoc:Us,updateDoc:OV,where:kV},Symbol.toStringTag,{value:"Module"}));var MV="firebase",xV="12.7.0";qs(MV,xV,"app");const FV={apiKey:"AIzaSyCx092q7up_BXFgK2e13A-IQ3uDjwf6J5A",authDomain:"accsuite117.firebaseapp.com",projectId:"accsuite117",storageBucket:"accsuite117.firebasestorage.app",messagingSenderId:"352958845592",appId:"1:352958845592:web:bb6a7fbe04f6181707f6ed"};let Zo,vr,ft;km().length?Zo=km()[0]:Zo=Dv(FV);vr=bN(Zo);ft=HT(Zo);const UV=Object.freeze(Object.defineProperty({__proto__:null,get app(){return Zo},get auth(){return vr},get db(){return ft}},Symbol.toStringTag,{value:"Module"})),ln=de(null),Rs=de("pilot"),Zg=de(!0),mr=de(null);let e_=!1;function Wi(){const t=Fe(()=>!!ln.value),e=Fe(()=>ln.value?.emailVerified??!1),n=Fe(()=>ln.value?.email??""),s=Fe(()=>ln.value?.displayName??""),r=Fe(()=>Rs.value==="coach"),i=Fe(()=>Rs.value==="admin"),o=async v=>{try{const D=Xt(ft,"users",v.uid),V=await Di(D);if(!V.exists())await Us(D,{email:v.email,nickname:v.displayName||"Utente",role:"pilot",createdAt:new Date().toISOString(),emailVerified:v.emailVerified}),Rs.value="pilot",console.log("[AUTH] Created missing user profile");else{const N=V.data();Rs.value=N.role||"pilot"}}catch(D){console.error("[AUTH] Failed to ensure user document:",D),Rs.value="pilot"}},a=()=>{e_||(e_=!0,h1(vr,async v=>{if(ln.value=v,v){await o(v);try{const D=window.electronAPI;if(console.log("[AUTH] electronAPI exists:",!!D),console.log("[AUTH] saveUserIdentity exists:",!!D?.saveUserIdentity),D?.saveUserIdentity){console.log("[AUTH] Calling saveUserIdentity with:",{userId:v.uid,email:v.email,displayName:v.displayName});const V=await D.saveUserIdentity({userId:v.uid,email:v.email,displayName:v.displayName||v.email?.split("@")[0]||"User"});console.log("[AUTH] Electron identity saved:",V?"":"")}else console.log("[AUTH] Not in Electron environment (electronAPI not available)")}catch(D){console.error("[AUTH] Identity save failed:",D)}}else{Rs.value="pilot";try{const D=window.electronAPI;D?.clearUserIdentity&&(await D.clearUserIdentity(),console.log("[AUTH] Electron identity cleared"))}catch{}}Zg.value=!1,console.log("[AUTH] State changed:",v?.email??"logged out","| Role:",Rs.value)}))},l=async(v,D,V,N="",_="")=>{mr.value=null;try{const O=(await i1(vr,v,D)).user;return await c1(O,{displayName:V}),await Us(Xt(ft,"users",O.uid),{firstName:N,lastName:_,nickname:V,email:v,role:"pilot",coachId:null,createdAt:new Date().toISOString(),emailVerified:!1}),await qm(O),console.log("[AUTH] Registered:",v,"Verification email sent"),{success:!0,user:O}}catch(R){return console.error("[AUTH] Register error:",R.code),mr.value=A(R.code),{success:!1,error:mr.value}}},u=async(v,D)=>{mr.value=null;try{const V=await o1(vr,v,D);return console.log("[AUTH] Logged in:",v),{success:!0,user:V.user}}catch(V){return console.error("[AUTH] Login error:",V.code),mr.value=A(V.code),{success:!1,error:mr.value}}},h=async()=>{try{return await f1(vr),console.log("[AUTH] Logged out"),{success:!0}}catch(v){return console.error("[AUTH] Logout error:",v),{success:!1,error:v.message}}},f=async()=>{if(!ln.value)return{success:!1,error:"Utente non autenticato"};try{return await qm(ln.value),console.log("[AUTH] Verification email resent"),{success:!0}}catch(v){return console.error("[AUTH] Resend error:",v.code),{success:!1,error:A(v.code)}}},p=async()=>{if(!ln.value)return{verified:!1,error:"Utente non autenticato"};try{await ln.value.reload(),ln.value=vr.currentUser;const v=ln.value?.emailVerified??!1;return console.log("[AUTH] Email verified check:",v),{verified:v,error:null}}catch(v){return console.error("[AUTH] Check verification error:",v),{verified:!1,error:v.message}}},g=async v=>{try{const D=await Di(Xt(ft,"users",v));return D.exists()?D.data():null}catch(D){return console.error("[AUTH] Get profile error:",D),null}},A=v=>({"auth/email-already-in-use":"Email gi registrata","auth/weak-password":"Password troppo debole (min. 6 caratteri)","auth/invalid-email":"Email non valida","auth/user-not-found":"Utente non trovato","auth/wrong-password":"Password errata","auth/invalid-credential":"Credenziali non valide","auth/too-many-requests":"Troppi tentativi, riprova pi tardi","auth/network-request-failed":"Errore di rete, controlla la connessione"})[v]||"Errore di autenticazione";return a(),{currentUser:ln,isLoading:Zg,authError:mr,isAuthenticated:t,isEmailVerified:e,userEmail:n,userDisplayName:s,register:l,login:u,logout:h,resendVerificationEmail:f,checkEmailVerified:p,getUserProfile:g,userRole:Rs,isCoach:r,isAdmin:i}}let Kc=0,t_=0;async function Du(t){return Kc++,console.log(`%c[FIREBASE]  READ #${Kc}: ${t.path}`,"color: #4CAF50"),Di(t)}async function Qa(t){Kc++,console.log(`%c[FIREBASE]  QUERY #${Kc}: (collection query)`,"color: #4CAF50");const e=await Vo(t);return console.log(`%c[FIREBASE]     Returned ${e.docs.length} documents`,"color: #8BC34A"),e}async function BV(t,e){return t_++,console.log(`%c[FIREBASE]  WRITE #${t_}: ${t.path}`,"color: #FF9800"),Us(t,e)}const Ss={PRACTICE:0,QUALIFY:1,RACE:2};function FM(t){switch(t){case 0:return"practice";case 1:return"qualify";case 2:return"race";default:return"practice"}}function UM(t){if(!t||t<=0)return"--:--.---";const e=Math.round(t),n=Math.floor(e/6e4),s=Math.floor(e%6e4/1e3),r=e%1e3;return`${n}:${s.toString().padStart(2,"0")}.${r.toString().padStart(3,"0")}`}function Ou(t){if(!t||t<=0)return"0h 0m";const e=Math.floor(t/36e5),n=Math.floor(t%36e5/6e4);return e>0?`${e}h ${n}m`:`${n}m`}function BM(t){return t?t.split("_").map((e,n)=>e.match(/^gt\d$/i)||e.length<=2?e.toUpperCase():e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()).join(" "):"Unknown"}function $M(t){return t?t.split("_").map(e=>e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()).join(" "):"Unknown"}function HM(t){if(!t)return"-";const e=new Date(t);return`${e.getDate()} ${["Gen","Feb","Mar","Apr","Mag","Giu","Lug","Ago","Set","Ott","Nov","Dic"][e.getMonth()]} ${e.getFullYear()}`}function jM(t){if(!t)return"-";const e=new Date(t);return`${e.getDate()} ${["GENNAIO","FEBBRAIO","MARZO","APRILE","MAGGIO","GIUGNO","LUGLIO","AGOSTO","SETTEMBRE","OTTOBRE","NOVEMBRE","DICEMBRE"][e.getMonth()]} ${e.getFullYear()}`}function qM(t){if(!t)return"-";const e=new Date(t);return`${e.getHours().toString().padStart(2,"0")}:${e.getMinutes().toString().padStart(2,"0")}`}const $V=de([]),HV=de(!1),jV=de(null),n_=de(null),Ya=de(!1),s_="acc_trackBests_cache",r_="acc_trackActivity_cache";function i_(t,e,n){if(!(typeof window>"u"))try{const s={userId:n,data:e,timestamp:Date.now()};sessionStorage.setItem(t,JSON.stringify(s)),console.log(`[CACHE]  Saved ${t} to sessionStorage`)}catch(s){console.warn("[CACHE] Failed to save to sessionStorage:",s)}}function o_(t,e){if(typeof window>"u")return null;try{const n=sessionStorage.getItem(t);if(!n)return null;const{userId:s,data:r,timestamp:i}=JSON.parse(n);return s!==e?(console.log(`[CACHE] Different user, invalidating ${t}`),sessionStorage.removeItem(t),null):Date.now()-i>36e5?(console.log(`[CACHE] Cache expired, invalidating ${t}`),sessionStorage.removeItem(t),null):(console.log(`[CACHE]  Loaded ${t} from sessionStorage (age: ${Math.round((Date.now()-i)/1e3)}s)`),r)}catch(n){return console.warn("[CACHE] Failed to load from sessionStorage:",n),null}}function ad(){const t=$V,e=HV,n=jV,{currentUser:s}=Wi(),r=Fe(()=>typeof window>"u"?!1:!!window.electronAPI);function i(q,L){return`${q.split(".")[0]}_${L}`.replace(/[^a-zA-Z0-9]/g,"_").substring(0,100)}function o(q){const L=q.session_info||{},G=q.stints||[],H={track:L.track||q.track||"Unknown",date_start:L.date_start||q.date||new Date().toISOString(),date_end:L.date_end||null,car:L.car_model||L.car||q.car||"",session_type:L.session_type??0,driver:L.driver||null},B=["Flood","Wet","Damp","Greasy","Green","Fast","Optimum"],j={};B.forEach(K=>{j[K]={bestQualy:null,bestQualyTemp:null,bestRace:null,bestRaceTemp:null,bestAvgRace:null,bestAvgRaceTemp:null}});let se=null,pe=null,we=null,ae=null,M=null,te=null;G.forEach(K=>{const ge=K.type==="Qualify",Ne=K.laps||[];Ne.forEach(k=>{if(k.is_valid&&!k.has_pit_stop&&k.lap_time_ms){const x=k.track_grip_status||"Unknown",J=k.air_temp||0,z={airTemp:J,roadTemp:k.road_temp||0,grip:x};j[x]&&(ge?(!j[x].bestQualy||k.lap_time_ms<j[x].bestQualy)&&(j[x].bestQualy=k.lap_time_ms,j[x].bestQualyTemp=J):(!j[x].bestRace||k.lap_time_ms<j[x].bestRace)&&(j[x].bestRace=k.lap_time_ms,j[x].bestRaceTemp=J)),ge?(!se||k.lap_time_ms<se)&&(se=k.lap_time_ms,pe=z):(!we||k.lap_time_ms<we)&&(we=k.lap_time_ms,ae=z)}});const b=Ne.filter(k=>k.is_valid&&!k.has_pit_stop);if(!ge&&K.avg_clean_lap&&b.length>=5){const k=b[0],x=k?.track_grip_status||"Unknown",J=k?.air_temp||0;j[x]&&(!j[x].bestAvgRace||K.avg_clean_lap<j[x].bestAvgRace)&&(j[x].bestAvgRace=K.avg_clean_lap,j[x].bestAvgRaceTemp=J),(!M||K.avg_clean_lap<M)&&(M=K.avg_clean_lap,te={airTemp:J,roadTemp:k?.road_temp||0,grip:x})}});const W={laps:L.laps_total||q.laps?.length||0,lapsValid:L.laps_valid||0,bestLap:L.session_best_lap||q.bestLap||null,avgCleanLap:L.avg_clean_lap||null,totalTime:L.total_drive_time_ms||0,stintCount:G.length||0,best_qualy_ms:se,best_qualy_conditions:pe,best_race_ms:we,best_race_conditions:ae,best_avg_race_ms:M,best_avg_race_conditions:te,best_by_grip:j};return{meta:H,summary:W}}async function a(){if(!r.value)return[];const q=window.electronAPI,L=await q.getTelemetryFiles();if(!L||L.length===0)return[];const G=s.value?.uid,H=[];for(const B of L)try{const j=await q.readFile(B.path);if(!j||j.ownerId&&j.ownerId!==G)continue;const{meta:se,summary:pe}=o(j),we=i(se.date_start,se.track);H.push({sessionId:we,fileHash:"",fileName:B.name,uploadedAt:null,meta:se,summary:pe,rawChunkCount:0,rawSizeBytes:0})}catch(j){console.warn(`[TELEMETRY] Error reading local file ${B.name}:`,j)}return H.sort((B,j)=>(j.meta.date_start||"").localeCompare(B.meta.date_start||"")),H}async function l(q){const L=Rr(ft,`users/${q}/sessions`);let G;try{const H=hc(L,xh("uploadedAt","desc"));G=await Qa(H)}catch{console.warn("[TELEMETRY] orderBy failed, fetching without order"),G=await Qa(L)}return G.docs.map(H=>{const B=H.data();return{sessionId:H.id,fileHash:B.fileHash||null,fileName:B.fileName||null,uploadedAt:B.uploadedAt||null,meta:B.meta||{},summary:B.summary||{},rawChunkCount:B.rawChunkCount||0,rawSizeBytes:B.rawSizeBytes||0}})}async function u(q,L=!1){const G=q||s.value?.uid;if(!G)return console.warn("[TELEMETRY] No user ID provided"),[];const H=n_.value!==G;if(!L&&!H&&t.value.length>0)return console.log(`%c[TELEMETRY]  Using CACHED sessions (${t.value.length}), skipping Firebase query`,"color: #9C27B0"),t.value;n_.value=G,e.value=!0,n.value=null;try{const B=!q||q===s.value?.uid;let j=[];if(r.value&&B)try{j=await a(),console.log(`[TELEMETRY] Found ${j.length} local files`)}catch(M){console.warn("[TELEMETRY] Local load failed:",M)}const se=await l(G),pe=new Map;for(const M of se){const te=(M.meta.date_start||"").split(".")[0],W=(M.meta.track||"").toLowerCase().replace(/[^a-z0-9]/g,"_"),K=`${te}_${W}`,ge=pe.get(K);if(!ge)pe.set(K,M);else{const Ne=ge.uploadedAt?.toMillis?.()||0;(M.uploadedAt?.toMillis?.()||0)>Ne&&pe.set(K,M)}}const we=se.length-pe.size;we>0&&console.log(`[TELEMETRY]  Removed ${we} duplicate sessions (same date + track)`);let ae=0;for(const M of j){const te=(M.meta.date_start||"").split(".")[0],W=(M.meta.track||"").toLowerCase().replace(/[^a-z0-9]/g,"_"),K=`${te}_${W}`;pe.has(K)||(pe.set(K,M),ae++)}return ae>0&&console.log(`[TELEMETRY]  Merged ${ae} local-only sessions (not yet uploaded)`),t.value=Array.from(pe.values()),t.value.sort((M,te)=>(te.meta.date_start||"").localeCompare(M.meta.date_start||"")),console.log(`[TELEMETRY]  Loaded ${t.value.length} sessions (${se.length} Firebase + ${ae} local-only)`),t.value}catch(B){return console.error("[TELEMETRY] Error loading sessions:",B),n.value=B.message,[]}finally{e.value=!1}}async function h(q,L){const G=L||s.value?.uid;if(!G)return null;const H=!L||L===s.value?.uid;if(r.value&&H)try{const B=window.electronAPI,j=await B.getTelemetryFiles();for(const se of j){const pe=await B.readFile(se.path);if(!pe||pe.ownerId&&pe.ownerId!==G)continue;const we=pe.session_info||{};if(i(we.date_start||pe.date||"",we.track||pe.track||"")===q)return console.log("[TELEMETRY]  Loaded full session from LOCAL file (0 Firebase reads)"),pe}}catch(B){console.warn("[TELEMETRY] Local fetchSessionFull failed, falling back to Firebase:",B)}try{const B=Xt(ft,`users/${G}/sessions/${q}`),j=await Du(B);if(!j.exists()||(j.data().rawChunkCount||0)===0)return null;const we=Rr(ft,`users/${G}/sessions/${q}/rawChunks`),ae=hc(we,xh("idx","asc")),M=await Qa(ae),te=[];M.forEach(K=>{const ge=K.data();te.push({idx:ge.idx,chunk:ge.chunk})}),te.sort((K,ge)=>K.idx-ge.idx);const W=te.map(K=>K.chunk).join("");return console.log("[TELEMETRY] Loaded full session from Firebase chunks"),JSON.parse(W)}catch(B){return console.error("[TELEMETRY] Error fetching full session:",B),null}}async function f(q,L){const G=q.toLowerCase().replace(/[^a-z0-9]/g,"_"),H=["Flood","Wet","Damp","Greasy","Green","Fast","Optimum"],B={};H.forEach(se=>{B[se]={bestQualy:null,bestQualyTemp:null,bestQualySessionId:null,bestQualyDate:null,bestRace:null,bestRaceTemp:null,bestRaceSessionId:null,bestRaceDate:null,bestAvgRace:null,bestAvgRaceTemp:null,bestAvgRaceSessionId:null,bestAvgRaceDate:null}});const j=t.value.filter(se=>{const pe=se.meta.track.toLowerCase().replace(/[^a-z0-9]/g,"_");return pe.includes(G)||G.includes(pe)});if(j.length===0)return B;for(const se of j){const pe=se.meta.date_start||null,we=se.summary?.best_by_grip;if(we)for(const ae of H){const M=we[ae];M&&(M.bestQualy&&(!B[ae].bestQualy||M.bestQualy<B[ae].bestQualy)&&(B[ae].bestQualy=M.bestQualy,B[ae].bestQualyTemp=M.bestQualyTemp,B[ae].bestQualySessionId=se.sessionId,B[ae].bestQualyDate=pe),M.bestRace&&(!B[ae].bestRace||M.bestRace<B[ae].bestRace)&&(B[ae].bestRace=M.bestRace,B[ae].bestRaceTemp=M.bestRaceTemp,B[ae].bestRaceSessionId=se.sessionId,B[ae].bestRaceDate=pe),M.bestAvgRace&&(!B[ae].bestAvgRace||M.bestAvgRace<B[ae].bestAvgRace)&&(B[ae].bestAvgRace=M.bestAvgRace,B[ae].bestAvgRaceTemp=M.bestAvgRaceTemp,B[ae].bestAvgRaceSessionId=se.sessionId,B[ae].bestAvgRaceDate=pe))}}return console.log(`[TELEMETRY]  Calculated trackBests for ${G} from ${j.length} sessions (0 extra queries)`),B}async function p(q,L="Optimum",G){return(await A(q,G))[L]||{bestQualy:null,bestQualyTemp:null,bestQualySessionId:null,bestQualyDate:null,bestRace:null,bestRaceTemp:null,bestRaceSessionId:null,bestRaceDate:null,bestAvgRace:null,bestAvgRaceTemp:null,bestAvgRaceSessionId:null,bestAvgRaceDate:null}}const g=de({});async function A(q,L){const G=L||s.value?.uid,H=q.toLowerCase().replace(/[^a-z0-9]/g,"_"),B=`${H}_${G||"anon"}`;if(g.value[B])return console.log(`[TELEMETRY] trackBests cache HIT for ${H}`),g.value[B];if(G&&!r.value)try{const se=Xt(ft,`users/${G}/trackBests/${H}`),pe=await Du(se);if(pe.exists()){const we=pe.data();console.log(`[TELEMETRY] trackBests Firebase HIT for ${H}`);const ae={},M=we.bests||we,te=["Flood","Wet","Damp","Greasy","Green","Fast","Optimum"];for(const W of te)M[W]&&(ae[W]=M[W]);if(M.Opt){const W=M.Opt;if(!ae.Optimum)ae.Optimum=W;else{const K=ae.Optimum;W.bestQualy&&(!K.bestQualy||W.bestQualy<K.bestQualy)&&(K.bestQualy=W.bestQualy,K.bestQualyTemp=W.bestQualyTemp,K.bestQualySessionId=W.bestQualySessionId,K.bestQualyDate=W.bestQualyDate),W.bestRace&&(!K.bestRace||W.bestRace<K.bestRace)&&(K.bestRace=W.bestRace,K.bestRaceTemp=W.bestRaceTemp,K.bestRaceSessionId=W.bestRaceSessionId,K.bestRaceDate=W.bestRaceDate),W.bestAvgRace&&(!K.bestAvgRace||W.bestAvgRace<K.bestAvgRace)&&(K.bestAvgRace=W.bestAvgRace,K.bestAvgRaceTemp=W.bestAvgRaceTemp,K.bestAvgRaceSessionId=W.bestAvgRaceSessionId,K.bestAvgRaceDate=W.bestAvgRaceDate)}}return g.value[B]=ae,ae}}catch(se){console.warn("[TELEMETRY] Error reading trackBests from Firebase:",se)}console.log(`[TELEMETRY] trackBests MISS for ${H}, calculating...`);const j=await f(q);if(G&&!r.value)try{const se=Xt(ft,`users/${G}/trackBests/${H}`);await BV(se,{trackId:H,bests:j,lastUpdated:new Date().toISOString()}),console.log(`[TELEMETRY] trackBests SAVED to Firebase for ${H}`)}catch(se){console.warn("[TELEMETRY] Error saving trackBests to Firebase:",se)}return g.value[B]=j,j}async function v(q,L,G=!1){const H=q.toLowerCase().replace(/[^a-z0-9]/g,"_"),B=L||s.value?.uid,j=`${H}_${B||"anon"}`;if(delete g.value[j],console.log(`[TELEMETRY] trackBests cache INVALIDATED for ${H}`),G&&B&&!r.value)try{const se=Xt(ft,`users/${B}/trackBests/${H}`);await Lo(se),console.log(`[TELEMETRY] trackBests DELETED from Firebase for ${H}`)}catch(se){console.warn("[TELEMETRY] Error deleting trackBests from Firebase:",se)}}async function D(q,L){return console.log(`[TELEMETRY] FORCE RECALCULATING trackBests for ${q}`),await v(q,L,!0),await A(q,L)}async function V(q){const L=q||s.value?.uid;if(!L)return console.warn("[PREFETCH] No user ID, skipping prefetch"),0;const G=o_(s_,L),H=o_(r_,L);if(G&&Object.keys(G).length>0)return console.log(`[PREFETCH]  Using sessionStorage cache: ${Object.keys(G).length} trackBests`),Object.assign(g.value,G),H&&Object.assign(N.value,H),Ya.value=!0,Object.keys(G).length;console.log(`[PREFETCH]  Starting batch prefetch for user ${L}`);const B=Date.now();try{const j=Rr(ft,`users/${L}/trackBests`),se=await Qa(hc(j));let pe=0;const we=["Flood","Wet","Damp","Greasy","Green","Fast","Optimum"];se.forEach(M=>{const te=M.id,W=M.data(),K=`${te}_${L}`,ge={},Ne=W.bests||W;for(const b of we)Ne[b]&&(ge[b]=Ne[b]);if(Ne.Opt){const b=Ne.Opt;if(!ge.Optimum)ge.Optimum=b;else{const k=ge.Optimum;b.bestQualy&&(!k.bestQualy||b.bestQualy<k.bestQualy)&&(k.bestQualy=b.bestQualy,k.bestQualyTemp=b.bestQualyTemp,k.bestQualySessionId=b.bestQualySessionId,k.bestQualyDate=b.bestQualyDate),b.bestRace&&(!k.bestRace||b.bestRace<k.bestRace)&&(k.bestRace=b.bestRace,k.bestRaceTemp=b.bestRaceTemp,k.bestRaceSessionId=b.bestRaceSessionId,k.bestRaceDate=b.bestRaceDate),b.bestAvgRace&&(!k.bestAvgRace||b.bestAvgRace<k.bestAvgRace)&&(k.bestAvgRace=b.bestAvgRace,k.bestAvgRaceTemp=b.bestAvgRaceTemp,k.bestAvgRaceSessionId=b.bestAvgRaceSessionId,k.bestAvgRaceDate=b.bestAvgRaceDate)}}if(g.value[K]=ge,W.activity){const b=W.activity;N.value[K]={totalLaps:b.totalLaps||0,validLaps:b.validLaps||0,validPercent:b.totalLaps>0?Math.round(b.validLaps/b.totalLaps*100):0,totalTimeMs:b.totalTimeMs||0,totalTimeFormatted:Ou(b.totalTimeMs||0),sessionCount:b.sessionCount||0,lastSessionDate:b.lastSessionDate}}pe++});const ae=Date.now()-B;return console.log(`[PREFETCH]  Loaded ${pe} trackBests in ${ae}ms (1 query instead of ${pe})`),i_(s_,g.value,L),i_(r_,N.value,L),Ya.value=!0,pe}catch(j){return console.error("[PREFETCH] Error during batch prefetch:",j),Ya.value=!0,0}}const N=de({});async function _(q,L){const G=q.toLowerCase().replace(/[^a-z0-9]/g,"_"),H=L||s.value?.uid,B=`${G}_${H||"anon"}`;if(N.value[B])return N.value[B];if(H&&!r.value)try{const se=Xt(ft,`users/${H}/trackBests/${G}`),pe=await Du(se);if(pe.exists()){const we=pe.data();if(we.activity){const ae=we.activity,M={totalLaps:ae.totalLaps||0,validLaps:ae.validLaps||0,validPercent:ae.totalLaps>0?Math.round(ae.validLaps/ae.totalLaps*100):0,totalTimeMs:ae.totalTimeMs||0,totalTimeFormatted:Ou(ae.totalTimeMs||0),sessionCount:ae.sessionCount||0,lastSessionDate:ae.lastSessionDate};return N.value[B]=M,console.log(`[TELEMETRY] trackActivity Firebase HIT for ${G}`),M}}}catch(se){console.warn("[TELEMETRY] Error reading trackActivity from Firebase:",se)}console.log(`[TELEMETRY] trackActivity MISS for ${G}, calculating...`);const j=w(q);return N.value[B]=j,j}async function R(q,L,G,H){const B=await p(q,L,H);function j(se,pe){if(!se)return null;const we=Math.round(pe||G),M=(G-we)*100;return Math.round(se+M)}return{theoQualy:j(B.bestQualy,B.bestQualyTemp),theoRace:j(B.bestRace,B.bestRaceTemp),theoAvgRace:j(B.bestAvgRace,B.bestAvgRaceTemp),historicQualy:B.bestQualy,historicQualyTemp:B.bestQualyTemp,historicRace:B.bestRace,historicRaceTemp:B.bestRaceTemp,historicAvgRace:B.bestAvgRace,historicAvgRaceTemp:B.bestAvgRaceTemp,grip:L,stintTemp:G}}async function O(q,L){const G=await f(q),H={};for(const[B,j]of Object.entries(G))H[B]={bestAvgRace:j.bestAvgRace,bestAvgRaceTemp:j.bestAvgRaceTemp};return H}async function U(q,L){const G=await f(q);let H=null;for(const B of Object.keys(G)){const j=G[B];if(!j)continue;const se=j.bestAvgRace;se&&(!H||se<H)&&(H=se)}return H}const E=Fe(()=>t.value.length===0?null:t.value[0]),I=Fe(()=>E.value?.meta.car||null),y=Fe(()=>E.value?.meta.track||null),C=Fe(()=>{const q=["Flood","Wet","Damp","Greasy","Green","Fast","Optimum"],L={};for(const G of t.value){const H=(G.meta.track||"unknown").toLowerCase(),B=G.summary;if(!L[H]){const ae={};q.forEach(M=>{ae[M]={bestQualy:null,bestQualyTemp:null,bestRace:null,bestRaceTemp:null,bestAvgRace:null,bestAvgRaceTemp:null}}),L[H]={track:G.meta.track,sessions:0,lastSession:G.meta.date_start,bestQualy:null,bestQualyConditions:null,bestRace:null,bestRaceConditions:null,bestAvgRace:null,bestAvgRaceConditions:null,bestByGrip:ae}}L[H].sessions++,G.meta.date_start>L[H].lastSession&&(L[H].lastSession=G.meta.date_start);const j=B?.best_by_grip;if(j){const ae=M=>M==="Opt"?"Optimum":M;for(const M in j){const te=ae(M);if(!q.includes(te))continue;const W=j[M];if(!W)continue;const K=L[H].bestByGrip[te];K&&(W.bestQualy&&(!K.bestQualy||W.bestQualy<K.bestQualy)&&(K.bestQualy=W.bestQualy,K.bestQualyTemp=W.bestQualyTemp),W.bestRace&&(!K.bestRace||W.bestRace<K.bestRace)&&(K.bestRace=W.bestRace,K.bestRaceTemp=W.bestRaceTemp),W.bestAvgRace&&(!K.bestAvgRace||W.bestAvgRace<K.bestAvgRace)&&(K.bestAvgRace=W.bestAvgRace,K.bestAvgRaceTemp=W.bestAvgRaceTemp))}}const se=B?.best_qualy_ms;se?(!L[H].bestQualy||se<L[H].bestQualy)&&(L[H].bestQualy=se,L[H].bestQualyConditions=B.best_qualy_conditions||null):G.meta.session_type===Ss.QUALIFY&&B?.bestLap&&(!L[H].bestQualy||B.bestLap<L[H].bestQualy)&&(L[H].bestQualy=B.bestLap,L[H].bestQualyConditions=null);const pe=B?.best_race_ms;pe?(!L[H].bestRace||pe<L[H].bestRace)&&(L[H].bestRace=pe,L[H].bestRaceConditions=B.best_race_conditions||null):G.meta.session_type===Ss.RACE&&B?.bestLap&&(!L[H].bestRace||B.bestLap<L[H].bestRace)&&(L[H].bestRace=B.bestLap,L[H].bestRaceConditions=null);const we=B?.best_avg_race_ms;we&&(!L[H].bestAvgRace||we<L[H].bestAvgRace)&&(L[H].bestAvgRace=we,L[H].bestAvgRaceConditions=B.best_avg_race_conditions||null)}return Object.values(L).sort((G,H)=>(H.lastSession||"").localeCompare(G.lastSession||""))});function P(q){return t.value.filter(L=>(L.meta.track||"").toLowerCase()===q.toLowerCase())}function S(q){return t.value.find(L=>L.sessionId===q)}function w(q){const L=P(q);let G=0,H=0,B=0;for(const j of L)G+=j.summary?.laps||0,H+=j.summary?.lapsValid||0,B+=j.summary?.totalTime||0;return{totalLaps:G,validLaps:H,validPercent:G>0?Math.round(H/G*100):0,totalTimeMs:B,totalTimeFormatted:Ou(B),sessionCount:L.length}}function he(q,L){return P(q).sort((H,B)=>(H.meta.date_start||"").localeCompare(B.meta.date_start||"")).map(H=>{const B=H.summary;let j=null,se=null;return L&&B?.best_by_grip?.[L]?(j=B.best_by_grip[L].bestQualy,se=B.best_by_grip[L].bestRace):(j=B?.best_qualy_ms||null,se=B?.best_race_ms||null),{date:H.meta.date_start,sessionId:H.sessionId,bestQualy:j,bestRace:se,sessionType:H.meta.session_type}}).filter(H=>H.bestQualy||H.bestRace)}function Ee(q=7){const L=new Date,G=["Dom","Lun","Mar","Mer","Gio","Ven","Sab"],H=[];for(let B=q-1;B>=0;B--){const j=new Date(L.getTime()-B*24*60*60*1e3),se=j.toISOString().split("T")[0]||"",pe=t.value.filter(te=>te.meta.date_start?.startsWith(se));let we=0,ae=0,M=0;for(const te of pe){const W=te.summary?.totalTime||0,K=Math.round(W/6e4);switch(te.meta.session_type){case Ss.PRACTICE:we+=K;break;case Ss.QUALIFY:ae+=K;break;case Ss.RACE:M+=K;break}}H.push({day:G[j.getDay()]||"N/A",practice:we,qualify:ae,race:M})}return H}const ce=Fe(()=>{const q=new Date,L=new Date(q.getTime()-10080*60*1e3);let G=0,H=0,B=0,j=0,se=0,pe=0;for(const we of t.value){if(new Date(we.meta.date_start)<L)continue;const M=we.summary?.totalTime||0,te=Math.round(M/6e4);switch(we.meta.session_type){case Ss.PRACTICE:G+=te,H++;break;case Ss.QUALIFY:B+=te,j++;break;case Ss.RACE:se+=te,pe++;break}}return{practice:{minutes:G,sessions:H},qualify:{minutes:B,sessions:j},race:{minutes:se,sessions:pe}}});return{sessions:t,isLoading:e,error:n,loadSessions:u,fetchSessionFull:h,getSessionsForTrack:P,getSession:S,getActivityData:Ee,getTrackActivityTotals:w,getHistoricalBestTimes:he,calculateAllBestTimesForTrack:f,calculateBestAvgRaceForTrack:O,getBestAvgRaceForTrack:U,getBestTimesForGrip:p,getTheoreticalTimes:R,getTrackBests:A,invalidateTrackBests:v,forceRecalculateTrackBests:D,prefetchAllTrackBests:V,isPrefetchComplete:Fe(()=>Ya.value),getTrackActivity:_,lastSession:E,lastUsedCar:I,lastUsedTrack:y,trackStats:C,activityTotals:ce}}const qV=4e5;function WV(){const{currentUser:t}=Wi(),{loadSessions:e}=ad(),n=de(!1),s=de(0),r=de([]),i=de(null),o=Fe(()=>typeof window>"u"?!1:!!window.electronAPI);async function a(N){const _=new TextEncoder().encode(N),R=await crypto.subtle.digest("SHA-256",_);return Array.from(new Uint8Array(R)).map(U=>U.toString(16).padStart(2,"0")).join("")}function l(N,_){return`${N.split(".")[0]}_${_}`.replace(/[^a-zA-Z0-9]/g,"_").substring(0,100)}async function u(N,_){const R=Xt(ft,`users/${N}/sessions/${_}`),O=await Di(R);return O.exists()?{id:_,...O.data()}:null}async function h(N,_){try{const R=Rr(ft,`users/${N}/sessions/${_}/rawChunks`),U=(await Vo(R)).docs.map(E=>Lo(E.ref));await Promise.all(U)}catch(R){console.warn("[SYNC] Error deleting old chunks:",R.message)}}function f(N){const _=N.session_info||{},R=N.stints||[],O={track:_.track||N.track||"Unknown",date_start:_.date_start||N.date||new Date().toISOString(),date_end:_.date_end||null,car:_.car_model||_.car||N.car||null,session_type:_.session_type??null,driver:_.driver||null},U=["Flood","Wet","Damp","Greasy","Green","Fast","Optimum"],E={};U.forEach(q=>{E[q]={bestQualy:null,bestQualyTemp:null,bestRace:null,bestRaceTemp:null,bestAvgRace:null,bestAvgRaceTemp:null}});const I=q=>q==="Opt"?"Optimum":q;let y=null,C=null,P=null,S=null,w=null,he=null;const Ee=_.session_type===1;R.forEach(q=>{const L=Ee||q.type==="Qualify",G=q.laps||[];if(G.forEach(H=>{if(H.is_valid&&!H.has_pit_stop&&H.lap_time_ms){const B=I(H.track_grip_status||"Unknown"),j=H.air_temp||0,se={airTemp:j,roadTemp:H.road_temp||0,grip:B};E[B]&&(L?(!E[B].bestQualy||H.lap_time_ms<E[B].bestQualy)&&(E[B].bestQualy=H.lap_time_ms,E[B].bestQualyTemp=j):(!E[B].bestRace||H.lap_time_ms<E[B].bestRace)&&(E[B].bestRace=H.lap_time_ms,E[B].bestRaceTemp=j)),L?(!y||H.lap_time_ms<y)&&(y=H.lap_time_ms,C=se):(!P||H.lap_time_ms<P)&&(P=H.lap_time_ms,S=se)}}),!L&&q.avg_clean_lap&&G.length>=5){const H=G.find(pe=>pe.is_valid&&!pe.has_pit_stop),B=H?.track_grip_status||G[0]?.track_grip_status||"Unknown",j=I(B),se=H?.air_temp||G[0]?.air_temp||0;E[j]&&(!E[j].bestAvgRace||q.avg_clean_lap<E[j].bestAvgRace)&&(E[j].bestAvgRace=q.avg_clean_lap,E[j].bestAvgRaceTemp=se),(!w||q.avg_clean_lap<w)&&(w=q.avg_clean_lap,he={airTemp:se,roadTemp:H?.road_temp||0,grip:j})}});const ce={laps:_.laps_total||N.laps?.length||0,lapsValid:_.laps_valid||0,bestLap:_.session_best_lap||N.bestLap||null,avgCleanLap:_.avg_clean_lap||null,totalTime:_.total_drive_time_ms||0,stintCount:R.length||0,best_qualy_ms:y,best_qualy_conditions:C,best_race_ms:P,best_race_conditions:S,best_avg_race_ms:w,best_avg_race_conditions:he,best_by_grip:E};return{meta:O,summary:ce}}function p(N,_){const R=[];for(let O=0;O<N.length;O+=_)R.push(N.slice(O,O+_));return R}async function g(N,_,R,O){try{const U=N.ownerId||null;if(U&&U!==O)return console.log(`[SYNC] Skipped ${R}: owner mismatch (file: ${U}, current: ${O})`),{status:"skipped",fileName:R,reason:"owner_mismatch"};U||console.log(`[SYNC] Warning: ${R} has no ownerId (pre-login session)`);const{meta:E,summary:I}=f(N),y=l(E.date_start,E.track),C=await a(_),P=await u(O,y);let S=!1,w=!0;P&&(S=!0,P.fileHash===C?w=!1:await h(O,y));const he=p(_,qV),Ee=Xt(ft,`users/${O}/sessions/${y}`);await Us(Ee,{fileHash:C,fileName:R,uploadedAt:fc(),meta:E,summary:I,rawChunkCount:he.length,rawSizeBytes:_.length,rawEncoding:"json-string",version:(P?.version||0)+1});const ce=Xt(ft,`users/${O}/uploads/${C}`);if(await Us(ce,{fileName:R,uploadedAt:fc(),sessionId:y}),w)for(let G=0;G<he.length;G++){const H=Xt(ft,`users/${O}/sessions/${y}/rawChunks/${G}`);await Us(H,{idx:G,chunk:he[G]})}await v(O,E.track,y,E.date_start,I);const q=await A(O,E.track,E.date_start,y);let L="created";return S&&(L=w?"updated":"refreshed"),console.log(`[SYNC] ${L}: ${R} -> ${y} (Q: ${I.best_qualy_ms}, R: ${I.best_race_ms})${q>0?` [cleaned ${q} old duplicate(s)]`:""}`),{status:L,fileName:R,sessionId:y}}catch(U){return console.error("[SYNC] Error:",U),{status:"error",fileName:R,error:U.message}}}async function A(N,_,R,O){try{const U=Rr(ft,`users/${N}/sessions`),E=await Vo(U),I=_.toLowerCase().replace(/\s+/g,"_"),C=R.split(".")[0].split(":").slice(0,2).join(":");let P=0;for(const S of E.docs){const w=S.id,he=S.data();if(w===O||!/^\d{13}_/.test(w)||(he.meta?.track||"").toLowerCase().replace(/\s+/g,"_")!==I||(he.meta?.date_start||"").split(":").slice(0,2).join(":")!==C)continue;console.log(`[SYNC]  Auto-deleting old format duplicate: ${w}`);const G=Rr(ft,`users/${N}/sessions/${w}/rawChunks`),H=await Vo(G);for(const B of H.docs)await Lo(B.ref);await Lo(S.ref),P++}return P>0&&console.log(`[SYNC]  Auto-cleaned ${P} old format duplicate(s) for ${_}`),P}catch(U){return console.warn("[SYNC]  Error during auto-cleanup:",U.message),0}}async function v(N,_,R,O,U){const E=_.toLowerCase().replace(/\s+/g,"_"),I=Xt(ft,`users/${N}/trackBests/${E}`);try{const y=await Di(I),C=y.exists()?y.data():null,P=["Flood","Wet","Damp","Greasy","Green","Fast","Optimum"],S=C?.bests||(C?Object.fromEntries(P.filter(j=>C[j]).map(j=>[j,C[j]])):{});let w=!1;P.forEach(j=>{const se=U.best_by_grip?.[j];se&&(S[j]||(S[j]={bestQualy:null,bestQualyTemp:null,bestQualySessionId:null,bestQualyDate:null,bestRace:null,bestRaceTemp:null,bestRaceSessionId:null,bestRaceDate:null,bestAvgRace:null,bestAvgRaceTemp:null,bestAvgRaceSessionId:null,bestAvgRaceDate:null}),se.bestQualy&&(!S[j].bestQualy||se.bestQualy<S[j].bestQualy)&&(S[j].bestQualy=se.bestQualy,S[j].bestQualyTemp=se.bestQualyTemp,S[j].bestQualySessionId=R,S[j].bestQualyDate=O,w=!0),se.bestRace&&(!S[j].bestRace||se.bestRace<S[j].bestRace)&&(S[j].bestRace=se.bestRace,S[j].bestRaceTemp=se.bestRaceTemp,S[j].bestRaceSessionId=R,S[j].bestRaceDate=O,w=!0),se.bestAvgRace&&(!S[j].bestAvgRace||se.bestAvgRace<S[j].bestAvgRace)&&(S[j].bestAvgRace=se.bestAvgRace,S[j].bestAvgRaceTemp=se.bestAvgRaceTemp,S[j].bestAvgRaceSessionId=R,S[j].bestAvgRaceDate=O,w=!0))});const he=C?.activity||{totalLaps:0,validLaps:0,totalTimeMs:0,sessionCount:0},Ee=C?.syncedSessionIds||[],ce=Ee.includes(R),q=U.laps||0,L=U.lapsValid||0,G=U.totalTime||0,H=ce?he:{totalLaps:he.totalLaps+q,validLaps:he.validLaps+L,totalTimeMs:he.totalTimeMs+G,sessionCount:he.sessionCount+1,lastSessionDate:O},B=ce?Ee:[...Ee,R].slice(-100);return await Us(I,{trackId:E,bests:S,activity:H,syncedSessionIds:B,lastUpdated:fc()}),console.log(w?`[SYNC]  Updated trackBests for ${E} (bests + activity)`:ce?`[SYNC]  No trackBests changes for ${E}`:`[SYNC]  Updated trackBests activity for ${E}`),w||!ce}catch(y){return console.warn(`[SYNC]  Error updating trackBests for ${E}:`,y.message),!1}}async function D(){if(!o.value)return console.log("[SYNC] Not running in Electron, skipping sync"),[];if(!t.value)return console.log("[SYNC] No user logged in, skipping sync"),[];if(n.value)return console.log("[SYNC] Already syncing, skipping"),[];n.value=!0,s.value=0,r.value=[];const N=t.value.uid,_=window.electronAPI,R=[];try{const O=await _.getTelemetryFiles();if(console.log(`[SYNC] Found ${O.length} files to process`),O.length===0)return n.value=!1,[];for(let P=0;P<O.length;P++){const S=O[P];s.value=Math.round(P/O.length*100);try{const w=await _.readFile(S.path);if(!w){R.push({status:"error",fileName:S.name,error:"Could not read file"});continue}const he=JSON.stringify(w),Ee=await g(w,he,S.name,N);R.push(Ee),(Ee.status==="created"||Ee.status==="updated")&&await _.updateRegistry(S.name,{uploadedBy:N,sessionId:Ee.sessionId,uploadedAt:new Date().toISOString()})}catch(w){console.error(`[SYNC] Error processing ${S.name}:`,w),R.push({status:"error",fileName:S.name,error:w.message})}}s.value=100,r.value=R,i.value=new Date;const U=R.filter(P=>P.status==="created").length,E=R.filter(P=>P.status==="updated").length,I=R.filter(P=>P.status==="unchanged").length,y=R.filter(P=>P.status==="skipped").length,C=R.filter(P=>P.status==="error").length;return console.log(`[SYNC] Complete: ${U} created, ${E} updated, ${I} unchanged, ${y} skipped, ${C} errors`),(U>0||E>0)&&(console.log("[SYNC] Refreshing dashboard data..."),await e()),R}catch(O){return console.error("[SYNC] Sync failed:",O),[{status:"error",fileName:"sync",error:O.message}]}finally{n.value=!1}}function V(){if(!o.value)return;const N=window.electronAPI;N.onFilesChanged(_=>{(_.new.length>0||_.modified.length>0)&&(console.log(`[SYNC] Files changed: ${_.new.length} new, ${_.modified.length} modified`),D())}),N.onInitialFiles(_=>{console.log(`[SYNC] Initial files: ${_.files.length}`)}),console.log("[SYNC] Auto-sync setup complete")}return{isElectron:o,isSyncing:n,syncProgress:s,syncResults:r,lastSyncTime:i,syncTelemetryFiles:D,setupAutoSync:V}}const GV={key:0,class:"electron-titlebar"},zV={class:"titlebar-buttons-left"},KV=["title","disabled"],QV=["title","disabled"],YV=ct({__name:"ElectronTitlebar",setup(t){const e=Mi(),n=Gt(),s=de(!1),r=de(!1),i=de(!1),{isSyncing:o,syncTelemetryFiles:a,setupAutoSync:l}=WV(),{loadSessions:u}=ad(),h=de(!1),f=de([]);Ks(async()=>{if(s.value=!!window.electronAPI,s.value){try{r.value=await window.electronAPI.windowIsMaximized()}catch{console.log("[TITLEBAR] Could not get maximized state")}l()}});const p=()=>Object.keys(e.params).length>0,g=async()=>{if(p()){console.log("[TITLEBAR] Soft refresh for dynamic route:",e.fullPath),i.value=!0;try{const _=e.fullPath;await n.replace({path:"/panoramica",query:{_refresh:Date.now()}}),await zs(),await u(void 0,!0),await n.replace(_),console.log("[TITLEBAR] Soft refresh complete")}catch(_){console.error("[TITLEBAR] Soft refresh failed:",_),window.electronAPI?.pageRefresh()}finally{i.value=!1}}else console.log("[TITLEBAR] Hard refresh for static route:",e.fullPath),window.electronAPI?.pageRefresh()},A=async()=>{console.log("[TITLEBAR] Manual sync triggered");const _=await a();console.log("[TITLEBAR] Sync complete:",_),f.value=_,h.value=!0},v=()=>{window.electronAPI?.windowMinimize()},D=async()=>{const _=await window.electronAPI?.windowMaximize();r.value=_},V=()=>{window.electronAPI?.windowClose()},N=()=>{h.value=!1};return(_,R)=>{const O=wC;return s.value?(Te(),Oe("div",GV,[R[5]||(R[5]=Q("div",{class:"titlebar-drag-region"},[Q("span",{class:"titlebar-title"},"ACC Telemetry Dashboard")],-1)),Q("div",zV,[Q("button",{class:Bt(["titlebar-btn",{refreshing:i.value}]),title:i.value?"Aggiornamento in corso...":"Aggiorna pagina (Smart Refresh)",disabled:i.value,onClick:g},[...R[0]||(R[0]=[Q("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[Q("path",{d:"M21 12a9 9 0 11-9-9c2.52 0 4.93 1 6.74 2.74L21 8"}),Q("path",{d:"M21 3v5h-5"})],-1)])],10,KV),Q("button",{class:Bt(["titlebar-btn",{syncing:We(o)}]),title:We(o)?"Sincronizzazione in corso...":"Sincronizza file",disabled:We(o),onClick:A},[...R[1]||(R[1]=[Q("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[Q("path",{d:"M23 4v6h-6"}),Q("path",{d:"M1 20v-6h6"}),Q("path",{d:"M3.51 9a9 9 0 0114.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0020.49 15"})],-1)])],10,QV)]),Q("div",{class:"titlebar-buttons-right"},[Q("button",{class:"titlebar-btn",title:"Minimizza",onClick:v},[...R[2]||(R[2]=[Q("svg",{width:"12",height:"12",viewBox:"0 0 12 12"},[Q("rect",{y:"5",width:"12",height:"2",fill:"currentColor"})],-1)])]),Q("button",{class:"titlebar-btn",title:"Massimizza",onClick:D},[...R[3]||(R[3]=[Q("svg",{width:"12",height:"12",viewBox:"0 0 12 12"},[Q("rect",{x:"1",y:"1",width:"10",height:"10",stroke:"currentColor","stroke-width":"2",fill:"none"})],-1)])]),Q("button",{class:"titlebar-btn titlebar-close",title:"Chiudi",onClick:V},[...R[4]||(R[4]=[Q("svg",{width:"12",height:"12",viewBox:"0 0 12 12"},[Q("path",{d:"M1 1l10 10M11 1L1 11",stroke:"currentColor","stroke-width":"2"})],-1)])])]),be(O,{results:f.value,visible:h.value,onClose:N},null,8,["results","visible"])])):Qs("",!0)}}}),JV=Object.assign(pn(YV,[["__scopeId","data-v-79773db3"]]),{__name:"ElectronTitlebar"}),Ja="<div></div>",Vu=new WeakMap;function XV(t){if(Vu.has(t))return Vu.get(t);const e={...t};return e.render?e.render=(n,s,r,i,o,a)=>{if(i.mounted$??n.mounted$){const l=t.render?.bind(n)(n,s,r,i,o,a);return l.children===null||typeof l.children=="string"?fn(l):it(l)}return vu(n._.vnode.el,Ja)}:e.template&&=`
      <template v-if="mounted$">${t.template}</template>
      <template v-else>${Ja}</template>
    `,e.setup=(n,s)=>{const r=at(),i=ls(r.isHydrating===!1),o=Fr();if(r.isHydrating){const l={...o.attrs},u=ZV(o);for(const h in l)delete o.attrs[h];Ks(()=>{Object.assign(o.attrs,l),o.vnode.dirs=u})}Ks(()=>{i.value=!0});const a=t.setup?.(n,s)||{};return $h(a)?Promise.resolve(a).then(l=>typeof l!="function"?(l||={},l.mounted$=i,l):(...u)=>{if(i.value||!r.isHydrating){const h=l(...u);return h.children===null||typeof h.children=="string"?fn(h):it(h)}return vu(o?.vnode.el,Ja)}):typeof a=="function"?(...l)=>{if(i.value){const u=a(...l),h=e.inheritAttrs!==!1?s.attrs:void 0;return u.children===null||typeof u.children=="string"?fn(u,h):it(u,h)}return vu(o?.vnode.el,Ja)}:Object.assign(a,{mounted$:i})},Vu.set(t,e),e}function ZV(t){if(!t||!t.vnode.dirs)return null;const e=t.vnode.dirs;return t.vnode.dirs=null,e}function eL(t={}){const e=ls(""),n=ls(t.politeness||"polite"),s=tv();function r(u="",h="polite"){e.value=u,n.value=h}function i(u){return r(u,"polite")}function o(u){return r(u,"assertive")}function a(){r(document?.title?.trim(),n.value)}function l(){s?.hooks?.removeHook("dom:rendered",a)}return a(),s?.hooks?.hook("dom:rendered",()=>{a()}),{_cleanup:l,message:e,politeness:n,set:r,polite:i,assertive:o}}function tL(t={}){const e=at(),n=e._routeAnnouncer||=eL(t);return t.politeness!==n.politeness.value&&(n.politeness.value=t.politeness||"polite"),jh()&&(e._routeAnnouncerDeps||=0,e._routeAnnouncerDeps++,Lw(()=>{e._routeAnnouncerDeps--,e._routeAnnouncerDeps===0&&(n._cleanup(),delete e._routeAnnouncer)})),n}const nL=ct({name:"NuxtRouteAnnouncer",props:{atomic:{type:Boolean,default:!1},politeness:{type:String,default:"polite"}},setup(t,{slots:e,expose:n}){const{set:s,polite:r,assertive:i,message:o,politeness:a}=tL({politeness:t.politeness});return n({set:s,polite:r,assertive:i,message:o,politeness:a}),()=>it("span",{class:"nuxt-route-announcer",style:{position:"absolute"}},it("span",{role:"alert","aria-live":a.value,"aria-atomic":t.atomic,style:{border:"0",clip:"rect(0 0 0 0)","clip-path":"inset(50%)",height:"1px",width:"1px",overflow:"hidden",position:"absolute","white-space":"nowrap","word-wrap":"normal",margin:"-1px",padding:"0"}},e.default?e.default({message:o.value}):o.value))}}),sL=["type","value","placeholder","autocomplete","maxlength","disabled"],rL=ct({__name:"BaseInput",props:{modelValue:{},type:{default:"text"},placeholder:{default:""},autocomplete:{default:"off"},maxlength:{},error:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(t,{emit:e}){const n=e,s=r=>{const i=r.target;n("update:modelValue",i.value)};return(r,i)=>(Te(),Oe("input",{type:t.type,value:t.modelValue,placeholder:t.placeholder,autocomplete:t.autocomplete,maxlength:t.maxlength,disabled:t.disabled,class:Bt(["form-input",{"form-input--error":t.error}]),onInput:s},null,42,sL))}}),cd=Object.assign(pn(rL,[["__scopeId","data-v-91b986db"]]),{__name:"UiBaseInput"}),iL={key:0,class:"form-error"},oL=ct({__name:"FormError",props:{message:{},visible:{type:Boolean,default:!1}},setup(t){return(e,n)=>t.visible&&t.message?(Te(),Oe("div",iL,On(t.message),1)):Qs("",!0)}}),ld=Object.assign(pn(oL,[["__scopeId","data-v-75d4b223"]]),{__name:"UiFormError"}),aL=["type","disabled"],cL=ct({__name:"BaseButton",props:{variant:{default:"primary"},loading:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},type:{default:"button"}},emits:["click"],setup(t,{emit:e}){const n=t,s=e,r=i=>{!n.loading&&!n.disabled&&s("click",i)};return(i,o)=>(Te(),Oe("button",{type:t.type,class:Bt(["btn",`btn--${t.variant}`,{"btn--loading":t.loading}]),disabled:t.disabled||t.loading,onClick:r},[Ub(i.$slots,"default",{},void 0)],10,aL))}}),ud=Object.assign(pn(cL,[["__scopeId","data-v-d54604fc"]]),{__name:"UiBaseButton"}),lL=ct({__name:"LoginForm",emits:["submit","forgotPassword"],setup(t,{expose:e,emit:n}){const s=de(""),r=de(""),i=de(""),o=de(!1),a=n,l=()=>{if(i.value="",!s.value.trim()){i.value="Inserisci la tua email.";return}if(!r.value){i.value="Inserisci la password.";return}a("submit",{email:s.value.trim(),password:r.value})},u=()=>{i.value=""};return e({setError:h=>{i.value=h},setLoading:h=>{o.value=h},reset:()=>{s.value="",r.value="",i.value="",o.value=!1}}),(h,f)=>{const p=cd,g=ld,A=ud;return Te(),Oe("form",{class:"auth-form",onSubmit:cl(l,["prevent"])},[be(p,{modelValue:s.value,"onUpdate:modelValue":f[0]||(f[0]=v=>s.value=v),type:"email",placeholder:"Email",autocomplete:"email",error:!!i.value&&i.value.includes("email"),onInput:u},null,8,["modelValue","error"]),be(p,{modelValue:r.value,"onUpdate:modelValue":f[1]||(f[1]=v=>r.value=v),type:"password",placeholder:"Password",autocomplete:"current-password",error:!!i.value&&i.value.includes("password"),onInput:u},null,8,["modelValue","error"]),be(g,{message:i.value,visible:!!i.value},null,8,["message","visible"]),be(A,{type:"submit",variant:"primary",loading:o.value},{default:an(()=>[...f[3]||(f[3]=[rt(" ACCEDI ",-1)])]),_:1},8,["loading"]),be(A,{variant:"link",onClick:f[2]||(f[2]=v=>a("forgotPassword"))},{default:an(()=>[...f[4]||(f[4]=[rt(" Password dimenticata? ",-1)])]),_:1})],32)}}}),uL=Object.assign(pn(lL,[["__scopeId","data-v-5927dcd2"]]),{__name:"AuthLoginForm"}),hL={class:"name-row"},fL=ct({__name:"RegisterForm",emits:["submit"],setup(t,{expose:e,emit:n}){const s=de(""),r=de(""),i=de(""),o=de(""),a=de(""),l=de(""),u=de(""),h=de(!1),f=n,p=()=>{if(u.value="",!s.value.trim()){u.value="Inserisci il tuo nome.";return}if(!r.value.trim()){u.value="Inserisci il tuo cognome.";return}if(!i.value.trim()){u.value="Scegli un nickname.";return}if(i.value.trim().length<3){u.value="Il nickname deve essere di almeno 3 caratteri.";return}if(!o.value.trim()){u.value="Inserisci la tua email.";return}if(!a.value){u.value="Inserisci una password.";return}if(a.value.length<6){u.value="La password deve essere di almeno 6 caratteri.";return}if(!l.value){u.value="Conferma la password.";return}if(a.value!==l.value){u.value="Le password non coincidono.";return}f("submit",{firstName:s.value.trim(),lastName:r.value.trim(),nickname:i.value.trim(),email:o.value.trim(),password:a.value})},g=()=>{u.value=""};return e({setError:A=>{u.value=A},setLoading:A=>{h.value=A},reset:()=>{s.value="",r.value="",i.value="",o.value="",a.value="",l.value="",u.value="",h.value=!1}}),(A,v)=>{const D=cd,V=ld,N=ud;return Te(),Oe("form",{class:"auth-form",onSubmit:cl(p,["prevent"])},[Q("div",hL,[be(D,{modelValue:s.value,"onUpdate:modelValue":v[0]||(v[0]=_=>s.value=_),type:"text",placeholder:"Nome",autocomplete:"given-name",onInput:g},null,8,["modelValue"]),be(D,{modelValue:r.value,"onUpdate:modelValue":v[1]||(v[1]=_=>r.value=_),type:"text",placeholder:"Cognome",autocomplete:"family-name",onInput:g},null,8,["modelValue"])]),be(D,{modelValue:i.value,"onUpdate:modelValue":v[2]||(v[2]=_=>i.value=_),type:"text",placeholder:"Nickname (visibile agli altri)",autocomplete:"username",maxlength:20,onInput:g},null,8,["modelValue"]),be(D,{modelValue:o.value,"onUpdate:modelValue":v[3]||(v[3]=_=>o.value=_),type:"email",placeholder:"Email",autocomplete:"email",onInput:g},null,8,["modelValue"]),be(D,{modelValue:a.value,"onUpdate:modelValue":v[4]||(v[4]=_=>a.value=_),type:"password",placeholder:"Password (min. 6 caratteri)",autocomplete:"new-password",onInput:g},null,8,["modelValue"]),be(D,{modelValue:l.value,"onUpdate:modelValue":v[5]||(v[5]=_=>l.value=_),type:"password",placeholder:"Conferma Password",autocomplete:"new-password",onInput:g},null,8,["modelValue"]),be(V,{message:u.value,visible:!!u.value},null,8,["message","visible"]),be(N,{type:"submit",variant:"primary",loading:h.value},{default:an(()=>[...v[6]||(v[6]=[rt(" REGISTRATI ",-1)])]),_:1},8,["loading"])],32)}}}),dL=Object.assign(pn(fL,[["__scopeId","data-v-d0f96507"]]),{__name:"AuthRegisterForm"}),pL={class:"reset-form"},mL={key:0,class:"reset-success"},gL=ct({__name:"ResetPasswordForm",emits:["submit","back"],setup(t,{expose:e,emit:n}){const s=de(""),r=de(""),i=de(!1),o=de(!1),a=n,l=()=>{if(r.value="",!s.value.trim()){r.value="Inserisci la tua email.";return}a("submit",s.value.trim())},u=()=>{r.value=""};return e({setError:h=>{r.value=h},setLoading:h=>{o.value=h},setSuccess:h=>{i.value=h},reset:()=>{s.value="",r.value="",i.value=!1,o.value=!1}}),(h,f)=>{const p=ud,g=cd,A=ld;return Te(),Oe("div",pL,[i.value?(Te(),Oe("div",mL,[f[4]||(f[4]=Q("span",{class:"reset-success__icon"},"",-1)),f[5]||(f[5]=Q("p",{class:"reset-success__text"}," Email inviata! Controlla la tua casella di posta (anche spam). ",-1)),be(p,{variant:"link",onClick:f[0]||(f[0]=v=>a("back"))},{default:an(()=>[...f[3]||(f[3]=[rt("  Torna al login ",-1)])]),_:1})])):(Te(),Oe("form",{key:1,class:"auth-form",onSubmit:cl(l,["prevent"])},[f[8]||(f[8]=Q("h3",{class:"reset-form__title"},"Recupera Password",-1)),f[9]||(f[9]=Q("p",{class:"reset-form__description"},[rt(" Inserisci la tua email. Ti invieremo un link per reimpostare la password. "),Q("br"),Q("small",null,"Controlla anche la cartella spam.")],-1)),be(g,{modelValue:s.value,"onUpdate:modelValue":f[1]||(f[1]=v=>s.value=v),type:"email",placeholder:"Email",autocomplete:"email",onInput:u},null,8,["modelValue"]),be(A,{message:r.value,visible:!!r.value},null,8,["message","visible"]),be(p,{type:"submit",variant:"primary",loading:o.value},{default:an(()=>[...f[6]||(f[6]=[rt(" INVIA LINK ",-1)])]),_:1},8,["loading"]),be(p,{variant:"link",onClick:f[2]||(f[2]=v=>a("back"))},{default:an(()=>[...f[7]||(f[7]=[rt("  Torna al login ",-1)])]),_:1})],32))])}}}),_L=Object.assign(pn(gL,[["__scopeId","data-v-17ef1ec5"]]),{__name:"AuthResetPasswordForm"}),yL={class:"auth-overlay"},vL={class:"auth-card__body"},EL={key:0,class:"auth-nav"},TL={class:"auth-form-container"},wL=ct({__name:"AuthOverlay",emits:["login-success","register-success"],setup(t,{emit:e}){const n=de("login"),s=de("login"),r=de(),i=de(),o=de(),{login:a,register:l}=Wi(),u=de(!1),h=e,f=Fe(()=>{switch(s.value){case"register":return"form-height--register";case"reset":return"form-height--reset";default:return"form-height--login"}}),p=N=>{n.value=N,s.value=N},g=()=>{s.value="reset"},A=()=>{s.value="login",n.value="login",o.value?.reset()},v=async N=>{u.value=!0;const _=await a(N.email,N.password);u.value=!1,_.success?h("login-success",N.email):r.value?.setError(_.error)},D=async N=>{u.value=!0;const _=await l(N.email,N.password,N.nickname,N.firstName,N.lastName);u.value=!1,_.success?h("register-success",N.email):i.value?.setError(_.error)},V=N=>{console.log("[AUTH] Reset:",N),o.value?.setSuccess(!0)};return(N,_)=>{const R=uL,O=dL,U=_L;return Te(),Oe("div",yL,[_[4]||(_[4]=Q("div",{class:"auth-overlay__ambient"},[Q("div",{class:"ambient-glow ambient-glow--red"}),Q("div",{class:"ambient-glow ambient-glow--gold"})],-1)),Q("div",{class:Bt(["auth-card",f.value])},[_[3]||(_[3]=Q("div",{class:"auth-card__glow"},null,-1)),Q("div",vL,[_[2]||(_[2]=Q("header",{class:"auth-header"},[Q("div",{class:"brand"},[Q("span",{class:"brand__badge"},"ACC"),Q("span",{class:"brand__name"},"TELEMETRY")])],-1)),s.value!=="reset"?(Te(),Oe("nav",EL,[Q("button",{class:Bt(["auth-nav__item",{"is-active":n.value==="login"}]),onClick:_[0]||(_[0]=E=>p("login"))}," Login ",2),Q("button",{class:Bt(["auth-nav__item",{"is-active":n.value==="register"}]),onClick:_[1]||(_[1]=E=>p("register"))}," Registrati ",2)])):Qs("",!0),Q("div",TL,[be(oa,{name:"liquid",mode:"out-in"},{default:an(()=>[s.value==="login"?(Te(),Yt(R,{key:"login",ref_key:"loginFormRef",ref:r,onSubmit:v,onForgotPassword:g},null,512)):s.value==="register"?(Te(),Yt(O,{key:"register",ref_key:"registerFormRef",ref:i,onSubmit:D},null,512)):(Te(),Yt(U,{key:"reset",ref_key:"resetFormRef",ref:o,onSubmit:V,onBack:A},null,512))]),_:1})])])],2)])}}}),bL=Object.assign(pn(wL,[["__scopeId","data-v-e0e84998"]]),{__name:"AuthOverlay"}),IL={class:"email-verification"},AL={class:"verify-email"},RL={key:0,class:"error-message"},SL={key:1,class:"error-message resend-error"},CL=["disabled"],PL=["disabled"],kL=ct({__name:"RegistrationSuccess",props:{email:{},requireEmailVerification:{type:Boolean}},emits:["goToDashboard","resendEmail"],setup(t,{emit:e}){const n=e,{checkEmailVerified:s,resendVerificationEmail:r}=Wi(),i=de(!1),o=de(!1),a=de(null),l=de(!1),u=de(!1),h=async()=>{i.value=!0,a.value=null,u.value=!1;const p=await r();i.value=!1,p.success?(o.value=!0,setTimeout(()=>o.value=!1,3e3)):a.value=p.error||"Errore invio email",n("resendEmail")},f=async()=>{l.value=!0,u.value=!1;const p=await s();l.value=!1,p.verified?n("goToDashboard"):u.value=!0};return(p,g)=>(Te(),Oe("div",IL,[g[2]||(g[2]=Q("div",{class:"verify-icon"},"",-1)),g[3]||(g[3]=Q("h2",{class:"verify-title"},"Verifica la tua email",-1)),Q("p",AL,On(t.email),1),g[4]||(g[4]=Q("div",{class:"verify-box"},[Q("p",{class:"verify-text"},"Clicca il link nell'email per attivare l'account."),Q("p",{class:"verify-hint"},"Controlla anche Spam")],-1)),u.value?(Te(),Oe("div",RL," Email non verificata ")):Qs("",!0),a.value?(Te(),Oe("div",SL,On(a.value),1)):Qs("",!0),Q("button",{class:Bt(["verify-btn",{"verify-btn--loading":l.value}]),disabled:l.value,onClick:f},[l.value?(Te(),Oe(Ze,{key:0},[g[0]||(g[0]=Q("span",{class:"spinner"},null,-1)),g[1]||(g[1]=rt(" Controllo... ",-1))],64)):(Te(),Oe(Ze,{key:1},[rt(" Ho confermato l'email ")],64))],10,CL),Q("button",{class:"resend-btn",disabled:i.value||o.value,onClick:h},[i.value?(Te(),Oe(Ze,{key:0},[rt("Invio in corso...")],64)):o.value?(Te(),Oe(Ze,{key:1},[rt(" Email inviata")],64)):(Te(),Oe(Ze,{key:2},[rt("Rinvia email di verifica")],64))],8,PL)]))}}),NL=Object.assign(pn(kL,[["__scopeId","data-v-f958603b"]]),{__name:"AuthRegistrationSuccess"}),XT=(t="RouteProvider")=>ct({name:t,props:{route:{type:Object,required:!0},vnode:Object,vnodeRef:Object,renderKey:String,trackRootNodes:Boolean},setup(e){const n=e.renderKey,s=e.route,r={};for(const i in e.route)Object.defineProperty(r,i,{get:()=>n===e.renderKey?e.route[i]:s[i],enumerable:!0});return ts(Pr,Vn(r)),()=>e.vnode?it(e.vnode,{ref:e.vnodeRef}):e.vnode}}),DL=XT(),a_=new WeakMap,OL=ct({name:"NuxtPage",inheritAttrs:!1,props:{name:{type:String},transition:{type:[Boolean,Object],default:void 0},keepalive:{type:[Boolean,Object],default:void 0},route:{type:Object},pageKey:{type:[Function,String],default:null}},setup(t,{attrs:e,slots:n,expose:s}){const r=at(),i=de(),o=Ot(Pr,null);let a;s({pageRef:i});const l=Ot(Ky,null);let u;const h=r.deferHydration();if(r.isHydrating){const p=r.hooks.hookOnce("app:error",h);Gt().beforeEach(p)}t.pageKey&&Mn(()=>t.pageKey,(p,g)=>{p!==g&&r.callHook("page:loading:start")});let f=!1;{const p=Gt().beforeResolve(()=>{f=!1});ra(()=>{p()})}return()=>it(_v,{name:t.name,route:t.route,...e},{default:p=>{const g=LL(o,p.route,p.Component),A=o&&o.matched.length===p.route.matched.length;if(!p.Component){if(u&&!A)return u;h();return}if(u&&l&&!l.isCurrent(p.route))return u;if(g&&o&&(!l||l?.isCurrent(o)))return A?u:null;const v=ch(p,t.pageKey),D=ML(o,p.route,p.Component);!r.isHydrating&&a===v&&!D&&zs(()=>{f=!0,r.callHook("page:loading:end")}),a=v;const V=!!(t.transition??p.route.meta.pageTransition??jp),N=V&&VL([t.transition,p.route.meta.pageTransition,jp,{onAfterLeave(){delete r._runningTransition,r.callHook("page:transition:finish",p.Component)}}]),_=t.keepalive??p.route.meta.keepalive??lR;return u=vv(V&&N,NS(_,it(sf,{suspensible:!0,onPending:()=>{V&&(r._runningTransition=!0),r.callHook("page:start",p.Component)},onResolve:async()=>{await zs();try{r._route.sync?.(),await r.callHook("page:finish",p.Component),delete r._runningTransition,!f&&!D&&(f=!0,await r.callHook("page:loading:end"))}finally{h()}}},{default:()=>{const R={key:v||void 0,vnode:n.default?xL(n.default,p):p.Component,route:p.route,renderKey:v||void 0,trackRootNodes:V,vnodeRef:i};if(!_)return it(DL,R);const O=p.Component.type,U=O;let E=a_.get(U);return E||(E=XT(O.name||O.__name),a_.set(U,E)),it(E,R)}}))).default(),u}})}});function VL(t){const e=[];for(const n of t)n&&e.push({...n,onAfterLeave:n.onAfterLeave?gf(n.onAfterLeave):void 0});return Gy(...e)}function LL(t,e,n){if(!t)return!1;const s=e.matched.findIndex(r=>r.components?.default===n?.type);return!s||s===-1?!1:e.matched.slice(0,s).some((r,i)=>r.components?.default!==t.matched[i]?.components?.default)||n&&ch({route:e,Component:n})!==ch({route:t,Component:n})}function ML(t,e,n){return t?e.matched.findIndex(r=>r.components?.default===n?.type)<e.matched.length-1:!1}function xL(t,e){const n=t(e);return n.length===1?it(n[0]):it(Ze,void 0,n)}const FL=ct({name:"LayoutLoader",inheritAttrs:!1,props:{name:String,layoutProps:Object},setup(t,e){return()=>it(xs[t.name],t.layoutProps,e.slots)}}),UL={name:{type:[String,Boolean,Object],default:null},fallback:{type:[String,Object],default:null}},BL=ct({name:"NuxtLayout",inheritAttrs:!1,props:UL,setup(t,e){const n=at(),s=Ot(Pr),i=!s||s===Mi()?yv():s,o=Fe(()=>{let h=We(t.name)??i?.meta.layout??"default";return h&&!(h in xs)&&t.fallback&&(h=We(t.fallback)),h}),a=ls();e.expose({layoutRef:a});const l=n.deferHydration();if(n.isHydrating){const h=n.hooks.hookOnce("app:error",l);Gt().beforeEach(h)}let u;return()=>{const h=o.value&&o.value in xs,f=i?.meta.layoutTransition??cR,p=u;return u=o.value,vv(h&&f,{default:()=>it(sf,{suspensible:!0,onResolve:()=>{zs(l)}},{default:()=>it($L,{layoutProps:Iy(e.attrs,{ref:a}),key:o.value||void 0,name:o.value,shouldProvide:!t.name,isRenderingNewLayout:g=>g!==p&&g===o.value,hasTransition:!!f},e.slots)})}).default()}}}),$L=ct({name:"NuxtLayoutProvider",inheritAttrs:!1,props:{name:{type:[String,Boolean]},layoutProps:{type:Object},hasTransition:{type:Boolean},shouldProvide:{type:Boolean},isRenderingNewLayout:{type:Function,required:!0}},setup(t,e){const n=t.name;t.shouldProvide&&ts(Ky,{isCurrent:i=>n===(i.meta.layout??"default")});const s=Ot(Pr);if(s&&s===Mi()){const i=yv(),o={};for(const a in i){const l=a;Object.defineProperty(o,l,{enumerable:!0,get:()=>t.isRenderingNewLayout(t.name)?i[l]:s[l]})}ts(Pr,Vn(o))}return()=>!n||typeof n=="string"&&!(n in xs)?e.slots.default?.():it(FL,{key:n,layoutProps:t.layoutProps,name:n},e.slots)}}),HL={class:"user-dropdown"},jL={class:"user-name"},qL={key:0,class:"dropdown-menu"},WL=ct({__name:"UserDropdown",props:{userName:{}},emits:["logout","goToProfile"],setup(t,{emit:e}){const n=e,s=de(!1),r=()=>{s.value=!s.value},i=()=>{s.value=!1},o=()=>{i(),n("goToProfile")},a=()=>{n("logout"),i()};return(l,u)=>{const h=Fb("click-outside");return ho((Te(),Oe("div",HL,[Q("button",{class:"dropdown-trigger",onClick:r},[Q("span",jL,On(t.userName),1),(Te(),Oe("svg",{class:Bt(["arrow-icon",{"arrow-icon--open":s.value}]),width:"12",height:"12",viewBox:"0 0 12 12",fill:"none"},[...u[0]||(u[0]=[Q("path",{d:"M3 4.5L6 7.5L9 4.5",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)])],2))]),be(oa,{name:"dropdown"},{default:an(()=>[s.value?(Te(),Oe("div",qL,[Q("button",{class:"dropdown-item",onClick:o},[...u[1]||(u[1]=[Q("svg",{class:"item-icon",width:"16",height:"16",viewBox:"0 0 16 16",fill:"none"},[Q("circle",{cx:"8",cy:"5",r:"3",stroke:"currentColor","stroke-width":"1.5"}),Q("path",{d:"M2 14c0-3 2.5-5 6-5s6 2 6 5",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round"})],-1),rt(" Profilo ",-1)])]),u[3]||(u[3]=Q("button",{class:"dropdown-item dropdown-item--disabled",disabled:""},[Q("svg",{class:"item-icon",width:"16",height:"16",viewBox:"0 0 16 16",fill:"none"},[Q("circle",{cx:"8",cy:"8",r:"6",stroke:"currentColor","stroke-width":"1.5"}),Q("path",{d:"M8 5v3l2 2",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round"})]),rt(" Impostazioni ")],-1)),u[4]||(u[4]=Q("div",{class:"dropdown-divider"},null,-1)),Q("button",{class:"dropdown-item dropdown-item--danger",onClick:a},[...u[2]||(u[2]=[Q("svg",{class:"item-icon",width:"16",height:"16",viewBox:"0 0 16 16",fill:"none"},[Q("path",{d:"M6 2H4a2 2 0 00-2 2v8a2 2 0 002 2h2M11 11l3-3-3-3M14 8H6",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"})],-1),rt(" Logout ",-1)])])])):Qs("",!0)]),_:1})])),[[h,i]])}}}),GL=Object.assign(pn(WL,[["__scopeId","data-v-a926000c"]]),{__name:"UiUserDropdown"}),zL={class:"profile-page"},KL={class:"profile-header"},QL={class:"header-inner"},YL={class:"header-right"},JL={class:"profile-main"},XL={class:"profile-container"},ZL={class:"page-title"},eM={class:"profile-grid"},tM={class:"profile-sidebar"},nM={class:"user-info"},sM={class:"user-nickname"},rM={class:"user-email"},iM={class:"profile-content"},oM={class:"profile-card"},aM={class:"equipment-form"},cM={class:"form-group"},lM={class:"form-group"},uM={class:"form-group"},hM={class:"form-group"},fM=["disabled"],dM=ct({__name:"ProfilePage",props:{userEmail:{},userNickname:{},userRole:{}},emits:["logout","back"],setup(t,{emit:e}){const n=t,s=e,{currentUser:r,getUserProfile:i}=Wi(),o=Fe(()=>n.userNickname?n.userNickname:n.userEmail?n.userEmail.split("@")[0]??"Utente":"Utente"),a=Fe(()=>({pilot:"Profilo Pilota",coach:"Profilo Coach",admin:"Profilo Admin"})[n.userRole||"pilot"]),l=Fe(()=>({pilot:"PILOTA",coach:"COACH",admin:"ADMIN"})[n.userRole||"pilot"]),u=de({volante:"",corona:"",pedaliera:"",struttura:""}),h=de(!1),f=de(!1);Ks(async()=>{if(r.value){const D=await i(r.value.uid);D?.equipment&&(u.value={...u.value,...D.equipment})}});const p=async()=>{if(r.value){h.value=!0;try{const{doc:D,updateDoc:V}=await ut(async()=>{const{doc:_,updateDoc:R}=await Promise.resolve().then(()=>LV);return{doc:_,updateDoc:R}},void 0,import.meta.url),{db:N}=await ut(async()=>{const{db:_}=await Promise.resolve().then(()=>UV);return{db:_}},void 0,import.meta.url);await V(D(N,"users",r.value.uid),{equipment:u.value}),f.value=!0,setTimeout(()=>f.value=!1,2e3)}catch(D){console.error("[PROFILE] Save error:",D)}finally{h.value=!1}}},g=()=>s("logout"),A=()=>{},v=()=>{s("back")};return(D,V)=>{const N=GL;return Te(),Oe("div",zL,[Q("header",KL,[Q("div",QL,[Q("div",{class:"header-left"},[Q("button",{class:"back-btn",onClick:v},[...V[4]||(V[4]=[Q("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none"},[Q("path",{d:"M12 4L6 10L12 16",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1),rt(" Dashboard ",-1)])])]),V[5]||(V[5]=Q("div",{class:"header-brand"},[Q("span",{class:"brand-badge"},"ACC"),Q("span",{class:"brand-name"},"TELEMETRY")],-1)),Q("div",YL,[be(N,{"user-name":o.value,onLogout:g,onGoToProfile:A},null,8,["user-name"])])])]),Q("main",JL,[Q("div",XL,[Q("h1",ZL,On(a.value),1),Q("div",eM,[Q("div",tM,[V[6]||(V[6]=by('<div class="avatar-container" data-v-1d97d8c6><svg class="avatar-helmet" viewBox="0 0 100 100" fill="none" data-v-1d97d8c6><defs data-v-1d97d8c6><linearGradient id="helmetGrad" x1="0%" y1="0%" x2="100%" y2="100%" data-v-1d97d8c6><stop offset="0%" stop-color="#e10600" data-v-1d97d8c6></stop><stop offset="100%" stop-color="#ff6b00" data-v-1d97d8c6></stop></linearGradient></defs><path d="M50 10C30 10 15 25 15 45V60C15 75 25 85 40 88L45 90H55L60 88C75 85 85 75 85 60V45C85 25 70 10 50 10Z" stroke="url(#helmetGrad)" stroke-width="3" fill="none" data-v-1d97d8c6></path><path d="M20 45H80C80 45 78 55 50 55C22 55 20 45 20 45Z" stroke="url(#helmetGrad)" stroke-width="2" fill="rgba(225,6,0,0.1)" data-v-1d97d8c6></path><line x1="50" y1="15" x2="50" y2="85" stroke="url(#helmetGrad)" stroke-width="1.5" data-v-1d97d8c6></line></svg></div>',1)),Q("div",nM,[Q("h2",sM,On(o.value),1),Q("span",{class:Bt(["role-badge",`role-badge--${t.userRole||"pilot"}`])},On(l.value),3),Q("p",rM,On(t.userEmail||"Email non disponibile"),1)])]),Q("div",iM,[Q("div",oM,[V[11]||(V[11]=Q("h3",{class:"card-title"},[Q("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none"},[Q("circle",{cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"2"}),Q("circle",{cx:"12",cy:"12",r:"4",stroke:"currentColor","stroke-width":"2"})]),rt(" Attrezzatura Sim Racing ")],-1)),Q("div",aM,[Q("div",cM,[V[7]||(V[7]=Q("label",{class:"form-label"},"Volante / Base",-1)),ho(Q("input",{"onUpdate:modelValue":V[0]||(V[0]=_=>u.value.volante=_),type:"text",class:"form-input",placeholder:"Es. Fanatec CSL DD 8Nm"},null,512),[[Ba,u.value.volante]])]),Q("div",lM,[V[8]||(V[8]=Q("label",{class:"form-label"},"Corona / Rim",-1)),ho(Q("input",{"onUpdate:modelValue":V[1]||(V[1]=_=>u.value.corona=_),type:"text",class:"form-input",placeholder:"Es. ClubSport Formula V2"},null,512),[[Ba,u.value.corona]])]),Q("div",uM,[V[9]||(V[9]=Q("label",{class:"form-label"},"Pedaliera",-1)),ho(Q("input",{"onUpdate:modelValue":V[2]||(V[2]=_=>u.value.pedaliera=_),type:"text",class:"form-input",placeholder:"Es. CSL Pedals + Load Cell"},null,512),[[Ba,u.value.pedaliera]])]),Q("div",hM,[V[10]||(V[10]=Q("label",{class:"form-label"},"Struttura / Rig",-1)),ho(Q("input",{"onUpdate:modelValue":V[3]||(V[3]=_=>u.value.struttura=_),type:"text",class:"form-input",placeholder:"Es. Next Level Racing 2.0"},null,512),[[Ba,u.value.struttura]])]),Q("button",{class:Bt(["save-btn",{"save-btn--success":f.value}]),disabled:h.value,onClick:p},[h.value?(Te(),Oe(Ze,{key:0},[rt("Salvataggio...")],64)):f.value?(Te(),Oe(Ze,{key:1},[rt(" Salvato")],64)):(Te(),Oe(Ze,{key:2},[rt("Salva Modifiche")],64))],10,fM)])])])])])])])}}}),pM=Object.assign(pn(dM,[["__scopeId","data-v-1d97d8c6"]]),{__name:"ProfilePage"}),mM=XV(nL),gM={id:"app"},_M={key:"initializing",class:"initializing-screen"},yM={key:"register-success",class:"auth-wrapper"},vM={class:"auth-card-standalone"},EM={key:"loading",class:"loading-screen"},TM={key:"dashboard",class:"dashboard-wrapper"},wM={key:"profile",class:"profile-wrapper"},bM="dissolve-fade-zoom",IM=ct({__name:"app",setup(t){Mi();const e=Gt();Ks(()=>{const R=sessionStorage.getItem("spa-redirect-path");R&&(sessionStorage.removeItem("spa-redirect-path"),setTimeout(()=>{e.push(R)},100))});const{currentUser:n,isLoading:s,logout:r}=Wi(),{prefetchAllTrackBests:i,loadSessions:o}=ad(),a=de(!1),l=de("initializing"),u=de("login"),h=de(""),f=de(!1),p=de(!1);Mn(l,async R=>{if(R==="dashboard"&&!a.value&&n.value){a.value=!0,console.log("[APP]  Starting global prefetch..."),await o();const O=await i();console.log(`[APP]  Prefetch complete: ${O} trackBests cached`)}}),Mn(s,R=>{!R&&!f.value&&(f.value=!0,n.value?(h.value=n.value.email||"",p.value&&!n.value.emailVerified?(l.value="auth",u.value="register-success"):l.value="dashboard"):l.value="auth")},{immediate:!0}),Mn(n,(R,O)=>{f.value&&(R?(h.value=R.email||"",p.value&&!R.emailVerified?(l.value!=="auth"||u.value!=="register-success")&&(l.value="auth",u.value="register-success"):l.value==="auth"&&u.value!=="register-success"&&(l.value="loading",setTimeout(()=>{l.value="dashboard"},1e3))):O&&(l.value="auth",u.value="login"))});const g=R=>{if(h.value=R,p.value&&n.value&&!n.value.emailVerified){u.value="register-success";return}l.value="loading",setTimeout(()=>{l.value="dashboard",e.push("/panoramica")},1500)},A=R=>{h.value=R,p.value?u.value="register-success":(l.value="loading",setTimeout(()=>{l.value="dashboard",e.push("/panoramica")},1500))},v=()=>{l.value="loading",setTimeout(()=>{l.value="dashboard",e.push("/panoramica")},1500)},D=()=>{console.log("[AUTH] Resending verification email to:",h.value)},V=async()=>{await r(),h.value="",u.value="login",l.value="auth"},N=()=>{l.value="profile"},_=()=>{l.value="dashboard"};return ts("goToProfile",N),(R,O)=>{const U=JV,E=mM,I=bL,y=NL,C=OL,P=BL,S=pM;return Te(),Oe("div",gM,[be(U),be(E),be(oa,{name:bM,mode:"out-in"},{default:an(()=>[l.value==="initializing"?(Te(),Oe("div",_M,[...O[0]||(O[0]=[Q("div",{class:"initializing-content"},[Q("div",{class:"initializing-spinner"})],-1)])])):l.value==="auth"&&u.value!=="register-success"?(Te(),Yt(I,{key:"auth",onLoginSuccess:g,onRegisterSuccess:A})):l.value==="auth"&&u.value==="register-success"?(Te(),Oe("div",yM,[Q("div",vM,[be(y,{email:h.value,"require-email-verification":p.value,onGoToDashboard:v,onResendEmail:D},null,8,["email","require-email-verification"])])])):l.value==="loading"?(Te(),Oe("div",EM,[...O[1]||(O[1]=[Q("div",{class:"loading-content"},[Q("div",{class:"loading-spinner"}),Q("p",{class:"loading-text"},"Caricamento Dashboard...")],-1)])])):l.value==="dashboard"?(Te(),Oe("div",TM,[be(P,null,{default:an(()=>[be(C)]),_:1})])):l.value==="profile"?(Te(),Oe("div",wM,[be(S,{onBack:_,onLogout:V})])):Qs("",!0)]),_:1})])}}}),AM={__name:"nuxt-error-page",props:{error:Object},setup(t){const n=t.error,s=Number(n.statusCode||500),r=s===404,i=n.statusMessage??(r?"Page Not Found":"Internal Server Error"),o=n.message||n.toString(),a=void 0,h=r?vc(()=>ut(()=>import("./DVqtoUAH.js"),__vite__mapDeps([41,5,42]),import.meta.url)):vc(()=>ut(()=>import("./BsnIpOlo.js"),__vite__mapDeps([43,44]),import.meta.url));return(f,p)=>(Te(),Yt(We(h),kw(wy({statusCode:We(s),statusMessage:We(i),description:We(o),stack:We(a)})),null,16))}},RM={key:0},c_={__name:"nuxt-root",setup(t){const e=()=>null,n=at(),s=n.deferHydration();if(n.isHydrating){const u=n.hooks.hookOnce("app:error",s);Gt().beforeEach(u)}const r=!1;ts(Pr,Mi()),n.hooks.callHookWith(u=>u.map(h=>h()),"vue:setup");const i=ul(),o=!1,a=/bot\b|chrome-lighthouse|facebookexternalhit|google\b/i;J_((u,h,f)=>{if(n.hooks.callHook("vue:error",u,h,f).catch(p=>console.error("[nuxt] Error in `vue:error` hook",p)),a.test(navigator.userAgent))return n.hooks.callHook("app:error",u),console.error(`[nuxt] Not rendering error page for bot with user agent \`${navigator.userAgent}\`:`,u),!1;if(Yy(u)&&(u.fatal||u.unhandled))return n.runWithContext(()=>_r(u)),!1});const l=!1;return(u,h)=>(Te(),Yt(sf,{onResolve:We(s)},{default:an(()=>[We(o)?(Te(),Oe("div",RM)):We(i)?(Te(),Yt(We(AM),{key:1,error:We(i)},null,8,["error"])):We(l)?(Te(),Yt(We(e),{key:2,context:We(l)},null,8,["context"])):We(r)?(Te(),Yt(xb(We(r)),{key:3})):(Te(),Yt(We(IM),{key:4}))]),_:1},8,["onResolve"]))}};let l_;{let t;l_=async function(){if(t)return t;const n=!!(window.__NUXT__?.serverRendered??document.getElementById("__NUXT_DATA__")?.dataset.ssr==="true"),s=n?nA(c_):tA(c_),r=dR({vueApp:s});async function i(o){await r.callHook("app:error",o),r.payload.error||=Ar(o)}s.config.errorHandler=i,r.hook("app:suspense:resolve",()=>{s.config.errorHandler===i&&(s.config.errorHandler=void 0)}),!n&&qp.id&&r.hook("app:suspense:resolve",()=>{document.getElementById(qp.id)?.remove()});try{await gR(r,mC)}catch(o){i(o)}try{await r.hooks.callHook("app:created",s),await r.hooks.callHook("app:beforeMount",s),s.mount(uR),await r.hooks.callHook("app:mounted",s),await zs()}catch(o){i(o)}return s},t=l_().catch(e=>{throw console.error("Error while mounting app:",e),e})}export{el as $,Tm as A,MM as B,DM as C,LM as D,Oe as E,Te as F,Q as G,On as H,be as I,an as J,rt as K,Yt as L,We as M,pM as N,Mi as O,Qs as P,Ze as Q,CM as R,Xt as S,ft as T,Us as U,fc as V,Rr as W,Vo as X,Lo as Y,Di as Z,pn as _,Wi as a,Bt as a0,hc as a1,ad as a2,$M as a3,UM as a4,FM as a5,BM as a6,ho as a7,kM as a8,cl as a9,Ba as aa,by as ab,kV as ac,qM as ad,PM as ae,Ub as af,GL as ag,AI as ah,Y_ as ai,Ue as aj,zs as ak,nl as al,oa as am,jM as an,HM as ao,ct as b,Gt as c,OM as d,fi as e,at as f,_f as g,ra as h,Ot as i,it as j,SM as k,Oy as l,RR as m,VM as n,Ks as o,ts as p,hC as q,de as r,ls as s,Fe as t,ll as u,Ur as v,Mn as w,af as x,CA as y,Sc as z};
