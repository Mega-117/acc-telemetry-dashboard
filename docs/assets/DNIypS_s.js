const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./g0qd8nQy.js","./index.Du2RZnax.css","./DmTfnK0W.js","./_...BBgSxync.css","./CPTjFm2G.js","./C8zJQDWB.js","./dev-upload.CAfU5vij.css","./DWQDgxJu.js","./5TH3cdGh.js","./xOCTEXod.js","./PageContainer.DMW25oBZ.css","./DgQP2i11.js","./Bwh6ISvG.js","./PanoramicaPage.DpOEp7fr.css","./cJ8rrSTd.js","./BTpMaGdg.js","./ShL4X3mu.js","./PaginationControls.CNLm8WGw.css","./Ob-kvq-8.js","./TrackDetailPage.Cc-WCubZ.css","./BM3pL6LL.js","./dev-cleanup.BuZaNzw2.css","./BiKyPXTo.js","./Cw1TueNG.js","./SessionDetailPage.DeRXFE66.css","./B1b0nk9v.js","./SessioniPage.BxYhrgzv.css","./D31hxMG5.js","./PistePage.CW4o1UYE.css","./_id_.D9laFF8O.css","./B75KE3Ue.js","./Bnd8zWnv.js","./index.Dzufv81H.css","./B6G_Djoo.js","./C690ZVps.js","./dev-data-audit.5t95g-Ny.css","./FDqdPEuP.js","./owMeTLgq.js","./coach.Fr5SOs7k.css","./DhRmex7A.js","./dashboard.jH60z8Xe.css","./Czg42y49.js","./error-404.BLrjNXsr.css","./DuFKNKfi.js","./error-500.DLkAwcfL.css"])))=>i.map(i=>d[i]);
(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function n(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(r){if(r.ep)return;r.ep=!0;const i=n(r);fetch(r.href,i)}})();function Mh(t){const e=Object.create(null);for(const n of t.split(","))e[n]=1;return n=>n in e}const Ke={},ri=[],Vn=()=>{},r_=()=>!1,ea=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),xh=t=>t.startsWith("onUpdate:"),Ct=Object.assign,Fh=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},gw=Object.prototype.hasOwnProperty,He=(t,e)=>gw.call(t,e),ye=Array.isArray,ii=t=>Vi(t)==="[object Map]",Oi=t=>Vi(t)==="[object Set]",Qd=t=>Vi(t)==="[object Date]",_w=t=>Vi(t)==="[object RegExp]",Ae=t=>typeof t=="function",et=t=>typeof t=="string",Tn=t=>typeof t=="symbol",Ge=t=>t!==null&&typeof t=="object",Uh=t=>(Ge(t)||Ae(t))&&Ae(t.then)&&Ae(t.catch),i_=Object.prototype.toString,Vi=t=>i_.call(t),yw=t=>Vi(t).slice(8,-1),o_=t=>Vi(t)==="[object Object]",Gc=t=>et(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,oi=Mh(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),zc=t=>{const e=Object.create(null);return(n=>e[n]||(e[n]=t(n)))},vw=/-\w/g,dn=zc(t=>t.replace(vw,e=>e.slice(1).toUpperCase())),Ew=/\B([A-Z])/g,Mr=zc(t=>t.replace(Ew,"-$1").toLowerCase()),Kc=zc(t=>t.charAt(0).toUpperCase()+t.slice(1)),Kl=zc(t=>t?`on${Kc(t)}`:""),Us=(t,e)=>!Object.is(t,e),ai=(t,...e)=>{for(let n=0;n<t.length;n++)t[n](...e)},a_=(t,e,n,s=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:s,value:n})},Qc=t=>{const e=parseFloat(t);return isNaN(e)?t:e},c_=t=>{const e=et(t)?Number(t):NaN;return isNaN(e)?t:e};let Yd;const Yc=()=>Yd||(Yd=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Jc(t){if(ye(t)){const e={};for(let n=0;n<t.length;n++){const s=t[n],r=et(s)?Iw(s):Jc(s);if(r)for(const i in r)e[i]=r[i]}return e}else if(et(t)||Ge(t))return t}const Tw=/;(?![^(]*\))/g,ww=/:([^]+)/,bw=/\/\*[^]*?\*\//g;function Iw(t){const e={};return t.replace(bw,"").split(Tw).forEach(n=>{if(n){const s=n.split(ww);s.length>1&&(e[s[0].trim()]=s[1].trim())}}),e}function Wt(t){let e="";if(et(t))e=t;else if(ye(t))for(let n=0;n<t.length;n++){const s=Wt(t[n]);s&&(e+=s+" ")}else if(Ge(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}function Aw(t){if(!t)return null;let{class:e,style:n}=t;return e&&!et(e)&&(t.class=Wt(e)),n&&(t.style=Jc(n)),t}const Rw="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Sw=Mh(Rw);function l_(t){return!!t||t===""}function Cw(t,e){if(t.length!==e.length)return!1;let n=!0;for(let s=0;n&&s<t.length;s++)n=ta(t[s],e[s]);return n}function ta(t,e){if(t===e)return!0;let n=Qd(t),s=Qd(e);if(n||s)return n&&s?t.getTime()===e.getTime():!1;if(n=Tn(t),s=Tn(e),n||s)return t===e;if(n=ye(t),s=ye(e),n||s)return n&&s?Cw(t,e):!1;if(n=Ge(t),s=Ge(e),n||s){if(!n||!s)return!1;const r=Object.keys(t).length,i=Object.keys(e).length;if(r!==i)return!1;for(const o in t){const a=t.hasOwnProperty(o),l=e.hasOwnProperty(o);if(a&&!l||!a&&l||!ta(t[o],e[o]))return!1}}return String(t)===String(e)}function Bh(t,e){return t.findIndex(n=>ta(n,e))}const u_=t=>!!(t&&t.__v_isRef===!0),Gs=t=>et(t)?t:t==null?"":ye(t)||Ge(t)&&(t.toString===i_||!Ae(t.toString))?u_(t)?Gs(t.value):JSON.stringify(t,h_,2):String(t),h_=(t,e)=>u_(e)?h_(t,e.value):ii(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[s,r],i)=>(n[Ql(s,i)+" =>"]=r,n),{})}:Oi(e)?{[`Set(${e.size})`]:[...e.values()].map(n=>Ql(n))}:Tn(e)?Ql(e):Ge(e)&&!ye(e)&&!o_(e)?String(e):e,Ql=(t,e="")=>{var n;return Tn(t)?`Symbol(${(n=t.description)!=null?n:e})`:t};let Mt;class f_{constructor(e=!1){this.detached=e,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Mt,!e&&Mt&&(this.index=(Mt.scopes||(Mt.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].pause();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].resume();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].resume()}}run(e){if(this._active){const n=Mt;try{return Mt=this,e()}finally{Mt=n}}}on(){++this._on===1&&(this.prevScope=Mt,Mt=this)}off(){this._on>0&&--this._on===0&&(Mt=this.prevScope,this.prevScope=void 0)}stop(e){if(this._active){this._active=!1;let n,s;for(n=0,s=this.effects.length;n<s;n++)this.effects[n].stop();for(this.effects.length=0,n=0,s=this.cleanups.length;n<s;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,s=this.scopes.length;n<s;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const r=this.parent.scopes.pop();r&&r!==this&&(this.parent.scopes[this.index]=r,r.index=this.index)}this.parent=void 0}}}function Pw(t){return new f_(t)}function $h(){return Mt}function kw(t,e=!1){Mt&&Mt.cleanups.push(t)}let Qe;const Yl=new WeakSet;class d_{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Mt&&Mt.active&&Mt.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,Yl.has(this)&&(Yl.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||m_(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Jd(this),g_(this);const e=Qe,n=_n;Qe=this,_n=!0;try{return this.fn()}finally{__(this),Qe=e,_n=n,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)qh(e);this.deps=this.depsTail=void 0,Jd(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?Yl.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Du(this)&&this.run()}get dirty(){return Du(this)}}let p_=0,Eo,To;function m_(t,e=!1){if(t.flags|=8,e){t.next=To,To=t;return}t.next=Eo,Eo=t}function Hh(){p_++}function jh(){if(--p_>0)return;if(To){let e=To;for(To=void 0;e;){const n=e.next;e.next=void 0,e.flags&=-9,e=n}}let t;for(;Eo;){let e=Eo;for(Eo=void 0;e;){const n=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(s){t||(t=s)}e=n}}if(t)throw t}function g_(t){for(let e=t.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function __(t){let e,n=t.depsTail,s=n;for(;s;){const r=s.prevDep;s.version===-1?(s===n&&(n=r),qh(s),Nw(s)):e=s,s.dep.activeLink=s.prevActiveLink,s.prevActiveLink=void 0,s=r}t.deps=e,t.depsTail=n}function Du(t){for(let e=t.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(y_(e.dep.computed)||e.dep.version!==e.version))return!0;return!!t._dirty}function y_(t){if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===Mo)||(t.globalVersion=Mo,!t.isSSR&&t.flags&128&&(!t.deps&&!t._dirty||!Du(t))))return;t.flags|=2;const e=t.dep,n=Qe,s=_n;Qe=t,_n=!0;try{g_(t);const r=t.fn(t._value);(e.version===0||Us(r,t._value))&&(t.flags|=128,t._value=r,e.version++)}catch(r){throw e.version++,r}finally{Qe=n,_n=s,__(t),t.flags&=-3}}function qh(t,e=!1){const{dep:n,prevSub:s,nextSub:r}=t;if(s&&(s.nextSub=r,t.prevSub=void 0),r&&(r.prevSub=s,t.nextSub=void 0),n.subs===t&&(n.subs=s,!s&&n.computed)){n.computed.flags&=-5;for(let i=n.computed.deps;i;i=i.nextDep)qh(i,!0)}!e&&!--n.sc&&n.map&&n.map.delete(n.key)}function Nw(t){const{prevDep:e,nextDep:n}=t;e&&(e.nextDep=n,t.prevDep=void 0),n&&(n.prevDep=e,t.nextDep=void 0)}let _n=!0;const v_=[];function os(){v_.push(_n),_n=!1}function as(){const t=v_.pop();_n=t===void 0?!0:t}function Jd(t){const{cleanup:e}=t;if(t.cleanup=void 0,e){const n=Qe;Qe=void 0;try{e()}finally{Qe=n}}}let Mo=0;class Dw{constructor(e,n){this.sub=e,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Wh{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(e){if(!Qe||!_n||Qe===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==Qe)n=this.activeLink=new Dw(Qe,this),Qe.deps?(n.prevDep=Qe.depsTail,Qe.depsTail.nextDep=n,Qe.depsTail=n):Qe.deps=Qe.depsTail=n,E_(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const s=n.nextDep;s.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=s),n.prevDep=Qe.depsTail,n.nextDep=void 0,Qe.depsTail.nextDep=n,Qe.depsTail=n,Qe.deps===n&&(Qe.deps=s)}return n}trigger(e){this.version++,Mo++,this.notify(e)}notify(e){Hh();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{jh()}}}function E_(t){if(t.dep.sc++,t.sub.flags&4){const e=t.dep.computed;if(e&&!t.dep.subs){e.flags|=20;for(let s=e.deps;s;s=s.nextDep)E_(s)}const n=t.dep.subs;n!==t&&(t.prevSub=n,n&&(n.nextSub=t)),t.dep.subs=t}}const uc=new WeakMap,wr=Symbol(""),Ou=Symbol(""),xo=Symbol("");function Ft(t,e,n){if(_n&&Qe){let s=uc.get(t);s||uc.set(t,s=new Map);let r=s.get(n);r||(s.set(n,r=new Wh),r.map=s,r.key=n),r.track()}}function Qn(t,e,n,s,r,i){const o=uc.get(t);if(!o){Mo++;return}const a=l=>{l&&l.trigger()};if(Hh(),e==="clear")o.forEach(a);else{const l=ye(t),u=l&&Gc(n);if(l&&n==="length"){const h=Number(s);o.forEach((f,p)=>{(p==="length"||p===xo||!Tn(p)&&p>=h)&&a(f)})}else switch((n!==void 0||o.has(void 0))&&a(o.get(n)),u&&a(o.get(xo)),e){case"add":l?u&&a(o.get("length")):(a(o.get(wr)),ii(t)&&a(o.get(Ou)));break;case"delete":l||(a(o.get(wr)),ii(t)&&a(o.get(Ou)));break;case"set":ii(t)&&a(o.get(wr));break}}jh()}function Ow(t,e){const n=uc.get(t);return n&&n.get(e)}function zr(t){const e=Fe(t);return e===t?e:(Ft(e,"iterate",xo),on(t)?e:e.map(wn))}function Xc(t){return Ft(t=Fe(t),"iterate",xo),t}function Ss(t,e){return Un(t)?Bs(t)?_i(wn(e)):_i(e):wn(e)}const Vw={__proto__:null,[Symbol.iterator](){return Jl(this,Symbol.iterator,t=>Ss(this,t))},concat(...t){return zr(this).concat(...t.map(e=>ye(e)?zr(e):e))},entries(){return Jl(this,"entries",t=>(t[1]=Ss(this,t[1]),t))},every(t,e){return qn(this,"every",t,e,void 0,arguments)},filter(t,e){return qn(this,"filter",t,e,n=>n.map(s=>Ss(this,s)),arguments)},find(t,e){return qn(this,"find",t,e,n=>Ss(this,n),arguments)},findIndex(t,e){return qn(this,"findIndex",t,e,void 0,arguments)},findLast(t,e){return qn(this,"findLast",t,e,n=>Ss(this,n),arguments)},findLastIndex(t,e){return qn(this,"findLastIndex",t,e,void 0,arguments)},forEach(t,e){return qn(this,"forEach",t,e,void 0,arguments)},includes(...t){return Xl(this,"includes",t)},indexOf(...t){return Xl(this,"indexOf",t)},join(t){return zr(this).join(t)},lastIndexOf(...t){return Xl(this,"lastIndexOf",t)},map(t,e){return qn(this,"map",t,e,void 0,arguments)},pop(){return ao(this,"pop")},push(...t){return ao(this,"push",t)},reduce(t,...e){return Xd(this,"reduce",t,e)},reduceRight(t,...e){return Xd(this,"reduceRight",t,e)},shift(){return ao(this,"shift")},some(t,e){return qn(this,"some",t,e,void 0,arguments)},splice(...t){return ao(this,"splice",t)},toReversed(){return zr(this).toReversed()},toSorted(t){return zr(this).toSorted(t)},toSpliced(...t){return zr(this).toSpliced(...t)},unshift(...t){return ao(this,"unshift",t)},values(){return Jl(this,"values",t=>Ss(this,t))}};function Jl(t,e,n){const s=Xc(t),r=s[e]();return s!==t&&!on(t)&&(r._next=r.next,r.next=()=>{const i=r._next();return i.done||(i.value=n(i.value)),i}),r}const Lw=Array.prototype;function qn(t,e,n,s,r,i){const o=Xc(t),a=o!==t&&!on(t),l=o[e];if(l!==Lw[e]){const f=l.apply(t,i);return a?wn(f):f}let u=n;o!==t&&(a?u=function(f,p){return n.call(this,Ss(t,f),p,t)}:n.length>2&&(u=function(f,p){return n.call(this,f,p,t)}));const h=l.call(o,u,s);return a&&r?r(h):h}function Xd(t,e,n,s){const r=Xc(t);let i=n;return r!==t&&(on(t)?n.length>3&&(i=function(o,a,l){return n.call(this,o,a,l,t)}):i=function(o,a,l){return n.call(this,o,Ss(t,a),l,t)}),r[e](i,...s)}function Xl(t,e,n){const s=Fe(t);Ft(s,"iterate",xo);const r=s[e](...n);return(r===-1||r===!1)&&Zc(n[0])?(n[0]=Fe(n[0]),s[e](...n)):r}function ao(t,e,n=[]){os(),Hh();const s=Fe(t)[e].apply(t,n);return jh(),as(),s}const Mw=Mh("__proto__,__v_isRef,__isVue"),T_=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(Tn));function xw(t){Tn(t)||(t=String(t));const e=Fe(this);return Ft(e,"has",t),e.hasOwnProperty(t)}class w_{constructor(e=!1,n=!1){this._isReadonly=e,this._isShallow=n}get(e,n,s){if(n==="__v_skip")return e.__v_skip;const r=this._isReadonly,i=this._isShallow;if(n==="__v_isReactive")return!r;if(n==="__v_isReadonly")return r;if(n==="__v_isShallow")return i;if(n==="__v_raw")return s===(r?i?zw:R_:i?A_:I_).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(s)?e:void 0;const o=ye(e);if(!r){let l;if(o&&(l=Vw[n]))return l;if(n==="hasOwnProperty")return xw}const a=Reflect.get(e,n,_t(e)?e:s);if((Tn(n)?T_.has(n):Mw(n))||(r||Ft(e,"get",n),i))return a;if(_t(a)){const l=o&&Gc(n)?a:a.value;return r&&Ge(l)?Lu(l):l}return Ge(a)?r?Lu(a):nr(a):a}}class b_ extends w_{constructor(e=!1){super(!1,e)}set(e,n,s,r){let i=e[n];const o=ye(e)&&Gc(n);if(!this._isShallow){const u=Un(i);if(!on(s)&&!Un(s)&&(i=Fe(i),s=Fe(s)),!o&&_t(i)&&!_t(s))return u||(i.value=s),!0}const a=o?Number(n)<e.length:He(e,n),l=Reflect.set(e,n,s,_t(e)?e:r);return e===Fe(r)&&(a?Us(s,i)&&Qn(e,"set",n,s):Qn(e,"add",n,s)),l}deleteProperty(e,n){const s=He(e,n);e[n];const r=Reflect.deleteProperty(e,n);return r&&s&&Qn(e,"delete",n,void 0),r}has(e,n){const s=Reflect.has(e,n);return(!Tn(n)||!T_.has(n))&&Ft(e,"has",n),s}ownKeys(e){return Ft(e,"iterate",ye(e)?"length":wr),Reflect.ownKeys(e)}}class Fw extends w_{constructor(e=!1){super(!0,e)}set(e,n){return!0}deleteProperty(e,n){return!0}}const Uw=new b_,Bw=new Fw,$w=new b_(!0);const Vu=t=>t,Da=t=>Reflect.getPrototypeOf(t);function Hw(t,e,n){return function(...s){const r=this.__v_raw,i=Fe(r),o=ii(i),a=t==="entries"||t===Symbol.iterator&&o,l=t==="keys"&&o,u=r[t](...s),h=n?Vu:e?_i:wn;return!e&&Ft(i,"iterate",l?Ou:wr),{next(){const{value:f,done:p}=u.next();return p?{value:f,done:p}:{value:a?[h(f[0]),h(f[1])]:h(f),done:p}},[Symbol.iterator](){return this}}}}function Oa(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function jw(t,e){const n={get(r){const i=this.__v_raw,o=Fe(i),a=Fe(r);t||(Us(r,a)&&Ft(o,"get",r),Ft(o,"get",a));const{has:l}=Da(o),u=e?Vu:t?_i:wn;if(l.call(o,r))return u(i.get(r));if(l.call(o,a))return u(i.get(a));i!==o&&i.get(r)},get size(){const r=this.__v_raw;return!t&&Ft(Fe(r),"iterate",wr),r.size},has(r){const i=this.__v_raw,o=Fe(i),a=Fe(r);return t||(Us(r,a)&&Ft(o,"has",r),Ft(o,"has",a)),r===a?i.has(r):i.has(r)||i.has(a)},forEach(r,i){const o=this,a=o.__v_raw,l=Fe(a),u=e?Vu:t?_i:wn;return!t&&Ft(l,"iterate",wr),a.forEach((h,f)=>r.call(i,u(h),u(f),o))}};return Ct(n,t?{add:Oa("add"),set:Oa("set"),delete:Oa("delete"),clear:Oa("clear")}:{add(r){!e&&!on(r)&&!Un(r)&&(r=Fe(r));const i=Fe(this);return Da(i).has.call(i,r)||(i.add(r),Qn(i,"add",r,r)),this},set(r,i){!e&&!on(i)&&!Un(i)&&(i=Fe(i));const o=Fe(this),{has:a,get:l}=Da(o);let u=a.call(o,r);u||(r=Fe(r),u=a.call(o,r));const h=l.call(o,r);return o.set(r,i),u?Us(i,h)&&Qn(o,"set",r,i):Qn(o,"add",r,i),this},delete(r){const i=Fe(this),{has:o,get:a}=Da(i);let l=o.call(i,r);l||(r=Fe(r),l=o.call(i,r)),a&&a.call(i,r);const u=i.delete(r);return l&&Qn(i,"delete",r,void 0),u},clear(){const r=Fe(this),i=r.size!==0,o=r.clear();return i&&Qn(r,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(r=>{n[r]=Hw(r,t,e)}),n}function Gh(t,e){const n=jw(t,e);return(s,r,i)=>r==="__v_isReactive"?!t:r==="__v_isReadonly"?t:r==="__v_raw"?s:Reflect.get(He(n,r)&&r in s?n:s,r,i)}const qw={get:Gh(!1,!1)},Ww={get:Gh(!1,!0)},Gw={get:Gh(!0,!1)};const I_=new WeakMap,A_=new WeakMap,R_=new WeakMap,zw=new WeakMap;function Kw(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Qw(t){return t.__v_skip||!Object.isExtensible(t)?0:Kw(yw(t))}function nr(t){return Un(t)?t:zh(t,!1,Uw,qw,I_)}function On(t){return zh(t,!1,$w,Ww,A_)}function Lu(t){return zh(t,!0,Bw,Gw,R_)}function zh(t,e,n,s,r){if(!Ge(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const i=Qw(t);if(i===0)return t;const o=r.get(t);if(o)return o;const a=new Proxy(t,i===2?s:n);return r.set(t,a),a}function Bs(t){return Un(t)?Bs(t.__v_raw):!!(t&&t.__v_isReactive)}function Un(t){return!!(t&&t.__v_isReadonly)}function on(t){return!!(t&&t.__v_isShallow)}function Zc(t){return t?!!t.__v_raw:!1}function Fe(t){const e=t&&t.__v_raw;return e?Fe(e):t}function Yw(t){return!He(t,"__v_skip")&&Object.isExtensible(t)&&a_(t,"__v_skip",!0),t}const wn=t=>Ge(t)?nr(t):t,_i=t=>Ge(t)?Lu(t):t;function _t(t){return t?t.__v_isRef===!0:!1}function de(t){return S_(t,!1)}function cs(t){return S_(t,!0)}function S_(t,e){return _t(t)?t:new Jw(t,e)}class Jw{constructor(e,n){this.dep=new Wh,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?e:Fe(e),this._value=n?e:wn(e),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(e){const n=this._rawValue,s=this.__v_isShallow||on(e)||Un(e);e=s?e:Fe(e),Us(e,n)&&(this._rawValue=e,this._value=s?e:wn(e),this.dep.trigger())}}function We(t){return _t(t)?t.value:t}function Xw(t){return Ae(t)?t():We(t)}const Zw={get:(t,e,n)=>e==="__v_raw"?t:We(Reflect.get(t,e,n)),set:(t,e,n,s)=>{const r=t[e];return _t(r)&&!_t(n)?(r.value=n,!0):Reflect.set(t,e,n,s)}};function C_(t){return Bs(t)?t:new Proxy(t,Zw)}class eb{constructor(e,n,s){this._object=e,this._key=n,this._defaultValue=s,this.__v_isRef=!0,this._value=void 0,this._raw=Fe(e);let r=!0,i=e;if(!ye(e)||!Gc(String(n)))do r=!Zc(i)||on(i);while(r&&(i=i.__v_raw));this._shallow=r}get value(){let e=this._object[this._key];return this._shallow&&(e=We(e)),this._value=e===void 0?this._defaultValue:e}set value(e){if(this._shallow&&_t(this._raw[this._key])){const n=this._object[this._key];if(_t(n)){n.value=e;return}}this._object[this._key]=e}get dep(){return Ow(this._raw,this._key)}}class tb{constructor(e){this._getter=e,this.__v_isRef=!0,this.__v_isReadonly=!0,this._value=void 0}get value(){return this._value=this._getter()}}function nb(t,e,n){return _t(t)?t:Ae(t)?new tb(t):Ge(t)&&arguments.length>1?sb(t,e,n):de(t)}function sb(t,e,n){return new eb(t,e,n)}class rb{constructor(e,n,s){this.fn=e,this.setter=n,this._value=void 0,this.dep=new Wh(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Mo-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=s}notify(){if(this.flags|=16,!(this.flags&8)&&Qe!==this)return m_(this,!0),!0}get value(){const e=this.dep.track();return y_(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function ib(t,e,n=!1){let s,r;return Ae(t)?s=t:(s=t.get,r=t.set),new rb(s,r,n)}const Va={},hc=new WeakMap;let gr;function ob(t,e=!1,n=gr){if(n){let s=hc.get(n);s||hc.set(n,s=[]),s.push(t)}}function ab(t,e,n=Ke){const{immediate:s,deep:r,once:i,scheduler:o,augmentJob:a,call:l}=n,u=C=>r?C:on(C)||r===!1||r===0?Yn(C,1):Yn(C);let h,f,p,g,I=!1,y=!1;if(_t(t)?(f=()=>t.value,I=on(t)):Bs(t)?(f=()=>u(t),I=!0):ye(t)?(y=!0,I=t.some(C=>Bs(C)||on(C)),f=()=>t.map(C=>{if(_t(C))return C.value;if(Bs(C))return u(C);if(Ae(C))return l?l(C,2):C()})):Ae(t)?e?f=l?()=>l(t,2):t:f=()=>{if(p){os();try{p()}finally{as()}}const C=gr;gr=h;try{return l?l(t,3,[g]):t(g)}finally{gr=C}}:f=Vn,e&&r){const C=f,O=r===!0?1/0:r;f=()=>Yn(C(),O)}const D=$h(),V=()=>{h.stop(),D&&D.active&&Fh(D.effects,h)};if(i&&e){const C=e;e=(...O)=>{C(...O),V()}}let k=y?new Array(t.length).fill(Va):Va;const _=C=>{if(!(!(h.flags&1)||!h.dirty&&!C))if(e){const O=h.run();if(r||I||(y?O.some((U,E)=>Us(U,k[E])):Us(O,k))){p&&p();const U=gr;gr=h;try{const E=[O,k===Va?void 0:y&&k[0]===Va?[]:k,g];k=O,l?l(e,3,E):e(...E)}finally{gr=U}}}else h.run()};return a&&a(_),h=new d_(f),h.scheduler=o?()=>o(_,!1):_,g=C=>ob(C,!1,h),p=h.onStop=()=>{const C=hc.get(h);if(C){if(l)l(C,4);else for(const O of C)O();hc.delete(h)}},e?s?_(!0):k=h.run():o?o(_.bind(null,!0),!0):h.run(),V.pause=h.pause.bind(h),V.resume=h.resume.bind(h),V.stop=V,V}function Yn(t,e=1/0,n){if(e<=0||!Ge(t)||t.__v_skip||(n=n||new Map,(n.get(t)||0)>=e))return t;if(n.set(t,e),e--,_t(t))Yn(t.value,e,n);else if(ye(t))for(let s=0;s<t.length;s++)Yn(t[s],e,n);else if(Oi(t)||ii(t))t.forEach(s=>{Yn(s,e,n)});else if(o_(t)){for(const s in t)Yn(t[s],e,n);for(const s of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,s)&&Yn(t[s],e,n)}return t}function na(t,e,n,s){try{return s?t(...s):t()}catch(r){Li(r,e,n)}}function bn(t,e,n,s){if(Ae(t)){const r=na(t,e,n,s);return r&&Uh(r)&&r.catch(i=>{Li(i,e,n)}),r}if(ye(t)){const r=[];for(let i=0;i<t.length;i++)r.push(bn(t[i],e,n,s));return r}}function Li(t,e,n,s=!0){const r=e?e.vnode:null,{errorHandler:i,throwUnhandledErrorInProduction:o}=e&&e.appContext.config||Ke;if(e){let a=e.parent;const l=e.proxy,u=`https://vuejs.org/error-reference/#runtime-${n}`;for(;a;){const h=a.ec;if(h){for(let f=0;f<h.length;f++)if(h[f](t,l,u)===!1)return}a=a.parent}if(i){os(),na(i,null,10,[t,l,u]),as();return}}cb(t,n,r,s,o)}function cb(t,e,n,s=!0,r=!1){if(r)throw t;console.error(t)}const qt=[];let kn=-1;const ci=[];let Cs=null,Qr=0;const P_=Promise.resolve();let fc=null;function zs(t){const e=fc||P_;return t?e.then(this?t.bind(this):t):e}function lb(t){let e=kn+1,n=qt.length;for(;e<n;){const s=e+n>>>1,r=qt[s],i=Fo(r);i<t||i===t&&r.flags&2?e=s+1:n=s}return e}function Kh(t){if(!(t.flags&1)){const e=Fo(t),n=qt[qt.length-1];!n||!(t.flags&2)&&e>=Fo(n)?qt.push(t):qt.splice(lb(e),0,t),t.flags|=1,k_()}}function k_(){fc||(fc=P_.then(N_))}function Mu(t){ye(t)?ci.push(...t):Cs&&t.id===-1?Cs.splice(Qr+1,0,t):t.flags&1||(ci.push(t),t.flags|=1),k_()}function Zd(t,e,n=kn+1){for(;n<qt.length;n++){const s=qt[n];if(s&&s.flags&2){if(t&&s.id!==t.uid)continue;qt.splice(n,1),n--,s.flags&4&&(s.flags&=-2),s(),s.flags&4||(s.flags&=-2)}}}function dc(t){if(ci.length){const e=[...new Set(ci)].sort((n,s)=>Fo(n)-Fo(s));if(ci.length=0,Cs){Cs.push(...e);return}for(Cs=e,Qr=0;Qr<Cs.length;Qr++){const n=Cs[Qr];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}Cs=null,Qr=0}}const Fo=t=>t.id==null?t.flags&2?-1:1/0:t.id;function N_(t){try{for(kn=0;kn<qt.length;kn++){const e=qt[kn];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),na(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;kn<qt.length;kn++){const e=qt[kn];e&&(e.flags&=-2)}kn=-1,qt.length=0,dc(),fc=null,(qt.length||ci.length)&&N_()}}let Dt=null,D_=null;function pc(t){const e=Dt;return Dt=t,D_=t&&t.type.__scopeId||null,e}function an(t,e=Dt,n){if(!e||t._n)return t;const s=(...r)=>{s._d&&Ec(-1);const i=pc(e);let o;try{o=t(...r)}finally{pc(i),s._d&&Ec(1)}return o};return s._n=!0,s._c=!0,s._d=!0,s}function ho(t,e){if(Dt===null)return t;const n=rl(Dt),s=t.dirs||(t.dirs=[]);for(let r=0;r<e.length;r++){let[i,o,a,l=Ke]=e[r];i&&(Ae(i)&&(i={mounted:i,updated:i}),i.deep&&Yn(o),s.push({dir:i,instance:n,value:o,oldValue:void 0,arg:a,modifiers:l}))}return t}function Nn(t,e,n,s){const r=t.dirs,i=e&&e.dirs;for(let o=0;o<r.length;o++){const a=r[o];i&&(a.oldValue=i[o].value);let l=a.dir[s];l&&(os(),bn(l,n,8,[t.el,a,t,e]),as())}}function Zn(t,e){if(Nt){let n=Nt.provides;const s=Nt.parent&&Nt.parent.provides;s===n&&(n=Nt.provides=Object.create(s)),n[t]=e}}function Ot(t,e,n=!1){const s=xr();if(s||br){let r=br?br._context.provides:s?s.parent==null||s.ce?s.vnode.appContext&&s.vnode.appContext.provides:s.parent.provides:void 0;if(r&&t in r)return r[t];if(arguments.length>1)return n&&Ae(e)?e.call(s&&s.proxy):e}}function el(){return!!(xr()||br)}const ub=Symbol.for("v-scx"),hb=()=>Ot(ub);function fb(t,e){return Qh(t,null,e)}function es(t,e,n){return Qh(t,e,n)}function Qh(t,e,n=Ke){const{immediate:s,deep:r,flush:i,once:o}=n,a=Ct({},n),l=e&&s||!e&&i!=="post";let u;if(Ei){if(i==="sync"){const g=hb();u=g.__watcherHandles||(g.__watcherHandles=[])}else if(!l){const g=()=>{};return g.stop=Vn,g.resume=Vn,g.pause=Vn,g}}const h=Nt;a.call=(g,I,y)=>bn(g,h,I,y);let f=!1;i==="post"?a.scheduler=g=>{At(g,h&&h.suspense)}:i!=="sync"&&(f=!0,a.scheduler=(g,I)=>{I?g():Kh(g)}),a.augmentJob=g=>{e&&(g.flags|=4),f&&(g.flags|=2,h&&(g.id=h.uid,g.i=h))};const p=ab(t,e,a);return Ei&&(u?u.push(p):l&&p()),p}function db(t,e,n){const s=this.proxy,r=et(t)?t.includes(".")?O_(s,t):()=>s[t]:t.bind(s,s);let i;Ae(e)?i=e:(i=e.handler,n=e);const o=ia(this),a=Qh(r,i.bind(s),n);return o(),a}function O_(t,e){const n=e.split(".");return()=>{let s=t;for(let r=0;r<n.length&&s;r++)s=s[n[r]];return s}}const pb=Symbol("_vte"),V_=t=>t.__isTeleport,Kn=Symbol("_leaveCb"),La=Symbol("_enterCb");function mb(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Ks(()=>{t.isMounted=!0}),ra(()=>{t.isUnmounting=!0}),t}const cn=[Function,Array],L_={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:cn,onEnter:cn,onAfterEnter:cn,onEnterCancelled:cn,onBeforeLeave:cn,onLeave:cn,onAfterLeave:cn,onLeaveCancelled:cn,onBeforeAppear:cn,onAppear:cn,onAfterAppear:cn,onAppearCancelled:cn},M_=t=>{const e=t.subTree;return e.component?M_(e.component):e},gb={name:"BaseTransition",props:L_,setup(t,{slots:e}){const n=xr(),s=mb();return()=>{const r=e.default&&U_(e.default(),!0);if(!r||!r.length)return;const i=x_(r),o=Fe(t),{mode:a}=o;if(s.isLeaving)return Zl(i);const l=ep(i);if(!l)return Zl(i);let u=xu(l,o,s,n,f=>u=f);l.type!==pt&&yi(l,u);let h=n.subTree&&ep(n.subTree);if(h&&h.type!==pt&&!mn(h,l)&&M_(n).type!==pt){let f=xu(h,o,s,n);if(yi(h,f),a==="out-in"&&l.type!==pt)return s.isLeaving=!0,f.afterLeave=()=>{s.isLeaving=!1,n.job.flags&8||n.update(),delete f.afterLeave,h=void 0},Zl(i);a==="in-out"&&l.type!==pt?f.delayLeave=(p,g,I)=>{const y=F_(s,h);y[String(h.key)]=h,p[Kn]=()=>{g(),p[Kn]=void 0,delete u.delayedLeave,h=void 0},u.delayedLeave=()=>{I(),delete u.delayedLeave,h=void 0}}:h=void 0}else h&&(h=void 0);return i}}};function x_(t){let e=t[0];if(t.length>1){for(const n of t)if(n.type!==pt){e=n;break}}return e}const _b=gb;function F_(t,e){const{leavingVNodes:n}=t;let s=n.get(e.type);return s||(s=Object.create(null),n.set(e.type,s)),s}function xu(t,e,n,s,r){const{appear:i,mode:o,persisted:a=!1,onBeforeEnter:l,onEnter:u,onAfterEnter:h,onEnterCancelled:f,onBeforeLeave:p,onLeave:g,onAfterLeave:I,onLeaveCancelled:y,onBeforeAppear:D,onAppear:V,onAfterAppear:k,onAppearCancelled:_}=e,C=String(t.key),O=F_(n,t),U=(v,R)=>{v&&bn(v,s,9,R)},E=(v,R)=>{const S=R[1];U(v,R),ye(v)?v.every(A=>A.length<=1)&&S():v.length<=1&&S()},b={mode:o,persisted:a,beforeEnter(v){let R=l;if(!n.isMounted)if(i)R=D||l;else return;v[Kn]&&v[Kn](!0);const S=O[C];S&&mn(t,S)&&S.el[Kn]&&S.el[Kn](),U(R,[v])},enter(v){let R=u,S=h,A=f;if(!n.isMounted)if(i)R=V||u,S=k||h,A=_||f;else return;let w=!1;const ue=v[La]=Ee=>{w||(w=!0,Ee?U(A,[v]):U(S,[v]),b.delayedLeave&&b.delayedLeave(),v[La]=void 0)};R?E(R,[v,ue]):ue()},leave(v,R){const S=String(t.key);if(v[La]&&v[La](!0),n.isUnmounting)return R();U(p,[v]);let A=!1;const w=v[Kn]=ue=>{A||(A=!0,R(),ue?U(y,[v]):U(I,[v]),v[Kn]=void 0,O[S]===t&&delete O[S])};O[S]=t,g?E(g,[v,w]):w()},clone(v){const R=xu(v,e,n,s,r);return r&&r(R),R}};return b}function Zl(t){if(sa(t))return t=fn(t),t.children=null,t}function ep(t){if(!sa(t))return V_(t.type)&&t.children?x_(t.children):t;if(t.component)return t.component.subTree;const{shapeFlag:e,children:n}=t;if(n){if(e&16)return n[0];if(e&32&&Ae(n.default))return n.default()}}function yi(t,e){t.shapeFlag&6&&t.component?(t.transition=e,yi(t.component.subTree,e)):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function U_(t,e=!1,n){let s=[],r=0;for(let i=0;i<t.length;i++){let o=t[i];const a=n==null?o.key:String(n)+String(o.key!=null?o.key:i);o.type===Ze?(o.patchFlag&128&&r++,s=s.concat(U_(o.children,e,a))):(e||o.type!==pt)&&s.push(a!=null?fn(o,{key:a}):o)}if(r>1)for(let i=0;i<s.length;i++)s[i].patchFlag=-2;return s}function ct(t,e){return Ae(t)?Ct({name:t.name},e,{setup:t}):t}function Yh(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}const mc=new WeakMap;function li(t,e,n,s,r=!1){if(ye(t)){t.forEach((I,y)=>li(I,e&&(ye(e)?e[y]:e),n,s,r));return}if(ts(s)&&!r){s.shapeFlag&512&&s.type.__asyncResolved&&s.component.subTree.component&&li(t,e,n,s.component.subTree);return}const i=s.shapeFlag&4?rl(s.component):s.el,o=r?null:i,{i:a,r:l}=t,u=e&&e.r,h=a.refs===Ke?a.refs={}:a.refs,f=a.setupState,p=Fe(f),g=f===Ke?r_:I=>He(p,I);if(u!=null&&u!==l){if(tp(e),et(u))h[u]=null,g(u)&&(f[u]=null);else if(_t(u)){u.value=null;const I=e;I.k&&(h[I.k]=null)}}if(Ae(l))na(l,a,12,[o,h]);else{const I=et(l),y=_t(l);if(I||y){const D=()=>{if(t.f){const V=I?g(l)?f[l]:h[l]:l.value;if(r)ye(V)&&Fh(V,i);else if(ye(V))V.includes(i)||V.push(i);else if(I)h[l]=[i],g(l)&&(f[l]=h[l]);else{const k=[i];l.value=k,t.k&&(h[t.k]=k)}}else I?(h[l]=o,g(l)&&(f[l]=o)):y&&(l.value=o,t.k&&(h[t.k]=o))};if(o){const V=()=>{D(),mc.delete(t)};V.id=-1,mc.set(t,V),At(V,n)}else tp(t),D()}}}function tp(t){const e=mc.get(t);e&&(e.flags|=8,mc.delete(t))}let np=!1;const Kr=()=>{np||(console.error("Hydration completed but contains mismatches."),np=!0)},yb=t=>t.namespaceURI.includes("svg")&&t.tagName!=="foreignObject",vb=t=>t.namespaceURI.includes("MathML"),Ma=t=>{if(t.nodeType===1){if(yb(t))return"svg";if(vb(t))return"mathml"}},ti=t=>t.nodeType===8;function Eb(t){const{mt:e,p:n,o:{patchProp:s,createText:r,nextSibling:i,parentNode:o,remove:a,insert:l,createComment:u}}=t,h=(_,C)=>{if(!C.hasChildNodes()){n(null,_,C),dc(),C._vnode=_;return}f(C.firstChild,_,null,null,null),dc(),C._vnode=_},f=(_,C,O,U,E,b=!1)=>{b=b||!!C.dynamicChildren;const v=ti(_)&&_.data==="[",R=()=>y(_,C,O,U,E,v),{type:S,ref:A,shapeFlag:w,patchFlag:ue}=C;let Ee=_.nodeType;C.el=_,ue===-2&&(b=!1,C.dynamicChildren=null);let ae=null;switch(S){case Ir:Ee!==3?C.children===""?(l(C.el=r(""),o(_),_),ae=_):ae=R():(_.data!==C.children&&(Kr(),_.data=C.children),ae=i(_));break;case pt:k(_)?(ae=i(_),V(C.el=_.content.firstChild,_,O)):Ee!==8||v?ae=R():ae=i(_);break;case bo:if(v&&(_=i(_),Ee=_.nodeType),Ee===1||Ee===3){ae=_;const j=!C.children.length;for(let L=0;L<C.staticCount;L++)j&&(C.children+=ae.nodeType===1?ae.outerHTML:ae.data),L===C.staticCount-1&&(C.anchor=ae),ae=i(ae);return v?i(ae):ae}else R();break;case Ze:v?ae=I(_,C,O,U,E,b):ae=R();break;default:if(w&1)(Ee!==1||C.type.toLowerCase()!==_.tagName.toLowerCase())&&!k(_)?ae=R():ae=p(_,C,O,U,E,b);else if(w&6){C.slotScopeIds=E;const j=o(_);if(v?ae=D(_):ti(_)&&_.data==="teleport start"?ae=D(_,_.data,"teleport end"):ae=i(_),e(C,j,null,O,U,Ma(j),b),ts(C)&&!C.type.__asyncResolved){let L;v?(L=be(Ze),L.anchor=ae?ae.previousSibling:j.lastChild):L=_.nodeType===3?rt(""):be("div"),L.el=_,C.component.subTree=L}}else w&64?Ee!==8?ae=R():ae=C.type.hydrate(_,C,O,U,E,b,t,g):w&128&&(ae=C.type.hydrate(_,C,O,U,Ma(o(_)),E,b,t,f))}return A!=null&&li(A,null,U,C),ae},p=(_,C,O,U,E,b)=>{b=b||!!C.dynamicChildren;const{type:v,props:R,patchFlag:S,shapeFlag:A,dirs:w,transition:ue}=C,Ee=v==="input"||v==="option";if(Ee||S!==-1){w&&Nn(C,null,O,"created");let ae=!1;if(k(_)){ae=ay(null,ue)&&O&&O.vnode.props&&O.vnode.props.appear;const L=_.content.firstChild;if(ae){const Y=L.getAttribute("class");Y&&(L.$cls=Y),ue.beforeEnter(L)}V(L,_,O),C.el=_=L}if(A&16&&!(R&&(R.innerHTML||R.textContent))){let L=g(_.firstChild,C,_,O,U,E,b);for(;L;){xa(_,1)||Kr();const Y=L;L=L.nextSibling,a(Y)}}else if(A&8){let L=C.children;L[0]===`
`&&(_.tagName==="PRE"||_.tagName==="TEXTAREA")&&(L=L.slice(1));const{textContent:Y}=_;Y!==L&&Y!==L.replace(/\r\n|\r/g,`
`)&&(xa(_,0)||Kr(),_.textContent=C.children)}if(R){if(Ee||!b||S&48){const L=_.tagName.includes("-");for(const Y in R)(Ee&&(Y.endsWith("value")||Y==="indeterminate")||ea(Y)&&!oi(Y)||Y[0]==="."||L)&&s(_,Y,null,R[Y],void 0,O)}else if(R.onClick)s(_,"onClick",null,R.onClick,void 0,O);else if(S&4&&Bs(R.style))for(const L in R.style)R.style[L]}let j;(j=R&&R.onVnodeBeforeMount)&&Kt(j,O,C),w&&Nn(C,null,O,"beforeMount"),((j=R&&R.onVnodeMounted)||w||ae)&&fy(()=>{j&&Kt(j,O,C),ae&&ue.enter(_),w&&Nn(C,null,O,"mounted")},U)}return _.nextSibling},g=(_,C,O,U,E,b,v)=>{v=v||!!C.dynamicChildren;const R=C.children,S=R.length;for(let A=0;A<S;A++){const w=v?R[A]:R[A]=nn(R[A]),ue=w.type===Ir;_?(ue&&!v&&A+1<S&&nn(R[A+1]).type===Ir&&(l(r(_.data.slice(w.children.length)),O,i(_)),_.data=w.children),_=f(_,w,U,E,b,v)):ue&&!w.children?l(w.el=r(""),O):(xa(O,1)||Kr(),n(null,w,O,null,U,E,Ma(O),b))}return _},I=(_,C,O,U,E,b)=>{const{slotScopeIds:v}=C;v&&(E=E?E.concat(v):v);const R=o(_),S=g(i(_),C,R,O,U,E,b);return S&&ti(S)&&S.data==="]"?i(C.anchor=S):(Kr(),l(C.anchor=u("]"),R,S),S)},y=(_,C,O,U,E,b)=>{if(xa(_.parentElement,1)||Kr(),C.el=null,b){const S=D(_);for(;;){const A=i(_);if(A&&A!==S)a(A);else break}}const v=i(_),R=o(_);return a(_),n(null,C,R,v,O,U,Ma(R),E),O&&(O.vnode.el=C.el,sl(O,C.el)),v},D=(_,C="[",O="]")=>{let U=0;for(;_;)if(_=i(_),_&&ti(_)&&(_.data===C&&U++,_.data===O)){if(U===0)return i(_);U--}return _},V=(_,C,O)=>{const U=C.parentNode;U&&U.replaceChild(_,C);let E=O;for(;E;)E.vnode.el===C&&(E.vnode.el=E.subTree.el=_),E=E.parent},k=_=>_.nodeType===1&&_.tagName==="TEMPLATE";return[h,f]}const sp="data-allow-mismatch",Tb={0:"text",1:"children",2:"class",3:"style",4:"attribute"};function xa(t,e){if(e===0||e===1)for(;t&&!t.hasAttribute(sp);)t=t.parentElement;const n=t&&t.getAttribute(sp);if(n==null)return!1;if(n==="")return!0;{const s=n.split(",");return e===0&&s.includes("children")?!0:s.includes(Tb[e])}}Yc().requestIdleCallback;Yc().cancelIdleCallback;function wb(t,e){if(ti(t)&&t.data==="["){let n=1,s=t.nextSibling;for(;s;){if(s.nodeType===1){if(e(s)===!1)break}else if(ti(s))if(s.data==="]"){if(--n===0)break}else s.data==="["&&n++;s=s.nextSibling}}else e(t)}const ts=t=>!!t.type.__asyncLoader;function gc(t){Ae(t)&&(t={loader:t});const{loader:e,loadingComponent:n,errorComponent:s,delay:r=200,hydrate:i,timeout:o,suspensible:a=!0,onError:l}=t;let u=null,h,f=0;const p=()=>(f++,u=null,g()),g=()=>{let I;return u||(I=u=e().catch(y=>{if(y=y instanceof Error?y:new Error(String(y)),l)return new Promise((D,V)=>{l(y,()=>D(p()),()=>V(y),f+1)});throw y}).then(y=>I!==u&&u?u:(y&&(y.__esModule||y[Symbol.toStringTag]==="Module")&&(y=y.default),h=y,y)))};return ct({name:"AsyncComponentWrapper",__asyncLoader:g,__asyncHydrate(I,y,D){let V=!1;(y.bu||(y.bu=[])).push(()=>V=!0);const k=()=>{V||D()},_=i?()=>{const C=i(k,O=>wb(I,O));C&&(y.bum||(y.bum=[])).push(C)}:k;h?_():g().then(()=>!y.isUnmounted&&_())},get __asyncResolved(){return h},setup(){const I=Nt;if(Yh(I),h)return()=>Fa(h,I);const y=_=>{u=null,Li(_,I,13,!s)};if(a&&I.suspense||Ei)return g().then(_=>()=>Fa(_,I)).catch(_=>(y(_),()=>s?be(s,{error:_}):null));const D=de(!1),V=de(),k=de(!!r);return r&&setTimeout(()=>{k.value=!1},r),o!=null&&setTimeout(()=>{if(!D.value&&!V.value){const _=new Error(`Async component timed out after ${o}ms.`);y(_),V.value=_}},o),g().then(()=>{D.value=!0,I.parent&&sa(I.parent.vnode)&&I.parent.update()}).catch(_=>{y(_),V.value=_}),()=>{if(D.value&&h)return Fa(h,I);if(V.value&&s)return be(s,{error:V.value});if(n&&!k.value)return Fa(n,I)}}})}function Fa(t,e){const{ref:n,props:s,children:r,ce:i}=e.vnode,o=be(t,s,r);return o.ref=n,o.ce=i,delete e.vnode.ce,o}const sa=t=>t.type.__isKeepAlive,bb={name:"KeepAlive",__isKeepAlive:!0,props:{include:[String,RegExp,Array],exclude:[String,RegExp,Array],max:[String,Number]},setup(t,{slots:e}){const n=xr(),s=n.ctx;if(!s.renderer)return()=>{const k=e.default&&e.default();return k&&k.length===1?k[0]:k};const r=new Map,i=new Set;let o=null;const a=n.suspense,{renderer:{p:l,m:u,um:h,o:{createElement:f}}}=s,p=f("div");s.activate=(k,_,C,O,U)=>{const E=k.component;u(k,_,C,0,a),l(E.vnode,k,_,C,E,a,O,k.slotScopeIds,U),At(()=>{E.isDeactivated=!1,E.a&&ai(E.a);const b=k.props&&k.props.onVnodeMounted;b&&Kt(b,E.parent,k)},a)},s.deactivate=k=>{const _=k.component;yc(_.m),yc(_.a),u(k,p,null,1,a),At(()=>{_.da&&ai(_.da);const C=k.props&&k.props.onVnodeUnmounted;C&&Kt(C,_.parent,k),_.isDeactivated=!0},a)};function g(k){eu(k),h(k,n,a,!0)}function I(k){r.forEach((_,C)=>{const O=Wu(ts(_)?_.type.__asyncResolved||{}:_.type);O&&!k(O)&&y(C)})}function y(k){const _=r.get(k);_&&(!o||!mn(_,o))?g(_):o&&eu(o),r.delete(k),i.delete(k)}es(()=>[t.include,t.exclude],([k,_])=>{k&&I(C=>fo(k,C)),_&&I(C=>!fo(_,C))},{flush:"post",deep:!0});let D=null;const V=()=>{D!=null&&(vc(n.subTree.type)?At(()=>{r.set(D,Ua(n.subTree))},n.subTree.suspense):r.set(D,Ua(n.subTree)))};return Ks(V),j_(V),ra(()=>{r.forEach(k=>{const{subTree:_,suspense:C}=n,O=Ua(_);if(k.type===O.type&&k.key===O.key){eu(O);const U=O.component.da;U&&At(U,C);return}g(k)})}),()=>{if(D=null,!e.default)return o=null;const k=e.default(),_=k[0];if(k.length>1)return o=null,k;if(!Sr(_)||!(_.shapeFlag&4)&&!(_.shapeFlag&128))return o=null,_;let C=Ua(_);if(C.type===pt)return o=null,C;const O=C.type,U=Wu(ts(C)?C.type.__asyncResolved||{}:O),{include:E,exclude:b,max:v}=t;if(E&&(!U||!fo(E,U))||b&&U&&fo(b,U))return C.shapeFlag&=-257,o=C,_;const R=C.key==null?O:C.key,S=r.get(R);return C.el&&(C=fn(C),_.shapeFlag&128&&(_.ssContent=C)),D=R,S?(C.el=S.el,C.component=S.component,C.transition&&yi(C,C.transition),C.shapeFlag|=512,i.delete(R),i.add(R)):(i.add(R),v&&i.size>parseInt(v,10)&&y(i.values().next().value)),C.shapeFlag|=256,o=C,vc(_.type)?_:C}}},Ib=bb;function fo(t,e){return ye(t)?t.some(n=>fo(n,e)):et(t)?t.split(",").includes(e):_w(t)?(t.lastIndex=0,t.test(e)):!1}function B_(t,e){H_(t,"a",e)}function $_(t,e){H_(t,"da",e)}function H_(t,e,n=Nt){const s=t.__wdc||(t.__wdc=()=>{let r=n;for(;r;){if(r.isDeactivated)return;r=r.parent}return t()});if(tl(e,s,n),n){let r=n.parent;for(;r&&r.parent;)sa(r.parent.vnode)&&Ab(s,e,n,r),r=r.parent}}function Ab(t,e,n,s){const r=tl(e,t,s,!0);q_(()=>{Fh(s[e],r)},n)}function eu(t){t.shapeFlag&=-257,t.shapeFlag&=-513}function Ua(t){return t.shapeFlag&128?t.ssContent:t}function tl(t,e,n=Nt,s=!1){if(n){const r=n[t]||(n[t]=[]),i=e.__weh||(e.__weh=(...o)=>{os();const a=ia(n),l=bn(e,n,t,o);return a(),as(),l});return s?r.unshift(i):r.push(i),i}}const ds=t=>(e,n=Nt)=>{(!Ei||t==="sp")&&tl(t,(...s)=>e(...s),n)},Rb=ds("bm"),Ks=ds("m"),Sb=ds("bu"),j_=ds("u"),ra=ds("bum"),q_=ds("um"),Cb=ds("sp"),Pb=ds("rtg"),kb=ds("rtc");function W_(t,e=Nt){tl("ec",t,e)}const Jh="components",Nb="directives";function TM(t,e){return Xh(Jh,t,!0,e)||t}const G_=Symbol.for("v-ndc");function Db(t){return et(t)?Xh(Jh,t,!1)||t:t||G_}function Ob(t){return Xh(Nb,t)}function Xh(t,e,n=!0,s=!1){const r=Dt||Nt;if(r){const i=r.type;if(t===Jh){const a=Wu(i,!1);if(a&&(a===e||a===dn(e)||a===Kc(dn(e))))return i}const o=rp(r[t]||i[t],e)||rp(r.appContext[t],e);return!o&&s?i:o}}function rp(t,e){return t&&(t[e]||t[dn(e)]||t[Kc(dn(e))])}function wM(t,e,n,s){let r;const i=n,o=ye(t);if(o||et(t)){const a=o&&Bs(t);let l=!1,u=!1;a&&(l=!on(t),u=Un(t),t=Xc(t)),r=new Array(t.length);for(let h=0,f=t.length;h<f;h++)r[h]=e(l?u?_i(wn(t[h])):wn(t[h]):t[h],h,void 0,i)}else if(typeof t=="number"){r=new Array(t);for(let a=0;a<t;a++)r[a]=e(a+1,a,void 0,i)}else if(Ge(t))if(t[Symbol.iterator])r=Array.from(t,(a,l)=>e(a,l,void 0,i));else{const a=Object.keys(t);r=new Array(a.length);for(let l=0,u=a.length;l<u;l++){const h=a[l];r[l]=e(t[h],h,l,i)}}else r=[];return r}function Vb(t,e,n={},s,r){if(Dt.ce||Dt.parent&&ts(Dt.parent)&&Dt.parent.ce){const u=Object.keys(n).length>0;return Te(),Yt(Ze,null,[be("slot",n,s)],u?-2:64)}let i=t[e];i&&i._c&&(i._d=!1),Te();const o=i&&z_(i(n)),a=n.key||o&&o.key,l=Yt(Ze,{key:(a&&!Tn(a)?a:`_${e}`)+(!o&&s?"_fb":"")},o||[],o&&t._===1?64:-2);return i&&i._c&&(i._d=!0),l}function z_(t){return t.some(e=>Sr(e)?!(e.type===pt||e.type===Ze&&!z_(e.children)):!0)?t:null}const Fu=t=>t?vy(t)?rl(t):Fu(t.parent):null,wo=Ct(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>Fu(t.parent),$root:t=>Fu(t.root),$host:t=>t.ce,$emit:t=>t.emit,$options:t=>Q_(t),$forceUpdate:t=>t.f||(t.f=()=>{Kh(t.update)}),$nextTick:t=>t.n||(t.n=zs.bind(t.proxy)),$watch:t=>db.bind(t)}),tu=(t,e)=>t!==Ke&&!t.__isScriptSetup&&He(t,e),Lb={get({_:t},e){if(e==="__v_skip")return!0;const{ctx:n,setupState:s,data:r,props:i,accessCache:o,type:a,appContext:l}=t;if(e[0]!=="$"){const p=o[e];if(p!==void 0)switch(p){case 1:return s[e];case 2:return r[e];case 4:return n[e];case 3:return i[e]}else{if(tu(s,e))return o[e]=1,s[e];if(r!==Ke&&He(r,e))return o[e]=2,r[e];if(He(i,e))return o[e]=3,i[e];if(n!==Ke&&He(n,e))return o[e]=4,n[e];Uu&&(o[e]=0)}}const u=wo[e];let h,f;if(u)return e==="$attrs"&&Ft(t.attrs,"get",""),u(t);if((h=a.__cssModules)&&(h=h[e]))return h;if(n!==Ke&&He(n,e))return o[e]=4,n[e];if(f=l.config.globalProperties,He(f,e))return f[e]},set({_:t},e,n){const{data:s,setupState:r,ctx:i}=t;return tu(r,e)?(r[e]=n,!0):s!==Ke&&He(s,e)?(s[e]=n,!0):He(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(i[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:s,appContext:r,props:i,type:o}},a){let l;return!!(n[a]||t!==Ke&&a[0]!=="$"&&He(t,a)||tu(e,a)||He(i,a)||He(s,a)||He(wo,a)||He(r.config.globalProperties,a)||(l=o.__cssModules)&&l[a])},defineProperty(t,e,n){return n.get!=null?t._.accessCache[e]=0:He(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}};function ip(t){return ye(t)?t.reduce((e,n)=>(e[n]=null,e),{}):t}let Uu=!0;function Mb(t){const e=Q_(t),n=t.proxy,s=t.ctx;Uu=!1,e.beforeCreate&&op(e.beforeCreate,t,"bc");const{data:r,computed:i,methods:o,watch:a,provide:l,inject:u,created:h,beforeMount:f,mounted:p,beforeUpdate:g,updated:I,activated:y,deactivated:D,beforeDestroy:V,beforeUnmount:k,destroyed:_,unmounted:C,render:O,renderTracked:U,renderTriggered:E,errorCaptured:b,serverPrefetch:v,expose:R,inheritAttrs:S,components:A,directives:w,filters:ue}=e;if(u&&xb(u,s,null),o)for(const j in o){const L=o[j];Ae(L)&&(s[j]=L.bind(n))}if(r){const j=r.call(n,n);Ge(j)&&(t.data=nr(j))}if(Uu=!0,i)for(const j in i){const L=i[j],Y=Ae(L)?L.bind(n,n):Ae(L.get)?L.get.bind(n,n):Vn,H=!Ae(L)&&Ae(L.set)?L.set.bind(n):Vn,q=je({get:Y,set:H});Object.defineProperty(s,j,{enumerable:!0,configurable:!0,get:()=>q.value,set:F=>q.value=F})}if(a)for(const j in a)K_(a[j],s,n,j);if(l){const j=Ae(l)?l.call(n):l;Reflect.ownKeys(j).forEach(L=>{Zn(L,j[L])})}h&&op(h,t,"c");function ae(j,L){ye(L)?L.forEach(Y=>j(Y.bind(n))):L&&j(L.bind(n))}if(ae(Rb,f),ae(Ks,p),ae(Sb,g),ae(j_,I),ae(B_,y),ae($_,D),ae(W_,b),ae(kb,U),ae(Pb,E),ae(ra,k),ae(q_,C),ae(Cb,v),ye(R))if(R.length){const j=t.exposed||(t.exposed={});R.forEach(L=>{Object.defineProperty(j,L,{get:()=>n[L],set:Y=>n[L]=Y,enumerable:!0})})}else t.exposed||(t.exposed={});O&&t.render===Vn&&(t.render=O),S!=null&&(t.inheritAttrs=S),A&&(t.components=A),w&&(t.directives=w),v&&Yh(t)}function xb(t,e,n=Vn){ye(t)&&(t=Bu(t));for(const s in t){const r=t[s];let i;Ge(r)?"default"in r?i=Ot(r.from||s,r.default,!0):i=Ot(r.from||s):i=Ot(r),_t(i)?Object.defineProperty(e,s,{enumerable:!0,configurable:!0,get:()=>i.value,set:o=>i.value=o}):e[s]=i}}function op(t,e,n){bn(ye(t)?t.map(s=>s.bind(e.proxy)):t.bind(e.proxy),e,n)}function K_(t,e,n,s){let r=s.includes(".")?O_(n,s):()=>n[s];if(et(t)){const i=e[t];Ae(i)&&es(r,i)}else if(Ae(t))es(r,t.bind(n));else if(Ge(t))if(ye(t))t.forEach(i=>K_(i,e,n,s));else{const i=Ae(t.handler)?t.handler.bind(n):e[t.handler];Ae(i)&&es(r,i,t)}}function Q_(t){const e=t.type,{mixins:n,extends:s}=e,{mixins:r,optionsCache:i,config:{optionMergeStrategies:o}}=t.appContext,a=i.get(e);let l;return a?l=a:!r.length&&!n&&!s?l=e:(l={},r.length&&r.forEach(u=>_c(l,u,o,!0)),_c(l,e,o)),Ge(e)&&i.set(e,l),l}function _c(t,e,n,s=!1){const{mixins:r,extends:i}=e;i&&_c(t,i,n,!0),r&&r.forEach(o=>_c(t,o,n,!0));for(const o in e)if(!(s&&o==="expose")){const a=Fb[o]||n&&n[o];t[o]=a?a(t[o],e[o]):e[o]}return t}const Fb={data:ap,props:cp,emits:cp,methods:po,computed:po,beforeCreate:Ht,created:Ht,beforeMount:Ht,mounted:Ht,beforeUpdate:Ht,updated:Ht,beforeDestroy:Ht,beforeUnmount:Ht,destroyed:Ht,unmounted:Ht,activated:Ht,deactivated:Ht,errorCaptured:Ht,serverPrefetch:Ht,components:po,directives:po,watch:Bb,provide:ap,inject:Ub};function ap(t,e){return e?t?function(){return Ct(Ae(t)?t.call(this,this):t,Ae(e)?e.call(this,this):e)}:e:t}function Ub(t,e){return po(Bu(t),Bu(e))}function Bu(t){if(ye(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function Ht(t,e){return t?[...new Set([].concat(t,e))]:e}function po(t,e){return t?Ct(Object.create(null),t,e):e}function cp(t,e){return t?ye(t)&&ye(e)?[...new Set([...t,...e])]:Ct(Object.create(null),ip(t),ip(e??{})):e}function Bb(t,e){if(!t)return e;if(!e)return t;const n=Ct(Object.create(null),t);for(const s in e)n[s]=Ht(t[s],e[s]);return n}function Y_(){return{app:null,config:{isNativeTag:r_,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let $b=0;function Hb(t,e){return function(s,r=null){Ae(s)||(s=Ct({},s)),r!=null&&!Ge(r)&&(r=null);const i=Y_(),o=new WeakSet,a=[];let l=!1;const u=i.app={_uid:$b++,_component:s,_props:r,_container:null,_context:i,_instance:null,version:EI,get config(){return i.config},set config(h){},use(h,...f){return o.has(h)||(h&&Ae(h.install)?(o.add(h),h.install(u,...f)):Ae(h)&&(o.add(h),h(u,...f))),u},mixin(h){return i.mixins.includes(h)||i.mixins.push(h),u},component(h,f){return f?(i.components[h]=f,u):i.components[h]},directive(h,f){return f?(i.directives[h]=f,u):i.directives[h]},mount(h,f,p){if(!l){const g=u._ceVNode||be(s,r);return g.appContext=i,p===!0?p="svg":p===!1&&(p=void 0),f&&e?e(g,h):t(g,h,p),l=!0,u._container=h,h.__vue_app__=u,rl(g.component)}},onUnmount(h){a.push(h)},unmount(){l&&(bn(a,u._instance,16),t(null,u._container),delete u._container.__vue_app__)},provide(h,f){return i.provides[h]=f,u},runWithContext(h){const f=br;br=u;try{return h()}finally{br=f}}};return u}}let br=null;const jb=(t,e)=>e==="modelValue"||e==="model-value"?t.modelModifiers:t[`${e}Modifiers`]||t[`${dn(e)}Modifiers`]||t[`${Mr(e)}Modifiers`];function qb(t,e,...n){if(t.isUnmounted)return;const s=t.vnode.props||Ke;let r=n;const i=e.startsWith("update:"),o=i&&jb(s,e.slice(7));o&&(o.trim&&(r=n.map(h=>et(h)?h.trim():h)),o.number&&(r=n.map(Qc)));let a,l=s[a=Kl(e)]||s[a=Kl(dn(e))];!l&&i&&(l=s[a=Kl(Mr(e))]),l&&bn(l,t,6,r);const u=s[a+"Once"];if(u){if(!t.emitted)t.emitted={};else if(t.emitted[a])return;t.emitted[a]=!0,bn(u,t,6,r)}}const Wb=new WeakMap;function J_(t,e,n=!1){const s=n?Wb:e.emitsCache,r=s.get(t);if(r!==void 0)return r;const i=t.emits;let o={},a=!1;if(!Ae(t)){const l=u=>{const h=J_(u,e,!0);h&&(a=!0,Ct(o,h))};!n&&e.mixins.length&&e.mixins.forEach(l),t.extends&&l(t.extends),t.mixins&&t.mixins.forEach(l)}return!i&&!a?(Ge(t)&&s.set(t,null),null):(ye(i)?i.forEach(l=>o[l]=null):Ct(o,i),Ge(t)&&s.set(t,o),o)}function nl(t,e){return!t||!ea(e)?!1:(e=e.slice(2).replace(/Once$/,""),He(t,e[0].toLowerCase()+e.slice(1))||He(t,Mr(e))||He(t,e))}function nu(t){const{type:e,vnode:n,proxy:s,withProxy:r,propsOptions:[i],slots:o,attrs:a,emit:l,render:u,renderCache:h,props:f,data:p,setupState:g,ctx:I,inheritAttrs:y}=t,D=pc(t);let V,k;try{if(n.shapeFlag&4){const C=r||s,O=C;V=nn(u.call(O,C,h,f,g,p,I)),k=a}else{const C=e;V=nn(C.length>1?C(f,{attrs:a,slots:o,emit:l}):C(f,null)),k=e.props?a:zb(a)}}catch(C){Io.length=0,Li(C,t,1),V=be(pt)}let _=V;if(k&&y!==!1){const C=Object.keys(k),{shapeFlag:O}=_;C.length&&O&7&&(i&&C.some(xh)&&(k=Kb(k,i)),_=fn(_,k,!1,!0))}return n.dirs&&(_=fn(_,null,!1,!0),_.dirs=_.dirs?_.dirs.concat(n.dirs):n.dirs),n.transition&&yi(_,n.transition),V=_,pc(D),V}function Gb(t,e=!0){let n;for(let s=0;s<t.length;s++){const r=t[s];if(Sr(r)){if(r.type!==pt||r.children==="v-if"){if(n)return;n=r}}else return}return n}const zb=t=>{let e;for(const n in t)(n==="class"||n==="style"||ea(n))&&((e||(e={}))[n]=t[n]);return e},Kb=(t,e)=>{const n={};for(const s in t)(!xh(s)||!(s.slice(9)in e))&&(n[s]=t[s]);return n};function Qb(t,e,n){const{props:s,children:r,component:i}=t,{props:o,children:a,patchFlag:l}=e,u=i.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&l>=0){if(l&1024)return!0;if(l&16)return s?lp(s,o,u):!!o;if(l&8){const h=e.dynamicProps;for(let f=0;f<h.length;f++){const p=h[f];if(o[p]!==s[p]&&!nl(u,p))return!0}}}else return(r||a)&&(!a||!a.$stable)?!0:s===o?!1:s?o?lp(s,o,u):!0:!!o;return!1}function lp(t,e,n){const s=Object.keys(e);if(s.length!==Object.keys(t).length)return!0;for(let r=0;r<s.length;r++){const i=s[r];if(e[i]!==t[i]&&!nl(n,i))return!0}return!1}function sl({vnode:t,parent:e},n){for(;e;){const s=e.subTree;if(s.suspense&&s.suspense.activeBranch===t&&(s.el=t.el),s===t)(t=e.vnode).el=n,e=e.parent;else break}}const X_={},Z_=()=>Object.create(X_),ey=t=>Object.getPrototypeOf(t)===X_;function Yb(t,e,n,s=!1){const r={},i=Z_();t.propsDefaults=Object.create(null),ty(t,e,r,i);for(const o in t.propsOptions[0])o in r||(r[o]=void 0);n?t.props=s?r:On(r):t.type.props?t.props=r:t.props=i,t.attrs=i}function Jb(t,e,n,s){const{props:r,attrs:i,vnode:{patchFlag:o}}=t,a=Fe(r),[l]=t.propsOptions;let u=!1;if((s||o>0)&&!(o&16)){if(o&8){const h=t.vnode.dynamicProps;for(let f=0;f<h.length;f++){let p=h[f];if(nl(t.emitsOptions,p))continue;const g=e[p];if(l)if(He(i,p))g!==i[p]&&(i[p]=g,u=!0);else{const I=dn(p);r[I]=$u(l,a,I,g,t,!1)}else g!==i[p]&&(i[p]=g,u=!0)}}}else{ty(t,e,r,i)&&(u=!0);let h;for(const f in a)(!e||!He(e,f)&&((h=Mr(f))===f||!He(e,h)))&&(l?n&&(n[f]!==void 0||n[h]!==void 0)&&(r[f]=$u(l,a,f,void 0,t,!0)):delete r[f]);if(i!==a)for(const f in i)(!e||!He(e,f))&&(delete i[f],u=!0)}u&&Qn(t.attrs,"set","")}function ty(t,e,n,s){const[r,i]=t.propsOptions;let o=!1,a;if(e)for(let l in e){if(oi(l))continue;const u=e[l];let h;r&&He(r,h=dn(l))?!i||!i.includes(h)?n[h]=u:(a||(a={}))[h]=u:nl(t.emitsOptions,l)||(!(l in s)||u!==s[l])&&(s[l]=u,o=!0)}if(i){const l=Fe(n),u=a||Ke;for(let h=0;h<i.length;h++){const f=i[h];n[f]=$u(r,l,f,u[f],t,!He(u,f))}}return o}function $u(t,e,n,s,r,i){const o=t[n];if(o!=null){const a=He(o,"default");if(a&&s===void 0){const l=o.default;if(o.type!==Function&&!o.skipFactory&&Ae(l)){const{propsDefaults:u}=r;if(n in u)s=u[n];else{const h=ia(r);s=u[n]=l.call(null,e),h()}}else s=l;r.ce&&r.ce._setProp(n,s)}o[0]&&(i&&!a?s=!1:o[1]&&(s===""||s===Mr(n))&&(s=!0))}return s}const Xb=new WeakMap;function ny(t,e,n=!1){const s=n?Xb:e.propsCache,r=s.get(t);if(r)return r;const i=t.props,o={},a=[];let l=!1;if(!Ae(t)){const h=f=>{l=!0;const[p,g]=ny(f,e,!0);Ct(o,p),g&&a.push(...g)};!n&&e.mixins.length&&e.mixins.forEach(h),t.extends&&h(t.extends),t.mixins&&t.mixins.forEach(h)}if(!i&&!l)return Ge(t)&&s.set(t,ri),ri;if(ye(i))for(let h=0;h<i.length;h++){const f=dn(i[h]);up(f)&&(o[f]=Ke)}else if(i)for(const h in i){const f=dn(h);if(up(f)){const p=i[h],g=o[f]=ye(p)||Ae(p)?{type:p}:Ct({},p),I=g.type;let y=!1,D=!0;if(ye(I))for(let V=0;V<I.length;++V){const k=I[V],_=Ae(k)&&k.name;if(_==="Boolean"){y=!0;break}else _==="String"&&(D=!1)}else y=Ae(I)&&I.name==="Boolean";g[0]=y,g[1]=D,(y||He(g,"default"))&&a.push(f)}}const u=[o,a];return Ge(t)&&s.set(t,u),u}function up(t){return t[0]!=="$"&&!oi(t)}const Zh=t=>t==="_"||t==="_ctx"||t==="$stable",ef=t=>ye(t)?t.map(nn):[nn(t)],Zb=(t,e,n)=>{if(e._n)return e;const s=an((...r)=>ef(e(...r)),n);return s._c=!1,s},sy=(t,e,n)=>{const s=t._ctx;for(const r in t){if(Zh(r))continue;const i=t[r];if(Ae(i))e[r]=Zb(r,i,s);else if(i!=null){const o=ef(i);e[r]=()=>o}}},ry=(t,e)=>{const n=ef(e);t.slots.default=()=>n},iy=(t,e,n)=>{for(const s in e)(n||!Zh(s))&&(t[s]=e[s])},eI=(t,e,n)=>{const s=t.slots=Z_();if(t.vnode.shapeFlag&32){const r=e._;r?(iy(s,e,n),n&&a_(s,"_",r,!0)):sy(e,s)}else e&&ry(t,e)},tI=(t,e,n)=>{const{vnode:s,slots:r}=t;let i=!0,o=Ke;if(s.shapeFlag&32){const a=e._;a?n&&a===1?i=!1:iy(r,e,n):(i=!e.$stable,sy(e,r)),o=e}else e&&(ry(t,e),o={default:1});if(i)for(const a in r)!Zh(a)&&o[a]==null&&delete r[a]},At=fy;function nI(t){return oy(t)}function sI(t){return oy(t,Eb)}function oy(t,e){const n=Yc();n.__VUE__=!0;const{insert:s,remove:r,patchProp:i,createElement:o,createText:a,createComment:l,setText:u,setElementText:h,parentNode:f,nextSibling:p,setScopeId:g=Vn,insertStaticContent:I}=t,y=(P,N,M,J=null,G=null,Z=null,se=void 0,te=null,re=!!N.dynamicChildren)=>{if(P===N)return;P&&!mn(P,N)&&(J=B(P),F(P,G,Z,!0),P=null),N.patchFlag===-2&&(re=!1,N.dynamicChildren=null);const{type:ee,ref:ve,shapeFlag:le}=N;switch(ee){case Ir:D(P,N,M,J);break;case pt:V(P,N,M,J);break;case bo:P==null&&k(N,M,J,se);break;case Ze:A(P,N,M,J,G,Z,se,te,re);break;default:le&1?O(P,N,M,J,G,Z,se,te,re):le&6?w(P,N,M,J,G,Z,se,te,re):(le&64||le&128)&&ee.process(P,N,M,J,G,Z,se,te,re,W)}ve!=null&&G?li(ve,P&&P.ref,Z,N||P,!N):ve==null&&P&&P.ref!=null&&li(P.ref,null,Z,P,!0)},D=(P,N,M,J)=>{if(P==null)s(N.el=a(N.children),M,J);else{const G=N.el=P.el;N.children!==P.children&&u(G,N.children)}},V=(P,N,M,J)=>{P==null?s(N.el=l(N.children||""),M,J):N.el=P.el},k=(P,N,M,J)=>{[P.el,P.anchor]=I(P.children,N,M,J,P.el,P.anchor)},_=({el:P,anchor:N},M,J)=>{let G;for(;P&&P!==N;)G=p(P),s(P,M,J),P=G;s(N,M,J)},C=({el:P,anchor:N})=>{let M;for(;P&&P!==N;)M=p(P),r(P),P=M;r(N)},O=(P,N,M,J,G,Z,se,te,re)=>{if(N.type==="svg"?se="svg":N.type==="math"&&(se="mathml"),P==null)U(N,M,J,G,Z,se,te,re);else{const ee=P.el&&P.el._isVueCE?P.el:null;try{ee&&ee._beginPatch(),v(P,N,G,Z,se,te,re)}finally{ee&&ee._endPatch()}}},U=(P,N,M,J,G,Z,se,te)=>{let re,ee;const{props:ve,shapeFlag:le,transition:pe,dirs:Se}=P;if(re=P.el=o(P.type,Z,ve&&ve.is,ve),le&8?h(re,P.children):le&16&&b(P.children,re,null,J,G,su(P,Z),se,te),Se&&Nn(P,null,J,"created"),E(re,P,P.scopeId,se,J),ve){for(const Be in ve)Be!=="value"&&!oi(Be)&&i(re,Be,null,ve[Be],Z,J);"value"in ve&&i(re,"value",null,ve.value,Z),(ee=ve.onVnodeBeforeMount)&&Kt(ee,J,P)}Se&&Nn(P,null,J,"beforeMount");const De=ay(G,pe);De&&pe.beforeEnter(re),s(re,N,M),((ee=ve&&ve.onVnodeMounted)||De||Se)&&At(()=>{ee&&Kt(ee,J,P),De&&pe.enter(re),Se&&Nn(P,null,J,"mounted")},G)},E=(P,N,M,J,G)=>{if(M&&g(P,M),J)for(let Z=0;Z<J.length;Z++)g(P,J[Z]);if(G){let Z=G.subTree;if(N===Z||vc(Z.type)&&(Z.ssContent===N||Z.ssFallback===N)){const se=G.vnode;E(P,se,se.scopeId,se.slotScopeIds,G.parent)}}},b=(P,N,M,J,G,Z,se,te,re=0)=>{for(let ee=re;ee<P.length;ee++){const ve=P[ee]=te?Ps(P[ee]):nn(P[ee]);y(null,ve,N,M,J,G,Z,se,te)}},v=(P,N,M,J,G,Z,se)=>{const te=N.el=P.el;let{patchFlag:re,dynamicChildren:ee,dirs:ve}=N;re|=P.patchFlag&16;const le=P.props||Ke,pe=N.props||Ke;let Se;if(M&&hr(M,!1),(Se=pe.onVnodeBeforeUpdate)&&Kt(Se,M,N,P),ve&&Nn(N,P,M,"beforeUpdate"),M&&hr(M,!0),(le.innerHTML&&pe.innerHTML==null||le.textContent&&pe.textContent==null)&&h(te,""),ee?R(P.dynamicChildren,ee,te,M,J,su(N,G),Z):se||L(P,N,te,null,M,J,su(N,G),Z,!1),re>0){if(re&16)S(te,le,pe,M,G);else if(re&2&&le.class!==pe.class&&i(te,"class",null,pe.class,G),re&4&&i(te,"style",le.style,pe.style,G),re&8){const De=N.dynamicProps;for(let Be=0;Be<De.length;Be++){const Ue=De[Be],Vt=le[Ue],vt=pe[Ue];(vt!==Vt||Ue==="value")&&i(te,Ue,Vt,vt,G,M)}}re&1&&P.children!==N.children&&h(te,N.children)}else!se&&ee==null&&S(te,le,pe,M,G);((Se=pe.onVnodeUpdated)||ve)&&At(()=>{Se&&Kt(Se,M,N,P),ve&&Nn(N,P,M,"updated")},J)},R=(P,N,M,J,G,Z,se)=>{for(let te=0;te<N.length;te++){const re=P[te],ee=N[te],ve=re.el&&(re.type===Ze||!mn(re,ee)||re.shapeFlag&198)?f(re.el):M;y(re,ee,ve,null,J,G,Z,se,!0)}},S=(P,N,M,J,G)=>{if(N!==M){if(N!==Ke)for(const Z in N)!oi(Z)&&!(Z in M)&&i(P,Z,N[Z],null,G,J);for(const Z in M){if(oi(Z))continue;const se=M[Z],te=N[Z];se!==te&&Z!=="value"&&i(P,Z,te,se,G,J)}"value"in M&&i(P,"value",N.value,M.value,G)}},A=(P,N,M,J,G,Z,se,te,re)=>{const ee=N.el=P?P.el:a(""),ve=N.anchor=P?P.anchor:a("");let{patchFlag:le,dynamicChildren:pe,slotScopeIds:Se}=N;Se&&(te=te?te.concat(Se):Se),P==null?(s(ee,M,J),s(ve,M,J),b(N.children||[],M,ve,G,Z,se,te,re)):le>0&&le&64&&pe&&P.dynamicChildren&&P.dynamicChildren.length===pe.length?(R(P.dynamicChildren,pe,M,G,Z,se,te),(N.key!=null||G&&N===G.subTree)&&cy(P,N,!0)):L(P,N,M,ve,G,Z,se,te,re)},w=(P,N,M,J,G,Z,se,te,re)=>{N.slotScopeIds=te,P==null?N.shapeFlag&512?G.ctx.activate(N,M,J,se,re):ue(N,M,J,G,Z,se,re):Ee(P,N,re)},ue=(P,N,M,J,G,Z,se)=>{const te=P.component=pI(P,J,G);if(sa(P)&&(te.ctx.renderer=W),mI(te,!1,se),te.asyncDep){if(G&&G.registerDep(te,ae,se),!P.el){const re=te.subTree=be(pt);V(null,re,N,M),P.placeholder=re.el}}else ae(te,P,N,M,G,Z,se)},Ee=(P,N,M)=>{const J=N.component=P.component;if(Qb(P,N,M))if(J.asyncDep&&!J.asyncResolved){j(J,N,M);return}else J.next=N,J.update();else N.el=P.el,J.vnode=N},ae=(P,N,M,J,G,Z,se)=>{const te=()=>{if(P.isMounted){let{next:le,bu:pe,u:Se,parent:De,vnode:Be}=P;{const Et=ly(P);if(Et){le&&(le.el=Be.el,j(P,le,se)),Et.asyncDep.then(()=>{P.isUnmounted||te()});return}}let Ue=le,Vt;hr(P,!1),le?(le.el=Be.el,j(P,le,se)):le=Be,pe&&ai(pe),(Vt=le.props&&le.props.onVnodeBeforeUpdate)&&Kt(Vt,De,le,Be),hr(P,!0);const vt=nu(P),zt=P.subTree;P.subTree=vt,y(zt,vt,f(zt.el),B(zt),P,G,Z),le.el=vt.el,Ue===null&&sl(P,vt.el),Se&&At(Se,G),(Vt=le.props&&le.props.onVnodeUpdated)&&At(()=>Kt(Vt,De,le,Be),G)}else{let le;const{el:pe,props:Se}=N,{bm:De,m:Be,parent:Ue,root:Vt,type:vt}=P,zt=ts(N);if(hr(P,!1),De&&ai(De),!zt&&(le=Se&&Se.onVnodeBeforeMount)&&Kt(le,Ue,N),hr(P,!0),pe&&ke){const Et=()=>{P.subTree=nu(P),ke(pe,P.subTree,P,G,null)};zt&&vt.__asyncHydrate?vt.__asyncHydrate(pe,P,Et):Et()}else{Vt.ce&&Vt.ce._def.shadowRoot!==!1&&Vt.ce._injectChildStyle(vt);const Et=P.subTree=nu(P);y(null,Et,M,J,P,G,Z),N.el=Et.el}if(Be&&At(Be,G),!zt&&(le=Se&&Se.onVnodeMounted)){const Et=N;At(()=>Kt(le,Ue,Et),G)}(N.shapeFlag&256||Ue&&ts(Ue.vnode)&&Ue.vnode.shapeFlag&256)&&P.a&&At(P.a,G),P.isMounted=!0,N=M=J=null}};P.scope.on();const re=P.effect=new d_(te);P.scope.off();const ee=P.update=re.run.bind(re),ve=P.job=re.runIfDirty.bind(re);ve.i=P,ve.id=P.uid,re.scheduler=()=>Kh(ve),hr(P,!0),ee()},j=(P,N,M)=>{N.component=P;const J=P.vnode.props;P.vnode=N,P.next=null,Jb(P,N.props,J,M),tI(P,N.children,M),os(),Zd(P),as()},L=(P,N,M,J,G,Z,se,te,re=!1)=>{const ee=P&&P.children,ve=P?P.shapeFlag:0,le=N.children,{patchFlag:pe,shapeFlag:Se}=N;if(pe>0){if(pe&128){H(ee,le,M,J,G,Z,se,te,re);return}else if(pe&256){Y(ee,le,M,J,G,Z,se,te,re);return}}Se&8?(ve&16&&ge(ee,G,Z),le!==ee&&h(M,le)):ve&16?Se&16?H(ee,le,M,J,G,Z,se,te,re):ge(ee,G,Z,!0):(ve&8&&h(M,""),Se&16&&b(le,M,J,G,Z,se,te,re))},Y=(P,N,M,J,G,Z,se,te,re)=>{P=P||ri,N=N||ri;const ee=P.length,ve=N.length,le=Math.min(ee,ve);let pe;for(pe=0;pe<le;pe++){const Se=N[pe]=re?Ps(N[pe]):nn(N[pe]);y(P[pe],Se,M,null,G,Z,se,te,re)}ee>ve?ge(P,G,Z,!0,!1,le):b(N,M,J,G,Z,se,te,re,le)},H=(P,N,M,J,G,Z,se,te,re)=>{let ee=0;const ve=N.length;let le=P.length-1,pe=ve-1;for(;ee<=le&&ee<=pe;){const Se=P[ee],De=N[ee]=re?Ps(N[ee]):nn(N[ee]);if(mn(Se,De))y(Se,De,M,null,G,Z,se,te,re);else break;ee++}for(;ee<=le&&ee<=pe;){const Se=P[le],De=N[pe]=re?Ps(N[pe]):nn(N[pe]);if(mn(Se,De))y(Se,De,M,null,G,Z,se,te,re);else break;le--,pe--}if(ee>le){if(ee<=pe){const Se=pe+1,De=Se<ve?N[Se].el:J;for(;ee<=pe;)y(null,N[ee]=re?Ps(N[ee]):nn(N[ee]),M,De,G,Z,se,te,re),ee++}}else if(ee>pe)for(;ee<=le;)F(P[ee],G,Z,!0),ee++;else{const Se=ee,De=ee,Be=new Map;for(ee=De;ee<=pe;ee++){const lt=N[ee]=re?Ps(N[ee]):nn(N[ee]);lt.key!=null&&Be.set(lt.key,ee)}let Ue,Vt=0;const vt=pe-De+1;let zt=!1,Et=0;const jn=new Array(vt);for(ee=0;ee<vt;ee++)jn[ee]=0;for(ee=Se;ee<=le;ee++){const lt=P[ee];if(Vt>=vt){F(lt,G,Z,!0);continue}let en;if(lt.key!=null)en=Be.get(lt.key);else for(Ue=De;Ue<=pe;Ue++)if(jn[Ue-De]===0&&mn(lt,N[Ue])){en=Ue;break}en===void 0?F(lt,G,Z,!0):(jn[en-De]=ee+1,en>=Et?Et=en:zt=!0,y(lt,N[en],M,null,G,Z,se,te,re),Vt++)}const jr=zt?rI(jn):ri;for(Ue=jr.length-1,ee=vt-1;ee>=0;ee--){const lt=De+ee,en=N[lt],or=N[lt+1],Gi=lt+1<ve?or.el||uy(or):J;jn[ee]===0?y(null,en,M,Gi,G,Z,se,te,re):zt&&(Ue<0||ee!==jr[Ue]?q(en,M,Gi,2):Ue--)}}},q=(P,N,M,J,G=null)=>{const{el:Z,type:se,transition:te,children:re,shapeFlag:ee}=P;if(ee&6){q(P.component.subTree,N,M,J);return}if(ee&128){P.suspense.move(N,M,J);return}if(ee&64){se.move(P,N,M,W);return}if(se===Ze){s(Z,N,M);for(let le=0;le<re.length;le++)q(re[le],N,M,J);s(P.anchor,N,M);return}if(se===bo){_(P,N,M);return}if(J!==2&&ee&1&&te)if(J===0)te.beforeEnter(Z),s(Z,N,M),At(()=>te.enter(Z),G);else{const{leave:le,delayLeave:pe,afterLeave:Se}=te,De=()=>{P.ctx.isUnmounted?r(Z):s(Z,N,M)},Be=()=>{Z._isLeaving&&Z[Kn](!0),le(Z,()=>{De(),Se&&Se()})};pe?pe(Z,De,Be):Be()}else s(Z,N,M)},F=(P,N,M,J=!1,G=!1)=>{const{type:Z,props:se,ref:te,children:re,dynamicChildren:ee,shapeFlag:ve,patchFlag:le,dirs:pe,cacheIndex:Se}=P;if(le===-2&&(G=!1),te!=null&&(os(),li(te,null,M,P,!0),as()),Se!=null&&(N.renderCache[Se]=void 0),ve&256){N.ctx.deactivate(P);return}const De=ve&1&&pe,Be=!ts(P);let Ue;if(Be&&(Ue=se&&se.onVnodeBeforeUnmount)&&Kt(Ue,N,P),ve&6)we(P.component,M,J);else{if(ve&128){P.suspense.unmount(M,J);return}De&&Nn(P,null,N,"beforeUnmount"),ve&64?P.type.remove(P,N,M,W,J):ee&&!ee.hasOnce&&(Z!==Ze||le>0&&le&64)?ge(ee,N,M,!1,!0):(Z===Ze&&le&384||!G&&ve&16)&&ge(re,N,M),J&&ie(P)}(Be&&(Ue=se&&se.onVnodeUnmounted)||De)&&At(()=>{Ue&&Kt(Ue,N,P),De&&Nn(P,null,N,"unmounted")},M)},ie=P=>{const{type:N,el:M,anchor:J,transition:G}=P;if(N===Ze){me(M,J);return}if(N===bo){C(P);return}const Z=()=>{r(M),G&&!G.persisted&&G.afterLeave&&G.afterLeave()};if(P.shapeFlag&1&&G&&!G.persisted){const{leave:se,delayLeave:te}=G,re=()=>se(M,Z);te?te(P.el,Z,re):re()}else Z()},me=(P,N)=>{let M;for(;P!==N;)M=p(P),r(P),P=M;r(N)},we=(P,N,M)=>{const{bum:J,scope:G,job:Z,subTree:se,um:te,m:re,a:ee}=P;yc(re),yc(ee),J&&ai(J),G.stop(),Z&&(Z.flags|=8,F(se,P,N,M)),te&&At(te,N),At(()=>{P.isUnmounted=!0},N)},ge=(P,N,M,J=!1,G=!1,Z=0)=>{for(let se=Z;se<P.length;se++)F(P[se],N,M,J,G)},B=P=>{if(P.shapeFlag&6)return B(P.component.subTree);if(P.shapeFlag&128)return P.suspense.next();const N=p(P.anchor||P.el),M=N&&N[pb];return M?p(M):N};let ne=!1;const z=(P,N,M)=>{let J;P==null?N._vnode&&(F(N._vnode,null,null,!0),J=N._vnode.component):y(N._vnode||null,P,N,null,null,null,M),N._vnode=P,ne||(ne=!0,Zd(J),dc(),ne=!1)},W={p:y,um:F,m:q,r:ie,mt:ue,mc:b,pc:L,pbc:R,n:B,o:t};let he,ke;return e&&([he,ke]=e(W)),{render:z,hydrate:he,createApp:Hb(z,he)}}function su({type:t,props:e},n){return n==="svg"&&t==="foreignObject"||n==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:n}function hr({effect:t,job:e},n){n?(t.flags|=32,e.flags|=4):(t.flags&=-33,e.flags&=-5)}function ay(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function cy(t,e,n=!1){const s=t.children,r=e.children;if(ye(s)&&ye(r))for(let i=0;i<s.length;i++){const o=s[i];let a=r[i];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=r[i]=Ps(r[i]),a.el=o.el),!n&&a.patchFlag!==-2&&cy(o,a)),a.type===Ir&&(a.patchFlag!==-1?a.el=o.el:a.__elIndex=i+(t.type===Ze?1:0)),a.type===pt&&!a.el&&(a.el=o.el)}}function rI(t){const e=t.slice(),n=[0];let s,r,i,o,a;const l=t.length;for(s=0;s<l;s++){const u=t[s];if(u!==0){if(r=n[n.length-1],t[r]<u){e[s]=r,n.push(s);continue}for(i=0,o=n.length-1;i<o;)a=i+o>>1,t[n[a]]<u?i=a+1:o=a;u<t[n[i]]&&(i>0&&(e[s]=n[i-1]),n[i]=s)}}for(i=n.length,o=n[i-1];i-- >0;)n[i]=o,o=e[o];return n}function ly(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:ly(e)}function yc(t){if(t)for(let e=0;e<t.length;e++)t[e].flags|=8}function uy(t){if(t.placeholder)return t.placeholder;const e=t.component;return e?uy(e.subTree):null}const vc=t=>t.__isSuspense;let Hu=0;const iI={name:"Suspense",__isSuspense:!0,process(t,e,n,s,r,i,o,a,l,u){if(t==null)oI(e,n,s,r,i,o,a,l,u);else{if(i&&i.deps>0&&!t.suspense.isInFallback){e.suspense=t.suspense,e.suspense.vnode=e,e.el=t.el;return}aI(t,e,n,s,r,o,a,l,u)}},hydrate:cI,normalize:lI},tf=iI;function Uo(t,e){const n=t.props&&t.props[e];Ae(n)&&n()}function oI(t,e,n,s,r,i,o,a,l){const{p:u,o:{createElement:h}}=l,f=h("div"),p=t.suspense=hy(t,r,s,e,f,n,i,o,a,l);u(null,p.pendingBranch=t.ssContent,f,null,s,p,i,o),p.deps>0?(Uo(t,"onPending"),Uo(t,"onFallback"),u(null,t.ssFallback,e,n,s,null,i,o),ui(p,t.ssFallback)):p.resolve(!1,!0)}function aI(t,e,n,s,r,i,o,a,{p:l,um:u,o:{createElement:h}}){const f=e.suspense=t.suspense;f.vnode=e,e.el=t.el;const p=e.ssContent,g=e.ssFallback,{activeBranch:I,pendingBranch:y,isInFallback:D,isHydrating:V}=f;if(y)f.pendingBranch=p,mn(y,p)?(l(y,p,f.hiddenContainer,null,r,f,i,o,a),f.deps<=0?f.resolve():D&&(V||(l(I,g,n,s,r,null,i,o,a),ui(f,g)))):(f.pendingId=Hu++,V?(f.isHydrating=!1,f.activeBranch=y):u(y,r,f),f.deps=0,f.effects.length=0,f.hiddenContainer=h("div"),D?(l(null,p,f.hiddenContainer,null,r,f,i,o,a),f.deps<=0?f.resolve():(l(I,g,n,s,r,null,i,o,a),ui(f,g))):I&&mn(I,p)?(l(I,p,n,s,r,f,i,o,a),f.resolve(!0)):(l(null,p,f.hiddenContainer,null,r,f,i,o,a),f.deps<=0&&f.resolve()));else if(I&&mn(I,p))l(I,p,n,s,r,f,i,o,a),ui(f,p);else if(Uo(e,"onPending"),f.pendingBranch=p,p.shapeFlag&512?f.pendingId=p.component.suspenseId:f.pendingId=Hu++,l(null,p,f.hiddenContainer,null,r,f,i,o,a),f.deps<=0)f.resolve();else{const{timeout:k,pendingId:_}=f;k>0?setTimeout(()=>{f.pendingId===_&&f.fallback(g)},k):k===0&&f.fallback(g)}}function hy(t,e,n,s,r,i,o,a,l,u,h=!1){const{p:f,m:p,um:g,n:I,o:{parentNode:y,remove:D}}=u;let V;const k=uI(t);k&&e&&e.pendingBranch&&(V=e.pendingId,e.deps++);const _=t.props?c_(t.props.timeout):void 0,C=i,O={vnode:t,parent:e,parentComponent:n,namespace:o,container:s,hiddenContainer:r,deps:0,pendingId:Hu++,timeout:typeof _=="number"?_:-1,activeBranch:null,pendingBranch:null,isInFallback:!h,isHydrating:h,isUnmounted:!1,effects:[],resolve(U=!1,E=!1){const{vnode:b,activeBranch:v,pendingBranch:R,pendingId:S,effects:A,parentComponent:w,container:ue,isInFallback:Ee}=O;let ae=!1;O.isHydrating?O.isHydrating=!1:U||(ae=v&&R.transition&&R.transition.mode==="out-in",ae&&(v.transition.afterLeave=()=>{S===O.pendingId&&(p(R,ue,i===C?I(v):i,0),Mu(A),Ee&&b.ssFallback&&(b.ssFallback.el=null))}),v&&(y(v.el)===ue&&(i=I(v)),g(v,w,O,!0),!ae&&Ee&&b.ssFallback&&At(()=>b.ssFallback.el=null,O)),ae||p(R,ue,i,0)),ui(O,R),O.pendingBranch=null,O.isInFallback=!1;let j=O.parent,L=!1;for(;j;){if(j.pendingBranch){j.effects.push(...A),L=!0;break}j=j.parent}!L&&!ae&&Mu(A),O.effects=[],k&&e&&e.pendingBranch&&V===e.pendingId&&(e.deps--,e.deps===0&&!E&&e.resolve()),Uo(b,"onResolve")},fallback(U){if(!O.pendingBranch)return;const{vnode:E,activeBranch:b,parentComponent:v,container:R,namespace:S}=O;Uo(E,"onFallback");const A=I(b),w=()=>{O.isInFallback&&(f(null,U,R,A,v,null,S,a,l),ui(O,U))},ue=U.transition&&U.transition.mode==="out-in";ue&&(b.transition.afterLeave=w),O.isInFallback=!0,g(b,v,null,!0),ue||w()},move(U,E,b){O.activeBranch&&p(O.activeBranch,U,E,b),O.container=U},next(){return O.activeBranch&&I(O.activeBranch)},registerDep(U,E,b){const v=!!O.pendingBranch;v&&O.deps++;const R=U.vnode.el;U.asyncDep.catch(S=>{Li(S,U,0)}).then(S=>{if(U.isUnmounted||O.isUnmounted||O.pendingId!==U.suspenseId)return;U.asyncResolved=!0;const{vnode:A}=U;qu(U,S),R&&(A.el=R);const w=!R&&U.subTree.el;E(U,A,y(R||U.subTree.el),R?null:I(U.subTree),O,o,b),w&&(A.placeholder=null,D(w)),sl(U,A.el),v&&--O.deps===0&&O.resolve()})},unmount(U,E){O.isUnmounted=!0,O.activeBranch&&g(O.activeBranch,n,U,E),O.pendingBranch&&g(O.pendingBranch,n,U,E)}};return O}function cI(t,e,n,s,r,i,o,a,l){const u=e.suspense=hy(e,s,n,t.parentNode,document.createElement("div"),null,r,i,o,a,!0),h=l(t,u.pendingBranch=e.ssContent,n,u,i,o);return u.deps===0&&u.resolve(!1,!0),h}function lI(t){const{shapeFlag:e,children:n}=t,s=e&32;t.ssContent=hp(s?n.default:n),t.ssFallback=s?hp(n.fallback):be(pt)}function hp(t){let e;if(Ae(t)){const n=vi&&t._c;n&&(t._d=!1,Te()),t=t(),n&&(t._d=!0,e=Zt,dy())}return ye(t)&&(t=Gb(t)),t=nn(t),e&&!t.dynamicChildren&&(t.dynamicChildren=e.filter(n=>n!==t)),t}function fy(t,e){e&&e.pendingBranch?ye(t)?e.effects.push(...t):e.effects.push(t):Mu(t)}function ui(t,e){t.activeBranch=e;const{vnode:n,parentComponent:s}=t;let r=e.el;for(;!r&&e.component;)e=e.component.subTree,r=e.el;n.el=r,s&&s.subTree===n&&(s.vnode.el=r,sl(s,r))}function uI(t){const e=t.props&&t.props.suspensible;return e!=null&&e!==!1}const Ze=Symbol.for("v-fgt"),Ir=Symbol.for("v-txt"),pt=Symbol.for("v-cmt"),bo=Symbol.for("v-stc"),Io=[];let Zt=null;function Te(t=!1){Io.push(Zt=t?null:[])}function dy(){Io.pop(),Zt=Io[Io.length-1]||null}let vi=1;function Ec(t,e=!1){vi+=t,t<0&&Zt&&e&&(Zt.hasOnce=!0)}function py(t){return t.dynamicChildren=vi>0?Zt||ri:null,dy(),vi>0&&Zt&&Zt.push(t),t}function Oe(t,e,n,s,r,i){return py(K(t,e,n,s,r,i,!0))}function Yt(t,e,n,s,r){return py(be(t,e,n,s,r,!0))}function Sr(t){return t?t.__v_isVNode===!0:!1}function mn(t,e){return t.type===e.type&&t.key===e.key}const my=({key:t})=>t??null,Ya=({ref:t,ref_key:e,ref_for:n})=>(typeof t=="number"&&(t=""+t),t!=null?et(t)||_t(t)||Ae(t)?{i:Dt,r:t,k:e,f:!!n}:t:null);function K(t,e=null,n=null,s=0,r=null,i=t===Ze?0:1,o=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&my(e),ref:e&&Ya(e),scopeId:D_,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:s,dynamicProps:r,dynamicChildren:null,appContext:null,ctx:Dt};return a?(nf(l,n),i&128&&t.normalize(l)):n&&(l.shapeFlag|=et(n)?8:16),vi>0&&!o&&Zt&&(l.patchFlag>0||i&6)&&l.patchFlag!==32&&Zt.push(l),l}const be=hI;function hI(t,e=null,n=null,s=0,r=null,i=!1){if((!t||t===G_)&&(t=pt),Sr(t)){const a=fn(t,e,!0);return n&&nf(a,n),vi>0&&!i&&Zt&&(a.shapeFlag&6?Zt[Zt.indexOf(t)]=a:Zt.push(a)),a.patchFlag=-2,a}if(vI(t)&&(t=t.__vccOpts),e){e=gy(e);let{class:a,style:l}=e;a&&!et(a)&&(e.class=Wt(a)),Ge(l)&&(Zc(l)&&!ye(l)&&(l=Ct({},l)),e.style=Jc(l))}const o=et(t)?1:vc(t)?128:V_(t)?64:Ge(t)?4:Ae(t)?2:0;return K(t,e,n,s,r,o,i,!0)}function gy(t){return t?Zc(t)||ey(t)?Ct({},t):t:null}function fn(t,e,n=!1,s=!1){const{props:r,ref:i,patchFlag:o,children:a,transition:l}=t,u=e?yy(r||{},e):r,h={__v_isVNode:!0,__v_skip:!0,type:t.type,props:u,key:u&&my(u),ref:e&&e.ref?n&&i?ye(i)?i.concat(Ya(e)):[i,Ya(e)]:Ya(e):i,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:a,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==Ze?o===-1?16:o|16:o,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:l,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&fn(t.ssContent),ssFallback:t.ssFallback&&fn(t.ssFallback),placeholder:t.placeholder,el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return l&&s&&yi(h,l.clone(h)),h}function rt(t=" ",e=0){return be(Ir,null,t,e)}function _y(t,e){const n=be(bo,null,t);return n.staticCount=e,n}function Qs(t="",e=!1){return e?(Te(),Yt(pt,null,t)):be(pt,null,t)}function nn(t){return t==null||typeof t=="boolean"?be(pt):ye(t)?be(Ze,null,t.slice()):Sr(t)?Ps(t):be(Ir,null,String(t))}function Ps(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:fn(t)}function nf(t,e){let n=0;const{shapeFlag:s}=t;if(e==null)e=null;else if(ye(e))n=16;else if(typeof e=="object")if(s&65){const r=e.default;r&&(r._c&&(r._d=!1),nf(t,r()),r._c&&(r._d=!0));return}else{n=32;const r=e._;!r&&!ey(e)?e._ctx=Dt:r===3&&Dt&&(Dt.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else Ae(e)?(e={default:e,_ctx:Dt},n=32):(e=String(e),s&64?(n=16,e=[rt(e)]):n=8);t.children=e,t.shapeFlag|=n}function yy(...t){const e={};for(let n=0;n<t.length;n++){const s=t[n];for(const r in s)if(r==="class")e.class!==s.class&&(e.class=Wt([e.class,s.class]));else if(r==="style")e.style=Jc([e.style,s.style]);else if(ea(r)){const i=e[r],o=s[r];o&&i!==o&&!(ye(i)&&i.includes(o))&&(e[r]=i?[].concat(i,o):o)}else r!==""&&(e[r]=s[r])}return e}function Kt(t,e,n,s=null){bn(t,e,7,[n,s])}const fI=Y_();let dI=0;function pI(t,e,n){const s=t.type,r=(e?e.appContext:t.appContext)||fI,i={uid:dI++,vnode:t,type:s,parent:e,appContext:r,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new f_(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(r.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:ny(s,r),emitsOptions:J_(s,r),emit:null,emitted:null,propsDefaults:Ke,inheritAttrs:s.inheritAttrs,ctx:Ke,data:Ke,props:Ke,attrs:Ke,slots:Ke,refs:Ke,setupState:Ke,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=e?e.root:i,i.emit=qb.bind(null,i),t.ce&&t.ce(i),i}let Nt=null;const xr=()=>Nt||Dt;let Tc,ju;{const t=Yc(),e=(n,s)=>{let r;return(r=t[n])||(r=t[n]=[]),r.push(s),i=>{r.length>1?r.forEach(o=>o(i)):r[0](i)}};Tc=e("__VUE_INSTANCE_SETTERS__",n=>Nt=n),ju=e("__VUE_SSR_SETTERS__",n=>Ei=n)}const ia=t=>{const e=Nt;return Tc(t),t.scope.on(),()=>{t.scope.off(),Tc(e)}},fp=()=>{Nt&&Nt.scope.off(),Tc(null)};function vy(t){return t.vnode.shapeFlag&4}let Ei=!1;function mI(t,e=!1,n=!1){e&&ju(e);const{props:s,children:r}=t.vnode,i=vy(t);Yb(t,s,i,e),eI(t,r,n||e);const o=i?gI(t,e):void 0;return e&&ju(!1),o}function gI(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,Lb);const{setup:s}=n;if(s){os();const r=t.setupContext=s.length>1?yI(t):null,i=ia(t),o=na(s,t,0,[t.props,r]),a=Uh(o);if(as(),i(),(a||t.sp)&&!ts(t)&&Yh(t),a){if(o.then(fp,fp),e)return o.then(l=>{qu(t,l)}).catch(l=>{Li(l,t,0)});t.asyncDep=o}else qu(t,o)}else Ey(t)}function qu(t,e,n){Ae(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:Ge(e)&&(t.setupState=C_(e)),Ey(t)}function Ey(t,e,n){const s=t.type;t.render||(t.render=s.render||Vn);{const r=ia(t);os();try{Mb(t)}finally{as(),r()}}}const _I={get(t,e){return Ft(t,"get",""),t[e]}};function yI(t){const e=n=>{t.exposed=n||{}};return{attrs:new Proxy(t.attrs,_I),slots:t.slots,emit:t.emit,expose:e}}function rl(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(C_(Yw(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in wo)return wo[n](t)},has(e,n){return n in e||n in wo}})):t.proxy}function Wu(t,e=!0){return Ae(t)?t.displayName||t.name:t.name||e&&t.__name}function vI(t){return Ae(t)&&"__vccOpts"in t}const je=(t,e)=>ib(t,e,Ei);function it(t,e,n){try{Ec(-1);const s=arguments.length;return s===2?Ge(e)&&!ye(e)?Sr(e)?be(t,null,[e]):be(t,e):be(t,null,e):(s>3?n=Array.prototype.slice.call(arguments,2):s===3&&Sr(n)&&(n=[n]),be(t,e,n))}finally{Ec(1)}}const EI="3.5.26";let Gu;const dp=typeof window<"u"&&window.trustedTypes;if(dp)try{Gu=dp.createPolicy("vue",{createHTML:t=>t})}catch{}const Ty=Gu?t=>Gu.createHTML(t):t=>t,TI="http://www.w3.org/2000/svg",wI="http://www.w3.org/1998/Math/MathML",zn=typeof document<"u"?document:null,pp=zn&&zn.createElement("template"),bI={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,s)=>{const r=e==="svg"?zn.createElementNS(TI,t):e==="mathml"?zn.createElementNS(wI,t):n?zn.createElement(t,{is:n}):zn.createElement(t);return t==="select"&&s&&s.multiple!=null&&r.setAttribute("multiple",s.multiple),r},createText:t=>zn.createTextNode(t),createComment:t=>zn.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>zn.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,n,s,r,i){const o=n?n.previousSibling:e.lastChild;if(r&&(r===i||r.nextSibling))for(;e.insertBefore(r.cloneNode(!0),n),!(r===i||!(r=r.nextSibling)););else{pp.innerHTML=Ty(s==="svg"?`<svg>${t}</svg>`:s==="mathml"?`<math>${t}</math>`:t);const a=pp.content;if(s==="svg"||s==="mathml"){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}e.insertBefore(a,n)}return[o?o.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}},ws="transition",co="animation",Bo=Symbol("_vtc"),wy={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},II=Ct({},L_,wy),AI=t=>(t.displayName="Transition",t.props=II,t),oa=AI((t,{slots:e})=>it(_b,RI(t),e)),fr=(t,e=[])=>{ye(t)?t.forEach(n=>n(...e)):t&&t(...e)},mp=t=>t?ye(t)?t.some(e=>e.length>1):t.length>1:!1;function RI(t){const e={};for(const A in t)A in wy||(e[A]=t[A]);if(t.css===!1)return e;const{name:n="v",type:s,duration:r,enterFromClass:i=`${n}-enter-from`,enterActiveClass:o=`${n}-enter-active`,enterToClass:a=`${n}-enter-to`,appearFromClass:l=i,appearActiveClass:u=o,appearToClass:h=a,leaveFromClass:f=`${n}-leave-from`,leaveActiveClass:p=`${n}-leave-active`,leaveToClass:g=`${n}-leave-to`}=t,I=SI(r),y=I&&I[0],D=I&&I[1],{onBeforeEnter:V,onEnter:k,onEnterCancelled:_,onLeave:C,onLeaveCancelled:O,onBeforeAppear:U=V,onAppear:E=k,onAppearCancelled:b=_}=e,v=(A,w,ue,Ee)=>{A._enterCancelled=Ee,dr(A,w?h:a),dr(A,w?u:o),ue&&ue()},R=(A,w)=>{A._isLeaving=!1,dr(A,f),dr(A,g),dr(A,p),w&&w()},S=A=>(w,ue)=>{const Ee=A?E:k,ae=()=>v(w,A,ue);fr(Ee,[w,ae]),gp(()=>{dr(w,A?l:i),Wn(w,A?h:a),mp(Ee)||_p(w,s,y,ae)})};return Ct(e,{onBeforeEnter(A){fr(V,[A]),Wn(A,i),Wn(A,o)},onBeforeAppear(A){fr(U,[A]),Wn(A,l),Wn(A,u)},onEnter:S(!1),onAppear:S(!0),onLeave(A,w){A._isLeaving=!0;const ue=()=>R(A,w);Wn(A,f),A._enterCancelled?(Wn(A,p),Ep(A)):(Ep(A),Wn(A,p)),gp(()=>{A._isLeaving&&(dr(A,f),Wn(A,g),mp(C)||_p(A,s,D,ue))}),fr(C,[A,ue])},onEnterCancelled(A){v(A,!1,void 0,!0),fr(_,[A])},onAppearCancelled(A){v(A,!0,void 0,!0),fr(b,[A])},onLeaveCancelled(A){R(A),fr(O,[A])}})}function SI(t){if(t==null)return null;if(Ge(t))return[ru(t.enter),ru(t.leave)];{const e=ru(t);return[e,e]}}function ru(t){return c_(t)}function Wn(t,e){e.split(/\s+/).forEach(n=>n&&t.classList.add(n)),(t[Bo]||(t[Bo]=new Set)).add(e)}function dr(t,e){e.split(/\s+/).forEach(s=>s&&t.classList.remove(s));const n=t[Bo];n&&(n.delete(e),n.size||(t[Bo]=void 0))}function gp(t){requestAnimationFrame(()=>{requestAnimationFrame(t)})}let CI=0;function _p(t,e,n,s){const r=t._endId=++CI,i=()=>{r===t._endId&&s()};if(n!=null)return setTimeout(i,n);const{type:o,timeout:a,propCount:l}=PI(t,e);if(!o)return s();const u=o+"end";let h=0;const f=()=>{t.removeEventListener(u,p),i()},p=g=>{g.target===t&&++h>=l&&f()};setTimeout(()=>{h<l&&f()},a+1),t.addEventListener(u,p)}function PI(t,e){const n=window.getComputedStyle(t),s=I=>(n[I]||"").split(", "),r=s(`${ws}Delay`),i=s(`${ws}Duration`),o=yp(r,i),a=s(`${co}Delay`),l=s(`${co}Duration`),u=yp(a,l);let h=null,f=0,p=0;e===ws?o>0&&(h=ws,f=o,p=i.length):e===co?u>0&&(h=co,f=u,p=l.length):(f=Math.max(o,u),h=f>0?o>u?ws:co:null,p=h?h===ws?i.length:l.length:0);const g=h===ws&&/\b(?:transform|all)(?:,|$)/.test(s(`${ws}Property`).toString());return{type:h,timeout:f,propCount:p,hasTransform:g}}function yp(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max(...e.map((n,s)=>vp(n)+vp(t[s])))}function vp(t){return t==="auto"?0:Number(t.slice(0,-1).replace(",","."))*1e3}function Ep(t){return(t?t.ownerDocument:document).body.offsetHeight}function kI(t,e,n){const s=t[Bo];s&&(e=(e?[e,...s]:[...s]).join(" ")),e==null?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}const Tp=Symbol("_vod"),NI=Symbol("_vsh"),DI=Symbol(""),OI=/(?:^|;)\s*display\s*:/;function VI(t,e,n){const s=t.style,r=et(n);let i=!1;if(n&&!r){if(e)if(et(e))for(const o of e.split(";")){const a=o.slice(0,o.indexOf(":")).trim();n[a]==null&&Ja(s,a,"")}else for(const o in e)n[o]==null&&Ja(s,o,"");for(const o in n)o==="display"&&(i=!0),Ja(s,o,n[o])}else if(r){if(e!==n){const o=s[DI];o&&(n+=";"+o),s.cssText=n,i=OI.test(n)}}else e&&t.removeAttribute("style");Tp in t&&(t[Tp]=i?s.display:"",t[NI]&&(s.display="none"))}const wp=/\s*!important$/;function Ja(t,e,n){if(ye(n))n.forEach(s=>Ja(t,e,s));else if(n==null&&(n=""),e.startsWith("--"))t.setProperty(e,n);else{const s=LI(t,e);wp.test(n)?t.setProperty(Mr(s),n.replace(wp,""),"important"):t[s]=n}}const bp=["Webkit","Moz","ms"],iu={};function LI(t,e){const n=iu[e];if(n)return n;let s=dn(e);if(s!=="filter"&&s in t)return iu[e]=s;s=Kc(s);for(let r=0;r<bp.length;r++){const i=bp[r]+s;if(i in t)return iu[e]=i}return e}const Ip="http://www.w3.org/1999/xlink";function Ap(t,e,n,s,r,i=Sw(e)){s&&e.startsWith("xlink:")?n==null?t.removeAttributeNS(Ip,e.slice(6,e.length)):t.setAttributeNS(Ip,e,n):n==null||i&&!l_(n)?t.removeAttribute(e):t.setAttribute(e,i?"":Tn(n)?String(n):n)}function Rp(t,e,n,s,r){if(e==="innerHTML"||e==="textContent"){n!=null&&(t[e]=e==="innerHTML"?Ty(n):n);return}const i=t.tagName;if(e==="value"&&i!=="PROGRESS"&&!i.includes("-")){const a=i==="OPTION"?t.getAttribute("value")||"":t.value,l=n==null?t.type==="checkbox"?"on":"":String(n);(a!==l||!("_value"in t))&&(t.value=l),n==null&&t.removeAttribute(e),t._value=n;return}let o=!1;if(n===""||n==null){const a=typeof t[e];a==="boolean"?n=l_(n):n==null&&a==="string"?(n="",o=!0):a==="number"&&(n=0,o=!0)}try{t[e]=n}catch{}o&&t.removeAttribute(r||e)}function Ns(t,e,n,s){t.addEventListener(e,n,s)}function MI(t,e,n,s){t.removeEventListener(e,n,s)}const Sp=Symbol("_vei");function xI(t,e,n,s,r=null){const i=t[Sp]||(t[Sp]={}),o=i[e];if(s&&o)o.value=s;else{const[a,l]=FI(e);if(s){const u=i[e]=$I(s,r);Ns(t,a,u,l)}else o&&(MI(t,a,o,l),i[e]=void 0)}}const Cp=/(?:Once|Passive|Capture)$/;function FI(t){let e;if(Cp.test(t)){e={};let s;for(;s=t.match(Cp);)t=t.slice(0,t.length-s[0].length),e[s[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):Mr(t.slice(2)),e]}let ou=0;const UI=Promise.resolve(),BI=()=>ou||(UI.then(()=>ou=0),ou=Date.now());function $I(t,e){const n=s=>{if(!s._vts)s._vts=Date.now();else if(s._vts<=n.attached)return;bn(HI(s,n.value),e,5,[s])};return n.value=t,n.attached=BI(),n}function HI(t,e){if(ye(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(s=>r=>!r._stopped&&s&&s(r))}else return e}const Pp=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,jI=(t,e,n,s,r,i)=>{const o=r==="svg";e==="class"?kI(t,s,o):e==="style"?VI(t,n,s):ea(e)?xh(e)||xI(t,e,n,s,i):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):qI(t,e,s,o))?(Rp(t,e,s),!t.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&Ap(t,e,s,o,i,e!=="value")):t._isVueCE&&(/[A-Z]/.test(e)||!et(s))?Rp(t,dn(e),s,i,e):(e==="true-value"?t._trueValue=s:e==="false-value"&&(t._falseValue=s),Ap(t,e,s,o))};function qI(t,e,n,s){if(s)return!!(e==="innerHTML"||e==="textContent"||e in t&&Pp(e)&&Ae(n));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="autocorrect"||e==="sandbox"&&t.tagName==="IFRAME"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const r=t.tagName;if(r==="IMG"||r==="VIDEO"||r==="CANVAS"||r==="SOURCE")return!1}return Pp(e)&&et(n)?!1:e in t}const Ti=t=>{const e=t.props["onUpdate:modelValue"]||!1;return ye(e)?n=>ai(e,n):e};function WI(t){t.target.composing=!0}function kp(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const ns=Symbol("_assign");function Np(t,e,n){return e&&(t=t.trim()),n&&(t=Qc(t)),t}const Ba={created(t,{modifiers:{lazy:e,trim:n,number:s}},r){t[ns]=Ti(r);const i=s||r.props&&r.props.type==="number";Ns(t,e?"change":"input",o=>{o.target.composing||t[ns](Np(t.value,n,i))}),(n||i)&&Ns(t,"change",()=>{t.value=Np(t.value,n,i)}),e||(Ns(t,"compositionstart",WI),Ns(t,"compositionend",kp),Ns(t,"change",kp))},mounted(t,{value:e}){t.value=e??""},beforeUpdate(t,{value:e,oldValue:n,modifiers:{lazy:s,trim:r,number:i}},o){if(t[ns]=Ti(o),t.composing)return;const a=(i||t.type==="number")&&!/^0\d/.test(t.value)?Qc(t.value):t.value,l=e??"";a!==l&&(document.activeElement===t&&t.type!=="range"&&(s&&e===n||r&&t.value.trim()===l)||(t.value=l))}},bM={deep:!0,created(t,e,n){t[ns]=Ti(n),Ns(t,"change",()=>{const s=t._modelValue,r=$o(t),i=t.checked,o=t[ns];if(ye(s)){const a=Bh(s,r),l=a!==-1;if(i&&!l)o(s.concat(r));else if(!i&&l){const u=[...s];u.splice(a,1),o(u)}}else if(Oi(s)){const a=new Set(s);i?a.add(r):a.delete(r),o(a)}else o(by(t,i))})},mounted:Dp,beforeUpdate(t,e,n){t[ns]=Ti(n),Dp(t,e,n)}};function Dp(t,{value:e,oldValue:n},s){t._modelValue=e;let r;if(ye(e))r=Bh(e,s.props.value)>-1;else if(Oi(e))r=e.has(s.props.value);else{if(e===n)return;r=ta(e,by(t,!0))}t.checked!==r&&(t.checked=r)}const IM={deep:!0,created(t,{value:e,modifiers:{number:n}},s){const r=Oi(e);Ns(t,"change",()=>{const i=Array.prototype.filter.call(t.options,o=>o.selected).map(o=>n?Qc($o(o)):$o(o));t[ns](t.multiple?r?new Set(i):i:i[0]),t._assigning=!0,zs(()=>{t._assigning=!1})}),t[ns]=Ti(s)},mounted(t,{value:e}){Op(t,e)},beforeUpdate(t,e,n){t[ns]=Ti(n)},updated(t,{value:e}){t._assigning||Op(t,e)}};function Op(t,e){const n=t.multiple,s=ye(e);if(!(n&&!s&&!Oi(e))){for(let r=0,i=t.options.length;r<i;r++){const o=t.options[r],a=$o(o);if(n)if(s){const l=typeof a;l==="string"||l==="number"?o.selected=e.some(u=>String(u)===String(a)):o.selected=Bh(e,a)>-1}else o.selected=e.has(a);else if(ta($o(o),e)){t.selectedIndex!==r&&(t.selectedIndex=r);return}}!n&&t.selectedIndex!==-1&&(t.selectedIndex=-1)}}function $o(t){return"_value"in t?t._value:t.value}function by(t,e){const n=e?"_trueValue":"_falseValue";return n in t?t[n]:e}const GI=["ctrl","shift","alt","meta"],zI={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>GI.some(n=>t[`${n}Key`]&&!e.includes(n))},il=(t,e)=>{const n=t._withMods||(t._withMods={}),s=e.join(".");return n[s]||(n[s]=((r,...i)=>{for(let o=0;o<e.length;o++){const a=zI[e[o]];if(a&&a(r,e))return}return t(r,...i)}))},Iy=Ct({patchProp:jI},bI);let Ao,Vp=!1;function KI(){return Ao||(Ao=nI(Iy))}function QI(){return Ao=Vp?Ao:sI(Iy),Vp=!0,Ao}const YI=((...t)=>{const e=KI().createApp(...t),{mount:n}=e;return e.mount=s=>{const r=Ry(s);if(!r)return;const i=e._component;!Ae(i)&&!i.render&&!i.template&&(i.template=r.innerHTML),r.nodeType===1&&(r.textContent="");const o=n(r,!1,Ay(r));return r instanceof Element&&(r.removeAttribute("v-cloak"),r.setAttribute("data-v-app","")),o},e}),JI=((...t)=>{const e=QI().createApp(...t),{mount:n}=e;return e.mount=s=>{const r=Ry(s);if(r)return n(r,!0,Ay(r))},e});function Ay(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function Ry(t){return et(t)?document.querySelector(t):t}const XI=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,ZI=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,eA=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/;function tA(t,e){if(t==="__proto__"||t==="constructor"&&e&&typeof e=="object"&&"prototype"in e){nA(t);return}return e}function nA(t){console.warn(`[destr] Dropping "${t}" key to prevent prototype pollution.`)}function wc(t,e={}){if(typeof t!="string")return t;if(t[0]==='"'&&t[t.length-1]==='"'&&t.indexOf("\\")===-1)return t.slice(1,-1);const n=t.trim();if(n.length<=9)switch(n.toLowerCase()){case"true":return!0;case"false":return!1;case"undefined":return;case"null":return null;case"nan":return Number.NaN;case"infinity":return Number.POSITIVE_INFINITY;case"-infinity":return Number.NEGATIVE_INFINITY}if(!eA.test(t)){if(e.strict)throw new SyntaxError("[destr] Invalid JSON");return t}try{if(XI.test(t)||ZI.test(t)){if(e.strict)throw new Error("[destr] Possible prototype pollution");return JSON.parse(t,tA)}return JSON.parse(t)}catch(s){if(e.strict)throw s;return t}}const sA=/#/g,rA=/&/g,iA=/\//g,oA=/=/g,sf=/\+/g,aA=/%5e/gi,cA=/%60/gi,lA=/%7c/gi,uA=/%20/gi;function hA(t){return encodeURI(""+t).replace(lA,"|")}function zu(t){return hA(typeof t=="string"?t:JSON.stringify(t)).replace(sf,"%2B").replace(uA,"+").replace(sA,"%23").replace(rA,"%26").replace(cA,"`").replace(aA,"^").replace(iA,"%2F")}function au(t){return zu(t).replace(oA,"%3D")}function bc(t=""){try{return decodeURIComponent(""+t)}catch{return""+t}}function fA(t){return bc(t.replace(sf," "))}function dA(t){return bc(t.replace(sf," "))}function Sy(t=""){const e=Object.create(null);t[0]==="?"&&(t=t.slice(1));for(const n of t.split("&")){const s=n.match(/([^=]+)=?(.*)/)||[];if(s.length<2)continue;const r=fA(s[1]);if(r==="__proto__"||r==="constructor")continue;const i=dA(s[2]||"");e[r]===void 0?e[r]=i:Array.isArray(e[r])?e[r].push(i):e[r]=[e[r],i]}return e}function pA(t,e){return(typeof e=="number"||typeof e=="boolean")&&(e=String(e)),e?Array.isArray(e)?e.map(n=>`${au(t)}=${zu(n)}`).join("&"):`${au(t)}=${zu(e)}`:au(t)}function mA(t){return Object.keys(t).filter(e=>t[e]!==void 0).map(e=>pA(e,t[e])).filter(Boolean).join("&")}const gA=/^[\s\w\0+.-]{2,}:([/\\]{1,2})/,_A=/^[\s\w\0+.-]{2,}:([/\\]{2})?/,yA=/^([/\\]\s*){2,}[^/\\]/,vA=/^[\s\0]*(blob|data|javascript|vbscript):$/i,EA=/\/$|\/\?|\/#/,TA=/^\.?\//;function Fr(t,e={}){return typeof e=="boolean"&&(e={acceptRelative:e}),e.strict?gA.test(t):_A.test(t)||(e.acceptRelative?yA.test(t):!1)}function wA(t){return!!t&&vA.test(t)}function Ku(t="",e){return e?EA.test(t):t.endsWith("/")}function Ic(t="",e){if(!e)return(Ku(t)?t.slice(0,-1):t)||"/";if(!Ku(t,!0))return t||"/";let n=t,s="";const r=t.indexOf("#");r!==-1&&(n=t.slice(0,r),s=t.slice(r));const[i,...o]=n.split("?");return((i.endsWith("/")?i.slice(0,-1):i)||"/")+(o.length>0?`?${o.join("?")}`:"")+s}function bA(t="",e){if(!e)return t.endsWith("/")?t:t+"/";if(Ku(t,!0))return t||"/";let n=t,s="";const r=t.indexOf("#");if(r!==-1&&(n=t.slice(0,r),s=t.slice(r),!n))return s;const[i,...o]=n.split("?");return i+"/"+(o.length>0?`?${o.join("?")}`:"")+s}function IA(t,e){if(Py(e)||Fr(t))return t;const n=Ic(e);return t.startsWith(n)?t:rf(n,t)}function Lp(t,e){if(Py(e))return t;const n=Ic(e);if(!t.startsWith(n))return t;const s=t.slice(n.length);return s[0]==="/"?s:"/"+s}function Cy(t,e){const n=Dy(t),s={...Sy(n.search),...e};return n.search=mA(s),SA(n)}function Py(t){return!t||t==="/"}function AA(t){return t&&t!=="/"}function rf(t,...e){let n=t||"";for(const s of e.filter(r=>AA(r)))if(n){const r=s.replace(TA,"");n=bA(n)+r}else n=s;return n}function ky(...t){const e=/\/(?!\/)/,n=t.filter(Boolean),s=[];let r=0;for(const o of n)if(!(!o||o==="/")){for(const[a,l]of o.split(e).entries())if(!(!l||l===".")){if(l===".."){if(s.length===1&&Fr(s[0]))continue;s.pop(),r--;continue}if(a===1&&s[s.length-1]?.endsWith(":/")){s[s.length-1]+="/"+l;continue}s.push(l),r++}}let i=s.join("/");return r>=0?n[0]?.startsWith("/")&&!i.startsWith("/")?i="/"+i:n[0]?.startsWith("./")&&!i.startsWith("./")&&(i="./"+i):i="../".repeat(-1*r)+i,n[n.length-1]?.endsWith("/")&&!i.endsWith("/")&&(i+="/"),i}function RA(t,e){return bc(Ic(t))===bc(Ic(e))}const Ny=Symbol.for("ufo:protocolRelative");function Dy(t="",e){const n=t.match(/^[\s\0]*(blob:|data:|javascript:|vbscript:)(.*)/i);if(n){const[,f,p=""]=n;return{protocol:f.toLowerCase(),pathname:p,href:f+p,auth:"",host:"",search:"",hash:""}}if(!Fr(t,{acceptRelative:!0}))return Mp(t);const[,s="",r,i=""]=t.replace(/\\/g,"/").match(/^[\s\0]*([\w+.-]{2,}:)?\/\/([^/@]+@)?(.*)/)||[];let[,o="",a=""]=i.match(/([^#/?]*)(.*)?/)||[];s==="file:"&&(a=a.replace(/\/(?=[A-Za-z]:)/,""));const{pathname:l,search:u,hash:h}=Mp(a);return{protocol:s.toLowerCase(),auth:r?r.slice(0,Math.max(0,r.length-1)):"",host:o,pathname:l,search:u,hash:h,[Ny]:!s}}function Mp(t=""){const[e="",n="",s=""]=(t.match(/([^#?]*)(\?[^#]*)?(#.*)?/)||[]).splice(1);return{pathname:e,search:n,hash:s}}function SA(t){const e=t.pathname||"",n=t.search?(t.search.startsWith("?")?"":"?")+t.search:"",s=t.hash||"",r=t.auth?t.auth+"@":"",i=t.host||"";return(t.protocol||t[Ny]?(t.protocol||"")+"//":"")+r+i+e+n+s}class CA extends Error{constructor(e,n){super(e,n),this.name="FetchError",n?.cause&&!this.cause&&(this.cause=n.cause)}}function PA(t){const e=t.error?.message||t.error?.toString()||"",n=t.request?.method||t.options?.method||"GET",s=t.request?.url||String(t.request)||"/",r=`[${n}] ${JSON.stringify(s)}`,i=t.response?`${t.response.status} ${t.response.statusText}`:"<no response>",o=`${r}: ${i}${e?` ${e}`:""}`,a=new CA(o,t.error?{cause:t.error}:void 0);for(const l of["request","options","response"])Object.defineProperty(a,l,{get(){return t[l]}});for(const[l,u]of[["data","_data"],["status","status"],["statusCode","status"],["statusText","statusText"],["statusMessage","statusText"]])Object.defineProperty(a,l,{get(){return t.response&&t.response[u]}});return a}const kA=new Set(Object.freeze(["PATCH","POST","PUT","DELETE"]));function xp(t="GET"){return kA.has(t.toUpperCase())}function NA(t){if(t===void 0)return!1;const e=typeof t;return e==="string"||e==="number"||e==="boolean"||e===null?!0:e!=="object"?!1:Array.isArray(t)?!0:t.buffer||t instanceof FormData||t instanceof URLSearchParams?!1:t.constructor&&t.constructor.name==="Object"||typeof t.toJSON=="function"}const DA=new Set(["image/svg","application/xml","application/xhtml","application/html"]),OA=/^application\/(?:[\w!#$%&*.^`~-]*\+)?json(;.+)?$/i;function VA(t=""){if(!t)return"json";const e=t.split(";").shift()||"";return OA.test(e)?"json":e==="text/event-stream"?"stream":DA.has(e)||e.startsWith("text/")?"text":"blob"}function LA(t,e,n,s){const r=MA(e?.headers??t?.headers,n?.headers,s);let i;return(n?.query||n?.params||e?.params||e?.query)&&(i={...n?.params,...n?.query,...e?.params,...e?.query}),{...n,...e,query:i,params:i,headers:r}}function MA(t,e,n){if(!e)return new n(t);const s=new n(e);if(t)for(const[r,i]of Symbol.iterator in t||Array.isArray(t)?t:new n(t))s.set(r,i);return s}async function $a(t,e){if(e)if(Array.isArray(e))for(const n of e)await n(t);else await e(t)}const xA=new Set([408,409,425,429,500,502,503,504]),FA=new Set([101,204,205,304]);function Oy(t={}){const{fetch:e=globalThis.fetch,Headers:n=globalThis.Headers,AbortController:s=globalThis.AbortController}=t;async function r(a){const l=a.error&&a.error.name==="AbortError"&&!a.options.timeout||!1;if(a.options.retry!==!1&&!l){let h;typeof a.options.retry=="number"?h=a.options.retry:h=xp(a.options.method)?0:1;const f=a.response&&a.response.status||500;if(h>0&&(Array.isArray(a.options.retryStatusCodes)?a.options.retryStatusCodes.includes(f):xA.has(f))){const p=typeof a.options.retryDelay=="function"?a.options.retryDelay(a):a.options.retryDelay||0;return p>0&&await new Promise(g=>setTimeout(g,p)),i(a.request,{...a.options,retry:h-1})}}const u=PA(a);throw Error.captureStackTrace&&Error.captureStackTrace(u,i),u}const i=async function(l,u={}){const h={request:l,options:LA(l,u,t.defaults,n),response:void 0,error:void 0};if(h.options.method&&(h.options.method=h.options.method.toUpperCase()),h.options.onRequest&&(await $a(h,h.options.onRequest),h.options.headers instanceof n||(h.options.headers=new n(h.options.headers||{}))),typeof h.request=="string"&&(h.options.baseURL&&(h.request=IA(h.request,h.options.baseURL)),h.options.query&&(h.request=Cy(h.request,h.options.query),delete h.options.query),"query"in h.options&&delete h.options.query,"params"in h.options&&delete h.options.params),h.options.body&&xp(h.options.method))if(NA(h.options.body)){const g=h.options.headers.get("content-type");typeof h.options.body!="string"&&(h.options.body=g==="application/x-www-form-urlencoded"?new URLSearchParams(h.options.body).toString():JSON.stringify(h.options.body)),g||h.options.headers.set("content-type","application/json"),h.options.headers.has("accept")||h.options.headers.set("accept","application/json")}else("pipeTo"in h.options.body&&typeof h.options.body.pipeTo=="function"||typeof h.options.body.pipe=="function")&&("duplex"in h.options||(h.options.duplex="half"));let f;if(!h.options.signal&&h.options.timeout){const g=new s;f=setTimeout(()=>{const I=new Error("[TimeoutError]: The operation was aborted due to timeout");I.name="TimeoutError",I.code=23,g.abort(I)},h.options.timeout),h.options.signal=g.signal}try{h.response=await e(h.request,h.options)}catch(g){return h.error=g,h.options.onRequestError&&await $a(h,h.options.onRequestError),await r(h)}finally{f&&clearTimeout(f)}if((h.response.body||h.response._bodyInit)&&!FA.has(h.response.status)&&h.options.method!=="HEAD"){const g=(h.options.parseResponse?"json":h.options.responseType)||VA(h.response.headers.get("content-type")||"");switch(g){case"json":{const I=await h.response.text(),y=h.options.parseResponse||wc;h.response._data=y(I);break}case"stream":{h.response._data=h.response.body||h.response._bodyInit;break}default:h.response._data=await h.response[g]()}}return h.options.onResponse&&await $a(h,h.options.onResponse),!h.options.ignoreResponseError&&h.response.status>=400&&h.response.status<600?(h.options.onResponseError&&await $a(h,h.options.onResponseError),await r(h)):h.response},o=async function(l,u){return(await i(l,u))._data};return o.raw=i,o.native=(...a)=>e(...a),o.create=(a={},l={})=>Oy({...t,...l,defaults:{...t.defaults,...l.defaults,...a}}),o}const Ac=(function(){if(typeof globalThis<"u")return globalThis;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")})(),UA=Ac.fetch?(...t)=>Ac.fetch(...t):()=>Promise.reject(new Error("[ofetch] global.fetch is not supported!")),BA=Ac.Headers,$A=Ac.AbortController,HA=Oy({fetch:UA,Headers:BA,AbortController:$A}),jA=HA,qA=()=>window?.__NUXT__?.config||window?.useNuxtApp?.().payload?.config,of=()=>qA().app,WA=()=>of().baseURL,GA=()=>of().buildAssetsDir,af=(...t)=>ky(Vy(),GA(),...t),Vy=(...t)=>{const e=of(),n=e.cdnURL||e.baseURL;return t.length?ky(n,...t):n};globalThis.__buildAssetsURL=af,globalThis.__publicAssetsURL=Vy;globalThis.$fetch||(globalThis.$fetch=jA.create({baseURL:WA()}));"global"in globalThis||(globalThis.global=globalThis);function Qu(t,e={},n){for(const s in t){const r=t[s],i=n?`${n}:${s}`:s;typeof r=="object"&&r!==null?Qu(r,e,i):typeof r=="function"&&(e[i]=r)}return e}const zA={run:t=>t()},KA=()=>zA,Ly=typeof console.createTask<"u"?console.createTask:KA;function QA(t,e){const n=e.shift(),s=Ly(n);return t.reduce((r,i)=>r.then(()=>s.run(()=>i(...e))),Promise.resolve())}function YA(t,e){const n=e.shift(),s=Ly(n);return Promise.all(t.map(r=>s.run(()=>r(...e))))}function cu(t,e){for(const n of[...t])n(e)}let JA=class{constructor(){this._hooks={},this._before=void 0,this._after=void 0,this._deprecatedMessages=void 0,this._deprecatedHooks={},this.hook=this.hook.bind(this),this.callHook=this.callHook.bind(this),this.callHookWith=this.callHookWith.bind(this)}hook(e,n,s={}){if(!e||typeof n!="function")return()=>{};const r=e;let i;for(;this._deprecatedHooks[e];)i=this._deprecatedHooks[e],e=i.to;if(i&&!s.allowDeprecated){let o=i.message;o||(o=`${r} hook has been deprecated`+(i.to?`, please use ${i.to}`:"")),this._deprecatedMessages||(this._deprecatedMessages=new Set),this._deprecatedMessages.has(o)||(console.warn(o),this._deprecatedMessages.add(o))}if(!n.name)try{Object.defineProperty(n,"name",{get:()=>"_"+e.replace(/\W+/g,"_")+"_hook_cb",configurable:!0})}catch{}return this._hooks[e]=this._hooks[e]||[],this._hooks[e].push(n),()=>{n&&(this.removeHook(e,n),n=void 0)}}hookOnce(e,n){let s,r=(...i)=>(typeof s=="function"&&s(),s=void 0,r=void 0,n(...i));return s=this.hook(e,r),s}removeHook(e,n){if(this._hooks[e]){const s=this._hooks[e].indexOf(n);s!==-1&&this._hooks[e].splice(s,1),this._hooks[e].length===0&&delete this._hooks[e]}}deprecateHook(e,n){this._deprecatedHooks[e]=typeof n=="string"?{to:n}:n;const s=this._hooks[e]||[];delete this._hooks[e];for(const r of s)this.hook(e,r)}deprecateHooks(e){Object.assign(this._deprecatedHooks,e);for(const n in e)this.deprecateHook(n,e[n])}addHooks(e){const n=Qu(e),s=Object.keys(n).map(r=>this.hook(r,n[r]));return()=>{for(const r of s.splice(0,s.length))r()}}removeHooks(e){const n=Qu(e);for(const s in n)this.removeHook(s,n[s])}removeAllHooks(){for(const e in this._hooks)delete this._hooks[e]}callHook(e,...n){return n.unshift(e),this.callHookWith(QA,e,...n)}callHookParallel(e,...n){return n.unshift(e),this.callHookWith(YA,e,...n)}callHookWith(e,n,...s){const r=this._before||this._after?{name:n,args:s,context:{}}:void 0;this._before&&cu(this._before,r);const i=e(n in this._hooks?[...this._hooks[n]]:[],s);return i instanceof Promise?i.finally(()=>{this._after&&r&&cu(this._after,r)}):(this._after&&r&&cu(this._after,r),i)}beforeEach(e){return this._before=this._before||[],this._before.push(e),()=>{if(this._before!==void 0){const n=this._before.indexOf(e);n!==-1&&this._before.splice(n,1)}}}afterEach(e){return this._after=this._after||[],this._after.push(e),()=>{if(this._after!==void 0){const n=this._after.indexOf(e);n!==-1&&this._after.splice(n,1)}}}};function XA(){return new JA}function ZA(t={}){let e,n=!1;const s=o=>{if(e&&e!==o)throw new Error("Context conflict")};let r;if(t.asyncContext){const o=t.AsyncLocalStorage||globalThis.AsyncLocalStorage;o?r=new o:console.warn("[unctx] `AsyncLocalStorage` is not provided.")}const i=()=>{if(r){const o=r.getStore();if(o!==void 0)return o}return e};return{use:()=>{const o=i();if(o===void 0)throw new Error("Context is not available");return o},tryUse:()=>i(),set:(o,a)=>{a||s(o),e=o,n=!0},unset:()=>{e=void 0,n=!1},call:(o,a)=>{s(o),e=o;try{return r?r.run(o,a):a()}finally{n||(e=void 0)}},async callAsync(o,a){e=o;const l=()=>{e=o},u=()=>e===o?l:void 0;Yu.add(u);try{const h=r?r.run(o,a):a();return n||(e=void 0),await h}finally{Yu.delete(u)}}}}function eR(t={}){const e={};return{get(n,s={}){return e[n]||(e[n]=ZA({...t,...s})),e[n]}}}const Rc=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof global<"u"?global:typeof window<"u"?window:{},Fp="__unctx__",tR=Rc[Fp]||(Rc[Fp]=eR()),nR=(t,e={})=>tR.get(t,e),Up="__unctx_async_handlers__",Yu=Rc[Up]||(Rc[Up]=new Set);function hi(t){const e=[];for(const r of Yu){const i=r();i&&e.push(i)}const n=()=>{for(const r of e)r()};let s=t();return s&&typeof s=="object"&&"catch"in s&&(s=s.catch(r=>{throw n(),r})),[s,n]}const Bp={name:"page-fade",mode:"out-in"},sR=!1,rR=!1,$p={id:"__nuxt-loader"},RM={componentName:"NuxtLink",prefetch:!0,prefetchOn:{visibility:!0}},iR="#__nuxt",My="nuxt-app",Hp=36e5,oR="vite:preloadError";function xy(t=My){return nR(t,{asyncContext:!1})}const aR="__nuxt_plugin";function cR(t){let e=0;const n={_id:t.id||My||"nuxt-app",_scope:Pw(),provide:void 0,versions:{get nuxt(){return"4.2.2"},get vue(){return n.vueApp.version}},payload:On({...t.ssrContext?.payload||{},data:On({}),state:nr({}),once:new Set,_errors:On({})}),static:{data:{}},runWithContext(r){return n._scope.active&&!$h()?n._scope.run(()=>jp(n,r)):jp(n,r)},isHydrating:!0,deferHydration(){if(!n.isHydrating)return()=>{};e++;let r=!1;return()=>{if(!r&&(r=!0,e--,e===0))return n.isHydrating=!1,n.callHook("app:suspense:resolve")}},_asyncDataPromises:{},_asyncData:On({}),_payloadRevivers:{},...t};{const r=window.__NUXT__;if(r)for(const i in r)switch(i){case"data":case"state":case"_errors":Object.assign(n.payload[i],r[i]);break;default:n.payload[i]=r[i]}}n.hooks=XA(),n.hook=n.hooks.hook,n.callHook=n.hooks.callHook,n.provide=(r,i)=>{const o="$"+r;Ha(n,o,i),Ha(n.vueApp.config.globalProperties,o,i)},Ha(n.vueApp,"$nuxt",n),Ha(n.vueApp.config.globalProperties,"$nuxt",n);{window.addEventListener(oR,i=>{n.callHook("app:chunkError",{error:i.payload}),i.payload.message.includes("Unable to preload CSS")&&i.preventDefault()}),window.useNuxtApp||=at;const r=n.hook("app:error",(...i)=>{console.error("[nuxt] error caught during app initialization",...i)});n.hook("app:mounted",r)}const s=n.payload.config;return n.provide("config",s),n}function lR(t,e){e.hooks&&t.hooks.addHooks(e.hooks)}async function uR(t,e){if(typeof e=="function"){const{provide:n}=await t.runWithContext(()=>e(t))||{};if(n&&typeof n=="object")for(const s in n)t.provide(s,n[s])}}async function hR(t,e){const n=new Set,s=[],r=[];let i,o=0;async function a(l){const u=l.dependsOn?.filter(h=>e.some(f=>f._name===h)&&!n.has(h))??[];if(u.length>0)s.push([new Set(u),l]);else{const h=uR(t,l).then(async()=>{l._name&&(n.add(l._name),await Promise.all(s.map(async([f,p])=>{f.has(l._name)&&(f.delete(l._name),f.size===0&&(o++,await a(p)))})))}).catch(f=>{if(!l.parallel&&!t.payload.error)throw f;i||=f});l.parallel?r.push(h):await h}}for(const l of e)lR(t,l);for(const l of e)await a(l);if(await Promise.all(r),o)for(let l=0;l<o;l++)await Promise.all(r);if(i)throw t.payload.error||i}function $n(t){if(typeof t=="function")return t;const e=t._name||t.name;return delete t.name,Object.assign(t.setup||(()=>{}),t,{[aR]:!0,_name:e})}function jp(t,e,n){const s=()=>e();return xy(t._id).set(t),t.vueApp.runWithContext(s)}function fR(t){let e;return el()&&(e=xr()?.appContext.app.$nuxt),e||=xy(t).tryUse(),e||null}function at(t){const e=fR(t);if(!e)throw new Error("[nuxt] instance unavailable");return e}function ol(t){return at().$config}function Ha(t,e,n){Object.defineProperty(t,e,{get:()=>n})}function dR(t,e){return{ctx:{table:t},matchAll:n=>Uy(n,t)}}function Fy(t){const e={};for(const n in t)e[n]=n==="dynamic"?new Map(Object.entries(t[n]).map(([s,r])=>[s,Fy(r)])):new Map(Object.entries(t[n]));return e}function pR(t){return dR(Fy(t))}function Uy(t,e,n){t.endsWith("/")&&(t=t.slice(0,-1)||"/");const s=[];for(const[i,o]of qp(e.wildcard))(t===i||t.startsWith(i+"/"))&&s.push(o);for(const[i,o]of qp(e.dynamic))if(t.startsWith(i+"/")){const a="/"+t.slice(i.length).split("/").splice(2).join("/");s.push(...Uy(a,o))}const r=e.static.get(t);return r&&s.push(r),s.filter(Boolean)}function qp(t){return[...t.entries()].sort((e,n)=>e[0].length-n[0].length)}function lu(t){if(t===null||typeof t!="object")return!1;const e=Object.getPrototypeOf(t);return e!==null&&e!==Object.prototype&&Object.getPrototypeOf(e)!==null||Symbol.iterator in t?!1:Symbol.toStringTag in t?Object.prototype.toString.call(t)==="[object Module]":!0}function Ju(t,e,n=".",s){if(!lu(e))return Ju(t,{},n,s);const r=Object.assign({},e);for(const i in t){if(i==="__proto__"||i==="constructor")continue;const o=t[i];o!=null&&(s&&s(r,i,o,n)||(Array.isArray(o)&&Array.isArray(r[i])?r[i]=[...o,...r[i]]:lu(o)&&lu(r[i])?r[i]=Ju(o,r[i],(n?`${n}.`:"")+i.toString(),s):r[i]=o))}return r}function mR(t){return(...e)=>e.reduce((n,s)=>Ju(n,s,"",t),{})}const By=mR();function gR(t,e){try{return e in t}catch{return!1}}class Wp extends Error{static __h3_error__=!0;statusCode=500;fatal=!1;unhandled=!1;statusMessage;data;cause;constructor(e,n={}){super(e,n),n.cause&&!this.cause&&(this.cause=n.cause)}toJSON(){const e={message:this.message,statusCode:Xu(this.statusCode,500)};return this.statusMessage&&(e.statusMessage=$y(this.statusMessage)),this.data!==void 0&&(e.data=this.data),e}}function _R(t){if(typeof t=="string")return new Wp(t);if(yR(t))return t;const e=new Wp(t.message??t.statusMessage??"",{cause:t.cause||t});if(gR(t,"stack"))try{Object.defineProperty(e,"stack",{get(){return t.stack}})}catch{try{e.stack=t.stack}catch{}}if(t.data&&(e.data=t.data),t.statusCode?e.statusCode=Xu(t.statusCode,e.statusCode):t.status&&(e.statusCode=Xu(t.status,e.statusCode)),t.statusMessage?e.statusMessage=t.statusMessage:t.statusText&&(e.statusMessage=t.statusText),e.statusMessage){const n=e.statusMessage;$y(e.statusMessage)!==n&&console.warn("[h3] Please prefer using `message` for longer error messages instead of `statusMessage`. In the future, `statusMessage` will be sanitized by default.")}return t.fatal!==void 0&&(e.fatal=t.fatal),t.unhandled!==void 0&&(e.unhandled=t.unhandled),e}function yR(t){return t?.constructor?.__h3_error__===!0}const vR=/[^\u0009\u0020-\u007E]/g;function $y(t=""){return t.replace(vR,"")}function Xu(t,e=200){return!t||(typeof t=="string"&&(t=Number.parseInt(t,10)),t<100||t>999)?e:t}const Hy=Symbol("layout-meta"),Cr=Symbol("route");import.meta.url.replace(/\/app\/.*$/,"/");const Gt=()=>at()?.$router,Mi=()=>el()?Ot(Cr,at()._route):at()._route;function SM(t){return t}const ER=()=>{try{if(at()._processingMiddleware)return!0}catch{return!1}return!1},CM=(t,e)=>{t||="/";const n=typeof t=="string"?t:"path"in t?TR(t):Gt().resolve(t).href;if(e?.open){const{target:l="_blank",windowFeatures:u={}}=e.open,h=[];for(const[f,p]of Object.entries(u))p!==void 0&&h.push(`${f.toLowerCase()}=${p}`);return open(n,l,h.join(", ")),Promise.resolve()}const s=Fr(n,{acceptRelative:!0}),r=e?.external||s;if(r){if(!e?.external)throw new Error("Navigating to an external URL is not allowed by default. Use `navigateTo(url, { external: true })`.");const{protocol:l}=new URL(n,window.location.href);if(l&&wA(l))throw new Error(`Cannot navigate to a URL with '${l}' protocol.`)}const i=ER();if(!r&&i){if(e?.replace){if(typeof t=="string"){const{pathname:l,search:u,hash:h}=Dy(t);return{path:l,...u&&{query:Sy(u)},...h&&{hash:h},replace:!0}}return{...t,replace:!0}}return t}const o=Gt(),a=at();return r?(a._scope.stop(),e?.replace?location.replace(n):location.href=n,i?a.isHydrating?new Promise(()=>{}):!1:Promise.resolve()):e?.replace?o.replace(t):o.push(t)};function TR(t){return Cy(t.path||"",t.query||{})+(t.hash||"")}const jy="__nuxt_error",al=()=>nb(at().payload,"error"),_r=t=>{const e=Ar(t);try{const n=al();at().hooks.callHook("app:error",e),n.value||=e}catch{throw e}return e},wR=async(t={})=>{const e=at(),n=al();e.callHook("app:error:cleared",t),t.redirect&&await Gt().replace(t.redirect),n.value=void 0},qy=t=>!!t&&typeof t=="object"&&jy in t,Ar=t=>{const e=_R(t);return Object.defineProperty(e,jy,{value:!0,configurable:!1,writable:!1}),e};function bR(t){const e=AR(t),n=new ArrayBuffer(e.length),s=new DataView(n);for(let r=0;r<n.byteLength;r++)s.setUint8(r,e.charCodeAt(r));return n}const IR="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";function AR(t){t.length%4===0&&(t=t.replace(/==?$/,""));let e="",n=0,s=0;for(let r=0;r<t.length;r++)n<<=6,n|=IR.indexOf(t[r]),s+=6,s===24&&(e+=String.fromCharCode((n&16711680)>>16),e+=String.fromCharCode((n&65280)>>8),e+=String.fromCharCode(n&255),n=s=0);return s===12?(n>>=4,e+=String.fromCharCode(n)):s===18&&(n>>=2,e+=String.fromCharCode((n&65280)>>8),e+=String.fromCharCode(n&255)),e}const RR=-1,SR=-2,CR=-3,PR=-4,kR=-5,NR=-6;function DR(t,e){return OR(JSON.parse(t),e)}function OR(t,e){if(typeof t=="number")return r(t,!0);if(!Array.isArray(t)||t.length===0)throw new Error("Invalid input");const n=t,s=Array(n.length);function r(i,o=!1){if(i===RR)return;if(i===CR)return NaN;if(i===PR)return 1/0;if(i===kR)return-1/0;if(i===NR)return-0;if(o||typeof i!="number")throw new Error("Invalid input");if(i in s)return s[i];const a=n[i];if(!a||typeof a!="object")s[i]=a;else if(Array.isArray(a))if(typeof a[0]=="string"){const l=a[0],u=e&&Object.hasOwn(e,l)?e[l]:void 0;if(u){let h=a[1];return typeof h!="number"&&(h=n.push(a[1])-1),s[i]=u(r(h))}switch(l){case"Date":s[i]=new Date(a[1]);break;case"Set":const h=new Set;s[i]=h;for(let g=1;g<a.length;g+=1)h.add(r(a[g]));break;case"Map":const f=new Map;s[i]=f;for(let g=1;g<a.length;g+=2)f.set(r(a[g]),r(a[g+1]));break;case"RegExp":s[i]=new RegExp(a[1],a[2]);break;case"Object":s[i]=Object(a[1]);break;case"BigInt":s[i]=BigInt(a[1]);break;case"null":const p=Object.create(null);s[i]=p;for(let g=1;g<a.length;g+=2)p[a[g]]=r(a[g+1]);break;case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"BigInt64Array":case"BigUint64Array":{const g=globalThis[l],I=new g(r(a[1]));s[i]=a[2]!==void 0?I.subarray(a[2],a[3]):I;break}case"ArrayBuffer":{const g=a[1],I=bR(g);s[i]=I;break}case"Temporal.Duration":case"Temporal.Instant":case"Temporal.PlainDate":case"Temporal.PlainTime":case"Temporal.PlainDateTime":case"Temporal.PlainMonthDay":case"Temporal.PlainYearMonth":case"Temporal.ZonedDateTime":{const g=l.slice(9);s[i]=Temporal[g].from(a[1]);break}case"URL":{const g=new URL(a[1]);s[i]=g;break}case"URLSearchParams":{const g=new URLSearchParams(a[1]);s[i]=g;break}default:throw new Error(`Unknown type ${l}`)}}else{const l=new Array(a.length);s[i]=l;for(let u=0;u<a.length;u+=1){const h=a[u];h!==SR&&(l[u]=r(h))}}else{const l={};s[i]=l;for(const u in a){if(u==="__proto__")throw new Error("Cannot parse an object with a `__proto__` property");const h=a[u];l[u]=r(h)}}return s[i]}return r(0)}const VR=new Set(["link","style","script","noscript"]),LR=new Set(["title","titleTemplate","script","style","noscript"]),Gp=new Set(["base","meta","link","style","script","noscript"]),MR=new Set(["title","base","htmlAttrs","bodyAttrs","meta","link","style","script","noscript"]),xR=new Set(["base","title","titleTemplate","bodyAttrs","htmlAttrs","templateParams"]),FR=new Set(["key","tagPosition","tagPriority","tagDuplicateStrategy","innerHTML","textContent","processTemplateParams"]),UR=new Set(["templateParams","htmlAttrs","bodyAttrs"]),BR=new Set(["theme-color","google-site-verification","og","article","book","profile","twitter","author"]);function Zu(t,e={},n){for(const s in t){const r=t[s],i=n?`${n}:${s}`:s;typeof r=="object"&&r!==null?Zu(r,e,i):typeof r=="function"&&(e[i]=r)}return e}const Wy=(()=>{if(console.createTask)return console.createTask;const t={run:e=>e()};return()=>t})();function Gy(t,e,n,s){for(let r=n;r<t.length;r+=1)try{const i=s?s.run(()=>t[r](...e)):t[r](...e);if(i instanceof Promise)return i.then(()=>Gy(t,e,r+1,s))}catch(i){return Promise.reject(i)}}function $R(t,e,n){if(t.length>0)return Gy(t,e,0,Wy(n))}function HR(t,e,n){if(t.length>0){const s=Wy(n);return Promise.all(t.map(r=>s.run(()=>r(...e))))}}function uu(t,e){for(const n of[...t])n(e)}var jR=class{_hooks;_before;_after;_deprecatedHooks;_deprecatedMessages;constructor(){this._hooks={},this._before=void 0,this._after=void 0,this._deprecatedMessages=void 0,this._deprecatedHooks={},this.hook=this.hook.bind(this),this.callHook=this.callHook.bind(this),this.callHookWith=this.callHookWith.bind(this)}hook(t,e,n={}){if(!t||typeof e!="function")return()=>{};const s=t;let r;for(;this._deprecatedHooks[t];)r=this._deprecatedHooks[t],t=r.to;if(r&&!n.allowDeprecated){let i=r.message;i||(i=`${s} hook has been deprecated`+(r.to?`, please use ${r.to}`:"")),this._deprecatedMessages||(this._deprecatedMessages=new Set),this._deprecatedMessages.has(i)||(console.warn(i),this._deprecatedMessages.add(i))}if(!e.name)try{Object.defineProperty(e,"name",{get:()=>"_"+t.replace(/\W+/g,"_")+"_hook_cb",configurable:!0})}catch{}return this._hooks[t]=this._hooks[t]||[],this._hooks[t].push(e),()=>{e&&(this.removeHook(t,e),e=void 0)}}hookOnce(t,e){let n,s=(...r)=>(typeof n=="function"&&n(),n=void 0,s=void 0,e(...r));return n=this.hook(t,s),n}removeHook(t,e){const n=this._hooks[t];if(n){const s=n.indexOf(e);s!==-1&&n.splice(s,1),n.length===0&&(this._hooks[t]=void 0)}}deprecateHook(t,e){this._deprecatedHooks[t]=typeof e=="string"?{to:e}:e;const n=this._hooks[t]||[];this._hooks[t]=void 0;for(const s of n)this.hook(t,s)}deprecateHooks(t){for(const e in t)this.deprecateHook(e,t[e])}addHooks(t){const e=Zu(t),n=Object.keys(e).map(s=>this.hook(s,e[s]));return()=>{for(const s of n)s();n.length=0}}removeHooks(t){const e=Zu(t);for(const n in e)this.removeHook(n,e[n])}removeAllHooks(){this._hooks={}}callHook(t,...e){return this.callHookWith($R,t,e)}callHookParallel(t,...e){return this.callHookWith(HR,t,e)}callHookWith(t,e,n){const s=this._before||this._after?{name:e,args:n,context:{}}:void 0;this._before&&uu(this._before,s);const r=t(this._hooks[e]?[...this._hooks[e]]:[],n,e);return r instanceof Promise?r.finally(()=>{this._after&&s&&uu(this._after,s)}):(this._after&&s&&uu(this._after,s),r)}beforeEach(t){return this._before=this._before||[],this._before.push(t),()=>{if(this._before!==void 0){const e=this._before.indexOf(t);e!==-1&&this._before.splice(e,1)}}}afterEach(t){return this._after=this._after||[],this._after.push(t),()=>{if(this._after!==void 0){const e=this._after.indexOf(t);e!==-1&&this._after.splice(e,1)}}}};function qR(){return new jR}const WR=["name","property","http-equiv"],GR=new Set(["viewport","description","keywords","robots"]);function zy(t){const e=t.split(":");return e.length?BR.has(e[1]):!1}function eh(t){const{props:e,tag:n}=t;if(xR.has(n))return n;if(n==="link"&&e.rel==="canonical")return"canonical";if(e.charset)return"charset";if(t.tag==="meta"){for(const s of WR)if(e[s]!==void 0){const r=e[s],i=r&&typeof r=="string"&&r.includes(":"),o=r&&GR.has(r),l=!(i||o)&&t.key?`:key:${t.key}`:"";return`${n}:${r}${l}`}}if(t.key)return`${n}:key:${t.key}`;if(e.id)return`${n}:id:${e.id}`;if(LR.has(n)){const s=t.textContent||t.innerHTML;if(s)return`${n}:content:${s}`}}function zp(t){const e=t._h||t._d;if(e)return e;const n=t.textContent||t.innerHTML;return n||`${t.tag}:${Object.entries(t.props).map(([s,r])=>`${s}:${String(r)}`).join(",")}`}function Sc(t,e,n){typeof t==="function"&&(!n||n!=="titleTemplate"&&!(n[0]==="o"&&n[1]==="n"))&&(t=t());const r=e?e(n,t):t;if(Array.isArray(r))return r.map(i=>Sc(i,e));if(r?.constructor===Object){const i={};for(const o of Object.keys(r))i[o]=Sc(r[o],e,o);return i}return r}function zR(t,e){const n=t==="style"?new Map:new Set;function s(r){if(r==null||r===void 0)return;const i=String(r).trim();if(i)if(t==="style"){const[o,...a]=i.split(":").map(l=>l?l.trim():"");o&&a.length&&n.set(o,a.join(":"))}else i.split(" ").filter(Boolean).forEach(o=>n.add(o))}return typeof e=="string"?t==="style"?e.split(";").forEach(s):s(e):Array.isArray(e)?e.forEach(r=>s(r)):e&&typeof e=="object"&&Object.entries(e).forEach(([r,i])=>{i&&i!=="false"&&(t==="style"?n.set(String(r).trim(),String(i)):s(r))}),n}function Ky(t,e){return t.props=t.props||{},e?t.tag==="templateParams"?(t.props=e,t):(Object.entries(e).forEach(([n,s])=>{if(s===null){t.props[n]=null;return}if(n==="class"||n==="style"){t.props[n]=zR(n,s);return}if(FR.has(n)){if(["textContent","innerHTML"].includes(n)&&typeof s=="object"){let a=e.type;if(e.type||(a="application/json"),!a?.endsWith("json")&&a!=="speculationrules")return;e.type=a,t.props.type=a,t[n]=JSON.stringify(s)}else t[n]=s;return}const r=String(s),i=n.startsWith("data-"),o=t.tag==="meta"&&n==="content";r==="true"||r===""?t.props[n]=i||o?r:!0:!s&&i&&r==="false"?t.props[n]="false":s!==void 0&&(t.props[n]=s)}),t):t}function KR(t,e){const n=typeof e=="object"&&typeof e!="function"?e:{[t==="script"||t==="noscript"||t==="style"?"innerHTML":"textContent"]:e},s=Ky({tag:t,props:{}},n);return s.key&&VR.has(s.tag)&&(s.props["data-hid"]=s._h=s.key),s.tag==="script"&&typeof s.innerHTML=="object"&&(s.innerHTML=JSON.stringify(s.innerHTML),s.props.type=s.props.type||"application/json"),Array.isArray(s.props.content)?s.props.content.map(r=>({...s,props:{...s.props,content:r}})):s}function QR(t,e){if(!t)return[];typeof t=="function"&&(t=t());const n=(r,i)=>{for(let o=0;o<e.length;o++)i=e[o](r,i);return i};t=n(void 0,t);const s=[];return t=Sc(t,n),Object.entries(t||{}).forEach(([r,i])=>{if(i!==void 0)for(const o of Array.isArray(i)?i:[i])s.push(KR(r,o))}),s.flat()}const Kp=(t,e)=>t._w===e._w?t._p-e._p:t._w-e._w,Qp={base:-10,title:10},YR={critical:-8,high:-1,low:2},Yp={meta:{"content-security-policy":-30,charset:-20,viewport:-15},link:{preconnect:20,stylesheet:60,preload:70,modulepreload:70,prefetch:90,"dns-prefetch":90,prerender:90},script:{async:30,defer:80,sync:50},style:{imported:40,sync:60}},JR=/@import/,lo=t=>t===""||t===!0;function XR(t,e){if(typeof e.tagPriority=="number")return e.tagPriority;let n=100;const s=YR[e.tagPriority]||0,r=t.resolvedOptions.disableCapoSorting?{link:{},script:{},style:{}}:Yp;if(e.tag in Qp)n=Qp[e.tag];else if(e.tag==="meta"){const i=e.props["http-equiv"]==="content-security-policy"?"content-security-policy":e.props.charset?"charset":e.props.name==="viewport"?"viewport":null;i&&(n=Yp.meta[i])}else if(e.tag==="link"&&e.props.rel)n=r.link[e.props.rel];else if(e.tag==="script"){const i=String(e.props.type);lo(e.props.async)?n=r.script.async:e.props.src&&!lo(e.props.defer)&&!lo(e.props.async)&&i!=="module"&&!i.endsWith("json")||e.innerHTML&&!i.endsWith("json")?n=r.script.sync:(lo(e.props.defer)&&e.props.src&&!lo(e.props.async)||i==="module")&&(n=r.script.defer)}else e.tag==="style"&&(n=e.innerHTML&&JR.test(e.innerHTML)?r.style.imported:r.style.sync);return(n||100)+s}function Jp(t,e){const n=typeof e=="function"?e(t):e,s=n.key||String(t.plugins.size+1);t.plugins.get(s)||(t.plugins.set(s,n),t.hooks.addHooks(n.hooks||{}))}function ZR(t={}){const e=qR();e.addHooks(t.hooks||{});const n=!t.document,s=new Map,r=new Map,i=new Set,o={_entryCount:1,plugins:r,dirty:!1,resolvedOptions:t,hooks:e,ssr:n,entries:s,headEntries(){return[...s.values()]},use:a=>Jp(o,a),push(a,l){const u={...l||{}};delete u.head;const h=u._index??o._entryCount++,f={_i:h,input:a,options:u},p={_poll(g=!1){o.dirty=!0,!g&&i.add(h),e.callHook("entries:updated",o)},dispose(){s.delete(h)&&o.invalidate()},patch(g){(!u.mode||u.mode==="server"&&n||u.mode==="client"&&!n)&&(f.input=g,s.set(h,f),p._poll())}};return p.patch(a),p},async resolveTags(){const a={tagMap:new Map,tags:[],entries:[...o.entries.values()]};for(await e.callHook("entries:resolve",a);i.size;){const p=i.values().next().value;i.delete(p);const g=s.get(p);if(g){const I={tags:QR(g.input,t.propResolvers||[]).map(y=>Object.assign(y,g.options)),entry:g};await e.callHook("entries:normalize",I),g._tags=I.tags.map((y,D)=>(y._w=XR(o,y),y._p=(g._i<<10)+D,y._d=eh(y),y))}}let l=!1;a.entries.flatMap(p=>(p._tags||[]).map(g=>({...g,props:{...g.props}}))).sort(Kp).reduce((p,g)=>{const I=String(g._d||g._p);if(!p.has(I))return p.set(I,g);const y=p.get(I);if((g?.tagDuplicateStrategy||(UR.has(g.tag)?"merge":null)||(g.key&&g.key===y.key?"merge":null))==="merge"){const V={...y.props};Object.entries(g.props).forEach(([k,_])=>V[k]=k==="style"?new Map([...y.props.style||new Map,..._]):k==="class"?new Set([...y.props.class||new Set,..._]):_),p.set(I,{...g,props:V})}else g._p>>10===y._p>>10&&g.tag==="meta"&&zy(I)?(p.set(I,Object.assign([...Array.isArray(y)?y:[y],g],g)),l=!0):(g._w===y._w?g._p>y._p:g?._w<y?._w)&&p.set(I,g);return p},a.tagMap);const u=a.tagMap.get("title"),h=a.tagMap.get("titleTemplate");if(o._title=u?.textContent,h){const p=h?.textContent;if(o._titleTemplate=p,p){let g=typeof p=="function"?p(u?.textContent):p;typeof g=="string"&&!o.plugins.has("template-params")&&(g=g.replace("%s",u?.textContent||"")),u?g===null?a.tagMap.delete("title"):a.tagMap.set("title",{...u,textContent:g}):(h.tag="title",h.textContent=g)}}a.tags=Array.from(a.tagMap.values()),l&&(a.tags=a.tags.flat().sort(Kp)),await e.callHook("tags:beforeResolve",a),await e.callHook("tags:resolve",a),await e.callHook("tags:afterResolve",a);const f=[];for(const p of a.tags){const{innerHTML:g,tag:I,props:y}=p;if(MR.has(I)&&!(Object.keys(y).length===0&&!p.innerHTML&&!p.textContent)&&!(I==="meta"&&!y.content&&!y["http-equiv"]&&!y.charset)){if(I==="script"&&g){if(String(y.type).endsWith("json")){const D=typeof g=="string"?g:JSON.stringify(g);p.innerHTML=D.replace(/</g,"\\u003C")}else typeof g=="string"&&(p.innerHTML=g.replace(new RegExp(`</${I}`,"g"),`<\\/${I}`));p._d=eh(p)}f.push(p)}}return f},invalidate(){for(const a of s.values())i.add(a._i);o.dirty=!0,e.callHook("entries:updated",o)}};return(t?.plugins||[]).forEach(a=>Jp(o,a)),o.hooks.callHook("init",o),t.init?.forEach(a=>a&&o.push(a)),o}const e0=(t,e)=>_t(e)?Xw(e):e,cf="usehead";function t0(t){return{install(n){n.config.globalProperties.$unhead=t,n.config.globalProperties.$head=t,n.provide(cf,t)}}.install}function n0(){if(el()){const t=Ot(cf);if(!t)throw new Error("useHead() was called without provide context, ensure you call it through the setup() function.");return t}throw new Error("useHead() was called without provide context, ensure you call it through the setup() function.")}function s0(t,e={}){const n=e.head||n0();return n.ssr?n.push(t||{},e):r0(n,t,e)}function r0(t,e,n={}){const s=de(!1);let r;return fb(()=>{const o=s.value?{}:Sc(e,e0);r?r.patch(o):r=t.push(o,n)}),xr()&&(ra(()=>{r.dispose()}),$_(()=>{s.value=!0}),B_(()=>{s.value=!1})),r}function Qy(t){const e=t||at();return e.ssrContext?.head||e.runWithContext(()=>{if(el()){const n=Ot(cf);if(!n)throw new Error("[nuxt] [unhead] Missing Unhead instance.");return n}})}function PM(t,e={}){const n=e.head||Qy(e.nuxt);return s0(t,{head:n,...e})}let Xa,Za;function i0(){return Xa=$fetch(af(`builds/meta/${ol().app.buildId}.json`),{responseType:"json"}),Xa.then(t=>{Za=pR(t.matcher)}).catch(t=>{console.error("[nuxt] Error fetching app manifest.",t)}),Xa}function cl(){return Xa||i0()}async function lf(t){const e=typeof t=="string"?t:t.path;if(await cl(),!Za)return console.error("[nuxt] Error creating app manifest matcher.",Za),{};try{return By({},...Za.matchAll(e).reverse())}catch(n){return console.error("[nuxt] Error matching route rules.",n),{}}}async function Xp(t,e={}){if(!await Jy(t))return null;const s=await a0(t,e);return await Yy(s)||null}const o0="_payload.json";async function a0(t,e={}){const n=new URL(t,"http://localhost");if(n.host!=="localhost"||Fr(n.pathname,{acceptRelative:!0}))throw new Error("Payload URL must not include hostname: "+t);const s=ol(),r=e.hash||(e.fresh?Date.now():s.app.buildId),i=s.app.cdnURL,o=i&&await Jy(t)?i:s.app.baseURL;return rf(o,n.pathname,o0+(r?`?${r}`:""))}async function Yy(t){const e=fetch(t,{cache:"force-cache"}).then(n=>n.text().then(Xy));try{return await e}catch(n){console.warn("[nuxt] Cannot load payload ",t,n)}return null}async function Jy(t=Mi().path){const e=at();return t=t==="/"?t:t.replace(/\/$/,""),(await cl()).prerendered.includes(t)?!0:e.runWithContext(async()=>{const s=await lf({path:t});return!!s.prerender&&!s.redirect})}let pr=null;async function c0(){if(pr)return pr;const t=document.getElementById("__NUXT_DATA__");if(!t)return{};const e=await Xy(t.textContent||""),n=t.dataset.src?await Yy(t.dataset.src):void 0;return pr={...e,...n,...window.__NUXT__},pr.config?.public&&(pr.config.public=nr(pr.config.public)),pr}async function Xy(t){return await DR(t,at()._payloadRevivers)}function l0(t,e){at()._payloadRevivers[t]=e}const u0=[["NuxtError",t=>Ar(t)],["EmptyShallowRef",t=>cs(t==="_"?void 0:t==="0n"?BigInt(0):wc(t))],["EmptyRef",t=>de(t==="_"?void 0:t==="0n"?BigInt(0):wc(t))],["ShallowRef",t=>cs(t)],["ShallowReactive",t=>On(t)],["Ref",t=>de(t)],["Reactive",t=>nr(t)]],h0=$n({name:"nuxt:revive-payload:client",order:-30,async setup(t){let e,n;for(const[s,r]of u0)l0(s,r);Object.assign(t.payload,([e,n]=hi(()=>t.runWithContext(c0)),e=await e,n(),e)),delete window.__NUXT__}});async function uf(t,e={}){const n=e.document||t.resolvedOptions.document;if(!n||!t.dirty)return;const s={shouldRender:!0,tags:[]};if(await t.hooks.callHook("dom:beforeRender",s),!!s.shouldRender)return t._domUpdatePromise||(t._domUpdatePromise=new Promise(async r=>{const i=new Map,o=new Promise(g=>{t.resolveTags().then(I=>{g(I.map(y=>{const D=i.get(y._d)||0,V={tag:y,id:(D?`${y._d}:${D}`:y._d)||zp(y),shouldRender:!0};return y._d&&zy(y._d)&&i.set(y._d,D+1),V}))})});let a=t._dom;if(!a){a={title:n.title,elMap:new Map().set("htmlAttrs",n.documentElement).set("bodyAttrs",n.body)};for(const g of["body","head"]){const I=n[g]?.children;for(const y of I){const D=y.tagName.toLowerCase();if(!Gp.has(D))continue;const V=Ky({tag:D,props:{}},{innerHTML:y.innerHTML,...y.getAttributeNames().reduce((k,_)=>(k[_]=y.getAttribute(_),k),{})||{}});if(V.key=y.getAttribute("data-hid")||void 0,V._d=eh(V)||zp(V),a.elMap.has(V._d)){let k=1,_=V._d;for(;a.elMap.has(_);)_=`${V._d}:${k++}`;a.elMap.set(_,y)}else a.elMap.set(V._d,y)}}}a.pendingSideEffects={...a.sideEffects},a.sideEffects={};function l(g,I,y){const D=`${g}:${I}`;a.sideEffects[D]=y,delete a.pendingSideEffects[D]}function u({id:g,$el:I,tag:y}){const D=y.tag.endsWith("Attrs");a.elMap.set(g,I),D||(y.textContent&&y.textContent!==I.textContent&&(I.textContent=y.textContent),y.innerHTML&&y.innerHTML!==I.innerHTML&&(I.innerHTML=y.innerHTML),l(g,"el",()=>{I?.remove(),a.elMap.delete(g)}));for(const V in y.props){if(!Object.prototype.hasOwnProperty.call(y.props,V))continue;const k=y.props[V];if(V.startsWith("on")&&typeof k=="function"){const C=I?.dataset;if(C&&C[`${V}fired`]){const O=V.slice(0,-5);k.call(I,new Event(O.substring(2)))}I.getAttribute(`data-${V}`)!==""&&((y.tag==="bodyAttrs"?n.defaultView:I).addEventListener(V.substring(2),k.bind(I)),I.setAttribute(`data-${V}`,""));continue}const _=`attr:${V}`;if(V==="class"){if(!k)continue;for(const C of k)D&&l(g,`${_}:${C}`,()=>I.classList.remove(C)),!I.classList.contains(C)&&I.classList.add(C)}else if(V==="style"){if(!k)continue;for(const[C,O]of k)l(g,`${_}:${C}`,()=>{I.style.removeProperty(C)}),I.style.setProperty(C,O)}else k!==!1&&k!==null&&(I.getAttribute(V)!==k&&I.setAttribute(V,k===!0?"":String(k)),D&&l(g,_,()=>I.removeAttribute(V)))}}const h=[],f={bodyClose:void 0,bodyOpen:void 0,head:void 0},p=await o;for(const g of p){const{tag:I,shouldRender:y,id:D}=g;if(y){if(I.tag==="title"){n.title=I.textContent,l("title","",()=>n.title=a.title);continue}g.$el=g.$el||a.elMap.get(D),g.$el?u(g):Gp.has(I.tag)&&h.push(g)}}for(const g of h){const I=g.tag.tagPosition||"head";g.$el=n.createElement(g.tag.tag),u(g),f[I]=f[I]||n.createDocumentFragment(),f[I].appendChild(g.$el)}for(const g of p)await t.hooks.callHook("dom:renderTag",g,n,l);f.head&&n.head.appendChild(f.head),f.bodyOpen&&n.body.insertBefore(f.bodyOpen,n.body.firstChild),f.bodyClose&&n.body.appendChild(f.bodyClose);for(const g in a.pendingSideEffects)a.pendingSideEffects[g]();t._dom=a,await t.hooks.callHook("dom:rendered",{renders:p}),r()}).finally(()=>{t._domUpdatePromise=void 0,t.dirty=!1})),t._domUpdatePromise}function f0(t={}){const e=t.domOptions?.render||uf;t.document=t.document||(typeof window<"u"?document:void 0);const n=t.document?.head.querySelector('script[id="unhead:payload"]')?.innerHTML||!1;return ZR({...t,plugins:[...t.plugins||[],{key:"client",hooks:{"entries:updated":e}}],init:[n?JSON.parse(n):!1,...t.init||[]]})}function d0(t,e){let n=0;return()=>{const s=++n;e(()=>{n===s&&t()})}}function p0(t={}){const e=f0({domOptions:{render:d0(()=>uf(e),n=>setTimeout(n,0))},...t});return e.install=t0(e),e}const m0={disableDefaults:!0},g0=$n({name:"nuxt:head",enforce:"pre",setup(t){const e=p0(m0);t.vueApp.use(e);{let n=!0;const s=async()=>{n=!1,await uf(e)};e.hooks.hook("dom:beforeRender",r=>{r.shouldRender=!n}),t.hooks.hook("page:start",()=>{n=!0}),t.hooks.hook("page:finish",()=>{t.isHydrating||s()}),t.hooks.hook("app:error",s),t.hooks.hook("app:suspense:resolve",s)}}});const Yr=typeof document<"u";function Zy(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function _0(t){return t.__esModule||t[Symbol.toStringTag]==="Module"||t.default&&Zy(t.default)}const $e=Object.assign;function hu(t,e){const n={};for(const s in e){const r=e[s];n[s]=In(r)?r.map(t):t(r)}return n}const Ro=()=>{},In=Array.isArray;function Zp(t,e){const n={};for(const s in t)n[s]=s in e?e[s]:t[s];return n}const ev=/#/g,y0=/&/g,v0=/\//g,E0=/=/g,T0=/\?/g,tv=/\+/g,w0=/%5B/g,b0=/%5D/g,nv=/%5E/g,I0=/%60/g,sv=/%7B/g,A0=/%7C/g,rv=/%7D/g,R0=/%20/g;function hf(t){return t==null?"":encodeURI(""+t).replace(A0,"|").replace(w0,"[").replace(b0,"]")}function S0(t){return hf(t).replace(sv,"{").replace(rv,"}").replace(nv,"^")}function th(t){return hf(t).replace(tv,"%2B").replace(R0,"+").replace(ev,"%23").replace(y0,"%26").replace(I0,"`").replace(sv,"{").replace(rv,"}").replace(nv,"^")}function C0(t){return th(t).replace(E0,"%3D")}function P0(t){return hf(t).replace(ev,"%23").replace(T0,"%3F")}function k0(t){return P0(t).replace(v0,"%2F")}function Ho(t){if(t==null)return null;try{return decodeURIComponent(""+t)}catch{}return""+t}const N0=/\/$/,D0=t=>t.replace(N0,"");function fu(t,e,n="/"){let s,r={},i="",o="";const a=e.indexOf("#");let l=e.indexOf("?");return l=a>=0&&l>a?-1:l,l>=0&&(s=e.slice(0,l),i=e.slice(l,a>0?a:e.length),r=t(i.slice(1))),a>=0&&(s=s||e.slice(0,a),o=e.slice(a,e.length)),s=M0(s??e,n),{fullPath:s+i+o,path:s,query:r,hash:Ho(o)}}function O0(t,e){const n=e.query?t(e.query):"";return e.path+(n&&"?")+n+(e.hash||"")}function em(t,e){return!e||!t.toLowerCase().startsWith(e.toLowerCase())?t:t.slice(e.length)||"/"}function V0(t,e,n){const s=e.matched.length-1,r=n.matched.length-1;return s>-1&&s===r&&wi(e.matched[s],n.matched[r])&&iv(e.params,n.params)&&t(e.query)===t(n.query)&&e.hash===n.hash}function wi(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function iv(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(var n in t)if(!L0(t[n],e[n]))return!1;return!0}function L0(t,e){return In(t)?tm(t,e):In(e)?tm(e,t):t?.valueOf()===e?.valueOf()}function tm(t,e){return In(e)?t.length===e.length&&t.every((n,s)=>n===e[s]):t.length===1&&t[0]===e}function M0(t,e){if(t.startsWith("/"))return t;if(!t)return e;const n=e.split("/"),s=t.split("/"),r=s[s.length-1];(r===".."||r===".")&&s.push("");let i=n.length-1,o,a;for(o=0;o<s.length;o++)if(a=s[o],a!==".")if(a==="..")i>1&&i--;else break;return n.slice(0,i).join("/")+"/"+s.slice(o).join("/")}const un={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};let nh=(function(t){return t.pop="pop",t.push="push",t})({}),du=(function(t){return t.back="back",t.forward="forward",t.unknown="",t})({});function x0(t){if(!t)if(Yr){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),D0(t)}const F0=/^[^#]+#/;function U0(t,e){return t.replace(F0,"#")+e}function B0(t,e){const n=document.documentElement.getBoundingClientRect(),s=t.getBoundingClientRect();return{behavior:e.behavior,left:s.left-n.left-(e.left||0),top:s.top-n.top-(e.top||0)}}const ll=()=>({left:window.scrollX,top:window.scrollY});function $0(t){let e;if("el"in t){const n=t.el,s=typeof n=="string"&&n.startsWith("#"),r=typeof n=="string"?s?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!r)return;e=B0(r,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.scrollX,e.top!=null?e.top:window.scrollY)}function nm(t,e){return(history.state?history.state.position-e:-1)+t}const sh=new Map;function H0(t,e){sh.set(t,e)}function j0(t){const e=sh.get(t);return sh.delete(t),e}function q0(t){return typeof t=="string"||t&&typeof t=="object"}function ov(t){return typeof t=="string"||typeof t=="symbol"}let st=(function(t){return t[t.MATCHER_NOT_FOUND=1]="MATCHER_NOT_FOUND",t[t.NAVIGATION_GUARD_REDIRECT=2]="NAVIGATION_GUARD_REDIRECT",t[t.NAVIGATION_ABORTED=4]="NAVIGATION_ABORTED",t[t.NAVIGATION_CANCELLED=8]="NAVIGATION_CANCELLED",t[t.NAVIGATION_DUPLICATED=16]="NAVIGATION_DUPLICATED",t})({});const av=Symbol("");st.MATCHER_NOT_FOUND+"",st.NAVIGATION_GUARD_REDIRECT+"",st.NAVIGATION_ABORTED+"",st.NAVIGATION_CANCELLED+"",st.NAVIGATION_DUPLICATED+"";function bi(t,e){return $e(new Error,{type:t,[av]:!0},e)}function Gn(t,e){return t instanceof Error&&av in t&&(e==null||!!(t.type&e))}const W0=["params","query","hash"];function G0(t){if(typeof t=="string")return t;if(t.path!=null)return t.path;const e={};for(const n of W0)n in t&&(e[n]=t[n]);return JSON.stringify(e,null,2)}function z0(t){const e={};if(t===""||t==="?")return e;const n=(t[0]==="?"?t.slice(1):t).split("&");for(let s=0;s<n.length;++s){const r=n[s].replace(tv," "),i=r.indexOf("="),o=Ho(i<0?r:r.slice(0,i)),a=i<0?null:Ho(r.slice(i+1));if(o in e){let l=e[o];In(l)||(l=e[o]=[l]),l.push(a)}else e[o]=a}return e}function sm(t){let e="";for(let n in t){const s=t[n];if(n=C0(n),s==null){s!==void 0&&(e+=(e.length?"&":"")+n);continue}(In(s)?s.map(r=>r&&th(r)):[s&&th(s)]).forEach(r=>{r!==void 0&&(e+=(e.length?"&":"")+n,r!=null&&(e+="="+r))})}return e}function K0(t){const e={};for(const n in t){const s=t[n];s!==void 0&&(e[n]=In(s)?s.map(r=>r==null?null:""+r):s==null?s:""+s)}return e}const Q0=Symbol(""),rm=Symbol(""),ff=Symbol(""),df=Symbol(""),rh=Symbol("");function uo(){let t=[];function e(s){return t.push(s),()=>{const r=t.indexOf(s);r>-1&&t.splice(r,1)}}function n(){t=[]}return{add:e,list:()=>t.slice(),reset:n}}function ks(t,e,n,s,r,i=o=>o()){const o=s&&(s.enterCallbacks[r]=s.enterCallbacks[r]||[]);return()=>new Promise((a,l)=>{const u=p=>{p===!1?l(bi(st.NAVIGATION_ABORTED,{from:n,to:e})):p instanceof Error?l(p):q0(p)?l(bi(st.NAVIGATION_GUARD_REDIRECT,{from:e,to:p})):(o&&s.enterCallbacks[r]===o&&typeof p=="function"&&o.push(p),a())},h=i(()=>t.call(s&&s.instances[r],e,n,u));let f=Promise.resolve(h);t.length<3&&(f=f.then(u)),f.catch(p=>l(p))})}function pu(t,e,n,s,r=i=>i()){const i=[];for(const o of t)for(const a in o.components){let l=o.components[a];if(!(e!=="beforeRouteEnter"&&!o.instances[a]))if(Zy(l)){const u=(l.__vccOpts||l)[e];u&&i.push(ks(u,n,s,o,a,r))}else{let u=l();i.push(()=>u.then(h=>{if(!h)throw new Error(`Couldn't resolve component "${a}" at "${o.path}"`);const f=_0(h)?h.default:h;o.mods[a]=h,o.components[a]=f;const p=(f.__vccOpts||f)[e];return p&&ks(p,n,s,o,a,r)()}))}}return i}function Y0(t,e){const n=[],s=[],r=[],i=Math.max(e.matched.length,t.matched.length);for(let o=0;o<i;o++){const a=e.matched[o];a&&(t.matched.find(u=>wi(u,a))?s.push(a):n.push(a));const l=t.matched[o];l&&(e.matched.find(u=>wi(u,l))||r.push(l))}return[n,s,r]}let J0=()=>location.protocol+"//"+location.host;function cv(t,e){const{pathname:n,search:s,hash:r}=e,i=t.indexOf("#");if(i>-1){let o=r.includes(t.slice(i))?t.slice(i).length:1,a=r.slice(o);return a[0]!=="/"&&(a="/"+a),em(a,"")}return em(n,t)+s+r}function X0(t,e,n,s){let r=[],i=[],o=null;const a=({state:p})=>{const g=cv(t,location),I=n.value,y=e.value;let D=0;if(p){if(n.value=g,e.value=p,o&&o===I){o=null;return}D=y?p.position-y.position:0}else s(g);r.forEach(V=>{V(n.value,I,{delta:D,type:nh.pop,direction:D?D>0?du.forward:du.back:du.unknown})})};function l(){o=n.value}function u(p){r.push(p);const g=()=>{const I=r.indexOf(p);I>-1&&r.splice(I,1)};return i.push(g),g}function h(){if(document.visibilityState==="hidden"){const{history:p}=window;if(!p.state)return;p.replaceState($e({},p.state,{scroll:ll()}),"")}}function f(){for(const p of i)p();i=[],window.removeEventListener("popstate",a),window.removeEventListener("pagehide",h),document.removeEventListener("visibilitychange",h)}return window.addEventListener("popstate",a),window.addEventListener("pagehide",h),document.addEventListener("visibilitychange",h),{pauseListeners:l,listen:u,destroy:f}}function im(t,e,n,s=!1,r=!1){return{back:t,current:e,forward:n,replaced:s,position:window.history.length,scroll:r?ll():null}}function Z0(t){const{history:e,location:n}=window,s={value:cv(t,n)},r={value:e.state};r.value||i(s.value,{back:null,current:s.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function i(l,u,h){const f=t.indexOf("#"),p=f>-1?(n.host&&document.querySelector("base")?t:t.slice(f))+l:J0()+t+l;try{e[h?"replaceState":"pushState"](u,"",p),r.value=u}catch(g){console.error(g),n[h?"replace":"assign"](p)}}function o(l,u){i(l,$e({},e.state,im(r.value.back,l,r.value.forward,!0),u,{position:r.value.position}),!0),s.value=l}function a(l,u){const h=$e({},r.value,e.state,{forward:l,scroll:ll()});i(h.current,h,!0),i(l,$e({},im(s.value,l,null),{position:h.position+1},u),!1),s.value=l}return{location:s,state:r,push:a,replace:o}}function eS(t){t=x0(t);const e=Z0(t),n=X0(t,e.state,e.location,e.replace);function s(i,o=!0){o||n.pauseListeners(),history.go(i)}const r=$e({location:"",base:t,go:s,createHref:U0.bind(null,t)},e,n);return Object.defineProperty(r,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(r,"state",{enumerable:!0,get:()=>e.state.value}),r}let Er=(function(t){return t[t.Static=0]="Static",t[t.Param=1]="Param",t[t.Group=2]="Group",t})({});var wt=(function(t){return t[t.Static=0]="Static",t[t.Param=1]="Param",t[t.ParamRegExp=2]="ParamRegExp",t[t.ParamRegExpEnd=3]="ParamRegExpEnd",t[t.EscapeNext=4]="EscapeNext",t})(wt||{});const tS={type:Er.Static,value:""},nS=/[a-zA-Z0-9_]/;function sS(t){if(!t)return[[]];if(t==="/")return[[tS]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(g){throw new Error(`ERR (${n})/"${u}": ${g}`)}let n=wt.Static,s=n;const r=[];let i;function o(){i&&r.push(i),i=[]}let a=0,l,u="",h="";function f(){u&&(n===wt.Static?i.push({type:Er.Static,value:u}):n===wt.Param||n===wt.ParamRegExp||n===wt.ParamRegExpEnd?(i.length>1&&(l==="*"||l==="+")&&e(`A repeatable param (${u}) must be alone in its segment. eg: '/:ids+.`),i.push({type:Er.Param,value:u,regexp:h,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):e("Invalid state to consume buffer"),u="")}function p(){u+=l}for(;a<t.length;){if(l=t[a++],l==="\\"&&n!==wt.ParamRegExp){s=n,n=wt.EscapeNext;continue}switch(n){case wt.Static:l==="/"?(u&&f(),o()):l===":"?(f(),n=wt.Param):p();break;case wt.EscapeNext:p(),n=s;break;case wt.Param:l==="("?n=wt.ParamRegExp:nS.test(l)?p():(f(),n=wt.Static,l!=="*"&&l!=="?"&&l!=="+"&&a--);break;case wt.ParamRegExp:l===")"?h[h.length-1]=="\\"?h=h.slice(0,-1)+l:n=wt.ParamRegExpEnd:h+=l;break;case wt.ParamRegExpEnd:f(),n=wt.Static,l!=="*"&&l!=="?"&&l!=="+"&&a--,h="";break;default:e("Unknown state");break}}return n===wt.ParamRegExp&&e(`Unfinished custom RegExp for param "${u}"`),f(),o(),r}const om="[^/]+?",rS={sensitive:!1,strict:!1,start:!0,end:!0};var jt=(function(t){return t[t._multiplier=10]="_multiplier",t[t.Root=90]="Root",t[t.Segment=40]="Segment",t[t.SubSegment=30]="SubSegment",t[t.Static=40]="Static",t[t.Dynamic=20]="Dynamic",t[t.BonusCustomRegExp=10]="BonusCustomRegExp",t[t.BonusWildcard=-50]="BonusWildcard",t[t.BonusRepeatable=-20]="BonusRepeatable",t[t.BonusOptional=-8]="BonusOptional",t[t.BonusStrict=.7000000000000001]="BonusStrict",t[t.BonusCaseSensitive=.25]="BonusCaseSensitive",t})(jt||{});const iS=/[.+*?^${}()[\]/\\]/g;function oS(t,e){const n=$e({},rS,e),s=[];let r=n.start?"^":"";const i=[];for(const u of t){const h=u.length?[]:[jt.Root];n.strict&&!u.length&&(r+="/");for(let f=0;f<u.length;f++){const p=u[f];let g=jt.Segment+(n.sensitive?jt.BonusCaseSensitive:0);if(p.type===Er.Static)f||(r+="/"),r+=p.value.replace(iS,"\\$&"),g+=jt.Static;else if(p.type===Er.Param){const{value:I,repeatable:y,optional:D,regexp:V}=p;i.push({name:I,repeatable:y,optional:D});const k=V||om;if(k!==om){g+=jt.BonusCustomRegExp;try{`${k}`}catch(C){throw new Error(`Invalid custom RegExp for param "${I}" (${k}): `+C.message)}}let _=y?`((?:${k})(?:/(?:${k}))*)`:`(${k})`;f||(_=D&&u.length<2?`(?:/${_})`:"/"+_),D&&(_+="?"),r+=_,g+=jt.Dynamic,D&&(g+=jt.BonusOptional),y&&(g+=jt.BonusRepeatable),k===".*"&&(g+=jt.BonusWildcard)}h.push(g)}s.push(h)}if(n.strict&&n.end){const u=s.length-1;s[u][s[u].length-1]+=jt.BonusStrict}n.strict||(r+="/?"),n.end?r+="$":n.strict&&!r.endsWith("/")&&(r+="(?:/|$)");const o=new RegExp(r,n.sensitive?"":"i");function a(u){const h=u.match(o),f={};if(!h)return null;for(let p=1;p<h.length;p++){const g=h[p]||"",I=i[p-1];f[I.name]=g&&I.repeatable?g.split("/"):g}return f}function l(u){let h="",f=!1;for(const p of t){(!f||!h.endsWith("/"))&&(h+="/"),f=!1;for(const g of p)if(g.type===Er.Static)h+=g.value;else if(g.type===Er.Param){const{value:I,repeatable:y,optional:D}=g,V=I in u?u[I]:"";if(In(V)&&!y)throw new Error(`Provided param "${I}" is an array but it is not repeatable (* or + modifiers)`);const k=In(V)?V.join("/"):V;if(!k)if(D)p.length<2&&(h.endsWith("/")?h=h.slice(0,-1):f=!0);else throw new Error(`Missing required param "${I}"`);h+=k}}return h||"/"}return{re:o,score:s,keys:i,parse:a,stringify:l}}function aS(t,e){let n=0;for(;n<t.length&&n<e.length;){const s=e[n]-t[n];if(s)return s;n++}return t.length<e.length?t.length===1&&t[0]===jt.Static+jt.Segment?-1:1:t.length>e.length?e.length===1&&e[0]===jt.Static+jt.Segment?1:-1:0}function lv(t,e){let n=0;const s=t.score,r=e.score;for(;n<s.length&&n<r.length;){const i=aS(s[n],r[n]);if(i)return i;n++}if(Math.abs(r.length-s.length)===1){if(am(s))return 1;if(am(r))return-1}return r.length-s.length}function am(t){const e=t[t.length-1];return t.length>0&&e[e.length-1]<0}const cS={strict:!1,end:!0,sensitive:!1};function lS(t,e,n){const s=oS(sS(t.path),n),r=$e(s,{record:t,parent:e,children:[],alias:[]});return e&&!r.record.aliasOf==!e.record.aliasOf&&e.children.push(r),r}function uS(t,e){const n=[],s=new Map;e=Zp(cS,e);function r(f){return s.get(f)}function i(f,p,g){const I=!g,y=lm(f);y.aliasOf=g&&g.record;const D=Zp(e,f),V=[y];if("alias"in f){const C=typeof f.alias=="string"?[f.alias]:f.alias;for(const O of C)V.push(lm($e({},y,{components:g?g.record.components:y.components,path:O,aliasOf:g?g.record:y})))}let k,_;for(const C of V){const{path:O}=C;if(p&&O[0]!=="/"){const U=p.record.path,E=U[U.length-1]==="/"?"":"/";C.path=p.record.path+(O&&E+O)}if(k=lS(C,p,D),g?g.alias.push(k):(_=_||k,_!==k&&_.alias.push(k),I&&f.name&&!um(k)&&o(f.name)),uv(k)&&l(k),y.children){const U=y.children;for(let E=0;E<U.length;E++)i(U[E],k,g&&g.children[E])}g=g||k}return _?()=>{o(_)}:Ro}function o(f){if(ov(f)){const p=s.get(f);p&&(s.delete(f),n.splice(n.indexOf(p),1),p.children.forEach(o),p.alias.forEach(o))}else{const p=n.indexOf(f);p>-1&&(n.splice(p,1),f.record.name&&s.delete(f.record.name),f.children.forEach(o),f.alias.forEach(o))}}function a(){return n}function l(f){const p=dS(f,n);n.splice(p,0,f),f.record.name&&!um(f)&&s.set(f.record.name,f)}function u(f,p){let g,I={},y,D;if("name"in f&&f.name){if(g=s.get(f.name),!g)throw bi(st.MATCHER_NOT_FOUND,{location:f});D=g.record.name,I=$e(cm(p.params,g.keys.filter(_=>!_.optional).concat(g.parent?g.parent.keys.filter(_=>_.optional):[]).map(_=>_.name)),f.params&&cm(f.params,g.keys.map(_=>_.name))),y=g.stringify(I)}else if(f.path!=null)y=f.path,g=n.find(_=>_.re.test(y)),g&&(I=g.parse(y),D=g.record.name);else{if(g=p.name?s.get(p.name):n.find(_=>_.re.test(p.path)),!g)throw bi(st.MATCHER_NOT_FOUND,{location:f,currentLocation:p});D=g.record.name,I=$e({},p.params,f.params),y=g.stringify(I)}const V=[];let k=g;for(;k;)V.unshift(k.record),k=k.parent;return{name:D,path:y,params:I,matched:V,meta:fS(V)}}t.forEach(f=>i(f));function h(){n.length=0,s.clear()}return{addRoute:i,resolve:u,removeRoute:o,clearRoutes:h,getRoutes:a,getRecordMatcher:r}}function cm(t,e){const n={};for(const s of e)s in t&&(n[s]=t[s]);return n}function lm(t){const e={path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:t.aliasOf,beforeEnter:t.beforeEnter,props:hS(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}};return Object.defineProperty(e,"mods",{value:{}}),e}function hS(t){const e={},n=t.props||!1;if("component"in t)e.default=n;else for(const s in t.components)e[s]=typeof n=="object"?n[s]:n;return e}function um(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function fS(t){return t.reduce((e,n)=>$e(e,n.meta),{})}function dS(t,e){let n=0,s=e.length;for(;n!==s;){const i=n+s>>1;lv(t,e[i])<0?s=i:n=i+1}const r=pS(t);return r&&(s=e.lastIndexOf(r,s-1)),s}function pS(t){let e=t;for(;e=e.parent;)if(uv(e)&&lv(t,e)===0)return e}function uv({record:t}){return!!(t.name||t.components&&Object.keys(t.components).length||t.redirect)}function hm(t){const e=Ot(ff),n=Ot(df),s=je(()=>{const l=We(t.to);return e.resolve(l)}),r=je(()=>{const{matched:l}=s.value,{length:u}=l,h=l[u-1],f=n.matched;if(!h||!f.length)return-1;const p=f.findIndex(wi.bind(null,h));if(p>-1)return p;const g=fm(l[u-2]);return u>1&&fm(h)===g&&f[f.length-1].path!==g?f.findIndex(wi.bind(null,l[u-2])):p}),i=je(()=>r.value>-1&&vS(n.params,s.value.params)),o=je(()=>r.value>-1&&r.value===n.matched.length-1&&iv(n.params,s.value.params));function a(l={}){if(yS(l)){const u=e[We(t.replace)?"replace":"push"](We(t.to)).catch(Ro);return t.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>u),u}return Promise.resolve()}return{route:s,href:je(()=>s.value.href),isActive:i,isExactActive:o,navigate:a}}function mS(t){return t.length===1?t[0]:t}const gS=ct({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:hm,setup(t,{slots:e}){const n=nr(hm(t)),{options:s}=Ot(ff),r=je(()=>({[dm(t.activeClass,s.linkActiveClass,"router-link-active")]:n.isActive,[dm(t.exactActiveClass,s.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const i=e.default&&mS(e.default(n));return t.custom?i:it("a",{"aria-current":n.isExactActive?t.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:r.value},i)}}}),_S=gS;function yS(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function vS(t,e){for(const n in e){const s=e[n],r=t[n];if(typeof s=="string"){if(s!==r)return!1}else if(!In(r)||r.length!==s.length||s.some((i,o)=>i.valueOf()!==r[o].valueOf()))return!1}return!0}function fm(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const dm=(t,e,n)=>t??e??n,ES=ct({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:e,slots:n}){const s=Ot(rh),r=je(()=>t.route||s.value),i=Ot(rm,0),o=je(()=>{let u=We(i);const{matched:h}=r.value;let f;for(;(f=h[u])&&!f.components;)u++;return u}),a=je(()=>r.value.matched[o.value]);Zn(rm,je(()=>o.value+1)),Zn(Q0,a),Zn(rh,r);const l=de();return es(()=>[l.value,a.value,t.name],([u,h,f],[p,g,I])=>{h&&(h.instances[f]=u,g&&g!==h&&u&&u===p&&(h.leaveGuards.size||(h.leaveGuards=g.leaveGuards),h.updateGuards.size||(h.updateGuards=g.updateGuards))),u&&h&&(!g||!wi(h,g)||!p)&&(h.enterCallbacks[f]||[]).forEach(y=>y(u))},{flush:"post"}),()=>{const u=r.value,h=t.name,f=a.value,p=f&&f.components[h];if(!p)return pm(n.default,{Component:p,route:u});const g=f.props[h],I=g?g===!0?u.params:typeof g=="function"?g(u):g:null,D=it(p,$e({},I,e,{onVnodeUnmounted:V=>{V.component.isUnmounted&&(f.instances[h]=null)},ref:l}));return pm(n.default,{Component:D,route:u})||D}}});function pm(t,e){if(!t)return null;const n=t(e);return n.length===1?n[0]:n}const hv=ES;function TS(t){const e=uS(t.routes,t),n=t.parseQuery||z0,s=t.stringifyQuery||sm,r=t.history,i=uo(),o=uo(),a=uo(),l=cs(un);let u=un;Yr&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const h=hu.bind(null,B=>""+B),f=hu.bind(null,k0),p=hu.bind(null,Ho);function g(B,ne){let z,W;return ov(B)?(z=e.getRecordMatcher(B),W=ne):W=B,e.addRoute(W,z)}function I(B){const ne=e.getRecordMatcher(B);ne&&e.removeRoute(ne)}function y(){return e.getRoutes().map(B=>B.record)}function D(B){return!!e.getRecordMatcher(B)}function V(B,ne){if(ne=$e({},ne||l.value),typeof B=="string"){const N=fu(n,B,ne.path),M=e.resolve({path:N.path},ne),J=r.createHref(N.fullPath);return $e(N,M,{params:p(M.params),hash:Ho(N.hash),redirectedFrom:void 0,href:J})}let z;if(B.path!=null)z=$e({},B,{path:fu(n,B.path,ne.path).path});else{const N=$e({},B.params);for(const M in N)N[M]==null&&delete N[M];z=$e({},B,{params:f(N)}),ne.params=f(ne.params)}const W=e.resolve(z,ne),he=B.hash||"";W.params=h(p(W.params));const ke=O0(s,$e({},B,{hash:S0(he),path:W.path})),P=r.createHref(ke);return $e({fullPath:ke,hash:he,query:s===sm?K0(B.query):B.query||{}},W,{redirectedFrom:void 0,href:P})}function k(B){return typeof B=="string"?fu(n,B,l.value.path):$e({},B)}function _(B,ne){if(u!==B)return bi(st.NAVIGATION_CANCELLED,{from:ne,to:B})}function C(B){return E(B)}function O(B){return C($e(k(B),{replace:!0}))}function U(B,ne){const z=B.matched[B.matched.length-1];if(z&&z.redirect){const{redirect:W}=z;let he=typeof W=="function"?W(B,ne):W;return typeof he=="string"&&(he=he.includes("?")||he.includes("#")?he=k(he):{path:he},he.params={}),$e({query:B.query,hash:B.hash,params:he.path!=null?{}:B.params},he)}}function E(B,ne){const z=u=V(B),W=l.value,he=B.state,ke=B.force,P=B.replace===!0,N=U(z,W);if(N)return E($e(k(N),{state:typeof N=="object"?$e({},he,N.state):he,force:ke,replace:P}),ne||z);const M=z;M.redirectedFrom=ne;let J;return!ke&&V0(s,W,z)&&(J=bi(st.NAVIGATION_DUPLICATED,{to:M,from:W}),q(W,W,!0,!1)),(J?Promise.resolve(J):R(M,W)).catch(G=>Gn(G)?Gn(G,st.NAVIGATION_GUARD_REDIRECT)?G:H(G):L(G,M,W)).then(G=>{if(G){if(Gn(G,st.NAVIGATION_GUARD_REDIRECT))return E($e({replace:P},k(G.to),{state:typeof G.to=="object"?$e({},he,G.to.state):he,force:ke}),ne||M)}else G=A(M,W,!0,P,he);return S(M,W,G),G})}function b(B,ne){const z=_(B,ne);return z?Promise.reject(z):Promise.resolve()}function v(B){const ne=me.values().next().value;return ne&&typeof ne.runWithContext=="function"?ne.runWithContext(B):B()}function R(B,ne){let z;const[W,he,ke]=Y0(B,ne);z=pu(W.reverse(),"beforeRouteLeave",B,ne);for(const N of W)N.leaveGuards.forEach(M=>{z.push(ks(M,B,ne))});const P=b.bind(null,B,ne);return z.push(P),ge(z).then(()=>{z=[];for(const N of i.list())z.push(ks(N,B,ne));return z.push(P),ge(z)}).then(()=>{z=pu(he,"beforeRouteUpdate",B,ne);for(const N of he)N.updateGuards.forEach(M=>{z.push(ks(M,B,ne))});return z.push(P),ge(z)}).then(()=>{z=[];for(const N of ke)if(N.beforeEnter)if(In(N.beforeEnter))for(const M of N.beforeEnter)z.push(ks(M,B,ne));else z.push(ks(N.beforeEnter,B,ne));return z.push(P),ge(z)}).then(()=>(B.matched.forEach(N=>N.enterCallbacks={}),z=pu(ke,"beforeRouteEnter",B,ne,v),z.push(P),ge(z))).then(()=>{z=[];for(const N of o.list())z.push(ks(N,B,ne));return z.push(P),ge(z)}).catch(N=>Gn(N,st.NAVIGATION_CANCELLED)?N:Promise.reject(N))}function S(B,ne,z){a.list().forEach(W=>v(()=>W(B,ne,z)))}function A(B,ne,z,W,he){const ke=_(B,ne);if(ke)return ke;const P=ne===un,N=Yr?history.state:{};z&&(W||P?r.replace(B.fullPath,$e({scroll:P&&N&&N.scroll},he)):r.push(B.fullPath,he)),l.value=B,q(B,ne,z,P),H()}let w;function ue(){w||(w=r.listen((B,ne,z)=>{if(!we.listening)return;const W=V(B),he=U(W,we.currentRoute.value);if(he){E($e(he,{replace:!0,force:!0}),W).catch(Ro);return}u=W;const ke=l.value;Yr&&H0(nm(ke.fullPath,z.delta),ll()),R(W,ke).catch(P=>Gn(P,st.NAVIGATION_ABORTED|st.NAVIGATION_CANCELLED)?P:Gn(P,st.NAVIGATION_GUARD_REDIRECT)?(E($e(k(P.to),{force:!0}),W).then(N=>{Gn(N,st.NAVIGATION_ABORTED|st.NAVIGATION_DUPLICATED)&&!z.delta&&z.type===nh.pop&&r.go(-1,!1)}).catch(Ro),Promise.reject()):(z.delta&&r.go(-z.delta,!1),L(P,W,ke))).then(P=>{P=P||A(W,ke,!1),P&&(z.delta&&!Gn(P,st.NAVIGATION_CANCELLED)?r.go(-z.delta,!1):z.type===nh.pop&&Gn(P,st.NAVIGATION_ABORTED|st.NAVIGATION_DUPLICATED)&&r.go(-1,!1)),S(W,ke,P)}).catch(Ro)}))}let Ee=uo(),ae=uo(),j;function L(B,ne,z){H(B);const W=ae.list();return W.length?W.forEach(he=>he(B,ne,z)):console.error(B),Promise.reject(B)}function Y(){return j&&l.value!==un?Promise.resolve():new Promise((B,ne)=>{Ee.add([B,ne])})}function H(B){return j||(j=!B,ue(),Ee.list().forEach(([ne,z])=>B?z(B):ne()),Ee.reset()),B}function q(B,ne,z,W){const{scrollBehavior:he}=t;if(!Yr||!he)return Promise.resolve();const ke=!z&&j0(nm(B.fullPath,0))||(W||!z)&&history.state&&history.state.scroll||null;return zs().then(()=>he(B,ne,ke)).then(P=>P&&$0(P)).catch(P=>L(P,B,ne))}const F=B=>r.go(B);let ie;const me=new Set,we={currentRoute:l,listening:!0,addRoute:g,removeRoute:I,clearRoutes:e.clearRoutes,hasRoute:D,getRoutes:y,resolve:V,options:t,push:C,replace:O,go:F,back:()=>F(-1),forward:()=>F(1),beforeEach:i.add,beforeResolve:o.add,afterEach:a.add,onError:ae.add,isReady:Y,install(B){B.component("RouterLink",_S),B.component("RouterView",hv),B.config.globalProperties.$router=we,Object.defineProperty(B.config.globalProperties,"$route",{enumerable:!0,get:()=>We(l)}),Yr&&!ie&&l.value===un&&(ie=!0,C(r.location).catch(W=>{}));const ne={};for(const W in un)Object.defineProperty(ne,W,{get:()=>l.value[W],enumerable:!0});B.provide(ff,we),B.provide(df,On(ne)),B.provide(rh,l);const z=B.unmount;me.add(B),B.unmount=function(){me.delete(B),me.size<1&&(u=un,w&&w(),w=null,l.value=un,ie=!1,j=!1),z()}}};function ge(B){return B.reduce((ne,z)=>ne.then(()=>v(z)),Promise.resolve())}return we}function fv(t){return Ot(df)}const wS=/(:\w+)\([^)]+\)/g,bS=/(:\w+)[?+*]/g,IS=/:\w+/g,AS=(t,e)=>e.path.replace(wS,"$1").replace(bS,"$1").replace(IS,n=>t.params[n.slice(1)]?.toString()||""),ih=(t,e)=>{const n=t.route.matched.find(r=>r.components?.default===t.Component.type),s=e??n?.meta.key??(n&&AS(t.route,n));return typeof s=="function"?s(t.route):s},RS=(t,e)=>({default:()=>t?it(Ib,t===!0?{}:t,e):e});function pf(t){return Array.isArray(t)?t:[t]}const SS="modulepreload",CS=function(t,e){return new URL(t,e).href},mm={},ut=function(e,n,s){let r=Promise.resolve();if(n&&n.length>0){let u=function(h){return Promise.all(h.map(f=>Promise.resolve(f).then(p=>({status:"fulfilled",value:p}),p=>({status:"rejected",reason:p}))))};const o=document.getElementsByTagName("link"),a=document.querySelector("meta[property=csp-nonce]"),l=a?.nonce||a?.getAttribute("nonce");r=u(n.map(h=>{if(h=CS(h,s),h in mm)return;mm[h]=!0;const f=h.endsWith(".css"),p=f?'[rel="stylesheet"]':"";if(s)for(let I=o.length-1;I>=0;I--){const y=o[I];if(y.href===h&&(!f||y.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${h}"]${p}`))return;const g=document.createElement("link");if(g.rel=f?"stylesheet":SS,f||(g.as="script"),g.crossOrigin="",g.href=h,l&&g.setAttribute("nonce",l),document.head.appendChild(g),f)return new Promise((I,y)=>{g.addEventListener("load",I),g.addEventListener("error",()=>y(new Error(`Unable to preload CSS for ${h}`)))})}))}function i(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return r.then(o=>{for(const a of o||[])a.status==="rejected"&&i(a.reason);return e().catch(i)})},PS={layout:!1},kS={layout:!1},NS={layout:!1},DS={layout:"dashboard"},OS={layout:"dashboard"},VS={layout:"coach"},LS={layout:"dashboard"},MS={layout:"coach"},xS={layout:"dashboard"},FS={layout:"dashboard"},mu=[{name:"index",path:"/",meta:PS||{},component:()=>ut(()=>import("./g0qd8nQy.js"),__vite__mapDeps([0,1]),import.meta.url)},{name:"profilo",path:"/profilo",meta:kS||{},component:()=>ut(()=>import("./B1CjiiXm.js"),[],import.meta.url)},{name:"slug",path:"/:slug(.*)*",component:()=>ut(()=>import("./DmTfnK0W.js"),__vite__mapDeps([2,3]),import.meta.url)},{name:"dev-upload",path:"/dev-upload",meta:NS||{},component:()=>ut(()=>import("./CPTjFm2G.js"),__vite__mapDeps([4,5,6]),import.meta.url)},{name:"panoramica",path:"/panoramica",meta:DS||{},component:()=>ut(()=>import("./DWQDgxJu.js"),__vite__mapDeps([7,8,9,10,11,12,13]),import.meta.url)},{name:"piste-id",path:"/piste/:id()",meta:OS||{},component:()=>ut(()=>import("./cJ8rrSTd.js"),__vite__mapDeps([14,15,16,17,9,10,18,11,12,19]),import.meta.url)},{name:"dev-cleanup",path:"/dev-cleanup",component:()=>ut(()=>import("./BM3pL6LL.js"),__vite__mapDeps([20,5,9,10,21]),import.meta.url)},{name:"piloti-id",path:"/piloti/:id()",meta:{...VS||{},middleware:["coach-or-admin"]},component:()=>ut(()=>import("./BiKyPXTo.js"),__vite__mapDeps([22,5,15,16,17,9,10,18,11,12,19,23,24,8,13,25,26,27,28,29]),import.meta.url)},{name:"piste",path:"/piste",meta:LS||{},component:()=>ut(()=>import("./B75KE3Ue.js"),__vite__mapDeps([30,27,9,10,11,12,28]),import.meta.url)},{name:"piloti",path:"/piloti",meta:{...MS||{},middleware:["coach-or-admin"]},component:()=>ut(()=>import("./Bnd8zWnv.js"),__vite__mapDeps([31,5,32]),import.meta.url)},{name:"sessioni-id",path:"/sessioni/:id()",meta:xS||{},component:()=>ut(()=>import("./B6G_Djoo.js"),__vite__mapDeps([33,23,9,10,18,12,24]),import.meta.url)},{name:"dev-data-audit",path:"/dev-data-audit",component:()=>ut(()=>import("./C690ZVps.js"),__vite__mapDeps([34,5,9,10,35]),import.meta.url)},{name:"sessioni",path:"/sessioni",meta:FS||{},component:()=>ut(()=>import("./FDqdPEuP.js"),__vite__mapDeps([36,25,16,17,9,10,12,26]),import.meta.url)}],dv=(t,e)=>({default:()=>t?it(oa,t===!0?{}:t,e):e.default?.()}),US=/(:\w+)\([^)]+\)/g,BS=/(:\w+)[?+*]/g,$S=/:\w+/g;function gm(t){const e=t?.meta.key??t.path.replace(US,"$1").replace(BS,"$1").replace($S,n=>t.params[n.slice(1)]?.toString()||"");return typeof e=="function"?e(t):e}function HS(t,e){return t===e||e===un?!1:gm(t)!==gm(e)?!0:!t.matched.every((s,r)=>s.components&&s.components.default===e.matched[r]?.components?.default)}function jS(t,e=!1){if(t){if(t.nodeName==="#comment"&&t.nodeValue==="[")return pv(t,[],e);if(e){const n=t.cloneNode(!0);return n.querySelectorAll("[data-island-slot]").forEach(s=>{s.innerHTML=""}),[n.outerHTML]}return[t.outerHTML]}}function pv(t,e=[],n=!1){if(t&&t.nodeName){if(WS(t))return e;if(!qS(t)){const s=t.cloneNode(!0);n&&s.querySelectorAll?.("[data-island-slot]").forEach(r=>{r.innerHTML=""}),e.push(s.outerHTML)}pv(t.nextSibling,e,n)}return e}function gu(t,e){const n=t?jS(t):[e];return n?_y(n.join(""),n.length):it("div")}function qS(t){return t.nodeName==="#comment"&&t.nodeValue==="["}function WS(t){return t.nodeName==="#comment"&&t.nodeValue==="]"}const GS={scrollBehavior(t,e,n){const s=at(),r=Gt().options?.scrollBehaviorType??"auto";if(t.path.replace(/\/$/,"")===e.path.replace(/\/$/,""))return e.hash&&!t.hash?{left:0,top:0}:t.hash?{el:t.hash,top:mv(t.hash),behavior:r}:!1;if((typeof t.meta.scrollToTop=="function"?t.meta.scrollToTop(t,e):t.meta.scrollToTop)===!1)return!1;const o=s._runningTransition?"page:transition:finish":"page:loading:end";return new Promise(a=>{if(e===un){a(_m(t,e,n,r));return}s.hooks.hookOnce(o,()=>{requestAnimationFrame(()=>a(_m(t,e,n,r)))})})}};function mv(t){try{const e=document.querySelector(t);if(e)return(Number.parseFloat(getComputedStyle(e).scrollMarginTop)||0)+(Number.parseFloat(getComputedStyle(document.documentElement).scrollPaddingTop)||0)}catch{}return 0}function _m(t,e,n,s){if(n)return n;const r=HS(t,e);return t.hash?{el:t.hash,top:mv(t.hash),behavior:r?s:"instant"}:{left:0,top:0}}const zS={hashMode:!1,scrollBehaviorType:"auto"},bs={...zS,...GS},KS=async(t,e)=>{let n,s;if(!t.meta?.validate)return;const r=([n,s]=hi(()=>Promise.resolve(t.meta.validate(t))),n=await n,s(),n);if(r===!0)return;const i=Ar({fatal:!0,statusCode:r&&r.statusCode||404,statusMessage:r&&r.statusMessage||`Page Not Found: ${t.fullPath}`,data:{path:t.fullPath}});return typeof window<"u"&&window.history.pushState({},"",e.fullPath),i},QS=async t=>{let e,n;const s=([e,n]=hi(()=>lf({path:t.path})),e=await e,n(),e);if(s.redirect){const r=s.redirect.includes("#")?s.redirect:s.redirect+t.hash;return Fr(r,{acceptRelative:!0})?(window.location.href=r,!1):r}},YS=[KS,QS],oh={"coach-or-admin":()=>ut(()=>import("./CO09oNMJ.js"),[],import.meta.url),coach:()=>ut(()=>import("./CeuSJxa-.js"),[],import.meta.url)};function JS(t,e,n){const{pathname:s,search:r,hash:i}=e,o=t.indexOf("#");if(o>-1){const u=i.includes(t.slice(o))?t.slice(o).length:1;let h=i.slice(u);return h[0]!=="/"&&(h="/"+h),Lp(h,"")}const a=Lp(s,t),l=!n||RA(a,n)?a:n;return l+(l.includes("?")?"":r)+i}const XS=$n({name:"nuxt:router",enforce:"pre",async setup(t){let e,n,s=ol().app.baseURL;const r=bs.history?.(s)??eS(s),i=bs.routes?([e,n]=hi(()=>bs.routes(mu)),e=await e,n(),e??mu):mu;let o;const a=TS({...bs,scrollBehavior:(D,V,k)=>{if(V===un){o=k;return}if(bs.scrollBehavior){if(a.options.scrollBehavior=bs.scrollBehavior,"scrollRestoration"in window.history){const _=a.beforeEach(()=>{_(),window.history.scrollRestoration="manual"})}return bs.scrollBehavior(D,un,o||k)}},history:r,routes:i});"scrollRestoration"in window.history&&(window.history.scrollRestoration="auto"),t.vueApp.use(a);const l=cs(a.currentRoute.value);a.afterEach((D,V)=>{l.value=V}),Object.defineProperty(t.vueApp.config.globalProperties,"previousRoute",{get:()=>l.value});const u=JS(s,window.location,t.payload.path),h=cs(a.currentRoute.value),f=()=>{h.value=a.currentRoute.value};a.afterEach((D,V)=>{D.matched.at(-1)?.components?.default===V.matched.at(-1)?.components?.default&&f()});const p={sync:f};for(const D in h.value)Object.defineProperty(p,D,{get:()=>h.value[D],enumerable:!0});t._route=On(p),t._middleware||={global:[],named:{}};const g=al();a.afterEach(async(D,V,k)=>{delete t._processingMiddleware,!t.isHydrating&&g.value&&await t.runWithContext(wR),k&&await t.callHook("page:loading:end")});try{[e,n]=hi(()=>a.isReady()),await e,n()}catch(D){[e,n]=hi(()=>t.runWithContext(()=>_r(D))),await e,n()}const I=u!==a.currentRoute.value.fullPath?a.resolve(u):a.currentRoute.value;f();const y=t.payload.state._layout;return a.beforeEach(async(D,V)=>{await t.callHook("page:loading:start"),D.meta=nr(D.meta),t.isHydrating&&y&&!Un(D.meta.layout)&&(D.meta.layout=y),t._processingMiddleware=!0;{const k=new Set([...YS,...t._middleware.global]);for(const _ of D.matched){const C=_.meta.middleware;if(C)for(const O of pf(C))k.add(O)}{const _=await t.runWithContext(()=>lf({path:D.path}));if(_.appMiddleware)for(const C in _.appMiddleware)_.appMiddleware[C]?k.add(C):k.delete(C)}for(const _ of k){const C=typeof _=="string"?t._middleware.named[_]||await oh[_]?.().then(O=>O.default||O):_;if(!C)throw new Error(`Unknown route middleware: '${_}'.`);try{const O=await t.runWithContext(()=>C(D,V));if(!t.payload.serverRendered&&t.isHydrating&&(O===!1||O instanceof Error)){const U=O||Ar({statusCode:404,statusMessage:`Page Not Found: ${u}`});return await t.runWithContext(()=>_r(U)),!1}if(O===!0)continue;if(O===!1)return O;if(O)return qy(O)&&O.fatal&&await t.runWithContext(()=>_r(O)),O}catch(O){const U=Ar(O);return U.fatal&&await t.runWithContext(()=>_r(U)),U}}}}),a.onError(async()=>{delete t._processingMiddleware,await t.callHook("page:loading:end")}),a.afterEach(D=>{if(D.matched.length===0)return t.runWithContext(()=>_r(Ar({statusCode:404,fatal:!1,statusMessage:`Page not found: ${D.fullPath}`,data:{path:D.fullPath}})))}),t.hooks.hookOnce("app:created",async()=>{try{"name"in I&&(I.name=void 0),await a.replace({...I,force:!0}),a.options.scrollBehavior=bs.scrollBehavior}catch(D){await t.runWithContext(()=>_r(D))}}),{provide:{router:a}}}}),ym=globalThis.requestIdleCallback||(t=>{const e=Date.now(),n={didTimeout:!1,timeRemaining:()=>Math.max(0,50-(Date.now()-e))};return setTimeout(()=>{t(n)},1)}),kM=globalThis.cancelIdleCallback||(t=>{clearTimeout(t)}),mf=t=>{const e=at();e.isHydrating?e.hooks.hookOnce("app:suspense:resolve",()=>{ym(()=>t())}):ym(()=>t())},ZS=$n({name:"nuxt:payload",setup(t){const e=new Set;Gt().beforeResolve(async(n,s)=>{if(n.path===s.path)return;const r=await Xp(n.path);if(r){for(const i of e)delete t.static.data[i];for(const i in r.data)i in t.static.data||e.add(i),t.static.data[i]=r.data[i]}}),mf(()=>{t.hooks.hook("link:prefetch",async n=>{const{hostname:s}=new URL(n,window.location.href);s===window.location.hostname&&await Xp(n).catch(()=>{console.warn("[nuxt] Error preloading payload for",n)})}),navigator.connection?.effectiveType!=="slow-2g"&&setTimeout(cl,1e3)})}}),eC=$n(()=>{const t=Gt();mf(()=>{t.beforeResolve(async()=>{await new Promise(e=>{setTimeout(e,100),requestAnimationFrame(()=>{setTimeout(e,0)})})})})}),tC=$n(t=>{let e;async function n(){let s;try{s=await cl()}catch(r){const i=r;if(!("status"in i&&(i.status===404||i.status===403)))throw i}e&&clearTimeout(e),e=setTimeout(n,Hp);try{const r=await $fetch(af("builds/latest.json")+`?${Date.now()}`);r.id!==s?.id&&(t.hooks.callHook("app:manifest:update",r),e&&clearTimeout(e))}catch{}}mf(()=>{e=setTimeout(n,Hp)})});function nC(t={}){const e=t.path||window.location.pathname;let n={};try{n=wc(sessionStorage.getItem("nuxt:reload")||"{}")}catch{}if(t.force||n?.path!==e||n?.expires<Date.now()){try{sessionStorage.setItem("nuxt:reload",JSON.stringify({path:e,expires:Date.now()+(t.ttl??1e4)}))}catch{}if(t.persistState)try{sessionStorage.setItem("nuxt:reload:state",JSON.stringify({state:at().payload.state}))}catch{}window.location.pathname!==e?window.location.href=e:window.location.reload()}}const sC=$n({name:"nuxt:chunk-reload",setup(t){const e=Gt(),n=ol(),s=new Set;e.beforeEach(()=>{s.clear()}),t.hook("app:chunkError",({error:i})=>{s.add(i)});function r(i){const o=rf(n.app.baseURL,i.fullPath);nC({path:o,persistState:!0})}t.hook("app:manifest:update",()=>{e.beforeResolve(r)}),e.onError((i,o)=>{s.has(i)&&r(o)})}}),rC=$n({name:"nuxt:global-components"}),Ms={coach:gc(()=>ut(()=>import("./owMeTLgq.js"),__vite__mapDeps([37,38]),import.meta.url).then(t=>t.default||t)),dashboard:gc(()=>ut(()=>import("./DhRmex7A.js"),__vite__mapDeps([39,5,40]),import.meta.url).then(t=>t.default||t))};function iC(t){if(t?.__asyncLoader&&!t.__asyncResolved)return t.__asyncLoader()}async function oC(t,e=Gt()){const{path:n,matched:s}=e.resolve(t);if(!s.length||(e._routePreloaded||=new Set,e._routePreloaded.has(n)))return;const r=e._preloadPromises||=[];if(r.length>4)return Promise.all(r).then(()=>oC(t,e));e._routePreloaded.add(n);for(const i of s){const o=i.components?.default;if(typeof o!="function")continue;const a=Promise.resolve(o()).catch(()=>{}).finally(()=>r.splice(r.indexOf(a)));r.push(a)}await Promise.all(r)}const aC=$n({name:"nuxt:prefetch",setup(t){const e=Gt();t.hooks.hook("app:mounted",()=>{e.beforeEach(async n=>{const s=n?.meta?.layout;s&&typeof Ms[s]=="function"&&await Ms[s]()})}),t.hooks.hook("link:prefetch",n=>{if(Fr(n))return;const s=e.resolve(n);if(!s)return;const r=s.meta.layout;let i=pf(s.meta.middleware);i=i.filter(o=>typeof o=="string");for(const o of i)typeof oh[o]=="function"&&oh[o]();typeof r=="string"&&r in Ms&&iC(Ms[r])})}}),cC={mounted(t,e){t._clickOutside=n=>{t===n.target||t.contains(n.target)||e.value(n)},document.addEventListener("click",t._clickOutside)},unmounted(t){t._clickOutside&&document.removeEventListener("click",t._clickOutside)}},lC=$n(t=>{t.vueApp.directive("click-outside",cC)}),uC=[h0,g0,XS,ZS,eC,tC,sC,rC,aC,lC],hC={class:"notification-icon"},fC={key:0,width:"16",height:"16",viewBox:"0 0 16 16"},dC={key:1,width:"16",height:"16",viewBox:"0 0 16 16"},pC={key:2,width:"16",height:"16",viewBox:"0 0 16 16"},mC={class:"notification-message"},gC=ct({__name:"SyncNotification",props:{results:{},visible:{type:Boolean}},emits:["close"],setup(t,{emit:e}){const n=t,s=e,r=de(!1);let i=null;es(()=>n.visible,h=>{r.value=h,h&&i&&clearTimeout(i),h&&(i=setTimeout(()=>{r.value=!1,s("close")},5e3))});const o=je(()=>{const h=n.results.filter(I=>I.status==="created").length,f=n.results.filter(I=>I.status==="updated").length,p=n.results.filter(I=>I.status==="skipped").length,g=n.results.filter(I=>I.status==="error").length;return{created:h,updated:f,skipped:p,errors:g,total:n.results.length}}),a=je(()=>o.value.errors>0?"error":o.value.created>0||o.value.updated>0?"success":(o.value.total===0,"info")),l=je(()=>{const h=o.value;return h.total===0?"Nessun file da sincronizzare":h.errors>0?`${h.errors} errori durante la sincronizzazione`:h.created>0&&h.updated>0?`${h.created} nuovi, ${h.updated} aggiornati`:h.created>0?`${h.created} sessioni sincronizzate`:h.updated>0?`${h.updated} sessioni aggiornate`:h.skipped>0?`${h.skipped} file saltati (gi sincronizzati o di altri utenti)`:"Sincronizzazione completata"}),u=()=>{r.value=!1,s("close")};return(h,f)=>(Te(),Yt(oa,{name:"slide"},{default:an(()=>[r.value?(Te(),Oe("div",{key:0,class:Wt(["sync-notification",a.value]),onClick:u},[K("div",hC,[a.value==="success"?(Te(),Oe("svg",fC,[...f[0]||(f[0]=[K("path",{d:"M6 10.8l-3-3L1.6 9.2l4.4 4.4 9-9L13.6 3 6 10.8z",fill:"currentColor"},null,-1)])])):a.value==="error"?(Te(),Oe("svg",dC,[...f[1]||(f[1]=[K("path",{d:"M8 1a7 7 0 100 14A7 7 0 008 1zm0 10.5a1 1 0 110-2 1 1 0 010 2zM9 7H7V4h2v3z",fill:"currentColor"},null,-1)])])):(Te(),Oe("svg",pC,[...f[2]||(f[2]=[K("path",{d:"M8 1a7 7 0 100 14A7 7 0 008 1zm1 10H7V9h2v2zm0-3H7V4h2v4z",fill:"currentColor"},null,-1)])]))]),K("span",mC,Gs(l.value),1),K("button",{class:"notification-close",onClick:il(u,["stop"])},"")],2)):Qs("",!0)]),_:1}))}}),pn=(t,e)=>{const n=t.__vccOpts||t;for(const[s,r]of e)n[s]=r;return n},_C=Object.assign(pn(gC,[["__scopeId","data-v-2cbc757e"]]),{__name:"ElectronSyncNotification"}),yC=()=>{};var vm={};const gv=function(t){const e=[];let n=0;for(let s=0;s<t.length;s++){let r=t.charCodeAt(s);r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=r&63|128):(r&64512)===55296&&s+1<t.length&&(t.charCodeAt(s+1)&64512)===56320?(r=65536+((r&1023)<<10)+(t.charCodeAt(++s)&1023),e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=r&63|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=r&63|128)}return e},vC=function(t){const e=[];let n=0,s=0;for(;n<t.length;){const r=t[n++];if(r<128)e[s++]=String.fromCharCode(r);else if(r>191&&r<224){const i=t[n++];e[s++]=String.fromCharCode((r&31)<<6|i&63)}else if(r>239&&r<365){const i=t[n++],o=t[n++],a=t[n++],l=((r&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;e[s++]=String.fromCharCode(55296+(l>>10)),e[s++]=String.fromCharCode(56320+(l&1023))}else{const i=t[n++],o=t[n++];e[s++]=String.fromCharCode((r&15)<<12|(i&63)<<6|o&63)}}return e.join("")},_v={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let r=0;r<t.length;r+=3){const i=t[r],o=r+1<t.length,a=o?t[r+1]:0,l=r+2<t.length,u=l?t[r+2]:0,h=i>>2,f=(i&3)<<4|a>>4;let p=(a&15)<<2|u>>6,g=u&63;l||(g=64,o||(p=64)),s.push(n[h],n[f],n[p],n[g])}return s.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(gv(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):vC(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let r=0;r<t.length;){const i=n[t.charAt(r++)],a=r<t.length?n[t.charAt(r)]:0;++r;const u=r<t.length?n[t.charAt(r)]:64;++r;const f=r<t.length?n[t.charAt(r)]:64;if(++r,i==null||a==null||u==null||f==null)throw new EC;const p=i<<2|a>>4;if(s.push(p),u!==64){const g=a<<4&240|u>>2;if(s.push(g),f!==64){const I=u<<6&192|f;s.push(I)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class EC extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const TC=function(t){const e=gv(t);return _v.encodeByteArray(e,!0)},Cc=function(t){return TC(t).replace(/\./g,"")},yv=function(t){try{return _v.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function wC(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const bC=()=>wC().__FIREBASE_DEFAULTS__,IC=()=>{if(typeof process>"u"||typeof vm>"u")return;const t=vm.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},AC=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&yv(t[1]);return e&&JSON.parse(e)},ul=()=>{try{return yC()||bC()||IC()||AC()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},vv=t=>ul()?.emulatorHosts?.[t],RC=t=>{const e=vv(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),s]:[e.substring(0,n),s]},Ev=()=>ul()?.config,Tv=t=>ul()?.[`_${t}`];class SC{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,s))}}}function xi(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function wv(t){return(await fetch(t,{credentials:"include"})).ok}function CC(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=e||"demo-project",r=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${s}`,aud:s,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...t};return[Cc(JSON.stringify(n)),Cc(JSON.stringify(o)),""].join(".")}const So={};function PC(){const t={prod:[],emulator:[]};for(const e of Object.keys(So))So[e]?t.emulator.push(e):t.prod.push(e);return t}function kC(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let Em=!1;function bv(t,e){if(typeof window>"u"||typeof document>"u"||!xi(window.location.host)||So[t]===e||So[t]||Em)return;So[t]=e;function n(p){return`__firebase__banner__${p}`}const s="__firebase__banner",i=PC().prod.length>0;function o(){const p=document.getElementById(s);p&&p.remove()}function a(p){p.style.display="flex",p.style.background="#7faaf0",p.style.position="fixed",p.style.bottom="5px",p.style.left="5px",p.style.padding=".5em",p.style.borderRadius="5px",p.style.alignItems="center"}function l(p,g){p.setAttribute("width","24"),p.setAttribute("id",g),p.setAttribute("height","24"),p.setAttribute("viewBox","0 0 24 24"),p.setAttribute("fill","none"),p.style.marginLeft="-6px"}function u(){const p=document.createElement("span");return p.style.cursor="pointer",p.style.marginLeft="16px",p.style.fontSize="24px",p.innerHTML=" &times;",p.onclick=()=>{Em=!0,o()},p}function h(p,g){p.setAttribute("id",g),p.innerText="Learn more",p.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",p.setAttribute("target","__blank"),p.style.paddingLeft="5px",p.style.textDecoration="underline"}function f(){const p=kC(s),g=n("text"),I=document.getElementById(g)||document.createElement("span"),y=n("learnmore"),D=document.getElementById(y)||document.createElement("a"),V=n("preprendIcon"),k=document.getElementById(V)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(p.created){const _=p.element;a(_),h(D,y);const C=u();l(k,V),_.append(k,I,D,C),document.body.appendChild(_)}i?(I.innerText="Preview backend disconnected.",k.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(k.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,I.innerText="Preview backend running in this workspace."),I.setAttribute("id",g)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",f):f()}function Bt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function NC(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Bt())}function DC(){const t=ul()?.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function OC(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function VC(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function LC(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function MC(){const t=Bt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function xC(){return!DC()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function FC(){try{return typeof indexedDB=="object"}catch{return!1}}function UC(){return new Promise((t,e)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(s);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(s),t(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{e(r.error?.message||"")}}catch(n){e(n)}})}const BC="FirebaseError";class ps extends Error{constructor(e,n,s){super(n),this.code=e,this.customData=s,this.name=BC,Object.setPrototypeOf(this,ps.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,aa.prototype.create)}}class aa{constructor(e,n,s){this.service=e,this.serviceName=n,this.errors=s}create(e,...n){const s=n[0]||{},r=`${this.service}/${e}`,i=this.errors[e],o=i?$C(i,s):"Error",a=`${this.serviceName}: ${o} (${r}).`;return new ps(r,a,s)}}function $C(t,e){return t.replace(HC,(n,s)=>{const r=e[s];return r!=null?String(r):`<${s}?>`})}const HC=/\{\$([^}]+)}/g;function jC(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Pr(t,e){if(t===e)return!0;const n=Object.keys(t),s=Object.keys(e);for(const r of n){if(!s.includes(r))return!1;const i=t[r],o=e[r];if(Tm(i)&&Tm(o)){if(!Pr(i,o))return!1}else if(i!==o)return!1}for(const r of s)if(!n.includes(r))return!1;return!0}function Tm(t){return t!==null&&typeof t=="object"}function ca(t){const e=[];for(const[n,s]of Object.entries(t))Array.isArray(s)?s.forEach(r=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function mo(t){const e={};return t.replace(/^\?/,"").split("&").forEach(s=>{if(s){const[r,i]=s.split("=");e[decodeURIComponent(r)]=decodeURIComponent(i)}}),e}function go(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function qC(t,e){const n=new WC(t,e);return n.subscribe.bind(n)}class WC{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,s){let r;if(e===void 0&&n===void 0&&s===void 0)throw new Error("Missing Observer.");GC(e,["next","error","complete"])?r=e:r={next:e,error:n,complete:s},r.next===void 0&&(r.next=_u),r.error===void 0&&(r.error=_u),r.complete===void 0&&(r.complete=_u);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function GC(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function _u(){}function yt(t){return t&&t._delegate?t._delegate:t}class kr{constructor(e,n,s){this.name=e,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const yr="[DEFAULT]";class zC{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const s=new SC;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:n});r&&s.resolve(r)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e?.identifier),s=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(r){if(s)return null;throw r}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(QC(e))try{this.getOrInitializeService({instanceIdentifier:yr})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:r});s.resolve(i)}catch{}}}}clearInstance(e=yr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=yr){return this.instances.has(e)}getOptions(e=yr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[i,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);s===a&&o.resolve(r)}return r}onInit(e,n){const s=this.normalizeInstanceIdentifier(n),r=this.onInitCallbacks.get(s)??new Set;r.add(e),this.onInitCallbacks.set(s,r);const i=this.instances.get(s);return i&&e(i,s),()=>{r.delete(e)}}invokeOnInitCallbacks(e,n){const s=this.onInitCallbacks.get(n);if(s)for(const r of s)try{r(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:KC(e),options:n}),this.instances.set(e,s),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=yr){return this.component?this.component.multipleInstances?e:yr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function KC(t){return t===yr?void 0:t}function QC(t){return t.instantiationMode==="EAGER"}class YC{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new zC(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}var Ve;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Ve||(Ve={}));const JC={debug:Ve.DEBUG,verbose:Ve.VERBOSE,info:Ve.INFO,warn:Ve.WARN,error:Ve.ERROR,silent:Ve.SILENT},XC=Ve.INFO,ZC={[Ve.DEBUG]:"log",[Ve.VERBOSE]:"log",[Ve.INFO]:"info",[Ve.WARN]:"warn",[Ve.ERROR]:"error"},eP=(t,e,...n)=>{if(e<t.logLevel)return;const s=new Date().toISOString(),r=ZC[e];if(r)console[r](`[${s}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class gf{constructor(e){this.name=e,this._logLevel=XC,this._logHandler=eP,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ve))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?JC[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ve.DEBUG,...e),this._logHandler(this,Ve.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ve.VERBOSE,...e),this._logHandler(this,Ve.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ve.INFO,...e),this._logHandler(this,Ve.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ve.WARN,...e),this._logHandler(this,Ve.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ve.ERROR,...e),this._logHandler(this,Ve.ERROR,...e)}}const tP=(t,e)=>e.some(n=>t instanceof n);let wm,bm;function nP(){return wm||(wm=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function sP(){return bm||(bm=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Iv=new WeakMap,ah=new WeakMap,Av=new WeakMap,yu=new WeakMap,_f=new WeakMap;function rP(t){const e=new Promise((n,s)=>{const r=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n($s(t.result)),r()},o=()=>{s(t.error),r()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&Iv.set(n,t)}).catch(()=>{}),_f.set(e,t),e}function iP(t){if(ah.has(t))return;const e=new Promise((n,s)=>{const r=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),r()},o=()=>{s(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});ah.set(t,e)}let ch={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return ah.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Av.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return $s(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function oP(t){ch=t(ch)}function aP(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const s=t.call(vu(this),e,...n);return Av.set(s,e.sort?e.sort():[e]),$s(s)}:sP().includes(t)?function(...e){return t.apply(vu(this),e),$s(Iv.get(this))}:function(...e){return $s(t.apply(vu(this),e))}}function cP(t){return typeof t=="function"?aP(t):(t instanceof IDBTransaction&&iP(t),tP(t,nP())?new Proxy(t,ch):t)}function $s(t){if(t instanceof IDBRequest)return rP(t);if(yu.has(t))return yu.get(t);const e=cP(t);return e!==t&&(yu.set(t,e),_f.set(e,t)),e}const vu=t=>_f.get(t);function lP(t,e,{blocked:n,upgrade:s,blocking:r,terminated:i}={}){const o=indexedDB.open(t,e),a=$s(o);return s&&o.addEventListener("upgradeneeded",l=>{s($s(o.result),l.oldVersion,l.newVersion,$s(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{i&&l.addEventListener("close",()=>i()),r&&l.addEventListener("versionchange",u=>r(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}const uP=["get","getKey","getAll","getAllKeys","count"],hP=["put","add","delete","clear"],Eu=new Map;function Im(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Eu.get(e))return Eu.get(e);const n=e.replace(/FromIndex$/,""),s=e!==n,r=hP.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(r||uP.includes(n)))return;const i=async function(o,...a){const l=this.transaction(o,r?"readwrite":"readonly");let u=l.store;return s&&(u=u.index(a.shift())),(await Promise.all([u[n](...a),r&&l.done]))[0]};return Eu.set(e,i),i}oP(t=>({...t,get:(e,n,s)=>Im(e,n)||t.get(e,n,s),has:(e,n)=>!!Im(e,n)||t.has(e,n)}));class fP{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(dP(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function dP(t){return t.getComponent()?.type==="VERSION"}const lh="@firebase/app",Am="0.14.6";const ls=new gf("@firebase/app"),pP="@firebase/app-compat",mP="@firebase/analytics-compat",gP="@firebase/analytics",_P="@firebase/app-check-compat",yP="@firebase/app-check",vP="@firebase/auth",EP="@firebase/auth-compat",TP="@firebase/database",wP="@firebase/data-connect",bP="@firebase/database-compat",IP="@firebase/functions",AP="@firebase/functions-compat",RP="@firebase/installations",SP="@firebase/installations-compat",CP="@firebase/messaging",PP="@firebase/messaging-compat",kP="@firebase/performance",NP="@firebase/performance-compat",DP="@firebase/remote-config",OP="@firebase/remote-config-compat",VP="@firebase/storage",LP="@firebase/storage-compat",MP="@firebase/firestore",xP="@firebase/ai",FP="@firebase/firestore-compat",UP="firebase",BP="12.6.0";const uh="[DEFAULT]",$P={[lh]:"fire-core",[pP]:"fire-core-compat",[gP]:"fire-analytics",[mP]:"fire-analytics-compat",[yP]:"fire-app-check",[_P]:"fire-app-check-compat",[vP]:"fire-auth",[EP]:"fire-auth-compat",[TP]:"fire-rtdb",[wP]:"fire-data-connect",[bP]:"fire-rtdb-compat",[IP]:"fire-fn",[AP]:"fire-fn-compat",[RP]:"fire-iid",[SP]:"fire-iid-compat",[CP]:"fire-fcm",[PP]:"fire-fcm-compat",[kP]:"fire-perf",[NP]:"fire-perf-compat",[DP]:"fire-rc",[OP]:"fire-rc-compat",[VP]:"fire-gcs",[LP]:"fire-gcs-compat",[MP]:"fire-fst",[FP]:"fire-fst-compat",[xP]:"fire-vertex","fire-js":"fire-js",[UP]:"fire-js-all"};const jo=new Map,HP=new Map,hh=new Map;function Rm(t,e){try{t.container.addComponent(e)}catch(n){ls.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Ii(t){const e=t.name;if(hh.has(e))return ls.debug(`There were multiple attempts to register component ${e}.`),!1;hh.set(e,t);for(const n of jo.values())Rm(n,t);for(const n of HP.values())Rm(n,t);return!0}function yf(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function hn(t){return t==null?!1:t.settings!==void 0}const jP={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Hs=new aa("app","Firebase",jP);class qP{constructor(e,n,s){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new kr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Hs.create("app-deleted",{appName:this._name})}}const Fi=BP;function Rv(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const s={name:uh,automaticDataCollectionEnabled:!0,...e},r=s.name;if(typeof r!="string"||!r)throw Hs.create("bad-app-name",{appName:String(r)});if(n||(n=Ev()),!n)throw Hs.create("no-options");const i=jo.get(r);if(i){if(Pr(n,i.options)&&Pr(s,i.config))return i;throw Hs.create("duplicate-app",{appName:r})}const o=new YC(r);for(const l of hh.values())o.addComponent(l);const a=new qP(n,s,o);return jo.set(r,a),a}function Sv(t=uh){const e=jo.get(t);if(!e&&t===uh&&Ev())return Rv();if(!e)throw Hs.create("no-app",{appName:t});return e}function Sm(){return Array.from(jo.values())}function js(t,e,n){let s=$P[t]??t;n&&(s+=`-${n}`);const r=s.match(/\s|\//),i=e.match(/\s|\//);if(r||i){const o=[`Unable to register library "${s}" with version "${e}":`];r&&o.push(`library name "${s}" contains illegal characters (whitespace or "/")`),r&&i&&o.push("and"),i&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ls.warn(o.join(" "));return}Ii(new kr(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}const WP="firebase-heartbeat-database",GP=1,qo="firebase-heartbeat-store";let Tu=null;function Cv(){return Tu||(Tu=lP(WP,GP,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(qo)}catch(n){console.warn(n)}}}}).catch(t=>{throw Hs.create("idb-open",{originalErrorMessage:t.message})})),Tu}async function zP(t){try{const n=(await Cv()).transaction(qo),s=await n.objectStore(qo).get(Pv(t));return await n.done,s}catch(e){if(e instanceof ps)ls.warn(e.message);else{const n=Hs.create("idb-get",{originalErrorMessage:e?.message});ls.warn(n.message)}}}async function Cm(t,e){try{const s=(await Cv()).transaction(qo,"readwrite");await s.objectStore(qo).put(e,Pv(t)),await s.done}catch(n){if(n instanceof ps)ls.warn(n.message);else{const s=Hs.create("idb-set",{originalErrorMessage:n?.message});ls.warn(s.message)}}}function Pv(t){return`${t.name}!${t.options.appId}`}const KP=1024,QP=30;class YP{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new XP(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=Pm();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(r=>r.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:n}),this._heartbeatsCache.heartbeats.length>QP){const r=ZP(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(r,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){ls.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=Pm(),{heartbeatsToSend:n,unsentEntries:s}=JP(this._heartbeatsCache.heartbeats),r=Cc(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}catch(e){return ls.warn(e),""}}}function Pm(){return new Date().toISOString().substring(0,10)}function JP(t,e=KP){const n=[];let s=t.slice();for(const r of t){const i=n.find(o=>o.agent===r.agent);if(i){if(i.dates.push(r.date),km(n)>e){i.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),km(n)>e){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class XP{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return FC()?UC().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await zP(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return Cm(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return Cm(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function km(t){return Cc(JSON.stringify({version:2,heartbeats:t})).length}function ZP(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let s=1;s<t.length;s++)t[s].date<n&&(n=t[s].date,e=s);return e}function ek(t){Ii(new kr("platform-logger",e=>new fP(e),"PRIVATE")),Ii(new kr("heartbeat",e=>new YP(e),"PRIVATE")),js(lh,Am,t),js(lh,Am,"esm2020"),js("fire-js","")}ek("");function kv(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const tk=kv,Nv=new aa("auth","Firebase",kv());const Pc=new gf("@firebase/auth");function nk(t,...e){Pc.logLevel<=Ve.WARN&&Pc.warn(`Auth (${Fi}): ${t}`,...e)}function ec(t,...e){Pc.logLevel<=Ve.ERROR&&Pc.error(`Auth (${Fi}): ${t}`,...e)}function An(t,...e){throw vf(t,...e)}function Ln(t,...e){return vf(t,...e)}function Dv(t,e,n){const s={...tk(),[e]:n};return new aa("auth","Firebase",s).create(e,{appName:t.name})}function ss(t){return Dv(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function vf(t,...e){if(typeof t!="string"){const n=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=t.name),t._errorFactory.create(n,...s)}return Nv.create(t,...e)}function Ie(t,e,...n){if(!t)throw vf(e,...n)}function Jn(t){const e="INTERNAL ASSERTION FAILED: "+t;throw ec(e),new Error(e)}function us(t,e){t||Jn(e)}function fh(){return typeof self<"u"&&self.location?.href||""}function sk(){return Nm()==="http:"||Nm()==="https:"}function Nm(){return typeof self<"u"&&self.location?.protocol||null}function rk(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(sk()||VC()||"connection"in navigator)?navigator.onLine:!0}function ik(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}class la{constructor(e,n){this.shortDelay=e,this.longDelay=n,us(n>e,"Short delay should be less than long delay!"),this.isMobile=NC()||LC()}get(){return rk()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Ef(t,e){us(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}class Ov{static initialize(e,n,s){this.fetchImpl=e,n&&(this.headersImpl=n),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Jn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Jn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Jn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const ok={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const ak=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],ck=new la(3e4,6e4);function ms(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function Hn(t,e,n,s,r={}){return Vv(t,r,async()=>{let i={},o={};s&&(e==="GET"?o=s:i={body:JSON.stringify(s)});const a=ca({key:t.config.apiKey,...o}).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const u={method:e,headers:l,...i};return OC()||(u.referrerPolicy="no-referrer"),t.emulatorConfig&&xi(t.emulatorConfig.host)&&(u.credentials="include"),Ov.fetch()(await Lv(t,t.config.apiHost,n,a),u)})}async function Vv(t,e,n){t._canInitEmulator=!1;const s={...ok,...e};try{const r=new uk(t),i=await Promise.race([n(),r.promise]);r.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw ja(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const a=i.ok?o.errorMessage:o.error.message,[l,u]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw ja(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw ja(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw ja(t,"user-disabled",o);const h=s[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw Dv(t,h,u);An(t,h)}}catch(r){if(r instanceof ps)throw r;An(t,"network-request-failed",{message:String(r)})}}async function ua(t,e,n,s,r={}){const i=await Hn(t,e,n,s,r);return"mfaPendingCredential"in i&&An(t,"multi-factor-auth-required",{_serverResponse:i}),i}async function Lv(t,e,n,s){const r=`${e}${n}?${s}`,i=t,o=i.config.emulator?Ef(t.config,r):`${t.config.apiScheme}://${r}`;return ak.includes(n)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(o).toString():o}function lk(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class uk{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,s)=>{this.timer=setTimeout(()=>s(Ln(this.auth,"network-request-failed")),ck.get())})}}function ja(t,e,n){const s={appName:t.name};n.email&&(s.email=n.email),n.phoneNumber&&(s.phoneNumber=n.phoneNumber);const r=Ln(t,e,s);return r.customData._tokenResponse=n,r}function Dm(t){return t!==void 0&&t.enterprise!==void 0}class hk{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return lk(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function fk(t,e){return Hn(t,"GET","/v2/recaptchaConfig",ms(t,e))}async function dk(t,e){return Hn(t,"POST","/v1/accounts:delete",e)}async function kc(t,e){return Hn(t,"POST","/v1/accounts:lookup",e)}function Co(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function pk(t,e=!1){const n=yt(t),s=await n.getIdToken(e),r=Tf(s);Ie(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");const i=typeof r.firebase=="object"?r.firebase:void 0,o=i?.sign_in_provider;return{claims:r,token:s,authTime:Co(wu(r.auth_time)),issuedAtTime:Co(wu(r.iat)),expirationTime:Co(wu(r.exp)),signInProvider:o||null,signInSecondFactor:i?.sign_in_second_factor||null}}function wu(t){return Number(t)*1e3}function Tf(t){const[e,n,s]=t.split(".");if(e===void 0||n===void 0||s===void 0)return ec("JWT malformed, contained fewer than 3 sections"),null;try{const r=yv(n);return r?JSON.parse(r):(ec("Failed to decode base64 JWT payload"),null)}catch(r){return ec("Caught error parsing JWT payload as JSON",r?.toString()),null}}function Om(t){const e=Tf(t);return Ie(e,"internal-error"),Ie(typeof e.exp<"u","internal-error"),Ie(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function Ai(t,e,n=!1){if(n)return e;try{return await e}catch(s){throw s instanceof ps&&mk(s)&&t.auth.currentUser===t&&await t.auth.signOut(),s}}function mk({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}class gk{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const s=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class dh{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Co(this.lastLoginAt),this.creationTime=Co(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Nc(t){const e=t.auth,n=await t.getIdToken(),s=await Ai(t,kc(e,{idToken:n}));Ie(s?.users.length,e,"internal-error");const r=s.users[0];t._notifyReloadListener(r);const i=r.providerUserInfo?.length?Mv(r.providerUserInfo):[],o=yk(t.providerData,i),a=t.isAnonymous,l=!(t.email&&r.passwordHash)&&!o?.length,u=a?l:!1,h={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:o,metadata:new dh(r.createdAt,r.lastLoginAt),isAnonymous:u};Object.assign(t,h)}async function _k(t){const e=yt(t);await Nc(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function yk(t,e){return[...t.filter(s=>!e.some(r=>r.providerId===s.providerId)),...e]}function Mv(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}async function vk(t,e){const n=await Vv(t,{},async()=>{const s=ca({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:i}=t.config,o=await Lv(t,r,"/v1/token",`key=${i}`),a=await t._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";const l={method:"POST",headers:a,body:s};return t.emulatorConfig&&xi(t.emulatorConfig.host)&&(l.credentials="include"),Ov.fetch()(o,l)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function Ek(t,e){return Hn(t,"POST","/v2/accounts:revokeToken",ms(t,e))}class fi{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ie(e.idToken,"internal-error"),Ie(typeof e.idToken<"u","internal-error"),Ie(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Om(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Ie(e.length!==0,"internal-error");const n=Om(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Ie(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:s,refreshToken:r,expiresIn:i}=await vk(e,n);this.updateTokensAndExpiration(s,r,Number(i))}updateTokensAndExpiration(e,n,s){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,n){const{refreshToken:s,accessToken:r,expirationTime:i}=n,o=new fi;return s&&(Ie(typeof s=="string","internal-error",{appName:e}),o.refreshToken=s),r&&(Ie(typeof r=="string","internal-error",{appName:e}),o.accessToken=r),i&&(Ie(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new fi,this.toJSON())}_performRefresh(){return Jn("not implemented")}}function Is(t,e){Ie(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class gn{constructor({uid:e,auth:n,stsTokenManager:s,...r}){this.providerId="firebase",this.proactiveRefresh=new gk(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.providerData=r.providerData?[...r.providerData]:[],this.metadata=new dh(r.createdAt||void 0,r.lastLoginAt||void 0)}async getIdToken(e){const n=await Ai(this,this.stsTokenManager.getToken(this.auth,e));return Ie(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return pk(this,e)}reload(){return _k(this)}_assign(e){this!==e&&(Ie(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new gn({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){Ie(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),n&&await Nc(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(hn(this.auth.app))return Promise.reject(ss(this.auth));const e=await this.getIdToken();return await Ai(this,dk(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const s=n.displayName??void 0,r=n.email??void 0,i=n.phoneNumber??void 0,o=n.photoURL??void 0,a=n.tenantId??void 0,l=n._redirectEventId??void 0,u=n.createdAt??void 0,h=n.lastLoginAt??void 0,{uid:f,emailVerified:p,isAnonymous:g,providerData:I,stsTokenManager:y}=n;Ie(f&&y,e,"internal-error");const D=fi.fromJSON(this.name,y);Ie(typeof f=="string",e,"internal-error"),Is(s,e.name),Is(r,e.name),Ie(typeof p=="boolean",e,"internal-error"),Ie(typeof g=="boolean",e,"internal-error"),Is(i,e.name),Is(o,e.name),Is(a,e.name),Is(l,e.name),Is(u,e.name),Is(h,e.name);const V=new gn({uid:f,auth:e,email:r,emailVerified:p,displayName:s,isAnonymous:g,photoURL:o,phoneNumber:i,tenantId:a,stsTokenManager:D,createdAt:u,lastLoginAt:h});return I&&Array.isArray(I)&&(V.providerData=I.map(k=>({...k}))),l&&(V._redirectEventId=l),V}static async _fromIdTokenResponse(e,n,s=!1){const r=new fi;r.updateFromServerResponse(n);const i=new gn({uid:n.localId,auth:e,stsTokenManager:r,isAnonymous:s});return await Nc(i),i}static async _fromGetAccountInfoResponse(e,n,s){const r=n.users[0];Ie(r.localId!==void 0,"internal-error");const i=r.providerUserInfo!==void 0?Mv(r.providerUserInfo):[],o=!(r.email&&r.passwordHash)&&!i?.length,a=new fi;a.updateFromIdToken(s);const l=new gn({uid:r.localId,auth:e,stsTokenManager:a,isAnonymous:o}),u={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:i,metadata:new dh(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!i?.length};return Object.assign(l,u),l}}const Vm=new Map;function Xn(t){us(t instanceof Function,"Expected a class definition");let e=Vm.get(t);return e?(us(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Vm.set(t,e),e)}class xv{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}xv.type="NONE";const Lm=xv;function tc(t,e,n){return`firebase:${t}:${e}:${n}`}class di{constructor(e,n,s){this.persistence=e,this.auth=n,this.userKey=s;const{config:r,name:i}=this.auth;this.fullUserKey=tc(this.userKey,r.apiKey,i),this.fullPersistenceKey=tc("persistence",r.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await kc(this.auth,{idToken:e}).catch(()=>{});return n?gn._fromGetAccountInfoResponse(this.auth,n,e):null}return gn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,s="authUser"){if(!n.length)return new di(Xn(Lm),e,s);const r=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let i=r[0]||Xn(Lm);const o=tc(s,e.config.apiKey,e.name);let a=null;for(const u of n)try{const h=await u._get(o);if(h){let f;if(typeof h=="string"){const p=await kc(e,{idToken:h}).catch(()=>{});if(!p)break;f=await gn._fromGetAccountInfoResponse(e,p,h)}else f=gn._fromJSON(e,h);u!==i&&(a=f),i=u;break}}catch{}const l=r.filter(u=>u._shouldAllowMigration);return!i._shouldAllowMigration||!l.length?new di(i,e,s):(i=l[0],a&&await i._set(o,a.toJSON()),await Promise.all(n.map(async u=>{if(u!==i)try{await u._remove(o)}catch{}})),new di(i,e,s))}}function Mm(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if($v(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Fv(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(jv(e))return"Blackberry";if(qv(e))return"Webos";if(Uv(e))return"Safari";if((e.includes("chrome/")||Bv(e))&&!e.includes("edge/"))return"Chrome";if(Hv(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=t.match(n);if(s?.length===2)return s[1]}return"Other"}function Fv(t=Bt()){return/firefox\//i.test(t)}function Uv(t=Bt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Bv(t=Bt()){return/crios\//i.test(t)}function $v(t=Bt()){return/iemobile/i.test(t)}function Hv(t=Bt()){return/android/i.test(t)}function jv(t=Bt()){return/blackberry/i.test(t)}function qv(t=Bt()){return/webos/i.test(t)}function wf(t=Bt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function Tk(t=Bt()){return wf(t)&&!!window.navigator?.standalone}function wk(){return MC()&&document.documentMode===10}function Wv(t=Bt()){return wf(t)||Hv(t)||qv(t)||jv(t)||/windows phone/i.test(t)||$v(t)}function Gv(t,e=[]){let n;switch(t){case"Browser":n=Mm(Bt());break;case"Worker":n=`${Mm(Bt())}-${t}`;break;default:n=t}const s=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Fi}/${s}`}class bk{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const s=i=>new Promise((o,a)=>{try{const l=e(i);o(l)}catch(l){a(l)}});s.onAbort=n,this.queue.push(s);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const s of this.queue)await s(e),s.onAbort&&n.push(s.onAbort)}catch(s){n.reverse();for(const r of n)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s?.message})}}}async function Ik(t,e={}){return Hn(t,"GET","/v2/passwordPolicy",ms(t,e))}const Ak=6;class Rk{constructor(e){const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??Ak,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const s=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;s&&(n.meetsMinPasswordLength=e.length>=s),r&&(n.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let s;for(let r=0;r<e.length;r++)s=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(n,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,n,s,r,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}class Sk{constructor(e,n,s,r){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=s,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new xm(this),this.idTokenSubscription=new xm(this),this.beforeStateQueue=new bk(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Nv,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Xn(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await di.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await kc(this,{idToken:e}),s=await gn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(s)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(hn(this.app)){const i=this.app.settings.authIdToken;return i?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(i).then(o,o))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let s=n,r=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const i=this.redirectUser?._redirectEventId,o=s?._redirectEventId,a=await this.tryRedirectSignIn(e);(!i||i===o)&&a?.user&&(s=a.user,r=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(s)}catch(i){s=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(i))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Ie(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Nc(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=ik()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(hn(this.app))return Promise.reject(ss(this));const n=e?yt(e):null;return n&&Ie(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Ie(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return hn(this.app)?Promise.reject(ss(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return hn(this.app)?Promise.reject(ss(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Xn(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await Ik(this),n=new Rk(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new aa("auth","Firebase",e())}onAuthStateChanged(e,n,s){return this.registerStateListener(this.authStateSubscription,e,n,s)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,s){return this.registerStateListener(this.idTokenSubscription,e,n,s)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(s.tenantId=this.tenantId),await Ek(this,s)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,n){const s=await this.getOrInitRedirectPersistenceManager(n);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Xn(e)||this._popupRedirectResolver;Ie(n,this,"argument-error"),this.redirectPersistenceManager=await di.create(this,[Xn(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,s,r){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ie(a,this,"internal-error"),a.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,s,r);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ie(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Gv(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(e["X-Firebase-Client"]=n);const s=await this._getAppCheckToken();return s&&(e["X-Firebase-AppCheck"]=s),e}async _getAppCheckToken(){if(hn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&nk(`Error while retrieving App Check token: ${e.error}`),e?.token}}function Ur(t){return yt(t)}class xm{constructor(e){this.auth=e,this.observer=null,this.addObserver=qC(n=>this.observer=n)}get next(){return Ie(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let hl={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Ck(t){hl=t}function zv(t){return hl.loadJS(t)}function Pk(){return hl.recaptchaEnterpriseScript}function kk(){return hl.gapiScript}function Nk(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class Dk{constructor(){this.enterprise=new Ok}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class Ok{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const Vk="recaptcha-enterprise",Kv="NO_RECAPTCHA";class Lk{constructor(e){this.type=Vk,this.auth=Ur(e)}async verify(e="verify",n=!1){async function s(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(o,a)=>{fk(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const u=new hk(l);return i.tenantId==null?i._agentRecaptchaConfig=u:i._tenantRecaptchaConfigs[i.tenantId]=u,o(u.siteKey)}}).catch(l=>{a(l)})})}function r(i,o,a){const l=window.grecaptcha;Dm(l)?l.enterprise.ready(()=>{l.enterprise.execute(i,{action:e}).then(u=>{o(u)}).catch(()=>{o(Kv)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new Dk().execute("siteKey",{action:"verify"}):new Promise((i,o)=>{s(this.auth).then(a=>{if(!n&&Dm(window.grecaptcha))r(a,i,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=Pk();l.length!==0&&(l+=a),zv(l).then(()=>{r(a,i,o)}).catch(u=>{o(u)})}}).catch(a=>{o(a)})})}}async function Fm(t,e,n,s=!1,r=!1){const i=new Lk(t);let o;if(r)o=Kv;else try{o=await i.verify(n)}catch{o=await i.verify(n,!0)}const a={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in a){const l=a.phoneEnrollmentInfo.phoneNumber,u=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:l,recaptchaToken:u,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){const l=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:l,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return s?Object.assign(a,{captchaResp:o}):Object.assign(a,{captchaResponse:o}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function ph(t,e,n,s,r){if(t._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await Fm(t,e,n,n==="getOobCode");return s(t,i)}else return s(t,e).catch(async i=>{if(i.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await Fm(t,e,n,n==="getOobCode");return s(t,o)}else return Promise.reject(i)})}function Mk(t,e){const n=yf(t,"auth");if(n.isInitialized()){const r=n.getImmediate(),i=n.getOptions();if(Pr(i,e??{}))return r;An(r,"already-initialized")}return n.initialize({options:e})}function xk(t,e){const n=e?.persistence||[],s=(Array.isArray(n)?n:[n]).map(Xn);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(s,e?.popupRedirectResolver)}function Fk(t,e,n){const s=Ur(t);Ie(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const r=!1,i=Qv(e),{host:o,port:a}=Uk(e),l=a===null?"":`:${a}`,u={url:`${i}//${o}${l}/`},h=Object.freeze({host:o,port:a,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:r})});if(!s._canInitEmulator){Ie(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),Ie(Pr(u,s.config.emulator)&&Pr(h,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=u,s.emulatorConfig=h,s.settings.appVerificationDisabledForTesting=!0,xi(o)?(wv(`${i}//${o}${l}`),bv("Auth",!0)):Bk()}function Qv(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function Uk(t){const e=Qv(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const s=n[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(s);if(r){const i=r[1];return{host:i,port:Um(s.substr(i.length+1))}}else{const[i,o]=s.split(":");return{host:i,port:Um(o)}}}function Um(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function Bk(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}class bf{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Jn("not implemented")}_getIdTokenResponse(e){return Jn("not implemented")}_linkToIdToken(e,n){return Jn("not implemented")}_getReauthenticationResolver(e){return Jn("not implemented")}}async function $k(t,e){return Hn(t,"POST","/v1/accounts:signUp",e)}async function Hk(t,e){return ua(t,"POST","/v1/accounts:signInWithPassword",ms(t,e))}async function jk(t,e){return Hn(t,"POST","/v1/accounts:sendOobCode",ms(t,e))}async function qk(t,e){return jk(t,e)}async function Wk(t,e){return ua(t,"POST","/v1/accounts:signInWithEmailLink",ms(t,e))}async function Gk(t,e){return ua(t,"POST","/v1/accounts:signInWithEmailLink",ms(t,e))}class Wo extends bf{constructor(e,n,s,r=null){super("password",s),this._email=e,this._password=n,this._tenantId=r}static _fromEmailAndPassword(e,n){return new Wo(e,n,"password")}static _fromEmailAndCode(e,n,s=null){return new Wo(e,n,"emailLink",s)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return ph(e,n,"signInWithPassword",Hk);case"emailLink":return Wk(e,{email:this._email,oobCode:this._password});default:An(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const s={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return ph(e,s,"signUpPassword",$k);case"emailLink":return Gk(e,{idToken:n,email:this._email,oobCode:this._password});default:An(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function pi(t,e){return ua(t,"POST","/v1/accounts:signInWithIdp",ms(t,e))}const zk="http://localhost";class Nr extends bf{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Nr(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):An("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:r,...i}=n;if(!s||!r)return null;const o=new Nr(s,r);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return pi(e,n)}_linkToIdToken(e,n){const s=this.buildRequest();return s.idToken=n,pi(e,s)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,pi(e,n)}buildRequest(){const e={requestUri:zk,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=ca(n)}return e}}function Kk(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function Qk(t){const e=mo(go(t)).link,n=e?mo(go(e)).deep_link_id:null,s=mo(go(t)).deep_link_id;return(s?mo(go(s)).link:null)||s||n||e||t}class If{constructor(e){const n=mo(go(e)),s=n.apiKey??null,r=n.oobCode??null,i=Kk(n.mode??null);Ie(s&&r&&i,"argument-error"),this.apiKey=s,this.operation=i,this.code=r,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=Qk(e);try{return new If(n)}catch{return null}}}class Ui{constructor(){this.providerId=Ui.PROVIDER_ID}static credential(e,n){return Wo._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const s=If.parseLink(n);return Ie(s,"argument-error"),Wo._fromEmailAndCode(e,s.code,s.tenantId)}}Ui.PROVIDER_ID="password";Ui.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Ui.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class Yv{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class ha extends Yv{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Ds extends ha{constructor(){super("facebook.com")}static credential(e){return Nr._fromParams({providerId:Ds.PROVIDER_ID,signInMethod:Ds.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ds.credentialFromTaggedObject(e)}static credentialFromError(e){return Ds.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ds.credential(e.oauthAccessToken)}catch{return null}}}Ds.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ds.PROVIDER_ID="facebook.com";class Os extends ha{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Nr._fromParams({providerId:Os.PROVIDER_ID,signInMethod:Os.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Os.credentialFromTaggedObject(e)}static credentialFromError(e){return Os.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:s}=e;if(!n&&!s)return null;try{return Os.credential(n,s)}catch{return null}}}Os.GOOGLE_SIGN_IN_METHOD="google.com";Os.PROVIDER_ID="google.com";class Vs extends ha{constructor(){super("github.com")}static credential(e){return Nr._fromParams({providerId:Vs.PROVIDER_ID,signInMethod:Vs.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Vs.credentialFromTaggedObject(e)}static credentialFromError(e){return Vs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Vs.credential(e.oauthAccessToken)}catch{return null}}}Vs.GITHUB_SIGN_IN_METHOD="github.com";Vs.PROVIDER_ID="github.com";class Ls extends ha{constructor(){super("twitter.com")}static credential(e,n){return Nr._fromParams({providerId:Ls.PROVIDER_ID,signInMethod:Ls.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Ls.credentialFromTaggedObject(e)}static credentialFromError(e){return Ls.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:s}=e;if(!n||!s)return null;try{return Ls.credential(n,s)}catch{return null}}}Ls.TWITTER_SIGN_IN_METHOD="twitter.com";Ls.PROVIDER_ID="twitter.com";async function Yk(t,e){return ua(t,"POST","/v1/accounts:signUp",ms(t,e))}class Dr{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,s,r=!1){const i=await gn._fromIdTokenResponse(e,s,r),o=Bm(s);return new Dr({user:i,providerId:o,_tokenResponse:s,operationType:n})}static async _forOperation(e,n,s){await e._updateTokensIfNecessary(s,!0);const r=Bm(s);return new Dr({user:e,providerId:r,_tokenResponse:s,operationType:n})}}function Bm(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}class Dc extends ps{constructor(e,n,s,r){super(n.code,n.message),this.operationType=s,this.user=r,Object.setPrototypeOf(this,Dc.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,n,s,r){return new Dc(e,n,s,r)}}function Jv(t,e,n,s){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?Dc._fromErrorAndOperation(t,i,e,s):i})}async function Jk(t,e,n=!1){const s=await Ai(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Dr._forOperation(t,"link",s)}async function Xk(t,e,n=!1){const{auth:s}=t;if(hn(s.app))return Promise.reject(ss(s));const r="reauthenticate";try{const i=await Ai(t,Jv(s,r,e,t),n);Ie(i.idToken,s,"internal-error");const o=Tf(i.idToken);Ie(o,s,"internal-error");const{sub:a}=o;return Ie(t.uid===a,s,"user-mismatch"),Dr._forOperation(t,r,i)}catch(i){throw i?.code==="auth/user-not-found"&&An(s,"user-mismatch"),i}}async function Xv(t,e,n=!1){if(hn(t.app))return Promise.reject(ss(t));const s="signIn",r=await Jv(t,s,e),i=await Dr._fromIdTokenResponse(t,s,r);return n||await t._updateCurrentUser(i.user),i}async function Zk(t,e){return Xv(Ur(t),e)}async function Zv(t){const e=Ur(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function e1(t,e,n){if(hn(t.app))return Promise.reject(ss(t));const s=Ur(t),o=await ph(s,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Yk).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&Zv(t),l}),a=await Dr._fromIdTokenResponse(s,"signIn",o);return await s._updateCurrentUser(a.user),a}function t1(t,e,n){return hn(t.app)?Promise.reject(ss(t)):Zk(yt(t),Ui.credential(e,n)).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&Zv(t),s})}async function $m(t,e){const n=yt(t),r={requestType:"VERIFY_EMAIL",idToken:await t.getIdToken()},{email:i}=await qk(n.auth,r);i!==t.email&&await t.reload()}async function n1(t,e){return Hn(t,"POST","/v1/accounts:update",e)}async function s1(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const s=yt(t),i={idToken:await s.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},o=await Ai(s,n1(s.auth,i));s.displayName=o.displayName||null,s.photoURL=o.photoUrl||null;const a=s.providerData.find(({providerId:l})=>l==="password");a&&(a.displayName=s.displayName,a.photoURL=s.photoURL),await s._updateTokensIfNecessary(o)}function r1(t,e,n,s){return yt(t).onIdTokenChanged(e,n,s)}function i1(t,e,n){return yt(t).beforeAuthStateChanged(e,n)}function o1(t,e,n,s){return yt(t).onAuthStateChanged(e,n,s)}function a1(t){return yt(t).signOut()}const Oc="__sak";class eE{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Oc,"1"),this.storage.removeItem(Oc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const c1=1e3,l1=10;class tE extends eE{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Wv(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const s=this.storage.getItem(n),r=this.localCache[n];s!==r&&e(n,r,s)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const s=e.key;n?this.detachListener():this.stopPolling();const r=()=>{const o=this.storage.getItem(s);!n&&this.localCache[s]===o||this.notifyListeners(s,o)},i=this.storage.getItem(s);wk()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,l1):r()}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const r of Array.from(s))r(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:s}),!0)})},c1)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}tE.type="LOCAL";const u1=tE;class nE extends eE{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}nE.type="SESSION";const sE=nE;function h1(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}class fl{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(r=>r.isListeningto(e));if(n)return n;const s=new fl(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:s,eventType:r,data:i}=n.data,o=this.handlersMap[r];if(!o?.size)return;n.ports[0].postMessage({status:"ack",eventId:s,eventType:r});const a=Array.from(o).map(async u=>u(n.origin,i)),l=await h1(a);n.ports[0].postMessage({status:"done",eventId:s,eventType:r,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}fl.receivers=[];function Af(t="",e=10){let n="";for(let s=0;s<e;s++)n+=Math.floor(Math.random()*10);return t+n}class f1{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,s=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,o;return new Promise((a,l)=>{const u=Af("",20);r.port1.start();const h=setTimeout(()=>{l(new Error("unsupported_event"))},s);o={messageChannel:r,onMessage(f){const p=f;if(p.data.eventId===u)switch(p.data.status){case"ack":clearTimeout(h),i=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),a(p.data.response);break;default:clearTimeout(h),clearTimeout(i),l(new Error("invalid_response"));break}}},this.handlers.add(o),r.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:n},[r.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}function Mn(){return window}function d1(t){Mn().location.href=t}function rE(){return typeof Mn().WorkerGlobalScope<"u"&&typeof Mn().importScripts=="function"}async function p1(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function m1(){return navigator?.serviceWorker?.controller||null}function g1(){return rE()?self:null}const iE="firebaseLocalStorageDb",_1=1,Vc="firebaseLocalStorage",oE="fbase_key";class fa{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function dl(t,e){return t.transaction([Vc],e?"readwrite":"readonly").objectStore(Vc)}function y1(){const t=indexedDB.deleteDatabase(iE);return new fa(t).toPromise()}function mh(){const t=indexedDB.open(iE,_1);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const s=t.result;try{s.createObjectStore(Vc,{keyPath:oE})}catch(r){n(r)}}),t.addEventListener("success",async()=>{const s=t.result;s.objectStoreNames.contains(Vc)?e(s):(s.close(),await y1(),e(await mh()))})})}async function Hm(t,e,n){const s=dl(t,!0).put({[oE]:e,value:n});return new fa(s).toPromise()}async function v1(t,e){const n=dl(t,!1).get(e),s=await new fa(n).toPromise();return s===void 0?null:s.value}function jm(t,e){const n=dl(t,!0).delete(e);return new fa(n).toPromise()}const E1=800,T1=3;class aE{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await mh(),this.db)}async _withRetries(e){let n=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(n++>T1)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return rE()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=fl._getInstance(g1()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await p1(),!this.activeServiceWorker)return;this.sender=new f1(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||m1()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await mh();return await Hm(e,Oc,"1"),await jm(e,Oc),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(s=>Hm(s,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(s=>v1(s,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>jm(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(r=>{const i=dl(r,!1).getAll();return new fa(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],s=new Set;if(e.length!==0)for(const{fbase_key:r,value:i}of e)s.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),n.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!s.has(r)&&(this.notifyListeners(r,null),n.push(r));return n}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const r of Array.from(s))r(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),E1)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}aE.type="LOCAL";const w1=aE;new la(3e4,6e4);function b1(t,e){return e?Xn(e):(Ie(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}class Rf extends bf{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return pi(e,this._buildIdpRequest())}_linkToIdToken(e,n){return pi(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return pi(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function I1(t){return Xv(t.auth,new Rf(t),t.bypassAuthState)}function A1(t){const{auth:e,user:n}=t;return Ie(n,e,"internal-error"),Xk(n,new Rf(t),t.bypassAuthState)}async function R1(t){const{auth:e,user:n}=t;return Ie(n,e,"internal-error"),Jk(n,new Rf(t),t.bypassAuthState)}class cE{constructor(e,n,s,r,i=!1){this.auth=e,this.resolver=s,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:s,postBody:r,tenantId:i,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:s,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return I1;case"linkViaPopup":case"linkViaRedirect":return R1;case"reauthViaPopup":case"reauthViaRedirect":return A1;default:An(this.auth,"internal-error")}}resolve(e){us(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){us(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const S1=new la(2e3,1e4);class ni extends cE{constructor(e,n,s,r,i){super(e,n,r,i),this.provider=s,this.authWindow=null,this.pollId=null,ni.currentPopupAction&&ni.currentPopupAction.cancel(),ni.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ie(e,this.auth,"internal-error"),e}async onExecution(){us(this.filter.length===1,"Popup operations only handle one event");const e=Af();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Ln(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Ln(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ni.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ln(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,S1.get())};e()}}ni.currentPopupAction=null;const C1="pendingRedirect",nc=new Map;class P1 extends cE{constructor(e,n,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,s),this.eventId=null}async execute(){let e=nc.get(this.auth._key());if(!e){try{const s=await k1(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(n){e=()=>Promise.reject(n)}nc.set(this.auth._key(),e)}return this.bypassAuthState||nc.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function k1(t,e){const n=O1(e),s=D1(t);if(!await s._isAvailable())return!1;const r=await s._get(n)==="true";return await s._remove(n),r}function N1(t,e){nc.set(t._key(),e)}function D1(t){return Xn(t._redirectPersistence)}function O1(t){return tc(C1,t.config.apiKey,t.name)}async function V1(t,e,n=!1){if(hn(t.app))return Promise.reject(ss(t));const s=Ur(t),r=b1(s,e),o=await new P1(s,r,n).execute();return o&&!n&&(delete o.user._redirectEventId,await s._persistUserIfCurrent(o.user),await s._setRedirectUser(null,e)),o}const L1=600*1e3;class M1{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(n=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!x1(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){if(e.error&&!lE(e)){const s=e.error.code?.split("auth/")[1]||"internal-error";n.onError(Ln(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const s=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=L1&&this.cachedEventUids.clear(),this.cachedEventUids.has(qm(e))}saveEventToCache(e){this.cachedEventUids.add(qm(e)),this.lastProcessedEventTime=Date.now()}}function qm(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function lE({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function x1(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return lE(t);default:return!1}}async function F1(t,e={}){return Hn(t,"GET","/v1/projects",e)}const U1=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,B1=/^https?/;async function $1(t){if(t.config.emulator)return;const{authorizedDomains:e}=await F1(t);for(const n of e)try{if(H1(n))return}catch{}An(t,"unauthorized-domain")}function H1(t){const e=fh(),{protocol:n,hostname:s}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&s===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===s}if(!B1.test(n))return!1;if(U1.test(t))return s===t;const r=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(s)}const j1=new la(3e4,6e4);function Wm(){const t=Mn().___jsl;if(t?.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function q1(t){return new Promise((e,n)=>{function s(){Wm(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Wm(),n(Ln(t,"network-request-failed"))},timeout:j1.get()})}if(Mn().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(Mn().gapi?.load)s();else{const r=Nk("iframefcb");return Mn()[r]=()=>{gapi.load?s():n(Ln(t,"network-request-failed"))},zv(`${kk()}?onload=${r}`).catch(i=>n(i))}}).catch(e=>{throw sc=null,e})}let sc=null;function W1(t){return sc=sc||q1(t),sc}const G1=new la(5e3,15e3),z1="__/auth/iframe",K1="emulator/auth/iframe",Q1={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Y1=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function J1(t){const e=t.config;Ie(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Ef(e,K1):`https://${t.config.authDomain}/${z1}`,s={apiKey:e.apiKey,appName:t.name,v:Fi},r=Y1.get(t.config.apiHost);r&&(s.eid=r);const i=t._getFrameworks();return i.length&&(s.fw=i.join(",")),`${n}?${ca(s).slice(1)}`}async function X1(t){const e=await W1(t),n=Mn().gapi;return Ie(n,t,"internal-error"),e.open({where:document.body,url:J1(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Q1,dontclear:!0},s=>new Promise(async(r,i)=>{await s.restyle({setHideOnLeave:!1});const o=Ln(t,"network-request-failed"),a=Mn().setTimeout(()=>{i(o)},G1.get());function l(){Mn().clearTimeout(a),r(s)}s.ping(l).then(l,()=>{i(o)})}))}const Z1={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},eN=500,tN=600,nN="_blank",sN="http://localhost";class Gm{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function rN(t,e,n,s=eN,r=tN){const i=Math.max((window.screen.availHeight-r)/2,0).toString(),o=Math.max((window.screen.availWidth-s)/2,0).toString();let a="";const l={...Z1,width:s.toString(),height:r.toString(),top:i,left:o},u=Bt().toLowerCase();n&&(a=Bv(u)?nN:n),Fv(u)&&(e=e||sN,l.scrollbars="yes");const h=Object.entries(l).reduce((p,[g,I])=>`${p}${g}=${I},`,"");if(Tk(u)&&a!=="_self")return iN(e||"",a),new Gm(null);const f=window.open(e||"",a,h);Ie(f,t,"popup-blocked");try{f.focus()}catch{}return new Gm(f)}function iN(t,e){const n=document.createElement("a");n.href=t,n.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(s)}const oN="__/auth/handler",aN="emulator/auth/handler",cN=encodeURIComponent("fac");async function zm(t,e,n,s,r,i){Ie(t.config.authDomain,t,"auth-domain-config-required"),Ie(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:s,v:Fi,eventId:r};if(e instanceof Yv){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",jC(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,f]of Object.entries({}))o[h]=f}if(e instanceof ha){const h=e.getScopes().filter(f=>f!=="");h.length>0&&(o.scopes=h.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const h of Object.keys(a))a[h]===void 0&&delete a[h];const l=await t._getAppCheckToken(),u=l?`#${cN}=${encodeURIComponent(l)}`:"";return`${lN(t)}?${ca(a).slice(1)}${u}`}function lN({config:t}){return t.emulator?Ef(t,aN):`https://${t.authDomain}/${oN}`}const bu="webStorageSupport";class uN{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=sE,this._completeRedirectFn=V1,this._overrideRedirectResult=N1}async _openPopup(e,n,s,r){us(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const i=await zm(e,n,s,fh(),r);return rN(e,i,Af())}async _openRedirect(e,n,s,r){await this._originValidation(e);const i=await zm(e,n,s,fh(),r);return d1(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:r,promise:i}=this.eventManagers[n];return r?Promise.resolve(r):(us(i,"If manager is not set, promise should be"),i)}const s=this.initAndGetManager(e);return this.eventManagers[n]={promise:s},s.catch(()=>{delete this.eventManagers[n]}),s}async initAndGetManager(e){const n=await X1(e),s=new M1(e);return n.register("authEvent",r=>(Ie(r?.authEvent,e,"invalid-auth-event"),{status:s.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=n,s}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(bu,{type:bu},r=>{const i=r?.[0]?.[bu];i!==void 0&&n(!!i),An(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=$1(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return Wv()||Uv()||wf()}}const hN=uN;var Km="@firebase/auth",Qm="1.12.0";class fN{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(s=>{e(s?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Ie(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function dN(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function pN(t){Ii(new kr("auth",(e,{options:n})=>{const s=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=s.options;Ie(o&&!o.includes(":"),"invalid-api-key",{appName:s.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Gv(t)},u=new Sk(s,r,i,l);return xk(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,s)=>{e.getProvider("auth-internal").initialize()})),Ii(new kr("auth-internal",e=>{const n=Ur(e.getProvider("auth").getImmediate());return(s=>new fN(s))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),js(Km,Qm,dN(t)),js(Km,Qm,"esm2020")}const mN=300,gN=Tv("authIdTokenMaxAge")||mN;let Ym=null;const _N=t=>async e=>{const n=e&&await e.getIdTokenResult(),s=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(s&&s>gN)return;const r=n?.token;Ym!==r&&(Ym=r,await fetch(t,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))};function yN(t=Sv()){const e=yf(t,"auth");if(e.isInitialized())return e.getImmediate();const n=Mk(t,{popupRedirectResolver:hN,persistence:[w1,u1,sE]}),s=Tv("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(s,location.origin);if(location.origin===i.origin){const o=_N(i.toString());i1(n,o,()=>o(n.currentUser)),r1(n,a=>o(a))}}const r=vv("auth");return r&&Fk(n,`http://${r}`),n}function vN(){return document.getElementsByTagName("head")?.[0]??document}Ck({loadJS(t){return new Promise((e,n)=>{const s=document.createElement("script");s.setAttribute("src",t),s.onload=e,s.onerror=r=>{const i=Ln("internal-error");i.customData=r,n(i)},s.type="text/javascript",s.charset="UTF-8",vN().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});pN("Browser");var Jm=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var qs,uE;(function(){var t;function e(E,b){function v(){}v.prototype=b.prototype,E.F=b.prototype,E.prototype=new v,E.prototype.constructor=E,E.D=function(R,S,A){for(var w=Array(arguments.length-2),ue=2;ue<arguments.length;ue++)w[ue-2]=arguments[ue];return b.prototype[S].apply(R,w)}}function n(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(s,n),s.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(E,b,v){v||(v=0);const R=Array(16);if(typeof b=="string")for(var S=0;S<16;++S)R[S]=b.charCodeAt(v++)|b.charCodeAt(v++)<<8|b.charCodeAt(v++)<<16|b.charCodeAt(v++)<<24;else for(S=0;S<16;++S)R[S]=b[v++]|b[v++]<<8|b[v++]<<16|b[v++]<<24;b=E.g[0],v=E.g[1],S=E.g[2];let A=E.g[3],w;w=b+(A^v&(S^A))+R[0]+3614090360&4294967295,b=v+(w<<7&4294967295|w>>>25),w=A+(S^b&(v^S))+R[1]+3905402710&4294967295,A=b+(w<<12&4294967295|w>>>20),w=S+(v^A&(b^v))+R[2]+606105819&4294967295,S=A+(w<<17&4294967295|w>>>15),w=v+(b^S&(A^b))+R[3]+3250441966&4294967295,v=S+(w<<22&4294967295|w>>>10),w=b+(A^v&(S^A))+R[4]+4118548399&4294967295,b=v+(w<<7&4294967295|w>>>25),w=A+(S^b&(v^S))+R[5]+1200080426&4294967295,A=b+(w<<12&4294967295|w>>>20),w=S+(v^A&(b^v))+R[6]+2821735955&4294967295,S=A+(w<<17&4294967295|w>>>15),w=v+(b^S&(A^b))+R[7]+4249261313&4294967295,v=S+(w<<22&4294967295|w>>>10),w=b+(A^v&(S^A))+R[8]+1770035416&4294967295,b=v+(w<<7&4294967295|w>>>25),w=A+(S^b&(v^S))+R[9]+2336552879&4294967295,A=b+(w<<12&4294967295|w>>>20),w=S+(v^A&(b^v))+R[10]+4294925233&4294967295,S=A+(w<<17&4294967295|w>>>15),w=v+(b^S&(A^b))+R[11]+2304563134&4294967295,v=S+(w<<22&4294967295|w>>>10),w=b+(A^v&(S^A))+R[12]+1804603682&4294967295,b=v+(w<<7&4294967295|w>>>25),w=A+(S^b&(v^S))+R[13]+4254626195&4294967295,A=b+(w<<12&4294967295|w>>>20),w=S+(v^A&(b^v))+R[14]+2792965006&4294967295,S=A+(w<<17&4294967295|w>>>15),w=v+(b^S&(A^b))+R[15]+1236535329&4294967295,v=S+(w<<22&4294967295|w>>>10),w=b+(S^A&(v^S))+R[1]+4129170786&4294967295,b=v+(w<<5&4294967295|w>>>27),w=A+(v^S&(b^v))+R[6]+3225465664&4294967295,A=b+(w<<9&4294967295|w>>>23),w=S+(b^v&(A^b))+R[11]+643717713&4294967295,S=A+(w<<14&4294967295|w>>>18),w=v+(A^b&(S^A))+R[0]+3921069994&4294967295,v=S+(w<<20&4294967295|w>>>12),w=b+(S^A&(v^S))+R[5]+3593408605&4294967295,b=v+(w<<5&4294967295|w>>>27),w=A+(v^S&(b^v))+R[10]+38016083&4294967295,A=b+(w<<9&4294967295|w>>>23),w=S+(b^v&(A^b))+R[15]+3634488961&4294967295,S=A+(w<<14&4294967295|w>>>18),w=v+(A^b&(S^A))+R[4]+3889429448&4294967295,v=S+(w<<20&4294967295|w>>>12),w=b+(S^A&(v^S))+R[9]+568446438&4294967295,b=v+(w<<5&4294967295|w>>>27),w=A+(v^S&(b^v))+R[14]+3275163606&4294967295,A=b+(w<<9&4294967295|w>>>23),w=S+(b^v&(A^b))+R[3]+4107603335&4294967295,S=A+(w<<14&4294967295|w>>>18),w=v+(A^b&(S^A))+R[8]+1163531501&4294967295,v=S+(w<<20&4294967295|w>>>12),w=b+(S^A&(v^S))+R[13]+2850285829&4294967295,b=v+(w<<5&4294967295|w>>>27),w=A+(v^S&(b^v))+R[2]+4243563512&4294967295,A=b+(w<<9&4294967295|w>>>23),w=S+(b^v&(A^b))+R[7]+1735328473&4294967295,S=A+(w<<14&4294967295|w>>>18),w=v+(A^b&(S^A))+R[12]+2368359562&4294967295,v=S+(w<<20&4294967295|w>>>12),w=b+(v^S^A)+R[5]+4294588738&4294967295,b=v+(w<<4&4294967295|w>>>28),w=A+(b^v^S)+R[8]+2272392833&4294967295,A=b+(w<<11&4294967295|w>>>21),w=S+(A^b^v)+R[11]+1839030562&4294967295,S=A+(w<<16&4294967295|w>>>16),w=v+(S^A^b)+R[14]+4259657740&4294967295,v=S+(w<<23&4294967295|w>>>9),w=b+(v^S^A)+R[1]+2763975236&4294967295,b=v+(w<<4&4294967295|w>>>28),w=A+(b^v^S)+R[4]+1272893353&4294967295,A=b+(w<<11&4294967295|w>>>21),w=S+(A^b^v)+R[7]+4139469664&4294967295,S=A+(w<<16&4294967295|w>>>16),w=v+(S^A^b)+R[10]+3200236656&4294967295,v=S+(w<<23&4294967295|w>>>9),w=b+(v^S^A)+R[13]+681279174&4294967295,b=v+(w<<4&4294967295|w>>>28),w=A+(b^v^S)+R[0]+3936430074&4294967295,A=b+(w<<11&4294967295|w>>>21),w=S+(A^b^v)+R[3]+3572445317&4294967295,S=A+(w<<16&4294967295|w>>>16),w=v+(S^A^b)+R[6]+76029189&4294967295,v=S+(w<<23&4294967295|w>>>9),w=b+(v^S^A)+R[9]+3654602809&4294967295,b=v+(w<<4&4294967295|w>>>28),w=A+(b^v^S)+R[12]+3873151461&4294967295,A=b+(w<<11&4294967295|w>>>21),w=S+(A^b^v)+R[15]+530742520&4294967295,S=A+(w<<16&4294967295|w>>>16),w=v+(S^A^b)+R[2]+3299628645&4294967295,v=S+(w<<23&4294967295|w>>>9),w=b+(S^(v|~A))+R[0]+4096336452&4294967295,b=v+(w<<6&4294967295|w>>>26),w=A+(v^(b|~S))+R[7]+1126891415&4294967295,A=b+(w<<10&4294967295|w>>>22),w=S+(b^(A|~v))+R[14]+2878612391&4294967295,S=A+(w<<15&4294967295|w>>>17),w=v+(A^(S|~b))+R[5]+4237533241&4294967295,v=S+(w<<21&4294967295|w>>>11),w=b+(S^(v|~A))+R[12]+1700485571&4294967295,b=v+(w<<6&4294967295|w>>>26),w=A+(v^(b|~S))+R[3]+2399980690&4294967295,A=b+(w<<10&4294967295|w>>>22),w=S+(b^(A|~v))+R[10]+4293915773&4294967295,S=A+(w<<15&4294967295|w>>>17),w=v+(A^(S|~b))+R[1]+2240044497&4294967295,v=S+(w<<21&4294967295|w>>>11),w=b+(S^(v|~A))+R[8]+1873313359&4294967295,b=v+(w<<6&4294967295|w>>>26),w=A+(v^(b|~S))+R[15]+4264355552&4294967295,A=b+(w<<10&4294967295|w>>>22),w=S+(b^(A|~v))+R[6]+2734768916&4294967295,S=A+(w<<15&4294967295|w>>>17),w=v+(A^(S|~b))+R[13]+1309151649&4294967295,v=S+(w<<21&4294967295|w>>>11),w=b+(S^(v|~A))+R[4]+4149444226&4294967295,b=v+(w<<6&4294967295|w>>>26),w=A+(v^(b|~S))+R[11]+3174756917&4294967295,A=b+(w<<10&4294967295|w>>>22),w=S+(b^(A|~v))+R[2]+718787259&4294967295,S=A+(w<<15&4294967295|w>>>17),w=v+(A^(S|~b))+R[9]+3951481745&4294967295,E.g[0]=E.g[0]+b&4294967295,E.g[1]=E.g[1]+(S+(w<<21&4294967295|w>>>11))&4294967295,E.g[2]=E.g[2]+S&4294967295,E.g[3]=E.g[3]+A&4294967295}s.prototype.v=function(E,b){b===void 0&&(b=E.length);const v=b-this.blockSize,R=this.C;let S=this.h,A=0;for(;A<b;){if(S==0)for(;A<=v;)r(this,E,A),A+=this.blockSize;if(typeof E=="string"){for(;A<b;)if(R[S++]=E.charCodeAt(A++),S==this.blockSize){r(this,R),S=0;break}}else for(;A<b;)if(R[S++]=E[A++],S==this.blockSize){r(this,R),S=0;break}}this.h=S,this.o+=b},s.prototype.A=function(){var E=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);E[0]=128;for(var b=1;b<E.length-8;++b)E[b]=0;b=this.o*8;for(var v=E.length-8;v<E.length;++v)E[v]=b&255,b/=256;for(this.v(E),E=Array(16),b=0,v=0;v<4;++v)for(let R=0;R<32;R+=8)E[b++]=this.g[v]>>>R&255;return E};function i(E,b){var v=a;return Object.prototype.hasOwnProperty.call(v,E)?v[E]:v[E]=b(E)}function o(E,b){this.h=b;const v=[];let R=!0;for(let S=E.length-1;S>=0;S--){const A=E[S]|0;R&&A==b||(v[S]=A,R=!1)}this.g=v}var a={};function l(E){return-128<=E&&E<128?i(E,function(b){return new o([b|0],b<0?-1:0)}):new o([E|0],E<0?-1:0)}function u(E){if(isNaN(E)||!isFinite(E))return f;if(E<0)return D(u(-E));const b=[];let v=1;for(let R=0;E>=v;R++)b[R]=E/v|0,v*=4294967296;return new o(b,0)}function h(E,b){if(E.length==0)throw Error("number format error: empty string");if(b=b||10,b<2||36<b)throw Error("radix out of range: "+b);if(E.charAt(0)=="-")return D(h(E.substring(1),b));if(E.indexOf("-")>=0)throw Error('number format error: interior "-" character');const v=u(Math.pow(b,8));let R=f;for(let A=0;A<E.length;A+=8){var S=Math.min(8,E.length-A);const w=parseInt(E.substring(A,A+S),b);S<8?(S=u(Math.pow(b,S)),R=R.j(S).add(u(w))):(R=R.j(v),R=R.add(u(w)))}return R}var f=l(0),p=l(1),g=l(16777216);t=o.prototype,t.m=function(){if(y(this))return-D(this).m();let E=0,b=1;for(let v=0;v<this.g.length;v++){const R=this.i(v);E+=(R>=0?R:4294967296+R)*b,b*=4294967296}return E},t.toString=function(E){if(E=E||10,E<2||36<E)throw Error("radix out of range: "+E);if(I(this))return"0";if(y(this))return"-"+D(this).toString(E);const b=u(Math.pow(E,6));var v=this;let R="";for(;;){const S=C(v,b).g;v=V(v,S.j(b));let A=((v.g.length>0?v.g[0]:v.h)>>>0).toString(E);if(v=S,I(v))return A+R;for(;A.length<6;)A="0"+A;R=A+R}},t.i=function(E){return E<0?0:E<this.g.length?this.g[E]:this.h};function I(E){if(E.h!=0)return!1;for(let b=0;b<E.g.length;b++)if(E.g[b]!=0)return!1;return!0}function y(E){return E.h==-1}t.l=function(E){return E=V(this,E),y(E)?-1:I(E)?0:1};function D(E){const b=E.g.length,v=[];for(let R=0;R<b;R++)v[R]=~E.g[R];return new o(v,~E.h).add(p)}t.abs=function(){return y(this)?D(this):this},t.add=function(E){const b=Math.max(this.g.length,E.g.length),v=[];let R=0;for(let S=0;S<=b;S++){let A=R+(this.i(S)&65535)+(E.i(S)&65535),w=(A>>>16)+(this.i(S)>>>16)+(E.i(S)>>>16);R=w>>>16,A&=65535,w&=65535,v[S]=w<<16|A}return new o(v,v[v.length-1]&-2147483648?-1:0)};function V(E,b){return E.add(D(b))}t.j=function(E){if(I(this)||I(E))return f;if(y(this))return y(E)?D(this).j(D(E)):D(D(this).j(E));if(y(E))return D(this.j(D(E)));if(this.l(g)<0&&E.l(g)<0)return u(this.m()*E.m());const b=this.g.length+E.g.length,v=[];for(var R=0;R<2*b;R++)v[R]=0;for(R=0;R<this.g.length;R++)for(let S=0;S<E.g.length;S++){const A=this.i(R)>>>16,w=this.i(R)&65535,ue=E.i(S)>>>16,Ee=E.i(S)&65535;v[2*R+2*S]+=w*Ee,k(v,2*R+2*S),v[2*R+2*S+1]+=A*Ee,k(v,2*R+2*S+1),v[2*R+2*S+1]+=w*ue,k(v,2*R+2*S+1),v[2*R+2*S+2]+=A*ue,k(v,2*R+2*S+2)}for(E=0;E<b;E++)v[E]=v[2*E+1]<<16|v[2*E];for(E=b;E<2*b;E++)v[E]=0;return new o(v,0)};function k(E,b){for(;(E[b]&65535)!=E[b];)E[b+1]+=E[b]>>>16,E[b]&=65535,b++}function _(E,b){this.g=E,this.h=b}function C(E,b){if(I(b))throw Error("division by zero");if(I(E))return new _(f,f);if(y(E))return b=C(D(E),b),new _(D(b.g),D(b.h));if(y(b))return b=C(E,D(b)),new _(D(b.g),b.h);if(E.g.length>30){if(y(E)||y(b))throw Error("slowDivide_ only works with positive integers.");for(var v=p,R=b;R.l(E)<=0;)v=O(v),R=O(R);var S=U(v,1),A=U(R,1);for(R=U(R,2),v=U(v,2);!I(R);){var w=A.add(R);w.l(E)<=0&&(S=S.add(v),A=w),R=U(R,1),v=U(v,1)}return b=V(E,S.j(b)),new _(S,b)}for(S=f;E.l(b)>=0;){for(v=Math.max(1,Math.floor(E.m()/b.m())),R=Math.ceil(Math.log(v)/Math.LN2),R=R<=48?1:Math.pow(2,R-48),A=u(v),w=A.j(b);y(w)||w.l(E)>0;)v-=R,A=u(v),w=A.j(b);I(A)&&(A=p),S=S.add(A),E=V(E,w)}return new _(S,E)}t.B=function(E){return C(this,E).h},t.and=function(E){const b=Math.max(this.g.length,E.g.length),v=[];for(let R=0;R<b;R++)v[R]=this.i(R)&E.i(R);return new o(v,this.h&E.h)},t.or=function(E){const b=Math.max(this.g.length,E.g.length),v=[];for(let R=0;R<b;R++)v[R]=this.i(R)|E.i(R);return new o(v,this.h|E.h)},t.xor=function(E){const b=Math.max(this.g.length,E.g.length),v=[];for(let R=0;R<b;R++)v[R]=this.i(R)^E.i(R);return new o(v,this.h^E.h)};function O(E){const b=E.g.length+1,v=[];for(let R=0;R<b;R++)v[R]=E.i(R)<<1|E.i(R-1)>>>31;return new o(v,E.h)}function U(E,b){const v=b>>5;b%=32;const R=E.g.length-v,S=[];for(let A=0;A<R;A++)S[A]=b>0?E.i(A+v)>>>b|E.i(A+v+1)<<32-b:E.i(A+v);return new o(S,E.h)}s.prototype.digest=s.prototype.A,s.prototype.reset=s.prototype.u,s.prototype.update=s.prototype.v,uE=s,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=u,o.fromString=h,qs=o}).apply(typeof Jm<"u"?Jm:typeof self<"u"?self:typeof window<"u"?window:{});var qa=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var hE,_o,fE,rc,gh,dE,pE,mE;(function(){var t,e=Object.defineProperty;function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof qa=="object"&&qa];for(var d=0;d<c.length;++d){var m=c[d];if(m&&m.Math==Math)return m}throw Error("Cannot find global object")}var s=n(this);function r(c,d){if(d)e:{var m=s;c=c.split(".");for(var T=0;T<c.length-1;T++){var x=c[T];if(!(x in m))break e;m=m[x]}c=c[c.length-1],T=m[c],d=d(T),d!=T&&d!=null&&e(m,c,{configurable:!0,writable:!0,value:d})}}r("Symbol.dispose",function(c){return c||Symbol("Symbol.dispose")}),r("Array.prototype.values",function(c){return c||function(){return this[Symbol.iterator]()}}),r("Object.entries",function(c){return c||function(d){var m=[],T;for(T in d)Object.prototype.hasOwnProperty.call(d,T)&&m.push([T,d[T]]);return m}});var i=i||{},o=this||self;function a(c){var d=typeof c;return d=="object"&&c!=null||d=="function"}function l(c,d,m){return c.call.apply(c.bind,arguments)}function u(c,d,m){return u=l,u.apply(null,arguments)}function h(c,d){var m=Array.prototype.slice.call(arguments,1);return function(){var T=m.slice();return T.push.apply(T,arguments),c.apply(this,T)}}function f(c,d){function m(){}m.prototype=d.prototype,c.Z=d.prototype,c.prototype=new m,c.prototype.constructor=c,c.Ob=function(T,x,$){for(var oe=Array(arguments.length-2),Ne=2;Ne<arguments.length;Ne++)oe[Ne-2]=arguments[Ne];return d.prototype[x].apply(T,oe)}}var p=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?c=>c&&AsyncContext.Snapshot.wrap(c):c=>c;function g(c){const d=c.length;if(d>0){const m=Array(d);for(let T=0;T<d;T++)m[T]=c[T];return m}return[]}function I(c,d){for(let T=1;T<arguments.length;T++){const x=arguments[T];var m=typeof x;if(m=m!="object"?m:x?Array.isArray(x)?"array":m:"null",m=="array"||m=="object"&&typeof x.length=="number"){m=c.length||0;const $=x.length||0;c.length=m+$;for(let oe=0;oe<$;oe++)c[m+oe]=x[oe]}else c.push(x)}}class y{constructor(d,m){this.i=d,this.j=m,this.h=0,this.g=null}get(){let d;return this.h>0?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function D(c){o.setTimeout(()=>{throw c},0)}function V(){var c=E;let d=null;return c.g&&(d=c.g,c.g=c.g.next,c.g||(c.h=null),d.next=null),d}class k{constructor(){this.h=this.g=null}add(d,m){const T=_.get();T.set(d,m),this.h?this.h.next=T:this.g=T,this.h=T}}var _=new y(()=>new C,c=>c.reset());class C{constructor(){this.next=this.g=this.h=null}set(d,m){this.h=d,this.g=m,this.next=null}reset(){this.next=this.g=this.h=null}}let O,U=!1,E=new k,b=()=>{const c=Promise.resolve(void 0);O=()=>{c.then(v)}};function v(){for(var c;c=V();){try{c.h.call(c.g)}catch(m){D(m)}var d=_;d.j(c),d.h<100&&(d.h++,c.next=d.g,d.g=c)}U=!1}function R(){this.u=this.u,this.C=this.C}R.prototype.u=!1,R.prototype.dispose=function(){this.u||(this.u=!0,this.N())},R.prototype[Symbol.dispose]=function(){this.dispose()},R.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function S(c,d){this.type=c,this.g=this.target=d,this.defaultPrevented=!1}S.prototype.h=function(){this.defaultPrevented=!0};var A=(function(){if(!o.addEventListener||!Object.defineProperty)return!1;var c=!1,d=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const m=()=>{};o.addEventListener("test",m,d),o.removeEventListener("test",m,d)}catch{}return c})();function w(c){return/^[\s\xa0]*$/.test(c)}function ue(c,d){S.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c&&this.init(c,d)}f(ue,S),ue.prototype.init=function(c,d){const m=this.type=c.type,T=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;this.target=c.target||c.srcElement,this.g=d,d=c.relatedTarget,d||(m=="mouseover"?d=c.fromElement:m=="mouseout"&&(d=c.toElement)),this.relatedTarget=d,T?(this.clientX=T.clientX!==void 0?T.clientX:T.pageX,this.clientY=T.clientY!==void 0?T.clientY:T.pageY,this.screenX=T.screenX||0,this.screenY=T.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=c.pointerType,this.state=c.state,this.i=c,c.defaultPrevented&&ue.Z.h.call(this)},ue.prototype.h=function(){ue.Z.h.call(this);const c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var Ee="closure_listenable_"+(Math.random()*1e6|0),ae=0;function j(c,d,m,T,x){this.listener=c,this.proxy=null,this.src=d,this.type=m,this.capture=!!T,this.ha=x,this.key=++ae,this.da=this.fa=!1}function L(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function Y(c,d,m){for(const T in c)d.call(m,c[T],T,c)}function H(c,d){for(const m in c)d.call(void 0,c[m],m,c)}function q(c){const d={};for(const m in c)d[m]=c[m];return d}const F="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ie(c,d){let m,T;for(let x=1;x<arguments.length;x++){T=arguments[x];for(m in T)c[m]=T[m];for(let $=0;$<F.length;$++)m=F[$],Object.prototype.hasOwnProperty.call(T,m)&&(c[m]=T[m])}}function me(c){this.src=c,this.g={},this.h=0}me.prototype.add=function(c,d,m,T,x){const $=c.toString();c=this.g[$],c||(c=this.g[$]=[],this.h++);const oe=ge(c,d,T,x);return oe>-1?(d=c[oe],m||(d.fa=!1)):(d=new j(d,this.src,$,!!T,x),d.fa=m,c.push(d)),d};function we(c,d){const m=d.type;if(m in c.g){var T=c.g[m],x=Array.prototype.indexOf.call(T,d,void 0),$;($=x>=0)&&Array.prototype.splice.call(T,x,1),$&&(L(d),c.g[m].length==0&&(delete c.g[m],c.h--))}}function ge(c,d,m,T){for(let x=0;x<c.length;++x){const $=c[x];if(!$.da&&$.listener==d&&$.capture==!!m&&$.ha==T)return x}return-1}var B="closure_lm_"+(Math.random()*1e6|0),ne={};function z(c,d,m,T,x){if(Array.isArray(d)){for(let $=0;$<d.length;$++)z(c,d[$],m,T,x);return null}return m=Z(m),c&&c[Ee]?c.J(d,m,a(T)?!!T.capture:!1,x):W(c,d,m,!1,T,x)}function W(c,d,m,T,x,$){if(!d)throw Error("Invalid event type");const oe=a(x)?!!x.capture:!!x;let Ne=J(c);if(Ne||(c[B]=Ne=new me(c)),m=Ne.add(d,m,T,oe,$),m.proxy)return m;if(T=he(),m.proxy=T,T.src=c,T.listener=m,c.addEventListener)A||(x=oe),x===void 0&&(x=!1),c.addEventListener(d.toString(),T,x);else if(c.attachEvent)c.attachEvent(N(d.toString()),T);else if(c.addListener&&c.removeListener)c.addListener(T);else throw Error("addEventListener and attachEvent are unavailable.");return m}function he(){function c(m){return d.call(c.src,c.listener,m)}const d=M;return c}function ke(c,d,m,T,x){if(Array.isArray(d))for(var $=0;$<d.length;$++)ke(c,d[$],m,T,x);else T=a(T)?!!T.capture:!!T,m=Z(m),c&&c[Ee]?(c=c.i,$=String(d).toString(),$ in c.g&&(d=c.g[$],m=ge(d,m,T,x),m>-1&&(L(d[m]),Array.prototype.splice.call(d,m,1),d.length==0&&(delete c.g[$],c.h--)))):c&&(c=J(c))&&(d=c.g[d.toString()],c=-1,d&&(c=ge(d,m,T,x)),(m=c>-1?d[c]:null)&&P(m))}function P(c){if(typeof c!="number"&&c&&!c.da){var d=c.src;if(d&&d[Ee])we(d.i,c);else{var m=c.type,T=c.proxy;d.removeEventListener?d.removeEventListener(m,T,c.capture):d.detachEvent?d.detachEvent(N(m),T):d.addListener&&d.removeListener&&d.removeListener(T),(m=J(d))?(we(m,c),m.h==0&&(m.src=null,d[B]=null)):L(c)}}}function N(c){return c in ne?ne[c]:ne[c]="on"+c}function M(c,d){if(c.da)c=!0;else{d=new ue(d,this);const m=c.listener,T=c.ha||c.src;c.fa&&P(c),c=m.call(T,d)}return c}function J(c){return c=c[B],c instanceof me?c:null}var G="__closure_events_fn_"+(Math.random()*1e9>>>0);function Z(c){return typeof c=="function"?c:(c[G]||(c[G]=function(d){return c.handleEvent(d)}),c[G])}function se(){R.call(this),this.i=new me(this),this.M=this,this.G=null}f(se,R),se.prototype[Ee]=!0,se.prototype.removeEventListener=function(c,d,m,T){ke(this,c,d,m,T)};function te(c,d){var m,T=c.G;if(T)for(m=[];T;T=T.G)m.push(T);if(c=c.M,T=d.type||d,typeof d=="string")d=new S(d,c);else if(d instanceof S)d.target=d.target||c;else{var x=d;d=new S(T,c),ie(d,x)}x=!0;let $,oe;if(m)for(oe=m.length-1;oe>=0;oe--)$=d.g=m[oe],x=re($,T,!0,d)&&x;if($=d.g=c,x=re($,T,!0,d)&&x,x=re($,T,!1,d)&&x,m)for(oe=0;oe<m.length;oe++)$=d.g=m[oe],x=re($,T,!1,d)&&x}se.prototype.N=function(){if(se.Z.N.call(this),this.i){var c=this.i;for(const d in c.g){const m=c.g[d];for(let T=0;T<m.length;T++)L(m[T]);delete c.g[d],c.h--}}this.G=null},se.prototype.J=function(c,d,m,T){return this.i.add(String(c),d,!1,m,T)},se.prototype.K=function(c,d,m,T){return this.i.add(String(c),d,!0,m,T)};function re(c,d,m,T){if(d=c.i.g[String(d)],!d)return!0;d=d.concat();let x=!0;for(let $=0;$<d.length;++$){const oe=d[$];if(oe&&!oe.da&&oe.capture==m){const Ne=oe.listener,Tt=oe.ha||oe.src;oe.fa&&we(c.i,oe),x=Ne.call(Tt,T)!==!1&&x}}return x&&!T.defaultPrevented}function ee(c,d){if(typeof c!="function")if(c&&typeof c.handleEvent=="function")c=u(c.handleEvent,c);else throw Error("Invalid listener argument");return Number(d)>2147483647?-1:o.setTimeout(c,d||0)}function ve(c){c.g=ee(()=>{c.g=null,c.i&&(c.i=!1,ve(c))},c.l);const d=c.h;c.h=null,c.m.apply(null,d)}class le extends R{constructor(d,m){super(),this.m=d,this.l=m,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:ve(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function pe(c){R.call(this),this.h=c,this.g={}}f(pe,R);var Se=[];function De(c){Y(c.g,function(d,m){this.g.hasOwnProperty(m)&&P(d)},c),c.g={}}pe.prototype.N=function(){pe.Z.N.call(this),De(this)},pe.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Be=o.JSON.stringify,Ue=o.JSON.parse,Vt=class{stringify(c){return o.JSON.stringify(c,void 0)}parse(c){return o.JSON.parse(c,void 0)}};function vt(){}function zt(){}var Et={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function jn(){S.call(this,"d")}f(jn,S);function jr(){S.call(this,"c")}f(jr,S);var lt={},en=null;function or(){return en=en||new se}lt.Ia="serverreachability";function Gi(c){S.call(this,lt.Ia,c)}f(Gi,S);function zi(c){const d=or();te(d,new Gi(d))}lt.STAT_EVENT="statevent";function cd(c,d){S.call(this,lt.STAT_EVENT,c),this.stat=d}f(cd,S);function $t(c){const d=or();te(d,new cd(d,c))}lt.Ja="timingevent";function ld(c,d){S.call(this,lt.Ja,c),this.size=d}f(ld,S);function Ki(c,d){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){c()},d)}function Qi(){this.g=!0}Qi.prototype.ua=function(){this.g=!1};function KT(c,d,m,T,x,$){c.info(function(){if(c.g)if($){var oe="",Ne=$.split("&");for(let ze=0;ze<Ne.length;ze++){var Tt=Ne[ze].split("=");if(Tt.length>1){const It=Tt[0];Tt=Tt[1];const Pn=It.split("_");oe=Pn.length>=2&&Pn[1]=="type"?oe+(It+"="+Tt+"&"):oe+(It+"=redacted&")}}}else oe=null;else oe=$;return"XMLHTTP REQ ("+T+") [attempt "+x+"]: "+d+`
`+m+`
`+oe})}function QT(c,d,m,T,x,$,oe){c.info(function(){return"XMLHTTP RESP ("+T+") [ attempt "+x+"]: "+d+`
`+m+`
`+$+" "+oe})}function qr(c,d,m,T){c.info(function(){return"XMLHTTP TEXT ("+d+"): "+JT(c,m)+(T?" "+T:"")})}function YT(c,d){c.info(function(){return"TIMEOUT: "+d})}Qi.prototype.info=function(){};function JT(c,d){if(!c.g)return d;if(!d)return null;try{const $=JSON.parse(d);if($){for(c=0;c<$.length;c++)if(Array.isArray($[c])){var m=$[c];if(!(m.length<2)){var T=m[1];if(Array.isArray(T)&&!(T.length<1)){var x=T[0];if(x!="noop"&&x!="stop"&&x!="close")for(let oe=1;oe<T.length;oe++)T[oe]=""}}}}return Be($)}catch{return d}}var wa={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},ud={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},hd;function Vl(){}f(Vl,vt),Vl.prototype.g=function(){return new XMLHttpRequest},hd=new Vl;function Yi(c){return encodeURIComponent(String(c))}function XT(c){var d=1;c=c.split(":");const m=[];for(;d>0&&c.length;)m.push(c.shift()),d--;return c.length&&m.push(c.join(":")),m}function gs(c,d,m,T){this.j=c,this.i=d,this.l=m,this.S=T||1,this.V=new pe(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new fd}function fd(){this.i=null,this.g="",this.h=!1}var dd={},Ll={};function Ml(c,d,m){c.M=1,c.A=Ia(Cn(d)),c.u=m,c.R=!0,pd(c,null)}function pd(c,d){c.F=Date.now(),ba(c),c.B=Cn(c.A);var m=c.B,T=c.S;Array.isArray(T)||(T=[String(T)]),Sd(m.i,"t",T),c.C=0,m=c.j.L,c.h=new fd,c.g=Wd(c.j,m?d:null,!c.u),c.P>0&&(c.O=new le(u(c.Y,c,c.g),c.P)),d=c.V,m=c.g,T=c.ba;var x="readystatechange";Array.isArray(x)||(x&&(Se[0]=x.toString()),x=Se);for(let $=0;$<x.length;$++){const oe=z(m,x[$],T||d.handleEvent,!1,d.h||d);if(!oe)break;d.g[oe.key]=oe}d=c.J?q(c.J):{},c.u?(c.v||(c.v="POST"),d["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.B,c.v,c.u,d)):(c.v="GET",c.g.ea(c.B,c.v,null,d)),zi(),KT(c.i,c.v,c.B,c.l,c.S,c.u)}gs.prototype.ba=function(c){c=c.target;const d=this.O;d&&vs(c)==3?d.j():this.Y(c)},gs.prototype.Y=function(c){try{if(c==this.g)e:{const Ne=vs(this.g),Tt=this.g.ya(),ze=this.g.ca();if(!(Ne<3)&&(Ne!=3||this.g&&(this.h.h||this.g.la()||Vd(this.g)))){this.K||Ne!=4||Tt==7||(Tt==8||ze<=0?zi(3):zi(2)),xl(this);var d=this.g.ca();this.X=d;var m=ZT(this);if(this.o=d==200,QT(this.i,this.v,this.B,this.l,this.S,Ne,d),this.o){if(this.U&&!this.L){t:{if(this.g){var T,x=this.g;if((T=x.g?x.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!w(T)){var $=T;break t}}$=null}if(c=$)qr(this.i,this.l,c,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Fl(this,c);else{this.o=!1,this.m=3,$t(12),ar(this),Ji(this);break e}}if(this.R){c=!0;let It;for(;!this.K&&this.C<m.length;)if(It=ew(this,m),It==Ll){Ne==4&&(this.m=4,$t(14),c=!1),qr(this.i,this.l,null,"[Incomplete Response]");break}else if(It==dd){this.m=4,$t(15),qr(this.i,this.l,m,"[Invalid Chunk]"),c=!1;break}else qr(this.i,this.l,It,null),Fl(this,It);if(md(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ne!=4||m.length!=0||this.h.h||(this.m=1,$t(16),c=!1),this.o=this.o&&c,!c)qr(this.i,this.l,m,"[Invalid Chunked Response]"),ar(this),Ji(this);else if(m.length>0&&!this.W){this.W=!0;var oe=this.j;oe.g==this&&oe.aa&&!oe.P&&(oe.j.info("Great, no buffering proxy detected. Bytes received: "+m.length),Gl(oe),oe.P=!0,$t(11))}}else qr(this.i,this.l,m,null),Fl(this,m);Ne==4&&ar(this),this.o&&!this.K&&(Ne==4?$d(this.j,this):(this.o=!1,ba(this)))}else pw(this.g),d==400&&m.indexOf("Unknown SID")>0?(this.m=3,$t(12)):(this.m=0,$t(13)),ar(this),Ji(this)}}}catch{}};function ZT(c){if(!md(c))return c.g.la();const d=Vd(c.g);if(d==="")return"";let m="";const T=d.length,x=vs(c.g)==4;if(!c.h.i){if(typeof TextDecoder>"u")return ar(c),Ji(c),"";c.h.i=new o.TextDecoder}for(let $=0;$<T;$++)c.h.h=!0,m+=c.h.i.decode(d[$],{stream:!(x&&$==T-1)});return d.length=0,c.h.g+=m,c.C=0,c.h.g}function md(c){return c.g?c.v=="GET"&&c.M!=2&&c.j.Aa:!1}function ew(c,d){var m=c.C,T=d.indexOf(`
`,m);return T==-1?Ll:(m=Number(d.substring(m,T)),isNaN(m)?dd:(T+=1,T+m>d.length?Ll:(d=d.slice(T,T+m),c.C=T+m,d)))}gs.prototype.cancel=function(){this.K=!0,ar(this)};function ba(c){c.T=Date.now()+c.H,gd(c,c.H)}function gd(c,d){if(c.D!=null)throw Error("WatchDog timer not null");c.D=Ki(u(c.aa,c),d)}function xl(c){c.D&&(o.clearTimeout(c.D),c.D=null)}gs.prototype.aa=function(){this.D=null;const c=Date.now();c-this.T>=0?(YT(this.i,this.B),this.M!=2&&(zi(),$t(17)),ar(this),this.m=2,Ji(this)):gd(this,this.T-c)};function Ji(c){c.j.I==0||c.K||$d(c.j,c)}function ar(c){xl(c);var d=c.O;d&&typeof d.dispose=="function"&&d.dispose(),c.O=null,De(c.V),c.g&&(d=c.g,c.g=null,d.abort(),d.dispose())}function Fl(c,d){try{var m=c.j;if(m.I!=0&&(m.g==c||Ul(m.h,c))){if(!c.L&&Ul(m.h,c)&&m.I==3){try{var T=m.Ba.g.parse(d)}catch{T=null}if(Array.isArray(T)&&T.length==3){var x=T;if(x[0]==0){e:if(!m.v){if(m.g)if(m.g.F+3e3<c.F)Pa(m),Sa(m);else break e;Wl(m),$t(18)}}else m.xa=x[1],0<m.xa-m.K&&x[2]<37500&&m.F&&m.A==0&&!m.C&&(m.C=Ki(u(m.Va,m),6e3));vd(m.h)<=1&&m.ta&&(m.ta=void 0)}else lr(m,11)}else if((c.L||m.g==c)&&Pa(m),!w(d))for(x=m.Ba.g.parse(d),d=0;d<x.length;d++){let ze=x[d];const It=ze[0];if(!(It<=m.K))if(m.K=It,ze=ze[1],m.I==2)if(ze[0]=="c"){m.M=ze[1],m.ba=ze[2];const Pn=ze[3];Pn!=null&&(m.ka=Pn,m.j.info("VER="+m.ka));const ur=ze[4];ur!=null&&(m.za=ur,m.j.info("SVER="+m.za));const Es=ze[5];Es!=null&&typeof Es=="number"&&Es>0&&(T=1.5*Es,m.O=T,m.j.info("backChannelRequestTimeoutMs_="+T)),T=m;const Ts=c.g;if(Ts){const Na=Ts.g?Ts.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Na){var $=T.h;$.g||Na.indexOf("spdy")==-1&&Na.indexOf("quic")==-1&&Na.indexOf("h2")==-1||($.j=$.l,$.g=new Set,$.h&&(Bl($,$.h),$.h=null))}if(T.G){const zl=Ts.g?Ts.g.getResponseHeader("X-HTTP-Session-Id"):null;zl&&(T.wa=zl,Xe(T.J,T.G,zl))}}m.I=3,m.l&&m.l.ra(),m.aa&&(m.T=Date.now()-c.F,m.j.info("Handshake RTT: "+m.T+"ms")),T=m;var oe=c;if(T.na=qd(T,T.L?T.ba:null,T.W),oe.L){Ed(T.h,oe);var Ne=oe,Tt=T.O;Tt&&(Ne.H=Tt),Ne.D&&(xl(Ne),ba(Ne)),T.g=oe}else Ud(T);m.i.length>0&&Ca(m)}else ze[0]!="stop"&&ze[0]!="close"||lr(m,7);else m.I==3&&(ze[0]=="stop"||ze[0]=="close"?ze[0]=="stop"?lr(m,7):ql(m):ze[0]!="noop"&&m.l&&m.l.qa(ze),m.A=0)}}zi(4)}catch{}}var tw=class{constructor(c,d){this.g=c,this.map=d}};function _d(c){this.l=c||10,o.PerformanceNavigationTiming?(c=o.performance.getEntriesByType("navigation"),c=c.length>0&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function yd(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function vd(c){return c.h?1:c.g?c.g.size:0}function Ul(c,d){return c.h?c.h==d:c.g?c.g.has(d):!1}function Bl(c,d){c.g?c.g.add(d):c.h=d}function Ed(c,d){c.h&&c.h==d?c.h=null:c.g&&c.g.has(d)&&c.g.delete(d)}_d.prototype.cancel=function(){if(this.i=Td(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function Td(c){if(c.h!=null)return c.i.concat(c.h.G);if(c.g!=null&&c.g.size!==0){let d=c.i;for(const m of c.g.values())d=d.concat(m.G);return d}return g(c.i)}var wd=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function nw(c,d){if(c){c=c.split("&");for(let m=0;m<c.length;m++){const T=c[m].indexOf("=");let x,$=null;T>=0?(x=c[m].substring(0,T),$=c[m].substring(T+1)):x=c[m],d(x,$?decodeURIComponent($.replace(/\+/g," ")):"")}}}function _s(c){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let d;c instanceof _s?(this.l=c.l,Xi(this,c.j),this.o=c.o,this.g=c.g,Zi(this,c.u),this.h=c.h,$l(this,Cd(c.i)),this.m=c.m):c&&(d=String(c).match(wd))?(this.l=!1,Xi(this,d[1]||"",!0),this.o=eo(d[2]||""),this.g=eo(d[3]||"",!0),Zi(this,d[4]),this.h=eo(d[5]||"",!0),$l(this,d[6]||"",!0),this.m=eo(d[7]||"")):(this.l=!1,this.i=new no(null,this.l))}_s.prototype.toString=function(){const c=[];var d=this.j;d&&c.push(to(d,bd,!0),":");var m=this.g;return(m||d=="file")&&(c.push("//"),(d=this.o)&&c.push(to(d,bd,!0),"@"),c.push(Yi(m).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m=this.u,m!=null&&c.push(":",String(m))),(m=this.h)&&(this.g&&m.charAt(0)!="/"&&c.push("/"),c.push(to(m,m.charAt(0)=="/"?iw:rw,!0))),(m=this.i.toString())&&c.push("?",m),(m=this.m)&&c.push("#",to(m,aw)),c.join("")},_s.prototype.resolve=function(c){const d=Cn(this);let m=!!c.j;m?Xi(d,c.j):m=!!c.o,m?d.o=c.o:m=!!c.g,m?d.g=c.g:m=c.u!=null;var T=c.h;if(m)Zi(d,c.u);else if(m=!!c.h){if(T.charAt(0)!="/")if(this.g&&!this.h)T="/"+T;else{var x=d.h.lastIndexOf("/");x!=-1&&(T=d.h.slice(0,x+1)+T)}if(x=T,x==".."||x==".")T="";else if(x.indexOf("./")!=-1||x.indexOf("/.")!=-1){T=x.lastIndexOf("/",0)==0,x=x.split("/");const $=[];for(let oe=0;oe<x.length;){const Ne=x[oe++];Ne=="."?T&&oe==x.length&&$.push(""):Ne==".."?(($.length>1||$.length==1&&$[0]!="")&&$.pop(),T&&oe==x.length&&$.push("")):($.push(Ne),T=!0)}T=$.join("/")}else T=x}return m?d.h=T:m=c.i.toString()!=="",m?$l(d,Cd(c.i)):m=!!c.m,m&&(d.m=c.m),d};function Cn(c){return new _s(c)}function Xi(c,d,m){c.j=m?eo(d,!0):d,c.j&&(c.j=c.j.replace(/:$/,""))}function Zi(c,d){if(d){if(d=Number(d),isNaN(d)||d<0)throw Error("Bad port number "+d);c.u=d}else c.u=null}function $l(c,d,m){d instanceof no?(c.i=d,cw(c.i,c.l)):(m||(d=to(d,ow)),c.i=new no(d,c.l))}function Xe(c,d,m){c.i.set(d,m)}function Ia(c){return Xe(c,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),c}function eo(c,d){return c?d?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function to(c,d,m){return typeof c=="string"?(c=encodeURI(c).replace(d,sw),m&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function sw(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var bd=/[#\/\?@]/g,rw=/[#\?:]/g,iw=/[#\?]/g,ow=/[#\?@]/g,aw=/#/g;function no(c,d){this.h=this.g=null,this.i=c||null,this.j=!!d}function cr(c){c.g||(c.g=new Map,c.h=0,c.i&&nw(c.i,function(d,m){c.add(decodeURIComponent(d.replace(/\+/g," ")),m)}))}t=no.prototype,t.add=function(c,d){cr(this),this.i=null,c=Wr(this,c);let m=this.g.get(c);return m||this.g.set(c,m=[]),m.push(d),this.h+=1,this};function Id(c,d){cr(c),d=Wr(c,d),c.g.has(d)&&(c.i=null,c.h-=c.g.get(d).length,c.g.delete(d))}function Ad(c,d){return cr(c),d=Wr(c,d),c.g.has(d)}t.forEach=function(c,d){cr(this),this.g.forEach(function(m,T){m.forEach(function(x){c.call(d,x,T,this)},this)},this)};function Rd(c,d){cr(c);let m=[];if(typeof d=="string")Ad(c,d)&&(m=m.concat(c.g.get(Wr(c,d))));else for(c=Array.from(c.g.values()),d=0;d<c.length;d++)m=m.concat(c[d]);return m}t.set=function(c,d){return cr(this),this.i=null,c=Wr(this,c),Ad(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[d]),this.h+=1,this},t.get=function(c,d){return c?(c=Rd(this,c),c.length>0?String(c[0]):d):d};function Sd(c,d,m){Id(c,d),m.length>0&&(c.i=null,c.g.set(Wr(c,d),g(m)),c.h+=m.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],d=Array.from(this.g.keys());for(let T=0;T<d.length;T++){var m=d[T];const x=Yi(m);m=Rd(this,m);for(let $=0;$<m.length;$++){let oe=x;m[$]!==""&&(oe+="="+Yi(m[$])),c.push(oe)}}return this.i=c.join("&")};function Cd(c){const d=new no;return d.i=c.i,c.g&&(d.g=new Map(c.g),d.h=c.h),d}function Wr(c,d){return d=String(d),c.j&&(d=d.toLowerCase()),d}function cw(c,d){d&&!c.j&&(cr(c),c.i=null,c.g.forEach(function(m,T){const x=T.toLowerCase();T!=x&&(Id(this,T),Sd(this,x,m))},c)),c.j=d}function lw(c,d){const m=new Qi;if(o.Image){const T=new Image;T.onload=h(ys,m,"TestLoadImage: loaded",!0,d,T),T.onerror=h(ys,m,"TestLoadImage: error",!1,d,T),T.onabort=h(ys,m,"TestLoadImage: abort",!1,d,T),T.ontimeout=h(ys,m,"TestLoadImage: timeout",!1,d,T),o.setTimeout(function(){T.ontimeout&&T.ontimeout()},1e4),T.src=c}else d(!1)}function uw(c,d){const m=new Qi,T=new AbortController,x=setTimeout(()=>{T.abort(),ys(m,"TestPingServer: timeout",!1,d)},1e4);fetch(c,{signal:T.signal}).then($=>{clearTimeout(x),$.ok?ys(m,"TestPingServer: ok",!0,d):ys(m,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(x),ys(m,"TestPingServer: error",!1,d)})}function ys(c,d,m,T,x){try{x&&(x.onload=null,x.onerror=null,x.onabort=null,x.ontimeout=null),T(m)}catch{}}function hw(){this.g=new Vt}function Hl(c){this.i=c.Sb||null,this.h=c.ab||!1}f(Hl,vt),Hl.prototype.g=function(){return new Aa(this.i,this.h)};function Aa(c,d){se.call(this),this.H=c,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}f(Aa,se),t=Aa.prototype,t.open=function(c,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=c,this.D=d,this.readyState=1,ro(this)},t.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const d={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};c&&(d.body=c),(this.H||o).fetch(new Request(this.D,d)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,so(this)),this.readyState=0},t.Pa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,ro(this)),this.g&&(this.readyState=3,ro(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Pd(this)}else c.text().then(this.Oa.bind(this),this.ga.bind(this))};function Pd(c){c.j.read().then(c.Ma.bind(c)).catch(c.ga.bind(c))}t.Ma=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var d=c.value?c.value:new Uint8Array(0);(d=this.B.decode(d,{stream:!c.done}))&&(this.response=this.responseText+=d)}c.done?so(this):ro(this),this.readyState==3&&Pd(this)}},t.Oa=function(c){this.g&&(this.response=this.responseText=c,so(this))},t.Na=function(c){this.g&&(this.response=c,so(this))},t.ga=function(){this.g&&so(this)};function so(c){c.readyState=4,c.l=null,c.j=null,c.B=null,ro(c)}t.setRequestHeader=function(c,d){this.A.append(c,d)},t.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],d=this.h.entries();for(var m=d.next();!m.done;)m=m.value,c.push(m[0]+": "+m[1]),m=d.next();return c.join(`\r
`)};function ro(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(Aa.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function kd(c){let d="";return Y(c,function(m,T){d+=T,d+=":",d+=m,d+=`\r
`}),d}function jl(c,d,m){e:{for(T in m){var T=!1;break e}T=!0}T||(m=kd(m),typeof c=="string"?m!=null&&Yi(m):Xe(c,d,m))}function nt(c){se.call(this),this.headers=new Map,this.L=c||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}f(nt,se);var fw=/^https?$/i,dw=["POST","PUT"];t=nt.prototype,t.Fa=function(c){this.H=c},t.ea=function(c,d,m,T){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);d=d?d.toUpperCase():"GET",this.D=c,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():hd.g(),this.g.onreadystatechange=p(u(this.Ca,this));try{this.B=!0,this.g.open(d,String(c),!0),this.B=!1}catch($){Nd(this,$);return}if(c=m||"",m=new Map(this.headers),T)if(Object.getPrototypeOf(T)===Object.prototype)for(var x in T)m.set(x,T[x]);else if(typeof T.keys=="function"&&typeof T.get=="function")for(const $ of T.keys())m.set($,T.get($));else throw Error("Unknown input type for opt_headers: "+String(T));T=Array.from(m.keys()).find($=>$.toLowerCase()=="content-type"),x=o.FormData&&c instanceof o.FormData,!(Array.prototype.indexOf.call(dw,d,void 0)>=0)||T||x||m.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[$,oe]of m)this.g.setRequestHeader($,oe);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(c),this.v=!1}catch($){Nd(this,$)}};function Nd(c,d){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=d,c.o=5,Dd(c),Ra(c)}function Dd(c){c.A||(c.A=!0,te(c,"complete"),te(c,"error"))}t.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=c||7,te(this,"complete"),te(this,"abort"),Ra(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ra(this,!0)),nt.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?Od(this):this.Xa())},t.Xa=function(){Od(this)};function Od(c){if(c.h&&typeof i<"u"){if(c.v&&vs(c)==4)setTimeout(c.Ca.bind(c),0);else if(te(c,"readystatechange"),vs(c)==4){c.h=!1;try{const $=c.ca();e:switch($){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var m;if(!(m=d)){var T;if(T=$===0){let oe=String(c.D).match(wd)[1]||null;!oe&&o.self&&o.self.location&&(oe=o.self.location.protocol.slice(0,-1)),T=!fw.test(oe?oe.toLowerCase():"")}m=T}if(m)te(c,"complete"),te(c,"success");else{c.o=6;try{var x=vs(c)>2?c.g.statusText:""}catch{x=""}c.l=x+" ["+c.ca()+"]",Dd(c)}}finally{Ra(c)}}}}function Ra(c,d){if(c.g){c.m&&(clearTimeout(c.m),c.m=null);const m=c.g;c.g=null,d||te(c,"ready");try{m.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function vs(c){return c.g?c.g.readyState:0}t.ca=function(){try{return vs(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(c){if(this.g){var d=this.g.responseText;return c&&d.indexOf(c)==0&&(d=d.substring(c.length)),Ue(d)}};function Vd(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.F){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function pw(c){const d={};c=(c.g&&vs(c)>=2&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let T=0;T<c.length;T++){if(w(c[T]))continue;var m=XT(c[T]);const x=m[0];if(m=m[1],typeof m!="string")continue;m=m.trim();const $=d[x]||[];d[x]=$,$.push(m)}H(d,function(T){return T.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function io(c,d,m){return m&&m.internalChannelParams&&m.internalChannelParams[c]||d}function Ld(c){this.za=0,this.i=[],this.j=new Qi,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=io("failFast",!1,c),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=io("baseRetryDelayMs",5e3,c),this.Za=io("retryDelaySeedMs",1e4,c),this.Ta=io("forwardChannelMaxRetries",2,c),this.va=io("forwardChannelRequestTimeoutMs",2e4,c),this.ma=c&&c.xmlHttpFactory||void 0,this.Ua=c&&c.Rb||void 0,this.Aa=c&&c.useFetchStreams||!1,this.O=void 0,this.L=c&&c.supportsCrossDomainXhr||!1,this.M="",this.h=new _d(c&&c.concurrentRequestLimit),this.Ba=new hw,this.S=c&&c.fastHandshake||!1,this.R=c&&c.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=c&&c.Pb||!1,c&&c.ua&&this.j.ua(),c&&c.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&c&&c.detectBufferingProxy||!1,this.ia=void 0,c&&c.longPollingTimeout&&c.longPollingTimeout>0&&(this.ia=c.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=Ld.prototype,t.ka=8,t.I=1,t.connect=function(c,d,m,T){$t(0),this.W=c,this.H=d||{},m&&T!==void 0&&(this.H.OSID=m,this.H.OAID=T),this.F=this.X,this.J=qd(this,null,this.W),Ca(this)};function ql(c){if(Md(c),c.I==3){var d=c.V++,m=Cn(c.J);if(Xe(m,"SID",c.M),Xe(m,"RID",d),Xe(m,"TYPE","terminate"),oo(c,m),d=new gs(c,c.j,d),d.M=2,d.A=Ia(Cn(m)),m=!1,o.navigator&&o.navigator.sendBeacon)try{m=o.navigator.sendBeacon(d.A.toString(),"")}catch{}!m&&o.Image&&(new Image().src=d.A,m=!0),m||(d.g=Wd(d.j,null),d.g.ea(d.A)),d.F=Date.now(),ba(d)}jd(c)}function Sa(c){c.g&&(Gl(c),c.g.cancel(),c.g=null)}function Md(c){Sa(c),c.v&&(o.clearTimeout(c.v),c.v=null),Pa(c),c.h.cancel(),c.m&&(typeof c.m=="number"&&o.clearTimeout(c.m),c.m=null)}function Ca(c){if(!yd(c.h)&&!c.m){c.m=!0;var d=c.Ea;O||b(),U||(O(),U=!0),E.add(d,c),c.D=0}}function mw(c,d){return vd(c.h)>=c.h.j-(c.m?1:0)?!1:c.m?(c.i=d.G.concat(c.i),!0):c.I==1||c.I==2||c.D>=(c.Sa?0:c.Ta)?!1:(c.m=Ki(u(c.Ea,c,d),Hd(c,c.D)),c.D++,!0)}t.Ea=function(c){if(this.m)if(this.m=null,this.I==1){if(!c){this.V=Math.floor(Math.random()*1e5),c=this.V++;const x=new gs(this,this.j,c);let $=this.o;if(this.U&&($?($=q($),ie($,this.U)):$=this.U),this.u!==null||this.R||(x.J=$,$=null),this.S)e:{for(var d=0,m=0;m<this.i.length;m++){t:{var T=this.i[m];if("__data__"in T.map&&(T=T.map.__data__,typeof T=="string")){T=T.length;break t}T=void 0}if(T===void 0)break;if(d+=T,d>4096){d=m;break e}if(d===4096||m===this.i.length-1){d=m+1;break e}}d=1e3}else d=1e3;d=Fd(this,x,d),m=Cn(this.J),Xe(m,"RID",c),Xe(m,"CVER",22),this.G&&Xe(m,"X-HTTP-Session-Id",this.G),oo(this,m),$&&(this.R?d="headers="+Yi(kd($))+"&"+d:this.u&&jl(m,this.u,$)),Bl(this.h,x),this.Ra&&Xe(m,"TYPE","init"),this.S?(Xe(m,"$req",d),Xe(m,"SID","null"),x.U=!0,Ml(x,m,null)):Ml(x,m,d),this.I=2}}else this.I==3&&(c?xd(this,c):this.i.length==0||yd(this.h)||xd(this))};function xd(c,d){var m;d?m=d.l:m=c.V++;const T=Cn(c.J);Xe(T,"SID",c.M),Xe(T,"RID",m),Xe(T,"AID",c.K),oo(c,T),c.u&&c.o&&jl(T,c.u,c.o),m=new gs(c,c.j,m,c.D+1),c.u===null&&(m.J=c.o),d&&(c.i=d.G.concat(c.i)),d=Fd(c,m,1e3),m.H=Math.round(c.va*.5)+Math.round(c.va*.5*Math.random()),Bl(c.h,m),Ml(m,T,d)}function oo(c,d){c.H&&Y(c.H,function(m,T){Xe(d,T,m)}),c.l&&Y({},function(m,T){Xe(d,T,m)})}function Fd(c,d,m){m=Math.min(c.i.length,m);const T=c.l?u(c.l.Ka,c.l,c):null;e:{var x=c.i;let Ne=-1;for(;;){const Tt=["count="+m];Ne==-1?m>0?(Ne=x[0].g,Tt.push("ofs="+Ne)):Ne=0:Tt.push("ofs="+Ne);let ze=!0;for(let It=0;It<m;It++){var $=x[It].g;const Pn=x[It].map;if($-=Ne,$<0)Ne=Math.max(0,x[It].g-100),ze=!1;else try{$="req"+$+"_"||"";try{var oe=Pn instanceof Map?Pn:Object.entries(Pn);for(const[ur,Es]of oe){let Ts=Es;a(Es)&&(Ts=Be(Es)),Tt.push($+ur+"="+encodeURIComponent(Ts))}}catch(ur){throw Tt.push($+"type="+encodeURIComponent("_badmap")),ur}}catch{T&&T(Pn)}}if(ze){oe=Tt.join("&");break e}}oe=void 0}return c=c.i.splice(0,m),d.G=c,oe}function Ud(c){if(!c.g&&!c.v){c.Y=1;var d=c.Da;O||b(),U||(O(),U=!0),E.add(d,c),c.A=0}}function Wl(c){return c.g||c.v||c.A>=3?!1:(c.Y++,c.v=Ki(u(c.Da,c),Hd(c,c.A)),c.A++,!0)}t.Da=function(){if(this.v=null,Bd(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var c=4*this.T;this.j.info("BP detection timer enabled: "+c),this.B=Ki(u(this.Wa,this),c)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,$t(10),Sa(this),Bd(this))};function Gl(c){c.B!=null&&(o.clearTimeout(c.B),c.B=null)}function Bd(c){c.g=new gs(c,c.j,"rpc",c.Y),c.u===null&&(c.g.J=c.o),c.g.P=0;var d=Cn(c.na);Xe(d,"RID","rpc"),Xe(d,"SID",c.M),Xe(d,"AID",c.K),Xe(d,"CI",c.F?"0":"1"),!c.F&&c.ia&&Xe(d,"TO",c.ia),Xe(d,"TYPE","xmlhttp"),oo(c,d),c.u&&c.o&&jl(d,c.u,c.o),c.O&&(c.g.H=c.O);var m=c.g;c=c.ba,m.M=1,m.A=Ia(Cn(d)),m.u=null,m.R=!0,pd(m,c)}t.Va=function(){this.C!=null&&(this.C=null,Sa(this),Wl(this),$t(19))};function Pa(c){c.C!=null&&(o.clearTimeout(c.C),c.C=null)}function $d(c,d){var m=null;if(c.g==d){Pa(c),Gl(c),c.g=null;var T=2}else if(Ul(c.h,d))m=d.G,Ed(c.h,d),T=1;else return;if(c.I!=0){if(d.o)if(T==1){m=d.u?d.u.length:0,d=Date.now()-d.F;var x=c.D;T=or(),te(T,new ld(T,m)),Ca(c)}else Ud(c);else if(x=d.m,x==3||x==0&&d.X>0||!(T==1&&mw(c,d)||T==2&&Wl(c)))switch(m&&m.length>0&&(d=c.h,d.i=d.i.concat(m)),x){case 1:lr(c,5);break;case 4:lr(c,10);break;case 3:lr(c,6);break;default:lr(c,2)}}}function Hd(c,d){let m=c.Qa+Math.floor(Math.random()*c.Za);return c.isActive()||(m*=2),m*d}function lr(c,d){if(c.j.info("Error code "+d),d==2){var m=u(c.bb,c),T=c.Ua;const x=!T;T=new _s(T||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||Xi(T,"https"),Ia(T),x?lw(T.toString(),m):uw(T.toString(),m)}else $t(2);c.I=0,c.l&&c.l.pa(d),jd(c),Md(c)}t.bb=function(c){c?(this.j.info("Successfully pinged google.com"),$t(2)):(this.j.info("Failed to ping google.com"),$t(1))};function jd(c){if(c.I=0,c.ja=[],c.l){const d=Td(c.h);(d.length!=0||c.i.length!=0)&&(I(c.ja,d),I(c.ja,c.i),c.h.i.length=0,g(c.i),c.i.length=0),c.l.oa()}}function qd(c,d,m){var T=m instanceof _s?Cn(m):new _s(m);if(T.g!="")d&&(T.g=d+"."+T.g),Zi(T,T.u);else{var x=o.location;T=x.protocol,d=d?d+"."+x.hostname:x.hostname,x=+x.port;const $=new _s(null);T&&Xi($,T),d&&($.g=d),x&&Zi($,x),m&&($.h=m),T=$}return m=c.G,d=c.wa,m&&d&&Xe(T,m,d),Xe(T,"VER",c.ka),oo(c,T),T}function Wd(c,d,m){if(d&&!c.L)throw Error("Can't create secondary domain capable XhrIo object.");return d=c.Aa&&!c.ma?new nt(new Hl({ab:m})):new nt(c.ma),d.Fa(c.L),d}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Gd(){}t=Gd.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function ka(){}ka.prototype.g=function(c,d){return new tn(c,d)};function tn(c,d){se.call(this),this.g=new Ld(d),this.l=c,this.h=d&&d.messageUrlParams||null,c=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(c?c["X-WebChannel-Content-Type"]=d.messageContentType:c={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.sa&&(c?c["X-WebChannel-Client-Profile"]=d.sa:c={"X-WebChannel-Client-Profile":d.sa}),this.g.U=c,(c=d&&d.Qb)&&!w(c)&&(this.g.u=c),this.A=d&&d.supportsCrossDomainXhr||!1,this.v=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!w(d)&&(this.g.G=d,c=this.h,c!==null&&d in c&&(c=this.h,d in c&&delete c[d])),this.j=new Gr(this)}f(tn,se),tn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},tn.prototype.close=function(){ql(this.g)},tn.prototype.o=function(c){var d=this.g;if(typeof c=="string"){var m={};m.__data__=c,c=m}else this.v&&(m={},m.__data__=Be(c),c=m);d.i.push(new tw(d.Ya++,c)),d.I==3&&Ca(d)},tn.prototype.N=function(){this.g.l=null,delete this.j,ql(this.g),delete this.g,tn.Z.N.call(this)};function zd(c){jn.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var d=c.__sm__;if(d){e:{for(const m in d){c=m;break e}c=void 0}(this.i=c)&&(c=this.i,d=d!==null&&c in d?d[c]:void 0),this.data=d}else this.data=c}f(zd,jn);function Kd(){jr.call(this),this.status=1}f(Kd,jr);function Gr(c){this.g=c}f(Gr,Gd),Gr.prototype.ra=function(){te(this.g,"a")},Gr.prototype.qa=function(c){te(this.g,new zd(c))},Gr.prototype.pa=function(c){te(this.g,new Kd)},Gr.prototype.oa=function(){te(this.g,"b")},ka.prototype.createWebChannel=ka.prototype.g,tn.prototype.send=tn.prototype.o,tn.prototype.open=tn.prototype.m,tn.prototype.close=tn.prototype.close,mE=function(){return new ka},pE=function(){return or()},dE=lt,gh={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},wa.NO_ERROR=0,wa.TIMEOUT=8,wa.HTTP_ERROR=6,rc=wa,ud.COMPLETE="complete",fE=ud,zt.EventType=Et,Et.OPEN="a",Et.CLOSE="b",Et.ERROR="c",Et.MESSAGE="d",se.prototype.listen=se.prototype.J,_o=zt,nt.prototype.listenOnce=nt.prototype.K,nt.prototype.getLastError=nt.prototype.Ha,nt.prototype.getLastErrorCode=nt.prototype.ya,nt.prototype.getStatus=nt.prototype.ca,nt.prototype.getResponseJson=nt.prototype.La,nt.prototype.getResponseText=nt.prototype.la,nt.prototype.send=nt.prototype.ea,nt.prototype.setWithCredentials=nt.prototype.Fa,hE=nt}).apply(typeof qa<"u"?qa:typeof self<"u"?self:typeof window<"u"?window:{});const Xm="@firebase/firestore",Zm="4.9.3";class xt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}xt.UNAUTHENTICATED=new xt(null),xt.GOOGLE_CREDENTIALS=new xt("google-credentials-uid"),xt.FIRST_PARTY=new xt("first-party-uid"),xt.MOCK_USER=new xt("mock-user");let Bi="12.7.0";const Or=new gf("@firebase/firestore");function Jr(){return Or.logLevel}function fe(t,...e){if(Or.logLevel<=Ve.DEBUG){const n=e.map(Sf);Or.debug(`Firestore (${Bi}): ${t}`,...n)}}function hs(t,...e){if(Or.logLevel<=Ve.ERROR){const n=e.map(Sf);Or.error(`Firestore (${Bi}): ${t}`,...n)}}function Vr(t,...e){if(Or.logLevel<=Ve.WARN){const n=e.map(Sf);Or.warn(`Firestore (${Bi}): ${t}`,...n)}}function Sf(t){if(typeof t=="string")return t;try{return(function(n){return JSON.stringify(n)})(t)}catch{return t}}function Re(t,e,n){let s="Unexpected state";typeof e=="string"?s=e:n=e,gE(t,s,n)}function gE(t,e,n){let s=`FIRESTORE (${Bi}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{s+=" CONTEXT: "+JSON.stringify(n)}catch{s+=" CONTEXT: "+n}throw hs(s),new Error(s)}function qe(t,e,n,s){let r="Unexpected state";typeof n=="string"?r=n:s=n,t||gE(e,r,s)}function Pe(t,e){return t}const Q={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ce extends ps{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class rs{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}class _E{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class yE{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(xt.UNAUTHENTICATED)))}shutdown(){}}class EN{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class TN{constructor(e){this.t=e,this.currentUser=xt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){qe(this.o===void 0,42304);let s=this.i;const r=l=>this.i!==s?(s=this.i,n(l)):Promise.resolve();let i=new rs;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new rs,e.enqueueRetryable((()=>r(this.currentUser)))};const o=()=>{const l=i;e.enqueueRetryable((async()=>{await l.promise,await r(this.currentUser)}))},a=l=>{fe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit((l=>a(l))),setTimeout((()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(fe("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new rs)}}),0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((s=>this.i!==e?(fe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(qe(typeof s.accessToken=="string",31837,{l:s}),new _E(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return qe(e===null||typeof e=="string",2055,{h:e}),new xt(e)}}class wN{constructor(e,n,s){this.P=e,this.T=n,this.I=s,this.type="FirstParty",this.user=xt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class bN{constructor(e,n,s){this.P=e,this.T=n,this.I=s}getToken(){return Promise.resolve(new wN(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(xt.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class eg{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class IN{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,hn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){qe(this.o===void 0,3512);const s=i=>{i.error!=null&&fe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.m;return this.m=i.token,fe("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable((()=>s(i)))};const r=i=>{fe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((i=>r(i))),setTimeout((()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?r(i):fe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new eg(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(qe(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new eg(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function AN(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let s=0;s<t;s++)n[s]=Math.floor(256*Math.random());return n}class pl{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const r=AN(40);for(let i=0;i<r.length;++i)s.length<20&&r[i]<n&&(s+=e.charAt(r[i]%62))}return s}}function Le(t,e){return t<e?-1:t>e?1:0}function _h(t,e){const n=Math.min(t.length,e.length);for(let s=0;s<n;s++){const r=t.charAt(s),i=e.charAt(s);if(r!==i)return Iu(r)===Iu(i)?Le(r,i):Iu(r)?1:-1}return Le(t.length,e.length)}const RN=55296,SN=57343;function Iu(t){const e=t.charCodeAt(0);return e>=RN&&e<=SN}function Ri(t,e,n){return t.length===e.length&&t.every(((s,r)=>n(s,e[r])))}const tg="__name__";class Dn{constructor(e,n,s){n===void 0?n=0:n>e.length&&Re(637,{offset:n,range:e.length}),s===void 0?s=e.length-n:s>e.length-n&&Re(1746,{length:s,range:e.length-n}),this.segments=e,this.offset=n,this.len=s}get length(){return this.len}isEqual(e){return Dn.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Dn?e.forEach((s=>{n.push(s)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,s=this.limit();n<s;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const s=Math.min(e.length,n.length);for(let r=0;r<s;r++){const i=Dn.compareSegments(e.get(r),n.get(r));if(i!==0)return i}return Le(e.length,n.length)}static compareSegments(e,n){const s=Dn.isNumericId(e),r=Dn.isNumericId(n);return s&&!r?-1:!s&&r?1:s&&r?Dn.extractNumericId(e).compare(Dn.extractNumericId(n)):_h(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return qs.fromString(e.substring(4,e.length-2))}}class Ye extends Dn{construct(e,n,s){return new Ye(e,n,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const s of e){if(s.indexOf("//")>=0)throw new ce(Q.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);n.push(...s.split("/").filter((r=>r.length>0)))}return new Ye(n)}static emptyPath(){return new Ye([])}}const CN=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class St extends Dn{construct(e,n,s){return new St(e,n,s)}static isValidIdentifier(e){return CN.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),St.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===tg}static keyField(){return new St([tg])}static fromServerFormat(e){const n=[];let s="",r=0;const i=()=>{if(s.length===0)throw new ce(Q.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(s),s=""};let o=!1;for(;r<e.length;){const a=e[r];if(a==="\\"){if(r+1===e.length)throw new ce(Q.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[r+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new ce(Q.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=l,r+=2}else a==="`"?(o=!o,r++):a!=="."||o?(s+=a,r++):(i(),r++)}if(i(),o)throw new ce(Q.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new St(n)}static emptyPath(){return new St([])}}class _e{constructor(e){this.path=e}static fromPath(e){return new _e(Ye.fromString(e))}static fromName(e){return new _e(Ye.fromString(e).popFirst(5))}static empty(){return new _e(Ye.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ye.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ye.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new _e(new Ye(e.slice()))}}function vE(t,e,n){if(!n)throw new ce(Q.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function EE(t,e,n,s){if(e===!0&&s===!0)throw new ce(Q.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function ng(t){if(!_e.isDocumentKey(t))throw new ce(Q.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function sg(t){if(_e.isDocumentKey(t))throw new ce(Q.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function TE(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function ml(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=(function(s){return s.constructor?s.constructor.name:null})(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Re(12329,{type:typeof t})}function Rn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new ce(Q.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=ml(t);throw new ce(Q.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function gt(t,e){const n={typeString:t};return e&&(n.value=e),n}function da(t,e){if(!TE(t))throw new ce(Q.INVALID_ARGUMENT,"JSON must be an object");let n;for(const s in e)if(e[s]){const r=e[s].typeString,i="value"in e[s]?{value:e[s].value}:void 0;if(!(s in t)){n=`JSON missing required field: '${s}'`;break}const o=t[s];if(r&&typeof o!==r){n=`JSON field '${s}' must be a ${r}.`;break}if(i!==void 0&&o!==i.value){n=`Expected '${s}' field to equal '${i.value}'`;break}}if(n)throw new ce(Q.INVALID_ARGUMENT,n);return!0}const rg=-62135596800,ig=1e6;class Je{static now(){return Je.fromMillis(Date.now())}static fromDate(e){return Je.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),s=Math.floor((e-1e3*n)*ig);return new Je(n,s)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ce(Q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ce(Q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<rg)throw new ce(Q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ce(Q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/ig}_compareTo(e){return this.seconds===e.seconds?Le(this.nanoseconds,e.nanoseconds):Le(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Je._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(da(e,Je._jsonSchema))return new Je(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-rg;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Je._jsonSchemaVersion="firestore/timestamp/1.0",Je._jsonSchema={type:gt("string",Je._jsonSchemaVersion),seconds:gt("number"),nanoseconds:gt("number")};class Ce{static fromTimestamp(e){return new Ce(e)}static min(){return new Ce(new Je(0,0))}static max(){return new Ce(new Je(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const Go=-1;function PN(t,e){const n=t.toTimestamp().seconds,s=t.toTimestamp().nanoseconds+1,r=Ce.fromTimestamp(s===1e9?new Je(n+1,0):new Je(n,s));return new Ys(r,_e.empty(),e)}function kN(t){return new Ys(t.readTime,t.key,Go)}class Ys{constructor(e,n,s){this.readTime=e,this.documentKey=n,this.largestBatchId=s}static min(){return new Ys(Ce.min(),_e.empty(),Go)}static max(){return new Ys(Ce.max(),_e.empty(),Go)}}function NN(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=_e.comparator(t.documentKey,e.documentKey),n!==0?n:Le(t.largestBatchId,e.largestBatchId))}const DN="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class ON{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function $i(t){if(t.code!==Q.FAILED_PRECONDITION||t.message!==DN)throw t;fe("LocalStore","Unexpectedly lost primary lease")}class X{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Re(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new X(((s,r)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(s,r)},this.catchCallback=i=>{this.wrapFailure(n,i).next(s,r)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof X?n:X.resolve(n)}catch(n){return X.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):X.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):X.reject(n)}static resolve(e){return new X(((n,s)=>{n(e)}))}static reject(e){return new X(((n,s)=>{s(e)}))}static waitFor(e){return new X(((n,s)=>{let r=0,i=0,o=!1;e.forEach((a=>{++r,a.next((()=>{++i,o&&i===r&&n()}),(l=>s(l)))})),o=!0,i===r&&n()}))}static or(e){let n=X.resolve(!1);for(const s of e)n=n.next((r=>r?X.resolve(r):s()));return n}static forEach(e,n){const s=[];return e.forEach(((r,i)=>{s.push(n.call(this,r,i))})),this.waitFor(s)}static mapArray(e,n){return new X(((s,r)=>{const i=e.length,o=new Array(i);let a=0;for(let l=0;l<i;l++){const u=l;n(e[u]).next((h=>{o[u]=h,++a,a===i&&s(o)}),(h=>r(h)))}}))}static doWhile(e,n){return new X(((s,r)=>{const i=()=>{e()===!0?n().next((()=>{i()}),r):s()};i()}))}}function VN(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Hi(t){return t.name==="IndexedDbTransactionError"}class gl{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>n.writeSequenceNumber(s))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}gl.ce=-1;const Cf=-1;function _l(t){return t==null}function Lc(t){return t===0&&1/t==-1/0}function LN(t){return typeof t=="number"&&Number.isInteger(t)&&!Lc(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}const wE="";function MN(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=og(e)),e=xN(t.get(n),e);return og(e)}function xN(t,e){let n=e;const s=t.length;for(let r=0;r<s;r++){const i=t.charAt(r);switch(i){case"\0":n+="";break;case wE:n+="";break;default:n+=i}}return n}function og(t){return t+wE+""}function ag(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function sr(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function bE(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}class tt{constructor(e,n){this.comparator=e,this.root=n||kt.EMPTY}insert(e,n){return new tt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,kt.BLACK,null,null))}remove(e){return new tt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,kt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return n.value;s<0?n=n.left:s>0&&(n=n.right)}return null}indexOf(e){let n=0,s=this.root;for(;!s.isEmpty();){const r=this.comparator(e,s.key);if(r===0)return n+s.left.size;r<0?s=s.left:(n+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,s)=>(e(n,s),!1)))}toString(){const e=[];return this.inorderTraversal(((n,s)=>(e.push(`${n}:${s}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Wa(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Wa(this.root,e,this.comparator,!1)}getReverseIterator(){return new Wa(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Wa(this.root,e,this.comparator,!0)}}class Wa{constructor(e,n,s,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?s(e.key,n):1,n&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class kt{constructor(e,n,s,r,i){this.key=e,this.value=n,this.color=s??kt.RED,this.left=r??kt.EMPTY,this.right=i??kt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,s,r,i){return new kt(e??this.key,n??this.value,s??this.color,r??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,s){let r=this;const i=s(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,n,s),null):i===0?r.copy(null,n,null,null,null):r.copy(null,null,null,null,r.right.insert(e,n,s)),r.fixUp()}removeMin(){if(this.left.isEmpty())return kt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let s,r=this;if(n(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),n(e,r.key)===0){if(r.right.isEmpty())return kt.EMPTY;s=r.right.min(),r=r.copy(s.key,s.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,kt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,kt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Re(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Re(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Re(27949);return e+(this.isRed()?0:1)}}kt.EMPTY=null,kt.RED=!0,kt.BLACK=!1;kt.EMPTY=new class{constructor(){this.size=0}get key(){throw Re(57766)}get value(){throw Re(16141)}get color(){throw Re(16727)}get left(){throw Re(29726)}get right(){throw Re(36894)}copy(e,n,s,r,i){return this}insert(e,n,s){return new kt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class bt{constructor(e){this.comparator=e,this.data=new tt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,s)=>(e(n),!1)))}forEachInRange(e,n){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const r=s.getNext();if(this.comparator(r.key,e[1])>=0)return;n(r.key)}}forEachWhile(e,n){let s;for(s=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new cg(this.data.getIterator())}getIteratorFrom(e){return new cg(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((s=>{n=n.add(s)})),n}isEqual(e){if(!(e instanceof bt)||this.size!==e.size)return!1;const n=this.data.getIterator(),s=e.data.getIterator();for(;n.hasNext();){const r=n.getNext().key,i=s.getNext().key;if(this.comparator(r,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new bt(this.comparator);return n.data=e,n}}class cg{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class rn{constructor(e){this.fields=e,e.sort(St.comparator)}static empty(){return new rn([])}unionWith(e){let n=new bt(St.comparator);for(const s of this.fields)n=n.add(s);for(const s of e)n=n.add(s);return new rn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Ri(this.fields,e.fields,((n,s)=>n.isEqual(s)))}}class IE extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Pt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(r){try{return atob(r)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new IE("Invalid base64 string: "+i):i}})(e);return new Pt(n)}static fromUint8Array(e){const n=(function(r){let i="";for(let o=0;o<r.length;++o)i+=String.fromCharCode(r[o]);return i})(e);return new Pt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const s=new Uint8Array(n.length);for(let r=0;r<n.length;r++)s[r]=n.charCodeAt(r);return s})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Le(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Pt.EMPTY_BYTE_STRING=new Pt("");const FN=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Js(t){if(qe(!!t,39018),typeof t=="string"){let e=0;const n=FN.exec(t);if(qe(!!n,46558,{timestamp:t}),n[1]){let r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}const s=new Date(t);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:ht(t.seconds),nanos:ht(t.nanos)}}function ht(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Xs(t){return typeof t=="string"?Pt.fromBase64String(t):Pt.fromUint8Array(t)}const AE="server_timestamp",RE="__type__",SE="__previous_value__",CE="__local_write_time__";function Pf(t){return(t?.mapValue?.fields||{})[RE]?.stringValue===AE}function yl(t){const e=t.mapValue.fields[SE];return Pf(e)?yl(e):e}function zo(t){const e=Js(t.mapValue.fields[CE].timestampValue);return new Je(e.seconds,e.nanos)}class UN{constructor(e,n,s,r,i,o,a,l,u,h){this.databaseId=e,this.appId=n,this.persistenceKey=s,this.host=r,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=u,this.isUsingEmulator=h}}const Mc="(default)";class Si{constructor(e,n){this.projectId=e,this.database=n||Mc}static empty(){return new Si("","")}get isDefaultDatabase(){return this.database===Mc}isEqual(e){return e instanceof Si&&e.projectId===this.projectId&&e.database===this.database}}const PE="__type__",BN="__max__",Ga={mapValue:{}},kE="__vector__",xc="value";function Zs(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Pf(t)?4:HN(t)?9007199254740991:$N(t)?10:11:Re(28295,{value:t})}function Bn(t,e){if(t===e)return!0;const n=Zs(t);if(n!==Zs(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return zo(t).isEqual(zo(e));case 3:return(function(r,i){if(typeof r.timestampValue=="string"&&typeof i.timestampValue=="string"&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const o=Js(r.timestampValue),a=Js(i.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos})(t,e);case 5:return t.stringValue===e.stringValue;case 6:return(function(r,i){return Xs(r.bytesValue).isEqual(Xs(i.bytesValue))})(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return(function(r,i){return ht(r.geoPointValue.latitude)===ht(i.geoPointValue.latitude)&&ht(r.geoPointValue.longitude)===ht(i.geoPointValue.longitude)})(t,e);case 2:return(function(r,i){if("integerValue"in r&&"integerValue"in i)return ht(r.integerValue)===ht(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const o=ht(r.doubleValue),a=ht(i.doubleValue);return o===a?Lc(o)===Lc(a):isNaN(o)&&isNaN(a)}return!1})(t,e);case 9:return Ri(t.arrayValue.values||[],e.arrayValue.values||[],Bn);case 10:case 11:return(function(r,i){const o=r.mapValue.fields||{},a=i.mapValue.fields||{};if(ag(o)!==ag(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!Bn(o[l],a[l])))return!1;return!0})(t,e);default:return Re(52216,{left:t})}}function Ko(t,e){return(t.values||[]).find((n=>Bn(n,e)))!==void 0}function Ci(t,e){if(t===e)return 0;const n=Zs(t),s=Zs(e);if(n!==s)return Le(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return Le(t.booleanValue,e.booleanValue);case 2:return(function(i,o){const a=ht(i.integerValue||i.doubleValue),l=ht(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1})(t,e);case 3:return lg(t.timestampValue,e.timestampValue);case 4:return lg(zo(t),zo(e));case 5:return _h(t.stringValue,e.stringValue);case 6:return(function(i,o){const a=Xs(i),l=Xs(o);return a.compareTo(l)})(t.bytesValue,e.bytesValue);case 7:return(function(i,o){const a=i.split("/"),l=o.split("/");for(let u=0;u<a.length&&u<l.length;u++){const h=Le(a[u],l[u]);if(h!==0)return h}return Le(a.length,l.length)})(t.referenceValue,e.referenceValue);case 8:return(function(i,o){const a=Le(ht(i.latitude),ht(o.latitude));return a!==0?a:Le(ht(i.longitude),ht(o.longitude))})(t.geoPointValue,e.geoPointValue);case 9:return ug(t.arrayValue,e.arrayValue);case 10:return(function(i,o){const a=i.fields||{},l=o.fields||{},u=a[xc]?.arrayValue,h=l[xc]?.arrayValue,f=Le(u?.values?.length||0,h?.values?.length||0);return f!==0?f:ug(u,h)})(t.mapValue,e.mapValue);case 11:return(function(i,o){if(i===Ga.mapValue&&o===Ga.mapValue)return 0;if(i===Ga.mapValue)return 1;if(o===Ga.mapValue)return-1;const a=i.fields||{},l=Object.keys(a),u=o.fields||{},h=Object.keys(u);l.sort(),h.sort();for(let f=0;f<l.length&&f<h.length;++f){const p=_h(l[f],h[f]);if(p!==0)return p;const g=Ci(a[l[f]],u[h[f]]);if(g!==0)return g}return Le(l.length,h.length)})(t.mapValue,e.mapValue);default:throw Re(23264,{he:n})}}function lg(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Le(t,e);const n=Js(t),s=Js(e),r=Le(n.seconds,s.seconds);return r!==0?r:Le(n.nanos,s.nanos)}function ug(t,e){const n=t.values||[],s=e.values||[];for(let r=0;r<n.length&&r<s.length;++r){const i=Ci(n[r],s[r]);if(i)return i}return Le(n.length,s.length)}function Pi(t){return yh(t)}function yh(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(function(n){const s=Js(n);return`time(${s.seconds},${s.nanos})`})(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?(function(n){return Xs(n).toBase64()})(t.bytesValue):"referenceValue"in t?(function(n){return _e.fromName(n).toString()})(t.referenceValue):"geoPointValue"in t?(function(n){return`geo(${n.latitude},${n.longitude})`})(t.geoPointValue):"arrayValue"in t?(function(n){let s="[",r=!0;for(const i of n.values||[])r?r=!1:s+=",",s+=yh(i);return s+"]"})(t.arrayValue):"mapValue"in t?(function(n){const s=Object.keys(n.fields||{}).sort();let r="{",i=!0;for(const o of s)i?i=!1:r+=",",r+=`${o}:${yh(n.fields[o])}`;return r+"}"})(t.mapValue):Re(61005,{value:t})}function ic(t){switch(Zs(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=yl(t);return e?16+ic(e):16;case 5:return 2*t.stringValue.length;case 6:return Xs(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return(function(s){return(s.values||[]).reduce(((r,i)=>r+ic(i)),0)})(t.arrayValue);case 10:case 11:return(function(s){let r=0;return sr(s.fields,((i,o)=>{r+=i.length+ic(o)})),r})(t.mapValue);default:throw Re(13486,{value:t})}}function hg(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function vh(t){return!!t&&"integerValue"in t}function kf(t){return!!t&&"arrayValue"in t}function fg(t){return!!t&&"nullValue"in t}function dg(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function oc(t){return!!t&&"mapValue"in t}function $N(t){return(t?.mapValue?.fields||{})[PE]?.stringValue===kE}function Po(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return sr(t.mapValue.fields,((n,s)=>e.mapValue.fields[n]=Po(s))),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Po(t.arrayValue.values[n]);return e}return{...t}}function HN(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===BN}class Jt{constructor(e){this.value=e}static empty(){return new Jt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let s=0;s<e.length-1;++s)if(n=(n.mapValue.fields||{})[e.get(s)],!oc(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Po(n)}setAll(e){let n=St.emptyPath(),s={},r=[];e.forEach(((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,s,r),s={},r=[],n=a.popLast()}o?s[a.lastSegment()]=Po(o):r.push(a.lastSegment())}));const i=this.getFieldsMap(n);this.applyChanges(i,s,r)}delete(e){const n=this.field(e.popLast());oc(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Bn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let s=0;s<e.length;++s){let r=n.mapValue.fields[e.get(s)];oc(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},n.mapValue.fields[e.get(s)]=r),n=r}return n.mapValue.fields}applyChanges(e,n,s){sr(n,((r,i)=>e[r]=i));for(const r of s)delete e[r]}clone(){return new Jt(Po(this.value))}}function NE(t){const e=[];return sr(t.fields,((n,s)=>{const r=new St([n]);if(oc(s)){const i=NE(s.mapValue).fields;if(i.length===0)e.push(r);else for(const o of i)e.push(r.child(o))}else e.push(r)})),new rn(e)}class Ut{constructor(e,n,s,r,i,o,a){this.key=e,this.documentType=n,this.version=s,this.readTime=r,this.createTime=i,this.data=o,this.documentState=a}static newInvalidDocument(e){return new Ut(e,0,Ce.min(),Ce.min(),Ce.min(),Jt.empty(),0)}static newFoundDocument(e,n,s,r){return new Ut(e,1,n,Ce.min(),s,r,0)}static newNoDocument(e,n){return new Ut(e,2,n,Ce.min(),Ce.min(),Jt.empty(),0)}static newUnknownDocument(e,n){return new Ut(e,3,n,Ce.min(),Ce.min(),Jt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Ce.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Jt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Jt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ce.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Ut&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ut(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Fc{constructor(e,n){this.position=e,this.inclusive=n}}function pg(t,e,n){let s=0;for(let r=0;r<t.position.length;r++){const i=e[r],o=t.position[r];if(i.field.isKeyField()?s=_e.comparator(_e.fromName(o.referenceValue),n.key):s=Ci(o,n.data.field(i.field)),i.dir==="desc"&&(s*=-1),s!==0)break}return s}function mg(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Bn(t.position[n],e.position[n]))return!1;return!0}class Qo{constructor(e,n="asc"){this.field=e,this.dir=n}}function jN(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}class DE{}class mt extends DE{constructor(e,n,s){super(),this.field=e,this.op=n,this.value=s}static create(e,n,s){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,s):new WN(e,n,s):n==="array-contains"?new KN(e,s):n==="in"?new QN(e,s):n==="not-in"?new YN(e,s):n==="array-contains-any"?new JN(e,s):new mt(e,n,s)}static createKeyFieldInFilter(e,n,s){return n==="in"?new GN(e,s):new zN(e,s)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Ci(n,this.value)):n!==null&&Zs(this.value)===Zs(n)&&this.matchesComparison(Ci(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Re(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Sn extends DE{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Sn(e,n)}matches(e){return OE(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function OE(t){return t.op==="and"}function VE(t){return qN(t)&&OE(t)}function qN(t){for(const e of t.filters)if(e instanceof Sn)return!1;return!0}function Eh(t){if(t instanceof mt)return t.field.canonicalString()+t.op.toString()+Pi(t.value);if(VE(t))return t.filters.map((e=>Eh(e))).join(",");{const e=t.filters.map((n=>Eh(n))).join(",");return`${t.op}(${e})`}}function LE(t,e){return t instanceof mt?(function(s,r){return r instanceof mt&&s.op===r.op&&s.field.isEqual(r.field)&&Bn(s.value,r.value)})(t,e):t instanceof Sn?(function(s,r){return r instanceof Sn&&s.op===r.op&&s.filters.length===r.filters.length?s.filters.reduce(((i,o,a)=>i&&LE(o,r.filters[a])),!0):!1})(t,e):void Re(19439)}function ME(t){return t instanceof mt?(function(n){return`${n.field.canonicalString()} ${n.op} ${Pi(n.value)}`})(t):t instanceof Sn?(function(n){return n.op.toString()+" {"+n.getFilters().map(ME).join(" ,")+"}"})(t):"Filter"}class WN extends mt{constructor(e,n,s){super(e,n,s),this.key=_e.fromName(s.referenceValue)}matches(e){const n=_e.comparator(e.key,this.key);return this.matchesComparison(n)}}class GN extends mt{constructor(e,n){super(e,"in",n),this.keys=xE("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class zN extends mt{constructor(e,n){super(e,"not-in",n),this.keys=xE("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function xE(t,e){return(e.arrayValue?.values||[]).map((n=>_e.fromName(n.referenceValue)))}class KN extends mt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return kf(n)&&Ko(n.arrayValue,this.value)}}class QN extends mt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Ko(this.value.arrayValue,n)}}class YN extends mt{constructor(e,n){super(e,"not-in",n)}matches(e){if(Ko(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Ko(this.value.arrayValue,n)}}class JN extends mt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!kf(n)||!n.arrayValue.values)&&n.arrayValue.values.some((s=>Ko(this.value.arrayValue,s)))}}class XN{constructor(e,n=null,s=[],r=[],i=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=s,this.filters=r,this.limit=i,this.startAt=o,this.endAt=a,this.Te=null}}function gg(t,e=null,n=[],s=[],r=null,i=null,o=null){return new XN(t,e,n,s,r,i,o)}function Nf(t){const e=Pe(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((s=>Eh(s))).join(","),n+="|ob:",n+=e.orderBy.map((s=>(function(i){return i.field.canonicalString()+i.dir})(s))).join(","),_l(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((s=>Pi(s))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((s=>Pi(s))).join(",")),e.Te=n}return e.Te}function Df(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!jN(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!LE(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!mg(t.startAt,e.startAt)&&mg(t.endAt,e.endAt)}function Th(t){return _e.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}class ji{constructor(e,n=null,s=[],r=[],i=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=s,this.filters=r,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=l,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function ZN(t,e,n,s,r,i,o,a){return new ji(t,e,n,s,r,i,o,a)}function Of(t){return new ji(t)}function _g(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function FE(t){return t.collectionGroup!==null}function ko(t){const e=Pe(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const i of e.explicitOrderBy)e.Ie.push(i),n.add(i.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new bt(St.comparator);return o.filters.forEach((l=>{l.getFlattenedFilters().forEach((u=>{u.isInequality()&&(a=a.add(u.field))}))})),a})(e).forEach((i=>{n.has(i.canonicalString())||i.isKeyField()||e.Ie.push(new Qo(i,s))})),n.has(St.keyField().canonicalString())||e.Ie.push(new Qo(St.keyField(),s))}return e.Ie}function xn(t){const e=Pe(t);return e.Ee||(e.Ee=eD(e,ko(t))),e.Ee}function eD(t,e){if(t.limitType==="F")return gg(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map((r=>{const i=r.dir==="desc"?"asc":"desc";return new Qo(r.field,i)}));const n=t.endAt?new Fc(t.endAt.position,t.endAt.inclusive):null,s=t.startAt?new Fc(t.startAt.position,t.startAt.inclusive):null;return gg(t.path,t.collectionGroup,e,t.filters,t.limit,n,s)}}function wh(t,e){const n=t.filters.concat([e]);return new ji(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function bh(t,e,n){return new ji(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function vl(t,e){return Df(xn(t),xn(e))&&t.limitType===e.limitType}function UE(t){return`${Nf(xn(t))}|lt:${t.limitType}`}function Xr(t){return`Query(target=${(function(n){let s=n.path.canonicalString();return n.collectionGroup!==null&&(s+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(s+=`, filters: [${n.filters.map((r=>ME(r))).join(", ")}]`),_l(n.limit)||(s+=", limit: "+n.limit),n.orderBy.length>0&&(s+=`, orderBy: [${n.orderBy.map((r=>(function(o){return`${o.field.canonicalString()} (${o.dir})`})(r))).join(", ")}]`),n.startAt&&(s+=", startAt: ",s+=n.startAt.inclusive?"b:":"a:",s+=n.startAt.position.map((r=>Pi(r))).join(",")),n.endAt&&(s+=", endAt: ",s+=n.endAt.inclusive?"a:":"b:",s+=n.endAt.position.map((r=>Pi(r))).join(",")),`Target(${s})`})(xn(t))}; limitType=${t.limitType})`}function El(t,e){return e.isFoundDocument()&&(function(s,r){const i=r.key.path;return s.collectionGroup!==null?r.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(i):_e.isDocumentKey(s.path)?s.path.isEqual(i):s.path.isImmediateParentOf(i)})(t,e)&&(function(s,r){for(const i of ko(s))if(!i.field.isKeyField()&&r.data.field(i.field)===null)return!1;return!0})(t,e)&&(function(s,r){for(const i of s.filters)if(!i.matches(r))return!1;return!0})(t,e)&&(function(s,r){return!(s.startAt&&!(function(o,a,l){const u=pg(o,a,l);return o.inclusive?u<=0:u<0})(s.startAt,ko(s),r)||s.endAt&&!(function(o,a,l){const u=pg(o,a,l);return o.inclusive?u>=0:u>0})(s.endAt,ko(s),r))})(t,e)}function tD(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function BE(t){return(e,n)=>{let s=!1;for(const r of ko(t)){const i=nD(r,e,n);if(i!==0)return i;s=s||r.field.isKeyField()}return 0}}function nD(t,e,n){const s=t.field.isKeyField()?_e.comparator(e.key,n.key):(function(i,o,a){const l=o.data.field(i),u=a.data.field(i);return l!==null&&u!==null?Ci(l,u):Re(42886)})(t.field,e,n);switch(t.dir){case"asc":return s;case"desc":return-1*s;default:return Re(19790,{direction:t.dir})}}class Br{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s!==void 0){for(const[r,i]of s)if(this.equalsFn(r,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const s=this.mapKeyFn(e),r=this.inner[s];if(r===void 0)return this.inner[s]=[[e,n]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,n]);r.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return!1;for(let r=0;r<s.length;r++)if(this.equalsFn(s[r][0],e))return s.length===1?delete this.inner[n]:s.splice(r,1),this.innerSize--,!0;return!1}forEach(e){sr(this.inner,((n,s)=>{for(const[r,i]of s)e(r,i)}))}isEmpty(){return bE(this.inner)}size(){return this.innerSize}}const sD=new tt(_e.comparator);function fs(){return sD}const $E=new tt(_e.comparator);function yo(...t){let e=$E;for(const n of t)e=e.insert(n.key,n);return e}function HE(t){let e=$E;return t.forEach(((n,s)=>e=e.insert(n,s.overlayedDocument))),e}function Tr(){return No()}function jE(){return No()}function No(){return new Br((t=>t.toString()),((t,e)=>t.isEqual(e)))}const rD=new tt(_e.comparator),iD=new bt(_e.comparator);function Me(...t){let e=iD;for(const n of t)e=e.add(n);return e}const oD=new bt(Le);function aD(){return oD}function Vf(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Lc(e)?"-0":e}}function qE(t){return{integerValue:""+t}}function cD(t,e){return LN(e)?qE(e):Vf(t,e)}class Tl{constructor(){this._=void 0}}function lD(t,e,n){return t instanceof Yo?(function(r,i){const o={fields:{[RE]:{stringValue:AE},[CE]:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&Pf(i)&&(i=yl(i)),i&&(o.fields[SE]=i),{mapValue:o}})(n,e):t instanceof Jo?GE(t,e):t instanceof Xo?zE(t,e):(function(r,i){const o=WE(r,i),a=yg(o)+yg(r.Ae);return vh(o)&&vh(r.Ae)?qE(a):Vf(r.serializer,a)})(t,e)}function uD(t,e,n){return t instanceof Jo?GE(t,e):t instanceof Xo?zE(t,e):n}function WE(t,e){return t instanceof Uc?(function(s){return vh(s)||(function(i){return!!i&&"doubleValue"in i})(s)})(e)?e:{integerValue:0}:null}class Yo extends Tl{}class Jo extends Tl{constructor(e){super(),this.elements=e}}function GE(t,e){const n=KE(e);for(const s of t.elements)n.some((r=>Bn(r,s)))||n.push(s);return{arrayValue:{values:n}}}class Xo extends Tl{constructor(e){super(),this.elements=e}}function zE(t,e){let n=KE(e);for(const s of t.elements)n=n.filter((r=>!Bn(r,s)));return{arrayValue:{values:n}}}class Uc extends Tl{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function yg(t){return ht(t.integerValue||t.doubleValue)}function KE(t){return kf(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}class hD{constructor(e,n){this.field=e,this.transform=n}}function fD(t,e){return t.field.isEqual(e.field)&&(function(s,r){return s instanceof Jo&&r instanceof Jo||s instanceof Xo&&r instanceof Xo?Ri(s.elements,r.elements,Bn):s instanceof Uc&&r instanceof Uc?Bn(s.Ae,r.Ae):s instanceof Yo&&r instanceof Yo})(t.transform,e.transform)}class dD{constructor(e,n){this.version=e,this.transformResults=n}}class yn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new yn}static exists(e){return new yn(void 0,e)}static updateTime(e){return new yn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function ac(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class wl{}function QE(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Lf(t.key,yn.none()):new pa(t.key,t.data,yn.none());{const n=t.data,s=Jt.empty();let r=new bt(St.comparator);for(let i of e.fields)if(!r.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?s.delete(i):s.set(i,o),r=r.add(i)}return new rr(t.key,s,new rn(r.toArray()),yn.none())}}function pD(t,e,n){t instanceof pa?(function(r,i,o){const a=r.value.clone(),l=Eg(r.fieldTransforms,i,o.transformResults);a.setAll(l),i.convertToFoundDocument(o.version,a).setHasCommittedMutations()})(t,e,n):t instanceof rr?(function(r,i,o){if(!ac(r.precondition,i))return void i.convertToUnknownDocument(o.version);const a=Eg(r.fieldTransforms,i,o.transformResults),l=i.data;l.setAll(YE(r)),l.setAll(a),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()})(t,e,n):(function(r,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()})(0,e,n)}function Do(t,e,n,s){return t instanceof pa?(function(i,o,a,l){if(!ac(i.precondition,o))return a;const u=i.value.clone(),h=Tg(i.fieldTransforms,l,o);return u.setAll(h),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null})(t,e,n,s):t instanceof rr?(function(i,o,a,l){if(!ac(i.precondition,o))return a;const u=Tg(i.fieldTransforms,l,o),h=o.data;return h.setAll(YE(i)),h.setAll(u),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),a===null?null:a.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map((f=>f.field)))})(t,e,n,s):(function(i,o,a){return ac(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a})(t,e,n)}function mD(t,e){let n=null;for(const s of t.fieldTransforms){const r=e.data.field(s.field),i=WE(s.transform,r||null);i!=null&&(n===null&&(n=Jt.empty()),n.set(s.field,i))}return n||null}function vg(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!(function(s,r){return s===void 0&&r===void 0||!(!s||!r)&&Ri(s,r,((i,o)=>fD(i,o)))})(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class pa extends wl{constructor(e,n,s,r=[]){super(),this.key=e,this.value=n,this.precondition=s,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class rr extends wl{constructor(e,n,s,r,i=[]){super(),this.key=e,this.data=n,this.fieldMask=s,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function YE(t){const e=new Map;return t.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const s=t.data.field(n);e.set(n,s)}})),e}function Eg(t,e,n){const s=new Map;qe(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let r=0;r<n.length;r++){const i=t[r],o=i.transform,a=e.data.field(i.field);s.set(i.field,uD(o,a,n[r]))}return s}function Tg(t,e,n){const s=new Map;for(const r of t){const i=r.transform,o=n.data.field(r.field);s.set(r.field,lD(i,o,e))}return s}class Lf extends wl{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class gD extends wl{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class _D{constructor(e,n,s,r){this.batchId=e,this.localWriteTime=n,this.baseMutations=s,this.mutations=r}applyToRemoteDocument(e,n){const s=n.mutationResults;for(let r=0;r<this.mutations.length;r++){const i=this.mutations[r];i.key.isEqual(e.key)&&pD(i,e,s[r])}}applyToLocalView(e,n){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(n=Do(s,e,n,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(n=Do(s,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const s=jE();return this.mutations.forEach((r=>{const i=e.get(r.key),o=i.overlayedDocument;let a=this.applyToLocalView(o,i.mutatedFields);a=n.has(r.key)?null:a;const l=QE(o,a);l!==null&&s.set(r.key,l),o.isValidDocument()||o.convertToNoDocument(Ce.min())})),s}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),Me())}isEqual(e){return this.batchId===e.batchId&&Ri(this.mutations,e.mutations,((n,s)=>vg(n,s)))&&Ri(this.baseMutations,e.baseMutations,((n,s)=>vg(n,s)))}}class Mf{constructor(e,n,s,r){this.batch=e,this.commitVersion=n,this.mutationResults=s,this.docVersions=r}static from(e,n,s){qe(e.mutations.length===s.length,58842,{me:e.mutations.length,fe:s.length});let r=(function(){return rD})();const i=e.mutations;for(let o=0;o<i.length;o++)r=r.insert(i[o].key,s[o].version);return new Mf(e,n,s,r)}}class yD{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class vD{constructor(e,n){this.count=e,this.unchangedNames=n}}var ft,xe;function ED(t){switch(t){case Q.OK:return Re(64938);case Q.CANCELLED:case Q.UNKNOWN:case Q.DEADLINE_EXCEEDED:case Q.RESOURCE_EXHAUSTED:case Q.INTERNAL:case Q.UNAVAILABLE:case Q.UNAUTHENTICATED:return!1;case Q.INVALID_ARGUMENT:case Q.NOT_FOUND:case Q.ALREADY_EXISTS:case Q.PERMISSION_DENIED:case Q.FAILED_PRECONDITION:case Q.ABORTED:case Q.OUT_OF_RANGE:case Q.UNIMPLEMENTED:case Q.DATA_LOSS:return!0;default:return Re(15467,{code:t})}}function JE(t){if(t===void 0)return hs("GRPC error has no .code"),Q.UNKNOWN;switch(t){case ft.OK:return Q.OK;case ft.CANCELLED:return Q.CANCELLED;case ft.UNKNOWN:return Q.UNKNOWN;case ft.DEADLINE_EXCEEDED:return Q.DEADLINE_EXCEEDED;case ft.RESOURCE_EXHAUSTED:return Q.RESOURCE_EXHAUSTED;case ft.INTERNAL:return Q.INTERNAL;case ft.UNAVAILABLE:return Q.UNAVAILABLE;case ft.UNAUTHENTICATED:return Q.UNAUTHENTICATED;case ft.INVALID_ARGUMENT:return Q.INVALID_ARGUMENT;case ft.NOT_FOUND:return Q.NOT_FOUND;case ft.ALREADY_EXISTS:return Q.ALREADY_EXISTS;case ft.PERMISSION_DENIED:return Q.PERMISSION_DENIED;case ft.FAILED_PRECONDITION:return Q.FAILED_PRECONDITION;case ft.ABORTED:return Q.ABORTED;case ft.OUT_OF_RANGE:return Q.OUT_OF_RANGE;case ft.UNIMPLEMENTED:return Q.UNIMPLEMENTED;case ft.DATA_LOSS:return Q.DATA_LOSS;default:return Re(39323,{code:t})}}(xe=ft||(ft={}))[xe.OK=0]="OK",xe[xe.CANCELLED=1]="CANCELLED",xe[xe.UNKNOWN=2]="UNKNOWN",xe[xe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",xe[xe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",xe[xe.NOT_FOUND=5]="NOT_FOUND",xe[xe.ALREADY_EXISTS=6]="ALREADY_EXISTS",xe[xe.PERMISSION_DENIED=7]="PERMISSION_DENIED",xe[xe.UNAUTHENTICATED=16]="UNAUTHENTICATED",xe[xe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",xe[xe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",xe[xe.ABORTED=10]="ABORTED",xe[xe.OUT_OF_RANGE=11]="OUT_OF_RANGE",xe[xe.UNIMPLEMENTED=12]="UNIMPLEMENTED",xe[xe.INTERNAL=13]="INTERNAL",xe[xe.UNAVAILABLE=14]="UNAVAILABLE",xe[xe.DATA_LOSS=15]="DATA_LOSS";function TD(){return new TextEncoder}const wD=new qs([4294967295,4294967295],0);function wg(t){const e=TD().encode(t),n=new uE;return n.update(e),new Uint8Array(n.digest())}function bg(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),s=e.getUint32(4,!0),r=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new qs([n,s],0),new qs([r,i],0)]}class xf{constructor(e,n,s){if(this.bitmap=e,this.padding=n,this.hashCount=s,n<0||n>=8)throw new vo(`Invalid padding: ${n}`);if(s<0)throw new vo(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new vo(`Invalid hash count: ${s}`);if(e.length===0&&n!==0)throw new vo(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=qs.fromNumber(this.ge)}ye(e,n,s){let r=e.add(n.multiply(qs.fromNumber(s)));return r.compare(wD)===1&&(r=new qs([r.getBits(0),r.getBits(1)],0)),r.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=wg(e),[s,r]=bg(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(s,r,i);if(!this.we(o))return!1}return!0}static create(e,n,s){const r=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new xf(i,r,n);return s.forEach((a=>o.insert(a))),o}insert(e){if(this.ge===0)return;const n=wg(e),[s,r]=bg(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(s,r,i);this.Se(o)}}Se(e){const n=Math.floor(e/8),s=e%8;this.bitmap[n]|=1<<s}}class vo extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class bl{constructor(e,n,s,r,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=s,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,s){const r=new Map;return r.set(e,ma.createSynthesizedTargetChangeForCurrentChange(e,n,s)),new bl(Ce.min(),r,new tt(Le),fs(),Me())}}class ma{constructor(e,n,s,r,i){this.resumeToken=e,this.current=n,this.addedDocuments=s,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,s){return new ma(s,n,Me(),Me(),Me())}}class cc{constructor(e,n,s,r){this.be=e,this.removedTargetIds=n,this.key=s,this.De=r}}class XE{constructor(e,n){this.targetId=e,this.Ce=n}}class ZE{constructor(e,n,s=Pt.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=n,this.resumeToken=s,this.cause=r}}class Ig{constructor(){this.ve=0,this.Fe=Ag(),this.Me=Pt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Me(),n=Me(),s=Me();return this.Fe.forEach(((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:n=n.add(r);break;case 1:s=s.add(r);break;default:Re(38017,{changeType:i})}})),new ma(this.Me,this.xe,e,n,s)}qe(){this.Oe=!1,this.Fe=Ag()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,qe(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class bD{constructor(e){this.Ge=e,this.ze=new Map,this.je=fs(),this.Je=za(),this.He=za(),this.Ye=new tt(Le)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const s=this.nt(n);switch(e.state){case 0:this.rt(n)&&s.Le(e.resumeToken);break;case 1:s.Ke(),s.Ne||s.qe(),s.Le(e.resumeToken);break;case 2:s.Ke(),s.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(s.We(),s.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),s.Le(e.resumeToken));break;default:Re(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((s,r)=>{this.rt(r)&&n(r)}))}st(e){const n=e.targetId,s=e.Ce.count,r=this.ot(n);if(r){const i=r.target;if(Th(i))if(s===0){const o=new _e(i.path);this.et(n,o,Ut.newNoDocument(o,Ce.min()))}else qe(s===1,20013,{expectedCount:s});else{const o=this._t(n);if(o!==s){const a=this.ut(e),l=a?this.ct(a,e,o):1;if(l!==0){this.it(n);const u=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,u)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:s="",padding:r=0},hashCount:i=0}=n;let o,a;try{o=Xs(s).toUint8Array()}catch(l){if(l instanceof IE)return Vr("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new xf(o,r,i)}catch(l){return Vr(l instanceof vo?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.ge===0?null:a}ct(e,n,s){return n.Ce.count===s-this.Pt(e,n.targetId)?0:2}Pt(e,n){const s=this.Ge.getRemoteKeysForTarget(n);let r=0;return s.forEach((i=>{const o=this.Ge.ht(),a=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(a)||(this.et(n,i,null),r++)})),r}Tt(e){const n=new Map;this.ze.forEach(((i,o)=>{const a=this.ot(o);if(a){if(i.current&&Th(a.target)){const l=new _e(a.target.path);this.It(l).has(o)||this.Et(o,l)||this.et(o,l,Ut.newNoDocument(l,e))}i.Be&&(n.set(o,i.ke()),i.qe())}}));let s=Me();this.He.forEach(((i,o)=>{let a=!0;o.forEachWhile((l=>{const u=this.ot(l);return!u||u.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)})),a&&(s=s.add(i))})),this.je.forEach(((i,o)=>o.setReadTime(e)));const r=new bl(e,n,this.Ye,this.je,s);return this.je=fs(),this.Je=za(),this.He=za(),this.Ye=new tt(Le),r}Xe(e,n){if(!this.rt(e))return;const s=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,s),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,s){if(!this.rt(e))return;const r=this.nt(e);this.Et(e,n)?r.Qe(n,1):r.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),s&&(this.je=this.je.insert(n,s))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new Ig,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new bt(Le),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new bt(Le),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||fe("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Ig),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function za(){return new tt(_e.comparator)}function Ag(){return new tt(_e.comparator)}const ID={asc:"ASCENDING",desc:"DESCENDING"},AD={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},RD={and:"AND",or:"OR"};class SD{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Ih(t,e){return t.useProto3Json||_l(e)?e:{value:e}}function Bc(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function eT(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function CD(t,e){return Bc(t,e.toTimestamp())}function Fn(t){return qe(!!t,49232),Ce.fromTimestamp((function(n){const s=Js(n);return new Je(s.seconds,s.nanos)})(t))}function Ff(t,e){return Ah(t,e).canonicalString()}function Ah(t,e){const n=(function(r){return new Ye(["projects",r.projectId,"databases",r.database])})(t).child("documents");return e===void 0?n:n.child(e)}function tT(t){const e=Ye.fromString(t);return qe(oT(e),10190,{key:e.toString()}),e}function Rh(t,e){return Ff(t.databaseId,e.path)}function Au(t,e){const n=tT(e);if(n.get(1)!==t.databaseId.projectId)throw new ce(Q.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new ce(Q.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new _e(sT(n))}function nT(t,e){return Ff(t.databaseId,e)}function PD(t){const e=tT(t);return e.length===4?Ye.emptyPath():sT(e)}function Sh(t){return new Ye(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function sT(t){return qe(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function Rg(t,e,n){return{name:Rh(t,e),fields:n.value.mapValue.fields}}function kD(t,e){let n;if("targetChange"in e){e.targetChange;const s=(function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:Re(39313,{state:u})})(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],i=(function(u,h){return u.useProto3Json?(qe(h===void 0||typeof h=="string",58123),Pt.fromBase64String(h||"")):(qe(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),Pt.fromUint8Array(h||new Uint8Array))})(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&(function(u){const h=u.code===void 0?Q.UNKNOWN:JE(u.code);return new ce(h,u.message||"")})(o);n=new ZE(s,r,i,a||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const r=Au(t,s.document.name),i=Fn(s.document.updateTime),o=s.document.createTime?Fn(s.document.createTime):Ce.min(),a=new Jt({mapValue:{fields:s.document.fields}}),l=Ut.newFoundDocument(r,i,o,a),u=s.targetIds||[],h=s.removedTargetIds||[];n=new cc(u,h,l.key,l)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const r=Au(t,s.document),i=s.readTime?Fn(s.readTime):Ce.min(),o=Ut.newNoDocument(r,i),a=s.removedTargetIds||[];n=new cc([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const r=Au(t,s.document),i=s.removedTargetIds||[];n=new cc([],i,r,null)}else{if(!("filter"in e))return Re(11601,{Rt:e});{e.filter;const s=e.filter;s.targetId;const{count:r=0,unchangedNames:i}=s,o=new vD(r,i),a=s.targetId;n=new XE(a,o)}}return n}function ND(t,e){let n;if(e instanceof pa)n={update:Rg(t,e.key,e.value)};else if(e instanceof Lf)n={delete:Rh(t,e.key)};else if(e instanceof rr)n={update:Rg(t,e.key,e.data),updateMask:BD(e.fieldMask)};else{if(!(e instanceof gD))return Re(16599,{Vt:e.type});n={verify:Rh(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((s=>(function(i,o){const a=o.transform;if(a instanceof Yo)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Jo)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Xo)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Uc)return{fieldPath:o.field.canonicalString(),increment:a.Ae};throw Re(20930,{transform:o.transform})})(0,s)))),e.precondition.isNone||(n.currentDocument=(function(r,i){return i.updateTime!==void 0?{updateTime:CD(r,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:Re(27497)})(t,e.precondition)),n}function DD(t,e){return t&&t.length>0?(qe(e!==void 0,14353),t.map((n=>(function(r,i){let o=r.updateTime?Fn(r.updateTime):Fn(i);return o.isEqual(Ce.min())&&(o=Fn(i)),new dD(o,r.transformResults||[])})(n,e)))):[]}function OD(t,e){return{documents:[nT(t,e.path)]}}function VD(t,e){const n={structuredQuery:{}},s=e.path;let r;e.collectionGroup!==null?(r=s,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=s.popLast(),n.structuredQuery.from=[{collectionId:s.lastSegment()}]),n.parent=nT(t,r);const i=(function(u){if(u.length!==0)return iT(Sn.create(u,"and"))})(e.filters);i&&(n.structuredQuery.where=i);const o=(function(u){if(u.length!==0)return u.map((h=>(function(p){return{field:Zr(p.field),direction:xD(p.dir)}})(h)))})(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=Ih(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=(function(u){return{before:u.inclusive,values:u.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(u){return{before:!u.inclusive,values:u.position}})(e.endAt)),{ft:n,parent:r}}function LD(t){let e=PD(t.parent);const n=t.structuredQuery,s=n.from?n.from.length:0;let r=null;if(s>0){qe(s===1,65062);const h=n.from[0];h.allDescendants?r=h.collectionId:e=e.child(h.collectionId)}let i=[];n.where&&(i=(function(f){const p=rT(f);return p instanceof Sn&&VE(p)?p.getFilters():[p]})(n.where));let o=[];n.orderBy&&(o=(function(f){return f.map((p=>(function(I){return new Qo(ei(I.field),(function(D){switch(D){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(I.direction))})(p)))})(n.orderBy));let a=null;n.limit&&(a=(function(f){let p;return p=typeof f=="object"?f.value:f,_l(p)?null:p})(n.limit));let l=null;n.startAt&&(l=(function(f){const p=!!f.before,g=f.values||[];return new Fc(g,p)})(n.startAt));let u=null;return n.endAt&&(u=(function(f){const p=!f.before,g=f.values||[];return new Fc(g,p)})(n.endAt)),ZN(e,r,o,i,a,"F",l,u)}function MD(t,e){const n=(function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Re(28987,{purpose:r})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function rT(t){return t.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const s=ei(n.unaryFilter.field);return mt.create(s,"==",{doubleValue:NaN});case"IS_NULL":const r=ei(n.unaryFilter.field);return mt.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=ei(n.unaryFilter.field);return mt.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=ei(n.unaryFilter.field);return mt.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Re(61313);default:return Re(60726)}})(t):t.fieldFilter!==void 0?(function(n){return mt.create(ei(n.fieldFilter.field),(function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Re(58110);default:return Re(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(t):t.compositeFilter!==void 0?(function(n){return Sn.create(n.compositeFilter.filters.map((s=>rT(s))),(function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return Re(1026)}})(n.compositeFilter.op))})(t):Re(30097,{filter:t})}function xD(t){return ID[t]}function FD(t){return AD[t]}function UD(t){return RD[t]}function Zr(t){return{fieldPath:t.canonicalString()}}function ei(t){return St.fromServerFormat(t.fieldPath)}function iT(t){return t instanceof mt?(function(n){if(n.op==="=="){if(dg(n.value))return{unaryFilter:{field:Zr(n.field),op:"IS_NAN"}};if(fg(n.value))return{unaryFilter:{field:Zr(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(dg(n.value))return{unaryFilter:{field:Zr(n.field),op:"IS_NOT_NAN"}};if(fg(n.value))return{unaryFilter:{field:Zr(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Zr(n.field),op:FD(n.op),value:n.value}}})(t):t instanceof Sn?(function(n){const s=n.getFilters().map((r=>iT(r)));return s.length===1?s[0]:{compositeFilter:{op:UD(n.op),filters:s}}})(t):Re(54877,{filter:t})}function BD(t){const e=[];return t.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function oT(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}class xs{constructor(e,n,s,r,i=Ce.min(),o=Ce.min(),a=Pt.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=s,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new xs(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new xs(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new xs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new xs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class $D{constructor(e){this.yt=e}}function HD(t){const e=LD({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?bh(e,e.limit,"L"):e}class jD{constructor(){this.Cn=new qD}addToCollectionParentIndex(e,n){return this.Cn.add(n),X.resolve()}getCollectionParents(e,n){return X.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return X.resolve()}deleteFieldIndex(e,n){return X.resolve()}deleteAllFieldIndexes(e){return X.resolve()}createTargetIndexes(e,n){return X.resolve()}getDocumentsMatchingTarget(e,n){return X.resolve(null)}getIndexType(e,n){return X.resolve(0)}getFieldIndexes(e,n){return X.resolve([])}getNextCollectionGroupToUpdate(e){return X.resolve(null)}getMinOffset(e,n){return X.resolve(Ys.min())}getMinOffsetFromCollectionGroup(e,n){return X.resolve(Ys.min())}updateCollectionGroup(e,n,s){return X.resolve()}updateIndexEntries(e,n){return X.resolve()}}class qD{constructor(){this.index={}}add(e){const n=e.lastSegment(),s=e.popLast(),r=this.index[n]||new bt(Ye.comparator),i=!r.has(s);return this.index[n]=r.add(s),i}has(e){const n=e.lastSegment(),s=e.popLast(),r=this.index[n];return r&&r.has(s)}getEntries(e){return(this.index[e]||new bt(Ye.comparator)).toArray()}}const Sg={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},aT=41943040;class Qt{static withCacheSize(e){return new Qt(e,Qt.DEFAULT_COLLECTION_PERCENTILE,Qt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=s}}Qt.DEFAULT_COLLECTION_PERCENTILE=10,Qt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Qt.DEFAULT=new Qt(aT,Qt.DEFAULT_COLLECTION_PERCENTILE,Qt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Qt.DISABLED=new Qt(-1,0,0);class ki{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new ki(0)}static cr(){return new ki(-1)}}const Cg="LruGarbageCollector",WD=1048576;function Pg([t,e],[n,s]){const r=Le(t,n);return r===0?Le(e,s):r}class GD{constructor(e){this.Ir=e,this.buffer=new bt(Pg),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const s=this.buffer.last();Pg(n,s)<0&&(this.buffer=this.buffer.delete(s).add(n))}}get maxValue(){return this.buffer.last()[0]}}class zD{constructor(e,n,s){this.garbageCollector=e,this.asyncQueue=n,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){fe(Cg,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Hi(n)?fe(Cg,"Ignoring IndexedDB error during garbage collection: ",n):await $i(n)}await this.Vr(3e5)}))}}class KD{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next((s=>Math.floor(n/100*s)))}nthSequenceNumber(e,n){if(n===0)return X.resolve(gl.ce);const s=new GD(n);return this.mr.forEachTarget(e,(r=>s.Ar(r.sequenceNumber))).next((()=>this.mr.pr(e,(r=>s.Ar(r))))).next((()=>s.maxValue))}removeTargets(e,n,s){return this.mr.removeTargets(e,n,s)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(fe("LruGarbageCollector","Garbage collection skipped; disabled"),X.resolve(Sg)):this.getCacheSize(e).next((s=>s<this.params.cacheSizeCollectionThreshold?(fe("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Sg):this.yr(e,n)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let s,r,i,o,a,l,u;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((f=>(f>this.params.maximumSequenceNumbersToCollect?(fe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),r=this.params.maximumSequenceNumbersToCollect):r=f,o=Date.now(),this.nthSequenceNumber(e,r)))).next((f=>(s=f,a=Date.now(),this.removeTargets(e,s,n)))).next((f=>(i=f,l=Date.now(),this.removeOrphanedDocuments(e,s)))).next((f=>(u=Date.now(),Jr()<=Ve.DEBUG&&fe("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-h}ms
	Determined least recently used ${r} in `+(a-o)+`ms
	Removed ${i} targets in `+(l-a)+`ms
	Removed ${f} documents in `+(u-l)+`ms
Total Duration: ${u-h}ms`),X.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:f}))))}}function QD(t,e){return new KD(t,e)}class YD{constructor(){this.changes=new Br((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Ut.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const s=this.changes.get(n);return s!==void 0?X.resolve(s):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class JD{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}class XD{constructor(e,n,s,r){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=s,this.indexManager=r}getDocument(e,n){let s=null;return this.documentOverlayCache.getOverlay(e,n).next((r=>(s=r,this.remoteDocumentCache.getEntry(e,n)))).next((r=>(s!==null&&Do(s.mutation,r,rn.empty(),Je.now()),r)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((s=>this.getLocalViewOfDocuments(e,s,Me()).next((()=>s))))}getLocalViewOfDocuments(e,n,s=Me()){const r=Tr();return this.populateOverlays(e,r,n).next((()=>this.computeViews(e,n,r,s).next((i=>{let o=yo();return i.forEach(((a,l)=>{o=o.insert(a,l.overlayedDocument)})),o}))))}getOverlayedDocuments(e,n){const s=Tr();return this.populateOverlays(e,s,n).next((()=>this.computeViews(e,n,s,Me())))}populateOverlays(e,n,s){const r=[];return s.forEach((i=>{n.has(i)||r.push(i)})),this.documentOverlayCache.getOverlays(e,r).next((i=>{i.forEach(((o,a)=>{n.set(o,a)}))}))}computeViews(e,n,s,r){let i=fs();const o=No(),a=(function(){return No()})();return n.forEach(((l,u)=>{const h=s.get(u.key);r.has(u.key)&&(h===void 0||h.mutation instanceof rr)?i=i.insert(u.key,u):h!==void 0?(o.set(u.key,h.mutation.getFieldMask()),Do(h.mutation,u,h.mutation.getFieldMask(),Je.now())):o.set(u.key,rn.empty())})),this.recalculateAndSaveOverlays(e,i).next((l=>(l.forEach(((u,h)=>o.set(u,h))),n.forEach(((u,h)=>a.set(u,new JD(h,o.get(u)??null)))),a)))}recalculateAndSaveOverlays(e,n){const s=No();let r=new tt(((o,a)=>o-a)),i=Me();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((o=>{for(const a of o)a.keys().forEach((l=>{const u=n.get(l);if(u===null)return;let h=s.get(l)||rn.empty();h=a.applyToLocalView(u,h),s.set(l,h);const f=(r.get(a.batchId)||Me()).add(l);r=r.insert(a.batchId,f)}))})).next((()=>{const o=[],a=r.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),u=l.key,h=l.value,f=jE();h.forEach((p=>{if(!i.has(p)){const g=QE(n.get(p),s.get(p));g!==null&&f.set(p,g),i=i.add(p)}})),o.push(this.documentOverlayCache.saveOverlays(e,u,f))}return X.waitFor(o)})).next((()=>s))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((s=>this.recalculateAndSaveOverlays(e,s)))}getDocumentsMatchingQuery(e,n,s,r){return(function(o){return _e.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):FE(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,s,r):this.getDocumentsMatchingCollectionQuery(e,n,s,r)}getNextDocuments(e,n,s,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,s,r).next((i=>{const o=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,s.largestBatchId,r-i.size):X.resolve(Tr());let a=Go,l=i;return o.next((u=>X.forEach(u,((h,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),i.get(h)?X.resolve():this.remoteDocumentCache.getEntry(e,h).next((p=>{l=l.insert(h,p)}))))).next((()=>this.populateOverlays(e,u,i))).next((()=>this.computeViews(e,l,u,Me()))).next((h=>({batchId:a,changes:HE(h)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new _e(n)).next((s=>{let r=yo();return s.isFoundDocument()&&(r=r.insert(s.key,s)),r}))}getDocumentsMatchingCollectionGroupQuery(e,n,s,r){const i=n.collectionGroup;let o=yo();return this.indexManager.getCollectionParents(e,i).next((a=>X.forEach(a,(l=>{const u=(function(f,p){return new ji(p,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)})(n,l.child(i));return this.getDocumentsMatchingCollectionQuery(e,u,s,r).next((h=>{h.forEach(((f,p)=>{o=o.insert(f,p)}))}))})).next((()=>o))))}getDocumentsMatchingCollectionQuery(e,n,s,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,s.largestBatchId).next((o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,s,i,r)))).next((o=>{i.forEach(((l,u)=>{const h=u.getKey();o.get(h)===null&&(o=o.insert(h,Ut.newInvalidDocument(h)))}));let a=yo();return o.forEach(((l,u)=>{const h=i.get(l);h!==void 0&&Do(h.mutation,u,rn.empty(),Je.now()),El(n,u)&&(a=a.insert(l,u))})),a}))}}class ZD{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return X.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,(function(r){return{id:r.id,version:r.version,createTime:Fn(r.createTime)}})(n)),X.resolve()}getNamedQuery(e,n){return X.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,(function(r){return{name:r.name,query:HD(r.bundledQuery),readTime:Fn(r.readTime)}})(n)),X.resolve()}}class eO{constructor(){this.overlays=new tt(_e.comparator),this.qr=new Map}getOverlay(e,n){return X.resolve(this.overlays.get(n))}getOverlays(e,n){const s=Tr();return X.forEach(n,(r=>this.getOverlay(e,r).next((i=>{i!==null&&s.set(r,i)})))).next((()=>s))}saveOverlays(e,n,s){return s.forEach(((r,i)=>{this.St(e,n,i)})),X.resolve()}removeOverlaysForBatchId(e,n,s){const r=this.qr.get(s);return r!==void 0&&(r.forEach((i=>this.overlays=this.overlays.remove(i))),this.qr.delete(s)),X.resolve()}getOverlaysForCollection(e,n,s){const r=Tr(),i=n.length+1,o=new _e(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,u=l.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===i&&l.largestBatchId>s&&r.set(l.getKey(),l)}return X.resolve(r)}getOverlaysForCollectionGroup(e,n,s,r){let i=new tt(((u,h)=>u-h));const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>s){let h=i.get(u.largestBatchId);h===null&&(h=Tr(),i=i.insert(u.largestBatchId,h)),h.set(u.getKey(),u)}}const a=Tr(),l=i.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach(((u,h)=>a.set(u,h))),!(a.size()>=r)););return X.resolve(a)}St(e,n,s){const r=this.overlays.get(s.key);if(r!==null){const o=this.qr.get(r.largestBatchId).delete(s.key);this.qr.set(r.largestBatchId,o)}this.overlays=this.overlays.insert(s.key,new yD(n,s));let i=this.qr.get(n);i===void 0&&(i=Me(),this.qr.set(n,i)),this.qr.set(n,i.add(s.key))}}class tO{constructor(){this.sessionToken=Pt.EMPTY_BYTE_STRING}getSessionToken(e){return X.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,X.resolve()}}class Uf{constructor(){this.Qr=new bt(Rt.$r),this.Ur=new bt(Rt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const s=new Rt(e,n);this.Qr=this.Qr.add(s),this.Ur=this.Ur.add(s)}Wr(e,n){e.forEach((s=>this.addReference(s,n)))}removeReference(e,n){this.Gr(new Rt(e,n))}zr(e,n){e.forEach((s=>this.removeReference(s,n)))}jr(e){const n=new _e(new Ye([])),s=new Rt(n,e),r=new Rt(n,e+1),i=[];return this.Ur.forEachInRange([s,r],(o=>{this.Gr(o),i.push(o.key)})),i}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new _e(new Ye([])),s=new Rt(n,e),r=new Rt(n,e+1);let i=Me();return this.Ur.forEachInRange([s,r],(o=>{i=i.add(o.key)})),i}containsKey(e){const n=new Rt(e,0),s=this.Qr.firstAfterOrEqual(n);return s!==null&&e.isEqual(s.key)}}class Rt{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return _e.comparator(e.key,n.key)||Le(e.Yr,n.Yr)}static Kr(e,n){return Le(e.Yr,n.Yr)||_e.comparator(e.key,n.key)}}class nO{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new bt(Rt.$r)}checkEmpty(e){return X.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,s,r){const i=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new _D(i,n,s,r);this.mutationQueue.push(o);for(const a of r)this.Zr=this.Zr.add(new Rt(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return X.resolve(o)}lookupMutationBatch(e,n){return X.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const s=n+1,r=this.ei(s),i=r<0?0:r;return X.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return X.resolve(this.mutationQueue.length===0?Cf:this.tr-1)}getAllMutationBatches(e){return X.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const s=new Rt(n,0),r=new Rt(n,Number.POSITIVE_INFINITY),i=[];return this.Zr.forEachInRange([s,r],(o=>{const a=this.Xr(o.Yr);i.push(a)})),X.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let s=new bt(Le);return n.forEach((r=>{const i=new Rt(r,0),o=new Rt(r,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([i,o],(a=>{s=s.add(a.Yr)}))})),X.resolve(this.ti(s))}getAllMutationBatchesAffectingQuery(e,n){const s=n.path,r=s.length+1;let i=s;_e.isDocumentKey(i)||(i=i.child(""));const o=new Rt(new _e(i),0);let a=new bt(Le);return this.Zr.forEachWhile((l=>{const u=l.key.path;return!!s.isPrefixOf(u)&&(u.length===r&&(a=a.add(l.Yr)),!0)}),o),X.resolve(this.ti(a))}ti(e){const n=[];return e.forEach((s=>{const r=this.Xr(s);r!==null&&n.push(r)})),n}removeMutationBatch(e,n){qe(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Zr;return X.forEach(n.mutations,(r=>{const i=new Rt(r.key,n.batchId);return s=s.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)})).next((()=>{this.Zr=s}))}ir(e){}containsKey(e,n){const s=new Rt(n,0),r=this.Zr.firstAfterOrEqual(s);return X.resolve(n.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,X.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class sO{constructor(e){this.ri=e,this.docs=(function(){return new tt(_e.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const s=n.key,r=this.docs.get(s),i=r?r.size:0,o=this.ri(n);return this.docs=this.docs.insert(s,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const s=this.docs.get(n);return X.resolve(s?s.document.mutableCopy():Ut.newInvalidDocument(n))}getEntries(e,n){let s=fs();return n.forEach((r=>{const i=this.docs.get(r);s=s.insert(r,i?i.document.mutableCopy():Ut.newInvalidDocument(r))})),X.resolve(s)}getDocumentsMatchingQuery(e,n,s,r){let i=fs();const o=n.path,a=new _e(o.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:u,value:{document:h}}=l.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||NN(kN(h),s)<=0||(r.has(h.key)||El(n,h))&&(i=i.insert(h.key,h.mutableCopy()))}return X.resolve(i)}getAllFromCollectionGroup(e,n,s,r){Re(9500)}ii(e,n){return X.forEach(this.docs,(s=>n(s)))}newChangeBuffer(e){return new rO(this)}getSize(e){return X.resolve(this.size)}}class rO extends YD{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach(((s,r)=>{r.isValidDocument()?n.push(this.Nr.addEntry(e,r)):this.Nr.removeEntry(s)})),X.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}class iO{constructor(e){this.persistence=e,this.si=new Br((n=>Nf(n)),Df),this.lastRemoteSnapshotVersion=Ce.min(),this.highestTargetId=0,this.oi=0,this._i=new Uf,this.targetCount=0,this.ai=ki.ur()}forEachTarget(e,n){return this.si.forEach(((s,r)=>n(r))),X.resolve()}getLastRemoteSnapshotVersion(e){return X.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return X.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),X.resolve(this.highestTargetId)}setTargetsMetadata(e,n,s){return s&&(this.lastRemoteSnapshotVersion=s),n>this.oi&&(this.oi=n),X.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new ki(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,X.resolve()}updateTargetData(e,n){return this.Pr(n),X.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,X.resolve()}removeTargets(e,n,s){let r=0;const i=[];return this.si.forEach(((o,a)=>{a.sequenceNumber<=n&&s.get(a.targetId)===null&&(this.si.delete(o),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),r++)})),X.waitFor(i).next((()=>r))}getTargetCount(e){return X.resolve(this.targetCount)}getTargetData(e,n){const s=this.si.get(n)||null;return X.resolve(s)}addMatchingKeys(e,n,s){return this._i.Wr(n,s),X.resolve()}removeMatchingKeys(e,n,s){this._i.zr(n,s);const r=this.persistence.referenceDelegate,i=[];return r&&n.forEach((o=>{i.push(r.markPotentiallyOrphaned(e,o))})),X.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),X.resolve()}getMatchingKeysForTargetId(e,n){const s=this._i.Hr(n);return X.resolve(s)}containsKey(e,n){return X.resolve(this._i.containsKey(n))}}class cT{constructor(e,n){this.ui={},this.overlays={},this.ci=new gl(0),this.li=!1,this.li=!0,this.hi=new tO,this.referenceDelegate=e(this),this.Pi=new iO(this),this.indexManager=new jD,this.remoteDocumentCache=(function(r){return new sO(r)})((s=>this.referenceDelegate.Ti(s))),this.serializer=new $D(n),this.Ii=new ZD(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new eO,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let s=this.ui[e.toKey()];return s||(s=new nO(n,this.referenceDelegate),this.ui[e.toKey()]=s),s}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,s){fe("MemoryPersistence","Starting transaction:",e);const r=new oO(this.ci.next());return this.referenceDelegate.Ei(),s(r).next((i=>this.referenceDelegate.di(r).next((()=>i)))).toPromise().then((i=>(r.raiseOnCommittedEvent(),i)))}Ai(e,n){return X.or(Object.values(this.ui).map((s=>()=>s.containsKey(e,n))))}}class oO extends ON{constructor(e){super(),this.currentSequenceNumber=e}}class Bf{constructor(e){this.persistence=e,this.Ri=new Uf,this.Vi=null}static mi(e){return new Bf(e)}get fi(){if(this.Vi)return this.Vi;throw Re(60996)}addReference(e,n,s){return this.Ri.addReference(s,n),this.fi.delete(s.toString()),X.resolve()}removeReference(e,n,s){return this.Ri.removeReference(s,n),this.fi.add(s.toString()),X.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),X.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach((r=>this.fi.add(r.toString())));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,n.targetId).next((r=>{r.forEach((i=>this.fi.add(i.toString())))})).next((()=>s.removeTargetData(e,n)))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return X.forEach(this.fi,(s=>{const r=_e.fromPath(s);return this.gi(e,r).next((i=>{i||n.removeEntry(r,Ce.min())}))})).next((()=>(this.Vi=null,n.apply(e))))}updateLimboDocument(e,n){return this.gi(e,n).next((s=>{s?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(e){return 0}gi(e,n){return X.or([()=>X.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class $c{constructor(e,n){this.persistence=e,this.pi=new Br((s=>MN(s.path)),((s,r)=>s.isEqual(r))),this.garbageCollector=QD(this,n)}static mi(e,n){return new $c(e,n)}Ei(){}di(e){return X.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((s=>n.next((r=>s+r))))}wr(e){let n=0;return this.pr(e,(s=>{n++})).next((()=>n))}pr(e,n){return X.forEach(this.pi,((s,r)=>this.br(e,s,r).next((i=>i?X.resolve():n(r)))))}removeTargets(e,n,s){return this.persistence.getTargetCache().removeTargets(e,n,s)}removeOrphanedDocuments(e,n){let s=0;const r=this.persistence.getRemoteDocumentCache(),i=r.newChangeBuffer();return r.ii(e,(o=>this.br(e,o,n).next((a=>{a||(s++,i.removeEntry(o,Ce.min()))})))).next((()=>i.apply(e))).next((()=>s))}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),X.resolve()}removeTarget(e,n){const s=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,n,s){return this.pi.set(s,e.currentSequenceNumber),X.resolve()}removeReference(e,n,s){return this.pi.set(s,e.currentSequenceNumber),X.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),X.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=ic(e.data.value)),n}br(e,n,s){return X.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const r=this.pi.get(n);return X.resolve(r!==void 0&&r>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class $f{constructor(e,n,s,r){this.targetId=e,this.fromCache=n,this.Es=s,this.ds=r}static As(e,n){let s=Me(),r=Me();for(const i of n.docChanges)switch(i.type){case 0:s=s.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new $f(e,n.fromCache,s,r)}}class aO{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class cO{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return xC()?8:VN(Bt())>0?6:4})()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,s,r){const i={result:null};return this.ys(e,n).next((o=>{i.result=o})).next((()=>{if(!i.result)return this.ws(e,n,r,s).next((o=>{i.result=o}))})).next((()=>{if(i.result)return;const o=new aO;return this.Ss(e,n,o).next((a=>{if(i.result=a,this.Vs)return this.bs(e,n,o,a.size)}))})).next((()=>i.result))}bs(e,n,s,r){return s.documentReadCount<this.fs?(Jr()<=Ve.DEBUG&&fe("QueryEngine","SDK will not create cache indexes for query:",Xr(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),X.resolve()):(Jr()<=Ve.DEBUG&&fe("QueryEngine","Query:",Xr(n),"scans",s.documentReadCount,"local documents and returns",r,"documents as results."),s.documentReadCount>this.gs*r?(Jr()<=Ve.DEBUG&&fe("QueryEngine","The SDK decides to create cache indexes for query:",Xr(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,xn(n))):X.resolve())}ys(e,n){if(_g(n))return X.resolve(null);let s=xn(n);return this.indexManager.getIndexType(e,s).next((r=>r===0?null:(n.limit!==null&&r===1&&(n=bh(n,null,"F"),s=xn(n)),this.indexManager.getDocumentsMatchingTarget(e,s).next((i=>{const o=Me(...i);return this.ps.getDocuments(e,o).next((a=>this.indexManager.getMinOffset(e,s).next((l=>{const u=this.Ds(n,a);return this.Cs(n,u,o,l.readTime)?this.ys(e,bh(n,null,"F")):this.vs(e,u,n,l)}))))})))))}ws(e,n,s,r){return _g(n)||r.isEqual(Ce.min())?X.resolve(null):this.ps.getDocuments(e,s).next((i=>{const o=this.Ds(n,i);return this.Cs(n,o,s,r)?X.resolve(null):(Jr()<=Ve.DEBUG&&fe("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Xr(n)),this.vs(e,o,n,PN(r,Go)).next((a=>a)))}))}Ds(e,n){let s=new bt(BE(e));return n.forEach(((r,i)=>{El(e,i)&&(s=s.add(i))})),s}Cs(e,n,s,r){if(e.limit===null)return!1;if(s.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Ss(e,n,s){return Jr()<=Ve.DEBUG&&fe("QueryEngine","Using full collection scan to execute query:",Xr(n)),this.ps.getDocumentsMatchingQuery(e,n,Ys.min(),s)}vs(e,n,s,r){return this.ps.getDocumentsMatchingQuery(e,s,r).next((i=>(n.forEach((o=>{i=i.insert(o.key,o)})),i)))}}const Hf="LocalStore",lO=3e8;class uO{constructor(e,n,s,r){this.persistence=e,this.Fs=n,this.serializer=r,this.Ms=new tt(Le),this.xs=new Br((i=>Nf(i)),Df),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(s)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new XD(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.Ms)))}}function hO(t,e,n,s){return new uO(t,e,n,s)}async function lT(t,e){const n=Pe(t);return await n.persistence.runTransaction("Handle user change","readonly",(s=>{let r;return n.mutationQueue.getAllMutationBatches(s).next((i=>(r=i,n.Bs(e),n.mutationQueue.getAllMutationBatches(s)))).next((i=>{const o=[],a=[];let l=Me();for(const u of r){o.push(u.batchId);for(const h of u.mutations)l=l.add(h.key)}for(const u of i){a.push(u.batchId);for(const h of u.mutations)l=l.add(h.key)}return n.localDocuments.getDocuments(s,l).next((u=>({Ls:u,removedBatchIds:o,addedBatchIds:a})))}))}))}function fO(t,e){const n=Pe(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(s=>{const r=e.batch.keys(),i=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(a,l,u,h){const f=u.batch,p=f.keys();let g=X.resolve();return p.forEach((I=>{g=g.next((()=>h.getEntry(l,I))).next((y=>{const D=u.docVersions.get(I);qe(D!==null,48541),y.version.compareTo(D)<0&&(f.applyToRemoteDocument(y,u),y.isValidDocument()&&(y.setReadTime(u.commitVersion),h.addEntry(y)))}))})),g.next((()=>a.mutationQueue.removeMutationBatch(l,f)))})(n,s,e,i).next((()=>i.apply(s))).next((()=>n.mutationQueue.performConsistencyCheck(s))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(s,r,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,(function(a){let l=Me();for(let u=0;u<a.mutationResults.length;++u)a.mutationResults[u].transformResults.length>0&&(l=l.add(a.batch.mutations[u].key));return l})(e)))).next((()=>n.localDocuments.getDocuments(s,r)))}))}function uT(t){const e=Pe(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.Pi.getLastRemoteSnapshotVersion(n)))}function dO(t,e){const n=Pe(t),s=e.snapshotVersion;let r=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(i=>{const o=n.Ns.newChangeBuffer({trackRemovals:!0});r=n.Ms;const a=[];e.targetChanges.forEach(((h,f)=>{const p=r.get(f);if(!p)return;a.push(n.Pi.removeMatchingKeys(i,h.removedDocuments,f).next((()=>n.Pi.addMatchingKeys(i,h.addedDocuments,f))));let g=p.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(f)!==null?g=g.withResumeToken(Pt.EMPTY_BYTE_STRING,Ce.min()).withLastLimboFreeSnapshotVersion(Ce.min()):h.resumeToken.approximateByteSize()>0&&(g=g.withResumeToken(h.resumeToken,s)),r=r.insert(f,g),(function(y,D,V){return y.resumeToken.approximateByteSize()===0||D.snapshotVersion.toMicroseconds()-y.snapshotVersion.toMicroseconds()>=lO?!0:V.addedDocuments.size+V.modifiedDocuments.size+V.removedDocuments.size>0})(p,g,h)&&a.push(n.Pi.updateTargetData(i,g))}));let l=fs(),u=Me();if(e.documentUpdates.forEach((h=>{e.resolvedLimboDocuments.has(h)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(i,h))})),a.push(pO(i,o,e.documentUpdates).next((h=>{l=h.ks,u=h.qs}))),!s.isEqual(Ce.min())){const h=n.Pi.getLastRemoteSnapshotVersion(i).next((f=>n.Pi.setTargetsMetadata(i,i.currentSequenceNumber,s)));a.push(h)}return X.waitFor(a).next((()=>o.apply(i))).next((()=>n.localDocuments.getLocalViewOfDocuments(i,l,u))).next((()=>l))})).then((i=>(n.Ms=r,i)))}function pO(t,e,n){let s=Me(),r=Me();return n.forEach((i=>s=s.add(i))),e.getEntries(t,s).next((i=>{let o=fs();return n.forEach(((a,l)=>{const u=i.get(a);l.isFoundDocument()!==u.isFoundDocument()&&(r=r.add(a)),l.isNoDocument()&&l.version.isEqual(Ce.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!u.isValidDocument()||l.version.compareTo(u.version)>0||l.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):fe(Hf,"Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",l.version)})),{ks:o,qs:r}}))}function mO(t,e){const n=Pe(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(s=>(e===void 0&&(e=Cf),n.mutationQueue.getNextMutationBatchAfterBatchId(s,e))))}function gO(t,e){const n=Pe(t);return n.persistence.runTransaction("Allocate target","readwrite",(s=>{let r;return n.Pi.getTargetData(s,e).next((i=>i?(r=i,X.resolve(r)):n.Pi.allocateTargetId(s).next((o=>(r=new xs(e,o,"TargetPurposeListen",s.currentSequenceNumber),n.Pi.addTargetData(s,r).next((()=>r)))))))})).then((s=>{const r=n.Ms.get(s.targetId);return(r===null||s.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(s.targetId,s),n.xs.set(e,s.targetId)),s}))}async function Ch(t,e,n){const s=Pe(t),r=s.Ms.get(e),i=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",i,(o=>s.persistence.referenceDelegate.removeTarget(o,r)))}catch(o){if(!Hi(o))throw o;fe(Hf,`Failed to update sequence numbers for target ${e}: ${o}`)}s.Ms=s.Ms.remove(e),s.xs.delete(r.target)}function kg(t,e,n){const s=Pe(t);let r=Ce.min(),i=Me();return s.persistence.runTransaction("Execute query","readwrite",(o=>(function(l,u,h){const f=Pe(l),p=f.xs.get(h);return p!==void 0?X.resolve(f.Ms.get(p)):f.Pi.getTargetData(u,h)})(s,o,xn(e)).next((a=>{if(a)return r=a.lastLimboFreeSnapshotVersion,s.Pi.getMatchingKeysForTargetId(o,a.targetId).next((l=>{i=l}))})).next((()=>s.Fs.getDocumentsMatchingQuery(o,e,n?r:Ce.min(),n?i:Me()))).next((a=>(_O(s,tD(e),a),{documents:a,Qs:i})))))}function _O(t,e,n){let s=t.Os.get(e)||Ce.min();n.forEach(((r,i)=>{i.readTime.compareTo(s)>0&&(s=i.readTime)})),t.Os.set(e,s)}class Ng{constructor(){this.activeTargetIds=aD()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class yO{constructor(){this.Mo=new Ng,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,s){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,s){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Ng,Promise.resolve()}handleUserChange(e,n,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class vO{Oo(e){}shutdown(){}}const Dg="ConnectivityMonitor";class Og{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){fe(Dg,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){fe(Dg,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let Ka=null;function Ph(){return Ka===null?Ka=(function(){return 268435456+Math.round(2147483648*Math.random())})():Ka++,"0x"+Ka.toString(16)}const Ru="RestConnection",EO={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class TO{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${s}/databases/${r}`,this.Wo=this.databaseId.database===Mc?`project_id=${s}`:`project_id=${s}&database_id=${r}`}Go(e,n,s,r,i){const o=Ph(),a=this.zo(e,n.toUriEncodedString());fe(Ru,`Sending RPC '${e}' ${o}:`,a,s);const l={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(l,r,i);const{host:u}=new URL(a),h=xi(u);return this.Jo(e,a,l,s,h).then((f=>(fe(Ru,`Received RPC '${e}' ${o}: `,f),f)),(f=>{throw Vr(Ru,`RPC '${e}' ${o} failed with error: `,f,"url: ",a,"request:",s),f}))}Ho(e,n,s,r,i,o){return this.Go(e,n,s,r,i)}jo(e,n,s){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Bi})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((r,i)=>e[i]=r)),s&&s.headers.forEach(((r,i)=>e[i]=r))}zo(e,n){const s=EO[e];return`${this.Uo}/v1/${n}:${s}`}terminate(){}}class wO{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const Lt="WebChannelConnection";class bO extends TO{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,s,r,i){const o=Ph();return new Promise(((a,l)=>{const u=new hE;u.setWithCredentials(!0),u.listenOnce(fE.COMPLETE,(()=>{try{switch(u.getLastErrorCode()){case rc.NO_ERROR:const f=u.getResponseJson();fe(Lt,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(f)),a(f);break;case rc.TIMEOUT:fe(Lt,`RPC '${e}' ${o} timed out`),l(new ce(Q.DEADLINE_EXCEEDED,"Request time out"));break;case rc.HTTP_ERROR:const p=u.getStatus();if(fe(Lt,`RPC '${e}' ${o} failed with status:`,p,"response text:",u.getResponseText()),p>0){let g=u.getResponseJson();Array.isArray(g)&&(g=g[0]);const I=g?.error;if(I&&I.status&&I.message){const y=(function(V){const k=V.toLowerCase().replace(/_/g,"-");return Object.values(Q).indexOf(k)>=0?k:Q.UNKNOWN})(I.status);l(new ce(y,I.message))}else l(new ce(Q.UNKNOWN,"Server responded with status "+u.getStatus()))}else l(new ce(Q.UNAVAILABLE,"Connection failed."));break;default:Re(9055,{l_:e,streamId:o,h_:u.getLastErrorCode(),P_:u.getLastError()})}}finally{fe(Lt,`RPC '${e}' ${o} completed.`)}}));const h=JSON.stringify(r);fe(Lt,`RPC '${e}' ${o} sending request:`,r),u.send(n,"POST",h,s,15)}))}T_(e,n,s){const r=Ph(),i=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=mE(),a=pE(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(l.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(l.useFetchStreams=!0),this.jo(l.initMessageHeaders,n,s),l.encodeInitMessageHeaders=!0;const h=i.join("");fe(Lt,`Creating RPC '${e}' stream ${r}: ${h}`,l);const f=o.createWebChannel(h,l);this.I_(f);let p=!1,g=!1;const I=new wO({Yo:D=>{g?fe(Lt,`Not sending because RPC '${e}' stream ${r} is closed:`,D):(p||(fe(Lt,`Opening RPC '${e}' stream ${r} transport.`),f.open(),p=!0),fe(Lt,`RPC '${e}' stream ${r} sending:`,D),f.send(D))},Zo:()=>f.close()}),y=(D,V,k)=>{D.listen(V,(_=>{try{k(_)}catch(C){setTimeout((()=>{throw C}),0)}}))};return y(f,_o.EventType.OPEN,(()=>{g||(fe(Lt,`RPC '${e}' stream ${r} transport opened.`),I.o_())})),y(f,_o.EventType.CLOSE,(()=>{g||(g=!0,fe(Lt,`RPC '${e}' stream ${r} transport closed`),I.a_(),this.E_(f))})),y(f,_o.EventType.ERROR,(D=>{g||(g=!0,Vr(Lt,`RPC '${e}' stream ${r} transport errored. Name:`,D.name,"Message:",D.message),I.a_(new ce(Q.UNAVAILABLE,"The operation could not be completed")))})),y(f,_o.EventType.MESSAGE,(D=>{if(!g){const V=D.data[0];qe(!!V,16349);const k=V,_=k?.error||k[0]?.error;if(_){fe(Lt,`RPC '${e}' stream ${r} received error:`,_);const C=_.status;let O=(function(b){const v=ft[b];if(v!==void 0)return JE(v)})(C),U=_.message;O===void 0&&(O=Q.INTERNAL,U="Unknown error status: "+C+" with message "+_.message),g=!0,I.a_(new ce(O,U)),f.close()}else fe(Lt,`RPC '${e}' stream ${r} received:`,V),I.u_(V)}})),y(a,dE.STAT_EVENT,(D=>{D.stat===gh.PROXY?fe(Lt,`RPC '${e}' stream ${r} detected buffering proxy`):D.stat===gh.NOPROXY&&fe(Lt,`RPC '${e}' stream ${r} detected no buffering proxy`)})),setTimeout((()=>{I.__()}),0),I}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((n=>n===e))}}function Su(){return typeof document<"u"?document:null}function Il(t){return new SD(t,!0)}class hT{constructor(e,n,s=1e3,r=1.5,i=6e4){this.Mi=e,this.timerId=n,this.d_=s,this.A_=r,this.R_=i,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),s=Math.max(0,Date.now()-this.f_),r=Math.max(0,n-s);r>0&&fe("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,r,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const Vg="PersistentStream";class fT{constructor(e,n,s,r,i,o,a,l){this.Mi=e,this.S_=s,this.b_=r,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new hT(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===Q.RESOURCE_EXHAUSTED?(hs(n.toString()),hs("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===Q.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([s,r])=>{this.D_===n&&this.G_(s,r)}),(s=>{e((()=>{const r=new ce(Q.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(r)}))}))}G_(e,n){const s=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo((()=>{s((()=>this.listener.Xo()))})),this.stream.t_((()=>{s((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((r=>{s((()=>this.z_(r)))})),this.stream.onMessage((r=>{s((()=>++this.F_==1?this.J_(r):this.onNext(r)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return fe(Vg,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget((()=>this.D_===e?n():(fe(Vg,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class IO extends fT{constructor(e,n,s,r,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,s,r,o),this.serializer=i}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=kD(this.serializer,e),s=(function(i){if(!("targetChange"in i))return Ce.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?Ce.min():o.readTime?Fn(o.readTime):Ce.min()})(e);return this.listener.H_(n,s)}Y_(e){const n={};n.database=Sh(this.serializer),n.addTarget=(function(i,o){let a;const l=o.target;if(a=Th(l)?{documents:OD(i,l)}:{query:VD(i,l).ft},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=eT(i,o.resumeToken);const u=Ih(i,o.expectedCount);u!==null&&(a.expectedCount=u)}else if(o.snapshotVersion.compareTo(Ce.min())>0){a.readTime=Bc(i,o.snapshotVersion.toTimestamp());const u=Ih(i,o.expectedCount);u!==null&&(a.expectedCount=u)}return a})(this.serializer,e);const s=MD(this.serializer,e);s&&(n.labels=s),this.q_(n)}Z_(e){const n={};n.database=Sh(this.serializer),n.removeTarget=e,this.q_(n)}}class AO extends fT{constructor(e,n,s,r,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,s,r,o),this.serializer=i}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return qe(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,qe(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){qe(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=DD(e.writeResults,e.commitTime),s=Fn(e.commitTime);return this.listener.na(s,n)}ra(){const e={};e.database=Sh(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((s=>ND(this.serializer,s)))};this.q_(n)}}class RO{}class SO extends RO{constructor(e,n,s,r){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=s,this.serializer=r,this.ia=!1}sa(){if(this.ia)throw new ce(Q.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,s,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([i,o])=>this.connection.Go(e,Ah(n,s),r,i,o))).catch((i=>{throw i.name==="FirebaseError"?(i.code===Q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new ce(Q.UNKNOWN,i.toString())}))}Ho(e,n,s,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([o,a])=>this.connection.Ho(e,Ah(n,s),r,o,a,i))).catch((o=>{throw o.name==="FirebaseError"?(o.code===Q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ce(Q.UNKNOWN,o.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class CO{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(hs(n),this.aa=!1):fe("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const Lr="RemoteStore";class PO{constructor(e,n,s,r,i){this.localStore=e,this.datastore=n,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=i,this.Aa.Oo((o=>{s.enqueueAndForget((async()=>{$r(this)&&(fe(Lr,"Restarting streams for network reachability change."),await(async function(l){const u=Pe(l);u.Ea.add(4),await ga(u),u.Ra.set("Unknown"),u.Ea.delete(4),await Al(u)})(this))}))})),this.Ra=new CO(s,r)}}async function Al(t){if($r(t))for(const e of t.da)await e(!0)}async function ga(t){for(const e of t.da)await e(!1)}function dT(t,e){const n=Pe(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),Gf(n)?Wf(n):qi(n).O_()&&qf(n,e))}function jf(t,e){const n=Pe(t),s=qi(n);n.Ia.delete(e),s.O_()&&pT(n,e),n.Ia.size===0&&(s.O_()?s.L_():$r(n)&&n.Ra.set("Unknown"))}function qf(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ce.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}qi(t).Y_(e)}function pT(t,e){t.Va.Ue(e),qi(t).Z_(e)}function Wf(t){t.Va=new bD({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),qi(t).start(),t.Ra.ua()}function Gf(t){return $r(t)&&!qi(t).x_()&&t.Ia.size>0}function $r(t){return Pe(t).Ea.size===0}function mT(t){t.Va=void 0}async function kO(t){t.Ra.set("Online")}async function NO(t){t.Ia.forEach(((e,n)=>{qf(t,e)}))}async function DO(t,e){mT(t),Gf(t)?(t.Ra.ha(e),Wf(t)):t.Ra.set("Unknown")}async function OO(t,e,n){if(t.Ra.set("Online"),e instanceof ZE&&e.state===2&&e.cause)try{await(async function(r,i){const o=i.cause;for(const a of i.targetIds)r.Ia.has(a)&&(await r.remoteSyncer.rejectListen(a,o),r.Ia.delete(a),r.Va.removeTarget(a))})(t,e)}catch(s){fe(Lr,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await Hc(t,s)}else if(e instanceof cc?t.Va.Ze(e):e instanceof XE?t.Va.st(e):t.Va.tt(e),!n.isEqual(Ce.min()))try{const s=await uT(t.localStore);n.compareTo(s)>=0&&await(function(i,o){const a=i.Va.Tt(o);return a.targetChanges.forEach(((l,u)=>{if(l.resumeToken.approximateByteSize()>0){const h=i.Ia.get(u);h&&i.Ia.set(u,h.withResumeToken(l.resumeToken,o))}})),a.targetMismatches.forEach(((l,u)=>{const h=i.Ia.get(l);if(!h)return;i.Ia.set(l,h.withResumeToken(Pt.EMPTY_BYTE_STRING,h.snapshotVersion)),pT(i,l);const f=new xs(h.target,l,u,h.sequenceNumber);qf(i,f)})),i.remoteSyncer.applyRemoteEvent(a)})(t,n)}catch(s){fe(Lr,"Failed to raise snapshot:",s),await Hc(t,s)}}async function Hc(t,e,n){if(!Hi(e))throw e;t.Ea.add(1),await ga(t),t.Ra.set("Offline"),n||(n=()=>uT(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{fe(Lr,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await Al(t)}))}function gT(t,e){return e().catch((n=>Hc(t,n,e)))}async function Rl(t){const e=Pe(t),n=er(e);let s=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Cf;for(;VO(e);)try{const r=await mO(e.localStore,s);if(r===null){e.Ta.length===0&&n.L_();break}s=r.batchId,LO(e,r)}catch(r){await Hc(e,r)}_T(e)&&yT(e)}function VO(t){return $r(t)&&t.Ta.length<10}function LO(t,e){t.Ta.push(e);const n=er(t);n.O_()&&n.X_&&n.ea(e.mutations)}function _T(t){return $r(t)&&!er(t).x_()&&t.Ta.length>0}function yT(t){er(t).start()}async function MO(t){er(t).ra()}async function xO(t){const e=er(t);for(const n of t.Ta)e.ea(n.mutations)}async function FO(t,e,n){const s=t.Ta.shift(),r=Mf.from(s,e,n);await gT(t,(()=>t.remoteSyncer.applySuccessfulWrite(r))),await Rl(t)}async function UO(t,e){e&&er(t).X_&&await(async function(s,r){if((function(o){return ED(o)&&o!==Q.ABORTED})(r.code)){const i=s.Ta.shift();er(s).B_(),await gT(s,(()=>s.remoteSyncer.rejectFailedWrite(i.batchId,r))),await Rl(s)}})(t,e),_T(t)&&yT(t)}async function Lg(t,e){const n=Pe(t);n.asyncQueue.verifyOperationInProgress(),fe(Lr,"RemoteStore received new credentials");const s=$r(n);n.Ea.add(3),await ga(n),s&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Al(n)}async function BO(t,e){const n=Pe(t);e?(n.Ea.delete(2),await Al(n)):e||(n.Ea.add(2),await ga(n),n.Ra.set("Unknown"))}function qi(t){return t.ma||(t.ma=(function(n,s,r){const i=Pe(n);return i.sa(),new IO(s,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)})(t.datastore,t.asyncQueue,{Xo:kO.bind(null,t),t_:NO.bind(null,t),r_:DO.bind(null,t),H_:OO.bind(null,t)}),t.da.push((async e=>{e?(t.ma.B_(),Gf(t)?Wf(t):t.Ra.set("Unknown")):(await t.ma.stop(),mT(t))}))),t.ma}function er(t){return t.fa||(t.fa=(function(n,s,r){const i=Pe(n);return i.sa(),new AO(s,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)})(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:MO.bind(null,t),r_:UO.bind(null,t),ta:xO.bind(null,t),na:FO.bind(null,t)}),t.da.push((async e=>{e?(t.fa.B_(),await Rl(t)):(await t.fa.stop(),t.Ta.length>0&&(fe(Lr,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))}))),t.fa}class zf{constructor(e,n,s,r,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=s,this.op=r,this.removalCallback=i,this.deferred=new rs,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((o=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,s,r,i){const o=Date.now()+s,a=new zf(e,n,o,r,i);return a.start(s),a}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ce(Q.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Kf(t,e){if(hs("AsyncQueue",`${e}: ${t}`),Hi(t))return new ce(Q.UNAVAILABLE,`${e}: ${t}`);throw t}class mi{static emptySet(e){return new mi(e.comparator)}constructor(e){this.comparator=e?(n,s)=>e(n,s)||_e.comparator(n.key,s.key):(n,s)=>_e.comparator(n.key,s.key),this.keyedMap=yo(),this.sortedSet=new tt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,s)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof mi)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;n.hasNext();){const r=n.getNext().key,i=s.getNext().key;if(!r.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const s=new mi;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=n,s}}class Mg{constructor(){this.ga=new tt(_e.comparator)}track(e){const n=e.doc.key,s=this.ga.get(n);s?e.type!==0&&s.type===3?this.ga=this.ga.insert(n,e):e.type===3&&s.type!==1?this.ga=this.ga.insert(n,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.ga=this.ga.remove(n):e.type===1&&s.type===2?this.ga=this.ga.insert(n,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):Re(63341,{Rt:e,pa:s}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,s)=>{e.push(s)})),e}}class Ni{constructor(e,n,s,r,i,o,a,l,u){this.query=e,this.docs=n,this.oldDocs=s,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=u}static fromInitialDocuments(e,n,s,r,i){const o=[];return n.forEach((a=>{o.push({type:0,doc:a})})),new Ni(e,n,mi.emptySet(n),o,s,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&vl(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,s=e.docChanges;if(n.length!==s.length)return!1;for(let r=0;r<n.length;r++)if(n[r].type!==s[r].type||!n[r].doc.isEqual(s[r].doc))return!1;return!0}}class $O{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class HO{constructor(){this.queries=xg(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,s){const r=Pe(n),i=r.queries;r.queries=xg(),i.forEach(((o,a)=>{for(const l of a.Sa)l.onError(s)}))})(this,new ce(Q.ABORTED,"Firestore shutting down"))}}function xg(){return new Br((t=>UE(t)),vl)}async function vT(t,e){const n=Pe(t);let s=3;const r=e.query;let i=n.queries.get(r);i?!i.ba()&&e.Da()&&(s=2):(i=new $O,s=e.Da()?0:1);try{switch(s){case 0:i.wa=await n.onListen(r,!0);break;case 1:i.wa=await n.onListen(r,!1);break;case 2:await n.onFirstRemoteStoreListen(r)}}catch(o){const a=Kf(o,`Initialization of query '${Xr(e.query)}' failed`);return void e.onError(a)}n.queries.set(r,i),i.Sa.push(e),e.va(n.onlineState),i.wa&&e.Fa(i.wa)&&Qf(n)}async function ET(t,e){const n=Pe(t),s=e.query;let r=3;const i=n.queries.get(s);if(i){const o=i.Sa.indexOf(e);o>=0&&(i.Sa.splice(o,1),i.Sa.length===0?r=e.Da()?0:1:!i.ba()&&e.Da()&&(r=2))}switch(r){case 0:return n.queries.delete(s),n.onUnlisten(s,!0);case 1:return n.queries.delete(s),n.onUnlisten(s,!1);case 2:return n.onLastRemoteStoreUnlisten(s);default:return}}function jO(t,e){const n=Pe(t);let s=!1;for(const r of e){const i=r.query,o=n.queries.get(i);if(o){for(const a of o.Sa)a.Fa(r)&&(s=!0);o.wa=r}}s&&Qf(n)}function qO(t,e,n){const s=Pe(t),r=s.queries.get(e);if(r)for(const i of r.Sa)i.onError(n);s.queries.delete(e)}function Qf(t){t.Ca.forEach((e=>{e.next()}))}var kh,Fg;(Fg=kh||(kh={})).Ma="default",Fg.Cache="cache";class TT{constructor(e,n,s){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(e){if(!this.options.includeMetadataChanges){const s=[];for(const r of e.docChanges)r.type!==3&&s.push(r);e=new Ni(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const s=n!=="Offline";return(!this.options.qa||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Ni.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==kh.Cache}}class wT{constructor(e){this.key=e}}class bT{constructor(e){this.key=e}}class WO{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Me(),this.mutatedKeys=Me(),this.eu=BE(e),this.tu=new mi(this.eu)}get nu(){return this.Ya}ru(e,n){const s=n?n.iu:new Mg,r=n?n.tu:this.tu;let i=n?n.mutatedKeys:this.mutatedKeys,o=r,a=!1;const l=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,u=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal(((h,f)=>{const p=r.get(h),g=El(this.query,f)?f:null,I=!!p&&this.mutatedKeys.has(p.key),y=!!g&&(g.hasLocalMutations||this.mutatedKeys.has(g.key)&&g.hasCommittedMutations);let D=!1;p&&g?p.data.isEqual(g.data)?I!==y&&(s.track({type:3,doc:g}),D=!0):this.su(p,g)||(s.track({type:2,doc:g}),D=!0,(l&&this.eu(g,l)>0||u&&this.eu(g,u)<0)&&(a=!0)):!p&&g?(s.track({type:0,doc:g}),D=!0):p&&!g&&(s.track({type:1,doc:p}),D=!0,(l||u)&&(a=!0)),D&&(g?(o=o.add(g),i=y?i.add(h):i.delete(h)):(o=o.delete(h),i=i.delete(h)))})),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),i=i.delete(h.key),s.track({type:1,doc:h})}return{tu:o,iu:s,Cs:a,mutatedKeys:i}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,s,r){const i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort(((h,f)=>(function(g,I){const y=D=>{switch(D){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Re(20277,{Rt:D})}};return y(g)-y(I)})(h.type,f.type)||this.eu(h.doc,f.doc))),this.ou(s),r=r??!1;const a=n&&!r?this._u():[],l=this.Xa.size===0&&this.current&&!r?1:0,u=l!==this.Za;return this.Za=l,o.length!==0||u?{snapshot:new Ni(this.query,e.tu,i,o,e.mutatedKeys,l===0,u,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:a}:{au:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Mg,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Ya=this.Ya.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ya=this.Ya.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Me(),this.tu.forEach((s=>{this.uu(s.key)&&(this.Xa=this.Xa.add(s.key))}));const n=[];return e.forEach((s=>{this.Xa.has(s)||n.push(new bT(s))})),this.Xa.forEach((s=>{e.has(s)||n.push(new wT(s))})),n}cu(e){this.Ya=e.Qs,this.Xa=Me();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Ni.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Yf="SyncEngine";class GO{constructor(e,n,s){this.query=e,this.targetId=n,this.view=s}}class zO{constructor(e){this.key=e,this.hu=!1}}class KO{constructor(e,n,s,r,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=s,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new Br((a=>UE(a)),vl),this.Iu=new Map,this.Eu=new Set,this.du=new tt(_e.comparator),this.Au=new Map,this.Ru=new Uf,this.Vu={},this.mu=new Map,this.fu=ki.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function QO(t,e,n=!0){const s=PT(t);let r;const i=s.Tu.get(e);return i?(s.sharedClientState.addLocalQueryTarget(i.targetId),r=i.view.lu()):r=await IT(s,e,n,!0),r}async function YO(t,e){const n=PT(t);await IT(n,e,!0,!1)}async function IT(t,e,n,s){const r=await gO(t.localStore,xn(e)),i=r.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let a;return s&&(a=await JO(t,e,i,o==="current",r.resumeToken)),t.isPrimaryClient&&n&&dT(t.remoteStore,r),a}async function JO(t,e,n,s,r){t.pu=(f,p,g)=>(async function(y,D,V,k){let _=D.view.ru(V);_.Cs&&(_=await kg(y.localStore,D.query,!1).then((({documents:E})=>D.view.ru(E,_))));const C=k&&k.targetChanges.get(D.targetId),O=k&&k.targetMismatches.get(D.targetId)!=null,U=D.view.applyChanges(_,y.isPrimaryClient,C,O);return Bg(y,D.targetId,U.au),U.snapshot})(t,f,p,g);const i=await kg(t.localStore,e,!0),o=new WO(e,i.Qs),a=o.ru(i.documents),l=ma.createSynthesizedTargetChangeForCurrentChange(n,s&&t.onlineState!=="Offline",r),u=o.applyChanges(a,t.isPrimaryClient,l);Bg(t,n,u.au);const h=new GO(e,n,o);return t.Tu.set(e,h),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),u.snapshot}async function XO(t,e,n){const s=Pe(t),r=s.Tu.get(e),i=s.Iu.get(r.targetId);if(i.length>1)return s.Iu.set(r.targetId,i.filter((o=>!vl(o,e)))),void s.Tu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(r.targetId),s.sharedClientState.isActiveQueryTarget(r.targetId)||await Ch(s.localStore,r.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(r.targetId),n&&jf(s.remoteStore,r.targetId),Nh(s,r.targetId)})).catch($i)):(Nh(s,r.targetId),await Ch(s.localStore,r.targetId,!0))}async function ZO(t,e){const n=Pe(t),s=n.Tu.get(e),r=n.Iu.get(s.targetId);n.isPrimaryClient&&r.length===1&&(n.sharedClientState.removeLocalQueryTarget(s.targetId),jf(n.remoteStore,s.targetId))}async function eV(t,e,n){const s=aV(t);try{const r=await(function(o,a){const l=Pe(o),u=Je.now(),h=a.reduce(((g,I)=>g.add(I.key)),Me());let f,p;return l.persistence.runTransaction("Locally write mutations","readwrite",(g=>{let I=fs(),y=Me();return l.Ns.getEntries(g,h).next((D=>{I=D,I.forEach(((V,k)=>{k.isValidDocument()||(y=y.add(V))}))})).next((()=>l.localDocuments.getOverlayedDocuments(g,I))).next((D=>{f=D;const V=[];for(const k of a){const _=mD(k,f.get(k.key).overlayedDocument);_!=null&&V.push(new rr(k.key,_,NE(_.value.mapValue),yn.exists(!0)))}return l.mutationQueue.addMutationBatch(g,u,V,a)})).next((D=>{p=D;const V=D.applyToLocalDocumentSet(f,y);return l.documentOverlayCache.saveOverlays(g,D.batchId,V)}))})).then((()=>({batchId:p.batchId,changes:HE(f)})))})(s.localStore,e);s.sharedClientState.addPendingMutation(r.batchId),(function(o,a,l){let u=o.Vu[o.currentUser.toKey()];u||(u=new tt(Le)),u=u.insert(a,l),o.Vu[o.currentUser.toKey()]=u})(s,r.batchId,n),await _a(s,r.changes),await Rl(s.remoteStore)}catch(r){const i=Kf(r,"Failed to persist write");n.reject(i)}}async function AT(t,e){const n=Pe(t);try{const s=await dO(n.localStore,e);e.targetChanges.forEach(((r,i)=>{const o=n.Au.get(i);o&&(qe(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1,22616),r.addedDocuments.size>0?o.hu=!0:r.modifiedDocuments.size>0?qe(o.hu,14607):r.removedDocuments.size>0&&(qe(o.hu,42227),o.hu=!1))})),await _a(n,s,e)}catch(s){await $i(s)}}function Ug(t,e,n){const s=Pe(t);if(s.isPrimaryClient&&n===0||!s.isPrimaryClient&&n===1){const r=[];s.Tu.forEach(((i,o)=>{const a=o.view.va(e);a.snapshot&&r.push(a.snapshot)})),(function(o,a){const l=Pe(o);l.onlineState=a;let u=!1;l.queries.forEach(((h,f)=>{for(const p of f.Sa)p.va(a)&&(u=!0)})),u&&Qf(l)})(s.eventManager,e),r.length&&s.Pu.H_(r),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function tV(t,e,n){const s=Pe(t);s.sharedClientState.updateQueryState(e,"rejected",n);const r=s.Au.get(e),i=r&&r.key;if(i){let o=new tt(_e.comparator);o=o.insert(i,Ut.newNoDocument(i,Ce.min()));const a=Me().add(i),l=new bl(Ce.min(),new Map,new tt(Le),o,a);await AT(s,l),s.du=s.du.remove(i),s.Au.delete(e),Jf(s)}else await Ch(s.localStore,e,!1).then((()=>Nh(s,e,n))).catch($i)}async function nV(t,e){const n=Pe(t),s=e.batch.batchId;try{const r=await fO(n.localStore,e);ST(n,s,null),RT(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await _a(n,r)}catch(r){await $i(r)}}async function sV(t,e,n){const s=Pe(t);try{const r=await(function(o,a){const l=Pe(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",(u=>{let h;return l.mutationQueue.lookupMutationBatch(u,a).next((f=>(qe(f!==null,37113),h=f.keys(),l.mutationQueue.removeMutationBatch(u,f)))).next((()=>l.mutationQueue.performConsistencyCheck(u))).next((()=>l.documentOverlayCache.removeOverlaysForBatchId(u,h,a))).next((()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,h))).next((()=>l.localDocuments.getDocuments(u,h)))}))})(s.localStore,e);ST(s,e,n),RT(s,e),s.sharedClientState.updateMutationState(e,"rejected",n),await _a(s,r)}catch(r){await $i(r)}}function RT(t,e){(t.mu.get(e)||[]).forEach((n=>{n.resolve()})),t.mu.delete(e)}function ST(t,e,n){const s=Pe(t);let r=s.Vu[s.currentUser.toKey()];if(r){const i=r.get(e);i&&(n?i.reject(n):i.resolve(),r=r.remove(e)),s.Vu[s.currentUser.toKey()]=r}}function Nh(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const s of t.Iu.get(e))t.Tu.delete(s),n&&t.Pu.yu(s,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach((s=>{t.Ru.containsKey(s)||CT(t,s)}))}function CT(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(jf(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),Jf(t))}function Bg(t,e,n){for(const s of n)s instanceof wT?(t.Ru.addReference(s.key,e),rV(t,s)):s instanceof bT?(fe(Yf,"Document no longer in limbo: "+s.key),t.Ru.removeReference(s.key,e),t.Ru.containsKey(s.key)||CT(t,s.key)):Re(19791,{wu:s})}function rV(t,e){const n=e.key,s=n.path.canonicalString();t.du.get(n)||t.Eu.has(s)||(fe(Yf,"New document in limbo: "+n),t.Eu.add(s),Jf(t))}function Jf(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new _e(Ye.fromString(e)),s=t.fu.next();t.Au.set(s,new zO(n)),t.du=t.du.insert(n,s),dT(t.remoteStore,new xs(xn(Of(n.path)),s,"TargetPurposeLimboResolution",gl.ce))}}async function _a(t,e,n){const s=Pe(t),r=[],i=[],o=[];s.Tu.isEmpty()||(s.Tu.forEach(((a,l)=>{o.push(s.pu(l,e,n).then((u=>{if((u||n)&&s.isPrimaryClient){const h=u?!u.fromCache:n?.targetChanges.get(l.targetId)?.current;s.sharedClientState.updateQueryState(l.targetId,h?"current":"not-current")}if(u){r.push(u);const h=$f.As(l.targetId,u);i.push(h)}})))})),await Promise.all(o),s.Pu.H_(r),await(async function(l,u){const h=Pe(l);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",(f=>X.forEach(u,(p=>X.forEach(p.Es,(g=>h.persistence.referenceDelegate.addReference(f,p.targetId,g))).next((()=>X.forEach(p.ds,(g=>h.persistence.referenceDelegate.removeReference(f,p.targetId,g)))))))))}catch(f){if(!Hi(f))throw f;fe(Hf,"Failed to update sequence numbers: "+f)}for(const f of u){const p=f.targetId;if(!f.fromCache){const g=h.Ms.get(p),I=g.snapshotVersion,y=g.withLastLimboFreeSnapshotVersion(I);h.Ms=h.Ms.insert(p,y)}}})(s.localStore,i))}async function iV(t,e){const n=Pe(t);if(!n.currentUser.isEqual(e)){fe(Yf,"User change. New user:",e.toKey());const s=await lT(n.localStore,e);n.currentUser=e,(function(i,o){i.mu.forEach((a=>{a.forEach((l=>{l.reject(new ce(Q.CANCELLED,o))}))})),i.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await _a(n,s.Ls)}}function oV(t,e){const n=Pe(t),s=n.Au.get(e);if(s&&s.hu)return Me().add(s.key);{let r=Me();const i=n.Iu.get(e);if(!i)return r;for(const o of i){const a=n.Tu.get(o);r=r.unionWith(a.view.nu)}return r}}function PT(t){const e=Pe(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=AT.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=oV.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=tV.bind(null,e),e.Pu.H_=jO.bind(null,e.eventManager),e.Pu.yu=qO.bind(null,e.eventManager),e}function aV(t){const e=Pe(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=nV.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=sV.bind(null,e),e}class jc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Il(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return hO(this.persistence,new cO,e.initialUser,this.serializer)}Cu(e){return new cT(Bf.mi,this.serializer)}Du(e){return new yO}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}jc.provider={build:()=>new jc};class cV extends jc{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){qe(this.persistence.referenceDelegate instanceof $c,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new zD(s,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Qt.withCacheSize(this.cacheSizeBytes):Qt.DEFAULT;return new cT((s=>$c.mi(s,n)),this.serializer)}}class Dh{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>Ug(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=iV.bind(null,this.syncEngine),await BO(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new HO})()}createDatastore(e){const n=Il(e.databaseInfo.databaseId),s=(function(i){return new bO(i)})(e.databaseInfo);return(function(i,o,a,l){return new SO(i,o,a,l)})(e.authCredentials,e.appCheckCredentials,s,n)}createRemoteStore(e){return(function(s,r,i,o,a){return new PO(s,r,i,o,a)})(this.localStore,this.datastore,e.asyncQueue,(n=>Ug(this.syncEngine,n,0)),(function(){return Og.v()?new Og:new vO})())}createSyncEngine(e,n){return(function(r,i,o,a,l,u,h){const f=new KO(r,i,o,a,l,u);return h&&(f.gu=!0),f})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){await(async function(n){const s=Pe(n);fe(Lr,"RemoteStore shutting down."),s.Ea.add(5),await ga(s),s.Aa.shutdown(),s.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Dh.provider={build:()=>new Dh};class kT{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):hs("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}const tr="FirestoreClient";class lV{constructor(e,n,s,r,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=s,this.databaseInfo=r,this.user=xt.UNAUTHENTICATED,this.clientId=pl.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(s,(async o=>{fe(tr,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(s,(o=>(fe(tr,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new rs;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const s=Kf(n,"Failed to shutdown persistence");e.reject(s)}})),e.promise}}async function Cu(t,e){t.asyncQueue.verifyOperationInProgress(),fe(tr,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let s=n.initialUser;t.setCredentialChangeListener((async r=>{s.isEqual(r)||(await lT(e.localStore,r),s=r)})),e.persistence.setDatabaseDeletedListener((()=>t.terminate())),t._offlineComponents=e}async function $g(t,e){t.asyncQueue.verifyOperationInProgress();const n=await uV(t);fe(tr,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener((s=>Lg(e.remoteStore,s))),t.setAppCheckTokenChangeListener(((s,r)=>Lg(e.remoteStore,r))),t._onlineComponents=e}async function uV(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){fe(tr,"Using user provided OfflineComponentProvider");try{await Cu(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(r){return r.name==="FirebaseError"?r.code===Q.FAILED_PRECONDITION||r.code===Q.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11})(n))throw n;Vr("Error using user provided cache. Falling back to memory cache: "+n),await Cu(t,new jc)}}else fe(tr,"Using default OfflineComponentProvider"),await Cu(t,new cV(void 0));return t._offlineComponents}async function NT(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(fe(tr,"Using user provided OnlineComponentProvider"),await $g(t,t._uninitializedComponentsProvider._online)):(fe(tr,"Using default OnlineComponentProvider"),await $g(t,new Dh))),t._onlineComponents}function hV(t){return NT(t).then((e=>e.syncEngine))}async function DT(t){const e=await NT(t),n=e.eventManager;return n.onListen=QO.bind(null,e.syncEngine),n.onUnlisten=XO.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=YO.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=ZO.bind(null,e.syncEngine),n}function fV(t,e,n={}){const s=new rs;return t.asyncQueue.enqueueAndForget((async()=>(function(i,o,a,l,u){const h=new kT({next:p=>{h.Nu(),o.enqueueAndForget((()=>ET(i,f)));const g=p.docs.has(a);!g&&p.fromCache?u.reject(new ce(Q.UNAVAILABLE,"Failed to get document because the client is offline.")):g&&p.fromCache&&l&&l.source==="server"?u.reject(new ce(Q.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(p)},error:p=>u.reject(p)}),f=new TT(Of(a.path),h,{includeMetadataChanges:!0,qa:!0});return vT(i,f)})(await DT(t),t.asyncQueue,e,n,s))),s.promise}function dV(t,e,n={}){const s=new rs;return t.asyncQueue.enqueueAndForget((async()=>(function(i,o,a,l,u){const h=new kT({next:p=>{h.Nu(),o.enqueueAndForget((()=>ET(i,f))),p.fromCache&&l.source==="server"?u.reject(new ce(Q.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(p)},error:p=>u.reject(p)}),f=new TT(a,h,{includeMetadataChanges:!0,qa:!0});return vT(i,f)})(await DT(t),t.asyncQueue,e,n,s))),s.promise}function OT(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}const Hg=new Map;const VT="firestore.googleapis.com",jg=!0;class qg{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ce(Q.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=VT,this.ssl=jg}else this.host=e.host,this.ssl=e.ssl??jg;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=aT;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<WD)throw new ce(Q.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}EE("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=OT(e.experimentalLongPollingOptions??{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new ce(Q.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new ce(Q.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new ce(Q.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(s,r){return s.timeoutSeconds===r.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Sl{constructor(e,n,s,r){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=s,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new qg({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ce(Q.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ce(Q.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new qg(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(s){if(!s)return new yE;switch(s.type){case"firstParty":return new bN(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new ce(Q.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const s=Hg.get(n);s&&(fe("ComponentProvider","Removing Datastore"),Hg.delete(n),s.terminate())})(this),Promise.resolve()}}function LT(t,e,n,s={}){t=Rn(t,Sl);const r=xi(e),i=t._getSettings(),o={...i,emulatorOptions:t._getEmulatorOptions()},a=`${e}:${n}`;r&&(wv(`https://${a}`),bv("Firestore",!0)),i.host!==VT&&i.host!==a&&Vr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const l={...i,host:a,ssl:r,emulatorOptions:s};if(!Pr(l,o)&&(t._setSettings(l),s.mockUserToken)){let u,h;if(typeof s.mockUserToken=="string")u=s.mockUserToken,h=xt.MOCK_USER;else{u=CC(s.mockUserToken,t._app?.options.projectId);const f=s.mockUserToken.sub||s.mockUserToken.user_id;if(!f)throw new ce(Q.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new xt(f)}t._authCredentials=new EN(new _E(u,h))}}class ir{constructor(e,n,s){this.converter=n,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new ir(this.firestore,e,this._query)}}class ot{constructor(e,n,s){this.converter=n,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new is(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ot(this.firestore,e,this._key)}toJSON(){return{type:ot._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,s){if(da(n,ot._jsonSchema))return new ot(e,s||null,new _e(Ye.fromString(n.referencePath)))}}ot._jsonSchemaVersion="firestore/documentReference/1.0",ot._jsonSchema={type:gt("string",ot._jsonSchemaVersion),referencePath:gt("string")};class is extends ir{constructor(e,n,s){super(e,n,Of(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ot(this.firestore,null,new _e(e))}withConverter(e){return new is(this.firestore,e,this._path)}}function gi(t,e,...n){if(t=yt(t),vE("collection","path",e),t instanceof Sl){const s=Ye.fromString(e,...n);return sg(s),new is(t,null,s)}{if(!(t instanceof ot||t instanceof is))throw new ce(Q.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=t._path.child(Ye.fromString(e,...n));return sg(s),new is(t.firestore,null,s)}}function Xt(t,e,...n){if(t=yt(t),arguments.length===1&&(e=pl.newId()),vE("doc","path",e),t instanceof Sl){const s=Ye.fromString(e,...n);return ng(s),new ot(t,null,new _e(s))}{if(!(t instanceof ot||t instanceof is))throw new ce(Q.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=t._path.child(Ye.fromString(e,...n));return ng(s),new ot(t.firestore,t instanceof is?t.converter:null,new _e(s))}}const Wg="AsyncQueue";class Gg{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new hT(this,"async_queue_retry"),this._c=()=>{const s=Su();s&&fe(Wg,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=e;const n=Su();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=Su();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new rs;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Hi(e))throw e;fe(Wg,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((s=>{throw this.nc=s,this.rc=!1,hs("INTERNAL UNHANDLED ERROR: ",zg(s)),s})).then((s=>(this.rc=!1,s))))));return this.ac=n,n}enqueueAfterDelay(e,n,s){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const r=zf.createAndSchedule(this,e,n,s,(i=>this.hc(i)));return this.tc.push(r),r}uc(){this.nc&&Re(47125,{Pc:zg(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,s)=>n.targetTimeMs-s.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function zg(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class Hr extends Sl{constructor(e,n,s,r){super(e,n,s,r),this.type="firestore",this._queue=new Gg,this._persistenceKey=r?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Gg(e),this._firestoreClient=void 0,await e}}}function MT(t,e){const n=typeof t=="object"?t:Sv(),s=typeof t=="string"?t:Mc,r=yf(n,"firestore").getImmediate({identifier:s});if(!r._initialized){const i=RC("firestore");i&&LT(r,...i)}return r}function Cl(t){if(t._terminated)throw new ce(Q.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||pV(t),t._firestoreClient}function pV(t){const e=t._freezeSettings(),n=(function(r,i,o,a){return new UN(r,i,o,a.host,a.ssl,a.experimentalForceLongPolling,a.experimentalAutoDetectLongPolling,OT(a.experimentalLongPollingOptions),a.useFetchStreams,a.isUsingEmulator)})(t._databaseId,t._app?.options.appId||"",t._persistenceKey,e);t._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new lV(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&(function(r){const i=r?._online.build();return{_offline:r?._offline.build(i),_online:i}})(t._componentsProvider))}class sn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new sn(Pt.fromBase64String(e))}catch(n){throw new ce(Q.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new sn(Pt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:sn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(da(e,sn._jsonSchema))return sn.fromBase64String(e.bytes)}}sn._jsonSchemaVersion="firestore/bytes/1.0",sn._jsonSchema={type:gt("string",sn._jsonSchemaVersion),bytes:gt("string")};class ya{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new ce(Q.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new St(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class va{constructor(e){this._methodName=e}}class vn{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ce(Q.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ce(Q.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Le(this._lat,e._lat)||Le(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:vn._jsonSchemaVersion}}static fromJSON(e){if(da(e,vn._jsonSchema))return new vn(e.latitude,e.longitude)}}vn._jsonSchemaVersion="firestore/geoPoint/1.0",vn._jsonSchema={type:gt("string",vn._jsonSchemaVersion),latitude:gt("number"),longitude:gt("number")};class En{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(s,r){if(s.length!==r.length)return!1;for(let i=0;i<s.length;++i)if(s[i]!==r[i])return!1;return!0})(this._values,e._values)}toJSON(){return{type:En._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(da(e,En._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new En(e.vectorValues);throw new ce(Q.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}En._jsonSchemaVersion="firestore/vectorValue/1.0",En._jsonSchema={type:gt("string",En._jsonSchemaVersion),vectorValues:gt("object")};const mV=/^__.*__$/;class gV{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return this.fieldMask!==null?new rr(e,this.data,this.fieldMask,n,this.fieldTransforms):new pa(e,this.data,n,this.fieldTransforms)}}class xT{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return new rr(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function FT(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Re(40011,{Ac:t})}}class Xf{constructor(e,n,s,r,i,o){this.settings=e,this.databaseId=n,this.serializer=s,this.ignoreUndefinedProperties=r,i===void 0&&this.Rc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Xf({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const n=this.path?.child(e),s=this.Vc({path:n,fc:!1});return s.gc(e),s}yc(e){const n=this.path?.child(e),s=this.Vc({path:n,fc:!1});return s.Rc(),s}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return qc(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(FT(this.Ac)&&mV.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class _V{constructor(e,n,s){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=s||Il(e)}Cc(e,n,s,r=!1){return new Xf({Ac:e,methodName:n,Dc:s,path:St.emptyPath(),fc:!1,bc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Zf(t){const e=t._freezeSettings(),n=Il(t._databaseId);return new _V(t._databaseId,!!e.ignoreUndefinedProperties,n)}function yV(t,e,n,s,r,i={}){const o=t.Cc(i.merge||i.mergeFields?2:0,e,n,r);td("Data must be an object, but it was:",o,s);const a=UT(s,o);let l,u;if(i.merge)l=new rn(o.fieldMask),u=o.fieldTransforms;else if(i.mergeFields){const h=[];for(const f of i.mergeFields){const p=Oh(e,f,n);if(!o.contains(p))throw new ce(Q.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);$T(h,p)||h.push(p)}l=new rn(h),u=o.fieldTransforms.filter((f=>l.covers(f.field)))}else l=null,u=o.fieldTransforms;return new gV(new Jt(a),l,u)}class Pl extends va{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Pl}}class ed extends va{_toFieldTransform(e){return new hD(e.path,new Yo)}isEqual(e){return e instanceof ed}}function vV(t,e,n,s){const r=t.Cc(1,e,n);td("Data must be an object, but it was:",r,s);const i=[],o=Jt.empty();sr(s,((l,u)=>{const h=nd(e,l,n);u=yt(u);const f=r.yc(h);if(u instanceof Pl)i.push(h);else{const p=Ea(u,f);p!=null&&(i.push(h),o.set(h,p))}}));const a=new rn(i);return new xT(o,a,r.fieldTransforms)}function EV(t,e,n,s,r,i){const o=t.Cc(1,e,n),a=[Oh(e,s,n)],l=[r];if(i.length%2!=0)throw new ce(Q.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let p=0;p<i.length;p+=2)a.push(Oh(e,i[p])),l.push(i[p+1]);const u=[],h=Jt.empty();for(let p=a.length-1;p>=0;--p)if(!$T(u,a[p])){const g=a[p];let I=l[p];I=yt(I);const y=o.yc(g);if(I instanceof Pl)u.push(g);else{const D=Ea(I,y);D!=null&&(u.push(g),h.set(g,D))}}const f=new rn(u);return new xT(h,f,o.fieldTransforms)}function TV(t,e,n,s=!1){return Ea(n,t.Cc(s?4:3,e))}function Ea(t,e){if(BT(t=yt(t)))return td("Unsupported field value:",e,t),UT(t,e);if(t instanceof va)return(function(s,r){if(!FT(r.Ac))throw r.Sc(`${s._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Sc(`${s._methodName}() is not currently supported inside arrays`);const i=s._toFieldTransform(r);i&&r.fieldTransforms.push(i)})(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(s,r){const i=[];let o=0;for(const a of s){let l=Ea(a,r.wc(o));l==null&&(l={nullValue:"NULL_VALUE"}),i.push(l),o++}return{arrayValue:{values:i}}})(t,e)}return(function(s,r){if((s=yt(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return cD(r.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const i=Je.fromDate(s);return{timestampValue:Bc(r.serializer,i)}}if(s instanceof Je){const i=new Je(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:Bc(r.serializer,i)}}if(s instanceof vn)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof sn)return{bytesValue:eT(r.serializer,s._byteString)};if(s instanceof ot){const i=r.databaseId,o=s.firestore._databaseId;if(!o.isEqual(i))throw r.Sc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Ff(s.firestore._databaseId||r.databaseId,s._key.path)}}if(s instanceof En)return(function(o,a){return{mapValue:{fields:{[PE]:{stringValue:kE},[xc]:{arrayValue:{values:o.toArray().map((u=>{if(typeof u!="number")throw a.Sc("VectorValues must only contain numeric values.");return Vf(a.serializer,u)}))}}}}}})(s,r);throw r.Sc(`Unsupported field value: ${ml(s)}`)})(t,e)}function UT(t,e){const n={};return bE(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):sr(t,((s,r)=>{const i=Ea(r,e.mc(s));i!=null&&(n[s]=i)})),{mapValue:{fields:n}}}function BT(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Je||t instanceof vn||t instanceof sn||t instanceof ot||t instanceof va||t instanceof En)}function td(t,e,n){if(!BT(n)||!TE(n)){const s=ml(n);throw s==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+s)}}function Oh(t,e,n){if((e=yt(e))instanceof ya)return e._internalPath;if(typeof e=="string")return nd(t,e);throw qc("Field path arguments must be of type string or ",t,!1,void 0,n)}const wV=new RegExp("[~\\*/\\[\\]]");function nd(t,e,n){if(e.search(wV)>=0)throw qc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new ya(...e.split("."))._internalPath}catch{throw qc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function qc(t,e,n,s,r){const i=s&&!s.isEmpty(),o=r!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(i||o)&&(l+=" (found",i&&(l+=` in field ${s}`),o&&(l+=` in document ${r}`),l+=")"),new ce(Q.INVALID_ARGUMENT,a+t+l)}function $T(t,e){return t.some((n=>n.isEqual(e)))}class HT{constructor(e,n,s,r,i){this._firestore=e,this._userDataWriter=n,this._key=s,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new ot(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new bV(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(kl("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class bV extends HT{data(){return super.data()}}function kl(t,e){return typeof e=="string"?nd(t,e):e instanceof ya?e._internalPath:e._delegate._internalPath}function IV(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new ce(Q.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class sd{}class rd extends sd{}function Vh(t,e,...n){let s=[];e instanceof sd&&s.push(e),s=s.concat(n),(function(i){const o=i.filter((l=>l instanceof Nl)).length,a=i.filter((l=>l instanceof Ta)).length;if(o>1||o>0&&a>0)throw new ce(Q.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(s);for(const r of s)t=r._apply(t);return t}class Ta extends rd{constructor(e,n,s){super(),this._field=e,this._op=n,this._value=s,this.type="where"}static _create(e,n,s){return new Ta(e,n,s)}_apply(e){const n=this._parse(e);return jT(e._query,n),new ir(e.firestore,e.converter,wh(e._query,n))}_parse(e){const n=Zf(e.firestore);return(function(i,o,a,l,u,h,f){let p;if(u.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new ce(Q.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){Qg(f,h);const I=[];for(const y of f)I.push(Kg(l,i,y));p={arrayValue:{values:I}}}else p=Kg(l,i,f)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||Qg(f,h),p=TV(a,o,f,h==="in"||h==="not-in");return mt.create(u,h,p)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function AV(t,e,n){const s=e,r=kl("where",t);return Ta._create(r,s,n)}class Nl extends sd{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Nl(e,n)}_parse(e){const n=this._queryConstraints.map((s=>s._parse(e))).filter((s=>s.getFilters().length>0));return n.length===1?n[0]:Sn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(r,i){let o=r;const a=i.getFlattenedFilters();for(const l of a)jT(o,l),o=wh(o,l)})(e._query,n),new ir(e.firestore,e.converter,wh(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Dl extends rd{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Dl(e,n)}_apply(e){const n=(function(r,i,o){if(r.startAt!==null)throw new ce(Q.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(r.endAt!==null)throw new ce(Q.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Qo(i,o)})(e._query,this._field,this._direction);return new ir(e.firestore,e.converter,(function(r,i){const o=r.explicitOrderBy.concat([i]);return new ji(r.path,r.collectionGroup,o,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)})(e._query,n))}}function Lh(t,e="asc"){const n=e,s=kl("orderBy",t);return Dl._create(s,n)}function Kg(t,e,n){if(typeof(n=yt(n))=="string"){if(n==="")throw new ce(Q.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!FE(e)&&n.indexOf("/")!==-1)throw new ce(Q.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const s=e.path.child(Ye.fromString(n));if(!_e.isDocumentKey(s))throw new ce(Q.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return hg(t,new _e(s))}if(n instanceof ot)return hg(t,n._key);throw new ce(Q.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${ml(n)}.`)}function Qg(t,e){if(!Array.isArray(t)||t.length===0)throw new ce(Q.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function jT(t,e){const n=(function(r,i){for(const o of r)for(const a of o.getFlattenedFilters())if(i.indexOf(a.op)>=0)return a.op;return null})(t.filters,(function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new ce(Q.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ce(Q.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class qT{convertValue(e,n="none"){switch(Zs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ht(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Xs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Re(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const s={};return sr(e,((r,i)=>{s[r]=this.convertValue(i,n)})),s}convertVectorValue(e){const n=e.fields?.[xc].arrayValue?.values?.map((s=>ht(s.doubleValue)));return new En(n)}convertGeoPoint(e){return new vn(ht(e.latitude),ht(e.longitude))}convertArray(e,n){return(e.values||[]).map((s=>this.convertValue(s,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const s=yl(e);return s==null?null:this.convertValue(s,n);case"estimate":return this.convertTimestamp(zo(e));default:return null}}convertTimestamp(e){const n=Js(e);return new Je(n.seconds,n.nanos)}convertDocumentKey(e,n){const s=Ye.fromString(e);qe(oT(s),9688,{name:e});const r=new Si(s.get(1),s.get(3)),i=new _e(s.popFirst(5));return r.isEqual(n)||hs(`Document ${i} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}function RV(t,e,n){let s;return s=t?t.toFirestore(e):e,s}class si{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ws extends HT{constructor(e,n,s,r,i,o){super(e,n,s,r,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Oo(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const s=this._document.data.field(kl("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ce(Q.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Ws._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Ws._jsonSchemaVersion="firestore/documentSnapshot/1.0",Ws._jsonSchema={type:gt("string",Ws._jsonSchemaVersion),bundleSource:gt("string","DocumentSnapshot"),bundleName:gt("string"),bundle:gt("string")};class Oo extends Ws{data(e={}){return super.data(e)}}class Rr{constructor(e,n,s,r){this._firestore=e,this._userDataWriter=n,this._snapshot=r,this.metadata=new si(r.hasPendingWrites,r.fromCache),this.query=s}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((s=>{e.call(n,new Oo(this._firestore,this._userDataWriter,s.key,s,new si(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ce(Q.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(r,i){if(r._snapshot.oldDocs.isEmpty()){let o=0;return r._snapshot.docChanges.map((a=>{const l=new Oo(r._firestore,r._userDataWriter,a.doc.key,a.doc,new si(r._snapshot.mutatedKeys.has(a.doc.key),r._snapshot.fromCache),r.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}}))}{let o=r._snapshot.oldDocs;return r._snapshot.docChanges.filter((a=>i||a.type!==3)).map((a=>{const l=new Oo(r._firestore,r._userDataWriter,a.doc.key,a.doc,new si(r._snapshot.mutatedKeys.has(a.doc.key),r._snapshot.fromCache),r.query.converter);let u=-1,h=-1;return a.type!==0&&(u=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),h=o.indexOf(a.doc.key)),{type:SV(a.type),doc:l,oldIndex:u,newIndex:h}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ce(Q.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Rr._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=pl.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],s=[],r=[];return this.docs.forEach((i=>{i._document!==null&&(n.push(i._document),s.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),r.push(i.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function SV(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Re(61501,{type:t})}}function Di(t){t=Rn(t,ot);const e=Rn(t.firestore,Hr);return fV(Cl(e),t._key).then((n=>PV(e,t,n)))}Rr._jsonSchemaVersion="firestore/querySnapshot/1.0",Rr._jsonSchema={type:gt("string",Rr._jsonSchemaVersion),bundleSource:gt("string","QuerySnapshot"),bundleName:gt("string"),bundle:gt("string")};class WT extends qT{constructor(e){super(),this.firestore=e}convertBytes(e){return new sn(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new ot(this.firestore,null,n)}}function Vo(t){t=Rn(t,ir);const e=Rn(t.firestore,Hr),n=Cl(e),s=new WT(e);return IV(t._query),dV(n,t._query).then((r=>new Rr(e,s,t,r)))}function Fs(t,e,n){t=Rn(t,ot);const s=Rn(t.firestore,Hr),r=RV(t.converter,e);return Ol(s,[yV(Zf(s),"setDoc",t._key,r,t.converter!==null,n).toMutation(t._key,yn.none())])}function CV(t,e,n,...s){t=Rn(t,ot);const r=Rn(t.firestore,Hr),i=Zf(r);let o;return o=typeof(e=yt(e))=="string"||e instanceof ya?EV(i,"updateDoc",t._key,e,n,s):vV(i,"updateDoc",t._key,e),Ol(r,[o.toMutation(t._key,yn.exists(!0))])}function Lo(t){return Ol(Rn(t.firestore,Hr),[new Lf(t._key,yn.none())])}function Ol(t,e){return(function(s,r){const i=new rs;return s.asyncQueue.enqueueAndForget((async()=>eV(await hV(s),r,i))),i.promise})(Cl(t),e)}function PV(t,e,n){const s=n.docs.get(e._key),r=new WT(t);return new Ws(t,r,e._key,s,new si(n.hasPendingWrites,n.fromCache),e.converter)}function lc(){return new ed("serverTimestamp")}(function(e,n=!0){(function(r){Bi=r})(Fi),Ii(new kr("firestore",((s,{instanceIdentifier:r,options:i})=>{const o=s.getProvider("app").getImmediate(),a=new Hr(new TN(s.getProvider("auth-internal")),new IN(o,s.getProvider("app-check-internal")),(function(u,h){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new ce(Q.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Si(u.options.projectId,h)})(o,r),o);return i={useFetchStreams:n,...i},a._setSettings(i),a}),"PUBLIC").setMultipleInstances(!0)),js(Xm,Zm,e),js(Xm,Zm,"esm2020")})();const kV=Object.freeze(Object.defineProperty({__proto__:null,AbstractUserDataWriter:qT,Bytes:sn,CollectionReference:is,DocumentReference:ot,DocumentSnapshot:Ws,FieldPath:ya,FieldValue:va,Firestore:Hr,FirestoreError:ce,GeoPoint:vn,Query:ir,QueryCompositeFilterConstraint:Nl,QueryConstraint:rd,QueryDocumentSnapshot:Oo,QueryFieldFilterConstraint:Ta,QueryOrderByConstraint:Dl,QuerySnapshot:Rr,SnapshotMetadata:si,Timestamp:Je,VectorValue:En,_AutoId:pl,_ByteString:Pt,_DatabaseId:Si,_DocumentKey:_e,_EmptyAuthCredentialsProvider:yE,_FieldPath:St,_cast:Rn,_logWarn:Vr,_validateIsNotUsedTogether:EE,collection:gi,connectFirestoreEmulator:LT,deleteDoc:Lo,doc:Xt,ensureFirestoreConfigured:Cl,executeWrite:Ol,getDoc:Di,getDocs:Vo,getFirestore:MT,orderBy:Lh,query:Vh,serverTimestamp:lc,setDoc:Fs,updateDoc:CV,where:AV},Symbol.toStringTag,{value:"Module"}));var NV="firebase",DV="12.7.0";js(NV,DV,"app");const OV={apiKey:"AIzaSyCx092q7up_BXFgK2e13A-IQ3uDjwf6J5A",authDomain:"accsuite117.firebaseapp.com",projectId:"accsuite117",storageBucket:"accsuite117.firebasestorage.app",messagingSenderId:"352958845592",appId:"1:352958845592:web:bb6a7fbe04f6181707f6ed"};let Zo,vr,dt;Sm().length?Zo=Sm()[0]:Zo=Rv(OV);vr=yN(Zo);dt=MT(Zo);const VV=Object.freeze(Object.defineProperty({__proto__:null,get app(){return Zo},get auth(){return vr},get db(){return dt}},Symbol.toStringTag,{value:"Module"})),ln=de(null),As=de("pilot"),Yg=de(!0),mr=de(null);let Jg=!1;function Wi(){const t=je(()=>!!ln.value),e=je(()=>ln.value?.emailVerified??!1),n=je(()=>ln.value?.email??""),s=je(()=>ln.value?.displayName??""),r=je(()=>As.value==="coach"),i=je(()=>As.value==="admin"),o=async y=>{try{const D=Xt(dt,"users",y.uid),V=await Di(D);if(!V.exists())await Fs(D,{email:y.email,nickname:y.displayName||"Utente",role:"pilot",createdAt:new Date().toISOString(),emailVerified:y.emailVerified}),As.value="pilot",console.log("[AUTH] Created missing user profile");else{const k=V.data();As.value=k.role||"pilot"}}catch(D){console.error("[AUTH] Failed to ensure user document:",D),As.value="pilot"}},a=()=>{Jg||(Jg=!0,o1(vr,async y=>{ln.value=y,y?await o(y):As.value="pilot",Yg.value=!1,console.log("[AUTH] State changed:",y?.email??"logged out","| Role:",As.value)}))},l=async(y,D,V,k="",_="")=>{mr.value=null;try{const O=(await e1(vr,y,D)).user;return await s1(O,{displayName:V}),await Fs(Xt(dt,"users",O.uid),{firstName:k,lastName:_,nickname:V,email:y,role:"pilot",coachId:null,createdAt:new Date().toISOString(),emailVerified:!1}),await $m(O),console.log("[AUTH] Registered:",y,"Verification email sent"),{success:!0,user:O}}catch(C){return console.error("[AUTH] Register error:",C.code),mr.value=I(C.code),{success:!1,error:mr.value}}},u=async(y,D)=>{mr.value=null;try{const V=await t1(vr,y,D);return console.log("[AUTH] Logged in:",y),{success:!0,user:V.user}}catch(V){return console.error("[AUTH] Login error:",V.code),mr.value=I(V.code),{success:!1,error:mr.value}}},h=async()=>{try{return await a1(vr),console.log("[AUTH] Logged out"),{success:!0}}catch(y){return console.error("[AUTH] Logout error:",y),{success:!1,error:y.message}}},f=async()=>{if(!ln.value)return{success:!1,error:"Utente non autenticato"};try{return await $m(ln.value),console.log("[AUTH] Verification email resent"),{success:!0}}catch(y){return console.error("[AUTH] Resend error:",y.code),{success:!1,error:I(y.code)}}},p=async()=>{if(!ln.value)return{verified:!1,error:"Utente non autenticato"};try{await ln.value.reload(),ln.value=vr.currentUser;const y=ln.value?.emailVerified??!1;return console.log("[AUTH] Email verified check:",y),{verified:y,error:null}}catch(y){return console.error("[AUTH] Check verification error:",y),{verified:!1,error:y.message}}},g=async y=>{try{const D=await Di(Xt(dt,"users",y));return D.exists()?D.data():null}catch(D){return console.error("[AUTH] Get profile error:",D),null}},I=y=>({"auth/email-already-in-use":"Email gi registrata","auth/weak-password":"Password troppo debole (min. 6 caratteri)","auth/invalid-email":"Email non valida","auth/user-not-found":"Utente non trovato","auth/wrong-password":"Password errata","auth/invalid-credential":"Credenziali non valide","auth/too-many-requests":"Troppi tentativi, riprova pi tardi","auth/network-request-failed":"Errore di rete, controlla la connessione"})[y]||"Errore di autenticazione";return a(),{currentUser:ln,isLoading:Yg,authError:mr,isAuthenticated:t,isEmailVerified:e,userEmail:n,userDisplayName:s,register:l,login:u,logout:h,resendVerificationEmail:f,checkEmailVerified:p,getUserProfile:g,userRole:As,isCoach:r,isAdmin:i}}let Wc=0,Xg=0;async function Pu(t){return Wc++,console.log(`%c[FIREBASE]  READ #${Wc}: ${t.path}`,"color: #4CAF50"),Di(t)}async function ku(t){Wc++,console.log(`%c[FIREBASE]  QUERY #${Wc}: (collection query)`,"color: #4CAF50");const e=await Vo(t);return console.log(`%c[FIREBASE]     Returned ${e.docs.length} documents`,"color: #8BC34A"),e}async function LV(t,e){return Xg++,console.log(`%c[FIREBASE]  WRITE #${Xg}: ${t.path}`,"color: #FF9800"),Fs(t,e)}const Rs={PRACTICE:0,QUALIFY:1,RACE:2};function DM(t){switch(t){case 0:return"practice";case 1:return"qualify";case 2:return"race";default:return"practice"}}function OM(t){if(!t||t<=0)return"--:--.---";const e=Math.round(t),n=Math.floor(e/6e4),s=Math.floor(e%6e4/1e3),r=e%1e3;return`${n}:${s.toString().padStart(2,"0")}.${r.toString().padStart(3,"0")}`}function Zg(t){if(!t||t<=0)return"0:00";const e=Math.floor(t/6e4),n=Math.floor(t%6e4/1e3);return`${e}:${n.toString().padStart(2,"0")}`}function VM(t){return t?t.split("_").map((e,n)=>e.match(/^gt\d$/i)||e.length<=2?e.toUpperCase():e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()).join(" "):"Unknown"}function LM(t){return t?t.split("_").map(e=>e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()).join(" "):"Unknown"}function MM(t){if(!t)return"-";const e=new Date(t);return`${e.getDate()} ${["Gen","Feb","Mar","Apr","Mag","Giu","Lug","Ago","Set","Ott","Nov","Dic"][e.getMonth()]} ${e.getFullYear()}`}function xM(t){if(!t)return"-";const e=new Date(t);return`${e.getDate()} ${["GENNAIO","FEBBRAIO","MARZO","APRILE","MAGGIO","GIUGNO","LUGLIO","AGOSTO","SETTEMBRE","OTTOBRE","NOVEMBRE","DICEMBRE"][e.getMonth()]} ${e.getFullYear()}`}function FM(t){if(!t)return"-";const e=new Date(t);return`${e.getHours().toString().padStart(2,"0")}:${e.getMinutes().toString().padStart(2,"0")}`}const MV=de([]),xV=de(!1),FV=de(null),e_=de(null);function GT(){const t=MV,e=xV,n=FV,{currentUser:s}=Wi(),r=je(()=>typeof window>"u"?!1:!!window.electronAPI);function i(j,L){return`${j}_${L}`.replace(/[^a-zA-Z0-9]/g,"_").substring(0,100)}function o(j){const L=j.session_info||{},Y=j.stints||[],H={track:L.track||j.track||"Unknown",date_start:L.date_start||j.date||new Date().toISOString(),date_end:L.date_end||null,car:L.car_model||L.car||j.car||"",session_type:L.session_type??0,driver:L.driver||null},q=["Flood","Wet","Damp","Greasy","Green","Fast","Optimum"],F={};q.forEach(W=>{F[W]={bestQualy:null,bestQualyTemp:null,bestRace:null,bestRaceTemp:null,bestAvgRace:null,bestAvgRaceTemp:null}});let ie=null,me=null,we=null,ge=null,B=null,ne=null;Y.forEach(W=>{const he=W.type==="Qualify",ke=W.laps||[];ke.forEach(N=>{if(N.is_valid&&!N.has_pit_stop&&N.lap_time_ms){const M=N.track_grip_status||"Unknown",J=N.air_temp||0,G={airTemp:J,roadTemp:N.road_temp||0,grip:M};F[M]&&(he?(!F[M].bestQualy||N.lap_time_ms<F[M].bestQualy)&&(F[M].bestQualy=N.lap_time_ms,F[M].bestQualyTemp=J):(!F[M].bestRace||N.lap_time_ms<F[M].bestRace)&&(F[M].bestRace=N.lap_time_ms,F[M].bestRaceTemp=J)),he?(!ie||N.lap_time_ms<ie)&&(ie=N.lap_time_ms,me=G):(!we||N.lap_time_ms<we)&&(we=N.lap_time_ms,ge=G)}});const P=ke.filter(N=>N.is_valid&&!N.has_pit_stop);if(!he&&W.avg_clean_lap&&P.length>=5){const N=P[0],M=N?.track_grip_status||"Unknown",J=N?.air_temp||0;F[M]&&(!F[M].bestAvgRace||W.avg_clean_lap<F[M].bestAvgRace)&&(F[M].bestAvgRace=W.avg_clean_lap,F[M].bestAvgRaceTemp=J),(!B||W.avg_clean_lap<B)&&(B=W.avg_clean_lap,ne={airTemp:J,roadTemp:N?.road_temp||0,grip:M})}});const z={laps:L.laps_total||j.laps?.length||0,lapsValid:L.laps_valid||0,bestLap:L.session_best_lap||j.bestLap||null,avgCleanLap:L.avg_clean_lap||null,totalTime:L.total_drive_time_ms||0,stintCount:Y.length||0,best_qualy_ms:ie,best_qualy_conditions:me,best_race_ms:we,best_race_conditions:ge,best_avg_race_ms:B,best_avg_race_conditions:ne,best_by_grip:F};return{meta:H,summary:z}}async function a(){if(!r.value)return[];const j=window.electronAPI,L=await j.getTelemetryFiles();if(!L||L.length===0)return[];const Y=s.value?.uid,H=[];for(const q of L)try{const F=await j.readFile(q.path);if(!F||F.ownerId&&F.ownerId!==Y)continue;const{meta:ie,summary:me}=o(F),we=i(ie.date_start,ie.track);H.push({sessionId:we,fileHash:"",fileName:q.name,uploadedAt:null,meta:ie,summary:me,rawChunkCount:0,rawSizeBytes:0})}catch(F){console.warn(`[TELEMETRY] Error reading local file ${q.name}:`,F)}return H.sort((q,F)=>(F.meta.date_start||"").localeCompare(q.meta.date_start||"")),H}async function l(j){const L=gi(dt,`users/${j}/sessions`);let Y;try{const H=Vh(L,Lh("uploadedAt","desc"));Y=await ku(H)}catch{console.warn("[TELEMETRY] orderBy failed, fetching without order"),Y=await ku(L)}return Y.docs.map(H=>{const q=H.data();return{sessionId:H.id,fileHash:q.fileHash||null,fileName:q.fileName||null,uploadedAt:q.uploadedAt||null,meta:q.meta||{},summary:q.summary||{},rawChunkCount:q.rawChunkCount||0,rawSizeBytes:q.rawSizeBytes||0}})}async function u(j,L=!1){const Y=j||s.value?.uid;if(!Y)return console.warn("[TELEMETRY] No user ID provided"),[];const H=e_.value!==Y;if(!L&&!H&&t.value.length>0)return console.log(`%c[TELEMETRY]  Using CACHED sessions (${t.value.length}), skipping Firebase query`,"color: #9C27B0"),t.value;e_.value=Y,e.value=!0,n.value=null;try{const q=!j||j===s.value?.uid;if(r.value&&q)try{const ie=await a();if(ie.length>0)return t.value=ie,console.log(`[TELEMETRY]  Loaded ${ie.length} sessions from LOCAL files (0 Firebase reads)`),t.value;console.log("[TELEMETRY] No local files found, falling back to Firebase")}catch(ie){console.warn("[TELEMETRY] Local load failed, falling back to Firebase:",ie)}const F=await l(Y);return t.value=F,t.value.sort((ie,me)=>(me.meta.date_start||"").localeCompare(ie.meta.date_start||"")),console.log(`[TELEMETRY] Loaded ${t.value.length} sessions from Firebase for user ${Y}`),t.value}catch(q){return console.error("[TELEMETRY] Error loading sessions:",q),n.value=q.message,[]}finally{e.value=!1}}async function h(j,L){const Y=L||s.value?.uid;if(!Y)return null;const H=!L||L===s.value?.uid;if(r.value&&H)try{const q=window.electronAPI,F=await q.getTelemetryFiles();for(const ie of F){const me=await q.readFile(ie.path);if(!me||me.ownerId&&me.ownerId!==Y)continue;const we=me.session_info||{};if(i(we.date_start||me.date||"",we.track||me.track||"")===j)return console.log("[TELEMETRY]  Loaded full session from LOCAL file (0 Firebase reads)"),me}}catch(q){console.warn("[TELEMETRY] Local fetchSessionFull failed, falling back to Firebase:",q)}try{const q=Xt(dt,`users/${Y}/sessions/${j}`),F=await Pu(q);if(!F.exists()||(F.data().rawChunkCount||0)===0)return null;const we=gi(dt,`users/${Y}/sessions/${j}/rawChunks`),ge=Vh(we,Lh("idx","asc")),B=await ku(ge),ne=[];B.forEach(W=>{const he=W.data();ne.push({idx:he.idx,chunk:he.chunk})}),ne.sort((W,he)=>W.idx-he.idx);const z=ne.map(W=>W.chunk).join("");return console.log("[TELEMETRY] Loaded full session from Firebase chunks"),JSON.parse(z)}catch(q){return console.error("[TELEMETRY] Error fetching full session:",q),null}}const f=5;async function p(j,L){const Y=L||s.value?.uid,H=j.toLowerCase().replace(/[^a-z0-9]/g,"_"),q=["Flood","Wet","Damp","Greasy","Green","Fast","Optimum"],F={};q.forEach(me=>{F[me]={bestQualy:null,bestQualyTemp:null,bestQualySessionId:null,bestQualyDate:null,bestRace:null,bestRaceTemp:null,bestRaceSessionId:null,bestRaceDate:null,bestAvgRace:null,bestAvgRaceTemp:null,bestAvgRaceSessionId:null,bestAvgRaceDate:null}});const ie=t.value.filter(me=>{const we=me.meta.track.toLowerCase().replace(/[^a-z0-9]/g,"_");return we.includes(H)||H.includes(we)});if(ie.length===0)return F;for(const me of ie)try{const we=await h(me.sessionId,Y);if(!we?.stints)continue;for(const ge of we.stints){const B=ge.type==="Qualify",ne=ge.laps||[],z=W=>W==="Opt"?"Optimum":W;for(const W of ne){if(!W.is_valid||W.has_pit_stop||!W.lap_time_ms)continue;const he=z(W.track_grip_status||"Unknown"),ke=W.air_temp||0;if(!F[he])continue;const P=me.meta.date_start||null;B?(!F[he].bestQualy||W.lap_time_ms<F[he].bestQualy)&&(F[he].bestQualy=W.lap_time_ms,F[he].bestQualyTemp=ke,F[he].bestQualySessionId=me.sessionId,F[he].bestQualyDate=P):(!F[he].bestRace||W.lap_time_ms<F[he].bestRace)&&(F[he].bestRace=W.lap_time_ms,F[he].bestRaceTemp=ke,F[he].bestRaceSessionId=me.sessionId,F[he].bestRaceDate=P)}if(!B&&ge.avg_clean_lap&&ge.avg_clean_lap>0){const W=ne.filter(he=>he.is_valid&&!he.has_pit_stop);if(W.length>=f){const he=W[0],ke=z(he?.track_grip_status||"Unknown"),P=he?.air_temp||0,N=me.meta.date_start||null;F[ke]&&(!F[ke].bestAvgRace||ge.avg_clean_lap<F[ke].bestAvgRace)&&(F[ke].bestAvgRace=ge.avg_clean_lap,F[ke].bestAvgRaceTemp=P,F[ke].bestAvgRaceSessionId=me.sessionId,F[ke].bestAvgRaceDate=N)}}}}catch(we){console.warn(`[TELEMETRY] Error loading session ${me.sessionId}:`,we)}return F}async function g(j,L="Optimum",Y){return(await y(j,Y))[L]||{bestQualy:null,bestQualyTemp:null,bestQualySessionId:null,bestQualyDate:null,bestRace:null,bestRaceTemp:null,bestRaceSessionId:null,bestRaceDate:null,bestAvgRace:null,bestAvgRaceTemp:null,bestAvgRaceSessionId:null,bestAvgRaceDate:null}}const I=de({});async function y(j,L){const Y=L||s.value?.uid,H=j.toLowerCase().replace(/[^a-z0-9]/g,"_"),q=`${H}_${Y||"anon"}`;if(I.value[q])return console.log(`[TELEMETRY] trackBests cache HIT for ${H}`),I.value[q];if(Y&&!r.value)try{const ie=Xt(dt,`users/${Y}/trackBests/${H}`),me=await Pu(ie);if(me.exists()){const we=me.data();console.log(`[TELEMETRY] trackBests Firebase HIT for ${H}`);const ge={},B=we.bests||we,ne=["Flood","Wet","Damp","Greasy","Green","Fast","Optimum"];for(const z of ne)B[z]&&(ge[z]=B[z]);if(B.Opt){const z=B.Opt;if(!ge.Optimum)ge.Optimum=z;else{const W=ge.Optimum;z.bestQualy&&(!W.bestQualy||z.bestQualy<W.bestQualy)&&(W.bestQualy=z.bestQualy,W.bestQualyTemp=z.bestQualyTemp,W.bestQualySessionId=z.bestQualySessionId,W.bestQualyDate=z.bestQualyDate),z.bestRace&&(!W.bestRace||z.bestRace<W.bestRace)&&(W.bestRace=z.bestRace,W.bestRaceTemp=z.bestRaceTemp,W.bestRaceSessionId=z.bestRaceSessionId,W.bestRaceDate=z.bestRaceDate),z.bestAvgRace&&(!W.bestAvgRace||z.bestAvgRace<W.bestAvgRace)&&(W.bestAvgRace=z.bestAvgRace,W.bestAvgRaceTemp=z.bestAvgRaceTemp,W.bestAvgRaceSessionId=z.bestAvgRaceSessionId,W.bestAvgRaceDate=z.bestAvgRaceDate)}}return I.value[q]=ge,ge}}catch(ie){console.warn("[TELEMETRY] Error reading trackBests from Firebase:",ie)}console.log(`[TELEMETRY] trackBests MISS for ${H}, calculating...`);const F=await p(j,L);if(Y&&!r.value)try{const ie=Xt(dt,`users/${Y}/trackBests/${H}`);await LV(ie,{trackId:H,bests:F,lastUpdated:new Date().toISOString()}),console.log(`[TELEMETRY] trackBests SAVED to Firebase for ${H}`)}catch(ie){console.warn("[TELEMETRY] Error saving trackBests to Firebase:",ie)}return I.value[q]=F,F}async function D(j,L,Y=!1){const H=j.toLowerCase().replace(/[^a-z0-9]/g,"_"),q=L||s.value?.uid,F=`${H}_${q||"anon"}`;if(delete I.value[F],console.log(`[TELEMETRY] trackBests cache INVALIDATED for ${H}`),Y&&q&&!r.value)try{const ie=Xt(dt,`users/${q}/trackBests/${H}`);await Lo(ie),console.log(`[TELEMETRY] trackBests DELETED from Firebase for ${H}`)}catch(ie){console.warn("[TELEMETRY] Error deleting trackBests from Firebase:",ie)}}async function V(j,L){return console.log(`[TELEMETRY] FORCE RECALCULATING trackBests for ${j}`),await D(j,L,!0),await y(j,L)}const k=de({});async function _(j,L){const Y=j.toLowerCase().replace(/[^a-z0-9]/g,"_"),H=L||s.value?.uid,q=`${Y}_${H||"anon"}`;if(k.value[q])return k.value[q];if(H&&!r.value)try{const ie=Xt(dt,`users/${H}/trackBests/${Y}`),me=await Pu(ie);if(me.exists()){const we=me.data();if(we.activity){const ge=we.activity,B={totalLaps:ge.totalLaps||0,validLaps:ge.validLaps||0,validPercent:ge.totalLaps>0?Math.round(ge.validLaps/ge.totalLaps*100):0,totalTimeMs:ge.totalTimeMs||0,totalTimeFormatted:Zg(ge.totalTimeMs||0),sessionCount:ge.sessionCount||0,lastSessionDate:ge.lastSessionDate};return k.value[q]=B,console.log(`[TELEMETRY] trackActivity Firebase HIT for ${Y}`),B}}}catch(ie){console.warn("[TELEMETRY] Error reading trackActivity from Firebase:",ie)}console.log(`[TELEMETRY] trackActivity MISS for ${Y}, calculating...`);const F=w(j);return k.value[q]=F,F}async function C(j,L,Y,H){const q=await g(j,L,H);function F(ie,me){if(!ie)return null;const we=Math.round(me||Y),B=(Y-we)*100;return Math.round(ie+B)}return{theoQualy:F(q.bestQualy,q.bestQualyTemp),theoRace:F(q.bestRace,q.bestRaceTemp),theoAvgRace:F(q.bestAvgRace,q.bestAvgRaceTemp),historicQualy:q.bestQualy,historicQualyTemp:q.bestQualyTemp,historicRace:q.bestRace,historicRaceTemp:q.bestRaceTemp,historicAvgRace:q.bestAvgRace,historicAvgRaceTemp:q.bestAvgRaceTemp,grip:L,stintTemp:Y}}async function O(j,L){const Y=await p(j,L),H={};for(const[q,F]of Object.entries(Y))H[q]={bestAvgRace:F.bestAvgRace,bestAvgRaceTemp:F.bestAvgRaceTemp};return H}async function U(j,L){const Y=await p(j,L);let H=null;for(const q of Object.keys(Y)){const F=Y[q].bestAvgRace;F&&(!H||F<H)&&(H=F)}return H}const E=je(()=>t.value.length===0?null:t.value[0]),b=je(()=>E.value?.meta.car||null),v=je(()=>E.value?.meta.track||null),R=je(()=>{const j=["Flood","Wet","Damp","Greasy","Green","Fast","Optimum"],L={};for(const Y of t.value){const H=(Y.meta.track||"unknown").toLowerCase(),q=Y.summary;if(!L[H]){const ge={};j.forEach(B=>{ge[B]={bestQualy:null,bestQualyTemp:null,bestRace:null,bestRaceTemp:null,bestAvgRace:null,bestAvgRaceTemp:null}}),L[H]={track:Y.meta.track,sessions:0,lastSession:Y.meta.date_start,bestQualy:null,bestQualyConditions:null,bestRace:null,bestRaceConditions:null,bestAvgRace:null,bestAvgRaceConditions:null,bestByGrip:ge}}L[H].sessions++,Y.meta.date_start>L[H].lastSession&&(L[H].lastSession=Y.meta.date_start);const F=q?.best_by_grip;if(F){const ge=B=>B==="Opt"?"Optimum":B;for(const B in F){const ne=ge(B);if(!j.includes(ne))continue;const z=F[B];if(!z)continue;const W=L[H].bestByGrip[ne];W&&(z.bestQualy&&(!W.bestQualy||z.bestQualy<W.bestQualy)&&(W.bestQualy=z.bestQualy,W.bestQualyTemp=z.bestQualyTemp),z.bestRace&&(!W.bestRace||z.bestRace<W.bestRace)&&(W.bestRace=z.bestRace,W.bestRaceTemp=z.bestRaceTemp),z.bestAvgRace&&(!W.bestAvgRace||z.bestAvgRace<W.bestAvgRace)&&(W.bestAvgRace=z.bestAvgRace,W.bestAvgRaceTemp=z.bestAvgRaceTemp))}}const ie=q?.best_qualy_ms;ie?(!L[H].bestQualy||ie<L[H].bestQualy)&&(L[H].bestQualy=ie,L[H].bestQualyConditions=q.best_qualy_conditions||null):Y.meta.session_type===Rs.QUALIFY&&q?.bestLap&&(!L[H].bestQualy||q.bestLap<L[H].bestQualy)&&(L[H].bestQualy=q.bestLap,L[H].bestQualyConditions=null);const me=q?.best_race_ms;me?(!L[H].bestRace||me<L[H].bestRace)&&(L[H].bestRace=me,L[H].bestRaceConditions=q.best_race_conditions||null):Y.meta.session_type===Rs.RACE&&q?.bestLap&&(!L[H].bestRace||q.bestLap<L[H].bestRace)&&(L[H].bestRace=q.bestLap,L[H].bestRaceConditions=null);const we=q?.best_avg_race_ms;we&&(!L[H].bestAvgRace||we<L[H].bestAvgRace)&&(L[H].bestAvgRace=we,L[H].bestAvgRaceConditions=q.best_avg_race_conditions||null)}return Object.values(L).sort((Y,H)=>(H.lastSession||"").localeCompare(Y.lastSession||""))});function S(j){return t.value.filter(L=>(L.meta.track||"").toLowerCase()===j.toLowerCase())}function A(j){return t.value.find(L=>L.sessionId===j)}function w(j){const L=S(j);let Y=0,H=0,q=0;for(const F of L)Y+=F.summary?.laps||0,H+=F.summary?.lapsValid||0,q+=F.summary?.totalTime||0;return{totalLaps:Y,validLaps:H,validPercent:Y>0?Math.round(H/Y*100):0,totalTimeMs:q,totalTimeFormatted:Zg(q),sessionCount:L.length}}function ue(j,L){return S(j).sort((H,q)=>(H.meta.date_start||"").localeCompare(q.meta.date_start||"")).map(H=>{const q=H.summary;let F=null,ie=null;return L&&q?.best_by_grip?.[L]?(F=q.best_by_grip[L].bestQualy,ie=q.best_by_grip[L].bestRace):(F=q?.best_qualy_ms||null,ie=q?.best_race_ms||null),{date:H.meta.date_start,sessionId:H.sessionId,bestQualy:F,bestRace:ie,sessionType:H.meta.session_type}}).filter(H=>H.bestQualy||H.bestRace)}function Ee(j=7){const L=new Date,Y=["Dom","Lun","Mar","Mer","Gio","Ven","Sab"],H=[];for(let q=j-1;q>=0;q--){const F=new Date(L.getTime()-q*24*60*60*1e3),ie=F.toISOString().split("T")[0]||"",me=t.value.filter(ne=>ne.meta.date_start?.startsWith(ie));let we=0,ge=0,B=0;for(const ne of me){const z=ne.summary?.totalTime||0,W=Math.round(z/6e4);switch(ne.meta.session_type){case Rs.PRACTICE:we+=W;break;case Rs.QUALIFY:ge+=W;break;case Rs.RACE:B+=W;break}}H.push({day:Y[F.getDay()]||"N/A",practice:we,qualify:ge,race:B})}return H}const ae=je(()=>{const j=new Date,L=new Date(j.getTime()-10080*60*1e3);let Y=0,H=0,q=0,F=0,ie=0,me=0;for(const we of t.value){if(new Date(we.meta.date_start)<L)continue;const B=we.summary?.totalTime||0,ne=Math.round(B/6e4);switch(we.meta.session_type){case Rs.PRACTICE:Y+=ne,H++;break;case Rs.QUALIFY:q+=ne,F++;break;case Rs.RACE:ie+=ne,me++;break}}return{practice:{minutes:Y,sessions:H},qualify:{minutes:q,sessions:F},race:{minutes:ie,sessions:me}}});return{sessions:t,isLoading:e,error:n,loadSessions:u,fetchSessionFull:h,getSessionsForTrack:S,getSession:A,getActivityData:Ee,getTrackActivityTotals:w,getHistoricalBestTimes:ue,calculateAllBestTimesForTrack:p,calculateBestAvgRaceForTrack:O,getBestAvgRaceForTrack:U,getBestTimesForGrip:g,getTheoreticalTimes:C,getTrackBests:y,invalidateTrackBests:D,forceRecalculateTrackBests:V,getTrackActivity:_,lastSession:E,lastUsedCar:b,lastUsedTrack:v,trackStats:R,activityTotals:ae}}const UV=4e5;function BV(){const{currentUser:t}=Wi(),{loadSessions:e}=GT(),n=de(!1),s=de(0),r=de([]),i=de(null),o=je(()=>typeof window>"u"?!1:!!window.electronAPI);async function a(k){const _=new TextEncoder().encode(k),C=await crypto.subtle.digest("SHA-256",_);return Array.from(new Uint8Array(C)).map(U=>U.toString(16).padStart(2,"0")).join("")}function l(k,_){return`${k.split(".")[0]}_${_}`.replace(/[^a-zA-Z0-9]/g,"_").substring(0,100)}async function u(k,_){const C=Xt(dt,`users/${k}/sessions/${_}`),O=await Di(C);return O.exists()?{id:_,...O.data()}:null}async function h(k,_){try{const C=gi(dt,`users/${k}/sessions/${_}/rawChunks`),U=(await Vo(C)).docs.map(E=>Lo(E.ref));await Promise.all(U)}catch(C){console.warn("[SYNC] Error deleting old chunks:",C.message)}}function f(k){const _=k.session_info||{},C=k.stints||[],O={track:_.track||k.track||"Unknown",date_start:_.date_start||k.date||new Date().toISOString(),date_end:_.date_end||null,car:_.car_model||_.car||k.car||null,session_type:_.session_type??null,driver:_.driver||null},U=["Flood","Wet","Damp","Greasy","Green","Fast","Optimum"],E={};U.forEach(j=>{E[j]={bestQualy:null,bestQualyTemp:null,bestRace:null,bestRaceTemp:null,bestAvgRace:null,bestAvgRaceTemp:null}});const b=j=>j==="Opt"?"Optimum":j;let v=null,R=null,S=null,A=null,w=null,ue=null;const Ee=_.session_type===1;C.forEach(j=>{const L=Ee||j.type==="Qualify",Y=j.laps||[];if(Y.forEach(H=>{if(H.is_valid&&!H.has_pit_stop&&H.lap_time_ms){const q=b(H.track_grip_status||"Unknown"),F=H.air_temp||0,ie={airTemp:F,roadTemp:H.road_temp||0,grip:q};E[q]&&(L?(!E[q].bestQualy||H.lap_time_ms<E[q].bestQualy)&&(E[q].bestQualy=H.lap_time_ms,E[q].bestQualyTemp=F):(!E[q].bestRace||H.lap_time_ms<E[q].bestRace)&&(E[q].bestRace=H.lap_time_ms,E[q].bestRaceTemp=F)),L?(!v||H.lap_time_ms<v)&&(v=H.lap_time_ms,R=ie):(!S||H.lap_time_ms<S)&&(S=H.lap_time_ms,A=ie)}}),!L&&j.avg_clean_lap&&Y.length>=5){const H=Y.find(me=>me.is_valid&&!me.has_pit_stop),q=H?.track_grip_status||Y[0]?.track_grip_status||"Unknown",F=b(q),ie=H?.air_temp||Y[0]?.air_temp||0;E[F]&&(!E[F].bestAvgRace||j.avg_clean_lap<E[F].bestAvgRace)&&(E[F].bestAvgRace=j.avg_clean_lap,E[F].bestAvgRaceTemp=ie),(!w||j.avg_clean_lap<w)&&(w=j.avg_clean_lap,ue={airTemp:ie,roadTemp:H?.road_temp||0,grip:F})}});const ae={laps:_.laps_total||k.laps?.length||0,lapsValid:_.laps_valid||0,bestLap:_.session_best_lap||k.bestLap||null,avgCleanLap:_.avg_clean_lap||null,totalTime:_.total_drive_time_ms||0,stintCount:C.length||0,best_qualy_ms:v,best_qualy_conditions:R,best_race_ms:S,best_race_conditions:A,best_avg_race_ms:w,best_avg_race_conditions:ue,best_by_grip:E};return{meta:O,summary:ae}}function p(k,_){const C=[];for(let O=0;O<k.length;O+=_)C.push(k.slice(O,O+_));return C}async function g(k,_,C,O){try{const U=k.ownerId||null;if(U&&U!==O)return console.log(`[SYNC] Skipped ${C}: owner mismatch (file: ${U}, current: ${O})`),{status:"skipped",fileName:C,reason:"owner_mismatch"};U||console.log(`[SYNC] Warning: ${C} has no ownerId (pre-login session)`);const{meta:E,summary:b}=f(k),v=l(E.date_start,E.track),R=await a(_),S=await u(O,v);let A=!1,w=!0;S&&(A=!0,S.fileHash===R?w=!1:await h(O,v));const ue=p(_,UV),Ee=Xt(dt,`users/${O}/sessions/${v}`);await Fs(Ee,{fileHash:R,fileName:C,uploadedAt:lc(),meta:E,summary:b,rawChunkCount:ue.length,rawSizeBytes:_.length,rawEncoding:"json-string",version:(S?.version||0)+1});const ae=Xt(dt,`users/${O}/uploads/${R}`);if(await Fs(ae,{fileName:C,uploadedAt:lc(),sessionId:v}),w)for(let Y=0;Y<ue.length;Y++){const H=Xt(dt,`users/${O}/sessions/${v}/rawChunks/${Y}`);await Fs(H,{idx:Y,chunk:ue[Y]})}await y(O,E.track,v,E.date_start,b);const j=await I(O,E.track,E.date_start,v);let L="created";return A&&(L=w?"updated":"refreshed"),console.log(`[SYNC] ${L}: ${C} -> ${v} (Q: ${b.best_qualy_ms}, R: ${b.best_race_ms})${j>0?` [cleaned ${j} old duplicate(s)]`:""}`),{status:L,fileName:C,sessionId:v}}catch(U){return console.error("[SYNC] Error:",U),{status:"error",fileName:C,error:U.message}}}async function I(k,_,C,O){try{const U=gi(dt,`users/${k}/sessions`),E=await Vo(U),b=_.toLowerCase().replace(/\s+/g,"_"),R=C.split(".")[0].split(":").slice(0,2).join(":");let S=0;for(const A of E.docs){const w=A.id,ue=A.data();if(w===O||!/^\d{13}_/.test(w)||(ue.meta?.track||"").toLowerCase().replace(/\s+/g,"_")!==b||(ue.meta?.date_start||"").split(":").slice(0,2).join(":")!==R)continue;console.log(`[SYNC]  Auto-deleting old format duplicate: ${w}`);const Y=gi(dt,`users/${k}/sessions/${w}/rawChunks`),H=await Vo(Y);for(const q of H.docs)await Lo(q.ref);await Lo(A.ref),S++}return S>0&&console.log(`[SYNC]  Auto-cleaned ${S} old format duplicate(s) for ${_}`),S}catch(U){return console.warn("[SYNC]  Error during auto-cleanup:",U.message),0}}async function y(k,_,C,O,U){const E=_.toLowerCase().replace(/\s+/g,"_"),b=Xt(dt,`users/${k}/trackBests/${E}`);try{const v=await Di(b),R=v.exists()?v.data():null,S=["Flood","Wet","Damp","Greasy","Green","Fast","Optimum"],A=R?.bests||(R?Object.fromEntries(S.filter(F=>R[F]).map(F=>[F,R[F]])):{});let w=!1;S.forEach(F=>{const ie=U.best_by_grip?.[F];ie&&(A[F]||(A[F]={bestQualy:null,bestQualyTemp:null,bestQualySessionId:null,bestQualyDate:null,bestRace:null,bestRaceTemp:null,bestRaceSessionId:null,bestRaceDate:null,bestAvgRace:null,bestAvgRaceTemp:null,bestAvgRaceSessionId:null,bestAvgRaceDate:null}),ie.bestQualy&&(!A[F].bestQualy||ie.bestQualy<A[F].bestQualy)&&(A[F].bestQualy=ie.bestQualy,A[F].bestQualyTemp=ie.bestQualyTemp,A[F].bestQualySessionId=C,A[F].bestQualyDate=O,w=!0),ie.bestRace&&(!A[F].bestRace||ie.bestRace<A[F].bestRace)&&(A[F].bestRace=ie.bestRace,A[F].bestRaceTemp=ie.bestRaceTemp,A[F].bestRaceSessionId=C,A[F].bestRaceDate=O,w=!0),ie.bestAvgRace&&(!A[F].bestAvgRace||ie.bestAvgRace<A[F].bestAvgRace)&&(A[F].bestAvgRace=ie.bestAvgRace,A[F].bestAvgRaceTemp=ie.bestAvgRaceTemp,A[F].bestAvgRaceSessionId=C,A[F].bestAvgRaceDate=O,w=!0))});const ue=R?.activity||{totalLaps:0,validLaps:0,totalTimeMs:0,sessionCount:0},Ee=R?.syncedSessionIds||[],ae=Ee.includes(C),j=U.laps||0,L=U.lapsValid||0,Y=U.totalTime||0,H=ae?ue:{totalLaps:ue.totalLaps+j,validLaps:ue.validLaps+L,totalTimeMs:ue.totalTimeMs+Y,sessionCount:ue.sessionCount+1,lastSessionDate:O},q=ae?Ee:[...Ee,C].slice(-100);return await Fs(b,{trackId:E,bests:A,activity:H,syncedSessionIds:q,lastUpdated:lc()}),console.log(w?`[SYNC]  Updated trackBests for ${E} (bests + activity)`:ae?`[SYNC]  No trackBests changes for ${E}`:`[SYNC]  Updated trackBests activity for ${E}`),w||!ae}catch(v){return console.warn(`[SYNC]  Error updating trackBests for ${E}:`,v.message),!1}}async function D(){if(!o.value)return console.log("[SYNC] Not running in Electron, skipping sync"),[];if(!t.value)return console.log("[SYNC] No user logged in, skipping sync"),[];if(n.value)return console.log("[SYNC] Already syncing, skipping"),[];n.value=!0,s.value=0,r.value=[];const k=t.value.uid,_=window.electronAPI,C=[];try{const O=await _.getTelemetryFiles();if(console.log(`[SYNC] Found ${O.length} files to process`),O.length===0)return n.value=!1,[];for(let S=0;S<O.length;S++){const A=O[S];s.value=Math.round(S/O.length*100);try{const w=await _.readFile(A.path);if(!w){C.push({status:"error",fileName:A.name,error:"Could not read file"});continue}const ue=JSON.stringify(w),Ee=await g(w,ue,A.name,k);C.push(Ee),(Ee.status==="created"||Ee.status==="updated")&&await _.updateRegistry(A.name,{uploadedBy:k,sessionId:Ee.sessionId,uploadedAt:new Date().toISOString()})}catch(w){console.error(`[SYNC] Error processing ${A.name}:`,w),C.push({status:"error",fileName:A.name,error:w.message})}}s.value=100,r.value=C,i.value=new Date;const U=C.filter(S=>S.status==="created").length,E=C.filter(S=>S.status==="updated").length,b=C.filter(S=>S.status==="unchanged").length,v=C.filter(S=>S.status==="skipped").length,R=C.filter(S=>S.status==="error").length;return console.log(`[SYNC] Complete: ${U} created, ${E} updated, ${b} unchanged, ${v} skipped, ${R} errors`),(U>0||E>0)&&(console.log("[SYNC] Refreshing dashboard data..."),await e()),C}catch(O){return console.error("[SYNC] Sync failed:",O),[{status:"error",fileName:"sync",error:O.message}]}finally{n.value=!1}}function V(){if(!o.value)return;const k=window.electronAPI;k.onFilesChanged(_=>{(_.new.length>0||_.modified.length>0)&&(console.log(`[SYNC] Files changed: ${_.new.length} new, ${_.modified.length} modified`),D())}),k.onInitialFiles(_=>{console.log(`[SYNC] Initial files: ${_.files.length}`)}),console.log("[SYNC] Auto-sync setup complete")}return{isElectron:o,isSyncing:n,syncProgress:s,syncResults:r,lastSyncTime:i,syncTelemetryFiles:D,setupAutoSync:V}}const $V={key:0,class:"electron-titlebar"},HV={class:"titlebar-buttons-left"},jV=["title","disabled"],qV=["title","disabled"],WV=ct({__name:"ElectronTitlebar",setup(t){const e=Mi(),n=Gt(),s=de(!1),r=de(!1),i=de(!1),{isSyncing:o,syncTelemetryFiles:a,setupAutoSync:l}=BV(),{loadSessions:u}=GT(),h=de(!1),f=de([]);Ks(async()=>{if(s.value=!!window.electronAPI,s.value){try{r.value=await window.electronAPI.windowIsMaximized()}catch{console.log("[TITLEBAR] Could not get maximized state")}l()}});const p=()=>Object.keys(e.params).length>0,g=async()=>{if(p()){console.log("[TITLEBAR] Soft refresh for dynamic route:",e.fullPath),i.value=!0;try{const _=e.fullPath;await n.replace({path:"/panoramica",query:{_refresh:Date.now()}}),await zs(),await u(void 0,!0),await n.replace(_),console.log("[TITLEBAR] Soft refresh complete")}catch(_){console.error("[TITLEBAR] Soft refresh failed:",_),window.electronAPI?.pageRefresh()}finally{i.value=!1}}else console.log("[TITLEBAR] Hard refresh for static route:",e.fullPath),window.electronAPI?.pageRefresh()},I=async()=>{console.log("[TITLEBAR] Manual sync triggered");const _=await a();console.log("[TITLEBAR] Sync complete:",_),f.value=_,h.value=!0},y=()=>{window.electronAPI?.windowMinimize()},D=async()=>{const _=await window.electronAPI?.windowMaximize();r.value=_},V=()=>{window.electronAPI?.windowClose()},k=()=>{h.value=!1};return(_,C)=>{const O=_C;return s.value?(Te(),Oe("div",$V,[C[5]||(C[5]=K("div",{class:"titlebar-drag-region"},[K("span",{class:"titlebar-title"},"ACC Telemetry Dashboard")],-1)),K("div",HV,[K("button",{class:Wt(["titlebar-btn",{refreshing:i.value}]),title:i.value?"Aggiornamento in corso...":"Aggiorna pagina (Smart Refresh)",disabled:i.value,onClick:g},[...C[0]||(C[0]=[K("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[K("path",{d:"M21 12a9 9 0 11-9-9c2.52 0 4.93 1 6.74 2.74L21 8"}),K("path",{d:"M21 3v5h-5"})],-1)])],10,jV),K("button",{class:Wt(["titlebar-btn",{syncing:We(o)}]),title:We(o)?"Sincronizzazione in corso...":"Sincronizza file",disabled:We(o),onClick:I},[...C[1]||(C[1]=[K("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[K("path",{d:"M23 4v6h-6"}),K("path",{d:"M1 20v-6h6"}),K("path",{d:"M3.51 9a9 9 0 0114.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0020.49 15"})],-1)])],10,qV)]),K("div",{class:"titlebar-buttons-right"},[K("button",{class:"titlebar-btn",title:"Minimizza",onClick:y},[...C[2]||(C[2]=[K("svg",{width:"12",height:"12",viewBox:"0 0 12 12"},[K("rect",{y:"5",width:"12",height:"2",fill:"currentColor"})],-1)])]),K("button",{class:"titlebar-btn",title:"Massimizza",onClick:D},[...C[3]||(C[3]=[K("svg",{width:"12",height:"12",viewBox:"0 0 12 12"},[K("rect",{x:"1",y:"1",width:"10",height:"10",stroke:"currentColor","stroke-width":"2",fill:"none"})],-1)])]),K("button",{class:"titlebar-btn titlebar-close",title:"Chiudi",onClick:V},[...C[4]||(C[4]=[K("svg",{width:"12",height:"12",viewBox:"0 0 12 12"},[K("path",{d:"M1 1l10 10M11 1L1 11",stroke:"currentColor","stroke-width":"2"})],-1)])])]),be(O,{results:f.value,visible:h.value,onClose:k},null,8,["results","visible"])])):Qs("",!0)}}}),GV=Object.assign(pn(WV,[["__scopeId","data-v-79773db3"]]),{__name:"ElectronTitlebar"}),Qa="<div></div>",Nu=new WeakMap;function zV(t){if(Nu.has(t))return Nu.get(t);const e={...t};return e.render?e.render=(n,s,r,i,o,a)=>{if(i.mounted$??n.mounted$){const l=t.render?.bind(n)(n,s,r,i,o,a);return l.children===null||typeof l.children=="string"?fn(l):it(l)}return gu(n._.vnode.el,Qa)}:e.template&&=`
      <template v-if="mounted$">${t.template}</template>
      <template v-else>${Qa}</template>
    `,e.setup=(n,s)=>{const r=at(),i=cs(r.isHydrating===!1),o=xr();if(r.isHydrating){const l={...o.attrs},u=KV(o);for(const h in l)delete o.attrs[h];Ks(()=>{Object.assign(o.attrs,l),o.vnode.dirs=u})}Ks(()=>{i.value=!0});const a=t.setup?.(n,s)||{};return Uh(a)?Promise.resolve(a).then(l=>typeof l!="function"?(l||={},l.mounted$=i,l):(...u)=>{if(i.value||!r.isHydrating){const h=l(...u);return h.children===null||typeof h.children=="string"?fn(h):it(h)}return gu(o?.vnode.el,Qa)}):typeof a=="function"?(...l)=>{if(i.value){const u=a(...l),h=e.inheritAttrs!==!1?s.attrs:void 0;return u.children===null||typeof u.children=="string"?fn(u,h):it(u,h)}return gu(o?.vnode.el,Qa)}:Object.assign(a,{mounted$:i})},Nu.set(t,e),e}function KV(t){if(!t||!t.vnode.dirs)return null;const e=t.vnode.dirs;return t.vnode.dirs=null,e}function QV(t={}){const e=cs(""),n=cs(t.politeness||"polite"),s=Qy();function r(u="",h="polite"){e.value=u,n.value=h}function i(u){return r(u,"polite")}function o(u){return r(u,"assertive")}function a(){r(document?.title?.trim(),n.value)}function l(){s?.hooks?.removeHook("dom:rendered",a)}return a(),s?.hooks?.hook("dom:rendered",()=>{a()}),{_cleanup:l,message:e,politeness:n,set:r,polite:i,assertive:o}}function YV(t={}){const e=at(),n=e._routeAnnouncer||=QV(t);return t.politeness!==n.politeness.value&&(n.politeness.value=t.politeness||"polite"),$h()&&(e._routeAnnouncerDeps||=0,e._routeAnnouncerDeps++,kw(()=>{e._routeAnnouncerDeps--,e._routeAnnouncerDeps===0&&(n._cleanup(),delete e._routeAnnouncer)})),n}const JV=ct({name:"NuxtRouteAnnouncer",props:{atomic:{type:Boolean,default:!1},politeness:{type:String,default:"polite"}},setup(t,{slots:e,expose:n}){const{set:s,polite:r,assertive:i,message:o,politeness:a}=YV({politeness:t.politeness});return n({set:s,polite:r,assertive:i,message:o,politeness:a}),()=>it("span",{class:"nuxt-route-announcer",style:{position:"absolute"}},it("span",{role:"alert","aria-live":a.value,"aria-atomic":t.atomic,style:{border:"0",clip:"rect(0 0 0 0)","clip-path":"inset(50%)",height:"1px",width:"1px",overflow:"hidden",position:"absolute","white-space":"nowrap","word-wrap":"normal",margin:"-1px",padding:"0"}},e.default?e.default({message:o.value}):o.value))}}),XV=["type","value","placeholder","autocomplete","maxlength","disabled"],ZV=ct({__name:"BaseInput",props:{modelValue:{},type:{default:"text"},placeholder:{default:""},autocomplete:{default:"off"},maxlength:{},error:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(t,{emit:e}){const n=e,s=r=>{const i=r.target;n("update:modelValue",i.value)};return(r,i)=>(Te(),Oe("input",{type:t.type,value:t.modelValue,placeholder:t.placeholder,autocomplete:t.autocomplete,maxlength:t.maxlength,disabled:t.disabled,class:Wt(["form-input",{"form-input--error":t.error}]),onInput:s},null,42,XV))}}),id=Object.assign(pn(ZV,[["__scopeId","data-v-91b986db"]]),{__name:"UiBaseInput"}),eL={key:0,class:"form-error"},tL=ct({__name:"FormError",props:{message:{},visible:{type:Boolean,default:!1}},setup(t){return(e,n)=>t.visible&&t.message?(Te(),Oe("div",eL,Gs(t.message),1)):Qs("",!0)}}),od=Object.assign(pn(tL,[["__scopeId","data-v-75d4b223"]]),{__name:"UiFormError"}),nL=["type","disabled"],sL=ct({__name:"BaseButton",props:{variant:{default:"primary"},loading:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},type:{default:"button"}},emits:["click"],setup(t,{emit:e}){const n=t,s=e,r=i=>{!n.loading&&!n.disabled&&s("click",i)};return(i,o)=>(Te(),Oe("button",{type:t.type,class:Wt(["btn",`btn--${t.variant}`,{"btn--loading":t.loading}]),disabled:t.disabled||t.loading,onClick:r},[Vb(i.$slots,"default",{},void 0)],10,nL))}}),ad=Object.assign(pn(sL,[["__scopeId","data-v-d54604fc"]]),{__name:"UiBaseButton"}),rL=ct({__name:"LoginForm",emits:["submit","forgotPassword"],setup(t,{expose:e,emit:n}){const s=de(""),r=de(""),i=de(""),o=de(!1),a=n,l=()=>{if(i.value="",!s.value.trim()){i.value="Inserisci la tua email.";return}if(!r.value){i.value="Inserisci la password.";return}a("submit",{email:s.value.trim(),password:r.value})},u=()=>{i.value=""};return e({setError:h=>{i.value=h},setLoading:h=>{o.value=h},reset:()=>{s.value="",r.value="",i.value="",o.value=!1}}),(h,f)=>{const p=id,g=od,I=ad;return Te(),Oe("form",{class:"auth-form",onSubmit:il(l,["prevent"])},[be(p,{modelValue:s.value,"onUpdate:modelValue":f[0]||(f[0]=y=>s.value=y),type:"email",placeholder:"Email",autocomplete:"email",error:!!i.value&&i.value.includes("email"),onInput:u},null,8,["modelValue","error"]),be(p,{modelValue:r.value,"onUpdate:modelValue":f[1]||(f[1]=y=>r.value=y),type:"password",placeholder:"Password",autocomplete:"current-password",error:!!i.value&&i.value.includes("password"),onInput:u},null,8,["modelValue","error"]),be(g,{message:i.value,visible:!!i.value},null,8,["message","visible"]),be(I,{type:"submit",variant:"primary",loading:o.value},{default:an(()=>[...f[3]||(f[3]=[rt(" ACCEDI ",-1)])]),_:1},8,["loading"]),be(I,{variant:"link",onClick:f[2]||(f[2]=y=>a("forgotPassword"))},{default:an(()=>[...f[4]||(f[4]=[rt(" Password dimenticata? ",-1)])]),_:1})],32)}}}),iL=Object.assign(pn(rL,[["__scopeId","data-v-5927dcd2"]]),{__name:"AuthLoginForm"}),oL={class:"name-row"},aL=ct({__name:"RegisterForm",emits:["submit"],setup(t,{expose:e,emit:n}){const s=de(""),r=de(""),i=de(""),o=de(""),a=de(""),l=de(""),u=de(""),h=de(!1),f=n,p=()=>{if(u.value="",!s.value.trim()){u.value="Inserisci il tuo nome.";return}if(!r.value.trim()){u.value="Inserisci il tuo cognome.";return}if(!i.value.trim()){u.value="Scegli un nickname.";return}if(i.value.trim().length<3){u.value="Il nickname deve essere di almeno 3 caratteri.";return}if(!o.value.trim()){u.value="Inserisci la tua email.";return}if(!a.value){u.value="Inserisci una password.";return}if(a.value.length<6){u.value="La password deve essere di almeno 6 caratteri.";return}if(!l.value){u.value="Conferma la password.";return}if(a.value!==l.value){u.value="Le password non coincidono.";return}f("submit",{firstName:s.value.trim(),lastName:r.value.trim(),nickname:i.value.trim(),email:o.value.trim(),password:a.value})},g=()=>{u.value=""};return e({setError:I=>{u.value=I},setLoading:I=>{h.value=I},reset:()=>{s.value="",r.value="",i.value="",o.value="",a.value="",l.value="",u.value="",h.value=!1}}),(I,y)=>{const D=id,V=od,k=ad;return Te(),Oe("form",{class:"auth-form",onSubmit:il(p,["prevent"])},[K("div",oL,[be(D,{modelValue:s.value,"onUpdate:modelValue":y[0]||(y[0]=_=>s.value=_),type:"text",placeholder:"Nome",autocomplete:"given-name",onInput:g},null,8,["modelValue"]),be(D,{modelValue:r.value,"onUpdate:modelValue":y[1]||(y[1]=_=>r.value=_),type:"text",placeholder:"Cognome",autocomplete:"family-name",onInput:g},null,8,["modelValue"])]),be(D,{modelValue:i.value,"onUpdate:modelValue":y[2]||(y[2]=_=>i.value=_),type:"text",placeholder:"Nickname (visibile agli altri)",autocomplete:"username",maxlength:20,onInput:g},null,8,["modelValue"]),be(D,{modelValue:o.value,"onUpdate:modelValue":y[3]||(y[3]=_=>o.value=_),type:"email",placeholder:"Email",autocomplete:"email",onInput:g},null,8,["modelValue"]),be(D,{modelValue:a.value,"onUpdate:modelValue":y[4]||(y[4]=_=>a.value=_),type:"password",placeholder:"Password (min. 6 caratteri)",autocomplete:"new-password",onInput:g},null,8,["modelValue"]),be(D,{modelValue:l.value,"onUpdate:modelValue":y[5]||(y[5]=_=>l.value=_),type:"password",placeholder:"Conferma Password",autocomplete:"new-password",onInput:g},null,8,["modelValue"]),be(V,{message:u.value,visible:!!u.value},null,8,["message","visible"]),be(k,{type:"submit",variant:"primary",loading:h.value},{default:an(()=>[...y[6]||(y[6]=[rt(" REGISTRATI ",-1)])]),_:1},8,["loading"])],32)}}}),cL=Object.assign(pn(aL,[["__scopeId","data-v-d0f96507"]]),{__name:"AuthRegisterForm"}),lL={class:"reset-form"},uL={key:0,class:"reset-success"},hL=ct({__name:"ResetPasswordForm",emits:["submit","back"],setup(t,{expose:e,emit:n}){const s=de(""),r=de(""),i=de(!1),o=de(!1),a=n,l=()=>{if(r.value="",!s.value.trim()){r.value="Inserisci la tua email.";return}a("submit",s.value.trim())},u=()=>{r.value=""};return e({setError:h=>{r.value=h},setLoading:h=>{o.value=h},setSuccess:h=>{i.value=h},reset:()=>{s.value="",r.value="",i.value=!1,o.value=!1}}),(h,f)=>{const p=ad,g=id,I=od;return Te(),Oe("div",lL,[i.value?(Te(),Oe("div",uL,[f[4]||(f[4]=K("span",{class:"reset-success__icon"},"",-1)),f[5]||(f[5]=K("p",{class:"reset-success__text"}," Email inviata! Controlla la tua casella di posta (anche spam). ",-1)),be(p,{variant:"link",onClick:f[0]||(f[0]=y=>a("back"))},{default:an(()=>[...f[3]||(f[3]=[rt("  Torna al login ",-1)])]),_:1})])):(Te(),Oe("form",{key:1,class:"auth-form",onSubmit:il(l,["prevent"])},[f[8]||(f[8]=K("h3",{class:"reset-form__title"},"Recupera Password",-1)),f[9]||(f[9]=K("p",{class:"reset-form__description"},[rt(" Inserisci la tua email. Ti invieremo un link per reimpostare la password. "),K("br"),K("small",null,"Controlla anche la cartella spam.")],-1)),be(g,{modelValue:s.value,"onUpdate:modelValue":f[1]||(f[1]=y=>s.value=y),type:"email",placeholder:"Email",autocomplete:"email",onInput:u},null,8,["modelValue"]),be(I,{message:r.value,visible:!!r.value},null,8,["message","visible"]),be(p,{type:"submit",variant:"primary",loading:o.value},{default:an(()=>[...f[6]||(f[6]=[rt(" INVIA LINK ",-1)])]),_:1},8,["loading"]),be(p,{variant:"link",onClick:f[2]||(f[2]=y=>a("back"))},{default:an(()=>[...f[7]||(f[7]=[rt("  Torna al login ",-1)])]),_:1})],32))])}}}),fL=Object.assign(pn(hL,[["__scopeId","data-v-17ef1ec5"]]),{__name:"AuthResetPasswordForm"}),dL={class:"auth-overlay"},pL={class:"auth-card__body"},mL={key:0,class:"auth-nav"},gL={class:"auth-form-container"},_L=ct({__name:"AuthOverlay",emits:["login-success","register-success"],setup(t,{emit:e}){const n=de("login"),s=de("login"),r=de(),i=de(),o=de(),{login:a,register:l}=Wi(),u=de(!1),h=e,f=je(()=>{switch(s.value){case"register":return"form-height--register";case"reset":return"form-height--reset";default:return"form-height--login"}}),p=k=>{n.value=k,s.value=k},g=()=>{s.value="reset"},I=()=>{s.value="login",n.value="login",o.value?.reset()},y=async k=>{u.value=!0;const _=await a(k.email,k.password);u.value=!1,_.success?h("login-success",k.email):r.value?.setError(_.error)},D=async k=>{u.value=!0;const _=await l(k.email,k.password,k.nickname,k.firstName,k.lastName);u.value=!1,_.success?h("register-success",k.email):i.value?.setError(_.error)},V=k=>{console.log("[AUTH] Reset:",k),o.value?.setSuccess(!0)};return(k,_)=>{const C=iL,O=cL,U=fL;return Te(),Oe("div",dL,[_[4]||(_[4]=K("div",{class:"auth-overlay__ambient"},[K("div",{class:"ambient-glow ambient-glow--red"}),K("div",{class:"ambient-glow ambient-glow--gold"})],-1)),K("div",{class:Wt(["auth-card",f.value])},[_[3]||(_[3]=K("div",{class:"auth-card__glow"},null,-1)),K("div",pL,[_[2]||(_[2]=K("header",{class:"auth-header"},[K("div",{class:"brand"},[K("span",{class:"brand__badge"},"ACC"),K("span",{class:"brand__name"},"TELEMETRY")])],-1)),s.value!=="reset"?(Te(),Oe("nav",mL,[K("button",{class:Wt(["auth-nav__item",{"is-active":n.value==="login"}]),onClick:_[0]||(_[0]=E=>p("login"))}," Login ",2),K("button",{class:Wt(["auth-nav__item",{"is-active":n.value==="register"}]),onClick:_[1]||(_[1]=E=>p("register"))}," Registrati ",2)])):Qs("",!0),K("div",gL,[be(oa,{name:"liquid",mode:"out-in"},{default:an(()=>[s.value==="login"?(Te(),Yt(C,{key:"login",ref_key:"loginFormRef",ref:r,onSubmit:y,onForgotPassword:g},null,512)):s.value==="register"?(Te(),Yt(O,{key:"register",ref_key:"registerFormRef",ref:i,onSubmit:D},null,512)):(Te(),Yt(U,{key:"reset",ref_key:"resetFormRef",ref:o,onSubmit:V,onBack:I},null,512))]),_:1})])])],2)])}}}),yL=Object.assign(pn(_L,[["__scopeId","data-v-e0e84998"]]),{__name:"AuthOverlay"}),vL={class:"email-verification"},EL={class:"verify-email"},TL={key:0,class:"error-message"},wL={key:1,class:"error-message resend-error"},bL=["disabled"],IL=["disabled"],AL=ct({__name:"RegistrationSuccess",props:{email:{},requireEmailVerification:{type:Boolean}},emits:["goToDashboard","resendEmail"],setup(t,{emit:e}){const n=e,{checkEmailVerified:s,resendVerificationEmail:r}=Wi(),i=de(!1),o=de(!1),a=de(null),l=de(!1),u=de(!1),h=async()=>{i.value=!0,a.value=null,u.value=!1;const p=await r();i.value=!1,p.success?(o.value=!0,setTimeout(()=>o.value=!1,3e3)):a.value=p.error||"Errore invio email",n("resendEmail")},f=async()=>{l.value=!0,u.value=!1;const p=await s();l.value=!1,p.verified?n("goToDashboard"):u.value=!0};return(p,g)=>(Te(),Oe("div",vL,[g[2]||(g[2]=K("div",{class:"verify-icon"},"",-1)),g[3]||(g[3]=K("h2",{class:"verify-title"},"Verifica la tua email",-1)),K("p",EL,Gs(t.email),1),g[4]||(g[4]=K("div",{class:"verify-box"},[K("p",{class:"verify-text"},"Clicca il link nell'email per attivare l'account."),K("p",{class:"verify-hint"},"Controlla anche Spam")],-1)),u.value?(Te(),Oe("div",TL," Email non verificata ")):Qs("",!0),a.value?(Te(),Oe("div",wL,Gs(a.value),1)):Qs("",!0),K("button",{class:Wt(["verify-btn",{"verify-btn--loading":l.value}]),disabled:l.value,onClick:f},[l.value?(Te(),Oe(Ze,{key:0},[g[0]||(g[0]=K("span",{class:"spinner"},null,-1)),g[1]||(g[1]=rt(" Controllo... ",-1))],64)):(Te(),Oe(Ze,{key:1},[rt(" Ho confermato l'email ")],64))],10,bL),K("button",{class:"resend-btn",disabled:i.value||o.value,onClick:h},[i.value?(Te(),Oe(Ze,{key:0},[rt("Invio in corso...")],64)):o.value?(Te(),Oe(Ze,{key:1},[rt(" Email inviata")],64)):(Te(),Oe(Ze,{key:2},[rt("Rinvia email di verifica")],64))],8,IL)]))}}),RL=Object.assign(pn(AL,[["__scopeId","data-v-f958603b"]]),{__name:"AuthRegistrationSuccess"}),zT=(t="RouteProvider")=>ct({name:t,props:{route:{type:Object,required:!0},vnode:Object,vnodeRef:Object,renderKey:String,trackRootNodes:Boolean},setup(e){const n=e.renderKey,s=e.route,r={};for(const i in e.route)Object.defineProperty(r,i,{get:()=>n===e.renderKey?e.route[i]:s[i],enumerable:!0});return Zn(Cr,On(r)),()=>e.vnode?it(e.vnode,{ref:e.vnodeRef}):e.vnode}}),SL=zT(),t_=new WeakMap,CL=ct({name:"NuxtPage",inheritAttrs:!1,props:{name:{type:String},transition:{type:[Boolean,Object],default:void 0},keepalive:{type:[Boolean,Object],default:void 0},route:{type:Object},pageKey:{type:[Function,String],default:null}},setup(t,{attrs:e,slots:n,expose:s}){const r=at(),i=de(),o=Ot(Cr,null);let a;s({pageRef:i});const l=Ot(Hy,null);let u;const h=r.deferHydration();if(r.isHydrating){const p=r.hooks.hookOnce("app:error",h);Gt().beforeEach(p)}t.pageKey&&es(()=>t.pageKey,(p,g)=>{p!==g&&r.callHook("page:loading:start")});let f=!1;{const p=Gt().beforeResolve(()=>{f=!1});ra(()=>{p()})}return()=>it(hv,{name:t.name,route:t.route,...e},{default:p=>{const g=kL(o,p.route,p.Component),I=o&&o.matched.length===p.route.matched.length;if(!p.Component){if(u&&!I)return u;h();return}if(u&&l&&!l.isCurrent(p.route))return u;if(g&&o&&(!l||l?.isCurrent(o)))return I?u:null;const y=ih(p,t.pageKey),D=NL(o,p.route,p.Component);!r.isHydrating&&a===y&&!D&&zs(()=>{f=!0,r.callHook("page:loading:end")}),a=y;const V=!!(t.transition??p.route.meta.pageTransition??Bp),k=V&&PL([t.transition,p.route.meta.pageTransition,Bp,{onAfterLeave(){delete r._runningTransition,r.callHook("page:transition:finish",p.Component)}}]),_=t.keepalive??p.route.meta.keepalive??rR;return u=dv(V&&k,RS(_,it(tf,{suspensible:!0,onPending:()=>{V&&(r._runningTransition=!0),r.callHook("page:start",p.Component)},onResolve:async()=>{await zs();try{r._route.sync?.(),await r.callHook("page:finish",p.Component),delete r._runningTransition,!f&&!D&&(f=!0,await r.callHook("page:loading:end"))}finally{h()}}},{default:()=>{const C={key:y||void 0,vnode:n.default?DL(n.default,p):p.Component,route:p.route,renderKey:y||void 0,trackRootNodes:V,vnodeRef:i};if(!_)return it(SL,C);const O=p.Component.type,U=O;let E=t_.get(U);return E||(E=zT(O.name||O.__name),t_.set(U,E)),it(E,C)}}))).default(),u}})}});function PL(t){const e=[];for(const n of t)n&&e.push({...n,onAfterLeave:n.onAfterLeave?pf(n.onAfterLeave):void 0});return By(...e)}function kL(t,e,n){if(!t)return!1;const s=e.matched.findIndex(r=>r.components?.default===n?.type);return!s||s===-1?!1:e.matched.slice(0,s).some((r,i)=>r.components?.default!==t.matched[i]?.components?.default)||n&&ih({route:e,Component:n})!==ih({route:t,Component:n})}function NL(t,e,n){return t?e.matched.findIndex(r=>r.components?.default===n?.type)<e.matched.length-1:!1}function DL(t,e){const n=t(e);return n.length===1?it(n[0]):it(Ze,void 0,n)}const OL=ct({name:"LayoutLoader",inheritAttrs:!1,props:{name:String,layoutProps:Object},setup(t,e){return()=>it(Ms[t.name],t.layoutProps,e.slots)}}),VL={name:{type:[String,Boolean,Object],default:null},fallback:{type:[String,Object],default:null}},LL=ct({name:"NuxtLayout",inheritAttrs:!1,props:VL,setup(t,e){const n=at(),s=Ot(Cr),i=!s||s===Mi()?fv():s,o=je(()=>{let h=We(t.name)??i?.meta.layout??"default";return h&&!(h in Ms)&&t.fallback&&(h=We(t.fallback)),h}),a=cs();e.expose({layoutRef:a});const l=n.deferHydration();if(n.isHydrating){const h=n.hooks.hookOnce("app:error",l);Gt().beforeEach(h)}let u;return()=>{const h=o.value&&o.value in Ms,f=i?.meta.layoutTransition??sR,p=u;return u=o.value,dv(h&&f,{default:()=>it(tf,{suspensible:!0,onResolve:()=>{zs(l)}},{default:()=>it(ML,{layoutProps:yy(e.attrs,{ref:a}),key:o.value||void 0,name:o.value,shouldProvide:!t.name,isRenderingNewLayout:g=>g!==p&&g===o.value,hasTransition:!!f},e.slots)})}).default()}}}),ML=ct({name:"NuxtLayoutProvider",inheritAttrs:!1,props:{name:{type:[String,Boolean]},layoutProps:{type:Object},hasTransition:{type:Boolean},shouldProvide:{type:Boolean},isRenderingNewLayout:{type:Function,required:!0}},setup(t,e){const n=t.name;t.shouldProvide&&Zn(Hy,{isCurrent:i=>n===(i.meta.layout??"default")});const s=Ot(Cr);if(s&&s===Mi()){const i=fv(),o={};for(const a in i){const l=a;Object.defineProperty(o,l,{enumerable:!0,get:()=>t.isRenderingNewLayout(t.name)?i[l]:s[l]})}Zn(Cr,On(o))}return()=>!n||typeof n=="string"&&!(n in Ms)?e.slots.default?.():it(OL,{key:n,layoutProps:t.layoutProps,name:n},e.slots)}}),xL={class:"user-dropdown"},FL={class:"user-name"},UL={key:0,class:"dropdown-menu"},BL=ct({__name:"UserDropdown",props:{userName:{}},emits:["logout","goToProfile"],setup(t,{emit:e}){const n=e,s=de(!1),r=()=>{s.value=!s.value},i=()=>{s.value=!1},o=()=>{i(),n("goToProfile")},a=()=>{n("logout"),i()};return(l,u)=>{const h=Ob("click-outside");return ho((Te(),Oe("div",xL,[K("button",{class:"dropdown-trigger",onClick:r},[K("span",FL,Gs(t.userName),1),(Te(),Oe("svg",{class:Wt(["arrow-icon",{"arrow-icon--open":s.value}]),width:"12",height:"12",viewBox:"0 0 12 12",fill:"none"},[...u[0]||(u[0]=[K("path",{d:"M3 4.5L6 7.5L9 4.5",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)])],2))]),be(oa,{name:"dropdown"},{default:an(()=>[s.value?(Te(),Oe("div",UL,[K("button",{class:"dropdown-item",onClick:o},[...u[1]||(u[1]=[K("svg",{class:"item-icon",width:"16",height:"16",viewBox:"0 0 16 16",fill:"none"},[K("circle",{cx:"8",cy:"5",r:"3",stroke:"currentColor","stroke-width":"1.5"}),K("path",{d:"M2 14c0-3 2.5-5 6-5s6 2 6 5",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round"})],-1),rt(" Profilo ",-1)])]),u[3]||(u[3]=K("button",{class:"dropdown-item dropdown-item--disabled",disabled:""},[K("svg",{class:"item-icon",width:"16",height:"16",viewBox:"0 0 16 16",fill:"none"},[K("circle",{cx:"8",cy:"8",r:"6",stroke:"currentColor","stroke-width":"1.5"}),K("path",{d:"M8 5v3l2 2",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round"})]),rt(" Impostazioni ")],-1)),u[4]||(u[4]=K("div",{class:"dropdown-divider"},null,-1)),K("button",{class:"dropdown-item dropdown-item--danger",onClick:a},[...u[2]||(u[2]=[K("svg",{class:"item-icon",width:"16",height:"16",viewBox:"0 0 16 16",fill:"none"},[K("path",{d:"M6 2H4a2 2 0 00-2 2v8a2 2 0 002 2h2M11 11l3-3-3-3M14 8H6",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"})],-1),rt(" Logout ",-1)])])])):Qs("",!0)]),_:1})])),[[h,i]])}}}),$L=Object.assign(pn(BL,[["__scopeId","data-v-a926000c"]]),{__name:"UiUserDropdown"}),HL={class:"profile-page"},jL={class:"profile-header"},qL={class:"header-inner"},WL={class:"header-right"},GL={class:"profile-main"},zL={class:"profile-container"},KL={class:"profile-grid"},QL={class:"profile-sidebar"},YL={class:"user-info"},JL={class:"user-nickname"},XL={class:"user-email"},ZL={class:"profile-content"},eM={class:"profile-card"},tM={class:"equipment-form"},nM={class:"form-group"},sM={class:"form-group"},rM={class:"form-group"},iM={class:"form-group"},oM=["disabled"],aM=ct({__name:"ProfilePage",props:{userEmail:{},userNickname:{}},emits:["logout","back"],setup(t,{emit:e}){const n=t,s=e,{currentUser:r,getUserProfile:i}=Wi(),o=je(()=>n.userNickname?n.userNickname:n.userEmail?n.userEmail.split("@")[0]??"Utente":"Utente"),a=de({volante:"",corona:"",pedaliera:"",struttura:""}),l=de(!1),u=de(!1);Ks(async()=>{if(r.value){const I=await i(r.value.uid);I?.equipment&&(a.value={...a.value,...I.equipment})}});const h=async()=>{if(r.value){l.value=!0;try{const{doc:I,updateDoc:y}=await ut(async()=>{const{doc:V,updateDoc:k}=await Promise.resolve().then(()=>kV);return{doc:V,updateDoc:k}},void 0,import.meta.url),{db:D}=await ut(async()=>{const{db:V}=await Promise.resolve().then(()=>VV);return{db:V}},void 0,import.meta.url);await y(I(D,"users",r.value.uid),{equipment:a.value}),u.value=!0,setTimeout(()=>u.value=!1,2e3)}catch(I){console.error("[PROFILE] Save error:",I)}finally{l.value=!1}}},f=()=>s("logout"),p=()=>{},g=()=>{s("back")};return(I,y)=>{const D=$L;return Te(),Oe("div",HL,[K("header",jL,[K("div",qL,[K("div",{class:"header-left"},[K("button",{class:"back-btn",onClick:g},[...y[4]||(y[4]=[K("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none"},[K("path",{d:"M12 4L6 10L12 16",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1),rt(" Dashboard ",-1)])])]),y[5]||(y[5]=K("div",{class:"header-brand"},[K("span",{class:"brand-badge"},"ACC"),K("span",{class:"brand-name"},"TELEMETRY")],-1)),K("div",WL,[be(D,{"user-name":o.value,onLogout:f,onGoToProfile:p},null,8,["user-name"])])])]),K("main",GL,[K("div",zL,[y[12]||(y[12]=K("h1",{class:"page-title"},"Profilo Pilota",-1)),K("div",KL,[K("div",QL,[y[6]||(y[6]=_y('<div class="avatar-container" data-v-e186b73a><svg class="avatar-helmet" viewBox="0 0 100 100" fill="none" data-v-e186b73a><defs data-v-e186b73a><linearGradient id="helmetGrad" x1="0%" y1="0%" x2="100%" y2="100%" data-v-e186b73a><stop offset="0%" stop-color="#e10600" data-v-e186b73a></stop><stop offset="100%" stop-color="#ff6b00" data-v-e186b73a></stop></linearGradient></defs><path d="M50 10C30 10 15 25 15 45V60C15 75 25 85 40 88L45 90H55L60 88C75 85 85 75 85 60V45C85 25 70 10 50 10Z" stroke="url(#helmetGrad)" stroke-width="3" fill="none" data-v-e186b73a></path><path d="M20 45H80C80 45 78 55 50 55C22 55 20 45 20 45Z" stroke="url(#helmetGrad)" stroke-width="2" fill="rgba(225,6,0,0.1)" data-v-e186b73a></path><line x1="50" y1="15" x2="50" y2="85" stroke="url(#helmetGrad)" stroke-width="1.5" data-v-e186b73a></line></svg></div>',1)),K("div",YL,[K("h2",JL,Gs(o.value),1),K("p",XL,Gs(t.userEmail),1)])]),K("div",ZL,[K("div",eM,[y[11]||(y[11]=K("h3",{class:"card-title"},[K("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none"},[K("circle",{cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"2"}),K("circle",{cx:"12",cy:"12",r:"4",stroke:"currentColor","stroke-width":"2"})]),rt(" Attrezzatura Sim Racing ")],-1)),K("div",tM,[K("div",nM,[y[7]||(y[7]=K("label",{class:"form-label"},"Volante / Base",-1)),ho(K("input",{"onUpdate:modelValue":y[0]||(y[0]=V=>a.value.volante=V),type:"text",class:"form-input",placeholder:"Es. Fanatec CSL DD 8Nm"},null,512),[[Ba,a.value.volante]])]),K("div",sM,[y[8]||(y[8]=K("label",{class:"form-label"},"Corona / Rim",-1)),ho(K("input",{"onUpdate:modelValue":y[1]||(y[1]=V=>a.value.corona=V),type:"text",class:"form-input",placeholder:"Es. ClubSport Formula V2"},null,512),[[Ba,a.value.corona]])]),K("div",rM,[y[9]||(y[9]=K("label",{class:"form-label"},"Pedaliera",-1)),ho(K("input",{"onUpdate:modelValue":y[2]||(y[2]=V=>a.value.pedaliera=V),type:"text",class:"form-input",placeholder:"Es. CSL Pedals + Load Cell"},null,512),[[Ba,a.value.pedaliera]])]),K("div",iM,[y[10]||(y[10]=K("label",{class:"form-label"},"Struttura / Rig",-1)),ho(K("input",{"onUpdate:modelValue":y[3]||(y[3]=V=>a.value.struttura=V),type:"text",class:"form-input",placeholder:"Es. Next Level Racing 2.0"},null,512),[[Ba,a.value.struttura]])]),K("button",{class:Wt(["save-btn",{"save-btn--success":u.value}]),disabled:l.value,onClick:h},[l.value?(Te(),Oe(Ze,{key:0},[rt("Salvataggio...")],64)):u.value?(Te(),Oe(Ze,{key:1},[rt(" Salvato")],64)):(Te(),Oe(Ze,{key:2},[rt("Salva Modifiche")],64))],10,oM)])])])])])])])}}}),cM=Object.assign(pn(aM,[["__scopeId","data-v-e186b73a"]]),{__name:"ProfilePage"}),lM=zV(JV),uM={id:"app"},hM={key:"initializing",class:"initializing-screen"},fM={key:"register-success",class:"auth-wrapper"},dM={class:"auth-card-standalone"},pM={key:"loading",class:"loading-screen"},mM={key:"dashboard",class:"dashboard-wrapper"},gM={key:"profile",class:"profile-wrapper"},_M="dissolve-fade-zoom",yM=ct({__name:"app",setup(t){Mi();const e=Gt();Ks(()=>{const V=sessionStorage.getItem("spa-redirect-path");V&&(sessionStorage.removeItem("spa-redirect-path"),setTimeout(()=>{e.push(V)},100))});const{currentUser:n,isLoading:s,logout:r}=Wi(),i=de("initializing"),o=de("login"),a=de(""),l=de(!1),u=de(!1);es(s,V=>{!V&&!l.value&&(l.value=!0,n.value?(a.value=n.value.email||"",u.value&&!n.value.emailVerified?(i.value="auth",o.value="register-success"):i.value="dashboard"):i.value="auth")},{immediate:!0}),es(n,(V,k)=>{l.value&&(V?(a.value=V.email||"",u.value&&!V.emailVerified?(i.value!=="auth"||o.value!=="register-success")&&(i.value="auth",o.value="register-success"):i.value==="auth"&&o.value!=="register-success"&&(i.value="loading",setTimeout(()=>{i.value="dashboard"},1e3))):k&&(i.value="auth",o.value="login"))});const h=V=>{if(a.value=V,u.value&&n.value&&!n.value.emailVerified){o.value="register-success";return}i.value="loading",setTimeout(()=>{i.value="dashboard",e.push("/panoramica")},1500)},f=V=>{a.value=V,u.value?o.value="register-success":(i.value="loading",setTimeout(()=>{i.value="dashboard",e.push("/panoramica")},1500))},p=()=>{i.value="loading",setTimeout(()=>{i.value="dashboard",e.push("/panoramica")},1500)},g=()=>{console.log("[AUTH] Resending verification email to:",a.value)},I=async()=>{await r(),a.value="",o.value="login",i.value="auth"},y=()=>{i.value="profile"},D=()=>{i.value="dashboard"};return Zn("goToProfile",y),(V,k)=>{const _=GV,C=lM,O=yL,U=RL,E=CL,b=LL,v=cM;return Te(),Oe("div",uM,[be(_),be(C),be(oa,{name:_M,mode:"out-in"},{default:an(()=>[i.value==="initializing"?(Te(),Oe("div",hM,[...k[0]||(k[0]=[K("div",{class:"initializing-content"},[K("div",{class:"initializing-spinner"})],-1)])])):i.value==="auth"&&o.value!=="register-success"?(Te(),Yt(O,{key:"auth",onLoginSuccess:h,onRegisterSuccess:f})):i.value==="auth"&&o.value==="register-success"?(Te(),Oe("div",fM,[K("div",dM,[be(U,{email:a.value,"require-email-verification":u.value,onGoToDashboard:p,onResendEmail:g},null,8,["email","require-email-verification"])])])):i.value==="loading"?(Te(),Oe("div",pM,[...k[1]||(k[1]=[K("div",{class:"loading-content"},[K("div",{class:"loading-spinner"}),K("p",{class:"loading-text"},"Caricamento Dashboard...")],-1)])])):i.value==="dashboard"?(Te(),Oe("div",mM,[be(b,null,{default:an(()=>[be(E)]),_:1})])):i.value==="profile"?(Te(),Oe("div",gM,[be(v,{onBack:D,onLogout:I})])):Qs("",!0)]),_:1})])}}}),vM={__name:"nuxt-error-page",props:{error:Object},setup(t){const n=t.error,s=Number(n.statusCode||500),r=s===404,i=n.statusMessage??(r?"Page Not Found":"Internal Server Error"),o=n.message||n.toString(),a=void 0,h=r?gc(()=>ut(()=>import("./Czg42y49.js"),__vite__mapDeps([41,5,42]),import.meta.url)):gc(()=>ut(()=>import("./DuFKNKfi.js"),__vite__mapDeps([43,44]),import.meta.url));return(f,p)=>(Te(),Yt(We(h),Aw(gy({statusCode:We(s),statusMessage:We(i),description:We(o),stack:We(a)})),null,16))}},EM={key:0},n_={__name:"nuxt-root",setup(t){const e=()=>null,n=at(),s=n.deferHydration();if(n.isHydrating){const u=n.hooks.hookOnce("app:error",s);Gt().beforeEach(u)}const r=!1;Zn(Cr,Mi()),n.hooks.callHookWith(u=>u.map(h=>h()),"vue:setup");const i=al(),o=!1,a=/bot\b|chrome-lighthouse|facebookexternalhit|google\b/i;W_((u,h,f)=>{if(n.hooks.callHook("vue:error",u,h,f).catch(p=>console.error("[nuxt] Error in `vue:error` hook",p)),a.test(navigator.userAgent))return n.hooks.callHook("app:error",u),console.error(`[nuxt] Not rendering error page for bot with user agent \`${navigator.userAgent}\`:`,u),!1;if(qy(u)&&(u.fatal||u.unhandled))return n.runWithContext(()=>_r(u)),!1});const l=!1;return(u,h)=>(Te(),Yt(tf,{onResolve:We(s)},{default:an(()=>[We(o)?(Te(),Oe("div",EM)):We(i)?(Te(),Yt(We(vM),{key:1,error:We(i)},null,8,["error"])):We(l)?(Te(),Yt(We(e),{key:2,context:We(l)},null,8,["context"])):We(r)?(Te(),Yt(Db(We(r)),{key:3})):(Te(),Yt(We(yM),{key:4}))]),_:1},8,["onResolve"]))}};let s_;{let t;s_=async function(){if(t)return t;const n=!!(window.__NUXT__?.serverRendered??document.getElementById("__NUXT_DATA__")?.dataset.ssr==="true"),s=n?JI(n_):YI(n_),r=cR({vueApp:s});async function i(o){await r.callHook("app:error",o),r.payload.error||=Ar(o)}s.config.errorHandler=i,r.hook("app:suspense:resolve",()=>{s.config.errorHandler===i&&(s.config.errorHandler=void 0)}),!n&&$p.id&&r.hook("app:suspense:resolve",()=>{document.getElementById($p.id)?.remove()});try{await hR(r,uC)}catch(o){i(o)}try{await r.hooks.callHook("app:created",s),await r.hooks.callHook("app:beforeMount",s),s.mount(iR),await r.hooks.callHook("app:mounted",s),await zs()}catch(o){i(o)}return s},t=s_().catch(e=>{throw console.error("Error while mounting app:",e),e})}export{Jc as $,ym as A,kM as B,RM as C,PM as D,Oe as E,Te as F,K as G,Gs as H,be as I,an as J,rt as K,Yt as L,We as M,cM as N,Mi as O,Qs as P,Ze as Q,wM as R,Xt as S,dt as T,Fs as U,lc as V,gi as W,Vo as X,Lo as Y,Di as Z,pn as _,Wi as a,Wt as a0,Vh as a1,GT as a2,LM as a3,OM as a4,DM as a5,VM as a6,ho as a7,IM as a8,il as a9,Ba as aa,_y as ab,AV as ac,FM as ad,bM as ae,Vb as af,$L as ag,EI as ah,q_ as ai,Fe as aj,zs as ak,Zc as al,oa as am,xM as an,MM as ao,ct as b,Gt as c,SM as d,hi as e,at as f,mf as g,ra as h,Ot as i,it as j,TM as k,Sy as l,TR as m,CM as n,Ks as o,Zn as p,oC as q,de as r,cs as s,je as t,ol as u,Fr as v,es as w,rf as x,bA as y,Ic as z};
