const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./uzzIyGLq.js","./index.Du2RZnax.css","./Dqdm6ct9.js","./_...BBgSxync.css","./DW27G8zg.js","./BzvGOR5o.js","./dev-upload.CAfU5vij.css","./Dx3LUgOQ.js","./CxIsHTYT.js","./cA5BAEAQ.js","./PageContainer.DMW25oBZ.css","./zTv11VAj.js","./CZ92alvS.js","./PanoramicaPage.CaDbknaw.css","./D1HxNdSn.js","./Di8c-F2g.js","./BZ8YxlIc.js","./PaginationControls.CNLm8WGw.css","./xJY-dFrt.js","./TrackDetailPage.DRYxXRiT.css","./D_P-yhZe.js","./dev-cleanup.DSSvWY_E.css","./BHqjfx-Q.js","./CzWWYQCR.js","./SessionDetailPage.DPDED-8t.css","./BfdC79i_.js","./SessioniPage.BxYhrgzv.css","./DNWDm6D3.js","./PistePage.BOiJ3snG.css","./_id_.D9laFF8O.css","./DWHHFCOg.js","./DoRzC1iE.js","./index.Dzufv81H.css","./BVGhW9a3.js","./C_RyVv_l.js","./dev-data-audit.5t95g-Ny.css","./DXMMiDKS.js","./DofO93PB.js","./coach.Fr5SOs7k.css","./Do3o9jA3.js","./dashboard.jH60z8Xe.css","./C30T453H.js","./error-404.BLrjNXsr.css","./DJCMSnYg.js","./error-500.DLkAwcfL.css"])))=>i.map(i=>d[i]);
(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function n(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(r){if(r.ep)return;r.ep=!0;const i=n(r);fetch(r.href,i)}})();function Jh(t){const e=Object.create(null);for(const n of t.split(","))e[n]=1;return n=>n in e}const Je={},ci=[],Mn=()=>{},I_=()=>!1,ia=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),Xh=t=>t.startsWith("onUpdate:"),Pt=Object.assign,Zh=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},jw=Object.prototype.hasOwnProperty,Ge=(t,e)=>jw.call(t,e),ve=Array.isArray,li=t=>xi(t)==="[object Map]",Mi=t=>xi(t)==="[object Set]",lp=t=>xi(t)==="[object Date]",qw=t=>xi(t)==="[object RegExp]",be=t=>typeof t=="function",nt=t=>typeof t=="string",In=t=>typeof t=="symbol",Ke=t=>t!==null&&typeof t=="object",ef=t=>(Ke(t)||be(t))&&be(t.then)&&be(t.catch),A_=Object.prototype.toString,xi=t=>A_.call(t),Gw=t=>xi(t).slice(8,-1),R_=t=>xi(t)==="[object Object]",sl=t=>nt(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,ui=Jh(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),rl=t=>{const e=Object.create(null);return(n=>e[n]||(e[n]=t(n)))},Ww=/-\w/g,mn=rl(t=>t.replace(Ww,e=>e.slice(1).toUpperCase())),zw=/\B([A-Z])/g,or=rl(t=>t.replace(zw,"-$1").toLowerCase()),il=rl(t=>t.charAt(0).toUpperCase()+t.slice(1)),ou=rl(t=>t?`on${il(t)}`:""),Gs=(t,e)=>!Object.is(t,e),hi=(t,...e)=>{for(let n=0;n<t.length;n++)t[n](...e)},S_=(t,e,n,s=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:s,value:n})},ol=t=>{const e=parseFloat(t);return isNaN(e)?t:e},C_=t=>{const e=nt(t)?Number(t):NaN;return isNaN(e)?t:e};let up;const al=()=>up||(up=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function cl(t){if(ve(t)){const e={};for(let n=0;n<t.length;n++){const s=t[n],r=nt(s)?Jw(s):cl(s);if(r)for(const i in r)e[i]=r[i]}return e}else if(nt(t)||Ke(t))return t}const Kw=/;(?![^(]*\))/g,Qw=/:([^]+)/,Yw=/\/\*[^]*?\*\//g;function Jw(t){const e={};return t.replace(Yw,"").split(Kw).forEach(n=>{if(n){const s=n.split(Qw);s.length>1&&(e[s[0].trim()]=s[1].trim())}}),e}function Ct(t){let e="";if(nt(t))e=t;else if(ve(t))for(let n=0;n<t.length;n++){const s=Ct(t[n]);s&&(e+=s+" ")}else if(Ke(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}function Xw(t){if(!t)return null;let{class:e,style:n}=t;return e&&!nt(e)&&(t.class=Ct(e)),n&&(t.style=cl(n)),t}const Zw="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",eb=Jh(Zw);function P_(t){return!!t||t===""}function tb(t,e){if(t.length!==e.length)return!1;let n=!0;for(let s=0;n&&s<t.length;s++)n=oa(t[s],e[s]);return n}function oa(t,e){if(t===e)return!0;let n=lp(t),s=lp(e);if(n||s)return n&&s?t.getTime()===e.getTime():!1;if(n=In(t),s=In(e),n||s)return t===e;if(n=ve(t),s=ve(e),n||s)return n&&s?tb(t,e):!1;if(n=Ke(t),s=Ke(e),n||s){if(!n||!s)return!1;const r=Object.keys(t).length,i=Object.keys(e).length;if(r!==i)return!1;for(const o in t){const a=t.hasOwnProperty(o),l=e.hasOwnProperty(o);if(a&&!l||!a&&l||!oa(t[o],e[o]))return!1}}return String(t)===String(e)}function tf(t,e){return t.findIndex(n=>oa(n,e))}const k_=t=>!!(t&&t.__v_isRef===!0),fn=t=>nt(t)?t:t==null?"":ve(t)||Ke(t)&&(t.toString===A_||!be(t.toString))?k_(t)?fn(t.value):JSON.stringify(t,N_,2):String(t),N_=(t,e)=>k_(e)?N_(t,e.value):li(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[s,r],i)=>(n[au(s,i)+" =>"]=r,n),{})}:Mi(e)?{[`Set(${e.size})`]:[...e.values()].map(n=>au(n))}:In(e)?au(e):Ke(e)&&!ve(e)&&!R_(e)?String(e):e,au=(t,e="")=>{var n;return In(t)?`Symbol(${(n=t.description)!=null?n:e})`:t};let xt;class D_{constructor(e=!1){this.detached=e,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=xt,!e&&xt&&(this.index=(xt.scopes||(xt.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].pause();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].resume();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].resume()}}run(e){if(this._active){const n=xt;try{return xt=this,e()}finally{xt=n}}}on(){++this._on===1&&(this.prevScope=xt,xt=this)}off(){this._on>0&&--this._on===0&&(xt=this.prevScope,this.prevScope=void 0)}stop(e){if(this._active){this._active=!1;let n,s;for(n=0,s=this.effects.length;n<s;n++)this.effects[n].stop();for(this.effects.length=0,n=0,s=this.cleanups.length;n<s;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,s=this.scopes.length;n<s;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const r=this.parent.scopes.pop();r&&r!==this&&(this.parent.scopes[this.index]=r,r.index=this.index)}this.parent=void 0}}}function nb(t){return new D_(t)}function nf(){return xt}function sb(t,e=!1){xt&&xt.cleanups.push(t)}let Xe;const cu=new WeakSet;class O_{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,xt&&xt.active&&xt.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,cu.has(this)&&(cu.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||L_(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,hp(this),M_(this);const e=Xe,n=Tn;Xe=this,Tn=!0;try{return this.fn()}finally{x_(this),Xe=e,Tn=n,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)of(e);this.deps=this.depsTail=void 0,hp(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?cu.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Gu(this)&&this.run()}get dirty(){return Gu(this)}}let V_=0,Io,Ao;function L_(t,e=!1){if(t.flags|=8,e){t.next=Ao,Ao=t;return}t.next=Io,Io=t}function sf(){V_++}function rf(){if(--V_>0)return;if(Ao){let e=Ao;for(Ao=void 0;e;){const n=e.next;e.next=void 0,e.flags&=-9,e=n}}let t;for(;Io;){let e=Io;for(Io=void 0;e;){const n=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(s){t||(t=s)}e=n}}if(t)throw t}function M_(t){for(let e=t.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function x_(t){let e,n=t.depsTail,s=n;for(;s;){const r=s.prevDep;s.version===-1?(s===n&&(n=r),of(s),rb(s)):e=s,s.dep.activeLink=s.prevActiveLink,s.prevActiveLink=void 0,s=r}t.deps=e,t.depsTail=n}function Gu(t){for(let e=t.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(F_(e.dep.computed)||e.dep.version!==e.version))return!0;return!!t._dirty}function F_(t){if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===$o)||(t.globalVersion=$o,!t.isSSR&&t.flags&128&&(!t.deps&&!t._dirty||!Gu(t))))return;t.flags|=2;const e=t.dep,n=Xe,s=Tn;Xe=t,Tn=!0;try{M_(t);const r=t.fn(t._value);(e.version===0||Gs(r,t._value))&&(t.flags|=128,t._value=r,e.version++)}catch(r){throw e.version++,r}finally{Xe=n,Tn=s,x_(t),t.flags&=-3}}function of(t,e=!1){const{dep:n,prevSub:s,nextSub:r}=t;if(s&&(s.nextSub=r,t.prevSub=void 0),r&&(r.prevSub=s,t.nextSub=void 0),n.subs===t&&(n.subs=s,!s&&n.computed)){n.computed.flags&=-5;for(let i=n.computed.deps;i;i=i.nextDep)of(i,!0)}!e&&!--n.sc&&n.map&&n.map.delete(n.key)}function rb(t){const{prevDep:e,nextDep:n}=t;e&&(e.nextDep=n,t.prevDep=void 0),n&&(n.prevDep=e,t.nextDep=void 0)}let Tn=!0;const U_=[];function ls(){U_.push(Tn),Tn=!1}function us(){const t=U_.pop();Tn=t===void 0?!0:t}function hp(t){const{cleanup:e}=t;if(t.cleanup=void 0,e){const n=Xe;Xe=void 0;try{e()}finally{Xe=n}}}let $o=0;class ib{constructor(e,n){this.sub=e,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class af{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(e){if(!Xe||!Tn||Xe===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==Xe)n=this.activeLink=new ib(Xe,this),Xe.deps?(n.prevDep=Xe.depsTail,Xe.depsTail.nextDep=n,Xe.depsTail=n):Xe.deps=Xe.depsTail=n,B_(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const s=n.nextDep;s.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=s),n.prevDep=Xe.depsTail,n.nextDep=void 0,Xe.depsTail.nextDep=n,Xe.depsTail=n,Xe.deps===n&&(Xe.deps=s)}return n}trigger(e){this.version++,$o++,this.notify(e)}notify(e){sf();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{rf()}}}function B_(t){if(t.dep.sc++,t.sub.flags&4){const e=t.dep.computed;if(e&&!t.dep.subs){e.flags|=20;for(let s=e.deps;s;s=s.nextDep)B_(s)}const n=t.dep.subs;n!==t&&(t.prevSub=n,n&&(n.nextSub=t)),t.dep.subs=t}}const Tc=new WeakMap,Cr=Symbol(""),Wu=Symbol(""),Ho=Symbol("");function Ut(t,e,n){if(Tn&&Xe){let s=Tc.get(t);s||Tc.set(t,s=new Map);let r=s.get(n);r||(s.set(n,r=new af),r.map=s,r.key=n),r.track()}}function Zn(t,e,n,s,r,i){const o=Tc.get(t);if(!o){$o++;return}const a=l=>{l&&l.trigger()};if(sf(),e==="clear")o.forEach(a);else{const l=ve(t),u=l&&sl(n);if(l&&n==="length"){const h=Number(s);o.forEach((f,p)=>{(p==="length"||p===Ho||!In(p)&&p>=h)&&a(f)})}else switch((n!==void 0||o.has(void 0))&&a(o.get(n)),u&&a(o.get(Ho)),e){case"add":l?u&&a(o.get("length")):(a(o.get(Cr)),li(t)&&a(o.get(Wu)));break;case"delete":l||(a(o.get(Cr)),li(t)&&a(o.get(Wu)));break;case"set":li(t)&&a(o.get(Cr));break}}rf()}function ob(t,e){const n=Tc.get(t);return n&&n.get(e)}function Jr(t){const e=Fe(t);return e===t?e:(Ut(e,"iterate",Ho),an(t)?e:e.map(An))}function ll(t){return Ut(t=Fe(t),"iterate",Ho),t}function Ds(t,e){return Hn(t)?Ws(t)?Ei(An(e)):Ei(e):An(e)}const ab={__proto__:null,[Symbol.iterator](){return lu(this,Symbol.iterator,t=>Ds(this,t))},concat(...t){return Jr(this).concat(...t.map(e=>ve(e)?Jr(e):e))},entries(){return lu(this,"entries",t=>(t[1]=Ds(this,t[1]),t))},every(t,e){return zn(this,"every",t,e,void 0,arguments)},filter(t,e){return zn(this,"filter",t,e,n=>n.map(s=>Ds(this,s)),arguments)},find(t,e){return zn(this,"find",t,e,n=>Ds(this,n),arguments)},findIndex(t,e){return zn(this,"findIndex",t,e,void 0,arguments)},findLast(t,e){return zn(this,"findLast",t,e,n=>Ds(this,n),arguments)},findLastIndex(t,e){return zn(this,"findLastIndex",t,e,void 0,arguments)},forEach(t,e){return zn(this,"forEach",t,e,void 0,arguments)},includes(...t){return uu(this,"includes",t)},indexOf(...t){return uu(this,"indexOf",t)},join(t){return Jr(this).join(t)},lastIndexOf(...t){return uu(this,"lastIndexOf",t)},map(t,e){return zn(this,"map",t,e,void 0,arguments)},pop(){return ho(this,"pop")},push(...t){return ho(this,"push",t)},reduce(t,...e){return fp(this,"reduce",t,e)},reduceRight(t,...e){return fp(this,"reduceRight",t,e)},shift(){return ho(this,"shift")},some(t,e){return zn(this,"some",t,e,void 0,arguments)},splice(...t){return ho(this,"splice",t)},toReversed(){return Jr(this).toReversed()},toSorted(t){return Jr(this).toSorted(t)},toSpliced(...t){return Jr(this).toSpliced(...t)},unshift(...t){return ho(this,"unshift",t)},values(){return lu(this,"values",t=>Ds(this,t))}};function lu(t,e,n){const s=ll(t),r=s[e]();return s!==t&&!an(t)&&(r._next=r.next,r.next=()=>{const i=r._next();return i.done||(i.value=n(i.value)),i}),r}const cb=Array.prototype;function zn(t,e,n,s,r,i){const o=ll(t),a=o!==t&&!an(t),l=o[e];if(l!==cb[e]){const f=l.apply(t,i);return a?An(f):f}let u=n;o!==t&&(a?u=function(f,p){return n.call(this,Ds(t,f),p,t)}:n.length>2&&(u=function(f,p){return n.call(this,f,p,t)}));const h=l.call(o,u,s);return a&&r?r(h):h}function fp(t,e,n,s){const r=ll(t);let i=n;return r!==t&&(an(t)?n.length>3&&(i=function(o,a,l){return n.call(this,o,a,l,t)}):i=function(o,a,l){return n.call(this,o,Ds(t,a),l,t)}),r[e](i,...s)}function uu(t,e,n){const s=Fe(t);Ut(s,"iterate",Ho);const r=s[e](...n);return(r===-1||r===!1)&&ul(n[0])?(n[0]=Fe(n[0]),s[e](...n)):r}function ho(t,e,n=[]){ls(),sf();const s=Fe(t)[e].apply(t,n);return rf(),us(),s}const lb=Jh("__proto__,__v_isRef,__isVue"),$_=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(In));function ub(t){In(t)||(t=String(t));const e=Fe(this);return Ut(e,"has",t),e.hasOwnProperty(t)}class H_{constructor(e=!1,n=!1){this._isReadonly=e,this._isShallow=n}get(e,n,s){if(n==="__v_skip")return e.__v_skip;const r=this._isReadonly,i=this._isShallow;if(n==="__v_isReactive")return!r;if(n==="__v_isReadonly")return r;if(n==="__v_isShallow")return i;if(n==="__v_raw")return s===(r?i?Eb:W_:i?G_:q_).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(s)?e:void 0;const o=ve(e);if(!r){let l;if(o&&(l=ab[n]))return l;if(n==="hasOwnProperty")return ub}const a=Reflect.get(e,n,vt(e)?e:s);if((In(n)?$_.has(n):lb(n))||(r||Ut(e,"get",n),i))return a;if(vt(a)){const l=o&&sl(n)?a:a.value;return r&&Ke(l)?Ku(l):l}return Ke(a)?r?Ku(a):ar(a):a}}class j_ extends H_{constructor(e=!1){super(!1,e)}set(e,n,s,r){let i=e[n];const o=ve(e)&&sl(n);if(!this._isShallow){const u=Hn(i);if(!an(s)&&!Hn(s)&&(i=Fe(i),s=Fe(s)),!o&&vt(i)&&!vt(s))return u||(i.value=s),!0}const a=o?Number(n)<e.length:Ge(e,n),l=Reflect.set(e,n,s,vt(e)?e:r);return e===Fe(r)&&(a?Gs(s,i)&&Zn(e,"set",n,s):Zn(e,"add",n,s)),l}deleteProperty(e,n){const s=Ge(e,n);e[n];const r=Reflect.deleteProperty(e,n);return r&&s&&Zn(e,"delete",n,void 0),r}has(e,n){const s=Reflect.has(e,n);return(!In(n)||!$_.has(n))&&Ut(e,"has",n),s}ownKeys(e){return Ut(e,"iterate",ve(e)?"length":Cr),Reflect.ownKeys(e)}}class hb extends H_{constructor(e=!1){super(!0,e)}set(e,n){return!0}deleteProperty(e,n){return!0}}const fb=new j_,db=new hb,pb=new j_(!0);const zu=t=>t,Fa=t=>Reflect.getPrototypeOf(t);function mb(t,e,n){return function(...s){const r=this.__v_raw,i=Fe(r),o=li(i),a=t==="entries"||t===Symbol.iterator&&o,l=t==="keys"&&o,u=r[t](...s),h=n?zu:e?Ei:An;return!e&&Ut(i,"iterate",l?Wu:Cr),{next(){const{value:f,done:p}=u.next();return p?{value:f,done:p}:{value:a?[h(f[0]),h(f[1])]:h(f),done:p}},[Symbol.iterator](){return this}}}}function Ua(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function gb(t,e){const n={get(r){const i=this.__v_raw,o=Fe(i),a=Fe(r);t||(Gs(r,a)&&Ut(o,"get",r),Ut(o,"get",a));const{has:l}=Fa(o),u=e?zu:t?Ei:An;if(l.call(o,r))return u(i.get(r));if(l.call(o,a))return u(i.get(a));i!==o&&i.get(r)},get size(){const r=this.__v_raw;return!t&&Ut(Fe(r),"iterate",Cr),r.size},has(r){const i=this.__v_raw,o=Fe(i),a=Fe(r);return t||(Gs(r,a)&&Ut(o,"has",r),Ut(o,"has",a)),r===a?i.has(r):i.has(r)||i.has(a)},forEach(r,i){const o=this,a=o.__v_raw,l=Fe(a),u=e?zu:t?Ei:An;return!t&&Ut(l,"iterate",Cr),a.forEach((h,f)=>r.call(i,u(h),u(f),o))}};return Pt(n,t?{add:Ua("add"),set:Ua("set"),delete:Ua("delete"),clear:Ua("clear")}:{add(r){!e&&!an(r)&&!Hn(r)&&(r=Fe(r));const i=Fe(this);return Fa(i).has.call(i,r)||(i.add(r),Zn(i,"add",r,r)),this},set(r,i){!e&&!an(i)&&!Hn(i)&&(i=Fe(i));const o=Fe(this),{has:a,get:l}=Fa(o);let u=a.call(o,r);u||(r=Fe(r),u=a.call(o,r));const h=l.call(o,r);return o.set(r,i),u?Gs(i,h)&&Zn(o,"set",r,i):Zn(o,"add",r,i),this},delete(r){const i=Fe(this),{has:o,get:a}=Fa(i);let l=o.call(i,r);l||(r=Fe(r),l=o.call(i,r)),a&&a.call(i,r);const u=i.delete(r);return l&&Zn(i,"delete",r,void 0),u},clear(){const r=Fe(this),i=r.size!==0,o=r.clear();return i&&Zn(r,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(r=>{n[r]=mb(r,t,e)}),n}function cf(t,e){const n=gb(t,e);return(s,r,i)=>r==="__v_isReactive"?!t:r==="__v_isReadonly"?t:r==="__v_raw"?s:Reflect.get(Ge(n,r)&&r in s?n:s,r,i)}const _b={get:cf(!1,!1)},yb={get:cf(!1,!0)},vb={get:cf(!0,!1)};const q_=new WeakMap,G_=new WeakMap,W_=new WeakMap,Eb=new WeakMap;function Tb(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function wb(t){return t.__v_skip||!Object.isExtensible(t)?0:Tb(Gw(t))}function ar(t){return Hn(t)?t:lf(t,!1,fb,_b,q_)}function Ln(t){return lf(t,!1,pb,yb,G_)}function Ku(t){return lf(t,!0,db,vb,W_)}function lf(t,e,n,s,r){if(!Ke(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const i=wb(t);if(i===0)return t;const o=r.get(t);if(o)return o;const a=new Proxy(t,i===2?s:n);return r.set(t,a),a}function Ws(t){return Hn(t)?Ws(t.__v_raw):!!(t&&t.__v_isReactive)}function Hn(t){return!!(t&&t.__v_isReadonly)}function an(t){return!!(t&&t.__v_isShallow)}function ul(t){return t?!!t.__v_raw:!1}function Fe(t){const e=t&&t.__v_raw;return e?Fe(e):t}function bb(t){return!Ge(t,"__v_skip")&&Object.isExtensible(t)&&S_(t,"__v_skip",!0),t}const An=t=>Ke(t)?ar(t):t,Ei=t=>Ke(t)?Ku(t):t;function vt(t){return t?t.__v_isRef===!0:!1}function le(t){return z_(t,!1)}function hs(t){return z_(t,!0)}function z_(t,e){return vt(t)?t:new Ib(t,e)}class Ib{constructor(e,n){this.dep=new af,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?e:Fe(e),this._value=n?e:An(e),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(e){const n=this._rawValue,s=this.__v_isShallow||an(e)||Hn(e);e=s?e:Fe(e),Gs(e,n)&&(this._rawValue=e,this._value=s?e:An(e),this.dep.trigger())}}function ze(t){return vt(t)?t.value:t}function Ab(t){return be(t)?t():ze(t)}const Rb={get:(t,e,n)=>e==="__v_raw"?t:ze(Reflect.get(t,e,n)),set:(t,e,n,s)=>{const r=t[e];return vt(r)&&!vt(n)?(r.value=n,!0):Reflect.set(t,e,n,s)}};function K_(t){return Ws(t)?t:new Proxy(t,Rb)}class Sb{constructor(e,n,s){this._object=e,this._key=n,this._defaultValue=s,this.__v_isRef=!0,this._value=void 0,this._raw=Fe(e);let r=!0,i=e;if(!ve(e)||!sl(String(n)))do r=!ul(i)||an(i);while(r&&(i=i.__v_raw));this._shallow=r}get value(){let e=this._object[this._key];return this._shallow&&(e=ze(e)),this._value=e===void 0?this._defaultValue:e}set value(e){if(this._shallow&&vt(this._raw[this._key])){const n=this._object[this._key];if(vt(n)){n.value=e;return}}this._object[this._key]=e}get dep(){return ob(this._raw,this._key)}}class Cb{constructor(e){this._getter=e,this.__v_isRef=!0,this.__v_isReadonly=!0,this._value=void 0}get value(){return this._value=this._getter()}}function Pb(t,e,n){return vt(t)?t:be(t)?new Cb(t):Ke(t)&&arguments.length>1?kb(t,e,n):le(t)}function kb(t,e,n){return new Sb(t,e,n)}class Nb{constructor(e,n,s){this.fn=e,this.setter=n,this._value=void 0,this.dep=new af(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=$o-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=s}notify(){if(this.flags|=16,!(this.flags&8)&&Xe!==this)return L_(this,!0),!0}get value(){const e=this.dep.track();return F_(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function Db(t,e,n=!1){let s,r;return be(t)?s=t:(s=t.get,r=t.set),new Nb(s,r,n)}const Ba={},wc=new WeakMap;let wr;function Ob(t,e=!1,n=wr){if(n){let s=wc.get(n);s||wc.set(n,s=[]),s.push(t)}}function Vb(t,e,n=Je){const{immediate:s,deep:r,once:i,scheduler:o,augmentJob:a,call:l}=n,u=I=>r?I:an(I)||r===!1||r===0?es(I,1):es(I);let h,f,p,g,w=!1,v=!1;if(vt(t)?(f=()=>t.value,w=an(t)):Ws(t)?(f=()=>u(t),w=!0):ve(t)?(v=!0,w=t.some(I=>Ws(I)||an(I)),f=()=>t.map(I=>{if(vt(I))return I.value;if(Ws(I))return u(I);if(be(I))return l?l(I,2):I()})):be(t)?e?f=l?()=>l(t,2):t:f=()=>{if(p){ls();try{p()}finally{us()}}const I=wr;wr=h;try{return l?l(t,3,[g]):t(g)}finally{wr=I}}:f=Mn,e&&r){const I=f,O=r===!0?1/0:r;f=()=>es(I(),O)}const k=nf(),M=()=>{h.stop(),k&&k.active&&Zh(k.effects,h)};if(i&&e){const I=e;e=(...O)=>{I(...O),M()}}let V=v?new Array(t.length).fill(Ba):Ba;const _=I=>{if(!(!(h.flags&1)||!h.dirty&&!I))if(e){const O=h.run();if(r||w||(v?O.some((F,S)=>Gs(F,V[S])):Gs(O,V))){p&&p();const F=wr;wr=h;try{const S=[O,V===Ba?void 0:v&&V[0]===Ba?[]:V,g];V=O,l?l(e,3,S):e(...S)}finally{wr=F}}}else h.run()};return a&&a(_),h=new O_(f),h.scheduler=o?()=>o(_,!1):_,g=I=>Ob(I,!1,h),p=h.onStop=()=>{const I=wc.get(h);if(I){if(l)l(I,4);else for(const O of I)O();wc.delete(h)}},e?s?_(!0):V=h.run():o?o(_.bind(null,!0),!0):h.run(),M.pause=h.pause.bind(h),M.resume=h.resume.bind(h),M.stop=M,M}function es(t,e=1/0,n){if(e<=0||!Ke(t)||t.__v_skip||(n=n||new Map,(n.get(t)||0)>=e))return t;if(n.set(t,e),e--,vt(t))es(t.value,e,n);else if(ve(t))for(let s=0;s<t.length;s++)es(t[s],e,n);else if(Mi(t)||li(t))t.forEach(s=>{es(s,e,n)});else if(R_(t)){for(const s in t)es(t[s],e,n);for(const s of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,s)&&es(t[s],e,n)}return t}function aa(t,e,n,s){try{return s?t(...s):t()}catch(r){Fi(r,e,n)}}function Rn(t,e,n,s){if(be(t)){const r=aa(t,e,n,s);return r&&ef(r)&&r.catch(i=>{Fi(i,e,n)}),r}if(ve(t)){const r=[];for(let i=0;i<t.length;i++)r.push(Rn(t[i],e,n,s));return r}}function Fi(t,e,n,s=!0){const r=e?e.vnode:null,{errorHandler:i,throwUnhandledErrorInProduction:o}=e&&e.appContext.config||Je;if(e){let a=e.parent;const l=e.proxy,u=`https://vuejs.org/error-reference/#runtime-${n}`;for(;a;){const h=a.ec;if(h){for(let f=0;f<h.length;f++)if(h[f](t,l,u)===!1)return}a=a.parent}if(i){ls(),aa(i,null,10,[t,l,u]),us();return}}Lb(t,n,r,s,o)}function Lb(t,e,n,s=!0,r=!1){if(r)throw t;console.error(t)}const Gt=[];let Dn=-1;const fi=[];let Os=null,Zr=0;const Q_=Promise.resolve();let bc=null;function Xs(t){const e=bc||Q_;return t?e.then(this?t.bind(this):t):e}function Mb(t){let e=Dn+1,n=Gt.length;for(;e<n;){const s=e+n>>>1,r=Gt[s],i=jo(r);i<t||i===t&&r.flags&2?e=s+1:n=s}return e}function uf(t){if(!(t.flags&1)){const e=jo(t),n=Gt[Gt.length-1];!n||!(t.flags&2)&&e>=jo(n)?Gt.push(t):Gt.splice(Mb(e),0,t),t.flags|=1,Y_()}}function Y_(){bc||(bc=Q_.then(J_))}function Qu(t){ve(t)?fi.push(...t):Os&&t.id===-1?Os.splice(Zr+1,0,t):t.flags&1||(fi.push(t),t.flags|=1),Y_()}function dp(t,e,n=Dn+1){for(;n<Gt.length;n++){const s=Gt[n];if(s&&s.flags&2){if(t&&s.id!==t.uid)continue;Gt.splice(n,1),n--,s.flags&4&&(s.flags&=-2),s(),s.flags&4||(s.flags&=-2)}}}function Ic(t){if(fi.length){const e=[...new Set(fi)].sort((n,s)=>jo(n)-jo(s));if(fi.length=0,Os){Os.push(...e);return}for(Os=e,Zr=0;Zr<Os.length;Zr++){const n=Os[Zr];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}Os=null,Zr=0}}const jo=t=>t.id==null?t.flags&2?-1:1/0:t.id;function J_(t){try{for(Dn=0;Dn<Gt.length;Dn++){const e=Gt[Dn];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),aa(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;Dn<Gt.length;Dn++){const e=Gt[Dn];e&&(e.flags&=-2)}Dn=-1,Gt.length=0,Ic(),bc=null,(Gt.length||fi.length)&&J_()}}let Ot=null,X_=null;function Ac(t){const e=Ot;return Ot=t,X_=t&&t.type.__scopeId||null,e}function cn(t,e=Ot,n){if(!e||t._n)return t;const s=(...r)=>{s._d&&Nc(-1);const i=Ac(e);let o;try{o=t(...r)}finally{Ac(i),s._d&&Nc(1)}return o};return s._n=!0,s._c=!0,s._d=!0,s}function go(t,e){if(Ot===null)return t;const n=ml(Ot),s=t.dirs||(t.dirs=[]);for(let r=0;r<e.length;r++){let[i,o,a,l=Je]=e[r];i&&(be(i)&&(i={mounted:i,updated:i}),i.deep&&es(o),s.push({dir:i,instance:n,value:o,oldValue:void 0,arg:a,modifiers:l}))}return t}function On(t,e,n,s){const r=t.dirs,i=e&&e.dirs;for(let o=0;o<r.length;o++){const a=r[o];i&&(a.oldValue=i[o].value);let l=a.dir[s];l&&(ls(),Rn(l,n,8,[t.el,a,t,e]),us())}}function ss(t,e){if(Dt){let n=Dt.provides;const s=Dt.parent&&Dt.parent.provides;s===n&&(n=Dt.provides=Object.create(s)),n[t]=e}}function Vt(t,e,n=!1){const s=Hr();if(s||Pr){let r=Pr?Pr._context.provides:s?s.parent==null||s.ce?s.vnode.appContext&&s.vnode.appContext.provides:s.parent.provides:void 0;if(r&&t in r)return r[t];if(arguments.length>1)return n&&be(e)?e.call(s&&s.proxy):e}}function hl(){return!!(Hr()||Pr)}const xb=Symbol.for("v-scx"),Fb=()=>Vt(xb);function Ub(t,e){return hf(t,null,e)}function xn(t,e,n){return hf(t,e,n)}function hf(t,e,n=Je){const{immediate:s,deep:r,flush:i,once:o}=n,a=Pt({},n),l=e&&s||!e&&i!=="post";let u;if(bi){if(i==="sync"){const g=Fb();u=g.__watcherHandles||(g.__watcherHandles=[])}else if(!l){const g=()=>{};return g.stop=Mn,g.resume=Mn,g.pause=Mn,g}}const h=Dt;a.call=(g,w,v)=>Rn(g,h,w,v);let f=!1;i==="post"?a.scheduler=g=>{mt(g,h&&h.suspense)}:i!=="sync"&&(f=!0,a.scheduler=(g,w)=>{w?g():uf(g)}),a.augmentJob=g=>{e&&(g.flags|=4),f&&(g.flags|=2,h&&(g.id=h.uid,g.i=h))};const p=Vb(t,e,a);return bi&&(u?u.push(p):l&&p()),p}function Bb(t,e,n){const s=this.proxy,r=nt(t)?t.includes(".")?Z_(s,t):()=>s[t]:t.bind(s,s);let i;be(e)?i=e:(i=e.handler,n=e);const o=ua(this),a=hf(r,i.bind(s),n);return o(),a}function Z_(t,e){const n=e.split(".");return()=>{let s=t;for(let r=0;r<n.length&&s;r++)s=s[n[r]];return s}}const ey=Symbol("_vte"),ty=t=>t.__isTeleport,Ro=t=>t&&(t.disabled||t.disabled===""),pp=t=>t&&(t.defer||t.defer===""),mp=t=>typeof SVGElement<"u"&&t instanceof SVGElement,gp=t=>typeof MathMLElement=="function"&&t instanceof MathMLElement,Yu=(t,e)=>{const n=t&&t.to;return nt(n)?e?e(n):null:n},ny={name:"Teleport",__isTeleport:!0,process(t,e,n,s,r,i,o,a,l,u){const{mc:h,pc:f,pbc:p,o:{insert:g,querySelector:w,createText:v,createComment:k}}=u,M=Ro(e.props);let{shapeFlag:V,children:_,dynamicChildren:I}=e;if(t==null){const O=e.el=v(""),F=e.anchor=v("");g(O,n,s),g(F,n,s);const S=(E,C)=>{V&16&&h(_,E,C,r,i,o,a,l)},T=()=>{const E=e.target=Yu(e.props,w),C=sy(E,e,v,g);E&&(o!=="svg"&&mp(E)?o="svg":o!=="mathml"&&gp(E)&&(o="mathml"),r&&r.isCE&&(r.ce._teleportTargets||(r.ce._teleportTargets=new Set)).add(E),M||(S(E,C),ic(e,!1)))};M&&(S(n,F),ic(e,!0)),pp(e.props)?(e.el.__isMounted=!1,mt(()=>{T(),delete e.el.__isMounted},i)):T()}else{if(pp(e.props)&&t.el.__isMounted===!1){mt(()=>{ny.process(t,e,n,s,r,i,o,a,l,u)},i);return}e.el=t.el,e.targetStart=t.targetStart;const O=e.anchor=t.anchor,F=e.target=t.target,S=e.targetAnchor=t.targetAnchor,T=Ro(t.props),E=T?n:F,C=T?O:S;if(o==="svg"||mp(F)?o="svg":(o==="mathml"||gp(F))&&(o="mathml"),I?(p(t.dynamicChildren,I,E,r,i,o,a),_f(t,e,!0)):l||f(t,e,E,C,r,i,o,a,!1),M)T?e.props&&t.props&&e.props.to!==t.props.to&&(e.props.to=t.props.to):$a(e,n,O,u,1);else if((e.props&&e.props.to)!==(t.props&&t.props.to)){const P=e.target=Yu(e.props,w);P&&$a(e,P,null,u,0)}else T&&$a(e,F,S,u,1);ic(e,M)}},remove(t,e,n,{um:s,o:{remove:r}},i){const{shapeFlag:o,children:a,anchor:l,targetStart:u,targetAnchor:h,target:f,props:p}=t;if(f&&(r(u),r(h)),i&&r(l),o&16){const g=i||!Ro(p);for(let w=0;w<a.length;w++){const v=a[w];s(v,e,n,g,!!v.dynamicChildren)}}},move:$a,hydrate:$b};function $a(t,e,n,{o:{insert:s},m:r},i=2){i===0&&s(t.targetAnchor,e,n);const{el:o,anchor:a,shapeFlag:l,children:u,props:h}=t,f=i===2;if(f&&s(o,e,n),(!f||Ro(h))&&l&16)for(let p=0;p<u.length;p++)r(u[p],e,n,2);f&&s(a,e,n)}function $b(t,e,n,s,r,i,{o:{nextSibling:o,parentNode:a,querySelector:l,insert:u,createText:h}},f){function p(v,k,M,V){k.anchor=f(o(v),k,a(v),n,s,r,i),k.targetStart=M,k.targetAnchor=V}const g=e.target=Yu(e.props,l),w=Ro(e.props);if(g){const v=g._lpa||g.firstChild;if(e.shapeFlag&16)if(w)p(t,e,v,v&&o(v));else{e.anchor=o(t);let k=v;for(;k;){if(k&&k.nodeType===8){if(k.data==="teleport start anchor")e.targetStart=k;else if(k.data==="teleport anchor"){e.targetAnchor=k,g._lpa=e.targetAnchor&&o(e.targetAnchor);break}}k=o(k)}e.targetAnchor||sy(g,e,h,u),f(v&&o(v),e,g,n,s,r,i)}ic(e,w)}else w&&e.shapeFlag&16&&p(t,e,t,o(t));return e.anchor&&o(e.anchor)}const XM=ny;function ic(t,e){const n=t.ctx;if(n&&n.ut){let s,r;for(e?(s=t.el,r=t.anchor):(s=t.targetStart,r=t.targetAnchor);s&&s!==r;)s.nodeType===1&&s.setAttribute("data-v-owner",n.uid),s=s.nextSibling;n.ut()}}function sy(t,e,n,s){const r=e.targetStart=n(""),i=e.targetAnchor=n("");return r[ey]=i,t&&(s(r,t),s(i,t)),i}const Xn=Symbol("_leaveCb"),Ha=Symbol("_enterCb");function Hb(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Zs(()=>{t.isMounted=!0}),la(()=>{t.isUnmounting=!0}),t}const ln=[Function,Array],ry={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:ln,onEnter:ln,onAfterEnter:ln,onEnterCancelled:ln,onBeforeLeave:ln,onLeave:ln,onAfterLeave:ln,onLeaveCancelled:ln,onBeforeAppear:ln,onAppear:ln,onAfterAppear:ln,onAppearCancelled:ln},iy=t=>{const e=t.subTree;return e.component?iy(e.component):e},jb={name:"BaseTransition",props:ry,setup(t,{slots:e}){const n=Hr(),s=Hb();return()=>{const r=e.default&&cy(e.default(),!0);if(!r||!r.length)return;const i=oy(r),o=Fe(t),{mode:a}=o;if(s.isLeaving)return hu(i);const l=_p(i);if(!l)return hu(i);let u=Ju(l,o,s,n,f=>u=f);l.type!==gt&&Ti(l,u);let h=n.subTree&&_p(n.subTree);if(h&&h.type!==gt&&!vn(h,l)&&iy(n).type!==gt){let f=Ju(h,o,s,n);if(Ti(h,f),a==="out-in"&&l.type!==gt)return s.isLeaving=!0,f.afterLeave=()=>{s.isLeaving=!1,n.job.flags&8||n.update(),delete f.afterLeave,h=void 0},hu(i);a==="in-out"&&l.type!==gt?f.delayLeave=(p,g,w)=>{const v=ay(s,h);v[String(h.key)]=h,p[Xn]=()=>{g(),p[Xn]=void 0,delete u.delayedLeave,h=void 0},u.delayedLeave=()=>{w(),delete u.delayedLeave,h=void 0}}:h=void 0}else h&&(h=void 0);return i}}};function oy(t){let e=t[0];if(t.length>1){for(const n of t)if(n.type!==gt){e=n;break}}return e}const qb=jb;function ay(t,e){const{leavingVNodes:n}=t;let s=n.get(e.type);return s||(s=Object.create(null),n.set(e.type,s)),s}function Ju(t,e,n,s,r){const{appear:i,mode:o,persisted:a=!1,onBeforeEnter:l,onEnter:u,onAfterEnter:h,onEnterCancelled:f,onBeforeLeave:p,onLeave:g,onAfterLeave:w,onLeaveCancelled:v,onBeforeAppear:k,onAppear:M,onAfterAppear:V,onAppearCancelled:_}=e,I=String(t.key),O=ay(n,t),F=(E,C)=>{E&&Rn(E,s,9,C)},S=(E,C)=>{const P=C[1];F(E,C),ve(E)?E.every(R=>R.length<=1)&&P():E.length<=1&&P()},T={mode:o,persisted:a,beforeEnter(E){let C=l;if(!n.isMounted)if(i)C=k||l;else return;E[Xn]&&E[Xn](!0);const P=O[I];P&&vn(t,P)&&P.el[Xn]&&P.el[Xn](),F(C,[E])},enter(E){let C=u,P=h,R=f;if(!n.isMounted)if(i)C=M||u,P=V||h,R=_||f;else return;let y=!1;const ae=E[Ha]=fe=>{y||(y=!0,fe?F(R,[E]):F(P,[E]),T.delayedLeave&&T.delayedLeave(),E[Ha]=void 0)};C?S(C,[E,ae]):ae()},leave(E,C){const P=String(t.key);if(E[Ha]&&E[Ha](!0),n.isUnmounting)return C();F(p,[E]);let R=!1;const y=E[Xn]=ae=>{R||(R=!0,C(),ae?F(v,[E]):F(w,[E]),E[Xn]=void 0,O[P]===t&&delete O[P])};O[P]=t,g?S(g,[E,y]):y()},clone(E){const C=Ju(E,e,n,s,r);return r&&r(C),C}};return T}function hu(t){if(ca(t))return t=pn(t),t.children=null,t}function _p(t){if(!ca(t))return ty(t.type)&&t.children?oy(t.children):t;if(t.component)return t.component.subTree;const{shapeFlag:e,children:n}=t;if(n){if(e&16)return n[0];if(e&32&&be(n.default))return n.default()}}function Ti(t,e){t.shapeFlag&6&&t.component?(t.transition=e,Ti(t.component.subTree,e)):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function cy(t,e=!1,n){let s=[],r=0;for(let i=0;i<t.length;i++){let o=t[i];const a=n==null?o.key:String(n)+String(o.key!=null?o.key:i);o.type===$e?(o.patchFlag&128&&r++,s=s.concat(cy(o.children,e,a))):(e||o.type!==gt)&&s.push(a!=null?pn(o,{key:a}):o)}if(r>1)for(let i=0;i<s.length;i++)s[i].patchFlag=-2;return s}function ut(t,e){return be(t)?Pt({name:t.name},e,{setup:t}):t}function ff(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}const Rc=new WeakMap;function di(t,e,n,s,r=!1){if(ve(t)){t.forEach((w,v)=>di(w,e&&(ve(e)?e[v]:e),n,s,r));return}if(rs(s)&&!r){s.shapeFlag&512&&s.type.__asyncResolved&&s.component.subTree.component&&di(t,e,n,s.component.subTree);return}const i=s.shapeFlag&4?ml(s.component):s.el,o=r?null:i,{i:a,r:l}=t,u=e&&e.r,h=a.refs===Je?a.refs={}:a.refs,f=a.setupState,p=Fe(f),g=f===Je?I_:w=>Ge(p,w);if(u!=null&&u!==l){if(yp(e),nt(u))h[u]=null,g(u)&&(f[u]=null);else if(vt(u)){u.value=null;const w=e;w.k&&(h[w.k]=null)}}if(be(l))aa(l,a,12,[o,h]);else{const w=nt(l),v=vt(l);if(w||v){const k=()=>{if(t.f){const M=w?g(l)?f[l]:h[l]:l.value;if(r)ve(M)&&Zh(M,i);else if(ve(M))M.includes(i)||M.push(i);else if(w)h[l]=[i],g(l)&&(f[l]=h[l]);else{const V=[i];l.value=V,t.k&&(h[t.k]=V)}}else w?(h[l]=o,g(l)&&(f[l]=o)):v&&(l.value=o,t.k&&(h[t.k]=o))};if(o){const M=()=>{k(),Rc.delete(t)};M.id=-1,Rc.set(t,M),mt(M,n)}else yp(t),k()}}}function yp(t){const e=Rc.get(t);e&&(e.flags|=8,Rc.delete(t))}let vp=!1;const Xr=()=>{vp||(console.error("Hydration completed but contains mismatches."),vp=!0)},Gb=t=>t.namespaceURI.includes("svg")&&t.tagName!=="foreignObject",Wb=t=>t.namespaceURI.includes("MathML"),ja=t=>{if(t.nodeType===1){if(Gb(t))return"svg";if(Wb(t))return"mathml"}},ii=t=>t.nodeType===8;function zb(t){const{mt:e,p:n,o:{patchProp:s,createText:r,nextSibling:i,parentNode:o,remove:a,insert:l,createComment:u}}=t,h=(_,I)=>{if(!I.hasChildNodes()){n(null,_,I),Ic(),I._vnode=_;return}f(I.firstChild,_,null,null,null),Ic(),I._vnode=_},f=(_,I,O,F,S,T=!1)=>{T=T||!!I.dynamicChildren;const E=ii(_)&&_.data==="[",C=()=>v(_,I,O,F,S,E),{type:P,ref:R,shapeFlag:y,patchFlag:ae}=I;let fe=_.nodeType;I.el=_,ae===-2&&(T=!1,I.dynamicChildren=null);let ie=null;switch(P){case kr:fe!==3?I.children===""?(l(I.el=r(""),o(_),_),ie=_):ie=C():(_.data!==I.children&&(Xr(),_.data=I.children),ie=i(_));break;case gt:V(_)?(ie=i(_),M(I.el=_.content.firstChild,_,O)):fe!==8||E?ie=C():ie=i(_);break;case Co:if(E&&(_=i(_),fe=_.nodeType),fe===1||fe===3){ie=_;const pe=!I.children.length;for(let se=0;se<I.staticCount;se++)pe&&(I.children+=ie.nodeType===1?ie.outerHTML:ie.data),se===I.staticCount-1&&(I.anchor=ie),ie=i(ie);return E?i(ie):ie}else C();break;case $e:E?ie=w(_,I,O,F,S,T):ie=C();break;default:if(y&1)(fe!==1||I.type.toLowerCase()!==_.tagName.toLowerCase())&&!V(_)?ie=C():ie=p(_,I,O,F,S,T);else if(y&6){I.slotScopeIds=S;const pe=o(_);if(E?ie=k(_):ii(_)&&_.data==="teleport start"?ie=k(_,_.data,"teleport end"):ie=i(_),e(I,pe,null,O,F,ja(pe),T),rs(I)&&!I.type.__asyncResolved){let se;E?(se=Ee($e),se.anchor=ie?ie.previousSibling:pe.lastChild):se=_.nodeType===3?Be(""):Ee("div"),se.el=_,I.component.subTree=se}}else y&64?fe!==8?ie=C():ie=I.type.hydrate(_,I,O,F,S,T,t,g):y&128&&(ie=I.type.hydrate(_,I,O,F,ja(o(_)),S,T,t,f))}return R!=null&&di(R,null,F,I),ie},p=(_,I,O,F,S,T)=>{T=T||!!I.dynamicChildren;const{type:E,props:C,patchFlag:P,shapeFlag:R,dirs:y,transition:ae}=I,fe=E==="input"||E==="option";if(fe||P!==-1){y&&On(I,null,O,"created");let ie=!1;if(V(_)){ie=ky(null,ae)&&O&&O.vnode.props&&O.vnode.props.appear;const se=_.content.firstChild;if(ie){const Te=se.getAttribute("class");Te&&(se.$cls=Te),ae.beforeEnter(se)}M(se,_,O),I.el=_=se}if(R&16&&!(C&&(C.innerHTML||C.textContent))){let se=g(_.firstChild,I,_,O,F,S,T);for(;se;){qa(_,1)||Xr();const Te=se;se=se.nextSibling,a(Te)}}else if(R&8){let se=I.children;se[0]===`
`&&(_.tagName==="PRE"||_.tagName==="TEXTAREA")&&(se=se.slice(1));const{textContent:Te}=_;Te!==se&&Te!==se.replace(/\r\n|\r/g,`
`)&&(qa(_,0)||Xr(),_.textContent=I.children)}if(C){if(fe||!T||P&48){const se=_.tagName.includes("-");for(const Te in C)(fe&&(Te.endsWith("value")||Te==="indeterminate")||ia(Te)&&!ui(Te)||Te[0]==="."||se)&&s(_,Te,null,C[Te],void 0,O)}else if(C.onClick)s(_,"onClick",null,C.onClick,void 0,O);else if(P&4&&Ws(C.style))for(const se in C.style)C.style[se]}let pe;(pe=C&&C.onVnodeBeforeMount)&&Qt(pe,O,I),y&&On(I,null,O,"beforeMount"),((pe=C&&C.onVnodeMounted)||y||ie)&&Vy(()=>{pe&&Qt(pe,O,I),ie&&ae.enter(_),y&&On(I,null,O,"mounted")},F)}return _.nextSibling},g=(_,I,O,F,S,T,E)=>{E=E||!!I.dynamicChildren;const C=I.children,P=C.length;for(let R=0;R<P;R++){const y=E?C[R]:C[R]=sn(C[R]),ae=y.type===kr;_?(ae&&!E&&R+1<P&&sn(C[R+1]).type===kr&&(l(r(_.data.slice(y.children.length)),O,i(_)),_.data=y.children),_=f(_,y,F,S,T,E)):ae&&!y.children?l(y.el=r(""),O):(qa(O,1)||Xr(),n(null,y,O,null,F,S,ja(O),T))}return _},w=(_,I,O,F,S,T)=>{const{slotScopeIds:E}=I;E&&(S=S?S.concat(E):E);const C=o(_),P=g(i(_),I,C,O,F,S,T);return P&&ii(P)&&P.data==="]"?i(I.anchor=P):(Xr(),l(I.anchor=u("]"),C,P),P)},v=(_,I,O,F,S,T)=>{if(qa(_.parentElement,1)||Xr(),I.el=null,T){const P=k(_);for(;;){const R=i(_);if(R&&R!==P)a(R);else break}}const E=i(_),C=o(_);return a(_),n(null,I,C,E,O,F,ja(C),S),O&&(O.vnode.el=I.el,pl(O,I.el)),E},k=(_,I="[",O="]")=>{let F=0;for(;_;)if(_=i(_),_&&ii(_)&&(_.data===I&&F++,_.data===O)){if(F===0)return i(_);F--}return _},M=(_,I,O)=>{const F=I.parentNode;F&&F.replaceChild(_,I);let S=O;for(;S;)S.vnode.el===I&&(S.vnode.el=S.subTree.el=_),S=S.parent},V=_=>_.nodeType===1&&_.tagName==="TEMPLATE";return[h,f]}const Ep="data-allow-mismatch",Kb={0:"text",1:"children",2:"class",3:"style",4:"attribute"};function qa(t,e){if(e===0||e===1)for(;t&&!t.hasAttribute(Ep);)t=t.parentElement;const n=t&&t.getAttribute(Ep);if(n==null)return!1;if(n==="")return!0;{const s=n.split(",");return e===0&&s.includes("children")?!0:s.includes(Kb[e])}}al().requestIdleCallback;al().cancelIdleCallback;function Qb(t,e){if(ii(t)&&t.data==="["){let n=1,s=t.nextSibling;for(;s;){if(s.nodeType===1){if(e(s)===!1)break}else if(ii(s))if(s.data==="]"){if(--n===0)break}else s.data==="["&&n++;s=s.nextSibling}}else e(t)}const rs=t=>!!t.type.__asyncLoader;function Sc(t){be(t)&&(t={loader:t});const{loader:e,loadingComponent:n,errorComponent:s,delay:r=200,hydrate:i,timeout:o,suspensible:a=!0,onError:l}=t;let u=null,h,f=0;const p=()=>(f++,u=null,g()),g=()=>{let w;return u||(w=u=e().catch(v=>{if(v=v instanceof Error?v:new Error(String(v)),l)return new Promise((k,M)=>{l(v,()=>k(p()),()=>M(v),f+1)});throw v}).then(v=>w!==u&&u?u:(v&&(v.__esModule||v[Symbol.toStringTag]==="Module")&&(v=v.default),h=v,v)))};return ut({name:"AsyncComponentWrapper",__asyncLoader:g,__asyncHydrate(w,v,k){let M=!1;(v.bu||(v.bu=[])).push(()=>M=!0);const V=()=>{M||k()},_=i?()=>{const I=i(V,O=>Qb(w,O));I&&(v.bum||(v.bum=[])).push(I)}:V;h?_():g().then(()=>!v.isUnmounted&&_())},get __asyncResolved(){return h},setup(){const w=Dt;if(ff(w),h)return()=>Ga(h,w);const v=_=>{u=null,Fi(_,w,13,!s)};if(a&&w.suspense||bi)return g().then(_=>()=>Ga(_,w)).catch(_=>(v(_),()=>s?Ee(s,{error:_}):null));const k=le(!1),M=le(),V=le(!!r);return r&&setTimeout(()=>{V.value=!1},r),o!=null&&setTimeout(()=>{if(!k.value&&!M.value){const _=new Error(`Async component timed out after ${o}ms.`);v(_),M.value=_}},o),g().then(()=>{k.value=!0,w.parent&&ca(w.parent.vnode)&&w.parent.update()}).catch(_=>{v(_),M.value=_}),()=>{if(k.value&&h)return Ga(h,w);if(M.value&&s)return Ee(s,{error:M.value});if(n&&!V.value)return Ga(n,w)}}})}function Ga(t,e){const{ref:n,props:s,children:r,ce:i}=e.vnode,o=Ee(t,s,r);return o.ref=n,o.ce=i,delete e.vnode.ce,o}const ca=t=>t.type.__isKeepAlive,Yb={name:"KeepAlive",__isKeepAlive:!0,props:{include:[String,RegExp,Array],exclude:[String,RegExp,Array],max:[String,Number]},setup(t,{slots:e}){const n=Hr(),s=n.ctx;if(!s.renderer)return()=>{const V=e.default&&e.default();return V&&V.length===1?V[0]:V};const r=new Map,i=new Set;let o=null;const a=n.suspense,{renderer:{p:l,m:u,um:h,o:{createElement:f}}}=s,p=f("div");s.activate=(V,_,I,O,F)=>{const S=V.component;u(V,_,I,0,a),l(S.vnode,V,_,I,S,a,O,V.slotScopeIds,F),mt(()=>{S.isDeactivated=!1,S.a&&hi(S.a);const T=V.props&&V.props.onVnodeMounted;T&&Qt(T,S.parent,V)},a)},s.deactivate=V=>{const _=V.component;Pc(_.m),Pc(_.a),u(V,p,null,1,a),mt(()=>{_.da&&hi(_.da);const I=V.props&&V.props.onVnodeUnmounted;I&&Qt(I,_.parent,V),_.isDeactivated=!0},a)};function g(V){fu(V),h(V,n,a,!0)}function w(V){r.forEach((_,I)=>{const O=oh(rs(_)?_.type.__asyncResolved||{}:_.type);O&&!V(O)&&v(I)})}function v(V){const _=r.get(V);_&&(!o||!vn(_,o))?g(_):o&&fu(o),r.delete(V),i.delete(V)}xn(()=>[t.include,t.exclude],([V,_])=>{V&&w(I=>_o(V,I)),_&&w(I=>!_o(_,I))},{flush:"post",deep:!0});let k=null;const M=()=>{k!=null&&(kc(n.subTree.type)?mt(()=>{r.set(k,Wa(n.subTree))},n.subTree.suspense):r.set(k,Wa(n.subTree)))};return Zs(M),fy(M),la(()=>{r.forEach(V=>{const{subTree:_,suspense:I}=n,O=Wa(_);if(V.type===O.type&&V.key===O.key){fu(O);const F=O.component.da;F&&mt(F,I);return}g(V)})}),()=>{if(k=null,!e.default)return o=null;const V=e.default(),_=V[0];if(V.length>1)return o=null,V;if(!Or(_)||!(_.shapeFlag&4)&&!(_.shapeFlag&128))return o=null,_;let I=Wa(_);if(I.type===gt)return o=null,I;const O=I.type,F=oh(rs(I)?I.type.__asyncResolved||{}:O),{include:S,exclude:T,max:E}=t;if(S&&(!F||!_o(S,F))||T&&F&&_o(T,F))return I.shapeFlag&=-257,o=I,_;const C=I.key==null?O:I.key,P=r.get(C);return I.el&&(I=pn(I),_.shapeFlag&128&&(_.ssContent=I)),k=C,P?(I.el=P.el,I.component=P.component,I.transition&&Ti(I,I.transition),I.shapeFlag|=512,i.delete(C),i.add(C)):(i.add(C),E&&i.size>parseInt(E,10)&&v(i.values().next().value)),I.shapeFlag|=256,o=I,kc(_.type)?_:I}}},Jb=Yb;function _o(t,e){return ve(t)?t.some(n=>_o(n,e)):nt(t)?t.split(",").includes(e):qw(t)?(t.lastIndex=0,t.test(e)):!1}function ly(t,e){hy(t,"a",e)}function uy(t,e){hy(t,"da",e)}function hy(t,e,n=Dt){const s=t.__wdc||(t.__wdc=()=>{let r=n;for(;r;){if(r.isDeactivated)return;r=r.parent}return t()});if(fl(e,s,n),n){let r=n.parent;for(;r&&r.parent;)ca(r.parent.vnode)&&Xb(s,e,n,r),r=r.parent}}function Xb(t,e,n,s){const r=fl(e,t,s,!0);dy(()=>{Zh(s[e],r)},n)}function fu(t){t.shapeFlag&=-257,t.shapeFlag&=-513}function Wa(t){return t.shapeFlag&128?t.ssContent:t}function fl(t,e,n=Dt,s=!1){if(n){const r=n[t]||(n[t]=[]),i=e.__weh||(e.__weh=(...o)=>{ls();const a=ua(n),l=Rn(e,n,t,o);return a(),us(),l});return s?r.unshift(i):r.push(i),i}}const _s=t=>(e,n=Dt)=>{(!bi||t==="sp")&&fl(t,(...s)=>e(...s),n)},Zb=_s("bm"),Zs=_s("m"),eI=_s("bu"),fy=_s("u"),la=_s("bum"),dy=_s("um"),tI=_s("sp"),nI=_s("rtg"),sI=_s("rtc");function py(t,e=Dt){fl("ec",t,e)}const df="components",rI="directives";function ZM(t,e){return pf(df,t,!0,e)||t}const my=Symbol.for("v-ndc");function iI(t){return nt(t)?pf(df,t,!1)||t:t||my}function oI(t){return pf(rI,t)}function pf(t,e,n=!0,s=!1){const r=Ot||Dt;if(r){const i=r.type;if(t===df){const a=oh(i,!1);if(a&&(a===e||a===mn(e)||a===il(mn(e))))return i}const o=Tp(r[t]||i[t],e)||Tp(r.appContext[t],e);return!o&&s?i:o}}function Tp(t,e){return t&&(t[e]||t[mn(e)]||t[il(mn(e))])}function ex(t,e,n,s){let r;const i=n,o=ve(t);if(o||nt(t)){const a=o&&Ws(t);let l=!1,u=!1;a&&(l=!an(t),u=Hn(t),t=ll(t)),r=new Array(t.length);for(let h=0,f=t.length;h<f;h++)r[h]=e(l?u?Ei(An(t[h])):An(t[h]):t[h],h,void 0,i)}else if(typeof t=="number"){r=new Array(t);for(let a=0;a<t;a++)r[a]=e(a+1,a,void 0,i)}else if(Ke(t))if(t[Symbol.iterator])r=Array.from(t,(a,l)=>e(a,l,void 0,i));else{const a=Object.keys(t);r=new Array(a.length);for(let l=0,u=a.length;l<u;l++){const h=a[l];r[l]=e(t[h],h,l,i)}}else r=[];return r}function aI(t,e,n={},s,r){if(Ot.ce||Ot.parent&&rs(Ot.parent)&&Ot.parent.ce){const u=Object.keys(n).length>0;return ge(),Jt($e,null,[Ee("slot",n,s)],u?-2:64)}let i=t[e];i&&i._c&&(i._d=!1),ge();const o=i&&gy(i(n)),a=n.key||o&&o.key,l=Jt($e,{key:(a&&!In(a)?a:`_${e}`)+(!o&&s?"_fb":"")},o||[],o&&t._===1?64:-2);return i&&i._c&&(i._d=!0),l}function gy(t){return t.some(e=>Or(e)?!(e.type===gt||e.type===$e&&!gy(e.children)):!0)?t:null}const Xu=t=>t?By(t)?ml(t):Xu(t.parent):null,So=Pt(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>Xu(t.parent),$root:t=>Xu(t.root),$host:t=>t.ce,$emit:t=>t.emit,$options:t=>yy(t),$forceUpdate:t=>t.f||(t.f=()=>{uf(t.update)}),$nextTick:t=>t.n||(t.n=Xs.bind(t.proxy)),$watch:t=>Bb.bind(t)}),du=(t,e)=>t!==Je&&!t.__isScriptSetup&&Ge(t,e),cI={get({_:t},e){if(e==="__v_skip")return!0;const{ctx:n,setupState:s,data:r,props:i,accessCache:o,type:a,appContext:l}=t;if(e[0]!=="$"){const p=o[e];if(p!==void 0)switch(p){case 1:return s[e];case 2:return r[e];case 4:return n[e];case 3:return i[e]}else{if(du(s,e))return o[e]=1,s[e];if(r!==Je&&Ge(r,e))return o[e]=2,r[e];if(Ge(i,e))return o[e]=3,i[e];if(n!==Je&&Ge(n,e))return o[e]=4,n[e];Zu&&(o[e]=0)}}const u=So[e];let h,f;if(u)return e==="$attrs"&&Ut(t.attrs,"get",""),u(t);if((h=a.__cssModules)&&(h=h[e]))return h;if(n!==Je&&Ge(n,e))return o[e]=4,n[e];if(f=l.config.globalProperties,Ge(f,e))return f[e]},set({_:t},e,n){const{data:s,setupState:r,ctx:i}=t;return du(r,e)?(r[e]=n,!0):s!==Je&&Ge(s,e)?(s[e]=n,!0):Ge(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(i[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:s,appContext:r,props:i,type:o}},a){let l;return!!(n[a]||t!==Je&&a[0]!=="$"&&Ge(t,a)||du(e,a)||Ge(i,a)||Ge(s,a)||Ge(So,a)||Ge(r.config.globalProperties,a)||(l=o.__cssModules)&&l[a])},defineProperty(t,e,n){return n.get!=null?t._.accessCache[e]=0:Ge(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}};function wp(t){return ve(t)?t.reduce((e,n)=>(e[n]=null,e),{}):t}let Zu=!0;function lI(t){const e=yy(t),n=t.proxy,s=t.ctx;Zu=!1,e.beforeCreate&&bp(e.beforeCreate,t,"bc");const{data:r,computed:i,methods:o,watch:a,provide:l,inject:u,created:h,beforeMount:f,mounted:p,beforeUpdate:g,updated:w,activated:v,deactivated:k,beforeDestroy:M,beforeUnmount:V,destroyed:_,unmounted:I,render:O,renderTracked:F,renderTriggered:S,errorCaptured:T,serverPrefetch:E,expose:C,inheritAttrs:P,components:R,directives:y,filters:ae}=e;if(u&&uI(u,s,null),o)for(const pe in o){const se=o[pe];be(se)&&(s[pe]=se.bind(n))}if(r){const pe=r.call(n,n);Ke(pe)&&(t.data=ar(pe))}if(Zu=!0,i)for(const pe in i){const se=i[pe],Te=be(se)?se.bind(n,n):be(se.get)?se.get.bind(n,n):Mn,He=!be(se)&&be(se.set)?se.set.bind(n):Mn,Pe=xe({get:Te,set:He});Object.defineProperty(s,pe,{enumerable:!0,configurable:!0,get:()=>Pe.value,set:De=>Pe.value=De})}if(a)for(const pe in a)_y(a[pe],s,n,pe);if(l){const pe=be(l)?l.call(n):l;Reflect.ownKeys(pe).forEach(se=>{ss(se,pe[se])})}h&&bp(h,t,"c");function ie(pe,se){ve(se)?se.forEach(Te=>pe(Te.bind(n))):se&&pe(se.bind(n))}if(ie(Zb,f),ie(Zs,p),ie(eI,g),ie(fy,w),ie(ly,v),ie(uy,k),ie(py,T),ie(sI,F),ie(nI,S),ie(la,V),ie(dy,I),ie(tI,E),ve(C))if(C.length){const pe=t.exposed||(t.exposed={});C.forEach(se=>{Object.defineProperty(pe,se,{get:()=>n[se],set:Te=>n[se]=Te,enumerable:!0})})}else t.exposed||(t.exposed={});O&&t.render===Mn&&(t.render=O),P!=null&&(t.inheritAttrs=P),R&&(t.components=R),y&&(t.directives=y),E&&ff(t)}function uI(t,e,n=Mn){ve(t)&&(t=eh(t));for(const s in t){const r=t[s];let i;Ke(r)?"default"in r?i=Vt(r.from||s,r.default,!0):i=Vt(r.from||s):i=Vt(r),vt(i)?Object.defineProperty(e,s,{enumerable:!0,configurable:!0,get:()=>i.value,set:o=>i.value=o}):e[s]=i}}function bp(t,e,n){Rn(ve(t)?t.map(s=>s.bind(e.proxy)):t.bind(e.proxy),e,n)}function _y(t,e,n,s){let r=s.includes(".")?Z_(n,s):()=>n[s];if(nt(t)){const i=e[t];be(i)&&xn(r,i)}else if(be(t))xn(r,t.bind(n));else if(Ke(t))if(ve(t))t.forEach(i=>_y(i,e,n,s));else{const i=be(t.handler)?t.handler.bind(n):e[t.handler];be(i)&&xn(r,i,t)}}function yy(t){const e=t.type,{mixins:n,extends:s}=e,{mixins:r,optionsCache:i,config:{optionMergeStrategies:o}}=t.appContext,a=i.get(e);let l;return a?l=a:!r.length&&!n&&!s?l=e:(l={},r.length&&r.forEach(u=>Cc(l,u,o,!0)),Cc(l,e,o)),Ke(e)&&i.set(e,l),l}function Cc(t,e,n,s=!1){const{mixins:r,extends:i}=e;i&&Cc(t,i,n,!0),r&&r.forEach(o=>Cc(t,o,n,!0));for(const o in e)if(!(s&&o==="expose")){const a=hI[o]||n&&n[o];t[o]=a?a(t[o],e[o]):e[o]}return t}const hI={data:Ip,props:Ap,emits:Ap,methods:yo,computed:yo,beforeCreate:jt,created:jt,beforeMount:jt,mounted:jt,beforeUpdate:jt,updated:jt,beforeDestroy:jt,beforeUnmount:jt,destroyed:jt,unmounted:jt,activated:jt,deactivated:jt,errorCaptured:jt,serverPrefetch:jt,components:yo,directives:yo,watch:dI,provide:Ip,inject:fI};function Ip(t,e){return e?t?function(){return Pt(be(t)?t.call(this,this):t,be(e)?e.call(this,this):e)}:e:t}function fI(t,e){return yo(eh(t),eh(e))}function eh(t){if(ve(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function jt(t,e){return t?[...new Set([].concat(t,e))]:e}function yo(t,e){return t?Pt(Object.create(null),t,e):e}function Ap(t,e){return t?ve(t)&&ve(e)?[...new Set([...t,...e])]:Pt(Object.create(null),wp(t),wp(e??{})):e}function dI(t,e){if(!t)return e;if(!e)return t;const n=Pt(Object.create(null),t);for(const s in e)n[s]=jt(t[s],e[s]);return n}function vy(){return{app:null,config:{isNativeTag:I_,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let pI=0;function mI(t,e){return function(s,r=null){be(s)||(s=Pt({},s)),r!=null&&!Ke(r)&&(r=null);const i=vy(),o=new WeakSet,a=[];let l=!1;const u=i.app={_uid:pI++,_component:s,_props:r,_container:null,_context:i,_instance:null,version:zI,get config(){return i.config},set config(h){},use(h,...f){return o.has(h)||(h&&be(h.install)?(o.add(h),h.install(u,...f)):be(h)&&(o.add(h),h(u,...f))),u},mixin(h){return i.mixins.includes(h)||i.mixins.push(h),u},component(h,f){return f?(i.components[h]=f,u):i.components[h]},directive(h,f){return f?(i.directives[h]=f,u):i.directives[h]},mount(h,f,p){if(!l){const g=u._ceVNode||Ee(s,r);return g.appContext=i,p===!0?p="svg":p===!1&&(p=void 0),f&&e?e(g,h):t(g,h,p),l=!0,u._container=h,h.__vue_app__=u,ml(g.component)}},onUnmount(h){a.push(h)},unmount(){l&&(Rn(a,u._instance,16),t(null,u._container),delete u._container.__vue_app__)},provide(h,f){return i.provides[h]=f,u},runWithContext(h){const f=Pr;Pr=u;try{return h()}finally{Pr=f}}};return u}}let Pr=null;const gI=(t,e)=>e==="modelValue"||e==="model-value"?t.modelModifiers:t[`${e}Modifiers`]||t[`${mn(e)}Modifiers`]||t[`${or(e)}Modifiers`];function _I(t,e,...n){if(t.isUnmounted)return;const s=t.vnode.props||Je;let r=n;const i=e.startsWith("update:"),o=i&&gI(s,e.slice(7));o&&(o.trim&&(r=n.map(h=>nt(h)?h.trim():h)),o.number&&(r=n.map(ol)));let a,l=s[a=ou(e)]||s[a=ou(mn(e))];!l&&i&&(l=s[a=ou(or(e))]),l&&Rn(l,t,6,r);const u=s[a+"Once"];if(u){if(!t.emitted)t.emitted={};else if(t.emitted[a])return;t.emitted[a]=!0,Rn(u,t,6,r)}}const yI=new WeakMap;function Ey(t,e,n=!1){const s=n?yI:e.emitsCache,r=s.get(t);if(r!==void 0)return r;const i=t.emits;let o={},a=!1;if(!be(t)){const l=u=>{const h=Ey(u,e,!0);h&&(a=!0,Pt(o,h))};!n&&e.mixins.length&&e.mixins.forEach(l),t.extends&&l(t.extends),t.mixins&&t.mixins.forEach(l)}return!i&&!a?(Ke(t)&&s.set(t,null),null):(ve(i)?i.forEach(l=>o[l]=null):Pt(o,i),Ke(t)&&s.set(t,o),o)}function dl(t,e){return!t||!ia(e)?!1:(e=e.slice(2).replace(/Once$/,""),Ge(t,e[0].toLowerCase()+e.slice(1))||Ge(t,or(e))||Ge(t,e))}function pu(t){const{type:e,vnode:n,proxy:s,withProxy:r,propsOptions:[i],slots:o,attrs:a,emit:l,render:u,renderCache:h,props:f,data:p,setupState:g,ctx:w,inheritAttrs:v}=t,k=Ac(t);let M,V;try{if(n.shapeFlag&4){const I=r||s,O=I;M=sn(u.call(O,I,h,f,g,p,w)),V=a}else{const I=e;M=sn(I.length>1?I(f,{attrs:a,slots:o,emit:l}):I(f,null)),V=e.props?a:EI(a)}}catch(I){Po.length=0,Fi(I,t,1),M=Ee(gt)}let _=M;if(V&&v!==!1){const I=Object.keys(V),{shapeFlag:O}=_;I.length&&O&7&&(i&&I.some(Xh)&&(V=TI(V,i)),_=pn(_,V,!1,!0))}return n.dirs&&(_=pn(_,null,!1,!0),_.dirs=_.dirs?_.dirs.concat(n.dirs):n.dirs),n.transition&&Ti(_,n.transition),M=_,Ac(k),M}function vI(t,e=!0){let n;for(let s=0;s<t.length;s++){const r=t[s];if(Or(r)){if(r.type!==gt||r.children==="v-if"){if(n)return;n=r}}else return}return n}const EI=t=>{let e;for(const n in t)(n==="class"||n==="style"||ia(n))&&((e||(e={}))[n]=t[n]);return e},TI=(t,e)=>{const n={};for(const s in t)(!Xh(s)||!(s.slice(9)in e))&&(n[s]=t[s]);return n};function wI(t,e,n){const{props:s,children:r,component:i}=t,{props:o,children:a,patchFlag:l}=e,u=i.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&l>=0){if(l&1024)return!0;if(l&16)return s?Rp(s,o,u):!!o;if(l&8){const h=e.dynamicProps;for(let f=0;f<h.length;f++){const p=h[f];if(o[p]!==s[p]&&!dl(u,p))return!0}}}else return(r||a)&&(!a||!a.$stable)?!0:s===o?!1:s?o?Rp(s,o,u):!0:!!o;return!1}function Rp(t,e,n){const s=Object.keys(e);if(s.length!==Object.keys(t).length)return!0;for(let r=0;r<s.length;r++){const i=s[r];if(e[i]!==t[i]&&!dl(n,i))return!0}return!1}function pl({vnode:t,parent:e},n){for(;e;){const s=e.subTree;if(s.suspense&&s.suspense.activeBranch===t&&(s.el=t.el),s===t)(t=e.vnode).el=n,e=e.parent;else break}}const Ty={},wy=()=>Object.create(Ty),by=t=>Object.getPrototypeOf(t)===Ty;function bI(t,e,n,s=!1){const r={},i=wy();t.propsDefaults=Object.create(null),Iy(t,e,r,i);for(const o in t.propsOptions[0])o in r||(r[o]=void 0);n?t.props=s?r:Ln(r):t.type.props?t.props=r:t.props=i,t.attrs=i}function II(t,e,n,s){const{props:r,attrs:i,vnode:{patchFlag:o}}=t,a=Fe(r),[l]=t.propsOptions;let u=!1;if((s||o>0)&&!(o&16)){if(o&8){const h=t.vnode.dynamicProps;for(let f=0;f<h.length;f++){let p=h[f];if(dl(t.emitsOptions,p))continue;const g=e[p];if(l)if(Ge(i,p))g!==i[p]&&(i[p]=g,u=!0);else{const w=mn(p);r[w]=th(l,a,w,g,t,!1)}else g!==i[p]&&(i[p]=g,u=!0)}}}else{Iy(t,e,r,i)&&(u=!0);let h;for(const f in a)(!e||!Ge(e,f)&&((h=or(f))===f||!Ge(e,h)))&&(l?n&&(n[f]!==void 0||n[h]!==void 0)&&(r[f]=th(l,a,f,void 0,t,!0)):delete r[f]);if(i!==a)for(const f in i)(!e||!Ge(e,f))&&(delete i[f],u=!0)}u&&Zn(t.attrs,"set","")}function Iy(t,e,n,s){const[r,i]=t.propsOptions;let o=!1,a;if(e)for(let l in e){if(ui(l))continue;const u=e[l];let h;r&&Ge(r,h=mn(l))?!i||!i.includes(h)?n[h]=u:(a||(a={}))[h]=u:dl(t.emitsOptions,l)||(!(l in s)||u!==s[l])&&(s[l]=u,o=!0)}if(i){const l=Fe(n),u=a||Je;for(let h=0;h<i.length;h++){const f=i[h];n[f]=th(r,l,f,u[f],t,!Ge(u,f))}}return o}function th(t,e,n,s,r,i){const o=t[n];if(o!=null){const a=Ge(o,"default");if(a&&s===void 0){const l=o.default;if(o.type!==Function&&!o.skipFactory&&be(l)){const{propsDefaults:u}=r;if(n in u)s=u[n];else{const h=ua(r);s=u[n]=l.call(null,e),h()}}else s=l;r.ce&&r.ce._setProp(n,s)}o[0]&&(i&&!a?s=!1:o[1]&&(s===""||s===or(n))&&(s=!0))}return s}const AI=new WeakMap;function Ay(t,e,n=!1){const s=n?AI:e.propsCache,r=s.get(t);if(r)return r;const i=t.props,o={},a=[];let l=!1;if(!be(t)){const h=f=>{l=!0;const[p,g]=Ay(f,e,!0);Pt(o,p),g&&a.push(...g)};!n&&e.mixins.length&&e.mixins.forEach(h),t.extends&&h(t.extends),t.mixins&&t.mixins.forEach(h)}if(!i&&!l)return Ke(t)&&s.set(t,ci),ci;if(ve(i))for(let h=0;h<i.length;h++){const f=mn(i[h]);Sp(f)&&(o[f]=Je)}else if(i)for(const h in i){const f=mn(h);if(Sp(f)){const p=i[h],g=o[f]=ve(p)||be(p)?{type:p}:Pt({},p),w=g.type;let v=!1,k=!0;if(ve(w))for(let M=0;M<w.length;++M){const V=w[M],_=be(V)&&V.name;if(_==="Boolean"){v=!0;break}else _==="String"&&(k=!1)}else v=be(w)&&w.name==="Boolean";g[0]=v,g[1]=k,(v||Ge(g,"default"))&&a.push(f)}}const u=[o,a];return Ke(t)&&s.set(t,u),u}function Sp(t){return t[0]!=="$"&&!ui(t)}const mf=t=>t==="_"||t==="_ctx"||t==="$stable",gf=t=>ve(t)?t.map(sn):[sn(t)],RI=(t,e,n)=>{if(e._n)return e;const s=cn((...r)=>gf(e(...r)),n);return s._c=!1,s},Ry=(t,e,n)=>{const s=t._ctx;for(const r in t){if(mf(r))continue;const i=t[r];if(be(i))e[r]=RI(r,i,s);else if(i!=null){const o=gf(i);e[r]=()=>o}}},Sy=(t,e)=>{const n=gf(e);t.slots.default=()=>n},Cy=(t,e,n)=>{for(const s in e)(n||!mf(s))&&(t[s]=e[s])},SI=(t,e,n)=>{const s=t.slots=wy();if(t.vnode.shapeFlag&32){const r=e._;r?(Cy(s,e,n),n&&S_(s,"_",r,!0)):Ry(e,s)}else e&&Sy(t,e)},CI=(t,e,n)=>{const{vnode:s,slots:r}=t;let i=!0,o=Je;if(s.shapeFlag&32){const a=e._;a?n&&a===1?i=!1:Cy(r,e,n):(i=!e.$stable,Ry(e,r)),o=e}else e&&(Sy(t,e),o={default:1});if(i)for(const a in r)!mf(a)&&o[a]==null&&delete r[a]},mt=Vy;function PI(t){return Py(t)}function kI(t){return Py(t,zb)}function Py(t,e){const n=al();n.__VUE__=!0;const{insert:s,remove:r,patchProp:i,createElement:o,createText:a,createComment:l,setText:u,setElementText:h,parentNode:f,nextSibling:p,setScopeId:g=Mn,insertStaticContent:w}=t,v=(b,N,L,U=null,W=null,X=null,ne=void 0,Y=null,H=!!N.dynamicChildren)=>{if(b===N)return;b&&!vn(b,N)&&(U=D(b),De(b,W,X,!0),b=null),N.patchFlag===-2&&(H=!1,N.dynamicChildren=null);const{type:j,ref:_e,shapeFlag:he}=N;switch(j){case kr:k(b,N,L,U);break;case gt:M(b,N,L,U);break;case Co:b==null&&V(N,L,U,ne);break;case $e:R(b,N,L,U,W,X,ne,Y,H);break;default:he&1?O(b,N,L,U,W,X,ne,Y,H):he&6?y(b,N,L,U,W,X,ne,Y,H):(he&64||he&128)&&j.process(b,N,L,U,W,X,ne,Y,H,z)}_e!=null&&W?di(_e,b&&b.ref,X,N||b,!N):_e==null&&b&&b.ref!=null&&di(b.ref,null,X,b,!0)},k=(b,N,L,U)=>{if(b==null)s(N.el=a(N.children),L,U);else{const W=N.el=b.el;N.children!==b.children&&u(W,N.children)}},M=(b,N,L,U)=>{b==null?s(N.el=l(N.children||""),L,U):N.el=b.el},V=(b,N,L,U)=>{[b.el,b.anchor]=w(b.children,N,L,U,b.el,b.anchor)},_=({el:b,anchor:N},L,U)=>{let W;for(;b&&b!==N;)W=p(b),s(b,L,U),b=W;s(N,L,U)},I=({el:b,anchor:N})=>{let L;for(;b&&b!==N;)L=p(b),r(b),b=L;r(N)},O=(b,N,L,U,W,X,ne,Y,H)=>{if(N.type==="svg"?ne="svg":N.type==="math"&&(ne="mathml"),b==null)F(N,L,U,W,X,ne,Y,H);else{const j=b.el&&b.el._isVueCE?b.el:null;try{j&&j._beginPatch(),E(b,N,W,X,ne,Y,H)}finally{j&&j._endPatch()}}},F=(b,N,L,U,W,X,ne,Y)=>{let H,j;const{props:_e,shapeFlag:he,transition:me,dirs:Ae}=b;if(H=b.el=o(b.type,X,_e&&_e.is,_e),he&8?h(H,b.children):he&16&&T(b.children,H,null,U,W,mu(b,X),ne,Y),Ae&&On(b,null,U,"created"),S(H,b,b.scopeId,ne,U),_e){for(const je in _e)je!=="value"&&!ui(je)&&i(H,je,null,_e[je],X,U);"value"in _e&&i(H,"value",null,_e.value,X),(j=_e.onVnodeBeforeMount)&&Qt(j,U,b)}Ae&&On(b,null,U,"beforeMount");const Ne=ky(W,me);Ne&&me.beforeEnter(H),s(H,N,L),((j=_e&&_e.onVnodeMounted)||Ne||Ae)&&mt(()=>{j&&Qt(j,U,b),Ne&&me.enter(H),Ae&&On(b,null,U,"mounted")},W)},S=(b,N,L,U,W)=>{if(L&&g(b,L),U)for(let X=0;X<U.length;X++)g(b,U[X]);if(W){let X=W.subTree;if(N===X||kc(X.type)&&(X.ssContent===N||X.ssFallback===N)){const ne=W.vnode;S(b,ne,ne.scopeId,ne.slotScopeIds,W.parent)}}},T=(b,N,L,U,W,X,ne,Y,H=0)=>{for(let j=H;j<b.length;j++){const _e=b[j]=Y?Vs(b[j]):sn(b[j]);v(null,_e,N,L,U,W,X,ne,Y)}},E=(b,N,L,U,W,X,ne)=>{const Y=N.el=b.el;let{patchFlag:H,dynamicChildren:j,dirs:_e}=N;H|=b.patchFlag&16;const he=b.props||Je,me=N.props||Je;let Ae;if(L&&_r(L,!1),(Ae=me.onVnodeBeforeUpdate)&&Qt(Ae,L,N,b),_e&&On(N,b,L,"beforeUpdate"),L&&_r(L,!0),(he.innerHTML&&me.innerHTML==null||he.textContent&&me.textContent==null)&&h(Y,""),j?C(b.dynamicChildren,j,Y,L,U,mu(N,W),X):ne||se(b,N,Y,null,L,U,mu(N,W),X,!1),H>0){if(H&16)P(Y,he,me,L,W);else if(H&2&&he.class!==me.class&&i(Y,"class",null,me.class,W),H&4&&i(Y,"style",he.style,me.style,W),H&8){const Ne=N.dynamicProps;for(let je=0;je<Ne.length;je++){const Ue=Ne[je],Lt=he[Ue],Et=me[Ue];(Et!==Lt||Ue==="value")&&i(Y,Ue,Lt,Et,W,L)}}H&1&&b.children!==N.children&&h(Y,N.children)}else!ne&&j==null&&P(Y,he,me,L,W);((Ae=me.onVnodeUpdated)||_e)&&mt(()=>{Ae&&Qt(Ae,L,N,b),_e&&On(N,b,L,"updated")},U)},C=(b,N,L,U,W,X,ne)=>{for(let Y=0;Y<N.length;Y++){const H=b[Y],j=N[Y],_e=H.el&&(H.type===$e||!vn(H,j)||H.shapeFlag&198)?f(H.el):L;v(H,j,_e,null,U,W,X,ne,!0)}},P=(b,N,L,U,W)=>{if(N!==L){if(N!==Je)for(const X in N)!ui(X)&&!(X in L)&&i(b,X,N[X],null,W,U);for(const X in L){if(ui(X))continue;const ne=L[X],Y=N[X];ne!==Y&&X!=="value"&&i(b,X,Y,ne,W,U)}"value"in L&&i(b,"value",N.value,L.value,W)}},R=(b,N,L,U,W,X,ne,Y,H)=>{const j=N.el=b?b.el:a(""),_e=N.anchor=b?b.anchor:a("");let{patchFlag:he,dynamicChildren:me,slotScopeIds:Ae}=N;Ae&&(Y=Y?Y.concat(Ae):Ae),b==null?(s(j,L,U),s(_e,L,U),T(N.children||[],L,_e,W,X,ne,Y,H)):he>0&&he&64&&me&&b.dynamicChildren&&b.dynamicChildren.length===me.length?(C(b.dynamicChildren,me,L,W,X,ne,Y),(N.key!=null||W&&N===W.subTree)&&_f(b,N,!0)):se(b,N,L,_e,W,X,ne,Y,H)},y=(b,N,L,U,W,X,ne,Y,H)=>{N.slotScopeIds=Y,b==null?N.shapeFlag&512?W.ctx.activate(N,L,U,ne,H):ae(N,L,U,W,X,ne,H):fe(b,N,H)},ae=(b,N,L,U,W,X,ne)=>{const Y=b.component=$I(b,U,W);if(ca(b)&&(Y.ctx.renderer=z),HI(Y,!1,ne),Y.asyncDep){if(W&&W.registerDep(Y,ie,ne),!b.el){const H=Y.subTree=Ee(gt);M(null,H,N,L),b.placeholder=H.el}}else ie(Y,b,N,L,W,X,ne)},fe=(b,N,L)=>{const U=N.component=b.component;if(wI(b,N,L))if(U.asyncDep&&!U.asyncResolved){pe(U,N,L);return}else U.next=N,U.update();else N.el=b.el,U.vnode=N},ie=(b,N,L,U,W,X,ne)=>{const Y=()=>{if(b.isMounted){let{next:he,bu:me,u:Ae,parent:Ne,vnode:je}=b;{const Tt=Ny(b);if(Tt){he&&(he.el=je.el,pe(b,he,ne)),Tt.asyncDep.then(()=>{b.isUnmounted||Y()});return}}let Ue=he,Lt;_r(b,!1),he?(he.el=je.el,pe(b,he,ne)):he=je,me&&hi(me),(Lt=he.props&&he.props.onVnodeBeforeUpdate)&&Qt(Lt,Ne,he,je),_r(b,!0);const Et=pu(b),Kt=b.subTree;b.subTree=Et,v(Kt,Et,f(Kt.el),D(Kt),b,W,X),he.el=Et.el,Ue===null&&pl(b,Et.el),Ae&&mt(Ae,W),(Lt=he.props&&he.props.onVnodeUpdated)&&mt(()=>Qt(Lt,Ne,he,je),W)}else{let he;const{el:me,props:Ae}=N,{bm:Ne,m:je,parent:Ue,root:Lt,type:Et}=b,Kt=rs(N);if(_r(b,!1),Ne&&hi(Ne),!Kt&&(he=Ae&&Ae.onVnodeBeforeMount)&&Qt(he,Ue,N),_r(b,!0),me&&ue){const Tt=()=>{b.subTree=pu(b),ue(me,b.subTree,b,W,null)};Kt&&Et.__asyncHydrate?Et.__asyncHydrate(me,b,Tt):Tt()}else{Lt.ce&&Lt.ce._def.shadowRoot!==!1&&Lt.ce._injectChildStyle(Et);const Tt=b.subTree=pu(b);v(null,Tt,L,U,b,W,X),N.el=Tt.el}if(je&&mt(je,W),!Kt&&(he=Ae&&Ae.onVnodeMounted)){const Tt=N;mt(()=>Qt(he,Ue,Tt),W)}(N.shapeFlag&256||Ue&&rs(Ue.vnode)&&Ue.vnode.shapeFlag&256)&&b.a&&mt(b.a,W),b.isMounted=!0,N=L=U=null}};b.scope.on();const H=b.effect=new O_(Y);b.scope.off();const j=b.update=H.run.bind(H),_e=b.job=H.runIfDirty.bind(H);_e.i=b,_e.id=b.uid,H.scheduler=()=>uf(_e),_r(b,!0),j()},pe=(b,N,L)=>{N.component=b;const U=b.vnode.props;b.vnode=N,b.next=null,II(b,N.props,U,L),CI(b,N.children,L),ls(),dp(b),us()},se=(b,N,L,U,W,X,ne,Y,H=!1)=>{const j=b&&b.children,_e=b?b.shapeFlag:0,he=N.children,{patchFlag:me,shapeFlag:Ae}=N;if(me>0){if(me&128){He(j,he,L,U,W,X,ne,Y,H);return}else if(me&256){Te(j,he,L,U,W,X,ne,Y,H);return}}Ae&8?(_e&16&&Q(j,W,X),he!==j&&h(L,he)):_e&16?Ae&16?He(j,he,L,U,W,X,ne,Y,H):Q(j,W,X,!0):(_e&8&&h(L,""),Ae&16&&T(he,L,U,W,X,ne,Y,H))},Te=(b,N,L,U,W,X,ne,Y,H)=>{b=b||ci,N=N||ci;const j=b.length,_e=N.length,he=Math.min(j,_e);let me;for(me=0;me<he;me++){const Ae=N[me]=H?Vs(N[me]):sn(N[me]);v(b[me],Ae,L,null,W,X,ne,Y,H)}j>_e?Q(b,W,X,!0,!1,he):T(N,L,U,W,X,ne,Y,H,he)},He=(b,N,L,U,W,X,ne,Y,H)=>{let j=0;const _e=N.length;let he=b.length-1,me=_e-1;for(;j<=he&&j<=me;){const Ae=b[j],Ne=N[j]=H?Vs(N[j]):sn(N[j]);if(vn(Ae,Ne))v(Ae,Ne,L,null,W,X,ne,Y,H);else break;j++}for(;j<=he&&j<=me;){const Ae=b[he],Ne=N[me]=H?Vs(N[me]):sn(N[me]);if(vn(Ae,Ne))v(Ae,Ne,L,null,W,X,ne,Y,H);else break;he--,me--}if(j>he){if(j<=me){const Ae=me+1,Ne=Ae<_e?N[Ae].el:U;for(;j<=me;)v(null,N[j]=H?Vs(N[j]):sn(N[j]),L,Ne,W,X,ne,Y,H),j++}}else if(j>me)for(;j<=he;)De(b[j],W,X,!0),j++;else{const Ae=j,Ne=j,je=new Map;for(j=Ne;j<=me;j++){const ht=N[j]=H?Vs(N[j]):sn(N[j]);ht.key!=null&&je.set(ht.key,j)}let Ue,Lt=0;const Et=me-Ne+1;let Kt=!1,Tt=0;const Wn=new Array(Et);for(j=0;j<Et;j++)Wn[j]=0;for(j=Ae;j<=he;j++){const ht=b[j];if(Lt>=Et){De(ht,W,X,!0);continue}let tn;if(ht.key!=null)tn=je.get(ht.key);else for(Ue=Ne;Ue<=me;Ue++)if(Wn[Ue-Ne]===0&&vn(ht,N[Ue])){tn=Ue;break}tn===void 0?De(ht,W,X,!0):(Wn[tn-Ne]=j+1,tn>=Tt?Tt=tn:Kt=!0,v(ht,N[tn],L,null,W,X,ne,Y,H),Lt++)}const zr=Kt?NI(Wn):ci;for(Ue=zr.length-1,j=Et-1;j>=0;j--){const ht=Ne+j,tn=N[ht],fr=N[ht+1],Yi=ht+1<_e?fr.el||Dy(fr):U;Wn[j]===0?v(null,tn,L,Yi,W,X,ne,Y,H):Kt&&(Ue<0||j!==zr[Ue]?Pe(tn,L,Yi,2):Ue--)}}},Pe=(b,N,L,U,W=null)=>{const{el:X,type:ne,transition:Y,children:H,shapeFlag:j}=b;if(j&6){Pe(b.component.subTree,N,L,U);return}if(j&128){b.suspense.move(N,L,U);return}if(j&64){ne.move(b,N,L,z);return}if(ne===$e){s(X,N,L);for(let he=0;he<H.length;he++)Pe(H[he],N,L,U);s(b.anchor,N,L);return}if(ne===Co){_(b,N,L);return}if(U!==2&&j&1&&Y)if(U===0)Y.beforeEnter(X),s(X,N,L),mt(()=>Y.enter(X),W);else{const{leave:he,delayLeave:me,afterLeave:Ae}=Y,Ne=()=>{b.ctx.isUnmounted?r(X):s(X,N,L)},je=()=>{X._isLeaving&&X[Xn](!0),he(X,()=>{Ne(),Ae&&Ae()})};me?me(X,Ne,je):je()}else s(X,N,L)},De=(b,N,L,U=!1,W=!1)=>{const{type:X,props:ne,ref:Y,children:H,dynamicChildren:j,shapeFlag:_e,patchFlag:he,dirs:me,cacheIndex:Ae}=b;if(he===-2&&(W=!1),Y!=null&&(ls(),di(Y,null,L,b,!0),us()),Ae!=null&&(N.renderCache[Ae]=void 0),_e&256){N.ctx.deactivate(b);return}const Ne=_e&1&&me,je=!rs(b);let Ue;if(je&&(Ue=ne&&ne.onVnodeBeforeUnmount)&&Qt(Ue,N,b),_e&6)ee(b.component,L,U);else{if(_e&128){b.suspense.unmount(L,U);return}Ne&&On(b,null,N,"beforeUnmount"),_e&64?b.type.remove(b,N,L,z,U):j&&!j.hasOnce&&(X!==$e||he>0&&he&64)?Q(j,N,L,!1,!0):(X===$e&&he&384||!W&&_e&16)&&Q(H,N,L),U&&te(b)}(je&&(Ue=ne&&ne.onVnodeUnmounted)||Ne)&&mt(()=>{Ue&&Qt(Ue,N,b),Ne&&On(b,null,N,"unmounted")},L)},te=b=>{const{type:N,el:L,anchor:U,transition:W}=b;if(N===$e){G(L,U);return}if(N===Co){I(b);return}const X=()=>{r(L),W&&!W.persisted&&W.afterLeave&&W.afterLeave()};if(b.shapeFlag&1&&W&&!W.persisted){const{leave:ne,delayLeave:Y}=W,H=()=>ne(L,X);Y?Y(b.el,X,H):H()}else X()},G=(b,N)=>{let L;for(;b!==N;)L=p(b),r(b),b=L;r(N)},ee=(b,N,L)=>{const{bum:U,scope:W,job:X,subTree:ne,um:Y,m:H,a:j}=b;Pc(H),Pc(j),U&&hi(U),W.stop(),X&&(X.flags|=8,De(ne,b,N,L)),Y&&mt(Y,N),mt(()=>{b.isUnmounted=!0},N)},Q=(b,N,L,U=!1,W=!1,X=0)=>{for(let ne=X;ne<b.length;ne++)De(b[ne],N,L,U,W)},D=b=>{if(b.shapeFlag&6)return D(b.component.subTree);if(b.shapeFlag&128)return b.suspense.next();const N=p(b.anchor||b.el),L=N&&N[ey];return L?p(L):N};let x=!1;const B=(b,N,L)=>{let U;b==null?N._vnode&&(De(N._vnode,null,null,!0),U=N._vnode.component):v(N._vnode||null,b,N,null,null,null,L),N._vnode=b,x||(x=!0,dp(U),Ic(),x=!1)},z={p:v,um:De,m:Pe,r:te,mt:ae,mc:T,pc:se,pbc:C,n:D,o:t};let re,ue;return e&&([re,ue]=e(z)),{render:B,hydrate:re,createApp:mI(B,re)}}function mu({type:t,props:e},n){return n==="svg"&&t==="foreignObject"||n==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:n}function _r({effect:t,job:e},n){n?(t.flags|=32,e.flags|=4):(t.flags&=-33,e.flags&=-5)}function ky(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function _f(t,e,n=!1){const s=t.children,r=e.children;if(ve(s)&&ve(r))for(let i=0;i<s.length;i++){const o=s[i];let a=r[i];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=r[i]=Vs(r[i]),a.el=o.el),!n&&a.patchFlag!==-2&&_f(o,a)),a.type===kr&&(a.patchFlag!==-1?a.el=o.el:a.__elIndex=i+(t.type===$e?1:0)),a.type===gt&&!a.el&&(a.el=o.el)}}function NI(t){const e=t.slice(),n=[0];let s,r,i,o,a;const l=t.length;for(s=0;s<l;s++){const u=t[s];if(u!==0){if(r=n[n.length-1],t[r]<u){e[s]=r,n.push(s);continue}for(i=0,o=n.length-1;i<o;)a=i+o>>1,t[n[a]]<u?i=a+1:o=a;u<t[n[i]]&&(i>0&&(e[s]=n[i-1]),n[i]=s)}}for(i=n.length,o=n[i-1];i-- >0;)n[i]=o,o=e[o];return n}function Ny(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:Ny(e)}function Pc(t){if(t)for(let e=0;e<t.length;e++)t[e].flags|=8}function Dy(t){if(t.placeholder)return t.placeholder;const e=t.component;return e?Dy(e.subTree):null}const kc=t=>t.__isSuspense;let nh=0;const DI={name:"Suspense",__isSuspense:!0,process(t,e,n,s,r,i,o,a,l,u){if(t==null)OI(e,n,s,r,i,o,a,l,u);else{if(i&&i.deps>0&&!t.suspense.isInFallback){e.suspense=t.suspense,e.suspense.vnode=e,e.el=t.el;return}VI(t,e,n,s,r,o,a,l,u)}},hydrate:LI,normalize:MI},yf=DI;function qo(t,e){const n=t.props&&t.props[e];be(n)&&n()}function OI(t,e,n,s,r,i,o,a,l){const{p:u,o:{createElement:h}}=l,f=h("div"),p=t.suspense=Oy(t,r,s,e,f,n,i,o,a,l);u(null,p.pendingBranch=t.ssContent,f,null,s,p,i,o),p.deps>0?(qo(t,"onPending"),qo(t,"onFallback"),u(null,t.ssFallback,e,n,s,null,i,o),pi(p,t.ssFallback)):p.resolve(!1,!0)}function VI(t,e,n,s,r,i,o,a,{p:l,um:u,o:{createElement:h}}){const f=e.suspense=t.suspense;f.vnode=e,e.el=t.el;const p=e.ssContent,g=e.ssFallback,{activeBranch:w,pendingBranch:v,isInFallback:k,isHydrating:M}=f;if(v)f.pendingBranch=p,vn(v,p)?(l(v,p,f.hiddenContainer,null,r,f,i,o,a),f.deps<=0?f.resolve():k&&(M||(l(w,g,n,s,r,null,i,o,a),pi(f,g)))):(f.pendingId=nh++,M?(f.isHydrating=!1,f.activeBranch=v):u(v,r,f),f.deps=0,f.effects.length=0,f.hiddenContainer=h("div"),k?(l(null,p,f.hiddenContainer,null,r,f,i,o,a),f.deps<=0?f.resolve():(l(w,g,n,s,r,null,i,o,a),pi(f,g))):w&&vn(w,p)?(l(w,p,n,s,r,f,i,o,a),f.resolve(!0)):(l(null,p,f.hiddenContainer,null,r,f,i,o,a),f.deps<=0&&f.resolve()));else if(w&&vn(w,p))l(w,p,n,s,r,f,i,o,a),pi(f,p);else if(qo(e,"onPending"),f.pendingBranch=p,p.shapeFlag&512?f.pendingId=p.component.suspenseId:f.pendingId=nh++,l(null,p,f.hiddenContainer,null,r,f,i,o,a),f.deps<=0)f.resolve();else{const{timeout:V,pendingId:_}=f;V>0?setTimeout(()=>{f.pendingId===_&&f.fallback(g)},V):V===0&&f.fallback(g)}}function Oy(t,e,n,s,r,i,o,a,l,u,h=!1){const{p:f,m:p,um:g,n:w,o:{parentNode:v,remove:k}}=u;let M;const V=xI(t);V&&e&&e.pendingBranch&&(M=e.pendingId,e.deps++);const _=t.props?C_(t.props.timeout):void 0,I=i,O={vnode:t,parent:e,parentComponent:n,namespace:o,container:s,hiddenContainer:r,deps:0,pendingId:nh++,timeout:typeof _=="number"?_:-1,activeBranch:null,pendingBranch:null,isInFallback:!h,isHydrating:h,isUnmounted:!1,effects:[],resolve(F=!1,S=!1){const{vnode:T,activeBranch:E,pendingBranch:C,pendingId:P,effects:R,parentComponent:y,container:ae,isInFallback:fe}=O;let ie=!1;O.isHydrating?O.isHydrating=!1:F||(ie=E&&C.transition&&C.transition.mode==="out-in",ie&&(E.transition.afterLeave=()=>{P===O.pendingId&&(p(C,ae,i===I?w(E):i,0),Qu(R),fe&&T.ssFallback&&(T.ssFallback.el=null))}),E&&(v(E.el)===ae&&(i=w(E)),g(E,y,O,!0),!ie&&fe&&T.ssFallback&&mt(()=>T.ssFallback.el=null,O)),ie||p(C,ae,i,0)),pi(O,C),O.pendingBranch=null,O.isInFallback=!1;let pe=O.parent,se=!1;for(;pe;){if(pe.pendingBranch){pe.effects.push(...R),se=!0;break}pe=pe.parent}!se&&!ie&&Qu(R),O.effects=[],V&&e&&e.pendingBranch&&M===e.pendingId&&(e.deps--,e.deps===0&&!S&&e.resolve()),qo(T,"onResolve")},fallback(F){if(!O.pendingBranch)return;const{vnode:S,activeBranch:T,parentComponent:E,container:C,namespace:P}=O;qo(S,"onFallback");const R=w(T),y=()=>{O.isInFallback&&(f(null,F,C,R,E,null,P,a,l),pi(O,F))},ae=F.transition&&F.transition.mode==="out-in";ae&&(T.transition.afterLeave=y),O.isInFallback=!0,g(T,E,null,!0),ae||y()},move(F,S,T){O.activeBranch&&p(O.activeBranch,F,S,T),O.container=F},next(){return O.activeBranch&&w(O.activeBranch)},registerDep(F,S,T){const E=!!O.pendingBranch;E&&O.deps++;const C=F.vnode.el;F.asyncDep.catch(P=>{Fi(P,F,0)}).then(P=>{if(F.isUnmounted||O.isUnmounted||O.pendingId!==F.suspenseId)return;F.asyncResolved=!0;const{vnode:R}=F;ih(F,P),C&&(R.el=C);const y=!C&&F.subTree.el;S(F,R,v(C||F.subTree.el),C?null:w(F.subTree),O,o,T),y&&(R.placeholder=null,k(y)),pl(F,R.el),E&&--O.deps===0&&O.resolve()})},unmount(F,S){O.isUnmounted=!0,O.activeBranch&&g(O.activeBranch,n,F,S),O.pendingBranch&&g(O.pendingBranch,n,F,S)}};return O}function LI(t,e,n,s,r,i,o,a,l){const u=e.suspense=Oy(e,s,n,t.parentNode,document.createElement("div"),null,r,i,o,a,!0),h=l(t,u.pendingBranch=e.ssContent,n,u,i,o);return u.deps===0&&u.resolve(!1,!0),h}function MI(t){const{shapeFlag:e,children:n}=t,s=e&32;t.ssContent=Cp(s?n.default:n),t.ssFallback=s?Cp(n.fallback):Ee(gt)}function Cp(t){let e;if(be(t)){const n=wi&&t._c;n&&(t._d=!1,ge()),t=t(),n&&(t._d=!0,e=Zt,Ly())}return ve(t)&&(t=vI(t)),t=sn(t),e&&!t.dynamicChildren&&(t.dynamicChildren=e.filter(n=>n!==t)),t}function Vy(t,e){e&&e.pendingBranch?ve(t)?e.effects.push(...t):e.effects.push(t):Qu(t)}function pi(t,e){t.activeBranch=e;const{vnode:n,parentComponent:s}=t;let r=e.el;for(;!r&&e.component;)e=e.component.subTree,r=e.el;n.el=r,s&&s.subTree===n&&(s.vnode.el=r,pl(s,r))}function xI(t){const e=t.props&&t.props.suspensible;return e!=null&&e!==!1}const $e=Symbol.for("v-fgt"),kr=Symbol.for("v-txt"),gt=Symbol.for("v-cmt"),Co=Symbol.for("v-stc"),Po=[];let Zt=null;function ge(t=!1){Po.push(Zt=t?null:[])}function Ly(){Po.pop(),Zt=Po[Po.length-1]||null}let wi=1;function Nc(t,e=!1){wi+=t,t<0&&Zt&&e&&(Zt.hasOnce=!0)}function My(t){return t.dynamicChildren=wi>0?Zt||ci:null,Ly(),wi>0&&Zt&&Zt.push(t),t}function Re(t,e,n,s,r,i){return My(K(t,e,n,s,r,i,!0))}function Jt(t,e,n,s,r){return My(Ee(t,e,n,s,r,!0))}function Or(t){return t?t.__v_isVNode===!0:!1}function vn(t,e){return t.type===e.type&&t.key===e.key}const xy=({key:t})=>t??null,oc=({ref:t,ref_key:e,ref_for:n})=>(typeof t=="number"&&(t=""+t),t!=null?nt(t)||vt(t)||be(t)?{i:Ot,r:t,k:e,f:!!n}:t:null);function K(t,e=null,n=null,s=0,r=null,i=t===$e?0:1,o=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&xy(e),ref:e&&oc(e),scopeId:X_,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:s,dynamicProps:r,dynamicChildren:null,appContext:null,ctx:Ot};return a?(vf(l,n),i&128&&t.normalize(l)):n&&(l.shapeFlag|=nt(n)?8:16),wi>0&&!o&&Zt&&(l.patchFlag>0||i&6)&&l.patchFlag!==32&&Zt.push(l),l}const Ee=FI;function FI(t,e=null,n=null,s=0,r=null,i=!1){if((!t||t===my)&&(t=gt),Or(t)){const a=pn(t,e,!0);return n&&vf(a,n),wi>0&&!i&&Zt&&(a.shapeFlag&6?Zt[Zt.indexOf(t)]=a:Zt.push(a)),a.patchFlag=-2,a}if(WI(t)&&(t=t.__vccOpts),e){e=Fy(e);let{class:a,style:l}=e;a&&!nt(a)&&(e.class=Ct(a)),Ke(l)&&(ul(l)&&!ve(l)&&(l=Pt({},l)),e.style=cl(l))}const o=nt(t)?1:kc(t)?128:ty(t)?64:Ke(t)?4:be(t)?2:0;return K(t,e,n,s,r,o,i,!0)}function Fy(t){return t?ul(t)||by(t)?Pt({},t):t:null}function pn(t,e,n=!1,s=!1){const{props:r,ref:i,patchFlag:o,children:a,transition:l}=t,u=e?Uy(r||{},e):r,h={__v_isVNode:!0,__v_skip:!0,type:t.type,props:u,key:u&&xy(u),ref:e&&e.ref?n&&i?ve(i)?i.concat(oc(e)):[i,oc(e)]:oc(e):i,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:a,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==$e?o===-1?16:o|16:o,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:l,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&pn(t.ssContent),ssFallback:t.ssFallback&&pn(t.ssFallback),placeholder:t.placeholder,el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return l&&s&&Ti(h,l.clone(h)),h}function Be(t=" ",e=0){return Ee(kr,null,t,e)}function sh(t,e){const n=Ee(Co,null,t);return n.staticCount=e,n}function fs(t="",e=!1){return e?(ge(),Jt(gt,null,t)):Ee(gt,null,t)}function sn(t){return t==null||typeof t=="boolean"?Ee(gt):ve(t)?Ee($e,null,t.slice()):Or(t)?Vs(t):Ee(kr,null,String(t))}function Vs(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:pn(t)}function vf(t,e){let n=0;const{shapeFlag:s}=t;if(e==null)e=null;else if(ve(e))n=16;else if(typeof e=="object")if(s&65){const r=e.default;r&&(r._c&&(r._d=!1),vf(t,r()),r._c&&(r._d=!0));return}else{n=32;const r=e._;!r&&!by(e)?e._ctx=Ot:r===3&&Ot&&(Ot.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else be(e)?(e={default:e,_ctx:Ot},n=32):(e=String(e),s&64?(n=16,e=[Be(e)]):n=8);t.children=e,t.shapeFlag|=n}function Uy(...t){const e={};for(let n=0;n<t.length;n++){const s=t[n];for(const r in s)if(r==="class")e.class!==s.class&&(e.class=Ct([e.class,s.class]));else if(r==="style")e.style=cl([e.style,s.style]);else if(ia(r)){const i=e[r],o=s[r];o&&i!==o&&!(ve(i)&&i.includes(o))&&(e[r]=i?[].concat(i,o):o)}else r!==""&&(e[r]=s[r])}return e}function Qt(t,e,n,s=null){Rn(t,e,7,[n,s])}const UI=vy();let BI=0;function $I(t,e,n){const s=t.type,r=(e?e.appContext:t.appContext)||UI,i={uid:BI++,vnode:t,type:s,parent:e,appContext:r,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new D_(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(r.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Ay(s,r),emitsOptions:Ey(s,r),emit:null,emitted:null,propsDefaults:Je,inheritAttrs:s.inheritAttrs,ctx:Je,data:Je,props:Je,attrs:Je,slots:Je,refs:Je,setupState:Je,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=e?e.root:i,i.emit=_I.bind(null,i),t.ce&&t.ce(i),i}let Dt=null;const Hr=()=>Dt||Ot;let Dc,rh;{const t=al(),e=(n,s)=>{let r;return(r=t[n])||(r=t[n]=[]),r.push(s),i=>{r.length>1?r.forEach(o=>o(i)):r[0](i)}};Dc=e("__VUE_INSTANCE_SETTERS__",n=>Dt=n),rh=e("__VUE_SSR_SETTERS__",n=>bi=n)}const ua=t=>{const e=Dt;return Dc(t),t.scope.on(),()=>{t.scope.off(),Dc(e)}},Pp=()=>{Dt&&Dt.scope.off(),Dc(null)};function By(t){return t.vnode.shapeFlag&4}let bi=!1;function HI(t,e=!1,n=!1){e&&rh(e);const{props:s,children:r}=t.vnode,i=By(t);bI(t,s,i,e),SI(t,r,n||e);const o=i?jI(t,e):void 0;return e&&rh(!1),o}function jI(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,cI);const{setup:s}=n;if(s){ls();const r=t.setupContext=s.length>1?GI(t):null,i=ua(t),o=aa(s,t,0,[t.props,r]),a=ef(o);if(us(),i(),(a||t.sp)&&!rs(t)&&ff(t),a){if(o.then(Pp,Pp),e)return o.then(l=>{ih(t,l)}).catch(l=>{Fi(l,t,0)});t.asyncDep=o}else ih(t,o)}else $y(t)}function ih(t,e,n){be(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:Ke(e)&&(t.setupState=K_(e)),$y(t)}function $y(t,e,n){const s=t.type;t.render||(t.render=s.render||Mn);{const r=ua(t);ls();try{lI(t)}finally{us(),r()}}}const qI={get(t,e){return Ut(t,"get",""),t[e]}};function GI(t){const e=n=>{t.exposed=n||{}};return{attrs:new Proxy(t.attrs,qI),slots:t.slots,emit:t.emit,expose:e}}function ml(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(K_(bb(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in So)return So[n](t)},has(e,n){return n in e||n in So}})):t.proxy}function oh(t,e=!0){return be(t)?t.displayName||t.name:t.name||e&&t.__name}function WI(t){return be(t)&&"__vccOpts"in t}const xe=(t,e)=>Db(t,e,bi);function ot(t,e,n){try{Nc(-1);const s=arguments.length;return s===2?Ke(e)&&!ve(e)?Or(e)?Ee(t,null,[e]):Ee(t,e):Ee(t,null,e):(s>3?n=Array.prototype.slice.call(arguments,2):s===3&&Or(n)&&(n=[n]),Ee(t,e,n))}finally{Nc(1)}}const zI="3.5.26";let ah;const kp=typeof window<"u"&&window.trustedTypes;if(kp)try{ah=kp.createPolicy("vue",{createHTML:t=>t})}catch{}const Hy=ah?t=>ah.createHTML(t):t=>t,KI="http://www.w3.org/2000/svg",QI="http://www.w3.org/1998/Math/MathML",Jn=typeof document<"u"?document:null,Np=Jn&&Jn.createElement("template"),YI={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,s)=>{const r=e==="svg"?Jn.createElementNS(KI,t):e==="mathml"?Jn.createElementNS(QI,t):n?Jn.createElement(t,{is:n}):Jn.createElement(t);return t==="select"&&s&&s.multiple!=null&&r.setAttribute("multiple",s.multiple),r},createText:t=>Jn.createTextNode(t),createComment:t=>Jn.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>Jn.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,n,s,r,i){const o=n?n.previousSibling:e.lastChild;if(r&&(r===i||r.nextSibling))for(;e.insertBefore(r.cloneNode(!0),n),!(r===i||!(r=r.nextSibling)););else{Np.innerHTML=Hy(s==="svg"?`<svg>${t}</svg>`:s==="mathml"?`<math>${t}</math>`:t);const a=Np.content;if(s==="svg"||s==="mathml"){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}e.insertBefore(a,n)}return[o?o.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}},Rs="transition",fo="animation",Go=Symbol("_vtc"),jy={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},JI=Pt({},ry,jy),XI=t=>(t.displayName="Transition",t.props=JI,t),ha=XI((t,{slots:e})=>ot(qb,ZI(t),e)),yr=(t,e=[])=>{ve(t)?t.forEach(n=>n(...e)):t&&t(...e)},Dp=t=>t?ve(t)?t.some(e=>e.length>1):t.length>1:!1;function ZI(t){const e={};for(const R in t)R in jy||(e[R]=t[R]);if(t.css===!1)return e;const{name:n="v",type:s,duration:r,enterFromClass:i=`${n}-enter-from`,enterActiveClass:o=`${n}-enter-active`,enterToClass:a=`${n}-enter-to`,appearFromClass:l=i,appearActiveClass:u=o,appearToClass:h=a,leaveFromClass:f=`${n}-leave-from`,leaveActiveClass:p=`${n}-leave-active`,leaveToClass:g=`${n}-leave-to`}=t,w=eA(r),v=w&&w[0],k=w&&w[1],{onBeforeEnter:M,onEnter:V,onEnterCancelled:_,onLeave:I,onLeaveCancelled:O,onBeforeAppear:F=M,onAppear:S=V,onAppearCancelled:T=_}=e,E=(R,y,ae,fe)=>{R._enterCancelled=fe,vr(R,y?h:a),vr(R,y?u:o),ae&&ae()},C=(R,y)=>{R._isLeaving=!1,vr(R,f),vr(R,g),vr(R,p),y&&y()},P=R=>(y,ae)=>{const fe=R?S:V,ie=()=>E(y,R,ae);yr(fe,[y,ie]),Op(()=>{vr(y,R?l:i),Kn(y,R?h:a),Dp(fe)||Vp(y,s,v,ie)})};return Pt(e,{onBeforeEnter(R){yr(M,[R]),Kn(R,i),Kn(R,o)},onBeforeAppear(R){yr(F,[R]),Kn(R,l),Kn(R,u)},onEnter:P(!1),onAppear:P(!0),onLeave(R,y){R._isLeaving=!0;const ae=()=>C(R,y);Kn(R,f),R._enterCancelled?(Kn(R,p),xp(R)):(xp(R),Kn(R,p)),Op(()=>{R._isLeaving&&(vr(R,f),Kn(R,g),Dp(I)||Vp(R,s,k,ae))}),yr(I,[R,ae])},onEnterCancelled(R){E(R,!1,void 0,!0),yr(_,[R])},onAppearCancelled(R){E(R,!0,void 0,!0),yr(T,[R])},onLeaveCancelled(R){C(R),yr(O,[R])}})}function eA(t){if(t==null)return null;if(Ke(t))return[gu(t.enter),gu(t.leave)];{const e=gu(t);return[e,e]}}function gu(t){return C_(t)}function Kn(t,e){e.split(/\s+/).forEach(n=>n&&t.classList.add(n)),(t[Go]||(t[Go]=new Set)).add(e)}function vr(t,e){e.split(/\s+/).forEach(s=>s&&t.classList.remove(s));const n=t[Go];n&&(n.delete(e),n.size||(t[Go]=void 0))}function Op(t){requestAnimationFrame(()=>{requestAnimationFrame(t)})}let tA=0;function Vp(t,e,n,s){const r=t._endId=++tA,i=()=>{r===t._endId&&s()};if(n!=null)return setTimeout(i,n);const{type:o,timeout:a,propCount:l}=nA(t,e);if(!o)return s();const u=o+"end";let h=0;const f=()=>{t.removeEventListener(u,p),i()},p=g=>{g.target===t&&++h>=l&&f()};setTimeout(()=>{h<l&&f()},a+1),t.addEventListener(u,p)}function nA(t,e){const n=window.getComputedStyle(t),s=w=>(n[w]||"").split(", "),r=s(`${Rs}Delay`),i=s(`${Rs}Duration`),o=Lp(r,i),a=s(`${fo}Delay`),l=s(`${fo}Duration`),u=Lp(a,l);let h=null,f=0,p=0;e===Rs?o>0&&(h=Rs,f=o,p=i.length):e===fo?u>0&&(h=fo,f=u,p=l.length):(f=Math.max(o,u),h=f>0?o>u?Rs:fo:null,p=h?h===Rs?i.length:l.length:0);const g=h===Rs&&/\b(?:transform|all)(?:,|$)/.test(s(`${Rs}Property`).toString());return{type:h,timeout:f,propCount:p,hasTransform:g}}function Lp(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max(...e.map((n,s)=>Mp(n)+Mp(t[s])))}function Mp(t){return t==="auto"?0:Number(t.slice(0,-1).replace(",","."))*1e3}function xp(t){return(t?t.ownerDocument:document).body.offsetHeight}function sA(t,e,n){const s=t[Go];s&&(e=(e?[e,...s]:[...s]).join(" ")),e==null?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}const Fp=Symbol("_vod"),rA=Symbol("_vsh"),iA=Symbol(""),oA=/(?:^|;)\s*display\s*:/;function aA(t,e,n){const s=t.style,r=nt(n);let i=!1;if(n&&!r){if(e)if(nt(e))for(const o of e.split(";")){const a=o.slice(0,o.indexOf(":")).trim();n[a]==null&&ac(s,a,"")}else for(const o in e)n[o]==null&&ac(s,o,"");for(const o in n)o==="display"&&(i=!0),ac(s,o,n[o])}else if(r){if(e!==n){const o=s[iA];o&&(n+=";"+o),s.cssText=n,i=oA.test(n)}}else e&&t.removeAttribute("style");Fp in t&&(t[Fp]=i?s.display:"",t[rA]&&(s.display="none"))}const Up=/\s*!important$/;function ac(t,e,n){if(ve(n))n.forEach(s=>ac(t,e,s));else if(n==null&&(n=""),e.startsWith("--"))t.setProperty(e,n);else{const s=cA(t,e);Up.test(n)?t.setProperty(or(s),n.replace(Up,""),"important"):t[s]=n}}const Bp=["Webkit","Moz","ms"],_u={};function cA(t,e){const n=_u[e];if(n)return n;let s=mn(e);if(s!=="filter"&&s in t)return _u[e]=s;s=il(s);for(let r=0;r<Bp.length;r++){const i=Bp[r]+s;if(i in t)return _u[e]=i}return e}const $p="http://www.w3.org/1999/xlink";function Hp(t,e,n,s,r,i=eb(e)){s&&e.startsWith("xlink:")?n==null?t.removeAttributeNS($p,e.slice(6,e.length)):t.setAttributeNS($p,e,n):n==null||i&&!P_(n)?t.removeAttribute(e):t.setAttribute(e,i?"":In(n)?String(n):n)}function jp(t,e,n,s,r){if(e==="innerHTML"||e==="textContent"){n!=null&&(t[e]=e==="innerHTML"?Hy(n):n);return}const i=t.tagName;if(e==="value"&&i!=="PROGRESS"&&!i.includes("-")){const a=i==="OPTION"?t.getAttribute("value")||"":t.value,l=n==null?t.type==="checkbox"?"on":"":String(n);(a!==l||!("_value"in t))&&(t.value=l),n==null&&t.removeAttribute(e),t._value=n;return}let o=!1;if(n===""||n==null){const a=typeof t[e];a==="boolean"?n=P_(n):n==null&&a==="string"?(n="",o=!0):a==="number"&&(n=0,o=!0)}try{t[e]=n}catch{}o&&t.removeAttribute(r||e)}function Ms(t,e,n,s){t.addEventListener(e,n,s)}function lA(t,e,n,s){t.removeEventListener(e,n,s)}const qp=Symbol("_vei");function uA(t,e,n,s,r=null){const i=t[qp]||(t[qp]={}),o=i[e];if(s&&o)o.value=s;else{const[a,l]=hA(e);if(s){const u=i[e]=pA(s,r);Ms(t,a,u,l)}else o&&(lA(t,a,o,l),i[e]=void 0)}}const Gp=/(?:Once|Passive|Capture)$/;function hA(t){let e;if(Gp.test(t)){e={};let s;for(;s=t.match(Gp);)t=t.slice(0,t.length-s[0].length),e[s[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):or(t.slice(2)),e]}let yu=0;const fA=Promise.resolve(),dA=()=>yu||(fA.then(()=>yu=0),yu=Date.now());function pA(t,e){const n=s=>{if(!s._vts)s._vts=Date.now();else if(s._vts<=n.attached)return;Rn(mA(s,n.value),e,5,[s])};return n.value=t,n.attached=dA(),n}function mA(t,e){if(ve(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(s=>r=>!r._stopped&&s&&s(r))}else return e}const Wp=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,gA=(t,e,n,s,r,i)=>{const o=r==="svg";e==="class"?sA(t,s,o):e==="style"?aA(t,n,s):ia(e)?Xh(e)||uA(t,e,n,s,i):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):_A(t,e,s,o))?(jp(t,e,s),!t.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&Hp(t,e,s,o,i,e!=="value")):t._isVueCE&&(/[A-Z]/.test(e)||!nt(s))?jp(t,mn(e),s,i,e):(e==="true-value"?t._trueValue=s:e==="false-value"&&(t._falseValue=s),Hp(t,e,s,o))};function _A(t,e,n,s){if(s)return!!(e==="innerHTML"||e==="textContent"||e in t&&Wp(e)&&be(n));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="autocorrect"||e==="sandbox"&&t.tagName==="IFRAME"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const r=t.tagName;if(r==="IMG"||r==="VIDEO"||r==="CANVAS"||r==="SOURCE")return!1}return Wp(e)&&nt(n)?!1:e in t}const Ii=t=>{const e=t.props["onUpdate:modelValue"]||!1;return ve(e)?n=>hi(e,n):e};function yA(t){t.target.composing=!0}function zp(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const is=Symbol("_assign");function Kp(t,e,n){return e&&(t=t.trim()),n&&(t=ol(t)),t}const za={created(t,{modifiers:{lazy:e,trim:n,number:s}},r){t[is]=Ii(r);const i=s||r.props&&r.props.type==="number";Ms(t,e?"change":"input",o=>{o.target.composing||t[is](Kp(t.value,n,i))}),(n||i)&&Ms(t,"change",()=>{t.value=Kp(t.value,n,i)}),e||(Ms(t,"compositionstart",yA),Ms(t,"compositionend",zp),Ms(t,"change",zp))},mounted(t,{value:e}){t.value=e??""},beforeUpdate(t,{value:e,oldValue:n,modifiers:{lazy:s,trim:r,number:i}},o){if(t[is]=Ii(o),t.composing)return;const a=(i||t.type==="number")&&!/^0\d/.test(t.value)?ol(t.value):t.value,l=e??"";a!==l&&(document.activeElement===t&&t.type!=="range"&&(s&&e===n||r&&t.value.trim()===l)||(t.value=l))}},tx={deep:!0,created(t,e,n){t[is]=Ii(n),Ms(t,"change",()=>{const s=t._modelValue,r=Wo(t),i=t.checked,o=t[is];if(ve(s)){const a=tf(s,r),l=a!==-1;if(i&&!l)o(s.concat(r));else if(!i&&l){const u=[...s];u.splice(a,1),o(u)}}else if(Mi(s)){const a=new Set(s);i?a.add(r):a.delete(r),o(a)}else o(qy(t,i))})},mounted:Qp,beforeUpdate(t,e,n){t[is]=Ii(n),Qp(t,e,n)}};function Qp(t,{value:e,oldValue:n},s){t._modelValue=e;let r;if(ve(e))r=tf(e,s.props.value)>-1;else if(Mi(e))r=e.has(s.props.value);else{if(e===n)return;r=oa(e,qy(t,!0))}t.checked!==r&&(t.checked=r)}const nx={deep:!0,created(t,{value:e,modifiers:{number:n}},s){const r=Mi(e);Ms(t,"change",()=>{const i=Array.prototype.filter.call(t.options,o=>o.selected).map(o=>n?ol(Wo(o)):Wo(o));t[is](t.multiple?r?new Set(i):i:i[0]),t._assigning=!0,Xs(()=>{t._assigning=!1})}),t[is]=Ii(s)},mounted(t,{value:e}){Yp(t,e)},beforeUpdate(t,e,n){t[is]=Ii(n)},updated(t,{value:e}){t._assigning||Yp(t,e)}};function Yp(t,e){const n=t.multiple,s=ve(e);if(!(n&&!s&&!Mi(e))){for(let r=0,i=t.options.length;r<i;r++){const o=t.options[r],a=Wo(o);if(n)if(s){const l=typeof a;l==="string"||l==="number"?o.selected=e.some(u=>String(u)===String(a)):o.selected=tf(e,a)>-1}else o.selected=e.has(a);else if(oa(Wo(o),e)){t.selectedIndex!==r&&(t.selectedIndex=r);return}}!n&&t.selectedIndex!==-1&&(t.selectedIndex=-1)}}function Wo(t){return"_value"in t?t._value:t.value}function qy(t,e){const n=e?"_trueValue":"_falseValue";return n in t?t[n]:e}const vA=["ctrl","shift","alt","meta"],EA={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>vA.some(n=>t[`${n}Key`]&&!e.includes(n))},gl=(t,e)=>{const n=t._withMods||(t._withMods={}),s=e.join(".");return n[s]||(n[s]=((r,...i)=>{for(let o=0;o<e.length;o++){const a=EA[e[o]];if(a&&a(r,e))return}return t(r,...i)}))},TA={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},sx=(t,e)=>{const n=t._withKeys||(t._withKeys={}),s=e.join(".");return n[s]||(n[s]=(r=>{if(!("key"in r))return;const i=or(r.key);if(e.some(o=>o===i||TA[o]===i))return t(r)}))},Gy=Pt({patchProp:gA},YI);let ko,Jp=!1;function wA(){return ko||(ko=PI(Gy))}function bA(){return ko=Jp?ko:kI(Gy),Jp=!0,ko}const IA=((...t)=>{const e=wA().createApp(...t),{mount:n}=e;return e.mount=s=>{const r=zy(s);if(!r)return;const i=e._component;!be(i)&&!i.render&&!i.template&&(i.template=r.innerHTML),r.nodeType===1&&(r.textContent="");const o=n(r,!1,Wy(r));return r instanceof Element&&(r.removeAttribute("v-cloak"),r.setAttribute("data-v-app","")),o},e}),AA=((...t)=>{const e=bA().createApp(...t),{mount:n}=e;return e.mount=s=>{const r=zy(s);if(r)return n(r,!0,Wy(r))},e});function Wy(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function zy(t){return nt(t)?document.querySelector(t):t}const RA=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,SA=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,CA=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/;function PA(t,e){if(t==="__proto__"||t==="constructor"&&e&&typeof e=="object"&&"prototype"in e){kA(t);return}return e}function kA(t){console.warn(`[destr] Dropping "${t}" key to prevent prototype pollution.`)}function Oc(t,e={}){if(typeof t!="string")return t;if(t[0]==='"'&&t[t.length-1]==='"'&&t.indexOf("\\")===-1)return t.slice(1,-1);const n=t.trim();if(n.length<=9)switch(n.toLowerCase()){case"true":return!0;case"false":return!1;case"undefined":return;case"null":return null;case"nan":return Number.NaN;case"infinity":return Number.POSITIVE_INFINITY;case"-infinity":return Number.NEGATIVE_INFINITY}if(!CA.test(t)){if(e.strict)throw new SyntaxError("[destr] Invalid JSON");return t}try{if(RA.test(t)||SA.test(t)){if(e.strict)throw new Error("[destr] Possible prototype pollution");return JSON.parse(t,PA)}return JSON.parse(t)}catch(s){if(e.strict)throw s;return t}}const NA=/#/g,DA=/&/g,OA=/\//g,VA=/=/g,Ef=/\+/g,LA=/%5e/gi,MA=/%60/gi,xA=/%7c/gi,FA=/%20/gi;function UA(t){return encodeURI(""+t).replace(xA,"|")}function ch(t){return UA(typeof t=="string"?t:JSON.stringify(t)).replace(Ef,"%2B").replace(FA,"+").replace(NA,"%23").replace(DA,"%26").replace(MA,"`").replace(LA,"^").replace(OA,"%2F")}function vu(t){return ch(t).replace(VA,"%3D")}function Vc(t=""){try{return decodeURIComponent(""+t)}catch{return""+t}}function BA(t){return Vc(t.replace(Ef," "))}function $A(t){return Vc(t.replace(Ef," "))}function Ky(t=""){const e=Object.create(null);t[0]==="?"&&(t=t.slice(1));for(const n of t.split("&")){const s=n.match(/([^=]+)=?(.*)/)||[];if(s.length<2)continue;const r=BA(s[1]);if(r==="__proto__"||r==="constructor")continue;const i=$A(s[2]||"");e[r]===void 0?e[r]=i:Array.isArray(e[r])?e[r].push(i):e[r]=[e[r],i]}return e}function HA(t,e){return(typeof e=="number"||typeof e=="boolean")&&(e=String(e)),e?Array.isArray(e)?e.map(n=>`${vu(t)}=${ch(n)}`).join("&"):`${vu(t)}=${ch(e)}`:vu(t)}function jA(t){return Object.keys(t).filter(e=>t[e]!==void 0).map(e=>HA(e,t[e])).filter(Boolean).join("&")}const qA=/^[\s\w\0+.-]{2,}:([/\\]{1,2})/,GA=/^[\s\w\0+.-]{2,}:([/\\]{2})?/,WA=/^([/\\]\s*){2,}[^/\\]/,zA=/^[\s\0]*(blob|data|javascript|vbscript):$/i,KA=/\/$|\/\?|\/#/,QA=/^\.?\//;function jr(t,e={}){return typeof e=="boolean"&&(e={acceptRelative:e}),e.strict?qA.test(t):GA.test(t)||(e.acceptRelative?WA.test(t):!1)}function YA(t){return!!t&&zA.test(t)}function lh(t="",e){return e?KA.test(t):t.endsWith("/")}function Lc(t="",e){if(!e)return(lh(t)?t.slice(0,-1):t)||"/";if(!lh(t,!0))return t||"/";let n=t,s="";const r=t.indexOf("#");r!==-1&&(n=t.slice(0,r),s=t.slice(r));const[i,...o]=n.split("?");return((i.endsWith("/")?i.slice(0,-1):i)||"/")+(o.length>0?`?${o.join("?")}`:"")+s}function JA(t="",e){if(!e)return t.endsWith("/")?t:t+"/";if(lh(t,!0))return t||"/";let n=t,s="";const r=t.indexOf("#");if(r!==-1&&(n=t.slice(0,r),s=t.slice(r),!n))return s;const[i,...o]=n.split("?");return i+"/"+(o.length>0?`?${o.join("?")}`:"")+s}function XA(t,e){if(Yy(e)||jr(t))return t;const n=Lc(e);return t.startsWith(n)?t:Tf(n,t)}function Xp(t,e){if(Yy(e))return t;const n=Lc(e);if(!t.startsWith(n))return t;const s=t.slice(n.length);return s[0]==="/"?s:"/"+s}function Qy(t,e){const n=Zy(t),s={...Ky(n.search),...e};return n.search=jA(s),tR(n)}function Yy(t){return!t||t==="/"}function ZA(t){return t&&t!=="/"}function Tf(t,...e){let n=t||"";for(const s of e.filter(r=>ZA(r)))if(n){const r=s.replace(QA,"");n=JA(n)+r}else n=s;return n}function Jy(...t){const e=/\/(?!\/)/,n=t.filter(Boolean),s=[];let r=0;for(const o of n)if(!(!o||o==="/")){for(const[a,l]of o.split(e).entries())if(!(!l||l===".")){if(l===".."){if(s.length===1&&jr(s[0]))continue;s.pop(),r--;continue}if(a===1&&s[s.length-1]?.endsWith(":/")){s[s.length-1]+="/"+l;continue}s.push(l),r++}}let i=s.join("/");return r>=0?n[0]?.startsWith("/")&&!i.startsWith("/")?i="/"+i:n[0]?.startsWith("./")&&!i.startsWith("./")&&(i="./"+i):i="../".repeat(-1*r)+i,n[n.length-1]?.endsWith("/")&&!i.endsWith("/")&&(i+="/"),i}function eR(t,e){return Vc(Lc(t))===Vc(Lc(e))}const Xy=Symbol.for("ufo:protocolRelative");function Zy(t="",e){const n=t.match(/^[\s\0]*(blob:|data:|javascript:|vbscript:)(.*)/i);if(n){const[,f,p=""]=n;return{protocol:f.toLowerCase(),pathname:p,href:f+p,auth:"",host:"",search:"",hash:""}}if(!jr(t,{acceptRelative:!0}))return Zp(t);const[,s="",r,i=""]=t.replace(/\\/g,"/").match(/^[\s\0]*([\w+.-]{2,}:)?\/\/([^/@]+@)?(.*)/)||[];let[,o="",a=""]=i.match(/([^#/?]*)(.*)?/)||[];s==="file:"&&(a=a.replace(/\/(?=[A-Za-z]:)/,""));const{pathname:l,search:u,hash:h}=Zp(a);return{protocol:s.toLowerCase(),auth:r?r.slice(0,Math.max(0,r.length-1)):"",host:o,pathname:l,search:u,hash:h,[Xy]:!s}}function Zp(t=""){const[e="",n="",s=""]=(t.match(/([^#?]*)(\?[^#]*)?(#.*)?/)||[]).splice(1);return{pathname:e,search:n,hash:s}}function tR(t){const e=t.pathname||"",n=t.search?(t.search.startsWith("?")?"":"?")+t.search:"",s=t.hash||"",r=t.auth?t.auth+"@":"",i=t.host||"";return(t.protocol||t[Xy]?(t.protocol||"")+"//":"")+r+i+e+n+s}class nR extends Error{constructor(e,n){super(e,n),this.name="FetchError",n?.cause&&!this.cause&&(this.cause=n.cause)}}function sR(t){const e=t.error?.message||t.error?.toString()||"",n=t.request?.method||t.options?.method||"GET",s=t.request?.url||String(t.request)||"/",r=`[${n}] ${JSON.stringify(s)}`,i=t.response?`${t.response.status} ${t.response.statusText}`:"<no response>",o=`${r}: ${i}${e?` ${e}`:""}`,a=new nR(o,t.error?{cause:t.error}:void 0);for(const l of["request","options","response"])Object.defineProperty(a,l,{get(){return t[l]}});for(const[l,u]of[["data","_data"],["status","status"],["statusCode","status"],["statusText","statusText"],["statusMessage","statusText"]])Object.defineProperty(a,l,{get(){return t.response&&t.response[u]}});return a}const rR=new Set(Object.freeze(["PATCH","POST","PUT","DELETE"]));function em(t="GET"){return rR.has(t.toUpperCase())}function iR(t){if(t===void 0)return!1;const e=typeof t;return e==="string"||e==="number"||e==="boolean"||e===null?!0:e!=="object"?!1:Array.isArray(t)?!0:t.buffer||t instanceof FormData||t instanceof URLSearchParams?!1:t.constructor&&t.constructor.name==="Object"||typeof t.toJSON=="function"}const oR=new Set(["image/svg","application/xml","application/xhtml","application/html"]),aR=/^application\/(?:[\w!#$%&*.^`~-]*\+)?json(;.+)?$/i;function cR(t=""){if(!t)return"json";const e=t.split(";").shift()||"";return aR.test(e)?"json":e==="text/event-stream"?"stream":oR.has(e)||e.startsWith("text/")?"text":"blob"}function lR(t,e,n,s){const r=uR(e?.headers??t?.headers,n?.headers,s);let i;return(n?.query||n?.params||e?.params||e?.query)&&(i={...n?.params,...n?.query,...e?.params,...e?.query}),{...n,...e,query:i,params:i,headers:r}}function uR(t,e,n){if(!e)return new n(t);const s=new n(e);if(t)for(const[r,i]of Symbol.iterator in t||Array.isArray(t)?t:new n(t))s.set(r,i);return s}async function Ka(t,e){if(e)if(Array.isArray(e))for(const n of e)await n(t);else await e(t)}const hR=new Set([408,409,425,429,500,502,503,504]),fR=new Set([101,204,205,304]);function ev(t={}){const{fetch:e=globalThis.fetch,Headers:n=globalThis.Headers,AbortController:s=globalThis.AbortController}=t;async function r(a){const l=a.error&&a.error.name==="AbortError"&&!a.options.timeout||!1;if(a.options.retry!==!1&&!l){let h;typeof a.options.retry=="number"?h=a.options.retry:h=em(a.options.method)?0:1;const f=a.response&&a.response.status||500;if(h>0&&(Array.isArray(a.options.retryStatusCodes)?a.options.retryStatusCodes.includes(f):hR.has(f))){const p=typeof a.options.retryDelay=="function"?a.options.retryDelay(a):a.options.retryDelay||0;return p>0&&await new Promise(g=>setTimeout(g,p)),i(a.request,{...a.options,retry:h-1})}}const u=sR(a);throw Error.captureStackTrace&&Error.captureStackTrace(u,i),u}const i=async function(l,u={}){const h={request:l,options:lR(l,u,t.defaults,n),response:void 0,error:void 0};if(h.options.method&&(h.options.method=h.options.method.toUpperCase()),h.options.onRequest&&(await Ka(h,h.options.onRequest),h.options.headers instanceof n||(h.options.headers=new n(h.options.headers||{}))),typeof h.request=="string"&&(h.options.baseURL&&(h.request=XA(h.request,h.options.baseURL)),h.options.query&&(h.request=Qy(h.request,h.options.query),delete h.options.query),"query"in h.options&&delete h.options.query,"params"in h.options&&delete h.options.params),h.options.body&&em(h.options.method))if(iR(h.options.body)){const g=h.options.headers.get("content-type");typeof h.options.body!="string"&&(h.options.body=g==="application/x-www-form-urlencoded"?new URLSearchParams(h.options.body).toString():JSON.stringify(h.options.body)),g||h.options.headers.set("content-type","application/json"),h.options.headers.has("accept")||h.options.headers.set("accept","application/json")}else("pipeTo"in h.options.body&&typeof h.options.body.pipeTo=="function"||typeof h.options.body.pipe=="function")&&("duplex"in h.options||(h.options.duplex="half"));let f;if(!h.options.signal&&h.options.timeout){const g=new s;f=setTimeout(()=>{const w=new Error("[TimeoutError]: The operation was aborted due to timeout");w.name="TimeoutError",w.code=23,g.abort(w)},h.options.timeout),h.options.signal=g.signal}try{h.response=await e(h.request,h.options)}catch(g){return h.error=g,h.options.onRequestError&&await Ka(h,h.options.onRequestError),await r(h)}finally{f&&clearTimeout(f)}if((h.response.body||h.response._bodyInit)&&!fR.has(h.response.status)&&h.options.method!=="HEAD"){const g=(h.options.parseResponse?"json":h.options.responseType)||cR(h.response.headers.get("content-type")||"");switch(g){case"json":{const w=await h.response.text(),v=h.options.parseResponse||Oc;h.response._data=v(w);break}case"stream":{h.response._data=h.response.body||h.response._bodyInit;break}default:h.response._data=await h.response[g]()}}return h.options.onResponse&&await Ka(h,h.options.onResponse),!h.options.ignoreResponseError&&h.response.status>=400&&h.response.status<600?(h.options.onResponseError&&await Ka(h,h.options.onResponseError),await r(h)):h.response},o=async function(l,u){return(await i(l,u))._data};return o.raw=i,o.native=(...a)=>e(...a),o.create=(a={},l={})=>ev({...t,...l,defaults:{...t.defaults,...l.defaults,...a}}),o}const Mc=(function(){if(typeof globalThis<"u")return globalThis;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")})(),dR=Mc.fetch?(...t)=>Mc.fetch(...t):()=>Promise.reject(new Error("[ofetch] global.fetch is not supported!")),pR=Mc.Headers,mR=Mc.AbortController,gR=ev({fetch:dR,Headers:pR,AbortController:mR}),_R=gR,yR=()=>window?.__NUXT__?.config||window?.useNuxtApp?.().payload?.config,wf=()=>yR().app,vR=()=>wf().baseURL,ER=()=>wf().buildAssetsDir,bf=(...t)=>Jy(tv(),ER(),...t),tv=(...t)=>{const e=wf(),n=e.cdnURL||e.baseURL;return t.length?Jy(n,...t):n};globalThis.__buildAssetsURL=bf,globalThis.__publicAssetsURL=tv;globalThis.$fetch||(globalThis.$fetch=_R.create({baseURL:vR()}));"global"in globalThis||(globalThis.global=globalThis);function uh(t,e={},n){for(const s in t){const r=t[s],i=n?`${n}:${s}`:s;typeof r=="object"&&r!==null?uh(r,e,i):typeof r=="function"&&(e[i]=r)}return e}const TR={run:t=>t()},wR=()=>TR,nv=typeof console.createTask<"u"?console.createTask:wR;function bR(t,e){const n=e.shift(),s=nv(n);return t.reduce((r,i)=>r.then(()=>s.run(()=>i(...e))),Promise.resolve())}function IR(t,e){const n=e.shift(),s=nv(n);return Promise.all(t.map(r=>s.run(()=>r(...e))))}function Eu(t,e){for(const n of[...t])n(e)}let AR=class{constructor(){this._hooks={},this._before=void 0,this._after=void 0,this._deprecatedMessages=void 0,this._deprecatedHooks={},this.hook=this.hook.bind(this),this.callHook=this.callHook.bind(this),this.callHookWith=this.callHookWith.bind(this)}hook(e,n,s={}){if(!e||typeof n!="function")return()=>{};const r=e;let i;for(;this._deprecatedHooks[e];)i=this._deprecatedHooks[e],e=i.to;if(i&&!s.allowDeprecated){let o=i.message;o||(o=`${r} hook has been deprecated`+(i.to?`, please use ${i.to}`:"")),this._deprecatedMessages||(this._deprecatedMessages=new Set),this._deprecatedMessages.has(o)||(console.warn(o),this._deprecatedMessages.add(o))}if(!n.name)try{Object.defineProperty(n,"name",{get:()=>"_"+e.replace(/\W+/g,"_")+"_hook_cb",configurable:!0})}catch{}return this._hooks[e]=this._hooks[e]||[],this._hooks[e].push(n),()=>{n&&(this.removeHook(e,n),n=void 0)}}hookOnce(e,n){let s,r=(...i)=>(typeof s=="function"&&s(),s=void 0,r=void 0,n(...i));return s=this.hook(e,r),s}removeHook(e,n){if(this._hooks[e]){const s=this._hooks[e].indexOf(n);s!==-1&&this._hooks[e].splice(s,1),this._hooks[e].length===0&&delete this._hooks[e]}}deprecateHook(e,n){this._deprecatedHooks[e]=typeof n=="string"?{to:n}:n;const s=this._hooks[e]||[];delete this._hooks[e];for(const r of s)this.hook(e,r)}deprecateHooks(e){Object.assign(this._deprecatedHooks,e);for(const n in e)this.deprecateHook(n,e[n])}addHooks(e){const n=uh(e),s=Object.keys(n).map(r=>this.hook(r,n[r]));return()=>{for(const r of s.splice(0,s.length))r()}}removeHooks(e){const n=uh(e);for(const s in n)this.removeHook(s,n[s])}removeAllHooks(){for(const e in this._hooks)delete this._hooks[e]}callHook(e,...n){return n.unshift(e),this.callHookWith(bR,e,...n)}callHookParallel(e,...n){return n.unshift(e),this.callHookWith(IR,e,...n)}callHookWith(e,n,...s){const r=this._before||this._after?{name:n,args:s,context:{}}:void 0;this._before&&Eu(this._before,r);const i=e(n in this._hooks?[...this._hooks[n]]:[],s);return i instanceof Promise?i.finally(()=>{this._after&&r&&Eu(this._after,r)}):(this._after&&r&&Eu(this._after,r),i)}beforeEach(e){return this._before=this._before||[],this._before.push(e),()=>{if(this._before!==void 0){const n=this._before.indexOf(e);n!==-1&&this._before.splice(n,1)}}}afterEach(e){return this._after=this._after||[],this._after.push(e),()=>{if(this._after!==void 0){const n=this._after.indexOf(e);n!==-1&&this._after.splice(n,1)}}}};function RR(){return new AR}function SR(t={}){let e,n=!1;const s=o=>{if(e&&e!==o)throw new Error("Context conflict")};let r;if(t.asyncContext){const o=t.AsyncLocalStorage||globalThis.AsyncLocalStorage;o?r=new o:console.warn("[unctx] `AsyncLocalStorage` is not provided.")}const i=()=>{if(r){const o=r.getStore();if(o!==void 0)return o}return e};return{use:()=>{const o=i();if(o===void 0)throw new Error("Context is not available");return o},tryUse:()=>i(),set:(o,a)=>{a||s(o),e=o,n=!0},unset:()=>{e=void 0,n=!1},call:(o,a)=>{s(o),e=o;try{return r?r.run(o,a):a()}finally{n||(e=void 0)}},async callAsync(o,a){e=o;const l=()=>{e=o},u=()=>e===o?l:void 0;hh.add(u);try{const h=r?r.run(o,a):a();return n||(e=void 0),await h}finally{hh.delete(u)}}}}function CR(t={}){const e={};return{get(n,s={}){return e[n]||(e[n]=SR({...t,...s})),e[n]}}}const xc=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof global<"u"?global:typeof window<"u"?window:{},tm="__unctx__",PR=xc[tm]||(xc[tm]=CR()),kR=(t,e={})=>PR.get(t,e),nm="__unctx_async_handlers__",hh=xc[nm]||(xc[nm]=new Set);function mi(t){const e=[];for(const r of hh){const i=r();i&&e.push(i)}const n=()=>{for(const r of e)r()};let s=t();return s&&typeof s=="object"&&"catch"in s&&(s=s.catch(r=>{throw n(),r})),[s,n]}const sm={name:"page-fade",mode:"out-in"},NR=!1,DR=!1,rm={id:"__nuxt-loader"},ix={componentName:"NuxtLink",prefetch:!0,prefetchOn:{visibility:!0}},OR="#__nuxt",sv="nuxt-app",im=36e5,VR="vite:preloadError";function rv(t=sv){return kR(t,{asyncContext:!1})}const LR="__nuxt_plugin";function MR(t){let e=0;const n={_id:t.id||sv||"nuxt-app",_scope:nb(),provide:void 0,versions:{get nuxt(){return"4.2.2"},get vue(){return n.vueApp.version}},payload:Ln({...t.ssrContext?.payload||{},data:Ln({}),state:ar({}),once:new Set,_errors:Ln({})}),static:{data:{}},runWithContext(r){return n._scope.active&&!nf()?n._scope.run(()=>om(n,r)):om(n,r)},isHydrating:!0,deferHydration(){if(!n.isHydrating)return()=>{};e++;let r=!1;return()=>{if(!r&&(r=!0,e--,e===0))return n.isHydrating=!1,n.callHook("app:suspense:resolve")}},_asyncDataPromises:{},_asyncData:Ln({}),_payloadRevivers:{},...t};{const r=window.__NUXT__;if(r)for(const i in r)switch(i){case"data":case"state":case"_errors":Object.assign(n.payload[i],r[i]);break;default:n.payload[i]=r[i]}}n.hooks=RR(),n.hook=n.hooks.hook,n.callHook=n.hooks.callHook,n.provide=(r,i)=>{const o="$"+r;Qa(n,o,i),Qa(n.vueApp.config.globalProperties,o,i)},Qa(n.vueApp,"$nuxt",n),Qa(n.vueApp.config.globalProperties,"$nuxt",n);{window.addEventListener(VR,i=>{n.callHook("app:chunkError",{error:i.payload}),i.payload.message.includes("Unable to preload CSS")&&i.preventDefault()}),window.useNuxtApp||=ct;const r=n.hook("app:error",(...i)=>{console.error("[nuxt] error caught during app initialization",...i)});n.hook("app:mounted",r)}const s=n.payload.config;return n.provide("config",s),n}function xR(t,e){e.hooks&&t.hooks.addHooks(e.hooks)}async function FR(t,e){if(typeof e=="function"){const{provide:n}=await t.runWithContext(()=>e(t))||{};if(n&&typeof n=="object")for(const s in n)t.provide(s,n[s])}}async function UR(t,e){const n=new Set,s=[],r=[];let i,o=0;async function a(l){const u=l.dependsOn?.filter(h=>e.some(f=>f._name===h)&&!n.has(h))??[];if(u.length>0)s.push([new Set(u),l]);else{const h=FR(t,l).then(async()=>{l._name&&(n.add(l._name),await Promise.all(s.map(async([f,p])=>{f.has(l._name)&&(f.delete(l._name),f.size===0&&(o++,await a(p)))})))}).catch(f=>{if(!l.parallel&&!t.payload.error)throw f;i||=f});l.parallel?r.push(h):await h}}for(const l of e)xR(t,l);for(const l of e)await a(l);if(await Promise.all(r),o)for(let l=0;l<o;l++)await Promise.all(r);if(i)throw t.payload.error||i}function qn(t){if(typeof t=="function")return t;const e=t._name||t.name;return delete t.name,Object.assign(t.setup||(()=>{}),t,{[LR]:!0,_name:e})}function om(t,e,n){const s=()=>e();return rv(t._id).set(t),t.vueApp.runWithContext(s)}function BR(t){let e;return hl()&&(e=Hr()?.appContext.app.$nuxt),e||=rv(t).tryUse(),e||null}function ct(t){const e=BR(t);if(!e)throw new Error("[nuxt] instance unavailable");return e}function _l(t){return ct().$config}function Qa(t,e,n){Object.defineProperty(t,e,{get:()=>n})}function $R(t,e){return{ctx:{table:t},matchAll:n=>ov(n,t)}}function iv(t){const e={};for(const n in t)e[n]=n==="dynamic"?new Map(Object.entries(t[n]).map(([s,r])=>[s,iv(r)])):new Map(Object.entries(t[n]));return e}function HR(t){return $R(iv(t))}function ov(t,e,n){t.endsWith("/")&&(t=t.slice(0,-1)||"/");const s=[];for(const[i,o]of am(e.wildcard))(t===i||t.startsWith(i+"/"))&&s.push(o);for(const[i,o]of am(e.dynamic))if(t.startsWith(i+"/")){const a="/"+t.slice(i.length).split("/").splice(2).join("/");s.push(...ov(a,o))}const r=e.static.get(t);return r&&s.push(r),s.filter(Boolean)}function am(t){return[...t.entries()].sort((e,n)=>e[0].length-n[0].length)}function Tu(t){if(t===null||typeof t!="object")return!1;const e=Object.getPrototypeOf(t);return e!==null&&e!==Object.prototype&&Object.getPrototypeOf(e)!==null||Symbol.iterator in t?!1:Symbol.toStringTag in t?Object.prototype.toString.call(t)==="[object Module]":!0}function fh(t,e,n=".",s){if(!Tu(e))return fh(t,{},n,s);const r=Object.assign({},e);for(const i in t){if(i==="__proto__"||i==="constructor")continue;const o=t[i];o!=null&&(s&&s(r,i,o,n)||(Array.isArray(o)&&Array.isArray(r[i])?r[i]=[...o,...r[i]]:Tu(o)&&Tu(r[i])?r[i]=fh(o,r[i],(n?`${n}.`:"")+i.toString(),s):r[i]=o))}return r}function jR(t){return(...e)=>e.reduce((n,s)=>fh(n,s,"",t),{})}const av=jR();function qR(t,e){try{return e in t}catch{return!1}}class cm extends Error{static __h3_error__=!0;statusCode=500;fatal=!1;unhandled=!1;statusMessage;data;cause;constructor(e,n={}){super(e,n),n.cause&&!this.cause&&(this.cause=n.cause)}toJSON(){const e={message:this.message,statusCode:dh(this.statusCode,500)};return this.statusMessage&&(e.statusMessage=cv(this.statusMessage)),this.data!==void 0&&(e.data=this.data),e}}function GR(t){if(typeof t=="string")return new cm(t);if(WR(t))return t;const e=new cm(t.message??t.statusMessage??"",{cause:t.cause||t});if(qR(t,"stack"))try{Object.defineProperty(e,"stack",{get(){return t.stack}})}catch{try{e.stack=t.stack}catch{}}if(t.data&&(e.data=t.data),t.statusCode?e.statusCode=dh(t.statusCode,e.statusCode):t.status&&(e.statusCode=dh(t.status,e.statusCode)),t.statusMessage?e.statusMessage=t.statusMessage:t.statusText&&(e.statusMessage=t.statusText),e.statusMessage){const n=e.statusMessage;cv(e.statusMessage)!==n&&console.warn("[h3] Please prefer using `message` for longer error messages instead of `statusMessage`. In the future, `statusMessage` will be sanitized by default.")}return t.fatal!==void 0&&(e.fatal=t.fatal),t.unhandled!==void 0&&(e.unhandled=t.unhandled),e}function WR(t){return t?.constructor?.__h3_error__===!0}const zR=/[^\u0009\u0020-\u007E]/g;function cv(t=""){return t.replace(zR,"")}function dh(t,e=200){return!t||(typeof t=="string"&&(t=Number.parseInt(t,10)),t<100||t>999)?e:t}const lv=Symbol("layout-meta"),Vr=Symbol("route");import.meta.url.replace(/\/app\/.*$/,"/");const zt=()=>ct()?.$router,Ui=()=>hl()?Vt(Vr,ct()._route):ct()._route;function ox(t){return t}const KR=()=>{try{if(ct()._processingMiddleware)return!0}catch{return!1}return!1},ax=(t,e)=>{t||="/";const n=typeof t=="string"?t:"path"in t?QR(t):zt().resolve(t).href;if(e?.open){const{target:l="_blank",windowFeatures:u={}}=e.open,h=[];for(const[f,p]of Object.entries(u))p!==void 0&&h.push(`${f.toLowerCase()}=${p}`);return open(n,l,h.join(", ")),Promise.resolve()}const s=jr(n,{acceptRelative:!0}),r=e?.external||s;if(r){if(!e?.external)throw new Error("Navigating to an external URL is not allowed by default. Use `navigateTo(url, { external: true })`.");const{protocol:l}=new URL(n,window.location.href);if(l&&YA(l))throw new Error(`Cannot navigate to a URL with '${l}' protocol.`)}const i=KR();if(!r&&i){if(e?.replace){if(typeof t=="string"){const{pathname:l,search:u,hash:h}=Zy(t);return{path:l,...u&&{query:Ky(u)},...h&&{hash:h},replace:!0}}return{...t,replace:!0}}return t}const o=zt(),a=ct();return r?(a._scope.stop(),e?.replace?location.replace(n):location.href=n,i?a.isHydrating?new Promise(()=>{}):!1:Promise.resolve()):e?.replace?o.replace(t):o.push(t)};function QR(t){return Qy(t.path||"",t.query||{})+(t.hash||"")}const uv="__nuxt_error",yl=()=>Pb(ct().payload,"error"),br=t=>{const e=Nr(t);try{const n=yl();ct().hooks.callHook("app:error",e),n.value||=e}catch{throw e}return e},YR=async(t={})=>{const e=ct(),n=yl();e.callHook("app:error:cleared",t),t.redirect&&await zt().replace(t.redirect),n.value=void 0},hv=t=>!!t&&typeof t=="object"&&uv in t,Nr=t=>{const e=GR(t);return Object.defineProperty(e,uv,{value:!0,configurable:!1,writable:!1}),e};function JR(t){const e=ZR(t),n=new ArrayBuffer(e.length),s=new DataView(n);for(let r=0;r<n.byteLength;r++)s.setUint8(r,e.charCodeAt(r));return n}const XR="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";function ZR(t){t.length%4===0&&(t=t.replace(/==?$/,""));let e="",n=0,s=0;for(let r=0;r<t.length;r++)n<<=6,n|=XR.indexOf(t[r]),s+=6,s===24&&(e+=String.fromCharCode((n&16711680)>>16),e+=String.fromCharCode((n&65280)>>8),e+=String.fromCharCode(n&255),n=s=0);return s===12?(n>>=4,e+=String.fromCharCode(n)):s===18&&(n>>=2,e+=String.fromCharCode((n&65280)>>8),e+=String.fromCharCode(n&255)),e}const e0=-1,t0=-2,n0=-3,s0=-4,r0=-5,i0=-6;function o0(t,e){return a0(JSON.parse(t),e)}function a0(t,e){if(typeof t=="number")return r(t,!0);if(!Array.isArray(t)||t.length===0)throw new Error("Invalid input");const n=t,s=Array(n.length);function r(i,o=!1){if(i===e0)return;if(i===n0)return NaN;if(i===s0)return 1/0;if(i===r0)return-1/0;if(i===i0)return-0;if(o||typeof i!="number")throw new Error("Invalid input");if(i in s)return s[i];const a=n[i];if(!a||typeof a!="object")s[i]=a;else if(Array.isArray(a))if(typeof a[0]=="string"){const l=a[0],u=e&&Object.hasOwn(e,l)?e[l]:void 0;if(u){let h=a[1];return typeof h!="number"&&(h=n.push(a[1])-1),s[i]=u(r(h))}switch(l){case"Date":s[i]=new Date(a[1]);break;case"Set":const h=new Set;s[i]=h;for(let g=1;g<a.length;g+=1)h.add(r(a[g]));break;case"Map":const f=new Map;s[i]=f;for(let g=1;g<a.length;g+=2)f.set(r(a[g]),r(a[g+1]));break;case"RegExp":s[i]=new RegExp(a[1],a[2]);break;case"Object":s[i]=Object(a[1]);break;case"BigInt":s[i]=BigInt(a[1]);break;case"null":const p=Object.create(null);s[i]=p;for(let g=1;g<a.length;g+=2)p[a[g]]=r(a[g+1]);break;case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"BigInt64Array":case"BigUint64Array":{const g=globalThis[l],w=new g(r(a[1]));s[i]=a[2]!==void 0?w.subarray(a[2],a[3]):w;break}case"ArrayBuffer":{const g=a[1],w=JR(g);s[i]=w;break}case"Temporal.Duration":case"Temporal.Instant":case"Temporal.PlainDate":case"Temporal.PlainTime":case"Temporal.PlainDateTime":case"Temporal.PlainMonthDay":case"Temporal.PlainYearMonth":case"Temporal.ZonedDateTime":{const g=l.slice(9);s[i]=Temporal[g].from(a[1]);break}case"URL":{const g=new URL(a[1]);s[i]=g;break}case"URLSearchParams":{const g=new URLSearchParams(a[1]);s[i]=g;break}default:throw new Error(`Unknown type ${l}`)}}else{const l=new Array(a.length);s[i]=l;for(let u=0;u<a.length;u+=1){const h=a[u];h!==t0&&(l[u]=r(h))}}else{const l={};s[i]=l;for(const u in a){if(u==="__proto__")throw new Error("Cannot parse an object with a `__proto__` property");const h=a[u];l[u]=r(h)}}return s[i]}return r(0)}const c0=new Set(["link","style","script","noscript"]),l0=new Set(["title","titleTemplate","script","style","noscript"]),lm=new Set(["base","meta","link","style","script","noscript"]),u0=new Set(["title","base","htmlAttrs","bodyAttrs","meta","link","style","script","noscript"]),h0=new Set(["base","title","titleTemplate","bodyAttrs","htmlAttrs","templateParams"]),f0=new Set(["key","tagPosition","tagPriority","tagDuplicateStrategy","innerHTML","textContent","processTemplateParams"]),d0=new Set(["templateParams","htmlAttrs","bodyAttrs"]),p0=new Set(["theme-color","google-site-verification","og","article","book","profile","twitter","author"]);function ph(t,e={},n){for(const s in t){const r=t[s],i=n?`${n}:${s}`:s;typeof r=="object"&&r!==null?ph(r,e,i):typeof r=="function"&&(e[i]=r)}return e}const fv=(()=>{if(console.createTask)return console.createTask;const t={run:e=>e()};return()=>t})();function dv(t,e,n,s){for(let r=n;r<t.length;r+=1)try{const i=s?s.run(()=>t[r](...e)):t[r](...e);if(i instanceof Promise)return i.then(()=>dv(t,e,r+1,s))}catch(i){return Promise.reject(i)}}function m0(t,e,n){if(t.length>0)return dv(t,e,0,fv(n))}function g0(t,e,n){if(t.length>0){const s=fv(n);return Promise.all(t.map(r=>s.run(()=>r(...e))))}}function wu(t,e){for(const n of[...t])n(e)}var _0=class{_hooks;_before;_after;_deprecatedHooks;_deprecatedMessages;constructor(){this._hooks={},this._before=void 0,this._after=void 0,this._deprecatedMessages=void 0,this._deprecatedHooks={},this.hook=this.hook.bind(this),this.callHook=this.callHook.bind(this),this.callHookWith=this.callHookWith.bind(this)}hook(t,e,n={}){if(!t||typeof e!="function")return()=>{};const s=t;let r;for(;this._deprecatedHooks[t];)r=this._deprecatedHooks[t],t=r.to;if(r&&!n.allowDeprecated){let i=r.message;i||(i=`${s} hook has been deprecated`+(r.to?`, please use ${r.to}`:"")),this._deprecatedMessages||(this._deprecatedMessages=new Set),this._deprecatedMessages.has(i)||(console.warn(i),this._deprecatedMessages.add(i))}if(!e.name)try{Object.defineProperty(e,"name",{get:()=>"_"+t.replace(/\W+/g,"_")+"_hook_cb",configurable:!0})}catch{}return this._hooks[t]=this._hooks[t]||[],this._hooks[t].push(e),()=>{e&&(this.removeHook(t,e),e=void 0)}}hookOnce(t,e){let n,s=(...r)=>(typeof n=="function"&&n(),n=void 0,s=void 0,e(...r));return n=this.hook(t,s),n}removeHook(t,e){const n=this._hooks[t];if(n){const s=n.indexOf(e);s!==-1&&n.splice(s,1),n.length===0&&(this._hooks[t]=void 0)}}deprecateHook(t,e){this._deprecatedHooks[t]=typeof e=="string"?{to:e}:e;const n=this._hooks[t]||[];this._hooks[t]=void 0;for(const s of n)this.hook(t,s)}deprecateHooks(t){for(const e in t)this.deprecateHook(e,t[e])}addHooks(t){const e=ph(t),n=Object.keys(e).map(s=>this.hook(s,e[s]));return()=>{for(const s of n)s();n.length=0}}removeHooks(t){const e=ph(t);for(const n in e)this.removeHook(n,e[n])}removeAllHooks(){this._hooks={}}callHook(t,...e){return this.callHookWith(m0,t,e)}callHookParallel(t,...e){return this.callHookWith(g0,t,e)}callHookWith(t,e,n){const s=this._before||this._after?{name:e,args:n,context:{}}:void 0;this._before&&wu(this._before,s);const r=t(this._hooks[e]?[...this._hooks[e]]:[],n,e);return r instanceof Promise?r.finally(()=>{this._after&&s&&wu(this._after,s)}):(this._after&&s&&wu(this._after,s),r)}beforeEach(t){return this._before=this._before||[],this._before.push(t),()=>{if(this._before!==void 0){const e=this._before.indexOf(t);e!==-1&&this._before.splice(e,1)}}}afterEach(t){return this._after=this._after||[],this._after.push(t),()=>{if(this._after!==void 0){const e=this._after.indexOf(t);e!==-1&&this._after.splice(e,1)}}}};function y0(){return new _0}const v0=["name","property","http-equiv"],E0=new Set(["viewport","description","keywords","robots"]);function pv(t){const e=t.split(":");return e.length?p0.has(e[1]):!1}function mh(t){const{props:e,tag:n}=t;if(h0.has(n))return n;if(n==="link"&&e.rel==="canonical")return"canonical";if(e.charset)return"charset";if(t.tag==="meta"){for(const s of v0)if(e[s]!==void 0){const r=e[s],i=r&&typeof r=="string"&&r.includes(":"),o=r&&E0.has(r),l=!(i||o)&&t.key?`:key:${t.key}`:"";return`${n}:${r}${l}`}}if(t.key)return`${n}:key:${t.key}`;if(e.id)return`${n}:id:${e.id}`;if(l0.has(n)){const s=t.textContent||t.innerHTML;if(s)return`${n}:content:${s}`}}function um(t){const e=t._h||t._d;if(e)return e;const n=t.textContent||t.innerHTML;return n||`${t.tag}:${Object.entries(t.props).map(([s,r])=>`${s}:${String(r)}`).join(",")}`}function Fc(t,e,n){typeof t==="function"&&(!n||n!=="titleTemplate"&&!(n[0]==="o"&&n[1]==="n"))&&(t=t());const r=e?e(n,t):t;if(Array.isArray(r))return r.map(i=>Fc(i,e));if(r?.constructor===Object){const i={};for(const o of Object.keys(r))i[o]=Fc(r[o],e,o);return i}return r}function T0(t,e){const n=t==="style"?new Map:new Set;function s(r){if(r==null||r===void 0)return;const i=String(r).trim();if(i)if(t==="style"){const[o,...a]=i.split(":").map(l=>l?l.trim():"");o&&a.length&&n.set(o,a.join(":"))}else i.split(" ").filter(Boolean).forEach(o=>n.add(o))}return typeof e=="string"?t==="style"?e.split(";").forEach(s):s(e):Array.isArray(e)?e.forEach(r=>s(r)):e&&typeof e=="object"&&Object.entries(e).forEach(([r,i])=>{i&&i!=="false"&&(t==="style"?n.set(String(r).trim(),String(i)):s(r))}),n}function mv(t,e){return t.props=t.props||{},e?t.tag==="templateParams"?(t.props=e,t):(Object.entries(e).forEach(([n,s])=>{if(s===null){t.props[n]=null;return}if(n==="class"||n==="style"){t.props[n]=T0(n,s);return}if(f0.has(n)){if(["textContent","innerHTML"].includes(n)&&typeof s=="object"){let a=e.type;if(e.type||(a="application/json"),!a?.endsWith("json")&&a!=="speculationrules")return;e.type=a,t.props.type=a,t[n]=JSON.stringify(s)}else t[n]=s;return}const r=String(s),i=n.startsWith("data-"),o=t.tag==="meta"&&n==="content";r==="true"||r===""?t.props[n]=i||o?r:!0:!s&&i&&r==="false"?t.props[n]="false":s!==void 0&&(t.props[n]=s)}),t):t}function w0(t,e){const n=typeof e=="object"&&typeof e!="function"?e:{[t==="script"||t==="noscript"||t==="style"?"innerHTML":"textContent"]:e},s=mv({tag:t,props:{}},n);return s.key&&c0.has(s.tag)&&(s.props["data-hid"]=s._h=s.key),s.tag==="script"&&typeof s.innerHTML=="object"&&(s.innerHTML=JSON.stringify(s.innerHTML),s.props.type=s.props.type||"application/json"),Array.isArray(s.props.content)?s.props.content.map(r=>({...s,props:{...s.props,content:r}})):s}function b0(t,e){if(!t)return[];typeof t=="function"&&(t=t());const n=(r,i)=>{for(let o=0;o<e.length;o++)i=e[o](r,i);return i};t=n(void 0,t);const s=[];return t=Fc(t,n),Object.entries(t||{}).forEach(([r,i])=>{if(i!==void 0)for(const o of Array.isArray(i)?i:[i])s.push(w0(r,o))}),s.flat()}const hm=(t,e)=>t._w===e._w?t._p-e._p:t._w-e._w,fm={base:-10,title:10},I0={critical:-8,high:-1,low:2},dm={meta:{"content-security-policy":-30,charset:-20,viewport:-15},link:{preconnect:20,stylesheet:60,preload:70,modulepreload:70,prefetch:90,"dns-prefetch":90,prerender:90},script:{async:30,defer:80,sync:50},style:{imported:40,sync:60}},A0=/@import/,po=t=>t===""||t===!0;function R0(t,e){if(typeof e.tagPriority=="number")return e.tagPriority;let n=100;const s=I0[e.tagPriority]||0,r=t.resolvedOptions.disableCapoSorting?{link:{},script:{},style:{}}:dm;if(e.tag in fm)n=fm[e.tag];else if(e.tag==="meta"){const i=e.props["http-equiv"]==="content-security-policy"?"content-security-policy":e.props.charset?"charset":e.props.name==="viewport"?"viewport":null;i&&(n=dm.meta[i])}else if(e.tag==="link"&&e.props.rel)n=r.link[e.props.rel];else if(e.tag==="script"){const i=String(e.props.type);po(e.props.async)?n=r.script.async:e.props.src&&!po(e.props.defer)&&!po(e.props.async)&&i!=="module"&&!i.endsWith("json")||e.innerHTML&&!i.endsWith("json")?n=r.script.sync:(po(e.props.defer)&&e.props.src&&!po(e.props.async)||i==="module")&&(n=r.script.defer)}else e.tag==="style"&&(n=e.innerHTML&&A0.test(e.innerHTML)?r.style.imported:r.style.sync);return(n||100)+s}function pm(t,e){const n=typeof e=="function"?e(t):e,s=n.key||String(t.plugins.size+1);t.plugins.get(s)||(t.plugins.set(s,n),t.hooks.addHooks(n.hooks||{}))}function S0(t={}){const e=y0();e.addHooks(t.hooks||{});const n=!t.document,s=new Map,r=new Map,i=new Set,o={_entryCount:1,plugins:r,dirty:!1,resolvedOptions:t,hooks:e,ssr:n,entries:s,headEntries(){return[...s.values()]},use:a=>pm(o,a),push(a,l){const u={...l||{}};delete u.head;const h=u._index??o._entryCount++,f={_i:h,input:a,options:u},p={_poll(g=!1){o.dirty=!0,!g&&i.add(h),e.callHook("entries:updated",o)},dispose(){s.delete(h)&&o.invalidate()},patch(g){(!u.mode||u.mode==="server"&&n||u.mode==="client"&&!n)&&(f.input=g,s.set(h,f),p._poll())}};return p.patch(a),p},async resolveTags(){const a={tagMap:new Map,tags:[],entries:[...o.entries.values()]};for(await e.callHook("entries:resolve",a);i.size;){const p=i.values().next().value;i.delete(p);const g=s.get(p);if(g){const w={tags:b0(g.input,t.propResolvers||[]).map(v=>Object.assign(v,g.options)),entry:g};await e.callHook("entries:normalize",w),g._tags=w.tags.map((v,k)=>(v._w=R0(o,v),v._p=(g._i<<10)+k,v._d=mh(v),v))}}let l=!1;a.entries.flatMap(p=>(p._tags||[]).map(g=>({...g,props:{...g.props}}))).sort(hm).reduce((p,g)=>{const w=String(g._d||g._p);if(!p.has(w))return p.set(w,g);const v=p.get(w);if((g?.tagDuplicateStrategy||(d0.has(g.tag)?"merge":null)||(g.key&&g.key===v.key?"merge":null))==="merge"){const M={...v.props};Object.entries(g.props).forEach(([V,_])=>M[V]=V==="style"?new Map([...v.props.style||new Map,..._]):V==="class"?new Set([...v.props.class||new Set,..._]):_),p.set(w,{...g,props:M})}else g._p>>10===v._p>>10&&g.tag==="meta"&&pv(w)?(p.set(w,Object.assign([...Array.isArray(v)?v:[v],g],g)),l=!0):(g._w===v._w?g._p>v._p:g?._w<v?._w)&&p.set(w,g);return p},a.tagMap);const u=a.tagMap.get("title"),h=a.tagMap.get("titleTemplate");if(o._title=u?.textContent,h){const p=h?.textContent;if(o._titleTemplate=p,p){let g=typeof p=="function"?p(u?.textContent):p;typeof g=="string"&&!o.plugins.has("template-params")&&(g=g.replace("%s",u?.textContent||"")),u?g===null?a.tagMap.delete("title"):a.tagMap.set("title",{...u,textContent:g}):(h.tag="title",h.textContent=g)}}a.tags=Array.from(a.tagMap.values()),l&&(a.tags=a.tags.flat().sort(hm)),await e.callHook("tags:beforeResolve",a),await e.callHook("tags:resolve",a),await e.callHook("tags:afterResolve",a);const f=[];for(const p of a.tags){const{innerHTML:g,tag:w,props:v}=p;if(u0.has(w)&&!(Object.keys(v).length===0&&!p.innerHTML&&!p.textContent)&&!(w==="meta"&&!v.content&&!v["http-equiv"]&&!v.charset)){if(w==="script"&&g){if(String(v.type).endsWith("json")){const k=typeof g=="string"?g:JSON.stringify(g);p.innerHTML=k.replace(/</g,"\\u003C")}else typeof g=="string"&&(p.innerHTML=g.replace(new RegExp(`</${w}`,"g"),`<\\/${w}`));p._d=mh(p)}f.push(p)}}return f},invalidate(){for(const a of s.values())i.add(a._i);o.dirty=!0,e.callHook("entries:updated",o)}};return(t?.plugins||[]).forEach(a=>pm(o,a)),o.hooks.callHook("init",o),t.init?.forEach(a=>a&&o.push(a)),o}const C0=(t,e)=>vt(e)?Ab(e):e,If="usehead";function P0(t){return{install(n){n.config.globalProperties.$unhead=t,n.config.globalProperties.$head=t,n.provide(If,t)}}.install}function k0(){if(hl()){const t=Vt(If);if(!t)throw new Error("useHead() was called without provide context, ensure you call it through the setup() function.");return t}throw new Error("useHead() was called without provide context, ensure you call it through the setup() function.")}function N0(t,e={}){const n=e.head||k0();return n.ssr?n.push(t||{},e):D0(n,t,e)}function D0(t,e,n={}){const s=le(!1);let r;return Ub(()=>{const o=s.value?{}:Fc(e,C0);r?r.patch(o):r=t.push(o,n)}),Hr()&&(la(()=>{r.dispose()}),uy(()=>{s.value=!0}),ly(()=>{s.value=!1})),r}function gv(t){const e=t||ct();return e.ssrContext?.head||e.runWithContext(()=>{if(hl()){const n=Vt(If);if(!n)throw new Error("[nuxt] [unhead] Missing Unhead instance.");return n}})}function cx(t,e={}){const n=e.head||gv(e.nuxt);return N0(t,{head:n,...e})}let cc,lc;function O0(){return cc=$fetch(bf(`builds/meta/${_l().app.buildId}.json`),{responseType:"json"}),cc.then(t=>{lc=HR(t.matcher)}).catch(t=>{console.error("[nuxt] Error fetching app manifest.",t)}),cc}function vl(){return cc||O0()}async function Af(t){const e=typeof t=="string"?t:t.path;if(await vl(),!lc)return console.error("[nuxt] Error creating app manifest matcher.",lc),{};try{return av({},...lc.matchAll(e).reverse())}catch(n){return console.error("[nuxt] Error matching route rules.",n),{}}}async function mm(t,e={}){if(!await yv(t))return null;const s=await L0(t,e);return await _v(s)||null}const V0="_payload.json";async function L0(t,e={}){const n=new URL(t,"http://localhost");if(n.host!=="localhost"||jr(n.pathname,{acceptRelative:!0}))throw new Error("Payload URL must not include hostname: "+t);const s=_l(),r=e.hash||(e.fresh?Date.now():s.app.buildId),i=s.app.cdnURL,o=i&&await yv(t)?i:s.app.baseURL;return Tf(o,n.pathname,V0+(r?`?${r}`:""))}async function _v(t){const e=fetch(t,{cache:"force-cache"}).then(n=>n.text().then(vv));try{return await e}catch(n){console.warn("[nuxt] Cannot load payload ",t,n)}return null}async function yv(t=Ui().path){const e=ct();return t=t==="/"?t:t.replace(/\/$/,""),(await vl()).prerendered.includes(t)?!0:e.runWithContext(async()=>{const s=await Af({path:t});return!!s.prerender&&!s.redirect})}let Er=null;async function M0(){if(Er)return Er;const t=document.getElementById("__NUXT_DATA__");if(!t)return{};const e=await vv(t.textContent||""),n=t.dataset.src?await _v(t.dataset.src):void 0;return Er={...e,...n,...window.__NUXT__},Er.config?.public&&(Er.config.public=ar(Er.config.public)),Er}async function vv(t){return await o0(t,ct()._payloadRevivers)}function x0(t,e){ct()._payloadRevivers[t]=e}const F0=[["NuxtError",t=>Nr(t)],["EmptyShallowRef",t=>hs(t==="_"?void 0:t==="0n"?BigInt(0):Oc(t))],["EmptyRef",t=>le(t==="_"?void 0:t==="0n"?BigInt(0):Oc(t))],["ShallowRef",t=>hs(t)],["ShallowReactive",t=>Ln(t)],["Ref",t=>le(t)],["Reactive",t=>ar(t)]],U0=qn({name:"nuxt:revive-payload:client",order:-30,async setup(t){let e,n;for(const[s,r]of F0)x0(s,r);Object.assign(t.payload,([e,n]=mi(()=>t.runWithContext(M0)),e=await e,n(),e)),delete window.__NUXT__}});async function Rf(t,e={}){const n=e.document||t.resolvedOptions.document;if(!n||!t.dirty)return;const s={shouldRender:!0,tags:[]};if(await t.hooks.callHook("dom:beforeRender",s),!!s.shouldRender)return t._domUpdatePromise||(t._domUpdatePromise=new Promise(async r=>{const i=new Map,o=new Promise(g=>{t.resolveTags().then(w=>{g(w.map(v=>{const k=i.get(v._d)||0,M={tag:v,id:(k?`${v._d}:${k}`:v._d)||um(v),shouldRender:!0};return v._d&&pv(v._d)&&i.set(v._d,k+1),M}))})});let a=t._dom;if(!a){a={title:n.title,elMap:new Map().set("htmlAttrs",n.documentElement).set("bodyAttrs",n.body)};for(const g of["body","head"]){const w=n[g]?.children;for(const v of w){const k=v.tagName.toLowerCase();if(!lm.has(k))continue;const M=mv({tag:k,props:{}},{innerHTML:v.innerHTML,...v.getAttributeNames().reduce((V,_)=>(V[_]=v.getAttribute(_),V),{})||{}});if(M.key=v.getAttribute("data-hid")||void 0,M._d=mh(M)||um(M),a.elMap.has(M._d)){let V=1,_=M._d;for(;a.elMap.has(_);)_=`${M._d}:${V++}`;a.elMap.set(_,v)}else a.elMap.set(M._d,v)}}}a.pendingSideEffects={...a.sideEffects},a.sideEffects={};function l(g,w,v){const k=`${g}:${w}`;a.sideEffects[k]=v,delete a.pendingSideEffects[k]}function u({id:g,$el:w,tag:v}){const k=v.tag.endsWith("Attrs");a.elMap.set(g,w),k||(v.textContent&&v.textContent!==w.textContent&&(w.textContent=v.textContent),v.innerHTML&&v.innerHTML!==w.innerHTML&&(w.innerHTML=v.innerHTML),l(g,"el",()=>{w?.remove(),a.elMap.delete(g)}));for(const M in v.props){if(!Object.prototype.hasOwnProperty.call(v.props,M))continue;const V=v.props[M];if(M.startsWith("on")&&typeof V=="function"){const I=w?.dataset;if(I&&I[`${M}fired`]){const O=M.slice(0,-5);V.call(w,new Event(O.substring(2)))}w.getAttribute(`data-${M}`)!==""&&((v.tag==="bodyAttrs"?n.defaultView:w).addEventListener(M.substring(2),V.bind(w)),w.setAttribute(`data-${M}`,""));continue}const _=`attr:${M}`;if(M==="class"){if(!V)continue;for(const I of V)k&&l(g,`${_}:${I}`,()=>w.classList.remove(I)),!w.classList.contains(I)&&w.classList.add(I)}else if(M==="style"){if(!V)continue;for(const[I,O]of V)l(g,`${_}:${I}`,()=>{w.style.removeProperty(I)}),w.style.setProperty(I,O)}else V!==!1&&V!==null&&(w.getAttribute(M)!==V&&w.setAttribute(M,V===!0?"":String(V)),k&&l(g,_,()=>w.removeAttribute(M)))}}const h=[],f={bodyClose:void 0,bodyOpen:void 0,head:void 0},p=await o;for(const g of p){const{tag:w,shouldRender:v,id:k}=g;if(v){if(w.tag==="title"){n.title=w.textContent,l("title","",()=>n.title=a.title);continue}g.$el=g.$el||a.elMap.get(k),g.$el?u(g):lm.has(w.tag)&&h.push(g)}}for(const g of h){const w=g.tag.tagPosition||"head";g.$el=n.createElement(g.tag.tag),u(g),f[w]=f[w]||n.createDocumentFragment(),f[w].appendChild(g.$el)}for(const g of p)await t.hooks.callHook("dom:renderTag",g,n,l);f.head&&n.head.appendChild(f.head),f.bodyOpen&&n.body.insertBefore(f.bodyOpen,n.body.firstChild),f.bodyClose&&n.body.appendChild(f.bodyClose);for(const g in a.pendingSideEffects)a.pendingSideEffects[g]();t._dom=a,await t.hooks.callHook("dom:rendered",{renders:p}),r()}).finally(()=>{t._domUpdatePromise=void 0,t.dirty=!1})),t._domUpdatePromise}function B0(t={}){const e=t.domOptions?.render||Rf;t.document=t.document||(typeof window<"u"?document:void 0);const n=t.document?.head.querySelector('script[id="unhead:payload"]')?.innerHTML||!1;return S0({...t,plugins:[...t.plugins||[],{key:"client",hooks:{"entries:updated":e}}],init:[n?JSON.parse(n):!1,...t.init||[]]})}function $0(t,e){let n=0;return()=>{const s=++n;e(()=>{n===s&&t()})}}function H0(t={}){const e=B0({domOptions:{render:$0(()=>Rf(e),n=>setTimeout(n,0))},...t});return e.install=P0(e),e}const j0={disableDefaults:!0},q0=qn({name:"nuxt:head",enforce:"pre",setup(t){const e=H0(j0);t.vueApp.use(e);{let n=!0;const s=async()=>{n=!1,await Rf(e)};e.hooks.hook("dom:beforeRender",r=>{r.shouldRender=!n}),t.hooks.hook("page:start",()=>{n=!0}),t.hooks.hook("page:finish",()=>{t.isHydrating||s()}),t.hooks.hook("app:error",s),t.hooks.hook("app:suspense:resolve",s)}}});const ei=typeof document<"u";function Ev(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function G0(t){return t.__esModule||t[Symbol.toStringTag]==="Module"||t.default&&Ev(t.default)}const qe=Object.assign;function bu(t,e){const n={};for(const s in e){const r=e[s];n[s]=Sn(r)?r.map(t):t(r)}return n}const No=()=>{},Sn=Array.isArray;function gm(t,e){const n={};for(const s in t)n[s]=s in e?e[s]:t[s];return n}const Tv=/#/g,W0=/&/g,z0=/\//g,K0=/=/g,Q0=/\?/g,wv=/\+/g,Y0=/%5B/g,J0=/%5D/g,bv=/%5E/g,X0=/%60/g,Iv=/%7B/g,Z0=/%7C/g,Av=/%7D/g,eS=/%20/g;function Sf(t){return t==null?"":encodeURI(""+t).replace(Z0,"|").replace(Y0,"[").replace(J0,"]")}function tS(t){return Sf(t).replace(Iv,"{").replace(Av,"}").replace(bv,"^")}function gh(t){return Sf(t).replace(wv,"%2B").replace(eS,"+").replace(Tv,"%23").replace(W0,"%26").replace(X0,"`").replace(Iv,"{").replace(Av,"}").replace(bv,"^")}function nS(t){return gh(t).replace(K0,"%3D")}function sS(t){return Sf(t).replace(Tv,"%23").replace(Q0,"%3F")}function rS(t){return sS(t).replace(z0,"%2F")}function zo(t){if(t==null)return null;try{return decodeURIComponent(""+t)}catch{}return""+t}const iS=/\/$/,oS=t=>t.replace(iS,"");function Iu(t,e,n="/"){let s,r={},i="",o="";const a=e.indexOf("#");let l=e.indexOf("?");return l=a>=0&&l>a?-1:l,l>=0&&(s=e.slice(0,l),i=e.slice(l,a>0?a:e.length),r=t(i.slice(1))),a>=0&&(s=s||e.slice(0,a),o=e.slice(a,e.length)),s=uS(s??e,n),{fullPath:s+i+o,path:s,query:r,hash:zo(o)}}function aS(t,e){const n=e.query?t(e.query):"";return e.path+(n&&"?")+n+(e.hash||"")}function _m(t,e){return!e||!t.toLowerCase().startsWith(e.toLowerCase())?t:t.slice(e.length)||"/"}function cS(t,e,n){const s=e.matched.length-1,r=n.matched.length-1;return s>-1&&s===r&&Ai(e.matched[s],n.matched[r])&&Rv(e.params,n.params)&&t(e.query)===t(n.query)&&e.hash===n.hash}function Ai(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function Rv(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(var n in t)if(!lS(t[n],e[n]))return!1;return!0}function lS(t,e){return Sn(t)?ym(t,e):Sn(e)?ym(e,t):t?.valueOf()===e?.valueOf()}function ym(t,e){return Sn(e)?t.length===e.length&&t.every((n,s)=>n===e[s]):t.length===1&&t[0]===e}function uS(t,e){if(t.startsWith("/"))return t;if(!t)return e;const n=e.split("/"),s=t.split("/"),r=s[s.length-1];(r===".."||r===".")&&s.push("");let i=n.length-1,o,a;for(o=0;o<s.length;o++)if(a=s[o],a!==".")if(a==="..")i>1&&i--;else break;return n.slice(0,i).join("/")+"/"+s.slice(o).join("/")}const hn={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};let _h=(function(t){return t.pop="pop",t.push="push",t})({}),Au=(function(t){return t.back="back",t.forward="forward",t.unknown="",t})({});function hS(t){if(!t)if(ei){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),oS(t)}const fS=/^[^#]+#/;function dS(t,e){return t.replace(fS,"#")+e}function pS(t,e){const n=document.documentElement.getBoundingClientRect(),s=t.getBoundingClientRect();return{behavior:e.behavior,left:s.left-n.left-(e.left||0),top:s.top-n.top-(e.top||0)}}const El=()=>({left:window.scrollX,top:window.scrollY});function mS(t){let e;if("el"in t){const n=t.el,s=typeof n=="string"&&n.startsWith("#"),r=typeof n=="string"?s?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!r)return;e=pS(r,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.scrollX,e.top!=null?e.top:window.scrollY)}function vm(t,e){return(history.state?history.state.position-e:-1)+t}const yh=new Map;function gS(t,e){yh.set(t,e)}function _S(t){const e=yh.get(t);return yh.delete(t),e}function yS(t){return typeof t=="string"||t&&typeof t=="object"}function Sv(t){return typeof t=="string"||typeof t=="symbol"}let it=(function(t){return t[t.MATCHER_NOT_FOUND=1]="MATCHER_NOT_FOUND",t[t.NAVIGATION_GUARD_REDIRECT=2]="NAVIGATION_GUARD_REDIRECT",t[t.NAVIGATION_ABORTED=4]="NAVIGATION_ABORTED",t[t.NAVIGATION_CANCELLED=8]="NAVIGATION_CANCELLED",t[t.NAVIGATION_DUPLICATED=16]="NAVIGATION_DUPLICATED",t})({});const Cv=Symbol("");it.MATCHER_NOT_FOUND+"",it.NAVIGATION_GUARD_REDIRECT+"",it.NAVIGATION_ABORTED+"",it.NAVIGATION_CANCELLED+"",it.NAVIGATION_DUPLICATED+"";function Ri(t,e){return qe(new Error,{type:t,[Cv]:!0},e)}function Qn(t,e){return t instanceof Error&&Cv in t&&(e==null||!!(t.type&e))}const vS=["params","query","hash"];function ES(t){if(typeof t=="string")return t;if(t.path!=null)return t.path;const e={};for(const n of vS)n in t&&(e[n]=t[n]);return JSON.stringify(e,null,2)}function TS(t){const e={};if(t===""||t==="?")return e;const n=(t[0]==="?"?t.slice(1):t).split("&");for(let s=0;s<n.length;++s){const r=n[s].replace(wv," "),i=r.indexOf("="),o=zo(i<0?r:r.slice(0,i)),a=i<0?null:zo(r.slice(i+1));if(o in e){let l=e[o];Sn(l)||(l=e[o]=[l]),l.push(a)}else e[o]=a}return e}function Em(t){let e="";for(let n in t){const s=t[n];if(n=nS(n),s==null){s!==void 0&&(e+=(e.length?"&":"")+n);continue}(Sn(s)?s.map(r=>r&&gh(r)):[s&&gh(s)]).forEach(r=>{r!==void 0&&(e+=(e.length?"&":"")+n,r!=null&&(e+="="+r))})}return e}function wS(t){const e={};for(const n in t){const s=t[n];s!==void 0&&(e[n]=Sn(s)?s.map(r=>r==null?null:""+r):s==null?s:""+s)}return e}const bS=Symbol(""),Tm=Symbol(""),Cf=Symbol(""),Pf=Symbol(""),vh=Symbol("");function mo(){let t=[];function e(s){return t.push(s),()=>{const r=t.indexOf(s);r>-1&&t.splice(r,1)}}function n(){t=[]}return{add:e,list:()=>t.slice(),reset:n}}function Ls(t,e,n,s,r,i=o=>o()){const o=s&&(s.enterCallbacks[r]=s.enterCallbacks[r]||[]);return()=>new Promise((a,l)=>{const u=p=>{p===!1?l(Ri(it.NAVIGATION_ABORTED,{from:n,to:e})):p instanceof Error?l(p):yS(p)?l(Ri(it.NAVIGATION_GUARD_REDIRECT,{from:e,to:p})):(o&&s.enterCallbacks[r]===o&&typeof p=="function"&&o.push(p),a())},h=i(()=>t.call(s&&s.instances[r],e,n,u));let f=Promise.resolve(h);t.length<3&&(f=f.then(u)),f.catch(p=>l(p))})}function Ru(t,e,n,s,r=i=>i()){const i=[];for(const o of t)for(const a in o.components){let l=o.components[a];if(!(e!=="beforeRouteEnter"&&!o.instances[a]))if(Ev(l)){const u=(l.__vccOpts||l)[e];u&&i.push(Ls(u,n,s,o,a,r))}else{let u=l();i.push(()=>u.then(h=>{if(!h)throw new Error(`Couldn't resolve component "${a}" at "${o.path}"`);const f=G0(h)?h.default:h;o.mods[a]=h,o.components[a]=f;const p=(f.__vccOpts||f)[e];return p&&Ls(p,n,s,o,a,r)()}))}}return i}function IS(t,e){const n=[],s=[],r=[],i=Math.max(e.matched.length,t.matched.length);for(let o=0;o<i;o++){const a=e.matched[o];a&&(t.matched.find(u=>Ai(u,a))?s.push(a):n.push(a));const l=t.matched[o];l&&(e.matched.find(u=>Ai(u,l))||r.push(l))}return[n,s,r]}let AS=()=>location.protocol+"//"+location.host;function Pv(t,e){const{pathname:n,search:s,hash:r}=e,i=t.indexOf("#");if(i>-1){let o=r.includes(t.slice(i))?t.slice(i).length:1,a=r.slice(o);return a[0]!=="/"&&(a="/"+a),_m(a,"")}return _m(n,t)+s+r}function RS(t,e,n,s){let r=[],i=[],o=null;const a=({state:p})=>{const g=Pv(t,location),w=n.value,v=e.value;let k=0;if(p){if(n.value=g,e.value=p,o&&o===w){o=null;return}k=v?p.position-v.position:0}else s(g);r.forEach(M=>{M(n.value,w,{delta:k,type:_h.pop,direction:k?k>0?Au.forward:Au.back:Au.unknown})})};function l(){o=n.value}function u(p){r.push(p);const g=()=>{const w=r.indexOf(p);w>-1&&r.splice(w,1)};return i.push(g),g}function h(){if(document.visibilityState==="hidden"){const{history:p}=window;if(!p.state)return;p.replaceState(qe({},p.state,{scroll:El()}),"")}}function f(){for(const p of i)p();i=[],window.removeEventListener("popstate",a),window.removeEventListener("pagehide",h),document.removeEventListener("visibilitychange",h)}return window.addEventListener("popstate",a),window.addEventListener("pagehide",h),document.addEventListener("visibilitychange",h),{pauseListeners:l,listen:u,destroy:f}}function wm(t,e,n,s=!1,r=!1){return{back:t,current:e,forward:n,replaced:s,position:window.history.length,scroll:r?El():null}}function SS(t){const{history:e,location:n}=window,s={value:Pv(t,n)},r={value:e.state};r.value||i(s.value,{back:null,current:s.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function i(l,u,h){const f=t.indexOf("#"),p=f>-1?(n.host&&document.querySelector("base")?t:t.slice(f))+l:AS()+t+l;try{e[h?"replaceState":"pushState"](u,"",p),r.value=u}catch(g){console.error(g),n[h?"replace":"assign"](p)}}function o(l,u){i(l,qe({},e.state,wm(r.value.back,l,r.value.forward,!0),u,{position:r.value.position}),!0),s.value=l}function a(l,u){const h=qe({},r.value,e.state,{forward:l,scroll:El()});i(h.current,h,!0),i(l,qe({},wm(s.value,l,null),{position:h.position+1},u),!1),s.value=l}return{location:s,state:r,push:a,replace:o}}function CS(t){t=hS(t);const e=SS(t),n=RS(t,e.state,e.location,e.replace);function s(i,o=!0){o||n.pauseListeners(),history.go(i)}const r=qe({location:"",base:t,go:s,createHref:dS.bind(null,t)},e,n);return Object.defineProperty(r,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(r,"state",{enumerable:!0,get:()=>e.state.value}),r}let Rr=(function(t){return t[t.Static=0]="Static",t[t.Param=1]="Param",t[t.Group=2]="Group",t})({});var bt=(function(t){return t[t.Static=0]="Static",t[t.Param=1]="Param",t[t.ParamRegExp=2]="ParamRegExp",t[t.ParamRegExpEnd=3]="ParamRegExpEnd",t[t.EscapeNext=4]="EscapeNext",t})(bt||{});const PS={type:Rr.Static,value:""},kS=/[a-zA-Z0-9_]/;function NS(t){if(!t)return[[]];if(t==="/")return[[PS]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(g){throw new Error(`ERR (${n})/"${u}": ${g}`)}let n=bt.Static,s=n;const r=[];let i;function o(){i&&r.push(i),i=[]}let a=0,l,u="",h="";function f(){u&&(n===bt.Static?i.push({type:Rr.Static,value:u}):n===bt.Param||n===bt.ParamRegExp||n===bt.ParamRegExpEnd?(i.length>1&&(l==="*"||l==="+")&&e(`A repeatable param (${u}) must be alone in its segment. eg: '/:ids+.`),i.push({type:Rr.Param,value:u,regexp:h,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):e("Invalid state to consume buffer"),u="")}function p(){u+=l}for(;a<t.length;){if(l=t[a++],l==="\\"&&n!==bt.ParamRegExp){s=n,n=bt.EscapeNext;continue}switch(n){case bt.Static:l==="/"?(u&&f(),o()):l===":"?(f(),n=bt.Param):p();break;case bt.EscapeNext:p(),n=s;break;case bt.Param:l==="("?n=bt.ParamRegExp:kS.test(l)?p():(f(),n=bt.Static,l!=="*"&&l!=="?"&&l!=="+"&&a--);break;case bt.ParamRegExp:l===")"?h[h.length-1]=="\\"?h=h.slice(0,-1)+l:n=bt.ParamRegExpEnd:h+=l;break;case bt.ParamRegExpEnd:f(),n=bt.Static,l!=="*"&&l!=="?"&&l!=="+"&&a--,h="";break;default:e("Unknown state");break}}return n===bt.ParamRegExp&&e(`Unfinished custom RegExp for param "${u}"`),f(),o(),r}const bm="[^/]+?",DS={sensitive:!1,strict:!1,start:!0,end:!0};var qt=(function(t){return t[t._multiplier=10]="_multiplier",t[t.Root=90]="Root",t[t.Segment=40]="Segment",t[t.SubSegment=30]="SubSegment",t[t.Static=40]="Static",t[t.Dynamic=20]="Dynamic",t[t.BonusCustomRegExp=10]="BonusCustomRegExp",t[t.BonusWildcard=-50]="BonusWildcard",t[t.BonusRepeatable=-20]="BonusRepeatable",t[t.BonusOptional=-8]="BonusOptional",t[t.BonusStrict=.7000000000000001]="BonusStrict",t[t.BonusCaseSensitive=.25]="BonusCaseSensitive",t})(qt||{});const OS=/[.+*?^${}()[\]/\\]/g;function VS(t,e){const n=qe({},DS,e),s=[];let r=n.start?"^":"";const i=[];for(const u of t){const h=u.length?[]:[qt.Root];n.strict&&!u.length&&(r+="/");for(let f=0;f<u.length;f++){const p=u[f];let g=qt.Segment+(n.sensitive?qt.BonusCaseSensitive:0);if(p.type===Rr.Static)f||(r+="/"),r+=p.value.replace(OS,"\\$&"),g+=qt.Static;else if(p.type===Rr.Param){const{value:w,repeatable:v,optional:k,regexp:M}=p;i.push({name:w,repeatable:v,optional:k});const V=M||bm;if(V!==bm){g+=qt.BonusCustomRegExp;try{`${V}`}catch(I){throw new Error(`Invalid custom RegExp for param "${w}" (${V}): `+I.message)}}let _=v?`((?:${V})(?:/(?:${V}))*)`:`(${V})`;f||(_=k&&u.length<2?`(?:/${_})`:"/"+_),k&&(_+="?"),r+=_,g+=qt.Dynamic,k&&(g+=qt.BonusOptional),v&&(g+=qt.BonusRepeatable),V===".*"&&(g+=qt.BonusWildcard)}h.push(g)}s.push(h)}if(n.strict&&n.end){const u=s.length-1;s[u][s[u].length-1]+=qt.BonusStrict}n.strict||(r+="/?"),n.end?r+="$":n.strict&&!r.endsWith("/")&&(r+="(?:/|$)");const o=new RegExp(r,n.sensitive?"":"i");function a(u){const h=u.match(o),f={};if(!h)return null;for(let p=1;p<h.length;p++){const g=h[p]||"",w=i[p-1];f[w.name]=g&&w.repeatable?g.split("/"):g}return f}function l(u){let h="",f=!1;for(const p of t){(!f||!h.endsWith("/"))&&(h+="/"),f=!1;for(const g of p)if(g.type===Rr.Static)h+=g.value;else if(g.type===Rr.Param){const{value:w,repeatable:v,optional:k}=g,M=w in u?u[w]:"";if(Sn(M)&&!v)throw new Error(`Provided param "${w}" is an array but it is not repeatable (* or + modifiers)`);const V=Sn(M)?M.join("/"):M;if(!V)if(k)p.length<2&&(h.endsWith("/")?h=h.slice(0,-1):f=!0);else throw new Error(`Missing required param "${w}"`);h+=V}}return h||"/"}return{re:o,score:s,keys:i,parse:a,stringify:l}}function LS(t,e){let n=0;for(;n<t.length&&n<e.length;){const s=e[n]-t[n];if(s)return s;n++}return t.length<e.length?t.length===1&&t[0]===qt.Static+qt.Segment?-1:1:t.length>e.length?e.length===1&&e[0]===qt.Static+qt.Segment?1:-1:0}function kv(t,e){let n=0;const s=t.score,r=e.score;for(;n<s.length&&n<r.length;){const i=LS(s[n],r[n]);if(i)return i;n++}if(Math.abs(r.length-s.length)===1){if(Im(s))return 1;if(Im(r))return-1}return r.length-s.length}function Im(t){const e=t[t.length-1];return t.length>0&&e[e.length-1]<0}const MS={strict:!1,end:!0,sensitive:!1};function xS(t,e,n){const s=VS(NS(t.path),n),r=qe(s,{record:t,parent:e,children:[],alias:[]});return e&&!r.record.aliasOf==!e.record.aliasOf&&e.children.push(r),r}function FS(t,e){const n=[],s=new Map;e=gm(MS,e);function r(f){return s.get(f)}function i(f,p,g){const w=!g,v=Rm(f);v.aliasOf=g&&g.record;const k=gm(e,f),M=[v];if("alias"in f){const I=typeof f.alias=="string"?[f.alias]:f.alias;for(const O of I)M.push(Rm(qe({},v,{components:g?g.record.components:v.components,path:O,aliasOf:g?g.record:v})))}let V,_;for(const I of M){const{path:O}=I;if(p&&O[0]!=="/"){const F=p.record.path,S=F[F.length-1]==="/"?"":"/";I.path=p.record.path+(O&&S+O)}if(V=xS(I,p,k),g?g.alias.push(V):(_=_||V,_!==V&&_.alias.push(V),w&&f.name&&!Sm(V)&&o(f.name)),Nv(V)&&l(V),v.children){const F=v.children;for(let S=0;S<F.length;S++)i(F[S],V,g&&g.children[S])}g=g||V}return _?()=>{o(_)}:No}function o(f){if(Sv(f)){const p=s.get(f);p&&(s.delete(f),n.splice(n.indexOf(p),1),p.children.forEach(o),p.alias.forEach(o))}else{const p=n.indexOf(f);p>-1&&(n.splice(p,1),f.record.name&&s.delete(f.record.name),f.children.forEach(o),f.alias.forEach(o))}}function a(){return n}function l(f){const p=$S(f,n);n.splice(p,0,f),f.record.name&&!Sm(f)&&s.set(f.record.name,f)}function u(f,p){let g,w={},v,k;if("name"in f&&f.name){if(g=s.get(f.name),!g)throw Ri(it.MATCHER_NOT_FOUND,{location:f});k=g.record.name,w=qe(Am(p.params,g.keys.filter(_=>!_.optional).concat(g.parent?g.parent.keys.filter(_=>_.optional):[]).map(_=>_.name)),f.params&&Am(f.params,g.keys.map(_=>_.name))),v=g.stringify(w)}else if(f.path!=null)v=f.path,g=n.find(_=>_.re.test(v)),g&&(w=g.parse(v),k=g.record.name);else{if(g=p.name?s.get(p.name):n.find(_=>_.re.test(p.path)),!g)throw Ri(it.MATCHER_NOT_FOUND,{location:f,currentLocation:p});k=g.record.name,w=qe({},p.params,f.params),v=g.stringify(w)}const M=[];let V=g;for(;V;)M.unshift(V.record),V=V.parent;return{name:k,path:v,params:w,matched:M,meta:BS(M)}}t.forEach(f=>i(f));function h(){n.length=0,s.clear()}return{addRoute:i,resolve:u,removeRoute:o,clearRoutes:h,getRoutes:a,getRecordMatcher:r}}function Am(t,e){const n={};for(const s of e)s in t&&(n[s]=t[s]);return n}function Rm(t){const e={path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:t.aliasOf,beforeEnter:t.beforeEnter,props:US(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}};return Object.defineProperty(e,"mods",{value:{}}),e}function US(t){const e={},n=t.props||!1;if("component"in t)e.default=n;else for(const s in t.components)e[s]=typeof n=="object"?n[s]:n;return e}function Sm(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function BS(t){return t.reduce((e,n)=>qe(e,n.meta),{})}function $S(t,e){let n=0,s=e.length;for(;n!==s;){const i=n+s>>1;kv(t,e[i])<0?s=i:n=i+1}const r=HS(t);return r&&(s=e.lastIndexOf(r,s-1)),s}function HS(t){let e=t;for(;e=e.parent;)if(Nv(e)&&kv(t,e)===0)return e}function Nv({record:t}){return!!(t.name||t.components&&Object.keys(t.components).length||t.redirect)}function Cm(t){const e=Vt(Cf),n=Vt(Pf),s=xe(()=>{const l=ze(t.to);return e.resolve(l)}),r=xe(()=>{const{matched:l}=s.value,{length:u}=l,h=l[u-1],f=n.matched;if(!h||!f.length)return-1;const p=f.findIndex(Ai.bind(null,h));if(p>-1)return p;const g=Pm(l[u-2]);return u>1&&Pm(h)===g&&f[f.length-1].path!==g?f.findIndex(Ai.bind(null,l[u-2])):p}),i=xe(()=>r.value>-1&&zS(n.params,s.value.params)),o=xe(()=>r.value>-1&&r.value===n.matched.length-1&&Rv(n.params,s.value.params));function a(l={}){if(WS(l)){const u=e[ze(t.replace)?"replace":"push"](ze(t.to)).catch(No);return t.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>u),u}return Promise.resolve()}return{route:s,href:xe(()=>s.value.href),isActive:i,isExactActive:o,navigate:a}}function jS(t){return t.length===1?t[0]:t}const qS=ut({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:Cm,setup(t,{slots:e}){const n=ar(Cm(t)),{options:s}=Vt(Cf),r=xe(()=>({[km(t.activeClass,s.linkActiveClass,"router-link-active")]:n.isActive,[km(t.exactActiveClass,s.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const i=e.default&&jS(e.default(n));return t.custom?i:ot("a",{"aria-current":n.isExactActive?t.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:r.value},i)}}}),GS=qS;function WS(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function zS(t,e){for(const n in e){const s=e[n],r=t[n];if(typeof s=="string"){if(s!==r)return!1}else if(!Sn(r)||r.length!==s.length||s.some((i,o)=>i.valueOf()!==r[o].valueOf()))return!1}return!0}function Pm(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const km=(t,e,n)=>t??e??n,KS=ut({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:e,slots:n}){const s=Vt(vh),r=xe(()=>t.route||s.value),i=Vt(Tm,0),o=xe(()=>{let u=ze(i);const{matched:h}=r.value;let f;for(;(f=h[u])&&!f.components;)u++;return u}),a=xe(()=>r.value.matched[o.value]);ss(Tm,xe(()=>o.value+1)),ss(bS,a),ss(vh,r);const l=le();return xn(()=>[l.value,a.value,t.name],([u,h,f],[p,g,w])=>{h&&(h.instances[f]=u,g&&g!==h&&u&&u===p&&(h.leaveGuards.size||(h.leaveGuards=g.leaveGuards),h.updateGuards.size||(h.updateGuards=g.updateGuards))),u&&h&&(!g||!Ai(h,g)||!p)&&(h.enterCallbacks[f]||[]).forEach(v=>v(u))},{flush:"post"}),()=>{const u=r.value,h=t.name,f=a.value,p=f&&f.components[h];if(!p)return Nm(n.default,{Component:p,route:u});const g=f.props[h],w=g?g===!0?u.params:typeof g=="function"?g(u):g:null,k=ot(p,qe({},w,e,{onVnodeUnmounted:M=>{M.component.isUnmounted&&(f.instances[h]=null)},ref:l}));return Nm(n.default,{Component:k,route:u})||k}}});function Nm(t,e){if(!t)return null;const n=t(e);return n.length===1?n[0]:n}const Dv=KS;function QS(t){const e=FS(t.routes,t),n=t.parseQuery||TS,s=t.stringifyQuery||Em,r=t.history,i=mo(),o=mo(),a=mo(),l=hs(hn);let u=hn;ei&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const h=bu.bind(null,D=>""+D),f=bu.bind(null,rS),p=bu.bind(null,zo);function g(D,x){let B,z;return Sv(D)?(B=e.getRecordMatcher(D),z=x):z=D,e.addRoute(z,B)}function w(D){const x=e.getRecordMatcher(D);x&&e.removeRoute(x)}function v(){return e.getRoutes().map(D=>D.record)}function k(D){return!!e.getRecordMatcher(D)}function M(D,x){if(x=qe({},x||l.value),typeof D=="string"){const N=Iu(n,D,x.path),L=e.resolve({path:N.path},x),U=r.createHref(N.fullPath);return qe(N,L,{params:p(L.params),hash:zo(N.hash),redirectedFrom:void 0,href:U})}let B;if(D.path!=null)B=qe({},D,{path:Iu(n,D.path,x.path).path});else{const N=qe({},D.params);for(const L in N)N[L]==null&&delete N[L];B=qe({},D,{params:f(N)}),x.params=f(x.params)}const z=e.resolve(B,x),re=D.hash||"";z.params=h(p(z.params));const ue=aS(s,qe({},D,{hash:tS(re),path:z.path})),b=r.createHref(ue);return qe({fullPath:ue,hash:re,query:s===Em?wS(D.query):D.query||{}},z,{redirectedFrom:void 0,href:b})}function V(D){return typeof D=="string"?Iu(n,D,l.value.path):qe({},D)}function _(D,x){if(u!==D)return Ri(it.NAVIGATION_CANCELLED,{from:x,to:D})}function I(D){return S(D)}function O(D){return I(qe(V(D),{replace:!0}))}function F(D,x){const B=D.matched[D.matched.length-1];if(B&&B.redirect){const{redirect:z}=B;let re=typeof z=="function"?z(D,x):z;return typeof re=="string"&&(re=re.includes("?")||re.includes("#")?re=V(re):{path:re},re.params={}),qe({query:D.query,hash:D.hash,params:re.path!=null?{}:D.params},re)}}function S(D,x){const B=u=M(D),z=l.value,re=D.state,ue=D.force,b=D.replace===!0,N=F(B,z);if(N)return S(qe(V(N),{state:typeof N=="object"?qe({},re,N.state):re,force:ue,replace:b}),x||B);const L=B;L.redirectedFrom=x;let U;return!ue&&cS(s,z,B)&&(U=Ri(it.NAVIGATION_DUPLICATED,{to:L,from:z}),Pe(z,z,!0,!1)),(U?Promise.resolve(U):C(L,z)).catch(W=>Qn(W)?Qn(W,it.NAVIGATION_GUARD_REDIRECT)?W:He(W):se(W,L,z)).then(W=>{if(W){if(Qn(W,it.NAVIGATION_GUARD_REDIRECT))return S(qe({replace:b},V(W.to),{state:typeof W.to=="object"?qe({},re,W.to.state):re,force:ue}),x||L)}else W=R(L,z,!0,b,re);return P(L,z,W),W})}function T(D,x){const B=_(D,x);return B?Promise.reject(B):Promise.resolve()}function E(D){const x=G.values().next().value;return x&&typeof x.runWithContext=="function"?x.runWithContext(D):D()}function C(D,x){let B;const[z,re,ue]=IS(D,x);B=Ru(z.reverse(),"beforeRouteLeave",D,x);for(const N of z)N.leaveGuards.forEach(L=>{B.push(Ls(L,D,x))});const b=T.bind(null,D,x);return B.push(b),Q(B).then(()=>{B=[];for(const N of i.list())B.push(Ls(N,D,x));return B.push(b),Q(B)}).then(()=>{B=Ru(re,"beforeRouteUpdate",D,x);for(const N of re)N.updateGuards.forEach(L=>{B.push(Ls(L,D,x))});return B.push(b),Q(B)}).then(()=>{B=[];for(const N of ue)if(N.beforeEnter)if(Sn(N.beforeEnter))for(const L of N.beforeEnter)B.push(Ls(L,D,x));else B.push(Ls(N.beforeEnter,D,x));return B.push(b),Q(B)}).then(()=>(D.matched.forEach(N=>N.enterCallbacks={}),B=Ru(ue,"beforeRouteEnter",D,x,E),B.push(b),Q(B))).then(()=>{B=[];for(const N of o.list())B.push(Ls(N,D,x));return B.push(b),Q(B)}).catch(N=>Qn(N,it.NAVIGATION_CANCELLED)?N:Promise.reject(N))}function P(D,x,B){a.list().forEach(z=>E(()=>z(D,x,B)))}function R(D,x,B,z,re){const ue=_(D,x);if(ue)return ue;const b=x===hn,N=ei?history.state:{};B&&(z||b?r.replace(D.fullPath,qe({scroll:b&&N&&N.scroll},re)):r.push(D.fullPath,re)),l.value=D,Pe(D,x,B,b),He()}let y;function ae(){y||(y=r.listen((D,x,B)=>{if(!ee.listening)return;const z=M(D),re=F(z,ee.currentRoute.value);if(re){S(qe(re,{replace:!0,force:!0}),z).catch(No);return}u=z;const ue=l.value;ei&&gS(vm(ue.fullPath,B.delta),El()),C(z,ue).catch(b=>Qn(b,it.NAVIGATION_ABORTED|it.NAVIGATION_CANCELLED)?b:Qn(b,it.NAVIGATION_GUARD_REDIRECT)?(S(qe(V(b.to),{force:!0}),z).then(N=>{Qn(N,it.NAVIGATION_ABORTED|it.NAVIGATION_DUPLICATED)&&!B.delta&&B.type===_h.pop&&r.go(-1,!1)}).catch(No),Promise.reject()):(B.delta&&r.go(-B.delta,!1),se(b,z,ue))).then(b=>{b=b||R(z,ue,!1),b&&(B.delta&&!Qn(b,it.NAVIGATION_CANCELLED)?r.go(-B.delta,!1):B.type===_h.pop&&Qn(b,it.NAVIGATION_ABORTED|it.NAVIGATION_DUPLICATED)&&r.go(-1,!1)),P(z,ue,b)}).catch(No)}))}let fe=mo(),ie=mo(),pe;function se(D,x,B){He(D);const z=ie.list();return z.length?z.forEach(re=>re(D,x,B)):console.error(D),Promise.reject(D)}function Te(){return pe&&l.value!==hn?Promise.resolve():new Promise((D,x)=>{fe.add([D,x])})}function He(D){return pe||(pe=!D,ae(),fe.list().forEach(([x,B])=>D?B(D):x()),fe.reset()),D}function Pe(D,x,B,z){const{scrollBehavior:re}=t;if(!ei||!re)return Promise.resolve();const ue=!B&&_S(vm(D.fullPath,0))||(z||!B)&&history.state&&history.state.scroll||null;return Xs().then(()=>re(D,x,ue)).then(b=>b&&mS(b)).catch(b=>se(b,D,x))}const De=D=>r.go(D);let te;const G=new Set,ee={currentRoute:l,listening:!0,addRoute:g,removeRoute:w,clearRoutes:e.clearRoutes,hasRoute:k,getRoutes:v,resolve:M,options:t,push:I,replace:O,go:De,back:()=>De(-1),forward:()=>De(1),beforeEach:i.add,beforeResolve:o.add,afterEach:a.add,onError:ie.add,isReady:Te,install(D){D.component("RouterLink",GS),D.component("RouterView",Dv),D.config.globalProperties.$router=ee,Object.defineProperty(D.config.globalProperties,"$route",{enumerable:!0,get:()=>ze(l)}),ei&&!te&&l.value===hn&&(te=!0,I(r.location).catch(z=>{}));const x={};for(const z in hn)Object.defineProperty(x,z,{get:()=>l.value[z],enumerable:!0});D.provide(Cf,ee),D.provide(Pf,Ln(x)),D.provide(vh,l);const B=D.unmount;G.add(D),D.unmount=function(){G.delete(D),G.size<1&&(u=hn,y&&y(),y=null,l.value=hn,te=!1,pe=!1),B()}}};function Q(D){return D.reduce((x,B)=>x.then(()=>E(B)),Promise.resolve())}return ee}function Ov(t){return Vt(Pf)}const YS=/(:\w+)\([^)]+\)/g,JS=/(:\w+)[?+*]/g,XS=/:\w+/g,ZS=(t,e)=>e.path.replace(YS,"$1").replace(JS,"$1").replace(XS,n=>t.params[n.slice(1)]?.toString()||""),Eh=(t,e)=>{const n=t.route.matched.find(r=>r.components?.default===t.Component.type),s=e??n?.meta.key??(n&&ZS(t.route,n));return typeof s=="function"?s(t.route):s},eC=(t,e)=>({default:()=>t?ot(Jb,t===!0?{}:t,e):e});function kf(t){return Array.isArray(t)?t:[t]}const tC="modulepreload",nC=function(t,e){return new URL(t,e).href},Dm={},ft=function(e,n,s){let r=Promise.resolve();if(n&&n.length>0){let u=function(h){return Promise.all(h.map(f=>Promise.resolve(f).then(p=>({status:"fulfilled",value:p}),p=>({status:"rejected",reason:p}))))};const o=document.getElementsByTagName("link"),a=document.querySelector("meta[property=csp-nonce]"),l=a?.nonce||a?.getAttribute("nonce");r=u(n.map(h=>{if(h=nC(h,s),h in Dm)return;Dm[h]=!0;const f=h.endsWith(".css"),p=f?'[rel="stylesheet"]':"";if(s)for(let w=o.length-1;w>=0;w--){const v=o[w];if(v.href===h&&(!f||v.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${h}"]${p}`))return;const g=document.createElement("link");if(g.rel=f?"stylesheet":tC,f||(g.as="script"),g.crossOrigin="",g.href=h,l&&g.setAttribute("nonce",l),document.head.appendChild(g),f)return new Promise((w,v)=>{g.addEventListener("load",w),g.addEventListener("error",()=>v(new Error(`Unable to preload CSS for ${h}`)))})}))}function i(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return r.then(o=>{for(const a of o||[])a.status==="rejected"&&i(a.reason);return e().catch(i)})},sC={layout:!1},rC={layout:!1},iC={layout:!1},oC={layout:"dashboard"},aC={layout:"dashboard"},cC={layout:"coach"},lC={layout:"dashboard"},uC={layout:"coach"},hC={layout:"dashboard"},fC={layout:"dashboard"},Su=[{name:"index",path:"/",meta:sC||{},component:()=>ft(()=>import("./uzzIyGLq.js"),__vite__mapDeps([0,1]),import.meta.url)},{name:"profilo",path:"/profilo",meta:rC||{},component:()=>ft(()=>import("./B-3O39Pj.js"),[],import.meta.url)},{name:"slug",path:"/:slug(.*)*",component:()=>ft(()=>import("./Dqdm6ct9.js"),__vite__mapDeps([2,3]),import.meta.url)},{name:"dev-upload",path:"/dev-upload",meta:iC||{},component:()=>ft(()=>import("./DW27G8zg.js"),__vite__mapDeps([4,5,6]),import.meta.url)},{name:"panoramica",path:"/panoramica",meta:oC||{},component:()=>ft(()=>import("./Dx3LUgOQ.js"),__vite__mapDeps([7,8,9,10,11,12,13]),import.meta.url)},{name:"piste-id",path:"/piste/:id()",meta:aC||{},component:()=>ft(()=>import("./D1HxNdSn.js"),__vite__mapDeps([14,15,16,17,9,10,18,11,12,19]),import.meta.url)},{name:"dev-cleanup",path:"/dev-cleanup",component:()=>ft(()=>import("./D_P-yhZe.js"),__vite__mapDeps([20,5,9,10,21]),import.meta.url)},{name:"piloti-id",path:"/piloti/:id()",meta:{...cC||{},middleware:["coach-or-admin"]},component:()=>ft(()=>import("./BHqjfx-Q.js"),__vite__mapDeps([22,5,15,16,17,9,10,18,11,12,19,23,24,8,13,25,26,27,28,29]),import.meta.url)},{name:"piste",path:"/piste",meta:lC||{},component:()=>ft(()=>import("./DWHHFCOg.js"),__vite__mapDeps([30,27,9,10,11,12,28]),import.meta.url)},{name:"piloti",path:"/piloti",meta:{...uC||{},middleware:["coach-or-admin"]},component:()=>ft(()=>import("./DoRzC1iE.js"),__vite__mapDeps([31,5,32]),import.meta.url)},{name:"sessioni-id",path:"/sessioni/:id()",meta:hC||{},component:()=>ft(()=>import("./BVGhW9a3.js"),__vite__mapDeps([33,23,9,10,18,12,24]),import.meta.url)},{name:"dev-data-audit",path:"/dev-data-audit",component:()=>ft(()=>import("./C_RyVv_l.js"),__vite__mapDeps([34,5,9,10,35]),import.meta.url)},{name:"sessioni",path:"/sessioni",meta:fC||{},component:()=>ft(()=>import("./DXMMiDKS.js"),__vite__mapDeps([36,25,16,17,9,10,12,26]),import.meta.url)}],Vv=(t,e)=>({default:()=>t?ot(ha,t===!0?{}:t,e):e.default?.()}),dC=/(:\w+)\([^)]+\)/g,pC=/(:\w+)[?+*]/g,mC=/:\w+/g;function Om(t){const e=t?.meta.key??t.path.replace(dC,"$1").replace(pC,"$1").replace(mC,n=>t.params[n.slice(1)]?.toString()||"");return typeof e=="function"?e(t):e}function gC(t,e){return t===e||e===hn?!1:Om(t)!==Om(e)?!0:!t.matched.every((s,r)=>s.components&&s.components.default===e.matched[r]?.components?.default)}function _C(t,e=!1){if(t){if(t.nodeName==="#comment"&&t.nodeValue==="[")return Lv(t,[],e);if(e){const n=t.cloneNode(!0);return n.querySelectorAll("[data-island-slot]").forEach(s=>{s.innerHTML=""}),[n.outerHTML]}return[t.outerHTML]}}function Lv(t,e=[],n=!1){if(t&&t.nodeName){if(vC(t))return e;if(!yC(t)){const s=t.cloneNode(!0);n&&s.querySelectorAll?.("[data-island-slot]").forEach(r=>{r.innerHTML=""}),e.push(s.outerHTML)}Lv(t.nextSibling,e,n)}return e}function Cu(t,e){const n=t?_C(t):[e];return n?sh(n.join(""),n.length):ot("div")}function yC(t){return t.nodeName==="#comment"&&t.nodeValue==="["}function vC(t){return t.nodeName==="#comment"&&t.nodeValue==="]"}const EC={scrollBehavior(t,e,n){const s=ct(),r=zt().options?.scrollBehaviorType??"auto";if(t.path.replace(/\/$/,"")===e.path.replace(/\/$/,""))return e.hash&&!t.hash?{left:0,top:0}:t.hash?{el:t.hash,top:Mv(t.hash),behavior:r}:!1;if((typeof t.meta.scrollToTop=="function"?t.meta.scrollToTop(t,e):t.meta.scrollToTop)===!1)return!1;const o=s._runningTransition?"page:transition:finish":"page:loading:end";return new Promise(a=>{if(e===hn){a(Vm(t,e,n,r));return}s.hooks.hookOnce(o,()=>{requestAnimationFrame(()=>a(Vm(t,e,n,r)))})})}};function Mv(t){try{const e=document.querySelector(t);if(e)return(Number.parseFloat(getComputedStyle(e).scrollMarginTop)||0)+(Number.parseFloat(getComputedStyle(document.documentElement).scrollPaddingTop)||0)}catch{}return 0}function Vm(t,e,n,s){if(n)return n;const r=gC(t,e);return t.hash?{el:t.hash,top:Mv(t.hash),behavior:r?s:"instant"}:{left:0,top:0}}const TC={hashMode:!1,scrollBehaviorType:"auto"},Ss={...TC,...EC},wC=async(t,e)=>{let n,s;if(!t.meta?.validate)return;const r=([n,s]=mi(()=>Promise.resolve(t.meta.validate(t))),n=await n,s(),n);if(r===!0)return;const i=Nr({fatal:!0,statusCode:r&&r.statusCode||404,statusMessage:r&&r.statusMessage||`Page Not Found: ${t.fullPath}`,data:{path:t.fullPath}});return typeof window<"u"&&window.history.pushState({},"",e.fullPath),i},bC=async t=>{let e,n;const s=([e,n]=mi(()=>Af({path:t.path})),e=await e,n(),e);if(s.redirect){const r=s.redirect.includes("#")?s.redirect:s.redirect+t.hash;return jr(r,{acceptRelative:!0})?(window.location.href=r,!1):r}},IC=[wC,bC],Th={"coach-or-admin":()=>ft(()=>import("./CUgLpPWN.js"),[],import.meta.url),coach:()=>ft(()=>import("./Bwwj8_K5.js"),[],import.meta.url)};function AC(t,e,n){const{pathname:s,search:r,hash:i}=e,o=t.indexOf("#");if(o>-1){const u=i.includes(t.slice(o))?t.slice(o).length:1;let h=i.slice(u);return h[0]!=="/"&&(h="/"+h),Xp(h,"")}const a=Xp(s,t),l=!n||eR(a,n)?a:n;return l+(l.includes("?")?"":r)+i}const RC=qn({name:"nuxt:router",enforce:"pre",async setup(t){let e,n,s=_l().app.baseURL;const r=Ss.history?.(s)??CS(s),i=Ss.routes?([e,n]=mi(()=>Ss.routes(Su)),e=await e,n(),e??Su):Su;let o;const a=QS({...Ss,scrollBehavior:(k,M,V)=>{if(M===hn){o=V;return}if(Ss.scrollBehavior){if(a.options.scrollBehavior=Ss.scrollBehavior,"scrollRestoration"in window.history){const _=a.beforeEach(()=>{_(),window.history.scrollRestoration="manual"})}return Ss.scrollBehavior(k,hn,o||V)}},history:r,routes:i});"scrollRestoration"in window.history&&(window.history.scrollRestoration="auto"),t.vueApp.use(a);const l=hs(a.currentRoute.value);a.afterEach((k,M)=>{l.value=M}),Object.defineProperty(t.vueApp.config.globalProperties,"previousRoute",{get:()=>l.value});const u=AC(s,window.location,t.payload.path),h=hs(a.currentRoute.value),f=()=>{h.value=a.currentRoute.value};a.afterEach((k,M)=>{k.matched.at(-1)?.components?.default===M.matched.at(-1)?.components?.default&&f()});const p={sync:f};for(const k in h.value)Object.defineProperty(p,k,{get:()=>h.value[k],enumerable:!0});t._route=Ln(p),t._middleware||={global:[],named:{}};const g=yl();a.afterEach(async(k,M,V)=>{delete t._processingMiddleware,!t.isHydrating&&g.value&&await t.runWithContext(YR),V&&await t.callHook("page:loading:end")});try{[e,n]=mi(()=>a.isReady()),await e,n()}catch(k){[e,n]=mi(()=>t.runWithContext(()=>br(k))),await e,n()}const w=u!==a.currentRoute.value.fullPath?a.resolve(u):a.currentRoute.value;f();const v=t.payload.state._layout;return a.beforeEach(async(k,M)=>{await t.callHook("page:loading:start"),k.meta=ar(k.meta),t.isHydrating&&v&&!Hn(k.meta.layout)&&(k.meta.layout=v),t._processingMiddleware=!0;{const V=new Set([...IC,...t._middleware.global]);for(const _ of k.matched){const I=_.meta.middleware;if(I)for(const O of kf(I))V.add(O)}{const _=await t.runWithContext(()=>Af({path:k.path}));if(_.appMiddleware)for(const I in _.appMiddleware)_.appMiddleware[I]?V.add(I):V.delete(I)}for(const _ of V){const I=typeof _=="string"?t._middleware.named[_]||await Th[_]?.().then(O=>O.default||O):_;if(!I)throw new Error(`Unknown route middleware: '${_}'.`);try{const O=await t.runWithContext(()=>I(k,M));if(!t.payload.serverRendered&&t.isHydrating&&(O===!1||O instanceof Error)){const F=O||Nr({statusCode:404,statusMessage:`Page Not Found: ${u}`});return await t.runWithContext(()=>br(F)),!1}if(O===!0)continue;if(O===!1)return O;if(O)return hv(O)&&O.fatal&&await t.runWithContext(()=>br(O)),O}catch(O){const F=Nr(O);return F.fatal&&await t.runWithContext(()=>br(F)),F}}}}),a.onError(async()=>{delete t._processingMiddleware,await t.callHook("page:loading:end")}),a.afterEach(k=>{if(k.matched.length===0)return t.runWithContext(()=>br(Nr({statusCode:404,fatal:!1,statusMessage:`Page not found: ${k.fullPath}`,data:{path:k.fullPath}})))}),t.hooks.hookOnce("app:created",async()=>{try{"name"in w&&(w.name=void 0),await a.replace({...w,force:!0}),a.options.scrollBehavior=Ss.scrollBehavior}catch(k){await t.runWithContext(()=>br(k))}}),{provide:{router:a}}}}),Lm=globalThis.requestIdleCallback||(t=>{const e=Date.now(),n={didTimeout:!1,timeRemaining:()=>Math.max(0,50-(Date.now()-e))};return setTimeout(()=>{t(n)},1)}),lx=globalThis.cancelIdleCallback||(t=>{clearTimeout(t)}),Nf=t=>{const e=ct();e.isHydrating?e.hooks.hookOnce("app:suspense:resolve",()=>{Lm(()=>t())}):Lm(()=>t())},SC=qn({name:"nuxt:payload",setup(t){const e=new Set;zt().beforeResolve(async(n,s)=>{if(n.path===s.path)return;const r=await mm(n.path);if(r){for(const i of e)delete t.static.data[i];for(const i in r.data)i in t.static.data||e.add(i),t.static.data[i]=r.data[i]}}),Nf(()=>{t.hooks.hook("link:prefetch",async n=>{const{hostname:s}=new URL(n,window.location.href);s===window.location.hostname&&await mm(n).catch(()=>{console.warn("[nuxt] Error preloading payload for",n)})}),navigator.connection?.effectiveType!=="slow-2g"&&setTimeout(vl,1e3)})}}),CC=qn(()=>{const t=zt();Nf(()=>{t.beforeResolve(async()=>{await new Promise(e=>{setTimeout(e,100),requestAnimationFrame(()=>{setTimeout(e,0)})})})})}),PC=qn(t=>{let e;async function n(){let s;try{s=await vl()}catch(r){const i=r;if(!("status"in i&&(i.status===404||i.status===403)))throw i}e&&clearTimeout(e),e=setTimeout(n,im);try{const r=await $fetch(bf("builds/latest.json")+`?${Date.now()}`);r.id!==s?.id&&(t.hooks.callHook("app:manifest:update",r),e&&clearTimeout(e))}catch{}}Nf(()=>{e=setTimeout(n,im)})});function kC(t={}){const e=t.path||window.location.pathname;let n={};try{n=Oc(sessionStorage.getItem("nuxt:reload")||"{}")}catch{}if(t.force||n?.path!==e||n?.expires<Date.now()){try{sessionStorage.setItem("nuxt:reload",JSON.stringify({path:e,expires:Date.now()+(t.ttl??1e4)}))}catch{}if(t.persistState)try{sessionStorage.setItem("nuxt:reload:state",JSON.stringify({state:ct().payload.state}))}catch{}window.location.pathname!==e?window.location.href=e:window.location.reload()}}const NC=qn({name:"nuxt:chunk-reload",setup(t){const e=zt(),n=_l(),s=new Set;e.beforeEach(()=>{s.clear()}),t.hook("app:chunkError",({error:i})=>{s.add(i)});function r(i){const o=Tf(n.app.baseURL,i.fullPath);kC({path:o,persistState:!0})}t.hook("app:manifest:update",()=>{e.beforeResolve(r)}),e.onError((i,o)=>{s.has(i)&&r(o)})}}),DC=qn({name:"nuxt:global-components"}),Hs={coach:Sc(()=>ft(()=>import("./DofO93PB.js"),__vite__mapDeps([37,38]),import.meta.url).then(t=>t.default||t)),dashboard:Sc(()=>ft(()=>import("./Do3o9jA3.js"),__vite__mapDeps([39,5,40]),import.meta.url).then(t=>t.default||t))};function OC(t){if(t?.__asyncLoader&&!t.__asyncResolved)return t.__asyncLoader()}async function VC(t,e=zt()){const{path:n,matched:s}=e.resolve(t);if(!s.length||(e._routePreloaded||=new Set,e._routePreloaded.has(n)))return;const r=e._preloadPromises||=[];if(r.length>4)return Promise.all(r).then(()=>VC(t,e));e._routePreloaded.add(n);for(const i of s){const o=i.components?.default;if(typeof o!="function")continue;const a=Promise.resolve(o()).catch(()=>{}).finally(()=>r.splice(r.indexOf(a)));r.push(a)}await Promise.all(r)}const LC=qn({name:"nuxt:prefetch",setup(t){const e=zt();t.hooks.hook("app:mounted",()=>{e.beforeEach(async n=>{const s=n?.meta?.layout;s&&typeof Hs[s]=="function"&&await Hs[s]()})}),t.hooks.hook("link:prefetch",n=>{if(jr(n))return;const s=e.resolve(n);if(!s)return;const r=s.meta.layout;let i=kf(s.meta.middleware);i=i.filter(o=>typeof o=="string");for(const o of i)typeof Th[o]=="function"&&Th[o]();typeof r=="string"&&r in Hs&&OC(Hs[r])})}}),MC={mounted(t,e){t._clickOutside=n=>{t===n.target||t.contains(n.target)||e.value(n)},document.addEventListener("click",t._clickOutside)},unmounted(t){t._clickOutside&&document.removeEventListener("click",t._clickOutside)}},xC=qn(t=>{t.vueApp.directive("click-outside",MC)}),FC=[U0,q0,RC,SC,CC,PC,NC,DC,LC,xC],UC={class:"notification-icon"},BC={key:0,width:"16",height:"16",viewBox:"0 0 16 16"},$C={key:1,width:"16",height:"16",viewBox:"0 0 16 16"},HC={key:2,width:"16",height:"16",viewBox:"0 0 16 16"},jC={class:"notification-message"},qC=ut({__name:"SyncNotification",props:{results:{},visible:{type:Boolean}},emits:["close"],setup(t,{emit:e}){const n=t,s=e,r=le(!1);let i=null;xn(()=>n.visible,h=>{r.value=h,h&&i&&clearTimeout(i),h&&(i=setTimeout(()=>{r.value=!1,s("close")},5e3))});const o=xe(()=>{const h=n.results.filter(w=>w.status==="created").length,f=n.results.filter(w=>w.status==="updated").length,p=n.results.filter(w=>w.status==="skipped").length,g=n.results.filter(w=>w.status==="error").length;return{created:h,updated:f,skipped:p,errors:g,total:n.results.length}}),a=xe(()=>o.value.errors>0?"error":o.value.created>0||o.value.updated>0?"success":(o.value.total===0,"info")),l=xe(()=>{const h=o.value;return h.total===0?"Nessun file da sincronizzare":h.errors>0?`${h.errors} errori durante la sincronizzazione`:h.created>0&&h.updated>0?`${h.created} nuovi, ${h.updated} aggiornati`:h.created>0?`${h.created} sessioni sincronizzate`:h.updated>0?`${h.updated} sessioni aggiornate`:h.skipped>0?`${h.skipped} file saltati (gi sincronizzati o di altri utenti)`:"Sincronizzazione completata"}),u=()=>{r.value=!1,s("close")};return(h,f)=>(ge(),Jt(ha,{name:"slide"},{default:cn(()=>[r.value?(ge(),Re("div",{key:0,class:Ct(["sync-notification",a.value]),onClick:u},[K("div",UC,[a.value==="success"?(ge(),Re("svg",BC,[...f[0]||(f[0]=[K("path",{d:"M6 10.8l-3-3L1.6 9.2l4.4 4.4 9-9L13.6 3 6 10.8z",fill:"currentColor"},null,-1)])])):a.value==="error"?(ge(),Re("svg",$C,[...f[1]||(f[1]=[K("path",{d:"M8 1a7 7 0 100 14A7 7 0 008 1zm0 10.5a1 1 0 110-2 1 1 0 010 2zM9 7H7V4h2v3z",fill:"currentColor"},null,-1)])])):(ge(),Re("svg",HC,[...f[2]||(f[2]=[K("path",{d:"M8 1a7 7 0 100 14A7 7 0 008 1zm1 10H7V9h2v2zm0-3H7V4h2v4z",fill:"currentColor"},null,-1)])]))]),K("span",jC,fn(l.value),1),K("button",{class:"notification-close",onClick:gl(u,["stop"])},"")],2)):fs("",!0)]),_:1}))}}),_n=(t,e)=>{const n=t.__vccOpts||t;for(const[s,r]of e)n[s]=r;return n},GC=Object.assign(_n(qC,[["__scopeId","data-v-2cbc757e"]]),{__name:"ElectronSyncNotification"}),WC=()=>{};var Mm={};const xv=function(t){const e=[];let n=0;for(let s=0;s<t.length;s++){let r=t.charCodeAt(s);r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=r&63|128):(r&64512)===55296&&s+1<t.length&&(t.charCodeAt(s+1)&64512)===56320?(r=65536+((r&1023)<<10)+(t.charCodeAt(++s)&1023),e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=r&63|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=r&63|128)}return e},zC=function(t){const e=[];let n=0,s=0;for(;n<t.length;){const r=t[n++];if(r<128)e[s++]=String.fromCharCode(r);else if(r>191&&r<224){const i=t[n++];e[s++]=String.fromCharCode((r&31)<<6|i&63)}else if(r>239&&r<365){const i=t[n++],o=t[n++],a=t[n++],l=((r&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;e[s++]=String.fromCharCode(55296+(l>>10)),e[s++]=String.fromCharCode(56320+(l&1023))}else{const i=t[n++],o=t[n++];e[s++]=String.fromCharCode((r&15)<<12|(i&63)<<6|o&63)}}return e.join("")},Fv={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let r=0;r<t.length;r+=3){const i=t[r],o=r+1<t.length,a=o?t[r+1]:0,l=r+2<t.length,u=l?t[r+2]:0,h=i>>2,f=(i&3)<<4|a>>4;let p=(a&15)<<2|u>>6,g=u&63;l||(g=64,o||(p=64)),s.push(n[h],n[f],n[p],n[g])}return s.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(xv(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):zC(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let r=0;r<t.length;){const i=n[t.charAt(r++)],a=r<t.length?n[t.charAt(r)]:0;++r;const u=r<t.length?n[t.charAt(r)]:64;++r;const f=r<t.length?n[t.charAt(r)]:64;if(++r,i==null||a==null||u==null||f==null)throw new KC;const p=i<<2|a>>4;if(s.push(p),u!==64){const g=a<<4&240|u>>2;if(s.push(g),f!==64){const w=u<<6&192|f;s.push(w)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class KC extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const QC=function(t){const e=xv(t);return Fv.encodeByteArray(e,!0)},Uc=function(t){return QC(t).replace(/\./g,"")},Uv=function(t){try{return Fv.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function YC(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const JC=()=>YC().__FIREBASE_DEFAULTS__,XC=()=>{if(typeof process>"u"||typeof Mm>"u")return;const t=Mm.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},ZC=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Uv(t[1]);return e&&JSON.parse(e)},Tl=()=>{try{return WC()||JC()||XC()||ZC()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Bv=t=>Tl()?.emulatorHosts?.[t],eP=t=>{const e=Bv(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),s]:[e.substring(0,n),s]},$v=()=>Tl()?.config,Hv=t=>Tl()?.[`_${t}`];class tP{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,s))}}}function Bi(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function jv(t){return(await fetch(t,{credentials:"include"})).ok}function nP(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=e||"demo-project",r=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${s}`,aud:s,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...t};return[Uc(JSON.stringify(n)),Uc(JSON.stringify(o)),""].join(".")}const Do={};function sP(){const t={prod:[],emulator:[]};for(const e of Object.keys(Do))Do[e]?t.emulator.push(e):t.prod.push(e);return t}function rP(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let xm=!1;function qv(t,e){if(typeof window>"u"||typeof document>"u"||!Bi(window.location.host)||Do[t]===e||Do[t]||xm)return;Do[t]=e;function n(p){return`__firebase__banner__${p}`}const s="__firebase__banner",i=sP().prod.length>0;function o(){const p=document.getElementById(s);p&&p.remove()}function a(p){p.style.display="flex",p.style.background="#7faaf0",p.style.position="fixed",p.style.bottom="5px",p.style.left="5px",p.style.padding=".5em",p.style.borderRadius="5px",p.style.alignItems="center"}function l(p,g){p.setAttribute("width","24"),p.setAttribute("id",g),p.setAttribute("height","24"),p.setAttribute("viewBox","0 0 24 24"),p.setAttribute("fill","none"),p.style.marginLeft="-6px"}function u(){const p=document.createElement("span");return p.style.cursor="pointer",p.style.marginLeft="16px",p.style.fontSize="24px",p.innerHTML=" &times;",p.onclick=()=>{xm=!0,o()},p}function h(p,g){p.setAttribute("id",g),p.innerText="Learn more",p.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",p.setAttribute("target","__blank"),p.style.paddingLeft="5px",p.style.textDecoration="underline"}function f(){const p=rP(s),g=n("text"),w=document.getElementById(g)||document.createElement("span"),v=n("learnmore"),k=document.getElementById(v)||document.createElement("a"),M=n("preprendIcon"),V=document.getElementById(M)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(p.created){const _=p.element;a(_),h(k,v);const I=u();l(V,M),_.append(V,w,k,I),document.body.appendChild(_)}i?(w.innerText="Preview backend disconnected.",V.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(V.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,w.innerText="Preview backend running in this workspace."),w.setAttribute("id",g)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",f):f()}function $t(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function iP(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test($t())}function oP(){const t=Tl()?.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function aP(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function cP(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function lP(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function uP(){const t=$t();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function hP(){return!oP()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function fP(){try{return typeof indexedDB=="object"}catch{return!1}}function dP(){return new Promise((t,e)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(s);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(s),t(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{e(r.error?.message||"")}}catch(n){e(n)}})}const pP="FirebaseError";class ys extends Error{constructor(e,n,s){super(n),this.code=e,this.customData=s,this.name=pP,Object.setPrototypeOf(this,ys.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,fa.prototype.create)}}class fa{constructor(e,n,s){this.service=e,this.serviceName=n,this.errors=s}create(e,...n){const s=n[0]||{},r=`${this.service}/${e}`,i=this.errors[e],o=i?mP(i,s):"Error",a=`${this.serviceName}: ${o} (${r}).`;return new ys(r,a,s)}}function mP(t,e){return t.replace(gP,(n,s)=>{const r=e[s];return r!=null?String(r):`<${s}?>`})}const gP=/\{\$([^}]+)}/g;function _P(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Lr(t,e){if(t===e)return!0;const n=Object.keys(t),s=Object.keys(e);for(const r of n){if(!s.includes(r))return!1;const i=t[r],o=e[r];if(Fm(i)&&Fm(o)){if(!Lr(i,o))return!1}else if(i!==o)return!1}for(const r of s)if(!n.includes(r))return!1;return!0}function Fm(t){return t!==null&&typeof t=="object"}function da(t){const e=[];for(const[n,s]of Object.entries(t))Array.isArray(s)?s.forEach(r=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function vo(t){const e={};return t.replace(/^\?/,"").split("&").forEach(s=>{if(s){const[r,i]=s.split("=");e[decodeURIComponent(r)]=decodeURIComponent(i)}}),e}function Eo(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function yP(t,e){const n=new vP(t,e);return n.subscribe.bind(n)}class vP{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,s){let r;if(e===void 0&&n===void 0&&s===void 0)throw new Error("Missing Observer.");EP(e,["next","error","complete"])?r=e:r={next:e,error:n,complete:s},r.next===void 0&&(r.next=Pu),r.error===void 0&&(r.error=Pu),r.complete===void 0&&(r.complete=Pu);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function EP(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Pu(){}function lt(t){return t&&t._delegate?t._delegate:t}class Mr{constructor(e,n,s){this.name=e,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Ir="[DEFAULT]";class TP{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const s=new tP;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:n});r&&s.resolve(r)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e?.identifier),s=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(r){if(s)return null;throw r}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(bP(e))try{this.getOrInitializeService({instanceIdentifier:Ir})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:r});s.resolve(i)}catch{}}}}clearInstance(e=Ir){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ir){return this.instances.has(e)}getOptions(e=Ir){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[i,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);s===a&&o.resolve(r)}return r}onInit(e,n){const s=this.normalizeInstanceIdentifier(n),r=this.onInitCallbacks.get(s)??new Set;r.add(e),this.onInitCallbacks.set(s,r);const i=this.instances.get(s);return i&&e(i,s),()=>{r.delete(e)}}invokeOnInitCallbacks(e,n){const s=this.onInitCallbacks.get(n);if(s)for(const r of s)try{r(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:wP(e),options:n}),this.instances.set(e,s),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=Ir){return this.component?this.component.multipleInstances?e:Ir:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function wP(t){return t===Ir?void 0:t}function bP(t){return t.instantiationMode==="EAGER"}class IP{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new TP(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}var Oe;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Oe||(Oe={}));const AP={debug:Oe.DEBUG,verbose:Oe.VERBOSE,info:Oe.INFO,warn:Oe.WARN,error:Oe.ERROR,silent:Oe.SILENT},RP=Oe.INFO,SP={[Oe.DEBUG]:"log",[Oe.VERBOSE]:"log",[Oe.INFO]:"info",[Oe.WARN]:"warn",[Oe.ERROR]:"error"},CP=(t,e,...n)=>{if(e<t.logLevel)return;const s=new Date().toISOString(),r=SP[e];if(r)console[r](`[${s}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Df{constructor(e){this.name=e,this._logLevel=RP,this._logHandler=CP,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Oe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?AP[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Oe.DEBUG,...e),this._logHandler(this,Oe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Oe.VERBOSE,...e),this._logHandler(this,Oe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Oe.INFO,...e),this._logHandler(this,Oe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Oe.WARN,...e),this._logHandler(this,Oe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Oe.ERROR,...e),this._logHandler(this,Oe.ERROR,...e)}}const PP=(t,e)=>e.some(n=>t instanceof n);let Um,Bm;function kP(){return Um||(Um=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function NP(){return Bm||(Bm=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Gv=new WeakMap,wh=new WeakMap,Wv=new WeakMap,ku=new WeakMap,Of=new WeakMap;function DP(t){const e=new Promise((n,s)=>{const r=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(zs(t.result)),r()},o=()=>{s(t.error),r()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&Gv.set(n,t)}).catch(()=>{}),Of.set(e,t),e}function OP(t){if(wh.has(t))return;const e=new Promise((n,s)=>{const r=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),r()},o=()=>{s(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});wh.set(t,e)}let bh={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return wh.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Wv.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return zs(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function VP(t){bh=t(bh)}function LP(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const s=t.call(Nu(this),e,...n);return Wv.set(s,e.sort?e.sort():[e]),zs(s)}:NP().includes(t)?function(...e){return t.apply(Nu(this),e),zs(Gv.get(this))}:function(...e){return zs(t.apply(Nu(this),e))}}function MP(t){return typeof t=="function"?LP(t):(t instanceof IDBTransaction&&OP(t),PP(t,kP())?new Proxy(t,bh):t)}function zs(t){if(t instanceof IDBRequest)return DP(t);if(ku.has(t))return ku.get(t);const e=MP(t);return e!==t&&(ku.set(t,e),Of.set(e,t)),e}const Nu=t=>Of.get(t);function xP(t,e,{blocked:n,upgrade:s,blocking:r,terminated:i}={}){const o=indexedDB.open(t,e),a=zs(o);return s&&o.addEventListener("upgradeneeded",l=>{s(zs(o.result),l.oldVersion,l.newVersion,zs(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{i&&l.addEventListener("close",()=>i()),r&&l.addEventListener("versionchange",u=>r(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}const FP=["get","getKey","getAll","getAllKeys","count"],UP=["put","add","delete","clear"],Du=new Map;function $m(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Du.get(e))return Du.get(e);const n=e.replace(/FromIndex$/,""),s=e!==n,r=UP.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(r||FP.includes(n)))return;const i=async function(o,...a){const l=this.transaction(o,r?"readwrite":"readonly");let u=l.store;return s&&(u=u.index(a.shift())),(await Promise.all([u[n](...a),r&&l.done]))[0]};return Du.set(e,i),i}VP(t=>({...t,get:(e,n,s)=>$m(e,n)||t.get(e,n,s),has:(e,n)=>!!$m(e,n)||t.has(e,n)}));class BP{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if($P(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function $P(t){return t.getComponent()?.type==="VERSION"}const Ih="@firebase/app",Hm="0.14.6";const ds=new Df("@firebase/app"),HP="@firebase/app-compat",jP="@firebase/analytics-compat",qP="@firebase/analytics",GP="@firebase/app-check-compat",WP="@firebase/app-check",zP="@firebase/auth",KP="@firebase/auth-compat",QP="@firebase/database",YP="@firebase/data-connect",JP="@firebase/database-compat",XP="@firebase/functions",ZP="@firebase/functions-compat",ek="@firebase/installations",tk="@firebase/installations-compat",nk="@firebase/messaging",sk="@firebase/messaging-compat",rk="@firebase/performance",ik="@firebase/performance-compat",ok="@firebase/remote-config",ak="@firebase/remote-config-compat",ck="@firebase/storage",lk="@firebase/storage-compat",uk="@firebase/firestore",hk="@firebase/ai",fk="@firebase/firestore-compat",dk="firebase",pk="12.6.0";const Ah="[DEFAULT]",mk={[Ih]:"fire-core",[HP]:"fire-core-compat",[qP]:"fire-analytics",[jP]:"fire-analytics-compat",[WP]:"fire-app-check",[GP]:"fire-app-check-compat",[zP]:"fire-auth",[KP]:"fire-auth-compat",[QP]:"fire-rtdb",[YP]:"fire-data-connect",[JP]:"fire-rtdb-compat",[XP]:"fire-fn",[ZP]:"fire-fn-compat",[ek]:"fire-iid",[tk]:"fire-iid-compat",[nk]:"fire-fcm",[sk]:"fire-fcm-compat",[rk]:"fire-perf",[ik]:"fire-perf-compat",[ok]:"fire-rc",[ak]:"fire-rc-compat",[ck]:"fire-gcs",[lk]:"fire-gcs-compat",[uk]:"fire-fst",[fk]:"fire-fst-compat",[hk]:"fire-vertex","fire-js":"fire-js",[dk]:"fire-js-all"};const Ko=new Map,gk=new Map,Rh=new Map;function jm(t,e){try{t.container.addComponent(e)}catch(n){ds.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Si(t){const e=t.name;if(Rh.has(e))return ds.debug(`There were multiple attempts to register component ${e}.`),!1;Rh.set(e,t);for(const n of Ko.values())jm(n,t);for(const n of gk.values())jm(n,t);return!0}function Vf(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function dn(t){return t==null?!1:t.settings!==void 0}const _k={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ks=new fa("app","Firebase",_k);class yk{constructor(e,n,s){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new Mr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ks.create("app-deleted",{appName:this._name})}}const $i=pk;function zv(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const s={name:Ah,automaticDataCollectionEnabled:!0,...e},r=s.name;if(typeof r!="string"||!r)throw Ks.create("bad-app-name",{appName:String(r)});if(n||(n=$v()),!n)throw Ks.create("no-options");const i=Ko.get(r);if(i){if(Lr(n,i.options)&&Lr(s,i.config))return i;throw Ks.create("duplicate-app",{appName:r})}const o=new IP(r);for(const l of Rh.values())o.addComponent(l);const a=new yk(n,s,o);return Ko.set(r,a),a}function Kv(t=Ah){const e=Ko.get(t);if(!e&&t===Ah&&$v())return zv();if(!e)throw Ks.create("no-app",{appName:t});return e}function qm(){return Array.from(Ko.values())}function Qs(t,e,n){let s=mk[t]??t;n&&(s+=`-${n}`);const r=s.match(/\s|\//),i=e.match(/\s|\//);if(r||i){const o=[`Unable to register library "${s}" with version "${e}":`];r&&o.push(`library name "${s}" contains illegal characters (whitespace or "/")`),r&&i&&o.push("and"),i&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ds.warn(o.join(" "));return}Si(new Mr(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}const vk="firebase-heartbeat-database",Ek=1,Qo="firebase-heartbeat-store";let Ou=null;function Qv(){return Ou||(Ou=xP(vk,Ek,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Qo)}catch(n){console.warn(n)}}}}).catch(t=>{throw Ks.create("idb-open",{originalErrorMessage:t.message})})),Ou}async function Tk(t){try{const n=(await Qv()).transaction(Qo),s=await n.objectStore(Qo).get(Yv(t));return await n.done,s}catch(e){if(e instanceof ys)ds.warn(e.message);else{const n=Ks.create("idb-get",{originalErrorMessage:e?.message});ds.warn(n.message)}}}async function Gm(t,e){try{const s=(await Qv()).transaction(Qo,"readwrite");await s.objectStore(Qo).put(e,Yv(t)),await s.done}catch(n){if(n instanceof ys)ds.warn(n.message);else{const s=Ks.create("idb-set",{originalErrorMessage:n?.message});ds.warn(s.message)}}}function Yv(t){return`${t.name}!${t.options.appId}`}const wk=1024,bk=30;class Ik{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new Rk(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=Wm();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(r=>r.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:n}),this._heartbeatsCache.heartbeats.length>bk){const r=Sk(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(r,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){ds.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=Wm(),{heartbeatsToSend:n,unsentEntries:s}=Ak(this._heartbeatsCache.heartbeats),r=Uc(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}catch(e){return ds.warn(e),""}}}function Wm(){return new Date().toISOString().substring(0,10)}function Ak(t,e=wk){const n=[];let s=t.slice();for(const r of t){const i=n.find(o=>o.agent===r.agent);if(i){if(i.dates.push(r.date),zm(n)>e){i.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),zm(n)>e){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class Rk{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return fP()?dP().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await Tk(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return Gm(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return Gm(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function zm(t){return Uc(JSON.stringify({version:2,heartbeats:t})).length}function Sk(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let s=1;s<t.length;s++)t[s].date<n&&(n=t[s].date,e=s);return e}function Ck(t){Si(new Mr("platform-logger",e=>new BP(e),"PRIVATE")),Si(new Mr("heartbeat",e=>new Ik(e),"PRIVATE")),Qs(Ih,Hm,t),Qs(Ih,Hm,"esm2020"),Qs("fire-js","")}Ck("");function Jv(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Pk=Jv,Xv=new fa("auth","Firebase",Jv());const Bc=new Df("@firebase/auth");function kk(t,...e){Bc.logLevel<=Oe.WARN&&Bc.warn(`Auth (${$i}): ${t}`,...e)}function uc(t,...e){Bc.logLevel<=Oe.ERROR&&Bc.error(`Auth (${$i}): ${t}`,...e)}function Cn(t,...e){throw Lf(t,...e)}function Fn(t,...e){return Lf(t,...e)}function Zv(t,e,n){const s={...Pk(),[e]:n};return new fa("auth","Firebase",s).create(e,{appName:t.name})}function os(t){return Zv(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Lf(t,...e){if(typeof t!="string"){const n=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=t.name),t._errorFactory.create(n,...s)}return Xv.create(t,...e)}function we(t,e,...n){if(!t)throw Lf(e,...n)}function ts(t){const e="INTERNAL ASSERTION FAILED: "+t;throw uc(e),new Error(e)}function ps(t,e){t||ts(e)}function Sh(){return typeof self<"u"&&self.location?.href||""}function Nk(){return Km()==="http:"||Km()==="https:"}function Km(){return typeof self<"u"&&self.location?.protocol||null}function Dk(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Nk()||cP()||"connection"in navigator)?navigator.onLine:!0}function Ok(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}class pa{constructor(e,n){this.shortDelay=e,this.longDelay=n,ps(n>e,"Short delay should be less than long delay!"),this.isMobile=iP()||lP()}get(){return Dk()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Mf(t,e){ps(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}class eE{static initialize(e,n,s){this.fetchImpl=e,n&&(this.headersImpl=n),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ts("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ts("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ts("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Vk={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const Lk=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Mk=new pa(3e4,6e4);function vs(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function Gn(t,e,n,s,r={}){return tE(t,r,async()=>{let i={},o={};s&&(e==="GET"?o=s:i={body:JSON.stringify(s)});const a=da({key:t.config.apiKey,...o}).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const u={method:e,headers:l,...i};return aP()||(u.referrerPolicy="no-referrer"),t.emulatorConfig&&Bi(t.emulatorConfig.host)&&(u.credentials="include"),eE.fetch()(await nE(t,t.config.apiHost,n,a),u)})}async function tE(t,e,n){t._canInitEmulator=!1;const s={...Vk,...e};try{const r=new Fk(t),i=await Promise.race([n(),r.promise]);r.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw Ya(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const a=i.ok?o.errorMessage:o.error.message,[l,u]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Ya(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw Ya(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw Ya(t,"user-disabled",o);const h=s[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw Zv(t,h,u);Cn(t,h)}}catch(r){if(r instanceof ys)throw r;Cn(t,"network-request-failed",{message:String(r)})}}async function ma(t,e,n,s,r={}){const i=await Gn(t,e,n,s,r);return"mfaPendingCredential"in i&&Cn(t,"multi-factor-auth-required",{_serverResponse:i}),i}async function nE(t,e,n,s){const r=`${e}${n}?${s}`,i=t,o=i.config.emulator?Mf(t.config,r):`${t.config.apiScheme}://${r}`;return Lk.includes(n)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(o).toString():o}function xk(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Fk{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,s)=>{this.timer=setTimeout(()=>s(Fn(this.auth,"network-request-failed")),Mk.get())})}}function Ya(t,e,n){const s={appName:t.name};n.email&&(s.email=n.email),n.phoneNumber&&(s.phoneNumber=n.phoneNumber);const r=Fn(t,e,s);return r.customData._tokenResponse=n,r}function Qm(t){return t!==void 0&&t.enterprise!==void 0}class Uk{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return xk(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function Bk(t,e){return Gn(t,"GET","/v2/recaptchaConfig",vs(t,e))}async function $k(t,e){return Gn(t,"POST","/v1/accounts:delete",e)}async function $c(t,e){return Gn(t,"POST","/v1/accounts:lookup",e)}function Oo(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function Hk(t,e=!1){const n=lt(t),s=await n.getIdToken(e),r=xf(s);we(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");const i=typeof r.firebase=="object"?r.firebase:void 0,o=i?.sign_in_provider;return{claims:r,token:s,authTime:Oo(Vu(r.auth_time)),issuedAtTime:Oo(Vu(r.iat)),expirationTime:Oo(Vu(r.exp)),signInProvider:o||null,signInSecondFactor:i?.sign_in_second_factor||null}}function Vu(t){return Number(t)*1e3}function xf(t){const[e,n,s]=t.split(".");if(e===void 0||n===void 0||s===void 0)return uc("JWT malformed, contained fewer than 3 sections"),null;try{const r=Uv(n);return r?JSON.parse(r):(uc("Failed to decode base64 JWT payload"),null)}catch(r){return uc("Caught error parsing JWT payload as JSON",r?.toString()),null}}function Ym(t){const e=xf(t);return we(e,"internal-error"),we(typeof e.exp<"u","internal-error"),we(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function Ci(t,e,n=!1){if(n)return e;try{return await e}catch(s){throw s instanceof ys&&jk(s)&&t.auth.currentUser===t&&await t.auth.signOut(),s}}function jk({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}class qk{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const s=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class Ch{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Oo(this.lastLoginAt),this.creationTime=Oo(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Hc(t){const e=t.auth,n=await t.getIdToken(),s=await Ci(t,$c(e,{idToken:n}));we(s?.users.length,e,"internal-error");const r=s.users[0];t._notifyReloadListener(r);const i=r.providerUserInfo?.length?sE(r.providerUserInfo):[],o=Wk(t.providerData,i),a=t.isAnonymous,l=!(t.email&&r.passwordHash)&&!o?.length,u=a?l:!1,h={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:o,metadata:new Ch(r.createdAt,r.lastLoginAt),isAnonymous:u};Object.assign(t,h)}async function Gk(t){const e=lt(t);await Hc(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function Wk(t,e){return[...t.filter(s=>!e.some(r=>r.providerId===s.providerId)),...e]}function sE(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}async function zk(t,e){const n=await tE(t,{},async()=>{const s=da({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:i}=t.config,o=await nE(t,r,"/v1/token",`key=${i}`),a=await t._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";const l={method:"POST",headers:a,body:s};return t.emulatorConfig&&Bi(t.emulatorConfig.host)&&(l.credentials="include"),eE.fetch()(o,l)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function Kk(t,e){return Gn(t,"POST","/v2/accounts:revokeToken",vs(t,e))}class gi{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){we(e.idToken,"internal-error"),we(typeof e.idToken<"u","internal-error"),we(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Ym(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){we(e.length!==0,"internal-error");const n=Ym(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(we(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:s,refreshToken:r,expiresIn:i}=await zk(e,n);this.updateTokensAndExpiration(s,r,Number(i))}updateTokensAndExpiration(e,n,s){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,n){const{refreshToken:s,accessToken:r,expirationTime:i}=n,o=new gi;return s&&(we(typeof s=="string","internal-error",{appName:e}),o.refreshToken=s),r&&(we(typeof r=="string","internal-error",{appName:e}),o.accessToken=r),i&&(we(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new gi,this.toJSON())}_performRefresh(){return ts("not implemented")}}function Cs(t,e){we(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class En{constructor({uid:e,auth:n,stsTokenManager:s,...r}){this.providerId="firebase",this.proactiveRefresh=new qk(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.providerData=r.providerData?[...r.providerData]:[],this.metadata=new Ch(r.createdAt||void 0,r.lastLoginAt||void 0)}async getIdToken(e){const n=await Ci(this,this.stsTokenManager.getToken(this.auth,e));return we(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return Hk(this,e)}reload(){return Gk(this)}_assign(e){this!==e&&(we(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new En({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){we(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),n&&await Hc(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(dn(this.auth.app))return Promise.reject(os(this.auth));const e=await this.getIdToken();return await Ci(this,$k(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const s=n.displayName??void 0,r=n.email??void 0,i=n.phoneNumber??void 0,o=n.photoURL??void 0,a=n.tenantId??void 0,l=n._redirectEventId??void 0,u=n.createdAt??void 0,h=n.lastLoginAt??void 0,{uid:f,emailVerified:p,isAnonymous:g,providerData:w,stsTokenManager:v}=n;we(f&&v,e,"internal-error");const k=gi.fromJSON(this.name,v);we(typeof f=="string",e,"internal-error"),Cs(s,e.name),Cs(r,e.name),we(typeof p=="boolean",e,"internal-error"),we(typeof g=="boolean",e,"internal-error"),Cs(i,e.name),Cs(o,e.name),Cs(a,e.name),Cs(l,e.name),Cs(u,e.name),Cs(h,e.name);const M=new En({uid:f,auth:e,email:r,emailVerified:p,displayName:s,isAnonymous:g,photoURL:o,phoneNumber:i,tenantId:a,stsTokenManager:k,createdAt:u,lastLoginAt:h});return w&&Array.isArray(w)&&(M.providerData=w.map(V=>({...V}))),l&&(M._redirectEventId=l),M}static async _fromIdTokenResponse(e,n,s=!1){const r=new gi;r.updateFromServerResponse(n);const i=new En({uid:n.localId,auth:e,stsTokenManager:r,isAnonymous:s});return await Hc(i),i}static async _fromGetAccountInfoResponse(e,n,s){const r=n.users[0];we(r.localId!==void 0,"internal-error");const i=r.providerUserInfo!==void 0?sE(r.providerUserInfo):[],o=!(r.email&&r.passwordHash)&&!i?.length,a=new gi;a.updateFromIdToken(s);const l=new En({uid:r.localId,auth:e,stsTokenManager:a,isAnonymous:o}),u={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:i,metadata:new Ch(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!i?.length};return Object.assign(l,u),l}}const Jm=new Map;function ns(t){ps(t instanceof Function,"Expected a class definition");let e=Jm.get(t);return e?(ps(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Jm.set(t,e),e)}class rE{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}rE.type="NONE";const Xm=rE;function hc(t,e,n){return`firebase:${t}:${e}:${n}`}class _i{constructor(e,n,s){this.persistence=e,this.auth=n,this.userKey=s;const{config:r,name:i}=this.auth;this.fullUserKey=hc(this.userKey,r.apiKey,i),this.fullPersistenceKey=hc("persistence",r.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await $c(this.auth,{idToken:e}).catch(()=>{});return n?En._fromGetAccountInfoResponse(this.auth,n,e):null}return En._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,s="authUser"){if(!n.length)return new _i(ns(Xm),e,s);const r=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let i=r[0]||ns(Xm);const o=hc(s,e.config.apiKey,e.name);let a=null;for(const u of n)try{const h=await u._get(o);if(h){let f;if(typeof h=="string"){const p=await $c(e,{idToken:h}).catch(()=>{});if(!p)break;f=await En._fromGetAccountInfoResponse(e,p,h)}else f=En._fromJSON(e,h);u!==i&&(a=f),i=u;break}}catch{}const l=r.filter(u=>u._shouldAllowMigration);return!i._shouldAllowMigration||!l.length?new _i(i,e,s):(i=l[0],a&&await i._set(o,a.toJSON()),await Promise.all(n.map(async u=>{if(u!==i)try{await u._remove(o)}catch{}})),new _i(i,e,s))}}function Zm(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(cE(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(iE(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(uE(e))return"Blackberry";if(hE(e))return"Webos";if(oE(e))return"Safari";if((e.includes("chrome/")||aE(e))&&!e.includes("edge/"))return"Chrome";if(lE(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=t.match(n);if(s?.length===2)return s[1]}return"Other"}function iE(t=$t()){return/firefox\//i.test(t)}function oE(t=$t()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function aE(t=$t()){return/crios\//i.test(t)}function cE(t=$t()){return/iemobile/i.test(t)}function lE(t=$t()){return/android/i.test(t)}function uE(t=$t()){return/blackberry/i.test(t)}function hE(t=$t()){return/webos/i.test(t)}function Ff(t=$t()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function Qk(t=$t()){return Ff(t)&&!!window.navigator?.standalone}function Yk(){return uP()&&document.documentMode===10}function fE(t=$t()){return Ff(t)||lE(t)||hE(t)||uE(t)||/windows phone/i.test(t)||cE(t)}function dE(t,e=[]){let n;switch(t){case"Browser":n=Zm($t());break;case"Worker":n=`${Zm($t())}-${t}`;break;default:n=t}const s=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${$i}/${s}`}class Jk{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const s=i=>new Promise((o,a)=>{try{const l=e(i);o(l)}catch(l){a(l)}});s.onAbort=n,this.queue.push(s);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const s of this.queue)await s(e),s.onAbort&&n.push(s.onAbort)}catch(s){n.reverse();for(const r of n)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s?.message})}}}async function Xk(t,e={}){return Gn(t,"GET","/v2/passwordPolicy",vs(t,e))}const Zk=6;class e1{constructor(e){const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??Zk,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const s=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;s&&(n.meetsMinPasswordLength=e.length>=s),r&&(n.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let s;for(let r=0;r<e.length;r++)s=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(n,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,n,s,r,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}class t1{constructor(e,n,s,r){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=s,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new eg(this),this.idTokenSubscription=new eg(this),this.beforeStateQueue=new Jk(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Xv,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=ns(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await _i.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await $c(this,{idToken:e}),s=await En._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(s)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(dn(this.app)){const i=this.app.settings.authIdToken;return i?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(i).then(o,o))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let s=n,r=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const i=this.redirectUser?._redirectEventId,o=s?._redirectEventId,a=await this.tryRedirectSignIn(e);(!i||i===o)&&a?.user&&(s=a.user,r=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(s)}catch(i){s=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(i))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return we(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Hc(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=Ok()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(dn(this.app))return Promise.reject(os(this));const n=e?lt(e):null;return n&&we(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&we(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return dn(this.app)?Promise.reject(os(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return dn(this.app)?Promise.reject(os(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ns(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await Xk(this),n=new e1(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new fa("auth","Firebase",e())}onAuthStateChanged(e,n,s){return this.registerStateListener(this.authStateSubscription,e,n,s)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,s){return this.registerStateListener(this.idTokenSubscription,e,n,s)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(s.tenantId=this.tenantId),await Kk(this,s)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,n){const s=await this.getOrInitRedirectPersistenceManager(n);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&ns(e)||this._popupRedirectResolver;we(n,this,"argument-error"),this.redirectPersistenceManager=await _i.create(this,[ns(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,s,r){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(we(a,this,"internal-error"),a.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,s,r);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return we(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=dE(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(e["X-Firebase-Client"]=n);const s=await this._getAppCheckToken();return s&&(e["X-Firebase-AppCheck"]=s),e}async _getAppCheckToken(){if(dn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&kk(`Error while retrieving App Check token: ${e.error}`),e?.token}}function qr(t){return lt(t)}class eg{constructor(e){this.auth=e,this.observer=null,this.addObserver=yP(n=>this.observer=n)}get next(){return we(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let wl={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function n1(t){wl=t}function pE(t){return wl.loadJS(t)}function s1(){return wl.recaptchaEnterpriseScript}function r1(){return wl.gapiScript}function i1(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class o1{constructor(){this.enterprise=new a1}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class a1{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const c1="recaptcha-enterprise",mE="NO_RECAPTCHA";class l1{constructor(e){this.type=c1,this.auth=qr(e)}async verify(e="verify",n=!1){async function s(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(o,a)=>{Bk(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const u=new Uk(l);return i.tenantId==null?i._agentRecaptchaConfig=u:i._tenantRecaptchaConfigs[i.tenantId]=u,o(u.siteKey)}}).catch(l=>{a(l)})})}function r(i,o,a){const l=window.grecaptcha;Qm(l)?l.enterprise.ready(()=>{l.enterprise.execute(i,{action:e}).then(u=>{o(u)}).catch(()=>{o(mE)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new o1().execute("siteKey",{action:"verify"}):new Promise((i,o)=>{s(this.auth).then(a=>{if(!n&&Qm(window.grecaptcha))r(a,i,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=s1();l.length!==0&&(l+=a),pE(l).then(()=>{r(a,i,o)}).catch(u=>{o(u)})}}).catch(a=>{o(a)})})}}async function tg(t,e,n,s=!1,r=!1){const i=new l1(t);let o;if(r)o=mE;else try{o=await i.verify(n)}catch{o=await i.verify(n,!0)}const a={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in a){const l=a.phoneEnrollmentInfo.phoneNumber,u=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:l,recaptchaToken:u,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){const l=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:l,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return s?Object.assign(a,{captchaResp:o}):Object.assign(a,{captchaResponse:o}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function Ph(t,e,n,s,r){if(t._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await tg(t,e,n,n==="getOobCode");return s(t,i)}else return s(t,e).catch(async i=>{if(i.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await tg(t,e,n,n==="getOobCode");return s(t,o)}else return Promise.reject(i)})}function u1(t,e){const n=Vf(t,"auth");if(n.isInitialized()){const r=n.getImmediate(),i=n.getOptions();if(Lr(i,e??{}))return r;Cn(r,"already-initialized")}return n.initialize({options:e})}function h1(t,e){const n=e?.persistence||[],s=(Array.isArray(n)?n:[n]).map(ns);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(s,e?.popupRedirectResolver)}function f1(t,e,n){const s=qr(t);we(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const r=!1,i=gE(e),{host:o,port:a}=d1(e),l=a===null?"":`:${a}`,u={url:`${i}//${o}${l}/`},h=Object.freeze({host:o,port:a,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:r})});if(!s._canInitEmulator){we(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),we(Lr(u,s.config.emulator)&&Lr(h,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=u,s.emulatorConfig=h,s.settings.appVerificationDisabledForTesting=!0,Bi(o)?(jv(`${i}//${o}${l}`),qv("Auth",!0)):p1()}function gE(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function d1(t){const e=gE(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const s=n[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(s);if(r){const i=r[1];return{host:i,port:ng(s.substr(i.length+1))}}else{const[i,o]=s.split(":");return{host:i,port:ng(o)}}}function ng(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function p1(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}class Uf{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return ts("not implemented")}_getIdTokenResponse(e){return ts("not implemented")}_linkToIdToken(e,n){return ts("not implemented")}_getReauthenticationResolver(e){return ts("not implemented")}}async function m1(t,e){return Gn(t,"POST","/v1/accounts:signUp",e)}async function g1(t,e){return ma(t,"POST","/v1/accounts:signInWithPassword",vs(t,e))}async function _1(t,e){return Gn(t,"POST","/v1/accounts:sendOobCode",vs(t,e))}async function y1(t,e){return _1(t,e)}async function v1(t,e){return ma(t,"POST","/v1/accounts:signInWithEmailLink",vs(t,e))}async function E1(t,e){return ma(t,"POST","/v1/accounts:signInWithEmailLink",vs(t,e))}class Yo extends Uf{constructor(e,n,s,r=null){super("password",s),this._email=e,this._password=n,this._tenantId=r}static _fromEmailAndPassword(e,n){return new Yo(e,n,"password")}static _fromEmailAndCode(e,n,s=null){return new Yo(e,n,"emailLink",s)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Ph(e,n,"signInWithPassword",g1);case"emailLink":return v1(e,{email:this._email,oobCode:this._password});default:Cn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const s={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Ph(e,s,"signUpPassword",m1);case"emailLink":return E1(e,{idToken:n,email:this._email,oobCode:this._password});default:Cn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function yi(t,e){return ma(t,"POST","/v1/accounts:signInWithIdp",vs(t,e))}const T1="http://localhost";class xr extends Uf{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new xr(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Cn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:r,...i}=n;if(!s||!r)return null;const o=new xr(s,r);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return yi(e,n)}_linkToIdToken(e,n){const s=this.buildRequest();return s.idToken=n,yi(e,s)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,yi(e,n)}buildRequest(){const e={requestUri:T1,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=da(n)}return e}}function w1(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function b1(t){const e=vo(Eo(t)).link,n=e?vo(Eo(e)).deep_link_id:null,s=vo(Eo(t)).deep_link_id;return(s?vo(Eo(s)).link:null)||s||n||e||t}class Bf{constructor(e){const n=vo(Eo(e)),s=n.apiKey??null,r=n.oobCode??null,i=w1(n.mode??null);we(s&&r&&i,"argument-error"),this.apiKey=s,this.operation=i,this.code=r,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=b1(e);try{return new Bf(n)}catch{return null}}}class Hi{constructor(){this.providerId=Hi.PROVIDER_ID}static credential(e,n){return Yo._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const s=Bf.parseLink(n);return we(s,"argument-error"),Yo._fromEmailAndCode(e,s.code,s.tenantId)}}Hi.PROVIDER_ID="password";Hi.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Hi.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class _E{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class ga extends _E{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class xs extends ga{constructor(){super("facebook.com")}static credential(e){return xr._fromParams({providerId:xs.PROVIDER_ID,signInMethod:xs.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return xs.credentialFromTaggedObject(e)}static credentialFromError(e){return xs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return xs.credential(e.oauthAccessToken)}catch{return null}}}xs.FACEBOOK_SIGN_IN_METHOD="facebook.com";xs.PROVIDER_ID="facebook.com";class Fs extends ga{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return xr._fromParams({providerId:Fs.PROVIDER_ID,signInMethod:Fs.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Fs.credentialFromTaggedObject(e)}static credentialFromError(e){return Fs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:s}=e;if(!n&&!s)return null;try{return Fs.credential(n,s)}catch{return null}}}Fs.GOOGLE_SIGN_IN_METHOD="google.com";Fs.PROVIDER_ID="google.com";class Us extends ga{constructor(){super("github.com")}static credential(e){return xr._fromParams({providerId:Us.PROVIDER_ID,signInMethod:Us.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Us.credentialFromTaggedObject(e)}static credentialFromError(e){return Us.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Us.credential(e.oauthAccessToken)}catch{return null}}}Us.GITHUB_SIGN_IN_METHOD="github.com";Us.PROVIDER_ID="github.com";class Bs extends ga{constructor(){super("twitter.com")}static credential(e,n){return xr._fromParams({providerId:Bs.PROVIDER_ID,signInMethod:Bs.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Bs.credentialFromTaggedObject(e)}static credentialFromError(e){return Bs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:s}=e;if(!n||!s)return null;try{return Bs.credential(n,s)}catch{return null}}}Bs.TWITTER_SIGN_IN_METHOD="twitter.com";Bs.PROVIDER_ID="twitter.com";async function I1(t,e){return ma(t,"POST","/v1/accounts:signUp",vs(t,e))}class Fr{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,s,r=!1){const i=await En._fromIdTokenResponse(e,s,r),o=sg(s);return new Fr({user:i,providerId:o,_tokenResponse:s,operationType:n})}static async _forOperation(e,n,s){await e._updateTokensIfNecessary(s,!0);const r=sg(s);return new Fr({user:e,providerId:r,_tokenResponse:s,operationType:n})}}function sg(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}class jc extends ys{constructor(e,n,s,r){super(n.code,n.message),this.operationType=s,this.user=r,Object.setPrototypeOf(this,jc.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,n,s,r){return new jc(e,n,s,r)}}function yE(t,e,n,s){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?jc._fromErrorAndOperation(t,i,e,s):i})}async function A1(t,e,n=!1){const s=await Ci(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Fr._forOperation(t,"link",s)}async function R1(t,e,n=!1){const{auth:s}=t;if(dn(s.app))return Promise.reject(os(s));const r="reauthenticate";try{const i=await Ci(t,yE(s,r,e,t),n);we(i.idToken,s,"internal-error");const o=xf(i.idToken);we(o,s,"internal-error");const{sub:a}=o;return we(t.uid===a,s,"user-mismatch"),Fr._forOperation(t,r,i)}catch(i){throw i?.code==="auth/user-not-found"&&Cn(s,"user-mismatch"),i}}async function vE(t,e,n=!1){if(dn(t.app))return Promise.reject(os(t));const s="signIn",r=await yE(t,s,e),i=await Fr._fromIdTokenResponse(t,s,r);return n||await t._updateCurrentUser(i.user),i}async function S1(t,e){return vE(qr(t),e)}async function EE(t){const e=qr(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function C1(t,e,n){if(dn(t.app))return Promise.reject(os(t));const s=qr(t),o=await Ph(s,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",I1).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&EE(t),l}),a=await Fr._fromIdTokenResponse(s,"signIn",o);return await s._updateCurrentUser(a.user),a}function P1(t,e,n){return dn(t.app)?Promise.reject(os(t)):S1(lt(t),Hi.credential(e,n)).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&EE(t),s})}async function rg(t,e){const n=lt(t),r={requestType:"VERIFY_EMAIL",idToken:await t.getIdToken()},{email:i}=await y1(n.auth,r);i!==t.email&&await t.reload()}async function k1(t,e){return Gn(t,"POST","/v1/accounts:update",e)}async function N1(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const s=lt(t),i={idToken:await s.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},o=await Ci(s,k1(s.auth,i));s.displayName=o.displayName||null,s.photoURL=o.photoUrl||null;const a=s.providerData.find(({providerId:l})=>l==="password");a&&(a.displayName=s.displayName,a.photoURL=s.photoURL),await s._updateTokensIfNecessary(o)}function D1(t,e,n,s){return lt(t).onIdTokenChanged(e,n,s)}function O1(t,e,n){return lt(t).beforeAuthStateChanged(e,n)}function V1(t,e,n,s){return lt(t).onAuthStateChanged(e,n,s)}function L1(t){return lt(t).signOut()}const qc="__sak";class TE{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(qc,"1"),this.storage.removeItem(qc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const M1=1e3,x1=10;class wE extends TE{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=fE(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const s=this.storage.getItem(n),r=this.localCache[n];s!==r&&e(n,r,s)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const s=e.key;n?this.detachListener():this.stopPolling();const r=()=>{const o=this.storage.getItem(s);!n&&this.localCache[s]===o||this.notifyListeners(s,o)},i=this.storage.getItem(s);Yk()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,x1):r()}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const r of Array.from(s))r(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:s}),!0)})},M1)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}wE.type="LOCAL";const F1=wE;class bE extends TE{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}bE.type="SESSION";const IE=bE;function U1(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}class bl{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(r=>r.isListeningto(e));if(n)return n;const s=new bl(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:s,eventType:r,data:i}=n.data,o=this.handlersMap[r];if(!o?.size)return;n.ports[0].postMessage({status:"ack",eventId:s,eventType:r});const a=Array.from(o).map(async u=>u(n.origin,i)),l=await U1(a);n.ports[0].postMessage({status:"done",eventId:s,eventType:r,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}bl.receivers=[];function $f(t="",e=10){let n="";for(let s=0;s<e;s++)n+=Math.floor(Math.random()*10);return t+n}class B1{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,s=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,o;return new Promise((a,l)=>{const u=$f("",20);r.port1.start();const h=setTimeout(()=>{l(new Error("unsupported_event"))},s);o={messageChannel:r,onMessage(f){const p=f;if(p.data.eventId===u)switch(p.data.status){case"ack":clearTimeout(h),i=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),a(p.data.response);break;default:clearTimeout(h),clearTimeout(i),l(new Error("invalid_response"));break}}},this.handlers.add(o),r.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:n},[r.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}function Un(){return window}function $1(t){Un().location.href=t}function AE(){return typeof Un().WorkerGlobalScope<"u"&&typeof Un().importScripts=="function"}async function H1(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function j1(){return navigator?.serviceWorker?.controller||null}function q1(){return AE()?self:null}const RE="firebaseLocalStorageDb",G1=1,Gc="firebaseLocalStorage",SE="fbase_key";class _a{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Il(t,e){return t.transaction([Gc],e?"readwrite":"readonly").objectStore(Gc)}function W1(){const t=indexedDB.deleteDatabase(RE);return new _a(t).toPromise()}function kh(){const t=indexedDB.open(RE,G1);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const s=t.result;try{s.createObjectStore(Gc,{keyPath:SE})}catch(r){n(r)}}),t.addEventListener("success",async()=>{const s=t.result;s.objectStoreNames.contains(Gc)?e(s):(s.close(),await W1(),e(await kh()))})})}async function ig(t,e,n){const s=Il(t,!0).put({[SE]:e,value:n});return new _a(s).toPromise()}async function z1(t,e){const n=Il(t,!1).get(e),s=await new _a(n).toPromise();return s===void 0?null:s.value}function og(t,e){const n=Il(t,!0).delete(e);return new _a(n).toPromise()}const K1=800,Q1=3;class CE{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await kh(),this.db)}async _withRetries(e){let n=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(n++>Q1)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return AE()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=bl._getInstance(q1()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await H1(),!this.activeServiceWorker)return;this.sender=new B1(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||j1()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await kh();return await ig(e,qc,"1"),await og(e,qc),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(s=>ig(s,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(s=>z1(s,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>og(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(r=>{const i=Il(r,!1).getAll();return new _a(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],s=new Set;if(e.length!==0)for(const{fbase_key:r,value:i}of e)s.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),n.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!s.has(r)&&(this.notifyListeners(r,null),n.push(r));return n}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const r of Array.from(s))r(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),K1)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}CE.type="LOCAL";const Y1=CE;new pa(3e4,6e4);function J1(t,e){return e?ns(e):(we(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}class Hf extends Uf{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return yi(e,this._buildIdpRequest())}_linkToIdToken(e,n){return yi(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return yi(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function X1(t){return vE(t.auth,new Hf(t),t.bypassAuthState)}function Z1(t){const{auth:e,user:n}=t;return we(n,e,"internal-error"),R1(n,new Hf(t),t.bypassAuthState)}async function eN(t){const{auth:e,user:n}=t;return we(n,e,"internal-error"),A1(n,new Hf(t),t.bypassAuthState)}class PE{constructor(e,n,s,r,i=!1){this.auth=e,this.resolver=s,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:s,postBody:r,tenantId:i,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:s,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return X1;case"linkViaPopup":case"linkViaRedirect":return eN;case"reauthViaPopup":case"reauthViaRedirect":return Z1;default:Cn(this.auth,"internal-error")}}resolve(e){ps(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ps(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const tN=new pa(2e3,1e4);class oi extends PE{constructor(e,n,s,r,i){super(e,n,r,i),this.provider=s,this.authWindow=null,this.pollId=null,oi.currentPopupAction&&oi.currentPopupAction.cancel(),oi.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return we(e,this.auth,"internal-error"),e}async onExecution(){ps(this.filter.length===1,"Popup operations only handle one event");const e=$f();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Fn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Fn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,oi.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Fn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,tN.get())};e()}}oi.currentPopupAction=null;const nN="pendingRedirect",fc=new Map;class sN extends PE{constructor(e,n,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,s),this.eventId=null}async execute(){let e=fc.get(this.auth._key());if(!e){try{const s=await rN(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(n){e=()=>Promise.reject(n)}fc.set(this.auth._key(),e)}return this.bypassAuthState||fc.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function rN(t,e){const n=aN(e),s=oN(t);if(!await s._isAvailable())return!1;const r=await s._get(n)==="true";return await s._remove(n),r}function iN(t,e){fc.set(t._key(),e)}function oN(t){return ns(t._redirectPersistence)}function aN(t){return hc(nN,t.config.apiKey,t.name)}async function cN(t,e,n=!1){if(dn(t.app))return Promise.reject(os(t));const s=qr(t),r=J1(s,e),o=await new sN(s,r,n).execute();return o&&!n&&(delete o.user._redirectEventId,await s._persistUserIfCurrent(o.user),await s._setRedirectUser(null,e)),o}const lN=600*1e3;class uN{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(n=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!hN(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){if(e.error&&!kE(e)){const s=e.error.code?.split("auth/")[1]||"internal-error";n.onError(Fn(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const s=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=lN&&this.cachedEventUids.clear(),this.cachedEventUids.has(ag(e))}saveEventToCache(e){this.cachedEventUids.add(ag(e)),this.lastProcessedEventTime=Date.now()}}function ag(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function kE({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function hN(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return kE(t);default:return!1}}async function fN(t,e={}){return Gn(t,"GET","/v1/projects",e)}const dN=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,pN=/^https?/;async function mN(t){if(t.config.emulator)return;const{authorizedDomains:e}=await fN(t);for(const n of e)try{if(gN(n))return}catch{}Cn(t,"unauthorized-domain")}function gN(t){const e=Sh(),{protocol:n,hostname:s}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&s===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===s}if(!pN.test(n))return!1;if(dN.test(t))return s===t;const r=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(s)}const _N=new pa(3e4,6e4);function cg(){const t=Un().___jsl;if(t?.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function yN(t){return new Promise((e,n)=>{function s(){cg(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{cg(),n(Fn(t,"network-request-failed"))},timeout:_N.get()})}if(Un().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(Un().gapi?.load)s();else{const r=i1("iframefcb");return Un()[r]=()=>{gapi.load?s():n(Fn(t,"network-request-failed"))},pE(`${r1()}?onload=${r}`).catch(i=>n(i))}}).catch(e=>{throw dc=null,e})}let dc=null;function vN(t){return dc=dc||yN(t),dc}const EN=new pa(5e3,15e3),TN="__/auth/iframe",wN="emulator/auth/iframe",bN={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},IN=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function AN(t){const e=t.config;we(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Mf(e,wN):`https://${t.config.authDomain}/${TN}`,s={apiKey:e.apiKey,appName:t.name,v:$i},r=IN.get(t.config.apiHost);r&&(s.eid=r);const i=t._getFrameworks();return i.length&&(s.fw=i.join(",")),`${n}?${da(s).slice(1)}`}async function RN(t){const e=await vN(t),n=Un().gapi;return we(n,t,"internal-error"),e.open({where:document.body,url:AN(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:bN,dontclear:!0},s=>new Promise(async(r,i)=>{await s.restyle({setHideOnLeave:!1});const o=Fn(t,"network-request-failed"),a=Un().setTimeout(()=>{i(o)},EN.get());function l(){Un().clearTimeout(a),r(s)}s.ping(l).then(l,()=>{i(o)})}))}const SN={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},CN=500,PN=600,kN="_blank",NN="http://localhost";class lg{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function DN(t,e,n,s=CN,r=PN){const i=Math.max((window.screen.availHeight-r)/2,0).toString(),o=Math.max((window.screen.availWidth-s)/2,0).toString();let a="";const l={...SN,width:s.toString(),height:r.toString(),top:i,left:o},u=$t().toLowerCase();n&&(a=aE(u)?kN:n),iE(u)&&(e=e||NN,l.scrollbars="yes");const h=Object.entries(l).reduce((p,[g,w])=>`${p}${g}=${w},`,"");if(Qk(u)&&a!=="_self")return ON(e||"",a),new lg(null);const f=window.open(e||"",a,h);we(f,t,"popup-blocked");try{f.focus()}catch{}return new lg(f)}function ON(t,e){const n=document.createElement("a");n.href=t,n.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(s)}const VN="__/auth/handler",LN="emulator/auth/handler",MN=encodeURIComponent("fac");async function ug(t,e,n,s,r,i){we(t.config.authDomain,t,"auth-domain-config-required"),we(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:s,v:$i,eventId:r};if(e instanceof _E){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",_P(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,f]of Object.entries({}))o[h]=f}if(e instanceof ga){const h=e.getScopes().filter(f=>f!=="");h.length>0&&(o.scopes=h.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const h of Object.keys(a))a[h]===void 0&&delete a[h];const l=await t._getAppCheckToken(),u=l?`#${MN}=${encodeURIComponent(l)}`:"";return`${xN(t)}?${da(a).slice(1)}${u}`}function xN({config:t}){return t.emulator?Mf(t,LN):`https://${t.authDomain}/${VN}`}const Lu="webStorageSupport";class FN{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=IE,this._completeRedirectFn=cN,this._overrideRedirectResult=iN}async _openPopup(e,n,s,r){ps(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const i=await ug(e,n,s,Sh(),r);return DN(e,i,$f())}async _openRedirect(e,n,s,r){await this._originValidation(e);const i=await ug(e,n,s,Sh(),r);return $1(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:r,promise:i}=this.eventManagers[n];return r?Promise.resolve(r):(ps(i,"If manager is not set, promise should be"),i)}const s=this.initAndGetManager(e);return this.eventManagers[n]={promise:s},s.catch(()=>{delete this.eventManagers[n]}),s}async initAndGetManager(e){const n=await RN(e),s=new uN(e);return n.register("authEvent",r=>(we(r?.authEvent,e,"invalid-auth-event"),{status:s.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=n,s}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Lu,{type:Lu},r=>{const i=r?.[0]?.[Lu];i!==void 0&&n(!!i),Cn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=mN(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return fE()||oE()||Ff()}}const UN=FN;var hg="@firebase/auth",fg="1.12.0";class BN{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(s=>{e(s?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){we(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function $N(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function HN(t){Si(new Mr("auth",(e,{options:n})=>{const s=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=s.options;we(o&&!o.includes(":"),"invalid-api-key",{appName:s.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:dE(t)},u=new t1(s,r,i,l);return h1(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,s)=>{e.getProvider("auth-internal").initialize()})),Si(new Mr("auth-internal",e=>{const n=qr(e.getProvider("auth").getImmediate());return(s=>new BN(s))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Qs(hg,fg,$N(t)),Qs(hg,fg,"esm2020")}const jN=300,qN=Hv("authIdTokenMaxAge")||jN;let dg=null;const GN=t=>async e=>{const n=e&&await e.getIdTokenResult(),s=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(s&&s>qN)return;const r=n?.token;dg!==r&&(dg=r,await fetch(t,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))};function WN(t=Kv()){const e=Vf(t,"auth");if(e.isInitialized())return e.getImmediate();const n=u1(t,{popupRedirectResolver:UN,persistence:[Y1,F1,IE]}),s=Hv("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(s,location.origin);if(location.origin===i.origin){const o=GN(i.toString());O1(n,o,()=>o(n.currentUser)),D1(n,a=>o(a))}}const r=Bv("auth");return r&&f1(n,`http://${r}`),n}function zN(){return document.getElementsByTagName("head")?.[0]??document}n1({loadJS(t){return new Promise((e,n)=>{const s=document.createElement("script");s.setAttribute("src",t),s.onload=e,s.onerror=r=>{const i=Fn("internal-error");i.customData=r,n(i)},s.type="text/javascript",s.charset="UTF-8",zN().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});HN("Browser");var pg=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var Ys,NE;(function(){var t;function e(S,T){function E(){}E.prototype=T.prototype,S.F=T.prototype,S.prototype=new E,S.prototype.constructor=S,S.D=function(C,P,R){for(var y=Array(arguments.length-2),ae=2;ae<arguments.length;ae++)y[ae-2]=arguments[ae];return T.prototype[P].apply(C,y)}}function n(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(s,n),s.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(S,T,E){E||(E=0);const C=Array(16);if(typeof T=="string")for(var P=0;P<16;++P)C[P]=T.charCodeAt(E++)|T.charCodeAt(E++)<<8|T.charCodeAt(E++)<<16|T.charCodeAt(E++)<<24;else for(P=0;P<16;++P)C[P]=T[E++]|T[E++]<<8|T[E++]<<16|T[E++]<<24;T=S.g[0],E=S.g[1],P=S.g[2];let R=S.g[3],y;y=T+(R^E&(P^R))+C[0]+3614090360&4294967295,T=E+(y<<7&4294967295|y>>>25),y=R+(P^T&(E^P))+C[1]+3905402710&4294967295,R=T+(y<<12&4294967295|y>>>20),y=P+(E^R&(T^E))+C[2]+606105819&4294967295,P=R+(y<<17&4294967295|y>>>15),y=E+(T^P&(R^T))+C[3]+3250441966&4294967295,E=P+(y<<22&4294967295|y>>>10),y=T+(R^E&(P^R))+C[4]+4118548399&4294967295,T=E+(y<<7&4294967295|y>>>25),y=R+(P^T&(E^P))+C[5]+1200080426&4294967295,R=T+(y<<12&4294967295|y>>>20),y=P+(E^R&(T^E))+C[6]+2821735955&4294967295,P=R+(y<<17&4294967295|y>>>15),y=E+(T^P&(R^T))+C[7]+4249261313&4294967295,E=P+(y<<22&4294967295|y>>>10),y=T+(R^E&(P^R))+C[8]+1770035416&4294967295,T=E+(y<<7&4294967295|y>>>25),y=R+(P^T&(E^P))+C[9]+2336552879&4294967295,R=T+(y<<12&4294967295|y>>>20),y=P+(E^R&(T^E))+C[10]+4294925233&4294967295,P=R+(y<<17&4294967295|y>>>15),y=E+(T^P&(R^T))+C[11]+2304563134&4294967295,E=P+(y<<22&4294967295|y>>>10),y=T+(R^E&(P^R))+C[12]+1804603682&4294967295,T=E+(y<<7&4294967295|y>>>25),y=R+(P^T&(E^P))+C[13]+4254626195&4294967295,R=T+(y<<12&4294967295|y>>>20),y=P+(E^R&(T^E))+C[14]+2792965006&4294967295,P=R+(y<<17&4294967295|y>>>15),y=E+(T^P&(R^T))+C[15]+1236535329&4294967295,E=P+(y<<22&4294967295|y>>>10),y=T+(P^R&(E^P))+C[1]+4129170786&4294967295,T=E+(y<<5&4294967295|y>>>27),y=R+(E^P&(T^E))+C[6]+3225465664&4294967295,R=T+(y<<9&4294967295|y>>>23),y=P+(T^E&(R^T))+C[11]+643717713&4294967295,P=R+(y<<14&4294967295|y>>>18),y=E+(R^T&(P^R))+C[0]+3921069994&4294967295,E=P+(y<<20&4294967295|y>>>12),y=T+(P^R&(E^P))+C[5]+3593408605&4294967295,T=E+(y<<5&4294967295|y>>>27),y=R+(E^P&(T^E))+C[10]+38016083&4294967295,R=T+(y<<9&4294967295|y>>>23),y=P+(T^E&(R^T))+C[15]+3634488961&4294967295,P=R+(y<<14&4294967295|y>>>18),y=E+(R^T&(P^R))+C[4]+3889429448&4294967295,E=P+(y<<20&4294967295|y>>>12),y=T+(P^R&(E^P))+C[9]+568446438&4294967295,T=E+(y<<5&4294967295|y>>>27),y=R+(E^P&(T^E))+C[14]+3275163606&4294967295,R=T+(y<<9&4294967295|y>>>23),y=P+(T^E&(R^T))+C[3]+4107603335&4294967295,P=R+(y<<14&4294967295|y>>>18),y=E+(R^T&(P^R))+C[8]+1163531501&4294967295,E=P+(y<<20&4294967295|y>>>12),y=T+(P^R&(E^P))+C[13]+2850285829&4294967295,T=E+(y<<5&4294967295|y>>>27),y=R+(E^P&(T^E))+C[2]+4243563512&4294967295,R=T+(y<<9&4294967295|y>>>23),y=P+(T^E&(R^T))+C[7]+1735328473&4294967295,P=R+(y<<14&4294967295|y>>>18),y=E+(R^T&(P^R))+C[12]+2368359562&4294967295,E=P+(y<<20&4294967295|y>>>12),y=T+(E^P^R)+C[5]+4294588738&4294967295,T=E+(y<<4&4294967295|y>>>28),y=R+(T^E^P)+C[8]+2272392833&4294967295,R=T+(y<<11&4294967295|y>>>21),y=P+(R^T^E)+C[11]+1839030562&4294967295,P=R+(y<<16&4294967295|y>>>16),y=E+(P^R^T)+C[14]+4259657740&4294967295,E=P+(y<<23&4294967295|y>>>9),y=T+(E^P^R)+C[1]+2763975236&4294967295,T=E+(y<<4&4294967295|y>>>28),y=R+(T^E^P)+C[4]+1272893353&4294967295,R=T+(y<<11&4294967295|y>>>21),y=P+(R^T^E)+C[7]+4139469664&4294967295,P=R+(y<<16&4294967295|y>>>16),y=E+(P^R^T)+C[10]+3200236656&4294967295,E=P+(y<<23&4294967295|y>>>9),y=T+(E^P^R)+C[13]+681279174&4294967295,T=E+(y<<4&4294967295|y>>>28),y=R+(T^E^P)+C[0]+3936430074&4294967295,R=T+(y<<11&4294967295|y>>>21),y=P+(R^T^E)+C[3]+3572445317&4294967295,P=R+(y<<16&4294967295|y>>>16),y=E+(P^R^T)+C[6]+76029189&4294967295,E=P+(y<<23&4294967295|y>>>9),y=T+(E^P^R)+C[9]+3654602809&4294967295,T=E+(y<<4&4294967295|y>>>28),y=R+(T^E^P)+C[12]+3873151461&4294967295,R=T+(y<<11&4294967295|y>>>21),y=P+(R^T^E)+C[15]+530742520&4294967295,P=R+(y<<16&4294967295|y>>>16),y=E+(P^R^T)+C[2]+3299628645&4294967295,E=P+(y<<23&4294967295|y>>>9),y=T+(P^(E|~R))+C[0]+4096336452&4294967295,T=E+(y<<6&4294967295|y>>>26),y=R+(E^(T|~P))+C[7]+1126891415&4294967295,R=T+(y<<10&4294967295|y>>>22),y=P+(T^(R|~E))+C[14]+2878612391&4294967295,P=R+(y<<15&4294967295|y>>>17),y=E+(R^(P|~T))+C[5]+4237533241&4294967295,E=P+(y<<21&4294967295|y>>>11),y=T+(P^(E|~R))+C[12]+1700485571&4294967295,T=E+(y<<6&4294967295|y>>>26),y=R+(E^(T|~P))+C[3]+2399980690&4294967295,R=T+(y<<10&4294967295|y>>>22),y=P+(T^(R|~E))+C[10]+4293915773&4294967295,P=R+(y<<15&4294967295|y>>>17),y=E+(R^(P|~T))+C[1]+2240044497&4294967295,E=P+(y<<21&4294967295|y>>>11),y=T+(P^(E|~R))+C[8]+1873313359&4294967295,T=E+(y<<6&4294967295|y>>>26),y=R+(E^(T|~P))+C[15]+4264355552&4294967295,R=T+(y<<10&4294967295|y>>>22),y=P+(T^(R|~E))+C[6]+2734768916&4294967295,P=R+(y<<15&4294967295|y>>>17),y=E+(R^(P|~T))+C[13]+1309151649&4294967295,E=P+(y<<21&4294967295|y>>>11),y=T+(P^(E|~R))+C[4]+4149444226&4294967295,T=E+(y<<6&4294967295|y>>>26),y=R+(E^(T|~P))+C[11]+3174756917&4294967295,R=T+(y<<10&4294967295|y>>>22),y=P+(T^(R|~E))+C[2]+718787259&4294967295,P=R+(y<<15&4294967295|y>>>17),y=E+(R^(P|~T))+C[9]+3951481745&4294967295,S.g[0]=S.g[0]+T&4294967295,S.g[1]=S.g[1]+(P+(y<<21&4294967295|y>>>11))&4294967295,S.g[2]=S.g[2]+P&4294967295,S.g[3]=S.g[3]+R&4294967295}s.prototype.v=function(S,T){T===void 0&&(T=S.length);const E=T-this.blockSize,C=this.C;let P=this.h,R=0;for(;R<T;){if(P==0)for(;R<=E;)r(this,S,R),R+=this.blockSize;if(typeof S=="string"){for(;R<T;)if(C[P++]=S.charCodeAt(R++),P==this.blockSize){r(this,C),P=0;break}}else for(;R<T;)if(C[P++]=S[R++],P==this.blockSize){r(this,C),P=0;break}}this.h=P,this.o+=T},s.prototype.A=function(){var S=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);S[0]=128;for(var T=1;T<S.length-8;++T)S[T]=0;T=this.o*8;for(var E=S.length-8;E<S.length;++E)S[E]=T&255,T/=256;for(this.v(S),S=Array(16),T=0,E=0;E<4;++E)for(let C=0;C<32;C+=8)S[T++]=this.g[E]>>>C&255;return S};function i(S,T){var E=a;return Object.prototype.hasOwnProperty.call(E,S)?E[S]:E[S]=T(S)}function o(S,T){this.h=T;const E=[];let C=!0;for(let P=S.length-1;P>=0;P--){const R=S[P]|0;C&&R==T||(E[P]=R,C=!1)}this.g=E}var a={};function l(S){return-128<=S&&S<128?i(S,function(T){return new o([T|0],T<0?-1:0)}):new o([S|0],S<0?-1:0)}function u(S){if(isNaN(S)||!isFinite(S))return f;if(S<0)return k(u(-S));const T=[];let E=1;for(let C=0;S>=E;C++)T[C]=S/E|0,E*=4294967296;return new o(T,0)}function h(S,T){if(S.length==0)throw Error("number format error: empty string");if(T=T||10,T<2||36<T)throw Error("radix out of range: "+T);if(S.charAt(0)=="-")return k(h(S.substring(1),T));if(S.indexOf("-")>=0)throw Error('number format error: interior "-" character');const E=u(Math.pow(T,8));let C=f;for(let R=0;R<S.length;R+=8){var P=Math.min(8,S.length-R);const y=parseInt(S.substring(R,R+P),T);P<8?(P=u(Math.pow(T,P)),C=C.j(P).add(u(y))):(C=C.j(E),C=C.add(u(y)))}return C}var f=l(0),p=l(1),g=l(16777216);t=o.prototype,t.m=function(){if(v(this))return-k(this).m();let S=0,T=1;for(let E=0;E<this.g.length;E++){const C=this.i(E);S+=(C>=0?C:4294967296+C)*T,T*=4294967296}return S},t.toString=function(S){if(S=S||10,S<2||36<S)throw Error("radix out of range: "+S);if(w(this))return"0";if(v(this))return"-"+k(this).toString(S);const T=u(Math.pow(S,6));var E=this;let C="";for(;;){const P=I(E,T).g;E=M(E,P.j(T));let R=((E.g.length>0?E.g[0]:E.h)>>>0).toString(S);if(E=P,w(E))return R+C;for(;R.length<6;)R="0"+R;C=R+C}},t.i=function(S){return S<0?0:S<this.g.length?this.g[S]:this.h};function w(S){if(S.h!=0)return!1;for(let T=0;T<S.g.length;T++)if(S.g[T]!=0)return!1;return!0}function v(S){return S.h==-1}t.l=function(S){return S=M(this,S),v(S)?-1:w(S)?0:1};function k(S){const T=S.g.length,E=[];for(let C=0;C<T;C++)E[C]=~S.g[C];return new o(E,~S.h).add(p)}t.abs=function(){return v(this)?k(this):this},t.add=function(S){const T=Math.max(this.g.length,S.g.length),E=[];let C=0;for(let P=0;P<=T;P++){let R=C+(this.i(P)&65535)+(S.i(P)&65535),y=(R>>>16)+(this.i(P)>>>16)+(S.i(P)>>>16);C=y>>>16,R&=65535,y&=65535,E[P]=y<<16|R}return new o(E,E[E.length-1]&-2147483648?-1:0)};function M(S,T){return S.add(k(T))}t.j=function(S){if(w(this)||w(S))return f;if(v(this))return v(S)?k(this).j(k(S)):k(k(this).j(S));if(v(S))return k(this.j(k(S)));if(this.l(g)<0&&S.l(g)<0)return u(this.m()*S.m());const T=this.g.length+S.g.length,E=[];for(var C=0;C<2*T;C++)E[C]=0;for(C=0;C<this.g.length;C++)for(let P=0;P<S.g.length;P++){const R=this.i(C)>>>16,y=this.i(C)&65535,ae=S.i(P)>>>16,fe=S.i(P)&65535;E[2*C+2*P]+=y*fe,V(E,2*C+2*P),E[2*C+2*P+1]+=R*fe,V(E,2*C+2*P+1),E[2*C+2*P+1]+=y*ae,V(E,2*C+2*P+1),E[2*C+2*P+2]+=R*ae,V(E,2*C+2*P+2)}for(S=0;S<T;S++)E[S]=E[2*S+1]<<16|E[2*S];for(S=T;S<2*T;S++)E[S]=0;return new o(E,0)};function V(S,T){for(;(S[T]&65535)!=S[T];)S[T+1]+=S[T]>>>16,S[T]&=65535,T++}function _(S,T){this.g=S,this.h=T}function I(S,T){if(w(T))throw Error("division by zero");if(w(S))return new _(f,f);if(v(S))return T=I(k(S),T),new _(k(T.g),k(T.h));if(v(T))return T=I(S,k(T)),new _(k(T.g),T.h);if(S.g.length>30){if(v(S)||v(T))throw Error("slowDivide_ only works with positive integers.");for(var E=p,C=T;C.l(S)<=0;)E=O(E),C=O(C);var P=F(E,1),R=F(C,1);for(C=F(C,2),E=F(E,2);!w(C);){var y=R.add(C);y.l(S)<=0&&(P=P.add(E),R=y),C=F(C,1),E=F(E,1)}return T=M(S,P.j(T)),new _(P,T)}for(P=f;S.l(T)>=0;){for(E=Math.max(1,Math.floor(S.m()/T.m())),C=Math.ceil(Math.log(E)/Math.LN2),C=C<=48?1:Math.pow(2,C-48),R=u(E),y=R.j(T);v(y)||y.l(S)>0;)E-=C,R=u(E),y=R.j(T);w(R)&&(R=p),P=P.add(R),S=M(S,y)}return new _(P,S)}t.B=function(S){return I(this,S).h},t.and=function(S){const T=Math.max(this.g.length,S.g.length),E=[];for(let C=0;C<T;C++)E[C]=this.i(C)&S.i(C);return new o(E,this.h&S.h)},t.or=function(S){const T=Math.max(this.g.length,S.g.length),E=[];for(let C=0;C<T;C++)E[C]=this.i(C)|S.i(C);return new o(E,this.h|S.h)},t.xor=function(S){const T=Math.max(this.g.length,S.g.length),E=[];for(let C=0;C<T;C++)E[C]=this.i(C)^S.i(C);return new o(E,this.h^S.h)};function O(S){const T=S.g.length+1,E=[];for(let C=0;C<T;C++)E[C]=S.i(C)<<1|S.i(C-1)>>>31;return new o(E,S.h)}function F(S,T){const E=T>>5;T%=32;const C=S.g.length-E,P=[];for(let R=0;R<C;R++)P[R]=T>0?S.i(R+E)>>>T|S.i(R+E+1)<<32-T:S.i(R+E);return new o(P,S.h)}s.prototype.digest=s.prototype.A,s.prototype.reset=s.prototype.u,s.prototype.update=s.prototype.v,NE=s,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=u,o.fromString=h,Ys=o}).apply(typeof pg<"u"?pg:typeof self<"u"?self:typeof window<"u"?window:{});var Ja=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var DE,To,OE,pc,Nh,VE,LE,ME;(function(){var t,e=Object.defineProperty;function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof Ja=="object"&&Ja];for(var d=0;d<c.length;++d){var m=c[d];if(m&&m.Math==Math)return m}throw Error("Cannot find global object")}var s=n(this);function r(c,d){if(d)e:{var m=s;c=c.split(".");for(var A=0;A<c.length-1;A++){var $=c[A];if(!($ in m))break e;m=m[$]}c=c[c.length-1],A=m[c],d=d(A),d!=A&&d!=null&&e(m,c,{configurable:!0,writable:!0,value:d})}}r("Symbol.dispose",function(c){return c||Symbol("Symbol.dispose")}),r("Array.prototype.values",function(c){return c||function(){return this[Symbol.iterator]()}}),r("Object.entries",function(c){return c||function(d){var m=[],A;for(A in d)Object.prototype.hasOwnProperty.call(d,A)&&m.push([A,d[A]]);return m}});var i=i||{},o=this||self;function a(c){var d=typeof c;return d=="object"&&c!=null||d=="function"}function l(c,d,m){return c.call.apply(c.bind,arguments)}function u(c,d,m){return u=l,u.apply(null,arguments)}function h(c,d){var m=Array.prototype.slice.call(arguments,1);return function(){var A=m.slice();return A.push.apply(A,arguments),c.apply(this,A)}}function f(c,d){function m(){}m.prototype=d.prototype,c.Z=d.prototype,c.prototype=new m,c.prototype.constructor=c,c.Ob=function(A,$,q){for(var oe=Array(arguments.length-2),ke=2;ke<arguments.length;ke++)oe[ke-2]=arguments[ke];return d.prototype[$].apply(A,oe)}}var p=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?c=>c&&AsyncContext.Snapshot.wrap(c):c=>c;function g(c){const d=c.length;if(d>0){const m=Array(d);for(let A=0;A<d;A++)m[A]=c[A];return m}return[]}function w(c,d){for(let A=1;A<arguments.length;A++){const $=arguments[A];var m=typeof $;if(m=m!="object"?m:$?Array.isArray($)?"array":m:"null",m=="array"||m=="object"&&typeof $.length=="number"){m=c.length||0;const q=$.length||0;c.length=m+q;for(let oe=0;oe<q;oe++)c[m+oe]=$[oe]}else c.push($)}}class v{constructor(d,m){this.i=d,this.j=m,this.h=0,this.g=null}get(){let d;return this.h>0?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function k(c){o.setTimeout(()=>{throw c},0)}function M(){var c=S;let d=null;return c.g&&(d=c.g,c.g=c.g.next,c.g||(c.h=null),d.next=null),d}class V{constructor(){this.h=this.g=null}add(d,m){const A=_.get();A.set(d,m),this.h?this.h.next=A:this.g=A,this.h=A}}var _=new v(()=>new I,c=>c.reset());class I{constructor(){this.next=this.g=this.h=null}set(d,m){this.h=d,this.g=m,this.next=null}reset(){this.next=this.g=this.h=null}}let O,F=!1,S=new V,T=()=>{const c=Promise.resolve(void 0);O=()=>{c.then(E)}};function E(){for(var c;c=M();){try{c.h.call(c.g)}catch(m){k(m)}var d=_;d.j(c),d.h<100&&(d.h++,c.next=d.g,d.g=c)}F=!1}function C(){this.u=this.u,this.C=this.C}C.prototype.u=!1,C.prototype.dispose=function(){this.u||(this.u=!0,this.N())},C.prototype[Symbol.dispose]=function(){this.dispose()},C.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function P(c,d){this.type=c,this.g=this.target=d,this.defaultPrevented=!1}P.prototype.h=function(){this.defaultPrevented=!0};var R=(function(){if(!o.addEventListener||!Object.defineProperty)return!1;var c=!1,d=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const m=()=>{};o.addEventListener("test",m,d),o.removeEventListener("test",m,d)}catch{}return c})();function y(c){return/^[\s\xa0]*$/.test(c)}function ae(c,d){P.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c&&this.init(c,d)}f(ae,P),ae.prototype.init=function(c,d){const m=this.type=c.type,A=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;this.target=c.target||c.srcElement,this.g=d,d=c.relatedTarget,d||(m=="mouseover"?d=c.fromElement:m=="mouseout"&&(d=c.toElement)),this.relatedTarget=d,A?(this.clientX=A.clientX!==void 0?A.clientX:A.pageX,this.clientY=A.clientY!==void 0?A.clientY:A.pageY,this.screenX=A.screenX||0,this.screenY=A.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=c.pointerType,this.state=c.state,this.i=c,c.defaultPrevented&&ae.Z.h.call(this)},ae.prototype.h=function(){ae.Z.h.call(this);const c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var fe="closure_listenable_"+(Math.random()*1e6|0),ie=0;function pe(c,d,m,A,$){this.listener=c,this.proxy=null,this.src=d,this.type=m,this.capture=!!A,this.ha=$,this.key=++ie,this.da=this.fa=!1}function se(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function Te(c,d,m){for(const A in c)d.call(m,c[A],A,c)}function He(c,d){for(const m in c)d.call(void 0,c[m],m,c)}function Pe(c){const d={};for(const m in c)d[m]=c[m];return d}const De="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function te(c,d){let m,A;for(let $=1;$<arguments.length;$++){A=arguments[$];for(m in A)c[m]=A[m];for(let q=0;q<De.length;q++)m=De[q],Object.prototype.hasOwnProperty.call(A,m)&&(c[m]=A[m])}}function G(c){this.src=c,this.g={},this.h=0}G.prototype.add=function(c,d,m,A,$){const q=c.toString();c=this.g[q],c||(c=this.g[q]=[],this.h++);const oe=Q(c,d,A,$);return oe>-1?(d=c[oe],m||(d.fa=!1)):(d=new pe(d,this.src,q,!!A,$),d.fa=m,c.push(d)),d};function ee(c,d){const m=d.type;if(m in c.g){var A=c.g[m],$=Array.prototype.indexOf.call(A,d,void 0),q;(q=$>=0)&&Array.prototype.splice.call(A,$,1),q&&(se(d),c.g[m].length==0&&(delete c.g[m],c.h--))}}function Q(c,d,m,A){for(let $=0;$<c.length;++$){const q=c[$];if(!q.da&&q.listener==d&&q.capture==!!m&&q.ha==A)return $}return-1}var D="closure_lm_"+(Math.random()*1e6|0),x={};function B(c,d,m,A,$){if(Array.isArray(d)){for(let q=0;q<d.length;q++)B(c,d[q],m,A,$);return null}return m=X(m),c&&c[fe]?c.J(d,m,a(A)?!!A.capture:!1,$):z(c,d,m,!1,A,$)}function z(c,d,m,A,$,q){if(!d)throw Error("Invalid event type");const oe=a($)?!!$.capture:!!$;let ke=U(c);if(ke||(c[D]=ke=new G(c)),m=ke.add(d,m,A,oe,q),m.proxy)return m;if(A=re(),m.proxy=A,A.src=c,A.listener=m,c.addEventListener)R||($=oe),$===void 0&&($=!1),c.addEventListener(d.toString(),A,$);else if(c.attachEvent)c.attachEvent(N(d.toString()),A);else if(c.addListener&&c.removeListener)c.addListener(A);else throw Error("addEventListener and attachEvent are unavailable.");return m}function re(){function c(m){return d.call(c.src,c.listener,m)}const d=L;return c}function ue(c,d,m,A,$){if(Array.isArray(d))for(var q=0;q<d.length;q++)ue(c,d[q],m,A,$);else A=a(A)?!!A.capture:!!A,m=X(m),c&&c[fe]?(c=c.i,q=String(d).toString(),q in c.g&&(d=c.g[q],m=Q(d,m,A,$),m>-1&&(se(d[m]),Array.prototype.splice.call(d,m,1),d.length==0&&(delete c.g[q],c.h--)))):c&&(c=U(c))&&(d=c.g[d.toString()],c=-1,d&&(c=Q(d,m,A,$)),(m=c>-1?d[c]:null)&&b(m))}function b(c){if(typeof c!="number"&&c&&!c.da){var d=c.src;if(d&&d[fe])ee(d.i,c);else{var m=c.type,A=c.proxy;d.removeEventListener?d.removeEventListener(m,A,c.capture):d.detachEvent?d.detachEvent(N(m),A):d.addListener&&d.removeListener&&d.removeListener(A),(m=U(d))?(ee(m,c),m.h==0&&(m.src=null,d[D]=null)):se(c)}}}function N(c){return c in x?x[c]:x[c]="on"+c}function L(c,d){if(c.da)c=!0;else{d=new ae(d,this);const m=c.listener,A=c.ha||c.src;c.fa&&b(c),c=m.call(A,d)}return c}function U(c){return c=c[D],c instanceof G?c:null}var W="__closure_events_fn_"+(Math.random()*1e9>>>0);function X(c){return typeof c=="function"?c:(c[W]||(c[W]=function(d){return c.handleEvent(d)}),c[W])}function ne(){C.call(this),this.i=new G(this),this.M=this,this.G=null}f(ne,C),ne.prototype[fe]=!0,ne.prototype.removeEventListener=function(c,d,m,A){ue(this,c,d,m,A)};function Y(c,d){var m,A=c.G;if(A)for(m=[];A;A=A.G)m.push(A);if(c=c.M,A=d.type||d,typeof d=="string")d=new P(d,c);else if(d instanceof P)d.target=d.target||c;else{var $=d;d=new P(A,c),te(d,$)}$=!0;let q,oe;if(m)for(oe=m.length-1;oe>=0;oe--)q=d.g=m[oe],$=H(q,A,!0,d)&&$;if(q=d.g=c,$=H(q,A,!0,d)&&$,$=H(q,A,!1,d)&&$,m)for(oe=0;oe<m.length;oe++)q=d.g=m[oe],$=H(q,A,!1,d)&&$}ne.prototype.N=function(){if(ne.Z.N.call(this),this.i){var c=this.i;for(const d in c.g){const m=c.g[d];for(let A=0;A<m.length;A++)se(m[A]);delete c.g[d],c.h--}}this.G=null},ne.prototype.J=function(c,d,m,A){return this.i.add(String(c),d,!1,m,A)},ne.prototype.K=function(c,d,m,A){return this.i.add(String(c),d,!0,m,A)};function H(c,d,m,A){if(d=c.i.g[String(d)],!d)return!0;d=d.concat();let $=!0;for(let q=0;q<d.length;++q){const oe=d[q];if(oe&&!oe.da&&oe.capture==m){const ke=oe.listener,wt=oe.ha||oe.src;oe.fa&&ee(c.i,oe),$=ke.call(wt,A)!==!1&&$}}return $&&!A.defaultPrevented}function j(c,d){if(typeof c!="function")if(c&&typeof c.handleEvent=="function")c=u(c.handleEvent,c);else throw Error("Invalid listener argument");return Number(d)>2147483647?-1:o.setTimeout(c,d||0)}function _e(c){c.g=j(()=>{c.g=null,c.i&&(c.i=!1,_e(c))},c.l);const d=c.h;c.h=null,c.m.apply(null,d)}class he extends C{constructor(d,m){super(),this.m=d,this.l=m,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:_e(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function me(c){C.call(this),this.h=c,this.g={}}f(me,C);var Ae=[];function Ne(c){Te(c.g,function(d,m){this.g.hasOwnProperty(m)&&b(d)},c),c.g={}}me.prototype.N=function(){me.Z.N.call(this),Ne(this)},me.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var je=o.JSON.stringify,Ue=o.JSON.parse,Lt=class{stringify(c){return o.JSON.stringify(c,void 0)}parse(c){return o.JSON.parse(c,void 0)}};function Et(){}function Kt(){}var Tt={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Wn(){P.call(this,"d")}f(Wn,P);function zr(){P.call(this,"c")}f(zr,P);var ht={},tn=null;function fr(){return tn=tn||new ne}ht.Ia="serverreachability";function Yi(c){P.call(this,ht.Ia,c)}f(Yi,P);function Ji(c){const d=fr();Y(d,new Yi(d))}ht.STAT_EVENT="statevent";function wd(c,d){P.call(this,ht.STAT_EVENT,c),this.stat=d}f(wd,P);function Ht(c){const d=fr();Y(d,new wd(d,c))}ht.Ja="timingevent";function bd(c,d){P.call(this,ht.Ja,c),this.size=d}f(bd,P);function Xi(c,d){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){c()},d)}function Zi(){this.g=!0}Zi.prototype.ua=function(){this.g=!1};function Tw(c,d,m,A,$,q){c.info(function(){if(c.g)if(q){var oe="",ke=q.split("&");for(let Ye=0;Ye<ke.length;Ye++){var wt=ke[Ye].split("=");if(wt.length>1){const At=wt[0];wt=wt[1];const Nn=At.split("_");oe=Nn.length>=2&&Nn[1]=="type"?oe+(At+"="+wt+"&"):oe+(At+"=redacted&")}}}else oe=null;else oe=q;return"XMLHTTP REQ ("+A+") [attempt "+$+"]: "+d+`
`+m+`
`+oe})}function ww(c,d,m,A,$,q,oe){c.info(function(){return"XMLHTTP RESP ("+A+") [ attempt "+$+"]: "+d+`
`+m+`
`+q+" "+oe})}function Kr(c,d,m,A){c.info(function(){return"XMLHTTP TEXT ("+d+"): "+Iw(c,m)+(A?" "+A:"")})}function bw(c,d){c.info(function(){return"TIMEOUT: "+d})}Zi.prototype.info=function(){};function Iw(c,d){if(!c.g)return d;if(!d)return null;try{const q=JSON.parse(d);if(q){for(c=0;c<q.length;c++)if(Array.isArray(q[c])){var m=q[c];if(!(m.length<2)){var A=m[1];if(Array.isArray(A)&&!(A.length<1)){var $=A[0];if($!="noop"&&$!="stop"&&$!="close")for(let oe=1;oe<A.length;oe++)A[oe]=""}}}}return je(q)}catch{return d}}var Ca={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Id={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Ad;function Wl(){}f(Wl,Et),Wl.prototype.g=function(){return new XMLHttpRequest},Ad=new Wl;function eo(c){return encodeURIComponent(String(c))}function Aw(c){var d=1;c=c.split(":");const m=[];for(;d>0&&c.length;)m.push(c.shift()),d--;return c.length&&m.push(c.join(":")),m}function Es(c,d,m,A){this.j=c,this.i=d,this.l=m,this.S=A||1,this.V=new me(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Rd}function Rd(){this.i=null,this.g="",this.h=!1}var Sd={},zl={};function Kl(c,d,m){c.M=1,c.A=ka(kn(d)),c.u=m,c.R=!0,Cd(c,null)}function Cd(c,d){c.F=Date.now(),Pa(c),c.B=kn(c.A);var m=c.B,A=c.S;Array.isArray(A)||(A=[String(A)]),$d(m.i,"t",A),c.C=0,m=c.j.L,c.h=new Rd,c.g=ip(c.j,m?d:null,!c.u),c.P>0&&(c.O=new he(u(c.Y,c,c.g),c.P)),d=c.V,m=c.g,A=c.ba;var $="readystatechange";Array.isArray($)||($&&(Ae[0]=$.toString()),$=Ae);for(let q=0;q<$.length;q++){const oe=B(m,$[q],A||d.handleEvent,!1,d.h||d);if(!oe)break;d.g[oe.key]=oe}d=c.J?Pe(c.J):{},c.u?(c.v||(c.v="POST"),d["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.B,c.v,c.u,d)):(c.v="GET",c.g.ea(c.B,c.v,null,d)),Ji(),Tw(c.i,c.v,c.B,c.l,c.S,c.u)}Es.prototype.ba=function(c){c=c.target;const d=this.O;d&&bs(c)==3?d.j():this.Y(c)},Es.prototype.Y=function(c){try{if(c==this.g)e:{const ke=bs(this.g),wt=this.g.ya(),Ye=this.g.ca();if(!(ke<3)&&(ke!=3||this.g&&(this.h.h||this.g.la()||Kd(this.g)))){this.K||ke!=4||wt==7||(wt==8||Ye<=0?Ji(3):Ji(2)),Ql(this);var d=this.g.ca();this.X=d;var m=Rw(this);if(this.o=d==200,ww(this.i,this.v,this.B,this.l,this.S,ke,d),this.o){if(this.U&&!this.L){t:{if(this.g){var A,$=this.g;if((A=$.g?$.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!y(A)){var q=A;break t}}q=null}if(c=q)Kr(this.i,this.l,c,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Yl(this,c);else{this.o=!1,this.m=3,Ht(12),dr(this),to(this);break e}}if(this.R){c=!0;let At;for(;!this.K&&this.C<m.length;)if(At=Sw(this,m),At==zl){ke==4&&(this.m=4,Ht(14),c=!1),Kr(this.i,this.l,null,"[Incomplete Response]");break}else if(At==Sd){this.m=4,Ht(15),Kr(this.i,this.l,m,"[Invalid Chunk]"),c=!1;break}else Kr(this.i,this.l,At,null),Yl(this,At);if(Pd(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ke!=4||m.length!=0||this.h.h||(this.m=1,Ht(16),c=!1),this.o=this.o&&c,!c)Kr(this.i,this.l,m,"[Invalid Chunked Response]"),dr(this),to(this);else if(m.length>0&&!this.W){this.W=!0;var oe=this.j;oe.g==this&&oe.aa&&!oe.P&&(oe.j.info("Great, no buffering proxy detected. Bytes received: "+m.length),ru(oe),oe.P=!0,Ht(11))}}else Kr(this.i,this.l,m,null),Yl(this,m);ke==4&&dr(this),this.o&&!this.K&&(ke==4?tp(this.j,this):(this.o=!1,Pa(this)))}else $w(this.g),d==400&&m.indexOf("Unknown SID")>0?(this.m=3,Ht(12)):(this.m=0,Ht(13)),dr(this),to(this)}}}catch{}};function Rw(c){if(!Pd(c))return c.g.la();const d=Kd(c.g);if(d==="")return"";let m="";const A=d.length,$=bs(c.g)==4;if(!c.h.i){if(typeof TextDecoder>"u")return dr(c),to(c),"";c.h.i=new o.TextDecoder}for(let q=0;q<A;q++)c.h.h=!0,m+=c.h.i.decode(d[q],{stream:!($&&q==A-1)});return d.length=0,c.h.g+=m,c.C=0,c.h.g}function Pd(c){return c.g?c.v=="GET"&&c.M!=2&&c.j.Aa:!1}function Sw(c,d){var m=c.C,A=d.indexOf(`
`,m);return A==-1?zl:(m=Number(d.substring(m,A)),isNaN(m)?Sd:(A+=1,A+m>d.length?zl:(d=d.slice(A,A+m),c.C=A+m,d)))}Es.prototype.cancel=function(){this.K=!0,dr(this)};function Pa(c){c.T=Date.now()+c.H,kd(c,c.H)}function kd(c,d){if(c.D!=null)throw Error("WatchDog timer not null");c.D=Xi(u(c.aa,c),d)}function Ql(c){c.D&&(o.clearTimeout(c.D),c.D=null)}Es.prototype.aa=function(){this.D=null;const c=Date.now();c-this.T>=0?(bw(this.i,this.B),this.M!=2&&(Ji(),Ht(17)),dr(this),this.m=2,to(this)):kd(this,this.T-c)};function to(c){c.j.I==0||c.K||tp(c.j,c)}function dr(c){Ql(c);var d=c.O;d&&typeof d.dispose=="function"&&d.dispose(),c.O=null,Ne(c.V),c.g&&(d=c.g,c.g=null,d.abort(),d.dispose())}function Yl(c,d){try{var m=c.j;if(m.I!=0&&(m.g==c||Jl(m.h,c))){if(!c.L&&Jl(m.h,c)&&m.I==3){try{var A=m.Ba.g.parse(d)}catch{A=null}if(Array.isArray(A)&&A.length==3){var $=A;if($[0]==0){e:if(!m.v){if(m.g)if(m.g.F+3e3<c.F)La(m),Oa(m);else break e;su(m),Ht(18)}}else m.xa=$[1],0<m.xa-m.K&&$[2]<37500&&m.F&&m.A==0&&!m.C&&(m.C=Xi(u(m.Va,m),6e3));Od(m.h)<=1&&m.ta&&(m.ta=void 0)}else mr(m,11)}else if((c.L||m.g==c)&&La(m),!y(d))for($=m.Ba.g.parse(d),d=0;d<$.length;d++){let Ye=$[d];const At=Ye[0];if(!(At<=m.K))if(m.K=At,Ye=Ye[1],m.I==2)if(Ye[0]=="c"){m.M=Ye[1],m.ba=Ye[2];const Nn=Ye[3];Nn!=null&&(m.ka=Nn,m.j.info("VER="+m.ka));const gr=Ye[4];gr!=null&&(m.za=gr,m.j.info("SVER="+m.za));const Is=Ye[5];Is!=null&&typeof Is=="number"&&Is>0&&(A=1.5*Is,m.O=A,m.j.info("backChannelRequestTimeoutMs_="+A)),A=m;const As=c.g;if(As){const xa=As.g?As.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(xa){var q=A.h;q.g||xa.indexOf("spdy")==-1&&xa.indexOf("quic")==-1&&xa.indexOf("h2")==-1||(q.j=q.l,q.g=new Set,q.h&&(Xl(q,q.h),q.h=null))}if(A.G){const iu=As.g?As.g.getResponseHeader("X-HTTP-Session-Id"):null;iu&&(A.wa=iu,tt(A.J,A.G,iu))}}m.I=3,m.l&&m.l.ra(),m.aa&&(m.T=Date.now()-c.F,m.j.info("Handshake RTT: "+m.T+"ms")),A=m;var oe=c;if(A.na=rp(A,A.L?A.ba:null,A.W),oe.L){Vd(A.h,oe);var ke=oe,wt=A.O;wt&&(ke.H=wt),ke.D&&(Ql(ke),Pa(ke)),A.g=oe}else Zd(A);m.i.length>0&&Va(m)}else Ye[0]!="stop"&&Ye[0]!="close"||mr(m,7);else m.I==3&&(Ye[0]=="stop"||Ye[0]=="close"?Ye[0]=="stop"?mr(m,7):nu(m):Ye[0]!="noop"&&m.l&&m.l.qa(Ye),m.A=0)}}Ji(4)}catch{}}var Cw=class{constructor(c,d){this.g=c,this.map=d}};function Nd(c){this.l=c||10,o.PerformanceNavigationTiming?(c=o.performance.getEntriesByType("navigation"),c=c.length>0&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Dd(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function Od(c){return c.h?1:c.g?c.g.size:0}function Jl(c,d){return c.h?c.h==d:c.g?c.g.has(d):!1}function Xl(c,d){c.g?c.g.add(d):c.h=d}function Vd(c,d){c.h&&c.h==d?c.h=null:c.g&&c.g.has(d)&&c.g.delete(d)}Nd.prototype.cancel=function(){if(this.i=Ld(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function Ld(c){if(c.h!=null)return c.i.concat(c.h.G);if(c.g!=null&&c.g.size!==0){let d=c.i;for(const m of c.g.values())d=d.concat(m.G);return d}return g(c.i)}var Md=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Pw(c,d){if(c){c=c.split("&");for(let m=0;m<c.length;m++){const A=c[m].indexOf("=");let $,q=null;A>=0?($=c[m].substring(0,A),q=c[m].substring(A+1)):$=c[m],d($,q?decodeURIComponent(q.replace(/\+/g," ")):"")}}}function Ts(c){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let d;c instanceof Ts?(this.l=c.l,no(this,c.j),this.o=c.o,this.g=c.g,so(this,c.u),this.h=c.h,Zl(this,Hd(c.i)),this.m=c.m):c&&(d=String(c).match(Md))?(this.l=!1,no(this,d[1]||"",!0),this.o=ro(d[2]||""),this.g=ro(d[3]||"",!0),so(this,d[4]),this.h=ro(d[5]||"",!0),Zl(this,d[6]||"",!0),this.m=ro(d[7]||"")):(this.l=!1,this.i=new oo(null,this.l))}Ts.prototype.toString=function(){const c=[];var d=this.j;d&&c.push(io(d,xd,!0),":");var m=this.g;return(m||d=="file")&&(c.push("//"),(d=this.o)&&c.push(io(d,xd,!0),"@"),c.push(eo(m).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m=this.u,m!=null&&c.push(":",String(m))),(m=this.h)&&(this.g&&m.charAt(0)!="/"&&c.push("/"),c.push(io(m,m.charAt(0)=="/"?Dw:Nw,!0))),(m=this.i.toString())&&c.push("?",m),(m=this.m)&&c.push("#",io(m,Vw)),c.join("")},Ts.prototype.resolve=function(c){const d=kn(this);let m=!!c.j;m?no(d,c.j):m=!!c.o,m?d.o=c.o:m=!!c.g,m?d.g=c.g:m=c.u!=null;var A=c.h;if(m)so(d,c.u);else if(m=!!c.h){if(A.charAt(0)!="/")if(this.g&&!this.h)A="/"+A;else{var $=d.h.lastIndexOf("/");$!=-1&&(A=d.h.slice(0,$+1)+A)}if($=A,$==".."||$==".")A="";else if($.indexOf("./")!=-1||$.indexOf("/.")!=-1){A=$.lastIndexOf("/",0)==0,$=$.split("/");const q=[];for(let oe=0;oe<$.length;){const ke=$[oe++];ke=="."?A&&oe==$.length&&q.push(""):ke==".."?((q.length>1||q.length==1&&q[0]!="")&&q.pop(),A&&oe==$.length&&q.push("")):(q.push(ke),A=!0)}A=q.join("/")}else A=$}return m?d.h=A:m=c.i.toString()!=="",m?Zl(d,Hd(c.i)):m=!!c.m,m&&(d.m=c.m),d};function kn(c){return new Ts(c)}function no(c,d,m){c.j=m?ro(d,!0):d,c.j&&(c.j=c.j.replace(/:$/,""))}function so(c,d){if(d){if(d=Number(d),isNaN(d)||d<0)throw Error("Bad port number "+d);c.u=d}else c.u=null}function Zl(c,d,m){d instanceof oo?(c.i=d,Lw(c.i,c.l)):(m||(d=io(d,Ow)),c.i=new oo(d,c.l))}function tt(c,d,m){c.i.set(d,m)}function ka(c){return tt(c,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),c}function ro(c,d){return c?d?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function io(c,d,m){return typeof c=="string"?(c=encodeURI(c).replace(d,kw),m&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function kw(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var xd=/[#\/\?@]/g,Nw=/[#\?:]/g,Dw=/[#\?]/g,Ow=/[#\?@]/g,Vw=/#/g;function oo(c,d){this.h=this.g=null,this.i=c||null,this.j=!!d}function pr(c){c.g||(c.g=new Map,c.h=0,c.i&&Pw(c.i,function(d,m){c.add(decodeURIComponent(d.replace(/\+/g," ")),m)}))}t=oo.prototype,t.add=function(c,d){pr(this),this.i=null,c=Qr(this,c);let m=this.g.get(c);return m||this.g.set(c,m=[]),m.push(d),this.h+=1,this};function Fd(c,d){pr(c),d=Qr(c,d),c.g.has(d)&&(c.i=null,c.h-=c.g.get(d).length,c.g.delete(d))}function Ud(c,d){return pr(c),d=Qr(c,d),c.g.has(d)}t.forEach=function(c,d){pr(this),this.g.forEach(function(m,A){m.forEach(function($){c.call(d,$,A,this)},this)},this)};function Bd(c,d){pr(c);let m=[];if(typeof d=="string")Ud(c,d)&&(m=m.concat(c.g.get(Qr(c,d))));else for(c=Array.from(c.g.values()),d=0;d<c.length;d++)m=m.concat(c[d]);return m}t.set=function(c,d){return pr(this),this.i=null,c=Qr(this,c),Ud(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[d]),this.h+=1,this},t.get=function(c,d){return c?(c=Bd(this,c),c.length>0?String(c[0]):d):d};function $d(c,d,m){Fd(c,d),m.length>0&&(c.i=null,c.g.set(Qr(c,d),g(m)),c.h+=m.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],d=Array.from(this.g.keys());for(let A=0;A<d.length;A++){var m=d[A];const $=eo(m);m=Bd(this,m);for(let q=0;q<m.length;q++){let oe=$;m[q]!==""&&(oe+="="+eo(m[q])),c.push(oe)}}return this.i=c.join("&")};function Hd(c){const d=new oo;return d.i=c.i,c.g&&(d.g=new Map(c.g),d.h=c.h),d}function Qr(c,d){return d=String(d),c.j&&(d=d.toLowerCase()),d}function Lw(c,d){d&&!c.j&&(pr(c),c.i=null,c.g.forEach(function(m,A){const $=A.toLowerCase();A!=$&&(Fd(this,A),$d(this,$,m))},c)),c.j=d}function Mw(c,d){const m=new Zi;if(o.Image){const A=new Image;A.onload=h(ws,m,"TestLoadImage: loaded",!0,d,A),A.onerror=h(ws,m,"TestLoadImage: error",!1,d,A),A.onabort=h(ws,m,"TestLoadImage: abort",!1,d,A),A.ontimeout=h(ws,m,"TestLoadImage: timeout",!1,d,A),o.setTimeout(function(){A.ontimeout&&A.ontimeout()},1e4),A.src=c}else d(!1)}function xw(c,d){const m=new Zi,A=new AbortController,$=setTimeout(()=>{A.abort(),ws(m,"TestPingServer: timeout",!1,d)},1e4);fetch(c,{signal:A.signal}).then(q=>{clearTimeout($),q.ok?ws(m,"TestPingServer: ok",!0,d):ws(m,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout($),ws(m,"TestPingServer: error",!1,d)})}function ws(c,d,m,A,$){try{$&&($.onload=null,$.onerror=null,$.onabort=null,$.ontimeout=null),A(m)}catch{}}function Fw(){this.g=new Lt}function eu(c){this.i=c.Sb||null,this.h=c.ab||!1}f(eu,Et),eu.prototype.g=function(){return new Na(this.i,this.h)};function Na(c,d){ne.call(this),this.H=c,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}f(Na,ne),t=Na.prototype,t.open=function(c,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=c,this.D=d,this.readyState=1,co(this)},t.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const d={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};c&&(d.body=c),(this.H||o).fetch(new Request(this.D,d)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,ao(this)),this.readyState=0},t.Pa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,co(this)),this.g&&(this.readyState=3,co(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;jd(this)}else c.text().then(this.Oa.bind(this),this.ga.bind(this))};function jd(c){c.j.read().then(c.Ma.bind(c)).catch(c.ga.bind(c))}t.Ma=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var d=c.value?c.value:new Uint8Array(0);(d=this.B.decode(d,{stream:!c.done}))&&(this.response=this.responseText+=d)}c.done?ao(this):co(this),this.readyState==3&&jd(this)}},t.Oa=function(c){this.g&&(this.response=this.responseText=c,ao(this))},t.Na=function(c){this.g&&(this.response=c,ao(this))},t.ga=function(){this.g&&ao(this)};function ao(c){c.readyState=4,c.l=null,c.j=null,c.B=null,co(c)}t.setRequestHeader=function(c,d){this.A.append(c,d)},t.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],d=this.h.entries();for(var m=d.next();!m.done;)m=m.value,c.push(m[0]+": "+m[1]),m=d.next();return c.join(`\r
`)};function co(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(Na.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function qd(c){let d="";return Te(c,function(m,A){d+=A,d+=":",d+=m,d+=`\r
`}),d}function tu(c,d,m){e:{for(A in m){var A=!1;break e}A=!0}A||(m=qd(m),typeof c=="string"?m!=null&&eo(m):tt(c,d,m))}function rt(c){ne.call(this),this.headers=new Map,this.L=c||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}f(rt,ne);var Uw=/^https?$/i,Bw=["POST","PUT"];t=rt.prototype,t.Fa=function(c){this.H=c},t.ea=function(c,d,m,A){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);d=d?d.toUpperCase():"GET",this.D=c,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Ad.g(),this.g.onreadystatechange=p(u(this.Ca,this));try{this.B=!0,this.g.open(d,String(c),!0),this.B=!1}catch(q){Gd(this,q);return}if(c=m||"",m=new Map(this.headers),A)if(Object.getPrototypeOf(A)===Object.prototype)for(var $ in A)m.set($,A[$]);else if(typeof A.keys=="function"&&typeof A.get=="function")for(const q of A.keys())m.set(q,A.get(q));else throw Error("Unknown input type for opt_headers: "+String(A));A=Array.from(m.keys()).find(q=>q.toLowerCase()=="content-type"),$=o.FormData&&c instanceof o.FormData,!(Array.prototype.indexOf.call(Bw,d,void 0)>=0)||A||$||m.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[q,oe]of m)this.g.setRequestHeader(q,oe);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(c),this.v=!1}catch(q){Gd(this,q)}};function Gd(c,d){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=d,c.o=5,Wd(c),Da(c)}function Wd(c){c.A||(c.A=!0,Y(c,"complete"),Y(c,"error"))}t.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=c||7,Y(this,"complete"),Y(this,"abort"),Da(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Da(this,!0)),rt.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?zd(this):this.Xa())},t.Xa=function(){zd(this)};function zd(c){if(c.h&&typeof i<"u"){if(c.v&&bs(c)==4)setTimeout(c.Ca.bind(c),0);else if(Y(c,"readystatechange"),bs(c)==4){c.h=!1;try{const q=c.ca();e:switch(q){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var m;if(!(m=d)){var A;if(A=q===0){let oe=String(c.D).match(Md)[1]||null;!oe&&o.self&&o.self.location&&(oe=o.self.location.protocol.slice(0,-1)),A=!Uw.test(oe?oe.toLowerCase():"")}m=A}if(m)Y(c,"complete"),Y(c,"success");else{c.o=6;try{var $=bs(c)>2?c.g.statusText:""}catch{$=""}c.l=$+" ["+c.ca()+"]",Wd(c)}}finally{Da(c)}}}}function Da(c,d){if(c.g){c.m&&(clearTimeout(c.m),c.m=null);const m=c.g;c.g=null,d||Y(c,"ready");try{m.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function bs(c){return c.g?c.g.readyState:0}t.ca=function(){try{return bs(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(c){if(this.g){var d=this.g.responseText;return c&&d.indexOf(c)==0&&(d=d.substring(c.length)),Ue(d)}};function Kd(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.F){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function $w(c){const d={};c=(c.g&&bs(c)>=2&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let A=0;A<c.length;A++){if(y(c[A]))continue;var m=Aw(c[A]);const $=m[0];if(m=m[1],typeof m!="string")continue;m=m.trim();const q=d[$]||[];d[$]=q,q.push(m)}He(d,function(A){return A.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function lo(c,d,m){return m&&m.internalChannelParams&&m.internalChannelParams[c]||d}function Qd(c){this.za=0,this.i=[],this.j=new Zi,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=lo("failFast",!1,c),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=lo("baseRetryDelayMs",5e3,c),this.Za=lo("retryDelaySeedMs",1e4,c),this.Ta=lo("forwardChannelMaxRetries",2,c),this.va=lo("forwardChannelRequestTimeoutMs",2e4,c),this.ma=c&&c.xmlHttpFactory||void 0,this.Ua=c&&c.Rb||void 0,this.Aa=c&&c.useFetchStreams||!1,this.O=void 0,this.L=c&&c.supportsCrossDomainXhr||!1,this.M="",this.h=new Nd(c&&c.concurrentRequestLimit),this.Ba=new Fw,this.S=c&&c.fastHandshake||!1,this.R=c&&c.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=c&&c.Pb||!1,c&&c.ua&&this.j.ua(),c&&c.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&c&&c.detectBufferingProxy||!1,this.ia=void 0,c&&c.longPollingTimeout&&c.longPollingTimeout>0&&(this.ia=c.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=Qd.prototype,t.ka=8,t.I=1,t.connect=function(c,d,m,A){Ht(0),this.W=c,this.H=d||{},m&&A!==void 0&&(this.H.OSID=m,this.H.OAID=A),this.F=this.X,this.J=rp(this,null,this.W),Va(this)};function nu(c){if(Yd(c),c.I==3){var d=c.V++,m=kn(c.J);if(tt(m,"SID",c.M),tt(m,"RID",d),tt(m,"TYPE","terminate"),uo(c,m),d=new Es(c,c.j,d),d.M=2,d.A=ka(kn(m)),m=!1,o.navigator&&o.navigator.sendBeacon)try{m=o.navigator.sendBeacon(d.A.toString(),"")}catch{}!m&&o.Image&&(new Image().src=d.A,m=!0),m||(d.g=ip(d.j,null),d.g.ea(d.A)),d.F=Date.now(),Pa(d)}sp(c)}function Oa(c){c.g&&(ru(c),c.g.cancel(),c.g=null)}function Yd(c){Oa(c),c.v&&(o.clearTimeout(c.v),c.v=null),La(c),c.h.cancel(),c.m&&(typeof c.m=="number"&&o.clearTimeout(c.m),c.m=null)}function Va(c){if(!Dd(c.h)&&!c.m){c.m=!0;var d=c.Ea;O||T(),F||(O(),F=!0),S.add(d,c),c.D=0}}function Hw(c,d){return Od(c.h)>=c.h.j-(c.m?1:0)?!1:c.m?(c.i=d.G.concat(c.i),!0):c.I==1||c.I==2||c.D>=(c.Sa?0:c.Ta)?!1:(c.m=Xi(u(c.Ea,c,d),np(c,c.D)),c.D++,!0)}t.Ea=function(c){if(this.m)if(this.m=null,this.I==1){if(!c){this.V=Math.floor(Math.random()*1e5),c=this.V++;const $=new Es(this,this.j,c);let q=this.o;if(this.U&&(q?(q=Pe(q),te(q,this.U)):q=this.U),this.u!==null||this.R||($.J=q,q=null),this.S)e:{for(var d=0,m=0;m<this.i.length;m++){t:{var A=this.i[m];if("__data__"in A.map&&(A=A.map.__data__,typeof A=="string")){A=A.length;break t}A=void 0}if(A===void 0)break;if(d+=A,d>4096){d=m;break e}if(d===4096||m===this.i.length-1){d=m+1;break e}}d=1e3}else d=1e3;d=Xd(this,$,d),m=kn(this.J),tt(m,"RID",c),tt(m,"CVER",22),this.G&&tt(m,"X-HTTP-Session-Id",this.G),uo(this,m),q&&(this.R?d="headers="+eo(qd(q))+"&"+d:this.u&&tu(m,this.u,q)),Xl(this.h,$),this.Ra&&tt(m,"TYPE","init"),this.S?(tt(m,"$req",d),tt(m,"SID","null"),$.U=!0,Kl($,m,null)):Kl($,m,d),this.I=2}}else this.I==3&&(c?Jd(this,c):this.i.length==0||Dd(this.h)||Jd(this))};function Jd(c,d){var m;d?m=d.l:m=c.V++;const A=kn(c.J);tt(A,"SID",c.M),tt(A,"RID",m),tt(A,"AID",c.K),uo(c,A),c.u&&c.o&&tu(A,c.u,c.o),m=new Es(c,c.j,m,c.D+1),c.u===null&&(m.J=c.o),d&&(c.i=d.G.concat(c.i)),d=Xd(c,m,1e3),m.H=Math.round(c.va*.5)+Math.round(c.va*.5*Math.random()),Xl(c.h,m),Kl(m,A,d)}function uo(c,d){c.H&&Te(c.H,function(m,A){tt(d,A,m)}),c.l&&Te({},function(m,A){tt(d,A,m)})}function Xd(c,d,m){m=Math.min(c.i.length,m);const A=c.l?u(c.l.Ka,c.l,c):null;e:{var $=c.i;let ke=-1;for(;;){const wt=["count="+m];ke==-1?m>0?(ke=$[0].g,wt.push("ofs="+ke)):ke=0:wt.push("ofs="+ke);let Ye=!0;for(let At=0;At<m;At++){var q=$[At].g;const Nn=$[At].map;if(q-=ke,q<0)ke=Math.max(0,$[At].g-100),Ye=!1;else try{q="req"+q+"_"||"";try{var oe=Nn instanceof Map?Nn:Object.entries(Nn);for(const[gr,Is]of oe){let As=Is;a(Is)&&(As=je(Is)),wt.push(q+gr+"="+encodeURIComponent(As))}}catch(gr){throw wt.push(q+"type="+encodeURIComponent("_badmap")),gr}}catch{A&&A(Nn)}}if(Ye){oe=wt.join("&");break e}}oe=void 0}return c=c.i.splice(0,m),d.G=c,oe}function Zd(c){if(!c.g&&!c.v){c.Y=1;var d=c.Da;O||T(),F||(O(),F=!0),S.add(d,c),c.A=0}}function su(c){return c.g||c.v||c.A>=3?!1:(c.Y++,c.v=Xi(u(c.Da,c),np(c,c.A)),c.A++,!0)}t.Da=function(){if(this.v=null,ep(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var c=4*this.T;this.j.info("BP detection timer enabled: "+c),this.B=Xi(u(this.Wa,this),c)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Ht(10),Oa(this),ep(this))};function ru(c){c.B!=null&&(o.clearTimeout(c.B),c.B=null)}function ep(c){c.g=new Es(c,c.j,"rpc",c.Y),c.u===null&&(c.g.J=c.o),c.g.P=0;var d=kn(c.na);tt(d,"RID","rpc"),tt(d,"SID",c.M),tt(d,"AID",c.K),tt(d,"CI",c.F?"0":"1"),!c.F&&c.ia&&tt(d,"TO",c.ia),tt(d,"TYPE","xmlhttp"),uo(c,d),c.u&&c.o&&tu(d,c.u,c.o),c.O&&(c.g.H=c.O);var m=c.g;c=c.ba,m.M=1,m.A=ka(kn(d)),m.u=null,m.R=!0,Cd(m,c)}t.Va=function(){this.C!=null&&(this.C=null,Oa(this),su(this),Ht(19))};function La(c){c.C!=null&&(o.clearTimeout(c.C),c.C=null)}function tp(c,d){var m=null;if(c.g==d){La(c),ru(c),c.g=null;var A=2}else if(Jl(c.h,d))m=d.G,Vd(c.h,d),A=1;else return;if(c.I!=0){if(d.o)if(A==1){m=d.u?d.u.length:0,d=Date.now()-d.F;var $=c.D;A=fr(),Y(A,new bd(A,m)),Va(c)}else Zd(c);else if($=d.m,$==3||$==0&&d.X>0||!(A==1&&Hw(c,d)||A==2&&su(c)))switch(m&&m.length>0&&(d=c.h,d.i=d.i.concat(m)),$){case 1:mr(c,5);break;case 4:mr(c,10);break;case 3:mr(c,6);break;default:mr(c,2)}}}function np(c,d){let m=c.Qa+Math.floor(Math.random()*c.Za);return c.isActive()||(m*=2),m*d}function mr(c,d){if(c.j.info("Error code "+d),d==2){var m=u(c.bb,c),A=c.Ua;const $=!A;A=new Ts(A||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||no(A,"https"),ka(A),$?Mw(A.toString(),m):xw(A.toString(),m)}else Ht(2);c.I=0,c.l&&c.l.pa(d),sp(c),Yd(c)}t.bb=function(c){c?(this.j.info("Successfully pinged google.com"),Ht(2)):(this.j.info("Failed to ping google.com"),Ht(1))};function sp(c){if(c.I=0,c.ja=[],c.l){const d=Ld(c.h);(d.length!=0||c.i.length!=0)&&(w(c.ja,d),w(c.ja,c.i),c.h.i.length=0,g(c.i),c.i.length=0),c.l.oa()}}function rp(c,d,m){var A=m instanceof Ts?kn(m):new Ts(m);if(A.g!="")d&&(A.g=d+"."+A.g),so(A,A.u);else{var $=o.location;A=$.protocol,d=d?d+"."+$.hostname:$.hostname,$=+$.port;const q=new Ts(null);A&&no(q,A),d&&(q.g=d),$&&so(q,$),m&&(q.h=m),A=q}return m=c.G,d=c.wa,m&&d&&tt(A,m,d),tt(A,"VER",c.ka),uo(c,A),A}function ip(c,d,m){if(d&&!c.L)throw Error("Can't create secondary domain capable XhrIo object.");return d=c.Aa&&!c.ma?new rt(new eu({ab:m})):new rt(c.ma),d.Fa(c.L),d}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function op(){}t=op.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function Ma(){}Ma.prototype.g=function(c,d){return new nn(c,d)};function nn(c,d){ne.call(this),this.g=new Qd(d),this.l=c,this.h=d&&d.messageUrlParams||null,c=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(c?c["X-WebChannel-Content-Type"]=d.messageContentType:c={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.sa&&(c?c["X-WebChannel-Client-Profile"]=d.sa:c={"X-WebChannel-Client-Profile":d.sa}),this.g.U=c,(c=d&&d.Qb)&&!y(c)&&(this.g.u=c),this.A=d&&d.supportsCrossDomainXhr||!1,this.v=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!y(d)&&(this.g.G=d,c=this.h,c!==null&&d in c&&(c=this.h,d in c&&delete c[d])),this.j=new Yr(this)}f(nn,ne),nn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},nn.prototype.close=function(){nu(this.g)},nn.prototype.o=function(c){var d=this.g;if(typeof c=="string"){var m={};m.__data__=c,c=m}else this.v&&(m={},m.__data__=je(c),c=m);d.i.push(new Cw(d.Ya++,c)),d.I==3&&Va(d)},nn.prototype.N=function(){this.g.l=null,delete this.j,nu(this.g),delete this.g,nn.Z.N.call(this)};function ap(c){Wn.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var d=c.__sm__;if(d){e:{for(const m in d){c=m;break e}c=void 0}(this.i=c)&&(c=this.i,d=d!==null&&c in d?d[c]:void 0),this.data=d}else this.data=c}f(ap,Wn);function cp(){zr.call(this),this.status=1}f(cp,zr);function Yr(c){this.g=c}f(Yr,op),Yr.prototype.ra=function(){Y(this.g,"a")},Yr.prototype.qa=function(c){Y(this.g,new ap(c))},Yr.prototype.pa=function(c){Y(this.g,new cp)},Yr.prototype.oa=function(){Y(this.g,"b")},Ma.prototype.createWebChannel=Ma.prototype.g,nn.prototype.send=nn.prototype.o,nn.prototype.open=nn.prototype.m,nn.prototype.close=nn.prototype.close,ME=function(){return new Ma},LE=function(){return fr()},VE=ht,Nh={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Ca.NO_ERROR=0,Ca.TIMEOUT=8,Ca.HTTP_ERROR=6,pc=Ca,Id.COMPLETE="complete",OE=Id,Kt.EventType=Tt,Tt.OPEN="a",Tt.CLOSE="b",Tt.ERROR="c",Tt.MESSAGE="d",ne.prototype.listen=ne.prototype.J,To=Kt,rt.prototype.listenOnce=rt.prototype.K,rt.prototype.getLastError=rt.prototype.Ha,rt.prototype.getLastErrorCode=rt.prototype.ya,rt.prototype.getStatus=rt.prototype.ca,rt.prototype.getResponseJson=rt.prototype.La,rt.prototype.getResponseText=rt.prototype.la,rt.prototype.send=rt.prototype.ea,rt.prototype.setWithCredentials=rt.prototype.Fa,DE=rt}).apply(typeof Ja<"u"?Ja:typeof self<"u"?self:typeof window<"u"?window:{});const mg="@firebase/firestore",gg="4.9.3";class Ft{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ft.UNAUTHENTICATED=new Ft(null),Ft.GOOGLE_CREDENTIALS=new Ft("google-credentials-uid"),Ft.FIRST_PARTY=new Ft("first-party-uid"),Ft.MOCK_USER=new Ft("mock-user");let ji="12.7.0";const Ur=new Df("@firebase/firestore");function ti(){return Ur.logLevel}function de(t,...e){if(Ur.logLevel<=Oe.DEBUG){const n=e.map(jf);Ur.debug(`Firestore (${ji}): ${t}`,...n)}}function ms(t,...e){if(Ur.logLevel<=Oe.ERROR){const n=e.map(jf);Ur.error(`Firestore (${ji}): ${t}`,...n)}}function Br(t,...e){if(Ur.logLevel<=Oe.WARN){const n=e.map(jf);Ur.warn(`Firestore (${ji}): ${t}`,...n)}}function jf(t){if(typeof t=="string")return t;try{return(function(n){return JSON.stringify(n)})(t)}catch{return t}}function Ie(t,e,n){let s="Unexpected state";typeof e=="string"?s=e:n=e,xE(t,s,n)}function xE(t,e,n){let s=`FIRESTORE (${ji}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{s+=" CONTEXT: "+JSON.stringify(n)}catch{s+=" CONTEXT: "+n}throw ms(s),new Error(s)}function We(t,e,n,s){let r="Unexpected state";typeof n=="string"?r=n:s=n,t||xE(e,r,s)}function Ce(t,e){return t}const J={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ce extends ys{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class as{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}class FE{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class UE{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(Ft.UNAUTHENTICATED)))}shutdown(){}}class KN{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class QN{constructor(e){this.t=e,this.currentUser=Ft.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){We(this.o===void 0,42304);let s=this.i;const r=l=>this.i!==s?(s=this.i,n(l)):Promise.resolve();let i=new as;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new as,e.enqueueRetryable((()=>r(this.currentUser)))};const o=()=>{const l=i;e.enqueueRetryable((async()=>{await l.promise,await r(this.currentUser)}))},a=l=>{de("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit((l=>a(l))),setTimeout((()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(de("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new as)}}),0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((s=>this.i!==e?(de("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(We(typeof s.accessToken=="string",31837,{l:s}),new FE(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return We(e===null||typeof e=="string",2055,{h:e}),new Ft(e)}}class YN{constructor(e,n,s){this.P=e,this.T=n,this.I=s,this.type="FirstParty",this.user=Ft.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class JN{constructor(e,n,s){this.P=e,this.T=n,this.I=s}getToken(){return Promise.resolve(new YN(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(Ft.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class _g{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class XN{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,dn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){We(this.o===void 0,3512);const s=i=>{i.error!=null&&de("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.m;return this.m=i.token,de("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable((()=>s(i)))};const r=i=>{de("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((i=>r(i))),setTimeout((()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?r(i):de("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new _g(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(We(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new _g(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function ZN(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let s=0;s<t;s++)n[s]=Math.floor(256*Math.random());return n}class Al{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const r=ZN(40);for(let i=0;i<r.length;++i)s.length<20&&r[i]<n&&(s+=e.charAt(r[i]%62))}return s}}function Ve(t,e){return t<e?-1:t>e?1:0}function Dh(t,e){const n=Math.min(t.length,e.length);for(let s=0;s<n;s++){const r=t.charAt(s),i=e.charAt(s);if(r!==i)return Mu(r)===Mu(i)?Ve(r,i):Mu(r)?1:-1}return Ve(t.length,e.length)}const eD=55296,tD=57343;function Mu(t){const e=t.charCodeAt(0);return e>=eD&&e<=tD}function Pi(t,e,n){return t.length===e.length&&t.every(((s,r)=>n(s,e[r])))}const yg="__name__";class Vn{constructor(e,n,s){n===void 0?n=0:n>e.length&&Ie(637,{offset:n,range:e.length}),s===void 0?s=e.length-n:s>e.length-n&&Ie(1746,{length:s,range:e.length-n}),this.segments=e,this.offset=n,this.len=s}get length(){return this.len}isEqual(e){return Vn.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Vn?e.forEach((s=>{n.push(s)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,s=this.limit();n<s;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const s=Math.min(e.length,n.length);for(let r=0;r<s;r++){const i=Vn.compareSegments(e.get(r),n.get(r));if(i!==0)return i}return Ve(e.length,n.length)}static compareSegments(e,n){const s=Vn.isNumericId(e),r=Vn.isNumericId(n);return s&&!r?-1:!s&&r?1:s&&r?Vn.extractNumericId(e).compare(Vn.extractNumericId(n)):Dh(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ys.fromString(e.substring(4,e.length-2))}}class Ze extends Vn{construct(e,n,s){return new Ze(e,n,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const s of e){if(s.indexOf("//")>=0)throw new ce(J.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);n.push(...s.split("/").filter((r=>r.length>0)))}return new Ze(n)}static emptyPath(){return new Ze([])}}const nD=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class St extends Vn{construct(e,n,s){return new St(e,n,s)}static isValidIdentifier(e){return nD.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),St.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===yg}static keyField(){return new St([yg])}static fromServerFormat(e){const n=[];let s="",r=0;const i=()=>{if(s.length===0)throw new ce(J.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(s),s=""};let o=!1;for(;r<e.length;){const a=e[r];if(a==="\\"){if(r+1===e.length)throw new ce(J.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[r+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new ce(J.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=l,r+=2}else a==="`"?(o=!o,r++):a!=="."||o?(s+=a,r++):(i(),r++)}if(i(),o)throw new ce(J.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new St(n)}static emptyPath(){return new St([])}}class ye{constructor(e){this.path=e}static fromPath(e){return new ye(Ze.fromString(e))}static fromName(e){return new ye(Ze.fromString(e).popFirst(5))}static empty(){return new ye(Ze.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ze.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ze.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ye(new Ze(e.slice()))}}function BE(t,e,n){if(!n)throw new ce(J.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function $E(t,e,n,s){if(e===!0&&s===!0)throw new ce(J.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function vg(t){if(!ye.isDocumentKey(t))throw new ce(J.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Eg(t){if(ye.isDocumentKey(t))throw new ce(J.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function HE(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function Rl(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=(function(s){return s.constructor?s.constructor.name:null})(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Ie(12329,{type:typeof t})}function gn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new ce(J.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Rl(t);throw new ce(J.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function yt(t,e){const n={typeString:t};return e&&(n.value=e),n}function ya(t,e){if(!HE(t))throw new ce(J.INVALID_ARGUMENT,"JSON must be an object");let n;for(const s in e)if(e[s]){const r=e[s].typeString,i="value"in e[s]?{value:e[s].value}:void 0;if(!(s in t)){n=`JSON missing required field: '${s}'`;break}const o=t[s];if(r&&typeof o!==r){n=`JSON field '${s}' must be a ${r}.`;break}if(i!==void 0&&o!==i.value){n=`Expected '${s}' field to equal '${i.value}'`;break}}if(n)throw new ce(J.INVALID_ARGUMENT,n);return!0}const Tg=-62135596800,wg=1e6;class et{static now(){return et.fromMillis(Date.now())}static fromDate(e){return et.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),s=Math.floor((e-1e3*n)*wg);return new et(n,s)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ce(J.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ce(J.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<Tg)throw new ce(J.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ce(J.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/wg}_compareTo(e){return this.seconds===e.seconds?Ve(this.nanoseconds,e.nanoseconds):Ve(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:et._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(ya(e,et._jsonSchema))return new et(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Tg;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}et._jsonSchemaVersion="firestore/timestamp/1.0",et._jsonSchema={type:yt("string",et._jsonSchemaVersion),seconds:yt("number"),nanoseconds:yt("number")};class Se{static fromTimestamp(e){return new Se(e)}static min(){return new Se(new et(0,0))}static max(){return new Se(new et(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const Jo=-1;function sD(t,e){const n=t.toTimestamp().seconds,s=t.toTimestamp().nanoseconds+1,r=Se.fromTimestamp(s===1e9?new et(n+1,0):new et(n,s));return new er(r,ye.empty(),e)}function rD(t){return new er(t.readTime,t.key,Jo)}class er{constructor(e,n,s){this.readTime=e,this.documentKey=n,this.largestBatchId=s}static min(){return new er(Se.min(),ye.empty(),Jo)}static max(){return new er(Se.max(),ye.empty(),Jo)}}function iD(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ye.comparator(t.documentKey,e.documentKey),n!==0?n:Ve(t.largestBatchId,e.largestBatchId))}const oD="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class aD{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function qi(t){if(t.code!==J.FAILED_PRECONDITION||t.message!==oD)throw t;de("LocalStore","Unexpectedly lost primary lease")}class Z{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Ie(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new Z(((s,r)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(s,r)},this.catchCallback=i=>{this.wrapFailure(n,i).next(s,r)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof Z?n:Z.resolve(n)}catch(n){return Z.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):Z.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):Z.reject(n)}static resolve(e){return new Z(((n,s)=>{n(e)}))}static reject(e){return new Z(((n,s)=>{s(e)}))}static waitFor(e){return new Z(((n,s)=>{let r=0,i=0,o=!1;e.forEach((a=>{++r,a.next((()=>{++i,o&&i===r&&n()}),(l=>s(l)))})),o=!0,i===r&&n()}))}static or(e){let n=Z.resolve(!1);for(const s of e)n=n.next((r=>r?Z.resolve(r):s()));return n}static forEach(e,n){const s=[];return e.forEach(((r,i)=>{s.push(n.call(this,r,i))})),this.waitFor(s)}static mapArray(e,n){return new Z(((s,r)=>{const i=e.length,o=new Array(i);let a=0;for(let l=0;l<i;l++){const u=l;n(e[u]).next((h=>{o[u]=h,++a,a===i&&s(o)}),(h=>r(h)))}}))}static doWhile(e,n){return new Z(((s,r)=>{const i=()=>{e()===!0?n().next((()=>{i()}),r):s()};i()}))}}function cD(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Gi(t){return t.name==="IndexedDbTransactionError"}class Sl{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>n.writeSequenceNumber(s))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Sl.ce=-1;const qf=-1;function Cl(t){return t==null}function Wc(t){return t===0&&1/t==-1/0}function lD(t){return typeof t=="number"&&Number.isInteger(t)&&!Wc(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}const jE="";function uD(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=bg(e)),e=hD(t.get(n),e);return bg(e)}function hD(t,e){let n=e;const s=t.length;for(let r=0;r<s;r++){const i=t.charAt(r);switch(i){case"\0":n+="";break;case jE:n+="";break;default:n+=i}}return n}function bg(t){return t+jE+""}function Ig(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function cr(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function qE(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}class st{constructor(e,n){this.comparator=e,this.root=n||Nt.EMPTY}insert(e,n){return new st(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Nt.BLACK,null,null))}remove(e){return new st(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Nt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return n.value;s<0?n=n.left:s>0&&(n=n.right)}return null}indexOf(e){let n=0,s=this.root;for(;!s.isEmpty();){const r=this.comparator(e,s.key);if(r===0)return n+s.left.size;r<0?s=s.left:(n+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,s)=>(e(n,s),!1)))}toString(){const e=[];return this.inorderTraversal(((n,s)=>(e.push(`${n}:${s}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Xa(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Xa(this.root,e,this.comparator,!1)}getReverseIterator(){return new Xa(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Xa(this.root,e,this.comparator,!0)}}class Xa{constructor(e,n,s,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?s(e.key,n):1,n&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Nt{constructor(e,n,s,r,i){this.key=e,this.value=n,this.color=s??Nt.RED,this.left=r??Nt.EMPTY,this.right=i??Nt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,s,r,i){return new Nt(e??this.key,n??this.value,s??this.color,r??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,s){let r=this;const i=s(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,n,s),null):i===0?r.copy(null,n,null,null,null):r.copy(null,null,null,null,r.right.insert(e,n,s)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Nt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let s,r=this;if(n(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),n(e,r.key)===0){if(r.right.isEmpty())return Nt.EMPTY;s=r.right.min(),r=r.copy(s.key,s.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Nt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Nt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ie(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ie(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ie(27949);return e+(this.isRed()?0:1)}}Nt.EMPTY=null,Nt.RED=!0,Nt.BLACK=!1;Nt.EMPTY=new class{constructor(){this.size=0}get key(){throw Ie(57766)}get value(){throw Ie(16141)}get color(){throw Ie(16727)}get left(){throw Ie(29726)}get right(){throw Ie(36894)}copy(e,n,s,r,i){return this}insert(e,n,s){return new Nt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class It{constructor(e){this.comparator=e,this.data=new st(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,s)=>(e(n),!1)))}forEachInRange(e,n){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const r=s.getNext();if(this.comparator(r.key,e[1])>=0)return;n(r.key)}}forEachWhile(e,n){let s;for(s=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Ag(this.data.getIterator())}getIteratorFrom(e){return new Ag(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((s=>{n=n.add(s)})),n}isEqual(e){if(!(e instanceof It)||this.size!==e.size)return!1;const n=this.data.getIterator(),s=e.data.getIterator();for(;n.hasNext();){const r=n.getNext().key,i=s.getNext().key;if(this.comparator(r,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new It(this.comparator);return n.data=e,n}}class Ag{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class on{constructor(e){this.fields=e,e.sort(St.comparator)}static empty(){return new on([])}unionWith(e){let n=new It(St.comparator);for(const s of this.fields)n=n.add(s);for(const s of e)n=n.add(s);return new on(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Pi(this.fields,e.fields,((n,s)=>n.isEqual(s)))}}class GE extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class kt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(r){try{return atob(r)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new GE("Invalid base64 string: "+i):i}})(e);return new kt(n)}static fromUint8Array(e){const n=(function(r){let i="";for(let o=0;o<r.length;++o)i+=String.fromCharCode(r[o]);return i})(e);return new kt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const s=new Uint8Array(n.length);for(let r=0;r<n.length;r++)s[r]=n.charCodeAt(r);return s})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ve(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}kt.EMPTY_BYTE_STRING=new kt("");const fD=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function tr(t){if(We(!!t,39018),typeof t=="string"){let e=0;const n=fD.exec(t);if(We(!!n,46558,{timestamp:t}),n[1]){let r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}const s=new Date(t);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:dt(t.seconds),nanos:dt(t.nanos)}}function dt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function nr(t){return typeof t=="string"?kt.fromBase64String(t):kt.fromUint8Array(t)}const WE="server_timestamp",zE="__type__",KE="__previous_value__",QE="__local_write_time__";function Gf(t){return(t?.mapValue?.fields||{})[zE]?.stringValue===WE}function Pl(t){const e=t.mapValue.fields[KE];return Gf(e)?Pl(e):e}function Xo(t){const e=tr(t.mapValue.fields[QE].timestampValue);return new et(e.seconds,e.nanos)}class dD{constructor(e,n,s,r,i,o,a,l,u,h){this.databaseId=e,this.appId=n,this.persistenceKey=s,this.host=r,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=u,this.isUsingEmulator=h}}const zc="(default)";class ki{constructor(e,n){this.projectId=e,this.database=n||zc}static empty(){return new ki("","")}get isDefaultDatabase(){return this.database===zc}isEqual(e){return e instanceof ki&&e.projectId===this.projectId&&e.database===this.database}}const YE="__type__",pD="__max__",Za={mapValue:{}},JE="__vector__",Kc="value";function sr(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Gf(t)?4:gD(t)?9007199254740991:mD(t)?10:11:Ie(28295,{value:t})}function jn(t,e){if(t===e)return!0;const n=sr(t);if(n!==sr(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Xo(t).isEqual(Xo(e));case 3:return(function(r,i){if(typeof r.timestampValue=="string"&&typeof i.timestampValue=="string"&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const o=tr(r.timestampValue),a=tr(i.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos})(t,e);case 5:return t.stringValue===e.stringValue;case 6:return(function(r,i){return nr(r.bytesValue).isEqual(nr(i.bytesValue))})(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return(function(r,i){return dt(r.geoPointValue.latitude)===dt(i.geoPointValue.latitude)&&dt(r.geoPointValue.longitude)===dt(i.geoPointValue.longitude)})(t,e);case 2:return(function(r,i){if("integerValue"in r&&"integerValue"in i)return dt(r.integerValue)===dt(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const o=dt(r.doubleValue),a=dt(i.doubleValue);return o===a?Wc(o)===Wc(a):isNaN(o)&&isNaN(a)}return!1})(t,e);case 9:return Pi(t.arrayValue.values||[],e.arrayValue.values||[],jn);case 10:case 11:return(function(r,i){const o=r.mapValue.fields||{},a=i.mapValue.fields||{};if(Ig(o)!==Ig(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!jn(o[l],a[l])))return!1;return!0})(t,e);default:return Ie(52216,{left:t})}}function Zo(t,e){return(t.values||[]).find((n=>jn(n,e)))!==void 0}function Ni(t,e){if(t===e)return 0;const n=sr(t),s=sr(e);if(n!==s)return Ve(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ve(t.booleanValue,e.booleanValue);case 2:return(function(i,o){const a=dt(i.integerValue||i.doubleValue),l=dt(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1})(t,e);case 3:return Rg(t.timestampValue,e.timestampValue);case 4:return Rg(Xo(t),Xo(e));case 5:return Dh(t.stringValue,e.stringValue);case 6:return(function(i,o){const a=nr(i),l=nr(o);return a.compareTo(l)})(t.bytesValue,e.bytesValue);case 7:return(function(i,o){const a=i.split("/"),l=o.split("/");for(let u=0;u<a.length&&u<l.length;u++){const h=Ve(a[u],l[u]);if(h!==0)return h}return Ve(a.length,l.length)})(t.referenceValue,e.referenceValue);case 8:return(function(i,o){const a=Ve(dt(i.latitude),dt(o.latitude));return a!==0?a:Ve(dt(i.longitude),dt(o.longitude))})(t.geoPointValue,e.geoPointValue);case 9:return Sg(t.arrayValue,e.arrayValue);case 10:return(function(i,o){const a=i.fields||{},l=o.fields||{},u=a[Kc]?.arrayValue,h=l[Kc]?.arrayValue,f=Ve(u?.values?.length||0,h?.values?.length||0);return f!==0?f:Sg(u,h)})(t.mapValue,e.mapValue);case 11:return(function(i,o){if(i===Za.mapValue&&o===Za.mapValue)return 0;if(i===Za.mapValue)return 1;if(o===Za.mapValue)return-1;const a=i.fields||{},l=Object.keys(a),u=o.fields||{},h=Object.keys(u);l.sort(),h.sort();for(let f=0;f<l.length&&f<h.length;++f){const p=Dh(l[f],h[f]);if(p!==0)return p;const g=Ni(a[l[f]],u[h[f]]);if(g!==0)return g}return Ve(l.length,h.length)})(t.mapValue,e.mapValue);default:throw Ie(23264,{he:n})}}function Rg(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Ve(t,e);const n=tr(t),s=tr(e),r=Ve(n.seconds,s.seconds);return r!==0?r:Ve(n.nanos,s.nanos)}function Sg(t,e){const n=t.values||[],s=e.values||[];for(let r=0;r<n.length&&r<s.length;++r){const i=Ni(n[r],s[r]);if(i)return i}return Ve(n.length,s.length)}function Di(t){return Oh(t)}function Oh(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(function(n){const s=tr(n);return`time(${s.seconds},${s.nanos})`})(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?(function(n){return nr(n).toBase64()})(t.bytesValue):"referenceValue"in t?(function(n){return ye.fromName(n).toString()})(t.referenceValue):"geoPointValue"in t?(function(n){return`geo(${n.latitude},${n.longitude})`})(t.geoPointValue):"arrayValue"in t?(function(n){let s="[",r=!0;for(const i of n.values||[])r?r=!1:s+=",",s+=Oh(i);return s+"]"})(t.arrayValue):"mapValue"in t?(function(n){const s=Object.keys(n.fields||{}).sort();let r="{",i=!0;for(const o of s)i?i=!1:r+=",",r+=`${o}:${Oh(n.fields[o])}`;return r+"}"})(t.mapValue):Ie(61005,{value:t})}function mc(t){switch(sr(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Pl(t);return e?16+mc(e):16;case 5:return 2*t.stringValue.length;case 6:return nr(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return(function(s){return(s.values||[]).reduce(((r,i)=>r+mc(i)),0)})(t.arrayValue);case 10:case 11:return(function(s){let r=0;return cr(s.fields,((i,o)=>{r+=i.length+mc(o)})),r})(t.mapValue);default:throw Ie(13486,{value:t})}}function Cg(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Vh(t){return!!t&&"integerValue"in t}function Wf(t){return!!t&&"arrayValue"in t}function Pg(t){return!!t&&"nullValue"in t}function kg(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function gc(t){return!!t&&"mapValue"in t}function mD(t){return(t?.mapValue?.fields||{})[YE]?.stringValue===JE}function Vo(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return cr(t.mapValue.fields,((n,s)=>e.mapValue.fields[n]=Vo(s))),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Vo(t.arrayValue.values[n]);return e}return{...t}}function gD(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===pD}class Xt{constructor(e){this.value=e}static empty(){return new Xt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let s=0;s<e.length-1;++s)if(n=(n.mapValue.fields||{})[e.get(s)],!gc(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Vo(n)}setAll(e){let n=St.emptyPath(),s={},r=[];e.forEach(((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,s,r),s={},r=[],n=a.popLast()}o?s[a.lastSegment()]=Vo(o):r.push(a.lastSegment())}));const i=this.getFieldsMap(n);this.applyChanges(i,s,r)}delete(e){const n=this.field(e.popLast());gc(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return jn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let s=0;s<e.length;++s){let r=n.mapValue.fields[e.get(s)];gc(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},n.mapValue.fields[e.get(s)]=r),n=r}return n.mapValue.fields}applyChanges(e,n,s){cr(n,((r,i)=>e[r]=i));for(const r of s)delete e[r]}clone(){return new Xt(Vo(this.value))}}function XE(t){const e=[];return cr(t.fields,((n,s)=>{const r=new St([n]);if(gc(s)){const i=XE(s.mapValue).fields;if(i.length===0)e.push(r);else for(const o of i)e.push(r.child(o))}else e.push(r)})),new on(e)}class Bt{constructor(e,n,s,r,i,o,a){this.key=e,this.documentType=n,this.version=s,this.readTime=r,this.createTime=i,this.data=o,this.documentState=a}static newInvalidDocument(e){return new Bt(e,0,Se.min(),Se.min(),Se.min(),Xt.empty(),0)}static newFoundDocument(e,n,s,r){return new Bt(e,1,n,Se.min(),s,r,0)}static newNoDocument(e,n){return new Bt(e,2,n,Se.min(),Se.min(),Xt.empty(),0)}static newUnknownDocument(e,n){return new Bt(e,3,n,Se.min(),Se.min(),Xt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Se.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Xt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Xt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Se.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Bt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Bt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Qc{constructor(e,n){this.position=e,this.inclusive=n}}function Ng(t,e,n){let s=0;for(let r=0;r<t.position.length;r++){const i=e[r],o=t.position[r];if(i.field.isKeyField()?s=ye.comparator(ye.fromName(o.referenceValue),n.key):s=Ni(o,n.data.field(i.field)),i.dir==="desc"&&(s*=-1),s!==0)break}return s}function Dg(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!jn(t.position[n],e.position[n]))return!1;return!0}class ea{constructor(e,n="asc"){this.field=e,this.dir=n}}function _D(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}class ZE{}class _t extends ZE{constructor(e,n,s){super(),this.field=e,this.op=n,this.value=s}static create(e,n,s){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,s):new vD(e,n,s):n==="array-contains"?new wD(e,s):n==="in"?new bD(e,s):n==="not-in"?new ID(e,s):n==="array-contains-any"?new AD(e,s):new _t(e,n,s)}static createKeyFieldInFilter(e,n,s){return n==="in"?new ED(e,s):new TD(e,s)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Ni(n,this.value)):n!==null&&sr(this.value)===sr(n)&&this.matchesComparison(Ni(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ie(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Pn extends ZE{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Pn(e,n)}matches(e){return eT(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function eT(t){return t.op==="and"}function tT(t){return yD(t)&&eT(t)}function yD(t){for(const e of t.filters)if(e instanceof Pn)return!1;return!0}function Lh(t){if(t instanceof _t)return t.field.canonicalString()+t.op.toString()+Di(t.value);if(tT(t))return t.filters.map((e=>Lh(e))).join(",");{const e=t.filters.map((n=>Lh(n))).join(",");return`${t.op}(${e})`}}function nT(t,e){return t instanceof _t?(function(s,r){return r instanceof _t&&s.op===r.op&&s.field.isEqual(r.field)&&jn(s.value,r.value)})(t,e):t instanceof Pn?(function(s,r){return r instanceof Pn&&s.op===r.op&&s.filters.length===r.filters.length?s.filters.reduce(((i,o,a)=>i&&nT(o,r.filters[a])),!0):!1})(t,e):void Ie(19439)}function sT(t){return t instanceof _t?(function(n){return`${n.field.canonicalString()} ${n.op} ${Di(n.value)}`})(t):t instanceof Pn?(function(n){return n.op.toString()+" {"+n.getFilters().map(sT).join(" ,")+"}"})(t):"Filter"}class vD extends _t{constructor(e,n,s){super(e,n,s),this.key=ye.fromName(s.referenceValue)}matches(e){const n=ye.comparator(e.key,this.key);return this.matchesComparison(n)}}class ED extends _t{constructor(e,n){super(e,"in",n),this.keys=rT("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class TD extends _t{constructor(e,n){super(e,"not-in",n),this.keys=rT("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function rT(t,e){return(e.arrayValue?.values||[]).map((n=>ye.fromName(n.referenceValue)))}class wD extends _t{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Wf(n)&&Zo(n.arrayValue,this.value)}}class bD extends _t{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Zo(this.value.arrayValue,n)}}class ID extends _t{constructor(e,n){super(e,"not-in",n)}matches(e){if(Zo(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Zo(this.value.arrayValue,n)}}class AD extends _t{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Wf(n)||!n.arrayValue.values)&&n.arrayValue.values.some((s=>Zo(this.value.arrayValue,s)))}}class RD{constructor(e,n=null,s=[],r=[],i=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=s,this.filters=r,this.limit=i,this.startAt=o,this.endAt=a,this.Te=null}}function Og(t,e=null,n=[],s=[],r=null,i=null,o=null){return new RD(t,e,n,s,r,i,o)}function zf(t){const e=Ce(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((s=>Lh(s))).join(","),n+="|ob:",n+=e.orderBy.map((s=>(function(i){return i.field.canonicalString()+i.dir})(s))).join(","),Cl(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((s=>Di(s))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((s=>Di(s))).join(",")),e.Te=n}return e.Te}function Kf(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!_D(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!nT(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Dg(t.startAt,e.startAt)&&Dg(t.endAt,e.endAt)}function Mh(t){return ye.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}class Wi{constructor(e,n=null,s=[],r=[],i=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=s,this.filters=r,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=l,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function SD(t,e,n,s,r,i,o,a){return new Wi(t,e,n,s,r,i,o,a)}function Qf(t){return new Wi(t)}function Vg(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function iT(t){return t.collectionGroup!==null}function Lo(t){const e=Ce(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const i of e.explicitOrderBy)e.Ie.push(i),n.add(i.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new It(St.comparator);return o.filters.forEach((l=>{l.getFlattenedFilters().forEach((u=>{u.isInequality()&&(a=a.add(u.field))}))})),a})(e).forEach((i=>{n.has(i.canonicalString())||i.isKeyField()||e.Ie.push(new ea(i,s))})),n.has(St.keyField().canonicalString())||e.Ie.push(new ea(St.keyField(),s))}return e.Ie}function Bn(t){const e=Ce(t);return e.Ee||(e.Ee=CD(e,Lo(t))),e.Ee}function CD(t,e){if(t.limitType==="F")return Og(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map((r=>{const i=r.dir==="desc"?"asc":"desc";return new ea(r.field,i)}));const n=t.endAt?new Qc(t.endAt.position,t.endAt.inclusive):null,s=t.startAt?new Qc(t.startAt.position,t.startAt.inclusive):null;return Og(t.path,t.collectionGroup,e,t.filters,t.limit,n,s)}}function xh(t,e){const n=t.filters.concat([e]);return new Wi(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Fh(t,e,n){return new Wi(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function kl(t,e){return Kf(Bn(t),Bn(e))&&t.limitType===e.limitType}function oT(t){return`${zf(Bn(t))}|lt:${t.limitType}`}function ni(t){return`Query(target=${(function(n){let s=n.path.canonicalString();return n.collectionGroup!==null&&(s+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(s+=`, filters: [${n.filters.map((r=>sT(r))).join(", ")}]`),Cl(n.limit)||(s+=", limit: "+n.limit),n.orderBy.length>0&&(s+=`, orderBy: [${n.orderBy.map((r=>(function(o){return`${o.field.canonicalString()} (${o.dir})`})(r))).join(", ")}]`),n.startAt&&(s+=", startAt: ",s+=n.startAt.inclusive?"b:":"a:",s+=n.startAt.position.map((r=>Di(r))).join(",")),n.endAt&&(s+=", endAt: ",s+=n.endAt.inclusive?"a:":"b:",s+=n.endAt.position.map((r=>Di(r))).join(",")),`Target(${s})`})(Bn(t))}; limitType=${t.limitType})`}function Nl(t,e){return e.isFoundDocument()&&(function(s,r){const i=r.key.path;return s.collectionGroup!==null?r.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(i):ye.isDocumentKey(s.path)?s.path.isEqual(i):s.path.isImmediateParentOf(i)})(t,e)&&(function(s,r){for(const i of Lo(s))if(!i.field.isKeyField()&&r.data.field(i.field)===null)return!1;return!0})(t,e)&&(function(s,r){for(const i of s.filters)if(!i.matches(r))return!1;return!0})(t,e)&&(function(s,r){return!(s.startAt&&!(function(o,a,l){const u=Ng(o,a,l);return o.inclusive?u<=0:u<0})(s.startAt,Lo(s),r)||s.endAt&&!(function(o,a,l){const u=Ng(o,a,l);return o.inclusive?u>=0:u>0})(s.endAt,Lo(s),r))})(t,e)}function PD(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function aT(t){return(e,n)=>{let s=!1;for(const r of Lo(t)){const i=kD(r,e,n);if(i!==0)return i;s=s||r.field.isKeyField()}return 0}}function kD(t,e,n){const s=t.field.isKeyField()?ye.comparator(e.key,n.key):(function(i,o,a){const l=o.data.field(i),u=a.data.field(i);return l!==null&&u!==null?Ni(l,u):Ie(42886)})(t.field,e,n);switch(t.dir){case"asc":return s;case"desc":return-1*s;default:return Ie(19790,{direction:t.dir})}}class Gr{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s!==void 0){for(const[r,i]of s)if(this.equalsFn(r,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const s=this.mapKeyFn(e),r=this.inner[s];if(r===void 0)return this.inner[s]=[[e,n]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,n]);r.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return!1;for(let r=0;r<s.length;r++)if(this.equalsFn(s[r][0],e))return s.length===1?delete this.inner[n]:s.splice(r,1),this.innerSize--,!0;return!1}forEach(e){cr(this.inner,((n,s)=>{for(const[r,i]of s)e(r,i)}))}isEmpty(){return qE(this.inner)}size(){return this.innerSize}}const ND=new st(ye.comparator);function gs(){return ND}const cT=new st(ye.comparator);function wo(...t){let e=cT;for(const n of t)e=e.insert(n.key,n);return e}function lT(t){let e=cT;return t.forEach(((n,s)=>e=e.insert(n,s.overlayedDocument))),e}function Sr(){return Mo()}function uT(){return Mo()}function Mo(){return new Gr((t=>t.toString()),((t,e)=>t.isEqual(e)))}const DD=new st(ye.comparator),OD=new It(ye.comparator);function Le(...t){let e=OD;for(const n of t)e=e.add(n);return e}const VD=new It(Ve);function LD(){return VD}function Yf(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Wc(e)?"-0":e}}function hT(t){return{integerValue:""+t}}function MD(t,e){return lD(e)?hT(e):Yf(t,e)}class Dl{constructor(){this._=void 0}}function xD(t,e,n){return t instanceof ta?(function(r,i){const o={fields:{[zE]:{stringValue:WE},[QE]:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&Gf(i)&&(i=Pl(i)),i&&(o.fields[KE]=i),{mapValue:o}})(n,e):t instanceof na?dT(t,e):t instanceof sa?pT(t,e):(function(r,i){const o=fT(r,i),a=Lg(o)+Lg(r.Ae);return Vh(o)&&Vh(r.Ae)?hT(a):Yf(r.serializer,a)})(t,e)}function FD(t,e,n){return t instanceof na?dT(t,e):t instanceof sa?pT(t,e):n}function fT(t,e){return t instanceof Yc?(function(s){return Vh(s)||(function(i){return!!i&&"doubleValue"in i})(s)})(e)?e:{integerValue:0}:null}class ta extends Dl{}class na extends Dl{constructor(e){super(),this.elements=e}}function dT(t,e){const n=mT(e);for(const s of t.elements)n.some((r=>jn(r,s)))||n.push(s);return{arrayValue:{values:n}}}class sa extends Dl{constructor(e){super(),this.elements=e}}function pT(t,e){let n=mT(e);for(const s of t.elements)n=n.filter((r=>!jn(r,s)));return{arrayValue:{values:n}}}class Yc extends Dl{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function Lg(t){return dt(t.integerValue||t.doubleValue)}function mT(t){return Wf(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}class UD{constructor(e,n){this.field=e,this.transform=n}}function BD(t,e){return t.field.isEqual(e.field)&&(function(s,r){return s instanceof na&&r instanceof na||s instanceof sa&&r instanceof sa?Pi(s.elements,r.elements,jn):s instanceof Yc&&r instanceof Yc?jn(s.Ae,r.Ae):s instanceof ta&&r instanceof ta})(t.transform,e.transform)}class $D{constructor(e,n){this.version=e,this.transformResults=n}}class en{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new en}static exists(e){return new en(void 0,e)}static updateTime(e){return new en(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function _c(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Ol{}function gT(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Vl(t.key,en.none()):new va(t.key,t.data,en.none());{const n=t.data,s=Xt.empty();let r=new It(St.comparator);for(let i of e.fields)if(!r.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?s.delete(i):s.set(i,o),r=r.add(i)}return new lr(t.key,s,new on(r.toArray()),en.none())}}function HD(t,e,n){t instanceof va?(function(r,i,o){const a=r.value.clone(),l=xg(r.fieldTransforms,i,o.transformResults);a.setAll(l),i.convertToFoundDocument(o.version,a).setHasCommittedMutations()})(t,e,n):t instanceof lr?(function(r,i,o){if(!_c(r.precondition,i))return void i.convertToUnknownDocument(o.version);const a=xg(r.fieldTransforms,i,o.transformResults),l=i.data;l.setAll(_T(r)),l.setAll(a),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()})(t,e,n):(function(r,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()})(0,e,n)}function xo(t,e,n,s){return t instanceof va?(function(i,o,a,l){if(!_c(i.precondition,o))return a;const u=i.value.clone(),h=Fg(i.fieldTransforms,l,o);return u.setAll(h),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null})(t,e,n,s):t instanceof lr?(function(i,o,a,l){if(!_c(i.precondition,o))return a;const u=Fg(i.fieldTransforms,l,o),h=o.data;return h.setAll(_T(i)),h.setAll(u),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),a===null?null:a.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map((f=>f.field)))})(t,e,n,s):(function(i,o,a){return _c(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a})(t,e,n)}function jD(t,e){let n=null;for(const s of t.fieldTransforms){const r=e.data.field(s.field),i=fT(s.transform,r||null);i!=null&&(n===null&&(n=Xt.empty()),n.set(s.field,i))}return n||null}function Mg(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!(function(s,r){return s===void 0&&r===void 0||!(!s||!r)&&Pi(s,r,((i,o)=>BD(i,o)))})(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class va extends Ol{constructor(e,n,s,r=[]){super(),this.key=e,this.value=n,this.precondition=s,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class lr extends Ol{constructor(e,n,s,r,i=[]){super(),this.key=e,this.data=n,this.fieldMask=s,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function _T(t){const e=new Map;return t.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const s=t.data.field(n);e.set(n,s)}})),e}function xg(t,e,n){const s=new Map;We(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let r=0;r<n.length;r++){const i=t[r],o=i.transform,a=e.data.field(i.field);s.set(i.field,FD(o,a,n[r]))}return s}function Fg(t,e,n){const s=new Map;for(const r of t){const i=r.transform,o=n.data.field(r.field);s.set(r.field,xD(i,o,e))}return s}class Vl extends Ol{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class qD extends Ol{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class GD{constructor(e,n,s,r){this.batchId=e,this.localWriteTime=n,this.baseMutations=s,this.mutations=r}applyToRemoteDocument(e,n){const s=n.mutationResults;for(let r=0;r<this.mutations.length;r++){const i=this.mutations[r];i.key.isEqual(e.key)&&HD(i,e,s[r])}}applyToLocalView(e,n){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(n=xo(s,e,n,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(n=xo(s,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const s=uT();return this.mutations.forEach((r=>{const i=e.get(r.key),o=i.overlayedDocument;let a=this.applyToLocalView(o,i.mutatedFields);a=n.has(r.key)?null:a;const l=gT(o,a);l!==null&&s.set(r.key,l),o.isValidDocument()||o.convertToNoDocument(Se.min())})),s}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),Le())}isEqual(e){return this.batchId===e.batchId&&Pi(this.mutations,e.mutations,((n,s)=>Mg(n,s)))&&Pi(this.baseMutations,e.baseMutations,((n,s)=>Mg(n,s)))}}class Jf{constructor(e,n,s,r){this.batch=e,this.commitVersion=n,this.mutationResults=s,this.docVersions=r}static from(e,n,s){We(e.mutations.length===s.length,58842,{me:e.mutations.length,fe:s.length});let r=(function(){return DD})();const i=e.mutations;for(let o=0;o<i.length;o++)r=r.insert(i[o].key,s[o].version);return new Jf(e,n,s,r)}}class WD{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class zD{constructor(e,n){this.count=e,this.unchangedNames=n}}var pt,Me;function KD(t){switch(t){case J.OK:return Ie(64938);case J.CANCELLED:case J.UNKNOWN:case J.DEADLINE_EXCEEDED:case J.RESOURCE_EXHAUSTED:case J.INTERNAL:case J.UNAVAILABLE:case J.UNAUTHENTICATED:return!1;case J.INVALID_ARGUMENT:case J.NOT_FOUND:case J.ALREADY_EXISTS:case J.PERMISSION_DENIED:case J.FAILED_PRECONDITION:case J.ABORTED:case J.OUT_OF_RANGE:case J.UNIMPLEMENTED:case J.DATA_LOSS:return!0;default:return Ie(15467,{code:t})}}function yT(t){if(t===void 0)return ms("GRPC error has no .code"),J.UNKNOWN;switch(t){case pt.OK:return J.OK;case pt.CANCELLED:return J.CANCELLED;case pt.UNKNOWN:return J.UNKNOWN;case pt.DEADLINE_EXCEEDED:return J.DEADLINE_EXCEEDED;case pt.RESOURCE_EXHAUSTED:return J.RESOURCE_EXHAUSTED;case pt.INTERNAL:return J.INTERNAL;case pt.UNAVAILABLE:return J.UNAVAILABLE;case pt.UNAUTHENTICATED:return J.UNAUTHENTICATED;case pt.INVALID_ARGUMENT:return J.INVALID_ARGUMENT;case pt.NOT_FOUND:return J.NOT_FOUND;case pt.ALREADY_EXISTS:return J.ALREADY_EXISTS;case pt.PERMISSION_DENIED:return J.PERMISSION_DENIED;case pt.FAILED_PRECONDITION:return J.FAILED_PRECONDITION;case pt.ABORTED:return J.ABORTED;case pt.OUT_OF_RANGE:return J.OUT_OF_RANGE;case pt.UNIMPLEMENTED:return J.UNIMPLEMENTED;case pt.DATA_LOSS:return J.DATA_LOSS;default:return Ie(39323,{code:t})}}(Me=pt||(pt={}))[Me.OK=0]="OK",Me[Me.CANCELLED=1]="CANCELLED",Me[Me.UNKNOWN=2]="UNKNOWN",Me[Me.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Me[Me.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Me[Me.NOT_FOUND=5]="NOT_FOUND",Me[Me.ALREADY_EXISTS=6]="ALREADY_EXISTS",Me[Me.PERMISSION_DENIED=7]="PERMISSION_DENIED",Me[Me.UNAUTHENTICATED=16]="UNAUTHENTICATED",Me[Me.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Me[Me.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Me[Me.ABORTED=10]="ABORTED",Me[Me.OUT_OF_RANGE=11]="OUT_OF_RANGE",Me[Me.UNIMPLEMENTED=12]="UNIMPLEMENTED",Me[Me.INTERNAL=13]="INTERNAL",Me[Me.UNAVAILABLE=14]="UNAVAILABLE",Me[Me.DATA_LOSS=15]="DATA_LOSS";function QD(){return new TextEncoder}const YD=new Ys([4294967295,4294967295],0);function Ug(t){const e=QD().encode(t),n=new NE;return n.update(e),new Uint8Array(n.digest())}function Bg(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),s=e.getUint32(4,!0),r=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new Ys([n,s],0),new Ys([r,i],0)]}class Xf{constructor(e,n,s){if(this.bitmap=e,this.padding=n,this.hashCount=s,n<0||n>=8)throw new bo(`Invalid padding: ${n}`);if(s<0)throw new bo(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new bo(`Invalid hash count: ${s}`);if(e.length===0&&n!==0)throw new bo(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Ys.fromNumber(this.ge)}ye(e,n,s){let r=e.add(n.multiply(Ys.fromNumber(s)));return r.compare(YD)===1&&(r=new Ys([r.getBits(0),r.getBits(1)],0)),r.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=Ug(e),[s,r]=Bg(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(s,r,i);if(!this.we(o))return!1}return!0}static create(e,n,s){const r=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new Xf(i,r,n);return s.forEach((a=>o.insert(a))),o}insert(e){if(this.ge===0)return;const n=Ug(e),[s,r]=Bg(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(s,r,i);this.Se(o)}}Se(e){const n=Math.floor(e/8),s=e%8;this.bitmap[n]|=1<<s}}class bo extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Ll{constructor(e,n,s,r,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=s,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,s){const r=new Map;return r.set(e,Ea.createSynthesizedTargetChangeForCurrentChange(e,n,s)),new Ll(Se.min(),r,new st(Ve),gs(),Le())}}class Ea{constructor(e,n,s,r,i){this.resumeToken=e,this.current=n,this.addedDocuments=s,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,s){return new Ea(s,n,Le(),Le(),Le())}}class yc{constructor(e,n,s,r){this.be=e,this.removedTargetIds=n,this.key=s,this.De=r}}class vT{constructor(e,n){this.targetId=e,this.Ce=n}}class ET{constructor(e,n,s=kt.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=n,this.resumeToken=s,this.cause=r}}class $g{constructor(){this.ve=0,this.Fe=Hg(),this.Me=kt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Le(),n=Le(),s=Le();return this.Fe.forEach(((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:n=n.add(r);break;case 1:s=s.add(r);break;default:Ie(38017,{changeType:i})}})),new Ea(this.Me,this.xe,e,n,s)}qe(){this.Oe=!1,this.Fe=Hg()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,We(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class JD{constructor(e){this.Ge=e,this.ze=new Map,this.je=gs(),this.Je=ec(),this.He=ec(),this.Ye=new st(Ve)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const s=this.nt(n);switch(e.state){case 0:this.rt(n)&&s.Le(e.resumeToken);break;case 1:s.Ke(),s.Ne||s.qe(),s.Le(e.resumeToken);break;case 2:s.Ke(),s.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(s.We(),s.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),s.Le(e.resumeToken));break;default:Ie(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((s,r)=>{this.rt(r)&&n(r)}))}st(e){const n=e.targetId,s=e.Ce.count,r=this.ot(n);if(r){const i=r.target;if(Mh(i))if(s===0){const o=new ye(i.path);this.et(n,o,Bt.newNoDocument(o,Se.min()))}else We(s===1,20013,{expectedCount:s});else{const o=this._t(n);if(o!==s){const a=this.ut(e),l=a?this.ct(a,e,o):1;if(l!==0){this.it(n);const u=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,u)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:s="",padding:r=0},hashCount:i=0}=n;let o,a;try{o=nr(s).toUint8Array()}catch(l){if(l instanceof GE)return Br("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new Xf(o,r,i)}catch(l){return Br(l instanceof bo?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.ge===0?null:a}ct(e,n,s){return n.Ce.count===s-this.Pt(e,n.targetId)?0:2}Pt(e,n){const s=this.Ge.getRemoteKeysForTarget(n);let r=0;return s.forEach((i=>{const o=this.Ge.ht(),a=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(a)||(this.et(n,i,null),r++)})),r}Tt(e){const n=new Map;this.ze.forEach(((i,o)=>{const a=this.ot(o);if(a){if(i.current&&Mh(a.target)){const l=new ye(a.target.path);this.It(l).has(o)||this.Et(o,l)||this.et(o,l,Bt.newNoDocument(l,e))}i.Be&&(n.set(o,i.ke()),i.qe())}}));let s=Le();this.He.forEach(((i,o)=>{let a=!0;o.forEachWhile((l=>{const u=this.ot(l);return!u||u.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)})),a&&(s=s.add(i))})),this.je.forEach(((i,o)=>o.setReadTime(e)));const r=new Ll(e,n,this.Ye,this.je,s);return this.je=gs(),this.Je=ec(),this.He=ec(),this.Ye=new st(Ve),r}Xe(e,n){if(!this.rt(e))return;const s=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,s),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,s){if(!this.rt(e))return;const r=this.nt(e);this.Et(e,n)?r.Qe(n,1):r.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),s&&(this.je=this.je.insert(n,s))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new $g,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new It(Ve),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new It(Ve),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||de("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new $g),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function ec(){return new st(ye.comparator)}function Hg(){return new st(ye.comparator)}const XD={asc:"ASCENDING",desc:"DESCENDING"},ZD={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},eO={and:"AND",or:"OR"};class tO{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Uh(t,e){return t.useProto3Json||Cl(e)?e:{value:e}}function Jc(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function TT(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function nO(t,e){return Jc(t,e.toTimestamp())}function $n(t){return We(!!t,49232),Se.fromTimestamp((function(n){const s=tr(n);return new et(s.seconds,s.nanos)})(t))}function Zf(t,e){return Bh(t,e).canonicalString()}function Bh(t,e){const n=(function(r){return new Ze(["projects",r.projectId,"databases",r.database])})(t).child("documents");return e===void 0?n:n.child(e)}function wT(t){const e=Ze.fromString(t);return We(ST(e),10190,{key:e.toString()}),e}function $h(t,e){return Zf(t.databaseId,e.path)}function xu(t,e){const n=wT(e);if(n.get(1)!==t.databaseId.projectId)throw new ce(J.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new ce(J.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ye(IT(n))}function bT(t,e){return Zf(t.databaseId,e)}function sO(t){const e=wT(t);return e.length===4?Ze.emptyPath():IT(e)}function Hh(t){return new Ze(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function IT(t){return We(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function jg(t,e,n){return{name:$h(t,e),fields:n.value.mapValue.fields}}function rO(t,e){let n;if("targetChange"in e){e.targetChange;const s=(function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:Ie(39313,{state:u})})(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],i=(function(u,h){return u.useProto3Json?(We(h===void 0||typeof h=="string",58123),kt.fromBase64String(h||"")):(We(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),kt.fromUint8Array(h||new Uint8Array))})(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&(function(u){const h=u.code===void 0?J.UNKNOWN:yT(u.code);return new ce(h,u.message||"")})(o);n=new ET(s,r,i,a||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const r=xu(t,s.document.name),i=$n(s.document.updateTime),o=s.document.createTime?$n(s.document.createTime):Se.min(),a=new Xt({mapValue:{fields:s.document.fields}}),l=Bt.newFoundDocument(r,i,o,a),u=s.targetIds||[],h=s.removedTargetIds||[];n=new yc(u,h,l.key,l)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const r=xu(t,s.document),i=s.readTime?$n(s.readTime):Se.min(),o=Bt.newNoDocument(r,i),a=s.removedTargetIds||[];n=new yc([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const r=xu(t,s.document),i=s.removedTargetIds||[];n=new yc([],i,r,null)}else{if(!("filter"in e))return Ie(11601,{Rt:e});{e.filter;const s=e.filter;s.targetId;const{count:r=0,unchangedNames:i}=s,o=new zD(r,i),a=s.targetId;n=new vT(a,o)}}return n}function iO(t,e){let n;if(e instanceof va)n={update:jg(t,e.key,e.value)};else if(e instanceof Vl)n={delete:$h(t,e.key)};else if(e instanceof lr)n={update:jg(t,e.key,e.data),updateMask:pO(e.fieldMask)};else{if(!(e instanceof qD))return Ie(16599,{Vt:e.type});n={verify:$h(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((s=>(function(i,o){const a=o.transform;if(a instanceof ta)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof na)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof sa)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Yc)return{fieldPath:o.field.canonicalString(),increment:a.Ae};throw Ie(20930,{transform:o.transform})})(0,s)))),e.precondition.isNone||(n.currentDocument=(function(r,i){return i.updateTime!==void 0?{updateTime:nO(r,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:Ie(27497)})(t,e.precondition)),n}function oO(t,e){return t&&t.length>0?(We(e!==void 0,14353),t.map((n=>(function(r,i){let o=r.updateTime?$n(r.updateTime):$n(i);return o.isEqual(Se.min())&&(o=$n(i)),new $D(o,r.transformResults||[])})(n,e)))):[]}function aO(t,e){return{documents:[bT(t,e.path)]}}function cO(t,e){const n={structuredQuery:{}},s=e.path;let r;e.collectionGroup!==null?(r=s,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=s.popLast(),n.structuredQuery.from=[{collectionId:s.lastSegment()}]),n.parent=bT(t,r);const i=(function(u){if(u.length!==0)return RT(Pn.create(u,"and"))})(e.filters);i&&(n.structuredQuery.where=i);const o=(function(u){if(u.length!==0)return u.map((h=>(function(p){return{field:si(p.field),direction:hO(p.dir)}})(h)))})(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=Uh(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=(function(u){return{before:u.inclusive,values:u.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(u){return{before:!u.inclusive,values:u.position}})(e.endAt)),{ft:n,parent:r}}function lO(t){let e=sO(t.parent);const n=t.structuredQuery,s=n.from?n.from.length:0;let r=null;if(s>0){We(s===1,65062);const h=n.from[0];h.allDescendants?r=h.collectionId:e=e.child(h.collectionId)}let i=[];n.where&&(i=(function(f){const p=AT(f);return p instanceof Pn&&tT(p)?p.getFilters():[p]})(n.where));let o=[];n.orderBy&&(o=(function(f){return f.map((p=>(function(w){return new ea(ri(w.field),(function(k){switch(k){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(w.direction))})(p)))})(n.orderBy));let a=null;n.limit&&(a=(function(f){let p;return p=typeof f=="object"?f.value:f,Cl(p)?null:p})(n.limit));let l=null;n.startAt&&(l=(function(f){const p=!!f.before,g=f.values||[];return new Qc(g,p)})(n.startAt));let u=null;return n.endAt&&(u=(function(f){const p=!f.before,g=f.values||[];return new Qc(g,p)})(n.endAt)),SD(e,r,o,i,a,"F",l,u)}function uO(t,e){const n=(function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ie(28987,{purpose:r})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function AT(t){return t.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const s=ri(n.unaryFilter.field);return _t.create(s,"==",{doubleValue:NaN});case"IS_NULL":const r=ri(n.unaryFilter.field);return _t.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=ri(n.unaryFilter.field);return _t.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=ri(n.unaryFilter.field);return _t.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ie(61313);default:return Ie(60726)}})(t):t.fieldFilter!==void 0?(function(n){return _t.create(ri(n.fieldFilter.field),(function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ie(58110);default:return Ie(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(t):t.compositeFilter!==void 0?(function(n){return Pn.create(n.compositeFilter.filters.map((s=>AT(s))),(function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return Ie(1026)}})(n.compositeFilter.op))})(t):Ie(30097,{filter:t})}function hO(t){return XD[t]}function fO(t){return ZD[t]}function dO(t){return eO[t]}function si(t){return{fieldPath:t.canonicalString()}}function ri(t){return St.fromServerFormat(t.fieldPath)}function RT(t){return t instanceof _t?(function(n){if(n.op==="=="){if(kg(n.value))return{unaryFilter:{field:si(n.field),op:"IS_NAN"}};if(Pg(n.value))return{unaryFilter:{field:si(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(kg(n.value))return{unaryFilter:{field:si(n.field),op:"IS_NOT_NAN"}};if(Pg(n.value))return{unaryFilter:{field:si(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:si(n.field),op:fO(n.op),value:n.value}}})(t):t instanceof Pn?(function(n){const s=n.getFilters().map((r=>RT(r)));return s.length===1?s[0]:{compositeFilter:{op:dO(n.op),filters:s}}})(t):Ie(54877,{filter:t})}function pO(t){const e=[];return t.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function ST(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}class js{constructor(e,n,s,r,i=Se.min(),o=Se.min(),a=kt.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=s,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new js(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new js(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new js(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new js(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class mO{constructor(e){this.yt=e}}function gO(t){const e=lO({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Fh(e,e.limit,"L"):e}class _O{constructor(){this.Cn=new yO}addToCollectionParentIndex(e,n){return this.Cn.add(n),Z.resolve()}getCollectionParents(e,n){return Z.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return Z.resolve()}deleteFieldIndex(e,n){return Z.resolve()}deleteAllFieldIndexes(e){return Z.resolve()}createTargetIndexes(e,n){return Z.resolve()}getDocumentsMatchingTarget(e,n){return Z.resolve(null)}getIndexType(e,n){return Z.resolve(0)}getFieldIndexes(e,n){return Z.resolve([])}getNextCollectionGroupToUpdate(e){return Z.resolve(null)}getMinOffset(e,n){return Z.resolve(er.min())}getMinOffsetFromCollectionGroup(e,n){return Z.resolve(er.min())}updateCollectionGroup(e,n,s){return Z.resolve()}updateIndexEntries(e,n){return Z.resolve()}}class yO{constructor(){this.index={}}add(e){const n=e.lastSegment(),s=e.popLast(),r=this.index[n]||new It(Ze.comparator),i=!r.has(s);return this.index[n]=r.add(s),i}has(e){const n=e.lastSegment(),s=e.popLast(),r=this.index[n];return r&&r.has(s)}getEntries(e){return(this.index[e]||new It(Ze.comparator)).toArray()}}const qg={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},CT=41943040;class Yt{static withCacheSize(e){return new Yt(e,Yt.DEFAULT_COLLECTION_PERCENTILE,Yt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=s}}Yt.DEFAULT_COLLECTION_PERCENTILE=10,Yt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Yt.DEFAULT=new Yt(CT,Yt.DEFAULT_COLLECTION_PERCENTILE,Yt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Yt.DISABLED=new Yt(-1,0,0);class Oi{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Oi(0)}static cr(){return new Oi(-1)}}const Gg="LruGarbageCollector",vO=1048576;function Wg([t,e],[n,s]){const r=Ve(t,n);return r===0?Ve(e,s):r}class EO{constructor(e){this.Ir=e,this.buffer=new It(Wg),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const s=this.buffer.last();Wg(n,s)<0&&(this.buffer=this.buffer.delete(s).add(n))}}get maxValue(){return this.buffer.last()[0]}}class TO{constructor(e,n,s){this.garbageCollector=e,this.asyncQueue=n,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){de(Gg,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Gi(n)?de(Gg,"Ignoring IndexedDB error during garbage collection: ",n):await qi(n)}await this.Vr(3e5)}))}}class wO{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next((s=>Math.floor(n/100*s)))}nthSequenceNumber(e,n){if(n===0)return Z.resolve(Sl.ce);const s=new EO(n);return this.mr.forEachTarget(e,(r=>s.Ar(r.sequenceNumber))).next((()=>this.mr.pr(e,(r=>s.Ar(r))))).next((()=>s.maxValue))}removeTargets(e,n,s){return this.mr.removeTargets(e,n,s)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(de("LruGarbageCollector","Garbage collection skipped; disabled"),Z.resolve(qg)):this.getCacheSize(e).next((s=>s<this.params.cacheSizeCollectionThreshold?(de("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),qg):this.yr(e,n)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let s,r,i,o,a,l,u;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((f=>(f>this.params.maximumSequenceNumbersToCollect?(de("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),r=this.params.maximumSequenceNumbersToCollect):r=f,o=Date.now(),this.nthSequenceNumber(e,r)))).next((f=>(s=f,a=Date.now(),this.removeTargets(e,s,n)))).next((f=>(i=f,l=Date.now(),this.removeOrphanedDocuments(e,s)))).next((f=>(u=Date.now(),ti()<=Oe.DEBUG&&de("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-h}ms
	Determined least recently used ${r} in `+(a-o)+`ms
	Removed ${i} targets in `+(l-a)+`ms
	Removed ${f} documents in `+(u-l)+`ms
Total Duration: ${u-h}ms`),Z.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:f}))))}}function bO(t,e){return new wO(t,e)}class IO{constructor(){this.changes=new Gr((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Bt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const s=this.changes.get(n);return s!==void 0?Z.resolve(s):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class AO{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}class RO{constructor(e,n,s,r){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=s,this.indexManager=r}getDocument(e,n){let s=null;return this.documentOverlayCache.getOverlay(e,n).next((r=>(s=r,this.remoteDocumentCache.getEntry(e,n)))).next((r=>(s!==null&&xo(s.mutation,r,on.empty(),et.now()),r)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((s=>this.getLocalViewOfDocuments(e,s,Le()).next((()=>s))))}getLocalViewOfDocuments(e,n,s=Le()){const r=Sr();return this.populateOverlays(e,r,n).next((()=>this.computeViews(e,n,r,s).next((i=>{let o=wo();return i.forEach(((a,l)=>{o=o.insert(a,l.overlayedDocument)})),o}))))}getOverlayedDocuments(e,n){const s=Sr();return this.populateOverlays(e,s,n).next((()=>this.computeViews(e,n,s,Le())))}populateOverlays(e,n,s){const r=[];return s.forEach((i=>{n.has(i)||r.push(i)})),this.documentOverlayCache.getOverlays(e,r).next((i=>{i.forEach(((o,a)=>{n.set(o,a)}))}))}computeViews(e,n,s,r){let i=gs();const o=Mo(),a=(function(){return Mo()})();return n.forEach(((l,u)=>{const h=s.get(u.key);r.has(u.key)&&(h===void 0||h.mutation instanceof lr)?i=i.insert(u.key,u):h!==void 0?(o.set(u.key,h.mutation.getFieldMask()),xo(h.mutation,u,h.mutation.getFieldMask(),et.now())):o.set(u.key,on.empty())})),this.recalculateAndSaveOverlays(e,i).next((l=>(l.forEach(((u,h)=>o.set(u,h))),n.forEach(((u,h)=>a.set(u,new AO(h,o.get(u)??null)))),a)))}recalculateAndSaveOverlays(e,n){const s=Mo();let r=new st(((o,a)=>o-a)),i=Le();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((o=>{for(const a of o)a.keys().forEach((l=>{const u=n.get(l);if(u===null)return;let h=s.get(l)||on.empty();h=a.applyToLocalView(u,h),s.set(l,h);const f=(r.get(a.batchId)||Le()).add(l);r=r.insert(a.batchId,f)}))})).next((()=>{const o=[],a=r.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),u=l.key,h=l.value,f=uT();h.forEach((p=>{if(!i.has(p)){const g=gT(n.get(p),s.get(p));g!==null&&f.set(p,g),i=i.add(p)}})),o.push(this.documentOverlayCache.saveOverlays(e,u,f))}return Z.waitFor(o)})).next((()=>s))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((s=>this.recalculateAndSaveOverlays(e,s)))}getDocumentsMatchingQuery(e,n,s,r){return(function(o){return ye.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):iT(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,s,r):this.getDocumentsMatchingCollectionQuery(e,n,s,r)}getNextDocuments(e,n,s,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,s,r).next((i=>{const o=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,s.largestBatchId,r-i.size):Z.resolve(Sr());let a=Jo,l=i;return o.next((u=>Z.forEach(u,((h,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),i.get(h)?Z.resolve():this.remoteDocumentCache.getEntry(e,h).next((p=>{l=l.insert(h,p)}))))).next((()=>this.populateOverlays(e,u,i))).next((()=>this.computeViews(e,l,u,Le()))).next((h=>({batchId:a,changes:lT(h)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ye(n)).next((s=>{let r=wo();return s.isFoundDocument()&&(r=r.insert(s.key,s)),r}))}getDocumentsMatchingCollectionGroupQuery(e,n,s,r){const i=n.collectionGroup;let o=wo();return this.indexManager.getCollectionParents(e,i).next((a=>Z.forEach(a,(l=>{const u=(function(f,p){return new Wi(p,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)})(n,l.child(i));return this.getDocumentsMatchingCollectionQuery(e,u,s,r).next((h=>{h.forEach(((f,p)=>{o=o.insert(f,p)}))}))})).next((()=>o))))}getDocumentsMatchingCollectionQuery(e,n,s,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,s.largestBatchId).next((o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,s,i,r)))).next((o=>{i.forEach(((l,u)=>{const h=u.getKey();o.get(h)===null&&(o=o.insert(h,Bt.newInvalidDocument(h)))}));let a=wo();return o.forEach(((l,u)=>{const h=i.get(l);h!==void 0&&xo(h.mutation,u,on.empty(),et.now()),Nl(n,u)&&(a=a.insert(l,u))})),a}))}}class SO{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return Z.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,(function(r){return{id:r.id,version:r.version,createTime:$n(r.createTime)}})(n)),Z.resolve()}getNamedQuery(e,n){return Z.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,(function(r){return{name:r.name,query:gO(r.bundledQuery),readTime:$n(r.readTime)}})(n)),Z.resolve()}}class CO{constructor(){this.overlays=new st(ye.comparator),this.qr=new Map}getOverlay(e,n){return Z.resolve(this.overlays.get(n))}getOverlays(e,n){const s=Sr();return Z.forEach(n,(r=>this.getOverlay(e,r).next((i=>{i!==null&&s.set(r,i)})))).next((()=>s))}saveOverlays(e,n,s){return s.forEach(((r,i)=>{this.St(e,n,i)})),Z.resolve()}removeOverlaysForBatchId(e,n,s){const r=this.qr.get(s);return r!==void 0&&(r.forEach((i=>this.overlays=this.overlays.remove(i))),this.qr.delete(s)),Z.resolve()}getOverlaysForCollection(e,n,s){const r=Sr(),i=n.length+1,o=new ye(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,u=l.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===i&&l.largestBatchId>s&&r.set(l.getKey(),l)}return Z.resolve(r)}getOverlaysForCollectionGroup(e,n,s,r){let i=new st(((u,h)=>u-h));const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>s){let h=i.get(u.largestBatchId);h===null&&(h=Sr(),i=i.insert(u.largestBatchId,h)),h.set(u.getKey(),u)}}const a=Sr(),l=i.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach(((u,h)=>a.set(u,h))),!(a.size()>=r)););return Z.resolve(a)}St(e,n,s){const r=this.overlays.get(s.key);if(r!==null){const o=this.qr.get(r.largestBatchId).delete(s.key);this.qr.set(r.largestBatchId,o)}this.overlays=this.overlays.insert(s.key,new WD(n,s));let i=this.qr.get(n);i===void 0&&(i=Le(),this.qr.set(n,i)),this.qr.set(n,i.add(s.key))}}class PO{constructor(){this.sessionToken=kt.EMPTY_BYTE_STRING}getSessionToken(e){return Z.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,Z.resolve()}}class ed{constructor(){this.Qr=new It(Rt.$r),this.Ur=new It(Rt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const s=new Rt(e,n);this.Qr=this.Qr.add(s),this.Ur=this.Ur.add(s)}Wr(e,n){e.forEach((s=>this.addReference(s,n)))}removeReference(e,n){this.Gr(new Rt(e,n))}zr(e,n){e.forEach((s=>this.removeReference(s,n)))}jr(e){const n=new ye(new Ze([])),s=new Rt(n,e),r=new Rt(n,e+1),i=[];return this.Ur.forEachInRange([s,r],(o=>{this.Gr(o),i.push(o.key)})),i}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new ye(new Ze([])),s=new Rt(n,e),r=new Rt(n,e+1);let i=Le();return this.Ur.forEachInRange([s,r],(o=>{i=i.add(o.key)})),i}containsKey(e){const n=new Rt(e,0),s=this.Qr.firstAfterOrEqual(n);return s!==null&&e.isEqual(s.key)}}class Rt{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return ye.comparator(e.key,n.key)||Ve(e.Yr,n.Yr)}static Kr(e,n){return Ve(e.Yr,n.Yr)||ye.comparator(e.key,n.key)}}class kO{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new It(Rt.$r)}checkEmpty(e){return Z.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,s,r){const i=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new GD(i,n,s,r);this.mutationQueue.push(o);for(const a of r)this.Zr=this.Zr.add(new Rt(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return Z.resolve(o)}lookupMutationBatch(e,n){return Z.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const s=n+1,r=this.ei(s),i=r<0?0:r;return Z.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return Z.resolve(this.mutationQueue.length===0?qf:this.tr-1)}getAllMutationBatches(e){return Z.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const s=new Rt(n,0),r=new Rt(n,Number.POSITIVE_INFINITY),i=[];return this.Zr.forEachInRange([s,r],(o=>{const a=this.Xr(o.Yr);i.push(a)})),Z.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let s=new It(Ve);return n.forEach((r=>{const i=new Rt(r,0),o=new Rt(r,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([i,o],(a=>{s=s.add(a.Yr)}))})),Z.resolve(this.ti(s))}getAllMutationBatchesAffectingQuery(e,n){const s=n.path,r=s.length+1;let i=s;ye.isDocumentKey(i)||(i=i.child(""));const o=new Rt(new ye(i),0);let a=new It(Ve);return this.Zr.forEachWhile((l=>{const u=l.key.path;return!!s.isPrefixOf(u)&&(u.length===r&&(a=a.add(l.Yr)),!0)}),o),Z.resolve(this.ti(a))}ti(e){const n=[];return e.forEach((s=>{const r=this.Xr(s);r!==null&&n.push(r)})),n}removeMutationBatch(e,n){We(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Zr;return Z.forEach(n.mutations,(r=>{const i=new Rt(r.key,n.batchId);return s=s.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)})).next((()=>{this.Zr=s}))}ir(e){}containsKey(e,n){const s=new Rt(n,0),r=this.Zr.firstAfterOrEqual(s);return Z.resolve(n.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,Z.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class NO{constructor(e){this.ri=e,this.docs=(function(){return new st(ye.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const s=n.key,r=this.docs.get(s),i=r?r.size:0,o=this.ri(n);return this.docs=this.docs.insert(s,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const s=this.docs.get(n);return Z.resolve(s?s.document.mutableCopy():Bt.newInvalidDocument(n))}getEntries(e,n){let s=gs();return n.forEach((r=>{const i=this.docs.get(r);s=s.insert(r,i?i.document.mutableCopy():Bt.newInvalidDocument(r))})),Z.resolve(s)}getDocumentsMatchingQuery(e,n,s,r){let i=gs();const o=n.path,a=new ye(o.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:u,value:{document:h}}=l.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||iD(rD(h),s)<=0||(r.has(h.key)||Nl(n,h))&&(i=i.insert(h.key,h.mutableCopy()))}return Z.resolve(i)}getAllFromCollectionGroup(e,n,s,r){Ie(9500)}ii(e,n){return Z.forEach(this.docs,(s=>n(s)))}newChangeBuffer(e){return new DO(this)}getSize(e){return Z.resolve(this.size)}}class DO extends IO{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach(((s,r)=>{r.isValidDocument()?n.push(this.Nr.addEntry(e,r)):this.Nr.removeEntry(s)})),Z.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}class OO{constructor(e){this.persistence=e,this.si=new Gr((n=>zf(n)),Kf),this.lastRemoteSnapshotVersion=Se.min(),this.highestTargetId=0,this.oi=0,this._i=new ed,this.targetCount=0,this.ai=Oi.ur()}forEachTarget(e,n){return this.si.forEach(((s,r)=>n(r))),Z.resolve()}getLastRemoteSnapshotVersion(e){return Z.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Z.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),Z.resolve(this.highestTargetId)}setTargetsMetadata(e,n,s){return s&&(this.lastRemoteSnapshotVersion=s),n>this.oi&&(this.oi=n),Z.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new Oi(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,Z.resolve()}updateTargetData(e,n){return this.Pr(n),Z.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,Z.resolve()}removeTargets(e,n,s){let r=0;const i=[];return this.si.forEach(((o,a)=>{a.sequenceNumber<=n&&s.get(a.targetId)===null&&(this.si.delete(o),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),r++)})),Z.waitFor(i).next((()=>r))}getTargetCount(e){return Z.resolve(this.targetCount)}getTargetData(e,n){const s=this.si.get(n)||null;return Z.resolve(s)}addMatchingKeys(e,n,s){return this._i.Wr(n,s),Z.resolve()}removeMatchingKeys(e,n,s){this._i.zr(n,s);const r=this.persistence.referenceDelegate,i=[];return r&&n.forEach((o=>{i.push(r.markPotentiallyOrphaned(e,o))})),Z.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),Z.resolve()}getMatchingKeysForTargetId(e,n){const s=this._i.Hr(n);return Z.resolve(s)}containsKey(e,n){return Z.resolve(this._i.containsKey(n))}}class PT{constructor(e,n){this.ui={},this.overlays={},this.ci=new Sl(0),this.li=!1,this.li=!0,this.hi=new PO,this.referenceDelegate=e(this),this.Pi=new OO(this),this.indexManager=new _O,this.remoteDocumentCache=(function(r){return new NO(r)})((s=>this.referenceDelegate.Ti(s))),this.serializer=new mO(n),this.Ii=new SO(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new CO,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let s=this.ui[e.toKey()];return s||(s=new kO(n,this.referenceDelegate),this.ui[e.toKey()]=s),s}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,s){de("MemoryPersistence","Starting transaction:",e);const r=new VO(this.ci.next());return this.referenceDelegate.Ei(),s(r).next((i=>this.referenceDelegate.di(r).next((()=>i)))).toPromise().then((i=>(r.raiseOnCommittedEvent(),i)))}Ai(e,n){return Z.or(Object.values(this.ui).map((s=>()=>s.containsKey(e,n))))}}class VO extends aD{constructor(e){super(),this.currentSequenceNumber=e}}class td{constructor(e){this.persistence=e,this.Ri=new ed,this.Vi=null}static mi(e){return new td(e)}get fi(){if(this.Vi)return this.Vi;throw Ie(60996)}addReference(e,n,s){return this.Ri.addReference(s,n),this.fi.delete(s.toString()),Z.resolve()}removeReference(e,n,s){return this.Ri.removeReference(s,n),this.fi.add(s.toString()),Z.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),Z.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach((r=>this.fi.add(r.toString())));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,n.targetId).next((r=>{r.forEach((i=>this.fi.add(i.toString())))})).next((()=>s.removeTargetData(e,n)))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Z.forEach(this.fi,(s=>{const r=ye.fromPath(s);return this.gi(e,r).next((i=>{i||n.removeEntry(r,Se.min())}))})).next((()=>(this.Vi=null,n.apply(e))))}updateLimboDocument(e,n){return this.gi(e,n).next((s=>{s?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(e){return 0}gi(e,n){return Z.or([()=>Z.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class Xc{constructor(e,n){this.persistence=e,this.pi=new Gr((s=>uD(s.path)),((s,r)=>s.isEqual(r))),this.garbageCollector=bO(this,n)}static mi(e,n){return new Xc(e,n)}Ei(){}di(e){return Z.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((s=>n.next((r=>s+r))))}wr(e){let n=0;return this.pr(e,(s=>{n++})).next((()=>n))}pr(e,n){return Z.forEach(this.pi,((s,r)=>this.br(e,s,r).next((i=>i?Z.resolve():n(r)))))}removeTargets(e,n,s){return this.persistence.getTargetCache().removeTargets(e,n,s)}removeOrphanedDocuments(e,n){let s=0;const r=this.persistence.getRemoteDocumentCache(),i=r.newChangeBuffer();return r.ii(e,(o=>this.br(e,o,n).next((a=>{a||(s++,i.removeEntry(o,Se.min()))})))).next((()=>i.apply(e))).next((()=>s))}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),Z.resolve()}removeTarget(e,n){const s=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,n,s){return this.pi.set(s,e.currentSequenceNumber),Z.resolve()}removeReference(e,n,s){return this.pi.set(s,e.currentSequenceNumber),Z.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),Z.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=mc(e.data.value)),n}br(e,n,s){return Z.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const r=this.pi.get(n);return Z.resolve(r!==void 0&&r>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class nd{constructor(e,n,s,r){this.targetId=e,this.fromCache=n,this.Es=s,this.ds=r}static As(e,n){let s=Le(),r=Le();for(const i of n.docChanges)switch(i.type){case 0:s=s.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new nd(e,n.fromCache,s,r)}}class LO{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class MO{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return hP()?8:cD($t())>0?6:4})()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,s,r){const i={result:null};return this.ys(e,n).next((o=>{i.result=o})).next((()=>{if(!i.result)return this.ws(e,n,r,s).next((o=>{i.result=o}))})).next((()=>{if(i.result)return;const o=new LO;return this.Ss(e,n,o).next((a=>{if(i.result=a,this.Vs)return this.bs(e,n,o,a.size)}))})).next((()=>i.result))}bs(e,n,s,r){return s.documentReadCount<this.fs?(ti()<=Oe.DEBUG&&de("QueryEngine","SDK will not create cache indexes for query:",ni(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),Z.resolve()):(ti()<=Oe.DEBUG&&de("QueryEngine","Query:",ni(n),"scans",s.documentReadCount,"local documents and returns",r,"documents as results."),s.documentReadCount>this.gs*r?(ti()<=Oe.DEBUG&&de("QueryEngine","The SDK decides to create cache indexes for query:",ni(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Bn(n))):Z.resolve())}ys(e,n){if(Vg(n))return Z.resolve(null);let s=Bn(n);return this.indexManager.getIndexType(e,s).next((r=>r===0?null:(n.limit!==null&&r===1&&(n=Fh(n,null,"F"),s=Bn(n)),this.indexManager.getDocumentsMatchingTarget(e,s).next((i=>{const o=Le(...i);return this.ps.getDocuments(e,o).next((a=>this.indexManager.getMinOffset(e,s).next((l=>{const u=this.Ds(n,a);return this.Cs(n,u,o,l.readTime)?this.ys(e,Fh(n,null,"F")):this.vs(e,u,n,l)}))))})))))}ws(e,n,s,r){return Vg(n)||r.isEqual(Se.min())?Z.resolve(null):this.ps.getDocuments(e,s).next((i=>{const o=this.Ds(n,i);return this.Cs(n,o,s,r)?Z.resolve(null):(ti()<=Oe.DEBUG&&de("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),ni(n)),this.vs(e,o,n,sD(r,Jo)).next((a=>a)))}))}Ds(e,n){let s=new It(aT(e));return n.forEach(((r,i)=>{Nl(e,i)&&(s=s.add(i))})),s}Cs(e,n,s,r){if(e.limit===null)return!1;if(s.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Ss(e,n,s){return ti()<=Oe.DEBUG&&de("QueryEngine","Using full collection scan to execute query:",ni(n)),this.ps.getDocumentsMatchingQuery(e,n,er.min(),s)}vs(e,n,s,r){return this.ps.getDocumentsMatchingQuery(e,s,r).next((i=>(n.forEach((o=>{i=i.insert(o.key,o)})),i)))}}const sd="LocalStore",xO=3e8;class FO{constructor(e,n,s,r){this.persistence=e,this.Fs=n,this.serializer=r,this.Ms=new st(Ve),this.xs=new Gr((i=>zf(i)),Kf),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(s)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new RO(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.Ms)))}}function UO(t,e,n,s){return new FO(t,e,n,s)}async function kT(t,e){const n=Ce(t);return await n.persistence.runTransaction("Handle user change","readonly",(s=>{let r;return n.mutationQueue.getAllMutationBatches(s).next((i=>(r=i,n.Bs(e),n.mutationQueue.getAllMutationBatches(s)))).next((i=>{const o=[],a=[];let l=Le();for(const u of r){o.push(u.batchId);for(const h of u.mutations)l=l.add(h.key)}for(const u of i){a.push(u.batchId);for(const h of u.mutations)l=l.add(h.key)}return n.localDocuments.getDocuments(s,l).next((u=>({Ls:u,removedBatchIds:o,addedBatchIds:a})))}))}))}function BO(t,e){const n=Ce(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(s=>{const r=e.batch.keys(),i=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(a,l,u,h){const f=u.batch,p=f.keys();let g=Z.resolve();return p.forEach((w=>{g=g.next((()=>h.getEntry(l,w))).next((v=>{const k=u.docVersions.get(w);We(k!==null,48541),v.version.compareTo(k)<0&&(f.applyToRemoteDocument(v,u),v.isValidDocument()&&(v.setReadTime(u.commitVersion),h.addEntry(v)))}))})),g.next((()=>a.mutationQueue.removeMutationBatch(l,f)))})(n,s,e,i).next((()=>i.apply(s))).next((()=>n.mutationQueue.performConsistencyCheck(s))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(s,r,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,(function(a){let l=Le();for(let u=0;u<a.mutationResults.length;++u)a.mutationResults[u].transformResults.length>0&&(l=l.add(a.batch.mutations[u].key));return l})(e)))).next((()=>n.localDocuments.getDocuments(s,r)))}))}function NT(t){const e=Ce(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.Pi.getLastRemoteSnapshotVersion(n)))}function $O(t,e){const n=Ce(t),s=e.snapshotVersion;let r=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(i=>{const o=n.Ns.newChangeBuffer({trackRemovals:!0});r=n.Ms;const a=[];e.targetChanges.forEach(((h,f)=>{const p=r.get(f);if(!p)return;a.push(n.Pi.removeMatchingKeys(i,h.removedDocuments,f).next((()=>n.Pi.addMatchingKeys(i,h.addedDocuments,f))));let g=p.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(f)!==null?g=g.withResumeToken(kt.EMPTY_BYTE_STRING,Se.min()).withLastLimboFreeSnapshotVersion(Se.min()):h.resumeToken.approximateByteSize()>0&&(g=g.withResumeToken(h.resumeToken,s)),r=r.insert(f,g),(function(v,k,M){return v.resumeToken.approximateByteSize()===0||k.snapshotVersion.toMicroseconds()-v.snapshotVersion.toMicroseconds()>=xO?!0:M.addedDocuments.size+M.modifiedDocuments.size+M.removedDocuments.size>0})(p,g,h)&&a.push(n.Pi.updateTargetData(i,g))}));let l=gs(),u=Le();if(e.documentUpdates.forEach((h=>{e.resolvedLimboDocuments.has(h)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(i,h))})),a.push(HO(i,o,e.documentUpdates).next((h=>{l=h.ks,u=h.qs}))),!s.isEqual(Se.min())){const h=n.Pi.getLastRemoteSnapshotVersion(i).next((f=>n.Pi.setTargetsMetadata(i,i.currentSequenceNumber,s)));a.push(h)}return Z.waitFor(a).next((()=>o.apply(i))).next((()=>n.localDocuments.getLocalViewOfDocuments(i,l,u))).next((()=>l))})).then((i=>(n.Ms=r,i)))}function HO(t,e,n){let s=Le(),r=Le();return n.forEach((i=>s=s.add(i))),e.getEntries(t,s).next((i=>{let o=gs();return n.forEach(((a,l)=>{const u=i.get(a);l.isFoundDocument()!==u.isFoundDocument()&&(r=r.add(a)),l.isNoDocument()&&l.version.isEqual(Se.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!u.isValidDocument()||l.version.compareTo(u.version)>0||l.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):de(sd,"Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",l.version)})),{ks:o,qs:r}}))}function jO(t,e){const n=Ce(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(s=>(e===void 0&&(e=qf),n.mutationQueue.getNextMutationBatchAfterBatchId(s,e))))}function qO(t,e){const n=Ce(t);return n.persistence.runTransaction("Allocate target","readwrite",(s=>{let r;return n.Pi.getTargetData(s,e).next((i=>i?(r=i,Z.resolve(r)):n.Pi.allocateTargetId(s).next((o=>(r=new js(e,o,"TargetPurposeListen",s.currentSequenceNumber),n.Pi.addTargetData(s,r).next((()=>r)))))))})).then((s=>{const r=n.Ms.get(s.targetId);return(r===null||s.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(s.targetId,s),n.xs.set(e,s.targetId)),s}))}async function jh(t,e,n){const s=Ce(t),r=s.Ms.get(e),i=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",i,(o=>s.persistence.referenceDelegate.removeTarget(o,r)))}catch(o){if(!Gi(o))throw o;de(sd,`Failed to update sequence numbers for target ${e}: ${o}`)}s.Ms=s.Ms.remove(e),s.xs.delete(r.target)}function zg(t,e,n){const s=Ce(t);let r=Se.min(),i=Le();return s.persistence.runTransaction("Execute query","readwrite",(o=>(function(l,u,h){const f=Ce(l),p=f.xs.get(h);return p!==void 0?Z.resolve(f.Ms.get(p)):f.Pi.getTargetData(u,h)})(s,o,Bn(e)).next((a=>{if(a)return r=a.lastLimboFreeSnapshotVersion,s.Pi.getMatchingKeysForTargetId(o,a.targetId).next((l=>{i=l}))})).next((()=>s.Fs.getDocumentsMatchingQuery(o,e,n?r:Se.min(),n?i:Le()))).next((a=>(GO(s,PD(e),a),{documents:a,Qs:i})))))}function GO(t,e,n){let s=t.Os.get(e)||Se.min();n.forEach(((r,i)=>{i.readTime.compareTo(s)>0&&(s=i.readTime)})),t.Os.set(e,s)}class Kg{constructor(){this.activeTargetIds=LD()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class WO{constructor(){this.Mo=new Kg,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,s){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,s){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Kg,Promise.resolve()}handleUserChange(e,n,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class zO{Oo(e){}shutdown(){}}const Qg="ConnectivityMonitor";class Yg{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){de(Qg,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){de(Qg,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let tc=null;function qh(){return tc===null?tc=(function(){return 268435456+Math.round(2147483648*Math.random())})():tc++,"0x"+tc.toString(16)}const Fu="RestConnection",KO={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class QO{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${s}/databases/${r}`,this.Wo=this.databaseId.database===zc?`project_id=${s}`:`project_id=${s}&database_id=${r}`}Go(e,n,s,r,i){const o=qh(),a=this.zo(e,n.toUriEncodedString());de(Fu,`Sending RPC '${e}' ${o}:`,a,s);const l={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(l,r,i);const{host:u}=new URL(a),h=Bi(u);return this.Jo(e,a,l,s,h).then((f=>(de(Fu,`Received RPC '${e}' ${o}: `,f),f)),(f=>{throw Br(Fu,`RPC '${e}' ${o} failed with error: `,f,"url: ",a,"request:",s),f}))}Ho(e,n,s,r,i,o){return this.Go(e,n,s,r,i)}jo(e,n,s){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+ji})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((r,i)=>e[i]=r)),s&&s.headers.forEach(((r,i)=>e[i]=r))}zo(e,n){const s=KO[e];return`${this.Uo}/v1/${n}:${s}`}terminate(){}}class YO{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const Mt="WebChannelConnection";class JO extends QO{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,s,r,i){const o=qh();return new Promise(((a,l)=>{const u=new DE;u.setWithCredentials(!0),u.listenOnce(OE.COMPLETE,(()=>{try{switch(u.getLastErrorCode()){case pc.NO_ERROR:const f=u.getResponseJson();de(Mt,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(f)),a(f);break;case pc.TIMEOUT:de(Mt,`RPC '${e}' ${o} timed out`),l(new ce(J.DEADLINE_EXCEEDED,"Request time out"));break;case pc.HTTP_ERROR:const p=u.getStatus();if(de(Mt,`RPC '${e}' ${o} failed with status:`,p,"response text:",u.getResponseText()),p>0){let g=u.getResponseJson();Array.isArray(g)&&(g=g[0]);const w=g?.error;if(w&&w.status&&w.message){const v=(function(M){const V=M.toLowerCase().replace(/_/g,"-");return Object.values(J).indexOf(V)>=0?V:J.UNKNOWN})(w.status);l(new ce(v,w.message))}else l(new ce(J.UNKNOWN,"Server responded with status "+u.getStatus()))}else l(new ce(J.UNAVAILABLE,"Connection failed."));break;default:Ie(9055,{l_:e,streamId:o,h_:u.getLastErrorCode(),P_:u.getLastError()})}}finally{de(Mt,`RPC '${e}' ${o} completed.`)}}));const h=JSON.stringify(r);de(Mt,`RPC '${e}' ${o} sending request:`,r),u.send(n,"POST",h,s,15)}))}T_(e,n,s){const r=qh(),i=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=ME(),a=LE(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(l.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(l.useFetchStreams=!0),this.jo(l.initMessageHeaders,n,s),l.encodeInitMessageHeaders=!0;const h=i.join("");de(Mt,`Creating RPC '${e}' stream ${r}: ${h}`,l);const f=o.createWebChannel(h,l);this.I_(f);let p=!1,g=!1;const w=new YO({Yo:k=>{g?de(Mt,`Not sending because RPC '${e}' stream ${r} is closed:`,k):(p||(de(Mt,`Opening RPC '${e}' stream ${r} transport.`),f.open(),p=!0),de(Mt,`RPC '${e}' stream ${r} sending:`,k),f.send(k))},Zo:()=>f.close()}),v=(k,M,V)=>{k.listen(M,(_=>{try{V(_)}catch(I){setTimeout((()=>{throw I}),0)}}))};return v(f,To.EventType.OPEN,(()=>{g||(de(Mt,`RPC '${e}' stream ${r} transport opened.`),w.o_())})),v(f,To.EventType.CLOSE,(()=>{g||(g=!0,de(Mt,`RPC '${e}' stream ${r} transport closed`),w.a_(),this.E_(f))})),v(f,To.EventType.ERROR,(k=>{g||(g=!0,Br(Mt,`RPC '${e}' stream ${r} transport errored. Name:`,k.name,"Message:",k.message),w.a_(new ce(J.UNAVAILABLE,"The operation could not be completed")))})),v(f,To.EventType.MESSAGE,(k=>{if(!g){const M=k.data[0];We(!!M,16349);const V=M,_=V?.error||V[0]?.error;if(_){de(Mt,`RPC '${e}' stream ${r} received error:`,_);const I=_.status;let O=(function(T){const E=pt[T];if(E!==void 0)return yT(E)})(I),F=_.message;O===void 0&&(O=J.INTERNAL,F="Unknown error status: "+I+" with message "+_.message),g=!0,w.a_(new ce(O,F)),f.close()}else de(Mt,`RPC '${e}' stream ${r} received:`,M),w.u_(M)}})),v(a,VE.STAT_EVENT,(k=>{k.stat===Nh.PROXY?de(Mt,`RPC '${e}' stream ${r} detected buffering proxy`):k.stat===Nh.NOPROXY&&de(Mt,`RPC '${e}' stream ${r} detected no buffering proxy`)})),setTimeout((()=>{w.__()}),0),w}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((n=>n===e))}}function Uu(){return typeof document<"u"?document:null}function Ml(t){return new tO(t,!0)}class DT{constructor(e,n,s=1e3,r=1.5,i=6e4){this.Mi=e,this.timerId=n,this.d_=s,this.A_=r,this.R_=i,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),s=Math.max(0,Date.now()-this.f_),r=Math.max(0,n-s);r>0&&de("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,r,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const Jg="PersistentStream";class OT{constructor(e,n,s,r,i,o,a,l){this.Mi=e,this.S_=s,this.b_=r,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new DT(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===J.RESOURCE_EXHAUSTED?(ms(n.toString()),ms("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===J.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([s,r])=>{this.D_===n&&this.G_(s,r)}),(s=>{e((()=>{const r=new ce(J.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(r)}))}))}G_(e,n){const s=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo((()=>{s((()=>this.listener.Xo()))})),this.stream.t_((()=>{s((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((r=>{s((()=>this.z_(r)))})),this.stream.onMessage((r=>{s((()=>++this.F_==1?this.J_(r):this.onNext(r)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return de(Jg,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget((()=>this.D_===e?n():(de(Jg,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class XO extends OT{constructor(e,n,s,r,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,s,r,o),this.serializer=i}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=rO(this.serializer,e),s=(function(i){if(!("targetChange"in i))return Se.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?Se.min():o.readTime?$n(o.readTime):Se.min()})(e);return this.listener.H_(n,s)}Y_(e){const n={};n.database=Hh(this.serializer),n.addTarget=(function(i,o){let a;const l=o.target;if(a=Mh(l)?{documents:aO(i,l)}:{query:cO(i,l).ft},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=TT(i,o.resumeToken);const u=Uh(i,o.expectedCount);u!==null&&(a.expectedCount=u)}else if(o.snapshotVersion.compareTo(Se.min())>0){a.readTime=Jc(i,o.snapshotVersion.toTimestamp());const u=Uh(i,o.expectedCount);u!==null&&(a.expectedCount=u)}return a})(this.serializer,e);const s=uO(this.serializer,e);s&&(n.labels=s),this.q_(n)}Z_(e){const n={};n.database=Hh(this.serializer),n.removeTarget=e,this.q_(n)}}class ZO extends OT{constructor(e,n,s,r,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,s,r,o),this.serializer=i}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return We(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,We(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){We(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=oO(e.writeResults,e.commitTime),s=$n(e.commitTime);return this.listener.na(s,n)}ra(){const e={};e.database=Hh(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((s=>iO(this.serializer,s)))};this.q_(n)}}class eV{}class tV extends eV{constructor(e,n,s,r){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=s,this.serializer=r,this.ia=!1}sa(){if(this.ia)throw new ce(J.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,s,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([i,o])=>this.connection.Go(e,Bh(n,s),r,i,o))).catch((i=>{throw i.name==="FirebaseError"?(i.code===J.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new ce(J.UNKNOWN,i.toString())}))}Ho(e,n,s,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([o,a])=>this.connection.Ho(e,Bh(n,s),r,o,a,i))).catch((o=>{throw o.name==="FirebaseError"?(o.code===J.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ce(J.UNKNOWN,o.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class nV{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(ms(n),this.aa=!1):de("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const $r="RemoteStore";class sV{constructor(e,n,s,r,i){this.localStore=e,this.datastore=n,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=i,this.Aa.Oo((o=>{s.enqueueAndForget((async()=>{Wr(this)&&(de($r,"Restarting streams for network reachability change."),await(async function(l){const u=Ce(l);u.Ea.add(4),await Ta(u),u.Ra.set("Unknown"),u.Ea.delete(4),await xl(u)})(this))}))})),this.Ra=new nV(s,r)}}async function xl(t){if(Wr(t))for(const e of t.da)await e(!0)}async function Ta(t){for(const e of t.da)await e(!1)}function VT(t,e){const n=Ce(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),ad(n)?od(n):zi(n).O_()&&id(n,e))}function rd(t,e){const n=Ce(t),s=zi(n);n.Ia.delete(e),s.O_()&&LT(n,e),n.Ia.size===0&&(s.O_()?s.L_():Wr(n)&&n.Ra.set("Unknown"))}function id(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Se.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}zi(t).Y_(e)}function LT(t,e){t.Va.Ue(e),zi(t).Z_(e)}function od(t){t.Va=new JD({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),zi(t).start(),t.Ra.ua()}function ad(t){return Wr(t)&&!zi(t).x_()&&t.Ia.size>0}function Wr(t){return Ce(t).Ea.size===0}function MT(t){t.Va=void 0}async function rV(t){t.Ra.set("Online")}async function iV(t){t.Ia.forEach(((e,n)=>{id(t,e)}))}async function oV(t,e){MT(t),ad(t)?(t.Ra.ha(e),od(t)):t.Ra.set("Unknown")}async function aV(t,e,n){if(t.Ra.set("Online"),e instanceof ET&&e.state===2&&e.cause)try{await(async function(r,i){const o=i.cause;for(const a of i.targetIds)r.Ia.has(a)&&(await r.remoteSyncer.rejectListen(a,o),r.Ia.delete(a),r.Va.removeTarget(a))})(t,e)}catch(s){de($r,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await Zc(t,s)}else if(e instanceof yc?t.Va.Ze(e):e instanceof vT?t.Va.st(e):t.Va.tt(e),!n.isEqual(Se.min()))try{const s=await NT(t.localStore);n.compareTo(s)>=0&&await(function(i,o){const a=i.Va.Tt(o);return a.targetChanges.forEach(((l,u)=>{if(l.resumeToken.approximateByteSize()>0){const h=i.Ia.get(u);h&&i.Ia.set(u,h.withResumeToken(l.resumeToken,o))}})),a.targetMismatches.forEach(((l,u)=>{const h=i.Ia.get(l);if(!h)return;i.Ia.set(l,h.withResumeToken(kt.EMPTY_BYTE_STRING,h.snapshotVersion)),LT(i,l);const f=new js(h.target,l,u,h.sequenceNumber);id(i,f)})),i.remoteSyncer.applyRemoteEvent(a)})(t,n)}catch(s){de($r,"Failed to raise snapshot:",s),await Zc(t,s)}}async function Zc(t,e,n){if(!Gi(e))throw e;t.Ea.add(1),await Ta(t),t.Ra.set("Offline"),n||(n=()=>NT(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{de($r,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await xl(t)}))}function xT(t,e){return e().catch((n=>Zc(t,n,e)))}async function Fl(t){const e=Ce(t),n=rr(e);let s=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:qf;for(;cV(e);)try{const r=await jO(e.localStore,s);if(r===null){e.Ta.length===0&&n.L_();break}s=r.batchId,lV(e,r)}catch(r){await Zc(e,r)}FT(e)&&UT(e)}function cV(t){return Wr(t)&&t.Ta.length<10}function lV(t,e){t.Ta.push(e);const n=rr(t);n.O_()&&n.X_&&n.ea(e.mutations)}function FT(t){return Wr(t)&&!rr(t).x_()&&t.Ta.length>0}function UT(t){rr(t).start()}async function uV(t){rr(t).ra()}async function hV(t){const e=rr(t);for(const n of t.Ta)e.ea(n.mutations)}async function fV(t,e,n){const s=t.Ta.shift(),r=Jf.from(s,e,n);await xT(t,(()=>t.remoteSyncer.applySuccessfulWrite(r))),await Fl(t)}async function dV(t,e){e&&rr(t).X_&&await(async function(s,r){if((function(o){return KD(o)&&o!==J.ABORTED})(r.code)){const i=s.Ta.shift();rr(s).B_(),await xT(s,(()=>s.remoteSyncer.rejectFailedWrite(i.batchId,r))),await Fl(s)}})(t,e),FT(t)&&UT(t)}async function Xg(t,e){const n=Ce(t);n.asyncQueue.verifyOperationInProgress(),de($r,"RemoteStore received new credentials");const s=Wr(n);n.Ea.add(3),await Ta(n),s&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await xl(n)}async function pV(t,e){const n=Ce(t);e?(n.Ea.delete(2),await xl(n)):e||(n.Ea.add(2),await Ta(n),n.Ra.set("Unknown"))}function zi(t){return t.ma||(t.ma=(function(n,s,r){const i=Ce(n);return i.sa(),new XO(s,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)})(t.datastore,t.asyncQueue,{Xo:rV.bind(null,t),t_:iV.bind(null,t),r_:oV.bind(null,t),H_:aV.bind(null,t)}),t.da.push((async e=>{e?(t.ma.B_(),ad(t)?od(t):t.Ra.set("Unknown")):(await t.ma.stop(),MT(t))}))),t.ma}function rr(t){return t.fa||(t.fa=(function(n,s,r){const i=Ce(n);return i.sa(),new ZO(s,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)})(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:uV.bind(null,t),r_:dV.bind(null,t),ta:hV.bind(null,t),na:fV.bind(null,t)}),t.da.push((async e=>{e?(t.fa.B_(),await Fl(t)):(await t.fa.stop(),t.Ta.length>0&&(de($r,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))}))),t.fa}class cd{constructor(e,n,s,r,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=s,this.op=r,this.removalCallback=i,this.deferred=new as,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((o=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,s,r,i){const o=Date.now()+s,a=new cd(e,n,o,r,i);return a.start(s),a}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ce(J.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function ld(t,e){if(ms("AsyncQueue",`${e}: ${t}`),Gi(t))return new ce(J.UNAVAILABLE,`${e}: ${t}`);throw t}class vi{static emptySet(e){return new vi(e.comparator)}constructor(e){this.comparator=e?(n,s)=>e(n,s)||ye.comparator(n.key,s.key):(n,s)=>ye.comparator(n.key,s.key),this.keyedMap=wo(),this.sortedSet=new st(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,s)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof vi)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;n.hasNext();){const r=n.getNext().key,i=s.getNext().key;if(!r.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const s=new vi;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=n,s}}class Zg{constructor(){this.ga=new st(ye.comparator)}track(e){const n=e.doc.key,s=this.ga.get(n);s?e.type!==0&&s.type===3?this.ga=this.ga.insert(n,e):e.type===3&&s.type!==1?this.ga=this.ga.insert(n,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.ga=this.ga.remove(n):e.type===1&&s.type===2?this.ga=this.ga.insert(n,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):Ie(63341,{Rt:e,pa:s}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,s)=>{e.push(s)})),e}}class Vi{constructor(e,n,s,r,i,o,a,l,u){this.query=e,this.docs=n,this.oldDocs=s,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=u}static fromInitialDocuments(e,n,s,r,i){const o=[];return n.forEach((a=>{o.push({type:0,doc:a})})),new Vi(e,n,vi.emptySet(n),o,s,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&kl(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,s=e.docChanges;if(n.length!==s.length)return!1;for(let r=0;r<n.length;r++)if(n[r].type!==s[r].type||!n[r].doc.isEqual(s[r].doc))return!1;return!0}}class mV{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class gV{constructor(){this.queries=e_(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,s){const r=Ce(n),i=r.queries;r.queries=e_(),i.forEach(((o,a)=>{for(const l of a.Sa)l.onError(s)}))})(this,new ce(J.ABORTED,"Firestore shutting down"))}}function e_(){return new Gr((t=>oT(t)),kl)}async function BT(t,e){const n=Ce(t);let s=3;const r=e.query;let i=n.queries.get(r);i?!i.ba()&&e.Da()&&(s=2):(i=new mV,s=e.Da()?0:1);try{switch(s){case 0:i.wa=await n.onListen(r,!0);break;case 1:i.wa=await n.onListen(r,!1);break;case 2:await n.onFirstRemoteStoreListen(r)}}catch(o){const a=ld(o,`Initialization of query '${ni(e.query)}' failed`);return void e.onError(a)}n.queries.set(r,i),i.Sa.push(e),e.va(n.onlineState),i.wa&&e.Fa(i.wa)&&ud(n)}async function $T(t,e){const n=Ce(t),s=e.query;let r=3;const i=n.queries.get(s);if(i){const o=i.Sa.indexOf(e);o>=0&&(i.Sa.splice(o,1),i.Sa.length===0?r=e.Da()?0:1:!i.ba()&&e.Da()&&(r=2))}switch(r){case 0:return n.queries.delete(s),n.onUnlisten(s,!0);case 1:return n.queries.delete(s),n.onUnlisten(s,!1);case 2:return n.onLastRemoteStoreUnlisten(s);default:return}}function _V(t,e){const n=Ce(t);let s=!1;for(const r of e){const i=r.query,o=n.queries.get(i);if(o){for(const a of o.Sa)a.Fa(r)&&(s=!0);o.wa=r}}s&&ud(n)}function yV(t,e,n){const s=Ce(t),r=s.queries.get(e);if(r)for(const i of r.Sa)i.onError(n);s.queries.delete(e)}function ud(t){t.Ca.forEach((e=>{e.next()}))}var Gh,t_;(t_=Gh||(Gh={})).Ma="default",t_.Cache="cache";class HT{constructor(e,n,s){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(e){if(!this.options.includeMetadataChanges){const s=[];for(const r of e.docChanges)r.type!==3&&s.push(r);e=new Vi(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const s=n!=="Offline";return(!this.options.qa||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Vi.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Gh.Cache}}class jT{constructor(e){this.key=e}}class qT{constructor(e){this.key=e}}class vV{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Le(),this.mutatedKeys=Le(),this.eu=aT(e),this.tu=new vi(this.eu)}get nu(){return this.Ya}ru(e,n){const s=n?n.iu:new Zg,r=n?n.tu:this.tu;let i=n?n.mutatedKeys:this.mutatedKeys,o=r,a=!1;const l=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,u=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal(((h,f)=>{const p=r.get(h),g=Nl(this.query,f)?f:null,w=!!p&&this.mutatedKeys.has(p.key),v=!!g&&(g.hasLocalMutations||this.mutatedKeys.has(g.key)&&g.hasCommittedMutations);let k=!1;p&&g?p.data.isEqual(g.data)?w!==v&&(s.track({type:3,doc:g}),k=!0):this.su(p,g)||(s.track({type:2,doc:g}),k=!0,(l&&this.eu(g,l)>0||u&&this.eu(g,u)<0)&&(a=!0)):!p&&g?(s.track({type:0,doc:g}),k=!0):p&&!g&&(s.track({type:1,doc:p}),k=!0,(l||u)&&(a=!0)),k&&(g?(o=o.add(g),i=v?i.add(h):i.delete(h)):(o=o.delete(h),i=i.delete(h)))})),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),i=i.delete(h.key),s.track({type:1,doc:h})}return{tu:o,iu:s,Cs:a,mutatedKeys:i}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,s,r){const i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort(((h,f)=>(function(g,w){const v=k=>{switch(k){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ie(20277,{Rt:k})}};return v(g)-v(w)})(h.type,f.type)||this.eu(h.doc,f.doc))),this.ou(s),r=r??!1;const a=n&&!r?this._u():[],l=this.Xa.size===0&&this.current&&!r?1:0,u=l!==this.Za;return this.Za=l,o.length!==0||u?{snapshot:new Vi(this.query,e.tu,i,o,e.mutatedKeys,l===0,u,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:a}:{au:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Zg,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Ya=this.Ya.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ya=this.Ya.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Le(),this.tu.forEach((s=>{this.uu(s.key)&&(this.Xa=this.Xa.add(s.key))}));const n=[];return e.forEach((s=>{this.Xa.has(s)||n.push(new qT(s))})),this.Xa.forEach((s=>{e.has(s)||n.push(new jT(s))})),n}cu(e){this.Ya=e.Qs,this.Xa=Le();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Vi.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const hd="SyncEngine";class EV{constructor(e,n,s){this.query=e,this.targetId=n,this.view=s}}class TV{constructor(e){this.key=e,this.hu=!1}}class wV{constructor(e,n,s,r,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=s,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new Gr((a=>oT(a)),kl),this.Iu=new Map,this.Eu=new Set,this.du=new st(ye.comparator),this.Au=new Map,this.Ru=new ed,this.Vu={},this.mu=new Map,this.fu=Oi.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function bV(t,e,n=!0){const s=YT(t);let r;const i=s.Tu.get(e);return i?(s.sharedClientState.addLocalQueryTarget(i.targetId),r=i.view.lu()):r=await GT(s,e,n,!0),r}async function IV(t,e){const n=YT(t);await GT(n,e,!0,!1)}async function GT(t,e,n,s){const r=await qO(t.localStore,Bn(e)),i=r.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let a;return s&&(a=await AV(t,e,i,o==="current",r.resumeToken)),t.isPrimaryClient&&n&&VT(t.remoteStore,r),a}async function AV(t,e,n,s,r){t.pu=(f,p,g)=>(async function(v,k,M,V){let _=k.view.ru(M);_.Cs&&(_=await zg(v.localStore,k.query,!1).then((({documents:S})=>k.view.ru(S,_))));const I=V&&V.targetChanges.get(k.targetId),O=V&&V.targetMismatches.get(k.targetId)!=null,F=k.view.applyChanges(_,v.isPrimaryClient,I,O);return s_(v,k.targetId,F.au),F.snapshot})(t,f,p,g);const i=await zg(t.localStore,e,!0),o=new vV(e,i.Qs),a=o.ru(i.documents),l=Ea.createSynthesizedTargetChangeForCurrentChange(n,s&&t.onlineState!=="Offline",r),u=o.applyChanges(a,t.isPrimaryClient,l);s_(t,n,u.au);const h=new EV(e,n,o);return t.Tu.set(e,h),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),u.snapshot}async function RV(t,e,n){const s=Ce(t),r=s.Tu.get(e),i=s.Iu.get(r.targetId);if(i.length>1)return s.Iu.set(r.targetId,i.filter((o=>!kl(o,e)))),void s.Tu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(r.targetId),s.sharedClientState.isActiveQueryTarget(r.targetId)||await jh(s.localStore,r.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(r.targetId),n&&rd(s.remoteStore,r.targetId),Wh(s,r.targetId)})).catch(qi)):(Wh(s,r.targetId),await jh(s.localStore,r.targetId,!0))}async function SV(t,e){const n=Ce(t),s=n.Tu.get(e),r=n.Iu.get(s.targetId);n.isPrimaryClient&&r.length===1&&(n.sharedClientState.removeLocalQueryTarget(s.targetId),rd(n.remoteStore,s.targetId))}async function CV(t,e,n){const s=LV(t);try{const r=await(function(o,a){const l=Ce(o),u=et.now(),h=a.reduce(((g,w)=>g.add(w.key)),Le());let f,p;return l.persistence.runTransaction("Locally write mutations","readwrite",(g=>{let w=gs(),v=Le();return l.Ns.getEntries(g,h).next((k=>{w=k,w.forEach(((M,V)=>{V.isValidDocument()||(v=v.add(M))}))})).next((()=>l.localDocuments.getOverlayedDocuments(g,w))).next((k=>{f=k;const M=[];for(const V of a){const _=jD(V,f.get(V.key).overlayedDocument);_!=null&&M.push(new lr(V.key,_,XE(_.value.mapValue),en.exists(!0)))}return l.mutationQueue.addMutationBatch(g,u,M,a)})).next((k=>{p=k;const M=k.applyToLocalDocumentSet(f,v);return l.documentOverlayCache.saveOverlays(g,k.batchId,M)}))})).then((()=>({batchId:p.batchId,changes:lT(f)})))})(s.localStore,e);s.sharedClientState.addPendingMutation(r.batchId),(function(o,a,l){let u=o.Vu[o.currentUser.toKey()];u||(u=new st(Ve)),u=u.insert(a,l),o.Vu[o.currentUser.toKey()]=u})(s,r.batchId,n),await wa(s,r.changes),await Fl(s.remoteStore)}catch(r){const i=ld(r,"Failed to persist write");n.reject(i)}}async function WT(t,e){const n=Ce(t);try{const s=await $O(n.localStore,e);e.targetChanges.forEach(((r,i)=>{const o=n.Au.get(i);o&&(We(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1,22616),r.addedDocuments.size>0?o.hu=!0:r.modifiedDocuments.size>0?We(o.hu,14607):r.removedDocuments.size>0&&(We(o.hu,42227),o.hu=!1))})),await wa(n,s,e)}catch(s){await qi(s)}}function n_(t,e,n){const s=Ce(t);if(s.isPrimaryClient&&n===0||!s.isPrimaryClient&&n===1){const r=[];s.Tu.forEach(((i,o)=>{const a=o.view.va(e);a.snapshot&&r.push(a.snapshot)})),(function(o,a){const l=Ce(o);l.onlineState=a;let u=!1;l.queries.forEach(((h,f)=>{for(const p of f.Sa)p.va(a)&&(u=!0)})),u&&ud(l)})(s.eventManager,e),r.length&&s.Pu.H_(r),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function PV(t,e,n){const s=Ce(t);s.sharedClientState.updateQueryState(e,"rejected",n);const r=s.Au.get(e),i=r&&r.key;if(i){let o=new st(ye.comparator);o=o.insert(i,Bt.newNoDocument(i,Se.min()));const a=Le().add(i),l=new Ll(Se.min(),new Map,new st(Ve),o,a);await WT(s,l),s.du=s.du.remove(i),s.Au.delete(e),fd(s)}else await jh(s.localStore,e,!1).then((()=>Wh(s,e,n))).catch(qi)}async function kV(t,e){const n=Ce(t),s=e.batch.batchId;try{const r=await BO(n.localStore,e);KT(n,s,null),zT(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await wa(n,r)}catch(r){await qi(r)}}async function NV(t,e,n){const s=Ce(t);try{const r=await(function(o,a){const l=Ce(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",(u=>{let h;return l.mutationQueue.lookupMutationBatch(u,a).next((f=>(We(f!==null,37113),h=f.keys(),l.mutationQueue.removeMutationBatch(u,f)))).next((()=>l.mutationQueue.performConsistencyCheck(u))).next((()=>l.documentOverlayCache.removeOverlaysForBatchId(u,h,a))).next((()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,h))).next((()=>l.localDocuments.getDocuments(u,h)))}))})(s.localStore,e);KT(s,e,n),zT(s,e),s.sharedClientState.updateMutationState(e,"rejected",n),await wa(s,r)}catch(r){await qi(r)}}function zT(t,e){(t.mu.get(e)||[]).forEach((n=>{n.resolve()})),t.mu.delete(e)}function KT(t,e,n){const s=Ce(t);let r=s.Vu[s.currentUser.toKey()];if(r){const i=r.get(e);i&&(n?i.reject(n):i.resolve(),r=r.remove(e)),s.Vu[s.currentUser.toKey()]=r}}function Wh(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const s of t.Iu.get(e))t.Tu.delete(s),n&&t.Pu.yu(s,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach((s=>{t.Ru.containsKey(s)||QT(t,s)}))}function QT(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(rd(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),fd(t))}function s_(t,e,n){for(const s of n)s instanceof jT?(t.Ru.addReference(s.key,e),DV(t,s)):s instanceof qT?(de(hd,"Document no longer in limbo: "+s.key),t.Ru.removeReference(s.key,e),t.Ru.containsKey(s.key)||QT(t,s.key)):Ie(19791,{wu:s})}function DV(t,e){const n=e.key,s=n.path.canonicalString();t.du.get(n)||t.Eu.has(s)||(de(hd,"New document in limbo: "+n),t.Eu.add(s),fd(t))}function fd(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new ye(Ze.fromString(e)),s=t.fu.next();t.Au.set(s,new TV(n)),t.du=t.du.insert(n,s),VT(t.remoteStore,new js(Bn(Qf(n.path)),s,"TargetPurposeLimboResolution",Sl.ce))}}async function wa(t,e,n){const s=Ce(t),r=[],i=[],o=[];s.Tu.isEmpty()||(s.Tu.forEach(((a,l)=>{o.push(s.pu(l,e,n).then((u=>{if((u||n)&&s.isPrimaryClient){const h=u?!u.fromCache:n?.targetChanges.get(l.targetId)?.current;s.sharedClientState.updateQueryState(l.targetId,h?"current":"not-current")}if(u){r.push(u);const h=nd.As(l.targetId,u);i.push(h)}})))})),await Promise.all(o),s.Pu.H_(r),await(async function(l,u){const h=Ce(l);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",(f=>Z.forEach(u,(p=>Z.forEach(p.Es,(g=>h.persistence.referenceDelegate.addReference(f,p.targetId,g))).next((()=>Z.forEach(p.ds,(g=>h.persistence.referenceDelegate.removeReference(f,p.targetId,g)))))))))}catch(f){if(!Gi(f))throw f;de(sd,"Failed to update sequence numbers: "+f)}for(const f of u){const p=f.targetId;if(!f.fromCache){const g=h.Ms.get(p),w=g.snapshotVersion,v=g.withLastLimboFreeSnapshotVersion(w);h.Ms=h.Ms.insert(p,v)}}})(s.localStore,i))}async function OV(t,e){const n=Ce(t);if(!n.currentUser.isEqual(e)){de(hd,"User change. New user:",e.toKey());const s=await kT(n.localStore,e);n.currentUser=e,(function(i,o){i.mu.forEach((a=>{a.forEach((l=>{l.reject(new ce(J.CANCELLED,o))}))})),i.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await wa(n,s.Ls)}}function VV(t,e){const n=Ce(t),s=n.Au.get(e);if(s&&s.hu)return Le().add(s.key);{let r=Le();const i=n.Iu.get(e);if(!i)return r;for(const o of i){const a=n.Tu.get(o);r=r.unionWith(a.view.nu)}return r}}function YT(t){const e=Ce(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=WT.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=VV.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=PV.bind(null,e),e.Pu.H_=_V.bind(null,e.eventManager),e.Pu.yu=yV.bind(null,e.eventManager),e}function LV(t){const e=Ce(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=kV.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=NV.bind(null,e),e}class el{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Ml(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return UO(this.persistence,new MO,e.initialUser,this.serializer)}Cu(e){return new PT(td.mi,this.serializer)}Du(e){return new WO}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}el.provider={build:()=>new el};class MV extends el{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){We(this.persistence.referenceDelegate instanceof Xc,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new TO(s,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Yt.withCacheSize(this.cacheSizeBytes):Yt.DEFAULT;return new PT((s=>Xc.mi(s,n)),this.serializer)}}class zh{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>n_(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=OV.bind(null,this.syncEngine),await pV(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new gV})()}createDatastore(e){const n=Ml(e.databaseInfo.databaseId),s=(function(i){return new JO(i)})(e.databaseInfo);return(function(i,o,a,l){return new tV(i,o,a,l)})(e.authCredentials,e.appCheckCredentials,s,n)}createRemoteStore(e){return(function(s,r,i,o,a){return new sV(s,r,i,o,a)})(this.localStore,this.datastore,e.asyncQueue,(n=>n_(this.syncEngine,n,0)),(function(){return Yg.v()?new Yg:new zO})())}createSyncEngine(e,n){return(function(r,i,o,a,l,u,h){const f=new wV(r,i,o,a,l,u);return h&&(f.gu=!0),f})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){await(async function(n){const s=Ce(n);de($r,"RemoteStore shutting down."),s.Ea.add(5),await Ta(s),s.Aa.shutdown(),s.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}zh.provider={build:()=>new zh};class JT{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):ms("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}const ir="FirestoreClient";class xV{constructor(e,n,s,r,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=s,this.databaseInfo=r,this.user=Ft.UNAUTHENTICATED,this.clientId=Al.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(s,(async o=>{de(ir,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(s,(o=>(de(ir,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new as;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const s=ld(n,"Failed to shutdown persistence");e.reject(s)}})),e.promise}}async function Bu(t,e){t.asyncQueue.verifyOperationInProgress(),de(ir,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let s=n.initialUser;t.setCredentialChangeListener((async r=>{s.isEqual(r)||(await kT(e.localStore,r),s=r)})),e.persistence.setDatabaseDeletedListener((()=>t.terminate())),t._offlineComponents=e}async function r_(t,e){t.asyncQueue.verifyOperationInProgress();const n=await FV(t);de(ir,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener((s=>Xg(e.remoteStore,s))),t.setAppCheckTokenChangeListener(((s,r)=>Xg(e.remoteStore,r))),t._onlineComponents=e}async function FV(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){de(ir,"Using user provided OfflineComponentProvider");try{await Bu(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(r){return r.name==="FirebaseError"?r.code===J.FAILED_PRECONDITION||r.code===J.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11})(n))throw n;Br("Error using user provided cache. Falling back to memory cache: "+n),await Bu(t,new el)}}else de(ir,"Using default OfflineComponentProvider"),await Bu(t,new MV(void 0));return t._offlineComponents}async function XT(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(de(ir,"Using user provided OnlineComponentProvider"),await r_(t,t._uninitializedComponentsProvider._online)):(de(ir,"Using default OnlineComponentProvider"),await r_(t,new zh))),t._onlineComponents}function UV(t){return XT(t).then((e=>e.syncEngine))}async function ZT(t){const e=await XT(t),n=e.eventManager;return n.onListen=bV.bind(null,e.syncEngine),n.onUnlisten=RV.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=IV.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=SV.bind(null,e.syncEngine),n}function BV(t,e,n={}){const s=new as;return t.asyncQueue.enqueueAndForget((async()=>(function(i,o,a,l,u){const h=new JT({next:p=>{h.Nu(),o.enqueueAndForget((()=>$T(i,f)));const g=p.docs.has(a);!g&&p.fromCache?u.reject(new ce(J.UNAVAILABLE,"Failed to get document because the client is offline.")):g&&p.fromCache&&l&&l.source==="server"?u.reject(new ce(J.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(p)},error:p=>u.reject(p)}),f=new HT(Qf(a.path),h,{includeMetadataChanges:!0,qa:!0});return BT(i,f)})(await ZT(t),t.asyncQueue,e,n,s))),s.promise}function $V(t,e,n={}){const s=new as;return t.asyncQueue.enqueueAndForget((async()=>(function(i,o,a,l,u){const h=new JT({next:p=>{h.Nu(),o.enqueueAndForget((()=>$T(i,f))),p.fromCache&&l.source==="server"?u.reject(new ce(J.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(p)},error:p=>u.reject(p)}),f=new HT(a,h,{includeMetadataChanges:!0,qa:!0});return BT(i,f)})(await ZT(t),t.asyncQueue,e,n,s))),s.promise}function ew(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}const i_=new Map;const tw="firestore.googleapis.com",o_=!0;class a_{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ce(J.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=tw,this.ssl=o_}else this.host=e.host,this.ssl=e.ssl??o_;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=CT;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<vO)throw new ce(J.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}$E("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=ew(e.experimentalLongPollingOptions??{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new ce(J.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new ce(J.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new ce(J.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(s,r){return s.timeoutSeconds===r.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Ul{constructor(e,n,s,r){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=s,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new a_({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ce(J.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ce(J.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new a_(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(s){if(!s)return new UE;switch(s.type){case"firstParty":return new JN(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new ce(J.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const s=i_.get(n);s&&(de("ComponentProvider","Removing Datastore"),i_.delete(n),s.terminate())})(this),Promise.resolve()}}function nw(t,e,n,s={}){t=gn(t,Ul);const r=Bi(e),i=t._getSettings(),o={...i,emulatorOptions:t._getEmulatorOptions()},a=`${e}:${n}`;r&&(jv(`https://${a}`),qv("Firestore",!0)),i.host!==tw&&i.host!==a&&Br("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const l={...i,host:a,ssl:r,emulatorOptions:s};if(!Lr(l,o)&&(t._setSettings(l),s.mockUserToken)){let u,h;if(typeof s.mockUserToken=="string")u=s.mockUserToken,h=Ft.MOCK_USER;else{u=nP(s.mockUserToken,t._app?.options.projectId);const f=s.mockUserToken.sub||s.mockUserToken.user_id;if(!f)throw new ce(J.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new Ft(f)}t._authCredentials=new KN(new FE(u,h))}}class ur{constructor(e,n,s){this.converter=n,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new ur(this.firestore,e,this._query)}}class at{constructor(e,n,s){this.converter=n,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new cs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new at(this.firestore,e,this._key)}toJSON(){return{type:at._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,s){if(ya(n,at._jsonSchema))return new at(e,s||null,new ye(Ze.fromString(n.referencePath)))}}at._jsonSchemaVersion="firestore/documentReference/1.0",at._jsonSchema={type:yt("string",at._jsonSchemaVersion),referencePath:yt("string")};class cs extends ur{constructor(e,n,s){super(e,n,Qf(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new at(this.firestore,null,new ye(e))}withConverter(e){return new cs(this.firestore,e,this._path)}}function yn(t,e,...n){if(t=lt(t),BE("collection","path",e),t instanceof Ul){const s=Ze.fromString(e,...n);return Eg(s),new cs(t,null,s)}{if(!(t instanceof at||t instanceof cs))throw new ce(J.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=t._path.child(Ze.fromString(e,...n));return Eg(s),new cs(t.firestore,null,s)}}function Wt(t,e,...n){if(t=lt(t),arguments.length===1&&(e=Al.newId()),BE("doc","path",e),t instanceof Ul){const s=Ze.fromString(e,...n);return vg(s),new at(t,null,new ye(s))}{if(!(t instanceof at||t instanceof cs))throw new ce(J.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=t._path.child(Ze.fromString(e,...n));return vg(s),new at(t.firestore,t instanceof cs?t.converter:null,new ye(s))}}const c_="AsyncQueue";class l_{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new DT(this,"async_queue_retry"),this._c=()=>{const s=Uu();s&&de(c_,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=e;const n=Uu();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=Uu();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new as;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Gi(e))throw e;de(c_,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((s=>{throw this.nc=s,this.rc=!1,ms("INTERNAL UNHANDLED ERROR: ",u_(s)),s})).then((s=>(this.rc=!1,s))))));return this.ac=n,n}enqueueAfterDelay(e,n,s){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const r=cd.createAndSchedule(this,e,n,s,(i=>this.hc(i)));return this.tc.push(r),r}uc(){this.nc&&Ie(47125,{Pc:u_(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,s)=>n.targetTimeMs-s.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function u_(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class hr extends Ul{constructor(e,n,s,r){super(e,n,s,r),this.type="firestore",this._queue=new l_,this._persistenceKey=r?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new l_(e),this._firestoreClient=void 0,await e}}}function sw(t,e){const n=typeof t=="object"?t:Kv(),s=typeof t=="string"?t:zc,r=Vf(n,"firestore").getImmediate({identifier:s});if(!r._initialized){const i=eP("firestore");i&&nw(r,...i)}return r}function ba(t){if(t._terminated)throw new ce(J.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||HV(t),t._firestoreClient}function HV(t){const e=t._freezeSettings(),n=(function(r,i,o,a){return new dD(r,i,o,a.host,a.ssl,a.experimentalForceLongPolling,a.experimentalAutoDetectLongPolling,ew(a.experimentalLongPollingOptions),a.useFetchStreams,a.isUsingEmulator)})(t._databaseId,t._app?.options.appId||"",t._persistenceKey,e);t._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new xV(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&(function(r){const i=r?._online.build();return{_offline:r?._offline.build(i),_online:i}})(t._componentsProvider))}class rn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new rn(kt.fromBase64String(e))}catch(n){throw new ce(J.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new rn(kt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:rn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(ya(e,rn._jsonSchema))return rn.fromBase64String(e.bytes)}}rn._jsonSchemaVersion="firestore/bytes/1.0",rn._jsonSchema={type:yt("string",rn._jsonSchemaVersion),bytes:yt("string")};class Ki{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new ce(J.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new St(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Ia{constructor(e){this._methodName=e}}class wn{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ce(J.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ce(J.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ve(this._lat,e._lat)||Ve(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:wn._jsonSchemaVersion}}static fromJSON(e){if(ya(e,wn._jsonSchema))return new wn(e.latitude,e.longitude)}}wn._jsonSchemaVersion="firestore/geoPoint/1.0",wn._jsonSchema={type:yt("string",wn._jsonSchemaVersion),latitude:yt("number"),longitude:yt("number")};class bn{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(s,r){if(s.length!==r.length)return!1;for(let i=0;i<s.length;++i)if(s[i]!==r[i])return!1;return!0})(this._values,e._values)}toJSON(){return{type:bn._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(ya(e,bn._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new bn(e.vectorValues);throw new ce(J.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}bn._jsonSchemaVersion="firestore/vectorValue/1.0",bn._jsonSchema={type:yt("string",bn._jsonSchemaVersion),vectorValues:yt("object")};const jV=/^__.*__$/;class qV{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return this.fieldMask!==null?new lr(e,this.data,this.fieldMask,n,this.fieldTransforms):new va(e,this.data,n,this.fieldTransforms)}}class rw{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return new lr(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function iw(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ie(40011,{Ac:t})}}class dd{constructor(e,n,s,r,i,o){this.settings=e,this.databaseId=n,this.serializer=s,this.ignoreUndefinedProperties=r,i===void 0&&this.Rc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new dd({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const n=this.path?.child(e),s=this.Vc({path:n,fc:!1});return s.gc(e),s}yc(e){const n=this.path?.child(e),s=this.Vc({path:n,fc:!1});return s.Rc(),s}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return tl(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(iw(this.Ac)&&jV.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class GV{constructor(e,n,s){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=s||Ml(e)}Cc(e,n,s,r=!1){return new dd({Ac:e,methodName:n,Dc:s,path:St.emptyPath(),fc:!1,bc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Bl(t){const e=t._freezeSettings(),n=Ml(t._databaseId);return new GV(t._databaseId,!!e.ignoreUndefinedProperties,n)}function ow(t,e,n,s,r,i={}){const o=t.Cc(i.merge||i.mergeFields?2:0,e,n,r);md("Data must be an object, but it was:",o,s);const a=lw(s,o);let l,u;if(i.merge)l=new on(o.fieldMask),u=o.fieldTransforms;else if(i.mergeFields){const h=[];for(const f of i.mergeFields){const p=Kh(e,f,n);if(!o.contains(p))throw new ce(J.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);hw(h,p)||h.push(p)}l=new on(h),u=o.fieldTransforms.filter((f=>l.covers(f.field)))}else l=null,u=o.fieldTransforms;return new qV(new Xt(a),l,u)}class $l extends Ia{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof $l}}class pd extends Ia{_toFieldTransform(e){return new UD(e.path,new ta)}isEqual(e){return e instanceof pd}}function aw(t,e,n,s){const r=t.Cc(1,e,n);md("Data must be an object, but it was:",r,s);const i=[],o=Xt.empty();cr(s,((l,u)=>{const h=gd(e,l,n);u=lt(u);const f=r.yc(h);if(u instanceof $l)i.push(h);else{const p=Aa(u,f);p!=null&&(i.push(h),o.set(h,p))}}));const a=new on(i);return new rw(o,a,r.fieldTransforms)}function cw(t,e,n,s,r,i){const o=t.Cc(1,e,n),a=[Kh(e,s,n)],l=[r];if(i.length%2!=0)throw new ce(J.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let p=0;p<i.length;p+=2)a.push(Kh(e,i[p])),l.push(i[p+1]);const u=[],h=Xt.empty();for(let p=a.length-1;p>=0;--p)if(!hw(u,a[p])){const g=a[p];let w=l[p];w=lt(w);const v=o.yc(g);if(w instanceof $l)u.push(g);else{const k=Aa(w,v);k!=null&&(u.push(g),h.set(g,k))}}const f=new on(u);return new rw(h,f,o.fieldTransforms)}function WV(t,e,n,s=!1){return Aa(n,t.Cc(s?4:3,e))}function Aa(t,e){if(uw(t=lt(t)))return md("Unsupported field value:",e,t),lw(t,e);if(t instanceof Ia)return(function(s,r){if(!iw(r.Ac))throw r.Sc(`${s._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Sc(`${s._methodName}() is not currently supported inside arrays`);const i=s._toFieldTransform(r);i&&r.fieldTransforms.push(i)})(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(s,r){const i=[];let o=0;for(const a of s){let l=Aa(a,r.wc(o));l==null&&(l={nullValue:"NULL_VALUE"}),i.push(l),o++}return{arrayValue:{values:i}}})(t,e)}return(function(s,r){if((s=lt(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return MD(r.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const i=et.fromDate(s);return{timestampValue:Jc(r.serializer,i)}}if(s instanceof et){const i=new et(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:Jc(r.serializer,i)}}if(s instanceof wn)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof rn)return{bytesValue:TT(r.serializer,s._byteString)};if(s instanceof at){const i=r.databaseId,o=s.firestore._databaseId;if(!o.isEqual(i))throw r.Sc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Zf(s.firestore._databaseId||r.databaseId,s._key.path)}}if(s instanceof bn)return(function(o,a){return{mapValue:{fields:{[YE]:{stringValue:JE},[Kc]:{arrayValue:{values:o.toArray().map((u=>{if(typeof u!="number")throw a.Sc("VectorValues must only contain numeric values.");return Yf(a.serializer,u)}))}}}}}})(s,r);throw r.Sc(`Unsupported field value: ${Rl(s)}`)})(t,e)}function lw(t,e){const n={};return qE(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):cr(t,((s,r)=>{const i=Aa(r,e.mc(s));i!=null&&(n[s]=i)})),{mapValue:{fields:n}}}function uw(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof et||t instanceof wn||t instanceof rn||t instanceof at||t instanceof Ia||t instanceof bn)}function md(t,e,n){if(!uw(n)||!HE(n)){const s=Rl(n);throw s==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+s)}}function Kh(t,e,n){if((e=lt(e))instanceof Ki)return e._internalPath;if(typeof e=="string")return gd(t,e);throw tl("Field path arguments must be of type string or ",t,!1,void 0,n)}const zV=new RegExp("[~\\*/\\[\\]]");function gd(t,e,n){if(e.search(zV)>=0)throw tl(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Ki(...e.split("."))._internalPath}catch{throw tl(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function tl(t,e,n,s,r){const i=s&&!s.isEmpty(),o=r!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(i||o)&&(l+=" (found",i&&(l+=` in field ${s}`),o&&(l+=` in document ${r}`),l+=")"),new ce(J.INVALID_ARGUMENT,a+t+l)}function hw(t,e){return t.some((n=>n.isEqual(e)))}class fw{constructor(e,n,s,r,i){this._firestore=e,this._userDataWriter=n,this._key=s,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new at(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new KV(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Hl("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class KV extends fw{data(){return super.data()}}function Hl(t,e){return typeof e=="string"?gd(t,e):e instanceof Ki?e._internalPath:e._delegate._internalPath}function QV(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new ce(J.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class _d{}class yd extends _d{}function Yn(t,e,...n){let s=[];e instanceof _d&&s.push(e),s=s.concat(n),(function(i){const o=i.filter((l=>l instanceof jl)).length,a=i.filter((l=>l instanceof Ra)).length;if(o>1||o>0&&a>0)throw new ce(J.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(s);for(const r of s)t=r._apply(t);return t}class Ra extends yd{constructor(e,n,s){super(),this._field=e,this._op=n,this._value=s,this.type="where"}static _create(e,n,s){return new Ra(e,n,s)}_apply(e){const n=this._parse(e);return dw(e._query,n),new ur(e.firestore,e.converter,xh(e._query,n))}_parse(e){const n=Bl(e.firestore);return(function(i,o,a,l,u,h,f){let p;if(u.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new ce(J.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){f_(f,h);const w=[];for(const v of f)w.push(h_(l,i,v));p={arrayValue:{values:w}}}else p=h_(l,i,f)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||f_(f,h),p=WV(a,o,f,h==="in"||h==="not-in");return _t.create(u,h,p)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function vc(t,e,n){const s=e,r=Hl("where",t);return Ra._create(r,s,n)}class jl extends _d{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new jl(e,n)}_parse(e){const n=this._queryConstraints.map((s=>s._parse(e))).filter((s=>s.getFilters().length>0));return n.length===1?n[0]:Pn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(r,i){let o=r;const a=i.getFlattenedFilters();for(const l of a)dw(o,l),o=xh(o,l)})(e._query,n),new ur(e.firestore,e.converter,xh(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class ql extends yd{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new ql(e,n)}_apply(e){const n=(function(r,i,o){if(r.startAt!==null)throw new ce(J.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(r.endAt!==null)throw new ce(J.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new ea(i,o)})(e._query,this._field,this._direction);return new ur(e.firestore,e.converter,(function(r,i){const o=r.explicitOrderBy.concat([i]);return new Wi(r.path,r.collectionGroup,o,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)})(e._query,n))}}function Qh(t,e="asc"){const n=e,s=Hl("orderBy",t);return ql._create(s,n)}function h_(t,e,n){if(typeof(n=lt(n))=="string"){if(n==="")throw new ce(J.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!iT(e)&&n.indexOf("/")!==-1)throw new ce(J.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const s=e.path.child(Ze.fromString(n));if(!ye.isDocumentKey(s))throw new ce(J.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return Cg(t,new ye(s))}if(n instanceof at)return Cg(t,n._key);throw new ce(J.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Rl(n)}.`)}function f_(t,e){if(!Array.isArray(t)||t.length===0)throw new ce(J.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function dw(t,e){const n=(function(r,i){for(const o of r)for(const a of o.getFlattenedFilters())if(i.indexOf(a.op)>=0)return a.op;return null})(t.filters,(function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new ce(J.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ce(J.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class pw{convertValue(e,n="none"){switch(sr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return dt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(nr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Ie(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const s={};return cr(e,((r,i)=>{s[r]=this.convertValue(i,n)})),s}convertVectorValue(e){const n=e.fields?.[Kc].arrayValue?.values?.map((s=>dt(s.doubleValue)));return new bn(n)}convertGeoPoint(e){return new wn(dt(e.latitude),dt(e.longitude))}convertArray(e,n){return(e.values||[]).map((s=>this.convertValue(s,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const s=Pl(e);return s==null?null:this.convertValue(s,n);case"estimate":return this.convertTimestamp(Xo(e));default:return null}}convertTimestamp(e){const n=tr(e);return new et(n.seconds,n.nanos)}convertDocumentKey(e,n){const s=Ze.fromString(e);We(ST(s),9688,{name:e});const r=new ki(s.get(1),s.get(3)),i=new ye(s.popFirst(5));return r.isEqual(n)||ms(`Document ${i} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}function mw(t,e,n){let s;return s=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,s}class ai{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Js extends fw{constructor(e,n,s,r,i,o){super(e,n,s,r,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Fo(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const s=this._document.data.field(Hl("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ce(J.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Js._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Js._jsonSchemaVersion="firestore/documentSnapshot/1.0",Js._jsonSchema={type:yt("string",Js._jsonSchemaVersion),bundleSource:yt("string","DocumentSnapshot"),bundleName:yt("string"),bundle:yt("string")};class Fo extends Js{data(e={}){return super.data(e)}}class Dr{constructor(e,n,s,r){this._firestore=e,this._userDataWriter=n,this._snapshot=r,this.metadata=new ai(r.hasPendingWrites,r.fromCache),this.query=s}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((s=>{e.call(n,new Fo(this._firestore,this._userDataWriter,s.key,s,new ai(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ce(J.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(r,i){if(r._snapshot.oldDocs.isEmpty()){let o=0;return r._snapshot.docChanges.map((a=>{const l=new Fo(r._firestore,r._userDataWriter,a.doc.key,a.doc,new ai(r._snapshot.mutatedKeys.has(a.doc.key),r._snapshot.fromCache),r.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}}))}{let o=r._snapshot.oldDocs;return r._snapshot.docChanges.filter((a=>i||a.type!==3)).map((a=>{const l=new Fo(r._firestore,r._userDataWriter,a.doc.key,a.doc,new ai(r._snapshot.mutatedKeys.has(a.doc.key),r._snapshot.fromCache),r.query.converter);let u=-1,h=-1;return a.type!==0&&(u=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),h=o.indexOf(a.doc.key)),{type:YV(a.type),doc:l,oldIndex:u,newIndex:h}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ce(J.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Dr._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Al.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],s=[],r=[];return this.docs.forEach((i=>{i._document!==null&&(n.push(i._document),s.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),r.push(i.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function YV(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ie(61501,{type:t})}}function Li(t){t=gn(t,at);const e=gn(t.firestore,hr);return BV(ba(e),t._key).then((n=>JV(e,t,n)))}Dr._jsonSchemaVersion="firestore/querySnapshot/1.0",Dr._jsonSchema={type:yt("string",Dr._jsonSchemaVersion),bundleSource:yt("string","QuerySnapshot"),bundleName:yt("string"),bundle:yt("string")};class gw extends pw{constructor(e){super(),this.firestore=e}convertBytes(e){return new rn(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new at(this.firestore,null,n)}}function Uo(t){t=gn(t,ur);const e=gn(t.firestore,hr),n=ba(e),s=new gw(e);return QV(t._query),$V(n,t._query).then((r=>new Dr(e,s,t,r)))}function qs(t,e,n){t=gn(t,at);const s=gn(t.firestore,hr),r=mw(t.converter,e,n);return Sa(s,[ow(Bl(s),"setDoc",t._key,r,t.converter!==null,n).toMutation(t._key,en.none())])}function _w(t,e,n,...s){t=gn(t,at);const r=gn(t.firestore,hr),i=Bl(r);let o;return o=typeof(e=lt(e))=="string"||e instanceof Ki?cw(i,"updateDoc",t._key,e,n,s):aw(i,"updateDoc",t._key,e),Sa(r,[o.toMutation(t._key,en.exists(!0))])}function Bo(t){return Sa(gn(t.firestore,hr),[new Vl(t._key,en.none())])}function Sa(t,e){return(function(s,r){const i=new as;return s.asyncQueue.enqueueAndForget((async()=>CV(await UV(s),r,i))),i.promise})(ba(t),e)}function JV(t,e,n){const s=n.docs.get(e._key),r=new gw(t);return new Js(t,r,e._key,s,new ai(n.hasPendingWrites,n.fromCache),e.converter)}class yw{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Bl(e)}set(e,n,s){this._verifyNotCommitted();const r=$u(e,this._firestore),i=mw(r.converter,n,s),o=ow(this._dataReader,"WriteBatch.set",r._key,i,r.converter!==null,s);return this._mutations.push(o.toMutation(r._key,en.none())),this}update(e,n,s,...r){this._verifyNotCommitted();const i=$u(e,this._firestore);let o;return o=typeof(n=lt(n))=="string"||n instanceof Ki?cw(this._dataReader,"WriteBatch.update",i._key,n,s,r):aw(this._dataReader,"WriteBatch.update",i._key,n),this._mutations.push(o.toMutation(i._key,en.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=$u(e,this._firestore);return this._mutations=this._mutations.concat(new Vl(n._key,en.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new ce(J.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function $u(t,e){if((t=lt(t)).firestore!==e)throw new ce(J.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}function Ec(){return new pd("serverTimestamp")}function Yh(t){return ba(t=gn(t,hr)),new yw(t,(e=>Sa(t,e)))}(function(e,n=!0){(function(r){ji=r})($i),Si(new Mr("firestore",((s,{instanceIdentifier:r,options:i})=>{const o=s.getProvider("app").getImmediate(),a=new hr(new QN(s.getProvider("auth-internal")),new XN(o,s.getProvider("app-check-internal")),(function(u,h){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new ce(J.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ki(u.options.projectId,h)})(o,r),o);return i={useFetchStreams:n,...i},a._setSettings(i),a}),"PUBLIC").setMultipleInstances(!0)),Qs(mg,gg,e),Qs(mg,gg,"esm2020")})();const XV=Object.freeze(Object.defineProperty({__proto__:null,AbstractUserDataWriter:pw,Bytes:rn,CollectionReference:cs,DocumentReference:at,DocumentSnapshot:Js,FieldPath:Ki,FieldValue:Ia,Firestore:hr,FirestoreError:ce,GeoPoint:wn,Query:ur,QueryCompositeFilterConstraint:jl,QueryConstraint:yd,QueryDocumentSnapshot:Fo,QueryFieldFilterConstraint:Ra,QueryOrderByConstraint:ql,QuerySnapshot:Dr,SnapshotMetadata:ai,Timestamp:et,VectorValue:bn,WriteBatch:yw,_AutoId:Al,_ByteString:kt,_DatabaseId:ki,_DocumentKey:ye,_EmptyAuthCredentialsProvider:UE,_FieldPath:St,_cast:gn,_logWarn:Br,_validateIsNotUsedTogether:$E,collection:yn,connectFirestoreEmulator:nw,deleteDoc:Bo,doc:Wt,ensureFirestoreConfigured:ba,executeWrite:Sa,getDoc:Li,getDocs:Uo,getFirestore:sw,orderBy:Qh,query:Yn,serverTimestamp:Ec,setDoc:qs,updateDoc:_w,where:vc,writeBatch:Yh},Symbol.toStringTag,{value:"Module"}));var ZV="firebase",eL="12.7.0";Qs(ZV,eL,"app");const tL={apiKey:"AIzaSyCx092q7up_BXFgK2e13A-IQ3uDjwf6J5A",authDomain:"accsuite117.firebaseapp.com",projectId:"accsuite117",storageBucket:"accsuite117.firebasestorage.app",messagingSenderId:"352958845592",appId:"1:352958845592:web:bb6a7fbe04f6181707f6ed"};let ra,Ar,Qe;qm().length?ra=qm()[0]:ra=zv(tL);Ar=WN(ra);Qe=sw(ra);const nL=Object.freeze(Object.defineProperty({__proto__:null,get app(){return ra},get auth(){return Ar},get db(){return Qe}},Symbol.toStringTag,{value:"Module"})),un=le(null),Ps=le("pilot"),d_=le(!0),Tr=le(null);let p_=!1;function Qi(){const t=xe(()=>!!un.value),e=xe(()=>un.value?.emailVerified??!1),n=xe(()=>un.value?.email??""),s=xe(()=>un.value?.displayName??""),r=xe(()=>Ps.value==="coach"),i=xe(()=>Ps.value==="admin"),o=async v=>{try{const k=Wt(Qe,"users",v.uid),M=await Li(k);if(!M.exists())await qs(k,{email:v.email,nickname:v.displayName||"Utente",role:"pilot",createdAt:new Date().toISOString(),emailVerified:v.emailVerified}),Ps.value="pilot",console.log("[AUTH] Created missing user profile");else{const V=M.data();Ps.value=V.role||"pilot"}}catch(k){console.error("[AUTH] Failed to ensure user document:",k),Ps.value="pilot"}},a=()=>{p_||(p_=!0,V1(Ar,async v=>{if(un.value=v,v){await o(v);try{const k=window.electronAPI;if(console.log("[AUTH] electronAPI exists:",!!k),console.log("[AUTH] saveUserIdentity exists:",!!k?.saveUserIdentity),k?.saveUserIdentity){console.log("[AUTH] Calling saveUserIdentity with:",{userId:v.uid,email:v.email,displayName:v.displayName});const M=await k.saveUserIdentity({userId:v.uid,email:v.email,displayName:v.displayName||v.email?.split("@")[0]||"User"});console.log("[AUTH] Electron identity saved:",M?"":"")}else console.log("[AUTH] Not in Electron environment (electronAPI not available)")}catch(k){console.error("[AUTH] Identity save failed:",k)}}else{Ps.value="pilot";try{const k=window.electronAPI;k?.clearUserIdentity&&(await k.clearUserIdentity(),console.log("[AUTH] Electron identity cleared"))}catch{}}d_.value=!1,console.log("[AUTH] State changed:",v?.email??"logged out","| Role:",Ps.value)}))},l=async(v,k,M,V="",_="")=>{Tr.value=null;try{const O=(await C1(Ar,v,k)).user;return await N1(O,{displayName:M}),await qs(Wt(Qe,"users",O.uid),{firstName:V,lastName:_,nickname:M,email:v,role:"pilot",coachId:null,createdAt:new Date().toISOString(),emailVerified:!1}),await rg(O),console.log("[AUTH] Registered:",v,"Verification email sent"),{success:!0,user:O}}catch(I){return console.error("[AUTH] Register error:",I.code),Tr.value=w(I.code),{success:!1,error:Tr.value}}},u=async(v,k)=>{Tr.value=null;try{const M=await P1(Ar,v,k);return console.log("[AUTH] Logged in:",v),{success:!0,user:M.user}}catch(M){return console.error("[AUTH] Login error:",M.code),Tr.value=w(M.code),{success:!1,error:Tr.value}}},h=async()=>{try{return await L1(Ar),console.log("[AUTH] Logged out"),{success:!0}}catch(v){return console.error("[AUTH] Logout error:",v),{success:!1,error:v.message}}},f=async()=>{if(!un.value)return{success:!1,error:"Utente non autenticato"};try{return await rg(un.value),console.log("[AUTH] Verification email resent"),{success:!0}}catch(v){return console.error("[AUTH] Resend error:",v.code),{success:!1,error:w(v.code)}}},p=async()=>{if(!un.value)return{verified:!1,error:"Utente non autenticato"};try{await un.value.reload(),un.value=Ar.currentUser;const v=un.value?.emailVerified??!1;return console.log("[AUTH] Email verified check:",v),{verified:v,error:null}}catch(v){return console.error("[AUTH] Check verification error:",v),{verified:!1,error:v.message}}},g=async v=>{try{const k=await Li(Wt(Qe,"users",v));return k.exists()?k.data():null}catch(k){return console.error("[AUTH] Get profile error:",k),null}},w=v=>({"auth/email-already-in-use":"Email gi registrata","auth/weak-password":"Password troppo debole (min. 6 caratteri)","auth/invalid-email":"Email non valida","auth/user-not-found":"Utente non trovato","auth/wrong-password":"Password errata","auth/invalid-credential":"Credenziali non valide","auth/too-many-requests":"Troppi tentativi, riprova pi tardi","auth/network-request-failed":"Errore di rete, controlla la connessione"})[v]||"Errore di autenticazione";return a(),{currentUser:un,isLoading:d_,authError:Tr,isAuthenticated:t,isEmailVerified:e,userEmail:n,userDisplayName:s,register:l,login:u,logout:h,resendVerificationEmail:f,checkEmailVerified:p,getUserProfile:g,userRole:Ps,isCoach:r,isAdmin:i}}let nl=0,m_=0;async function Hu(t){return nl++,console.log(`%c[FIREBASE]  READ #${nl}: ${t.path}`,"color: #4CAF50"),Li(t)}async function ks(t){nl++,console.log(`%c[FIREBASE]  QUERY #${nl}: (collection query)`,"color: #4CAF50");const e=await Uo(t);return console.log(`%c[FIREBASE]     Returned ${e.docs.length} documents`,"color: #8BC34A"),e}async function sL(t,e){return m_++,console.log(`%c[FIREBASE]  WRITE #${m_}: ${t.path}`,"color: #FF9800"),qs(t,e)}const Ns={PRACTICE:0,QUALIFY:1,RACE:2},$s=["GT3","GT4","CUP","GT2","ST","TCX"],ju=2;function vw(t){if(!t)return"GT3";const e=t.toLowerCase();return e.includes("gt4")?"GT4":e.includes("cup")?"CUP":e.includes("gt2")||e.includes("935")?"GT2":e.includes("_st")||e.includes("supertrofeo")||e.includes("super_trofeo")?"ST":e.includes("tcx")?"TCX":"GT3"}function hx(t){switch(t){case 0:return"practice";case 1:return"qualify";case 2:return"race";default:return"practice"}}function fx(t){if(!t||t<=0)return"--:--.---";const e=Math.round(t),n=Math.floor(e/6e4),s=Math.floor(e%6e4/1e3),r=e%1e3;return`${n}:${s.toString().padStart(2,"0")}.${r.toString().padStart(3,"0")}`}function nc(t){if(!t||t<=0)return"0h 0m";const e=Math.floor(t/36e5),n=Math.floor(t%36e5/6e4);return e>0?`${e}h ${n}m`:`${n}m`}function dx(t){return t?t.split("_").map((e,n)=>e.match(/^gt\d$/i)||e.length<=2?e.toUpperCase():e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()).join(" "):"Unknown"}function px(t){return t?t.split("_").map(e=>e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()).join(" "):"Unknown"}function mx(t){if(!t)return"-";const e=new Date(t);return`${e.getDate()} ${["Gen","Feb","Mar","Apr","Mag","Giu","Lug","Ago","Set","Ott","Nov","Dic"][e.getMonth()]} ${e.getFullYear()}`}function gx(t){if(!t)return"-";const e=new Date(t);return`${e.getDate()} ${["GENNAIO","FEBBRAIO","MARZO","APRILE","MAGGIO","GIUGNO","LUGLIO","AGOSTO","SETTEMBRE","OTTOBRE","NOVEMBRE","DICEMBRE"][e.getMonth()]} ${e.getFullYear()}`}function _x(t){if(!t)return"-";const e=new Date(t);return`${e.getHours().toString().padStart(2,"0")}:${e.getMinutes().toString().padStart(2,"0")}`}const rL=le([]),iL=le(!1),oL=le(null),g_=le(null),sc=le(!1),__="acc_trackBests_cache",y_="acc_trackActivity_cache";function v_(t,e,n){if(!(typeof window>"u"))try{const s={userId:n,data:e,timestamp:Date.now()};sessionStorage.setItem(t,JSON.stringify(s)),console.log(`[CACHE]  Saved ${t} to sessionStorage`)}catch(s){console.warn("[CACHE] Failed to save to sessionStorage:",s)}}function E_(t,e){if(typeof window>"u")return null;try{const n=sessionStorage.getItem(t);if(!n)return null;const{userId:s,data:r,timestamp:i}=JSON.parse(n);return s!==e?(console.log(`[CACHE] Different user, invalidating ${t}`),sessionStorage.removeItem(t),null):Date.now()-i>36e5?(console.log(`[CACHE] Cache expired, invalidating ${t}`),sessionStorage.removeItem(t),null):(console.log(`[CACHE]  Loaded ${t} from sessionStorage (age: ${Math.round((Date.now()-i)/1e3)}s)`),r)}catch(n){return console.warn("[CACHE] Failed to load from sessionStorage:",n),null}}function Gl(){const t=rL,e=iL,n=oL,{currentUser:s}=Qi(),r=xe(()=>typeof window>"u"?!1:!!window.electronAPI);function i(te,G){return`${te.split(".")[0]}_${G}`.replace(/[^a-zA-Z0-9]/g,"_").substring(0,100)}function o(te){const G=te.session_info||{},ee=te.stints||[],Q={track:G.track||te.track||"Unknown",date_start:G.date_start||te.date||new Date().toISOString(),date_end:G.date_end||null,car:G.car_model||G.car||te.car||"",session_type:G.session_type??0,driver:G.driver||null},D=["Flood","Wet","Damp","Greasy","Green","Fast","Optimum"],x={};D.forEach(U=>{x[U]={bestQualy:null,bestQualyTemp:null,bestRace:null,bestRaceTemp:null,bestAvgRace:null,bestAvgRaceTemp:null}});let B=null,z=null,re=null,ue=null,b=null,N=null;ee.forEach(U=>{const W=U.type==="Qualify",X=U.laps||[];X.forEach(Y=>{if(Y.is_valid&&!Y.has_pit_stop&&Y.lap_time_ms){const H=Y.track_grip_status||"Unknown",j=Y.air_temp||0,_e={airTemp:j,roadTemp:Y.road_temp||0,grip:H};x[H]&&(W?(!x[H].bestQualy||Y.lap_time_ms<x[H].bestQualy)&&(x[H].bestQualy=Y.lap_time_ms,x[H].bestQualyTemp=j):(!x[H].bestRace||Y.lap_time_ms<x[H].bestRace)&&(x[H].bestRace=Y.lap_time_ms,x[H].bestRaceTemp=j)),W?(!B||Y.lap_time_ms<B)&&(B=Y.lap_time_ms,z=_e):(!re||Y.lap_time_ms<re)&&(re=Y.lap_time_ms,ue=_e)}});const ne=X.filter(Y=>Y.is_valid&&!Y.has_pit_stop);if(!W&&U.avg_clean_lap&&ne.length>=5){const Y=ne[0],H=Y?.track_grip_status||"Unknown",j=Y?.air_temp||0;x[H]&&(!x[H].bestAvgRace||U.avg_clean_lap<x[H].bestAvgRace)&&(x[H].bestAvgRace=U.avg_clean_lap,x[H].bestAvgRaceTemp=j),(!b||U.avg_clean_lap<b)&&(b=U.avg_clean_lap,N={airTemp:j,roadTemp:Y?.road_temp||0,grip:H})}});const L={laps:G.laps_total||te.laps?.length||0,lapsValid:G.laps_valid||0,bestLap:G.session_best_lap||te.bestLap||null,avgCleanLap:G.avg_clean_lap||null,totalTime:G.total_drive_time_ms||0,stintCount:ee.length||0,best_qualy_ms:B,best_qualy_conditions:z,best_race_ms:re,best_race_conditions:ue,best_avg_race_ms:b,best_avg_race_conditions:N,best_by_grip:x};return{meta:Q,summary:L}}async function a(){if(!r.value)return[];const te=window.electronAPI,G=await te.getTelemetryFiles();if(!G||G.length===0)return[];const ee=s.value?.uid,Q=[];for(const D of G)try{const x=await te.readFile(D.path);if(!x||x.ownerId&&x.ownerId!==ee)continue;const{meta:B,summary:z}=o(x),re=i(B.date_start,B.track);Q.push({sessionId:re,fileHash:"",fileName:D.name,uploadedAt:null,meta:B,summary:z,rawChunkCount:0,rawSizeBytes:0})}catch(x){console.warn(`[TELEMETRY] Error reading local file ${D.name}:`,x)}return Q.sort((D,x)=>(x.meta.date_start||"").localeCompare(D.meta.date_start||"")),Q}async function l(te){const G=yn(Qe,`users/${te}/sessions`);let ee;try{const Q=Yn(G,Qh("uploadedAt","desc"));ee=await ks(Q)}catch{console.warn("[TELEMETRY] orderBy failed, fetching without order"),ee=await ks(G)}return ee.docs.map(Q=>{const D=Q.data();return{sessionId:Q.id,fileHash:D.fileHash||null,fileName:D.fileName||null,uploadedAt:D.uploadedAt||null,meta:D.meta||{},summary:D.summary||{},rawChunkCount:D.rawChunkCount||0,rawSizeBytes:D.rawSizeBytes||0}})}async function u(te,G=!1){const ee=te||s.value?.uid;if(!ee)return console.warn("[TELEMETRY] No user ID provided"),[];const Q=g_.value!==ee;if(!G&&!Q&&t.value.length>0)return console.log(`%c[TELEMETRY]  Using CACHED sessions (${t.value.length}), skipping Firebase query`,"color: #9C27B0"),t.value;g_.value=ee,e.value=!0,n.value=null;try{const D=!te||te===s.value?.uid;let x=[];if(r.value&&D)try{x=await a(),console.log(`[TELEMETRY] Found ${x.length} local files`)}catch(b){console.warn("[TELEMETRY] Local load failed:",b)}const B=await l(ee),z=new Map;for(const b of B){const N=(b.meta.date_start||"").split(".")[0],L=(b.meta.track||"").toLowerCase().replace(/[^a-z0-9]/g,"_"),U=`${N}_${L}`,W=z.get(U);if(!W)z.set(U,b);else{const X=W.uploadedAt?.toMillis?.()||0;(b.uploadedAt?.toMillis?.()||0)>X&&z.set(U,b)}}const re=B.length-z.size;re>0&&console.log(`[TELEMETRY]  Removed ${re} duplicate sessions (same date + track)`);let ue=0;for(const b of x){const N=(b.meta.date_start||"").split(".")[0],L=(b.meta.track||"").toLowerCase().replace(/[^a-z0-9]/g,"_"),U=`${N}_${L}`;z.has(U)||(z.set(U,b),ue++)}return ue>0&&console.log(`[TELEMETRY]  Merged ${ue} local-only sessions (not yet uploaded)`),t.value=Array.from(z.values()),t.value.sort((b,N)=>(N.meta.date_start||"").localeCompare(b.meta.date_start||"")),console.log(`[TELEMETRY]  Loaded ${t.value.length} sessions (${B.length} Firebase + ${ue} local-only)`),t.value}catch(D){return console.error("[TELEMETRY] Error loading sessions:",D),n.value=D.message,[]}finally{e.value=!1}}async function h(te,G){const ee=G||s.value?.uid;if(!ee)return null;const Q=!G||G===s.value?.uid;if(r.value&&Q)try{const D=window.electronAPI,x=await D.getTelemetryFiles();for(const B of x){const z=await D.readFile(B.path);if(!z||z.ownerId&&z.ownerId!==ee)continue;const re=z.session_info||{};if(i(re.date_start||z.date||"",re.track||z.track||"")===te)return console.log("[TELEMETRY]  Loaded full session from LOCAL file (0 Firebase reads)"),z}}catch(D){console.warn("[TELEMETRY] Local fetchSessionFull failed, falling back to Firebase:",D)}try{const D=ee!==s.value?.uid,x=Wt(Qe,`users/${ee}/sessions/${te}`),B=await Hu(x);if(!B.exists()||(B.data().rawChunkCount||0)===0)return null;const ue=yn(Qe,`users/${ee}/sessions/${te}/rawChunks`),b=D?Yn(ue,vc("isPublic","==",!0)):Yn(ue,Qh("idx","asc")),N=await ks(b),L=[];N.forEach(W=>{const X=W.data();L.push({idx:X.idx,chunk:X.chunk})}),L.sort((W,X)=>W.idx-X.idx);const U=L.map(W=>W.chunk).join("");return console.log(`[TELEMETRY] Loaded full session from Firebase chunks${D?" (EXTERNAL)":""}`),JSON.parse(U)}catch(D){return console.error("[TELEMETRY] Error fetching full session:",D),null}}const f=()=>({bestQualy:null,bestQualyTemp:null,bestQualySessionId:null,bestQualyDate:null,bestRace:null,bestRaceTemp:null,bestRaceSessionId:null,bestRaceDate:null,bestAvgRace:null,bestAvgRaceTemp:null,bestAvgRaceSessionId:null,bestAvgRaceDate:null});async function p(te,G){const ee=te.toLowerCase().replace(/[^a-z0-9]/g,"_"),Q=["Flood","Wet","Damp","Greasy","Green","Fast","Optimum"],D={};for(const z of $s){D[z]={};for(const re of Q)D[z][re]=f()}const x=t.value.filter(z=>{const re=z.meta.track.toLowerCase().replace(/[^a-z0-9]/g,"_");return re.includes(ee)||ee.includes(re)});if(x.length===0)return{bests:D,lastSessionDate:null};let B=null;for(const z of x){const re=z.meta.date_start||null,ue=z.summary?.best_by_grip;if(re&&(!B||re>B)&&(B=re),!ue)continue;const b=vw(z.meta.car);for(const N of Q){const L=ue[N];if(!L)continue;const U=D[b][N];U&&(L.bestQualy&&(!U.bestQualy||L.bestQualy<U.bestQualy)&&(U.bestQualy=L.bestQualy,U.bestQualyTemp=L.bestQualyTemp,U.bestQualySessionId=z.sessionId,U.bestQualyDate=re),L.bestRace&&(!U.bestRace||L.bestRace<U.bestRace)&&(U.bestRace=L.bestRace,U.bestRaceTemp=L.bestRaceTemp,U.bestRaceSessionId=z.sessionId,U.bestRaceDate=re),L.bestAvgRace&&(!U.bestAvgRace||L.bestAvgRace<U.bestAvgRace)&&(U.bestAvgRace=L.bestAvgRace,U.bestAvgRaceTemp=L.bestAvgRaceTemp,U.bestAvgRaceSessionId=z.sessionId,U.bestAvgRaceDate=re))}}return console.log(`[TELEMETRY]  Calculated trackBests V2 for ${ee} from ${x.length} sessions (by category, 0 extra queries)`),{bests:D,lastSessionDate:B}}async function g(te,G="Optimum",ee="GT3",Q){return(await v(te,ee,Q))[G]||f()}const w=le({});async function v(te,G="GT3",ee){const Q=ee||s.value?.uid,D=te.toLowerCase().replace(/[^a-z0-9]/g,"_"),x=`${D}_${Q||"anon"}`;if(w.value[x])return console.log(`[TELEMETRY] trackBests cache HIT for ${D} (category: ${G})`),w.value[x].bests[G]||{};if(Q&&!r.value)try{const z=Wt(Qe,`users/${Q}/trackBests/${D}`),re=await Hu(z);if(re.exists()){const ue=re.data();if((ue.version||1)>=ju&&ue.bests&&(console.log(`[TELEMETRY] trackBests Firebase HIT V2 for ${D}`),$s.some(L=>ue.bests[L]))){const L={bests:ue.bests,lastSessionDate:ue.lastSessionDate||null};return w.value[x]=L,L.bests[G]||{}}console.log(`[TELEMETRY] trackBests V1 detected for ${D}, migrating to V2...`)}}catch(z){console.warn("[TELEMETRY] Error reading trackBests from Firebase:",z)}console.log(`[TELEMETRY] trackBests calculating V2 for ${D}...`);const B=await p(te);if(Q&&!r.value)try{const z=Wt(Qe,`users/${Q}/trackBests/${D}`);await sL(z,{version:ju,trackId:D,bests:B.bests,lastSessionDate:B.lastSessionDate,lastUpdated:new Date().toISOString()}),console.log(`[TELEMETRY] trackBests V2 SAVED to Firebase for ${D}`)}catch(z){console.warn("[TELEMETRY] Error saving trackBests to Firebase:",z)}return w.value[x]=B,B.bests[G]||{}}async function k(te,G,ee=!1){const Q=te.toLowerCase().replace(/[^a-z0-9]/g,"_"),D=G||s.value?.uid,x=`${Q}_${D||"anon"}`;if(delete w.value[x],console.log(`[TELEMETRY] trackBests cache INVALIDATED for ${Q}`),ee&&D&&!r.value)try{const B=Wt(Qe,`users/${D}/trackBests/${Q}`);await Bo(B),console.log(`[TELEMETRY] trackBests DELETED from Firebase for ${Q}`)}catch(B){console.warn("[TELEMETRY] Error deleting trackBests from Firebase:",B)}}async function M(te,G="GT3",ee){return console.log(`[TELEMETRY] FORCE RECALCULATING trackBests for ${te} (category: ${G})`),await k(te,ee,!0),await v(te,G,ee)}async function V(te){const G=te||s.value?.uid;if(!G)return console.warn("[RESET] No user ID, cannot reset trackBests"),0;console.log(`[RESET]  Resetting ALL trackBests for user ${G}...`);try{const ee=yn(Qe,`users/${G}/trackBests`),Q=await ks(Yn(ee));if(Q.empty)return console.log("[RESET] No trackBests found to delete"),w.value={},0;const D=Yh(Qe);Q.docs.forEach(B=>{D.delete(B.ref)}),await D.commit();const x=Q.size;console.log(`[RESET]  Deleted ${x} trackBests documents from Firebase`),w.value={},I.value={};try{sessionStorage.removeItem("acc_trackBests_cache"),sessionStorage.removeItem("acc_trackActivity_cache")}catch{}return x}catch(ee){throw console.error("[RESET] Error resetting trackBests:",ee),ee}}async function _(te){const G=te||s.value?.uid;if(!G)return console.warn("[PREFETCH] No user ID, skipping prefetch"),0;const ee=E_(__,G),Q=E_(y_,G);if(ee&&Object.keys(ee).length>0)return console.log(`[PREFETCH]  Using sessionStorage cache: ${Object.keys(ee).length} trackBests`),Object.assign(w.value,ee),Q&&Object.assign(I.value,Q),sc.value=!0,Object.keys(ee).length;console.log(`[PREFETCH]  Starting batch prefetch for user ${G}`);const D=Date.now();try{const x=yn(Qe,`users/${G}/trackBests`),B=await ks(Yn(x));let z=0;const re=["Flood","Wet","Damp","Greasy","Green","Fast","Optimum"];B.forEach(b=>{const N=b.id,L=b.data(),U=`${N}_${G}`;if((L.version||1)>=ju&&L.bests&&$s.some(j=>L.bests[j])){if(w.value[U]={bests:L.bests,lastSessionDate:L.lastSessionDate||null},z++,L.activity){const j=L.activity;I.value[U]={totalLaps:j.totalLaps||0,validLaps:j.validLaps||0,validPercent:j.totalLaps>0?Math.round(j.validLaps/j.totalLaps*100):0,totalTimeMs:j.totalTimeMs||0,totalTimeFormatted:nc(j.totalTimeMs||0),sessionCount:j.sessionCount||0,lastSessionDate:j.lastSessionDate}}return}const X={},ne=L.bests||L;for(const H of re)ne[H]&&(X[H]=ne[H]);if(ne.Opt){const H=ne.Opt;if(!X.Optimum)X.Optimum=H;else{const j=X.Optimum;H.bestQualy&&(!j.bestQualy||H.bestQualy<j.bestQualy)&&(j.bestQualy=H.bestQualy,j.bestQualyTemp=H.bestQualyTemp,j.bestQualySessionId=H.bestQualySessionId,j.bestQualyDate=H.bestQualyDate),H.bestRace&&(!j.bestRace||H.bestRace<j.bestRace)&&(j.bestRace=H.bestRace,j.bestRaceTemp=H.bestRaceTemp,j.bestRaceSessionId=H.bestRaceSessionId,j.bestRaceDate=H.bestRaceDate),H.bestAvgRace&&(!j.bestAvgRace||H.bestAvgRace<j.bestAvgRace)&&(j.bestAvgRace=H.bestAvgRace,j.bestAvgRaceTemp=H.bestAvgRaceTemp,j.bestAvgRaceSessionId=H.bestAvgRaceSessionId,j.bestAvgRaceDate=H.bestAvgRaceDate)}}const Y={};for(const H of $s){Y[H]={};for(const j of re)Y[H][j]=H==="GT3"&&X[j]?X[j]:f()}if(w.value[U]={bests:Y,lastSessionDate:L.lastSessionDate||null},L.activity){const H=L.activity;I.value[U]={totalLaps:H.totalLaps||0,validLaps:H.validLaps||0,validPercent:H.totalLaps>0?Math.round(H.validLaps/H.totalLaps*100):0,totalTimeMs:H.totalTimeMs||0,totalTimeFormatted:nc(H.totalTimeMs||0),sessionCount:H.sessionCount||0,lastSessionDate:H.lastSessionDate}}z++});const ue=Date.now()-D;return console.log(`[PREFETCH]  Loaded ${z} trackBests in ${ue}ms (1 query instead of ${z})`),v_(__,w.value,G),v_(y_,I.value,G),sc.value=!0,z}catch(x){return console.error("[PREFETCH] Error during batch prefetch:",x),sc.value=!0,0}}const I=le({});async function O(te,G){const ee=te.toLowerCase().replace(/[^a-z0-9]/g,"_"),Q=G||s.value?.uid,D=`${ee}_${Q||"anon"}`;if(I.value[D])return I.value[D];if(Q&&!r.value)try{const B=Wt(Qe,`users/${Q}/trackBests/${ee}`),z=await Hu(B);if(z.exists()){const re=z.data();if(re.activity){const ue=re.activity,b={totalLaps:ue.totalLaps||0,validLaps:ue.validLaps||0,validPercent:ue.totalLaps>0?Math.round(ue.validLaps/ue.totalLaps*100):0,totalTimeMs:ue.totalTimeMs||0,totalTimeFormatted:nc(ue.totalTimeMs||0),sessionCount:ue.sessionCount||0,lastSessionDate:ue.lastSessionDate};return I.value[D]=b,console.log(`[TELEMETRY] trackActivity Firebase HIT for ${ee}`),b}}}catch(B){console.warn("[TELEMETRY] Error reading trackActivity from Firebase:",B)}console.log(`[TELEMETRY] trackActivity MISS for ${ee}, calculating...`);const x=fe(te);return I.value[D]=x,x}async function F(te,G,ee,Q="GT3",D){const x=await g(te,G,Q,D);function B(z,re){if(!z)return null;const ue=Math.round(re||ee),N=(ee-ue)*100;return Math.round(z+N)}return{theoQualy:B(x.bestQualy,x.bestQualyTemp),theoRace:B(x.bestRace,x.bestRaceTemp),theoAvgRace:B(x.bestAvgRace,x.bestAvgRaceTemp),historicQualy:x.bestQualy,historicQualyTemp:x.bestQualyTemp,historicRace:x.bestRace,historicRaceTemp:x.bestRaceTemp,historicAvgRace:x.bestAvgRace,historicAvgRaceTemp:x.bestAvgRaceTemp,grip:G,stintTemp:ee}}async function S(te,G="GT3",ee){const{bests:Q}=await p(te),D=Q[G]||{},x={};for(const[B,z]of Object.entries(D))z&&(x[B]={bestAvgRace:z.bestAvgRace,bestAvgRaceTemp:z.bestAvgRaceTemp});return x}async function T(te,G){const{bests:ee}=await p(te);let Q=null;for(const D of $s){const x=ee[D];if(x)for(const B of Object.values(x)){if(!B)continue;const z=B.bestAvgRace;z&&(!Q||z<Q)&&(Q=z)}}return Q}const E=xe(()=>t.value.length===0?null:t.value[0]),C=xe(()=>E.value?.meta.car||null),P=xe(()=>E.value?.meta.track||null),R=xe(()=>{const te=["Flood","Wet","Damp","Greasy","Green","Fast","Optimum"],G={};for(const ee of t.value){const Q=(ee.meta.track||"unknown").toLowerCase(),D=ee.summary;if(!G[Q]){const ue={};te.forEach(b=>{ue[b]={bestQualy:null,bestQualyTemp:null,bestRace:null,bestRaceTemp:null,bestAvgRace:null,bestAvgRaceTemp:null}}),G[Q]={track:ee.meta.track,sessions:0,lastSession:ee.meta.date_start,bestQualy:null,bestQualyConditions:null,bestRace:null,bestRaceConditions:null,bestAvgRace:null,bestAvgRaceConditions:null,bestByGrip:ue}}G[Q].sessions++,ee.meta.date_start>G[Q].lastSession&&(G[Q].lastSession=ee.meta.date_start);const x=D?.best_by_grip;if(x){const ue=b=>b==="Opt"?"Optimum":b;for(const b in x){const N=ue(b);if(!te.includes(N))continue;const L=x[b];if(!L)continue;const U=G[Q].bestByGrip[N];U&&(L.bestQualy&&(!U.bestQualy||L.bestQualy<U.bestQualy)&&(U.bestQualy=L.bestQualy,U.bestQualyTemp=L.bestQualyTemp),L.bestRace&&(!U.bestRace||L.bestRace<U.bestRace)&&(U.bestRace=L.bestRace,U.bestRaceTemp=L.bestRaceTemp),L.bestAvgRace&&(!U.bestAvgRace||L.bestAvgRace<U.bestAvgRace)&&(U.bestAvgRace=L.bestAvgRace,U.bestAvgRaceTemp=L.bestAvgRaceTemp))}}const B=D?.best_qualy_ms;B?(!G[Q].bestQualy||B<G[Q].bestQualy)&&(G[Q].bestQualy=B,G[Q].bestQualyConditions=D.best_qualy_conditions||null):ee.meta.session_type===Ns.QUALIFY&&D?.bestLap&&(!G[Q].bestQualy||D.bestLap<G[Q].bestQualy)&&(G[Q].bestQualy=D.bestLap,G[Q].bestQualyConditions=null);const z=D?.best_race_ms;z?(!G[Q].bestRace||z<G[Q].bestRace)&&(G[Q].bestRace=z,G[Q].bestRaceConditions=D.best_race_conditions||null):ee.meta.session_type===Ns.RACE&&D?.bestLap&&(!G[Q].bestRace||D.bestLap<G[Q].bestRace)&&(G[Q].bestRace=D.bestLap,G[Q].bestRaceConditions=null);const re=D?.best_avg_race_ms;re&&(!G[Q].bestAvgRace||re<G[Q].bestAvgRace)&&(G[Q].bestAvgRace=re,G[Q].bestAvgRaceConditions=D.best_avg_race_conditions||null)}return Object.values(G).sort((ee,Q)=>(Q.lastSession||"").localeCompare(ee.lastSession||""))});function y(te){return t.value.filter(G=>(G.meta.track||"").toLowerCase()===te.toLowerCase())}function ae(te){return t.value.find(G=>G.sessionId===te)}function fe(te){const G=y(te);let ee=0,Q=0,D=0;for(const x of G)ee+=x.summary?.laps||0,Q+=x.summary?.lapsValid||0,D+=x.summary?.totalTime||0;return{totalLaps:ee,validLaps:Q,validPercent:ee>0?Math.round(Q/ee*100):0,totalTimeMs:D,totalTimeFormatted:nc(D),sessionCount:G.length}}function ie(te,G){return y(te).sort((Q,D)=>(Q.meta.date_start||"").localeCompare(D.meta.date_start||"")).map(Q=>{const D=Q.summary;let x=null,B=null;return G&&D?.best_by_grip?.[G]?(x=D.best_by_grip[G].bestQualy,B=D.best_by_grip[G].bestRace):(x=D?.best_qualy_ms||null,B=D?.best_race_ms||null),{date:Q.meta.date_start,sessionId:Q.sessionId,bestQualy:x,bestRace:B,sessionType:Q.meta.session_type}}).filter(Q=>Q.bestQualy||Q.bestRace)}function pe(te=7){const G=new Date,ee=["Dom","Lun","Mar","Mer","Gio","Ven","Sab"],Q=[];for(let D=te-1;D>=0;D--){const x=new Date(G.getTime()-D*24*60*60*1e3),B=x.toISOString().split("T")[0]||"",z=t.value.filter(N=>N.meta.date_start?.startsWith(B));let re=0,ue=0,b=0;for(const N of z){const L=N.summary?.totalTime||0,U=Math.round(L/6e4);switch(N.meta.session_type){case Ns.PRACTICE:re+=U;break;case Ns.QUALIFY:ue+=U;break;case Ns.RACE:b+=U;break}}Q.push({day:ee[x.getDay()]||"N/A",practice:re,qualify:ue,race:b})}return Q}const se=xe(()=>{const te=new Date,G=new Date(te.getTime()-10080*60*1e3);let ee=0,Q=0,D=0,x=0,B=0,z=0;for(const re of t.value){if(new Date(re.meta.date_start)<G)continue;const b=re.summary?.totalTime||0,N=Math.round(b/6e4);switch(re.meta.session_type){case Ns.PRACTICE:ee+=N,Q++;break;case Ns.QUALIFY:D+=N,x++;break;case Ns.RACE:B+=N,z++;break}}return{practice:{minutes:ee,sessions:Q},qualify:{minutes:D,sessions:x},race:{minutes:B,sessions:z}}});async function Te(te,G){const ee=s.value?.uid;if(!ee)throw new Error("Not authenticated");const Q=Wt(Qe,`users/${ee}/sessions/${te}`);await _w(Q,{isPublic:G}),console.log(`[SHARING] Session ${te} set isPublic=${G}`);const D=yn(Qe,`users/${ee}/sessions/${te}/rawChunks`),x=await ks(Yn(D));if(x.docs.length>0){const B=Yh(Qe);x.docs.forEach(z=>{B.update(z.ref,{isPublic:G})}),await B.commit(),console.log(`[SHARING] Updated ${x.docs.length} chunks with isPublic=${G}`)}}async function He(){const te=s.value?.uid;if(!te)return 0;const G=yn(Qe,`users/${te}/sessions`),ee=Yn(G,vc("isPublic","==",!0));return(await ks(ee)).docs.length}async function Pe(){const te=s.value?.uid;if(!te)throw new Error("Not authenticated");const G=yn(Qe,`users/${te}/sessions`),ee=Yn(G,vc("isPublic","==",!0)),Q=await ks(ee);let D=0;for(const x of Q.docs)await Te(x.id,!1),D++;return console.log(`[SHARING] Revoked ${D} shared sessions`),D}async function De(te){const G=s.value?.uid;if(!G)throw new Error("Not authenticated");return await Te(te,!0),`${typeof window<"u"?window.location.origin:""}/sessioni/${te}?userId=${G}`}return{sessions:t,isLoading:e,error:n,loadSessions:u,fetchSessionFull:h,getSessionsForTrack:y,getSession:ae,getActivityData:pe,getTrackActivityTotals:fe,getHistoricalBestTimes:ie,calculateAllBestTimesForTrack:p,calculateBestAvgRaceForTrack:S,getBestAvgRaceForTrack:T,getBestTimesForGrip:g,getTheoreticalTimes:F,getTrackBests:v,invalidateTrackBests:k,forceRecalculateTrackBests:M,resetAllTrackBests:V,prefetchAllTrackBests:_,isPrefetchComplete:xe(()=>sc.value),getTrackActivity:O,lastSession:E,lastUsedCar:C,lastUsedTrack:P,trackStats:R,activityTotals:se,setSessionPublic:Te,countSharedSessions:He,revokeAllSharedSessions:Pe,generateShareLink:De}}const aL=4e5;function cL(){const{currentUser:t}=Qi(),{loadSessions:e}=Gl(),n=le(!1),s=le(0),r=le([]),i=le(null),o=xe(()=>typeof window>"u"?!1:!!window.electronAPI);async function a(_){const I=new TextEncoder().encode(_),O=await crypto.subtle.digest("SHA-256",I);return Array.from(new Uint8Array(O)).map(S=>S.toString(16).padStart(2,"0")).join("")}function l(_,I){return`${_.split(".")[0]}_${I}`.replace(/[^a-zA-Z0-9]/g,"_").substring(0,100)}async function u(_,I){const O=Wt(Qe,`users/${_}/sessions/${I}`),F=await Li(O);return F.exists()?{id:I,...F.data()}:null}async function h(_,I){try{const O=yn(Qe,`users/${_}/sessions/${I}/rawChunks`),S=(await Uo(O)).docs.map(T=>Bo(T.ref));await Promise.all(S)}catch(O){console.warn("[SYNC] Error deleting old chunks:",O.message)}}function f(_){const I=_.session_info||{},O=_.stints||[],F={track:I.track||_.track||"Unknown",date_start:I.date_start||_.date||new Date().toISOString(),date_end:I.date_end||null,car:I.car_model||I.car||_.car||null,session_type:I.session_type??null,driver:I.driver||null},S=["Flood","Wet","Damp","Greasy","Green","Fast","Optimum"],T={};S.forEach(se=>{T[se]={bestQualy:null,bestQualyTemp:null,bestRace:null,bestRaceTemp:null,bestAvgRace:null,bestAvgRaceTemp:null}});const E=se=>se==="Opt"?"Optimum":se;let C=null,P=null,R=null,y=null,ae=null,fe=null;const ie=I.session_type===1;O.forEach(se=>{const Te=ie||se.type==="Qualify",He=se.laps||[];if(He.forEach(Pe=>{if(Pe.is_valid&&!Pe.has_pit_stop&&Pe.lap_time_ms){const De=E(Pe.track_grip_status||"Unknown"),te=Pe.air_temp||0,G={airTemp:te,roadTemp:Pe.road_temp||0,grip:De};T[De]&&(Te?(!T[De].bestQualy||Pe.lap_time_ms<T[De].bestQualy)&&(T[De].bestQualy=Pe.lap_time_ms,T[De].bestQualyTemp=te):(!T[De].bestRace||Pe.lap_time_ms<T[De].bestRace)&&(T[De].bestRace=Pe.lap_time_ms,T[De].bestRaceTemp=te)),Te?(!C||Pe.lap_time_ms<C)&&(C=Pe.lap_time_ms,P=G):(!R||Pe.lap_time_ms<R)&&(R=Pe.lap_time_ms,y=G)}}),!Te&&se.avg_clean_lap&&He.length>=5){const Pe=He.find(ee=>ee.is_valid&&!ee.has_pit_stop),De=Pe?.track_grip_status||He[0]?.track_grip_status||"Unknown",te=E(De),G=Pe?.air_temp||He[0]?.air_temp||0;T[te]&&(!T[te].bestAvgRace||se.avg_clean_lap<T[te].bestAvgRace)&&(T[te].bestAvgRace=se.avg_clean_lap,T[te].bestAvgRaceTemp=G),(!ae||se.avg_clean_lap<ae)&&(ae=se.avg_clean_lap,fe={airTemp:G,roadTemp:Pe?.road_temp||0,grip:te})}});const pe={laps:I.laps_total||_.laps?.length||0,lapsValid:I.laps_valid||0,bestLap:I.session_best_lap||_.bestLap||null,avgCleanLap:I.avg_clean_lap||null,totalTime:I.total_drive_time_ms||0,stintCount:O.length||0,best_qualy_ms:C,best_qualy_conditions:P,best_race_ms:R,best_race_conditions:y,best_avg_race_ms:ae,best_avg_race_conditions:fe,best_by_grip:T};return{meta:F,summary:pe}}function p(_,I){const O=[];for(let F=0;F<_.length;F+=I)O.push(_.slice(F,F+I));return O}async function g(_,I,O,F){try{const S=_.ownerId||null;if(S&&S!==F)return console.log(`[SYNC] Skipped ${O}: owner mismatch (file: ${S}, current: ${F})`),{status:"skipped",fileName:O,reason:"owner_mismatch"};S||console.log(`[SYNC] Warning: ${O} has no ownerId (pre-login session)`);const{meta:T,summary:E}=f(_),C=l(T.date_start,T.track),P=await a(I),R=await u(F,C);let y=!1,ae=!0;R&&(y=!0,R.fileHash===P?ae=!1:await h(F,C));const fe=p(I,aL),ie=Wt(Qe,`users/${F}/sessions/${C}`);await qs(ie,{fileHash:P,fileName:O,uploadedAt:Ec(),meta:T,summary:E,rawChunkCount:fe.length,rawSizeBytes:I.length,rawEncoding:"json-string",version:(R?.version||0)+1});const pe=Wt(Qe,`users/${F}/uploads/${P}`);if(await qs(pe,{fileName:O,uploadedAt:Ec(),sessionId:C}),ae)for(let He=0;He<fe.length;He++){const Pe=Wt(Qe,`users/${F}/sessions/${C}/rawChunks/${He}`);await qs(Pe,{idx:He,chunk:fe[He]})}await k(F,T.track,C,T.date_start,E,T.car);const se=await w(F,T.track,T.date_start,C);let Te="created";return y&&(Te=ae?"updated":"unchanged"),console.log(`[SYNC] ${Te}: ${O} -> ${C} (Q: ${E.best_qualy_ms}, R: ${E.best_race_ms})${se>0?` [cleaned ${se} old duplicate(s)]`:""}`),{status:Te,fileName:O,sessionId:C}}catch(S){return console.error("[SYNC] Error:",S),{status:"error",fileName:O,error:S.message}}}async function w(_,I,O,F){try{const S=yn(Qe,`users/${_}/sessions`),T=await Uo(S),E=I.toLowerCase().replace(/\s+/g,"_"),P=(O.split(".")[0]??O).split(":").slice(0,2).join(":");let R=0;for(const y of T.docs){const ae=y.id,fe=y.data();if(ae===F||!/^\d{13}_/.test(ae)||(fe.meta?.track||"").toLowerCase().replace(/\s+/g,"_")!==E||(fe.meta?.date_start||"").split(":").slice(0,2).join(":")!==P)continue;console.log(`[SYNC]  Auto-deleting old format duplicate: ${ae}`);const He=yn(Qe,`users/${_}/sessions/${ae}/rawChunks`),Pe=await Uo(He);for(const De of Pe.docs)await Bo(De.ref);await Bo(y.ref),R++}return R>0&&console.log(`[SYNC]  Auto-cleaned ${R} old format duplicate(s) for ${I}`),R}catch(S){return console.warn("[SYNC]  Error during auto-cleanup:",S.message),0}}const v=2;async function k(_,I,O,F,S,T){const E=I.toLowerCase().replace(/\s+/g,"_"),C=Wt(Qe,`users/${_}/trackBests/${E}`),P=vw(T||"");try{const R=await Li(C),y=R.exists()?R.data():null,ae=y?.version||1,fe=["Flood","Wet","Damp","Greasy","Green","Fast","Optimum"],ie=()=>({bestQualy:null,bestQualyTemp:null,bestQualySessionId:null,bestQualyDate:null,bestRace:null,bestRaceTemp:null,bestRaceSessionId:null,bestRaceDate:null,bestAvgRace:null,bestAvgRaceTemp:null,bestAvgRaceSessionId:null,bestAvgRaceDate:null});let pe={};if(ae>=v&&y?.bests)for(const D of $s)pe[D]=y.bests[D]||{};else if(y?.bests||y){const D=y.bests||Object.fromEntries(fe.filter(x=>y[x]).map(x=>[x,y[x]]));for(const x of $s){pe[x]={};for(const B of fe)pe[x][B]=x==="GT3"&&D[B]?D[B]:ie()}console.log(`[SYNC] Migrating trackBests V1 -> V2 for ${E}`)}else for(const D of $s){pe[D]={};for(const x of fe)pe[D][x]=ie()}let se=!1;fe.forEach(D=>{const x=S.best_by_grip?.[D];if(!x)return;pe[P][D]||(pe[P][D]=ie());const B=pe[P][D];x.bestQualy&&(!B.bestQualy||x.bestQualy<B.bestQualy)&&(B.bestQualy=x.bestQualy,B.bestQualyTemp=x.bestQualyTemp,B.bestQualySessionId=O,B.bestQualyDate=F,se=!0),x.bestRace&&(!B.bestRace||x.bestRace<B.bestRace)&&(B.bestRace=x.bestRace,B.bestRaceTemp=x.bestRaceTemp,B.bestRaceSessionId=O,B.bestRaceDate=F,se=!0),x.bestAvgRace&&(!B.bestAvgRace||x.bestAvgRace<B.bestAvgRace)&&(B.bestAvgRace=x.bestAvgRace,B.bestAvgRaceTemp=x.bestAvgRaceTemp,B.bestAvgRaceSessionId=O,B.bestAvgRaceDate=F,se=!0)});const Te=y?.activity||{totalLaps:0,validLaps:0,totalTimeMs:0,sessionCount:0},He=y?.syncedSessionIds||[],Pe=He.includes(O),De=S.laps||0,te=S.lapsValid||0,G=S.totalTime||0,ee=Pe?Te:{totalLaps:Te.totalLaps+De,validLaps:Te.validLaps+te,totalTimeMs:Te.totalTimeMs+G,sessionCount:Te.sessionCount+1,lastSessionDate:F},Q=Pe?He:[...He,O].slice(-100);return await qs(C,{version:v,trackId:E,bests:pe,activity:ee,syncedSessionIds:Q,lastSessionDate:F,lastUpdated:Ec()}),console.log(se?`[SYNC]  Updated trackBests V2 for ${E} (${P}) (bests + activity)`:Pe?`[SYNC]  No trackBests changes for ${E}`:`[SYNC]  Updated trackBests activity for ${E}`),se||!Pe}catch(R){return console.warn(`[SYNC]  Error updating trackBests for ${E}:`,R.message),!1}}async function M(){if(!o.value)return console.log("[SYNC] Not running in Electron, skipping sync"),[];if(!t.value)return console.log("[SYNC] No user logged in, skipping sync"),[];if(n.value)return console.log("[SYNC] Already syncing, skipping"),[];n.value=!0,s.value=0,r.value=[];const _=t.value.uid,I=window.electronAPI,O=[];try{const F=await I.getTelemetryFiles();if(console.log(`[SYNC] Found ${F.length} files to process`),F.length===0)return n.value=!1,[];for(let R=0;R<F.length;R++){const y=F[R];if(y){s.value=Math.round(R/F.length*100);try{const ae=await I.readFile(y.path);if(!ae){O.push({status:"error",fileName:y.name,error:"Could not read file"});continue}const fe=JSON.stringify(ae),ie=await g(ae,fe,y.name,_);O.push(ie),(ie.status==="created"||ie.status==="updated")&&await I.updateRegistry(y.name,{uploadedBy:_,sessionId:ie.sessionId,uploadedAt:new Date().toISOString()})}catch(ae){console.error(`[SYNC] Error processing ${y.name}:`,ae),O.push({status:"error",fileName:y.name,error:ae.message})}}}s.value=100,r.value=O,i.value=new Date;const S=O.filter(R=>R.status==="created").length,T=O.filter(R=>R.status==="updated").length,E=O.filter(R=>R.status==="unchanged").length,C=O.filter(R=>R.status==="skipped").length,P=O.filter(R=>R.status==="error").length;return console.log(`[SYNC] Complete: ${S} created, ${T} updated, ${E} unchanged, ${C} skipped, ${P} errors`),(S>0||T>0)&&(console.log("[SYNC] Refreshing dashboard data..."),await e()),O}catch(F){return console.error("[SYNC] Sync failed:",F),[{status:"error",fileName:"sync",error:F.message}]}finally{n.value=!1}}function V(){if(!o.value)return;const _=window.electronAPI;_.onFilesChanged(I=>{(I.new.length>0||I.modified.length>0)&&(console.log(`[SYNC] Files changed: ${I.new.length} new, ${I.modified.length} modified`),M())}),_.onInitialFiles(I=>{console.log(`[SYNC] Initial files: ${I.files.length}`)}),console.log("[SYNC] Auto-sync setup complete")}return{isElectron:o,isSyncing:n,syncProgress:s,syncResults:r,lastSyncTime:i,syncTelemetryFiles:M,setupAutoSync:V}}const lL={key:0,class:"electron-titlebar"},uL={class:"titlebar-buttons-left"},hL=["title","disabled"],fL=["title","disabled"],dL=ut({__name:"ElectronTitlebar",setup(t){const e=Ui(),n=zt(),s=le(!1),r=le(!1),i=le(!1),{isSyncing:o,syncTelemetryFiles:a,setupAutoSync:l}=cL(),{loadSessions:u}=Gl(),h=le(!1),f=le([]);Zs(async()=>{if(s.value=!!window.electronAPI,s.value){try{r.value=await window.electronAPI.windowIsMaximized()}catch{console.log("[TITLEBAR] Could not get maximized state")}l()}});const p=()=>Object.keys(e.params).length>0,g=async()=>{if(p()){console.log("[TITLEBAR] Soft refresh for dynamic route:",e.fullPath),i.value=!0;try{const _=e.fullPath;await n.replace({path:"/panoramica",query:{_refresh:Date.now()}}),await Xs(),await u(void 0,!0),await n.replace(_),console.log("[TITLEBAR] Soft refresh complete")}catch(_){console.error("[TITLEBAR] Soft refresh failed:",_),window.electronAPI?.pageRefresh()}finally{i.value=!1}}else console.log("[TITLEBAR] Hard refresh for static route:",e.fullPath),window.electronAPI?.pageRefresh()},w=async()=>{console.log("[TITLEBAR] Manual sync triggered");const _=await a();console.log("[TITLEBAR] Sync complete:",_),f.value=_,h.value=!0},v=()=>{window.electronAPI?.windowMinimize()},k=async()=>{const _=await window.electronAPI?.windowMaximize();r.value=_},M=()=>{window.electronAPI?.windowClose()},V=()=>{h.value=!1};return(_,I)=>{const O=GC;return s.value?(ge(),Re("div",lL,[I[5]||(I[5]=K("div",{class:"titlebar-drag-region"},[K("span",{class:"titlebar-title"},"ACC Telemetry Dashboard")],-1)),K("div",uL,[K("button",{class:Ct(["titlebar-btn",{refreshing:i.value}]),title:i.value?"Aggiornamento in corso...":"Aggiorna pagina (Smart Refresh)",disabled:i.value,onClick:g},[...I[0]||(I[0]=[K("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[K("path",{d:"M21 12a9 9 0 11-9-9c2.52 0 4.93 1 6.74 2.74L21 8"}),K("path",{d:"M21 3v5h-5"})],-1)])],10,hL),K("button",{class:Ct(["titlebar-btn",{syncing:ze(o)}]),title:ze(o)?"Sincronizzazione in corso...":"Sincronizza file",disabled:ze(o),onClick:w},[...I[1]||(I[1]=[K("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[K("path",{d:"M23 4v6h-6"}),K("path",{d:"M1 20v-6h6"}),K("path",{d:"M3.51 9a9 9 0 0114.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0020.49 15"})],-1)])],10,fL)]),K("div",{class:"titlebar-buttons-right"},[K("button",{class:"titlebar-btn",title:"Minimizza",onClick:v},[...I[2]||(I[2]=[K("svg",{width:"12",height:"12",viewBox:"0 0 12 12"},[K("rect",{y:"5",width:"12",height:"2",fill:"currentColor"})],-1)])]),K("button",{class:"titlebar-btn",title:"Massimizza",onClick:k},[...I[3]||(I[3]=[K("svg",{width:"12",height:"12",viewBox:"0 0 12 12"},[K("rect",{x:"1",y:"1",width:"10",height:"10",stroke:"currentColor","stroke-width":"2",fill:"none"})],-1)])]),K("button",{class:"titlebar-btn titlebar-close",title:"Chiudi",onClick:M},[...I[4]||(I[4]=[K("svg",{width:"12",height:"12",viewBox:"0 0 12 12"},[K("path",{d:"M1 1l10 10M11 1L1 11",stroke:"currentColor","stroke-width":"2"})],-1)])])]),Ee(O,{results:f.value,visible:h.value,onClose:V},null,8,["results","visible"])])):fs("",!0)}}}),pL=Object.assign(_n(dL,[["__scopeId","data-v-79773db3"]]),{__name:"ElectronTitlebar"}),rc="<div></div>",qu=new WeakMap;function mL(t){if(qu.has(t))return qu.get(t);const e={...t};return e.render?e.render=(n,s,r,i,o,a)=>{if(i.mounted$??n.mounted$){const l=t.render?.bind(n)(n,s,r,i,o,a);return l.children===null||typeof l.children=="string"?pn(l):ot(l)}return Cu(n._.vnode.el,rc)}:e.template&&=`
      <template v-if="mounted$">${t.template}</template>
      <template v-else>${rc}</template>
    `,e.setup=(n,s)=>{const r=ct(),i=hs(r.isHydrating===!1),o=Hr();if(r.isHydrating){const l={...o.attrs},u=gL(o);for(const h in l)delete o.attrs[h];Zs(()=>{Object.assign(o.attrs,l),o.vnode.dirs=u})}Zs(()=>{i.value=!0});const a=t.setup?.(n,s)||{};return ef(a)?Promise.resolve(a).then(l=>typeof l!="function"?(l||={},l.mounted$=i,l):(...u)=>{if(i.value||!r.isHydrating){const h=l(...u);return h.children===null||typeof h.children=="string"?pn(h):ot(h)}return Cu(o?.vnode.el,rc)}):typeof a=="function"?(...l)=>{if(i.value){const u=a(...l),h=e.inheritAttrs!==!1?s.attrs:void 0;return u.children===null||typeof u.children=="string"?pn(u,h):ot(u,h)}return Cu(o?.vnode.el,rc)}:Object.assign(a,{mounted$:i})},qu.set(t,e),e}function gL(t){if(!t||!t.vnode.dirs)return null;const e=t.vnode.dirs;return t.vnode.dirs=null,e}function _L(t={}){const e=hs(""),n=hs(t.politeness||"polite"),s=gv();function r(u="",h="polite"){e.value=u,n.value=h}function i(u){return r(u,"polite")}function o(u){return r(u,"assertive")}function a(){r(document?.title?.trim(),n.value)}function l(){s?.hooks?.removeHook("dom:rendered",a)}return a(),s?.hooks?.hook("dom:rendered",()=>{a()}),{_cleanup:l,message:e,politeness:n,set:r,polite:i,assertive:o}}function yL(t={}){const e=ct(),n=e._routeAnnouncer||=_L(t);return t.politeness!==n.politeness.value&&(n.politeness.value=t.politeness||"polite"),nf()&&(e._routeAnnouncerDeps||=0,e._routeAnnouncerDeps++,sb(()=>{e._routeAnnouncerDeps--,e._routeAnnouncerDeps===0&&(n._cleanup(),delete e._routeAnnouncer)})),n}const vL=ut({name:"NuxtRouteAnnouncer",props:{atomic:{type:Boolean,default:!1},politeness:{type:String,default:"polite"}},setup(t,{slots:e,expose:n}){const{set:s,polite:r,assertive:i,message:o,politeness:a}=yL({politeness:t.politeness});return n({set:s,polite:r,assertive:i,message:o,politeness:a}),()=>ot("span",{class:"nuxt-route-announcer",style:{position:"absolute"}},ot("span",{role:"alert","aria-live":a.value,"aria-atomic":t.atomic,style:{border:"0",clip:"rect(0 0 0 0)","clip-path":"inset(50%)",height:"1px",width:"1px",overflow:"hidden",position:"absolute","white-space":"nowrap","word-wrap":"normal",margin:"-1px",padding:"0"}},e.default?e.default({message:o.value}):o.value))}}),EL=["type","value","placeholder","autocomplete","maxlength","disabled"],TL=ut({__name:"BaseInput",props:{modelValue:{},type:{default:"text"},placeholder:{default:""},autocomplete:{default:"off"},maxlength:{},error:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(t,{emit:e}){const n=e,s=r=>{const i=r.target;n("update:modelValue",i.value)};return(r,i)=>(ge(),Re("input",{type:t.type,value:t.modelValue,placeholder:t.placeholder,autocomplete:t.autocomplete,maxlength:t.maxlength,disabled:t.disabled,class:Ct(["form-input",{"form-input--error":t.error}]),onInput:s},null,42,EL))}}),vd=Object.assign(_n(TL,[["__scopeId","data-v-91b986db"]]),{__name:"UiBaseInput"}),wL={key:0,class:"form-error"},bL=ut({__name:"FormError",props:{message:{},visible:{type:Boolean,default:!1}},setup(t){return(e,n)=>t.visible&&t.message?(ge(),Re("div",wL,fn(t.message),1)):fs("",!0)}}),Ed=Object.assign(_n(bL,[["__scopeId","data-v-75d4b223"]]),{__name:"UiFormError"}),IL=["type","disabled"],AL=ut({__name:"BaseButton",props:{variant:{default:"primary"},loading:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},type:{default:"button"}},emits:["click"],setup(t,{emit:e}){const n=t,s=e,r=i=>{!n.loading&&!n.disabled&&s("click",i)};return(i,o)=>(ge(),Re("button",{type:t.type,class:Ct(["btn",`btn--${t.variant}`,{"btn--loading":t.loading}]),disabled:t.disabled||t.loading,onClick:r},[aI(i.$slots,"default",{},void 0)],10,IL))}}),Td=Object.assign(_n(AL,[["__scopeId","data-v-d54604fc"]]),{__name:"UiBaseButton"}),RL=ut({__name:"LoginForm",emits:["submit","forgotPassword"],setup(t,{expose:e,emit:n}){const s=le(""),r=le(""),i=le(""),o=le(!1),a=n,l=()=>{if(i.value="",!s.value.trim()){i.value="Inserisci la tua email.";return}if(!r.value){i.value="Inserisci la password.";return}a("submit",{email:s.value.trim(),password:r.value})},u=()=>{i.value=""};return e({setError:h=>{i.value=h},setLoading:h=>{o.value=h},reset:()=>{s.value="",r.value="",i.value="",o.value=!1}}),(h,f)=>{const p=vd,g=Ed,w=Td;return ge(),Re("form",{class:"auth-form",onSubmit:gl(l,["prevent"])},[Ee(p,{modelValue:s.value,"onUpdate:modelValue":f[0]||(f[0]=v=>s.value=v),type:"email",placeholder:"Email",autocomplete:"email",error:!!i.value&&i.value.includes("email"),onInput:u},null,8,["modelValue","error"]),Ee(p,{modelValue:r.value,"onUpdate:modelValue":f[1]||(f[1]=v=>r.value=v),type:"password",placeholder:"Password",autocomplete:"current-password",error:!!i.value&&i.value.includes("password"),onInput:u},null,8,["modelValue","error"]),Ee(g,{message:i.value,visible:!!i.value},null,8,["message","visible"]),Ee(w,{type:"submit",variant:"primary",loading:o.value},{default:cn(()=>[...f[3]||(f[3]=[Be(" ACCEDI ",-1)])]),_:1},8,["loading"]),Ee(w,{variant:"link",onClick:f[2]||(f[2]=v=>a("forgotPassword"))},{default:cn(()=>[...f[4]||(f[4]=[Be(" Password dimenticata? ",-1)])]),_:1})],32)}}}),SL=Object.assign(_n(RL,[["__scopeId","data-v-5927dcd2"]]),{__name:"AuthLoginForm"}),CL={class:"name-row"},PL=ut({__name:"RegisterForm",emits:["submit"],setup(t,{expose:e,emit:n}){const s=le(""),r=le(""),i=le(""),o=le(""),a=le(""),l=le(""),u=le(""),h=le(!1),f=n,p=()=>{if(u.value="",!s.value.trim()){u.value="Inserisci il tuo nome.";return}if(!r.value.trim()){u.value="Inserisci il tuo cognome.";return}if(!i.value.trim()){u.value="Scegli un nickname.";return}if(i.value.trim().length<3){u.value="Il nickname deve essere di almeno 3 caratteri.";return}if(!o.value.trim()){u.value="Inserisci la tua email.";return}if(!a.value){u.value="Inserisci una password.";return}if(a.value.length<6){u.value="La password deve essere di almeno 6 caratteri.";return}if(!l.value){u.value="Conferma la password.";return}if(a.value!==l.value){u.value="Le password non coincidono.";return}f("submit",{firstName:s.value.trim(),lastName:r.value.trim(),nickname:i.value.trim(),email:o.value.trim(),password:a.value})},g=()=>{u.value=""};return e({setError:w=>{u.value=w},setLoading:w=>{h.value=w},reset:()=>{s.value="",r.value="",i.value="",o.value="",a.value="",l.value="",u.value="",h.value=!1}}),(w,v)=>{const k=vd,M=Ed,V=Td;return ge(),Re("form",{class:"auth-form",onSubmit:gl(p,["prevent"])},[K("div",CL,[Ee(k,{modelValue:s.value,"onUpdate:modelValue":v[0]||(v[0]=_=>s.value=_),type:"text",placeholder:"Nome",autocomplete:"given-name",onInput:g},null,8,["modelValue"]),Ee(k,{modelValue:r.value,"onUpdate:modelValue":v[1]||(v[1]=_=>r.value=_),type:"text",placeholder:"Cognome",autocomplete:"family-name",onInput:g},null,8,["modelValue"])]),Ee(k,{modelValue:i.value,"onUpdate:modelValue":v[2]||(v[2]=_=>i.value=_),type:"text",placeholder:"Nickname (visibile agli altri)",autocomplete:"username",maxlength:20,onInput:g},null,8,["modelValue"]),Ee(k,{modelValue:o.value,"onUpdate:modelValue":v[3]||(v[3]=_=>o.value=_),type:"email",placeholder:"Email",autocomplete:"email",onInput:g},null,8,["modelValue"]),Ee(k,{modelValue:a.value,"onUpdate:modelValue":v[4]||(v[4]=_=>a.value=_),type:"password",placeholder:"Password (min. 6 caratteri)",autocomplete:"new-password",onInput:g},null,8,["modelValue"]),Ee(k,{modelValue:l.value,"onUpdate:modelValue":v[5]||(v[5]=_=>l.value=_),type:"password",placeholder:"Conferma Password",autocomplete:"new-password",onInput:g},null,8,["modelValue"]),Ee(M,{message:u.value,visible:!!u.value},null,8,["message","visible"]),Ee(V,{type:"submit",variant:"primary",loading:h.value},{default:cn(()=>[...v[6]||(v[6]=[Be(" REGISTRATI ",-1)])]),_:1},8,["loading"])],32)}}}),kL=Object.assign(_n(PL,[["__scopeId","data-v-d0f96507"]]),{__name:"AuthRegisterForm"}),NL={class:"reset-form"},DL={key:0,class:"reset-success"},OL=ut({__name:"ResetPasswordForm",emits:["submit","back"],setup(t,{expose:e,emit:n}){const s=le(""),r=le(""),i=le(!1),o=le(!1),a=n,l=()=>{if(r.value="",!s.value.trim()){r.value="Inserisci la tua email.";return}a("submit",s.value.trim())},u=()=>{r.value=""};return e({setError:h=>{r.value=h},setLoading:h=>{o.value=h},setSuccess:h=>{i.value=h},reset:()=>{s.value="",r.value="",i.value=!1,o.value=!1}}),(h,f)=>{const p=Td,g=vd,w=Ed;return ge(),Re("div",NL,[i.value?(ge(),Re("div",DL,[f[4]||(f[4]=K("span",{class:"reset-success__icon"},"",-1)),f[5]||(f[5]=K("p",{class:"reset-success__text"}," Email inviata! Controlla la tua casella di posta (anche spam). ",-1)),Ee(p,{variant:"link",onClick:f[0]||(f[0]=v=>a("back"))},{default:cn(()=>[...f[3]||(f[3]=[Be("  Torna al login ",-1)])]),_:1})])):(ge(),Re("form",{key:1,class:"auth-form",onSubmit:gl(l,["prevent"])},[f[8]||(f[8]=K("h3",{class:"reset-form__title"},"Recupera Password",-1)),f[9]||(f[9]=K("p",{class:"reset-form__description"},[Be(" Inserisci la tua email. Ti invieremo un link per reimpostare la password. "),K("br"),K("small",null,"Controlla anche la cartella spam.")],-1)),Ee(g,{modelValue:s.value,"onUpdate:modelValue":f[1]||(f[1]=v=>s.value=v),type:"email",placeholder:"Email",autocomplete:"email",onInput:u},null,8,["modelValue"]),Ee(w,{message:r.value,visible:!!r.value},null,8,["message","visible"]),Ee(p,{type:"submit",variant:"primary",loading:o.value},{default:cn(()=>[...f[6]||(f[6]=[Be(" INVIA LINK ",-1)])]),_:1},8,["loading"]),Ee(p,{variant:"link",onClick:f[2]||(f[2]=v=>a("back"))},{default:cn(()=>[...f[7]||(f[7]=[Be("  Torna al login ",-1)])]),_:1})],32))])}}}),VL=Object.assign(_n(OL,[["__scopeId","data-v-17ef1ec5"]]),{__name:"AuthResetPasswordForm"}),LL={class:"auth-overlay"},ML={class:"auth-card__body"},xL={key:0,class:"auth-nav"},FL={class:"auth-form-container"},UL=ut({__name:"AuthOverlay",emits:["login-success","register-success"],setup(t,{emit:e}){const n=le("login"),s=le("login"),r=le(),i=le(),o=le(),{login:a,register:l}=Qi(),u=le(!1),h=e,f=xe(()=>{switch(s.value){case"register":return"form-height--register";case"reset":return"form-height--reset";default:return"form-height--login"}}),p=V=>{n.value=V,s.value=V},g=()=>{s.value="reset"},w=()=>{s.value="login",n.value="login",o.value?.reset()},v=async V=>{u.value=!0;const _=await a(V.email,V.password);u.value=!1,_.success?h("login-success",V.email):r.value?.setError(_.error)},k=async V=>{u.value=!0;const _=await l(V.email,V.password,V.nickname,V.firstName,V.lastName);u.value=!1,_.success?h("register-success",V.email):i.value?.setError(_.error)},M=V=>{console.log("[AUTH] Reset:",V),o.value?.setSuccess(!0)};return(V,_)=>{const I=SL,O=kL,F=VL;return ge(),Re("div",LL,[_[4]||(_[4]=K("div",{class:"auth-overlay__ambient"},[K("div",{class:"ambient-glow ambient-glow--red"}),K("div",{class:"ambient-glow ambient-glow--gold"})],-1)),K("div",{class:Ct(["auth-card",f.value])},[_[3]||(_[3]=K("div",{class:"auth-card__glow"},null,-1)),K("div",ML,[_[2]||(_[2]=K("header",{class:"auth-header"},[K("div",{class:"brand"},[K("span",{class:"brand__badge"},"ACC"),K("span",{class:"brand__name"},"TELEMETRY")])],-1)),s.value!=="reset"?(ge(),Re("nav",xL,[K("button",{class:Ct(["auth-nav__item",{"is-active":n.value==="login"}]),onClick:_[0]||(_[0]=S=>p("login"))}," Login ",2),K("button",{class:Ct(["auth-nav__item",{"is-active":n.value==="register"}]),onClick:_[1]||(_[1]=S=>p("register"))}," Registrati ",2)])):fs("",!0),K("div",FL,[Ee(ha,{name:"liquid",mode:"out-in"},{default:cn(()=>[s.value==="login"?(ge(),Jt(I,{key:"login",ref_key:"loginFormRef",ref:r,onSubmit:v,onForgotPassword:g},null,512)):s.value==="register"?(ge(),Jt(O,{key:"register",ref_key:"registerFormRef",ref:i,onSubmit:k},null,512)):(ge(),Jt(F,{key:"reset",ref_key:"resetFormRef",ref:o,onSubmit:M,onBack:w},null,512))]),_:1})])])],2)])}}}),BL=Object.assign(_n(UL,[["__scopeId","data-v-e0e84998"]]),{__name:"AuthOverlay"}),$L={class:"email-verification"},HL={class:"verify-email"},jL={key:0,class:"error-message"},qL={key:1,class:"error-message resend-error"},GL=["disabled"],WL=["disabled"],zL=ut({__name:"RegistrationSuccess",props:{email:{},requireEmailVerification:{type:Boolean}},emits:["goToDashboard","resendEmail"],setup(t,{emit:e}){const n=e,{checkEmailVerified:s,resendVerificationEmail:r}=Qi(),i=le(!1),o=le(!1),a=le(null),l=le(!1),u=le(!1),h=async()=>{i.value=!0,a.value=null,u.value=!1;const p=await r();i.value=!1,p.success?(o.value=!0,setTimeout(()=>o.value=!1,3e3)):a.value=p.error||"Errore invio email",n("resendEmail")},f=async()=>{l.value=!0,u.value=!1;const p=await s();l.value=!1,p.verified?n("goToDashboard"):u.value=!0};return(p,g)=>(ge(),Re("div",$L,[g[2]||(g[2]=K("div",{class:"verify-icon"},"",-1)),g[3]||(g[3]=K("h2",{class:"verify-title"},"Verifica la tua email",-1)),K("p",HL,fn(t.email),1),g[4]||(g[4]=K("div",{class:"verify-box"},[K("p",{class:"verify-text"},"Clicca il link nell'email per attivare l'account."),K("p",{class:"verify-hint"},"Controlla anche Spam")],-1)),u.value?(ge(),Re("div",jL," Email non verificata ")):fs("",!0),a.value?(ge(),Re("div",qL,fn(a.value),1)):fs("",!0),K("button",{class:Ct(["verify-btn",{"verify-btn--loading":l.value}]),disabled:l.value,onClick:f},[l.value?(ge(),Re($e,{key:0},[g[0]||(g[0]=K("span",{class:"spinner"},null,-1)),g[1]||(g[1]=Be(" Controllo... ",-1))],64)):(ge(),Re($e,{key:1},[Be(" Ho confermato l'email ")],64))],10,GL),K("button",{class:"resend-btn",disabled:i.value||o.value,onClick:h},[i.value?(ge(),Re($e,{key:0},[Be("Invio in corso...")],64)):o.value?(ge(),Re($e,{key:1},[Be(" Email inviata")],64)):(ge(),Re($e,{key:2},[Be("Rinvia email di verifica")],64))],8,WL)]))}}),KL=Object.assign(_n(zL,[["__scopeId","data-v-f958603b"]]),{__name:"AuthRegistrationSuccess"}),Ew=(t="RouteProvider")=>ut({name:t,props:{route:{type:Object,required:!0},vnode:Object,vnodeRef:Object,renderKey:String,trackRootNodes:Boolean},setup(e){const n=e.renderKey,s=e.route,r={};for(const i in e.route)Object.defineProperty(r,i,{get:()=>n===e.renderKey?e.route[i]:s[i],enumerable:!0});return ss(Vr,Ln(r)),()=>e.vnode?ot(e.vnode,{ref:e.vnodeRef}):e.vnode}}),QL=Ew(),T_=new WeakMap,YL=ut({name:"NuxtPage",inheritAttrs:!1,props:{name:{type:String},transition:{type:[Boolean,Object],default:void 0},keepalive:{type:[Boolean,Object],default:void 0},route:{type:Object},pageKey:{type:[Function,String],default:null}},setup(t,{attrs:e,slots:n,expose:s}){const r=ct(),i=le(),o=Vt(Vr,null);let a;s({pageRef:i});const l=Vt(lv,null);let u;const h=r.deferHydration();if(r.isHydrating){const p=r.hooks.hookOnce("app:error",h);zt().beforeEach(p)}t.pageKey&&xn(()=>t.pageKey,(p,g)=>{p!==g&&r.callHook("page:loading:start")});let f=!1;{const p=zt().beforeResolve(()=>{f=!1});la(()=>{p()})}return()=>ot(Dv,{name:t.name,route:t.route,...e},{default:p=>{const g=XL(o,p.route,p.Component),w=o&&o.matched.length===p.route.matched.length;if(!p.Component){if(u&&!w)return u;h();return}if(u&&l&&!l.isCurrent(p.route))return u;if(g&&o&&(!l||l?.isCurrent(o)))return w?u:null;const v=Eh(p,t.pageKey),k=ZL(o,p.route,p.Component);!r.isHydrating&&a===v&&!k&&Xs(()=>{f=!0,r.callHook("page:loading:end")}),a=v;const M=!!(t.transition??p.route.meta.pageTransition??sm),V=M&&JL([t.transition,p.route.meta.pageTransition,sm,{onAfterLeave(){delete r._runningTransition,r.callHook("page:transition:finish",p.Component)}}]),_=t.keepalive??p.route.meta.keepalive??DR;return u=Vv(M&&V,eC(_,ot(yf,{suspensible:!0,onPending:()=>{M&&(r._runningTransition=!0),r.callHook("page:start",p.Component)},onResolve:async()=>{await Xs();try{r._route.sync?.(),await r.callHook("page:finish",p.Component),delete r._runningTransition,!f&&!k&&(f=!0,await r.callHook("page:loading:end"))}finally{h()}}},{default:()=>{const I={key:v||void 0,vnode:n.default?eM(n.default,p):p.Component,route:p.route,renderKey:v||void 0,trackRootNodes:M,vnodeRef:i};if(!_)return ot(QL,I);const O=p.Component.type,F=O;let S=T_.get(F);return S||(S=Ew(O.name||O.__name),T_.set(F,S)),ot(S,I)}}))).default(),u}})}});function JL(t){const e=[];for(const n of t)n&&e.push({...n,onAfterLeave:n.onAfterLeave?kf(n.onAfterLeave):void 0});return av(...e)}function XL(t,e,n){if(!t)return!1;const s=e.matched.findIndex(r=>r.components?.default===n?.type);return!s||s===-1?!1:e.matched.slice(0,s).some((r,i)=>r.components?.default!==t.matched[i]?.components?.default)||n&&Eh({route:e,Component:n})!==Eh({route:t,Component:n})}function ZL(t,e,n){return t?e.matched.findIndex(r=>r.components?.default===n?.type)<e.matched.length-1:!1}function eM(t,e){const n=t(e);return n.length===1?ot(n[0]):ot($e,void 0,n)}const tM=ut({name:"LayoutLoader",inheritAttrs:!1,props:{name:String,layoutProps:Object},setup(t,e){return()=>ot(Hs[t.name],t.layoutProps,e.slots)}}),nM={name:{type:[String,Boolean,Object],default:null},fallback:{type:[String,Object],default:null}},sM=ut({name:"NuxtLayout",inheritAttrs:!1,props:nM,setup(t,e){const n=ct(),s=Vt(Vr),i=!s||s===Ui()?Ov():s,o=xe(()=>{let h=ze(t.name)??i?.meta.layout??"default";return h&&!(h in Hs)&&t.fallback&&(h=ze(t.fallback)),h}),a=hs();e.expose({layoutRef:a});const l=n.deferHydration();if(n.isHydrating){const h=n.hooks.hookOnce("app:error",l);zt().beforeEach(h)}let u;return()=>{const h=o.value&&o.value in Hs,f=i?.meta.layoutTransition??NR,p=u;return u=o.value,Vv(h&&f,{default:()=>ot(yf,{suspensible:!0,onResolve:()=>{Xs(l)}},{default:()=>ot(rM,{layoutProps:Uy(e.attrs,{ref:a}),key:o.value||void 0,name:o.value,shouldProvide:!t.name,isRenderingNewLayout:g=>g!==p&&g===o.value,hasTransition:!!f},e.slots)})}).default()}}}),rM=ut({name:"NuxtLayoutProvider",inheritAttrs:!1,props:{name:{type:[String,Boolean]},layoutProps:{type:Object},hasTransition:{type:Boolean},shouldProvide:{type:Boolean},isRenderingNewLayout:{type:Function,required:!0}},setup(t,e){const n=t.name;t.shouldProvide&&ss(lv,{isCurrent:i=>n===(i.meta.layout??"default")});const s=Vt(Vr);if(s&&s===Ui()){const i=Ov(),o={};for(const a in i){const l=a;Object.defineProperty(o,l,{enumerable:!0,get:()=>t.isRenderingNewLayout(t.name)?i[l]:s[l]})}ss(Vr,Ln(o))}return()=>!n||typeof n=="string"&&!(n in Hs)?e.slots.default?.():ot(tM,{key:n,layoutProps:t.layoutProps,name:n},e.slots)}}),iM={class:"user-dropdown"},oM={class:"user-name"},aM={key:0,class:"dropdown-menu"},cM=ut({__name:"UserDropdown",props:{userName:{}},emits:["logout","goToProfile"],setup(t,{emit:e}){const n=e,s=le(!1),r=()=>{s.value=!s.value},i=()=>{s.value=!1},o=()=>{i(),n("goToProfile")},a=()=>{n("logout"),i()};return(l,u)=>{const h=oI("click-outside");return go((ge(),Re("div",iM,[K("button",{class:"dropdown-trigger",onClick:r},[K("span",oM,fn(t.userName),1),(ge(),Re("svg",{class:Ct(["arrow-icon",{"arrow-icon--open":s.value}]),width:"12",height:"12",viewBox:"0 0 12 12",fill:"none"},[...u[0]||(u[0]=[K("path",{d:"M3 4.5L6 7.5L9 4.5",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)])],2))]),Ee(ha,{name:"dropdown"},{default:cn(()=>[s.value?(ge(),Re("div",aM,[K("button",{class:"dropdown-item",onClick:o},[...u[1]||(u[1]=[K("svg",{class:"item-icon",width:"16",height:"16",viewBox:"0 0 16 16",fill:"none"},[K("circle",{cx:"8",cy:"5",r:"3",stroke:"currentColor","stroke-width":"1.5"}),K("path",{d:"M2 14c0-3 2.5-5 6-5s6 2 6 5",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round"})],-1),Be(" Profilo ",-1)])]),u[3]||(u[3]=K("button",{class:"dropdown-item dropdown-item--disabled",disabled:""},[K("svg",{class:"item-icon",width:"16",height:"16",viewBox:"0 0 16 16",fill:"none"},[K("circle",{cx:"8",cy:"8",r:"6",stroke:"currentColor","stroke-width":"1.5"}),K("path",{d:"M8 5v3l2 2",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round"})]),Be(" Impostazioni ")],-1)),u[4]||(u[4]=K("div",{class:"dropdown-divider"},null,-1)),K("button",{class:"dropdown-item dropdown-item--danger",onClick:a},[...u[2]||(u[2]=[K("svg",{class:"item-icon",width:"16",height:"16",viewBox:"0 0 16 16",fill:"none"},[K("path",{d:"M6 2H4a2 2 0 00-2 2v8a2 2 0 002 2h2M11 11l3-3-3-3M14 8H6",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"})],-1),Be(" Logout ",-1)])])])):fs("",!0)]),_:1})])),[[h,i]])}}}),lM=Object.assign(_n(cM,[["__scopeId","data-v-a926000c"]]),{__name:"UiUserDropdown"}),uM={class:"profile-page"},hM={class:"profile-header"},fM={class:"header-inner"},dM={class:"header-right"},pM={class:"profile-main"},mM={class:"profile-container"},gM={class:"page-title"},_M={class:"profile-grid"},yM={class:"profile-sidebar"},vM={class:"user-info"},EM={class:"user-nickname"},TM={class:"user-email"},wM={class:"profile-content"},bM={class:"profile-card"},IM={class:"equipment-form"},AM={class:"form-group"},RM={class:"form-group"},SM={class:"form-group"},CM={class:"form-group"},PM=["disabled"],kM={class:"profile-card sharing-card"},NM={class:"sharing-info"},DM={key:0,class:"sharing-count"},OM={key:1,class:"sharing-count sharing-count--empty"},VM=["disabled"],LM={class:"profile-card reset-card"},MM={class:"reset-info"},xM=["disabled"],FM=ut({__name:"ProfilePage",props:{userEmail:{},userNickname:{},userRole:{}},emits:["logout","back"],setup(t,{emit:e}){const n=t,s=e,{currentUser:r,getUserProfile:i}=Qi(),o=xe(()=>n.userNickname?n.userNickname:n.userEmail?n.userEmail.split("@")[0]??"Utente":"Utente"),a=xe(()=>({pilot:"Profilo Pilota",coach:"Profilo Coach",admin:"Profilo Admin"})[n.userRole||"pilot"]??"Profilo Pilota"),l=xe(()=>({pilot:"PILOTA",coach:"COACH",admin:"ADMIN"})[n.userRole||"pilot"]??"PILOTA"),u=le({volante:"",corona:"",pedaliera:"",struttura:""}),h=le(!1),f=le(!1);Zs(async()=>{if(r.value){const R=await i(r.value.uid);R?.equipment&&(u.value={...u.value,...R.equipment}),await O()}});const{countSharedSessions:p,revokeAllSharedSessions:g,resetAllTrackBests:w}=Gl(),v=le(0),k=le(!1),M=le(!1),V=le(!1),_=le(!1),I=le(0);async function O(){v.value=await p()}async function F(){if(!k.value){k.value=!0,M.value=!1;try{const R=await g();v.value=0,M.value=!0,console.log(`[PROFILE] Revoked ${R} shared sessions`),setTimeout(()=>M.value=!1,2e3)}catch(R){console.error("[PROFILE] Revoke error:",R)}finally{k.value=!1}}}async function S(){if(!V.value&&confirm("Sei sicuro di voler eliminare tutti i tempi storici? I best verranno ricalcolati automaticamente alla prossima sincronizzazione.")){V.value=!0,_.value=!1;try{const R=await w();I.value=R,_.value=!0,console.log(`[PROFILE] Reset ${R} track bests`),setTimeout(()=>_.value=!1,3e3)}catch(R){console.error("[PROFILE] Reset bests error:",R)}finally{V.value=!1}}}const T=async()=>{if(r.value){h.value=!0;try{const{doc:R,updateDoc:y}=await ft(async()=>{const{doc:fe,updateDoc:ie}=await Promise.resolve().then(()=>XV);return{doc:fe,updateDoc:ie}},void 0,import.meta.url),{db:ae}=await ft(async()=>{const{db:fe}=await Promise.resolve().then(()=>nL);return{db:fe}},void 0,import.meta.url);await y(R(ae,"users",r.value.uid),{equipment:u.value}),f.value=!0,setTimeout(()=>f.value=!1,2e3)}catch(R){console.error("[PROFILE] Save error:",R)}finally{h.value=!1}}},E=()=>s("logout"),C=()=>{},P=()=>{s("back")};return(R,y)=>{const ae=lM;return ge(),Re("div",uM,[K("header",hM,[K("div",fM,[K("div",{class:"header-left"},[K("button",{class:"back-btn",onClick:P},[...y[4]||(y[4]=[K("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none"},[K("path",{d:"M12 4L6 10L12 16",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1),Be(" Dashboard ",-1)])])]),y[5]||(y[5]=K("div",{class:"header-brand"},[K("span",{class:"brand-badge"},"ACC"),K("span",{class:"brand-name"},"TELEMETRY")],-1)),K("div",dM,[Ee(ae,{"user-name":o.value,onLogout:E,onGoToProfile:C},null,8,["user-name"])])])]),K("main",pM,[K("div",mM,[K("h1",gM,fn(a.value),1),K("div",_M,[K("div",yM,[y[6]||(y[6]=sh('<div class="avatar-container" data-v-0081d254><svg class="avatar-helmet" viewBox="0 0 100 100" fill="none" data-v-0081d254><defs data-v-0081d254><linearGradient id="helmetGrad" x1="0%" y1="0%" x2="100%" y2="100%" data-v-0081d254><stop offset="0%" stop-color="#e10600" data-v-0081d254></stop><stop offset="100%" stop-color="#ff6b00" data-v-0081d254></stop></linearGradient></defs><path d="M50 10C30 10 15 25 15 45V60C15 75 25 85 40 88L45 90H55L60 88C75 85 85 75 85 60V45C85 25 70 10 50 10Z" stroke="url(#helmetGrad)" stroke-width="3" fill="none" data-v-0081d254></path><path d="M20 45H80C80 45 78 55 50 55C22 55 20 45 20 45Z" stroke="url(#helmetGrad)" stroke-width="2" fill="rgba(225,6,0,0.1)" data-v-0081d254></path><line x1="50" y1="15" x2="50" y2="85" stroke="url(#helmetGrad)" stroke-width="1.5" data-v-0081d254></line></svg></div>',1)),K("div",vM,[K("h2",EM,fn(o.value),1),K("span",{class:Ct(["role-badge",`role-badge--${t.userRole||"pilot"}`])},fn(l.value),3),K("p",TM,fn(t.userEmail||"Email non disponibile"),1)])]),K("div",wM,[K("div",bM,[y[11]||(y[11]=K("h3",{class:"card-title"},[K("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none"},[K("circle",{cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"2"}),K("circle",{cx:"12",cy:"12",r:"4",stroke:"currentColor","stroke-width":"2"})]),Be(" Attrezzatura Sim Racing ")],-1)),K("div",IM,[K("div",AM,[y[7]||(y[7]=K("label",{class:"form-label"},"Volante / Base",-1)),go(K("input",{"onUpdate:modelValue":y[0]||(y[0]=fe=>u.value.volante=fe),type:"text",class:"form-input",placeholder:"Es. Fanatec CSL DD 8Nm"},null,512),[[za,u.value.volante]])]),K("div",RM,[y[8]||(y[8]=K("label",{class:"form-label"},"Corona / Rim",-1)),go(K("input",{"onUpdate:modelValue":y[1]||(y[1]=fe=>u.value.corona=fe),type:"text",class:"form-input",placeholder:"Es. ClubSport Formula V2"},null,512),[[za,u.value.corona]])]),K("div",SM,[y[9]||(y[9]=K("label",{class:"form-label"},"Pedaliera",-1)),go(K("input",{"onUpdate:modelValue":y[2]||(y[2]=fe=>u.value.pedaliera=fe),type:"text",class:"form-input",placeholder:"Es. CSL Pedals + Load Cell"},null,512),[[za,u.value.pedaliera]])]),K("div",CM,[y[10]||(y[10]=K("label",{class:"form-label"},"Struttura / Rig",-1)),go(K("input",{"onUpdate:modelValue":y[3]||(y[3]=fe=>u.value.struttura=fe),type:"text",class:"form-input",placeholder:"Es. Next Level Racing 2.0"},null,512),[[za,u.value.struttura]])]),K("button",{class:Ct(["save-btn",{"save-btn--success":f.value}]),disabled:h.value,onClick:T},[h.value?(ge(),Re($e,{key:0},[Be("Salvataggio...")],64)):f.value?(ge(),Re($e,{key:1},[Be(" Salvato")],64)):(ge(),Re($e,{key:2},[Be("Salva Modifiche")],64))],10,PM)])]),K("div",kM,[y[14]||(y[14]=sh('<h3 class="card-title" data-v-0081d254><svg width="24" height="24" viewBox="0 0 24 24" fill="none" data-v-0081d254><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-0081d254></path><polyline points="15 3 21 3 21 9" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-0081d254></polyline><line x1="10" y1="14" x2="21" y2="3" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-0081d254></line></svg> Sessioni Condivise </h3>',1)),K("div",NM,[v.value>0?(ge(),Re("p",DM,[y[12]||(y[12]=Be(" Hai ",-1)),K("strong",null,fn(v.value),1),y[13]||(y[13]=Be(" sessioni condivise pubblicamente. ",-1))])):(ge(),Re("p",OM," Nessuna sessione condivisa. ")),v.value>0?(ge(),Re("button",{key:2,class:Ct(["revoke-btn",{"revoke-btn--success":M.value}]),disabled:k.value,onClick:F},[k.value?(ge(),Re($e,{key:0},[Be("Revocando...")],64)):M.value?(ge(),Re($e,{key:1},[Be(" Revocate")],64)):(ge(),Re($e,{key:2},[Be(" Revoca tutte le condivisioni")],64))],10,VM)):fs("",!0)])]),K("div",LM,[y[16]||(y[16]=K("h3",{class:"card-title"},[K("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none"},[K("path",{d:"M3 6h18M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2m3 0v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6h14",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})]),Be(" Reset Tempi Storici ")],-1)),K("div",MM,[y[15]||(y[15]=K("p",{class:"reset-description"}," Elimina tutti i best storici salvati. Alla prossima sincronizzazione verranno ricalcolati automaticamente dalle sessioni. ",-1)),K("button",{class:Ct(["reset-btn",{"reset-btn--success":_.value}]),disabled:V.value,onClick:S},[V.value?(ge(),Re($e,{key:0},[Be("Eliminando...")],64)):_.value?(ge(),Re($e,{key:1},[Be(" Eliminati "+fn(I.value)+" tracciati",1)],64)):(ge(),Re($e,{key:2},[Be(" Elimina tutti i best")],64))],10,xM)])])])])])])])}}}),UM=Object.assign(_n(FM,[["__scopeId","data-v-0081d254"]]),{__name:"ProfilePage"}),BM=mL(vL),$M={id:"app"},HM={key:"initializing",class:"initializing-screen"},jM={key:"register-success",class:"auth-wrapper"},qM={class:"auth-card-standalone"},GM={key:"loading",class:"loading-screen"},WM={key:"dashboard",class:"dashboard-wrapper"},zM={key:"profile",class:"profile-wrapper"},KM="dissolve-fade-zoom",QM=ut({__name:"app",setup(t){Ui();const e=zt();Zs(()=>{const I=sessionStorage.getItem("spa-redirect-path");I&&(sessionStorage.removeItem("spa-redirect-path"),setTimeout(()=>{e.push(I)},100))});const{currentUser:n,isLoading:s,logout:r}=Qi(),{prefetchAllTrackBests:i,loadSessions:o}=Gl(),a=le(!1),l=le("initializing"),u=le("login"),h=le(""),f=le(!1),p=le(!1);xn(l,async I=>{if(I==="dashboard"&&!a.value&&n.value){a.value=!0,console.log("[APP]  Starting global prefetch..."),await o();const O=await i();console.log(`[APP]  Prefetch complete: ${O} trackBests cached`)}}),xn(s,I=>{!I&&!f.value&&(f.value=!0,n.value?(h.value=n.value.email||"",p.value&&!n.value.emailVerified?(l.value="auth",u.value="register-success"):l.value="dashboard"):l.value="auth")},{immediate:!0}),xn(n,(I,O)=>{f.value&&(I?(h.value=I.email||"",p.value&&!I.emailVerified?(l.value!=="auth"||u.value!=="register-success")&&(l.value="auth",u.value="register-success"):l.value==="auth"&&u.value!=="register-success"&&(l.value="loading",setTimeout(()=>{l.value="dashboard"},1e3))):O&&(l.value="auth",u.value="login"))});const g=I=>{if(h.value=I,p.value&&n.value&&!n.value.emailVerified){u.value="register-success";return}l.value="loading",setTimeout(()=>{l.value="dashboard",e.push("/panoramica")},1500)},w=I=>{h.value=I,p.value?u.value="register-success":(l.value="loading",setTimeout(()=>{l.value="dashboard",e.push("/panoramica")},1500))},v=()=>{l.value="loading",setTimeout(()=>{l.value="dashboard",e.push("/panoramica")},1500)},k=()=>{console.log("[AUTH] Resending verification email to:",h.value)},M=async()=>{await r(),h.value="",u.value="login",l.value="auth"},V=()=>{l.value="profile"},_=()=>{l.value="dashboard"};return ss("goToProfile",V),(I,O)=>{const F=pL,S=BM,T=BL,E=KL,C=YL,P=sM,R=UM;return ge(),Re("div",$M,[Ee(F),Ee(S),Ee(ha,{name:KM,mode:"out-in"},{default:cn(()=>[l.value==="initializing"?(ge(),Re("div",HM,[...O[0]||(O[0]=[K("div",{class:"initializing-content"},[K("div",{class:"initializing-spinner"})],-1)])])):l.value==="auth"&&u.value!=="register-success"?(ge(),Jt(T,{key:"auth",onLoginSuccess:g,onRegisterSuccess:w})):l.value==="auth"&&u.value==="register-success"?(ge(),Re("div",jM,[K("div",qM,[Ee(E,{email:h.value,"require-email-verification":p.value,onGoToDashboard:v,onResendEmail:k},null,8,["email","require-email-verification"])])])):l.value==="loading"?(ge(),Re("div",GM,[...O[1]||(O[1]=[K("div",{class:"loading-content"},[K("div",{class:"loading-spinner"}),K("p",{class:"loading-text"},"Caricamento Dashboard...")],-1)])])):l.value==="dashboard"?(ge(),Re("div",WM,[Ee(P,null,{default:cn(()=>[Ee(C)]),_:1})])):l.value==="profile"?(ge(),Re("div",zM,[Ee(R,{onBack:_,onLogout:M})])):fs("",!0)]),_:1})])}}}),YM={__name:"nuxt-error-page",props:{error:Object},setup(t){const n=t.error,s=Number(n.statusCode||500),r=s===404,i=n.statusMessage??(r?"Page Not Found":"Internal Server Error"),o=n.message||n.toString(),a=void 0,h=r?Sc(()=>ft(()=>import("./C30T453H.js"),__vite__mapDeps([41,5,42]),import.meta.url)):Sc(()=>ft(()=>import("./DJCMSnYg.js"),__vite__mapDeps([43,44]),import.meta.url));return(f,p)=>(ge(),Jt(ze(h),Xw(Fy({statusCode:ze(s),statusMessage:ze(i),description:ze(o),stack:ze(a)})),null,16))}},JM={key:0},w_={__name:"nuxt-root",setup(t){const e=()=>null,n=ct(),s=n.deferHydration();if(n.isHydrating){const u=n.hooks.hookOnce("app:error",s);zt().beforeEach(u)}const r=!1;ss(Vr,Ui()),n.hooks.callHookWith(u=>u.map(h=>h()),"vue:setup");const i=yl(),o=!1,a=/bot\b|chrome-lighthouse|facebookexternalhit|google\b/i;py((u,h,f)=>{if(n.hooks.callHook("vue:error",u,h,f).catch(p=>console.error("[nuxt] Error in `vue:error` hook",p)),a.test(navigator.userAgent))return n.hooks.callHook("app:error",u),console.error(`[nuxt] Not rendering error page for bot with user agent \`${navigator.userAgent}\`:`,u),!1;if(hv(u)&&(u.fatal||u.unhandled))return n.runWithContext(()=>br(u)),!1});const l=!1;return(u,h)=>(ge(),Jt(yf,{onResolve:ze(s)},{default:cn(()=>[ze(o)?(ge(),Re("div",JM)):ze(i)?(ge(),Jt(ze(YM),{key:1,error:ze(i)},null,8,["error"])):ze(l)?(ge(),Jt(ze(e),{key:2,context:ze(l)},null,8,["context"])):ze(r)?(ge(),Jt(iI(ze(r)),{key:3})):(ge(),Jt(ze(QM),{key:4}))]),_:1},8,["onResolve"]))}};let b_;{let t;b_=async function(){if(t)return t;const n=!!(window.__NUXT__?.serverRendered??document.getElementById("__NUXT_DATA__")?.dataset.ssr==="true"),s=n?AA(w_):IA(w_),r=MR({vueApp:s});async function i(o){await r.callHook("app:error",o),r.payload.error||=Nr(o)}s.config.errorHandler=i,r.hook("app:suspense:resolve",()=>{s.config.errorHandler===i&&(s.config.errorHandler=void 0)}),!n&&rm.id&&r.hook("app:suspense:resolve",()=>{document.getElementById(rm.id)?.remove()});try{await UR(r,FC)}catch(o){i(o)}try{await r.hooks.callHook("app:created",s),await r.hooks.callHook("app:beforeMount",s),s.mount(OR),await r.hooks.callHook("app:mounted",s),await Xs()}catch(o){i(o)}return s},t=b_().catch(e=>{throw console.error("Error while mounting app:",e),e})}export{cl as $,Lm as A,lx as B,ix as C,cx as D,Re as E,ge as F,K as G,fn as H,Ee as I,cn as J,Be as K,Jt as L,ze as M,UM as N,Ui as O,fs as P,$e as Q,ex as R,Wt as S,Qe as T,qs as U,Ec as V,yn as W,Uo as X,Bo as Y,Li as Z,_n as _,Qi as a,Ct as a0,Yn as a1,Gl as a2,px as a3,fx as a4,hx as a5,dx as a6,go as a7,$s as a8,nx as a9,gl as aa,za as ab,sh as ac,vc as ad,_x as ae,tx as af,aI as ag,lM as ah,zI as ai,dy as aj,Fe as ak,Xs as al,ul as am,XM as an,sx as ao,gx as ap,vw as aq,ha as ar,mx as as,ut as b,zt as c,ox as d,mi as e,ct as f,Nf as g,la as h,Vt as i,ot as j,ZM as k,Ky as l,QR as m,ax as n,Zs as o,ss as p,VC as q,le as r,hs as s,xe as t,_l as u,jr as v,xn as w,Tf as x,JA as y,Lc as z};
