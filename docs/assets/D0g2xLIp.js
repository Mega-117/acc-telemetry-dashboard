const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./B0bCObdf.js","./index.Du2RZnax.css","./Bj5YO4tF.js","./BJUwgD9F.js","./dev-upload.DKhMZg7B.css","./CdD99xbp.js","./BM_3WCII.js","./ApLwZRIX.js","./useTelemetryData.DMW25oBZ.css","./PanoramicaPage.DXWBPort.css","./XcQ_BQcL.js","./Bze_1V6Z.js","./PaginationControls.CNLm8WGw.css","./7WvQwF6H.js","./AK9eegkX.js","./_id_.-3MzcrdC.css","./DXdPov2p.js","./DP6XqqfI.js","./SessioniPage.Bm05ninp.css","./D8X11t5S.js","./PistePage.oOSRasvc.css","./_id_.l7jb1vsl.css","./wdgzSUC7.js","./B-Ohj-iV.js","./index.BciVHbmO.css","./BjMnHo9H.js","./_id_.yjAlOfAx.css","./DaMbOs1b.js","./Dmw2_cgf.js","./coach.CxAeVU2u.css","./2VnoHy9p.js","./dashboard.B4rx-ixW.css","./DaEYdrQk.js","./error-404.BLrjNXsr.css","./CcJN2NC1.js","./error-500.DLkAwcfL.css"])))=>i.map(i=>d[i]);
(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function bh(t){const e=Object.create(null);for(const n of t.split(","))e[n]=1;return n=>n in e}const Fe={},Xs=[],kn=()=>{},Wg=()=>!1,Wo=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),Rh=t=>t.startsWith("onUpdate:"),vt=Object.assign,Sh=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},nT=Object.prototype.hasOwnProperty,Ve=(t,e)=>nT.call(t,e),ae=Array.isArray,Zs=t=>Ci(t)==="[object Map]",Si=t=>Ci(t)==="[object Set]",Fd=t=>Ci(t)==="[object Date]",rT=t=>Ci(t)==="[object RegExp]",fe=t=>typeof t=="function",Ge=t=>typeof t=="string",gn=t=>typeof t=="symbol",Me=t=>t!==null&&typeof t=="object",Ch=t=>(Me(t)||fe(t))&&fe(t.then)&&fe(t.catch),Gg=Object.prototype.toString,Ci=t=>Gg.call(t),sT=t=>Ci(t).slice(8,-1),Kg=t=>Ci(t)==="[object Object]",Mc=t=>Ge(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,ei=bh(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Lc=t=>{const e=Object.create(null);return(n=>e[n]||(e[n]=t(n)))},iT=/-\w/g,an=Lc(t=>t.replace(iT,e=>e.slice(1).toUpperCase())),oT=/\B([A-Z])/g,ks=Lc(t=>t.replace(oT,"-$1").toLowerCase()),Uc=Lc(t=>t.charAt(0).toUpperCase()+t.slice(1)),Fl=Lc(t=>t?`on${Uc(t)}`:""),Dr=(t,e)=>!Object.is(t,e),ti=(t,...e)=>{for(let n=0;n<t.length;n++)t[n](...e)},zg=(t,e,n,r=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:r,value:n})},Fc=t=>{const e=parseFloat(t);return isNaN(e)?t:e},Qg=t=>{const e=Ge(t)?Number(t):NaN;return isNaN(e)?t:e};let Bd;const Bc=()=>Bd||(Bd=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Hc(t){if(ae(t)){const e={};for(let n=0;n<t.length;n++){const r=t[n],s=Ge(r)?uT(r):Hc(r);if(s)for(const i in s)e[i]=s[i]}return e}else if(Ge(t)||Me(t))return t}const aT=/;(?![^(]*\))/g,cT=/:([^]+)/,lT=/\/\*[^]*?\*\//g;function uT(t){const e={};return t.replace(lT,"").split(aT).forEach(n=>{if(n){const r=n.split(cT);r.length>1&&(e[r[0].trim()]=r[1].trim())}}),e}function rn(t){let e="";if(Ge(t))e=t;else if(ae(t))for(let n=0;n<t.length;n++){const r=rn(t[n]);r&&(e+=r+" ")}else if(Me(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}function hT(t){if(!t)return null;let{class:e,style:n}=t;return e&&!Ge(e)&&(t.class=rn(e)),n&&(t.style=Hc(n)),t}const fT="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",dT=bh(fT);function Yg(t){return!!t||t===""}function pT(t,e){if(t.length!==e.length)return!1;let n=!0;for(let r=0;n&&r<t.length;r++)n=Go(t[r],e[r]);return n}function Go(t,e){if(t===e)return!0;let n=Fd(t),r=Fd(e);if(n||r)return n&&r?t.getTime()===e.getTime():!1;if(n=gn(t),r=gn(e),n||r)return t===e;if(n=ae(t),r=ae(e),n||r)return n&&r?pT(t,e):!1;if(n=Me(t),r=Me(e),n||r){if(!n||!r)return!1;const s=Object.keys(t).length,i=Object.keys(e).length;if(s!==i)return!1;for(const o in t){const a=t.hasOwnProperty(o),l=e.hasOwnProperty(o);if(a&&!l||!a&&l||!Go(t[o],e[o]))return!1}}return String(t)===String(e)}function Ph(t,e){return t.findIndex(n=>Go(n,e))}const Jg=t=>!!(t&&t.__v_isRef===!0),vs=t=>Ge(t)?t:t==null?"":ae(t)||Me(t)&&(t.toString===Gg||!fe(t.toString))?Jg(t)?vs(t.value):JSON.stringify(t,Xg,2):String(t),Xg=(t,e)=>Jg(e)?Xg(t,e.value):Zs(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[r,s],i)=>(n[Bl(r,i)+" =>"]=s,n),{})}:Si(e)?{[`Set(${e.size})`]:[...e.values()].map(n=>Bl(n))}:gn(e)?Bl(e):Me(e)&&!ae(e)&&!Kg(e)?String(e):e,Bl=(t,e="")=>{var n;return gn(t)?`Symbol(${(n=t.description)!=null?n:e})`:t};let kt;class Zg{constructor(e=!1){this.detached=e,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=kt,!e&&kt&&(this.index=(kt.scopes||(kt.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].pause();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].resume();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].resume()}}run(e){if(this._active){const n=kt;try{return kt=this,e()}finally{kt=n}}}on(){++this._on===1&&(this.prevScope=kt,kt=this)}off(){this._on>0&&--this._on===0&&(kt=this.prevScope,this.prevScope=void 0)}stop(e){if(this._active){this._active=!1;let n,r;for(n=0,r=this.effects.length;n<r;n++)this.effects[n].stop();for(this.effects.length=0,n=0,r=this.cleanups.length;n<r;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const s=this.parent.scopes.pop();s&&s!==this&&(this.parent.scopes[this.index]=s,s.index=this.index)}this.parent=void 0}}}function mT(t){return new Zg(t)}function kh(){return kt}function gT(t,e=!1){kt&&kt.cleanups.push(t)}let Be;const Hl=new WeakSet;class e_{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,kt&&kt.active&&kt.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,Hl.has(this)&&(Hl.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||n_(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Hd(this),r_(this);const e=Be,n=fn;Be=this,fn=!0;try{return this.fn()}finally{s_(this),Be=e,fn=n,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)Dh(e);this.deps=this.depsTail=void 0,Hd(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?Hl.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){wu(this)&&this.run()}get dirty(){return wu(this)}}let t_=0,ho,fo;function n_(t,e=!1){if(t.flags|=8,e){t.next=fo,fo=t;return}t.next=ho,ho=t}function Nh(){t_++}function Oh(){if(--t_>0)return;if(fo){let e=fo;for(fo=void 0;e;){const n=e.next;e.next=void 0,e.flags&=-9,e=n}}let t;for(;ho;){let e=ho;for(ho=void 0;e;){const n=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(r){t||(t=r)}e=n}}if(t)throw t}function r_(t){for(let e=t.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function s_(t){let e,n=t.depsTail,r=n;for(;r;){const s=r.prevDep;r.version===-1?(r===n&&(n=s),Dh(r),_T(r)):e=r,r.dep.activeLink=r.prevActiveLink,r.prevActiveLink=void 0,r=s}t.deps=e,t.depsTail=n}function wu(t){for(let e=t.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(i_(e.dep.computed)||e.dep.version!==e.version))return!0;return!!t._dirty}function i_(t){if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===So)||(t.globalVersion=So,!t.isSSR&&t.flags&128&&(!t.deps&&!t._dirty||!wu(t))))return;t.flags|=2;const e=t.dep,n=Be,r=fn;Be=t,fn=!0;try{r_(t);const s=t.fn(t._value);(e.version===0||Dr(s,t._value))&&(t.flags|=128,t._value=s,e.version++)}catch(s){throw e.version++,s}finally{Be=n,fn=r,s_(t),t.flags&=-3}}function Dh(t,e=!1){const{dep:n,prevSub:r,nextSub:s}=t;if(r&&(r.nextSub=s,t.prevSub=void 0),s&&(s.prevSub=r,t.nextSub=void 0),n.subs===t&&(n.subs=r,!r&&n.computed)){n.computed.flags&=-5;for(let i=n.computed.deps;i;i=i.nextDep)Dh(i,!0)}!e&&!--n.sc&&n.map&&n.map.delete(n.key)}function _T(t){const{prevDep:e,nextDep:n}=t;e&&(e.nextDep=n,t.prevDep=void 0),n&&(n.prevDep=e,t.nextDep=void 0)}let fn=!0;const o_=[];function rr(){o_.push(fn),fn=!1}function sr(){const t=o_.pop();fn=t===void 0?!0:t}function Hd(t){const{cleanup:e}=t;if(t.cleanup=void 0,e){const n=Be;Be=void 0;try{e()}finally{Be=n}}}let So=0;class yT{constructor(e,n){this.sub=e,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Vh{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(e){if(!Be||!fn||Be===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==Be)n=this.activeLink=new yT(Be,this),Be.deps?(n.prevDep=Be.depsTail,Be.depsTail.nextDep=n,Be.depsTail=n):Be.deps=Be.depsTail=n,a_(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const r=n.nextDep;r.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=r),n.prevDep=Be.depsTail,n.nextDep=void 0,Be.depsTail.nextDep=n,Be.depsTail=n,Be.deps===n&&(Be.deps=r)}return n}trigger(e){this.version++,So++,this.notify(e)}notify(e){Nh();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{Oh()}}}function a_(t){if(t.dep.sc++,t.sub.flags&4){const e=t.dep.computed;if(e&&!t.dep.subs){e.flags|=20;for(let r=e.deps;r;r=r.nextDep)a_(r)}const n=t.dep.subs;n!==t&&(t.prevSub=n,n&&(n.nextSub=t)),t.dep.subs=t}}const tc=new WeakMap,ps=Symbol(""),Tu=Symbol(""),Co=Symbol("");function Ot(t,e,n){if(fn&&Be){let r=tc.get(t);r||tc.set(t,r=new Map);let s=r.get(n);s||(r.set(n,s=new Vh),s.map=r,s.key=n),s.track()}}function Kn(t,e,n,r,s,i){const o=tc.get(t);if(!o){So++;return}const a=l=>{l&&l.trigger()};if(Nh(),e==="clear")o.forEach(a);else{const l=ae(t),u=l&&Mc(n);if(l&&n==="length"){const h=Number(r);o.forEach((d,p)=>{(p==="length"||p===Co||!gn(p)&&p>=h)&&a(d)})}else switch((n!==void 0||o.has(void 0))&&a(o.get(n)),u&&a(o.get(Co)),e){case"add":l?u&&a(o.get("length")):(a(o.get(ps)),Zs(t)&&a(o.get(Tu)));break;case"delete":l||(a(o.get(ps)),Zs(t)&&a(o.get(Tu)));break;case"set":Zs(t)&&a(o.get(ps));break}}Oh()}function vT(t,e){const n=tc.get(t);return n&&n.get(e)}function Hs(t){const e=Ce(t);return e===t?e:(Ot(e,"iterate",Co),Jt(t)?e:e.map(_n))}function jc(t){return Ot(t=Ce(t),"iterate",Co),t}function Tr(t,e){return xn(t)?Vr(t)?ui(_n(e)):ui(e):_n(e)}const ET={__proto__:null,[Symbol.iterator](){return jl(this,Symbol.iterator,t=>Tr(this,t))},concat(...t){return Hs(this).concat(...t.map(e=>ae(e)?Hs(e):e))},entries(){return jl(this,"entries",t=>(t[1]=Tr(this,t[1]),t))},every(t,e){return jn(this,"every",t,e,void 0,arguments)},filter(t,e){return jn(this,"filter",t,e,n=>n.map(r=>Tr(this,r)),arguments)},find(t,e){return jn(this,"find",t,e,n=>Tr(this,n),arguments)},findIndex(t,e){return jn(this,"findIndex",t,e,void 0,arguments)},findLast(t,e){return jn(this,"findLast",t,e,n=>Tr(this,n),arguments)},findLastIndex(t,e){return jn(this,"findLastIndex",t,e,void 0,arguments)},forEach(t,e){return jn(this,"forEach",t,e,void 0,arguments)},includes(...t){return $l(this,"includes",t)},indexOf(...t){return $l(this,"indexOf",t)},join(t){return Hs(this).join(t)},lastIndexOf(...t){return $l(this,"lastIndexOf",t)},map(t,e){return jn(this,"map",t,e,void 0,arguments)},pop(){return Zi(this,"pop")},push(...t){return Zi(this,"push",t)},reduce(t,...e){return jd(this,"reduce",t,e)},reduceRight(t,...e){return jd(this,"reduceRight",t,e)},shift(){return Zi(this,"shift")},some(t,e){return jn(this,"some",t,e,void 0,arguments)},splice(...t){return Zi(this,"splice",t)},toReversed(){return Hs(this).toReversed()},toSorted(t){return Hs(this).toSorted(t)},toSpliced(...t){return Hs(this).toSpliced(...t)},unshift(...t){return Zi(this,"unshift",t)},values(){return jl(this,"values",t=>Tr(this,t))}};function jl(t,e,n){const r=jc(t),s=r[e]();return r!==t&&!Jt(t)&&(s._next=s.next,s.next=()=>{const i=s._next();return i.done||(i.value=n(i.value)),i}),s}const wT=Array.prototype;function jn(t,e,n,r,s,i){const o=jc(t),a=o!==t&&!Jt(t),l=o[e];if(l!==wT[e]){const d=l.apply(t,i);return a?_n(d):d}let u=n;o!==t&&(a?u=function(d,p){return n.call(this,Tr(t,d),p,t)}:n.length>2&&(u=function(d,p){return n.call(this,d,p,t)}));const h=l.call(o,u,r);return a&&s?s(h):h}function jd(t,e,n,r){const s=jc(t);let i=n;return s!==t&&(Jt(t)?n.length>3&&(i=function(o,a,l){return n.call(this,o,a,l,t)}):i=function(o,a,l){return n.call(this,o,Tr(t,a),l,t)}),s[e](i,...r)}function $l(t,e,n){const r=Ce(t);Ot(r,"iterate",Co);const s=r[e](...n);return(s===-1||s===!1)&&$c(n[0])?(n[0]=Ce(n[0]),r[e](...n)):s}function Zi(t,e,n=[]){rr(),Nh();const r=Ce(t)[e].apply(t,n);return Oh(),sr(),r}const TT=bh("__proto__,__v_isRef,__isVue"),c_=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(gn));function IT(t){gn(t)||(t=String(t));const e=Ce(this);return Ot(e,"has",t),e.hasOwnProperty(t)}class l_{constructor(e=!1,n=!1){this._isReadonly=e,this._isShallow=n}get(e,n,r){if(n==="__v_skip")return e.__v_skip;const s=this._isReadonly,i=this._isShallow;if(n==="__v_isReactive")return!s;if(n==="__v_isReadonly")return s;if(n==="__v_isShallow")return i;if(n==="__v_raw")return r===(s?i?DT:d_:i?f_:h_).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(r)?e:void 0;const o=ae(e);if(!s){let l;if(o&&(l=ET[n]))return l;if(n==="hasOwnProperty")return IT}const a=Reflect.get(e,n,ot(e)?e:r);if((gn(n)?c_.has(n):TT(n))||(s||Ot(e,"get",n),i))return a;if(ot(a)){const l=o&&Mc(n)?a:a.value;return s&&Me(l)?Au(l):l}return Me(a)?s?Au(a):Kr(a):a}}class u_ extends l_{constructor(e=!1){super(!1,e)}set(e,n,r,s){let i=e[n];const o=ae(e)&&Mc(n);if(!this._isShallow){const u=xn(i);if(!Jt(r)&&!xn(r)&&(i=Ce(i),r=Ce(r)),!o&&ot(i)&&!ot(r))return u||(i.value=r),!0}const a=o?Number(n)<e.length:Ve(e,n),l=Reflect.set(e,n,r,ot(e)?e:s);return e===Ce(s)&&(a?Dr(r,i)&&Kn(e,"set",n,r):Kn(e,"add",n,r)),l}deleteProperty(e,n){const r=Ve(e,n);e[n];const s=Reflect.deleteProperty(e,n);return s&&r&&Kn(e,"delete",n,void 0),s}has(e,n){const r=Reflect.has(e,n);return(!gn(n)||!c_.has(n))&&Ot(e,"has",n),r}ownKeys(e){return Ot(e,"iterate",ae(e)?"length":ps),Reflect.ownKeys(e)}}class AT extends l_{constructor(e=!1){super(!0,e)}set(e,n){return!0}deleteProperty(e,n){return!0}}const bT=new u_,RT=new AT,ST=new u_(!0);const Iu=t=>t,Ia=t=>Reflect.getPrototypeOf(t);function CT(t,e,n){return function(...r){const s=this.__v_raw,i=Ce(s),o=Zs(i),a=t==="entries"||t===Symbol.iterator&&o,l=t==="keys"&&o,u=s[t](...r),h=n?Iu:e?ui:_n;return!e&&Ot(i,"iterate",l?Tu:ps),{next(){const{value:d,done:p}=u.next();return p?{value:d,done:p}:{value:a?[h(d[0]),h(d[1])]:h(d),done:p}},[Symbol.iterator](){return this}}}}function Aa(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function PT(t,e){const n={get(s){const i=this.__v_raw,o=Ce(i),a=Ce(s);t||(Dr(s,a)&&Ot(o,"get",s),Ot(o,"get",a));const{has:l}=Ia(o),u=e?Iu:t?ui:_n;if(l.call(o,s))return u(i.get(s));if(l.call(o,a))return u(i.get(a));i!==o&&i.get(s)},get size(){const s=this.__v_raw;return!t&&Ot(Ce(s),"iterate",ps),s.size},has(s){const i=this.__v_raw,o=Ce(i),a=Ce(s);return t||(Dr(s,a)&&Ot(o,"has",s),Ot(o,"has",a)),s===a?i.has(s):i.has(s)||i.has(a)},forEach(s,i){const o=this,a=o.__v_raw,l=Ce(a),u=e?Iu:t?ui:_n;return!t&&Ot(l,"iterate",ps),a.forEach((h,d)=>s.call(i,u(h),u(d),o))}};return vt(n,t?{add:Aa("add"),set:Aa("set"),delete:Aa("delete"),clear:Aa("clear")}:{add(s){!e&&!Jt(s)&&!xn(s)&&(s=Ce(s));const i=Ce(this);return Ia(i).has.call(i,s)||(i.add(s),Kn(i,"add",s,s)),this},set(s,i){!e&&!Jt(i)&&!xn(i)&&(i=Ce(i));const o=Ce(this),{has:a,get:l}=Ia(o);let u=a.call(o,s);u||(s=Ce(s),u=a.call(o,s));const h=l.call(o,s);return o.set(s,i),u?Dr(i,h)&&Kn(o,"set",s,i):Kn(o,"add",s,i),this},delete(s){const i=Ce(this),{has:o,get:a}=Ia(i);let l=o.call(i,s);l||(s=Ce(s),l=o.call(i,s)),a&&a.call(i,s);const u=i.delete(s);return l&&Kn(i,"delete",s,void 0),u},clear(){const s=Ce(this),i=s.size!==0,o=s.clear();return i&&Kn(s,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(s=>{n[s]=CT(s,t,e)}),n}function xh(t,e){const n=PT(t,e);return(r,s,i)=>s==="__v_isReactive"?!t:s==="__v_isReadonly"?t:s==="__v_raw"?r:Reflect.get(Ve(n,s)&&s in r?n:r,s,i)}const kT={get:xh(!1,!1)},NT={get:xh(!1,!0)},OT={get:xh(!0,!1)};const h_=new WeakMap,f_=new WeakMap,d_=new WeakMap,DT=new WeakMap;function VT(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function xT(t){return t.__v_skip||!Object.isExtensible(t)?0:VT(sT(t))}function Kr(t){return xn(t)?t:Mh(t,!1,bT,kT,h_)}function Pn(t){return Mh(t,!1,ST,NT,f_)}function Au(t){return Mh(t,!0,RT,OT,d_)}function Mh(t,e,n,r,s){if(!Me(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const i=xT(t);if(i===0)return t;const o=s.get(t);if(o)return o;const a=new Proxy(t,i===2?r:n);return s.set(t,a),a}function Vr(t){return xn(t)?Vr(t.__v_raw):!!(t&&t.__v_isReactive)}function xn(t){return!!(t&&t.__v_isReadonly)}function Jt(t){return!!(t&&t.__v_isShallow)}function $c(t){return t?!!t.__v_raw:!1}function Ce(t){const e=t&&t.__v_raw;return e?Ce(e):t}function MT(t){return!Ve(t,"__v_skip")&&Object.isExtensible(t)&&zg(t,"__v_skip",!0),t}const _n=t=>Me(t)?Kr(t):t,ui=t=>Me(t)?Au(t):t;function ot(t){return t?t.__v_isRef===!0:!1}function ue(t){return p_(t,!1)}function ir(t){return p_(t,!0)}function p_(t,e){return ot(t)?t:new LT(t,e)}class LT{constructor(e,n){this.dep=new Vh,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?e:Ce(e),this._value=n?e:_n(e),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(e){const n=this._rawValue,r=this.__v_isShallow||Jt(e)||xn(e);e=r?e:Ce(e),Dr(e,n)&&(this._rawValue=e,this._value=r?e:_n(e),this.dep.trigger())}}function He(t){return ot(t)?t.value:t}function UT(t){return fe(t)?t():He(t)}const FT={get:(t,e,n)=>e==="__v_raw"?t:He(Reflect.get(t,e,n)),set:(t,e,n,r)=>{const s=t[e];return ot(s)&&!ot(n)?(s.value=n,!0):Reflect.set(t,e,n,r)}};function m_(t){return Vr(t)?t:new Proxy(t,FT)}class BT{constructor(e,n,r){this._object=e,this._key=n,this._defaultValue=r,this.__v_isRef=!0,this._value=void 0,this._raw=Ce(e);let s=!0,i=e;if(!ae(e)||!Mc(String(n)))do s=!$c(i)||Jt(i);while(s&&(i=i.__v_raw));this._shallow=s}get value(){let e=this._object[this._key];return this._shallow&&(e=He(e)),this._value=e===void 0?this._defaultValue:e}set value(e){if(this._shallow&&ot(this._raw[this._key])){const n=this._object[this._key];if(ot(n)){n.value=e;return}}this._object[this._key]=e}get dep(){return vT(this._raw,this._key)}}class HT{constructor(e){this._getter=e,this.__v_isRef=!0,this.__v_isReadonly=!0,this._value=void 0}get value(){return this._value=this._getter()}}function jT(t,e,n){return ot(t)?t:fe(t)?new HT(t):Me(t)&&arguments.length>1?$T(t,e,n):ue(t)}function $T(t,e,n){return new BT(t,e,n)}class qT{constructor(e,n,r){this.fn=e,this.setter=n,this._value=void 0,this.dep=new Vh(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=So-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=r}notify(){if(this.flags|=16,!(this.flags&8)&&Be!==this)return n_(this,!0),!0}get value(){const e=this.dep.track();return i_(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function WT(t,e,n=!1){let r,s;return fe(t)?r=t:(r=t.get,s=t.set),new qT(r,s,n)}const ba={},nc=new WeakMap;let cs;function GT(t,e=!1,n=cs){if(n){let r=nc.get(n);r||nc.set(n,r=[]),r.push(t)}}function KT(t,e,n=Fe){const{immediate:r,deep:s,once:i,scheduler:o,augmentJob:a,call:l}=n,u=k=>s?k:Jt(k)||s===!1||s===0?zn(k,1):zn(k);let h,d,p,g,_=!1,y=!1;if(ot(t)?(d=()=>t.value,_=Jt(t)):Vr(t)?(d=()=>u(t),_=!0):ae(t)?(y=!0,_=t.some(k=>Vr(k)||Jt(k)),d=()=>t.map(k=>{if(ot(k))return k.value;if(Vr(k))return u(k);if(fe(k))return l?l(k,2):k()})):fe(t)?e?d=l?()=>l(t,2):t:d=()=>{if(p){rr();try{p()}finally{sr()}}const k=cs;cs=h;try{return l?l(t,3,[g]):t(g)}finally{cs=k}}:d=kn,e&&s){const k=d,V=s===!0?1/0:s;d=()=>zn(k(),V)}const N=kh(),D=()=>{h.stop(),N&&N.active&&Sh(N.effects,h)};if(i&&e){const k=e;e=(...V)=>{k(...V),D()}}let O=y?new Array(t.length).fill(ba):ba;const E=k=>{if(!(!(h.flags&1)||!h.dirty&&!k))if(e){const V=h.run();if(s||_||(y?V.some((U,b)=>Dr(U,O[b])):Dr(V,O))){p&&p();const U=cs;cs=h;try{const b=[V,O===ba?void 0:y&&O[0]===ba?[]:O,g];O=V,l?l(e,3,b):e(...b)}finally{cs=U}}}else h.run()};return a&&a(E),h=new e_(d),h.scheduler=o?()=>o(E,!1):E,g=k=>GT(k,!1,h),p=h.onStop=()=>{const k=nc.get(h);if(k){if(l)l(k,4);else for(const V of k)V();nc.delete(h)}},e?r?E(!0):O=h.run():o?o(E.bind(null,!0),!0):h.run(),D.pause=h.pause.bind(h),D.resume=h.resume.bind(h),D.stop=D,D}function zn(t,e=1/0,n){if(e<=0||!Me(t)||t.__v_skip||(n=n||new Map,(n.get(t)||0)>=e))return t;if(n.set(t,e),e--,ot(t))zn(t.value,e,n);else if(ae(t))for(let r=0;r<t.length;r++)zn(t[r],e,n);else if(Si(t)||Zs(t))t.forEach(r=>{zn(r,e,n)});else if(Kg(t)){for(const r in t)zn(t[r],e,n);for(const r of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,r)&&zn(t[r],e,n)}return t}function Ko(t,e,n,r){try{return r?t(...r):t()}catch(s){Pi(s,e,n)}}function yn(t,e,n,r){if(fe(t)){const s=Ko(t,e,n,r);return s&&Ch(s)&&s.catch(i=>{Pi(i,e,n)}),s}if(ae(t)){const s=[];for(let i=0;i<t.length;i++)s.push(yn(t[i],e,n,r));return s}}function Pi(t,e,n,r=!0){const s=e?e.vnode:null,{errorHandler:i,throwUnhandledErrorInProduction:o}=e&&e.appContext.config||Fe;if(e){let a=e.parent;const l=e.proxy,u=`https://vuejs.org/error-reference/#runtime-${n}`;for(;a;){const h=a.ec;if(h){for(let d=0;d<h.length;d++)if(h[d](t,l,u)===!1)return}a=a.parent}if(i){rr(),Ko(i,null,10,[t,l,u]),sr();return}}zT(t,n,s,r,o)}function zT(t,e,n,r=!0,s=!1){if(s)throw t;console.error(t)}const Ut=[];let Rn=-1;const ni=[];let Ir=null,$s=0;const g_=Promise.resolve();let rc=null;function Es(t){const e=rc||g_;return t?e.then(this?t.bind(this):t):e}function QT(t){let e=Rn+1,n=Ut.length;for(;e<n;){const r=e+n>>>1,s=Ut[r],i=Po(s);i<t||i===t&&s.flags&2?e=r+1:n=r}return e}function Lh(t){if(!(t.flags&1)){const e=Po(t),n=Ut[Ut.length-1];!n||!(t.flags&2)&&e>=Po(n)?Ut.push(t):Ut.splice(QT(e),0,t),t.flags|=1,__()}}function __(){rc||(rc=g_.then(y_))}function bu(t){ae(t)?ni.push(...t):Ir&&t.id===-1?Ir.splice($s+1,0,t):t.flags&1||(ni.push(t),t.flags|=1),__()}function $d(t,e,n=Rn+1){for(;n<Ut.length;n++){const r=Ut[n];if(r&&r.flags&2){if(t&&r.id!==t.uid)continue;Ut.splice(n,1),n--,r.flags&4&&(r.flags&=-2),r(),r.flags&4||(r.flags&=-2)}}}function sc(t){if(ni.length){const e=[...new Set(ni)].sort((n,r)=>Po(n)-Po(r));if(ni.length=0,Ir){Ir.push(...e);return}for(Ir=e,$s=0;$s<Ir.length;$s++){const n=Ir[$s];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}Ir=null,$s=0}}const Po=t=>t.id==null?t.flags&2?-1:1/0:t.id;function y_(t){try{for(Rn=0;Rn<Ut.length;Rn++){const e=Ut[Rn];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),Ko(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;Rn<Ut.length;Rn++){const e=Ut[Rn];e&&(e.flags&=-2)}Rn=-1,Ut.length=0,sc(),rc=null,(Ut.length||ni.length)&&y_()}}let bt=null,v_=null;function ic(t){const e=bt;return bt=t,v_=t&&t.type.__scopeId||null,e}function sn(t,e=bt,n){if(!e||t._n)return t;const r=(...s)=>{r._d&&hc(-1);const i=ic(e);let o;try{o=t(...s)}finally{ic(i),r._d&&hc(1)}return o};return r._n=!0,r._c=!0,r._d=!0,r}function ro(t,e){if(bt===null)return t;const n=zc(bt),r=t.dirs||(t.dirs=[]);for(let s=0;s<e.length;s++){let[i,o,a,l=Fe]=e[s];i&&(fe(i)&&(i={mounted:i,updated:i}),i.deep&&zn(o),r.push({dir:i,instance:n,value:o,oldValue:void 0,arg:a,modifiers:l}))}return t}function Sn(t,e,n,r){const s=t.dirs,i=e&&e.dirs;for(let o=0;o<s.length;o++){const a=s[o];i&&(a.oldValue=i[o].value);let l=a.dir[r];l&&(rr(),yn(l,n,8,[t.el,a,t,e]),sr())}}function Jn(t,e){if(At){let n=At.provides;const r=At.parent&&At.parent.provides;r===n&&(n=At.provides=Object.create(r)),n[t]=e}}function Rt(t,e,n=!1){const r=Ns();if(r||ms){let s=ms?ms._context.provides:r?r.parent==null||r.ce?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:void 0;if(s&&t in s)return s[t];if(arguments.length>1)return n&&fe(e)?e.call(r&&r.proxy):e}}function qc(){return!!(Ns()||ms)}const YT=Symbol.for("v-scx"),JT=()=>Rt(YT);function XT(t,e){return Uh(t,null,e)}function xr(t,e,n){return Uh(t,e,n)}function Uh(t,e,n=Fe){const{immediate:r,deep:s,flush:i,once:o}=n,a=vt({},n),l=e&&r||!e&&i!=="post";let u;if(mi){if(i==="sync"){const g=JT();u=g.__watcherHandles||(g.__watcherHandles=[])}else if(!l){const g=()=>{};return g.stop=kn,g.resume=kn,g.pause=kn,g}}const h=At;a.call=(g,_,y)=>yn(g,h,_,y);let d=!1;i==="post"?a.scheduler=g=>{gt(g,h&&h.suspense)}:i!=="sync"&&(d=!0,a.scheduler=(g,_)=>{_?g():Lh(g)}),a.augmentJob=g=>{e&&(g.flags|=4),d&&(g.flags|=2,h&&(g.id=h.uid,g.i=h))};const p=KT(t,e,a);return mi&&(u?u.push(p):l&&p()),p}function ZT(t,e,n){const r=this.proxy,s=Ge(t)?t.includes(".")?E_(r,t):()=>r[t]:t.bind(r,r);let i;fe(e)?i=e:(i=e.handler,n=e);const o=Yo(this),a=Uh(s,i.bind(r),n);return o(),a}function E_(t,e){const n=e.split(".");return()=>{let r=t;for(let s=0;s<n.length&&r;s++)r=r[n[s]];return r}}const eI=Symbol("_vte"),w_=t=>t.__isTeleport,Gn=Symbol("_leaveCb"),Ra=Symbol("_enterCb");function tI(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return fi(()=>{t.isMounted=!0}),Qo(()=>{t.isUnmounting=!0}),t}const Zt=[Function,Array],T_={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Zt,onEnter:Zt,onAfterEnter:Zt,onEnterCancelled:Zt,onBeforeLeave:Zt,onLeave:Zt,onAfterLeave:Zt,onLeaveCancelled:Zt,onBeforeAppear:Zt,onAppear:Zt,onAfterAppear:Zt,onAppearCancelled:Zt},I_=t=>{const e=t.subTree;return e.component?I_(e.component):e},nI={name:"BaseTransition",props:T_,setup(t,{slots:e}){const n=Ns(),r=tI();return()=>{const s=e.default&&R_(e.default(),!0);if(!s||!s.length)return;const i=A_(s),o=Ce(t),{mode:a}=o;if(r.isLeaving)return ql(i);const l=qd(i);if(!l)return ql(i);let u=Ru(l,o,r,n,d=>u=d);l.type!==rt&&hi(l,u);let h=n.subTree&&qd(n.subTree);if(h&&h.type!==rt&&!un(h,l)&&I_(n).type!==rt){let d=Ru(h,o,r,n);if(hi(h,d),a==="out-in"&&l.type!==rt)return r.isLeaving=!0,d.afterLeave=()=>{r.isLeaving=!1,n.job.flags&8||n.update(),delete d.afterLeave,h=void 0},ql(i);a==="in-out"&&l.type!==rt?d.delayLeave=(p,g,_)=>{const y=b_(r,h);y[String(h.key)]=h,p[Gn]=()=>{g(),p[Gn]=void 0,delete u.delayedLeave,h=void 0},u.delayedLeave=()=>{_(),delete u.delayedLeave,h=void 0}}:h=void 0}else h&&(h=void 0);return i}}};function A_(t){let e=t[0];if(t.length>1){for(const n of t)if(n.type!==rt){e=n;break}}return e}const rI=nI;function b_(t,e){const{leavingVNodes:n}=t;let r=n.get(e.type);return r||(r=Object.create(null),n.set(e.type,r)),r}function Ru(t,e,n,r,s){const{appear:i,mode:o,persisted:a=!1,onBeforeEnter:l,onEnter:u,onAfterEnter:h,onEnterCancelled:d,onBeforeLeave:p,onLeave:g,onAfterLeave:_,onLeaveCancelled:y,onBeforeAppear:N,onAppear:D,onAfterAppear:O,onAppearCancelled:E}=e,k=String(t.key),V=b_(n,t),U=(w,R)=>{w&&yn(w,r,9,R)},b=(w,R)=>{const C=R[1];U(w,R),ae(w)?w.every(S=>S.length<=1)&&C():w.length<=1&&C()},T={mode:o,persisted:a,beforeEnter(w){let R=l;if(!n.isMounted)if(i)R=N||l;else return;w[Gn]&&w[Gn](!0);const C=V[k];C&&un(t,C)&&C.el[Gn]&&C.el[Gn](),U(R,[w])},enter(w){let R=u,C=h,S=d;if(!n.isMounted)if(i)R=D||u,C=O||h,S=E||d;else return;let I=!1;const le=w[Ra]=Ie=>{I||(I=!0,Ie?U(S,[w]):U(C,[w]),T.delayedLeave&&T.delayedLeave(),w[Ra]=void 0)};R?b(R,[w,le]):le()},leave(w,R){const C=String(t.key);if(w[Ra]&&w[Ra](!0),n.isUnmounting)return R();U(p,[w]);let S=!1;const I=w[Gn]=le=>{S||(S=!0,R(),le?U(y,[w]):U(_,[w]),w[Gn]=void 0,V[C]===t&&delete V[C])};V[C]=t,g?b(g,[w,I]):I()},clone(w){const R=Ru(w,e,n,r,s);return s&&s(R),R}};return T}function ql(t){if(zo(t))return t=on(t),t.children=null,t}function qd(t){if(!zo(t))return w_(t.type)&&t.children?A_(t.children):t;if(t.component)return t.component.subTree;const{shapeFlag:e,children:n}=t;if(n){if(e&16)return n[0];if(e&32&&fe(n.default))return n.default()}}function hi(t,e){t.shapeFlag&6&&t.component?(t.transition=e,hi(t.component.subTree,e)):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function R_(t,e=!1,n){let r=[],s=0;for(let i=0;i<t.length;i++){let o=t[i];const a=n==null?o.key:String(n)+String(o.key!=null?o.key:i);o.type===We?(o.patchFlag&128&&s++,r=r.concat(R_(o.children,e,a))):(e||o.type!==rt)&&r.push(a!=null?on(o,{key:a}):o)}if(s>1)for(let i=0;i<r.length;i++)r[i].patchFlag=-2;return r}function ct(t,e){return fe(t)?vt({name:t.name},e,{setup:t}):t}function Fh(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}const oc=new WeakMap;function ri(t,e,n,r,s=!1){if(ae(t)){t.forEach((_,y)=>ri(_,e&&(ae(e)?e[y]:e),n,r,s));return}if(Xn(r)&&!s){r.shapeFlag&512&&r.type.__asyncResolved&&r.component.subTree.component&&ri(t,e,n,r.component.subTree);return}const i=r.shapeFlag&4?zc(r.component):r.el,o=s?null:i,{i:a,r:l}=t,u=e&&e.r,h=a.refs===Fe?a.refs={}:a.refs,d=a.setupState,p=Ce(d),g=d===Fe?Wg:_=>Ve(p,_);if(u!=null&&u!==l){if(Wd(e),Ge(u))h[u]=null,g(u)&&(d[u]=null);else if(ot(u)){u.value=null;const _=e;_.k&&(h[_.k]=null)}}if(fe(l))Ko(l,a,12,[o,h]);else{const _=Ge(l),y=ot(l);if(_||y){const N=()=>{if(t.f){const D=_?g(l)?d[l]:h[l]:l.value;if(s)ae(D)&&Sh(D,i);else if(ae(D))D.includes(i)||D.push(i);else if(_)h[l]=[i],g(l)&&(d[l]=h[l]);else{const O=[i];l.value=O,t.k&&(h[t.k]=O)}}else _?(h[l]=o,g(l)&&(d[l]=o)):y&&(l.value=o,t.k&&(h[t.k]=o))};if(o){const D=()=>{N(),oc.delete(t)};D.id=-1,oc.set(t,D),gt(D,n)}else Wd(t),N()}}}function Wd(t){const e=oc.get(t);e&&(e.flags|=8,oc.delete(t))}let Gd=!1;const js=()=>{Gd||(console.error("Hydration completed but contains mismatches."),Gd=!0)},sI=t=>t.namespaceURI.includes("svg")&&t.tagName!=="foreignObject",iI=t=>t.namespaceURI.includes("MathML"),Sa=t=>{if(t.nodeType===1){if(sI(t))return"svg";if(iI(t))return"mathml"}},Qs=t=>t.nodeType===8;function oI(t){const{mt:e,p:n,o:{patchProp:r,createText:s,nextSibling:i,parentNode:o,remove:a,insert:l,createComment:u}}=t,h=(E,k)=>{if(!k.hasChildNodes()){n(null,E,k),sc(),k._vnode=E;return}d(k.firstChild,E,null,null,null),sc(),k._vnode=E},d=(E,k,V,U,b,T=!1)=>{T=T||!!k.dynamicChildren;const w=Qs(E)&&E.data==="[",R=()=>y(E,k,V,U,b,w),{type:C,ref:S,shapeFlag:I,patchFlag:le}=k;let Ie=E.nodeType;k.el=E,le===-2&&(T=!1,k.dynamicChildren=null);let re=null;switch(C){case gs:Ie!==3?k.children===""?(l(k.el=s(""),o(E),E),re=E):re=R():(E.data!==k.children&&(js(),E.data=k.children),re=i(E));break;case rt:O(E)?(re=i(E),D(k.el=E.content.firstChild,E,V)):Ie!==8||w?re=R():re=i(E);break;case mo:if(w&&(E=i(E),Ie=E.nodeType),Ie===1||Ie===3){re=E;const pe=!k.children.length;for(let ee=0;ee<k.staticCount;ee++)pe&&(k.children+=re.nodeType===1?re.outerHTML:re.data),ee===k.staticCount-1&&(k.anchor=re),re=i(re);return w?i(re):re}else R();break;case We:w?re=_(E,k,V,U,b,T):re=R();break;default:if(I&1)(Ie!==1||k.type.toLowerCase()!==E.tagName.toLowerCase())&&!O(E)?re=R():re=p(E,k,V,U,b,T);else if(I&6){k.slotScopeIds=b;const pe=o(E);if(w?re=N(E):Qs(E)&&E.data==="teleport start"?re=N(E,E.data,"teleport end"):re=i(E),e(k,pe,null,V,U,Sa(pe),T),Xn(k)&&!k.type.__asyncResolved){let ee;w?(ee=ge(We),ee.anchor=re?re.previousSibling:pe.lastChild):ee=E.nodeType===3?Ye(""):ge("div"),ee.el=E,k.component.subTree=ee}}else I&64?Ie!==8?re=R():re=k.type.hydrate(E,k,V,U,b,T,t,g):I&128&&(re=k.type.hydrate(E,k,V,U,Sa(o(E)),b,T,t,d))}return S!=null&&ri(S,null,U,k),re},p=(E,k,V,U,b,T)=>{T=T||!!k.dynamicChildren;const{type:w,props:R,patchFlag:C,shapeFlag:S,dirs:I,transition:le}=k,Ie=w==="input"||w==="option";if(Ie||C!==-1){I&&Sn(k,null,V,"created");let re=!1;if(O(E)){re=z_(null,le)&&V&&V.vnode.props&&V.vnode.props.appear;const ee=E.content.firstChild;if(re){const Ne=ee.getAttribute("class");Ne&&(ee.$cls=Ne),le.beforeEnter(ee)}D(ee,E,V),k.el=E=ee}if(S&16&&!(R&&(R.innerHTML||R.textContent))){let ee=g(E.firstChild,k,E,V,U,b,T);for(;ee;){Ca(E,1)||js();const Ne=ee;ee=ee.nextSibling,a(Ne)}}else if(S&8){let ee=k.children;ee[0]===`
`&&(E.tagName==="PRE"||E.tagName==="TEXTAREA")&&(ee=ee.slice(1));const{textContent:Ne}=E;Ne!==ee&&Ne!==ee.replace(/\r\n|\r/g,`
`)&&(Ca(E,0)||js(),E.textContent=k.children)}if(R){if(Ie||!T||C&48){const ee=E.tagName.includes("-");for(const Ne in R)(Ie&&(Ne.endsWith("value")||Ne==="indeterminate")||Wo(Ne)&&!ei(Ne)||Ne[0]==="."||ee)&&r(E,Ne,null,R[Ne],void 0,V)}else if(R.onClick)r(E,"onClick",null,R.onClick,void 0,V);else if(C&4&&Vr(R.style))for(const ee in R.style)R.style[ee]}let pe;(pe=R&&R.onVnodeBeforeMount)&&Bt(pe,V,k),I&&Sn(k,null,V,"beforeMount"),((pe=R&&R.onVnodeMounted)||I||re)&&Z_(()=>{pe&&Bt(pe,V,k),re&&le.enter(E),I&&Sn(k,null,V,"mounted")},U)}return E.nextSibling},g=(E,k,V,U,b,T,w)=>{w=w||!!k.dynamicChildren;const R=k.children,C=R.length;for(let S=0;S<C;S++){const I=w?R[S]:R[S]=Kt(R[S]),le=I.type===gs;E?(le&&!w&&S+1<C&&Kt(R[S+1]).type===gs&&(l(s(E.data.slice(I.children.length)),V,i(E)),E.data=I.children),E=d(E,I,U,b,T,w)):le&&!I.children?l(I.el=s(""),V):(Ca(V,1)||js(),n(null,I,V,null,U,b,Sa(V),T))}return E},_=(E,k,V,U,b,T)=>{const{slotScopeIds:w}=k;w&&(b=b?b.concat(w):w);const R=o(E),C=g(i(E),k,R,V,U,b,T);return C&&Qs(C)&&C.data==="]"?i(k.anchor=C):(js(),l(k.anchor=u("]"),R,C),C)},y=(E,k,V,U,b,T)=>{if(Ca(E.parentElement,1)||js(),k.el=null,T){const C=N(E);for(;;){const S=i(E);if(S&&S!==C)a(S);else break}}const w=i(E),R=o(E);return a(E),n(null,k,R,w,V,U,Sa(R),b),V&&(V.vnode.el=k.el,Kc(V,k.el)),w},N=(E,k="[",V="]")=>{let U=0;for(;E;)if(E=i(E),E&&Qs(E)&&(E.data===k&&U++,E.data===V)){if(U===0)return i(E);U--}return E},D=(E,k,V)=>{const U=k.parentNode;U&&U.replaceChild(E,k);let b=V;for(;b;)b.vnode.el===k&&(b.vnode.el=b.subTree.el=E),b=b.parent},O=E=>E.nodeType===1&&E.tagName==="TEMPLATE";return[h,d]}const Kd="data-allow-mismatch",aI={0:"text",1:"children",2:"class",3:"style",4:"attribute"};function Ca(t,e){if(e===0||e===1)for(;t&&!t.hasAttribute(Kd);)t=t.parentElement;const n=t&&t.getAttribute(Kd);if(n==null)return!1;if(n==="")return!0;{const r=n.split(",");return e===0&&r.includes("children")?!0:r.includes(aI[e])}}Bc().requestIdleCallback;Bc().cancelIdleCallback;function cI(t,e){if(Qs(t)&&t.data==="["){let n=1,r=t.nextSibling;for(;r;){if(r.nodeType===1){if(e(r)===!1)break}else if(Qs(r))if(r.data==="]"){if(--n===0)break}else r.data==="["&&n++;r=r.nextSibling}}else e(t)}const Xn=t=>!!t.type.__asyncLoader;function ac(t){fe(t)&&(t={loader:t});const{loader:e,loadingComponent:n,errorComponent:r,delay:s=200,hydrate:i,timeout:o,suspensible:a=!0,onError:l}=t;let u=null,h,d=0;const p=()=>(d++,u=null,g()),g=()=>{let _;return u||(_=u=e().catch(y=>{if(y=y instanceof Error?y:new Error(String(y)),l)return new Promise((N,D)=>{l(y,()=>N(p()),()=>D(y),d+1)});throw y}).then(y=>_!==u&&u?u:(y&&(y.__esModule||y[Symbol.toStringTag]==="Module")&&(y=y.default),h=y,y)))};return ct({name:"AsyncComponentWrapper",__asyncLoader:g,__asyncHydrate(_,y,N){let D=!1;(y.bu||(y.bu=[])).push(()=>D=!0);const O=()=>{D||N()},E=i?()=>{const k=i(O,V=>cI(_,V));k&&(y.bum||(y.bum=[])).push(k)}:O;h?E():g().then(()=>!y.isUnmounted&&E())},get __asyncResolved(){return h},setup(){const _=At;if(Fh(_),h)return()=>Pa(h,_);const y=E=>{u=null,Pi(E,_,13,!r)};if(a&&_.suspense||mi)return g().then(E=>()=>Pa(E,_)).catch(E=>(y(E),()=>r?ge(r,{error:E}):null));const N=ue(!1),D=ue(),O=ue(!!s);return s&&setTimeout(()=>{O.value=!1},s),o!=null&&setTimeout(()=>{if(!N.value&&!D.value){const E=new Error(`Async component timed out after ${o}ms.`);y(E),D.value=E}},o),g().then(()=>{N.value=!0,_.parent&&zo(_.parent.vnode)&&_.parent.update()}).catch(E=>{y(E),D.value=E}),()=>{if(N.value&&h)return Pa(h,_);if(D.value&&r)return ge(r,{error:D.value});if(n&&!O.value)return Pa(n,_)}}})}function Pa(t,e){const{ref:n,props:r,children:s,ce:i}=e.vnode,o=ge(t,r,s);return o.ref=n,o.ce=i,delete e.vnode.ce,o}const zo=t=>t.type.__isKeepAlive,lI={name:"KeepAlive",__isKeepAlive:!0,props:{include:[String,RegExp,Array],exclude:[String,RegExp,Array],max:[String,Number]},setup(t,{slots:e}){const n=Ns(),r=n.ctx;if(!r.renderer)return()=>{const O=e.default&&e.default();return O&&O.length===1?O[0]:O};const s=new Map,i=new Set;let o=null;const a=n.suspense,{renderer:{p:l,m:u,um:h,o:{createElement:d}}}=r,p=d("div");r.activate=(O,E,k,V,U)=>{const b=O.component;u(O,E,k,0,a),l(b.vnode,O,E,k,b,a,V,O.slotScopeIds,U),gt(()=>{b.isDeactivated=!1,b.a&&ti(b.a);const T=O.props&&O.props.onVnodeMounted;T&&Bt(T,b.parent,O)},a)},r.deactivate=O=>{const E=O.component;lc(E.m),lc(E.a),u(O,p,null,1,a),gt(()=>{E.da&&ti(E.da);const k=O.props&&O.props.onVnodeUnmounted;k&&Bt(k,E.parent,O),E.isDeactivated=!0},a)};function g(O){Wl(O),h(O,n,a,!0)}function _(O){s.forEach((E,k)=>{const V=Vu(Xn(E)?E.type.__asyncResolved||{}:E.type);V&&!O(V)&&y(k)})}function y(O){const E=s.get(O);E&&(!o||!un(E,o))?g(E):o&&Wl(o),s.delete(O),i.delete(O)}xr(()=>[t.include,t.exclude],([O,E])=>{O&&_(k=>so(O,k)),E&&_(k=>!so(E,k))},{flush:"post",deep:!0});let N=null;const D=()=>{N!=null&&(uc(n.subTree.type)?gt(()=>{s.set(N,ka(n.subTree))},n.subTree.suspense):s.set(N,ka(n.subTree)))};return fi(D),k_(D),Qo(()=>{s.forEach(O=>{const{subTree:E,suspense:k}=n,V=ka(E);if(O.type===V.type&&O.key===V.key){Wl(V);const U=V.component.da;U&&gt(U,k);return}g(O)})}),()=>{if(N=null,!e.default)return o=null;const O=e.default(),E=O[0];if(O.length>1)return o=null,O;if(!ws(E)||!(E.shapeFlag&4)&&!(E.shapeFlag&128))return o=null,E;let k=ka(E);if(k.type===rt)return o=null,k;const V=k.type,U=Vu(Xn(k)?k.type.__asyncResolved||{}:V),{include:b,exclude:T,max:w}=t;if(b&&(!U||!so(b,U))||T&&U&&so(T,U))return k.shapeFlag&=-257,o=k,E;const R=k.key==null?V:k.key,C=s.get(R);return k.el&&(k=on(k),E.shapeFlag&128&&(E.ssContent=k)),N=R,C?(k.el=C.el,k.component=C.component,k.transition&&hi(k,k.transition),k.shapeFlag|=512,i.delete(R),i.add(R)):(i.add(R),w&&i.size>parseInt(w,10)&&y(i.values().next().value)),k.shapeFlag|=256,o=k,uc(E.type)?E:k}}},uI=lI;function so(t,e){return ae(t)?t.some(n=>so(n,e)):Ge(t)?t.split(",").includes(e):rT(t)?(t.lastIndex=0,t.test(e)):!1}function S_(t,e){P_(t,"a",e)}function C_(t,e){P_(t,"da",e)}function P_(t,e,n=At){const r=t.__wdc||(t.__wdc=()=>{let s=n;for(;s;){if(s.isDeactivated)return;s=s.parent}return t()});if(Wc(e,r,n),n){let s=n.parent;for(;s&&s.parent;)zo(s.parent.vnode)&&hI(r,e,n,s),s=s.parent}}function hI(t,e,n,r){const s=Wc(e,t,r,!0);N_(()=>{Sh(r[e],s)},n)}function Wl(t){t.shapeFlag&=-257,t.shapeFlag&=-513}function ka(t){return t.shapeFlag&128?t.ssContent:t}function Wc(t,e,n=At,r=!1){if(n){const s=n[t]||(n[t]=[]),i=e.__weh||(e.__weh=(...o)=>{rr();const a=Yo(n),l=yn(e,n,t,o);return a(),sr(),l});return r?s.unshift(i):s.push(i),i}}const ur=t=>(e,n=At)=>{(!mi||t==="sp")&&Wc(t,(...r)=>e(...r),n)},fI=ur("bm"),fi=ur("m"),dI=ur("bu"),k_=ur("u"),Qo=ur("bum"),N_=ur("um"),pI=ur("sp"),mI=ur("rtg"),gI=ur("rtc");function O_(t,e=At){Wc("ec",t,e)}const Bh="components",_I="directives";function zx(t,e){return Hh(Bh,t,!0,e)||t}const D_=Symbol.for("v-ndc");function yI(t){return Ge(t)?Hh(Bh,t,!1)||t:t||D_}function vI(t){return Hh(_I,t)}function Hh(t,e,n=!0,r=!1){const s=bt||At;if(s){const i=s.type;if(t===Bh){const a=Vu(i,!1);if(a&&(a===e||a===an(e)||a===Uc(an(e))))return i}const o=zd(s[t]||i[t],e)||zd(s.appContext[t],e);return!o&&r?i:o}}function zd(t,e){return t&&(t[e]||t[an(e)]||t[Uc(an(e))])}function Qx(t,e,n,r){let s;const i=n,o=ae(t);if(o||Ge(t)){const a=o&&Vr(t);let l=!1,u=!1;a&&(l=!Jt(t),u=xn(t),t=jc(t)),s=new Array(t.length);for(let h=0,d=t.length;h<d;h++)s[h]=e(l?u?ui(_n(t[h])):_n(t[h]):t[h],h,void 0,i)}else if(typeof t=="number"){s=new Array(t);for(let a=0;a<t;a++)s[a]=e(a+1,a,void 0,i)}else if(Me(t))if(t[Symbol.iterator])s=Array.from(t,(a,l)=>e(a,l,void 0,i));else{const a=Object.keys(t);s=new Array(a.length);for(let l=0,u=a.length;l<u;l++){const h=a[l];s[l]=e(t[h],h,l,i)}}else s=[];return s}function EI(t,e,n={},r,s){if(bt.ce||bt.parent&&Xn(bt.parent)&&bt.parent.ce){const u=Object.keys(n).length>0;return _e(),zt(We,null,[ge("slot",n,r)],u?-2:64)}let i=t[e];i&&i._c&&(i._d=!1),_e();const o=i&&V_(i(n)),a=n.key||o&&o.key,l=zt(We,{key:(a&&!gn(a)?a:`_${e}`)+(!o&&r?"_fb":"")},o||[],o&&t._===1?64:-2);return i&&i._c&&(i._d=!0),l}function V_(t){return t.some(e=>ws(e)?!(e.type===rt||e.type===We&&!V_(e.children)):!0)?t:null}const Su=t=>t?oy(t)?zc(t):Su(t.parent):null,po=vt(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>Su(t.parent),$root:t=>Su(t.root),$host:t=>t.ce,$emit:t=>t.emit,$options:t=>M_(t),$forceUpdate:t=>t.f||(t.f=()=>{Lh(t.update)}),$nextTick:t=>t.n||(t.n=Es.bind(t.proxy)),$watch:t=>ZT.bind(t)}),Gl=(t,e)=>t!==Fe&&!t.__isScriptSetup&&Ve(t,e),wI={get({_:t},e){if(e==="__v_skip")return!0;const{ctx:n,setupState:r,data:s,props:i,accessCache:o,type:a,appContext:l}=t;if(e[0]!=="$"){const p=o[e];if(p!==void 0)switch(p){case 1:return r[e];case 2:return s[e];case 4:return n[e];case 3:return i[e]}else{if(Gl(r,e))return o[e]=1,r[e];if(s!==Fe&&Ve(s,e))return o[e]=2,s[e];if(Ve(i,e))return o[e]=3,i[e];if(n!==Fe&&Ve(n,e))return o[e]=4,n[e];Cu&&(o[e]=0)}}const u=po[e];let h,d;if(u)return e==="$attrs"&&Ot(t.attrs,"get",""),u(t);if((h=a.__cssModules)&&(h=h[e]))return h;if(n!==Fe&&Ve(n,e))return o[e]=4,n[e];if(d=l.config.globalProperties,Ve(d,e))return d[e]},set({_:t},e,n){const{data:r,setupState:s,ctx:i}=t;return Gl(s,e)?(s[e]=n,!0):r!==Fe&&Ve(r,e)?(r[e]=n,!0):Ve(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(i[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:r,appContext:s,props:i,type:o}},a){let l;return!!(n[a]||t!==Fe&&a[0]!=="$"&&Ve(t,a)||Gl(e,a)||Ve(i,a)||Ve(r,a)||Ve(po,a)||Ve(s.config.globalProperties,a)||(l=o.__cssModules)&&l[a])},defineProperty(t,e,n){return n.get!=null?t._.accessCache[e]=0:Ve(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}};function Qd(t){return ae(t)?t.reduce((e,n)=>(e[n]=null,e),{}):t}let Cu=!0;function TI(t){const e=M_(t),n=t.proxy,r=t.ctx;Cu=!1,e.beforeCreate&&Yd(e.beforeCreate,t,"bc");const{data:s,computed:i,methods:o,watch:a,provide:l,inject:u,created:h,beforeMount:d,mounted:p,beforeUpdate:g,updated:_,activated:y,deactivated:N,beforeDestroy:D,beforeUnmount:O,destroyed:E,unmounted:k,render:V,renderTracked:U,renderTriggered:b,errorCaptured:T,serverPrefetch:w,expose:R,inheritAttrs:C,components:S,directives:I,filters:le}=e;if(u&&II(u,r,null),o)for(const pe in o){const ee=o[pe];fe(ee)&&(r[pe]=ee.bind(n))}if(s){const pe=s.call(n,n);Me(pe)&&(t.data=Kr(pe))}if(Cu=!0,i)for(const pe in i){const ee=i[pe],Ne=fe(ee)?ee.bind(n,n):fe(ee.get)?ee.get.bind(n,n):kn,In=!fe(ee)&&fe(ee.set)?ee.set.bind(n):kn,qt=dt({get:Ne,set:In});Object.defineProperty(r,pe,{enumerable:!0,configurable:!0,get:()=>qt.value,set:wt=>qt.value=wt})}if(a)for(const pe in a)x_(a[pe],r,n,pe);if(l){const pe=fe(l)?l.call(n):l;Reflect.ownKeys(pe).forEach(ee=>{Jn(ee,pe[ee])})}h&&Yd(h,t,"c");function re(pe,ee){ae(ee)?ee.forEach(Ne=>pe(Ne.bind(n))):ee&&pe(ee.bind(n))}if(re(fI,d),re(fi,p),re(dI,g),re(k_,_),re(S_,y),re(C_,N),re(O_,T),re(gI,U),re(mI,b),re(Qo,O),re(N_,k),re(pI,w),ae(R))if(R.length){const pe=t.exposed||(t.exposed={});R.forEach(ee=>{Object.defineProperty(pe,ee,{get:()=>n[ee],set:Ne=>n[ee]=Ne,enumerable:!0})})}else t.exposed||(t.exposed={});V&&t.render===kn&&(t.render=V),C!=null&&(t.inheritAttrs=C),S&&(t.components=S),I&&(t.directives=I),w&&Fh(t)}function II(t,e,n=kn){ae(t)&&(t=Pu(t));for(const r in t){const s=t[r];let i;Me(s)?"default"in s?i=Rt(s.from||r,s.default,!0):i=Rt(s.from||r):i=Rt(s),ot(i)?Object.defineProperty(e,r,{enumerable:!0,configurable:!0,get:()=>i.value,set:o=>i.value=o}):e[r]=i}}function Yd(t,e,n){yn(ae(t)?t.map(r=>r.bind(e.proxy)):t.bind(e.proxy),e,n)}function x_(t,e,n,r){let s=r.includes(".")?E_(n,r):()=>n[r];if(Ge(t)){const i=e[t];fe(i)&&xr(s,i)}else if(fe(t))xr(s,t.bind(n));else if(Me(t))if(ae(t))t.forEach(i=>x_(i,e,n,r));else{const i=fe(t.handler)?t.handler.bind(n):e[t.handler];fe(i)&&xr(s,i,t)}}function M_(t){const e=t.type,{mixins:n,extends:r}=e,{mixins:s,optionsCache:i,config:{optionMergeStrategies:o}}=t.appContext,a=i.get(e);let l;return a?l=a:!s.length&&!n&&!r?l=e:(l={},s.length&&s.forEach(u=>cc(l,u,o,!0)),cc(l,e,o)),Me(e)&&i.set(e,l),l}function cc(t,e,n,r=!1){const{mixins:s,extends:i}=e;i&&cc(t,i,n,!0),s&&s.forEach(o=>cc(t,o,n,!0));for(const o in e)if(!(r&&o==="expose")){const a=AI[o]||n&&n[o];t[o]=a?a(t[o],e[o]):e[o]}return t}const AI={data:Jd,props:Xd,emits:Xd,methods:io,computed:io,beforeCreate:Mt,created:Mt,beforeMount:Mt,mounted:Mt,beforeUpdate:Mt,updated:Mt,beforeDestroy:Mt,beforeUnmount:Mt,destroyed:Mt,unmounted:Mt,activated:Mt,deactivated:Mt,errorCaptured:Mt,serverPrefetch:Mt,components:io,directives:io,watch:RI,provide:Jd,inject:bI};function Jd(t,e){return e?t?function(){return vt(fe(t)?t.call(this,this):t,fe(e)?e.call(this,this):e)}:e:t}function bI(t,e){return io(Pu(t),Pu(e))}function Pu(t){if(ae(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function Mt(t,e){return t?[...new Set([].concat(t,e))]:e}function io(t,e){return t?vt(Object.create(null),t,e):e}function Xd(t,e){return t?ae(t)&&ae(e)?[...new Set([...t,...e])]:vt(Object.create(null),Qd(t),Qd(e??{})):e}function RI(t,e){if(!t)return e;if(!e)return t;const n=vt(Object.create(null),t);for(const r in e)n[r]=Mt(t[r],e[r]);return n}function L_(){return{app:null,config:{isNativeTag:Wg,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let SI=0;function CI(t,e){return function(r,s=null){fe(r)||(r=vt({},r)),s!=null&&!Me(s)&&(s=null);const i=L_(),o=new WeakSet,a=[];let l=!1;const u=i.app={_uid:SI++,_component:r,_props:s,_container:null,_context:i,_instance:null,version:oA,get config(){return i.config},set config(h){},use(h,...d){return o.has(h)||(h&&fe(h.install)?(o.add(h),h.install(u,...d)):fe(h)&&(o.add(h),h(u,...d))),u},mixin(h){return i.mixins.includes(h)||i.mixins.push(h),u},component(h,d){return d?(i.components[h]=d,u):i.components[h]},directive(h,d){return d?(i.directives[h]=d,u):i.directives[h]},mount(h,d,p){if(!l){const g=u._ceVNode||ge(r,s);return g.appContext=i,p===!0?p="svg":p===!1&&(p=void 0),d&&e?e(g,h):t(g,h,p),l=!0,u._container=h,h.__vue_app__=u,zc(g.component)}},onUnmount(h){a.push(h)},unmount(){l&&(yn(a,u._instance,16),t(null,u._container),delete u._container.__vue_app__)},provide(h,d){return i.provides[h]=d,u},runWithContext(h){const d=ms;ms=u;try{return h()}finally{ms=d}}};return u}}let ms=null;const PI=(t,e)=>e==="modelValue"||e==="model-value"?t.modelModifiers:t[`${e}Modifiers`]||t[`${an(e)}Modifiers`]||t[`${ks(e)}Modifiers`];function kI(t,e,...n){if(t.isUnmounted)return;const r=t.vnode.props||Fe;let s=n;const i=e.startsWith("update:"),o=i&&PI(r,e.slice(7));o&&(o.trim&&(s=n.map(h=>Ge(h)?h.trim():h)),o.number&&(s=n.map(Fc)));let a,l=r[a=Fl(e)]||r[a=Fl(an(e))];!l&&i&&(l=r[a=Fl(ks(e))]),l&&yn(l,t,6,s);const u=r[a+"Once"];if(u){if(!t.emitted)t.emitted={};else if(t.emitted[a])return;t.emitted[a]=!0,yn(u,t,6,s)}}const NI=new WeakMap;function U_(t,e,n=!1){const r=n?NI:e.emitsCache,s=r.get(t);if(s!==void 0)return s;const i=t.emits;let o={},a=!1;if(!fe(t)){const l=u=>{const h=U_(u,e,!0);h&&(a=!0,vt(o,h))};!n&&e.mixins.length&&e.mixins.forEach(l),t.extends&&l(t.extends),t.mixins&&t.mixins.forEach(l)}return!i&&!a?(Me(t)&&r.set(t,null),null):(ae(i)?i.forEach(l=>o[l]=null):vt(o,i),Me(t)&&r.set(t,o),o)}function Gc(t,e){return!t||!Wo(e)?!1:(e=e.slice(2).replace(/Once$/,""),Ve(t,e[0].toLowerCase()+e.slice(1))||Ve(t,ks(e))||Ve(t,e))}function Kl(t){const{type:e,vnode:n,proxy:r,withProxy:s,propsOptions:[i],slots:o,attrs:a,emit:l,render:u,renderCache:h,props:d,data:p,setupState:g,ctx:_,inheritAttrs:y}=t,N=ic(t);let D,O;try{if(n.shapeFlag&4){const k=s||r,V=k;D=Kt(u.call(V,k,h,d,g,p,_)),O=a}else{const k=e;D=Kt(k.length>1?k(d,{attrs:a,slots:o,emit:l}):k(d,null)),O=e.props?a:DI(a)}}catch(k){go.length=0,Pi(k,t,1),D=ge(rt)}let E=D;if(O&&y!==!1){const k=Object.keys(O),{shapeFlag:V}=E;k.length&&V&7&&(i&&k.some(Rh)&&(O=VI(O,i)),E=on(E,O,!1,!0))}return n.dirs&&(E=on(E,null,!1,!0),E.dirs=E.dirs?E.dirs.concat(n.dirs):n.dirs),n.transition&&hi(E,n.transition),D=E,ic(N),D}function OI(t,e=!0){let n;for(let r=0;r<t.length;r++){const s=t[r];if(ws(s)){if(s.type!==rt||s.children==="v-if"){if(n)return;n=s}}else return}return n}const DI=t=>{let e;for(const n in t)(n==="class"||n==="style"||Wo(n))&&((e||(e={}))[n]=t[n]);return e},VI=(t,e)=>{const n={};for(const r in t)(!Rh(r)||!(r.slice(9)in e))&&(n[r]=t[r]);return n};function xI(t,e,n){const{props:r,children:s,component:i}=t,{props:o,children:a,patchFlag:l}=e,u=i.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&l>=0){if(l&1024)return!0;if(l&16)return r?Zd(r,o,u):!!o;if(l&8){const h=e.dynamicProps;for(let d=0;d<h.length;d++){const p=h[d];if(o[p]!==r[p]&&!Gc(u,p))return!0}}}else return(s||a)&&(!a||!a.$stable)?!0:r===o?!1:r?o?Zd(r,o,u):!0:!!o;return!1}function Zd(t,e,n){const r=Object.keys(e);if(r.length!==Object.keys(t).length)return!0;for(let s=0;s<r.length;s++){const i=r[s];if(e[i]!==t[i]&&!Gc(n,i))return!0}return!1}function Kc({vnode:t,parent:e},n){for(;e;){const r=e.subTree;if(r.suspense&&r.suspense.activeBranch===t&&(r.el=t.el),r===t)(t=e.vnode).el=n,e=e.parent;else break}}const F_={},B_=()=>Object.create(F_),H_=t=>Object.getPrototypeOf(t)===F_;function MI(t,e,n,r=!1){const s={},i=B_();t.propsDefaults=Object.create(null),j_(t,e,s,i);for(const o in t.propsOptions[0])o in s||(s[o]=void 0);n?t.props=r?s:Pn(s):t.type.props?t.props=s:t.props=i,t.attrs=i}function LI(t,e,n,r){const{props:s,attrs:i,vnode:{patchFlag:o}}=t,a=Ce(s),[l]=t.propsOptions;let u=!1;if((r||o>0)&&!(o&16)){if(o&8){const h=t.vnode.dynamicProps;for(let d=0;d<h.length;d++){let p=h[d];if(Gc(t.emitsOptions,p))continue;const g=e[p];if(l)if(Ve(i,p))g!==i[p]&&(i[p]=g,u=!0);else{const _=an(p);s[_]=ku(l,a,_,g,t,!1)}else g!==i[p]&&(i[p]=g,u=!0)}}}else{j_(t,e,s,i)&&(u=!0);let h;for(const d in a)(!e||!Ve(e,d)&&((h=ks(d))===d||!Ve(e,h)))&&(l?n&&(n[d]!==void 0||n[h]!==void 0)&&(s[d]=ku(l,a,d,void 0,t,!0)):delete s[d]);if(i!==a)for(const d in i)(!e||!Ve(e,d))&&(delete i[d],u=!0)}u&&Kn(t.attrs,"set","")}function j_(t,e,n,r){const[s,i]=t.propsOptions;let o=!1,a;if(e)for(let l in e){if(ei(l))continue;const u=e[l];let h;s&&Ve(s,h=an(l))?!i||!i.includes(h)?n[h]=u:(a||(a={}))[h]=u:Gc(t.emitsOptions,l)||(!(l in r)||u!==r[l])&&(r[l]=u,o=!0)}if(i){const l=Ce(n),u=a||Fe;for(let h=0;h<i.length;h++){const d=i[h];n[d]=ku(s,l,d,u[d],t,!Ve(u,d))}}return o}function ku(t,e,n,r,s,i){const o=t[n];if(o!=null){const a=Ve(o,"default");if(a&&r===void 0){const l=o.default;if(o.type!==Function&&!o.skipFactory&&fe(l)){const{propsDefaults:u}=s;if(n in u)r=u[n];else{const h=Yo(s);r=u[n]=l.call(null,e),h()}}else r=l;s.ce&&s.ce._setProp(n,r)}o[0]&&(i&&!a?r=!1:o[1]&&(r===""||r===ks(n))&&(r=!0))}return r}const UI=new WeakMap;function $_(t,e,n=!1){const r=n?UI:e.propsCache,s=r.get(t);if(s)return s;const i=t.props,o={},a=[];let l=!1;if(!fe(t)){const h=d=>{l=!0;const[p,g]=$_(d,e,!0);vt(o,p),g&&a.push(...g)};!n&&e.mixins.length&&e.mixins.forEach(h),t.extends&&h(t.extends),t.mixins&&t.mixins.forEach(h)}if(!i&&!l)return Me(t)&&r.set(t,Xs),Xs;if(ae(i))for(let h=0;h<i.length;h++){const d=an(i[h]);ep(d)&&(o[d]=Fe)}else if(i)for(const h in i){const d=an(h);if(ep(d)){const p=i[h],g=o[d]=ae(p)||fe(p)?{type:p}:vt({},p),_=g.type;let y=!1,N=!0;if(ae(_))for(let D=0;D<_.length;++D){const O=_[D],E=fe(O)&&O.name;if(E==="Boolean"){y=!0;break}else E==="String"&&(N=!1)}else y=fe(_)&&_.name==="Boolean";g[0]=y,g[1]=N,(y||Ve(g,"default"))&&a.push(d)}}const u=[o,a];return Me(t)&&r.set(t,u),u}function ep(t){return t[0]!=="$"&&!ei(t)}const jh=t=>t==="_"||t==="_ctx"||t==="$stable",$h=t=>ae(t)?t.map(Kt):[Kt(t)],FI=(t,e,n)=>{if(e._n)return e;const r=sn((...s)=>$h(e(...s)),n);return r._c=!1,r},q_=(t,e,n)=>{const r=t._ctx;for(const s in t){if(jh(s))continue;const i=t[s];if(fe(i))e[s]=FI(s,i,r);else if(i!=null){const o=$h(i);e[s]=()=>o}}},W_=(t,e)=>{const n=$h(e);t.slots.default=()=>n},G_=(t,e,n)=>{for(const r in e)(n||!jh(r))&&(t[r]=e[r])},BI=(t,e,n)=>{const r=t.slots=B_();if(t.vnode.shapeFlag&32){const s=e._;s?(G_(r,e,n),n&&zg(r,"_",s,!0)):q_(e,r)}else e&&W_(t,e)},HI=(t,e,n)=>{const{vnode:r,slots:s}=t;let i=!0,o=Fe;if(r.shapeFlag&32){const a=e._;a?n&&a===1?i=!1:G_(s,e,n):(i=!e.$stable,q_(e,s)),o=e}else e&&(W_(t,e),o={default:1});if(i)for(const a in s)!jh(a)&&o[a]==null&&delete s[a]},gt=Z_;function jI(t){return K_(t)}function $I(t){return K_(t,oI)}function K_(t,e){const n=Bc();n.__VUE__=!0;const{insert:r,remove:s,patchProp:i,createElement:o,createText:a,createComment:l,setText:u,setElementText:h,parentNode:d,nextSibling:p,setScopeId:g=kn,insertStaticContent:_}=t,y=(A,P,M,$=null,F=null,q=null,K=void 0,G=null,Q=!!P.dynamicChildren)=>{if(A===P)return;A&&!un(A,P)&&($=H(A),wt(A,F,q,!0),A=null),P.patchFlag===-2&&(Q=!1,P.dynamicChildren=null);const{type:W,ref:ce,shapeFlag:Z}=P;switch(W){case gs:N(A,P,M,$);break;case rt:D(A,P,M,$);break;case mo:A==null&&O(P,M,$,K);break;case We:S(A,P,M,$,F,q,K,G,Q);break;default:Z&1?V(A,P,M,$,F,q,K,G,Q):Z&6?I(A,P,M,$,F,q,K,G,Q):(Z&64||Z&128)&&W.process(A,P,M,$,F,q,K,G,Q,ie)}ce!=null&&F?ri(ce,A&&A.ref,q,P||A,!P):ce==null&&A&&A.ref!=null&&ri(A.ref,null,q,A,!0)},N=(A,P,M,$)=>{if(A==null)r(P.el=a(P.children),M,$);else{const F=P.el=A.el;P.children!==A.children&&u(F,P.children)}},D=(A,P,M,$)=>{A==null?r(P.el=l(P.children||""),M,$):P.el=A.el},O=(A,P,M,$)=>{[A.el,A.anchor]=_(A.children,P,M,$,A.el,A.anchor)},E=({el:A,anchor:P},M,$)=>{let F;for(;A&&A!==P;)F=p(A),r(A,M,$),A=F;r(P,M,$)},k=({el:A,anchor:P})=>{let M;for(;A&&A!==P;)M=p(A),s(A),A=M;s(P)},V=(A,P,M,$,F,q,K,G,Q)=>{if(P.type==="svg"?K="svg":P.type==="math"&&(K="mathml"),A==null)U(P,M,$,F,q,K,G,Q);else{const W=A.el&&A.el._isVueCE?A.el:null;try{W&&W._beginPatch(),w(A,P,F,q,K,G,Q)}finally{W&&W._endPatch()}}},U=(A,P,M,$,F,q,K,G)=>{let Q,W;const{props:ce,shapeFlag:Z,transition:se,dirs:me}=A;if(Q=A.el=o(A.type,q,ce&&ce.is,ce),Z&8?h(Q,A.children):Z&16&&T(A.children,Q,null,$,F,zl(A,q),K,G),me&&Sn(A,null,$,"created"),b(Q,A,A.scopeId,K,$),ce){for(const Oe in ce)Oe!=="value"&&!ei(Oe)&&i(Q,Oe,null,ce[Oe],q,$);"value"in ce&&i(Q,"value",null,ce.value,q),(W=ce.onVnodeBeforeMount)&&Bt(W,$,A)}me&&Sn(A,null,$,"beforeMount");const Te=z_(F,se);Te&&se.beforeEnter(Q),r(Q,P,M),((W=ce&&ce.onVnodeMounted)||Te||me)&&gt(()=>{W&&Bt(W,$,A),Te&&se.enter(Q),me&&Sn(A,null,$,"mounted")},F)},b=(A,P,M,$,F)=>{if(M&&g(A,M),$)for(let q=0;q<$.length;q++)g(A,$[q]);if(F){let q=F.subTree;if(P===q||uc(q.type)&&(q.ssContent===P||q.ssFallback===P)){const K=F.vnode;b(A,K,K.scopeId,K.slotScopeIds,F.parent)}}},T=(A,P,M,$,F,q,K,G,Q=0)=>{for(let W=Q;W<A.length;W++){const ce=A[W]=G?Ar(A[W]):Kt(A[W]);y(null,ce,P,M,$,F,q,K,G)}},w=(A,P,M,$,F,q,K)=>{const G=P.el=A.el;let{patchFlag:Q,dynamicChildren:W,dirs:ce}=P;Q|=A.patchFlag&16;const Z=A.props||Fe,se=P.props||Fe;let me;if(M&&ns(M,!1),(me=se.onVnodeBeforeUpdate)&&Bt(me,M,P,A),ce&&Sn(P,A,M,"beforeUpdate"),M&&ns(M,!0),(Z.innerHTML&&se.innerHTML==null||Z.textContent&&se.textContent==null)&&h(G,""),W?R(A.dynamicChildren,W,G,M,$,zl(P,F),q):K||ee(A,P,G,null,M,$,zl(P,F),q,!1),Q>0){if(Q&16)C(G,Z,se,M,F);else if(Q&2&&Z.class!==se.class&&i(G,"class",null,se.class,F),Q&4&&i(G,"style",Z.style,se.style,F),Q&8){const Te=P.dynamicProps;for(let Oe=0;Oe<Te.length;Oe++){const ke=Te[Oe],Ct=Z[ke],lt=se[ke];(lt!==Ct||ke==="value")&&i(G,ke,Ct,lt,F,M)}}Q&1&&A.children!==P.children&&h(G,P.children)}else!K&&W==null&&C(G,Z,se,M,F);((me=se.onVnodeUpdated)||ce)&&gt(()=>{me&&Bt(me,M,P,A),ce&&Sn(P,A,M,"updated")},$)},R=(A,P,M,$,F,q,K)=>{for(let G=0;G<P.length;G++){const Q=A[G],W=P[G],ce=Q.el&&(Q.type===We||!un(Q,W)||Q.shapeFlag&198)?d(Q.el):M;y(Q,W,ce,null,$,F,q,K,!0)}},C=(A,P,M,$,F)=>{if(P!==M){if(P!==Fe)for(const q in P)!ei(q)&&!(q in M)&&i(A,q,P[q],null,F,$);for(const q in M){if(ei(q))continue;const K=M[q],G=P[q];K!==G&&q!=="value"&&i(A,q,G,K,F,$)}"value"in M&&i(A,"value",P.value,M.value,F)}},S=(A,P,M,$,F,q,K,G,Q)=>{const W=P.el=A?A.el:a(""),ce=P.anchor=A?A.anchor:a("");let{patchFlag:Z,dynamicChildren:se,slotScopeIds:me}=P;me&&(G=G?G.concat(me):me),A==null?(r(W,M,$),r(ce,M,$),T(P.children||[],M,ce,F,q,K,G,Q)):Z>0&&Z&64&&se&&A.dynamicChildren&&A.dynamicChildren.length===se.length?(R(A.dynamicChildren,se,M,F,q,K,G),(P.key!=null||F&&P===F.subTree)&&Q_(A,P,!0)):ee(A,P,M,ce,F,q,K,G,Q)},I=(A,P,M,$,F,q,K,G,Q)=>{P.slotScopeIds=G,A==null?P.shapeFlag&512?F.ctx.activate(P,M,$,K,Q):le(P,M,$,F,q,K,Q):Ie(A,P,Q)},le=(A,P,M,$,F,q,K)=>{const G=A.component=eA(A,$,F);if(zo(A)&&(G.ctx.renderer=ie),tA(G,!1,K),G.asyncDep){if(F&&F.registerDep(G,re,K),!A.el){const Q=G.subTree=ge(rt);D(null,Q,P,M),A.placeholder=Q.el}}else re(G,A,P,M,F,q,K)},Ie=(A,P,M)=>{const $=P.component=A.component;if(xI(A,P,M))if($.asyncDep&&!$.asyncResolved){pe($,P,M);return}else $.next=P,$.update();else P.el=A.el,$.vnode=P},re=(A,P,M,$,F,q,K)=>{const G=()=>{if(A.isMounted){let{next:Z,bu:se,u:me,parent:Te,vnode:Oe}=A;{const ut=Y_(A);if(ut){Z&&(Z.el=Oe.el,pe(A,Z,K)),ut.asyncDep.then(()=>{A.isUnmounted||G()});return}}let ke=Z,Ct;ns(A,!1),Z?(Z.el=Oe.el,pe(A,Z,K)):Z=Oe,se&&ti(se),(Ct=Z.props&&Z.props.onVnodeBeforeUpdate)&&Bt(Ct,Te,Z,Oe),ns(A,!0);const lt=Kl(A),Ft=A.subTree;A.subTree=lt,y(Ft,lt,d(Ft.el),H(Ft),A,F,q),Z.el=lt.el,ke===null&&Kc(A,lt.el),me&&gt(me,F),(Ct=Z.props&&Z.props.onVnodeUpdated)&&gt(()=>Bt(Ct,Te,Z,Oe),F)}else{let Z;const{el:se,props:me}=P,{bm:Te,m:Oe,parent:ke,root:Ct,type:lt}=A,Ft=Xn(P);if(ns(A,!1),Te&&ti(Te),!Ft&&(Z=me&&me.onVnodeBeforeMount)&&Bt(Z,ke,P),ns(A,!0),se&&Le){const ut=()=>{A.subTree=Kl(A),Le(se,A.subTree,A,F,null)};Ft&&lt.__asyncHydrate?lt.__asyncHydrate(se,A,ut):ut()}else{Ct.ce&&Ct.ce._def.shadowRoot!==!1&&Ct.ce._injectChildStyle(lt);const ut=A.subTree=Kl(A);y(null,ut,M,$,A,F,q),P.el=ut.el}if(Oe&&gt(Oe,F),!Ft&&(Z=me&&me.onVnodeMounted)){const ut=P;gt(()=>Bt(Z,ke,ut),F)}(P.shapeFlag&256||ke&&Xn(ke.vnode)&&ke.vnode.shapeFlag&256)&&A.a&&gt(A.a,F),A.isMounted=!0,P=M=$=null}};A.scope.on();const Q=A.effect=new e_(G);A.scope.off();const W=A.update=Q.run.bind(Q),ce=A.job=Q.runIfDirty.bind(Q);ce.i=A,ce.id=A.uid,Q.scheduler=()=>Lh(ce),ns(A,!0),W()},pe=(A,P,M)=>{P.component=A;const $=A.vnode.props;A.vnode=P,A.next=null,LI(A,P.props,$,M),HI(A,P.children,M),rr(),$d(A),sr()},ee=(A,P,M,$,F,q,K,G,Q=!1)=>{const W=A&&A.children,ce=A?A.shapeFlag:0,Z=P.children,{patchFlag:se,shapeFlag:me}=P;if(se>0){if(se&128){In(W,Z,M,$,F,q,K,G,Q);return}else if(se&256){Ne(W,Z,M,$,F,q,K,G,Q);return}}me&8?(ce&16&&St(W,F,q),Z!==W&&h(M,Z)):ce&16?me&16?In(W,Z,M,$,F,q,K,G,Q):St(W,F,q,!0):(ce&8&&h(M,""),me&16&&T(Z,M,$,F,q,K,G,Q))},Ne=(A,P,M,$,F,q,K,G,Q)=>{A=A||Xs,P=P||Xs;const W=A.length,ce=P.length,Z=Math.min(W,ce);let se;for(se=0;se<Z;se++){const me=P[se]=Q?Ar(P[se]):Kt(P[se]);y(A[se],me,M,null,F,q,K,G,Q)}W>ce?St(A,F,q,!0,!1,Z):T(P,M,$,F,q,K,G,Q,Z)},In=(A,P,M,$,F,q,K,G,Q)=>{let W=0;const ce=P.length;let Z=A.length-1,se=ce-1;for(;W<=Z&&W<=se;){const me=A[W],Te=P[W]=Q?Ar(P[W]):Kt(P[W]);if(un(me,Te))y(me,Te,M,null,F,q,K,G,Q);else break;W++}for(;W<=Z&&W<=se;){const me=A[Z],Te=P[se]=Q?Ar(P[se]):Kt(P[se]);if(un(me,Te))y(me,Te,M,null,F,q,K,G,Q);else break;Z--,se--}if(W>Z){if(W<=se){const me=se+1,Te=me<ce?P[me].el:$;for(;W<=se;)y(null,P[W]=Q?Ar(P[W]):Kt(P[W]),M,Te,F,q,K,G,Q),W++}}else if(W>se)for(;W<=Z;)wt(A[W],F,q,!0),W++;else{const me=W,Te=W,Oe=new Map;for(W=Te;W<=se;W++){const et=P[W]=Q?Ar(P[W]):Kt(P[W]);et.key!=null&&Oe.set(et.key,W)}let ke,Ct=0;const lt=se-Te+1;let Ft=!1,ut=0;const Hn=new Array(lt);for(W=0;W<lt;W++)Hn[W]=0;for(W=me;W<=Z;W++){const et=A[W];if(Ct>=lt){wt(et,F,q,!0);continue}let Wt;if(et.key!=null)Wt=Oe.get(et.key);else for(ke=Te;ke<=se;ke++)if(Hn[ke-Te]===0&&un(et,P[ke])){Wt=ke;break}Wt===void 0?wt(et,F,q,!0):(Hn[Wt-Te]=W+1,Wt>=ut?ut=Wt:Ft=!0,y(et,P[Wt],M,null,F,q,K,G,Q),Ct++)}const Ls=Ft?qI(Hn):Xs;for(ke=Ls.length-1,W=lt-1;W>=0;W--){const et=Te+W,Wt=P[et],Jr=P[et+1],Ui=et+1<ce?Jr.el||J_(Jr):$;Hn[W]===0?y(null,Wt,M,Ui,F,q,K,G,Q):Ft&&(ke<0||W!==Ls[ke]?qt(Wt,M,Ui,2):ke--)}}},qt=(A,P,M,$,F=null)=>{const{el:q,type:K,transition:G,children:Q,shapeFlag:W}=A;if(W&6){qt(A.component.subTree,P,M,$);return}if(W&128){A.suspense.move(P,M,$);return}if(W&64){K.move(A,P,M,ie);return}if(K===We){r(q,P,M);for(let Z=0;Z<Q.length;Z++)qt(Q[Z],P,M,$);r(A.anchor,P,M);return}if(K===mo){E(A,P,M);return}if($!==2&&W&1&&G)if($===0)G.beforeEnter(q),r(q,P,M),gt(()=>G.enter(q),F);else{const{leave:Z,delayLeave:se,afterLeave:me}=G,Te=()=>{A.ctx.isUnmounted?s(q):r(q,P,M)},Oe=()=>{q._isLeaving&&q[Gn](!0),Z(q,()=>{Te(),me&&me()})};se?se(q,Te,Oe):Oe()}else r(q,P,M)},wt=(A,P,M,$=!1,F=!1)=>{const{type:q,props:K,ref:G,children:Q,dynamicChildren:W,shapeFlag:ce,patchFlag:Z,dirs:se,cacheIndex:me}=A;if(Z===-2&&(F=!1),G!=null&&(rr(),ri(G,null,M,A,!0),sr()),me!=null&&(P.renderCache[me]=void 0),ce&256){P.ctx.deactivate(A);return}const Te=ce&1&&se,Oe=!Xn(A);let ke;if(Oe&&(ke=K&&K.onVnodeBeforeUnmount)&&Bt(ke,P,A),ce&6)ln(A.component,M,$);else{if(ce&128){A.suspense.unmount(M,$);return}Te&&Sn(A,null,P,"beforeUnmount"),ce&64?A.type.remove(A,P,M,ie,$):W&&!W.hasOnce&&(q!==We||Z>0&&Z&64)?St(W,P,M,!1,!0):(q===We&&Z&384||!F&&ce&16)&&St(Q,P,M),$&&Bn(A)}(Oe&&(ke=K&&K.onVnodeUnmounted)||Te)&&gt(()=>{ke&&Bt(ke,P,A),Te&&Sn(A,null,P,"unmounted")},M)},Bn=A=>{const{type:P,el:M,anchor:$,transition:F}=A;if(P===We){cn(M,$);return}if(P===mo){k(A);return}const q=()=>{s(M),F&&!F.persisted&&F.afterLeave&&F.afterLeave()};if(A.shapeFlag&1&&F&&!F.persisted){const{leave:K,delayLeave:G}=F,Q=()=>K(M,q);G?G(A.el,q,Q):Q()}else q()},cn=(A,P)=>{let M;for(;A!==P;)M=p(A),s(A),A=M;s(P)},ln=(A,P,M)=>{const{bum:$,scope:F,job:q,subTree:K,um:G,m:Q,a:W}=A;lc(Q),lc(W),$&&ti($),F.stop(),q&&(q.flags|=8,wt(K,A,P,M)),G&&gt(G,P),gt(()=>{A.isUnmounted=!0},P)},St=(A,P,M,$=!1,F=!1,q=0)=>{for(let K=q;K<A.length;K++)wt(A[K],P,M,$,F)},H=A=>{if(A.shapeFlag&6)return H(A.component.subTree);if(A.shapeFlag&128)return A.suspense.next();const P=p(A.anchor||A.el),M=P&&P[eI];return M?p(M):P};let te=!1;const J=(A,P,M)=>{let $;A==null?P._vnode&&(wt(P._vnode,null,null,!0),$=P._vnode.component):y(P._vnode||null,A,P,null,null,null,M),P._vnode=A,te||(te=!0,$d($),sc(),te=!1)},ie={p:y,um:wt,m:qt,r:Bn,mt:le,mc:T,pc:ee,pbc:R,n:H,o:t};let we,Le;return e&&([we,Le]=e(ie)),{render:J,hydrate:we,createApp:CI(J,we)}}function zl({type:t,props:e},n){return n==="svg"&&t==="foreignObject"||n==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:n}function ns({effect:t,job:e},n){n?(t.flags|=32,e.flags|=4):(t.flags&=-33,e.flags&=-5)}function z_(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function Q_(t,e,n=!1){const r=t.children,s=e.children;if(ae(r)&&ae(s))for(let i=0;i<r.length;i++){const o=r[i];let a=s[i];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=s[i]=Ar(s[i]),a.el=o.el),!n&&a.patchFlag!==-2&&Q_(o,a)),a.type===gs&&(a.patchFlag!==-1?a.el=o.el:a.__elIndex=i+(t.type===We?1:0)),a.type===rt&&!a.el&&(a.el=o.el)}}function qI(t){const e=t.slice(),n=[0];let r,s,i,o,a;const l=t.length;for(r=0;r<l;r++){const u=t[r];if(u!==0){if(s=n[n.length-1],t[s]<u){e[r]=s,n.push(r);continue}for(i=0,o=n.length-1;i<o;)a=i+o>>1,t[n[a]]<u?i=a+1:o=a;u<t[n[i]]&&(i>0&&(e[r]=n[i-1]),n[i]=r)}}for(i=n.length,o=n[i-1];i-- >0;)n[i]=o,o=e[o];return n}function Y_(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:Y_(e)}function lc(t){if(t)for(let e=0;e<t.length;e++)t[e].flags|=8}function J_(t){if(t.placeholder)return t.placeholder;const e=t.component;return e?J_(e.subTree):null}const uc=t=>t.__isSuspense;let Nu=0;const WI={name:"Suspense",__isSuspense:!0,process(t,e,n,r,s,i,o,a,l,u){if(t==null)GI(e,n,r,s,i,o,a,l,u);else{if(i&&i.deps>0&&!t.suspense.isInFallback){e.suspense=t.suspense,e.suspense.vnode=e,e.el=t.el;return}KI(t,e,n,r,s,o,a,l,u)}},hydrate:zI,normalize:QI},qh=WI;function ko(t,e){const n=t.props&&t.props[e];fe(n)&&n()}function GI(t,e,n,r,s,i,o,a,l){const{p:u,o:{createElement:h}}=l,d=h("div"),p=t.suspense=X_(t,s,r,e,d,n,i,o,a,l);u(null,p.pendingBranch=t.ssContent,d,null,r,p,i,o),p.deps>0?(ko(t,"onPending"),ko(t,"onFallback"),u(null,t.ssFallback,e,n,r,null,i,o),si(p,t.ssFallback)):p.resolve(!1,!0)}function KI(t,e,n,r,s,i,o,a,{p:l,um:u,o:{createElement:h}}){const d=e.suspense=t.suspense;d.vnode=e,e.el=t.el;const p=e.ssContent,g=e.ssFallback,{activeBranch:_,pendingBranch:y,isInFallback:N,isHydrating:D}=d;if(y)d.pendingBranch=p,un(y,p)?(l(y,p,d.hiddenContainer,null,s,d,i,o,a),d.deps<=0?d.resolve():N&&(D||(l(_,g,n,r,s,null,i,o,a),si(d,g)))):(d.pendingId=Nu++,D?(d.isHydrating=!1,d.activeBranch=y):u(y,s,d),d.deps=0,d.effects.length=0,d.hiddenContainer=h("div"),N?(l(null,p,d.hiddenContainer,null,s,d,i,o,a),d.deps<=0?d.resolve():(l(_,g,n,r,s,null,i,o,a),si(d,g))):_&&un(_,p)?(l(_,p,n,r,s,d,i,o,a),d.resolve(!0)):(l(null,p,d.hiddenContainer,null,s,d,i,o,a),d.deps<=0&&d.resolve()));else if(_&&un(_,p))l(_,p,n,r,s,d,i,o,a),si(d,p);else if(ko(e,"onPending"),d.pendingBranch=p,p.shapeFlag&512?d.pendingId=p.component.suspenseId:d.pendingId=Nu++,l(null,p,d.hiddenContainer,null,s,d,i,o,a),d.deps<=0)d.resolve();else{const{timeout:O,pendingId:E}=d;O>0?setTimeout(()=>{d.pendingId===E&&d.fallback(g)},O):O===0&&d.fallback(g)}}function X_(t,e,n,r,s,i,o,a,l,u,h=!1){const{p:d,m:p,um:g,n:_,o:{parentNode:y,remove:N}}=u;let D;const O=YI(t);O&&e&&e.pendingBranch&&(D=e.pendingId,e.deps++);const E=t.props?Qg(t.props.timeout):void 0,k=i,V={vnode:t,parent:e,parentComponent:n,namespace:o,container:r,hiddenContainer:s,deps:0,pendingId:Nu++,timeout:typeof E=="number"?E:-1,activeBranch:null,pendingBranch:null,isInFallback:!h,isHydrating:h,isUnmounted:!1,effects:[],resolve(U=!1,b=!1){const{vnode:T,activeBranch:w,pendingBranch:R,pendingId:C,effects:S,parentComponent:I,container:le,isInFallback:Ie}=V;let re=!1;V.isHydrating?V.isHydrating=!1:U||(re=w&&R.transition&&R.transition.mode==="out-in",re&&(w.transition.afterLeave=()=>{C===V.pendingId&&(p(R,le,i===k?_(w):i,0),bu(S),Ie&&T.ssFallback&&(T.ssFallback.el=null))}),w&&(y(w.el)===le&&(i=_(w)),g(w,I,V,!0),!re&&Ie&&T.ssFallback&&gt(()=>T.ssFallback.el=null,V)),re||p(R,le,i,0)),si(V,R),V.pendingBranch=null,V.isInFallback=!1;let pe=V.parent,ee=!1;for(;pe;){if(pe.pendingBranch){pe.effects.push(...S),ee=!0;break}pe=pe.parent}!ee&&!re&&bu(S),V.effects=[],O&&e&&e.pendingBranch&&D===e.pendingId&&(e.deps--,e.deps===0&&!b&&e.resolve()),ko(T,"onResolve")},fallback(U){if(!V.pendingBranch)return;const{vnode:b,activeBranch:T,parentComponent:w,container:R,namespace:C}=V;ko(b,"onFallback");const S=_(T),I=()=>{V.isInFallback&&(d(null,U,R,S,w,null,C,a,l),si(V,U))},le=U.transition&&U.transition.mode==="out-in";le&&(T.transition.afterLeave=I),V.isInFallback=!0,g(T,w,null,!0),le||I()},move(U,b,T){V.activeBranch&&p(V.activeBranch,U,b,T),V.container=U},next(){return V.activeBranch&&_(V.activeBranch)},registerDep(U,b,T){const w=!!V.pendingBranch;w&&V.deps++;const R=U.vnode.el;U.asyncDep.catch(C=>{Pi(C,U,0)}).then(C=>{if(U.isUnmounted||V.isUnmounted||V.pendingId!==U.suspenseId)return;U.asyncResolved=!0;const{vnode:S}=U;Du(U,C),R&&(S.el=R);const I=!R&&U.subTree.el;b(U,S,y(R||U.subTree.el),R?null:_(U.subTree),V,o,T),I&&(S.placeholder=null,N(I)),Kc(U,S.el),w&&--V.deps===0&&V.resolve()})},unmount(U,b){V.isUnmounted=!0,V.activeBranch&&g(V.activeBranch,n,U,b),V.pendingBranch&&g(V.pendingBranch,n,U,b)}};return V}function zI(t,e,n,r,s,i,o,a,l){const u=e.suspense=X_(e,r,n,t.parentNode,document.createElement("div"),null,s,i,o,a,!0),h=l(t,u.pendingBranch=e.ssContent,n,u,i,o);return u.deps===0&&u.resolve(!1,!0),h}function QI(t){const{shapeFlag:e,children:n}=t,r=e&32;t.ssContent=tp(r?n.default:n),t.ssFallback=r?tp(n.fallback):ge(rt)}function tp(t){let e;if(fe(t)){const n=di&&t._c;n&&(t._d=!1,_e()),t=t(),n&&(t._d=!0,e=$t,ey())}return ae(t)&&(t=OI(t)),t=Kt(t),e&&!t.dynamicChildren&&(t.dynamicChildren=e.filter(n=>n!==t)),t}function Z_(t,e){e&&e.pendingBranch?ae(t)?e.effects.push(...t):e.effects.push(t):bu(t)}function si(t,e){t.activeBranch=e;const{vnode:n,parentComponent:r}=t;let s=e.el;for(;!s&&e.component;)e=e.component.subTree,s=e.el;n.el=s,r&&r.subTree===n&&(r.vnode.el=s,Kc(r,s))}function YI(t){const e=t.props&&t.props.suspensible;return e!=null&&e!==!1}const We=Symbol.for("v-fgt"),gs=Symbol.for("v-txt"),rt=Symbol.for("v-cmt"),mo=Symbol.for("v-stc"),go=[];let $t=null;function _e(t=!1){go.push($t=t?null:[])}function ey(){go.pop(),$t=go[go.length-1]||null}let di=1;function hc(t,e=!1){di+=t,t<0&&$t&&e&&($t.hasOnce=!0)}function ty(t){return t.dynamicChildren=di>0?$t||Xs:null,ey(),di>0&&$t&&$t.push(t),t}function Pe(t,e,n,r,s,i){return ty(z(t,e,n,r,s,i,!0))}function zt(t,e,n,r,s){return ty(ge(t,e,n,r,s,!0))}function ws(t){return t?t.__v_isVNode===!0:!1}function un(t,e){return t.type===e.type&&t.key===e.key}const ny=({key:t})=>t??null,Ha=({ref:t,ref_key:e,ref_for:n})=>(typeof t=="number"&&(t=""+t),t!=null?Ge(t)||ot(t)||fe(t)?{i:bt,r:t,k:e,f:!!n}:t:null);function z(t,e=null,n=null,r=0,s=null,i=t===We?0:1,o=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&ny(e),ref:e&&Ha(e),scopeId:v_,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:r,dynamicProps:s,dynamicChildren:null,appContext:null,ctx:bt};return a?(Wh(l,n),i&128&&t.normalize(l)):n&&(l.shapeFlag|=Ge(n)?8:16),di>0&&!o&&$t&&(l.patchFlag>0||i&6)&&l.patchFlag!==32&&$t.push(l),l}const ge=JI;function JI(t,e=null,n=null,r=0,s=null,i=!1){if((!t||t===D_)&&(t=rt),ws(t)){const a=on(t,e,!0);return n&&Wh(a,n),di>0&&!i&&$t&&(a.shapeFlag&6?$t[$t.indexOf(t)]=a:$t.push(a)),a.patchFlag=-2,a}if(iA(t)&&(t=t.__vccOpts),e){e=ry(e);let{class:a,style:l}=e;a&&!Ge(a)&&(e.class=rn(a)),Me(l)&&($c(l)&&!ae(l)&&(l=vt({},l)),e.style=Hc(l))}const o=Ge(t)?1:uc(t)?128:w_(t)?64:Me(t)?4:fe(t)?2:0;return z(t,e,n,r,s,o,i,!0)}function ry(t){return t?$c(t)||H_(t)?vt({},t):t:null}function on(t,e,n=!1,r=!1){const{props:s,ref:i,patchFlag:o,children:a,transition:l}=t,u=e?iy(s||{},e):s,h={__v_isVNode:!0,__v_skip:!0,type:t.type,props:u,key:u&&ny(u),ref:e&&e.ref?n&&i?ae(i)?i.concat(Ha(e)):[i,Ha(e)]:Ha(e):i,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:a,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==We?o===-1?16:o|16:o,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:l,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&on(t.ssContent),ssFallback:t.ssFallback&&on(t.ssFallback),placeholder:t.placeholder,el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return l&&r&&hi(h,l.clone(h)),h}function Ye(t=" ",e=0){return ge(gs,null,t,e)}function sy(t,e){const n=ge(mo,null,t);return n.staticCount=e,n}function pi(t="",e=!1){return e?(_e(),zt(rt,null,t)):ge(rt,null,t)}function Kt(t){return t==null||typeof t=="boolean"?ge(rt):ae(t)?ge(We,null,t.slice()):ws(t)?Ar(t):ge(gs,null,String(t))}function Ar(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:on(t)}function Wh(t,e){let n=0;const{shapeFlag:r}=t;if(e==null)e=null;else if(ae(e))n=16;else if(typeof e=="object")if(r&65){const s=e.default;s&&(s._c&&(s._d=!1),Wh(t,s()),s._c&&(s._d=!0));return}else{n=32;const s=e._;!s&&!H_(e)?e._ctx=bt:s===3&&bt&&(bt.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else fe(e)?(e={default:e,_ctx:bt},n=32):(e=String(e),r&64?(n=16,e=[Ye(e)]):n=8);t.children=e,t.shapeFlag|=n}function iy(...t){const e={};for(let n=0;n<t.length;n++){const r=t[n];for(const s in r)if(s==="class")e.class!==r.class&&(e.class=rn([e.class,r.class]));else if(s==="style")e.style=Hc([e.style,r.style]);else if(Wo(s)){const i=e[s],o=r[s];o&&i!==o&&!(ae(i)&&i.includes(o))&&(e[s]=i?[].concat(i,o):o)}else s!==""&&(e[s]=r[s])}return e}function Bt(t,e,n,r=null){yn(t,e,7,[n,r])}const XI=L_();let ZI=0;function eA(t,e,n){const r=t.type,s=(e?e.appContext:t.appContext)||XI,i={uid:ZI++,vnode:t,type:r,parent:e,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new Zg(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(s.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:$_(r,s),emitsOptions:U_(r,s),emit:null,emitted:null,propsDefaults:Fe,inheritAttrs:r.inheritAttrs,ctx:Fe,data:Fe,props:Fe,attrs:Fe,slots:Fe,refs:Fe,setupState:Fe,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=e?e.root:i,i.emit=kI.bind(null,i),t.ce&&t.ce(i),i}let At=null;const Ns=()=>At||bt;let fc,Ou;{const t=Bc(),e=(n,r)=>{let s;return(s=t[n])||(s=t[n]=[]),s.push(r),i=>{s.length>1?s.forEach(o=>o(i)):s[0](i)}};fc=e("__VUE_INSTANCE_SETTERS__",n=>At=n),Ou=e("__VUE_SSR_SETTERS__",n=>mi=n)}const Yo=t=>{const e=At;return fc(t),t.scope.on(),()=>{t.scope.off(),fc(e)}},np=()=>{At&&At.scope.off(),fc(null)};function oy(t){return t.vnode.shapeFlag&4}let mi=!1;function tA(t,e=!1,n=!1){e&&Ou(e);const{props:r,children:s}=t.vnode,i=oy(t);MI(t,r,i,e),BI(t,s,n||e);const o=i?nA(t,e):void 0;return e&&Ou(!1),o}function nA(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,wI);const{setup:r}=n;if(r){rr();const s=t.setupContext=r.length>1?sA(t):null,i=Yo(t),o=Ko(r,t,0,[t.props,s]),a=Ch(o);if(sr(),i(),(a||t.sp)&&!Xn(t)&&Fh(t),a){if(o.then(np,np),e)return o.then(l=>{Du(t,l)}).catch(l=>{Pi(l,t,0)});t.asyncDep=o}else Du(t,o)}else ay(t)}function Du(t,e,n){fe(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:Me(e)&&(t.setupState=m_(e)),ay(t)}function ay(t,e,n){const r=t.type;t.render||(t.render=r.render||kn);{const s=Yo(t);rr();try{TI(t)}finally{sr(),s()}}}const rA={get(t,e){return Ot(t,"get",""),t[e]}};function sA(t){const e=n=>{t.exposed=n||{}};return{attrs:new Proxy(t.attrs,rA),slots:t.slots,emit:t.emit,expose:e}}function zc(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(m_(MT(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in po)return po[n](t)},has(e,n){return n in e||n in po}})):t.proxy}function Vu(t,e=!0){return fe(t)?t.displayName||t.name:t.name||e&&t.__name}function iA(t){return fe(t)&&"__vccOpts"in t}const dt=(t,e)=>WT(t,e,mi);function Je(t,e,n){try{hc(-1);const r=arguments.length;return r===2?Me(e)&&!ae(e)?ws(e)?ge(t,null,[e]):ge(t,e):ge(t,null,e):(r>3?n=Array.prototype.slice.call(arguments,2):r===3&&ws(n)&&(n=[n]),ge(t,e,n))}finally{hc(1)}}const oA="3.5.26";let xu;const rp=typeof window<"u"&&window.trustedTypes;if(rp)try{xu=rp.createPolicy("vue",{createHTML:t=>t})}catch{}const cy=xu?t=>xu.createHTML(t):t=>t,aA="http://www.w3.org/2000/svg",cA="http://www.w3.org/1998/Math/MathML",Wn=typeof document<"u"?document:null,sp=Wn&&Wn.createElement("template"),lA={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,r)=>{const s=e==="svg"?Wn.createElementNS(aA,t):e==="mathml"?Wn.createElementNS(cA,t):n?Wn.createElement(t,{is:n}):Wn.createElement(t);return t==="select"&&r&&r.multiple!=null&&s.setAttribute("multiple",r.multiple),s},createText:t=>Wn.createTextNode(t),createComment:t=>Wn.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>Wn.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,n,r,s,i){const o=n?n.previousSibling:e.lastChild;if(s&&(s===i||s.nextSibling))for(;e.insertBefore(s.cloneNode(!0),n),!(s===i||!(s=s.nextSibling)););else{sp.innerHTML=cy(r==="svg"?`<svg>${t}</svg>`:r==="mathml"?`<math>${t}</math>`:t);const a=sp.content;if(r==="svg"||r==="mathml"){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}e.insertBefore(a,n)}return[o?o.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}},vr="transition",eo="animation",No=Symbol("_vtc"),ly={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},uA=vt({},T_,ly),hA=t=>(t.displayName="Transition",t.props=uA,t),Qc=hA((t,{slots:e})=>Je(rI,fA(t),e)),rs=(t,e=[])=>{ae(t)?t.forEach(n=>n(...e)):t&&t(...e)},ip=t=>t?ae(t)?t.some(e=>e.length>1):t.length>1:!1;function fA(t){const e={};for(const S in t)S in ly||(e[S]=t[S]);if(t.css===!1)return e;const{name:n="v",type:r,duration:s,enterFromClass:i=`${n}-enter-from`,enterActiveClass:o=`${n}-enter-active`,enterToClass:a=`${n}-enter-to`,appearFromClass:l=i,appearActiveClass:u=o,appearToClass:h=a,leaveFromClass:d=`${n}-leave-from`,leaveActiveClass:p=`${n}-leave-active`,leaveToClass:g=`${n}-leave-to`}=t,_=dA(s),y=_&&_[0],N=_&&_[1],{onBeforeEnter:D,onEnter:O,onEnterCancelled:E,onLeave:k,onLeaveCancelled:V,onBeforeAppear:U=D,onAppear:b=O,onAppearCancelled:T=E}=e,w=(S,I,le,Ie)=>{S._enterCancelled=Ie,ss(S,I?h:a),ss(S,I?u:o),le&&le()},R=(S,I)=>{S._isLeaving=!1,ss(S,d),ss(S,g),ss(S,p),I&&I()},C=S=>(I,le)=>{const Ie=S?b:O,re=()=>w(I,S,le);rs(Ie,[I,re]),op(()=>{ss(I,S?l:i),$n(I,S?h:a),ip(Ie)||ap(I,r,y,re)})};return vt(e,{onBeforeEnter(S){rs(D,[S]),$n(S,i),$n(S,o)},onBeforeAppear(S){rs(U,[S]),$n(S,l),$n(S,u)},onEnter:C(!1),onAppear:C(!0),onLeave(S,I){S._isLeaving=!0;const le=()=>R(S,I);$n(S,d),S._enterCancelled?($n(S,p),up(S)):(up(S),$n(S,p)),op(()=>{S._isLeaving&&(ss(S,d),$n(S,g),ip(k)||ap(S,r,N,le))}),rs(k,[S,le])},onEnterCancelled(S){w(S,!1,void 0,!0),rs(E,[S])},onAppearCancelled(S){w(S,!0,void 0,!0),rs(T,[S])},onLeaveCancelled(S){R(S),rs(V,[S])}})}function dA(t){if(t==null)return null;if(Me(t))return[Ql(t.enter),Ql(t.leave)];{const e=Ql(t);return[e,e]}}function Ql(t){return Qg(t)}function $n(t,e){e.split(/\s+/).forEach(n=>n&&t.classList.add(n)),(t[No]||(t[No]=new Set)).add(e)}function ss(t,e){e.split(/\s+/).forEach(r=>r&&t.classList.remove(r));const n=t[No];n&&(n.delete(e),n.size||(t[No]=void 0))}function op(t){requestAnimationFrame(()=>{requestAnimationFrame(t)})}let pA=0;function ap(t,e,n,r){const s=t._endId=++pA,i=()=>{s===t._endId&&r()};if(n!=null)return setTimeout(i,n);const{type:o,timeout:a,propCount:l}=mA(t,e);if(!o)return r();const u=o+"end";let h=0;const d=()=>{t.removeEventListener(u,p),i()},p=g=>{g.target===t&&++h>=l&&d()};setTimeout(()=>{h<l&&d()},a+1),t.addEventListener(u,p)}function mA(t,e){const n=window.getComputedStyle(t),r=_=>(n[_]||"").split(", "),s=r(`${vr}Delay`),i=r(`${vr}Duration`),o=cp(s,i),a=r(`${eo}Delay`),l=r(`${eo}Duration`),u=cp(a,l);let h=null,d=0,p=0;e===vr?o>0&&(h=vr,d=o,p=i.length):e===eo?u>0&&(h=eo,d=u,p=l.length):(d=Math.max(o,u),h=d>0?o>u?vr:eo:null,p=h?h===vr?i.length:l.length:0);const g=h===vr&&/\b(?:transform|all)(?:,|$)/.test(r(`${vr}Property`).toString());return{type:h,timeout:d,propCount:p,hasTransform:g}}function cp(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max(...e.map((n,r)=>lp(n)+lp(t[r])))}function lp(t){return t==="auto"?0:Number(t.slice(0,-1).replace(",","."))*1e3}function up(t){return(t?t.ownerDocument:document).body.offsetHeight}function gA(t,e,n){const r=t[No];r&&(e=(e?[e,...r]:[...r]).join(" ")),e==null?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}const hp=Symbol("_vod"),_A=Symbol("_vsh"),yA=Symbol(""),vA=/(?:^|;)\s*display\s*:/;function EA(t,e,n){const r=t.style,s=Ge(n);let i=!1;if(n&&!s){if(e)if(Ge(e))for(const o of e.split(";")){const a=o.slice(0,o.indexOf(":")).trim();n[a]==null&&ja(r,a,"")}else for(const o in e)n[o]==null&&ja(r,o,"");for(const o in n)o==="display"&&(i=!0),ja(r,o,n[o])}else if(s){if(e!==n){const o=r[yA];o&&(n+=";"+o),r.cssText=n,i=vA.test(n)}}else e&&t.removeAttribute("style");hp in t&&(t[hp]=i?r.display:"",t[_A]&&(r.display="none"))}const fp=/\s*!important$/;function ja(t,e,n){if(ae(n))n.forEach(r=>ja(t,e,r));else if(n==null&&(n=""),e.startsWith("--"))t.setProperty(e,n);else{const r=wA(t,e);fp.test(n)?t.setProperty(ks(r),n.replace(fp,""),"important"):t[r]=n}}const dp=["Webkit","Moz","ms"],Yl={};function wA(t,e){const n=Yl[e];if(n)return n;let r=an(e);if(r!=="filter"&&r in t)return Yl[e]=r;r=Uc(r);for(let s=0;s<dp.length;s++){const i=dp[s]+r;if(i in t)return Yl[e]=i}return e}const pp="http://www.w3.org/1999/xlink";function mp(t,e,n,r,s,i=dT(e)){r&&e.startsWith("xlink:")?n==null?t.removeAttributeNS(pp,e.slice(6,e.length)):t.setAttributeNS(pp,e,n):n==null||i&&!Yg(n)?t.removeAttribute(e):t.setAttribute(e,i?"":gn(n)?String(n):n)}function gp(t,e,n,r,s){if(e==="innerHTML"||e==="textContent"){n!=null&&(t[e]=e==="innerHTML"?cy(n):n);return}const i=t.tagName;if(e==="value"&&i!=="PROGRESS"&&!i.includes("-")){const a=i==="OPTION"?t.getAttribute("value")||"":t.value,l=n==null?t.type==="checkbox"?"on":"":String(n);(a!==l||!("_value"in t))&&(t.value=l),n==null&&t.removeAttribute(e),t._value=n;return}let o=!1;if(n===""||n==null){const a=typeof t[e];a==="boolean"?n=Yg(n):n==null&&a==="string"?(n="",o=!0):a==="number"&&(n=0,o=!0)}try{t[e]=n}catch{}o&&t.removeAttribute(s||e)}function Rr(t,e,n,r){t.addEventListener(e,n,r)}function TA(t,e,n,r){t.removeEventListener(e,n,r)}const _p=Symbol("_vei");function IA(t,e,n,r,s=null){const i=t[_p]||(t[_p]={}),o=i[e];if(r&&o)o.value=r;else{const[a,l]=AA(e);if(r){const u=i[e]=SA(r,s);Rr(t,a,u,l)}else o&&(TA(t,a,o,l),i[e]=void 0)}}const yp=/(?:Once|Passive|Capture)$/;function AA(t){let e;if(yp.test(t)){e={};let r;for(;r=t.match(yp);)t=t.slice(0,t.length-r[0].length),e[r[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):ks(t.slice(2)),e]}let Jl=0;const bA=Promise.resolve(),RA=()=>Jl||(bA.then(()=>Jl=0),Jl=Date.now());function SA(t,e){const n=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=n.attached)return;yn(CA(r,n.value),e,5,[r])};return n.value=t,n.attached=RA(),n}function CA(t,e){if(ae(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(r=>s=>!s._stopped&&r&&r(s))}else return e}const vp=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,PA=(t,e,n,r,s,i)=>{const o=s==="svg";e==="class"?gA(t,r,o):e==="style"?EA(t,n,r):Wo(e)?Rh(e)||IA(t,e,n,r,i):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):kA(t,e,r,o))?(gp(t,e,r),!t.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&mp(t,e,r,o,i,e!=="value")):t._isVueCE&&(/[A-Z]/.test(e)||!Ge(r))?gp(t,an(e),r,i,e):(e==="true-value"?t._trueValue=r:e==="false-value"&&(t._falseValue=r),mp(t,e,r,o))};function kA(t,e,n,r){if(r)return!!(e==="innerHTML"||e==="textContent"||e in t&&vp(e)&&fe(n));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="autocorrect"||e==="sandbox"&&t.tagName==="IFRAME"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const s=t.tagName;if(s==="IMG"||s==="VIDEO"||s==="CANVAS"||s==="SOURCE")return!1}return vp(e)&&Ge(n)?!1:e in t}const gi=t=>{const e=t.props["onUpdate:modelValue"]||!1;return ae(e)?n=>ti(e,n):e};function NA(t){t.target.composing=!0}function Ep(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const Zn=Symbol("_assign");function wp(t,e,n){return e&&(t=t.trim()),n&&(t=Fc(t)),t}const Na={created(t,{modifiers:{lazy:e,trim:n,number:r}},s){t[Zn]=gi(s);const i=r||s.props&&s.props.type==="number";Rr(t,e?"change":"input",o=>{o.target.composing||t[Zn](wp(t.value,n,i))}),(n||i)&&Rr(t,"change",()=>{t.value=wp(t.value,n,i)}),e||(Rr(t,"compositionstart",NA),Rr(t,"compositionend",Ep),Rr(t,"change",Ep))},mounted(t,{value:e}){t.value=e??""},beforeUpdate(t,{value:e,oldValue:n,modifiers:{lazy:r,trim:s,number:i}},o){if(t[Zn]=gi(o),t.composing)return;const a=(i||t.type==="number")&&!/^0\d/.test(t.value)?Fc(t.value):t.value,l=e??"";a!==l&&(document.activeElement===t&&t.type!=="range"&&(r&&e===n||s&&t.value.trim()===l)||(t.value=l))}},Yx={deep:!0,created(t,e,n){t[Zn]=gi(n),Rr(t,"change",()=>{const r=t._modelValue,s=Oo(t),i=t.checked,o=t[Zn];if(ae(r)){const a=Ph(r,s),l=a!==-1;if(i&&!l)o(r.concat(s));else if(!i&&l){const u=[...r];u.splice(a,1),o(u)}}else if(Si(r)){const a=new Set(r);i?a.add(s):a.delete(s),o(a)}else o(uy(t,i))})},mounted:Tp,beforeUpdate(t,e,n){t[Zn]=gi(n),Tp(t,e,n)}};function Tp(t,{value:e,oldValue:n},r){t._modelValue=e;let s;if(ae(e))s=Ph(e,r.props.value)>-1;else if(Si(e))s=e.has(r.props.value);else{if(e===n)return;s=Go(e,uy(t,!0))}t.checked!==s&&(t.checked=s)}const Jx={deep:!0,created(t,{value:e,modifiers:{number:n}},r){const s=Si(e);Rr(t,"change",()=>{const i=Array.prototype.filter.call(t.options,o=>o.selected).map(o=>n?Fc(Oo(o)):Oo(o));t[Zn](t.multiple?s?new Set(i):i:i[0]),t._assigning=!0,Es(()=>{t._assigning=!1})}),t[Zn]=gi(r)},mounted(t,{value:e}){Ip(t,e)},beforeUpdate(t,e,n){t[Zn]=gi(n)},updated(t,{value:e}){t._assigning||Ip(t,e)}};function Ip(t,e){const n=t.multiple,r=ae(e);if(!(n&&!r&&!Si(e))){for(let s=0,i=t.options.length;s<i;s++){const o=t.options[s],a=Oo(o);if(n)if(r){const l=typeof a;l==="string"||l==="number"?o.selected=e.some(u=>String(u)===String(a)):o.selected=Ph(e,a)>-1}else o.selected=e.has(a);else if(Go(Oo(o),e)){t.selectedIndex!==s&&(t.selectedIndex=s);return}}!n&&t.selectedIndex!==-1&&(t.selectedIndex=-1)}}function Oo(t){return"_value"in t?t._value:t.value}function uy(t,e){const n=e?"_trueValue":"_falseValue";return n in t?t[n]:e}const OA=["ctrl","shift","alt","meta"],DA={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>OA.some(n=>t[`${n}Key`]&&!e.includes(n))},Gh=(t,e)=>{const n=t._withMods||(t._withMods={}),r=e.join(".");return n[r]||(n[r]=((s,...i)=>{for(let o=0;o<e.length;o++){const a=DA[e[o]];if(a&&a(s,e))return}return t(s,...i)}))},hy=vt({patchProp:PA},lA);let _o,Ap=!1;function VA(){return _o||(_o=jI(hy))}function xA(){return _o=Ap?_o:$I(hy),Ap=!0,_o}const MA=((...t)=>{const e=VA().createApp(...t),{mount:n}=e;return e.mount=r=>{const s=dy(r);if(!s)return;const i=e._component;!fe(i)&&!i.render&&!i.template&&(i.template=s.innerHTML),s.nodeType===1&&(s.textContent="");const o=n(s,!1,fy(s));return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),o},e}),LA=((...t)=>{const e=xA().createApp(...t),{mount:n}=e;return e.mount=r=>{const s=dy(r);if(s)return n(s,!0,fy(s))},e});function fy(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function dy(t){return Ge(t)?document.querySelector(t):t}const UA=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,FA=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,BA=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/;function HA(t,e){if(t==="__proto__"||t==="constructor"&&e&&typeof e=="object"&&"prototype"in e){jA(t);return}return e}function jA(t){console.warn(`[destr] Dropping "${t}" key to prevent prototype pollution.`)}function dc(t,e={}){if(typeof t!="string")return t;if(t[0]==='"'&&t[t.length-1]==='"'&&t.indexOf("\\")===-1)return t.slice(1,-1);const n=t.trim();if(n.length<=9)switch(n.toLowerCase()){case"true":return!0;case"false":return!1;case"undefined":return;case"null":return null;case"nan":return Number.NaN;case"infinity":return Number.POSITIVE_INFINITY;case"-infinity":return Number.NEGATIVE_INFINITY}if(!BA.test(t)){if(e.strict)throw new SyntaxError("[destr] Invalid JSON");return t}try{if(UA.test(t)||FA.test(t)){if(e.strict)throw new Error("[destr] Possible prototype pollution");return JSON.parse(t,HA)}return JSON.parse(t)}catch(r){if(e.strict)throw r;return t}}const $A=/#/g,qA=/&/g,WA=/\//g,GA=/=/g,Kh=/\+/g,KA=/%5e/gi,zA=/%60/gi,QA=/%7c/gi,YA=/%20/gi;function JA(t){return encodeURI(""+t).replace(QA,"|")}function Mu(t){return JA(typeof t=="string"?t:JSON.stringify(t)).replace(Kh,"%2B").replace(YA,"+").replace($A,"%23").replace(qA,"%26").replace(zA,"`").replace(KA,"^").replace(WA,"%2F")}function Xl(t){return Mu(t).replace(GA,"%3D")}function pc(t=""){try{return decodeURIComponent(""+t)}catch{return""+t}}function XA(t){return pc(t.replace(Kh," "))}function ZA(t){return pc(t.replace(Kh," "))}function py(t=""){const e=Object.create(null);t[0]==="?"&&(t=t.slice(1));for(const n of t.split("&")){const r=n.match(/([^=]+)=?(.*)/)||[];if(r.length<2)continue;const s=XA(r[1]);if(s==="__proto__"||s==="constructor")continue;const i=ZA(r[2]||"");e[s]===void 0?e[s]=i:Array.isArray(e[s])?e[s].push(i):e[s]=[e[s],i]}return e}function eb(t,e){return(typeof e=="number"||typeof e=="boolean")&&(e=String(e)),e?Array.isArray(e)?e.map(n=>`${Xl(t)}=${Mu(n)}`).join("&"):`${Xl(t)}=${Mu(e)}`:Xl(t)}function tb(t){return Object.keys(t).filter(e=>t[e]!==void 0).map(e=>eb(e,t[e])).filter(Boolean).join("&")}const nb=/^[\s\w\0+.-]{2,}:([/\\]{1,2})/,rb=/^[\s\w\0+.-]{2,}:([/\\]{2})?/,sb=/^([/\\]\s*){2,}[^/\\]/,ib=/^[\s\0]*(blob|data|javascript|vbscript):$/i,ob=/\/$|\/\?|\/#/,ab=/^\.?\//;function Os(t,e={}){return typeof e=="boolean"&&(e={acceptRelative:e}),e.strict?nb.test(t):rb.test(t)||(e.acceptRelative?sb.test(t):!1)}function cb(t){return!!t&&ib.test(t)}function Lu(t="",e){return e?ob.test(t):t.endsWith("/")}function mc(t="",e){if(!e)return(Lu(t)?t.slice(0,-1):t)||"/";if(!Lu(t,!0))return t||"/";let n=t,r="";const s=t.indexOf("#");s!==-1&&(n=t.slice(0,s),r=t.slice(s));const[i,...o]=n.split("?");return((i.endsWith("/")?i.slice(0,-1):i)||"/")+(o.length>0?`?${o.join("?")}`:"")+r}function lb(t="",e){if(!e)return t.endsWith("/")?t:t+"/";if(Lu(t,!0))return t||"/";let n=t,r="";const s=t.indexOf("#");if(s!==-1&&(n=t.slice(0,s),r=t.slice(s),!n))return r;const[i,...o]=n.split("?");return i+"/"+(o.length>0?`?${o.join("?")}`:"")+r}function ub(t,e){if(gy(e)||Os(t))return t;const n=mc(e);return t.startsWith(n)?t:zh(n,t)}function bp(t,e){if(gy(e))return t;const n=mc(e);if(!t.startsWith(n))return t;const r=t.slice(n.length);return r[0]==="/"?r:"/"+r}function my(t,e){const n=vy(t),r={...py(n.search),...e};return n.search=tb(r),db(n)}function gy(t){return!t||t==="/"}function hb(t){return t&&t!=="/"}function zh(t,...e){let n=t||"";for(const r of e.filter(s=>hb(s)))if(n){const s=r.replace(ab,"");n=lb(n)+s}else n=r;return n}function _y(...t){const e=/\/(?!\/)/,n=t.filter(Boolean),r=[];let s=0;for(const o of n)if(!(!o||o==="/")){for(const[a,l]of o.split(e).entries())if(!(!l||l===".")){if(l===".."){if(r.length===1&&Os(r[0]))continue;r.pop(),s--;continue}if(a===1&&r[r.length-1]?.endsWith(":/")){r[r.length-1]+="/"+l;continue}r.push(l),s++}}let i=r.join("/");return s>=0?n[0]?.startsWith("/")&&!i.startsWith("/")?i="/"+i:n[0]?.startsWith("./")&&!i.startsWith("./")&&(i="./"+i):i="../".repeat(-1*s)+i,n[n.length-1]?.endsWith("/")&&!i.endsWith("/")&&(i+="/"),i}function fb(t,e){return pc(mc(t))===pc(mc(e))}const yy=Symbol.for("ufo:protocolRelative");function vy(t="",e){const n=t.match(/^[\s\0]*(blob:|data:|javascript:|vbscript:)(.*)/i);if(n){const[,d,p=""]=n;return{protocol:d.toLowerCase(),pathname:p,href:d+p,auth:"",host:"",search:"",hash:""}}if(!Os(t,{acceptRelative:!0}))return Rp(t);const[,r="",s,i=""]=t.replace(/\\/g,"/").match(/^[\s\0]*([\w+.-]{2,}:)?\/\/([^/@]+@)?(.*)/)||[];let[,o="",a=""]=i.match(/([^#/?]*)(.*)?/)||[];r==="file:"&&(a=a.replace(/\/(?=[A-Za-z]:)/,""));const{pathname:l,search:u,hash:h}=Rp(a);return{protocol:r.toLowerCase(),auth:s?s.slice(0,Math.max(0,s.length-1)):"",host:o,pathname:l,search:u,hash:h,[yy]:!r}}function Rp(t=""){const[e="",n="",r=""]=(t.match(/([^#?]*)(\?[^#]*)?(#.*)?/)||[]).splice(1);return{pathname:e,search:n,hash:r}}function db(t){const e=t.pathname||"",n=t.search?(t.search.startsWith("?")?"":"?")+t.search:"",r=t.hash||"",s=t.auth?t.auth+"@":"",i=t.host||"";return(t.protocol||t[yy]?(t.protocol||"")+"//":"")+s+i+e+n+r}class pb extends Error{constructor(e,n){super(e,n),this.name="FetchError",n?.cause&&!this.cause&&(this.cause=n.cause)}}function mb(t){const e=t.error?.message||t.error?.toString()||"",n=t.request?.method||t.options?.method||"GET",r=t.request?.url||String(t.request)||"/",s=`[${n}] ${JSON.stringify(r)}`,i=t.response?`${t.response.status} ${t.response.statusText}`:"<no response>",o=`${s}: ${i}${e?` ${e}`:""}`,a=new pb(o,t.error?{cause:t.error}:void 0);for(const l of["request","options","response"])Object.defineProperty(a,l,{get(){return t[l]}});for(const[l,u]of[["data","_data"],["status","status"],["statusCode","status"],["statusText","statusText"],["statusMessage","statusText"]])Object.defineProperty(a,l,{get(){return t.response&&t.response[u]}});return a}const gb=new Set(Object.freeze(["PATCH","POST","PUT","DELETE"]));function Sp(t="GET"){return gb.has(t.toUpperCase())}function _b(t){if(t===void 0)return!1;const e=typeof t;return e==="string"||e==="number"||e==="boolean"||e===null?!0:e!=="object"?!1:Array.isArray(t)?!0:t.buffer||t instanceof FormData||t instanceof URLSearchParams?!1:t.constructor&&t.constructor.name==="Object"||typeof t.toJSON=="function"}const yb=new Set(["image/svg","application/xml","application/xhtml","application/html"]),vb=/^application\/(?:[\w!#$%&*.^`~-]*\+)?json(;.+)?$/i;function Eb(t=""){if(!t)return"json";const e=t.split(";").shift()||"";return vb.test(e)?"json":e==="text/event-stream"?"stream":yb.has(e)||e.startsWith("text/")?"text":"blob"}function wb(t,e,n,r){const s=Tb(e?.headers??t?.headers,n?.headers,r);let i;return(n?.query||n?.params||e?.params||e?.query)&&(i={...n?.params,...n?.query,...e?.params,...e?.query}),{...n,...e,query:i,params:i,headers:s}}function Tb(t,e,n){if(!e)return new n(t);const r=new n(e);if(t)for(const[s,i]of Symbol.iterator in t||Array.isArray(t)?t:new n(t))r.set(s,i);return r}async function Oa(t,e){if(e)if(Array.isArray(e))for(const n of e)await n(t);else await e(t)}const Ib=new Set([408,409,425,429,500,502,503,504]),Ab=new Set([101,204,205,304]);function Ey(t={}){const{fetch:e=globalThis.fetch,Headers:n=globalThis.Headers,AbortController:r=globalThis.AbortController}=t;async function s(a){const l=a.error&&a.error.name==="AbortError"&&!a.options.timeout||!1;if(a.options.retry!==!1&&!l){let h;typeof a.options.retry=="number"?h=a.options.retry:h=Sp(a.options.method)?0:1;const d=a.response&&a.response.status||500;if(h>0&&(Array.isArray(a.options.retryStatusCodes)?a.options.retryStatusCodes.includes(d):Ib.has(d))){const p=typeof a.options.retryDelay=="function"?a.options.retryDelay(a):a.options.retryDelay||0;return p>0&&await new Promise(g=>setTimeout(g,p)),i(a.request,{...a.options,retry:h-1})}}const u=mb(a);throw Error.captureStackTrace&&Error.captureStackTrace(u,i),u}const i=async function(l,u={}){const h={request:l,options:wb(l,u,t.defaults,n),response:void 0,error:void 0};if(h.options.method&&(h.options.method=h.options.method.toUpperCase()),h.options.onRequest&&(await Oa(h,h.options.onRequest),h.options.headers instanceof n||(h.options.headers=new n(h.options.headers||{}))),typeof h.request=="string"&&(h.options.baseURL&&(h.request=ub(h.request,h.options.baseURL)),h.options.query&&(h.request=my(h.request,h.options.query),delete h.options.query),"query"in h.options&&delete h.options.query,"params"in h.options&&delete h.options.params),h.options.body&&Sp(h.options.method))if(_b(h.options.body)){const g=h.options.headers.get("content-type");typeof h.options.body!="string"&&(h.options.body=g==="application/x-www-form-urlencoded"?new URLSearchParams(h.options.body).toString():JSON.stringify(h.options.body)),g||h.options.headers.set("content-type","application/json"),h.options.headers.has("accept")||h.options.headers.set("accept","application/json")}else("pipeTo"in h.options.body&&typeof h.options.body.pipeTo=="function"||typeof h.options.body.pipe=="function")&&("duplex"in h.options||(h.options.duplex="half"));let d;if(!h.options.signal&&h.options.timeout){const g=new r;d=setTimeout(()=>{const _=new Error("[TimeoutError]: The operation was aborted due to timeout");_.name="TimeoutError",_.code=23,g.abort(_)},h.options.timeout),h.options.signal=g.signal}try{h.response=await e(h.request,h.options)}catch(g){return h.error=g,h.options.onRequestError&&await Oa(h,h.options.onRequestError),await s(h)}finally{d&&clearTimeout(d)}if((h.response.body||h.response._bodyInit)&&!Ab.has(h.response.status)&&h.options.method!=="HEAD"){const g=(h.options.parseResponse?"json":h.options.responseType)||Eb(h.response.headers.get("content-type")||"");switch(g){case"json":{const _=await h.response.text(),y=h.options.parseResponse||dc;h.response._data=y(_);break}case"stream":{h.response._data=h.response.body||h.response._bodyInit;break}default:h.response._data=await h.response[g]()}}return h.options.onResponse&&await Oa(h,h.options.onResponse),!h.options.ignoreResponseError&&h.response.status>=400&&h.response.status<600?(h.options.onResponseError&&await Oa(h,h.options.onResponseError),await s(h)):h.response},o=async function(l,u){return(await i(l,u))._data};return o.raw=i,o.native=(...a)=>e(...a),o.create=(a={},l={})=>Ey({...t,...l,defaults:{...t.defaults,...l.defaults,...a}}),o}const gc=(function(){if(typeof globalThis<"u")return globalThis;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")})(),bb=gc.fetch?(...t)=>gc.fetch(...t):()=>Promise.reject(new Error("[ofetch] global.fetch is not supported!")),Rb=gc.Headers,Sb=gc.AbortController,Cb=Ey({fetch:bb,Headers:Rb,AbortController:Sb}),Pb=Cb,kb=()=>window?.__NUXT__?.config||window?.useNuxtApp?.().payload?.config,Qh=()=>kb().app,Nb=()=>Qh().baseURL,Ob=()=>Qh().buildAssetsDir,Yh=(...t)=>_y(wy(),Ob(),...t),wy=(...t)=>{const e=Qh(),n=e.cdnURL||e.baseURL;return t.length?_y(n,...t):n};globalThis.__buildAssetsURL=Yh,globalThis.__publicAssetsURL=wy;globalThis.$fetch||(globalThis.$fetch=Pb.create({baseURL:Nb()}));"global"in globalThis||(globalThis.global=globalThis);function Uu(t,e={},n){for(const r in t){const s=t[r],i=n?`${n}:${r}`:r;typeof s=="object"&&s!==null?Uu(s,e,i):typeof s=="function"&&(e[i]=s)}return e}const Db={run:t=>t()},Vb=()=>Db,Ty=typeof console.createTask<"u"?console.createTask:Vb;function xb(t,e){const n=e.shift(),r=Ty(n);return t.reduce((s,i)=>s.then(()=>r.run(()=>i(...e))),Promise.resolve())}function Mb(t,e){const n=e.shift(),r=Ty(n);return Promise.all(t.map(s=>r.run(()=>s(...e))))}function Zl(t,e){for(const n of[...t])n(e)}let Lb=class{constructor(){this._hooks={},this._before=void 0,this._after=void 0,this._deprecatedMessages=void 0,this._deprecatedHooks={},this.hook=this.hook.bind(this),this.callHook=this.callHook.bind(this),this.callHookWith=this.callHookWith.bind(this)}hook(e,n,r={}){if(!e||typeof n!="function")return()=>{};const s=e;let i;for(;this._deprecatedHooks[e];)i=this._deprecatedHooks[e],e=i.to;if(i&&!r.allowDeprecated){let o=i.message;o||(o=`${s} hook has been deprecated`+(i.to?`, please use ${i.to}`:"")),this._deprecatedMessages||(this._deprecatedMessages=new Set),this._deprecatedMessages.has(o)||(console.warn(o),this._deprecatedMessages.add(o))}if(!n.name)try{Object.defineProperty(n,"name",{get:()=>"_"+e.replace(/\W+/g,"_")+"_hook_cb",configurable:!0})}catch{}return this._hooks[e]=this._hooks[e]||[],this._hooks[e].push(n),()=>{n&&(this.removeHook(e,n),n=void 0)}}hookOnce(e,n){let r,s=(...i)=>(typeof r=="function"&&r(),r=void 0,s=void 0,n(...i));return r=this.hook(e,s),r}removeHook(e,n){if(this._hooks[e]){const r=this._hooks[e].indexOf(n);r!==-1&&this._hooks[e].splice(r,1),this._hooks[e].length===0&&delete this._hooks[e]}}deprecateHook(e,n){this._deprecatedHooks[e]=typeof n=="string"?{to:n}:n;const r=this._hooks[e]||[];delete this._hooks[e];for(const s of r)this.hook(e,s)}deprecateHooks(e){Object.assign(this._deprecatedHooks,e);for(const n in e)this.deprecateHook(n,e[n])}addHooks(e){const n=Uu(e),r=Object.keys(n).map(s=>this.hook(s,n[s]));return()=>{for(const s of r.splice(0,r.length))s()}}removeHooks(e){const n=Uu(e);for(const r in n)this.removeHook(r,n[r])}removeAllHooks(){for(const e in this._hooks)delete this._hooks[e]}callHook(e,...n){return n.unshift(e),this.callHookWith(xb,e,...n)}callHookParallel(e,...n){return n.unshift(e),this.callHookWith(Mb,e,...n)}callHookWith(e,n,...r){const s=this._before||this._after?{name:n,args:r,context:{}}:void 0;this._before&&Zl(this._before,s);const i=e(n in this._hooks?[...this._hooks[n]]:[],r);return i instanceof Promise?i.finally(()=>{this._after&&s&&Zl(this._after,s)}):(this._after&&s&&Zl(this._after,s),i)}beforeEach(e){return this._before=this._before||[],this._before.push(e),()=>{if(this._before!==void 0){const n=this._before.indexOf(e);n!==-1&&this._before.splice(n,1)}}}afterEach(e){return this._after=this._after||[],this._after.push(e),()=>{if(this._after!==void 0){const n=this._after.indexOf(e);n!==-1&&this._after.splice(n,1)}}}};function Ub(){return new Lb}function Fb(t={}){let e,n=!1;const r=o=>{if(e&&e!==o)throw new Error("Context conflict")};let s;if(t.asyncContext){const o=t.AsyncLocalStorage||globalThis.AsyncLocalStorage;o?s=new o:console.warn("[unctx] `AsyncLocalStorage` is not provided.")}const i=()=>{if(s){const o=s.getStore();if(o!==void 0)return o}return e};return{use:()=>{const o=i();if(o===void 0)throw new Error("Context is not available");return o},tryUse:()=>i(),set:(o,a)=>{a||r(o),e=o,n=!0},unset:()=>{e=void 0,n=!1},call:(o,a)=>{r(o),e=o;try{return s?s.run(o,a):a()}finally{n||(e=void 0)}},async callAsync(o,a){e=o;const l=()=>{e=o},u=()=>e===o?l:void 0;Fu.add(u);try{const h=s?s.run(o,a):a();return n||(e=void 0),await h}finally{Fu.delete(u)}}}}function Bb(t={}){const e={};return{get(n,r={}){return e[n]||(e[n]=Fb({...t,...r})),e[n]}}}const _c=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof global<"u"?global:typeof window<"u"?window:{},Cp="__unctx__",Hb=_c[Cp]||(_c[Cp]=Bb()),jb=(t,e={})=>Hb.get(t,e),Pp="__unctx_async_handlers__",Fu=_c[Pp]||(_c[Pp]=new Set);function ii(t){const e=[];for(const s of Fu){const i=s();i&&e.push(i)}const n=()=>{for(const s of e)s()};let r=t();return r&&typeof r=="object"&&"catch"in r&&(r=r.catch(s=>{throw n(),s})),[r,n]}const kp={name:"page-fade",mode:"out-in"},$b=!1,qb=!1,Np={id:"__nuxt-loader"},Zx={componentName:"NuxtLink",prefetch:!0,prefetchOn:{visibility:!0}},Wb="#__nuxt",Iy="nuxt-app",Op=36e5,Gb="vite:preloadError";function Ay(t=Iy){return jb(t,{asyncContext:!1})}const Kb="__nuxt_plugin";function zb(t){let e=0;const n={_id:t.id||Iy||"nuxt-app",_scope:mT(),provide:void 0,versions:{get nuxt(){return"4.2.2"},get vue(){return n.vueApp.version}},payload:Pn({...t.ssrContext?.payload||{},data:Pn({}),state:Kr({}),once:new Set,_errors:Pn({})}),static:{data:{}},runWithContext(s){return n._scope.active&&!kh()?n._scope.run(()=>Dp(n,s)):Dp(n,s)},isHydrating:!0,deferHydration(){if(!n.isHydrating)return()=>{};e++;let s=!1;return()=>{if(!s&&(s=!0,e--,e===0))return n.isHydrating=!1,n.callHook("app:suspense:resolve")}},_asyncDataPromises:{},_asyncData:Pn({}),_payloadRevivers:{},...t};{const s=window.__NUXT__;if(s)for(const i in s)switch(i){case"data":case"state":case"_errors":Object.assign(n.payload[i],s[i]);break;default:n.payload[i]=s[i]}}n.hooks=Ub(),n.hook=n.hooks.hook,n.callHook=n.hooks.callHook,n.provide=(s,i)=>{const o="$"+s;Da(n,o,i),Da(n.vueApp.config.globalProperties,o,i)},Da(n.vueApp,"$nuxt",n),Da(n.vueApp.config.globalProperties,"$nuxt",n);{window.addEventListener(Gb,i=>{n.callHook("app:chunkError",{error:i.payload}),i.payload.message.includes("Unable to preload CSS")&&i.preventDefault()}),window.useNuxtApp||=Ze;const s=n.hook("app:error",(...i)=>{console.error("[nuxt] error caught during app initialization",...i)});n.hook("app:mounted",s)}const r=n.payload.config;return n.provide("config",r),n}function Qb(t,e){e.hooks&&t.hooks.addHooks(e.hooks)}async function Yb(t,e){if(typeof e=="function"){const{provide:n}=await t.runWithContext(()=>e(t))||{};if(n&&typeof n=="object")for(const r in n)t.provide(r,n[r])}}async function Jb(t,e){const n=new Set,r=[],s=[];let i,o=0;async function a(l){const u=l.dependsOn?.filter(h=>e.some(d=>d._name===h)&&!n.has(h))??[];if(u.length>0)r.push([new Set(u),l]);else{const h=Yb(t,l).then(async()=>{l._name&&(n.add(l._name),await Promise.all(r.map(async([d,p])=>{d.has(l._name)&&(d.delete(l._name),d.size===0&&(o++,await a(p)))})))}).catch(d=>{if(!l.parallel&&!t.payload.error)throw d;i||=d});l.parallel?s.push(h):await h}}for(const l of e)Qb(t,l);for(const l of e)await a(l);if(await Promise.all(s),o)for(let l=0;l<o;l++)await Promise.all(s);if(i)throw t.payload.error||i}function Ln(t){if(typeof t=="function")return t;const e=t._name||t.name;return delete t.name,Object.assign(t.setup||(()=>{}),t,{[Kb]:!0,_name:e})}function Dp(t,e,n){const r=()=>e();return Ay(t._id).set(t),t.vueApp.runWithContext(r)}function Xb(t){let e;return qc()&&(e=Ns()?.appContext.app.$nuxt),e||=Ay(t).tryUse(),e||null}function Ze(t){const e=Xb(t);if(!e)throw new Error("[nuxt] instance unavailable");return e}function Yc(t){return Ze().$config}function Da(t,e,n){Object.defineProperty(t,e,{get:()=>n})}function Zb(t,e){return{ctx:{table:t},matchAll:n=>Ry(n,t)}}function by(t){const e={};for(const n in t)e[n]=n==="dynamic"?new Map(Object.entries(t[n]).map(([r,s])=>[r,by(s)])):new Map(Object.entries(t[n]));return e}function eR(t){return Zb(by(t))}function Ry(t,e,n){t.endsWith("/")&&(t=t.slice(0,-1)||"/");const r=[];for(const[i,o]of Vp(e.wildcard))(t===i||t.startsWith(i+"/"))&&r.push(o);for(const[i,o]of Vp(e.dynamic))if(t.startsWith(i+"/")){const a="/"+t.slice(i.length).split("/").splice(2).join("/");r.push(...Ry(a,o))}const s=e.static.get(t);return s&&r.push(s),r.filter(Boolean)}function Vp(t){return[...t.entries()].sort((e,n)=>e[0].length-n[0].length)}function eu(t){if(t===null||typeof t!="object")return!1;const e=Object.getPrototypeOf(t);return e!==null&&e!==Object.prototype&&Object.getPrototypeOf(e)!==null||Symbol.iterator in t?!1:Symbol.toStringTag in t?Object.prototype.toString.call(t)==="[object Module]":!0}function Bu(t,e,n=".",r){if(!eu(e))return Bu(t,{},n,r);const s=Object.assign({},e);for(const i in t){if(i==="__proto__"||i==="constructor")continue;const o=t[i];o!=null&&(r&&r(s,i,o,n)||(Array.isArray(o)&&Array.isArray(s[i])?s[i]=[...o,...s[i]]:eu(o)&&eu(s[i])?s[i]=Bu(o,s[i],(n?`${n}.`:"")+i.toString(),r):s[i]=o))}return s}function tR(t){return(...e)=>e.reduce((n,r)=>Bu(n,r,"",t),{})}const Sy=tR();function nR(t,e){try{return e in t}catch{return!1}}class xp extends Error{static __h3_error__=!0;statusCode=500;fatal=!1;unhandled=!1;statusMessage;data;cause;constructor(e,n={}){super(e,n),n.cause&&!this.cause&&(this.cause=n.cause)}toJSON(){const e={message:this.message,statusCode:Hu(this.statusCode,500)};return this.statusMessage&&(e.statusMessage=Cy(this.statusMessage)),this.data!==void 0&&(e.data=this.data),e}}function rR(t){if(typeof t=="string")return new xp(t);if(sR(t))return t;const e=new xp(t.message??t.statusMessage??"",{cause:t.cause||t});if(nR(t,"stack"))try{Object.defineProperty(e,"stack",{get(){return t.stack}})}catch{try{e.stack=t.stack}catch{}}if(t.data&&(e.data=t.data),t.statusCode?e.statusCode=Hu(t.statusCode,e.statusCode):t.status&&(e.statusCode=Hu(t.status,e.statusCode)),t.statusMessage?e.statusMessage=t.statusMessage:t.statusText&&(e.statusMessage=t.statusText),e.statusMessage){const n=e.statusMessage;Cy(e.statusMessage)!==n&&console.warn("[h3] Please prefer using `message` for longer error messages instead of `statusMessage`. In the future, `statusMessage` will be sanitized by default.")}return t.fatal!==void 0&&(e.fatal=t.fatal),t.unhandled!==void 0&&(e.unhandled=t.unhandled),e}function sR(t){return t?.constructor?.__h3_error__===!0}const iR=/[^\u0009\u0020-\u007E]/g;function Cy(t=""){return t.replace(iR,"")}function Hu(t,e=200){return!t||(typeof t=="string"&&(t=Number.parseInt(t,10)),t<100||t>999)?e:t}const Py=Symbol("layout-meta"),Ts=Symbol("route");import.meta.url.replace(/\/app\/.*$/,"/");const Xt=()=>Ze()?.$router,Jo=()=>qc()?Rt(Ts,Ze()._route):Ze()._route;function eM(t){return t}const oR=()=>{try{if(Ze()._processingMiddleware)return!0}catch{return!1}return!1},tM=(t,e)=>{t||="/";const n=typeof t=="string"?t:"path"in t?aR(t):Xt().resolve(t).href;if(e?.open){const{target:l="_blank",windowFeatures:u={}}=e.open,h=[];for(const[d,p]of Object.entries(u))p!==void 0&&h.push(`${d.toLowerCase()}=${p}`);return open(n,l,h.join(", ")),Promise.resolve()}const r=Os(n,{acceptRelative:!0}),s=e?.external||r;if(s){if(!e?.external)throw new Error("Navigating to an external URL is not allowed by default. Use `navigateTo(url, { external: true })`.");const{protocol:l}=new URL(n,window.location.href);if(l&&cb(l))throw new Error(`Cannot navigate to a URL with '${l}' protocol.`)}const i=oR();if(!s&&i){if(e?.replace){if(typeof t=="string"){const{pathname:l,search:u,hash:h}=vy(t);return{path:l,...u&&{query:py(u)},...h&&{hash:h},replace:!0}}return{...t,replace:!0}}return t}const o=Xt(),a=Ze();return s?(a._scope.stop(),e?.replace?location.replace(n):location.href=n,i?a.isHydrating?new Promise(()=>{}):!1:Promise.resolve()):e?.replace?o.replace(t):o.push(t)};function aR(t){return my(t.path||"",t.query||{})+(t.hash||"")}const ky="__nuxt_error",Jc=()=>jT(Ze().payload,"error"),ls=t=>{const e=_s(t);try{const n=Jc();Ze().hooks.callHook("app:error",e),n.value||=e}catch{throw e}return e},cR=async(t={})=>{const e=Ze(),n=Jc();e.callHook("app:error:cleared",t),t.redirect&&await Xt().replace(t.redirect),n.value=void 0},Ny=t=>!!t&&typeof t=="object"&&ky in t,_s=t=>{const e=rR(t);return Object.defineProperty(e,ky,{value:!0,configurable:!1,writable:!1}),e};function lR(t){const e=hR(t),n=new ArrayBuffer(e.length),r=new DataView(n);for(let s=0;s<n.byteLength;s++)r.setUint8(s,e.charCodeAt(s));return n}const uR="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";function hR(t){t.length%4===0&&(t=t.replace(/==?$/,""));let e="",n=0,r=0;for(let s=0;s<t.length;s++)n<<=6,n|=uR.indexOf(t[s]),r+=6,r===24&&(e+=String.fromCharCode((n&16711680)>>16),e+=String.fromCharCode((n&65280)>>8),e+=String.fromCharCode(n&255),n=r=0);return r===12?(n>>=4,e+=String.fromCharCode(n)):r===18&&(n>>=2,e+=String.fromCharCode((n&65280)>>8),e+=String.fromCharCode(n&255)),e}const fR=-1,dR=-2,pR=-3,mR=-4,gR=-5,_R=-6;function yR(t,e){return vR(JSON.parse(t),e)}function vR(t,e){if(typeof t=="number")return s(t,!0);if(!Array.isArray(t)||t.length===0)throw new Error("Invalid input");const n=t,r=Array(n.length);function s(i,o=!1){if(i===fR)return;if(i===pR)return NaN;if(i===mR)return 1/0;if(i===gR)return-1/0;if(i===_R)return-0;if(o||typeof i!="number")throw new Error("Invalid input");if(i in r)return r[i];const a=n[i];if(!a||typeof a!="object")r[i]=a;else if(Array.isArray(a))if(typeof a[0]=="string"){const l=a[0],u=e&&Object.hasOwn(e,l)?e[l]:void 0;if(u){let h=a[1];return typeof h!="number"&&(h=n.push(a[1])-1),r[i]=u(s(h))}switch(l){case"Date":r[i]=new Date(a[1]);break;case"Set":const h=new Set;r[i]=h;for(let g=1;g<a.length;g+=1)h.add(s(a[g]));break;case"Map":const d=new Map;r[i]=d;for(let g=1;g<a.length;g+=2)d.set(s(a[g]),s(a[g+1]));break;case"RegExp":r[i]=new RegExp(a[1],a[2]);break;case"Object":r[i]=Object(a[1]);break;case"BigInt":r[i]=BigInt(a[1]);break;case"null":const p=Object.create(null);r[i]=p;for(let g=1;g<a.length;g+=2)p[a[g]]=s(a[g+1]);break;case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"BigInt64Array":case"BigUint64Array":{const g=globalThis[l],_=new g(s(a[1]));r[i]=a[2]!==void 0?_.subarray(a[2],a[3]):_;break}case"ArrayBuffer":{const g=a[1],_=lR(g);r[i]=_;break}case"Temporal.Duration":case"Temporal.Instant":case"Temporal.PlainDate":case"Temporal.PlainTime":case"Temporal.PlainDateTime":case"Temporal.PlainMonthDay":case"Temporal.PlainYearMonth":case"Temporal.ZonedDateTime":{const g=l.slice(9);r[i]=Temporal[g].from(a[1]);break}case"URL":{const g=new URL(a[1]);r[i]=g;break}case"URLSearchParams":{const g=new URLSearchParams(a[1]);r[i]=g;break}default:throw new Error(`Unknown type ${l}`)}}else{const l=new Array(a.length);r[i]=l;for(let u=0;u<a.length;u+=1){const h=a[u];h!==dR&&(l[u]=s(h))}}else{const l={};r[i]=l;for(const u in a){if(u==="__proto__")throw new Error("Cannot parse an object with a `__proto__` property");const h=a[u];l[u]=s(h)}}return r[i]}return s(0)}const ER=new Set(["link","style","script","noscript"]),wR=new Set(["title","titleTemplate","script","style","noscript"]),Mp=new Set(["base","meta","link","style","script","noscript"]),TR=new Set(["title","base","htmlAttrs","bodyAttrs","meta","link","style","script","noscript"]),IR=new Set(["base","title","titleTemplate","bodyAttrs","htmlAttrs","templateParams"]),AR=new Set(["key","tagPosition","tagPriority","tagDuplicateStrategy","innerHTML","textContent","processTemplateParams"]),bR=new Set(["templateParams","htmlAttrs","bodyAttrs"]),RR=new Set(["theme-color","google-site-verification","og","article","book","profile","twitter","author"]);function ju(t,e={},n){for(const r in t){const s=t[r],i=n?`${n}:${r}`:r;typeof s=="object"&&s!==null?ju(s,e,i):typeof s=="function"&&(e[i]=s)}return e}const Oy=(()=>{if(console.createTask)return console.createTask;const t={run:e=>e()};return()=>t})();function Dy(t,e,n,r){for(let s=n;s<t.length;s+=1)try{const i=r?r.run(()=>t[s](...e)):t[s](...e);if(i instanceof Promise)return i.then(()=>Dy(t,e,s+1,r))}catch(i){return Promise.reject(i)}}function SR(t,e,n){if(t.length>0)return Dy(t,e,0,Oy(n))}function CR(t,e,n){if(t.length>0){const r=Oy(n);return Promise.all(t.map(s=>r.run(()=>s(...e))))}}function tu(t,e){for(const n of[...t])n(e)}var PR=class{_hooks;_before;_after;_deprecatedHooks;_deprecatedMessages;constructor(){this._hooks={},this._before=void 0,this._after=void 0,this._deprecatedMessages=void 0,this._deprecatedHooks={},this.hook=this.hook.bind(this),this.callHook=this.callHook.bind(this),this.callHookWith=this.callHookWith.bind(this)}hook(t,e,n={}){if(!t||typeof e!="function")return()=>{};const r=t;let s;for(;this._deprecatedHooks[t];)s=this._deprecatedHooks[t],t=s.to;if(s&&!n.allowDeprecated){let i=s.message;i||(i=`${r} hook has been deprecated`+(s.to?`, please use ${s.to}`:"")),this._deprecatedMessages||(this._deprecatedMessages=new Set),this._deprecatedMessages.has(i)||(console.warn(i),this._deprecatedMessages.add(i))}if(!e.name)try{Object.defineProperty(e,"name",{get:()=>"_"+t.replace(/\W+/g,"_")+"_hook_cb",configurable:!0})}catch{}return this._hooks[t]=this._hooks[t]||[],this._hooks[t].push(e),()=>{e&&(this.removeHook(t,e),e=void 0)}}hookOnce(t,e){let n,r=(...s)=>(typeof n=="function"&&n(),n=void 0,r=void 0,e(...s));return n=this.hook(t,r),n}removeHook(t,e){const n=this._hooks[t];if(n){const r=n.indexOf(e);r!==-1&&n.splice(r,1),n.length===0&&(this._hooks[t]=void 0)}}deprecateHook(t,e){this._deprecatedHooks[t]=typeof e=="string"?{to:e}:e;const n=this._hooks[t]||[];this._hooks[t]=void 0;for(const r of n)this.hook(t,r)}deprecateHooks(t){for(const e in t)this.deprecateHook(e,t[e])}addHooks(t){const e=ju(t),n=Object.keys(e).map(r=>this.hook(r,e[r]));return()=>{for(const r of n)r();n.length=0}}removeHooks(t){const e=ju(t);for(const n in e)this.removeHook(n,e[n])}removeAllHooks(){this._hooks={}}callHook(t,...e){return this.callHookWith(SR,t,e)}callHookParallel(t,...e){return this.callHookWith(CR,t,e)}callHookWith(t,e,n){const r=this._before||this._after?{name:e,args:n,context:{}}:void 0;this._before&&tu(this._before,r);const s=t(this._hooks[e]?[...this._hooks[e]]:[],n,e);return s instanceof Promise?s.finally(()=>{this._after&&r&&tu(this._after,r)}):(this._after&&r&&tu(this._after,r),s)}beforeEach(t){return this._before=this._before||[],this._before.push(t),()=>{if(this._before!==void 0){const e=this._before.indexOf(t);e!==-1&&this._before.splice(e,1)}}}afterEach(t){return this._after=this._after||[],this._after.push(t),()=>{if(this._after!==void 0){const e=this._after.indexOf(t);e!==-1&&this._after.splice(e,1)}}}};function kR(){return new PR}const NR=["name","property","http-equiv"],OR=new Set(["viewport","description","keywords","robots"]);function Vy(t){const e=t.split(":");return e.length?RR.has(e[1]):!1}function $u(t){const{props:e,tag:n}=t;if(IR.has(n))return n;if(n==="link"&&e.rel==="canonical")return"canonical";if(e.charset)return"charset";if(t.tag==="meta"){for(const r of NR)if(e[r]!==void 0){const s=e[r],i=s&&typeof s=="string"&&s.includes(":"),o=s&&OR.has(s),l=!(i||o)&&t.key?`:key:${t.key}`:"";return`${n}:${s}${l}`}}if(t.key)return`${n}:key:${t.key}`;if(e.id)return`${n}:id:${e.id}`;if(wR.has(n)){const r=t.textContent||t.innerHTML;if(r)return`${n}:content:${r}`}}function Lp(t){const e=t._h||t._d;if(e)return e;const n=t.textContent||t.innerHTML;return n||`${t.tag}:${Object.entries(t.props).map(([r,s])=>`${r}:${String(s)}`).join(",")}`}function yc(t,e,n){typeof t==="function"&&(!n||n!=="titleTemplate"&&!(n[0]==="o"&&n[1]==="n"))&&(t=t());const s=e?e(n,t):t;if(Array.isArray(s))return s.map(i=>yc(i,e));if(s?.constructor===Object){const i={};for(const o of Object.keys(s))i[o]=yc(s[o],e,o);return i}return s}function DR(t,e){const n=t==="style"?new Map:new Set;function r(s){if(s==null||s===void 0)return;const i=String(s).trim();if(i)if(t==="style"){const[o,...a]=i.split(":").map(l=>l?l.trim():"");o&&a.length&&n.set(o,a.join(":"))}else i.split(" ").filter(Boolean).forEach(o=>n.add(o))}return typeof e=="string"?t==="style"?e.split(";").forEach(r):r(e):Array.isArray(e)?e.forEach(s=>r(s)):e&&typeof e=="object"&&Object.entries(e).forEach(([s,i])=>{i&&i!=="false"&&(t==="style"?n.set(String(s).trim(),String(i)):r(s))}),n}function xy(t,e){return t.props=t.props||{},e?t.tag==="templateParams"?(t.props=e,t):(Object.entries(e).forEach(([n,r])=>{if(r===null){t.props[n]=null;return}if(n==="class"||n==="style"){t.props[n]=DR(n,r);return}if(AR.has(n)){if(["textContent","innerHTML"].includes(n)&&typeof r=="object"){let a=e.type;if(e.type||(a="application/json"),!a?.endsWith("json")&&a!=="speculationrules")return;e.type=a,t.props.type=a,t[n]=JSON.stringify(r)}else t[n]=r;return}const s=String(r),i=n.startsWith("data-"),o=t.tag==="meta"&&n==="content";s==="true"||s===""?t.props[n]=i||o?s:!0:!r&&i&&s==="false"?t.props[n]="false":r!==void 0&&(t.props[n]=r)}),t):t}function VR(t,e){const n=typeof e=="object"&&typeof e!="function"?e:{[t==="script"||t==="noscript"||t==="style"?"innerHTML":"textContent"]:e},r=xy({tag:t,props:{}},n);return r.key&&ER.has(r.tag)&&(r.props["data-hid"]=r._h=r.key),r.tag==="script"&&typeof r.innerHTML=="object"&&(r.innerHTML=JSON.stringify(r.innerHTML),r.props.type=r.props.type||"application/json"),Array.isArray(r.props.content)?r.props.content.map(s=>({...r,props:{...r.props,content:s}})):r}function xR(t,e){if(!t)return[];typeof t=="function"&&(t=t());const n=(s,i)=>{for(let o=0;o<e.length;o++)i=e[o](s,i);return i};t=n(void 0,t);const r=[];return t=yc(t,n),Object.entries(t||{}).forEach(([s,i])=>{if(i!==void 0)for(const o of Array.isArray(i)?i:[i])r.push(VR(s,o))}),r.flat()}const Up=(t,e)=>t._w===e._w?t._p-e._p:t._w-e._w,Fp={base:-10,title:10},MR={critical:-8,high:-1,low:2},Bp={meta:{"content-security-policy":-30,charset:-20,viewport:-15},link:{preconnect:20,stylesheet:60,preload:70,modulepreload:70,prefetch:90,"dns-prefetch":90,prerender:90},script:{async:30,defer:80,sync:50},style:{imported:40,sync:60}},LR=/@import/,to=t=>t===""||t===!0;function UR(t,e){if(typeof e.tagPriority=="number")return e.tagPriority;let n=100;const r=MR[e.tagPriority]||0,s=t.resolvedOptions.disableCapoSorting?{link:{},script:{},style:{}}:Bp;if(e.tag in Fp)n=Fp[e.tag];else if(e.tag==="meta"){const i=e.props["http-equiv"]==="content-security-policy"?"content-security-policy":e.props.charset?"charset":e.props.name==="viewport"?"viewport":null;i&&(n=Bp.meta[i])}else if(e.tag==="link"&&e.props.rel)n=s.link[e.props.rel];else if(e.tag==="script"){const i=String(e.props.type);to(e.props.async)?n=s.script.async:e.props.src&&!to(e.props.defer)&&!to(e.props.async)&&i!=="module"&&!i.endsWith("json")||e.innerHTML&&!i.endsWith("json")?n=s.script.sync:(to(e.props.defer)&&e.props.src&&!to(e.props.async)||i==="module")&&(n=s.script.defer)}else e.tag==="style"&&(n=e.innerHTML&&LR.test(e.innerHTML)?s.style.imported:s.style.sync);return(n||100)+r}function Hp(t,e){const n=typeof e=="function"?e(t):e,r=n.key||String(t.plugins.size+1);t.plugins.get(r)||(t.plugins.set(r,n),t.hooks.addHooks(n.hooks||{}))}function FR(t={}){const e=kR();e.addHooks(t.hooks||{});const n=!t.document,r=new Map,s=new Map,i=new Set,o={_entryCount:1,plugins:s,dirty:!1,resolvedOptions:t,hooks:e,ssr:n,entries:r,headEntries(){return[...r.values()]},use:a=>Hp(o,a),push(a,l){const u={...l||{}};delete u.head;const h=u._index??o._entryCount++,d={_i:h,input:a,options:u},p={_poll(g=!1){o.dirty=!0,!g&&i.add(h),e.callHook("entries:updated",o)},dispose(){r.delete(h)&&o.invalidate()},patch(g){(!u.mode||u.mode==="server"&&n||u.mode==="client"&&!n)&&(d.input=g,r.set(h,d),p._poll())}};return p.patch(a),p},async resolveTags(){const a={tagMap:new Map,tags:[],entries:[...o.entries.values()]};for(await e.callHook("entries:resolve",a);i.size;){const p=i.values().next().value;i.delete(p);const g=r.get(p);if(g){const _={tags:xR(g.input,t.propResolvers||[]).map(y=>Object.assign(y,g.options)),entry:g};await e.callHook("entries:normalize",_),g._tags=_.tags.map((y,N)=>(y._w=UR(o,y),y._p=(g._i<<10)+N,y._d=$u(y),y))}}let l=!1;a.entries.flatMap(p=>(p._tags||[]).map(g=>({...g,props:{...g.props}}))).sort(Up).reduce((p,g)=>{const _=String(g._d||g._p);if(!p.has(_))return p.set(_,g);const y=p.get(_);if((g?.tagDuplicateStrategy||(bR.has(g.tag)?"merge":null)||(g.key&&g.key===y.key?"merge":null))==="merge"){const D={...y.props};Object.entries(g.props).forEach(([O,E])=>D[O]=O==="style"?new Map([...y.props.style||new Map,...E]):O==="class"?new Set([...y.props.class||new Set,...E]):E),p.set(_,{...g,props:D})}else g._p>>10===y._p>>10&&g.tag==="meta"&&Vy(_)?(p.set(_,Object.assign([...Array.isArray(y)?y:[y],g],g)),l=!0):(g._w===y._w?g._p>y._p:g?._w<y?._w)&&p.set(_,g);return p},a.tagMap);const u=a.tagMap.get("title"),h=a.tagMap.get("titleTemplate");if(o._title=u?.textContent,h){const p=h?.textContent;if(o._titleTemplate=p,p){let g=typeof p=="function"?p(u?.textContent):p;typeof g=="string"&&!o.plugins.has("template-params")&&(g=g.replace("%s",u?.textContent||"")),u?g===null?a.tagMap.delete("title"):a.tagMap.set("title",{...u,textContent:g}):(h.tag="title",h.textContent=g)}}a.tags=Array.from(a.tagMap.values()),l&&(a.tags=a.tags.flat().sort(Up)),await e.callHook("tags:beforeResolve",a),await e.callHook("tags:resolve",a),await e.callHook("tags:afterResolve",a);const d=[];for(const p of a.tags){const{innerHTML:g,tag:_,props:y}=p;if(TR.has(_)&&!(Object.keys(y).length===0&&!p.innerHTML&&!p.textContent)&&!(_==="meta"&&!y.content&&!y["http-equiv"]&&!y.charset)){if(_==="script"&&g){if(String(y.type).endsWith("json")){const N=typeof g=="string"?g:JSON.stringify(g);p.innerHTML=N.replace(/</g,"\\u003C")}else typeof g=="string"&&(p.innerHTML=g.replace(new RegExp(`</${_}`,"g"),`<\\/${_}`));p._d=$u(p)}d.push(p)}}return d},invalidate(){for(const a of r.values())i.add(a._i);o.dirty=!0,e.callHook("entries:updated",o)}};return(t?.plugins||[]).forEach(a=>Hp(o,a)),o.hooks.callHook("init",o),t.init?.forEach(a=>a&&o.push(a)),o}const BR=(t,e)=>ot(e)?UT(e):e,Jh="usehead";function HR(t){return{install(n){n.config.globalProperties.$unhead=t,n.config.globalProperties.$head=t,n.provide(Jh,t)}}.install}function jR(){if(qc()){const t=Rt(Jh);if(!t)throw new Error("useHead() was called without provide context, ensure you call it through the setup() function.");return t}throw new Error("useHead() was called without provide context, ensure you call it through the setup() function.")}function $R(t,e={}){const n=e.head||jR();return n.ssr?n.push(t||{},e):qR(n,t,e)}function qR(t,e,n={}){const r=ue(!1);let s;return XT(()=>{const o=r.value?{}:yc(e,BR);s?s.patch(o):s=t.push(o,n)}),Ns()&&(Qo(()=>{s.dispose()}),C_(()=>{r.value=!0}),S_(()=>{r.value=!1})),s}function My(t){const e=t||Ze();return e.ssrContext?.head||e.runWithContext(()=>{if(qc()){const n=Rt(Jh);if(!n)throw new Error("[nuxt] [unhead] Missing Unhead instance.");return n}})}function nM(t,e={}){const n=e.head||My(e.nuxt);return $R(t,{head:n,...e})}let $a,qa;function WR(){return $a=$fetch(Yh(`builds/meta/${Yc().app.buildId}.json`),{responseType:"json"}),$a.then(t=>{qa=eR(t.matcher)}).catch(t=>{console.error("[nuxt] Error fetching app manifest.",t)}),$a}function Xc(){return $a||WR()}async function Xh(t){const e=typeof t=="string"?t:t.path;if(await Xc(),!qa)return console.error("[nuxt] Error creating app manifest matcher.",qa),{};try{return Sy({},...qa.matchAll(e).reverse())}catch(n){return console.error("[nuxt] Error matching route rules.",n),{}}}async function jp(t,e={}){if(!await Uy(t))return null;const r=await KR(t,e);return await Ly(r)||null}const GR="_payload.json";async function KR(t,e={}){const n=new URL(t,"http://localhost");if(n.host!=="localhost"||Os(n.pathname,{acceptRelative:!0}))throw new Error("Payload URL must not include hostname: "+t);const r=Yc(),s=e.hash||(e.fresh?Date.now():r.app.buildId),i=r.app.cdnURL,o=i&&await Uy(t)?i:r.app.baseURL;return zh(o,n.pathname,GR+(s?`?${s}`:""))}async function Ly(t){const e=fetch(t,{cache:"force-cache"}).then(n=>n.text().then(Fy));try{return await e}catch(n){console.warn("[nuxt] Cannot load payload ",t,n)}return null}async function Uy(t=Jo().path){const e=Ze();return t=t==="/"?t:t.replace(/\/$/,""),(await Xc()).prerendered.includes(t)?!0:e.runWithContext(async()=>{const r=await Xh({path:t});return!!r.prerender&&!r.redirect})}let is=null;async function zR(){if(is)return is;const t=document.getElementById("__NUXT_DATA__");if(!t)return{};const e=await Fy(t.textContent||""),n=t.dataset.src?await Ly(t.dataset.src):void 0;return is={...e,...n,...window.__NUXT__},is.config?.public&&(is.config.public=Kr(is.config.public)),is}async function Fy(t){return await yR(t,Ze()._payloadRevivers)}function QR(t,e){Ze()._payloadRevivers[t]=e}const YR=[["NuxtError",t=>_s(t)],["EmptyShallowRef",t=>ir(t==="_"?void 0:t==="0n"?BigInt(0):dc(t))],["EmptyRef",t=>ue(t==="_"?void 0:t==="0n"?BigInt(0):dc(t))],["ShallowRef",t=>ir(t)],["ShallowReactive",t=>Pn(t)],["Ref",t=>ue(t)],["Reactive",t=>Kr(t)]],JR=Ln({name:"nuxt:revive-payload:client",order:-30,async setup(t){let e,n;for(const[r,s]of YR)QR(r,s);Object.assign(t.payload,([e,n]=ii(()=>t.runWithContext(zR)),e=await e,n(),e)),delete window.__NUXT__}});async function Zh(t,e={}){const n=e.document||t.resolvedOptions.document;if(!n||!t.dirty)return;const r={shouldRender:!0,tags:[]};if(await t.hooks.callHook("dom:beforeRender",r),!!r.shouldRender)return t._domUpdatePromise||(t._domUpdatePromise=new Promise(async s=>{const i=new Map,o=new Promise(g=>{t.resolveTags().then(_=>{g(_.map(y=>{const N=i.get(y._d)||0,D={tag:y,id:(N?`${y._d}:${N}`:y._d)||Lp(y),shouldRender:!0};return y._d&&Vy(y._d)&&i.set(y._d,N+1),D}))})});let a=t._dom;if(!a){a={title:n.title,elMap:new Map().set("htmlAttrs",n.documentElement).set("bodyAttrs",n.body)};for(const g of["body","head"]){const _=n[g]?.children;for(const y of _){const N=y.tagName.toLowerCase();if(!Mp.has(N))continue;const D=xy({tag:N,props:{}},{innerHTML:y.innerHTML,...y.getAttributeNames().reduce((O,E)=>(O[E]=y.getAttribute(E),O),{})||{}});if(D.key=y.getAttribute("data-hid")||void 0,D._d=$u(D)||Lp(D),a.elMap.has(D._d)){let O=1,E=D._d;for(;a.elMap.has(E);)E=`${D._d}:${O++}`;a.elMap.set(E,y)}else a.elMap.set(D._d,y)}}}a.pendingSideEffects={...a.sideEffects},a.sideEffects={};function l(g,_,y){const N=`${g}:${_}`;a.sideEffects[N]=y,delete a.pendingSideEffects[N]}function u({id:g,$el:_,tag:y}){const N=y.tag.endsWith("Attrs");a.elMap.set(g,_),N||(y.textContent&&y.textContent!==_.textContent&&(_.textContent=y.textContent),y.innerHTML&&y.innerHTML!==_.innerHTML&&(_.innerHTML=y.innerHTML),l(g,"el",()=>{_?.remove(),a.elMap.delete(g)}));for(const D in y.props){if(!Object.prototype.hasOwnProperty.call(y.props,D))continue;const O=y.props[D];if(D.startsWith("on")&&typeof O=="function"){const k=_?.dataset;if(k&&k[`${D}fired`]){const V=D.slice(0,-5);O.call(_,new Event(V.substring(2)))}_.getAttribute(`data-${D}`)!==""&&((y.tag==="bodyAttrs"?n.defaultView:_).addEventListener(D.substring(2),O.bind(_)),_.setAttribute(`data-${D}`,""));continue}const E=`attr:${D}`;if(D==="class"){if(!O)continue;for(const k of O)N&&l(g,`${E}:${k}`,()=>_.classList.remove(k)),!_.classList.contains(k)&&_.classList.add(k)}else if(D==="style"){if(!O)continue;for(const[k,V]of O)l(g,`${E}:${k}`,()=>{_.style.removeProperty(k)}),_.style.setProperty(k,V)}else O!==!1&&O!==null&&(_.getAttribute(D)!==O&&_.setAttribute(D,O===!0?"":String(O)),N&&l(g,E,()=>_.removeAttribute(D)))}}const h=[],d={bodyClose:void 0,bodyOpen:void 0,head:void 0},p=await o;for(const g of p){const{tag:_,shouldRender:y,id:N}=g;if(y){if(_.tag==="title"){n.title=_.textContent,l("title","",()=>n.title=a.title);continue}g.$el=g.$el||a.elMap.get(N),g.$el?u(g):Mp.has(_.tag)&&h.push(g)}}for(const g of h){const _=g.tag.tagPosition||"head";g.$el=n.createElement(g.tag.tag),u(g),d[_]=d[_]||n.createDocumentFragment(),d[_].appendChild(g.$el)}for(const g of p)await t.hooks.callHook("dom:renderTag",g,n,l);d.head&&n.head.appendChild(d.head),d.bodyOpen&&n.body.insertBefore(d.bodyOpen,n.body.firstChild),d.bodyClose&&n.body.appendChild(d.bodyClose);for(const g in a.pendingSideEffects)a.pendingSideEffects[g]();t._dom=a,await t.hooks.callHook("dom:rendered",{renders:p}),s()}).finally(()=>{t._domUpdatePromise=void 0,t.dirty=!1})),t._domUpdatePromise}function XR(t={}){const e=t.domOptions?.render||Zh;t.document=t.document||(typeof window<"u"?document:void 0);const n=t.document?.head.querySelector('script[id="unhead:payload"]')?.innerHTML||!1;return FR({...t,plugins:[...t.plugins||[],{key:"client",hooks:{"entries:updated":e}}],init:[n?JSON.parse(n):!1,...t.init||[]]})}function ZR(t,e){let n=0;return()=>{const r=++n;e(()=>{n===r&&t()})}}function eS(t={}){const e=XR({domOptions:{render:ZR(()=>Zh(e),n=>setTimeout(n,0))},...t});return e.install=HR(e),e}const tS={disableDefaults:!0},nS=Ln({name:"nuxt:head",enforce:"pre",setup(t){const e=eS(tS);t.vueApp.use(e);{let n=!0;const r=async()=>{n=!1,await Zh(e)};e.hooks.hook("dom:beforeRender",s=>{s.shouldRender=!n}),t.hooks.hook("page:start",()=>{n=!0}),t.hooks.hook("page:finish",()=>{t.isHydrating||r()}),t.hooks.hook("app:error",r),t.hooks.hook("app:suspense:resolve",r)}}});const qs=typeof document<"u";function By(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function rS(t){return t.__esModule||t[Symbol.toStringTag]==="Module"||t.default&&By(t.default)}const De=Object.assign;function nu(t,e){const n={};for(const r in e){const s=e[r];n[r]=vn(s)?s.map(t):t(s)}return n}const yo=()=>{},vn=Array.isArray;function $p(t,e){const n={};for(const r in t)n[r]=r in e?e[r]:t[r];return n}const Hy=/#/g,sS=/&/g,iS=/\//g,oS=/=/g,aS=/\?/g,jy=/\+/g,cS=/%5B/g,lS=/%5D/g,$y=/%5E/g,uS=/%60/g,qy=/%7B/g,hS=/%7C/g,Wy=/%7D/g,fS=/%20/g;function ef(t){return t==null?"":encodeURI(""+t).replace(hS,"|").replace(cS,"[").replace(lS,"]")}function dS(t){return ef(t).replace(qy,"{").replace(Wy,"}").replace($y,"^")}function qu(t){return ef(t).replace(jy,"%2B").replace(fS,"+").replace(Hy,"%23").replace(sS,"%26").replace(uS,"`").replace(qy,"{").replace(Wy,"}").replace($y,"^")}function pS(t){return qu(t).replace(oS,"%3D")}function mS(t){return ef(t).replace(Hy,"%23").replace(aS,"%3F")}function gS(t){return mS(t).replace(iS,"%2F")}function Do(t){if(t==null)return null;try{return decodeURIComponent(""+t)}catch{}return""+t}const _S=/\/$/,yS=t=>t.replace(_S,"");function ru(t,e,n="/"){let r,s={},i="",o="";const a=e.indexOf("#");let l=e.indexOf("?");return l=a>=0&&l>a?-1:l,l>=0&&(r=e.slice(0,l),i=e.slice(l,a>0?a:e.length),s=t(i.slice(1))),a>=0&&(r=r||e.slice(0,a),o=e.slice(a,e.length)),r=TS(r??e,n),{fullPath:r+i+o,path:r,query:s,hash:Do(o)}}function vS(t,e){const n=e.query?t(e.query):"";return e.path+(n&&"?")+n+(e.hash||"")}function qp(t,e){return!e||!t.toLowerCase().startsWith(e.toLowerCase())?t:t.slice(e.length)||"/"}function ES(t,e,n){const r=e.matched.length-1,s=n.matched.length-1;return r>-1&&r===s&&_i(e.matched[r],n.matched[s])&&Gy(e.params,n.params)&&t(e.query)===t(n.query)&&e.hash===n.hash}function _i(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function Gy(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(var n in t)if(!wS(t[n],e[n]))return!1;return!0}function wS(t,e){return vn(t)?Wp(t,e):vn(e)?Wp(e,t):t?.valueOf()===e?.valueOf()}function Wp(t,e){return vn(e)?t.length===e.length&&t.every((n,r)=>n===e[r]):t.length===1&&t[0]===e}function TS(t,e){if(t.startsWith("/"))return t;if(!t)return e;const n=e.split("/"),r=t.split("/"),s=r[r.length-1];(s===".."||s===".")&&r.push("");let i=n.length-1,o,a;for(o=0;o<r.length;o++)if(a=r[o],a!==".")if(a==="..")i>1&&i--;else break;return n.slice(0,i).join("/")+"/"+r.slice(o).join("/")}const tn={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};let Wu=(function(t){return t.pop="pop",t.push="push",t})({}),su=(function(t){return t.back="back",t.forward="forward",t.unknown="",t})({});function IS(t){if(!t)if(qs){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),yS(t)}const AS=/^[^#]+#/;function bS(t,e){return t.replace(AS,"#")+e}function RS(t,e){const n=document.documentElement.getBoundingClientRect(),r=t.getBoundingClientRect();return{behavior:e.behavior,left:r.left-n.left-(e.left||0),top:r.top-n.top-(e.top||0)}}const Zc=()=>({left:window.scrollX,top:window.scrollY});function SS(t){let e;if("el"in t){const n=t.el,r=typeof n=="string"&&n.startsWith("#"),s=typeof n=="string"?r?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!s)return;e=RS(s,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.scrollX,e.top!=null?e.top:window.scrollY)}function Gp(t,e){return(history.state?history.state.position-e:-1)+t}const Gu=new Map;function CS(t,e){Gu.set(t,e)}function PS(t){const e=Gu.get(t);return Gu.delete(t),e}function kS(t){return typeof t=="string"||t&&typeof t=="object"}function Ky(t){return typeof t=="string"||typeof t=="symbol"}let Qe=(function(t){return t[t.MATCHER_NOT_FOUND=1]="MATCHER_NOT_FOUND",t[t.NAVIGATION_GUARD_REDIRECT=2]="NAVIGATION_GUARD_REDIRECT",t[t.NAVIGATION_ABORTED=4]="NAVIGATION_ABORTED",t[t.NAVIGATION_CANCELLED=8]="NAVIGATION_CANCELLED",t[t.NAVIGATION_DUPLICATED=16]="NAVIGATION_DUPLICATED",t})({});const zy=Symbol("");Qe.MATCHER_NOT_FOUND+"",Qe.NAVIGATION_GUARD_REDIRECT+"",Qe.NAVIGATION_ABORTED+"",Qe.NAVIGATION_CANCELLED+"",Qe.NAVIGATION_DUPLICATED+"";function yi(t,e){return De(new Error,{type:t,[zy]:!0},e)}function qn(t,e){return t instanceof Error&&zy in t&&(e==null||!!(t.type&e))}const NS=["params","query","hash"];function OS(t){if(typeof t=="string")return t;if(t.path!=null)return t.path;const e={};for(const n of NS)n in t&&(e[n]=t[n]);return JSON.stringify(e,null,2)}function DS(t){const e={};if(t===""||t==="?")return e;const n=(t[0]==="?"?t.slice(1):t).split("&");for(let r=0;r<n.length;++r){const s=n[r].replace(jy," "),i=s.indexOf("="),o=Do(i<0?s:s.slice(0,i)),a=i<0?null:Do(s.slice(i+1));if(o in e){let l=e[o];vn(l)||(l=e[o]=[l]),l.push(a)}else e[o]=a}return e}function Kp(t){let e="";for(let n in t){const r=t[n];if(n=pS(n),r==null){r!==void 0&&(e+=(e.length?"&":"")+n);continue}(vn(r)?r.map(s=>s&&qu(s)):[r&&qu(r)]).forEach(s=>{s!==void 0&&(e+=(e.length?"&":"")+n,s!=null&&(e+="="+s))})}return e}function VS(t){const e={};for(const n in t){const r=t[n];r!==void 0&&(e[n]=vn(r)?r.map(s=>s==null?null:""+s):r==null?r:""+r)}return e}const xS=Symbol(""),zp=Symbol(""),tf=Symbol(""),nf=Symbol(""),Ku=Symbol("");function no(){let t=[];function e(r){return t.push(r),()=>{const s=t.indexOf(r);s>-1&&t.splice(s,1)}}function n(){t=[]}return{add:e,list:()=>t.slice(),reset:n}}function br(t,e,n,r,s,i=o=>o()){const o=r&&(r.enterCallbacks[s]=r.enterCallbacks[s]||[]);return()=>new Promise((a,l)=>{const u=p=>{p===!1?l(yi(Qe.NAVIGATION_ABORTED,{from:n,to:e})):p instanceof Error?l(p):kS(p)?l(yi(Qe.NAVIGATION_GUARD_REDIRECT,{from:e,to:p})):(o&&r.enterCallbacks[s]===o&&typeof p=="function"&&o.push(p),a())},h=i(()=>t.call(r&&r.instances[s],e,n,u));let d=Promise.resolve(h);t.length<3&&(d=d.then(u)),d.catch(p=>l(p))})}function iu(t,e,n,r,s=i=>i()){const i=[];for(const o of t)for(const a in o.components){let l=o.components[a];if(!(e!=="beforeRouteEnter"&&!o.instances[a]))if(By(l)){const u=(l.__vccOpts||l)[e];u&&i.push(br(u,n,r,o,a,s))}else{let u=l();i.push(()=>u.then(h=>{if(!h)throw new Error(`Couldn't resolve component "${a}" at "${o.path}"`);const d=rS(h)?h.default:h;o.mods[a]=h,o.components[a]=d;const p=(d.__vccOpts||d)[e];return p&&br(p,n,r,o,a,s)()}))}}return i}function MS(t,e){const n=[],r=[],s=[],i=Math.max(e.matched.length,t.matched.length);for(let o=0;o<i;o++){const a=e.matched[o];a&&(t.matched.find(u=>_i(u,a))?r.push(a):n.push(a));const l=t.matched[o];l&&(e.matched.find(u=>_i(u,l))||s.push(l))}return[n,r,s]}let LS=()=>location.protocol+"//"+location.host;function Qy(t,e){const{pathname:n,search:r,hash:s}=e,i=t.indexOf("#");if(i>-1){let o=s.includes(t.slice(i))?t.slice(i).length:1,a=s.slice(o);return a[0]!=="/"&&(a="/"+a),qp(a,"")}return qp(n,t)+r+s}function US(t,e,n,r){let s=[],i=[],o=null;const a=({state:p})=>{const g=Qy(t,location),_=n.value,y=e.value;let N=0;if(p){if(n.value=g,e.value=p,o&&o===_){o=null;return}N=y?p.position-y.position:0}else r(g);s.forEach(D=>{D(n.value,_,{delta:N,type:Wu.pop,direction:N?N>0?su.forward:su.back:su.unknown})})};function l(){o=n.value}function u(p){s.push(p);const g=()=>{const _=s.indexOf(p);_>-1&&s.splice(_,1)};return i.push(g),g}function h(){if(document.visibilityState==="hidden"){const{history:p}=window;if(!p.state)return;p.replaceState(De({},p.state,{scroll:Zc()}),"")}}function d(){for(const p of i)p();i=[],window.removeEventListener("popstate",a),window.removeEventListener("pagehide",h),document.removeEventListener("visibilitychange",h)}return window.addEventListener("popstate",a),window.addEventListener("pagehide",h),document.addEventListener("visibilitychange",h),{pauseListeners:l,listen:u,destroy:d}}function Qp(t,e,n,r=!1,s=!1){return{back:t,current:e,forward:n,replaced:r,position:window.history.length,scroll:s?Zc():null}}function FS(t){const{history:e,location:n}=window,r={value:Qy(t,n)},s={value:e.state};s.value||i(r.value,{back:null,current:r.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function i(l,u,h){const d=t.indexOf("#"),p=d>-1?(n.host&&document.querySelector("base")?t:t.slice(d))+l:LS()+t+l;try{e[h?"replaceState":"pushState"](u,"",p),s.value=u}catch(g){console.error(g),n[h?"replace":"assign"](p)}}function o(l,u){i(l,De({},e.state,Qp(s.value.back,l,s.value.forward,!0),u,{position:s.value.position}),!0),r.value=l}function a(l,u){const h=De({},s.value,e.state,{forward:l,scroll:Zc()});i(h.current,h,!0),i(l,De({},Qp(r.value,l,null),{position:h.position+1},u),!1),r.value=l}return{location:r,state:s,push:a,replace:o}}function BS(t){t=IS(t);const e=FS(t),n=US(t,e.state,e.location,e.replace);function r(i,o=!0){o||n.pauseListeners(),history.go(i)}const s=De({location:"",base:t,go:r,createHref:bS.bind(null,t)},e,n);return Object.defineProperty(s,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(s,"state",{enumerable:!0,get:()=>e.state.value}),s}let fs=(function(t){return t[t.Static=0]="Static",t[t.Param=1]="Param",t[t.Group=2]="Group",t})({});var ft=(function(t){return t[t.Static=0]="Static",t[t.Param=1]="Param",t[t.ParamRegExp=2]="ParamRegExp",t[t.ParamRegExpEnd=3]="ParamRegExpEnd",t[t.EscapeNext=4]="EscapeNext",t})(ft||{});const HS={type:fs.Static,value:""},jS=/[a-zA-Z0-9_]/;function $S(t){if(!t)return[[]];if(t==="/")return[[HS]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(g){throw new Error(`ERR (${n})/"${u}": ${g}`)}let n=ft.Static,r=n;const s=[];let i;function o(){i&&s.push(i),i=[]}let a=0,l,u="",h="";function d(){u&&(n===ft.Static?i.push({type:fs.Static,value:u}):n===ft.Param||n===ft.ParamRegExp||n===ft.ParamRegExpEnd?(i.length>1&&(l==="*"||l==="+")&&e(`A repeatable param (${u}) must be alone in its segment. eg: '/:ids+.`),i.push({type:fs.Param,value:u,regexp:h,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):e("Invalid state to consume buffer"),u="")}function p(){u+=l}for(;a<t.length;){if(l=t[a++],l==="\\"&&n!==ft.ParamRegExp){r=n,n=ft.EscapeNext;continue}switch(n){case ft.Static:l==="/"?(u&&d(),o()):l===":"?(d(),n=ft.Param):p();break;case ft.EscapeNext:p(),n=r;break;case ft.Param:l==="("?n=ft.ParamRegExp:jS.test(l)?p():(d(),n=ft.Static,l!=="*"&&l!=="?"&&l!=="+"&&a--);break;case ft.ParamRegExp:l===")"?h[h.length-1]=="\\"?h=h.slice(0,-1)+l:n=ft.ParamRegExpEnd:h+=l;break;case ft.ParamRegExpEnd:d(),n=ft.Static,l!=="*"&&l!=="?"&&l!=="+"&&a--,h="";break;default:e("Unknown state");break}}return n===ft.ParamRegExp&&e(`Unfinished custom RegExp for param "${u}"`),d(),o(),s}const Yp="[^/]+?",qS={sensitive:!1,strict:!1,start:!0,end:!0};var Lt=(function(t){return t[t._multiplier=10]="_multiplier",t[t.Root=90]="Root",t[t.Segment=40]="Segment",t[t.SubSegment=30]="SubSegment",t[t.Static=40]="Static",t[t.Dynamic=20]="Dynamic",t[t.BonusCustomRegExp=10]="BonusCustomRegExp",t[t.BonusWildcard=-50]="BonusWildcard",t[t.BonusRepeatable=-20]="BonusRepeatable",t[t.BonusOptional=-8]="BonusOptional",t[t.BonusStrict=.7000000000000001]="BonusStrict",t[t.BonusCaseSensitive=.25]="BonusCaseSensitive",t})(Lt||{});const WS=/[.+*?^${}()[\]/\\]/g;function GS(t,e){const n=De({},qS,e),r=[];let s=n.start?"^":"";const i=[];for(const u of t){const h=u.length?[]:[Lt.Root];n.strict&&!u.length&&(s+="/");for(let d=0;d<u.length;d++){const p=u[d];let g=Lt.Segment+(n.sensitive?Lt.BonusCaseSensitive:0);if(p.type===fs.Static)d||(s+="/"),s+=p.value.replace(WS,"\\$&"),g+=Lt.Static;else if(p.type===fs.Param){const{value:_,repeatable:y,optional:N,regexp:D}=p;i.push({name:_,repeatable:y,optional:N});const O=D||Yp;if(O!==Yp){g+=Lt.BonusCustomRegExp;try{`${O}`}catch(k){throw new Error(`Invalid custom RegExp for param "${_}" (${O}): `+k.message)}}let E=y?`((?:${O})(?:/(?:${O}))*)`:`(${O})`;d||(E=N&&u.length<2?`(?:/${E})`:"/"+E),N&&(E+="?"),s+=E,g+=Lt.Dynamic,N&&(g+=Lt.BonusOptional),y&&(g+=Lt.BonusRepeatable),O===".*"&&(g+=Lt.BonusWildcard)}h.push(g)}r.push(h)}if(n.strict&&n.end){const u=r.length-1;r[u][r[u].length-1]+=Lt.BonusStrict}n.strict||(s+="/?"),n.end?s+="$":n.strict&&!s.endsWith("/")&&(s+="(?:/|$)");const o=new RegExp(s,n.sensitive?"":"i");function a(u){const h=u.match(o),d={};if(!h)return null;for(let p=1;p<h.length;p++){const g=h[p]||"",_=i[p-1];d[_.name]=g&&_.repeatable?g.split("/"):g}return d}function l(u){let h="",d=!1;for(const p of t){(!d||!h.endsWith("/"))&&(h+="/"),d=!1;for(const g of p)if(g.type===fs.Static)h+=g.value;else if(g.type===fs.Param){const{value:_,repeatable:y,optional:N}=g,D=_ in u?u[_]:"";if(vn(D)&&!y)throw new Error(`Provided param "${_}" is an array but it is not repeatable (* or + modifiers)`);const O=vn(D)?D.join("/"):D;if(!O)if(N)p.length<2&&(h.endsWith("/")?h=h.slice(0,-1):d=!0);else throw new Error(`Missing required param "${_}"`);h+=O}}return h||"/"}return{re:o,score:r,keys:i,parse:a,stringify:l}}function KS(t,e){let n=0;for(;n<t.length&&n<e.length;){const r=e[n]-t[n];if(r)return r;n++}return t.length<e.length?t.length===1&&t[0]===Lt.Static+Lt.Segment?-1:1:t.length>e.length?e.length===1&&e[0]===Lt.Static+Lt.Segment?1:-1:0}function Yy(t,e){let n=0;const r=t.score,s=e.score;for(;n<r.length&&n<s.length;){const i=KS(r[n],s[n]);if(i)return i;n++}if(Math.abs(s.length-r.length)===1){if(Jp(r))return 1;if(Jp(s))return-1}return s.length-r.length}function Jp(t){const e=t[t.length-1];return t.length>0&&e[e.length-1]<0}const zS={strict:!1,end:!0,sensitive:!1};function QS(t,e,n){const r=GS($S(t.path),n),s=De(r,{record:t,parent:e,children:[],alias:[]});return e&&!s.record.aliasOf==!e.record.aliasOf&&e.children.push(s),s}function YS(t,e){const n=[],r=new Map;e=$p(zS,e);function s(d){return r.get(d)}function i(d,p,g){const _=!g,y=Zp(d);y.aliasOf=g&&g.record;const N=$p(e,d),D=[y];if("alias"in d){const k=typeof d.alias=="string"?[d.alias]:d.alias;for(const V of k)D.push(Zp(De({},y,{components:g?g.record.components:y.components,path:V,aliasOf:g?g.record:y})))}let O,E;for(const k of D){const{path:V}=k;if(p&&V[0]!=="/"){const U=p.record.path,b=U[U.length-1]==="/"?"":"/";k.path=p.record.path+(V&&b+V)}if(O=QS(k,p,N),g?g.alias.push(O):(E=E||O,E!==O&&E.alias.push(O),_&&d.name&&!em(O)&&o(d.name)),Jy(O)&&l(O),y.children){const U=y.children;for(let b=0;b<U.length;b++)i(U[b],O,g&&g.children[b])}g=g||O}return E?()=>{o(E)}:yo}function o(d){if(Ky(d)){const p=r.get(d);p&&(r.delete(d),n.splice(n.indexOf(p),1),p.children.forEach(o),p.alias.forEach(o))}else{const p=n.indexOf(d);p>-1&&(n.splice(p,1),d.record.name&&r.delete(d.record.name),d.children.forEach(o),d.alias.forEach(o))}}function a(){return n}function l(d){const p=ZS(d,n);n.splice(p,0,d),d.record.name&&!em(d)&&r.set(d.record.name,d)}function u(d,p){let g,_={},y,N;if("name"in d&&d.name){if(g=r.get(d.name),!g)throw yi(Qe.MATCHER_NOT_FOUND,{location:d});N=g.record.name,_=De(Xp(p.params,g.keys.filter(E=>!E.optional).concat(g.parent?g.parent.keys.filter(E=>E.optional):[]).map(E=>E.name)),d.params&&Xp(d.params,g.keys.map(E=>E.name))),y=g.stringify(_)}else if(d.path!=null)y=d.path,g=n.find(E=>E.re.test(y)),g&&(_=g.parse(y),N=g.record.name);else{if(g=p.name?r.get(p.name):n.find(E=>E.re.test(p.path)),!g)throw yi(Qe.MATCHER_NOT_FOUND,{location:d,currentLocation:p});N=g.record.name,_=De({},p.params,d.params),y=g.stringify(_)}const D=[];let O=g;for(;O;)D.unshift(O.record),O=O.parent;return{name:N,path:y,params:_,matched:D,meta:XS(D)}}t.forEach(d=>i(d));function h(){n.length=0,r.clear()}return{addRoute:i,resolve:u,removeRoute:o,clearRoutes:h,getRoutes:a,getRecordMatcher:s}}function Xp(t,e){const n={};for(const r of e)r in t&&(n[r]=t[r]);return n}function Zp(t){const e={path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:t.aliasOf,beforeEnter:t.beforeEnter,props:JS(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}};return Object.defineProperty(e,"mods",{value:{}}),e}function JS(t){const e={},n=t.props||!1;if("component"in t)e.default=n;else for(const r in t.components)e[r]=typeof n=="object"?n[r]:n;return e}function em(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function XS(t){return t.reduce((e,n)=>De(e,n.meta),{})}function ZS(t,e){let n=0,r=e.length;for(;n!==r;){const i=n+r>>1;Yy(t,e[i])<0?r=i:n=i+1}const s=e0(t);return s&&(r=e.lastIndexOf(s,r-1)),r}function e0(t){let e=t;for(;e=e.parent;)if(Jy(e)&&Yy(t,e)===0)return e}function Jy({record:t}){return!!(t.name||t.components&&Object.keys(t.components).length||t.redirect)}function tm(t){const e=Rt(tf),n=Rt(nf),r=dt(()=>{const l=He(t.to);return e.resolve(l)}),s=dt(()=>{const{matched:l}=r.value,{length:u}=l,h=l[u-1],d=n.matched;if(!h||!d.length)return-1;const p=d.findIndex(_i.bind(null,h));if(p>-1)return p;const g=nm(l[u-2]);return u>1&&nm(h)===g&&d[d.length-1].path!==g?d.findIndex(_i.bind(null,l[u-2])):p}),i=dt(()=>s.value>-1&&i0(n.params,r.value.params)),o=dt(()=>s.value>-1&&s.value===n.matched.length-1&&Gy(n.params,r.value.params));function a(l={}){if(s0(l)){const u=e[He(t.replace)?"replace":"push"](He(t.to)).catch(yo);return t.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>u),u}return Promise.resolve()}return{route:r,href:dt(()=>r.value.href),isActive:i,isExactActive:o,navigate:a}}function t0(t){return t.length===1?t[0]:t}const n0=ct({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:tm,setup(t,{slots:e}){const n=Kr(tm(t)),{options:r}=Rt(tf),s=dt(()=>({[rm(t.activeClass,r.linkActiveClass,"router-link-active")]:n.isActive,[rm(t.exactActiveClass,r.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const i=e.default&&t0(e.default(n));return t.custom?i:Je("a",{"aria-current":n.isExactActive?t.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:s.value},i)}}}),r0=n0;function s0(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function i0(t,e){for(const n in e){const r=e[n],s=t[n];if(typeof r=="string"){if(r!==s)return!1}else if(!vn(s)||s.length!==r.length||r.some((i,o)=>i.valueOf()!==s[o].valueOf()))return!1}return!0}function nm(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const rm=(t,e,n)=>t??e??n,o0=ct({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:e,slots:n}){const r=Rt(Ku),s=dt(()=>t.route||r.value),i=Rt(zp,0),o=dt(()=>{let u=He(i);const{matched:h}=s.value;let d;for(;(d=h[u])&&!d.components;)u++;return u}),a=dt(()=>s.value.matched[o.value]);Jn(zp,dt(()=>o.value+1)),Jn(xS,a),Jn(Ku,s);const l=ue();return xr(()=>[l.value,a.value,t.name],([u,h,d],[p,g,_])=>{h&&(h.instances[d]=u,g&&g!==h&&u&&u===p&&(h.leaveGuards.size||(h.leaveGuards=g.leaveGuards),h.updateGuards.size||(h.updateGuards=g.updateGuards))),u&&h&&(!g||!_i(h,g)||!p)&&(h.enterCallbacks[d]||[]).forEach(y=>y(u))},{flush:"post"}),()=>{const u=s.value,h=t.name,d=a.value,p=d&&d.components[h];if(!p)return sm(n.default,{Component:p,route:u});const g=d.props[h],_=g?g===!0?u.params:typeof g=="function"?g(u):g:null,N=Je(p,De({},_,e,{onVnodeUnmounted:D=>{D.component.isUnmounted&&(d.instances[h]=null)},ref:l}));return sm(n.default,{Component:N,route:u})||N}}});function sm(t,e){if(!t)return null;const n=t(e);return n.length===1?n[0]:n}const Xy=o0;function a0(t){const e=YS(t.routes,t),n=t.parseQuery||DS,r=t.stringifyQuery||Kp,s=t.history,i=no(),o=no(),a=no(),l=ir(tn);let u=tn;qs&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const h=nu.bind(null,H=>""+H),d=nu.bind(null,gS),p=nu.bind(null,Do);function g(H,te){let J,ie;return Ky(H)?(J=e.getRecordMatcher(H),ie=te):ie=H,e.addRoute(ie,J)}function _(H){const te=e.getRecordMatcher(H);te&&e.removeRoute(te)}function y(){return e.getRoutes().map(H=>H.record)}function N(H){return!!e.getRecordMatcher(H)}function D(H,te){if(te=De({},te||l.value),typeof H=="string"){const P=ru(n,H,te.path),M=e.resolve({path:P.path},te),$=s.createHref(P.fullPath);return De(P,M,{params:p(M.params),hash:Do(P.hash),redirectedFrom:void 0,href:$})}let J;if(H.path!=null)J=De({},H,{path:ru(n,H.path,te.path).path});else{const P=De({},H.params);for(const M in P)P[M]==null&&delete P[M];J=De({},H,{params:d(P)}),te.params=d(te.params)}const ie=e.resolve(J,te),we=H.hash||"";ie.params=h(p(ie.params));const Le=vS(r,De({},H,{hash:dS(we),path:ie.path})),A=s.createHref(Le);return De({fullPath:Le,hash:we,query:r===Kp?VS(H.query):H.query||{}},ie,{redirectedFrom:void 0,href:A})}function O(H){return typeof H=="string"?ru(n,H,l.value.path):De({},H)}function E(H,te){if(u!==H)return yi(Qe.NAVIGATION_CANCELLED,{from:te,to:H})}function k(H){return b(H)}function V(H){return k(De(O(H),{replace:!0}))}function U(H,te){const J=H.matched[H.matched.length-1];if(J&&J.redirect){const{redirect:ie}=J;let we=typeof ie=="function"?ie(H,te):ie;return typeof we=="string"&&(we=we.includes("?")||we.includes("#")?we=O(we):{path:we},we.params={}),De({query:H.query,hash:H.hash,params:we.path!=null?{}:H.params},we)}}function b(H,te){const J=u=D(H),ie=l.value,we=H.state,Le=H.force,A=H.replace===!0,P=U(J,ie);if(P)return b(De(O(P),{state:typeof P=="object"?De({},we,P.state):we,force:Le,replace:A}),te||J);const M=J;M.redirectedFrom=te;let $;return!Le&&ES(r,ie,J)&&($=yi(Qe.NAVIGATION_DUPLICATED,{to:M,from:ie}),qt(ie,ie,!0,!1)),($?Promise.resolve($):R(M,ie)).catch(F=>qn(F)?qn(F,Qe.NAVIGATION_GUARD_REDIRECT)?F:In(F):ee(F,M,ie)).then(F=>{if(F){if(qn(F,Qe.NAVIGATION_GUARD_REDIRECT))return b(De({replace:A},O(F.to),{state:typeof F.to=="object"?De({},we,F.to.state):we,force:Le}),te||M)}else F=S(M,ie,!0,A,we);return C(M,ie,F),F})}function T(H,te){const J=E(H,te);return J?Promise.reject(J):Promise.resolve()}function w(H){const te=cn.values().next().value;return te&&typeof te.runWithContext=="function"?te.runWithContext(H):H()}function R(H,te){let J;const[ie,we,Le]=MS(H,te);J=iu(ie.reverse(),"beforeRouteLeave",H,te);for(const P of ie)P.leaveGuards.forEach(M=>{J.push(br(M,H,te))});const A=T.bind(null,H,te);return J.push(A),St(J).then(()=>{J=[];for(const P of i.list())J.push(br(P,H,te));return J.push(A),St(J)}).then(()=>{J=iu(we,"beforeRouteUpdate",H,te);for(const P of we)P.updateGuards.forEach(M=>{J.push(br(M,H,te))});return J.push(A),St(J)}).then(()=>{J=[];for(const P of Le)if(P.beforeEnter)if(vn(P.beforeEnter))for(const M of P.beforeEnter)J.push(br(M,H,te));else J.push(br(P.beforeEnter,H,te));return J.push(A),St(J)}).then(()=>(H.matched.forEach(P=>P.enterCallbacks={}),J=iu(Le,"beforeRouteEnter",H,te,w),J.push(A),St(J))).then(()=>{J=[];for(const P of o.list())J.push(br(P,H,te));return J.push(A),St(J)}).catch(P=>qn(P,Qe.NAVIGATION_CANCELLED)?P:Promise.reject(P))}function C(H,te,J){a.list().forEach(ie=>w(()=>ie(H,te,J)))}function S(H,te,J,ie,we){const Le=E(H,te);if(Le)return Le;const A=te===tn,P=qs?history.state:{};J&&(ie||A?s.replace(H.fullPath,De({scroll:A&&P&&P.scroll},we)):s.push(H.fullPath,we)),l.value=H,qt(H,te,J,A),In()}let I;function le(){I||(I=s.listen((H,te,J)=>{if(!ln.listening)return;const ie=D(H),we=U(ie,ln.currentRoute.value);if(we){b(De(we,{replace:!0,force:!0}),ie).catch(yo);return}u=ie;const Le=l.value;qs&&CS(Gp(Le.fullPath,J.delta),Zc()),R(ie,Le).catch(A=>qn(A,Qe.NAVIGATION_ABORTED|Qe.NAVIGATION_CANCELLED)?A:qn(A,Qe.NAVIGATION_GUARD_REDIRECT)?(b(De(O(A.to),{force:!0}),ie).then(P=>{qn(P,Qe.NAVIGATION_ABORTED|Qe.NAVIGATION_DUPLICATED)&&!J.delta&&J.type===Wu.pop&&s.go(-1,!1)}).catch(yo),Promise.reject()):(J.delta&&s.go(-J.delta,!1),ee(A,ie,Le))).then(A=>{A=A||S(ie,Le,!1),A&&(J.delta&&!qn(A,Qe.NAVIGATION_CANCELLED)?s.go(-J.delta,!1):J.type===Wu.pop&&qn(A,Qe.NAVIGATION_ABORTED|Qe.NAVIGATION_DUPLICATED)&&s.go(-1,!1)),C(ie,Le,A)}).catch(yo)}))}let Ie=no(),re=no(),pe;function ee(H,te,J){In(H);const ie=re.list();return ie.length?ie.forEach(we=>we(H,te,J)):console.error(H),Promise.reject(H)}function Ne(){return pe&&l.value!==tn?Promise.resolve():new Promise((H,te)=>{Ie.add([H,te])})}function In(H){return pe||(pe=!H,le(),Ie.list().forEach(([te,J])=>H?J(H):te()),Ie.reset()),H}function qt(H,te,J,ie){const{scrollBehavior:we}=t;if(!qs||!we)return Promise.resolve();const Le=!J&&PS(Gp(H.fullPath,0))||(ie||!J)&&history.state&&history.state.scroll||null;return Es().then(()=>we(H,te,Le)).then(A=>A&&SS(A)).catch(A=>ee(A,H,te))}const wt=H=>s.go(H);let Bn;const cn=new Set,ln={currentRoute:l,listening:!0,addRoute:g,removeRoute:_,clearRoutes:e.clearRoutes,hasRoute:N,getRoutes:y,resolve:D,options:t,push:k,replace:V,go:wt,back:()=>wt(-1),forward:()=>wt(1),beforeEach:i.add,beforeResolve:o.add,afterEach:a.add,onError:re.add,isReady:Ne,install(H){H.component("RouterLink",r0),H.component("RouterView",Xy),H.config.globalProperties.$router=ln,Object.defineProperty(H.config.globalProperties,"$route",{enumerable:!0,get:()=>He(l)}),qs&&!Bn&&l.value===tn&&(Bn=!0,k(s.location).catch(ie=>{}));const te={};for(const ie in tn)Object.defineProperty(te,ie,{get:()=>l.value[ie],enumerable:!0});H.provide(tf,ln),H.provide(nf,Pn(te)),H.provide(Ku,l);const J=H.unmount;cn.add(H),H.unmount=function(){cn.delete(H),cn.size<1&&(u=tn,I&&I(),I=null,l.value=tn,Bn=!1,pe=!1),J()}}};function St(H){return H.reduce((te,J)=>te.then(()=>w(J)),Promise.resolve())}return ln}function Zy(t){return Rt(nf)}const c0=/(:\w+)\([^)]+\)/g,l0=/(:\w+)[?+*]/g,u0=/:\w+/g,h0=(t,e)=>e.path.replace(c0,"$1").replace(l0,"$1").replace(u0,n=>t.params[n.slice(1)]?.toString()||""),zu=(t,e)=>{const n=t.route.matched.find(s=>s.components?.default===t.Component.type),r=e??n?.meta.key??(n&&h0(t.route,n));return typeof r=="function"?r(t.route):r},f0=(t,e)=>({default:()=>t?Je(uI,t===!0?{}:t,e):e});function rf(t){return Array.isArray(t)?t:[t]}const d0="modulepreload",p0=function(t,e){return new URL(t,e).href},im={},Tt=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){let u=function(h){return Promise.all(h.map(d=>Promise.resolve(d).then(p=>({status:"fulfilled",value:p}),p=>({status:"rejected",reason:p}))))};const o=document.getElementsByTagName("link"),a=document.querySelector("meta[property=csp-nonce]"),l=a?.nonce||a?.getAttribute("nonce");s=u(n.map(h=>{if(h=p0(h,r),h in im)return;im[h]=!0;const d=h.endsWith(".css"),p=d?'[rel="stylesheet"]':"";if(r)for(let _=o.length-1;_>=0;_--){const y=o[_];if(y.href===h&&(!d||y.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${h}"]${p}`))return;const g=document.createElement("link");if(g.rel=d?"stylesheet":d0,d||(g.as="script"),g.crossOrigin="",g.href=h,l&&g.setAttribute("nonce",l),document.head.appendChild(g),d)return new Promise((_,y)=>{g.addEventListener("load",_),g.addEventListener("error",()=>y(new Error(`Unable to preload CSS for ${h}`)))})}))}function i(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return s.then(o=>{for(const a of o||[])a.status==="rejected"&&i(a.reason);return e().catch(i)})},m0={layout:!1},g0={layout:!1},_0={layout:!1},y0={layout:"dashboard"},v0={layout:"dashboard"},E0={layout:"coach"},w0={layout:"dashboard"},T0={layout:"coach"},I0={layout:"dashboard"},A0={layout:"dashboard"},ou=[{name:"index",path:"/",meta:m0||{},component:()=>Tt(()=>import("./B0bCObdf.js"),__vite__mapDeps([0,1]),import.meta.url)},{name:"profilo",path:"/profilo",meta:g0||{},component:()=>Tt(()=>import("./CPc3y15T.js"),[],import.meta.url)},{name:"dev-upload",path:"/dev-upload",meta:_0||{},component:()=>Tt(()=>import("./Bj5YO4tF.js"),__vite__mapDeps([2,3,4]),import.meta.url)},{name:"panoramica",path:"/panoramica",meta:y0||{},component:()=>Tt(()=>import("./CdD99xbp.js"),__vite__mapDeps([5,6,7,8,9]),import.meta.url)},{name:"piste-id",path:"/piste/:id()",meta:v0||{},component:()=>Tt(()=>import("./XcQ_BQcL.js"),__vite__mapDeps([10,11,12,7,8,13,14,15]),import.meta.url)},{name:"piloti-id",path:"/piloti/:id()",meta:{...E0||{},middleware:["coach"]},component:()=>Tt(()=>import("./DXdPov2p.js"),__vite__mapDeps([16,3,6,7,8,9,17,11,12,18,19,14,20,21]),import.meta.url)},{name:"piste",path:"/piste",meta:w0||{},component:()=>Tt(()=>import("./wdgzSUC7.js"),__vite__mapDeps([22,19,7,8,14,20]),import.meta.url)},{name:"piloti",path:"/piloti",meta:{...T0||{},middleware:["coach"]},component:()=>Tt(()=>import("./B-Ohj-iV.js"),__vite__mapDeps([23,3,24]),import.meta.url)},{name:"sessioni-id",path:"/sessioni/:id()",meta:I0||{},component:()=>Tt(()=>import("./BjMnHo9H.js"),__vite__mapDeps([25,7,8,13,26]),import.meta.url)},{name:"sessioni",path:"/sessioni",meta:A0||{},component:()=>Tt(()=>import("./DaMbOs1b.js"),__vite__mapDeps([27,17,11,12,7,8,18]),import.meta.url)}],ev=(t,e)=>({default:()=>t?Je(Qc,t===!0?{}:t,e):e.default?.()}),b0=/(:\w+)\([^)]+\)/g,R0=/(:\w+)[?+*]/g,S0=/:\w+/g;function om(t){const e=t?.meta.key??t.path.replace(b0,"$1").replace(R0,"$1").replace(S0,n=>t.params[n.slice(1)]?.toString()||"");return typeof e=="function"?e(t):e}function C0(t,e){return t===e||e===tn?!1:om(t)!==om(e)?!0:!t.matched.every((r,s)=>r.components&&r.components.default===e.matched[s]?.components?.default)}function P0(t,e=!1){if(t){if(t.nodeName==="#comment"&&t.nodeValue==="[")return tv(t,[],e);if(e){const n=t.cloneNode(!0);return n.querySelectorAll("[data-island-slot]").forEach(r=>{r.innerHTML=""}),[n.outerHTML]}return[t.outerHTML]}}function tv(t,e=[],n=!1){if(t&&t.nodeName){if(N0(t))return e;if(!k0(t)){const r=t.cloneNode(!0);n&&r.querySelectorAll?.("[data-island-slot]").forEach(s=>{s.innerHTML=""}),e.push(r.outerHTML)}tv(t.nextSibling,e,n)}return e}function au(t,e){const n=t?P0(t):[e];return n?sy(n.join(""),n.length):Je("div")}function k0(t){return t.nodeName==="#comment"&&t.nodeValue==="["}function N0(t){return t.nodeName==="#comment"&&t.nodeValue==="]"}const O0={scrollBehavior(t,e,n){const r=Ze(),s=Xt().options?.scrollBehaviorType??"auto";if(t.path.replace(/\/$/,"")===e.path.replace(/\/$/,""))return e.hash&&!t.hash?{left:0,top:0}:t.hash?{el:t.hash,top:nv(t.hash),behavior:s}:!1;if((typeof t.meta.scrollToTop=="function"?t.meta.scrollToTop(t,e):t.meta.scrollToTop)===!1)return!1;const o=r._runningTransition?"page:transition:finish":"page:loading:end";return new Promise(a=>{if(e===tn){a(am(t,e,n,s));return}r.hooks.hookOnce(o,()=>{requestAnimationFrame(()=>a(am(t,e,n,s)))})})}};function nv(t){try{const e=document.querySelector(t);if(e)return(Number.parseFloat(getComputedStyle(e).scrollMarginTop)||0)+(Number.parseFloat(getComputedStyle(document.documentElement).scrollPaddingTop)||0)}catch{}return 0}function am(t,e,n,r){if(n)return n;const s=C0(t,e);return t.hash?{el:t.hash,top:nv(t.hash),behavior:s?r:"instant"}:{left:0,top:0}}const D0={hashMode:!1,scrollBehaviorType:"auto"},Er={...D0,...O0},V0=async(t,e)=>{let n,r;if(!t.meta?.validate)return;const s=([n,r]=ii(()=>Promise.resolve(t.meta.validate(t))),n=await n,r(),n);if(s===!0)return;const i=_s({fatal:!0,statusCode:s&&s.statusCode||404,statusMessage:s&&s.statusMessage||`Page Not Found: ${t.fullPath}`,data:{path:t.fullPath}});return typeof window<"u"&&window.history.pushState({},"",e.fullPath),i},x0=async t=>{let e,n;const r=([e,n]=ii(()=>Xh({path:t.path})),e=await e,n(),e);if(r.redirect){const s=r.redirect.includes("#")?r.redirect:r.redirect+t.hash;return Os(s,{acceptRelative:!0})?(window.location.href=s,!1):s}},M0=[V0,x0],Qu={coach:()=>Tt(()=>import("./B8PqLb59.js"),[],import.meta.url)};function L0(t,e,n){const{pathname:r,search:s,hash:i}=e,o=t.indexOf("#");if(o>-1){const u=i.includes(t.slice(o))?t.slice(o).length:1;let h=i.slice(u);return h[0]!=="/"&&(h="/"+h),bp(h,"")}const a=bp(r,t),l=!n||fb(a,n)?a:n;return l+(l.includes("?")?"":s)+i}const U0=Ln({name:"nuxt:router",enforce:"pre",async setup(t){let e,n,r=Yc().app.baseURL;const s=Er.history?.(r)??BS(r),i=Er.routes?([e,n]=ii(()=>Er.routes(ou)),e=await e,n(),e??ou):ou;let o;const a=a0({...Er,scrollBehavior:(N,D,O)=>{if(D===tn){o=O;return}if(Er.scrollBehavior){if(a.options.scrollBehavior=Er.scrollBehavior,"scrollRestoration"in window.history){const E=a.beforeEach(()=>{E(),window.history.scrollRestoration="manual"})}return Er.scrollBehavior(N,tn,o||O)}},history:s,routes:i});"scrollRestoration"in window.history&&(window.history.scrollRestoration="auto"),t.vueApp.use(a);const l=ir(a.currentRoute.value);a.afterEach((N,D)=>{l.value=D}),Object.defineProperty(t.vueApp.config.globalProperties,"previousRoute",{get:()=>l.value});const u=L0(r,window.location,t.payload.path),h=ir(a.currentRoute.value),d=()=>{h.value=a.currentRoute.value};a.afterEach((N,D)=>{N.matched.at(-1)?.components?.default===D.matched.at(-1)?.components?.default&&d()});const p={sync:d};for(const N in h.value)Object.defineProperty(p,N,{get:()=>h.value[N],enumerable:!0});t._route=Pn(p),t._middleware||={global:[],named:{}};const g=Jc();a.afterEach(async(N,D,O)=>{delete t._processingMiddleware,!t.isHydrating&&g.value&&await t.runWithContext(cR),O&&await t.callHook("page:loading:end")});try{[e,n]=ii(()=>a.isReady()),await e,n()}catch(N){[e,n]=ii(()=>t.runWithContext(()=>ls(N))),await e,n()}const _=u!==a.currentRoute.value.fullPath?a.resolve(u):a.currentRoute.value;d();const y=t.payload.state._layout;return a.beforeEach(async(N,D)=>{await t.callHook("page:loading:start"),N.meta=Kr(N.meta),t.isHydrating&&y&&!xn(N.meta.layout)&&(N.meta.layout=y),t._processingMiddleware=!0;{const O=new Set([...M0,...t._middleware.global]);for(const E of N.matched){const k=E.meta.middleware;if(k)for(const V of rf(k))O.add(V)}{const E=await t.runWithContext(()=>Xh({path:N.path}));if(E.appMiddleware)for(const k in E.appMiddleware)E.appMiddleware[k]?O.add(k):O.delete(k)}for(const E of O){const k=typeof E=="string"?t._middleware.named[E]||await Qu[E]?.().then(V=>V.default||V):E;if(!k)throw new Error(`Unknown route middleware: '${E}'.`);try{const V=await t.runWithContext(()=>k(N,D));if(!t.payload.serverRendered&&t.isHydrating&&(V===!1||V instanceof Error)){const U=V||_s({statusCode:404,statusMessage:`Page Not Found: ${u}`});return await t.runWithContext(()=>ls(U)),!1}if(V===!0)continue;if(V===!1)return V;if(V)return Ny(V)&&V.fatal&&await t.runWithContext(()=>ls(V)),V}catch(V){const U=_s(V);return U.fatal&&await t.runWithContext(()=>ls(U)),U}}}}),a.onError(async()=>{delete t._processingMiddleware,await t.callHook("page:loading:end")}),a.afterEach(N=>{if(N.matched.length===0)return t.runWithContext(()=>ls(_s({statusCode:404,fatal:!1,statusMessage:`Page not found: ${N.fullPath}`,data:{path:N.fullPath}})))}),t.hooks.hookOnce("app:created",async()=>{try{"name"in _&&(_.name=void 0),await a.replace({..._,force:!0}),a.options.scrollBehavior=Er.scrollBehavior}catch(N){await t.runWithContext(()=>ls(N))}}),{provide:{router:a}}}}),cm=globalThis.requestIdleCallback||(t=>{const e=Date.now(),n={didTimeout:!1,timeRemaining:()=>Math.max(0,50-(Date.now()-e))};return setTimeout(()=>{t(n)},1)}),rM=globalThis.cancelIdleCallback||(t=>{clearTimeout(t)}),sf=t=>{const e=Ze();e.isHydrating?e.hooks.hookOnce("app:suspense:resolve",()=>{cm(()=>t())}):cm(()=>t())},F0=Ln({name:"nuxt:payload",setup(t){const e=new Set;Xt().beforeResolve(async(n,r)=>{if(n.path===r.path)return;const s=await jp(n.path);if(s){for(const i of e)delete t.static.data[i];for(const i in s.data)i in t.static.data||e.add(i),t.static.data[i]=s.data[i]}}),sf(()=>{t.hooks.hook("link:prefetch",async n=>{const{hostname:r}=new URL(n,window.location.href);r===window.location.hostname&&await jp(n).catch(()=>{console.warn("[nuxt] Error preloading payload for",n)})}),navigator.connection?.effectiveType!=="slow-2g"&&setTimeout(Xc,1e3)})}}),B0=Ln(()=>{const t=Xt();sf(()=>{t.beforeResolve(async()=>{await new Promise(e=>{setTimeout(e,100),requestAnimationFrame(()=>{setTimeout(e,0)})})})})}),H0=Ln(t=>{let e;async function n(){let r;try{r=await Xc()}catch(s){const i=s;if(!("status"in i&&(i.status===404||i.status===403)))throw i}e&&clearTimeout(e),e=setTimeout(n,Op);try{const s=await $fetch(Yh("builds/latest.json")+`?${Date.now()}`);s.id!==r?.id&&(t.hooks.callHook("app:manifest:update",s),e&&clearTimeout(e))}catch{}}sf(()=>{e=setTimeout(n,Op)})});function j0(t={}){const e=t.path||window.location.pathname;let n={};try{n=dc(sessionStorage.getItem("nuxt:reload")||"{}")}catch{}if(t.force||n?.path!==e||n?.expires<Date.now()){try{sessionStorage.setItem("nuxt:reload",JSON.stringify({path:e,expires:Date.now()+(t.ttl??1e4)}))}catch{}if(t.persistState)try{sessionStorage.setItem("nuxt:reload:state",JSON.stringify({state:Ze().payload.state}))}catch{}window.location.pathname!==e?window.location.href=e:window.location.reload()}}const $0=Ln({name:"nuxt:chunk-reload",setup(t){const e=Xt(),n=Yc(),r=new Set;e.beforeEach(()=>{r.clear()}),t.hook("app:chunkError",({error:i})=>{r.add(i)});function s(i){const o=zh(n.app.baseURL,i.fullPath);j0({path:o,persistState:!0})}t.hook("app:manifest:update",()=>{e.beforeResolve(s)}),e.onError((i,o)=>{r.has(i)&&s(o)})}}),q0=Ln({name:"nuxt:global-components"}),Nr={coach:ac(()=>Tt(()=>import("./Dmw2_cgf.js"),__vite__mapDeps([28,29]),import.meta.url).then(t=>t.default||t)),dashboard:ac(()=>Tt(()=>import("./2VnoHy9p.js"),__vite__mapDeps([30,3,31]),import.meta.url).then(t=>t.default||t))};function W0(t){if(t?.__asyncLoader&&!t.__asyncResolved)return t.__asyncLoader()}async function G0(t,e=Xt()){const{path:n,matched:r}=e.resolve(t);if(!r.length||(e._routePreloaded||=new Set,e._routePreloaded.has(n)))return;const s=e._preloadPromises||=[];if(s.length>4)return Promise.all(s).then(()=>G0(t,e));e._routePreloaded.add(n);for(const i of r){const o=i.components?.default;if(typeof o!="function")continue;const a=Promise.resolve(o()).catch(()=>{}).finally(()=>s.splice(s.indexOf(a)));s.push(a)}await Promise.all(s)}const K0=Ln({name:"nuxt:prefetch",setup(t){const e=Xt();t.hooks.hook("app:mounted",()=>{e.beforeEach(async n=>{const r=n?.meta?.layout;r&&typeof Nr[r]=="function"&&await Nr[r]()})}),t.hooks.hook("link:prefetch",n=>{if(Os(n))return;const r=e.resolve(n);if(!r)return;const s=r.meta.layout;let i=rf(r.meta.middleware);i=i.filter(o=>typeof o=="string");for(const o of i)typeof Qu[o]=="function"&&Qu[o]();typeof s=="string"&&s in Nr&&W0(Nr[s])})}}),z0={mounted(t,e){t._clickOutside=n=>{t===n.target||t.contains(n.target)||e.value(n)},document.addEventListener("click",t._clickOutside)},unmounted(t){t._clickOutside&&document.removeEventListener("click",t._clickOutside)}},Q0=Ln(t=>{t.vueApp.directive("click-outside",z0)}),Y0=[JR,nS,U0,F0,B0,H0,$0,q0,K0,Q0],Va="<div></div>",cu=new WeakMap;function J0(t){if(cu.has(t))return cu.get(t);const e={...t};return e.render?e.render=(n,r,s,i,o,a)=>{if(i.mounted$??n.mounted$){const l=t.render?.bind(n)(n,r,s,i,o,a);return l.children===null||typeof l.children=="string"?on(l):Je(l)}return au(n._.vnode.el,Va)}:e.template&&=`
      <template v-if="mounted$">${t.template}</template>
      <template v-else>${Va}</template>
    `,e.setup=(n,r)=>{const s=Ze(),i=ir(s.isHydrating===!1),o=Ns();if(s.isHydrating){const l={...o.attrs},u=X0(o);for(const h in l)delete o.attrs[h];fi(()=>{Object.assign(o.attrs,l),o.vnode.dirs=u})}fi(()=>{i.value=!0});const a=t.setup?.(n,r)||{};return Ch(a)?Promise.resolve(a).then(l=>typeof l!="function"?(l||={},l.mounted$=i,l):(...u)=>{if(i.value||!s.isHydrating){const h=l(...u);return h.children===null||typeof h.children=="string"?on(h):Je(h)}return au(o?.vnode.el,Va)}):typeof a=="function"?(...l)=>{if(i.value){const u=a(...l),h=e.inheritAttrs!==!1?r.attrs:void 0;return u.children===null||typeof u.children=="string"?on(u,h):Je(u,h)}return au(o?.vnode.el,Va)}:Object.assign(a,{mounted$:i})},cu.set(t,e),e}function X0(t){if(!t||!t.vnode.dirs)return null;const e=t.vnode.dirs;return t.vnode.dirs=null,e}function Z0(t={}){const e=ir(""),n=ir(t.politeness||"polite"),r=My();function s(u="",h="polite"){e.value=u,n.value=h}function i(u){return s(u,"polite")}function o(u){return s(u,"assertive")}function a(){s(document?.title?.trim(),n.value)}function l(){r?.hooks?.removeHook("dom:rendered",a)}return a(),r?.hooks?.hook("dom:rendered",()=>{a()}),{_cleanup:l,message:e,politeness:n,set:s,polite:i,assertive:o}}function eC(t={}){const e=Ze(),n=e._routeAnnouncer||=Z0(t);return t.politeness!==n.politeness.value&&(n.politeness.value=t.politeness||"polite"),kh()&&(e._routeAnnouncerDeps||=0,e._routeAnnouncerDeps++,gT(()=>{e._routeAnnouncerDeps--,e._routeAnnouncerDeps===0&&(n._cleanup(),delete e._routeAnnouncer)})),n}const tC=ct({name:"NuxtRouteAnnouncer",props:{atomic:{type:Boolean,default:!1},politeness:{type:String,default:"polite"}},setup(t,{slots:e,expose:n}){const{set:r,polite:s,assertive:i,message:o,politeness:a}=eC({politeness:t.politeness});return n({set:r,polite:s,assertive:i,message:o,politeness:a}),()=>Je("span",{class:"nuxt-route-announcer",style:{position:"absolute"}},Je("span",{role:"alert","aria-live":a.value,"aria-atomic":t.atomic,style:{border:"0",clip:"rect(0 0 0 0)","clip-path":"inset(50%)",height:"1px",width:"1px",overflow:"hidden",position:"absolute","white-space":"nowrap","word-wrap":"normal",margin:"-1px",padding:"0"}},e.default?e.default({message:o.value}):o.value))}}),nC=["type","value","placeholder","autocomplete","maxlength","disabled"],rC=ct({__name:"BaseInput",props:{modelValue:{},type:{default:"text"},placeholder:{default:""},autocomplete:{default:"off"},maxlength:{},error:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(t,{emit:e}){const n=e,r=s=>{const i=s.target;n("update:modelValue",i.value)};return(s,i)=>(_e(),Pe("input",{type:t.type,value:t.modelValue,placeholder:t.placeholder,autocomplete:t.autocomplete,maxlength:t.maxlength,disabled:t.disabled,class:rn(["form-input",{"form-input--error":t.error}]),onInput:r},null,42,nC))}}),Un=(t,e)=>{const n=t.__vccOpts||t;for(const[r,s]of e)n[r]=s;return n},of=Object.assign(Un(rC,[["__scopeId","data-v-91b986db"]]),{__name:"UiBaseInput"}),sC={key:0,class:"form-error"},iC=ct({__name:"FormError",props:{message:{},visible:{type:Boolean,default:!1}},setup(t){return(e,n)=>t.visible&&t.message?(_e(),Pe("div",sC,vs(t.message),1)):pi("",!0)}}),af=Object.assign(Un(iC,[["__scopeId","data-v-75d4b223"]]),{__name:"UiFormError"}),oC=["type","disabled"],aC=ct({__name:"BaseButton",props:{variant:{default:"primary"},loading:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},type:{default:"button"}},emits:["click"],setup(t,{emit:e}){const n=t,r=e,s=i=>{!n.loading&&!n.disabled&&r("click",i)};return(i,o)=>(_e(),Pe("button",{type:t.type,class:rn(["btn",`btn--${t.variant}`,{"btn--loading":t.loading}]),disabled:t.disabled||t.loading,onClick:s},[EI(i.$slots,"default",{},void 0)],10,oC))}}),cf=Object.assign(Un(aC,[["__scopeId","data-v-d54604fc"]]),{__name:"UiBaseButton"}),cC=ct({__name:"LoginForm",emits:["submit","forgotPassword"],setup(t,{expose:e,emit:n}){const r=ue(""),s=ue(""),i=ue(""),o=ue(!1),a=n,l=()=>{if(i.value="",!r.value.trim()){i.value="Inserisci la tua email.";return}if(!s.value){i.value="Inserisci la password.";return}a("submit",{email:r.value.trim(),password:s.value})},u=()=>{i.value=""};return e({setError:h=>{i.value=h},setLoading:h=>{o.value=h},reset:()=>{r.value="",s.value="",i.value="",o.value=!1}}),(h,d)=>{const p=of,g=af,_=cf;return _e(),Pe("form",{class:"auth-form",onSubmit:Gh(l,["prevent"])},[ge(p,{modelValue:r.value,"onUpdate:modelValue":d[0]||(d[0]=y=>r.value=y),type:"email",placeholder:"Email",autocomplete:"email",error:!!i.value&&i.value.includes("email"),onInput:u},null,8,["modelValue","error"]),ge(p,{modelValue:s.value,"onUpdate:modelValue":d[1]||(d[1]=y=>s.value=y),type:"password",placeholder:"Password",autocomplete:"current-password",error:!!i.value&&i.value.includes("password"),onInput:u},null,8,["modelValue","error"]),ge(g,{message:i.value,visible:!!i.value},null,8,["message","visible"]),ge(_,{type:"submit",variant:"primary",loading:o.value},{default:sn(()=>[...d[3]||(d[3]=[Ye(" ACCEDI ",-1)])]),_:1},8,["loading"]),ge(_,{variant:"link",onClick:d[2]||(d[2]=y=>a("forgotPassword"))},{default:sn(()=>[...d[4]||(d[4]=[Ye(" Password dimenticata? ",-1)])]),_:1})],32)}}}),lC=Object.assign(Un(cC,[["__scopeId","data-v-5927dcd2"]]),{__name:"AuthLoginForm"}),uC={class:"name-row"},hC=ct({__name:"RegisterForm",emits:["submit"],setup(t,{expose:e,emit:n}){const r=ue(""),s=ue(""),i=ue(""),o=ue(""),a=ue(""),l=ue(""),u=ue(""),h=ue(!1),d=n,p=()=>{if(u.value="",!r.value.trim()){u.value="Inserisci il tuo nome.";return}if(!s.value.trim()){u.value="Inserisci il tuo cognome.";return}if(!i.value.trim()){u.value="Scegli un nickname.";return}if(i.value.trim().length<3){u.value="Il nickname deve essere di almeno 3 caratteri.";return}if(!o.value.trim()){u.value="Inserisci la tua email.";return}if(!a.value){u.value="Inserisci una password.";return}if(a.value.length<6){u.value="La password deve essere di almeno 6 caratteri.";return}if(!l.value){u.value="Conferma la password.";return}if(a.value!==l.value){u.value="Le password non coincidono.";return}d("submit",{firstName:r.value.trim(),lastName:s.value.trim(),nickname:i.value.trim(),email:o.value.trim(),password:a.value})},g=()=>{u.value=""};return e({setError:_=>{u.value=_},setLoading:_=>{h.value=_},reset:()=>{r.value="",s.value="",i.value="",o.value="",a.value="",l.value="",u.value="",h.value=!1}}),(_,y)=>{const N=of,D=af,O=cf;return _e(),Pe("form",{class:"auth-form",onSubmit:Gh(p,["prevent"])},[z("div",uC,[ge(N,{modelValue:r.value,"onUpdate:modelValue":y[0]||(y[0]=E=>r.value=E),type:"text",placeholder:"Nome",autocomplete:"given-name",onInput:g},null,8,["modelValue"]),ge(N,{modelValue:s.value,"onUpdate:modelValue":y[1]||(y[1]=E=>s.value=E),type:"text",placeholder:"Cognome",autocomplete:"family-name",onInput:g},null,8,["modelValue"])]),ge(N,{modelValue:i.value,"onUpdate:modelValue":y[2]||(y[2]=E=>i.value=E),type:"text",placeholder:"Nickname (visibile agli altri)",autocomplete:"username",maxlength:20,onInput:g},null,8,["modelValue"]),ge(N,{modelValue:o.value,"onUpdate:modelValue":y[3]||(y[3]=E=>o.value=E),type:"email",placeholder:"Email",autocomplete:"email",onInput:g},null,8,["modelValue"]),ge(N,{modelValue:a.value,"onUpdate:modelValue":y[4]||(y[4]=E=>a.value=E),type:"password",placeholder:"Password (min. 6 caratteri)",autocomplete:"new-password",onInput:g},null,8,["modelValue"]),ge(N,{modelValue:l.value,"onUpdate:modelValue":y[5]||(y[5]=E=>l.value=E),type:"password",placeholder:"Conferma Password",autocomplete:"new-password",onInput:g},null,8,["modelValue"]),ge(D,{message:u.value,visible:!!u.value},null,8,["message","visible"]),ge(O,{type:"submit",variant:"primary",loading:h.value},{default:sn(()=>[...y[6]||(y[6]=[Ye(" REGISTRATI ",-1)])]),_:1},8,["loading"])],32)}}}),fC=Object.assign(Un(hC,[["__scopeId","data-v-d0f96507"]]),{__name:"AuthRegisterForm"}),dC={class:"reset-form"},pC={key:0,class:"reset-success"},mC=ct({__name:"ResetPasswordForm",emits:["submit","back"],setup(t,{expose:e,emit:n}){const r=ue(""),s=ue(""),i=ue(!1),o=ue(!1),a=n,l=()=>{if(s.value="",!r.value.trim()){s.value="Inserisci la tua email.";return}a("submit",r.value.trim())},u=()=>{s.value=""};return e({setError:h=>{s.value=h},setLoading:h=>{o.value=h},setSuccess:h=>{i.value=h},reset:()=>{r.value="",s.value="",i.value=!1,o.value=!1}}),(h,d)=>{const p=cf,g=of,_=af;return _e(),Pe("div",dC,[i.value?(_e(),Pe("div",pC,[d[4]||(d[4]=z("span",{class:"reset-success__icon"},"",-1)),d[5]||(d[5]=z("p",{class:"reset-success__text"}," Email inviata! Controlla la tua casella di posta (anche spam). ",-1)),ge(p,{variant:"link",onClick:d[0]||(d[0]=y=>a("back"))},{default:sn(()=>[...d[3]||(d[3]=[Ye("  Torna al login ",-1)])]),_:1})])):(_e(),Pe("form",{key:1,class:"auth-form",onSubmit:Gh(l,["prevent"])},[d[8]||(d[8]=z("h3",{class:"reset-form__title"},"Recupera Password",-1)),d[9]||(d[9]=z("p",{class:"reset-form__description"},[Ye(" Inserisci la tua email. Ti invieremo un link per reimpostare la password. "),z("br"),z("small",null,"Controlla anche la cartella spam.")],-1)),ge(g,{modelValue:r.value,"onUpdate:modelValue":d[1]||(d[1]=y=>r.value=y),type:"email",placeholder:"Email",autocomplete:"email",onInput:u},null,8,["modelValue"]),ge(_,{message:s.value,visible:!!s.value},null,8,["message","visible"]),ge(p,{type:"submit",variant:"primary",loading:o.value},{default:sn(()=>[...d[6]||(d[6]=[Ye(" INVIA LINK ",-1)])]),_:1},8,["loading"]),ge(p,{variant:"link",onClick:d[2]||(d[2]=y=>a("back"))},{default:sn(()=>[...d[7]||(d[7]=[Ye("  Torna al login ",-1)])]),_:1})],32))])}}}),gC=Object.assign(Un(mC,[["__scopeId","data-v-17ef1ec5"]]),{__name:"AuthResetPasswordForm"}),_C=()=>{};var lm={};const rv=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},yC=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],a=t[n++],l=((s&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},sv={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,a=o?t[s+1]:0,l=s+2<t.length,u=l?t[s+2]:0,h=i>>2,d=(i&3)<<4|a>>4;let p=(a&15)<<2|u>>6,g=u&63;l||(g=64,o||(p=64)),r.push(n[h],n[d],n[p],n[g])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(rv(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):yC(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],a=s<t.length?n[t.charAt(s)]:0;++s;const u=s<t.length?n[t.charAt(s)]:64;++s;const d=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||a==null||u==null||d==null)throw new vC;const p=i<<2|a>>4;if(r.push(p),u!==64){const g=a<<4&240|u>>2;if(r.push(g),d!==64){const _=u<<6&192|d;r.push(_)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class vC extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const EC=function(t){const e=rv(t);return sv.encodeByteArray(e,!0)},vc=function(t){return EC(t).replace(/\./g,"")},iv=function(t){try{return sv.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function wC(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const TC=()=>wC().__FIREBASE_DEFAULTS__,IC=()=>{if(typeof process>"u"||typeof lm>"u")return;const t=lm.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},AC=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&iv(t[1]);return e&&JSON.parse(e)},el=()=>{try{return _C()||TC()||IC()||AC()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},ov=t=>el()?.emulatorHosts?.[t],bC=t=>{const e=ov(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},av=()=>el()?.config,cv=t=>el()?.[`_${t}`];class RC{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}function ki(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function lv(t){return(await fetch(t,{credentials:"include"})).ok}function SC(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...t};return[vc(JSON.stringify(n)),vc(JSON.stringify(o)),""].join(".")}const vo={};function CC(){const t={prod:[],emulator:[]};for(const e of Object.keys(vo))vo[e]?t.emulator.push(e):t.prod.push(e);return t}function PC(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let um=!1;function uv(t,e){if(typeof window>"u"||typeof document>"u"||!ki(window.location.host)||vo[t]===e||vo[t]||um)return;vo[t]=e;function n(p){return`__firebase__banner__${p}`}const r="__firebase__banner",i=CC().prod.length>0;function o(){const p=document.getElementById(r);p&&p.remove()}function a(p){p.style.display="flex",p.style.background="#7faaf0",p.style.position="fixed",p.style.bottom="5px",p.style.left="5px",p.style.padding=".5em",p.style.borderRadius="5px",p.style.alignItems="center"}function l(p,g){p.setAttribute("width","24"),p.setAttribute("id",g),p.setAttribute("height","24"),p.setAttribute("viewBox","0 0 24 24"),p.setAttribute("fill","none"),p.style.marginLeft="-6px"}function u(){const p=document.createElement("span");return p.style.cursor="pointer",p.style.marginLeft="16px",p.style.fontSize="24px",p.innerHTML=" &times;",p.onclick=()=>{um=!0,o()},p}function h(p,g){p.setAttribute("id",g),p.innerText="Learn more",p.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",p.setAttribute("target","__blank"),p.style.paddingLeft="5px",p.style.textDecoration="underline"}function d(){const p=PC(r),g=n("text"),_=document.getElementById(g)||document.createElement("span"),y=n("learnmore"),N=document.getElementById(y)||document.createElement("a"),D=n("preprendIcon"),O=document.getElementById(D)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(p.created){const E=p.element;a(E),h(N,y);const k=u();l(O,D),E.append(O,_,N,k),document.body.appendChild(E)}i?(_.innerText="Preview backend disconnected.",O.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(O.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,_.innerText="Preview backend running in this workspace."),_.setAttribute("id",g)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",d):d()}function Vt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function kC(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Vt())}function NC(){const t=el()?.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function OC(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function DC(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function VC(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function xC(){const t=Vt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function MC(){return!NC()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function LC(){try{return typeof indexedDB=="object"}catch{return!1}}function UC(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{e(s.error?.message||"")}}catch(n){e(n)}})}const FC="FirebaseError";class hr extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=FC,Object.setPrototypeOf(this,hr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Xo.prototype.create)}}class Xo{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?BC(i,r):"Error",a=`${this.serviceName}: ${o} (${s}).`;return new hr(s,a,r)}}function BC(t,e){return t.replace(HC,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const HC=/\{\$([^}]+)}/g;function jC(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Is(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(hm(i)&&hm(o)){if(!Is(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function hm(t){return t!==null&&typeof t=="object"}function Zo(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function oo(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,i]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function ao(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function $C(t,e){const n=new qC(t,e);return n.subscribe.bind(n)}class qC{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");WC(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=lu),s.error===void 0&&(s.error=lu),s.complete===void 0&&(s.complete=lu);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function WC(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function lu(){}function at(t){return t&&t._delegate?t._delegate:t}class As{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const us="[DEFAULT]";class GC{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new RC;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(zC(e))try{this.getOrInitializeService({instanceIdentifier:us})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=us){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=us){return this.instances.has(e)}getOptions(e=us){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);r===a&&o.resolve(s)}return s}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),s=this.onInitCallbacks.get(r)??new Set;s.add(e),this.onInitCallbacks.set(r,s);const i=this.instances.get(r);return i&&e(i,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:KC(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=us){return this.component?this.component.multipleInstances?e:us:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function KC(t){return t===us?void 0:t}function zC(t){return t.instantiationMode==="EAGER"}class QC{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new GC(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}var Ae;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Ae||(Ae={}));const YC={debug:Ae.DEBUG,verbose:Ae.VERBOSE,info:Ae.INFO,warn:Ae.WARN,error:Ae.ERROR,silent:Ae.SILENT},JC=Ae.INFO,XC={[Ae.DEBUG]:"log",[Ae.VERBOSE]:"log",[Ae.INFO]:"info",[Ae.WARN]:"warn",[Ae.ERROR]:"error"},ZC=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=XC[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class lf{constructor(e){this.name=e,this._logLevel=JC,this._logHandler=ZC,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ae))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?YC[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ae.DEBUG,...e),this._logHandler(this,Ae.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ae.VERBOSE,...e),this._logHandler(this,Ae.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ae.INFO,...e),this._logHandler(this,Ae.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ae.WARN,...e),this._logHandler(this,Ae.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ae.ERROR,...e),this._logHandler(this,Ae.ERROR,...e)}}const eP=(t,e)=>e.some(n=>t instanceof n);let fm,dm;function tP(){return fm||(fm=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function nP(){return dm||(dm=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const hv=new WeakMap,Yu=new WeakMap,fv=new WeakMap,uu=new WeakMap,uf=new WeakMap;function rP(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(Mr(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&hv.set(n,t)}).catch(()=>{}),uf.set(e,t),e}function sP(t){if(Yu.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});Yu.set(t,e)}let Ju={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Yu.get(t);if(e==="objectStoreNames")return t.objectStoreNames||fv.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Mr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function iP(t){Ju=t(Ju)}function oP(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(hu(this),e,...n);return fv.set(r,e.sort?e.sort():[e]),Mr(r)}:nP().includes(t)?function(...e){return t.apply(hu(this),e),Mr(hv.get(this))}:function(...e){return Mr(t.apply(hu(this),e))}}function aP(t){return typeof t=="function"?oP(t):(t instanceof IDBTransaction&&sP(t),eP(t,tP())?new Proxy(t,Ju):t)}function Mr(t){if(t instanceof IDBRequest)return rP(t);if(uu.has(t))return uu.get(t);const e=aP(t);return e!==t&&(uu.set(t,e),uf.set(e,t)),e}const hu=t=>uf.get(t);function cP(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),a=Mr(o);return r&&o.addEventListener("upgradeneeded",l=>{r(Mr(o.result),l.oldVersion,l.newVersion,Mr(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{i&&l.addEventListener("close",()=>i()),s&&l.addEventListener("versionchange",u=>s(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}const lP=["get","getKey","getAll","getAllKeys","count"],uP=["put","add","delete","clear"],fu=new Map;function pm(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(fu.get(e))return fu.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=uP.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||lP.includes(n)))return;const i=async function(o,...a){const l=this.transaction(o,s?"readwrite":"readonly");let u=l.store;return r&&(u=u.index(a.shift())),(await Promise.all([u[n](...a),s&&l.done]))[0]};return fu.set(e,i),i}iP(t=>({...t,get:(e,n,r)=>pm(e,n)||t.get(e,n,r),has:(e,n)=>!!pm(e,n)||t.has(e,n)}));class hP{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(fP(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function fP(t){return t.getComponent()?.type==="VERSION"}const Xu="@firebase/app",mm="0.14.6";const or=new lf("@firebase/app"),dP="@firebase/app-compat",pP="@firebase/analytics-compat",mP="@firebase/analytics",gP="@firebase/app-check-compat",_P="@firebase/app-check",yP="@firebase/auth",vP="@firebase/auth-compat",EP="@firebase/database",wP="@firebase/data-connect",TP="@firebase/database-compat",IP="@firebase/functions",AP="@firebase/functions-compat",bP="@firebase/installations",RP="@firebase/installations-compat",SP="@firebase/messaging",CP="@firebase/messaging-compat",PP="@firebase/performance",kP="@firebase/performance-compat",NP="@firebase/remote-config",OP="@firebase/remote-config-compat",DP="@firebase/storage",VP="@firebase/storage-compat",xP="@firebase/firestore",MP="@firebase/ai",LP="@firebase/firestore-compat",UP="firebase",FP="12.6.0";const Zu="[DEFAULT]",BP={[Xu]:"fire-core",[dP]:"fire-core-compat",[mP]:"fire-analytics",[pP]:"fire-analytics-compat",[_P]:"fire-app-check",[gP]:"fire-app-check-compat",[yP]:"fire-auth",[vP]:"fire-auth-compat",[EP]:"fire-rtdb",[wP]:"fire-data-connect",[TP]:"fire-rtdb-compat",[IP]:"fire-fn",[AP]:"fire-fn-compat",[bP]:"fire-iid",[RP]:"fire-iid-compat",[SP]:"fire-fcm",[CP]:"fire-fcm-compat",[PP]:"fire-perf",[kP]:"fire-perf-compat",[NP]:"fire-rc",[OP]:"fire-rc-compat",[DP]:"fire-gcs",[VP]:"fire-gcs-compat",[xP]:"fire-fst",[LP]:"fire-fst-compat",[MP]:"fire-vertex","fire-js":"fire-js",[UP]:"fire-js-all"};const Vo=new Map,HP=new Map,eh=new Map;function gm(t,e){try{t.container.addComponent(e)}catch(n){or.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function vi(t){const e=t.name;if(eh.has(e))return or.debug(`There were multiple attempts to register component ${e}.`),!1;eh.set(e,t);for(const n of Vo.values())gm(n,t);for(const n of HP.values())gm(n,t);return!0}function hf(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function nn(t){return t==null?!1:t.settings!==void 0}const jP={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Lr=new Xo("app","Firebase",jP);class $P{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new As("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Lr.create("app-deleted",{appName:this._name})}}const Ni=FP;function dv(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:Zu,automaticDataCollectionEnabled:!0,...e},s=r.name;if(typeof s!="string"||!s)throw Lr.create("bad-app-name",{appName:String(s)});if(n||(n=av()),!n)throw Lr.create("no-options");const i=Vo.get(s);if(i){if(Is(n,i.options)&&Is(r,i.config))return i;throw Lr.create("duplicate-app",{appName:s})}const o=new QC(s);for(const l of eh.values())o.addComponent(l);const a=new $P(n,r,o);return Vo.set(s,a),a}function pv(t=Zu){const e=Vo.get(t);if(!e&&t===Zu&&av())return dv();if(!e)throw Lr.create("no-app",{appName:t});return e}function _m(){return Array.from(Vo.values())}function Ur(t,e,n){let r=BP[t]??t;n&&(r+=`-${n}`);const s=r.match(/\s|\//),i=e.match(/\s|\//);if(s||i){const o=[`Unable to register library "${r}" with version "${e}":`];s&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&i&&o.push("and"),i&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),or.warn(o.join(" "));return}vi(new As(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}const qP="firebase-heartbeat-database",WP=1,xo="firebase-heartbeat-store";let du=null;function mv(){return du||(du=cP(qP,WP,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(xo)}catch(n){console.warn(n)}}}}).catch(t=>{throw Lr.create("idb-open",{originalErrorMessage:t.message})})),du}async function GP(t){try{const n=(await mv()).transaction(xo),r=await n.objectStore(xo).get(gv(t));return await n.done,r}catch(e){if(e instanceof hr)or.warn(e.message);else{const n=Lr.create("idb-get",{originalErrorMessage:e?.message});or.warn(n.message)}}}async function ym(t,e){try{const r=(await mv()).transaction(xo,"readwrite");await r.objectStore(xo).put(e,gv(t)),await r.done}catch(n){if(n instanceof hr)or.warn(n.message);else{const r=Lr.create("idb-set",{originalErrorMessage:n?.message});or.warn(r.message)}}}function gv(t){return`${t.name}!${t.options.appId}`}const KP=1024,zP=30;class QP{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new JP(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=vm();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(s=>s.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats.length>zP){const s=XP(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){or.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=vm(),{heartbeatsToSend:n,unsentEntries:r}=YP(this._heartbeatsCache.heartbeats),s=vc(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(e){return or.warn(e),""}}}function vm(){return new Date().toISOString().substring(0,10)}function YP(t,e=KP){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),Em(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),Em(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class JP{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return LC()?UC().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await GP(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return ym(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return ym(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function Em(t){return vc(JSON.stringify({version:2,heartbeats:t})).length}function XP(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}function ZP(t){vi(new As("platform-logger",e=>new hP(e),"PRIVATE")),vi(new As("heartbeat",e=>new QP(e),"PRIVATE")),Ur(Xu,mm,t),Ur(Xu,mm,"esm2020"),Ur("fire-js","")}ZP("");function _v(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const ek=_v,yv=new Xo("auth","Firebase",_v());const Ec=new lf("@firebase/auth");function tk(t,...e){Ec.logLevel<=Ae.WARN&&Ec.warn(`Auth (${Ni}): ${t}`,...e)}function Wa(t,...e){Ec.logLevel<=Ae.ERROR&&Ec.error(`Auth (${Ni}): ${t}`,...e)}function En(t,...e){throw ff(t,...e)}function Nn(t,...e){return ff(t,...e)}function vv(t,e,n){const r={...ek(),[e]:n};return new Xo("auth","Firebase",r).create(e,{appName:t.name})}function er(t){return vv(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function ff(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return yv.create(t,...e)}function he(t,e,...n){if(!t)throw ff(e,...n)}function Qn(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Wa(e),new Error(e)}function ar(t,e){t||Qn(e)}function th(){return typeof self<"u"&&self.location?.href||""}function nk(){return wm()==="http:"||wm()==="https:"}function wm(){return typeof self<"u"&&self.location?.protocol||null}function rk(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(nk()||DC()||"connection"in navigator)?navigator.onLine:!0}function sk(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}class ea{constructor(e,n){this.shortDelay=e,this.longDelay=n,ar(n>e,"Short delay should be less than long delay!"),this.isMobile=kC()||VC()}get(){return rk()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function df(t,e){ar(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}class Ev{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Qn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Qn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Qn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const ik={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const ok=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],ak=new ea(3e4,6e4);function fr(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function Fn(t,e,n,r,s={}){return wv(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const a=Zo({key:t.config.apiKey,...o}).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const u={method:e,headers:l,...i};return OC()||(u.referrerPolicy="no-referrer"),t.emulatorConfig&&ki(t.emulatorConfig.host)&&(u.credentials="include"),Ev.fetch()(await Tv(t,t.config.apiHost,n,a),u)})}async function wv(t,e,n){t._canInitEmulator=!1;const r={...ik,...e};try{const s=new lk(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw xa(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const a=i.ok?o.errorMessage:o.error.message,[l,u]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw xa(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw xa(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw xa(t,"user-disabled",o);const h=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw vv(t,h,u);En(t,h)}}catch(s){if(s instanceof hr)throw s;En(t,"network-request-failed",{message:String(s)})}}async function ta(t,e,n,r,s={}){const i=await Fn(t,e,n,r,s);return"mfaPendingCredential"in i&&En(t,"multi-factor-auth-required",{_serverResponse:i}),i}async function Tv(t,e,n,r){const s=`${e}${n}?${r}`,i=t,o=i.config.emulator?df(t.config,s):`${t.config.apiScheme}://${s}`;return ok.includes(n)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(o).toString():o}function ck(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class lk{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Nn(this.auth,"network-request-failed")),ak.get())})}}function xa(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=Nn(t,e,r);return s.customData._tokenResponse=n,s}function Tm(t){return t!==void 0&&t.enterprise!==void 0}class uk{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return ck(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function hk(t,e){return Fn(t,"GET","/v2/recaptchaConfig",fr(t,e))}async function fk(t,e){return Fn(t,"POST","/v1/accounts:delete",e)}async function wc(t,e){return Fn(t,"POST","/v1/accounts:lookup",e)}function Eo(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function dk(t,e=!1){const n=at(t),r=await n.getIdToken(e),s=pf(r);he(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i?.sign_in_provider;return{claims:s,token:r,authTime:Eo(pu(s.auth_time)),issuedAtTime:Eo(pu(s.iat)),expirationTime:Eo(pu(s.exp)),signInProvider:o||null,signInSecondFactor:i?.sign_in_second_factor||null}}function pu(t){return Number(t)*1e3}function pf(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Wa("JWT malformed, contained fewer than 3 sections"),null;try{const s=iv(n);return s?JSON.parse(s):(Wa("Failed to decode base64 JWT payload"),null)}catch(s){return Wa("Caught error parsing JWT payload as JSON",s?.toString()),null}}function Im(t){const e=pf(t);return he(e,"internal-error"),he(typeof e.exp<"u","internal-error"),he(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function Ei(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof hr&&pk(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function pk({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}class mk{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class nh{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Eo(this.lastLoginAt),this.creationTime=Eo(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Tc(t){const e=t.auth,n=await t.getIdToken(),r=await Ei(t,wc(e,{idToken:n}));he(r?.users.length,e,"internal-error");const s=r.users[0];t._notifyReloadListener(s);const i=s.providerUserInfo?.length?Iv(s.providerUserInfo):[],o=_k(t.providerData,i),a=t.isAnonymous,l=!(t.email&&s.passwordHash)&&!o?.length,u=a?l:!1,h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new nh(s.createdAt,s.lastLoginAt),isAnonymous:u};Object.assign(t,h)}async function gk(t){const e=at(t);await Tc(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function _k(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function Iv(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}async function yk(t,e){const n=await wv(t,{},async()=>{const r=Zo({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=await Tv(t,s,"/v1/token",`key=${i}`),a=await t._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";const l={method:"POST",headers:a,body:r};return t.emulatorConfig&&ki(t.emulatorConfig.host)&&(l.credentials="include"),Ev.fetch()(o,l)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function vk(t,e){return Fn(t,"POST","/v2/accounts:revokeToken",fr(t,e))}class oi{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){he(e.idToken,"internal-error"),he(typeof e.idToken<"u","internal-error"),he(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Im(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){he(e.length!==0,"internal-error");const n=Im(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(he(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await yk(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new oi;return r&&(he(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(he(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(he(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new oi,this.toJSON())}_performRefresh(){return Qn("not implemented")}}function wr(t,e){he(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class hn{constructor({uid:e,auth:n,stsTokenManager:r,...s}){this.providerId="firebase",this.proactiveRefresh=new mk(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new nh(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await Ei(this,this.stsTokenManager.getToken(this.auth,e));return he(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return dk(this,e)}reload(){return gk(this)}_assign(e){this!==e&&(he(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new hn({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){he(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Tc(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(nn(this.auth.app))return Promise.reject(er(this.auth));const e=await this.getIdToken();return await Ei(this,fk(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,s=n.email??void 0,i=n.phoneNumber??void 0,o=n.photoURL??void 0,a=n.tenantId??void 0,l=n._redirectEventId??void 0,u=n.createdAt??void 0,h=n.lastLoginAt??void 0,{uid:d,emailVerified:p,isAnonymous:g,providerData:_,stsTokenManager:y}=n;he(d&&y,e,"internal-error");const N=oi.fromJSON(this.name,y);he(typeof d=="string",e,"internal-error"),wr(r,e.name),wr(s,e.name),he(typeof p=="boolean",e,"internal-error"),he(typeof g=="boolean",e,"internal-error"),wr(i,e.name),wr(o,e.name),wr(a,e.name),wr(l,e.name),wr(u,e.name),wr(h,e.name);const D=new hn({uid:d,auth:e,email:s,emailVerified:p,displayName:r,isAnonymous:g,photoURL:o,phoneNumber:i,tenantId:a,stsTokenManager:N,createdAt:u,lastLoginAt:h});return _&&Array.isArray(_)&&(D.providerData=_.map(O=>({...O}))),l&&(D._redirectEventId=l),D}static async _fromIdTokenResponse(e,n,r=!1){const s=new oi;s.updateFromServerResponse(n);const i=new hn({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await Tc(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];he(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?Iv(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!i?.length,a=new oi;a.updateFromIdToken(r);const l=new hn({uid:s.localId,auth:e,stsTokenManager:a,isAnonymous:o}),u={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new nh(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!i?.length};return Object.assign(l,u),l}}const Am=new Map;function Yn(t){ar(t instanceof Function,"Expected a class definition");let e=Am.get(t);return e?(ar(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Am.set(t,e),e)}class Av{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}Av.type="NONE";const bm=Av;function Ga(t,e,n){return`firebase:${t}:${e}:${n}`}class ai{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=Ga(this.userKey,s.apiKey,i),this.fullPersistenceKey=Ga("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await wc(this.auth,{idToken:e}).catch(()=>{});return n?hn._fromGetAccountInfoResponse(this.auth,n,e):null}return hn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new ai(Yn(bm),e,r);const s=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let i=s[0]||Yn(bm);const o=Ga(r,e.config.apiKey,e.name);let a=null;for(const u of n)try{const h=await u._get(o);if(h){let d;if(typeof h=="string"){const p=await wc(e,{idToken:h}).catch(()=>{});if(!p)break;d=await hn._fromGetAccountInfoResponse(e,p,h)}else d=hn._fromJSON(e,h);u!==i&&(a=d),i=u;break}}catch{}const l=s.filter(u=>u._shouldAllowMigration);return!i._shouldAllowMigration||!l.length?new ai(i,e,r):(i=l[0],a&&await i._set(o,a.toJSON()),await Promise.all(n.map(async u=>{if(u!==i)try{await u._remove(o)}catch{}})),new ai(i,e,r))}}function Rm(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Cv(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(bv(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(kv(e))return"Blackberry";if(Nv(e))return"Webos";if(Rv(e))return"Safari";if((e.includes("chrome/")||Sv(e))&&!e.includes("edge/"))return"Chrome";if(Pv(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if(r?.length===2)return r[1]}return"Other"}function bv(t=Vt()){return/firefox\//i.test(t)}function Rv(t=Vt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Sv(t=Vt()){return/crios\//i.test(t)}function Cv(t=Vt()){return/iemobile/i.test(t)}function Pv(t=Vt()){return/android/i.test(t)}function kv(t=Vt()){return/blackberry/i.test(t)}function Nv(t=Vt()){return/webos/i.test(t)}function mf(t=Vt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function Ek(t=Vt()){return mf(t)&&!!window.navigator?.standalone}function wk(){return xC()&&document.documentMode===10}function Ov(t=Vt()){return mf(t)||Pv(t)||Nv(t)||kv(t)||/windows phone/i.test(t)||Cv(t)}function Dv(t,e=[]){let n;switch(t){case"Browser":n=Rm(Vt());break;case"Worker":n=`${Rm(Vt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Ni}/${r}`}class Tk{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,a)=>{try{const l=e(i);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}async function Ik(t,e={}){return Fn(t,"GET","/v2/passwordPolicy",fr(t,e))}const Ak=6;class bk{constructor(e){const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??Ak,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}class Rk{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Sm(this),this.idTokenSubscription=new Sm(this),this.beforeStateQueue=new Tk(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=yv,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Yn(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await ai.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await wc(this,{idToken:e}),r=await hn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(nn(this.app)){const i=this.app.settings.authIdToken;return i?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(i).then(o,o))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const i=this.redirectUser?._redirectEventId,o=r?._redirectEventId,a=await this.tryRedirectSignIn(e);(!i||i===o)&&a?.user&&(r=a.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(i){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(i))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return he(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Tc(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=sk()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(nn(this.app))return Promise.reject(er(this));const n=e?at(e):null;return n&&he(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&he(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return nn(this.app)?Promise.reject(er(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return nn(this.app)?Promise.reject(er(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Yn(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await Ik(this),n=new bk(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Xo("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await vk(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Yn(e)||this._popupRedirectResolver;he(n,this,"argument-error"),this.redirectPersistenceManager=await ai.create(this,[Yn(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(he(a,this,"internal-error"),a.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,s);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return he(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Dv(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){if(nn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&tk(`Error while retrieving App Check token: ${e.error}`),e?.token}}function Ds(t){return at(t)}class Sm{constructor(e){this.auth=e,this.observer=null,this.addObserver=$C(n=>this.observer=n)}get next(){return he(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let tl={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Sk(t){tl=t}function Vv(t){return tl.loadJS(t)}function Ck(){return tl.recaptchaEnterpriseScript}function Pk(){return tl.gapiScript}function kk(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class Nk{constructor(){this.enterprise=new Ok}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class Ok{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const Dk="recaptcha-enterprise",xv="NO_RECAPTCHA";class Vk{constructor(e){this.type=Dk,this.auth=Ds(e)}async verify(e="verify",n=!1){async function r(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(o,a)=>{hk(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const u=new uk(l);return i.tenantId==null?i._agentRecaptchaConfig=u:i._tenantRecaptchaConfigs[i.tenantId]=u,o(u.siteKey)}}).catch(l=>{a(l)})})}function s(i,o,a){const l=window.grecaptcha;Tm(l)?l.enterprise.ready(()=>{l.enterprise.execute(i,{action:e}).then(u=>{o(u)}).catch(()=>{o(xv)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new Nk().execute("siteKey",{action:"verify"}):new Promise((i,o)=>{r(this.auth).then(a=>{if(!n&&Tm(window.grecaptcha))s(a,i,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=Ck();l.length!==0&&(l+=a),Vv(l).then(()=>{s(a,i,o)}).catch(u=>{o(u)})}}).catch(a=>{o(a)})})}}async function Cm(t,e,n,r=!1,s=!1){const i=new Vk(t);let o;if(s)o=xv;else try{o=await i.verify(n)}catch{o=await i.verify(n,!0)}const a={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in a){const l=a.phoneEnrollmentInfo.phoneNumber,u=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:l,recaptchaToken:u,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){const l=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:l,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return r?Object.assign(a,{captchaResp:o}):Object.assign(a,{captchaResponse:o}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function rh(t,e,n,r,s){if(t._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await Cm(t,e,n,n==="getOobCode");return r(t,i)}else return r(t,e).catch(async i=>{if(i.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await Cm(t,e,n,n==="getOobCode");return r(t,o)}else return Promise.reject(i)})}function xk(t,e){const n=hf(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(Is(i,e??{}))return s;En(s,"already-initialized")}return n.initialize({options:e})}function Mk(t,e){const n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(Yn);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}function Lk(t,e,n){const r=Ds(t);he(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,i=Mv(e),{host:o,port:a}=Uk(e),l=a===null?"":`:${a}`,u={url:`${i}//${o}${l}/`},h=Object.freeze({host:o,port:a,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){he(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),he(Is(u,r.config.emulator)&&Is(h,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=u,r.emulatorConfig=h,r.settings.appVerificationDisabledForTesting=!0,ki(o)?(lv(`${i}//${o}${l}`),uv("Auth",!0)):Fk()}function Mv(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function Uk(t){const e=Mv(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:Pm(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:Pm(o)}}}function Pm(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function Fk(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}class gf{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Qn("not implemented")}_getIdTokenResponse(e){return Qn("not implemented")}_linkToIdToken(e,n){return Qn("not implemented")}_getReauthenticationResolver(e){return Qn("not implemented")}}async function Bk(t,e){return Fn(t,"POST","/v1/accounts:signUp",e)}async function Hk(t,e){return ta(t,"POST","/v1/accounts:signInWithPassword",fr(t,e))}async function jk(t,e){return Fn(t,"POST","/v1/accounts:sendOobCode",fr(t,e))}async function $k(t,e){return jk(t,e)}async function qk(t,e){return ta(t,"POST","/v1/accounts:signInWithEmailLink",fr(t,e))}async function Wk(t,e){return ta(t,"POST","/v1/accounts:signInWithEmailLink",fr(t,e))}class Mo extends gf{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new Mo(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Mo(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return rh(e,n,"signInWithPassword",Hk);case"emailLink":return qk(e,{email:this._email,oobCode:this._password});default:En(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return rh(e,r,"signUpPassword",Bk);case"emailLink":return Wk(e,{idToken:n,email:this._email,oobCode:this._password});default:En(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function ci(t,e){return ta(t,"POST","/v1/accounts:signInWithIdp",fr(t,e))}const Gk="http://localhost";class bs extends gf{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new bs(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):En("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s,...i}=n;if(!r||!s)return null;const o=new bs(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return ci(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,ci(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,ci(e,n)}buildRequest(){const e={requestUri:Gk,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Zo(n)}return e}}function Kk(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function zk(t){const e=oo(ao(t)).link,n=e?oo(ao(e)).deep_link_id:null,r=oo(ao(t)).deep_link_id;return(r?oo(ao(r)).link:null)||r||n||e||t}class _f{constructor(e){const n=oo(ao(e)),r=n.apiKey??null,s=n.oobCode??null,i=Kk(n.mode??null);he(r&&s&&i,"argument-error"),this.apiKey=r,this.operation=i,this.code=s,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=zk(e);try{return new _f(n)}catch{return null}}}class Oi{constructor(){this.providerId=Oi.PROVIDER_ID}static credential(e,n){return Mo._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=_f.parseLink(n);return he(r,"argument-error"),Mo._fromEmailAndCode(e,r.code,r.tenantId)}}Oi.PROVIDER_ID="password";Oi.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Oi.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class Lv{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class na extends Lv{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Sr extends na{constructor(){super("facebook.com")}static credential(e){return bs._fromParams({providerId:Sr.PROVIDER_ID,signInMethod:Sr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Sr.credentialFromTaggedObject(e)}static credentialFromError(e){return Sr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Sr.credential(e.oauthAccessToken)}catch{return null}}}Sr.FACEBOOK_SIGN_IN_METHOD="facebook.com";Sr.PROVIDER_ID="facebook.com";class Cr extends na{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return bs._fromParams({providerId:Cr.PROVIDER_ID,signInMethod:Cr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Cr.credentialFromTaggedObject(e)}static credentialFromError(e){return Cr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Cr.credential(n,r)}catch{return null}}}Cr.GOOGLE_SIGN_IN_METHOD="google.com";Cr.PROVIDER_ID="google.com";class Pr extends na{constructor(){super("github.com")}static credential(e){return bs._fromParams({providerId:Pr.PROVIDER_ID,signInMethod:Pr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Pr.credentialFromTaggedObject(e)}static credentialFromError(e){return Pr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Pr.credential(e.oauthAccessToken)}catch{return null}}}Pr.GITHUB_SIGN_IN_METHOD="github.com";Pr.PROVIDER_ID="github.com";class kr extends na{constructor(){super("twitter.com")}static credential(e,n){return bs._fromParams({providerId:kr.PROVIDER_ID,signInMethod:kr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return kr.credentialFromTaggedObject(e)}static credentialFromError(e){return kr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return kr.credential(n,r)}catch{return null}}}kr.TWITTER_SIGN_IN_METHOD="twitter.com";kr.PROVIDER_ID="twitter.com";async function Qk(t,e){return ta(t,"POST","/v1/accounts:signUp",fr(t,e))}class Rs{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await hn._fromIdTokenResponse(e,r,s),o=km(r);return new Rs({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=km(r);return new Rs({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function km(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}class Ic extends hr{constructor(e,n,r,s){super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,Ic.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new Ic(e,n,r,s)}}function Uv(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?Ic._fromErrorAndOperation(t,i,e,r):i})}async function Yk(t,e,n=!1){const r=await Ei(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Rs._forOperation(t,"link",r)}async function Jk(t,e,n=!1){const{auth:r}=t;if(nn(r.app))return Promise.reject(er(r));const s="reauthenticate";try{const i=await Ei(t,Uv(r,s,e,t),n);he(i.idToken,r,"internal-error");const o=pf(i.idToken);he(o,r,"internal-error");const{sub:a}=o;return he(t.uid===a,r,"user-mismatch"),Rs._forOperation(t,s,i)}catch(i){throw i?.code==="auth/user-not-found"&&En(r,"user-mismatch"),i}}async function Fv(t,e,n=!1){if(nn(t.app))return Promise.reject(er(t));const r="signIn",s=await Uv(t,r,e),i=await Rs._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}async function Xk(t,e){return Fv(Ds(t),e)}async function Bv(t){const e=Ds(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function Zk(t,e,n){if(nn(t.app))return Promise.reject(er(t));const r=Ds(t),o=await rh(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Qk).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&Bv(t),l}),a=await Rs._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(a.user),a}function e1(t,e,n){return nn(t.app)?Promise.reject(er(t)):Xk(at(t),Oi.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&Bv(t),r})}async function Nm(t,e){const n=at(t),s={requestType:"VERIFY_EMAIL",idToken:await t.getIdToken()},{email:i}=await $k(n.auth,s);i!==t.email&&await t.reload()}async function t1(t,e){return Fn(t,"POST","/v1/accounts:update",e)}async function n1(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=at(t),i={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},o=await Ei(r,t1(r.auth,i));r.displayName=o.displayName||null,r.photoURL=o.photoUrl||null;const a=r.providerData.find(({providerId:l})=>l==="password");a&&(a.displayName=r.displayName,a.photoURL=r.photoURL),await r._updateTokensIfNecessary(o)}function r1(t,e,n,r){return at(t).onIdTokenChanged(e,n,r)}function s1(t,e,n){return at(t).beforeAuthStateChanged(e,n)}function i1(t,e,n,r){return at(t).onAuthStateChanged(e,n,r)}function o1(t){return at(t).signOut()}const Ac="__sak";class Hv{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Ac,"1"),this.storage.removeItem(Ac),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const a1=1e3,c1=10;class jv extends Hv{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Ov(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);wk()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,c1):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},a1)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}jv.type="LOCAL";const l1=jv;class $v extends Hv{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}$v.type="SESSION";const qv=$v;function u1(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}class nl{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new nl(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!o?.size)return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const a=Array.from(o).map(async u=>u(n.origin,i)),l=await u1(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}nl.receivers=[];function yf(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}class h1{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((a,l)=>{const u=yf("",20);s.port1.start();const h=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(d){const p=d;if(p.data.eventId===u)switch(p.data.status){case"ack":clearTimeout(h),i=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),a(p.data.response);break;default:clearTimeout(h),clearTimeout(i),l(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}function On(){return window}function f1(t){On().location.href=t}function Wv(){return typeof On().WorkerGlobalScope<"u"&&typeof On().importScripts=="function"}async function d1(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function p1(){return navigator?.serviceWorker?.controller||null}function m1(){return Wv()?self:null}const Gv="firebaseLocalStorageDb",g1=1,bc="firebaseLocalStorage",Kv="fbase_key";class ra{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function rl(t,e){return t.transaction([bc],e?"readwrite":"readonly").objectStore(bc)}function _1(){const t=indexedDB.deleteDatabase(Gv);return new ra(t).toPromise()}function sh(){const t=indexedDB.open(Gv,g1);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(bc,{keyPath:Kv})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(bc)?e(r):(r.close(),await _1(),e(await sh()))})})}async function Om(t,e,n){const r=rl(t,!0).put({[Kv]:e,value:n});return new ra(r).toPromise()}async function y1(t,e){const n=rl(t,!1).get(e),r=await new ra(n).toPromise();return r===void 0?null:r.value}function Dm(t,e){const n=rl(t,!0).delete(e);return new ra(n).toPromise()}const v1=800,E1=3;class zv{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await sh(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>E1)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Wv()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=nl._getInstance(m1()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await d1(),!this.activeServiceWorker)return;this.sender=new h1(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||p1()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await sh();return await Om(e,Ac,"1"),await Dm(e,Ac),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>Om(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>y1(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Dm(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=rl(s,!1).getAll();return new ra(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),v1)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}zv.type="LOCAL";const w1=zv;new ea(3e4,6e4);function T1(t,e){return e?Yn(e):(he(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}class vf extends gf{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ci(e,this._buildIdpRequest())}_linkToIdToken(e,n){return ci(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return ci(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function I1(t){return Fv(t.auth,new vf(t),t.bypassAuthState)}function A1(t){const{auth:e,user:n}=t;return he(n,e,"internal-error"),Jk(n,new vf(t),t.bypassAuthState)}async function b1(t){const{auth:e,user:n}=t;return he(n,e,"internal-error"),Yk(n,new vf(t),t.bypassAuthState)}class Qv{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return I1;case"linkViaPopup":case"linkViaRedirect":return b1;case"reauthViaPopup":case"reauthViaRedirect":return A1;default:En(this.auth,"internal-error")}}resolve(e){ar(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ar(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const R1=new ea(2e3,1e4);class Ys extends Qv{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,Ys.currentPopupAction&&Ys.currentPopupAction.cancel(),Ys.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return he(e,this.auth,"internal-error"),e}async onExecution(){ar(this.filter.length===1,"Popup operations only handle one event");const e=yf();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Nn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Nn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ys.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Nn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,R1.get())};e()}}Ys.currentPopupAction=null;const S1="pendingRedirect",Ka=new Map;class C1 extends Qv{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Ka.get(this.auth._key());if(!e){try{const r=await P1(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Ka.set(this.auth._key(),e)}return this.bypassAuthState||Ka.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function P1(t,e){const n=O1(e),r=N1(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function k1(t,e){Ka.set(t._key(),e)}function N1(t){return Yn(t._redirectPersistence)}function O1(t){return Ga(S1,t.config.apiKey,t.name)}async function D1(t,e,n=!1){if(nn(t.app))return Promise.reject(er(t));const r=Ds(t),s=T1(r,e),o=await new C1(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}const V1=600*1e3;class x1{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!M1(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){if(e.error&&!Yv(e)){const r=e.error.code?.split("auth/")[1]||"internal-error";n.onError(Nn(this.auth,r))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=V1&&this.cachedEventUids.clear(),this.cachedEventUids.has(Vm(e))}saveEventToCache(e){this.cachedEventUids.add(Vm(e)),this.lastProcessedEventTime=Date.now()}}function Vm(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function Yv({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function M1(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Yv(t);default:return!1}}async function L1(t,e={}){return Fn(t,"GET","/v1/projects",e)}const U1=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,F1=/^https?/;async function B1(t){if(t.config.emulator)return;const{authorizedDomains:e}=await L1(t);for(const n of e)try{if(H1(n))return}catch{}En(t,"unauthorized-domain")}function H1(t){const e=th(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!F1.test(n))return!1;if(U1.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}const j1=new ea(3e4,6e4);function xm(){const t=On().___jsl;if(t?.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function $1(t){return new Promise((e,n)=>{function r(){xm(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{xm(),n(Nn(t,"network-request-failed"))},timeout:j1.get()})}if(On().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(On().gapi?.load)r();else{const s=kk("iframefcb");return On()[s]=()=>{gapi.load?r():n(Nn(t,"network-request-failed"))},Vv(`${Pk()}?onload=${s}`).catch(i=>n(i))}}).catch(e=>{throw za=null,e})}let za=null;function q1(t){return za=za||$1(t),za}const W1=new ea(5e3,15e3),G1="__/auth/iframe",K1="emulator/auth/iframe",z1={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Q1=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Y1(t){const e=t.config;he(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?df(e,K1):`https://${t.config.authDomain}/${G1}`,r={apiKey:e.apiKey,appName:t.name,v:Ni},s=Q1.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${Zo(r).slice(1)}`}async function J1(t){const e=await q1(t),n=On().gapi;return he(n,t,"internal-error"),e.open({where:document.body,url:Y1(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:z1,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=Nn(t,"network-request-failed"),a=On().setTimeout(()=>{i(o)},W1.get());function l(){On().clearTimeout(a),s(r)}r.ping(l).then(l,()=>{i(o)})}))}const X1={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Z1=500,eN=600,tN="_blank",nN="http://localhost";class Mm{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function rN(t,e,n,r=Z1,s=eN){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l={...X1,width:r.toString(),height:s.toString(),top:i,left:o},u=Vt().toLowerCase();n&&(a=Sv(u)?tN:n),bv(u)&&(e=e||nN,l.scrollbars="yes");const h=Object.entries(l).reduce((p,[g,_])=>`${p}${g}=${_},`,"");if(Ek(u)&&a!=="_self")return sN(e||"",a),new Mm(null);const d=window.open(e||"",a,h);he(d,t,"popup-blocked");try{d.focus()}catch{}return new Mm(d)}function sN(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}const iN="__/auth/handler",oN="emulator/auth/handler",aN=encodeURIComponent("fac");async function Lm(t,e,n,r,s,i){he(t.config.authDomain,t,"auth-domain-config-required"),he(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Ni,eventId:s};if(e instanceof Lv){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",jC(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,d]of Object.entries({}))o[h]=d}if(e instanceof na){const h=e.getScopes().filter(d=>d!=="");h.length>0&&(o.scopes=h.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const h of Object.keys(a))a[h]===void 0&&delete a[h];const l=await t._getAppCheckToken(),u=l?`#${aN}=${encodeURIComponent(l)}`:"";return`${cN(t)}?${Zo(a).slice(1)}${u}`}function cN({config:t}){return t.emulator?df(t,oN):`https://${t.authDomain}/${iN}`}const mu="webStorageSupport";class lN{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=qv,this._completeRedirectFn=D1,this._overrideRedirectResult=k1}async _openPopup(e,n,r,s){ar(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const i=await Lm(e,n,r,th(),s);return rN(e,i,yf())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await Lm(e,n,r,th(),s);return f1(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(ar(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await J1(e),r=new x1(e);return n.register("authEvent",s=>(he(s?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(mu,{type:mu},s=>{const i=s?.[0]?.[mu];i!==void 0&&n(!!i),En(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=B1(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return Ov()||Rv()||mf()}}const uN=lN;var Um="@firebase/auth",Fm="1.12.0";class hN{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){he(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function fN(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function dN(t){vi(new As("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;he(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Dv(t)},u=new Rk(r,s,i,l);return Mk(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),vi(new As("auth-internal",e=>{const n=Ds(e.getProvider("auth").getImmediate());return(r=>new hN(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ur(Um,Fm,fN(t)),Ur(Um,Fm,"esm2020")}const pN=300,mN=cv("authIdTokenMaxAge")||pN;let Bm=null;const gN=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>mN)return;const s=n?.token;Bm!==s&&(Bm=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function _N(t=pv()){const e=hf(t,"auth");if(e.isInitialized())return e.getImmediate();const n=xk(t,{popupRedirectResolver:uN,persistence:[w1,l1,qv]}),r=cv("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const o=gN(i.toString());s1(n,o,()=>o(n.currentUser)),r1(n,a=>o(a))}}const s=ov("auth");return s&&Lk(n,`http://${s}`),n}function yN(){return document.getElementsByTagName("head")?.[0]??document}Sk({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=Nn("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",yN().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});dN("Browser");var Hm=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var Fr,Jv;(function(){var t;function e(b,T){function w(){}w.prototype=T.prototype,b.F=T.prototype,b.prototype=new w,b.prototype.constructor=b,b.D=function(R,C,S){for(var I=Array(arguments.length-2),le=2;le<arguments.length;le++)I[le-2]=arguments[le];return T.prototype[C].apply(R,I)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(b,T,w){w||(w=0);const R=Array(16);if(typeof T=="string")for(var C=0;C<16;++C)R[C]=T.charCodeAt(w++)|T.charCodeAt(w++)<<8|T.charCodeAt(w++)<<16|T.charCodeAt(w++)<<24;else for(C=0;C<16;++C)R[C]=T[w++]|T[w++]<<8|T[w++]<<16|T[w++]<<24;T=b.g[0],w=b.g[1],C=b.g[2];let S=b.g[3],I;I=T+(S^w&(C^S))+R[0]+3614090360&4294967295,T=w+(I<<7&4294967295|I>>>25),I=S+(C^T&(w^C))+R[1]+3905402710&4294967295,S=T+(I<<12&4294967295|I>>>20),I=C+(w^S&(T^w))+R[2]+606105819&4294967295,C=S+(I<<17&4294967295|I>>>15),I=w+(T^C&(S^T))+R[3]+3250441966&4294967295,w=C+(I<<22&4294967295|I>>>10),I=T+(S^w&(C^S))+R[4]+4118548399&4294967295,T=w+(I<<7&4294967295|I>>>25),I=S+(C^T&(w^C))+R[5]+1200080426&4294967295,S=T+(I<<12&4294967295|I>>>20),I=C+(w^S&(T^w))+R[6]+2821735955&4294967295,C=S+(I<<17&4294967295|I>>>15),I=w+(T^C&(S^T))+R[7]+4249261313&4294967295,w=C+(I<<22&4294967295|I>>>10),I=T+(S^w&(C^S))+R[8]+1770035416&4294967295,T=w+(I<<7&4294967295|I>>>25),I=S+(C^T&(w^C))+R[9]+2336552879&4294967295,S=T+(I<<12&4294967295|I>>>20),I=C+(w^S&(T^w))+R[10]+4294925233&4294967295,C=S+(I<<17&4294967295|I>>>15),I=w+(T^C&(S^T))+R[11]+2304563134&4294967295,w=C+(I<<22&4294967295|I>>>10),I=T+(S^w&(C^S))+R[12]+1804603682&4294967295,T=w+(I<<7&4294967295|I>>>25),I=S+(C^T&(w^C))+R[13]+4254626195&4294967295,S=T+(I<<12&4294967295|I>>>20),I=C+(w^S&(T^w))+R[14]+2792965006&4294967295,C=S+(I<<17&4294967295|I>>>15),I=w+(T^C&(S^T))+R[15]+1236535329&4294967295,w=C+(I<<22&4294967295|I>>>10),I=T+(C^S&(w^C))+R[1]+4129170786&4294967295,T=w+(I<<5&4294967295|I>>>27),I=S+(w^C&(T^w))+R[6]+3225465664&4294967295,S=T+(I<<9&4294967295|I>>>23),I=C+(T^w&(S^T))+R[11]+643717713&4294967295,C=S+(I<<14&4294967295|I>>>18),I=w+(S^T&(C^S))+R[0]+3921069994&4294967295,w=C+(I<<20&4294967295|I>>>12),I=T+(C^S&(w^C))+R[5]+3593408605&4294967295,T=w+(I<<5&4294967295|I>>>27),I=S+(w^C&(T^w))+R[10]+38016083&4294967295,S=T+(I<<9&4294967295|I>>>23),I=C+(T^w&(S^T))+R[15]+3634488961&4294967295,C=S+(I<<14&4294967295|I>>>18),I=w+(S^T&(C^S))+R[4]+3889429448&4294967295,w=C+(I<<20&4294967295|I>>>12),I=T+(C^S&(w^C))+R[9]+568446438&4294967295,T=w+(I<<5&4294967295|I>>>27),I=S+(w^C&(T^w))+R[14]+3275163606&4294967295,S=T+(I<<9&4294967295|I>>>23),I=C+(T^w&(S^T))+R[3]+4107603335&4294967295,C=S+(I<<14&4294967295|I>>>18),I=w+(S^T&(C^S))+R[8]+1163531501&4294967295,w=C+(I<<20&4294967295|I>>>12),I=T+(C^S&(w^C))+R[13]+2850285829&4294967295,T=w+(I<<5&4294967295|I>>>27),I=S+(w^C&(T^w))+R[2]+4243563512&4294967295,S=T+(I<<9&4294967295|I>>>23),I=C+(T^w&(S^T))+R[7]+1735328473&4294967295,C=S+(I<<14&4294967295|I>>>18),I=w+(S^T&(C^S))+R[12]+2368359562&4294967295,w=C+(I<<20&4294967295|I>>>12),I=T+(w^C^S)+R[5]+4294588738&4294967295,T=w+(I<<4&4294967295|I>>>28),I=S+(T^w^C)+R[8]+2272392833&4294967295,S=T+(I<<11&4294967295|I>>>21),I=C+(S^T^w)+R[11]+1839030562&4294967295,C=S+(I<<16&4294967295|I>>>16),I=w+(C^S^T)+R[14]+4259657740&4294967295,w=C+(I<<23&4294967295|I>>>9),I=T+(w^C^S)+R[1]+2763975236&4294967295,T=w+(I<<4&4294967295|I>>>28),I=S+(T^w^C)+R[4]+1272893353&4294967295,S=T+(I<<11&4294967295|I>>>21),I=C+(S^T^w)+R[7]+4139469664&4294967295,C=S+(I<<16&4294967295|I>>>16),I=w+(C^S^T)+R[10]+3200236656&4294967295,w=C+(I<<23&4294967295|I>>>9),I=T+(w^C^S)+R[13]+681279174&4294967295,T=w+(I<<4&4294967295|I>>>28),I=S+(T^w^C)+R[0]+3936430074&4294967295,S=T+(I<<11&4294967295|I>>>21),I=C+(S^T^w)+R[3]+3572445317&4294967295,C=S+(I<<16&4294967295|I>>>16),I=w+(C^S^T)+R[6]+76029189&4294967295,w=C+(I<<23&4294967295|I>>>9),I=T+(w^C^S)+R[9]+3654602809&4294967295,T=w+(I<<4&4294967295|I>>>28),I=S+(T^w^C)+R[12]+3873151461&4294967295,S=T+(I<<11&4294967295|I>>>21),I=C+(S^T^w)+R[15]+530742520&4294967295,C=S+(I<<16&4294967295|I>>>16),I=w+(C^S^T)+R[2]+3299628645&4294967295,w=C+(I<<23&4294967295|I>>>9),I=T+(C^(w|~S))+R[0]+4096336452&4294967295,T=w+(I<<6&4294967295|I>>>26),I=S+(w^(T|~C))+R[7]+1126891415&4294967295,S=T+(I<<10&4294967295|I>>>22),I=C+(T^(S|~w))+R[14]+2878612391&4294967295,C=S+(I<<15&4294967295|I>>>17),I=w+(S^(C|~T))+R[5]+4237533241&4294967295,w=C+(I<<21&4294967295|I>>>11),I=T+(C^(w|~S))+R[12]+1700485571&4294967295,T=w+(I<<6&4294967295|I>>>26),I=S+(w^(T|~C))+R[3]+2399980690&4294967295,S=T+(I<<10&4294967295|I>>>22),I=C+(T^(S|~w))+R[10]+4293915773&4294967295,C=S+(I<<15&4294967295|I>>>17),I=w+(S^(C|~T))+R[1]+2240044497&4294967295,w=C+(I<<21&4294967295|I>>>11),I=T+(C^(w|~S))+R[8]+1873313359&4294967295,T=w+(I<<6&4294967295|I>>>26),I=S+(w^(T|~C))+R[15]+4264355552&4294967295,S=T+(I<<10&4294967295|I>>>22),I=C+(T^(S|~w))+R[6]+2734768916&4294967295,C=S+(I<<15&4294967295|I>>>17),I=w+(S^(C|~T))+R[13]+1309151649&4294967295,w=C+(I<<21&4294967295|I>>>11),I=T+(C^(w|~S))+R[4]+4149444226&4294967295,T=w+(I<<6&4294967295|I>>>26),I=S+(w^(T|~C))+R[11]+3174756917&4294967295,S=T+(I<<10&4294967295|I>>>22),I=C+(T^(S|~w))+R[2]+718787259&4294967295,C=S+(I<<15&4294967295|I>>>17),I=w+(S^(C|~T))+R[9]+3951481745&4294967295,b.g[0]=b.g[0]+T&4294967295,b.g[1]=b.g[1]+(C+(I<<21&4294967295|I>>>11))&4294967295,b.g[2]=b.g[2]+C&4294967295,b.g[3]=b.g[3]+S&4294967295}r.prototype.v=function(b,T){T===void 0&&(T=b.length);const w=T-this.blockSize,R=this.C;let C=this.h,S=0;for(;S<T;){if(C==0)for(;S<=w;)s(this,b,S),S+=this.blockSize;if(typeof b=="string"){for(;S<T;)if(R[C++]=b.charCodeAt(S++),C==this.blockSize){s(this,R),C=0;break}}else for(;S<T;)if(R[C++]=b[S++],C==this.blockSize){s(this,R),C=0;break}}this.h=C,this.o+=T},r.prototype.A=function(){var b=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);b[0]=128;for(var T=1;T<b.length-8;++T)b[T]=0;T=this.o*8;for(var w=b.length-8;w<b.length;++w)b[w]=T&255,T/=256;for(this.v(b),b=Array(16),T=0,w=0;w<4;++w)for(let R=0;R<32;R+=8)b[T++]=this.g[w]>>>R&255;return b};function i(b,T){var w=a;return Object.prototype.hasOwnProperty.call(w,b)?w[b]:w[b]=T(b)}function o(b,T){this.h=T;const w=[];let R=!0;for(let C=b.length-1;C>=0;C--){const S=b[C]|0;R&&S==T||(w[C]=S,R=!1)}this.g=w}var a={};function l(b){return-128<=b&&b<128?i(b,function(T){return new o([T|0],T<0?-1:0)}):new o([b|0],b<0?-1:0)}function u(b){if(isNaN(b)||!isFinite(b))return d;if(b<0)return N(u(-b));const T=[];let w=1;for(let R=0;b>=w;R++)T[R]=b/w|0,w*=4294967296;return new o(T,0)}function h(b,T){if(b.length==0)throw Error("number format error: empty string");if(T=T||10,T<2||36<T)throw Error("radix out of range: "+T);if(b.charAt(0)=="-")return N(h(b.substring(1),T));if(b.indexOf("-")>=0)throw Error('number format error: interior "-" character');const w=u(Math.pow(T,8));let R=d;for(let S=0;S<b.length;S+=8){var C=Math.min(8,b.length-S);const I=parseInt(b.substring(S,S+C),T);C<8?(C=u(Math.pow(T,C)),R=R.j(C).add(u(I))):(R=R.j(w),R=R.add(u(I)))}return R}var d=l(0),p=l(1),g=l(16777216);t=o.prototype,t.m=function(){if(y(this))return-N(this).m();let b=0,T=1;for(let w=0;w<this.g.length;w++){const R=this.i(w);b+=(R>=0?R:4294967296+R)*T,T*=4294967296}return b},t.toString=function(b){if(b=b||10,b<2||36<b)throw Error("radix out of range: "+b);if(_(this))return"0";if(y(this))return"-"+N(this).toString(b);const T=u(Math.pow(b,6));var w=this;let R="";for(;;){const C=k(w,T).g;w=D(w,C.j(T));let S=((w.g.length>0?w.g[0]:w.h)>>>0).toString(b);if(w=C,_(w))return S+R;for(;S.length<6;)S="0"+S;R=S+R}},t.i=function(b){return b<0?0:b<this.g.length?this.g[b]:this.h};function _(b){if(b.h!=0)return!1;for(let T=0;T<b.g.length;T++)if(b.g[T]!=0)return!1;return!0}function y(b){return b.h==-1}t.l=function(b){return b=D(this,b),y(b)?-1:_(b)?0:1};function N(b){const T=b.g.length,w=[];for(let R=0;R<T;R++)w[R]=~b.g[R];return new o(w,~b.h).add(p)}t.abs=function(){return y(this)?N(this):this},t.add=function(b){const T=Math.max(this.g.length,b.g.length),w=[];let R=0;for(let C=0;C<=T;C++){let S=R+(this.i(C)&65535)+(b.i(C)&65535),I=(S>>>16)+(this.i(C)>>>16)+(b.i(C)>>>16);R=I>>>16,S&=65535,I&=65535,w[C]=I<<16|S}return new o(w,w[w.length-1]&-2147483648?-1:0)};function D(b,T){return b.add(N(T))}t.j=function(b){if(_(this)||_(b))return d;if(y(this))return y(b)?N(this).j(N(b)):N(N(this).j(b));if(y(b))return N(this.j(N(b)));if(this.l(g)<0&&b.l(g)<0)return u(this.m()*b.m());const T=this.g.length+b.g.length,w=[];for(var R=0;R<2*T;R++)w[R]=0;for(R=0;R<this.g.length;R++)for(let C=0;C<b.g.length;C++){const S=this.i(R)>>>16,I=this.i(R)&65535,le=b.i(C)>>>16,Ie=b.i(C)&65535;w[2*R+2*C]+=I*Ie,O(w,2*R+2*C),w[2*R+2*C+1]+=S*Ie,O(w,2*R+2*C+1),w[2*R+2*C+1]+=I*le,O(w,2*R+2*C+1),w[2*R+2*C+2]+=S*le,O(w,2*R+2*C+2)}for(b=0;b<T;b++)w[b]=w[2*b+1]<<16|w[2*b];for(b=T;b<2*T;b++)w[b]=0;return new o(w,0)};function O(b,T){for(;(b[T]&65535)!=b[T];)b[T+1]+=b[T]>>>16,b[T]&=65535,T++}function E(b,T){this.g=b,this.h=T}function k(b,T){if(_(T))throw Error("division by zero");if(_(b))return new E(d,d);if(y(b))return T=k(N(b),T),new E(N(T.g),N(T.h));if(y(T))return T=k(b,N(T)),new E(N(T.g),T.h);if(b.g.length>30){if(y(b)||y(T))throw Error("slowDivide_ only works with positive integers.");for(var w=p,R=T;R.l(b)<=0;)w=V(w),R=V(R);var C=U(w,1),S=U(R,1);for(R=U(R,2),w=U(w,2);!_(R);){var I=S.add(R);I.l(b)<=0&&(C=C.add(w),S=I),R=U(R,1),w=U(w,1)}return T=D(b,C.j(T)),new E(C,T)}for(C=d;b.l(T)>=0;){for(w=Math.max(1,Math.floor(b.m()/T.m())),R=Math.ceil(Math.log(w)/Math.LN2),R=R<=48?1:Math.pow(2,R-48),S=u(w),I=S.j(T);y(I)||I.l(b)>0;)w-=R,S=u(w),I=S.j(T);_(S)&&(S=p),C=C.add(S),b=D(b,I)}return new E(C,b)}t.B=function(b){return k(this,b).h},t.and=function(b){const T=Math.max(this.g.length,b.g.length),w=[];for(let R=0;R<T;R++)w[R]=this.i(R)&b.i(R);return new o(w,this.h&b.h)},t.or=function(b){const T=Math.max(this.g.length,b.g.length),w=[];for(let R=0;R<T;R++)w[R]=this.i(R)|b.i(R);return new o(w,this.h|b.h)},t.xor=function(b){const T=Math.max(this.g.length,b.g.length),w=[];for(let R=0;R<T;R++)w[R]=this.i(R)^b.i(R);return new o(w,this.h^b.h)};function V(b){const T=b.g.length+1,w=[];for(let R=0;R<T;R++)w[R]=b.i(R)<<1|b.i(R-1)>>>31;return new o(w,b.h)}function U(b,T){const w=T>>5;T%=32;const R=b.g.length-w,C=[];for(let S=0;S<R;S++)C[S]=T>0?b.i(S+w)>>>T|b.i(S+w+1)<<32-T:b.i(S+w);return new o(C,b.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,Jv=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=u,o.fromString=h,Fr=o}).apply(typeof Hm<"u"?Hm:typeof self<"u"?self:typeof window<"u"?window:{});var Ma=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var Xv,co,Zv,Qa,ih,eE,tE,nE;(function(){var t,e=Object.defineProperty;function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof Ma=="object"&&Ma];for(var f=0;f<c.length;++f){var m=c[f];if(m&&m.Math==Math)return m}throw Error("Cannot find global object")}var r=n(this);function s(c,f){if(f)e:{var m=r;c=c.split(".");for(var v=0;v<c.length-1;v++){var x=c[v];if(!(x in m))break e;m=m[x]}c=c[c.length-1],v=m[c],f=f(v),f!=v&&f!=null&&e(m,c,{configurable:!0,writable:!0,value:f})}}s("Symbol.dispose",function(c){return c||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(c){return c||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(c){return c||function(f){var m=[],v;for(v in f)Object.prototype.hasOwnProperty.call(f,v)&&m.push([v,f[v]]);return m}});var i=i||{},o=this||self;function a(c){var f=typeof c;return f=="object"&&c!=null||f=="function"}function l(c,f,m){return c.call.apply(c.bind,arguments)}function u(c,f,m){return u=l,u.apply(null,arguments)}function h(c,f){var m=Array.prototype.slice.call(arguments,1);return function(){var v=m.slice();return v.push.apply(v,arguments),c.apply(this,v)}}function d(c,f){function m(){}m.prototype=f.prototype,c.Z=f.prototype,c.prototype=new m,c.prototype.constructor=c,c.Ob=function(v,x,L){for(var Y=Array(arguments.length-2),Ee=2;Ee<arguments.length;Ee++)Y[Ee-2]=arguments[Ee];return f.prototype[x].apply(v,Y)}}var p=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?c=>c&&AsyncContext.Snapshot.wrap(c):c=>c;function g(c){const f=c.length;if(f>0){const m=Array(f);for(let v=0;v<f;v++)m[v]=c[v];return m}return[]}function _(c,f){for(let v=1;v<arguments.length;v++){const x=arguments[v];var m=typeof x;if(m=m!="object"?m:x?Array.isArray(x)?"array":m:"null",m=="array"||m=="object"&&typeof x.length=="number"){m=c.length||0;const L=x.length||0;c.length=m+L;for(let Y=0;Y<L;Y++)c[m+Y]=x[Y]}else c.push(x)}}class y{constructor(f,m){this.i=f,this.j=m,this.h=0,this.g=null}get(){let f;return this.h>0?(this.h--,f=this.g,this.g=f.next,f.next=null):f=this.i(),f}}function N(c){o.setTimeout(()=>{throw c},0)}function D(){var c=b;let f=null;return c.g&&(f=c.g,c.g=c.g.next,c.g||(c.h=null),f.next=null),f}class O{constructor(){this.h=this.g=null}add(f,m){const v=E.get();v.set(f,m),this.h?this.h.next=v:this.g=v,this.h=v}}var E=new y(()=>new k,c=>c.reset());class k{constructor(){this.next=this.g=this.h=null}set(f,m){this.h=f,this.g=m,this.next=null}reset(){this.next=this.g=this.h=null}}let V,U=!1,b=new O,T=()=>{const c=Promise.resolve(void 0);V=()=>{c.then(w)}};function w(){for(var c;c=D();){try{c.h.call(c.g)}catch(m){N(m)}var f=E;f.j(c),f.h<100&&(f.h++,c.next=f.g,f.g=c)}U=!1}function R(){this.u=this.u,this.C=this.C}R.prototype.u=!1,R.prototype.dispose=function(){this.u||(this.u=!0,this.N())},R.prototype[Symbol.dispose]=function(){this.dispose()},R.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function C(c,f){this.type=c,this.g=this.target=f,this.defaultPrevented=!1}C.prototype.h=function(){this.defaultPrevented=!0};var S=(function(){if(!o.addEventListener||!Object.defineProperty)return!1;var c=!1,f=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const m=()=>{};o.addEventListener("test",m,f),o.removeEventListener("test",m,f)}catch{}return c})();function I(c){return/^[\s\xa0]*$/.test(c)}function le(c,f){C.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c&&this.init(c,f)}d(le,C),le.prototype.init=function(c,f){const m=this.type=c.type,v=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;this.target=c.target||c.srcElement,this.g=f,f=c.relatedTarget,f||(m=="mouseover"?f=c.fromElement:m=="mouseout"&&(f=c.toElement)),this.relatedTarget=f,v?(this.clientX=v.clientX!==void 0?v.clientX:v.pageX,this.clientY=v.clientY!==void 0?v.clientY:v.pageY,this.screenX=v.screenX||0,this.screenY=v.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=c.pointerType,this.state=c.state,this.i=c,c.defaultPrevented&&le.Z.h.call(this)},le.prototype.h=function(){le.Z.h.call(this);const c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var Ie="closure_listenable_"+(Math.random()*1e6|0),re=0;function pe(c,f,m,v,x){this.listener=c,this.proxy=null,this.src=f,this.type=m,this.capture=!!v,this.ha=x,this.key=++re,this.da=this.fa=!1}function ee(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function Ne(c,f,m){for(const v in c)f.call(m,c[v],v,c)}function In(c,f){for(const m in c)f.call(void 0,c[m],m,c)}function qt(c){const f={};for(const m in c)f[m]=c[m];return f}const wt="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Bn(c,f){let m,v;for(let x=1;x<arguments.length;x++){v=arguments[x];for(m in v)c[m]=v[m];for(let L=0;L<wt.length;L++)m=wt[L],Object.prototype.hasOwnProperty.call(v,m)&&(c[m]=v[m])}}function cn(c){this.src=c,this.g={},this.h=0}cn.prototype.add=function(c,f,m,v,x){const L=c.toString();c=this.g[L],c||(c=this.g[L]=[],this.h++);const Y=St(c,f,v,x);return Y>-1?(f=c[Y],m||(f.fa=!1)):(f=new pe(f,this.src,L,!!v,x),f.fa=m,c.push(f)),f};function ln(c,f){const m=f.type;if(m in c.g){var v=c.g[m],x=Array.prototype.indexOf.call(v,f,void 0),L;(L=x>=0)&&Array.prototype.splice.call(v,x,1),L&&(ee(f),c.g[m].length==0&&(delete c.g[m],c.h--))}}function St(c,f,m,v){for(let x=0;x<c.length;++x){const L=c[x];if(!L.da&&L.listener==f&&L.capture==!!m&&L.ha==v)return x}return-1}var H="closure_lm_"+(Math.random()*1e6|0),te={};function J(c,f,m,v,x){if(Array.isArray(f)){for(let L=0;L<f.length;L++)J(c,f[L],m,v,x);return null}return m=q(m),c&&c[Ie]?c.J(f,m,a(v)?!!v.capture:!1,x):ie(c,f,m,!1,v,x)}function ie(c,f,m,v,x,L){if(!f)throw Error("Invalid event type");const Y=a(x)?!!x.capture:!!x;let Ee=$(c);if(Ee||(c[H]=Ee=new cn(c)),m=Ee.add(f,m,v,Y,L),m.proxy)return m;if(v=we(),m.proxy=v,v.src=c,v.listener=m,c.addEventListener)S||(x=Y),x===void 0&&(x=!1),c.addEventListener(f.toString(),v,x);else if(c.attachEvent)c.attachEvent(P(f.toString()),v);else if(c.addListener&&c.removeListener)c.addListener(v);else throw Error("addEventListener and attachEvent are unavailable.");return m}function we(){function c(m){return f.call(c.src,c.listener,m)}const f=M;return c}function Le(c,f,m,v,x){if(Array.isArray(f))for(var L=0;L<f.length;L++)Le(c,f[L],m,v,x);else v=a(v)?!!v.capture:!!v,m=q(m),c&&c[Ie]?(c=c.i,L=String(f).toString(),L in c.g&&(f=c.g[L],m=St(f,m,v,x),m>-1&&(ee(f[m]),Array.prototype.splice.call(f,m,1),f.length==0&&(delete c.g[L],c.h--)))):c&&(c=$(c))&&(f=c.g[f.toString()],c=-1,f&&(c=St(f,m,v,x)),(m=c>-1?f[c]:null)&&A(m))}function A(c){if(typeof c!="number"&&c&&!c.da){var f=c.src;if(f&&f[Ie])ln(f.i,c);else{var m=c.type,v=c.proxy;f.removeEventListener?f.removeEventListener(m,v,c.capture):f.detachEvent?f.detachEvent(P(m),v):f.addListener&&f.removeListener&&f.removeListener(v),(m=$(f))?(ln(m,c),m.h==0&&(m.src=null,f[H]=null)):ee(c)}}}function P(c){return c in te?te[c]:te[c]="on"+c}function M(c,f){if(c.da)c=!0;else{f=new le(f,this);const m=c.listener,v=c.ha||c.src;c.fa&&A(c),c=m.call(v,f)}return c}function $(c){return c=c[H],c instanceof cn?c:null}var F="__closure_events_fn_"+(Math.random()*1e9>>>0);function q(c){return typeof c=="function"?c:(c[F]||(c[F]=function(f){return c.handleEvent(f)}),c[F])}function K(){R.call(this),this.i=new cn(this),this.M=this,this.G=null}d(K,R),K.prototype[Ie]=!0,K.prototype.removeEventListener=function(c,f,m,v){Le(this,c,f,m,v)};function G(c,f){var m,v=c.G;if(v)for(m=[];v;v=v.G)m.push(v);if(c=c.M,v=f.type||f,typeof f=="string")f=new C(f,c);else if(f instanceof C)f.target=f.target||c;else{var x=f;f=new C(v,c),Bn(f,x)}x=!0;let L,Y;if(m)for(Y=m.length-1;Y>=0;Y--)L=f.g=m[Y],x=Q(L,v,!0,f)&&x;if(L=f.g=c,x=Q(L,v,!0,f)&&x,x=Q(L,v,!1,f)&&x,m)for(Y=0;Y<m.length;Y++)L=f.g=m[Y],x=Q(L,v,!1,f)&&x}K.prototype.N=function(){if(K.Z.N.call(this),this.i){var c=this.i;for(const f in c.g){const m=c.g[f];for(let v=0;v<m.length;v++)ee(m[v]);delete c.g[f],c.h--}}this.G=null},K.prototype.J=function(c,f,m,v){return this.i.add(String(c),f,!1,m,v)},K.prototype.K=function(c,f,m,v){return this.i.add(String(c),f,!0,m,v)};function Q(c,f,m,v){if(f=c.i.g[String(f)],!f)return!0;f=f.concat();let x=!0;for(let L=0;L<f.length;++L){const Y=f[L];if(Y&&!Y.da&&Y.capture==m){const Ee=Y.listener,ht=Y.ha||Y.src;Y.fa&&ln(c.i,Y),x=Ee.call(ht,v)!==!1&&x}}return x&&!v.defaultPrevented}function W(c,f){if(typeof c!="function")if(c&&typeof c.handleEvent=="function")c=u(c.handleEvent,c);else throw Error("Invalid listener argument");return Number(f)>2147483647?-1:o.setTimeout(c,f||0)}function ce(c){c.g=W(()=>{c.g=null,c.i&&(c.i=!1,ce(c))},c.l);const f=c.h;c.h=null,c.m.apply(null,f)}class Z extends R{constructor(f,m){super(),this.m=f,this.l=m,this.h=null,this.i=!1,this.g=null}j(f){this.h=arguments,this.g?this.i=!0:ce(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function se(c){R.call(this),this.h=c,this.g={}}d(se,R);var me=[];function Te(c){Ne(c.g,function(f,m){this.g.hasOwnProperty(m)&&A(f)},c),c.g={}}se.prototype.N=function(){se.Z.N.call(this),Te(this)},se.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Oe=o.JSON.stringify,ke=o.JSON.parse,Ct=class{stringify(c){return o.JSON.stringify(c,void 0)}parse(c){return o.JSON.parse(c,void 0)}};function lt(){}function Ft(){}var ut={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Hn(){C.call(this,"d")}d(Hn,C);function Ls(){C.call(this,"c")}d(Ls,C);var et={},Wt=null;function Jr(){return Wt=Wt||new K}et.Ia="serverreachability";function Ui(c){C.call(this,et.Ia,c)}d(Ui,C);function Fi(c){const f=Jr();G(f,new Ui(f))}et.STAT_EVENT="statevent";function Xf(c,f){C.call(this,et.STAT_EVENT,c),this.stat=f}d(Xf,C);function xt(c){const f=Jr();G(f,new Xf(f,c))}et.Ja="timingevent";function Zf(c,f){C.call(this,et.Ja,c),this.size=f}d(Zf,C);function Bi(c,f){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){c()},f)}function Hi(){this.g=!0}Hi.prototype.ua=function(){this.g=!1};function Vw(c,f,m,v,x,L){c.info(function(){if(c.g)if(L){var Y="",Ee=L.split("&");for(let Ue=0;Ue<Ee.length;Ue++){var ht=Ee[Ue].split("=");if(ht.length>1){const mt=ht[0];ht=ht[1];const bn=mt.split("_");Y=bn.length>=2&&bn[1]=="type"?Y+(mt+"="+ht+"&"):Y+(mt+"=redacted&")}}}else Y=null;else Y=L;return"XMLHTTP REQ ("+v+") [attempt "+x+"]: "+f+`
`+m+`
`+Y})}function xw(c,f,m,v,x,L,Y){c.info(function(){return"XMLHTTP RESP ("+v+") [ attempt "+x+"]: "+f+`
`+m+`
`+L+" "+Y})}function Us(c,f,m,v){c.info(function(){return"XMLHTTP TEXT ("+f+"): "+Lw(c,m)+(v?" "+v:"")})}function Mw(c,f){c.info(function(){return"TIMEOUT: "+f})}Hi.prototype.info=function(){};function Lw(c,f){if(!c.g)return f;if(!f)return null;try{const L=JSON.parse(f);if(L){for(c=0;c<L.length;c++)if(Array.isArray(L[c])){var m=L[c];if(!(m.length<2)){var v=m[1];if(Array.isArray(v)&&!(v.length<1)){var x=v[0];if(x!="noop"&&x!="stop"&&x!="close")for(let Y=1;Y<v.length;Y++)v[Y]=""}}}}return Oe(L)}catch{return f}}var da={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},ed={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},td;function bl(){}d(bl,lt),bl.prototype.g=function(){return new XMLHttpRequest},td=new bl;function ji(c){return encodeURIComponent(String(c))}function Uw(c){var f=1;c=c.split(":");const m=[];for(;f>0&&c.length;)m.push(c.shift()),f--;return c.length&&m.push(c.join(":")),m}function dr(c,f,m,v){this.j=c,this.i=f,this.l=m,this.S=v||1,this.V=new se(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new nd}function nd(){this.i=null,this.g="",this.h=!1}var rd={},Rl={};function Sl(c,f,m){c.M=1,c.A=ma(An(f)),c.u=m,c.R=!0,sd(c,null)}function sd(c,f){c.F=Date.now(),pa(c),c.B=An(c.A);var m=c.B,v=c.S;Array.isArray(v)||(v=[String(v)]),_d(m.i,"t",v),c.C=0,m=c.j.L,c.h=new nd,c.g=xd(c.j,m?f:null,!c.u),c.P>0&&(c.O=new Z(u(c.Y,c,c.g),c.P)),f=c.V,m=c.g,v=c.ba;var x="readystatechange";Array.isArray(x)||(x&&(me[0]=x.toString()),x=me);for(let L=0;L<x.length;L++){const Y=J(m,x[L],v||f.handleEvent,!1,f.h||f);if(!Y)break;f.g[Y.key]=Y}f=c.J?qt(c.J):{},c.u?(c.v||(c.v="POST"),f["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.B,c.v,c.u,f)):(c.v="GET",c.g.ea(c.B,c.v,null,f)),Fi(),Vw(c.i,c.v,c.B,c.l,c.S,c.u)}dr.prototype.ba=function(c){c=c.target;const f=this.O;f&&gr(c)==3?f.j():this.Y(c)},dr.prototype.Y=function(c){try{if(c==this.g)e:{const Ee=gr(this.g),ht=this.g.ya(),Ue=this.g.ca();if(!(Ee<3)&&(Ee!=3||this.g&&(this.h.h||this.g.la()||Ad(this.g)))){this.K||Ee!=4||ht==7||(ht==8||Ue<=0?Fi(3):Fi(2)),Cl(this);var f=this.g.ca();this.X=f;var m=Fw(this);if(this.o=f==200,xw(this.i,this.v,this.B,this.l,this.S,Ee,f),this.o){if(this.U&&!this.L){t:{if(this.g){var v,x=this.g;if((v=x.g?x.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!I(v)){var L=v;break t}}L=null}if(c=L)Us(this.i,this.l,c,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Pl(this,c);else{this.o=!1,this.m=3,xt(12),Xr(this),$i(this);break e}}if(this.R){c=!0;let mt;for(;!this.K&&this.C<m.length;)if(mt=Bw(this,m),mt==Rl){Ee==4&&(this.m=4,xt(14),c=!1),Us(this.i,this.l,null,"[Incomplete Response]");break}else if(mt==rd){this.m=4,xt(15),Us(this.i,this.l,m,"[Invalid Chunk]"),c=!1;break}else Us(this.i,this.l,mt,null),Pl(this,mt);if(id(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ee!=4||m.length!=0||this.h.h||(this.m=1,xt(16),c=!1),this.o=this.o&&c,!c)Us(this.i,this.l,m,"[Invalid Chunked Response]"),Xr(this),$i(this);else if(m.length>0&&!this.W){this.W=!0;var Y=this.j;Y.g==this&&Y.aa&&!Y.P&&(Y.j.info("Great, no buffering proxy detected. Bytes received: "+m.length),Ll(Y),Y.P=!0,xt(11))}}else Us(this.i,this.l,m,null),Pl(this,m);Ee==4&&Xr(this),this.o&&!this.K&&(Ee==4?Nd(this.j,this):(this.o=!1,pa(this)))}else eT(this.g),f==400&&m.indexOf("Unknown SID")>0?(this.m=3,xt(12)):(this.m=0,xt(13)),Xr(this),$i(this)}}}catch{}};function Fw(c){if(!id(c))return c.g.la();const f=Ad(c.g);if(f==="")return"";let m="";const v=f.length,x=gr(c.g)==4;if(!c.h.i){if(typeof TextDecoder>"u")return Xr(c),$i(c),"";c.h.i=new o.TextDecoder}for(let L=0;L<v;L++)c.h.h=!0,m+=c.h.i.decode(f[L],{stream:!(x&&L==v-1)});return f.length=0,c.h.g+=m,c.C=0,c.h.g}function id(c){return c.g?c.v=="GET"&&c.M!=2&&c.j.Aa:!1}function Bw(c,f){var m=c.C,v=f.indexOf(`
`,m);return v==-1?Rl:(m=Number(f.substring(m,v)),isNaN(m)?rd:(v+=1,v+m>f.length?Rl:(f=f.slice(v,v+m),c.C=v+m,f)))}dr.prototype.cancel=function(){this.K=!0,Xr(this)};function pa(c){c.T=Date.now()+c.H,od(c,c.H)}function od(c,f){if(c.D!=null)throw Error("WatchDog timer not null");c.D=Bi(u(c.aa,c),f)}function Cl(c){c.D&&(o.clearTimeout(c.D),c.D=null)}dr.prototype.aa=function(){this.D=null;const c=Date.now();c-this.T>=0?(Mw(this.i,this.B),this.M!=2&&(Fi(),xt(17)),Xr(this),this.m=2,$i(this)):od(this,this.T-c)};function $i(c){c.j.I==0||c.K||Nd(c.j,c)}function Xr(c){Cl(c);var f=c.O;f&&typeof f.dispose=="function"&&f.dispose(),c.O=null,Te(c.V),c.g&&(f=c.g,c.g=null,f.abort(),f.dispose())}function Pl(c,f){try{var m=c.j;if(m.I!=0&&(m.g==c||kl(m.h,c))){if(!c.L&&kl(m.h,c)&&m.I==3){try{var v=m.Ba.g.parse(f)}catch{v=null}if(Array.isArray(v)&&v.length==3){var x=v;if(x[0]==0){e:if(!m.v){if(m.g)if(m.g.F+3e3<c.F)Ea(m),ya(m);else break e;Ml(m),xt(18)}}else m.xa=x[1],0<m.xa-m.K&&x[2]<37500&&m.F&&m.A==0&&!m.C&&(m.C=Bi(u(m.Va,m),6e3));ld(m.h)<=1&&m.ta&&(m.ta=void 0)}else es(m,11)}else if((c.L||m.g==c)&&Ea(m),!I(f))for(x=m.Ba.g.parse(f),f=0;f<x.length;f++){let Ue=x[f];const mt=Ue[0];if(!(mt<=m.K))if(m.K=mt,Ue=Ue[1],m.I==2)if(Ue[0]=="c"){m.M=Ue[1],m.ba=Ue[2];const bn=Ue[3];bn!=null&&(m.ka=bn,m.j.info("VER="+m.ka));const ts=Ue[4];ts!=null&&(m.za=ts,m.j.info("SVER="+m.za));const _r=Ue[5];_r!=null&&typeof _r=="number"&&_r>0&&(v=1.5*_r,m.O=v,m.j.info("backChannelRequestTimeoutMs_="+v)),v=m;const yr=c.g;if(yr){const Ta=yr.g?yr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ta){var L=v.h;L.g||Ta.indexOf("spdy")==-1&&Ta.indexOf("quic")==-1&&Ta.indexOf("h2")==-1||(L.j=L.l,L.g=new Set,L.h&&(Nl(L,L.h),L.h=null))}if(v.G){const Ul=yr.g?yr.g.getResponseHeader("X-HTTP-Session-Id"):null;Ul&&(v.wa=Ul,qe(v.J,v.G,Ul))}}m.I=3,m.l&&m.l.ra(),m.aa&&(m.T=Date.now()-c.F,m.j.info("Handshake RTT: "+m.T+"ms")),v=m;var Y=c;if(v.na=Vd(v,v.L?v.ba:null,v.W),Y.L){ud(v.h,Y);var Ee=Y,ht=v.O;ht&&(Ee.H=ht),Ee.D&&(Cl(Ee),pa(Ee)),v.g=Y}else Pd(v);m.i.length>0&&va(m)}else Ue[0]!="stop"&&Ue[0]!="close"||es(m,7);else m.I==3&&(Ue[0]=="stop"||Ue[0]=="close"?Ue[0]=="stop"?es(m,7):xl(m):Ue[0]!="noop"&&m.l&&m.l.qa(Ue),m.A=0)}}Fi(4)}catch{}}var Hw=class{constructor(c,f){this.g=c,this.map=f}};function ad(c){this.l=c||10,o.PerformanceNavigationTiming?(c=o.performance.getEntriesByType("navigation"),c=c.length>0&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function cd(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function ld(c){return c.h?1:c.g?c.g.size:0}function kl(c,f){return c.h?c.h==f:c.g?c.g.has(f):!1}function Nl(c,f){c.g?c.g.add(f):c.h=f}function ud(c,f){c.h&&c.h==f?c.h=null:c.g&&c.g.has(f)&&c.g.delete(f)}ad.prototype.cancel=function(){if(this.i=hd(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function hd(c){if(c.h!=null)return c.i.concat(c.h.G);if(c.g!=null&&c.g.size!==0){let f=c.i;for(const m of c.g.values())f=f.concat(m.G);return f}return g(c.i)}var fd=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function jw(c,f){if(c){c=c.split("&");for(let m=0;m<c.length;m++){const v=c[m].indexOf("=");let x,L=null;v>=0?(x=c[m].substring(0,v),L=c[m].substring(v+1)):x=c[m],f(x,L?decodeURIComponent(L.replace(/\+/g," ")):"")}}}function pr(c){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let f;c instanceof pr?(this.l=c.l,qi(this,c.j),this.o=c.o,this.g=c.g,Wi(this,c.u),this.h=c.h,Ol(this,yd(c.i)),this.m=c.m):c&&(f=String(c).match(fd))?(this.l=!1,qi(this,f[1]||"",!0),this.o=Gi(f[2]||""),this.g=Gi(f[3]||"",!0),Wi(this,f[4]),this.h=Gi(f[5]||"",!0),Ol(this,f[6]||"",!0),this.m=Gi(f[7]||"")):(this.l=!1,this.i=new zi(null,this.l))}pr.prototype.toString=function(){const c=[];var f=this.j;f&&c.push(Ki(f,dd,!0),":");var m=this.g;return(m||f=="file")&&(c.push("//"),(f=this.o)&&c.push(Ki(f,dd,!0),"@"),c.push(ji(m).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m=this.u,m!=null&&c.push(":",String(m))),(m=this.h)&&(this.g&&m.charAt(0)!="/"&&c.push("/"),c.push(Ki(m,m.charAt(0)=="/"?Ww:qw,!0))),(m=this.i.toString())&&c.push("?",m),(m=this.m)&&c.push("#",Ki(m,Kw)),c.join("")},pr.prototype.resolve=function(c){const f=An(this);let m=!!c.j;m?qi(f,c.j):m=!!c.o,m?f.o=c.o:m=!!c.g,m?f.g=c.g:m=c.u!=null;var v=c.h;if(m)Wi(f,c.u);else if(m=!!c.h){if(v.charAt(0)!="/")if(this.g&&!this.h)v="/"+v;else{var x=f.h.lastIndexOf("/");x!=-1&&(v=f.h.slice(0,x+1)+v)}if(x=v,x==".."||x==".")v="";else if(x.indexOf("./")!=-1||x.indexOf("/.")!=-1){v=x.lastIndexOf("/",0)==0,x=x.split("/");const L=[];for(let Y=0;Y<x.length;){const Ee=x[Y++];Ee=="."?v&&Y==x.length&&L.push(""):Ee==".."?((L.length>1||L.length==1&&L[0]!="")&&L.pop(),v&&Y==x.length&&L.push("")):(L.push(Ee),v=!0)}v=L.join("/")}else v=x}return m?f.h=v:m=c.i.toString()!=="",m?Ol(f,yd(c.i)):m=!!c.m,m&&(f.m=c.m),f};function An(c){return new pr(c)}function qi(c,f,m){c.j=m?Gi(f,!0):f,c.j&&(c.j=c.j.replace(/:$/,""))}function Wi(c,f){if(f){if(f=Number(f),isNaN(f)||f<0)throw Error("Bad port number "+f);c.u=f}else c.u=null}function Ol(c,f,m){f instanceof zi?(c.i=f,zw(c.i,c.l)):(m||(f=Ki(f,Gw)),c.i=new zi(f,c.l))}function qe(c,f,m){c.i.set(f,m)}function ma(c){return qe(c,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),c}function Gi(c,f){return c?f?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function Ki(c,f,m){return typeof c=="string"?(c=encodeURI(c).replace(f,$w),m&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function $w(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var dd=/[#\/\?@]/g,qw=/[#\?:]/g,Ww=/[#\?]/g,Gw=/[#\?@]/g,Kw=/#/g;function zi(c,f){this.h=this.g=null,this.i=c||null,this.j=!!f}function Zr(c){c.g||(c.g=new Map,c.h=0,c.i&&jw(c.i,function(f,m){c.add(decodeURIComponent(f.replace(/\+/g," ")),m)}))}t=zi.prototype,t.add=function(c,f){Zr(this),this.i=null,c=Fs(this,c);let m=this.g.get(c);return m||this.g.set(c,m=[]),m.push(f),this.h+=1,this};function pd(c,f){Zr(c),f=Fs(c,f),c.g.has(f)&&(c.i=null,c.h-=c.g.get(f).length,c.g.delete(f))}function md(c,f){return Zr(c),f=Fs(c,f),c.g.has(f)}t.forEach=function(c,f){Zr(this),this.g.forEach(function(m,v){m.forEach(function(x){c.call(f,x,v,this)},this)},this)};function gd(c,f){Zr(c);let m=[];if(typeof f=="string")md(c,f)&&(m=m.concat(c.g.get(Fs(c,f))));else for(c=Array.from(c.g.values()),f=0;f<c.length;f++)m=m.concat(c[f]);return m}t.set=function(c,f){return Zr(this),this.i=null,c=Fs(this,c),md(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[f]),this.h+=1,this},t.get=function(c,f){return c?(c=gd(this,c),c.length>0?String(c[0]):f):f};function _d(c,f,m){pd(c,f),m.length>0&&(c.i=null,c.g.set(Fs(c,f),g(m)),c.h+=m.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],f=Array.from(this.g.keys());for(let v=0;v<f.length;v++){var m=f[v];const x=ji(m);m=gd(this,m);for(let L=0;L<m.length;L++){let Y=x;m[L]!==""&&(Y+="="+ji(m[L])),c.push(Y)}}return this.i=c.join("&")};function yd(c){const f=new zi;return f.i=c.i,c.g&&(f.g=new Map(c.g),f.h=c.h),f}function Fs(c,f){return f=String(f),c.j&&(f=f.toLowerCase()),f}function zw(c,f){f&&!c.j&&(Zr(c),c.i=null,c.g.forEach(function(m,v){const x=v.toLowerCase();v!=x&&(pd(this,v),_d(this,x,m))},c)),c.j=f}function Qw(c,f){const m=new Hi;if(o.Image){const v=new Image;v.onload=h(mr,m,"TestLoadImage: loaded",!0,f,v),v.onerror=h(mr,m,"TestLoadImage: error",!1,f,v),v.onabort=h(mr,m,"TestLoadImage: abort",!1,f,v),v.ontimeout=h(mr,m,"TestLoadImage: timeout",!1,f,v),o.setTimeout(function(){v.ontimeout&&v.ontimeout()},1e4),v.src=c}else f(!1)}function Yw(c,f){const m=new Hi,v=new AbortController,x=setTimeout(()=>{v.abort(),mr(m,"TestPingServer: timeout",!1,f)},1e4);fetch(c,{signal:v.signal}).then(L=>{clearTimeout(x),L.ok?mr(m,"TestPingServer: ok",!0,f):mr(m,"TestPingServer: server error",!1,f)}).catch(()=>{clearTimeout(x),mr(m,"TestPingServer: error",!1,f)})}function mr(c,f,m,v,x){try{x&&(x.onload=null,x.onerror=null,x.onabort=null,x.ontimeout=null),v(m)}catch{}}function Jw(){this.g=new Ct}function Dl(c){this.i=c.Sb||null,this.h=c.ab||!1}d(Dl,lt),Dl.prototype.g=function(){return new ga(this.i,this.h)};function ga(c,f){K.call(this),this.H=c,this.o=f,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}d(ga,K),t=ga.prototype,t.open=function(c,f){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=c,this.D=f,this.readyState=1,Yi(this)},t.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const f={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};c&&(f.body=c),(this.H||o).fetch(new Request(this.D,f)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Qi(this)),this.readyState=0},t.Pa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,Yi(this)),this.g&&(this.readyState=3,Yi(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;vd(this)}else c.text().then(this.Oa.bind(this),this.ga.bind(this))};function vd(c){c.j.read().then(c.Ma.bind(c)).catch(c.ga.bind(c))}t.Ma=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var f=c.value?c.value:new Uint8Array(0);(f=this.B.decode(f,{stream:!c.done}))&&(this.response=this.responseText+=f)}c.done?Qi(this):Yi(this),this.readyState==3&&vd(this)}},t.Oa=function(c){this.g&&(this.response=this.responseText=c,Qi(this))},t.Na=function(c){this.g&&(this.response=c,Qi(this))},t.ga=function(){this.g&&Qi(this)};function Qi(c){c.readyState=4,c.l=null,c.j=null,c.B=null,Yi(c)}t.setRequestHeader=function(c,f){this.A.append(c,f)},t.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],f=this.h.entries();for(var m=f.next();!m.done;)m=m.value,c.push(m[0]+": "+m[1]),m=f.next();return c.join(`\r
`)};function Yi(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(ga.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function Ed(c){let f="";return Ne(c,function(m,v){f+=v,f+=":",f+=m,f+=`\r
`}),f}function Vl(c,f,m){e:{for(v in m){var v=!1;break e}v=!0}v||(m=Ed(m),typeof c=="string"?m!=null&&ji(m):qe(c,f,m))}function ze(c){K.call(this),this.headers=new Map,this.L=c||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}d(ze,K);var Xw=/^https?$/i,Zw=["POST","PUT"];t=ze.prototype,t.Fa=function(c){this.H=c},t.ea=function(c,f,m,v){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);f=f?f.toUpperCase():"GET",this.D=c,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():td.g(),this.g.onreadystatechange=p(u(this.Ca,this));try{this.B=!0,this.g.open(f,String(c),!0),this.B=!1}catch(L){wd(this,L);return}if(c=m||"",m=new Map(this.headers),v)if(Object.getPrototypeOf(v)===Object.prototype)for(var x in v)m.set(x,v[x]);else if(typeof v.keys=="function"&&typeof v.get=="function")for(const L of v.keys())m.set(L,v.get(L));else throw Error("Unknown input type for opt_headers: "+String(v));v=Array.from(m.keys()).find(L=>L.toLowerCase()=="content-type"),x=o.FormData&&c instanceof o.FormData,!(Array.prototype.indexOf.call(Zw,f,void 0)>=0)||v||x||m.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[L,Y]of m)this.g.setRequestHeader(L,Y);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(c),this.v=!1}catch(L){wd(this,L)}};function wd(c,f){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=f,c.o=5,Td(c),_a(c)}function Td(c){c.A||(c.A=!0,G(c,"complete"),G(c,"error"))}t.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=c||7,G(this,"complete"),G(this,"abort"),_a(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),_a(this,!0)),ze.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?Id(this):this.Xa())},t.Xa=function(){Id(this)};function Id(c){if(c.h&&typeof i<"u"){if(c.v&&gr(c)==4)setTimeout(c.Ca.bind(c),0);else if(G(c,"readystatechange"),gr(c)==4){c.h=!1;try{const L=c.ca();e:switch(L){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var f=!0;break e;default:f=!1}var m;if(!(m=f)){var v;if(v=L===0){let Y=String(c.D).match(fd)[1]||null;!Y&&o.self&&o.self.location&&(Y=o.self.location.protocol.slice(0,-1)),v=!Xw.test(Y?Y.toLowerCase():"")}m=v}if(m)G(c,"complete"),G(c,"success");else{c.o=6;try{var x=gr(c)>2?c.g.statusText:""}catch{x=""}c.l=x+" ["+c.ca()+"]",Td(c)}}finally{_a(c)}}}}function _a(c,f){if(c.g){c.m&&(clearTimeout(c.m),c.m=null);const m=c.g;c.g=null,f||G(c,"ready");try{m.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function gr(c){return c.g?c.g.readyState:0}t.ca=function(){try{return gr(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(c){if(this.g){var f=this.g.responseText;return c&&f.indexOf(c)==0&&(f=f.substring(c.length)),ke(f)}};function Ad(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.F){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function eT(c){const f={};c=(c.g&&gr(c)>=2&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let v=0;v<c.length;v++){if(I(c[v]))continue;var m=Uw(c[v]);const x=m[0];if(m=m[1],typeof m!="string")continue;m=m.trim();const L=f[x]||[];f[x]=L,L.push(m)}In(f,function(v){return v.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ji(c,f,m){return m&&m.internalChannelParams&&m.internalChannelParams[c]||f}function bd(c){this.za=0,this.i=[],this.j=new Hi,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Ji("failFast",!1,c),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Ji("baseRetryDelayMs",5e3,c),this.Za=Ji("retryDelaySeedMs",1e4,c),this.Ta=Ji("forwardChannelMaxRetries",2,c),this.va=Ji("forwardChannelRequestTimeoutMs",2e4,c),this.ma=c&&c.xmlHttpFactory||void 0,this.Ua=c&&c.Rb||void 0,this.Aa=c&&c.useFetchStreams||!1,this.O=void 0,this.L=c&&c.supportsCrossDomainXhr||!1,this.M="",this.h=new ad(c&&c.concurrentRequestLimit),this.Ba=new Jw,this.S=c&&c.fastHandshake||!1,this.R=c&&c.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=c&&c.Pb||!1,c&&c.ua&&this.j.ua(),c&&c.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&c&&c.detectBufferingProxy||!1,this.ia=void 0,c&&c.longPollingTimeout&&c.longPollingTimeout>0&&(this.ia=c.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=bd.prototype,t.ka=8,t.I=1,t.connect=function(c,f,m,v){xt(0),this.W=c,this.H=f||{},m&&v!==void 0&&(this.H.OSID=m,this.H.OAID=v),this.F=this.X,this.J=Vd(this,null,this.W),va(this)};function xl(c){if(Rd(c),c.I==3){var f=c.V++,m=An(c.J);if(qe(m,"SID",c.M),qe(m,"RID",f),qe(m,"TYPE","terminate"),Xi(c,m),f=new dr(c,c.j,f),f.M=2,f.A=ma(An(m)),m=!1,o.navigator&&o.navigator.sendBeacon)try{m=o.navigator.sendBeacon(f.A.toString(),"")}catch{}!m&&o.Image&&(new Image().src=f.A,m=!0),m||(f.g=xd(f.j,null),f.g.ea(f.A)),f.F=Date.now(),pa(f)}Dd(c)}function ya(c){c.g&&(Ll(c),c.g.cancel(),c.g=null)}function Rd(c){ya(c),c.v&&(o.clearTimeout(c.v),c.v=null),Ea(c),c.h.cancel(),c.m&&(typeof c.m=="number"&&o.clearTimeout(c.m),c.m=null)}function va(c){if(!cd(c.h)&&!c.m){c.m=!0;var f=c.Ea;V||T(),U||(V(),U=!0),b.add(f,c),c.D=0}}function tT(c,f){return ld(c.h)>=c.h.j-(c.m?1:0)?!1:c.m?(c.i=f.G.concat(c.i),!0):c.I==1||c.I==2||c.D>=(c.Sa?0:c.Ta)?!1:(c.m=Bi(u(c.Ea,c,f),Od(c,c.D)),c.D++,!0)}t.Ea=function(c){if(this.m)if(this.m=null,this.I==1){if(!c){this.V=Math.floor(Math.random()*1e5),c=this.V++;const x=new dr(this,this.j,c);let L=this.o;if(this.U&&(L?(L=qt(L),Bn(L,this.U)):L=this.U),this.u!==null||this.R||(x.J=L,L=null),this.S)e:{for(var f=0,m=0;m<this.i.length;m++){t:{var v=this.i[m];if("__data__"in v.map&&(v=v.map.__data__,typeof v=="string")){v=v.length;break t}v=void 0}if(v===void 0)break;if(f+=v,f>4096){f=m;break e}if(f===4096||m===this.i.length-1){f=m+1;break e}}f=1e3}else f=1e3;f=Cd(this,x,f),m=An(this.J),qe(m,"RID",c),qe(m,"CVER",22),this.G&&qe(m,"X-HTTP-Session-Id",this.G),Xi(this,m),L&&(this.R?f="headers="+ji(Ed(L))+"&"+f:this.u&&Vl(m,this.u,L)),Nl(this.h,x),this.Ra&&qe(m,"TYPE","init"),this.S?(qe(m,"$req",f),qe(m,"SID","null"),x.U=!0,Sl(x,m,null)):Sl(x,m,f),this.I=2}}else this.I==3&&(c?Sd(this,c):this.i.length==0||cd(this.h)||Sd(this))};function Sd(c,f){var m;f?m=f.l:m=c.V++;const v=An(c.J);qe(v,"SID",c.M),qe(v,"RID",m),qe(v,"AID",c.K),Xi(c,v),c.u&&c.o&&Vl(v,c.u,c.o),m=new dr(c,c.j,m,c.D+1),c.u===null&&(m.J=c.o),f&&(c.i=f.G.concat(c.i)),f=Cd(c,m,1e3),m.H=Math.round(c.va*.5)+Math.round(c.va*.5*Math.random()),Nl(c.h,m),Sl(m,v,f)}function Xi(c,f){c.H&&Ne(c.H,function(m,v){qe(f,v,m)}),c.l&&Ne({},function(m,v){qe(f,v,m)})}function Cd(c,f,m){m=Math.min(c.i.length,m);const v=c.l?u(c.l.Ka,c.l,c):null;e:{var x=c.i;let Ee=-1;for(;;){const ht=["count="+m];Ee==-1?m>0?(Ee=x[0].g,ht.push("ofs="+Ee)):Ee=0:ht.push("ofs="+Ee);let Ue=!0;for(let mt=0;mt<m;mt++){var L=x[mt].g;const bn=x[mt].map;if(L-=Ee,L<0)Ee=Math.max(0,x[mt].g-100),Ue=!1;else try{L="req"+L+"_"||"";try{var Y=bn instanceof Map?bn:Object.entries(bn);for(const[ts,_r]of Y){let yr=_r;a(_r)&&(yr=Oe(_r)),ht.push(L+ts+"="+encodeURIComponent(yr))}}catch(ts){throw ht.push(L+"type="+encodeURIComponent("_badmap")),ts}}catch{v&&v(bn)}}if(Ue){Y=ht.join("&");break e}}Y=void 0}return c=c.i.splice(0,m),f.G=c,Y}function Pd(c){if(!c.g&&!c.v){c.Y=1;var f=c.Da;V||T(),U||(V(),U=!0),b.add(f,c),c.A=0}}function Ml(c){return c.g||c.v||c.A>=3?!1:(c.Y++,c.v=Bi(u(c.Da,c),Od(c,c.A)),c.A++,!0)}t.Da=function(){if(this.v=null,kd(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var c=4*this.T;this.j.info("BP detection timer enabled: "+c),this.B=Bi(u(this.Wa,this),c)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,xt(10),ya(this),kd(this))};function Ll(c){c.B!=null&&(o.clearTimeout(c.B),c.B=null)}function kd(c){c.g=new dr(c,c.j,"rpc",c.Y),c.u===null&&(c.g.J=c.o),c.g.P=0;var f=An(c.na);qe(f,"RID","rpc"),qe(f,"SID",c.M),qe(f,"AID",c.K),qe(f,"CI",c.F?"0":"1"),!c.F&&c.ia&&qe(f,"TO",c.ia),qe(f,"TYPE","xmlhttp"),Xi(c,f),c.u&&c.o&&Vl(f,c.u,c.o),c.O&&(c.g.H=c.O);var m=c.g;c=c.ba,m.M=1,m.A=ma(An(f)),m.u=null,m.R=!0,sd(m,c)}t.Va=function(){this.C!=null&&(this.C=null,ya(this),Ml(this),xt(19))};function Ea(c){c.C!=null&&(o.clearTimeout(c.C),c.C=null)}function Nd(c,f){var m=null;if(c.g==f){Ea(c),Ll(c),c.g=null;var v=2}else if(kl(c.h,f))m=f.G,ud(c.h,f),v=1;else return;if(c.I!=0){if(f.o)if(v==1){m=f.u?f.u.length:0,f=Date.now()-f.F;var x=c.D;v=Jr(),G(v,new Zf(v,m)),va(c)}else Pd(c);else if(x=f.m,x==3||x==0&&f.X>0||!(v==1&&tT(c,f)||v==2&&Ml(c)))switch(m&&m.length>0&&(f=c.h,f.i=f.i.concat(m)),x){case 1:es(c,5);break;case 4:es(c,10);break;case 3:es(c,6);break;default:es(c,2)}}}function Od(c,f){let m=c.Qa+Math.floor(Math.random()*c.Za);return c.isActive()||(m*=2),m*f}function es(c,f){if(c.j.info("Error code "+f),f==2){var m=u(c.bb,c),v=c.Ua;const x=!v;v=new pr(v||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||qi(v,"https"),ma(v),x?Qw(v.toString(),m):Yw(v.toString(),m)}else xt(2);c.I=0,c.l&&c.l.pa(f),Dd(c),Rd(c)}t.bb=function(c){c?(this.j.info("Successfully pinged google.com"),xt(2)):(this.j.info("Failed to ping google.com"),xt(1))};function Dd(c){if(c.I=0,c.ja=[],c.l){const f=hd(c.h);(f.length!=0||c.i.length!=0)&&(_(c.ja,f),_(c.ja,c.i),c.h.i.length=0,g(c.i),c.i.length=0),c.l.oa()}}function Vd(c,f,m){var v=m instanceof pr?An(m):new pr(m);if(v.g!="")f&&(v.g=f+"."+v.g),Wi(v,v.u);else{var x=o.location;v=x.protocol,f=f?f+"."+x.hostname:x.hostname,x=+x.port;const L=new pr(null);v&&qi(L,v),f&&(L.g=f),x&&Wi(L,x),m&&(L.h=m),v=L}return m=c.G,f=c.wa,m&&f&&qe(v,m,f),qe(v,"VER",c.ka),Xi(c,v),v}function xd(c,f,m){if(f&&!c.L)throw Error("Can't create secondary domain capable XhrIo object.");return f=c.Aa&&!c.ma?new ze(new Dl({ab:m})):new ze(c.ma),f.Fa(c.L),f}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Md(){}t=Md.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function wa(){}wa.prototype.g=function(c,f){return new Gt(c,f)};function Gt(c,f){K.call(this),this.g=new bd(f),this.l=c,this.h=f&&f.messageUrlParams||null,c=f&&f.messageHeaders||null,f&&f.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=f&&f.initMessageHeaders||null,f&&f.messageContentType&&(c?c["X-WebChannel-Content-Type"]=f.messageContentType:c={"X-WebChannel-Content-Type":f.messageContentType}),f&&f.sa&&(c?c["X-WebChannel-Client-Profile"]=f.sa:c={"X-WebChannel-Client-Profile":f.sa}),this.g.U=c,(c=f&&f.Qb)&&!I(c)&&(this.g.u=c),this.A=f&&f.supportsCrossDomainXhr||!1,this.v=f&&f.sendRawJson||!1,(f=f&&f.httpSessionIdParam)&&!I(f)&&(this.g.G=f,c=this.h,c!==null&&f in c&&(c=this.h,f in c&&delete c[f])),this.j=new Bs(this)}d(Gt,K),Gt.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Gt.prototype.close=function(){xl(this.g)},Gt.prototype.o=function(c){var f=this.g;if(typeof c=="string"){var m={};m.__data__=c,c=m}else this.v&&(m={},m.__data__=Oe(c),c=m);f.i.push(new Hw(f.Ya++,c)),f.I==3&&va(f)},Gt.prototype.N=function(){this.g.l=null,delete this.j,xl(this.g),delete this.g,Gt.Z.N.call(this)};function Ld(c){Hn.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var f=c.__sm__;if(f){e:{for(const m in f){c=m;break e}c=void 0}(this.i=c)&&(c=this.i,f=f!==null&&c in f?f[c]:void 0),this.data=f}else this.data=c}d(Ld,Hn);function Ud(){Ls.call(this),this.status=1}d(Ud,Ls);function Bs(c){this.g=c}d(Bs,Md),Bs.prototype.ra=function(){G(this.g,"a")},Bs.prototype.qa=function(c){G(this.g,new Ld(c))},Bs.prototype.pa=function(c){G(this.g,new Ud)},Bs.prototype.oa=function(){G(this.g,"b")},wa.prototype.createWebChannel=wa.prototype.g,Gt.prototype.send=Gt.prototype.o,Gt.prototype.open=Gt.prototype.m,Gt.prototype.close=Gt.prototype.close,nE=function(){return new wa},tE=function(){return Jr()},eE=et,ih={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},da.NO_ERROR=0,da.TIMEOUT=8,da.HTTP_ERROR=6,Qa=da,ed.COMPLETE="complete",Zv=ed,Ft.EventType=ut,ut.OPEN="a",ut.CLOSE="b",ut.ERROR="c",ut.MESSAGE="d",K.prototype.listen=K.prototype.J,co=Ft,ze.prototype.listenOnce=ze.prototype.K,ze.prototype.getLastError=ze.prototype.Ha,ze.prototype.getLastErrorCode=ze.prototype.ya,ze.prototype.getStatus=ze.prototype.ca,ze.prototype.getResponseJson=ze.prototype.La,ze.prototype.getResponseText=ze.prototype.la,ze.prototype.send=ze.prototype.ea,ze.prototype.setWithCredentials=ze.prototype.Fa,Xv=ze}).apply(typeof Ma<"u"?Ma:typeof self<"u"?self:typeof window<"u"?window:{});const jm="@firebase/firestore",$m="4.9.3";class Nt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Nt.UNAUTHENTICATED=new Nt(null),Nt.GOOGLE_CREDENTIALS=new Nt("google-credentials-uid"),Nt.FIRST_PARTY=new Nt("first-party-uid"),Nt.MOCK_USER=new Nt("mock-user");let Di="12.7.0";const Ss=new lf("@firebase/firestore");function Ws(){return Ss.logLevel}function ne(t,...e){if(Ss.logLevel<=Ae.DEBUG){const n=e.map(Ef);Ss.debug(`Firestore (${Di}): ${t}`,...n)}}function cr(t,...e){if(Ss.logLevel<=Ae.ERROR){const n=e.map(Ef);Ss.error(`Firestore (${Di}): ${t}`,...n)}}function Cs(t,...e){if(Ss.logLevel<=Ae.WARN){const n=e.map(Ef);Ss.warn(`Firestore (${Di}): ${t}`,...n)}}function Ef(t){if(typeof t=="string")return t;try{return(function(n){return JSON.stringify(n)})(t)}catch{return t}}function de(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,rE(t,r,n)}function rE(t,e,n){let r=`FIRESTORE (${Di}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw cr(r),new Error(r)}function xe(t,e,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,t||rE(e,s,r)}function ve(t,e){return t}const B={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class X extends hr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class tr{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}class sE{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class iE{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(Nt.UNAUTHENTICATED)))}shutdown(){}}class vN{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class EN{constructor(e){this.t=e,this.currentUser=Nt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){xe(this.o===void 0,42304);let r=this.i;const s=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let i=new tr;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new tr,e.enqueueRetryable((()=>s(this.currentUser)))};const o=()=>{const l=i;e.enqueueRetryable((async()=>{await l.promise,await s(this.currentUser)}))},a=l=>{ne("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit((l=>a(l))),setTimeout((()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(ne("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new tr)}}),0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((r=>this.i!==e?(ne("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(xe(typeof r.accessToken=="string",31837,{l:r}),new sE(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return xe(e===null||typeof e=="string",2055,{h:e}),new Nt(e)}}class wN{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=Nt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class TN{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new wN(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(Nt.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class qm{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class IN{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,nn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){xe(this.o===void 0,3512);const r=i=>{i.error!=null&&ne("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.m;return this.m=i.token,ne("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable((()=>r(i)))};const s=i=>{ne("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((i=>s(i))),setTimeout((()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?s(i):ne("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new qm(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(xe(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new qm(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function AN(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}class sl{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=AN(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%62))}return r}}function be(t,e){return t<e?-1:t>e?1:0}function oh(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const s=t.charAt(r),i=e.charAt(r);if(s!==i)return gu(s)===gu(i)?be(s,i):gu(s)?1:-1}return be(t.length,e.length)}const bN=55296,RN=57343;function gu(t){const e=t.charCodeAt(0);return e>=bN&&e<=RN}function wi(t,e,n){return t.length===e.length&&t.every(((r,s)=>n(r,e[s])))}const Wm="__name__";class Cn{constructor(e,n,r){n===void 0?n=0:n>e.length&&de(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&de(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Cn.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Cn?e.forEach((r=>{n.push(r)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=Cn.compareSegments(e.get(s),n.get(s));if(i!==0)return i}return be(e.length,n.length)}static compareSegments(e,n){const r=Cn.isNumericId(e),s=Cn.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?Cn.extractNumericId(e).compare(Cn.extractNumericId(n)):oh(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Fr.fromString(e.substring(4,e.length-2))}}class je extends Cn{construct(e,n,r){return new je(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new X(B.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter((s=>s.length>0)))}return new je(n)}static emptyPath(){return new je([])}}const SN=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class yt extends Cn{construct(e,n,r){return new yt(e,n,r)}static isValidIdentifier(e){return SN.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),yt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Wm}static keyField(){return new yt([Wm])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new X(B.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const a=e[s];if(a==="\\"){if(s+1===e.length)throw new X(B.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[s+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new X(B.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,s+=2}else a==="`"?(o=!o,s++):a!=="."||o?(r+=a,s++):(i(),s++)}if(i(),o)throw new X(B.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new yt(n)}static emptyPath(){return new yt([])}}class oe{constructor(e){this.path=e}static fromPath(e){return new oe(je.fromString(e))}static fromName(e){return new oe(je.fromString(e).popFirst(5))}static empty(){return new oe(je.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&je.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return je.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new oe(new je(e.slice()))}}function oE(t,e,n){if(!n)throw new X(B.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function aE(t,e,n,r){if(e===!0&&r===!0)throw new X(B.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Gm(t){if(!oe.isDocumentKey(t))throw new X(B.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Km(t){if(oe.isDocumentKey(t))throw new X(B.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function cE(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function il(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":de(12329,{type:typeof t})}function wn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new X(B.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=il(t);throw new X(B.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function it(t,e){const n={typeString:t};return e&&(n.value=e),n}function sa(t,e){if(!cE(t))throw new X(B.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const s=e[r].typeString,i="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const o=t[r];if(s&&typeof o!==s){n=`JSON field '${r}' must be a ${s}.`;break}if(i!==void 0&&o!==i.value){n=`Expected '${r}' field to equal '${i.value}'`;break}}if(n)throw new X(B.INVALID_ARGUMENT,n);return!0}const zm=-62135596800,Qm=1e6;class $e{static now(){return $e.fromMillis(Date.now())}static fromDate(e){return $e.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*Qm);return new $e(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new X(B.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new X(B.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<zm)throw new X(B.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new X(B.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Qm}_compareTo(e){return this.seconds===e.seconds?be(this.nanoseconds,e.nanoseconds):be(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:$e._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(sa(e,$e._jsonSchema))return new $e(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-zm;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}$e._jsonSchemaVersion="firestore/timestamp/1.0",$e._jsonSchema={type:it("string",$e._jsonSchemaVersion),seconds:it("number"),nanoseconds:it("number")};class ye{static fromTimestamp(e){return new ye(e)}static min(){return new ye(new $e(0,0))}static max(){return new ye(new $e(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const Lo=-1;function CN(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=ye.fromTimestamp(r===1e9?new $e(n+1,0):new $e(n,r));return new Hr(s,oe.empty(),e)}function PN(t){return new Hr(t.readTime,t.key,Lo)}class Hr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Hr(ye.min(),oe.empty(),Lo)}static max(){return new Hr(ye.max(),oe.empty(),Lo)}}function kN(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=oe.comparator(t.documentKey,e.documentKey),n!==0?n:be(t.largestBatchId,e.largestBatchId))}const NN="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class ON{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function Vi(t){if(t.code!==B.FAILED_PRECONDITION||t.message!==NN)throw t;ne("LocalStore","Unexpectedly lost primary lease")}class j{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&de(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new j(((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof j?n:j.resolve(n)}catch(n){return j.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):j.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):j.reject(n)}static resolve(e){return new j(((n,r)=>{n(e)}))}static reject(e){return new j(((n,r)=>{r(e)}))}static waitFor(e){return new j(((n,r)=>{let s=0,i=0,o=!1;e.forEach((a=>{++s,a.next((()=>{++i,o&&i===s&&n()}),(l=>r(l)))})),o=!0,i===s&&n()}))}static or(e){let n=j.resolve(!1);for(const r of e)n=n.next((s=>s?j.resolve(s):r()));return n}static forEach(e,n){const r=[];return e.forEach(((s,i)=>{r.push(n.call(this,s,i))})),this.waitFor(r)}static mapArray(e,n){return new j(((r,s)=>{const i=e.length,o=new Array(i);let a=0;for(let l=0;l<i;l++){const u=l;n(e[u]).next((h=>{o[u]=h,++a,a===i&&r(o)}),(h=>s(h)))}}))}static doWhile(e,n){return new j(((r,s)=>{const i=()=>{e()===!0?n().next((()=>{i()}),s):r()};i()}))}}function DN(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function xi(t){return t.name==="IndexedDbTransactionError"}class ol{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}ol.ce=-1;const wf=-1;function al(t){return t==null}function Rc(t){return t===0&&1/t==-1/0}function VN(t){return typeof t=="number"&&Number.isInteger(t)&&!Rc(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}const lE="";function xN(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=Ym(e)),e=MN(t.get(n),e);return Ym(e)}function MN(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const i=t.charAt(s);switch(i){case"\0":n+="";break;case lE:n+="";break;default:n+=i}}return n}function Ym(t){return t+lE+""}function Jm(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function zr(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function uE(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}class Ke{constructor(e,n){this.comparator=e,this.root=n||It.EMPTY}insert(e,n){return new Ke(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,It.BLACK,null,null))}remove(e){return new Ke(this.comparator,this.root.remove(e,this.comparator).copy(null,null,It.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,r)=>(e(n,r),!1)))}toString(){const e=[];return this.inorderTraversal(((n,r)=>(e.push(`${n}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new La(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new La(this.root,e,this.comparator,!1)}getReverseIterator(){return new La(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new La(this.root,e,this.comparator,!0)}}class La{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class It{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??It.RED,this.left=s??It.EMPTY,this.right=i??It.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new It(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return It.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return It.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,It.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,It.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw de(43730,{key:this.key,value:this.value});if(this.right.isRed())throw de(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw de(27949);return e+(this.isRed()?0:1)}}It.EMPTY=null,It.RED=!0,It.BLACK=!1;It.EMPTY=new class{constructor(){this.size=0}get key(){throw de(57766)}get value(){throw de(16141)}get color(){throw de(16727)}get left(){throw de(29726)}get right(){throw de(36894)}copy(e,n,r,s,i){return this}insert(e,n,r){return new It(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class pt{constructor(e){this.comparator=e,this.data=new Ke(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,r)=>(e(n),!1)))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Xm(this.data.getIterator())}getIteratorFrom(e){return new Xm(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((r=>{n=n.add(r)})),n}isEqual(e){if(!(e instanceof pt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new pt(this.comparator);return n.data=e,n}}class Xm{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class Yt{constructor(e){this.fields=e,e.sort(yt.comparator)}static empty(){return new Yt([])}unionWith(e){let n=new pt(yt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Yt(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return wi(this.fields,e.fields,((n,r)=>n.isEqual(r)))}}class hE extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Et{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new hE("Invalid base64 string: "+i):i}})(e);return new Et(n)}static fromUint8Array(e){const n=(function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i})(e);return new Et(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return be(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Et.EMPTY_BYTE_STRING=new Et("");const LN=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function jr(t){if(xe(!!t,39018),typeof t=="string"){let e=0;const n=LN.exec(t);if(xe(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:tt(t.seconds),nanos:tt(t.nanos)}}function tt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function $r(t){return typeof t=="string"?Et.fromBase64String(t):Et.fromUint8Array(t)}const fE="server_timestamp",dE="__type__",pE="__previous_value__",mE="__local_write_time__";function Tf(t){return(t?.mapValue?.fields||{})[dE]?.stringValue===fE}function cl(t){const e=t.mapValue.fields[pE];return Tf(e)?cl(e):e}function Uo(t){const e=jr(t.mapValue.fields[mE].timestampValue);return new $e(e.seconds,e.nanos)}class UN{constructor(e,n,r,s,i,o,a,l,u,h){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=u,this.isUsingEmulator=h}}const Sc="(default)";class Ti{constructor(e,n){this.projectId=e,this.database=n||Sc}static empty(){return new Ti("","")}get isDefaultDatabase(){return this.database===Sc}isEqual(e){return e instanceof Ti&&e.projectId===this.projectId&&e.database===this.database}}const gE="__type__",FN="__max__",Ua={mapValue:{}},_E="__vector__",Cc="value";function qr(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Tf(t)?4:HN(t)?9007199254740991:BN(t)?10:11:de(28295,{value:t})}function Mn(t,e){if(t===e)return!0;const n=qr(t);if(n!==qr(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Uo(t).isEqual(Uo(e));case 3:return(function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=jr(s.timestampValue),a=jr(i.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos})(t,e);case 5:return t.stringValue===e.stringValue;case 6:return(function(s,i){return $r(s.bytesValue).isEqual($r(i.bytesValue))})(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return(function(s,i){return tt(s.geoPointValue.latitude)===tt(i.geoPointValue.latitude)&&tt(s.geoPointValue.longitude)===tt(i.geoPointValue.longitude)})(t,e);case 2:return(function(s,i){if("integerValue"in s&&"integerValue"in i)return tt(s.integerValue)===tt(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=tt(s.doubleValue),a=tt(i.doubleValue);return o===a?Rc(o)===Rc(a):isNaN(o)&&isNaN(a)}return!1})(t,e);case 9:return wi(t.arrayValue.values||[],e.arrayValue.values||[],Mn);case 10:case 11:return(function(s,i){const o=s.mapValue.fields||{},a=i.mapValue.fields||{};if(Jm(o)!==Jm(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!Mn(o[l],a[l])))return!1;return!0})(t,e);default:return de(52216,{left:t})}}function Fo(t,e){return(t.values||[]).find((n=>Mn(n,e)))!==void 0}function Ii(t,e){if(t===e)return 0;const n=qr(t),r=qr(e);if(n!==r)return be(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return be(t.booleanValue,e.booleanValue);case 2:return(function(i,o){const a=tt(i.integerValue||i.doubleValue),l=tt(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1})(t,e);case 3:return Zm(t.timestampValue,e.timestampValue);case 4:return Zm(Uo(t),Uo(e));case 5:return oh(t.stringValue,e.stringValue);case 6:return(function(i,o){const a=$r(i),l=$r(o);return a.compareTo(l)})(t.bytesValue,e.bytesValue);case 7:return(function(i,o){const a=i.split("/"),l=o.split("/");for(let u=0;u<a.length&&u<l.length;u++){const h=be(a[u],l[u]);if(h!==0)return h}return be(a.length,l.length)})(t.referenceValue,e.referenceValue);case 8:return(function(i,o){const a=be(tt(i.latitude),tt(o.latitude));return a!==0?a:be(tt(i.longitude),tt(o.longitude))})(t.geoPointValue,e.geoPointValue);case 9:return eg(t.arrayValue,e.arrayValue);case 10:return(function(i,o){const a=i.fields||{},l=o.fields||{},u=a[Cc]?.arrayValue,h=l[Cc]?.arrayValue,d=be(u?.values?.length||0,h?.values?.length||0);return d!==0?d:eg(u,h)})(t.mapValue,e.mapValue);case 11:return(function(i,o){if(i===Ua.mapValue&&o===Ua.mapValue)return 0;if(i===Ua.mapValue)return 1;if(o===Ua.mapValue)return-1;const a=i.fields||{},l=Object.keys(a),u=o.fields||{},h=Object.keys(u);l.sort(),h.sort();for(let d=0;d<l.length&&d<h.length;++d){const p=oh(l[d],h[d]);if(p!==0)return p;const g=Ii(a[l[d]],u[h[d]]);if(g!==0)return g}return be(l.length,h.length)})(t.mapValue,e.mapValue);default:throw de(23264,{he:n})}}function Zm(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return be(t,e);const n=jr(t),r=jr(e),s=be(n.seconds,r.seconds);return s!==0?s:be(n.nanos,r.nanos)}function eg(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=Ii(n[s],r[s]);if(i)return i}return be(n.length,r.length)}function Ai(t){return ah(t)}function ah(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(function(n){const r=jr(n);return`time(${r.seconds},${r.nanos})`})(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?(function(n){return $r(n).toBase64()})(t.bytesValue):"referenceValue"in t?(function(n){return oe.fromName(n).toString()})(t.referenceValue):"geoPointValue"in t?(function(n){return`geo(${n.latitude},${n.longitude})`})(t.geoPointValue):"arrayValue"in t?(function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=ah(i);return r+"]"})(t.arrayValue):"mapValue"in t?(function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${ah(n.fields[o])}`;return s+"}"})(t.mapValue):de(61005,{value:t})}function Ya(t){switch(qr(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=cl(t);return e?16+Ya(e):16;case 5:return 2*t.stringValue.length;case 6:return $r(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((s,i)=>s+Ya(i)),0)})(t.arrayValue);case 10:case 11:return(function(r){let s=0;return zr(r.fields,((i,o)=>{s+=i.length+Ya(o)})),s})(t.mapValue);default:throw de(13486,{value:t})}}function tg(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function ch(t){return!!t&&"integerValue"in t}function If(t){return!!t&&"arrayValue"in t}function ng(t){return!!t&&"nullValue"in t}function rg(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Ja(t){return!!t&&"mapValue"in t}function BN(t){return(t?.mapValue?.fields||{})[gE]?.stringValue===_E}function wo(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return zr(t.mapValue.fields,((n,r)=>e.mapValue.fields[n]=wo(r))),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=wo(t.arrayValue.values[n]);return e}return{...t}}function HN(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===FN}class jt{constructor(e){this.value=e}static empty(){return new jt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Ja(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=wo(n)}setAll(e){let n=yt.emptyPath(),r={},s=[];e.forEach(((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,s),r={},s=[],n=a.popLast()}o?r[a.lastSegment()]=wo(o):s.push(a.lastSegment())}));const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());Ja(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Mn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];Ja(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){zr(n,((s,i)=>e[s]=i));for(const s of r)delete e[s]}clone(){return new jt(wo(this.value))}}function yE(t){const e=[];return zr(t.fields,((n,r)=>{const s=new yt([n]);if(Ja(r)){const i=yE(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)})),new Yt(e)}class Dt{constructor(e,n,r,s,i,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=a}static newInvalidDocument(e){return new Dt(e,0,ye.min(),ye.min(),ye.min(),jt.empty(),0)}static newFoundDocument(e,n,r,s){return new Dt(e,1,n,ye.min(),r,s,0)}static newNoDocument(e,n){return new Dt(e,2,n,ye.min(),ye.min(),jt.empty(),0)}static newUnknownDocument(e,n){return new Dt(e,3,n,ye.min(),ye.min(),jt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ye.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=jt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=jt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ye.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Dt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Dt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Pc{constructor(e,n){this.position=e,this.inclusive=n}}function sg(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=oe.comparator(oe.fromName(o.referenceValue),n.key):r=Ii(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function ig(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Mn(t.position[n],e.position[n]))return!1;return!0}class Bo{constructor(e,n="asc"){this.field=e,this.dir=n}}function jN(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}class vE{}class st extends vE{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new qN(e,n,r):n==="array-contains"?new KN(e,r):n==="in"?new zN(e,r):n==="not-in"?new QN(e,r):n==="array-contains-any"?new YN(e,r):new st(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new WN(e,r):new GN(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Ii(n,this.value)):n!==null&&qr(this.value)===qr(n)&&this.matchesComparison(Ii(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return de(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Tn extends vE{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Tn(e,n)}matches(e){return EE(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function EE(t){return t.op==="and"}function wE(t){return $N(t)&&EE(t)}function $N(t){for(const e of t.filters)if(e instanceof Tn)return!1;return!0}function lh(t){if(t instanceof st)return t.field.canonicalString()+t.op.toString()+Ai(t.value);if(wE(t))return t.filters.map((e=>lh(e))).join(",");{const e=t.filters.map((n=>lh(n))).join(",");return`${t.op}(${e})`}}function TE(t,e){return t instanceof st?(function(r,s){return s instanceof st&&r.op===s.op&&r.field.isEqual(s.field)&&Mn(r.value,s.value)})(t,e):t instanceof Tn?(function(r,s){return s instanceof Tn&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce(((i,o,a)=>i&&TE(o,s.filters[a])),!0):!1})(t,e):void de(19439)}function IE(t){return t instanceof st?(function(n){return`${n.field.canonicalString()} ${n.op} ${Ai(n.value)}`})(t):t instanceof Tn?(function(n){return n.op.toString()+" {"+n.getFilters().map(IE).join(" ,")+"}"})(t):"Filter"}class qN extends st{constructor(e,n,r){super(e,n,r),this.key=oe.fromName(r.referenceValue)}matches(e){const n=oe.comparator(e.key,this.key);return this.matchesComparison(n)}}class WN extends st{constructor(e,n){super(e,"in",n),this.keys=AE("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class GN extends st{constructor(e,n){super(e,"not-in",n),this.keys=AE("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function AE(t,e){return(e.arrayValue?.values||[]).map((n=>oe.fromName(n.referenceValue)))}class KN extends st{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return If(n)&&Fo(n.arrayValue,this.value)}}class zN extends st{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Fo(this.value.arrayValue,n)}}class QN extends st{constructor(e,n){super(e,"not-in",n)}matches(e){if(Fo(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Fo(this.value.arrayValue,n)}}class YN extends st{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!If(n)||!n.arrayValue.values)&&n.arrayValue.values.some((r=>Fo(this.value.arrayValue,r)))}}class JN{constructor(e,n=null,r=[],s=[],i=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=a,this.Te=null}}function og(t,e=null,n=[],r=[],s=null,i=null,o=null){return new JN(t,e,n,r,s,i,o)}function Af(t){const e=ve(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((r=>lh(r))).join(","),n+="|ob:",n+=e.orderBy.map((r=>(function(i){return i.field.canonicalString()+i.dir})(r))).join(","),al(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((r=>Ai(r))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((r=>Ai(r))).join(",")),e.Te=n}return e.Te}function bf(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!jN(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!TE(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!ig(t.startAt,e.startAt)&&ig(t.endAt,e.endAt)}function uh(t){return oe.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}class Mi{constructor(e,n=null,r=[],s=[],i=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=l,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function XN(t,e,n,r,s,i,o,a){return new Mi(t,e,n,r,s,i,o,a)}function Rf(t){return new Mi(t)}function ag(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function bE(t){return t.collectionGroup!==null}function To(t){const e=ve(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const i of e.explicitOrderBy)e.Ie.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new pt(yt.comparator);return o.filters.forEach((l=>{l.getFlattenedFilters().forEach((u=>{u.isInequality()&&(a=a.add(u.field))}))})),a})(e).forEach((i=>{n.has(i.canonicalString())||i.isKeyField()||e.Ie.push(new Bo(i,r))})),n.has(yt.keyField().canonicalString())||e.Ie.push(new Bo(yt.keyField(),r))}return e.Ie}function Dn(t){const e=ve(t);return e.Ee||(e.Ee=ZN(e,To(t))),e.Ee}function ZN(t,e){if(t.limitType==="F")return og(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map((s=>{const i=s.dir==="desc"?"asc":"desc";return new Bo(s.field,i)}));const n=t.endAt?new Pc(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Pc(t.startAt.position,t.startAt.inclusive):null;return og(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function hh(t,e){const n=t.filters.concat([e]);return new Mi(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function fh(t,e,n){return new Mi(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function ll(t,e){return bf(Dn(t),Dn(e))&&t.limitType===e.limitType}function RE(t){return`${Af(Dn(t))}|lt:${t.limitType}`}function Gs(t){return`Query(target=${(function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map((s=>IE(s))).join(", ")}]`),al(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map((s=>(function(o){return`${o.field.canonicalString()} (${o.dir})`})(s))).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map((s=>Ai(s))).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map((s=>Ai(s))).join(",")),`Target(${r})`})(Dn(t))}; limitType=${t.limitType})`}function ul(t,e){return e.isFoundDocument()&&(function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):oe.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)})(t,e)&&(function(r,s){for(const i of To(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0})(t,e)&&(function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0})(t,e)&&(function(r,s){return!(r.startAt&&!(function(o,a,l){const u=sg(o,a,l);return o.inclusive?u<=0:u<0})(r.startAt,To(r),s)||r.endAt&&!(function(o,a,l){const u=sg(o,a,l);return o.inclusive?u>=0:u>0})(r.endAt,To(r),s))})(t,e)}function eO(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function SE(t){return(e,n)=>{let r=!1;for(const s of To(t)){const i=tO(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function tO(t,e,n){const r=t.field.isKeyField()?oe.comparator(e.key,n.key):(function(i,o,a){const l=o.data.field(i),u=a.data.field(i);return l!==null&&u!==null?Ii(l,u):de(42886)})(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return de(19790,{direction:t.dir})}}class Vs{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){zr(this.inner,((n,r)=>{for(const[s,i]of r)e(s,i)}))}isEmpty(){return uE(this.inner)}size(){return this.innerSize}}const nO=new Ke(oe.comparator);function lr(){return nO}const CE=new Ke(oe.comparator);function lo(...t){let e=CE;for(const n of t)e=e.insert(n.key,n);return e}function PE(t){let e=CE;return t.forEach(((n,r)=>e=e.insert(n,r.overlayedDocument))),e}function ds(){return Io()}function kE(){return Io()}function Io(){return new Vs((t=>t.toString()),((t,e)=>t.isEqual(e)))}const rO=new Ke(oe.comparator),sO=new pt(oe.comparator);function Re(...t){let e=sO;for(const n of t)e=e.add(n);return e}const iO=new pt(be);function oO(){return iO}function Sf(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Rc(e)?"-0":e}}function NE(t){return{integerValue:""+t}}function aO(t,e){return VN(e)?NE(e):Sf(t,e)}class hl{constructor(){this._=void 0}}function cO(t,e,n){return t instanceof Ho?(function(s,i){const o={fields:{[dE]:{stringValue:fE},[mE]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&Tf(i)&&(i=cl(i)),i&&(o.fields[pE]=i),{mapValue:o}})(n,e):t instanceof jo?DE(t,e):t instanceof $o?VE(t,e):(function(s,i){const o=OE(s,i),a=cg(o)+cg(s.Ae);return ch(o)&&ch(s.Ae)?NE(a):Sf(s.serializer,a)})(t,e)}function lO(t,e,n){return t instanceof jo?DE(t,e):t instanceof $o?VE(t,e):n}function OE(t,e){return t instanceof kc?(function(r){return ch(r)||(function(i){return!!i&&"doubleValue"in i})(r)})(e)?e:{integerValue:0}:null}class Ho extends hl{}class jo extends hl{constructor(e){super(),this.elements=e}}function DE(t,e){const n=xE(e);for(const r of t.elements)n.some((s=>Mn(s,r)))||n.push(r);return{arrayValue:{values:n}}}class $o extends hl{constructor(e){super(),this.elements=e}}function VE(t,e){let n=xE(e);for(const r of t.elements)n=n.filter((s=>!Mn(s,r)));return{arrayValue:{values:n}}}class kc extends hl{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function cg(t){return tt(t.integerValue||t.doubleValue)}function xE(t){return If(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}class uO{constructor(e,n){this.field=e,this.transform=n}}function hO(t,e){return t.field.isEqual(e.field)&&(function(r,s){return r instanceof jo&&s instanceof jo||r instanceof $o&&s instanceof $o?wi(r.elements,s.elements,Mn):r instanceof kc&&s instanceof kc?Mn(r.Ae,s.Ae):r instanceof Ho&&s instanceof Ho})(t.transform,e.transform)}class fO{constructor(e,n){this.version=e,this.transformResults=n}}class dn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new dn}static exists(e){return new dn(void 0,e)}static updateTime(e){return new dn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Xa(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class fl{}function ME(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Cf(t.key,dn.none()):new ia(t.key,t.data,dn.none());{const n=t.data,r=jt.empty();let s=new pt(yt.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new Qr(t.key,r,new Yt(s.toArray()),dn.none())}}function dO(t,e,n){t instanceof ia?(function(s,i,o){const a=s.value.clone(),l=ug(s.fieldTransforms,i,o.transformResults);a.setAll(l),i.convertToFoundDocument(o.version,a).setHasCommittedMutations()})(t,e,n):t instanceof Qr?(function(s,i,o){if(!Xa(s.precondition,i))return void i.convertToUnknownDocument(o.version);const a=ug(s.fieldTransforms,i,o.transformResults),l=i.data;l.setAll(LE(s)),l.setAll(a),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()})(t,e,n):(function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()})(0,e,n)}function Ao(t,e,n,r){return t instanceof ia?(function(i,o,a,l){if(!Xa(i.precondition,o))return a;const u=i.value.clone(),h=hg(i.fieldTransforms,l,o);return u.setAll(h),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null})(t,e,n,r):t instanceof Qr?(function(i,o,a,l){if(!Xa(i.precondition,o))return a;const u=hg(i.fieldTransforms,l,o),h=o.data;return h.setAll(LE(i)),h.setAll(u),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),a===null?null:a.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map((d=>d.field)))})(t,e,n,r):(function(i,o,a){return Xa(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a})(t,e,n)}function pO(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=OE(r.transform,s||null);i!=null&&(n===null&&(n=jt.empty()),n.set(r.field,i))}return n||null}function lg(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!(function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&wi(r,s,((i,o)=>hO(i,o)))})(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class ia extends fl{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Qr extends fl{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function LE(t){const e=new Map;return t.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}})),e}function ug(t,e,n){const r=new Map;xe(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,a=e.data.field(i.field);r.set(i.field,lO(o,a,n[s]))}return r}function hg(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,cO(i,o,e))}return r}class Cf extends fl{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class mO extends fl{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class gO{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&dO(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Ao(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Ao(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=kE();return this.mutations.forEach((s=>{const i=e.get(s.key),o=i.overlayedDocument;let a=this.applyToLocalView(o,i.mutatedFields);a=n.has(s.key)?null:a;const l=ME(o,a);l!==null&&r.set(s.key,l),o.isValidDocument()||o.convertToNoDocument(ye.min())})),r}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),Re())}isEqual(e){return this.batchId===e.batchId&&wi(this.mutations,e.mutations,((n,r)=>lg(n,r)))&&wi(this.baseMutations,e.baseMutations,((n,r)=>lg(n,r)))}}class Pf{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){xe(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let s=(function(){return rO})();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new Pf(e,n,r,s)}}class _O{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class yO{constructor(e,n){this.count=e,this.unchangedNames=n}}var nt,Se;function vO(t){switch(t){case B.OK:return de(64938);case B.CANCELLED:case B.UNKNOWN:case B.DEADLINE_EXCEEDED:case B.RESOURCE_EXHAUSTED:case B.INTERNAL:case B.UNAVAILABLE:case B.UNAUTHENTICATED:return!1;case B.INVALID_ARGUMENT:case B.NOT_FOUND:case B.ALREADY_EXISTS:case B.PERMISSION_DENIED:case B.FAILED_PRECONDITION:case B.ABORTED:case B.OUT_OF_RANGE:case B.UNIMPLEMENTED:case B.DATA_LOSS:return!0;default:return de(15467,{code:t})}}function UE(t){if(t===void 0)return cr("GRPC error has no .code"),B.UNKNOWN;switch(t){case nt.OK:return B.OK;case nt.CANCELLED:return B.CANCELLED;case nt.UNKNOWN:return B.UNKNOWN;case nt.DEADLINE_EXCEEDED:return B.DEADLINE_EXCEEDED;case nt.RESOURCE_EXHAUSTED:return B.RESOURCE_EXHAUSTED;case nt.INTERNAL:return B.INTERNAL;case nt.UNAVAILABLE:return B.UNAVAILABLE;case nt.UNAUTHENTICATED:return B.UNAUTHENTICATED;case nt.INVALID_ARGUMENT:return B.INVALID_ARGUMENT;case nt.NOT_FOUND:return B.NOT_FOUND;case nt.ALREADY_EXISTS:return B.ALREADY_EXISTS;case nt.PERMISSION_DENIED:return B.PERMISSION_DENIED;case nt.FAILED_PRECONDITION:return B.FAILED_PRECONDITION;case nt.ABORTED:return B.ABORTED;case nt.OUT_OF_RANGE:return B.OUT_OF_RANGE;case nt.UNIMPLEMENTED:return B.UNIMPLEMENTED;case nt.DATA_LOSS:return B.DATA_LOSS;default:return de(39323,{code:t})}}(Se=nt||(nt={}))[Se.OK=0]="OK",Se[Se.CANCELLED=1]="CANCELLED",Se[Se.UNKNOWN=2]="UNKNOWN",Se[Se.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Se[Se.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Se[Se.NOT_FOUND=5]="NOT_FOUND",Se[Se.ALREADY_EXISTS=6]="ALREADY_EXISTS",Se[Se.PERMISSION_DENIED=7]="PERMISSION_DENIED",Se[Se.UNAUTHENTICATED=16]="UNAUTHENTICATED",Se[Se.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Se[Se.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Se[Se.ABORTED=10]="ABORTED",Se[Se.OUT_OF_RANGE=11]="OUT_OF_RANGE",Se[Se.UNIMPLEMENTED=12]="UNIMPLEMENTED",Se[Se.INTERNAL=13]="INTERNAL",Se[Se.UNAVAILABLE=14]="UNAVAILABLE",Se[Se.DATA_LOSS=15]="DATA_LOSS";function EO(){return new TextEncoder}const wO=new Fr([4294967295,4294967295],0);function fg(t){const e=EO().encode(t),n=new Jv;return n.update(e),new Uint8Array(n.digest())}function dg(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new Fr([n,r],0),new Fr([s,i],0)]}class kf{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new uo(`Invalid padding: ${n}`);if(r<0)throw new uo(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new uo(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new uo(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Fr.fromNumber(this.ge)}ye(e,n,r){let s=e.add(n.multiply(Fr.fromNumber(r)));return s.compare(wO)===1&&(s=new Fr([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=fg(e),[r,s]=dg(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(r,s,i);if(!this.we(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new kf(i,s,n);return r.forEach((a=>o.insert(a))),o}insert(e){if(this.ge===0)return;const n=fg(e),[r,s]=dg(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(r,s,i);this.Se(o)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class uo extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class dl{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,oa.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new dl(ye.min(),s,new Ke(be),lr(),Re())}}class oa{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new oa(r,n,Re(),Re(),Re())}}class Za{constructor(e,n,r,s){this.be=e,this.removedTargetIds=n,this.key=r,this.De=s}}class FE{constructor(e,n){this.targetId=e,this.Ce=n}}class BE{constructor(e,n,r=Et.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class pg{constructor(){this.ve=0,this.Fe=mg(),this.Me=Et.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Re(),n=Re(),r=Re();return this.Fe.forEach(((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:de(38017,{changeType:i})}})),new oa(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=mg()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,xe(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class TO{constructor(e){this.Ge=e,this.ze=new Map,this.je=lr(),this.Je=Fa(),this.He=Fa(),this.Ye=new Ke(be)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:de(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((r,s)=>{this.rt(s)&&n(s)}))}st(e){const n=e.targetId,r=e.Ce.count,s=this.ot(n);if(s){const i=s.target;if(uh(i))if(r===0){const o=new oe(i.path);this.et(n,o,Dt.newNoDocument(o,ye.min()))}else xe(r===1,20013,{expectedCount:r});else{const o=this._t(n);if(o!==r){const a=this.ut(e),l=a?this.ct(a,e,o):1;if(l!==0){this.it(n);const u=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,u)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,a;try{o=$r(r).toUint8Array()}catch(l){if(l instanceof hE)return Cs("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new kf(o,s,i)}catch(l){return Cs(l instanceof uo?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.ge===0?null:a}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let s=0;return r.forEach((i=>{const o=this.Ge.ht(),a=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(a)||(this.et(n,i,null),s++)})),s}Tt(e){const n=new Map;this.ze.forEach(((i,o)=>{const a=this.ot(o);if(a){if(i.current&&uh(a.target)){const l=new oe(a.target.path);this.It(l).has(o)||this.Et(o,l)||this.et(o,l,Dt.newNoDocument(l,e))}i.Be&&(n.set(o,i.ke()),i.qe())}}));let r=Re();this.He.forEach(((i,o)=>{let a=!0;o.forEachWhile((l=>{const u=this.ot(l);return!u||u.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)})),a&&(r=r.add(i))})),this.je.forEach(((i,o)=>o.setReadTime(e)));const s=new dl(e,n,this.Ye,this.je,r);return this.je=lr(),this.Je=Fa(),this.He=Fa(),this.Ye=new Ke(be),s}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,n)?s.Qe(n,1):s.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new pg,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new pt(be),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new pt(be),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||ne("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new pg),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function Fa(){return new Ke(oe.comparator)}function mg(){return new Ke(oe.comparator)}const IO={asc:"ASCENDING",desc:"DESCENDING"},AO={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},bO={and:"AND",or:"OR"};class RO{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function dh(t,e){return t.useProto3Json||al(e)?e:{value:e}}function Nc(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function HE(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function SO(t,e){return Nc(t,e.toTimestamp())}function Vn(t){return xe(!!t,49232),ye.fromTimestamp((function(n){const r=jr(n);return new $e(r.seconds,r.nanos)})(t))}function Nf(t,e){return ph(t,e).canonicalString()}function ph(t,e){const n=(function(s){return new je(["projects",s.projectId,"databases",s.database])})(t).child("documents");return e===void 0?n:n.child(e)}function jE(t){const e=je.fromString(t);return xe(KE(e),10190,{key:e.toString()}),e}function mh(t,e){return Nf(t.databaseId,e.path)}function _u(t,e){const n=jE(e);if(n.get(1)!==t.databaseId.projectId)throw new X(B.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new X(B.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new oe(qE(n))}function $E(t,e){return Nf(t.databaseId,e)}function CO(t){const e=jE(t);return e.length===4?je.emptyPath():qE(e)}function gh(t){return new je(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function qE(t){return xe(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function gg(t,e,n){return{name:mh(t,e),fields:n.value.mapValue.fields}}function PO(t,e){let n;if("targetChange"in e){e.targetChange;const r=(function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:de(39313,{state:u})})(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=(function(u,h){return u.useProto3Json?(xe(h===void 0||typeof h=="string",58123),Et.fromBase64String(h||"")):(xe(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),Et.fromUint8Array(h||new Uint8Array))})(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&(function(u){const h=u.code===void 0?B.UNKNOWN:UE(u.code);return new X(h,u.message||"")})(o);n=new BE(r,s,i,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=_u(t,r.document.name),i=Vn(r.document.updateTime),o=r.document.createTime?Vn(r.document.createTime):ye.min(),a=new jt({mapValue:{fields:r.document.fields}}),l=Dt.newFoundDocument(s,i,o,a),u=r.targetIds||[],h=r.removedTargetIds||[];n=new Za(u,h,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=_u(t,r.document),i=r.readTime?Vn(r.readTime):ye.min(),o=Dt.newNoDocument(s,i),a=r.removedTargetIds||[];n=new Za([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=_u(t,r.document),i=r.removedTargetIds||[];n=new Za([],i,s,null)}else{if(!("filter"in e))return de(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new yO(s,i),a=r.targetId;n=new FE(a,o)}}return n}function kO(t,e){let n;if(e instanceof ia)n={update:gg(t,e.key,e.value)};else if(e instanceof Cf)n={delete:mh(t,e.key)};else if(e instanceof Qr)n={update:gg(t,e.key,e.data),updateMask:FO(e.fieldMask)};else{if(!(e instanceof mO))return de(16599,{Vt:e.type});n={verify:mh(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((r=>(function(i,o){const a=o.transform;if(a instanceof Ho)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof jo)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof $o)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof kc)return{fieldPath:o.field.canonicalString(),increment:a.Ae};throw de(20930,{transform:o.transform})})(0,r)))),e.precondition.isNone||(n.currentDocument=(function(s,i){return i.updateTime!==void 0?{updateTime:SO(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:de(27497)})(t,e.precondition)),n}function NO(t,e){return t&&t.length>0?(xe(e!==void 0,14353),t.map((n=>(function(s,i){let o=s.updateTime?Vn(s.updateTime):Vn(i);return o.isEqual(ye.min())&&(o=Vn(i)),new fO(o,s.transformResults||[])})(n,e)))):[]}function OO(t,e){return{documents:[$E(t,e.path)]}}function DO(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=$E(t,s);const i=(function(u){if(u.length!==0)return GE(Tn.create(u,"and"))})(e.filters);i&&(n.structuredQuery.where=i);const o=(function(u){if(u.length!==0)return u.map((h=>(function(p){return{field:Ks(p.field),direction:MO(p.dir)}})(h)))})(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=dh(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=(function(u){return{before:u.inclusive,values:u.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(u){return{before:!u.inclusive,values:u.position}})(e.endAt)),{ft:n,parent:s}}function VO(t){let e=CO(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){xe(r===1,65062);const h=n.from[0];h.allDescendants?s=h.collectionId:e=e.child(h.collectionId)}let i=[];n.where&&(i=(function(d){const p=WE(d);return p instanceof Tn&&wE(p)?p.getFilters():[p]})(n.where));let o=[];n.orderBy&&(o=(function(d){return d.map((p=>(function(_){return new Bo(zs(_.field),(function(N){switch(N){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(_.direction))})(p)))})(n.orderBy));let a=null;n.limit&&(a=(function(d){let p;return p=typeof d=="object"?d.value:d,al(p)?null:p})(n.limit));let l=null;n.startAt&&(l=(function(d){const p=!!d.before,g=d.values||[];return new Pc(g,p)})(n.startAt));let u=null;return n.endAt&&(u=(function(d){const p=!d.before,g=d.values||[];return new Pc(g,p)})(n.endAt)),XN(e,s,o,i,a,"F",l,u)}function xO(t,e){const n=(function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return de(28987,{purpose:s})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function WE(t){return t.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=zs(n.unaryFilter.field);return st.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=zs(n.unaryFilter.field);return st.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=zs(n.unaryFilter.field);return st.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=zs(n.unaryFilter.field);return st.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return de(61313);default:return de(60726)}})(t):t.fieldFilter!==void 0?(function(n){return st.create(zs(n.fieldFilter.field),(function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return de(58110);default:return de(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(t):t.compositeFilter!==void 0?(function(n){return Tn.create(n.compositeFilter.filters.map((r=>WE(r))),(function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return de(1026)}})(n.compositeFilter.op))})(t):de(30097,{filter:t})}function MO(t){return IO[t]}function LO(t){return AO[t]}function UO(t){return bO[t]}function Ks(t){return{fieldPath:t.canonicalString()}}function zs(t){return yt.fromServerFormat(t.fieldPath)}function GE(t){return t instanceof st?(function(n){if(n.op==="=="){if(rg(n.value))return{unaryFilter:{field:Ks(n.field),op:"IS_NAN"}};if(ng(n.value))return{unaryFilter:{field:Ks(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(rg(n.value))return{unaryFilter:{field:Ks(n.field),op:"IS_NOT_NAN"}};if(ng(n.value))return{unaryFilter:{field:Ks(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ks(n.field),op:LO(n.op),value:n.value}}})(t):t instanceof Tn?(function(n){const r=n.getFilters().map((s=>GE(s)));return r.length===1?r[0]:{compositeFilter:{op:UO(n.op),filters:r}}})(t):de(54877,{filter:t})}function FO(t){const e=[];return t.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function KE(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}class Or{constructor(e,n,r,s,i=ye.min(),o=ye.min(),a=Et.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new Or(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Or(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Or(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Or(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class BO{constructor(e){this.yt=e}}function HO(t){const e=VO({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?fh(e,e.limit,"L"):e}class jO{constructor(){this.Cn=new $O}addToCollectionParentIndex(e,n){return this.Cn.add(n),j.resolve()}getCollectionParents(e,n){return j.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return j.resolve()}deleteFieldIndex(e,n){return j.resolve()}deleteAllFieldIndexes(e){return j.resolve()}createTargetIndexes(e,n){return j.resolve()}getDocumentsMatchingTarget(e,n){return j.resolve(null)}getIndexType(e,n){return j.resolve(0)}getFieldIndexes(e,n){return j.resolve([])}getNextCollectionGroupToUpdate(e){return j.resolve(null)}getMinOffset(e,n){return j.resolve(Hr.min())}getMinOffsetFromCollectionGroup(e,n){return j.resolve(Hr.min())}updateCollectionGroup(e,n,r){return j.resolve()}updateIndexEntries(e,n){return j.resolve()}}class $O{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new pt(je.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new pt(je.comparator)).toArray()}}const _g={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},zE=41943040;class Ht{static withCacheSize(e){return new Ht(e,Ht.DEFAULT_COLLECTION_PERCENTILE,Ht.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}Ht.DEFAULT_COLLECTION_PERCENTILE=10,Ht.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ht.DEFAULT=new Ht(zE,Ht.DEFAULT_COLLECTION_PERCENTILE,Ht.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ht.DISABLED=new Ht(-1,0,0);class bi{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new bi(0)}static cr(){return new bi(-1)}}const yg="LruGarbageCollector",qO=1048576;function vg([t,e],[n,r]){const s=be(t,n);return s===0?be(e,r):s}class WO{constructor(e){this.Ir=e,this.buffer=new pt(vg),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();vg(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class GO{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){ne(yg,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){xi(n)?ne(yg,"Ignoring IndexedDB error during garbage collection: ",n):await Vi(n)}await this.Vr(3e5)}))}}class KO{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next((r=>Math.floor(n/100*r)))}nthSequenceNumber(e,n){if(n===0)return j.resolve(ol.ce);const r=new WO(n);return this.mr.forEachTarget(e,(s=>r.Ar(s.sequenceNumber))).next((()=>this.mr.pr(e,(s=>r.Ar(s))))).next((()=>r.maxValue))}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(ne("LruGarbageCollector","Garbage collection skipped; disabled"),j.resolve(_g)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(ne("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),_g):this.yr(e,n)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,s,i,o,a,l,u;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((d=>(d>this.params.maximumSequenceNumbersToCollect?(ne("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${d}`),s=this.params.maximumSequenceNumbersToCollect):s=d,o=Date.now(),this.nthSequenceNumber(e,s)))).next((d=>(r=d,a=Date.now(),this.removeTargets(e,r,n)))).next((d=>(i=d,l=Date.now(),this.removeOrphanedDocuments(e,r)))).next((d=>(u=Date.now(),Ws()<=Ae.DEBUG&&ne("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-h}ms
	Determined least recently used ${s} in `+(a-o)+`ms
	Removed ${i} targets in `+(l-a)+`ms
	Removed ${d} documents in `+(u-l)+`ms
Total Duration: ${u-h}ms`),j.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:d}))))}}function zO(t,e){return new KO(t,e)}class QO{constructor(){this.changes=new Vs((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Dt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?j.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class YO{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}class JO{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next((s=>(r=s,this.remoteDocumentCache.getEntry(e,n)))).next((s=>(r!==null&&Ao(r.mutation,s,Yt.empty(),$e.now()),s)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.getLocalViewOfDocuments(e,r,Re()).next((()=>r))))}getLocalViewOfDocuments(e,n,r=Re()){const s=ds();return this.populateOverlays(e,s,n).next((()=>this.computeViews(e,n,s,r).next((i=>{let o=lo();return i.forEach(((a,l)=>{o=o.insert(a,l.overlayedDocument)})),o}))))}getOverlayedDocuments(e,n){const r=ds();return this.populateOverlays(e,r,n).next((()=>this.computeViews(e,n,r,Re())))}populateOverlays(e,n,r){const s=[];return r.forEach((i=>{n.has(i)||s.push(i)})),this.documentOverlayCache.getOverlays(e,s).next((i=>{i.forEach(((o,a)=>{n.set(o,a)}))}))}computeViews(e,n,r,s){let i=lr();const o=Io(),a=(function(){return Io()})();return n.forEach(((l,u)=>{const h=r.get(u.key);s.has(u.key)&&(h===void 0||h.mutation instanceof Qr)?i=i.insert(u.key,u):h!==void 0?(o.set(u.key,h.mutation.getFieldMask()),Ao(h.mutation,u,h.mutation.getFieldMask(),$e.now())):o.set(u.key,Yt.empty())})),this.recalculateAndSaveOverlays(e,i).next((l=>(l.forEach(((u,h)=>o.set(u,h))),n.forEach(((u,h)=>a.set(u,new YO(h,o.get(u)??null)))),a)))}recalculateAndSaveOverlays(e,n){const r=Io();let s=new Ke(((o,a)=>o-a)),i=Re();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((o=>{for(const a of o)a.keys().forEach((l=>{const u=n.get(l);if(u===null)return;let h=r.get(l)||Yt.empty();h=a.applyToLocalView(u,h),r.set(l,h);const d=(s.get(a.batchId)||Re()).add(l);s=s.insert(a.batchId,d)}))})).next((()=>{const o=[],a=s.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),u=l.key,h=l.value,d=kE();h.forEach((p=>{if(!i.has(p)){const g=ME(n.get(p),r.get(p));g!==null&&d.set(p,g),i=i.add(p)}})),o.push(this.documentOverlayCache.saveOverlays(e,u,d))}return j.waitFor(o)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,n,r,s){return(function(o){return oe.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):bE(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next((i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):j.resolve(ds());let a=Lo,l=i;return o.next((u=>j.forEach(u,((h,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),i.get(h)?j.resolve():this.remoteDocumentCache.getEntry(e,h).next((p=>{l=l.insert(h,p)}))))).next((()=>this.populateOverlays(e,u,i))).next((()=>this.computeViews(e,l,u,Re()))).next((h=>({batchId:a,changes:PE(h)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new oe(n)).next((r=>{let s=lo();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s}))}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=lo();return this.indexManager.getCollectionParents(e,i).next((a=>j.forEach(a,(l=>{const u=(function(d,p){return new Mi(p,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)})(n,l.child(i));return this.getDocumentsMatchingCollectionQuery(e,u,r,s).next((h=>{h.forEach(((d,p)=>{o=o.insert(d,p)}))}))})).next((()=>o))))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next((o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s)))).next((o=>{i.forEach(((l,u)=>{const h=u.getKey();o.get(h)===null&&(o=o.insert(h,Dt.newInvalidDocument(h)))}));let a=lo();return o.forEach(((l,u)=>{const h=i.get(l);h!==void 0&&Ao(h.mutation,u,Yt.empty(),$e.now()),ul(n,u)&&(a=a.insert(l,u))})),a}))}}class XO{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return j.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,(function(s){return{id:s.id,version:s.version,createTime:Vn(s.createTime)}})(n)),j.resolve()}getNamedQuery(e,n){return j.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,(function(s){return{name:s.name,query:HO(s.bundledQuery),readTime:Vn(s.readTime)}})(n)),j.resolve()}}class ZO{constructor(){this.overlays=new Ke(oe.comparator),this.qr=new Map}getOverlay(e,n){return j.resolve(this.overlays.get(n))}getOverlays(e,n){const r=ds();return j.forEach(n,(s=>this.getOverlay(e,s).next((i=>{i!==null&&r.set(s,i)})))).next((()=>r))}saveOverlays(e,n,r){return r.forEach(((s,i)=>{this.St(e,n,i)})),j.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.qr.get(r);return s!==void 0&&(s.forEach((i=>this.overlays=this.overlays.remove(i))),this.qr.delete(r)),j.resolve()}getOverlaysForCollection(e,n,r){const s=ds(),i=n.length+1,o=new oe(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,u=l.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===i&&l.largestBatchId>r&&s.set(l.getKey(),l)}return j.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new Ke(((u,h)=>u-h));const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>r){let h=i.get(u.largestBatchId);h===null&&(h=ds(),i=i.insert(u.largestBatchId,h)),h.set(u.getKey(),u)}}const a=ds(),l=i.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach(((u,h)=>a.set(u,h))),!(a.size()>=s)););return j.resolve(a)}St(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.qr.get(s.largestBatchId).delete(r.key);this.qr.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new _O(n,r));let i=this.qr.get(n);i===void 0&&(i=Re(),this.qr.set(n,i)),this.qr.set(n,i.add(r.key))}}class eD{constructor(){this.sessionToken=Et.EMPTY_BYTE_STRING}getSessionToken(e){return j.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,j.resolve()}}class Of{constructor(){this.Qr=new pt(_t.$r),this.Ur=new pt(_t.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new _t(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach((r=>this.addReference(r,n)))}removeReference(e,n){this.Gr(new _t(e,n))}zr(e,n){e.forEach((r=>this.removeReference(r,n)))}jr(e){const n=new oe(new je([])),r=new _t(n,e),s=new _t(n,e+1),i=[];return this.Ur.forEachInRange([r,s],(o=>{this.Gr(o),i.push(o.key)})),i}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new oe(new je([])),r=new _t(n,e),s=new _t(n,e+1);let i=Re();return this.Ur.forEachInRange([r,s],(o=>{i=i.add(o.key)})),i}containsKey(e){const n=new _t(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class _t{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return oe.comparator(e.key,n.key)||be(e.Yr,n.Yr)}static Kr(e,n){return be(e.Yr,n.Yr)||oe.comparator(e.key,n.key)}}class tD{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new pt(_t.$r)}checkEmpty(e){return j.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new gO(i,n,r,s);this.mutationQueue.push(o);for(const a of s)this.Zr=this.Zr.add(new _t(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return j.resolve(o)}lookupMutationBatch(e,n){return j.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.ei(r),i=s<0?0:s;return j.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return j.resolve(this.mutationQueue.length===0?wf:this.tr-1)}getAllMutationBatches(e){return j.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new _t(n,0),s=new _t(n,Number.POSITIVE_INFINITY),i=[];return this.Zr.forEachInRange([r,s],(o=>{const a=this.Xr(o.Yr);i.push(a)})),j.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new pt(be);return n.forEach((s=>{const i=new _t(s,0),o=new _t(s,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([i,o],(a=>{r=r.add(a.Yr)}))})),j.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;oe.isDocumentKey(i)||(i=i.child(""));const o=new _t(new oe(i),0);let a=new pt(be);return this.Zr.forEachWhile((l=>{const u=l.key.path;return!!r.isPrefixOf(u)&&(u.length===s&&(a=a.add(l.Yr)),!0)}),o),j.resolve(this.ti(a))}ti(e){const n=[];return e.forEach((r=>{const s=this.Xr(r);s!==null&&n.push(s)})),n}removeMutationBatch(e,n){xe(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return j.forEach(n.mutations,(s=>{const i=new _t(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)})).next((()=>{this.Zr=r}))}ir(e){}containsKey(e,n){const r=new _t(n,0),s=this.Zr.firstAfterOrEqual(r);return j.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,j.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class nD{constructor(e){this.ri=e,this.docs=(function(){return new Ke(oe.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return j.resolve(r?r.document.mutableCopy():Dt.newInvalidDocument(n))}getEntries(e,n){let r=lr();return n.forEach((s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():Dt.newInvalidDocument(s))})),j.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=lr();const o=n.path,a=new oe(o.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:u,value:{document:h}}=l.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||kN(PN(h),r)<=0||(s.has(h.key)||ul(n,h))&&(i=i.insert(h.key,h.mutableCopy()))}return j.resolve(i)}getAllFromCollectionGroup(e,n,r,s){de(9500)}ii(e,n){return j.forEach(this.docs,(r=>n(r)))}newChangeBuffer(e){return new rD(this)}getSize(e){return j.resolve(this.size)}}class rD extends QO{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach(((r,s)=>{s.isValidDocument()?n.push(this.Nr.addEntry(e,s)):this.Nr.removeEntry(r)})),j.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}class sD{constructor(e){this.persistence=e,this.si=new Vs((n=>Af(n)),bf),this.lastRemoteSnapshotVersion=ye.min(),this.highestTargetId=0,this.oi=0,this._i=new Of,this.targetCount=0,this.ai=bi.ur()}forEachTarget(e,n){return this.si.forEach(((r,s)=>n(s))),j.resolve()}getLastRemoteSnapshotVersion(e){return j.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return j.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),j.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),j.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new bi(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,j.resolve()}updateTargetData(e,n){return this.Pr(n),j.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,j.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.si.forEach(((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.si.delete(o),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),s++)})),j.waitFor(i).next((()=>s))}getTargetCount(e){return j.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return j.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),j.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach((o=>{i.push(s.markPotentiallyOrphaned(e,o))})),j.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),j.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return j.resolve(r)}containsKey(e,n){return j.resolve(this._i.containsKey(n))}}class QE{constructor(e,n){this.ui={},this.overlays={},this.ci=new ol(0),this.li=!1,this.li=!0,this.hi=new eD,this.referenceDelegate=e(this),this.Pi=new sD(this),this.indexManager=new jO,this.remoteDocumentCache=(function(s){return new nD(s)})((r=>this.referenceDelegate.Ti(r))),this.serializer=new BO(n),this.Ii=new XO(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new ZO,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new tD(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){ne("MemoryPersistence","Starting transaction:",e);const s=new iD(this.ci.next());return this.referenceDelegate.Ei(),r(s).next((i=>this.referenceDelegate.di(s).next((()=>i)))).toPromise().then((i=>(s.raiseOnCommittedEvent(),i)))}Ai(e,n){return j.or(Object.values(this.ui).map((r=>()=>r.containsKey(e,n))))}}class iD extends ON{constructor(e){super(),this.currentSequenceNumber=e}}class Df{constructor(e){this.persistence=e,this.Ri=new Of,this.Vi=null}static mi(e){return new Df(e)}get fi(){if(this.Vi)return this.Vi;throw de(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),j.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),j.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),j.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach((s=>this.fi.add(s.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next((s=>{s.forEach((i=>this.fi.add(i.toString())))})).next((()=>r.removeTargetData(e,n)))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return j.forEach(this.fi,(r=>{const s=oe.fromPath(r);return this.gi(e,s).next((i=>{i||n.removeEntry(s,ye.min())}))})).next((()=>(this.Vi=null,n.apply(e))))}updateLimboDocument(e,n){return this.gi(e,n).next((r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(e){return 0}gi(e,n){return j.or([()=>j.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class Oc{constructor(e,n){this.persistence=e,this.pi=new Vs((r=>xN(r.path)),((r,s)=>r.isEqual(s))),this.garbageCollector=zO(this,n)}static mi(e,n){return new Oc(e,n)}Ei(){}di(e){return j.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>n.next((s=>r+s))))}wr(e){let n=0;return this.pr(e,(r=>{n++})).next((()=>n))}pr(e,n){return j.forEach(this.pi,((r,s)=>this.br(e,r,s).next((i=>i?j.resolve():n(s)))))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),i=s.newChangeBuffer();return s.ii(e,(o=>this.br(e,o,n).next((a=>{a||(r++,i.removeEntry(o,ye.min()))})))).next((()=>i.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),j.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),j.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),j.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),j.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Ya(e.data.value)),n}br(e,n,r){return j.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.pi.get(n);return j.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class Vf{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=s}static As(e,n){let r=Re(),s=Re();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new Vf(e,n.fromCache,r,s)}}class oD{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class aD{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return MC()?8:DN(Vt())>0?6:4})()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.ys(e,n).next((o=>{i.result=o})).next((()=>{if(!i.result)return this.ws(e,n,s,r).next((o=>{i.result=o}))})).next((()=>{if(i.result)return;const o=new oD;return this.Ss(e,n,o).next((a=>{if(i.result=a,this.Vs)return this.bs(e,n,o,a.size)}))})).next((()=>i.result))}bs(e,n,r,s){return r.documentReadCount<this.fs?(Ws()<=Ae.DEBUG&&ne("QueryEngine","SDK will not create cache indexes for query:",Gs(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),j.resolve()):(Ws()<=Ae.DEBUG&&ne("QueryEngine","Query:",Gs(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.gs*s?(Ws()<=Ae.DEBUG&&ne("QueryEngine","The SDK decides to create cache indexes for query:",Gs(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Dn(n))):j.resolve())}ys(e,n){if(ag(n))return j.resolve(null);let r=Dn(n);return this.indexManager.getIndexType(e,r).next((s=>s===0?null:(n.limit!==null&&s===1&&(n=fh(n,null,"F"),r=Dn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next((i=>{const o=Re(...i);return this.ps.getDocuments(e,o).next((a=>this.indexManager.getMinOffset(e,r).next((l=>{const u=this.Ds(n,a);return this.Cs(n,u,o,l.readTime)?this.ys(e,fh(n,null,"F")):this.vs(e,u,n,l)}))))})))))}ws(e,n,r,s){return ag(n)||s.isEqual(ye.min())?j.resolve(null):this.ps.getDocuments(e,r).next((i=>{const o=this.Ds(n,i);return this.Cs(n,o,r,s)?j.resolve(null):(Ws()<=Ae.DEBUG&&ne("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Gs(n)),this.vs(e,o,n,CN(s,Lo)).next((a=>a)))}))}Ds(e,n){let r=new pt(SE(e));return n.forEach(((s,i)=>{ul(e,i)&&(r=r.add(i))})),r}Cs(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Ss(e,n,r){return Ws()<=Ae.DEBUG&&ne("QueryEngine","Using full collection scan to execute query:",Gs(n)),this.ps.getDocumentsMatchingQuery(e,n,Hr.min(),r)}vs(e,n,r,s){return this.ps.getDocumentsMatchingQuery(e,r,s).next((i=>(n.forEach((o=>{i=i.insert(o.key,o)})),i)))}}const xf="LocalStore",cD=3e8;class lD{constructor(e,n,r,s){this.persistence=e,this.Fs=n,this.serializer=s,this.Ms=new Ke(be),this.xs=new Vs((i=>Af(i)),bf),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new JO(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.Ms)))}}function uD(t,e,n,r){return new lD(t,e,n,r)}async function YE(t,e){const n=ve(t);return await n.persistence.runTransaction("Handle user change","readonly",(r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next((i=>(s=i,n.Bs(e),n.mutationQueue.getAllMutationBatches(r)))).next((i=>{const o=[],a=[];let l=Re();for(const u of s){o.push(u.batchId);for(const h of u.mutations)l=l.add(h.key)}for(const u of i){a.push(u.batchId);for(const h of u.mutations)l=l.add(h.key)}return n.localDocuments.getDocuments(r,l).next((u=>({Ls:u,removedBatchIds:o,addedBatchIds:a})))}))}))}function hD(t,e){const n=ve(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const s=e.batch.keys(),i=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(a,l,u,h){const d=u.batch,p=d.keys();let g=j.resolve();return p.forEach((_=>{g=g.next((()=>h.getEntry(l,_))).next((y=>{const N=u.docVersions.get(_);xe(N!==null,48541),y.version.compareTo(N)<0&&(d.applyToRemoteDocument(y,u),y.isValidDocument()&&(y.setReadTime(u.commitVersion),h.addEntry(y)))}))})),g.next((()=>a.mutationQueue.removeMutationBatch(l,d)))})(n,r,e,i).next((()=>i.apply(r))).next((()=>n.mutationQueue.performConsistencyCheck(r))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(a){let l=Re();for(let u=0;u<a.mutationResults.length;++u)a.mutationResults[u].transformResults.length>0&&(l=l.add(a.batch.mutations[u].key));return l})(e)))).next((()=>n.localDocuments.getDocuments(r,s)))}))}function JE(t){const e=ve(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.Pi.getLastRemoteSnapshotVersion(n)))}function fD(t,e){const n=ve(t),r=e.snapshotVersion;let s=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(i=>{const o=n.Ns.newChangeBuffer({trackRemovals:!0});s=n.Ms;const a=[];e.targetChanges.forEach(((h,d)=>{const p=s.get(d);if(!p)return;a.push(n.Pi.removeMatchingKeys(i,h.removedDocuments,d).next((()=>n.Pi.addMatchingKeys(i,h.addedDocuments,d))));let g=p.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(d)!==null?g=g.withResumeToken(Et.EMPTY_BYTE_STRING,ye.min()).withLastLimboFreeSnapshotVersion(ye.min()):h.resumeToken.approximateByteSize()>0&&(g=g.withResumeToken(h.resumeToken,r)),s=s.insert(d,g),(function(y,N,D){return y.resumeToken.approximateByteSize()===0||N.snapshotVersion.toMicroseconds()-y.snapshotVersion.toMicroseconds()>=cD?!0:D.addedDocuments.size+D.modifiedDocuments.size+D.removedDocuments.size>0})(p,g,h)&&a.push(n.Pi.updateTargetData(i,g))}));let l=lr(),u=Re();if(e.documentUpdates.forEach((h=>{e.resolvedLimboDocuments.has(h)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(i,h))})),a.push(dD(i,o,e.documentUpdates).next((h=>{l=h.ks,u=h.qs}))),!r.isEqual(ye.min())){const h=n.Pi.getLastRemoteSnapshotVersion(i).next((d=>n.Pi.setTargetsMetadata(i,i.currentSequenceNumber,r)));a.push(h)}return j.waitFor(a).next((()=>o.apply(i))).next((()=>n.localDocuments.getLocalViewOfDocuments(i,l,u))).next((()=>l))})).then((i=>(n.Ms=s,i)))}function dD(t,e,n){let r=Re(),s=Re();return n.forEach((i=>r=r.add(i))),e.getEntries(t,r).next((i=>{let o=lr();return n.forEach(((a,l)=>{const u=i.get(a);l.isFoundDocument()!==u.isFoundDocument()&&(s=s.add(a)),l.isNoDocument()&&l.version.isEqual(ye.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!u.isValidDocument()||l.version.compareTo(u.version)>0||l.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):ne(xf,"Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",l.version)})),{ks:o,qs:s}}))}function pD(t,e){const n=ve(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=wf),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function mD(t,e){const n=ve(t);return n.persistence.runTransaction("Allocate target","readwrite",(r=>{let s;return n.Pi.getTargetData(r,e).next((i=>i?(s=i,j.resolve(s)):n.Pi.allocateTargetId(r).next((o=>(s=new Or(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,s).next((()=>s)))))))})).then((r=>{const s=n.Ms.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r}))}async function _h(t,e,n){const r=ve(t),s=r.Ms.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,(o=>r.persistence.referenceDelegate.removeTarget(o,s)))}catch(o){if(!xi(o))throw o;ne(xf,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Ms=r.Ms.remove(e),r.xs.delete(s.target)}function Eg(t,e,n){const r=ve(t);let s=ye.min(),i=Re();return r.persistence.runTransaction("Execute query","readwrite",(o=>(function(l,u,h){const d=ve(l),p=d.xs.get(h);return p!==void 0?j.resolve(d.Ms.get(p)):d.Pi.getTargetData(u,h)})(r,o,Dn(e)).next((a=>{if(a)return s=a.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(o,a.targetId).next((l=>{i=l}))})).next((()=>r.Fs.getDocumentsMatchingQuery(o,e,n?s:ye.min(),n?i:Re()))).next((a=>(gD(r,eO(e),a),{documents:a,Qs:i})))))}function gD(t,e,n){let r=t.Os.get(e)||ye.min();n.forEach(((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)})),t.Os.set(e,r)}class wg{constructor(){this.activeTargetIds=oO()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class _D{constructor(){this.Mo=new wg,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new wg,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class yD{Oo(e){}shutdown(){}}const Tg="ConnectivityMonitor";class Ig{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ne(Tg,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){ne(Tg,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let Ba=null;function yh(){return Ba===null?Ba=(function(){return 268435456+Math.round(2147483648*Math.random())})():Ba++,"0x"+Ba.toString(16)}const yu="RestConnection",vD={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class ED{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${s}`,this.Wo=this.databaseId.database===Sc?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Go(e,n,r,s,i){const o=yh(),a=this.zo(e,n.toUriEncodedString());ne(yu,`Sending RPC '${e}' ${o}:`,a,r);const l={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(l,s,i);const{host:u}=new URL(a),h=ki(u);return this.Jo(e,a,l,r,h).then((d=>(ne(yu,`Received RPC '${e}' ${o}: `,d),d)),(d=>{throw Cs(yu,`RPC '${e}' ${o} failed with error: `,d,"url: ",a,"request:",r),d}))}Ho(e,n,r,s,i,o){return this.Go(e,n,r,s,i)}jo(e,n,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Di})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((s,i)=>e[i]=s)),r&&r.headers.forEach(((s,i)=>e[i]=s))}zo(e,n){const r=vD[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}class wD{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const Pt="WebChannelConnection";class TD extends ED{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,s,i){const o=yh();return new Promise(((a,l)=>{const u=new Xv;u.setWithCredentials(!0),u.listenOnce(Zv.COMPLETE,(()=>{try{switch(u.getLastErrorCode()){case Qa.NO_ERROR:const d=u.getResponseJson();ne(Pt,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(d)),a(d);break;case Qa.TIMEOUT:ne(Pt,`RPC '${e}' ${o} timed out`),l(new X(B.DEADLINE_EXCEEDED,"Request time out"));break;case Qa.HTTP_ERROR:const p=u.getStatus();if(ne(Pt,`RPC '${e}' ${o} failed with status:`,p,"response text:",u.getResponseText()),p>0){let g=u.getResponseJson();Array.isArray(g)&&(g=g[0]);const _=g?.error;if(_&&_.status&&_.message){const y=(function(D){const O=D.toLowerCase().replace(/_/g,"-");return Object.values(B).indexOf(O)>=0?O:B.UNKNOWN})(_.status);l(new X(y,_.message))}else l(new X(B.UNKNOWN,"Server responded with status "+u.getStatus()))}else l(new X(B.UNAVAILABLE,"Connection failed."));break;default:de(9055,{l_:e,streamId:o,h_:u.getLastErrorCode(),P_:u.getLastError()})}}finally{ne(Pt,`RPC '${e}' ${o} completed.`)}}));const h=JSON.stringify(s);ne(Pt,`RPC '${e}' ${o} sending request:`,s),u.send(n,"POST",h,r,15)}))}T_(e,n,r){const s=yh(),i=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=nE(),a=tE(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(l.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(l.useFetchStreams=!0),this.jo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const h=i.join("");ne(Pt,`Creating RPC '${e}' stream ${s}: ${h}`,l);const d=o.createWebChannel(h,l);this.I_(d);let p=!1,g=!1;const _=new wD({Yo:N=>{g?ne(Pt,`Not sending because RPC '${e}' stream ${s} is closed:`,N):(p||(ne(Pt,`Opening RPC '${e}' stream ${s} transport.`),d.open(),p=!0),ne(Pt,`RPC '${e}' stream ${s} sending:`,N),d.send(N))},Zo:()=>d.close()}),y=(N,D,O)=>{N.listen(D,(E=>{try{O(E)}catch(k){setTimeout((()=>{throw k}),0)}}))};return y(d,co.EventType.OPEN,(()=>{g||(ne(Pt,`RPC '${e}' stream ${s} transport opened.`),_.o_())})),y(d,co.EventType.CLOSE,(()=>{g||(g=!0,ne(Pt,`RPC '${e}' stream ${s} transport closed`),_.a_(),this.E_(d))})),y(d,co.EventType.ERROR,(N=>{g||(g=!0,Cs(Pt,`RPC '${e}' stream ${s} transport errored. Name:`,N.name,"Message:",N.message),_.a_(new X(B.UNAVAILABLE,"The operation could not be completed")))})),y(d,co.EventType.MESSAGE,(N=>{if(!g){const D=N.data[0];xe(!!D,16349);const O=D,E=O?.error||O[0]?.error;if(E){ne(Pt,`RPC '${e}' stream ${s} received error:`,E);const k=E.status;let V=(function(T){const w=nt[T];if(w!==void 0)return UE(w)})(k),U=E.message;V===void 0&&(V=B.INTERNAL,U="Unknown error status: "+k+" with message "+E.message),g=!0,_.a_(new X(V,U)),d.close()}else ne(Pt,`RPC '${e}' stream ${s} received:`,D),_.u_(D)}})),y(a,eE.STAT_EVENT,(N=>{N.stat===ih.PROXY?ne(Pt,`RPC '${e}' stream ${s} detected buffering proxy`):N.stat===ih.NOPROXY&&ne(Pt,`RPC '${e}' stream ${s} detected no buffering proxy`)})),setTimeout((()=>{_.__()}),0),_}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((n=>n===e))}}function vu(){return typeof document<"u"?document:null}function pl(t){return new RO(t,!0)}class XE{constructor(e,n,r=1e3,s=1.5,i=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=s,this.R_=i,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),s=Math.max(0,n-r);s>0&&ne("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,s,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const Ag="PersistentStream";class ZE{constructor(e,n,r,s,i,o,a,l){this.Mi=e,this.S_=r,this.b_=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new XE(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===B.RESOURCE_EXHAUSTED?(cr(n.toString()),cr("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===B.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,s])=>{this.D_===n&&this.G_(r,s)}),(r=>{e((()=>{const s=new X(B.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(s)}))}))}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo((()=>{r((()=>this.listener.Xo()))})),this.stream.t_((()=>{r((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((s=>{r((()=>this.z_(s)))})),this.stream.onMessage((s=>{r((()=>++this.F_==1?this.J_(s):this.onNext(s)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return ne(Ag,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget((()=>this.D_===e?n():(ne(Ag,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class ID extends ZE{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=PO(this.serializer,e),r=(function(i){if(!("targetChange"in i))return ye.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?ye.min():o.readTime?Vn(o.readTime):ye.min()})(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=gh(this.serializer),n.addTarget=(function(i,o){let a;const l=o.target;if(a=uh(l)?{documents:OO(i,l)}:{query:DO(i,l).ft},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=HE(i,o.resumeToken);const u=dh(i,o.expectedCount);u!==null&&(a.expectedCount=u)}else if(o.snapshotVersion.compareTo(ye.min())>0){a.readTime=Nc(i,o.snapshotVersion.toTimestamp());const u=dh(i,o.expectedCount);u!==null&&(a.expectedCount=u)}return a})(this.serializer,e);const r=xO(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=gh(this.serializer),n.removeTarget=e,this.q_(n)}}class AD extends ZE{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return xe(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,xe(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){xe(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=NO(e.writeResults,e.commitTime),r=Vn(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=gh(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((r=>kO(this.serializer,r)))};this.q_(n)}}class bD{}class RD extends bD{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new X(B.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([i,o])=>this.connection.Go(e,ph(n,r),s,i,o))).catch((i=>{throw i.name==="FirebaseError"?(i.code===B.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new X(B.UNKNOWN,i.toString())}))}Ho(e,n,r,s,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([o,a])=>this.connection.Ho(e,ph(n,r),s,o,a,i))).catch((o=>{throw o.name==="FirebaseError"?(o.code===B.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new X(B.UNKNOWN,o.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class SD{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(cr(n),this.aa=!1):ne("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const Ps="RemoteStore";class CD{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=i,this.Aa.Oo((o=>{r.enqueueAndForget((async()=>{xs(this)&&(ne(Ps,"Restarting streams for network reachability change."),await(async function(l){const u=ve(l);u.Ea.add(4),await aa(u),u.Ra.set("Unknown"),u.Ea.delete(4),await ml(u)})(this))}))})),this.Ra=new SD(r,s)}}async function ml(t){if(xs(t))for(const e of t.da)await e(!0)}async function aa(t){for(const e of t.da)await e(!1)}function ew(t,e){const n=ve(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),Ff(n)?Uf(n):Li(n).O_()&&Lf(n,e))}function Mf(t,e){const n=ve(t),r=Li(n);n.Ia.delete(e),r.O_()&&tw(n,e),n.Ia.size===0&&(r.O_()?r.L_():xs(n)&&n.Ra.set("Unknown"))}function Lf(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ye.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Li(t).Y_(e)}function tw(t,e){t.Va.Ue(e),Li(t).Z_(e)}function Uf(t){t.Va=new TO({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),Li(t).start(),t.Ra.ua()}function Ff(t){return xs(t)&&!Li(t).x_()&&t.Ia.size>0}function xs(t){return ve(t).Ea.size===0}function nw(t){t.Va=void 0}async function PD(t){t.Ra.set("Online")}async function kD(t){t.Ia.forEach(((e,n)=>{Lf(t,e)}))}async function ND(t,e){nw(t),Ff(t)?(t.Ra.ha(e),Uf(t)):t.Ra.set("Unknown")}async function OD(t,e,n){if(t.Ra.set("Online"),e instanceof BE&&e.state===2&&e.cause)try{await(async function(s,i){const o=i.cause;for(const a of i.targetIds)s.Ia.has(a)&&(await s.remoteSyncer.rejectListen(a,o),s.Ia.delete(a),s.Va.removeTarget(a))})(t,e)}catch(r){ne(Ps,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Dc(t,r)}else if(e instanceof Za?t.Va.Ze(e):e instanceof FE?t.Va.st(e):t.Va.tt(e),!n.isEqual(ye.min()))try{const r=await JE(t.localStore);n.compareTo(r)>=0&&await(function(i,o){const a=i.Va.Tt(o);return a.targetChanges.forEach(((l,u)=>{if(l.resumeToken.approximateByteSize()>0){const h=i.Ia.get(u);h&&i.Ia.set(u,h.withResumeToken(l.resumeToken,o))}})),a.targetMismatches.forEach(((l,u)=>{const h=i.Ia.get(l);if(!h)return;i.Ia.set(l,h.withResumeToken(Et.EMPTY_BYTE_STRING,h.snapshotVersion)),tw(i,l);const d=new Or(h.target,l,u,h.sequenceNumber);Lf(i,d)})),i.remoteSyncer.applyRemoteEvent(a)})(t,n)}catch(r){ne(Ps,"Failed to raise snapshot:",r),await Dc(t,r)}}async function Dc(t,e,n){if(!xi(e))throw e;t.Ea.add(1),await aa(t),t.Ra.set("Offline"),n||(n=()=>JE(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{ne(Ps,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await ml(t)}))}function rw(t,e){return e().catch((n=>Dc(t,n,e)))}async function gl(t){const e=ve(t),n=Wr(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:wf;for(;DD(e);)try{const s=await pD(e.localStore,r);if(s===null){e.Ta.length===0&&n.L_();break}r=s.batchId,VD(e,s)}catch(s){await Dc(e,s)}sw(e)&&iw(e)}function DD(t){return xs(t)&&t.Ta.length<10}function VD(t,e){t.Ta.push(e);const n=Wr(t);n.O_()&&n.X_&&n.ea(e.mutations)}function sw(t){return xs(t)&&!Wr(t).x_()&&t.Ta.length>0}function iw(t){Wr(t).start()}async function xD(t){Wr(t).ra()}async function MD(t){const e=Wr(t);for(const n of t.Ta)e.ea(n.mutations)}async function LD(t,e,n){const r=t.Ta.shift(),s=Pf.from(r,e,n);await rw(t,(()=>t.remoteSyncer.applySuccessfulWrite(s))),await gl(t)}async function UD(t,e){e&&Wr(t).X_&&await(async function(r,s){if((function(o){return vO(o)&&o!==B.ABORTED})(s.code)){const i=r.Ta.shift();Wr(r).B_(),await rw(r,(()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s))),await gl(r)}})(t,e),sw(t)&&iw(t)}async function bg(t,e){const n=ve(t);n.asyncQueue.verifyOperationInProgress(),ne(Ps,"RemoteStore received new credentials");const r=xs(n);n.Ea.add(3),await aa(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await ml(n)}async function FD(t,e){const n=ve(t);e?(n.Ea.delete(2),await ml(n)):e||(n.Ea.add(2),await aa(n),n.Ra.set("Unknown"))}function Li(t){return t.ma||(t.ma=(function(n,r,s){const i=ve(n);return i.sa(),new ID(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)})(t.datastore,t.asyncQueue,{Xo:PD.bind(null,t),t_:kD.bind(null,t),r_:ND.bind(null,t),H_:OD.bind(null,t)}),t.da.push((async e=>{e?(t.ma.B_(),Ff(t)?Uf(t):t.Ra.set("Unknown")):(await t.ma.stop(),nw(t))}))),t.ma}function Wr(t){return t.fa||(t.fa=(function(n,r,s){const i=ve(n);return i.sa(),new AD(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)})(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:xD.bind(null,t),r_:UD.bind(null,t),ta:MD.bind(null,t),na:LD.bind(null,t)}),t.da.push((async e=>{e?(t.fa.B_(),await gl(t)):(await t.fa.stop(),t.Ta.length>0&&(ne(Ps,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))}))),t.fa}class Bf{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new tr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((o=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,a=new Bf(e,n,o,s,i);return a.start(r),a}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new X(B.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Hf(t,e){if(cr("AsyncQueue",`${e}: ${t}`),xi(t))return new X(B.UNAVAILABLE,`${e}: ${t}`);throw t}class li{static emptySet(e){return new li(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||oe.comparator(n.key,r.key):(n,r)=>oe.comparator(n.key,r.key),this.keyedMap=lo(),this.sortedSet=new Ke(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,r)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof li)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new li;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}class Rg{constructor(){this.ga=new Ke(oe.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):de(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,r)=>{e.push(r)})),e}}class Ri{constructor(e,n,r,s,i,o,a,l,u){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=u}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach((a=>{o.push({type:0,doc:a})})),new Ri(e,n,li.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ll(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}class BD{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class HD{constructor(){this.queries=Sg(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const s=ve(n),i=s.queries;s.queries=Sg(),i.forEach(((o,a)=>{for(const l of a.Sa)l.onError(r)}))})(this,new X(B.ABORTED,"Firestore shutting down"))}}function Sg(){return new Vs((t=>RE(t)),ll)}async function ow(t,e){const n=ve(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.ba()&&e.Da()&&(r=2):(i=new BD,r=e.Da()?0:1);try{switch(r){case 0:i.wa=await n.onListen(s,!0);break;case 1:i.wa=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const a=Hf(o,`Initialization of query '${Gs(e.query)}' failed`);return void e.onError(a)}n.queries.set(s,i),i.Sa.push(e),e.va(n.onlineState),i.wa&&e.Fa(i.wa)&&jf(n)}async function aw(t,e){const n=ve(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.Sa.indexOf(e);o>=0&&(i.Sa.splice(o,1),i.Sa.length===0?s=e.Da()?0:1:!i.ba()&&e.Da()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function jD(t,e){const n=ve(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const a of o.Sa)a.Fa(s)&&(r=!0);o.wa=s}}r&&jf(n)}function $D(t,e,n){const r=ve(t),s=r.queries.get(e);if(s)for(const i of s.Sa)i.onError(n);r.queries.delete(e)}function jf(t){t.Ca.forEach((e=>{e.next()}))}var vh,Cg;(Cg=vh||(vh={})).Ma="default",Cg.Cache="cache";class cw{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new Ri(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Ri.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==vh.Cache}}class lw{constructor(e){this.key=e}}class uw{constructor(e){this.key=e}}class qD{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Re(),this.mutatedKeys=Re(),this.eu=SE(e),this.tu=new li(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new Rg,s=n?n.tu:this.tu;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,a=!1;const l=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,u=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal(((h,d)=>{const p=s.get(h),g=ul(this.query,d)?d:null,_=!!p&&this.mutatedKeys.has(p.key),y=!!g&&(g.hasLocalMutations||this.mutatedKeys.has(g.key)&&g.hasCommittedMutations);let N=!1;p&&g?p.data.isEqual(g.data)?_!==y&&(r.track({type:3,doc:g}),N=!0):this.su(p,g)||(r.track({type:2,doc:g}),N=!0,(l&&this.eu(g,l)>0||u&&this.eu(g,u)<0)&&(a=!0)):!p&&g?(r.track({type:0,doc:g}),N=!0):p&&!g&&(r.track({type:1,doc:p}),N=!0,(l||u)&&(a=!0)),N&&(g?(o=o.add(g),i=y?i.add(h):i.delete(h)):(o=o.delete(h),i=i.delete(h)))})),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),i=i.delete(h.key),r.track({type:1,doc:h})}return{tu:o,iu:r,Cs:a,mutatedKeys:i}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort(((h,d)=>(function(g,_){const y=N=>{switch(N){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return de(20277,{Rt:N})}};return y(g)-y(_)})(h.type,d.type)||this.eu(h.doc,d.doc))),this.ou(r),s=s??!1;const a=n&&!s?this._u():[],l=this.Xa.size===0&&this.current&&!s?1:0,u=l!==this.Za;return this.Za=l,o.length!==0||u?{snapshot:new Ri(this.query,e.tu,i,o,e.mutatedKeys,l===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:a}:{au:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Rg,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Ya=this.Ya.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ya=this.Ya.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Re(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))}));const n=[];return e.forEach((r=>{this.Xa.has(r)||n.push(new uw(r))})),this.Xa.forEach((r=>{e.has(r)||n.push(new lw(r))})),n}cu(e){this.Ya=e.Qs,this.Xa=Re();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Ri.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const $f="SyncEngine";class WD{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class GD{constructor(e){this.key=e,this.hu=!1}}class KD{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new Vs((a=>RE(a)),ll),this.Iu=new Map,this.Eu=new Set,this.du=new Ke(oe.comparator),this.Au=new Map,this.Ru=new Of,this.Vu={},this.mu=new Map,this.fu=bi.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function zD(t,e,n=!0){const r=gw(t);let s;const i=r.Tu.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.lu()):s=await hw(r,e,n,!0),s}async function QD(t,e){const n=gw(t);await hw(n,e,!0,!1)}async function hw(t,e,n,r){const s=await mD(t.localStore,Dn(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let a;return r&&(a=await YD(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&ew(t.remoteStore,s),a}async function YD(t,e,n,r,s){t.pu=(d,p,g)=>(async function(y,N,D,O){let E=N.view.ru(D);E.Cs&&(E=await Eg(y.localStore,N.query,!1).then((({documents:b})=>N.view.ru(b,E))));const k=O&&O.targetChanges.get(N.targetId),V=O&&O.targetMismatches.get(N.targetId)!=null,U=N.view.applyChanges(E,y.isPrimaryClient,k,V);return kg(y,N.targetId,U.au),U.snapshot})(t,d,p,g);const i=await Eg(t.localStore,e,!0),o=new qD(e,i.Qs),a=o.ru(i.documents),l=oa.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),u=o.applyChanges(a,t.isPrimaryClient,l);kg(t,n,u.au);const h=new WD(e,n,o);return t.Tu.set(e,h),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),u.snapshot}async function JD(t,e,n){const r=ve(t),s=r.Tu.get(e),i=r.Iu.get(s.targetId);if(i.length>1)return r.Iu.set(s.targetId,i.filter((o=>!ll(o,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await _h(r.localStore,s.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(s.targetId),n&&Mf(r.remoteStore,s.targetId),Eh(r,s.targetId)})).catch(Vi)):(Eh(r,s.targetId),await _h(r.localStore,s.targetId,!0))}async function XD(t,e){const n=ve(t),r=n.Tu.get(e),s=n.Iu.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Mf(n.remoteStore,r.targetId))}async function ZD(t,e,n){const r=oV(t);try{const s=await(function(o,a){const l=ve(o),u=$e.now(),h=a.reduce(((g,_)=>g.add(_.key)),Re());let d,p;return l.persistence.runTransaction("Locally write mutations","readwrite",(g=>{let _=lr(),y=Re();return l.Ns.getEntries(g,h).next((N=>{_=N,_.forEach(((D,O)=>{O.isValidDocument()||(y=y.add(D))}))})).next((()=>l.localDocuments.getOverlayedDocuments(g,_))).next((N=>{d=N;const D=[];for(const O of a){const E=pO(O,d.get(O.key).overlayedDocument);E!=null&&D.push(new Qr(O.key,E,yE(E.value.mapValue),dn.exists(!0)))}return l.mutationQueue.addMutationBatch(g,u,D,a)})).next((N=>{p=N;const D=N.applyToLocalDocumentSet(d,y);return l.documentOverlayCache.saveOverlays(g,N.batchId,D)}))})).then((()=>({batchId:p.batchId,changes:PE(d)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),(function(o,a,l){let u=o.Vu[o.currentUser.toKey()];u||(u=new Ke(be)),u=u.insert(a,l),o.Vu[o.currentUser.toKey()]=u})(r,s.batchId,n),await ca(r,s.changes),await gl(r.remoteStore)}catch(s){const i=Hf(s,"Failed to persist write");n.reject(i)}}async function fw(t,e){const n=ve(t);try{const r=await fD(n.localStore,e);e.targetChanges.forEach(((s,i)=>{const o=n.Au.get(i);o&&(xe(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?o.hu=!0:s.modifiedDocuments.size>0?xe(o.hu,14607):s.removedDocuments.size>0&&(xe(o.hu,42227),o.hu=!1))})),await ca(n,r,e)}catch(r){await Vi(r)}}function Pg(t,e,n){const r=ve(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Tu.forEach(((i,o)=>{const a=o.view.va(e);a.snapshot&&s.push(a.snapshot)})),(function(o,a){const l=ve(o);l.onlineState=a;let u=!1;l.queries.forEach(((h,d)=>{for(const p of d.Sa)p.va(a)&&(u=!0)})),u&&jf(l)})(r.eventManager,e),s.length&&r.Pu.H_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function eV(t,e,n){const r=ve(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Au.get(e),i=s&&s.key;if(i){let o=new Ke(oe.comparator);o=o.insert(i,Dt.newNoDocument(i,ye.min()));const a=Re().add(i),l=new dl(ye.min(),new Map,new Ke(be),o,a);await fw(r,l),r.du=r.du.remove(i),r.Au.delete(e),qf(r)}else await _h(r.localStore,e,!1).then((()=>Eh(r,e,n))).catch(Vi)}async function tV(t,e){const n=ve(t),r=e.batch.batchId;try{const s=await hD(n.localStore,e);pw(n,r,null),dw(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await ca(n,s)}catch(s){await Vi(s)}}async function nV(t,e,n){const r=ve(t);try{const s=await(function(o,a){const l=ve(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",(u=>{let h;return l.mutationQueue.lookupMutationBatch(u,a).next((d=>(xe(d!==null,37113),h=d.keys(),l.mutationQueue.removeMutationBatch(u,d)))).next((()=>l.mutationQueue.performConsistencyCheck(u))).next((()=>l.documentOverlayCache.removeOverlaysForBatchId(u,h,a))).next((()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,h))).next((()=>l.localDocuments.getDocuments(u,h)))}))})(r.localStore,e);pw(r,e,n),dw(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await ca(r,s)}catch(s){await Vi(s)}}function dw(t,e){(t.mu.get(e)||[]).forEach((n=>{n.resolve()})),t.mu.delete(e)}function pw(t,e,n){const r=ve(t);let s=r.Vu[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Vu[r.currentUser.toKey()]=s}}function Eh(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach((r=>{t.Ru.containsKey(r)||mw(t,r)}))}function mw(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(Mf(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),qf(t))}function kg(t,e,n){for(const r of n)r instanceof lw?(t.Ru.addReference(r.key,e),rV(t,r)):r instanceof uw?(ne($f,"Document no longer in limbo: "+r.key),t.Ru.removeReference(r.key,e),t.Ru.containsKey(r.key)||mw(t,r.key)):de(19791,{wu:r})}function rV(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Eu.has(r)||(ne($f,"New document in limbo: "+n),t.Eu.add(r),qf(t))}function qf(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new oe(je.fromString(e)),r=t.fu.next();t.Au.set(r,new GD(n)),t.du=t.du.insert(n,r),ew(t.remoteStore,new Or(Dn(Rf(n.path)),r,"TargetPurposeLimboResolution",ol.ce))}}async function ca(t,e,n){const r=ve(t),s=[],i=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach(((a,l)=>{o.push(r.pu(l,e,n).then((u=>{if((u||n)&&r.isPrimaryClient){const h=u?!u.fromCache:n?.targetChanges.get(l.targetId)?.current;r.sharedClientState.updateQueryState(l.targetId,h?"current":"not-current")}if(u){s.push(u);const h=Vf.As(l.targetId,u);i.push(h)}})))})),await Promise.all(o),r.Pu.H_(s),await(async function(l,u){const h=ve(l);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",(d=>j.forEach(u,(p=>j.forEach(p.Es,(g=>h.persistence.referenceDelegate.addReference(d,p.targetId,g))).next((()=>j.forEach(p.ds,(g=>h.persistence.referenceDelegate.removeReference(d,p.targetId,g)))))))))}catch(d){if(!xi(d))throw d;ne(xf,"Failed to update sequence numbers: "+d)}for(const d of u){const p=d.targetId;if(!d.fromCache){const g=h.Ms.get(p),_=g.snapshotVersion,y=g.withLastLimboFreeSnapshotVersion(_);h.Ms=h.Ms.insert(p,y)}}})(r.localStore,i))}async function sV(t,e){const n=ve(t);if(!n.currentUser.isEqual(e)){ne($f,"User change. New user:",e.toKey());const r=await YE(n.localStore,e);n.currentUser=e,(function(i,o){i.mu.forEach((a=>{a.forEach((l=>{l.reject(new X(B.CANCELLED,o))}))})),i.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await ca(n,r.Ls)}}function iV(t,e){const n=ve(t),r=n.Au.get(e);if(r&&r.hu)return Re().add(r.key);{let s=Re();const i=n.Iu.get(e);if(!i)return s;for(const o of i){const a=n.Tu.get(o);s=s.unionWith(a.view.nu)}return s}}function gw(t){const e=ve(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=fw.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=iV.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=eV.bind(null,e),e.Pu.H_=jD.bind(null,e.eventManager),e.Pu.yu=$D.bind(null,e.eventManager),e}function oV(t){const e=ve(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=tV.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=nV.bind(null,e),e}class Vc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=pl(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return uD(this.persistence,new aD,e.initialUser,this.serializer)}Cu(e){return new QE(Df.mi,this.serializer)}Du(e){return new _D}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Vc.provider={build:()=>new Vc};class aV extends Vc{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){xe(this.persistence.referenceDelegate instanceof Oc,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new GO(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Ht.withCacheSize(this.cacheSizeBytes):Ht.DEFAULT;return new QE((r=>Oc.mi(r,n)),this.serializer)}}class wh{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Pg(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=sV.bind(null,this.syncEngine),await FD(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new HD})()}createDatastore(e){const n=pl(e.databaseInfo.databaseId),r=(function(i){return new TD(i)})(e.databaseInfo);return(function(i,o,a,l){return new RD(i,o,a,l)})(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return(function(r,s,i,o,a){return new CD(r,s,i,o,a)})(this.localStore,this.datastore,e.asyncQueue,(n=>Pg(this.syncEngine,n,0)),(function(){return Ig.v()?new Ig:new yD})())}createSyncEngine(e,n){return(function(s,i,o,a,l,u,h){const d=new KD(s,i,o,a,l,u);return h&&(d.gu=!0),d})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){await(async function(n){const r=ve(n);ne(Ps,"RemoteStore shutting down."),r.Ea.add(5),await aa(r),r.Aa.shutdown(),r.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}wh.provider={build:()=>new wh};class _w{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):cr("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}const Gr="FirestoreClient";class cV{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=Nt.UNAUTHENTICATED,this.clientId=sl.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,(async o=>{ne(Gr,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(r,(o=>(ne(Gr,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new tr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Hf(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function Eu(t,e){t.asyncQueue.verifyOperationInProgress(),ne(Gr,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener((async s=>{r.isEqual(s)||(await YE(e.localStore,s),r=s)})),e.persistence.setDatabaseDeletedListener((()=>t.terminate())),t._offlineComponents=e}async function Ng(t,e){t.asyncQueue.verifyOperationInProgress();const n=await lV(t);ne(Gr,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener((r=>bg(e.remoteStore,r))),t.setAppCheckTokenChangeListener(((r,s)=>bg(e.remoteStore,s))),t._onlineComponents=e}async function lV(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){ne(Gr,"Using user provided OfflineComponentProvider");try{await Eu(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(s){return s.name==="FirebaseError"?s.code===B.FAILED_PRECONDITION||s.code===B.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11})(n))throw n;Cs("Error using user provided cache. Falling back to memory cache: "+n),await Eu(t,new Vc)}}else ne(Gr,"Using default OfflineComponentProvider"),await Eu(t,new aV(void 0));return t._offlineComponents}async function yw(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(ne(Gr,"Using user provided OnlineComponentProvider"),await Ng(t,t._uninitializedComponentsProvider._online)):(ne(Gr,"Using default OnlineComponentProvider"),await Ng(t,new wh))),t._onlineComponents}function uV(t){return yw(t).then((e=>e.syncEngine))}async function vw(t){const e=await yw(t),n=e.eventManager;return n.onListen=zD.bind(null,e.syncEngine),n.onUnlisten=JD.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=QD.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=XD.bind(null,e.syncEngine),n}function hV(t,e,n={}){const r=new tr;return t.asyncQueue.enqueueAndForget((async()=>(function(i,o,a,l,u){const h=new _w({next:p=>{h.Nu(),o.enqueueAndForget((()=>aw(i,d)));const g=p.docs.has(a);!g&&p.fromCache?u.reject(new X(B.UNAVAILABLE,"Failed to get document because the client is offline.")):g&&p.fromCache&&l&&l.source==="server"?u.reject(new X(B.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(p)},error:p=>u.reject(p)}),d=new cw(Rf(a.path),h,{includeMetadataChanges:!0,qa:!0});return ow(i,d)})(await vw(t),t.asyncQueue,e,n,r))),r.promise}function fV(t,e,n={}){const r=new tr;return t.asyncQueue.enqueueAndForget((async()=>(function(i,o,a,l,u){const h=new _w({next:p=>{h.Nu(),o.enqueueAndForget((()=>aw(i,d))),p.fromCache&&l.source==="server"?u.reject(new X(B.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(p)},error:p=>u.reject(p)}),d=new cw(a,h,{includeMetadataChanges:!0,qa:!0});return ow(i,d)})(await vw(t),t.asyncQueue,e,n,r))),r.promise}function Ew(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}const Og=new Map;const ww="firestore.googleapis.com",Dg=!0;class Vg{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new X(B.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=ww,this.ssl=Dg}else this.host=e.host,this.ssl=e.ssl??Dg;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=zE;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<qO)throw new X(B.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}aE("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Ew(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new X(B.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new X(B.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new X(B.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,s){return r.timeoutSeconds===s.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class _l{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Vg({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new X(B.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new X(B.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Vg(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new iE;switch(r.type){case"firstParty":return new TN(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new X(B.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const r=Og.get(n);r&&(ne("ComponentProvider","Removing Datastore"),Og.delete(n),r.terminate())})(this),Promise.resolve()}}function Tw(t,e,n,r={}){t=wn(t,_l);const s=ki(e),i=t._getSettings(),o={...i,emulatorOptions:t._getEmulatorOptions()},a=`${e}:${n}`;s&&(lv(`https://${a}`),uv("Firestore",!0)),i.host!==ww&&i.host!==a&&Cs("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const l={...i,host:a,ssl:s,emulatorOptions:r};if(!Is(l,o)&&(t._setSettings(l),r.mockUserToken)){let u,h;if(typeof r.mockUserToken=="string")u=r.mockUserToken,h=Nt.MOCK_USER;else{u=SC(r.mockUserToken,t._app?.options.projectId);const d=r.mockUserToken.sub||r.mockUserToken.user_id;if(!d)throw new X(B.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new Nt(d)}t._authCredentials=new vN(new sE(u,h))}}class Yr{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Yr(this.firestore,e,this._query)}}class Xe{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new nr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Xe(this.firestore,e,this._key)}toJSON(){return{type:Xe._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(sa(n,Xe._jsonSchema))return new Xe(e,r||null,new oe(je.fromString(n.referencePath)))}}Xe._jsonSchemaVersion="firestore/documentReference/1.0",Xe._jsonSchema={type:it("string",Xe._jsonSchemaVersion),referencePath:it("string")};class nr extends Yr{constructor(e,n,r){super(e,n,Rf(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Xe(this.firestore,null,new oe(e))}withConverter(e){return new nr(this.firestore,e,this._path)}}function dV(t,e,...n){if(t=at(t),oE("collection","path",e),t instanceof _l){const r=je.fromString(e,...n);return Km(r),new nr(t,null,r)}{if(!(t instanceof Xe||t instanceof nr))throw new X(B.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(je.fromString(e,...n));return Km(r),new nr(t.firestore,null,r)}}function ec(t,e,...n){if(t=at(t),arguments.length===1&&(e=sl.newId()),oE("doc","path",e),t instanceof _l){const r=je.fromString(e,...n);return Gm(r),new Xe(t,null,new oe(r))}{if(!(t instanceof Xe||t instanceof nr))throw new X(B.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(je.fromString(e,...n));return Gm(r),new Xe(t.firestore,t instanceof nr?t.converter:null,new oe(r))}}const xg="AsyncQueue";class Mg{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new XE(this,"async_queue_retry"),this._c=()=>{const r=vu();r&&ne(xg,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=vu();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=vu();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new tr;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!xi(e))throw e;ne(xg,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,cr("INTERNAL UNHANDLED ERROR: ",Lg(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const s=Bf.createAndSchedule(this,e,n,r,(i=>this.hc(i)));return this.tc.push(s),s}uc(){this.nc&&de(47125,{Pc:Lg(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,r)=>n.targetTimeMs-r.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function Lg(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class Ms extends _l{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new Mg,this._persistenceKey=s?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Mg(e),this._firestoreClient=void 0,await e}}}function Iw(t,e){const n=typeof t=="object"?t:pv(),r=typeof t=="string"?t:Sc,s=hf(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=bC("firestore");i&&Tw(s,...i)}return s}function yl(t){if(t._terminated)throw new X(B.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||pV(t),t._firestoreClient}function pV(t){const e=t._freezeSettings(),n=(function(s,i,o,a){return new UN(s,i,o,a.host,a.ssl,a.experimentalForceLongPolling,a.experimentalAutoDetectLongPolling,Ew(a.experimentalLongPollingOptions),a.useFetchStreams,a.isUsingEmulator)})(t._databaseId,t._app?.options.appId||"",t._persistenceKey,e);t._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new cV(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&(function(s){const i=s?._online.build();return{_offline:s?._offline.build(i),_online:i}})(t._componentsProvider))}class Qt{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Qt(Et.fromBase64String(e))}catch(n){throw new X(B.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Qt(Et.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Qt._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(sa(e,Qt._jsonSchema))return Qt.fromBase64String(e.bytes)}}Qt._jsonSchemaVersion="firestore/bytes/1.0",Qt._jsonSchema={type:it("string",Qt._jsonSchemaVersion),bytes:it("string")};class la{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new X(B.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new yt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class ua{constructor(e){this._methodName=e}}class pn{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new X(B.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new X(B.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return be(this._lat,e._lat)||be(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:pn._jsonSchemaVersion}}static fromJSON(e){if(sa(e,pn._jsonSchema))return new pn(e.latitude,e.longitude)}}pn._jsonSchemaVersion="firestore/geoPoint/1.0",pn._jsonSchema={type:it("string",pn._jsonSchemaVersion),latitude:it("number"),longitude:it("number")};class mn{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0})(this._values,e._values)}toJSON(){return{type:mn._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(sa(e,mn._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new mn(e.vectorValues);throw new X(B.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}mn._jsonSchemaVersion="firestore/vectorValue/1.0",mn._jsonSchema={type:it("string",mn._jsonSchemaVersion),vectorValues:it("object")};const mV=/^__.*__$/;class gV{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Qr(e,this.data,this.fieldMask,n,this.fieldTransforms):new ia(e,this.data,n,this.fieldTransforms)}}class Aw{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Qr(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function bw(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw de(40011,{Ac:t})}}class Wf{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.Rc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Wf({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const n=this.path?.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){const n=this.path?.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return xc(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(bw(this.Ac)&&mV.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class _V{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||pl(e)}Cc(e,n,r,s=!1){return new Wf({Ac:e,methodName:n,Dc:r,path:yt.emptyPath(),fc:!1,bc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Gf(t){const e=t._freezeSettings(),n=pl(t._databaseId);return new _V(t._databaseId,!!e.ignoreUndefinedProperties,n)}function yV(t,e,n,r,s,i={}){const o=t.Cc(i.merge||i.mergeFields?2:0,e,n,s);zf("Data must be an object, but it was:",o,r);const a=Rw(r,o);let l,u;if(i.merge)l=new Yt(o.fieldMask),u=o.fieldTransforms;else if(i.mergeFields){const h=[];for(const d of i.mergeFields){const p=Th(e,d,n);if(!o.contains(p))throw new X(B.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);Cw(h,p)||h.push(p)}l=new Yt(h),u=o.fieldTransforms.filter((d=>l.covers(d.field)))}else l=null,u=o.fieldTransforms;return new gV(new jt(a),l,u)}class vl extends ua{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof vl}}class Kf extends ua{_toFieldTransform(e){return new uO(e.path,new Ho)}isEqual(e){return e instanceof Kf}}function vV(t,e,n,r){const s=t.Cc(1,e,n);zf("Data must be an object, but it was:",s,r);const i=[],o=jt.empty();zr(r,((l,u)=>{const h=Qf(e,l,n);u=at(u);const d=s.yc(h);if(u instanceof vl)i.push(h);else{const p=ha(u,d);p!=null&&(i.push(h),o.set(h,p))}}));const a=new Yt(i);return new Aw(o,a,s.fieldTransforms)}function EV(t,e,n,r,s,i){const o=t.Cc(1,e,n),a=[Th(e,r,n)],l=[s];if(i.length%2!=0)throw new X(B.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let p=0;p<i.length;p+=2)a.push(Th(e,i[p])),l.push(i[p+1]);const u=[],h=jt.empty();for(let p=a.length-1;p>=0;--p)if(!Cw(u,a[p])){const g=a[p];let _=l[p];_=at(_);const y=o.yc(g);if(_ instanceof vl)u.push(g);else{const N=ha(_,y);N!=null&&(u.push(g),h.set(g,N))}}const d=new Yt(u);return new Aw(h,d,o.fieldTransforms)}function wV(t,e,n,r=!1){return ha(n,t.Cc(r?4:3,e))}function ha(t,e){if(Sw(t=at(t)))return zf("Unsupported field value:",e,t),Rw(t,e);if(t instanceof ua)return(function(r,s){if(!bw(s.Ac))throw s.Sc(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Sc(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)})(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(r,s){const i=[];let o=0;for(const a of r){let l=ha(a,s.wc(o));l==null&&(l={nullValue:"NULL_VALUE"}),i.push(l),o++}return{arrayValue:{values:i}}})(t,e)}return(function(r,s){if((r=at(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return aO(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=$e.fromDate(r);return{timestampValue:Nc(s.serializer,i)}}if(r instanceof $e){const i=new $e(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Nc(s.serializer,i)}}if(r instanceof pn)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Qt)return{bytesValue:HE(s.serializer,r._byteString)};if(r instanceof Xe){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.Sc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Nf(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof mn)return(function(o,a){return{mapValue:{fields:{[gE]:{stringValue:_E},[Cc]:{arrayValue:{values:o.toArray().map((u=>{if(typeof u!="number")throw a.Sc("VectorValues must only contain numeric values.");return Sf(a.serializer,u)}))}}}}}})(r,s);throw s.Sc(`Unsupported field value: ${il(r)}`)})(t,e)}function Rw(t,e){const n={};return uE(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):zr(t,((r,s)=>{const i=ha(s,e.mc(r));i!=null&&(n[r]=i)})),{mapValue:{fields:n}}}function Sw(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof $e||t instanceof pn||t instanceof Qt||t instanceof Xe||t instanceof ua||t instanceof mn)}function zf(t,e,n){if(!Sw(n)||!cE(n)){const r=il(n);throw r==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+r)}}function Th(t,e,n){if((e=at(e))instanceof la)return e._internalPath;if(typeof e=="string")return Qf(t,e);throw xc("Field path arguments must be of type string or ",t,!1,void 0,n)}const TV=new RegExp("[~\\*/\\[\\]]");function Qf(t,e,n){if(e.search(TV)>=0)throw xc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new la(...e.split("."))._internalPath}catch{throw xc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function xc(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(i||o)&&(l+=" (found",i&&(l+=` in field ${r}`),o&&(l+=` in document ${s}`),l+=")"),new X(B.INVALID_ARGUMENT,a+t+l)}function Cw(t,e){return t.some((n=>n.isEqual(e)))}class Pw{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Xe(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new IV(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(El("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class IV extends Pw{data(){return super.data()}}function El(t,e){return typeof e=="string"?Qf(t,e):e instanceof la?e._internalPath:e._delegate._internalPath}function AV(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new X(B.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Yf{}class Jf extends Yf{}function bV(t,e,...n){let r=[];e instanceof Yf&&r.push(e),r=r.concat(n),(function(i){const o=i.filter((l=>l instanceof wl)).length,a=i.filter((l=>l instanceof fa)).length;if(o>1||o>0&&a>0)throw new X(B.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const s of r)t=s._apply(t);return t}class fa extends Jf{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new fa(e,n,r)}_apply(e){const n=this._parse(e);return kw(e._query,n),new Yr(e.firestore,e.converter,hh(e._query,n))}_parse(e){const n=Gf(e.firestore);return(function(i,o,a,l,u,h,d){let p;if(u.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new X(B.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){Fg(d,h);const _=[];for(const y of d)_.push(Ug(l,i,y));p={arrayValue:{values:_}}}else p=Ug(l,i,d)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||Fg(d,h),p=wV(a,o,d,h==="in"||h==="not-in");return st.create(u,h,p)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function RV(t,e,n){const r=e,s=El("where",t);return fa._create(s,r,n)}class wl extends Yf{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new wl(e,n)}_parse(e){const n=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return n.length===1?n[0]:Tn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(s,i){let o=s;const a=i.getFlattenedFilters();for(const l of a)kw(o,l),o=hh(o,l)})(e._query,n),new Yr(e.firestore,e.converter,hh(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Tl extends Jf{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Tl(e,n)}_apply(e){const n=(function(s,i,o){if(s.startAt!==null)throw new X(B.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new X(B.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Bo(i,o)})(e._query,this._field,this._direction);return new Yr(e.firestore,e.converter,(function(s,i){const o=s.explicitOrderBy.concat([i]);return new Mi(s.path,s.collectionGroup,o,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)})(e._query,n))}}function SV(t,e="asc"){const n=e,r=El("orderBy",t);return Tl._create(r,n)}function Ug(t,e,n){if(typeof(n=at(n))=="string"){if(n==="")throw new X(B.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!bE(e)&&n.indexOf("/")!==-1)throw new X(B.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(je.fromString(n));if(!oe.isDocumentKey(r))throw new X(B.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return tg(t,new oe(r))}if(n instanceof Xe)return tg(t,n._key);throw new X(B.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${il(n)}.`)}function Fg(t,e){if(!Array.isArray(t)||t.length===0)throw new X(B.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function kw(t,e){const n=(function(s,i){for(const o of s)for(const a of o.getFlattenedFilters())if(i.indexOf(a.op)>=0)return a.op;return null})(t.filters,(function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new X(B.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new X(B.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class Nw{convertValue(e,n="none"){switch(qr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return tt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes($r(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw de(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return zr(e,((s,i)=>{r[s]=this.convertValue(i,n)})),r}convertVectorValue(e){const n=e.fields?.[Cc].arrayValue?.values?.map((r=>tt(r.doubleValue)));return new mn(n)}convertGeoPoint(e){return new pn(tt(e.latitude),tt(e.longitude))}convertArray(e,n){return(e.values||[]).map((r=>this.convertValue(r,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const r=cl(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Uo(e));default:return null}}convertTimestamp(e){const n=jr(e);return new $e(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=je.fromString(e);xe(KE(r),9688,{name:e});const s=new Ti(r.get(1),r.get(3)),i=new oe(r.popFirst(5));return s.isEqual(n)||cr(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}function CV(t,e,n){let r;return r=t?t.toFirestore(e):e,r}class Js{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Br extends Pw{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new bo(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(El("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new X(B.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Br._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Br._jsonSchemaVersion="firestore/documentSnapshot/1.0",Br._jsonSchema={type:it("string",Br._jsonSchemaVersion),bundleSource:it("string","DocumentSnapshot"),bundleName:it("string"),bundle:it("string")};class bo extends Br{data(e={}){return super.data(e)}}class ys{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new Js(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((r=>{e.call(n,new bo(this._firestore,this._userDataWriter,r.key,r,new Js(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new X(B.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map((a=>{const l=new bo(s._firestore,s._userDataWriter,a.doc.key,a.doc,new Js(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}}))}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter((a=>i||a.type!==3)).map((a=>{const l=new bo(s._firestore,s._userDataWriter,a.doc.key,a.doc,new Js(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);let u=-1,h=-1;return a.type!==0&&(u=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),h=o.indexOf(a.doc.key)),{type:PV(a.type),doc:l,oldIndex:u,newIndex:h}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new X(B.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=ys._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=sl.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],s=[];return this.docs.forEach((i=>{i._document!==null&&(n.push(i._document),r.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),s.push(i.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function PV(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return de(61501,{type:t})}}function Ih(t){t=wn(t,Xe);const e=wn(t.firestore,Ms);return hV(yl(e),t._key).then((n=>DV(e,t,n)))}ys._jsonSchemaVersion="firestore/querySnapshot/1.0",ys._jsonSchema={type:it("string",ys._jsonSchemaVersion),bundleSource:it("string","QuerySnapshot"),bundleName:it("string"),bundle:it("string")};class Ow extends Nw{constructor(e){super(),this.firestore=e}convertBytes(e){return new Qt(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Xe(this.firestore,null,n)}}function kV(t){t=wn(t,Yr);const e=wn(t.firestore,Ms),n=yl(e),r=new Ow(e);return AV(t._query),fV(n,t._query).then((s=>new ys(e,r,t,s)))}function Ah(t,e,n){t=wn(t,Xe);const r=wn(t.firestore,Ms),s=CV(t.converter,e);return Il(r,[yV(Gf(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,dn.none())])}function NV(t,e,n,...r){t=wn(t,Xe);const s=wn(t.firestore,Ms),i=Gf(s);let o;return o=typeof(e=at(e))=="string"||e instanceof la?EV(i,"updateDoc",t._key,e,n,r):vV(i,"updateDoc",t._key,e),Il(s,[o.toMutation(t._key,dn.exists(!0))])}function OV(t){return Il(wn(t.firestore,Ms),[new Cf(t._key,dn.none())])}function Il(t,e){return(function(r,s){const i=new tr;return r.asyncQueue.enqueueAndForget((async()=>ZD(await uV(r),s,i))),i.promise})(yl(t),e)}function DV(t,e,n){const r=n.docs.get(e._key),s=new Ow(t);return new Br(t,s,e._key,r,new Js(n.hasPendingWrites,n.fromCache),e.converter)}function VV(){return new Kf("serverTimestamp")}(function(e,n=!0){(function(s){Di=s})(Ni),vi(new As("firestore",((r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),a=new Ms(new EN(r.getProvider("auth-internal")),new IN(o,r.getProvider("app-check-internal")),(function(u,h){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new X(B.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ti(u.options.projectId,h)})(o,s),o);return i={useFetchStreams:n,...i},a._setSettings(i),a}),"PUBLIC").setMultipleInstances(!0)),Ur(jm,$m,e),Ur(jm,$m,"esm2020")})();const xV=Object.freeze(Object.defineProperty({__proto__:null,AbstractUserDataWriter:Nw,Bytes:Qt,CollectionReference:nr,DocumentReference:Xe,DocumentSnapshot:Br,FieldPath:la,FieldValue:ua,Firestore:Ms,FirestoreError:X,GeoPoint:pn,Query:Yr,QueryCompositeFilterConstraint:wl,QueryConstraint:Jf,QueryDocumentSnapshot:bo,QueryFieldFilterConstraint:fa,QueryOrderByConstraint:Tl,QuerySnapshot:ys,SnapshotMetadata:Js,Timestamp:$e,VectorValue:mn,_AutoId:sl,_ByteString:Et,_DatabaseId:Ti,_DocumentKey:oe,_EmptyAuthCredentialsProvider:iE,_FieldPath:yt,_cast:wn,_logWarn:Cs,_validateIsNotUsedTogether:aE,collection:dV,connectFirestoreEmulator:Tw,deleteDoc:OV,doc:ec,ensureFirestoreConfigured:yl,executeWrite:Il,getDoc:Ih,getDocs:kV,getFirestore:Iw,orderBy:SV,query:bV,serverTimestamp:VV,setDoc:Ah,updateDoc:NV,where:RV},Symbol.toStringTag,{value:"Module"}));var MV="firebase",LV="12.7.0";Ur(MV,LV,"app");const UV={apiKey:"AIzaSyCx092q7up_BXFgK2e13A-IQ3uDjwf6J5A",authDomain:"accsuite117.firebaseapp.com",projectId:"accsuite117",storageBucket:"accsuite117.firebasestorage.app",messagingSenderId:"352958845592",appId:"1:352958845592:web:bb6a7fbe04f6181707f6ed"};let qo,hs,Ro;_m().length?qo=_m()[0]:qo=dv(UV);hs=_N(qo);Ro=Iw(qo);const FV=Object.freeze(Object.defineProperty({__proto__:null,get app(){return qo},get auth(){return hs},get db(){return Ro}},Symbol.toStringTag,{value:"Module"})),en=ue(null),os=ue("pilot"),Bg=ue(!0),as=ue(null);let Hg=!1;function Al(){const t=dt(()=>!!en.value),e=dt(()=>en.value?.emailVerified??!1),n=dt(()=>en.value?.email??""),r=dt(()=>en.value?.displayName??""),s=dt(()=>os.value==="coach"),i=async _=>{try{const y=ec(Ro,"users",_.uid),N=await Ih(y);if(!N.exists())await Ah(y,{email:_.email,nickname:_.displayName||"Utente",role:"pilot",createdAt:new Date().toISOString(),emailVerified:_.emailVerified}),os.value="pilot",console.log("[AUTH] Created missing user profile");else{const D=N.data();os.value=D.role||"pilot"}}catch(y){console.error("[AUTH] Failed to ensure user document:",y),os.value="pilot"}},o=()=>{Hg||(Hg=!0,i1(hs,async _=>{en.value=_,_?await i(_):os.value="pilot",Bg.value=!1,console.log("[AUTH] State changed:",_?.email??"logged out","| Role:",os.value)}))},a=async(_,y,N,D="",O="")=>{as.value=null;try{const k=(await Zk(hs,_,y)).user;return await n1(k,{displayName:N}),await Ah(ec(Ro,"users",k.uid),{firstName:D,lastName:O,nickname:N,email:_,role:"pilot",coachId:null,createdAt:new Date().toISOString(),emailVerified:!1}),await Nm(k),console.log("[AUTH] Registered:",_,"Verification email sent"),{success:!0,user:k}}catch(E){return console.error("[AUTH] Register error:",E.code),as.value=g(E.code),{success:!1,error:as.value}}},l=async(_,y)=>{as.value=null;try{const N=await e1(hs,_,y);return console.log("[AUTH] Logged in:",_),{success:!0,user:N.user}}catch(N){return console.error("[AUTH] Login error:",N.code),as.value=g(N.code),{success:!1,error:as.value}}},u=async()=>{try{return await o1(hs),console.log("[AUTH] Logged out"),{success:!0}}catch(_){return console.error("[AUTH] Logout error:",_),{success:!1,error:_.message}}},h=async()=>{if(!en.value)return{success:!1,error:"Utente non autenticato"};try{return await Nm(en.value),console.log("[AUTH] Verification email resent"),{success:!0}}catch(_){return console.error("[AUTH] Resend error:",_.code),{success:!1,error:g(_.code)}}},d=async()=>{if(!en.value)return{verified:!1,error:"Utente non autenticato"};try{await en.value.reload(),en.value=hs.currentUser;const _=en.value?.emailVerified??!1;return console.log("[AUTH] Email verified check:",_),{verified:_,error:null}}catch(_){return console.error("[AUTH] Check verification error:",_),{verified:!1,error:_.message}}},p=async _=>{try{const y=await Ih(ec(Ro,"users",_));return y.exists()?y.data():null}catch(y){return console.error("[AUTH] Get profile error:",y),null}},g=_=>({"auth/email-already-in-use":"Email gi registrata","auth/weak-password":"Password troppo debole (min. 6 caratteri)","auth/invalid-email":"Email non valida","auth/user-not-found":"Utente non trovato","auth/wrong-password":"Password errata","auth/invalid-credential":"Credenziali non valide","auth/too-many-requests":"Troppi tentativi, riprova pi tardi","auth/network-request-failed":"Errore di rete, controlla la connessione"})[_]||"Errore di autenticazione";return o(),{currentUser:en,isLoading:Bg,authError:as,isAuthenticated:t,isEmailVerified:e,userEmail:n,userDisplayName:r,register:a,login:l,logout:u,resendVerificationEmail:h,checkEmailVerified:d,getUserProfile:p,userRole:os,isCoach:s}}const BV={class:"auth-overlay"},HV={class:"auth-card__body"},jV={key:0,class:"auth-nav"},$V={class:"auth-form-container"},qV=ct({__name:"AuthOverlay",emits:["login-success","register-success"],setup(t,{emit:e}){const n=ue("login"),r=ue("login"),s=ue(),i=ue(),o=ue(),{login:a,register:l}=Al(),u=ue(!1),h=e,d=dt(()=>{switch(r.value){case"register":return"form-height--register";case"reset":return"form-height--reset";default:return"form-height--login"}}),p=O=>{n.value=O,r.value=O},g=()=>{r.value="reset"},_=()=>{r.value="login",n.value="login",o.value?.reset()},y=async O=>{u.value=!0;const E=await a(O.email,O.password);u.value=!1,E.success?h("login-success",O.email):s.value?.setError(E.error)},N=async O=>{u.value=!0;const E=await l(O.email,O.password,O.nickname,O.firstName,O.lastName);u.value=!1,E.success?h("register-success",O.email):i.value?.setError(E.error)},D=O=>{console.log("[AUTH] Reset:",O),o.value?.setSuccess(!0)};return(O,E)=>{const k=lC,V=fC,U=gC;return _e(),Pe("div",BV,[E[4]||(E[4]=z("div",{class:"auth-overlay__ambient"},[z("div",{class:"ambient-glow ambient-glow--red"}),z("div",{class:"ambient-glow ambient-glow--gold"})],-1)),z("div",{class:rn(["auth-card",d.value])},[E[3]||(E[3]=z("div",{class:"auth-card__glow"},null,-1)),z("div",HV,[E[2]||(E[2]=z("header",{class:"auth-header"},[z("div",{class:"brand"},[z("span",{class:"brand__badge"},"ACC"),z("span",{class:"brand__name"},"TELEMETRY")])],-1)),r.value!=="reset"?(_e(),Pe("nav",jV,[z("button",{class:rn(["auth-nav__item",{"is-active":n.value==="login"}]),onClick:E[0]||(E[0]=b=>p("login"))}," Login ",2),z("button",{class:rn(["auth-nav__item",{"is-active":n.value==="register"}]),onClick:E[1]||(E[1]=b=>p("register"))}," Registrati ",2)])):pi("",!0),z("div",$V,[ge(Qc,{name:"liquid",mode:"out-in"},{default:sn(()=>[r.value==="login"?(_e(),zt(k,{key:"login",ref_key:"loginFormRef",ref:s,onSubmit:y,onForgotPassword:g},null,512)):r.value==="register"?(_e(),zt(V,{key:"register",ref_key:"registerFormRef",ref:i,onSubmit:N},null,512)):(_e(),zt(U,{key:"reset",ref_key:"resetFormRef",ref:o,onSubmit:D,onBack:_},null,512))]),_:1})])])],2)])}}}),WV=Object.assign(Un(qV,[["__scopeId","data-v-e0e84998"]]),{__name:"AuthOverlay"}),GV={class:"email-verification"},KV={class:"verify-email"},zV={key:0,class:"error-message"},QV={key:1,class:"error-message resend-error"},YV=["disabled"],JV=["disabled"],XV=ct({__name:"RegistrationSuccess",props:{email:{},requireEmailVerification:{type:Boolean}},emits:["goToDashboard","resendEmail"],setup(t,{emit:e}){const n=e,{checkEmailVerified:r,resendVerificationEmail:s}=Al(),i=ue(!1),o=ue(!1),a=ue(null),l=ue(!1),u=ue(!1),h=async()=>{i.value=!0,a.value=null,u.value=!1;const p=await s();i.value=!1,p.success?(o.value=!0,setTimeout(()=>o.value=!1,3e3)):a.value=p.error||"Errore invio email",n("resendEmail")},d=async()=>{l.value=!0,u.value=!1;const p=await r();l.value=!1,p.verified?n("goToDashboard"):u.value=!0};return(p,g)=>(_e(),Pe("div",GV,[g[2]||(g[2]=z("div",{class:"verify-icon"},"",-1)),g[3]||(g[3]=z("h2",{class:"verify-title"},"Verifica la tua email",-1)),z("p",KV,vs(t.email),1),g[4]||(g[4]=z("div",{class:"verify-box"},[z("p",{class:"verify-text"},"Clicca il link nell'email per attivare l'account."),z("p",{class:"verify-hint"},"Controlla anche Spam")],-1)),u.value?(_e(),Pe("div",zV," Email non verificata ")):pi("",!0),a.value?(_e(),Pe("div",QV,vs(a.value),1)):pi("",!0),z("button",{class:rn(["verify-btn",{"verify-btn--loading":l.value}]),disabled:l.value,onClick:d},[l.value?(_e(),Pe(We,{key:0},[g[0]||(g[0]=z("span",{class:"spinner"},null,-1)),g[1]||(g[1]=Ye(" Controllo... ",-1))],64)):(_e(),Pe(We,{key:1},[Ye(" Ho confermato l'email ")],64))],10,YV),z("button",{class:"resend-btn",disabled:i.value||o.value,onClick:h},[i.value?(_e(),Pe(We,{key:0},[Ye("Invio in corso...")],64)):o.value?(_e(),Pe(We,{key:1},[Ye(" Email inviata")],64)):(_e(),Pe(We,{key:2},[Ye("Rinvia email di verifica")],64))],8,JV)]))}}),ZV=Object.assign(Un(XV,[["__scopeId","data-v-f958603b"]]),{__name:"AuthRegistrationSuccess"}),Dw=(t="RouteProvider")=>ct({name:t,props:{route:{type:Object,required:!0},vnode:Object,vnodeRef:Object,renderKey:String,trackRootNodes:Boolean},setup(e){const n=e.renderKey,r=e.route,s={};for(const i in e.route)Object.defineProperty(s,i,{get:()=>n===e.renderKey?e.route[i]:r[i],enumerable:!0});return Jn(Ts,Pn(s)),()=>e.vnode?Je(e.vnode,{ref:e.vnodeRef}):e.vnode}}),ex=Dw(),jg=new WeakMap,tx=ct({name:"NuxtPage",inheritAttrs:!1,props:{name:{type:String},transition:{type:[Boolean,Object],default:void 0},keepalive:{type:[Boolean,Object],default:void 0},route:{type:Object},pageKey:{type:[Function,String],default:null}},setup(t,{attrs:e,slots:n,expose:r}){const s=Ze(),i=ue(),o=Rt(Ts,null);let a;r({pageRef:i});const l=Rt(Py,null);let u;const h=s.deferHydration();if(s.isHydrating){const p=s.hooks.hookOnce("app:error",h);Xt().beforeEach(p)}t.pageKey&&xr(()=>t.pageKey,(p,g)=>{p!==g&&s.callHook("page:loading:start")});let d=!1;{const p=Xt().beforeResolve(()=>{d=!1});Qo(()=>{p()})}return()=>Je(Xy,{name:t.name,route:t.route,...e},{default:p=>{const g=rx(o,p.route,p.Component),_=o&&o.matched.length===p.route.matched.length;if(!p.Component){if(u&&!_)return u;h();return}if(u&&l&&!l.isCurrent(p.route))return u;if(g&&o&&(!l||l?.isCurrent(o)))return _?u:null;const y=zu(p,t.pageKey),N=sx(o,p.route,p.Component);!s.isHydrating&&a===y&&!N&&Es(()=>{d=!0,s.callHook("page:loading:end")}),a=y;const D=!!(t.transition??p.route.meta.pageTransition??kp),O=D&&nx([t.transition,p.route.meta.pageTransition,kp,{onAfterLeave(){delete s._runningTransition,s.callHook("page:transition:finish",p.Component)}}]),E=t.keepalive??p.route.meta.keepalive??qb;return u=ev(D&&O,f0(E,Je(qh,{suspensible:!0,onPending:()=>{D&&(s._runningTransition=!0),s.callHook("page:start",p.Component)},onResolve:async()=>{await Es();try{s._route.sync?.(),await s.callHook("page:finish",p.Component),delete s._runningTransition,!d&&!N&&(d=!0,await s.callHook("page:loading:end"))}finally{h()}}},{default:()=>{const k={key:y||void 0,vnode:n.default?ix(n.default,p):p.Component,route:p.route,renderKey:y||void 0,trackRootNodes:D,vnodeRef:i};if(!E)return Je(ex,k);const V=p.Component.type,U=V;let b=jg.get(U);return b||(b=Dw(V.name||V.__name),jg.set(U,b)),Je(b,k)}}))).default(),u}})}});function nx(t){const e=[];for(const n of t)n&&e.push({...n,onAfterLeave:n.onAfterLeave?rf(n.onAfterLeave):void 0});return Sy(...e)}function rx(t,e,n){if(!t)return!1;const r=e.matched.findIndex(s=>s.components?.default===n?.type);return!r||r===-1?!1:e.matched.slice(0,r).some((s,i)=>s.components?.default!==t.matched[i]?.components?.default)||n&&zu({route:e,Component:n})!==zu({route:t,Component:n})}function sx(t,e,n){return t?e.matched.findIndex(s=>s.components?.default===n?.type)<e.matched.length-1:!1}function ix(t,e){const n=t(e);return n.length===1?Je(n[0]):Je(We,void 0,n)}const ox=ct({name:"LayoutLoader",inheritAttrs:!1,props:{name:String,layoutProps:Object},setup(t,e){return()=>Je(Nr[t.name],t.layoutProps,e.slots)}}),ax={name:{type:[String,Boolean,Object],default:null},fallback:{type:[String,Object],default:null}},cx=ct({name:"NuxtLayout",inheritAttrs:!1,props:ax,setup(t,e){const n=Ze(),r=Rt(Ts),i=!r||r===Jo()?Zy():r,o=dt(()=>{let h=He(t.name)??i?.meta.layout??"default";return h&&!(h in Nr)&&t.fallback&&(h=He(t.fallback)),h}),a=ir();e.expose({layoutRef:a});const l=n.deferHydration();if(n.isHydrating){const h=n.hooks.hookOnce("app:error",l);Xt().beforeEach(h)}let u;return()=>{const h=o.value&&o.value in Nr,d=i?.meta.layoutTransition??$b,p=u;return u=o.value,ev(h&&d,{default:()=>Je(qh,{suspensible:!0,onResolve:()=>{Es(l)}},{default:()=>Je(lx,{layoutProps:iy(e.attrs,{ref:a}),key:o.value||void 0,name:o.value,shouldProvide:!t.name,isRenderingNewLayout:g=>g!==p&&g===o.value,hasTransition:!!d},e.slots)})}).default()}}}),lx=ct({name:"NuxtLayoutProvider",inheritAttrs:!1,props:{name:{type:[String,Boolean]},layoutProps:{type:Object},hasTransition:{type:Boolean},shouldProvide:{type:Boolean},isRenderingNewLayout:{type:Function,required:!0}},setup(t,e){const n=t.name;t.shouldProvide&&Jn(Py,{isCurrent:i=>n===(i.meta.layout??"default")});const r=Rt(Ts);if(r&&r===Jo()){const i=Zy(),o={};for(const a in i){const l=a;Object.defineProperty(o,l,{enumerable:!0,get:()=>t.isRenderingNewLayout(t.name)?i[l]:r[l]})}Jn(Ts,Pn(o))}return()=>!n||typeof n=="string"&&!(n in Nr)?e.slots.default?.():Je(ox,{key:n,layoutProps:t.layoutProps,name:n},e.slots)}}),ux={class:"user-dropdown"},hx={class:"user-name"},fx={key:0,class:"dropdown-menu"},dx=ct({__name:"UserDropdown",props:{userName:{}},emits:["logout","goToProfile"],setup(t,{emit:e}){const n=e,r=ue(!1),s=()=>{r.value=!r.value},i=()=>{r.value=!1},o=()=>{i(),n("goToProfile")},a=()=>{i(),n("logout")};return(l,u)=>{const h=vI("click-outside");return ro((_e(),Pe("div",ux,[z("button",{class:"dropdown-trigger",onClick:s},[z("span",hx,vs(t.userName),1),(_e(),Pe("svg",{class:rn(["arrow-icon",{"arrow-icon--open":r.value}]),width:"12",height:"12",viewBox:"0 0 12 12",fill:"none"},[...u[0]||(u[0]=[z("path",{d:"M3 4.5L6 7.5L9 4.5",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)])],2))]),ge(Qc,{name:"dropdown"},{default:sn(()=>[r.value?(_e(),Pe("div",fx,[z("button",{class:"dropdown-item",onClick:o},[...u[1]||(u[1]=[z("svg",{class:"item-icon",width:"16",height:"16",viewBox:"0 0 16 16",fill:"none"},[z("circle",{cx:"8",cy:"5",r:"3",stroke:"currentColor","stroke-width":"1.5"}),z("path",{d:"M2 14c0-3 2.5-5 6-5s6 2 6 5",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round"})],-1),Ye(" Profilo ",-1)])]),u[3]||(u[3]=z("button",{class:"dropdown-item dropdown-item--disabled",disabled:""},[z("svg",{class:"item-icon",width:"16",height:"16",viewBox:"0 0 16 16",fill:"none"},[z("circle",{cx:"8",cy:"8",r:"6",stroke:"currentColor","stroke-width":"1.5"}),z("path",{d:"M8 5v3l2 2",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round"})]),Ye(" Impostazioni ")],-1)),u[4]||(u[4]=z("div",{class:"dropdown-divider"},null,-1)),z("button",{class:"dropdown-item dropdown-item--danger",onClick:a},[...u[2]||(u[2]=[z("svg",{class:"item-icon",width:"16",height:"16",viewBox:"0 0 16 16",fill:"none"},[z("path",{d:"M6 2H4a2 2 0 00-2 2v8a2 2 0 002 2h2M11 11l3-3-3-3M14 8H6",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"})],-1),Ye(" Logout ",-1)])])])):pi("",!0)]),_:1})])),[[h,i]])}}}),px=Object.assign(Un(dx,[["__scopeId","data-v-90fbbde4"]]),{__name:"UiUserDropdown"}),mx={class:"profile-page"},gx={class:"profile-header"},_x={class:"header-inner"},yx={class:"header-right"},vx={class:"profile-main"},Ex={class:"profile-container"},wx={class:"profile-grid"},Tx={class:"profile-sidebar"},Ix={class:"user-info"},Ax={class:"user-nickname"},bx={class:"user-email"},Rx={class:"profile-content"},Sx={class:"profile-card"},Cx={class:"equipment-form"},Px={class:"form-group"},kx={class:"form-group"},Nx={class:"form-group"},Ox={class:"form-group"},Dx=["disabled"],Vx=ct({__name:"ProfilePage",props:{userEmail:{},userNickname:{}},emits:["logout","back"],setup(t,{emit:e}){const n=t,r=e,{currentUser:s,getUserProfile:i}=Al(),o=dt(()=>n.userNickname?n.userNickname:n.userEmail?n.userEmail.split("@")[0]??"Utente":"Utente"),a=ue({volante:"",corona:"",pedaliera:"",struttura:""}),l=ue(!1),u=ue(!1);fi(async()=>{if(s.value){const _=await i(s.value.uid);_?.equipment&&(a.value={...a.value,..._.equipment})}});const h=async()=>{if(s.value){l.value=!0;try{const{doc:_,updateDoc:y}=await Tt(async()=>{const{doc:D,updateDoc:O}=await Promise.resolve().then(()=>xV);return{doc:D,updateDoc:O}},void 0,import.meta.url),{db:N}=await Tt(async()=>{const{db:D}=await Promise.resolve().then(()=>FV);return{db:D}},void 0,import.meta.url);await y(_(N,"users",s.value.uid),{equipment:a.value}),u.value=!0,setTimeout(()=>u.value=!1,2e3)}catch(_){console.error("[PROFILE] Save error:",_)}finally{l.value=!1}}},d=()=>r("logout"),p=()=>{},g=()=>{r("back")};return(_,y)=>{const N=px;return _e(),Pe("div",mx,[z("header",gx,[z("div",_x,[z("div",{class:"header-left"},[z("button",{class:"back-btn",onClick:g},[...y[4]||(y[4]=[z("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none"},[z("path",{d:"M12 4L6 10L12 16",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1),Ye(" Dashboard ",-1)])])]),y[5]||(y[5]=z("div",{class:"header-brand"},[z("span",{class:"brand-badge"},"ACC"),z("span",{class:"brand-name"},"TELEMETRY")],-1)),z("div",yx,[ge(N,{"user-name":o.value,onLogout:d,onGoToProfile:p},null,8,["user-name"])])])]),z("main",vx,[z("div",Ex,[y[12]||(y[12]=z("h1",{class:"page-title"},"Profilo Pilota",-1)),z("div",wx,[z("div",Tx,[y[6]||(y[6]=sy('<div class="avatar-container" data-v-e186b73a><svg class="avatar-helmet" viewBox="0 0 100 100" fill="none" data-v-e186b73a><defs data-v-e186b73a><linearGradient id="helmetGrad" x1="0%" y1="0%" x2="100%" y2="100%" data-v-e186b73a><stop offset="0%" stop-color="#e10600" data-v-e186b73a></stop><stop offset="100%" stop-color="#ff6b00" data-v-e186b73a></stop></linearGradient></defs><path d="M50 10C30 10 15 25 15 45V60C15 75 25 85 40 88L45 90H55L60 88C75 85 85 75 85 60V45C85 25 70 10 50 10Z" stroke="url(#helmetGrad)" stroke-width="3" fill="none" data-v-e186b73a></path><path d="M20 45H80C80 45 78 55 50 55C22 55 20 45 20 45Z" stroke="url(#helmetGrad)" stroke-width="2" fill="rgba(225,6,0,0.1)" data-v-e186b73a></path><line x1="50" y1="15" x2="50" y2="85" stroke="url(#helmetGrad)" stroke-width="1.5" data-v-e186b73a></line></svg></div>',1)),z("div",Ix,[z("h2",Ax,vs(o.value),1),z("p",bx,vs(t.userEmail),1)])]),z("div",Rx,[z("div",Sx,[y[11]||(y[11]=z("h3",{class:"card-title"},[z("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none"},[z("circle",{cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"2"}),z("circle",{cx:"12",cy:"12",r:"4",stroke:"currentColor","stroke-width":"2"})]),Ye(" Attrezzatura Sim Racing ")],-1)),z("div",Cx,[z("div",Px,[y[7]||(y[7]=z("label",{class:"form-label"},"Volante / Base",-1)),ro(z("input",{"onUpdate:modelValue":y[0]||(y[0]=D=>a.value.volante=D),type:"text",class:"form-input",placeholder:"Es. Fanatec CSL DD 8Nm"},null,512),[[Na,a.value.volante]])]),z("div",kx,[y[8]||(y[8]=z("label",{class:"form-label"},"Corona / Rim",-1)),ro(z("input",{"onUpdate:modelValue":y[1]||(y[1]=D=>a.value.corona=D),type:"text",class:"form-input",placeholder:"Es. ClubSport Formula V2"},null,512),[[Na,a.value.corona]])]),z("div",Nx,[y[9]||(y[9]=z("label",{class:"form-label"},"Pedaliera",-1)),ro(z("input",{"onUpdate:modelValue":y[2]||(y[2]=D=>a.value.pedaliera=D),type:"text",class:"form-input",placeholder:"Es. CSL Pedals + Load Cell"},null,512),[[Na,a.value.pedaliera]])]),z("div",Ox,[y[10]||(y[10]=z("label",{class:"form-label"},"Struttura / Rig",-1)),ro(z("input",{"onUpdate:modelValue":y[3]||(y[3]=D=>a.value.struttura=D),type:"text",class:"form-input",placeholder:"Es. Next Level Racing 2.0"},null,512),[[Na,a.value.struttura]])]),z("button",{class:rn(["save-btn",{"save-btn--success":u.value}]),disabled:l.value,onClick:h},[l.value?(_e(),Pe(We,{key:0},[Ye("Salvataggio...")],64)):u.value?(_e(),Pe(We,{key:1},[Ye(" Salvato")],64)):(_e(),Pe(We,{key:2},[Ye("Salva Modifiche")],64))],10,Dx)])])])])])])])}}}),xx=Object.assign(Un(Vx,[["__scopeId","data-v-e186b73a"]]),{__name:"ProfilePage"}),Mx=J0(tC),Lx={id:"app"},Ux={key:"initializing",class:"initializing-screen"},Fx={key:"register-success",class:"auth-wrapper"},Bx={class:"auth-card-standalone"},Hx={key:"loading",class:"loading-screen"},jx={key:"dashboard",class:"dashboard-wrapper"},$x={key:"profile",class:"profile-wrapper"},qx="dissolve-fade-zoom",Wx=ct({__name:"app",setup(t){Jo();const{currentUser:e,isLoading:n}=Al(),r=ue("initializing"),s=ue("login"),i=ue(""),o=ue(!1),a=ue(!1);xr(n,_=>{!_&&!o.value&&(o.value=!0,e.value?(i.value=e.value.email||"",a.value&&!e.value.emailVerified?(r.value="auth",s.value="register-success"):r.value="dashboard"):r.value="auth")},{immediate:!0}),xr(e,(_,y)=>{o.value&&(_?(i.value=_.email||"",a.value&&!_.emailVerified?(r.value!=="auth"||s.value!=="register-success")&&(r.value="auth",s.value="register-success"):r.value==="auth"&&s.value!=="register-success"&&(r.value="loading",setTimeout(()=>{r.value="dashboard"},1e3))):y&&(r.value="auth",s.value="login"))});const l=_=>{if(i.value=_,a.value&&e.value&&!e.value.emailVerified){s.value="register-success";return}r.value="loading",setTimeout(()=>{r.value="dashboard"},1500)},u=_=>{i.value=_,a.value?s.value="register-success":(r.value="loading",setTimeout(()=>{r.value="dashboard"},1500))},h=()=>{r.value="loading",setTimeout(()=>{r.value="dashboard"},1500)},d=()=>{console.log("[AUTH] Resending verification email to:",i.value)},p=()=>{r.value="profile"},g=()=>{r.value="dashboard"};return Jn("goToProfile",p),(_,y)=>{const N=Mx,D=WV,O=ZV,E=tx,k=cx,V=xx;return _e(),Pe("div",Lx,[ge(N),ge(Qc,{name:qx,mode:"out-in"},{default:sn(()=>[r.value==="initializing"?(_e(),Pe("div",Ux,[...y[0]||(y[0]=[z("div",{class:"initializing-content"},[z("div",{class:"initializing-spinner"})],-1)])])):r.value==="auth"&&s.value!=="register-success"?(_e(),zt(D,{key:"auth",onLoginSuccess:l,onRegisterSuccess:u})):r.value==="auth"&&s.value==="register-success"?(_e(),Pe("div",Fx,[z("div",Bx,[ge(O,{email:i.value,"require-email-verification":a.value,onGoToDashboard:h,onResendEmail:d},null,8,["email","require-email-verification"])])])):r.value==="loading"?(_e(),Pe("div",Hx,[...y[1]||(y[1]=[z("div",{class:"loading-content"},[z("div",{class:"loading-spinner"}),z("p",{class:"loading-text"},"Caricamento Dashboard...")],-1)])])):r.value==="dashboard"?(_e(),Pe("div",jx,[ge(k,null,{default:sn(()=>[ge(E)]),_:1})])):r.value==="profile"?(_e(),Pe("div",$x,[ge(V,{onBack:g})])):pi("",!0)]),_:1})])}}}),Gx={__name:"nuxt-error-page",props:{error:Object},setup(t){const n=t.error,r=Number(n.statusCode||500),s=r===404,i=n.statusMessage??(s?"Page Not Found":"Internal Server Error"),o=n.message||n.toString(),a=void 0,h=s?ac(()=>Tt(()=>import("./DaEYdrQk.js"),__vite__mapDeps([32,3,33]),import.meta.url)):ac(()=>Tt(()=>import("./CcJN2NC1.js"),__vite__mapDeps([34,35]),import.meta.url));return(d,p)=>(_e(),zt(He(h),hT(ry({statusCode:He(r),statusMessage:He(i),description:He(o),stack:He(a)})),null,16))}},Kx={key:0},$g={__name:"nuxt-root",setup(t){const e=()=>null,n=Ze(),r=n.deferHydration();if(n.isHydrating){const u=n.hooks.hookOnce("app:error",r);Xt().beforeEach(u)}const s=!1;Jn(Ts,Jo()),n.hooks.callHookWith(u=>u.map(h=>h()),"vue:setup");const i=Jc(),o=!1,a=/bot\b|chrome-lighthouse|facebookexternalhit|google\b/i;O_((u,h,d)=>{if(n.hooks.callHook("vue:error",u,h,d).catch(p=>console.error("[nuxt] Error in `vue:error` hook",p)),a.test(navigator.userAgent))return n.hooks.callHook("app:error",u),console.error(`[nuxt] Not rendering error page for bot with user agent \`${navigator.userAgent}\`:`,u),!1;if(Ny(u)&&(u.fatal||u.unhandled))return n.runWithContext(()=>ls(u)),!1});const l=!1;return(u,h)=>(_e(),zt(qh,{onResolve:He(r)},{default:sn(()=>[He(o)?(_e(),Pe("div",Kx)):He(i)?(_e(),zt(He(Gx),{key:1,error:He(i)},null,8,["error"])):He(l)?(_e(),zt(He(e),{key:2,context:He(l)},null,8,["context"])):He(s)?(_e(),zt(yI(He(s)),{key:3})):(_e(),zt(He(Wx),{key:4}))]),_:1},8,["onResolve"]))}};let qg;{let t;qg=async function(){if(t)return t;const n=!!(window.__NUXT__?.serverRendered??document.getElementById("__NUXT_DATA__")?.dataset.ssr==="true"),r=n?LA($g):MA($g),s=zb({vueApp:r});async function i(o){await s.callHook("app:error",o),s.payload.error||=_s(o)}r.config.errorHandler=i,s.hook("app:suspense:resolve",()=>{r.config.errorHandler===i&&(r.config.errorHandler=void 0)}),!n&&Np.id&&s.hook("app:suspense:resolve",()=>{document.getElementById(Np.id)?.remove()});try{await Jb(s,Y0)}catch(o){i(o)}try{await s.hooks.callHook("app:created",r),await s.hooks.callHook("app:beforeMount",r),r.mount(Wb),await s.hooks.callHook("app:mounted",r),await Es()}catch(o){i(o)}return r},t=qg().catch(e=>{throw console.error("Error while mounting app:",e),e})}export{ro as $,Zx as A,nM as B,Pe as C,_e as D,z as E,vs as F,ge as G,sn as H,Ye as I,zt as J,He as K,xx as L,pi as M,We as N,Qx as O,ec as P,Ro as Q,Ah as R,VV as S,dV as T,kV as U,OV as V,Ih as W,Hc as X,Jo as Y,rn as Z,Un as _,Al as a,Na as a0,sy as a1,bV as a2,RV as a3,Jx as a4,px as a5,EI as a6,oA as a7,N_ as a8,Ce as a9,Es as aa,$c as ab,SV as ac,Gh as ad,Yx as ae,Rt as af,ct as b,Xt as c,eM as d,ii as e,Ze as f,sf as g,Qo as h,Je as i,zx as j,aR as k,G0 as l,dt as m,tM as n,fi as o,py as p,Os as q,ue as r,ir as s,zh as t,Yc as u,lb as v,xr as w,mc as x,cm as y,rM as z};
