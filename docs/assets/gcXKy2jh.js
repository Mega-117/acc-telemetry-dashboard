const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./DGeCeOus.js","./index.Du2RZnax.css","./DyWmsFja.js","./_...BBgSxync.css","./m8RY0HTx.js","./DBmMnW0z.js","./dev-upload.CSmg5zv2.css","./ClG8XN-F.js","./MsBKr0Ui.js","./p76NJXqB.js","./usePilotContext.DMW25oBZ.css","./B6G1Loar.js","./PanoramicaPage.BUpO0jFR.css","./BXvf6jJM.js","./lK9BdI1a.js","./j3F41DiX.js","./PaginationControls.CNLm8WGw.css","./ugnBfIQv.js","./TrackDetailPage.C34qBRCU.css","./8adkM3qp.js","./D1Iq6AKW.js","./SessionDetailPage.COX98EEl.css","./ORp8uBp9.js","./SessioniPage.DFd4Qm3Q.css","./CH9VeTZd.js","./PistePage.BYvFlzG_.css","./_id_.CUpou5p6.css","./BNYAhO3f.js","./BAk4hA7r.js","./index.C-v94T8_.css","./DjgNbNK0.js","./BmQjHev-.js","./DqL2FgzT.js","./coach.CxAeVU2u.css","./Fa89Ob6D.js","./dashboard.Didsh1CT.css","./D8b97SsP.js","./error-404.BLrjNXsr.css","./ECnbCeBx.js","./error-500.DLkAwcfL.css"])))=>i.map(i=>d[i]);
(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function Oh(t){const e=Object.create(null);for(const n of t.split(","))e[n]=1;return n=>n in e}const $e={},ri=[],On=()=>{},Jg=()=>!1,Jo=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),Dh=t=>t.startsWith("onUpdate:"),Et=Object.assign,Vh=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},lT=Object.prototype.hasOwnProperty,Ve=(t,e)=>lT.call(t,e),ue=Array.isArray,si=t=>Oi(t)==="[object Map]",Ni=t=>Oi(t)==="[object Set]",Wd=t=>Oi(t)==="[object Date]",uT=t=>Oi(t)==="[object RegExp]",me=t=>typeof t=="function",ze=t=>typeof t=="string",yn=t=>typeof t=="symbol",Le=t=>t!==null&&typeof t=="object",xh=t=>(Le(t)||me(t))&&me(t.then)&&me(t.catch),Xg=Object.prototype.toString,Oi=t=>Xg.call(t),hT=t=>Oi(t).slice(8,-1),Zg=t=>Oi(t)==="[object Object]",jc=t=>ze(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,ii=Oh(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),qc=t=>{const e=Object.create(null);return(n=>e[n]||(e[n]=t(n)))},fT=/-\w/g,cn=qc(t=>t.replace(fT,e=>e.slice(1).toUpperCase())),dT=/\B([A-Z])/g,xs=qc(t=>t.replace(dT,"-$1").toLowerCase()),Wc=qc(t=>t.charAt(0).toUpperCase()+t.slice(1)),Wl=qc(t=>t?`on${Wc(t)}`:""),Lr=(t,e)=>!Object.is(t,e),oi=(t,...e)=>{for(let n=0;n<t.length;n++)t[n](...e)},e_=(t,e,n,r=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:r,value:n})},Gc=t=>{const e=parseFloat(t);return isNaN(e)?t:e},t_=t=>{const e=ze(t)?Number(t):NaN;return isNaN(e)?t:e};let Gd;const zc=()=>Gd||(Gd=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Kc(t){if(ue(t)){const e={};for(let n=0;n<t.length;n++){const r=t[n],s=ze(r)?_T(r):Kc(r);if(s)for(const i in s)e[i]=s[i]}return e}else if(ze(t)||Le(t))return t}const pT=/;(?![^(]*\))/g,mT=/:([^]+)/,gT=/\/\*[^]*?\*\//g;function _T(t){const e={};return t.replace(gT,"").split(pT).forEach(n=>{if(n){const r=n.split(mT);r.length>1&&(e[r[0].trim()]=r[1].trim())}}),e}function Wt(t){let e="";if(ze(t))e=t;else if(ue(t))for(let n=0;n<t.length;n++){const r=Wt(t[n]);r&&(e+=r+" ")}else if(Le(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}function yT(t){if(!t)return null;let{class:e,style:n}=t;return e&&!ze(e)&&(t.class=Wt(e)),n&&(t.style=Kc(n)),t}const vT="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",ET=Oh(vT);function n_(t){return!!t||t===""}function wT(t,e){if(t.length!==e.length)return!1;let n=!0;for(let r=0;n&&r<t.length;r++)n=Xo(t[r],e[r]);return n}function Xo(t,e){if(t===e)return!0;let n=Wd(t),r=Wd(e);if(n||r)return n&&r?t.getTime()===e.getTime():!1;if(n=yn(t),r=yn(e),n||r)return t===e;if(n=ue(t),r=ue(e),n||r)return n&&r?wT(t,e):!1;if(n=Le(t),r=Le(e),n||r){if(!n||!r)return!1;const s=Object.keys(t).length,i=Object.keys(e).length;if(s!==i)return!1;for(const o in t){const a=t.hasOwnProperty(o),l=e.hasOwnProperty(o);if(a&&!l||!a&&l||!Xo(t[o],e[o]))return!1}}return String(t)===String(e)}function Mh(t,e){return t.findIndex(n=>Xo(n,e))}const r_=t=>!!(t&&t.__v_isRef===!0),qr=t=>ze(t)?t:t==null?"":ue(t)||Le(t)&&(t.toString===Xg||!me(t.toString))?r_(t)?qr(t.value):JSON.stringify(t,s_,2):String(t),s_=(t,e)=>r_(e)?s_(t,e.value):si(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[r,s],i)=>(n[Gl(r,i)+" =>"]=s,n),{})}:Ni(e)?{[`Set(${e.size})`]:[...e.values()].map(n=>Gl(n))}:yn(e)?Gl(e):Le(e)&&!ue(e)&&!Zg(e)?String(e):e,Gl=(t,e="")=>{var n;return yn(t)?`Symbol(${(n=t.description)!=null?n:e})`:t};let kt;class i_{constructor(e=!1){this.detached=e,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=kt,!e&&kt&&(this.index=(kt.scopes||(kt.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].pause();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].resume();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].resume()}}run(e){if(this._active){const n=kt;try{return kt=this,e()}finally{kt=n}}}on(){++this._on===1&&(this.prevScope=kt,kt=this)}off(){this._on>0&&--this._on===0&&(kt=this.prevScope,this.prevScope=void 0)}stop(e){if(this._active){this._active=!1;let n,r;for(n=0,r=this.effects.length;n<r;n++)this.effects[n].stop();for(this.effects.length=0,n=0,r=this.cleanups.length;n<r;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const s=this.parent.scopes.pop();s&&s!==this&&(this.parent.scopes[this.index]=s,s.index=this.index)}this.parent=void 0}}}function TT(t){return new i_(t)}function Lh(){return kt}function IT(t,e=!1){kt&&kt.cleanups.push(t)}let He;const zl=new WeakSet;class o_{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,kt&&kt.active&&kt.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,zl.has(this)&&(zl.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||c_(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,zd(this),l_(this);const e=He,n=pn;He=this,pn=!0;try{return this.fn()}finally{u_(this),He=e,pn=n,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)Bh(e);this.deps=this.depsTail=void 0,zd(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?zl.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Su(this)&&this.run()}get dirty(){return Su(this)}}let a_=0,_o,yo;function c_(t,e=!1){if(t.flags|=8,e){t.next=yo,yo=t;return}t.next=_o,_o=t}function Uh(){a_++}function Fh(){if(--a_>0)return;if(yo){let e=yo;for(yo=void 0;e;){const n=e.next;e.next=void 0,e.flags&=-9,e=n}}let t;for(;_o;){let e=_o;for(_o=void 0;e;){const n=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(r){t||(t=r)}e=n}}if(t)throw t}function l_(t){for(let e=t.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function u_(t){let e,n=t.depsTail,r=n;for(;r;){const s=r.prevDep;r.version===-1?(r===n&&(n=s),Bh(r),bT(r)):e=r,r.dep.activeLink=r.prevActiveLink,r.prevActiveLink=void 0,r=s}t.deps=e,t.depsTail=n}function Su(t){for(let e=t.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(h_(e.dep.computed)||e.dep.version!==e.version))return!0;return!!t._dirty}function h_(t){if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===Oo)||(t.globalVersion=Oo,!t.isSSR&&t.flags&128&&(!t.deps&&!t._dirty||!Su(t))))return;t.flags|=2;const e=t.dep,n=He,r=pn;He=t,pn=!0;try{l_(t);const s=t.fn(t._value);(e.version===0||Lr(s,t._value))&&(t.flags|=128,t._value=s,e.version++)}catch(s){throw e.version++,s}finally{He=n,pn=r,u_(t),t.flags&=-3}}function Bh(t,e=!1){const{dep:n,prevSub:r,nextSub:s}=t;if(r&&(r.nextSub=s,t.prevSub=void 0),s&&(s.prevSub=r,t.nextSub=void 0),n.subs===t&&(n.subs=r,!r&&n.computed)){n.computed.flags&=-5;for(let i=n.computed.deps;i;i=i.nextDep)Bh(i,!0)}!e&&!--n.sc&&n.map&&n.map.delete(n.key)}function bT(t){const{prevDep:e,nextDep:n}=t;e&&(e.nextDep=n,t.prevDep=void 0),n&&(n.prevDep=e,t.nextDep=void 0)}let pn=!0;const f_=[];function or(){f_.push(pn),pn=!1}function ar(){const t=f_.pop();pn=t===void 0?!0:t}function zd(t){const{cleanup:e}=t;if(t.cleanup=void 0,e){const n=He;He=void 0;try{e()}finally{He=n}}}let Oo=0;class AT{constructor(e,n){this.sub=e,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class $h{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(e){if(!He||!pn||He===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==He)n=this.activeLink=new AT(He,this),He.deps?(n.prevDep=He.depsTail,He.depsTail.nextDep=n,He.depsTail=n):He.deps=He.depsTail=n,d_(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const r=n.nextDep;r.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=r),n.prevDep=He.depsTail,n.nextDep=void 0,He.depsTail.nextDep=n,He.depsTail=n,He.deps===n&&(He.deps=r)}return n}trigger(e){this.version++,Oo++,this.notify(e)}notify(e){Uh();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{Fh()}}}function d_(t){if(t.dep.sc++,t.sub.flags&4){const e=t.dep.computed;if(e&&!t.dep.subs){e.flags|=20;for(let r=e.deps;r;r=r.nextDep)d_(r)}const n=t.dep.subs;n!==t&&(t.prevSub=n,n&&(n.nextSub=t)),t.dep.subs=t}}const ac=new WeakMap,Es=Symbol(""),Cu=Symbol(""),Do=Symbol("");function Ot(t,e,n){if(pn&&He){let r=ac.get(t);r||ac.set(t,r=new Map);let s=r.get(n);s||(r.set(n,s=new $h),s.map=r,s.key=n),s.track()}}function Kn(t,e,n,r,s,i){const o=ac.get(t);if(!o){Oo++;return}const a=l=>{l&&l.trigger()};if(Uh(),e==="clear")o.forEach(a);else{const l=ue(t),u=l&&jc(n);if(l&&n==="length"){const h=Number(r);o.forEach((f,p)=>{(p==="length"||p===Do||!yn(p)&&p>=h)&&a(f)})}else switch((n!==void 0||o.has(void 0))&&a(o.get(n)),u&&a(o.get(Do)),e){case"add":l?u&&a(o.get("length")):(a(o.get(Es)),si(t)&&a(o.get(Cu)));break;case"delete":l||(a(o.get(Es)),si(t)&&a(o.get(Cu)));break;case"set":si(t)&&a(o.get(Es));break}}Fh()}function RT(t,e){const n=ac.get(t);return n&&n.get(e)}function Gs(t){const e=ke(t);return e===t?e:(Ot(e,"iterate",Do),en(t)?e:e.map(vn))}function Qc(t){return Ot(t=ke(t),"iterate",Do),t}function Rr(t,e){return Ln(t)?Ur(t)?gi(vn(e)):gi(e):vn(e)}const ST={__proto__:null,[Symbol.iterator](){return Kl(this,Symbol.iterator,t=>Rr(this,t))},concat(...t){return Gs(this).concat(...t.map(e=>ue(e)?Gs(e):e))},entries(){return Kl(this,"entries",t=>(t[1]=Rr(this,t[1]),t))},every(t,e){return jn(this,"every",t,e,void 0,arguments)},filter(t,e){return jn(this,"filter",t,e,n=>n.map(r=>Rr(this,r)),arguments)},find(t,e){return jn(this,"find",t,e,n=>Rr(this,n),arguments)},findIndex(t,e){return jn(this,"findIndex",t,e,void 0,arguments)},findLast(t,e){return jn(this,"findLast",t,e,n=>Rr(this,n),arguments)},findLastIndex(t,e){return jn(this,"findLastIndex",t,e,void 0,arguments)},forEach(t,e){return jn(this,"forEach",t,e,void 0,arguments)},includes(...t){return Ql(this,"includes",t)},indexOf(...t){return Ql(this,"indexOf",t)},join(t){return Gs(this).join(t)},lastIndexOf(...t){return Ql(this,"lastIndexOf",t)},map(t,e){return jn(this,"map",t,e,void 0,arguments)},pop(){return so(this,"pop")},push(...t){return so(this,"push",t)},reduce(t,...e){return Kd(this,"reduce",t,e)},reduceRight(t,...e){return Kd(this,"reduceRight",t,e)},shift(){return so(this,"shift")},some(t,e){return jn(this,"some",t,e,void 0,arguments)},splice(...t){return so(this,"splice",t)},toReversed(){return Gs(this).toReversed()},toSorted(t){return Gs(this).toSorted(t)},toSpliced(...t){return Gs(this).toSpliced(...t)},unshift(...t){return so(this,"unshift",t)},values(){return Kl(this,"values",t=>Rr(this,t))}};function Kl(t,e,n){const r=Qc(t),s=r[e]();return r!==t&&!en(t)&&(s._next=s.next,s.next=()=>{const i=s._next();return i.done||(i.value=n(i.value)),i}),s}const CT=Array.prototype;function jn(t,e,n,r,s,i){const o=Qc(t),a=o!==t&&!en(t),l=o[e];if(l!==CT[e]){const f=l.apply(t,i);return a?vn(f):f}let u=n;o!==t&&(a?u=function(f,p){return n.call(this,Rr(t,f),p,t)}:n.length>2&&(u=function(f,p){return n.call(this,f,p,t)}));const h=l.call(o,u,r);return a&&s?s(h):h}function Kd(t,e,n,r){const s=Qc(t);let i=n;return s!==t&&(en(t)?n.length>3&&(i=function(o,a,l){return n.call(this,o,a,l,t)}):i=function(o,a,l){return n.call(this,o,Rr(t,a),l,t)}),s[e](i,...r)}function Ql(t,e,n){const r=ke(t);Ot(r,"iterate",Do);const s=r[e](...n);return(s===-1||s===!1)&&Yc(n[0])?(n[0]=ke(n[0]),r[e](...n)):s}function so(t,e,n=[]){or(),Uh();const r=ke(t)[e].apply(t,n);return Fh(),ar(),r}const PT=Oh("__proto__,__v_isRef,__isVue"),p_=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(yn));function kT(t){yn(t)||(t=String(t));const e=ke(this);return Ot(e,"has",t),e.hasOwnProperty(t)}class m_{constructor(e=!1,n=!1){this._isReadonly=e,this._isShallow=n}get(e,n,r){if(n==="__v_skip")return e.__v_skip;const s=this._isReadonly,i=this._isShallow;if(n==="__v_isReactive")return!s;if(n==="__v_isReadonly")return s;if(n==="__v_isShallow")return i;if(n==="__v_raw")return r===(s?i?BT:v_:i?y_:__).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(r)?e:void 0;const o=ue(e);if(!s){let l;if(o&&(l=ST[n]))return l;if(n==="hasOwnProperty")return kT}const a=Reflect.get(e,n,ct(e)?e:r);if((yn(n)?p_.has(n):PT(n))||(s||Ot(e,"get",n),i))return a;if(ct(a)){const l=o&&jc(n)?a:a.value;return s&&Le(l)?ku(l):l}return Le(a)?s?ku(a):Zr(a):a}}class g_ extends m_{constructor(e=!1){super(!1,e)}set(e,n,r,s){let i=e[n];const o=ue(e)&&jc(n);if(!this._isShallow){const u=Ln(i);if(!en(r)&&!Ln(r)&&(i=ke(i),r=ke(r)),!o&&ct(i)&&!ct(r))return u||(i.value=r),!0}const a=o?Number(n)<e.length:Ve(e,n),l=Reflect.set(e,n,r,ct(e)?e:s);return e===ke(s)&&(a?Lr(r,i)&&Kn(e,"set",n,r):Kn(e,"add",n,r)),l}deleteProperty(e,n){const r=Ve(e,n);e[n];const s=Reflect.deleteProperty(e,n);return s&&r&&Kn(e,"delete",n,void 0),s}has(e,n){const r=Reflect.has(e,n);return(!yn(n)||!p_.has(n))&&Ot(e,"has",n),r}ownKeys(e){return Ot(e,"iterate",ue(e)?"length":Es),Reflect.ownKeys(e)}}class NT extends m_{constructor(e=!1){super(!0,e)}set(e,n){return!0}deleteProperty(e,n){return!0}}const OT=new g_,DT=new NT,VT=new g_(!0);const Pu=t=>t,ka=t=>Reflect.getPrototypeOf(t);function xT(t,e,n){return function(...r){const s=this.__v_raw,i=ke(s),o=si(i),a=t==="entries"||t===Symbol.iterator&&o,l=t==="keys"&&o,u=s[t](...r),h=n?Pu:e?gi:vn;return!e&&Ot(i,"iterate",l?Cu:Es),{next(){const{value:f,done:p}=u.next();return p?{value:f,done:p}:{value:a?[h(f[0]),h(f[1])]:h(f),done:p}},[Symbol.iterator](){return this}}}}function Na(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function MT(t,e){const n={get(s){const i=this.__v_raw,o=ke(i),a=ke(s);t||(Lr(s,a)&&Ot(o,"get",s),Ot(o,"get",a));const{has:l}=ka(o),u=e?Pu:t?gi:vn;if(l.call(o,s))return u(i.get(s));if(l.call(o,a))return u(i.get(a));i!==o&&i.get(s)},get size(){const s=this.__v_raw;return!t&&Ot(ke(s),"iterate",Es),s.size},has(s){const i=this.__v_raw,o=ke(i),a=ke(s);return t||(Lr(s,a)&&Ot(o,"has",s),Ot(o,"has",a)),s===a?i.has(s):i.has(s)||i.has(a)},forEach(s,i){const o=this,a=o.__v_raw,l=ke(a),u=e?Pu:t?gi:vn;return!t&&Ot(l,"iterate",Es),a.forEach((h,f)=>s.call(i,u(h),u(f),o))}};return Et(n,t?{add:Na("add"),set:Na("set"),delete:Na("delete"),clear:Na("clear")}:{add(s){!e&&!en(s)&&!Ln(s)&&(s=ke(s));const i=ke(this);return ka(i).has.call(i,s)||(i.add(s),Kn(i,"add",s,s)),this},set(s,i){!e&&!en(i)&&!Ln(i)&&(i=ke(i));const o=ke(this),{has:a,get:l}=ka(o);let u=a.call(o,s);u||(s=ke(s),u=a.call(o,s));const h=l.call(o,s);return o.set(s,i),u?Lr(i,h)&&Kn(o,"set",s,i):Kn(o,"add",s,i),this},delete(s){const i=ke(this),{has:o,get:a}=ka(i);let l=o.call(i,s);l||(s=ke(s),l=o.call(i,s)),a&&a.call(i,s);const u=i.delete(s);return l&&Kn(i,"delete",s,void 0),u},clear(){const s=ke(this),i=s.size!==0,o=s.clear();return i&&Kn(s,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(s=>{n[s]=xT(s,t,e)}),n}function Hh(t,e){const n=MT(t,e);return(r,s,i)=>s==="__v_isReactive"?!t:s==="__v_isReadonly"?t:s==="__v_raw"?r:Reflect.get(Ve(n,s)&&s in r?n:r,s,i)}const LT={get:Hh(!1,!1)},UT={get:Hh(!1,!0)},FT={get:Hh(!0,!1)};const __=new WeakMap,y_=new WeakMap,v_=new WeakMap,BT=new WeakMap;function $T(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function HT(t){return t.__v_skip||!Object.isExtensible(t)?0:$T(hT(t))}function Zr(t){return Ln(t)?t:jh(t,!1,OT,LT,__)}function Nn(t){return jh(t,!1,VT,UT,y_)}function ku(t){return jh(t,!0,DT,FT,v_)}function jh(t,e,n,r,s){if(!Le(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const i=HT(t);if(i===0)return t;const o=s.get(t);if(o)return o;const a=new Proxy(t,i===2?r:n);return s.set(t,a),a}function Ur(t){return Ln(t)?Ur(t.__v_raw):!!(t&&t.__v_isReactive)}function Ln(t){return!!(t&&t.__v_isReadonly)}function en(t){return!!(t&&t.__v_isShallow)}function Yc(t){return t?!!t.__v_raw:!1}function ke(t){const e=t&&t.__v_raw;return e?ke(e):t}function jT(t){return!Ve(t,"__v_skip")&&Object.isExtensible(t)&&e_(t,"__v_skip",!0),t}const vn=t=>Le(t)?Zr(t):t,gi=t=>Le(t)?ku(t):t;function ct(t){return t?t.__v_isRef===!0:!1}function oe(t){return E_(t,!1)}function cr(t){return E_(t,!0)}function E_(t,e){return ct(t)?t:new qT(t,e)}class qT{constructor(e,n){this.dep=new $h,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?e:ke(e),this._value=n?e:vn(e),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(e){const n=this._rawValue,r=this.__v_isShallow||en(e)||Ln(e);e=r?e:ke(e),Lr(e,n)&&(this._rawValue=e,this._value=r?e:vn(e),this.dep.trigger())}}function Me(t){return ct(t)?t.value:t}function WT(t){return me(t)?t():Me(t)}const GT={get:(t,e,n)=>e==="__v_raw"?t:Me(Reflect.get(t,e,n)),set:(t,e,n,r)=>{const s=t[e];return ct(s)&&!ct(n)?(s.value=n,!0):Reflect.set(t,e,n,r)}};function w_(t){return Ur(t)?t:new Proxy(t,GT)}class zT{constructor(e,n,r){this._object=e,this._key=n,this._defaultValue=r,this.__v_isRef=!0,this._value=void 0,this._raw=ke(e);let s=!0,i=e;if(!ue(e)||!jc(String(n)))do s=!Yc(i)||en(i);while(s&&(i=i.__v_raw));this._shallow=s}get value(){let e=this._object[this._key];return this._shallow&&(e=Me(e)),this._value=e===void 0?this._defaultValue:e}set value(e){if(this._shallow&&ct(this._raw[this._key])){const n=this._object[this._key];if(ct(n)){n.value=e;return}}this._object[this._key]=e}get dep(){return RT(this._raw,this._key)}}class KT{constructor(e){this._getter=e,this.__v_isRef=!0,this.__v_isReadonly=!0,this._value=void 0}get value(){return this._value=this._getter()}}function QT(t,e,n){return ct(t)?t:me(t)?new KT(t):Le(t)&&arguments.length>1?YT(t,e,n):oe(t)}function YT(t,e,n){return new zT(t,e,n)}class JT{constructor(e,n,r){this.fn=e,this.setter=n,this._value=void 0,this.dep=new $h(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Oo-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=r}notify(){if(this.flags|=16,!(this.flags&8)&&He!==this)return c_(this,!0),!0}get value(){const e=this.dep.track();return h_(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function XT(t,e,n=!1){let r,s;return me(t)?r=t:(r=t.get,s=t.set),new JT(r,s,n)}const Oa={},cc=new WeakMap;let ps;function ZT(t,e=!1,n=ps){if(n){let r=cc.get(n);r||cc.set(n,r=[]),r.push(t)}}function eI(t,e,n=$e){const{immediate:r,deep:s,once:i,scheduler:o,augmentJob:a,call:l}=n,u=O=>s?O:en(O)||s===!1||s===0?Qn(O,1):Qn(O);let h,f,p,g,v=!1,_=!1;if(ct(t)?(f=()=>t.value,v=en(t)):Ur(t)?(f=()=>u(t),v=!0):ue(t)?(_=!0,v=t.some(O=>Ur(O)||en(O)),f=()=>t.map(O=>{if(ct(O))return O.value;if(Ur(O))return u(O);if(me(O))return l?l(O,2):O()})):me(t)?e?f=l?()=>l(t,2):t:f=()=>{if(p){or();try{p()}finally{ar()}}const O=ps;ps=h;try{return l?l(t,3,[g]):t(g)}finally{ps=O}}:f=On,e&&s){const O=f,V=s===!0?1/0:s;f=()=>Qn(O(),V)}const C=Lh(),S=()=>{h.stop(),C&&C.active&&Vh(C.effects,h)};if(i&&e){const O=e;e=(...V)=>{O(...V),S()}}let R=_?new Array(t.length).fill(Oa):Oa;const y=O=>{if(!(!(h.flags&1)||!h.dirty&&!O))if(e){const V=h.run();if(s||v||(_?V.some((L,b)=>Lr(L,R[b])):Lr(V,R))){p&&p();const L=ps;ps=h;try{const b=[V,R===Oa?void 0:_&&R[0]===Oa?[]:R,g];R=V,l?l(e,3,b):e(...b)}finally{ps=L}}}else h.run()};return a&&a(y),h=new o_(f),h.scheduler=o?()=>o(y,!1):y,g=O=>ZT(O,!1,h),p=h.onStop=()=>{const O=cc.get(h);if(O){if(l)l(O,4);else for(const V of O)V();cc.delete(h)}},e?r?y(!0):R=h.run():o?o(y.bind(null,!0),!0):h.run(),S.pause=h.pause.bind(h),S.resume=h.resume.bind(h),S.stop=S,S}function Qn(t,e=1/0,n){if(e<=0||!Le(t)||t.__v_skip||(n=n||new Map,(n.get(t)||0)>=e))return t;if(n.set(t,e),e--,ct(t))Qn(t.value,e,n);else if(ue(t))for(let r=0;r<t.length;r++)Qn(t[r],e,n);else if(Ni(t)||si(t))t.forEach(r=>{Qn(r,e,n)});else if(Zg(t)){for(const r in t)Qn(t[r],e,n);for(const r of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,r)&&Qn(t[r],e,n)}return t}function Zo(t,e,n,r){try{return r?t(...r):t()}catch(s){Di(s,e,n)}}function En(t,e,n,r){if(me(t)){const s=Zo(t,e,n,r);return s&&xh(s)&&s.catch(i=>{Di(i,e,n)}),s}if(ue(t)){const s=[];for(let i=0;i<t.length;i++)s.push(En(t[i],e,n,r));return s}}function Di(t,e,n,r=!0){const s=e?e.vnode:null,{errorHandler:i,throwUnhandledErrorInProduction:o}=e&&e.appContext.config||$e;if(e){let a=e.parent;const l=e.proxy,u=`https://vuejs.org/error-reference/#runtime-${n}`;for(;a;){const h=a.ec;if(h){for(let f=0;f<h.length;f++)if(h[f](t,l,u)===!1)return}a=a.parent}if(i){or(),Zo(i,null,10,[t,l,u]),ar();return}}tI(t,n,s,r,o)}function tI(t,e,n,r=!0,s=!1){if(s)throw t;console.error(t)}const Ut=[];let Cn=-1;const ai=[];let Sr=null,Ks=0;const T_=Promise.resolve();let lc=null;function As(t){const e=lc||T_;return t?e.then(this?t.bind(this):t):e}function nI(t){let e=Cn+1,n=Ut.length;for(;e<n;){const r=e+n>>>1,s=Ut[r],i=Vo(s);i<t||i===t&&s.flags&2?e=r+1:n=r}return e}function qh(t){if(!(t.flags&1)){const e=Vo(t),n=Ut[Ut.length-1];!n||!(t.flags&2)&&e>=Vo(n)?Ut.push(t):Ut.splice(nI(e),0,t),t.flags|=1,I_()}}function I_(){lc||(lc=T_.then(b_))}function Nu(t){ue(t)?ai.push(...t):Sr&&t.id===-1?Sr.splice(Ks+1,0,t):t.flags&1||(ai.push(t),t.flags|=1),I_()}function Qd(t,e,n=Cn+1){for(;n<Ut.length;n++){const r=Ut[n];if(r&&r.flags&2){if(t&&r.id!==t.uid)continue;Ut.splice(n,1),n--,r.flags&4&&(r.flags&=-2),r(),r.flags&4||(r.flags&=-2)}}}function uc(t){if(ai.length){const e=[...new Set(ai)].sort((n,r)=>Vo(n)-Vo(r));if(ai.length=0,Sr){Sr.push(...e);return}for(Sr=e,Ks=0;Ks<Sr.length;Ks++){const n=Sr[Ks];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}Sr=null,Ks=0}}const Vo=t=>t.id==null?t.flags&2?-1:1/0:t.id;function b_(t){try{for(Cn=0;Cn<Ut.length;Cn++){const e=Ut[Cn];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),Zo(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;Cn<Ut.length;Cn++){const e=Ut[Cn];e&&(e.flags&=-2)}Cn=-1,Ut.length=0,uc(),lc=null,(Ut.length||ai.length)&&b_()}}let At=null,A_=null;function hc(t){const e=At;return At=t,A_=t&&t.type.__scopeId||null,e}function tn(t,e=At,n){if(!e||t._n)return t;const r=(...s)=>{r._d&&_c(-1);const i=hc(e);let o;try{o=t(...s)}finally{hc(i),r._d&&_c(1)}return o};return r._n=!0,r._c=!0,r._d=!0,r}function co(t,e){if(At===null)return t;const n=tl(At),r=t.dirs||(t.dirs=[]);for(let s=0;s<e.length;s++){let[i,o,a,l=$e]=e[s];i&&(me(i)&&(i={mounted:i,updated:i}),i.deep&&Qn(o),r.push({dir:i,instance:n,value:o,oldValue:void 0,arg:a,modifiers:l}))}return t}function Pn(t,e,n,r){const s=t.dirs,i=e&&e.dirs;for(let o=0;o<s.length;o++){const a=s[o];i&&(a.oldValue=i[o].value);let l=a.dir[r];l&&(or(),En(l,n,8,[t.el,a,t,e]),ar())}}function Zn(t,e){if(bt){let n=bt.provides;const r=bt.parent&&bt.parent.provides;r===n&&(n=bt.provides=Object.create(r)),n[t]=e}}function Rt(t,e,n=!1){const r=Ms();if(r||ws){let s=ws?ws._context.provides:r?r.parent==null||r.ce?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:void 0;if(s&&t in s)return s[t];if(arguments.length>1)return n&&me(e)?e.call(r&&r.proxy):e}}function Jc(){return!!(Ms()||ws)}const rI=Symbol.for("v-scx"),sI=()=>Rt(rI);function iI(t,e){return Wh(t,null,e)}function er(t,e,n){return Wh(t,e,n)}function Wh(t,e,n=$e){const{immediate:r,deep:s,flush:i,once:o}=n,a=Et({},n),l=e&&r||!e&&i!=="post";let u;if(vi){if(i==="sync"){const g=sI();u=g.__watcherHandles||(g.__watcherHandles=[])}else if(!l){const g=()=>{};return g.stop=On,g.resume=On,g.pause=On,g}}const h=bt;a.call=(g,v,_)=>En(g,h,v,_);let f=!1;i==="post"?a.scheduler=g=>{gt(g,h&&h.suspense)}:i!=="sync"&&(f=!0,a.scheduler=(g,v)=>{v?g():qh(g)}),a.augmentJob=g=>{e&&(g.flags|=4),f&&(g.flags|=2,h&&(g.id=h.uid,g.i=h))};const p=eI(t,e,a);return vi&&(u?u.push(p):l&&p()),p}function oI(t,e,n){const r=this.proxy,s=ze(t)?t.includes(".")?R_(r,t):()=>r[t]:t.bind(r,r);let i;me(e)?i=e:(i=e.handler,n=e);const o=na(this),a=Wh(s,i.bind(r),n);return o(),a}function R_(t,e){const n=e.split(".");return()=>{let r=t;for(let s=0;s<n.length&&r;s++)r=r[n[s]];return r}}const aI=Symbol("_vte"),S_=t=>t.__isTeleport,zn=Symbol("_leaveCb"),Da=Symbol("_enterCb");function cI(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Wr(()=>{t.isMounted=!0}),ta(()=>{t.isUnmounting=!0}),t}const nn=[Function,Array],C_={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:nn,onEnter:nn,onAfterEnter:nn,onEnterCancelled:nn,onBeforeLeave:nn,onLeave:nn,onAfterLeave:nn,onLeaveCancelled:nn,onBeforeAppear:nn,onAppear:nn,onAfterAppear:nn,onAppearCancelled:nn},P_=t=>{const e=t.subTree;return e.component?P_(e.component):e},lI={name:"BaseTransition",props:C_,setup(t,{slots:e}){const n=Ms(),r=cI();return()=>{const s=e.default&&O_(e.default(),!0);if(!s||!s.length)return;const i=k_(s),o=ke(t),{mode:a}=o;if(r.isLeaving)return Yl(i);const l=Yd(i);if(!l)return Yl(i);let u=Ou(l,o,r,n,f=>u=f);l.type!==it&&_i(l,u);let h=n.subTree&&Yd(n.subTree);if(h&&h.type!==it&&!fn(h,l)&&P_(n).type!==it){let f=Ou(h,o,r,n);if(_i(h,f),a==="out-in"&&l.type!==it)return r.isLeaving=!0,f.afterLeave=()=>{r.isLeaving=!1,n.job.flags&8||n.update(),delete f.afterLeave,h=void 0},Yl(i);a==="in-out"&&l.type!==it?f.delayLeave=(p,g,v)=>{const _=N_(r,h);_[String(h.key)]=h,p[zn]=()=>{g(),p[zn]=void 0,delete u.delayedLeave,h=void 0},u.delayedLeave=()=>{v(),delete u.delayedLeave,h=void 0}}:h=void 0}else h&&(h=void 0);return i}}};function k_(t){let e=t[0];if(t.length>1){for(const n of t)if(n.type!==it){e=n;break}}return e}const uI=lI;function N_(t,e){const{leavingVNodes:n}=t;let r=n.get(e.type);return r||(r=Object.create(null),n.set(e.type,r)),r}function Ou(t,e,n,r,s){const{appear:i,mode:o,persisted:a=!1,onBeforeEnter:l,onEnter:u,onAfterEnter:h,onEnterCancelled:f,onBeforeLeave:p,onLeave:g,onAfterLeave:v,onLeaveCancelled:_,onBeforeAppear:C,onAppear:S,onAfterAppear:R,onAppearCancelled:y}=e,O=String(t.key),V=N_(n,t),L=(E,A)=>{E&&En(E,r,9,A)},b=(E,A)=>{const P=A[1];L(E,A),ue(E)?E.every(N=>N.length<=1)&&P():E.length<=1&&P()},w={mode:o,persisted:a,beforeEnter(E){let A=l;if(!n.isMounted)if(i)A=C||l;else return;E[zn]&&E[zn](!0);const P=V[O];P&&fn(t,P)&&P.el[zn]&&P.el[zn](),L(A,[E])},enter(E){let A=u,P=h,N=f;if(!n.isMounted)if(i)A=S||u,P=R||h,N=y||f;else return;let I=!1;const le=E[Da]=ye=>{I||(I=!0,ye?L(N,[E]):L(P,[E]),w.delayedLeave&&w.delayedLeave(),E[Da]=void 0)};A?b(A,[E,le]):le()},leave(E,A){const P=String(t.key);if(E[Da]&&E[Da](!0),n.isUnmounting)return A();L(p,[E]);let N=!1;const I=E[zn]=le=>{N||(N=!0,A(),le?L(_,[E]):L(v,[E]),E[zn]=void 0,V[P]===t&&delete V[P])};V[P]=t,g?b(g,[E,I]):I()},clone(E){const A=Ou(E,e,n,r,s);return s&&s(A),A}};return w}function Yl(t){if(ea(t))return t=an(t),t.children=null,t}function Yd(t){if(!ea(t))return S_(t.type)&&t.children?k_(t.children):t;if(t.component)return t.component.subTree;const{shapeFlag:e,children:n}=t;if(n){if(e&16)return n[0];if(e&32&&me(n.default))return n.default()}}function _i(t,e){t.shapeFlag&6&&t.component?(t.transition=e,_i(t.component.subTree,e)):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function O_(t,e=!1,n){let r=[],s=0;for(let i=0;i<t.length;i++){let o=t[i];const a=n==null?o.key:String(n)+String(o.key!=null?o.key:i);o.type===Ge?(o.patchFlag&128&&s++,r=r.concat(O_(o.children,e,a))):(e||o.type!==it)&&r.push(a!=null?an(o,{key:a}):o)}if(s>1)for(let i=0;i<r.length;i++)r[i].patchFlag=-2;return r}function tt(t,e){return me(t)?Et({name:t.name},e,{setup:t}):t}function Gh(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}const fc=new WeakMap;function ci(t,e,n,r,s=!1){if(ue(t)){t.forEach((v,_)=>ci(v,e&&(ue(e)?e[_]:e),n,r,s));return}if(tr(r)&&!s){r.shapeFlag&512&&r.type.__asyncResolved&&r.component.subTree.component&&ci(t,e,n,r.component.subTree);return}const i=r.shapeFlag&4?tl(r.component):r.el,o=s?null:i,{i:a,r:l}=t,u=e&&e.r,h=a.refs===$e?a.refs={}:a.refs,f=a.setupState,p=ke(f),g=f===$e?Jg:v=>Ve(p,v);if(u!=null&&u!==l){if(Jd(e),ze(u))h[u]=null,g(u)&&(f[u]=null);else if(ct(u)){u.value=null;const v=e;v.k&&(h[v.k]=null)}}if(me(l))Zo(l,a,12,[o,h]);else{const v=ze(l),_=ct(l);if(v||_){const C=()=>{if(t.f){const S=v?g(l)?f[l]:h[l]:l.value;if(s)ue(S)&&Vh(S,i);else if(ue(S))S.includes(i)||S.push(i);else if(v)h[l]=[i],g(l)&&(f[l]=h[l]);else{const R=[i];l.value=R,t.k&&(h[t.k]=R)}}else v?(h[l]=o,g(l)&&(f[l]=o)):_&&(l.value=o,t.k&&(h[t.k]=o))};if(o){const S=()=>{C(),fc.delete(t)};S.id=-1,fc.set(t,S),gt(S,n)}else Jd(t),C()}}}function Jd(t){const e=fc.get(t);e&&(e.flags|=8,fc.delete(t))}let Xd=!1;const zs=()=>{Xd||(console.error("Hydration completed but contains mismatches."),Xd=!0)},hI=t=>t.namespaceURI.includes("svg")&&t.tagName!=="foreignObject",fI=t=>t.namespaceURI.includes("MathML"),Va=t=>{if(t.nodeType===1){if(hI(t))return"svg";if(fI(t))return"mathml"}},ei=t=>t.nodeType===8;function dI(t){const{mt:e,p:n,o:{patchProp:r,createText:s,nextSibling:i,parentNode:o,remove:a,insert:l,createComment:u}}=t,h=(y,O)=>{if(!O.hasChildNodes()){n(null,y,O),uc(),O._vnode=y;return}f(O.firstChild,y,null,null,null),uc(),O._vnode=y},f=(y,O,V,L,b,w=!1)=>{w=w||!!O.dynamicChildren;const E=ei(y)&&y.data==="[",A=()=>_(y,O,V,L,b,E),{type:P,ref:N,shapeFlag:I,patchFlag:le}=O;let ye=y.nodeType;O.el=y,le===-2&&(w=!1,O.dynamicChildren=null);let Q=null;switch(P){case Ts:ye!==3?O.children===""?(l(O.el=s(""),o(y),y),Q=y):Q=A():(y.data!==O.children&&(zs(),y.data=O.children),Q=i(y));break;case it:R(y)?(Q=i(y),S(O.el=y.content.firstChild,y,V)):ye!==8||E?Q=A():Q=i(y);break;case Eo:if(E&&(y=i(y),ye=y.nodeType),ye===1||ye===3){Q=y;const ne=!O.children.length;for(let X=0;X<O.staticCount;X++)ne&&(O.children+=Q.nodeType===1?Q.outerHTML:Q.data),X===O.staticCount-1&&(O.anchor=Q),Q=i(Q);return E?i(Q):Q}else A();break;case Ge:E?Q=v(y,O,V,L,b,w):Q=A();break;default:if(I&1)(ye!==1||O.type.toLowerCase()!==y.tagName.toLowerCase())&&!R(y)?Q=A():Q=p(y,O,V,L,b,w);else if(I&6){O.slotScopeIds=b;const ne=o(y);if(E?Q=C(y):ei(y)&&y.data==="teleport start"?Q=C(y,y.data,"teleport end"):Q=i(y),e(O,ne,null,V,L,Va(ne),w),tr(O)&&!O.type.__asyncResolved){let X;E?(X=de(Ge),X.anchor=Q?Q.previousSibling:ne.lastChild):X=y.nodeType===3?Je(""):de("div"),X.el=y,O.component.subTree=X}}else I&64?ye!==8?Q=A():Q=O.type.hydrate(y,O,V,L,b,w,t,g):I&128&&(Q=O.type.hydrate(y,O,V,L,Va(o(y)),b,w,t,f))}return N!=null&&ci(N,null,L,O),Q},p=(y,O,V,L,b,w)=>{w=w||!!O.dynamicChildren;const{type:E,props:A,patchFlag:P,shapeFlag:N,dirs:I,transition:le}=O,ye=E==="input"||E==="option";if(ye||P!==-1){I&&Pn(O,null,V,"created");let Q=!1;if(R(y)){Q=ey(null,le)&&V&&V.vnode.props&&V.vnode.props.appear;const X=y.content.firstChild;if(Q){const Ae=X.getAttribute("class");Ae&&(X.$cls=Ae),le.beforeEnter(X)}S(X,y,V),O.el=y=X}if(N&16&&!(A&&(A.innerHTML||A.textContent))){let X=g(y.firstChild,O,y,V,L,b,w);for(;X;){xa(y,1)||zs();const Ae=X;X=X.nextSibling,a(Ae)}}else if(N&8){let X=O.children;X[0]===`
`&&(y.tagName==="PRE"||y.tagName==="TEXTAREA")&&(X=X.slice(1));const{textContent:Ae}=y;Ae!==X&&Ae!==X.replace(/\r\n|\r/g,`
`)&&(xa(y,0)||zs(),y.textContent=O.children)}if(A){if(ye||!w||P&48){const X=y.tagName.includes("-");for(const Ae in A)(ye&&(Ae.endsWith("value")||Ae==="indeterminate")||Jo(Ae)&&!ii(Ae)||Ae[0]==="."||X)&&r(y,Ae,null,A[Ae],void 0,V)}else if(A.onClick)r(y,"onClick",null,A.onClick,void 0,V);else if(P&4&&Ur(A.style))for(const X in A.style)A.style[X]}let ne;(ne=A&&A.onVnodeBeforeMount)&&Bt(ne,V,O),I&&Pn(O,null,V,"beforeMount"),((ne=A&&A.onVnodeMounted)||I||Q)&&iy(()=>{ne&&Bt(ne,V,O),Q&&le.enter(y),I&&Pn(O,null,V,"mounted")},L)}return y.nextSibling},g=(y,O,V,L,b,w,E)=>{E=E||!!O.dynamicChildren;const A=O.children,P=A.length;for(let N=0;N<P;N++){const I=E?A[N]:A[N]=Yt(A[N]),le=I.type===Ts;y?(le&&!E&&N+1<P&&Yt(A[N+1]).type===Ts&&(l(s(y.data.slice(I.children.length)),V,i(y)),y.data=I.children),y=f(y,I,L,b,w,E)):le&&!I.children?l(I.el=s(""),V):(xa(V,1)||zs(),n(null,I,V,null,L,b,Va(V),w))}return y},v=(y,O,V,L,b,w)=>{const{slotScopeIds:E}=O;E&&(b=b?b.concat(E):E);const A=o(y),P=g(i(y),O,A,V,L,b,w);return P&&ei(P)&&P.data==="]"?i(O.anchor=P):(zs(),l(O.anchor=u("]"),A,P),P)},_=(y,O,V,L,b,w)=>{if(xa(y.parentElement,1)||zs(),O.el=null,w){const P=C(y);for(;;){const N=i(y);if(N&&N!==P)a(N);else break}}const E=i(y),A=o(y);return a(y),n(null,O,A,E,V,L,Va(A),b),V&&(V.vnode.el=O.el,el(V,O.el)),E},C=(y,O="[",V="]")=>{let L=0;for(;y;)if(y=i(y),y&&ei(y)&&(y.data===O&&L++,y.data===V)){if(L===0)return i(y);L--}return y},S=(y,O,V)=>{const L=O.parentNode;L&&L.replaceChild(y,O);let b=V;for(;b;)b.vnode.el===O&&(b.vnode.el=b.subTree.el=y),b=b.parent},R=y=>y.nodeType===1&&y.tagName==="TEMPLATE";return[h,f]}const Zd="data-allow-mismatch",pI={0:"text",1:"children",2:"class",3:"style",4:"attribute"};function xa(t,e){if(e===0||e===1)for(;t&&!t.hasAttribute(Zd);)t=t.parentElement;const n=t&&t.getAttribute(Zd);if(n==null)return!1;if(n==="")return!0;{const r=n.split(",");return e===0&&r.includes("children")?!0:r.includes(pI[e])}}zc().requestIdleCallback;zc().cancelIdleCallback;function mI(t,e){if(ei(t)&&t.data==="["){let n=1,r=t.nextSibling;for(;r;){if(r.nodeType===1){if(e(r)===!1)break}else if(ei(r))if(r.data==="]"){if(--n===0)break}else r.data==="["&&n++;r=r.nextSibling}}else e(t)}const tr=t=>!!t.type.__asyncLoader;function dc(t){me(t)&&(t={loader:t});const{loader:e,loadingComponent:n,errorComponent:r,delay:s=200,hydrate:i,timeout:o,suspensible:a=!0,onError:l}=t;let u=null,h,f=0;const p=()=>(f++,u=null,g()),g=()=>{let v;return u||(v=u=e().catch(_=>{if(_=_ instanceof Error?_:new Error(String(_)),l)return new Promise((C,S)=>{l(_,()=>C(p()),()=>S(_),f+1)});throw _}).then(_=>v!==u&&u?u:(_&&(_.__esModule||_[Symbol.toStringTag]==="Module")&&(_=_.default),h=_,_)))};return tt({name:"AsyncComponentWrapper",__asyncLoader:g,__asyncHydrate(v,_,C){let S=!1;(_.bu||(_.bu=[])).push(()=>S=!0);const R=()=>{S||C()},y=i?()=>{const O=i(R,V=>mI(v,V));O&&(_.bum||(_.bum=[])).push(O)}:R;h?y():g().then(()=>!_.isUnmounted&&y())},get __asyncResolved(){return h},setup(){const v=bt;if(Gh(v),h)return()=>Ma(h,v);const _=y=>{u=null,Di(y,v,13,!r)};if(a&&v.suspense||vi)return g().then(y=>()=>Ma(y,v)).catch(y=>(_(y),()=>r?de(r,{error:y}):null));const C=oe(!1),S=oe(),R=oe(!!s);return s&&setTimeout(()=>{R.value=!1},s),o!=null&&setTimeout(()=>{if(!C.value&&!S.value){const y=new Error(`Async component timed out after ${o}ms.`);_(y),S.value=y}},o),g().then(()=>{C.value=!0,v.parent&&ea(v.parent.vnode)&&v.parent.update()}).catch(y=>{_(y),S.value=y}),()=>{if(C.value&&h)return Ma(h,v);if(S.value&&r)return de(r,{error:S.value});if(n&&!R.value)return Ma(n,v)}}})}function Ma(t,e){const{ref:n,props:r,children:s,ce:i}=e.vnode,o=de(t,r,s);return o.ref=n,o.ce=i,delete e.vnode.ce,o}const ea=t=>t.type.__isKeepAlive,gI={name:"KeepAlive",__isKeepAlive:!0,props:{include:[String,RegExp,Array],exclude:[String,RegExp,Array],max:[String,Number]},setup(t,{slots:e}){const n=Ms(),r=n.ctx;if(!r.renderer)return()=>{const R=e.default&&e.default();return R&&R.length===1?R[0]:R};const s=new Map,i=new Set;let o=null;const a=n.suspense,{renderer:{p:l,m:u,um:h,o:{createElement:f}}}=r,p=f("div");r.activate=(R,y,O,V,L)=>{const b=R.component;u(R,y,O,0,a),l(b.vnode,R,y,O,b,a,V,R.slotScopeIds,L),gt(()=>{b.isDeactivated=!1,b.a&&oi(b.a);const w=R.props&&R.props.onVnodeMounted;w&&Bt(w,b.parent,R)},a)},r.deactivate=R=>{const y=R.component;mc(y.m),mc(y.a),u(R,p,null,1,a),gt(()=>{y.da&&oi(y.da);const O=R.props&&R.props.onVnodeUnmounted;O&&Bt(O,y.parent,R),y.isDeactivated=!0},a)};function g(R){Jl(R),h(R,n,a,!0)}function v(R){s.forEach((y,O)=>{const V=Bu(tr(y)?y.type.__asyncResolved||{}:y.type);V&&!R(V)&&_(O)})}function _(R){const y=s.get(R);y&&(!o||!fn(y,o))?g(y):o&&Jl(o),s.delete(R),i.delete(R)}er(()=>[t.include,t.exclude],([R,y])=>{R&&v(O=>lo(R,O)),y&&v(O=>!lo(y,O))},{flush:"post",deep:!0});let C=null;const S=()=>{C!=null&&(gc(n.subTree.type)?gt(()=>{s.set(C,La(n.subTree))},n.subTree.suspense):s.set(C,La(n.subTree)))};return Wr(S),M_(S),ta(()=>{s.forEach(R=>{const{subTree:y,suspense:O}=n,V=La(y);if(R.type===V.type&&R.key===V.key){Jl(V);const L=V.component.da;L&&gt(L,O);return}g(R)})}),()=>{if(C=null,!e.default)return o=null;const R=e.default(),y=R[0];if(R.length>1)return o=null,R;if(!Rs(y)||!(y.shapeFlag&4)&&!(y.shapeFlag&128))return o=null,y;let O=La(y);if(O.type===it)return o=null,O;const V=O.type,L=Bu(tr(O)?O.type.__asyncResolved||{}:V),{include:b,exclude:w,max:E}=t;if(b&&(!L||!lo(b,L))||w&&L&&lo(w,L))return O.shapeFlag&=-257,o=O,y;const A=O.key==null?V:O.key,P=s.get(A);return O.el&&(O=an(O),y.shapeFlag&128&&(y.ssContent=O)),C=A,P?(O.el=P.el,O.component=P.component,O.transition&&_i(O,O.transition),O.shapeFlag|=512,i.delete(A),i.add(A)):(i.add(A),E&&i.size>parseInt(E,10)&&_(i.values().next().value)),O.shapeFlag|=256,o=O,gc(y.type)?y:O}}},_I=gI;function lo(t,e){return ue(t)?t.some(n=>lo(n,e)):ze(t)?t.split(",").includes(e):uT(t)?(t.lastIndex=0,t.test(e)):!1}function D_(t,e){x_(t,"a",e)}function V_(t,e){x_(t,"da",e)}function x_(t,e,n=bt){const r=t.__wdc||(t.__wdc=()=>{let s=n;for(;s;){if(s.isDeactivated)return;s=s.parent}return t()});if(Xc(e,r,n),n){let s=n.parent;for(;s&&s.parent;)ea(s.parent.vnode)&&yI(r,e,n,s),s=s.parent}}function yI(t,e,n,r){const s=Xc(e,t,r,!0);L_(()=>{Vh(r[e],s)},n)}function Jl(t){t.shapeFlag&=-257,t.shapeFlag&=-513}function La(t){return t.shapeFlag&128?t.ssContent:t}function Xc(t,e,n=bt,r=!1){if(n){const s=n[t]||(n[t]=[]),i=e.__weh||(e.__weh=(...o)=>{or();const a=na(n),l=En(e,n,t,o);return a(),ar(),l});return r?s.unshift(i):s.push(i),i}}const dr=t=>(e,n=bt)=>{(!vi||t==="sp")&&Xc(t,(...r)=>e(...r),n)},vI=dr("bm"),Wr=dr("m"),EI=dr("bu"),M_=dr("u"),ta=dr("bum"),L_=dr("um"),wI=dr("sp"),TI=dr("rtg"),II=dr("rtc");function U_(t,e=bt){Xc("ec",t,e)}const zh="components",bI="directives";function uM(t,e){return Kh(zh,t,!0,e)||t}const F_=Symbol.for("v-ndc");function AI(t){return ze(t)?Kh(zh,t,!1)||t:t||F_}function RI(t){return Kh(bI,t)}function Kh(t,e,n=!0,r=!1){const s=At||bt;if(s){const i=s.type;if(t===zh){const a=Bu(i,!1);if(a&&(a===e||a===cn(e)||a===Wc(cn(e))))return i}const o=ep(s[t]||i[t],e)||ep(s.appContext[t],e);return!o&&r?i:o}}function ep(t,e){return t&&(t[e]||t[cn(e)]||t[Wc(cn(e))])}function hM(t,e,n,r){let s;const i=n,o=ue(t);if(o||ze(t)){const a=o&&Ur(t);let l=!1,u=!1;a&&(l=!en(t),u=Ln(t),t=Qc(t)),s=new Array(t.length);for(let h=0,f=t.length;h<f;h++)s[h]=e(l?u?gi(vn(t[h])):vn(t[h]):t[h],h,void 0,i)}else if(typeof t=="number"){s=new Array(t);for(let a=0;a<t;a++)s[a]=e(a+1,a,void 0,i)}else if(Le(t))if(t[Symbol.iterator])s=Array.from(t,(a,l)=>e(a,l,void 0,i));else{const a=Object.keys(t);s=new Array(a.length);for(let l=0,u=a.length;l<u;l++){const h=a[l];s[l]=e(t[h],h,l,i)}}else s=[];return s}function SI(t,e,n={},r,s){if(At.ce||At.parent&&tr(At.parent)&&At.parent.ce){const u=Object.keys(n).length>0;return fe(),Ht(Ge,null,[de("slot",n,r)],u?-2:64)}let i=t[e];i&&i._c&&(i._d=!1),fe();const o=i&&B_(i(n)),a=n.key||o&&o.key,l=Ht(Ge,{key:(a&&!yn(a)?a:`_${e}`)+(!o&&r?"_fb":"")},o||[],o&&t._===1?64:-2);return i&&i._c&&(i._d=!0),l}function B_(t){return t.some(e=>Rs(e)?!(e.type===it||e.type===Ge&&!B_(e.children)):!0)?t:null}const Du=t=>t?fy(t)?tl(t):Du(t.parent):null,vo=Et(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>Du(t.parent),$root:t=>Du(t.root),$host:t=>t.ce,$emit:t=>t.emit,$options:t=>H_(t),$forceUpdate:t=>t.f||(t.f=()=>{qh(t.update)}),$nextTick:t=>t.n||(t.n=As.bind(t.proxy)),$watch:t=>oI.bind(t)}),Xl=(t,e)=>t!==$e&&!t.__isScriptSetup&&Ve(t,e),CI={get({_:t},e){if(e==="__v_skip")return!0;const{ctx:n,setupState:r,data:s,props:i,accessCache:o,type:a,appContext:l}=t;if(e[0]!=="$"){const p=o[e];if(p!==void 0)switch(p){case 1:return r[e];case 2:return s[e];case 4:return n[e];case 3:return i[e]}else{if(Xl(r,e))return o[e]=1,r[e];if(s!==$e&&Ve(s,e))return o[e]=2,s[e];if(Ve(i,e))return o[e]=3,i[e];if(n!==$e&&Ve(n,e))return o[e]=4,n[e];Vu&&(o[e]=0)}}const u=vo[e];let h,f;if(u)return e==="$attrs"&&Ot(t.attrs,"get",""),u(t);if((h=a.__cssModules)&&(h=h[e]))return h;if(n!==$e&&Ve(n,e))return o[e]=4,n[e];if(f=l.config.globalProperties,Ve(f,e))return f[e]},set({_:t},e,n){const{data:r,setupState:s,ctx:i}=t;return Xl(s,e)?(s[e]=n,!0):r!==$e&&Ve(r,e)?(r[e]=n,!0):Ve(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(i[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:r,appContext:s,props:i,type:o}},a){let l;return!!(n[a]||t!==$e&&a[0]!=="$"&&Ve(t,a)||Xl(e,a)||Ve(i,a)||Ve(r,a)||Ve(vo,a)||Ve(s.config.globalProperties,a)||(l=o.__cssModules)&&l[a])},defineProperty(t,e,n){return n.get!=null?t._.accessCache[e]=0:Ve(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}};function tp(t){return ue(t)?t.reduce((e,n)=>(e[n]=null,e),{}):t}let Vu=!0;function PI(t){const e=H_(t),n=t.proxy,r=t.ctx;Vu=!1,e.beforeCreate&&np(e.beforeCreate,t,"bc");const{data:s,computed:i,methods:o,watch:a,provide:l,inject:u,created:h,beforeMount:f,mounted:p,beforeUpdate:g,updated:v,activated:_,deactivated:C,beforeDestroy:S,beforeUnmount:R,destroyed:y,unmounted:O,render:V,renderTracked:L,renderTriggered:b,errorCaptured:w,serverPrefetch:E,expose:A,inheritAttrs:P,components:N,directives:I,filters:le}=e;if(u&&kI(u,r,null),o)for(const ne in o){const X=o[ne];me(X)&&(r[ne]=X.bind(n))}if(s){const ne=s.call(n,n);Le(ne)&&(t.data=Zr(ne))}if(Vu=!0,i)for(const ne in i){const X=i[ne],Ae=me(X)?X.bind(n,n):me(X.get)?X.get.bind(n,n):On,An=!me(X)&&me(X.set)?X.set.bind(n):On,zt=Ue({get:Ae,set:An});Object.defineProperty(r,ne,{enumerable:!0,configurable:!0,get:()=>zt.value,set:Tt=>zt.value=Tt})}if(a)for(const ne in a)$_(a[ne],r,n,ne);if(l){const ne=me(l)?l.call(n):l;Reflect.ownKeys(ne).forEach(X=>{Zn(X,ne[X])})}h&&np(h,t,"c");function Q(ne,X){ue(X)?X.forEach(Ae=>ne(Ae.bind(n))):X&&ne(X.bind(n))}if(Q(vI,f),Q(Wr,p),Q(EI,g),Q(M_,v),Q(D_,_),Q(V_,C),Q(U_,w),Q(II,L),Q(TI,b),Q(ta,R),Q(L_,O),Q(wI,E),ue(A))if(A.length){const ne=t.exposed||(t.exposed={});A.forEach(X=>{Object.defineProperty(ne,X,{get:()=>n[X],set:Ae=>n[X]=Ae,enumerable:!0})})}else t.exposed||(t.exposed={});V&&t.render===On&&(t.render=V),P!=null&&(t.inheritAttrs=P),N&&(t.components=N),I&&(t.directives=I),E&&Gh(t)}function kI(t,e,n=On){ue(t)&&(t=xu(t));for(const r in t){const s=t[r];let i;Le(s)?"default"in s?i=Rt(s.from||r,s.default,!0):i=Rt(s.from||r):i=Rt(s),ct(i)?Object.defineProperty(e,r,{enumerable:!0,configurable:!0,get:()=>i.value,set:o=>i.value=o}):e[r]=i}}function np(t,e,n){En(ue(t)?t.map(r=>r.bind(e.proxy)):t.bind(e.proxy),e,n)}function $_(t,e,n,r){let s=r.includes(".")?R_(n,r):()=>n[r];if(ze(t)){const i=e[t];me(i)&&er(s,i)}else if(me(t))er(s,t.bind(n));else if(Le(t))if(ue(t))t.forEach(i=>$_(i,e,n,r));else{const i=me(t.handler)?t.handler.bind(n):e[t.handler];me(i)&&er(s,i,t)}}function H_(t){const e=t.type,{mixins:n,extends:r}=e,{mixins:s,optionsCache:i,config:{optionMergeStrategies:o}}=t.appContext,a=i.get(e);let l;return a?l=a:!s.length&&!n&&!r?l=e:(l={},s.length&&s.forEach(u=>pc(l,u,o,!0)),pc(l,e,o)),Le(e)&&i.set(e,l),l}function pc(t,e,n,r=!1){const{mixins:s,extends:i}=e;i&&pc(t,i,n,!0),s&&s.forEach(o=>pc(t,o,n,!0));for(const o in e)if(!(r&&o==="expose")){const a=NI[o]||n&&n[o];t[o]=a?a(t[o],e[o]):e[o]}return t}const NI={data:rp,props:sp,emits:sp,methods:uo,computed:uo,beforeCreate:Mt,created:Mt,beforeMount:Mt,mounted:Mt,beforeUpdate:Mt,updated:Mt,beforeDestroy:Mt,beforeUnmount:Mt,destroyed:Mt,unmounted:Mt,activated:Mt,deactivated:Mt,errorCaptured:Mt,serverPrefetch:Mt,components:uo,directives:uo,watch:DI,provide:rp,inject:OI};function rp(t,e){return e?t?function(){return Et(me(t)?t.call(this,this):t,me(e)?e.call(this,this):e)}:e:t}function OI(t,e){return uo(xu(t),xu(e))}function xu(t){if(ue(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function Mt(t,e){return t?[...new Set([].concat(t,e))]:e}function uo(t,e){return t?Et(Object.create(null),t,e):e}function sp(t,e){return t?ue(t)&&ue(e)?[...new Set([...t,...e])]:Et(Object.create(null),tp(t),tp(e??{})):e}function DI(t,e){if(!t)return e;if(!e)return t;const n=Et(Object.create(null),t);for(const r in e)n[r]=Mt(t[r],e[r]);return n}function j_(){return{app:null,config:{isNativeTag:Jg,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let VI=0;function xI(t,e){return function(r,s=null){me(r)||(r=Et({},r)),s!=null&&!Le(s)&&(s=null);const i=j_(),o=new WeakSet,a=[];let l=!1;const u=i.app={_uid:VI++,_component:r,_props:s,_container:null,_context:i,_instance:null,version:db,get config(){return i.config},set config(h){},use(h,...f){return o.has(h)||(h&&me(h.install)?(o.add(h),h.install(u,...f)):me(h)&&(o.add(h),h(u,...f))),u},mixin(h){return i.mixins.includes(h)||i.mixins.push(h),u},component(h,f){return f?(i.components[h]=f,u):i.components[h]},directive(h,f){return f?(i.directives[h]=f,u):i.directives[h]},mount(h,f,p){if(!l){const g=u._ceVNode||de(r,s);return g.appContext=i,p===!0?p="svg":p===!1&&(p=void 0),f&&e?e(g,h):t(g,h,p),l=!0,u._container=h,h.__vue_app__=u,tl(g.component)}},onUnmount(h){a.push(h)},unmount(){l&&(En(a,u._instance,16),t(null,u._container),delete u._container.__vue_app__)},provide(h,f){return i.provides[h]=f,u},runWithContext(h){const f=ws;ws=u;try{return h()}finally{ws=f}}};return u}}let ws=null;const MI=(t,e)=>e==="modelValue"||e==="model-value"?t.modelModifiers:t[`${e}Modifiers`]||t[`${cn(e)}Modifiers`]||t[`${xs(e)}Modifiers`];function LI(t,e,...n){if(t.isUnmounted)return;const r=t.vnode.props||$e;let s=n;const i=e.startsWith("update:"),o=i&&MI(r,e.slice(7));o&&(o.trim&&(s=n.map(h=>ze(h)?h.trim():h)),o.number&&(s=n.map(Gc)));let a,l=r[a=Wl(e)]||r[a=Wl(cn(e))];!l&&i&&(l=r[a=Wl(xs(e))]),l&&En(l,t,6,s);const u=r[a+"Once"];if(u){if(!t.emitted)t.emitted={};else if(t.emitted[a])return;t.emitted[a]=!0,En(u,t,6,s)}}const UI=new WeakMap;function q_(t,e,n=!1){const r=n?UI:e.emitsCache,s=r.get(t);if(s!==void 0)return s;const i=t.emits;let o={},a=!1;if(!me(t)){const l=u=>{const h=q_(u,e,!0);h&&(a=!0,Et(o,h))};!n&&e.mixins.length&&e.mixins.forEach(l),t.extends&&l(t.extends),t.mixins&&t.mixins.forEach(l)}return!i&&!a?(Le(t)&&r.set(t,null),null):(ue(i)?i.forEach(l=>o[l]=null):Et(o,i),Le(t)&&r.set(t,o),o)}function Zc(t,e){return!t||!Jo(e)?!1:(e=e.slice(2).replace(/Once$/,""),Ve(t,e[0].toLowerCase()+e.slice(1))||Ve(t,xs(e))||Ve(t,e))}function Zl(t){const{type:e,vnode:n,proxy:r,withProxy:s,propsOptions:[i],slots:o,attrs:a,emit:l,render:u,renderCache:h,props:f,data:p,setupState:g,ctx:v,inheritAttrs:_}=t,C=hc(t);let S,R;try{if(n.shapeFlag&4){const O=s||r,V=O;S=Yt(u.call(V,O,h,f,g,p,v)),R=a}else{const O=e;S=Yt(O.length>1?O(f,{attrs:a,slots:o,emit:l}):O(f,null)),R=e.props?a:BI(a)}}catch(O){wo.length=0,Di(O,t,1),S=de(it)}let y=S;if(R&&_!==!1){const O=Object.keys(R),{shapeFlag:V}=y;O.length&&V&7&&(i&&O.some(Dh)&&(R=$I(R,i)),y=an(y,R,!1,!0))}return n.dirs&&(y=an(y,null,!1,!0),y.dirs=y.dirs?y.dirs.concat(n.dirs):n.dirs),n.transition&&_i(y,n.transition),S=y,hc(C),S}function FI(t,e=!0){let n;for(let r=0;r<t.length;r++){const s=t[r];if(Rs(s)){if(s.type!==it||s.children==="v-if"){if(n)return;n=s}}else return}return n}const BI=t=>{let e;for(const n in t)(n==="class"||n==="style"||Jo(n))&&((e||(e={}))[n]=t[n]);return e},$I=(t,e)=>{const n={};for(const r in t)(!Dh(r)||!(r.slice(9)in e))&&(n[r]=t[r]);return n};function HI(t,e,n){const{props:r,children:s,component:i}=t,{props:o,children:a,patchFlag:l}=e,u=i.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&l>=0){if(l&1024)return!0;if(l&16)return r?ip(r,o,u):!!o;if(l&8){const h=e.dynamicProps;for(let f=0;f<h.length;f++){const p=h[f];if(o[p]!==r[p]&&!Zc(u,p))return!0}}}else return(s||a)&&(!a||!a.$stable)?!0:r===o?!1:r?o?ip(r,o,u):!0:!!o;return!1}function ip(t,e,n){const r=Object.keys(e);if(r.length!==Object.keys(t).length)return!0;for(let s=0;s<r.length;s++){const i=r[s];if(e[i]!==t[i]&&!Zc(n,i))return!0}return!1}function el({vnode:t,parent:e},n){for(;e;){const r=e.subTree;if(r.suspense&&r.suspense.activeBranch===t&&(r.el=t.el),r===t)(t=e.vnode).el=n,e=e.parent;else break}}const W_={},G_=()=>Object.create(W_),z_=t=>Object.getPrototypeOf(t)===W_;function jI(t,e,n,r=!1){const s={},i=G_();t.propsDefaults=Object.create(null),K_(t,e,s,i);for(const o in t.propsOptions[0])o in s||(s[o]=void 0);n?t.props=r?s:Nn(s):t.type.props?t.props=s:t.props=i,t.attrs=i}function qI(t,e,n,r){const{props:s,attrs:i,vnode:{patchFlag:o}}=t,a=ke(s),[l]=t.propsOptions;let u=!1;if((r||o>0)&&!(o&16)){if(o&8){const h=t.vnode.dynamicProps;for(let f=0;f<h.length;f++){let p=h[f];if(Zc(t.emitsOptions,p))continue;const g=e[p];if(l)if(Ve(i,p))g!==i[p]&&(i[p]=g,u=!0);else{const v=cn(p);s[v]=Mu(l,a,v,g,t,!1)}else g!==i[p]&&(i[p]=g,u=!0)}}}else{K_(t,e,s,i)&&(u=!0);let h;for(const f in a)(!e||!Ve(e,f)&&((h=xs(f))===f||!Ve(e,h)))&&(l?n&&(n[f]!==void 0||n[h]!==void 0)&&(s[f]=Mu(l,a,f,void 0,t,!0)):delete s[f]);if(i!==a)for(const f in i)(!e||!Ve(e,f))&&(delete i[f],u=!0)}u&&Kn(t.attrs,"set","")}function K_(t,e,n,r){const[s,i]=t.propsOptions;let o=!1,a;if(e)for(let l in e){if(ii(l))continue;const u=e[l];let h;s&&Ve(s,h=cn(l))?!i||!i.includes(h)?n[h]=u:(a||(a={}))[h]=u:Zc(t.emitsOptions,l)||(!(l in r)||u!==r[l])&&(r[l]=u,o=!0)}if(i){const l=ke(n),u=a||$e;for(let h=0;h<i.length;h++){const f=i[h];n[f]=Mu(s,l,f,u[f],t,!Ve(u,f))}}return o}function Mu(t,e,n,r,s,i){const o=t[n];if(o!=null){const a=Ve(o,"default");if(a&&r===void 0){const l=o.default;if(o.type!==Function&&!o.skipFactory&&me(l)){const{propsDefaults:u}=s;if(n in u)r=u[n];else{const h=na(s);r=u[n]=l.call(null,e),h()}}else r=l;s.ce&&s.ce._setProp(n,r)}o[0]&&(i&&!a?r=!1:o[1]&&(r===""||r===xs(n))&&(r=!0))}return r}const WI=new WeakMap;function Q_(t,e,n=!1){const r=n?WI:e.propsCache,s=r.get(t);if(s)return s;const i=t.props,o={},a=[];let l=!1;if(!me(t)){const h=f=>{l=!0;const[p,g]=Q_(f,e,!0);Et(o,p),g&&a.push(...g)};!n&&e.mixins.length&&e.mixins.forEach(h),t.extends&&h(t.extends),t.mixins&&t.mixins.forEach(h)}if(!i&&!l)return Le(t)&&r.set(t,ri),ri;if(ue(i))for(let h=0;h<i.length;h++){const f=cn(i[h]);op(f)&&(o[f]=$e)}else if(i)for(const h in i){const f=cn(h);if(op(f)){const p=i[h],g=o[f]=ue(p)||me(p)?{type:p}:Et({},p),v=g.type;let _=!1,C=!0;if(ue(v))for(let S=0;S<v.length;++S){const R=v[S],y=me(R)&&R.name;if(y==="Boolean"){_=!0;break}else y==="String"&&(C=!1)}else _=me(v)&&v.name==="Boolean";g[0]=_,g[1]=C,(_||Ve(g,"default"))&&a.push(f)}}const u=[o,a];return Le(t)&&r.set(t,u),u}function op(t){return t[0]!=="$"&&!ii(t)}const Qh=t=>t==="_"||t==="_ctx"||t==="$stable",Yh=t=>ue(t)?t.map(Yt):[Yt(t)],GI=(t,e,n)=>{if(e._n)return e;const r=tn((...s)=>Yh(e(...s)),n);return r._c=!1,r},Y_=(t,e,n)=>{const r=t._ctx;for(const s in t){if(Qh(s))continue;const i=t[s];if(me(i))e[s]=GI(s,i,r);else if(i!=null){const o=Yh(i);e[s]=()=>o}}},J_=(t,e)=>{const n=Yh(e);t.slots.default=()=>n},X_=(t,e,n)=>{for(const r in e)(n||!Qh(r))&&(t[r]=e[r])},zI=(t,e,n)=>{const r=t.slots=G_();if(t.vnode.shapeFlag&32){const s=e._;s?(X_(r,e,n),n&&e_(r,"_",s,!0)):Y_(e,r)}else e&&J_(t,e)},KI=(t,e,n)=>{const{vnode:r,slots:s}=t;let i=!0,o=$e;if(r.shapeFlag&32){const a=e._;a?n&&a===1?i=!1:X_(s,e,n):(i=!e.$stable,Y_(e,s)),o=e}else e&&(J_(t,e),o={default:1});if(i)for(const a in s)!Qh(a)&&o[a]==null&&delete s[a]},gt=iy;function QI(t){return Z_(t)}function YI(t){return Z_(t,dI)}function Z_(t,e){const n=zc();n.__VUE__=!0;const{insert:r,remove:s,patchProp:i,createElement:o,createText:a,createComment:l,setText:u,setElementText:h,parentNode:f,nextSibling:p,setScopeId:g=On,insertStaticContent:v}=t,_=(k,D,M,q=null,F=null,W=null,K=void 0,z=null,Y=!!D.dynamicChildren)=>{if(k===D)return;k&&!fn(k,D)&&(q=H(k),Tt(k,F,W,!0),k=null),D.patchFlag===-2&&(Y=!1,D.dynamicChildren=null);const{type:G,ref:he,shapeFlag:te}=D;switch(G){case Ts:C(k,D,M,q);break;case it:S(k,D,M,q);break;case Eo:k==null&&R(D,M,q,K);break;case Ge:N(k,D,M,q,F,W,K,z,Y);break;default:te&1?V(k,D,M,q,F,W,K,z,Y):te&6?I(k,D,M,q,F,W,K,z,Y):(te&64||te&128)&&G.process(k,D,M,q,F,W,K,z,Y,ae)}he!=null&&F?ci(he,k&&k.ref,W,D||k,!D):he==null&&k&&k.ref!=null&&ci(k.ref,null,W,k,!0)},C=(k,D,M,q)=>{if(k==null)r(D.el=a(D.children),M,q);else{const F=D.el=k.el;D.children!==k.children&&u(F,D.children)}},S=(k,D,M,q)=>{k==null?r(D.el=l(D.children||""),M,q):D.el=k.el},R=(k,D,M,q)=>{[k.el,k.anchor]=v(k.children,D,M,q,k.el,k.anchor)},y=({el:k,anchor:D},M,q)=>{let F;for(;k&&k!==D;)F=p(k),r(k,M,q),k=F;r(D,M,q)},O=({el:k,anchor:D})=>{let M;for(;k&&k!==D;)M=p(k),s(k),k=M;s(D)},V=(k,D,M,q,F,W,K,z,Y)=>{if(D.type==="svg"?K="svg":D.type==="math"&&(K="mathml"),k==null)L(D,M,q,F,W,K,z,Y);else{const G=k.el&&k.el._isVueCE?k.el:null;try{G&&G._beginPatch(),E(k,D,F,W,K,z,Y)}finally{G&&G._endPatch()}}},L=(k,D,M,q,F,W,K,z)=>{let Y,G;const{props:he,shapeFlag:te,transition:ie,dirs:_e}=k;if(Y=k.el=o(k.type,W,he&&he.is,he),te&8?h(Y,k.children):te&16&&w(k.children,Y,null,q,F,eu(k,W),K,z),_e&&Pn(k,null,q,"created"),b(Y,k,k.scopeId,K,q),he){for(const Oe in he)Oe!=="value"&&!ii(Oe)&&i(Y,Oe,null,he[Oe],W,q);"value"in he&&i(Y,"value",null,he.value,W),(G=he.onVnodeBeforeMount)&&Bt(G,q,k)}_e&&Pn(k,null,q,"beforeMount");const Ie=ey(F,ie);Ie&&ie.beforeEnter(Y),r(Y,D,M),((G=he&&he.onVnodeMounted)||Ie||_e)&&gt(()=>{G&&Bt(G,q,k),Ie&&ie.enter(Y),_e&&Pn(k,null,q,"mounted")},F)},b=(k,D,M,q,F)=>{if(M&&g(k,M),q)for(let W=0;W<q.length;W++)g(k,q[W]);if(F){let W=F.subTree;if(D===W||gc(W.type)&&(W.ssContent===D||W.ssFallback===D)){const K=F.vnode;b(k,K,K.scopeId,K.slotScopeIds,F.parent)}}},w=(k,D,M,q,F,W,K,z,Y=0)=>{for(let G=Y;G<k.length;G++){const he=k[G]=z?Cr(k[G]):Yt(k[G]);_(null,he,D,M,q,F,W,K,z)}},E=(k,D,M,q,F,W,K)=>{const z=D.el=k.el;let{patchFlag:Y,dynamicChildren:G,dirs:he}=D;Y|=k.patchFlag&16;const te=k.props||$e,ie=D.props||$e;let _e;if(M&&cs(M,!1),(_e=ie.onVnodeBeforeUpdate)&&Bt(_e,M,D,k),he&&Pn(D,k,M,"beforeUpdate"),M&&cs(M,!0),(te.innerHTML&&ie.innerHTML==null||te.textContent&&ie.textContent==null)&&h(z,""),G?A(k.dynamicChildren,G,z,M,q,eu(D,F),W):K||X(k,D,z,null,M,q,eu(D,F),W,!1),Y>0){if(Y&16)P(z,te,ie,M,F);else if(Y&2&&te.class!==ie.class&&i(z,"class",null,ie.class,F),Y&4&&i(z,"style",te.style,ie.style,F),Y&8){const Ie=D.dynamicProps;for(let Oe=0;Oe<Ie.length;Oe++){const Ne=Ie[Oe],Ct=te[Ne],ut=ie[Ne];(ut!==Ct||Ne==="value")&&i(z,Ne,Ct,ut,F,M)}}Y&1&&k.children!==D.children&&h(z,D.children)}else!K&&G==null&&P(z,te,ie,M,F);((_e=ie.onVnodeUpdated)||he)&&gt(()=>{_e&&Bt(_e,M,D,k),he&&Pn(D,k,M,"updated")},q)},A=(k,D,M,q,F,W,K)=>{for(let z=0;z<D.length;z++){const Y=k[z],G=D[z],he=Y.el&&(Y.type===Ge||!fn(Y,G)||Y.shapeFlag&198)?f(Y.el):M;_(Y,G,he,null,q,F,W,K,!0)}},P=(k,D,M,q,F)=>{if(D!==M){if(D!==$e)for(const W in D)!ii(W)&&!(W in M)&&i(k,W,D[W],null,F,q);for(const W in M){if(ii(W))continue;const K=M[W],z=D[W];K!==z&&W!=="value"&&i(k,W,z,K,F,q)}"value"in M&&i(k,"value",D.value,M.value,F)}},N=(k,D,M,q,F,W,K,z,Y)=>{const G=D.el=k?k.el:a(""),he=D.anchor=k?k.anchor:a("");let{patchFlag:te,dynamicChildren:ie,slotScopeIds:_e}=D;_e&&(z=z?z.concat(_e):_e),k==null?(r(G,M,q),r(he,M,q),w(D.children||[],M,he,F,W,K,z,Y)):te>0&&te&64&&ie&&k.dynamicChildren&&k.dynamicChildren.length===ie.length?(A(k.dynamicChildren,ie,M,F,W,K,z),(D.key!=null||F&&D===F.subTree)&&ty(k,D,!0)):X(k,D,M,he,F,W,K,z,Y)},I=(k,D,M,q,F,W,K,z,Y)=>{D.slotScopeIds=z,k==null?D.shapeFlag&512?F.ctx.activate(D,M,q,K,Y):le(D,M,q,F,W,K,Y):ye(k,D,Y)},le=(k,D,M,q,F,W,K)=>{const z=k.component=ab(k,q,F);if(ea(k)&&(z.ctx.renderer=ae),cb(z,!1,K),z.asyncDep){if(F&&F.registerDep(z,Q,K),!k.el){const Y=z.subTree=de(it);S(null,Y,D,M),k.placeholder=Y.el}}else Q(z,k,D,M,F,W,K)},ye=(k,D,M)=>{const q=D.component=k.component;if(HI(k,D,M))if(q.asyncDep&&!q.asyncResolved){ne(q,D,M);return}else q.next=D,q.update();else D.el=k.el,q.vnode=D},Q=(k,D,M,q,F,W,K)=>{const z=()=>{if(k.isMounted){let{next:te,bu:ie,u:_e,parent:Ie,vnode:Oe}=k;{const ht=ny(k);if(ht){te&&(te.el=Oe.el,ne(k,te,K)),ht.asyncDep.then(()=>{k.isUnmounted||z()});return}}let Ne=te,Ct;cs(k,!1),te?(te.el=Oe.el,ne(k,te,K)):te=Oe,ie&&oi(ie),(Ct=te.props&&te.props.onVnodeBeforeUpdate)&&Bt(Ct,Ie,te,Oe),cs(k,!0);const ut=Zl(k),Ft=k.subTree;k.subTree=ut,_(Ft,ut,f(Ft.el),H(Ft),k,F,W),te.el=ut.el,Ne===null&&el(k,ut.el),_e&&gt(_e,F),(Ct=te.props&&te.props.onVnodeUpdated)&&gt(()=>Bt(Ct,Ie,te,Oe),F)}else{let te;const{el:ie,props:_e}=D,{bm:Ie,m:Oe,parent:Ne,root:Ct,type:ut}=k,Ft=tr(D);if(cs(k,!1),Ie&&oi(Ie),!Ft&&(te=_e&&_e.onVnodeBeforeMount)&&Bt(te,Ne,D),cs(k,!0),ie&&Fe){const ht=()=>{k.subTree=Zl(k),Fe(ie,k.subTree,k,F,null)};Ft&&ut.__asyncHydrate?ut.__asyncHydrate(ie,k,ht):ht()}else{Ct.ce&&Ct.ce._def.shadowRoot!==!1&&Ct.ce._injectChildStyle(ut);const ht=k.subTree=Zl(k);_(null,ht,M,q,k,F,W),D.el=ht.el}if(Oe&&gt(Oe,F),!Ft&&(te=_e&&_e.onVnodeMounted)){const ht=D;gt(()=>Bt(te,Ne,ht),F)}(D.shapeFlag&256||Ne&&tr(Ne.vnode)&&Ne.vnode.shapeFlag&256)&&k.a&&gt(k.a,F),k.isMounted=!0,D=M=q=null}};k.scope.on();const Y=k.effect=new o_(z);k.scope.off();const G=k.update=Y.run.bind(Y),he=k.job=Y.runIfDirty.bind(Y);he.i=k,he.id=k.uid,Y.scheduler=()=>qh(he),cs(k,!0),G()},ne=(k,D,M)=>{D.component=k;const q=k.vnode.props;k.vnode=D,k.next=null,qI(k,D.props,q,M),KI(k,D.children,M),or(),Qd(k),ar()},X=(k,D,M,q,F,W,K,z,Y=!1)=>{const G=k&&k.children,he=k?k.shapeFlag:0,te=D.children,{patchFlag:ie,shapeFlag:_e}=D;if(ie>0){if(ie&128){An(G,te,M,q,F,W,K,z,Y);return}else if(ie&256){Ae(G,te,M,q,F,W,K,z,Y);return}}_e&8?(he&16&&St(G,F,W),te!==G&&h(M,te)):he&16?_e&16?An(G,te,M,q,F,W,K,z,Y):St(G,F,W,!0):(he&8&&h(M,""),_e&16&&w(te,M,q,F,W,K,z,Y))},Ae=(k,D,M,q,F,W,K,z,Y)=>{k=k||ri,D=D||ri;const G=k.length,he=D.length,te=Math.min(G,he);let ie;for(ie=0;ie<te;ie++){const _e=D[ie]=Y?Cr(D[ie]):Yt(D[ie]);_(k[ie],_e,M,null,F,W,K,z,Y)}G>he?St(k,F,W,!0,!1,te):w(D,M,q,F,W,K,z,Y,te)},An=(k,D,M,q,F,W,K,z,Y)=>{let G=0;const he=D.length;let te=k.length-1,ie=he-1;for(;G<=te&&G<=ie;){const _e=k[G],Ie=D[G]=Y?Cr(D[G]):Yt(D[G]);if(fn(_e,Ie))_(_e,Ie,M,null,F,W,K,z,Y);else break;G++}for(;G<=te&&G<=ie;){const _e=k[te],Ie=D[ie]=Y?Cr(D[ie]):Yt(D[ie]);if(fn(_e,Ie))_(_e,Ie,M,null,F,W,K,z,Y);else break;te--,ie--}if(G>te){if(G<=ie){const _e=ie+1,Ie=_e<he?D[_e].el:q;for(;G<=ie;)_(null,D[G]=Y?Cr(D[G]):Yt(D[G]),M,Ie,F,W,K,z,Y),G++}}else if(G>ie)for(;G<=te;)Tt(k[G],F,W,!0),G++;else{const _e=G,Ie=G,Oe=new Map;for(G=Ie;G<=ie;G++){const nt=D[G]=Y?Cr(D[G]):Yt(D[G]);nt.key!=null&&Oe.set(nt.key,G)}let Ne,Ct=0;const ut=ie-Ie+1;let Ft=!1,ht=0;const Hn=new Array(ut);for(G=0;G<ut;G++)Hn[G]=0;for(G=_e;G<=te;G++){const nt=k[G];if(Ct>=ut){Tt(nt,F,W,!0);continue}let Kt;if(nt.key!=null)Kt=Oe.get(nt.key);else for(Ne=Ie;Ne<=ie;Ne++)if(Hn[Ne-Ie]===0&&fn(nt,D[Ne])){Kt=Ne;break}Kt===void 0?Tt(nt,F,W,!0):(Hn[Kt-Ie]=G+1,Kt>=ht?ht=Kt:Ft=!0,_(nt,D[Kt],M,null,F,W,K,z,Y),Ct++)}const Hs=Ft?JI(Hn):ri;for(Ne=Hs.length-1,G=ut-1;G>=0;G--){const nt=Ie+G,Kt=D[nt],rs=D[nt+1],ji=nt+1<he?rs.el||ry(rs):q;Hn[G]===0?_(null,Kt,M,ji,F,W,K,z,Y):Ft&&(Ne<0||G!==Hs[Ne]?zt(Kt,M,ji,2):Ne--)}}},zt=(k,D,M,q,F=null)=>{const{el:W,type:K,transition:z,children:Y,shapeFlag:G}=k;if(G&6){zt(k.component.subTree,D,M,q);return}if(G&128){k.suspense.move(D,M,q);return}if(G&64){K.move(k,D,M,ae);return}if(K===Ge){r(W,D,M);for(let te=0;te<Y.length;te++)zt(Y[te],D,M,q);r(k.anchor,D,M);return}if(K===Eo){y(k,D,M);return}if(q!==2&&G&1&&z)if(q===0)z.beforeEnter(W),r(W,D,M),gt(()=>z.enter(W),F);else{const{leave:te,delayLeave:ie,afterLeave:_e}=z,Ie=()=>{k.ctx.isUnmounted?s(W):r(W,D,M)},Oe=()=>{W._isLeaving&&W[zn](!0),te(W,()=>{Ie(),_e&&_e()})};ie?ie(W,Ie,Oe):Oe()}else r(W,D,M)},Tt=(k,D,M,q=!1,F=!1)=>{const{type:W,props:K,ref:z,children:Y,dynamicChildren:G,shapeFlag:he,patchFlag:te,dirs:ie,cacheIndex:_e}=k;if(te===-2&&(F=!1),z!=null&&(or(),ci(z,null,M,k,!0),ar()),_e!=null&&(D.renderCache[_e]=void 0),he&256){D.ctx.deactivate(k);return}const Ie=he&1&&ie,Oe=!tr(k);let Ne;if(Oe&&(Ne=K&&K.onVnodeBeforeUnmount)&&Bt(Ne,D,k),he&6)hn(k.component,M,q);else{if(he&128){k.suspense.unmount(M,q);return}Ie&&Pn(k,null,D,"beforeUnmount"),he&64?k.type.remove(k,D,M,ae,q):G&&!G.hasOnce&&(W!==Ge||te>0&&te&64)?St(G,D,M,!1,!0):(W===Ge&&te&384||!F&&he&16)&&St(Y,D,M),q&&$n(k)}(Oe&&(Ne=K&&K.onVnodeUnmounted)||Ie)&&gt(()=>{Ne&&Bt(Ne,D,k),Ie&&Pn(k,null,D,"unmounted")},M)},$n=k=>{const{type:D,el:M,anchor:q,transition:F}=k;if(D===Ge){un(M,q);return}if(D===Eo){O(k);return}const W=()=>{s(M),F&&!F.persisted&&F.afterLeave&&F.afterLeave()};if(k.shapeFlag&1&&F&&!F.persisted){const{leave:K,delayLeave:z}=F,Y=()=>K(M,W);z?z(k.el,W,Y):Y()}else W()},un=(k,D)=>{let M;for(;k!==D;)M=p(k),s(k),k=M;s(D)},hn=(k,D,M)=>{const{bum:q,scope:F,job:W,subTree:K,um:z,m:Y,a:G}=k;mc(Y),mc(G),q&&oi(q),F.stop(),W&&(W.flags|=8,Tt(K,k,D,M)),z&&gt(z,D),gt(()=>{k.isUnmounted=!0},D)},St=(k,D,M,q=!1,F=!1,W=0)=>{for(let K=W;K<k.length;K++)Tt(k[K],D,M,q,F)},H=k=>{if(k.shapeFlag&6)return H(k.component.subTree);if(k.shapeFlag&128)return k.suspense.next();const D=p(k.anchor||k.el),M=D&&D[aI];return M?p(M):D};let re=!1;const Z=(k,D,M)=>{let q;k==null?D._vnode&&(Tt(D._vnode,null,null,!0),q=D._vnode.component):_(D._vnode||null,k,D,null,null,null,M),D._vnode=k,re||(re=!0,Qd(q),uc(),re=!1)},ae={p:_,um:Tt,m:zt,r:$n,mt:le,mc:w,pc:X,pbc:A,n:H,o:t};let Te,Fe;return e&&([Te,Fe]=e(ae)),{render:Z,hydrate:Te,createApp:xI(Z,Te)}}function eu({type:t,props:e},n){return n==="svg"&&t==="foreignObject"||n==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:n}function cs({effect:t,job:e},n){n?(t.flags|=32,e.flags|=4):(t.flags&=-33,e.flags&=-5)}function ey(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function ty(t,e,n=!1){const r=t.children,s=e.children;if(ue(r)&&ue(s))for(let i=0;i<r.length;i++){const o=r[i];let a=s[i];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=s[i]=Cr(s[i]),a.el=o.el),!n&&a.patchFlag!==-2&&ty(o,a)),a.type===Ts&&(a.patchFlag!==-1?a.el=o.el:a.__elIndex=i+(t.type===Ge?1:0)),a.type===it&&!a.el&&(a.el=o.el)}}function JI(t){const e=t.slice(),n=[0];let r,s,i,o,a;const l=t.length;for(r=0;r<l;r++){const u=t[r];if(u!==0){if(s=n[n.length-1],t[s]<u){e[r]=s,n.push(r);continue}for(i=0,o=n.length-1;i<o;)a=i+o>>1,t[n[a]]<u?i=a+1:o=a;u<t[n[i]]&&(i>0&&(e[r]=n[i-1]),n[i]=r)}}for(i=n.length,o=n[i-1];i-- >0;)n[i]=o,o=e[o];return n}function ny(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:ny(e)}function mc(t){if(t)for(let e=0;e<t.length;e++)t[e].flags|=8}function ry(t){if(t.placeholder)return t.placeholder;const e=t.component;return e?ry(e.subTree):null}const gc=t=>t.__isSuspense;let Lu=0;const XI={name:"Suspense",__isSuspense:!0,process(t,e,n,r,s,i,o,a,l,u){if(t==null)ZI(e,n,r,s,i,o,a,l,u);else{if(i&&i.deps>0&&!t.suspense.isInFallback){e.suspense=t.suspense,e.suspense.vnode=e,e.el=t.el;return}eb(t,e,n,r,s,o,a,l,u)}},hydrate:tb,normalize:nb},Jh=XI;function xo(t,e){const n=t.props&&t.props[e];me(n)&&n()}function ZI(t,e,n,r,s,i,o,a,l){const{p:u,o:{createElement:h}}=l,f=h("div"),p=t.suspense=sy(t,s,r,e,f,n,i,o,a,l);u(null,p.pendingBranch=t.ssContent,f,null,r,p,i,o),p.deps>0?(xo(t,"onPending"),xo(t,"onFallback"),u(null,t.ssFallback,e,n,r,null,i,o),li(p,t.ssFallback)):p.resolve(!1,!0)}function eb(t,e,n,r,s,i,o,a,{p:l,um:u,o:{createElement:h}}){const f=e.suspense=t.suspense;f.vnode=e,e.el=t.el;const p=e.ssContent,g=e.ssFallback,{activeBranch:v,pendingBranch:_,isInFallback:C,isHydrating:S}=f;if(_)f.pendingBranch=p,fn(_,p)?(l(_,p,f.hiddenContainer,null,s,f,i,o,a),f.deps<=0?f.resolve():C&&(S||(l(v,g,n,r,s,null,i,o,a),li(f,g)))):(f.pendingId=Lu++,S?(f.isHydrating=!1,f.activeBranch=_):u(_,s,f),f.deps=0,f.effects.length=0,f.hiddenContainer=h("div"),C?(l(null,p,f.hiddenContainer,null,s,f,i,o,a),f.deps<=0?f.resolve():(l(v,g,n,r,s,null,i,o,a),li(f,g))):v&&fn(v,p)?(l(v,p,n,r,s,f,i,o,a),f.resolve(!0)):(l(null,p,f.hiddenContainer,null,s,f,i,o,a),f.deps<=0&&f.resolve()));else if(v&&fn(v,p))l(v,p,n,r,s,f,i,o,a),li(f,p);else if(xo(e,"onPending"),f.pendingBranch=p,p.shapeFlag&512?f.pendingId=p.component.suspenseId:f.pendingId=Lu++,l(null,p,f.hiddenContainer,null,s,f,i,o,a),f.deps<=0)f.resolve();else{const{timeout:R,pendingId:y}=f;R>0?setTimeout(()=>{f.pendingId===y&&f.fallback(g)},R):R===0&&f.fallback(g)}}function sy(t,e,n,r,s,i,o,a,l,u,h=!1){const{p:f,m:p,um:g,n:v,o:{parentNode:_,remove:C}}=u;let S;const R=rb(t);R&&e&&e.pendingBranch&&(S=e.pendingId,e.deps++);const y=t.props?t_(t.props.timeout):void 0,O=i,V={vnode:t,parent:e,parentComponent:n,namespace:o,container:r,hiddenContainer:s,deps:0,pendingId:Lu++,timeout:typeof y=="number"?y:-1,activeBranch:null,pendingBranch:null,isInFallback:!h,isHydrating:h,isUnmounted:!1,effects:[],resolve(L=!1,b=!1){const{vnode:w,activeBranch:E,pendingBranch:A,pendingId:P,effects:N,parentComponent:I,container:le,isInFallback:ye}=V;let Q=!1;V.isHydrating?V.isHydrating=!1:L||(Q=E&&A.transition&&A.transition.mode==="out-in",Q&&(E.transition.afterLeave=()=>{P===V.pendingId&&(p(A,le,i===O?v(E):i,0),Nu(N),ye&&w.ssFallback&&(w.ssFallback.el=null))}),E&&(_(E.el)===le&&(i=v(E)),g(E,I,V,!0),!Q&&ye&&w.ssFallback&&gt(()=>w.ssFallback.el=null,V)),Q||p(A,le,i,0)),li(V,A),V.pendingBranch=null,V.isInFallback=!1;let ne=V.parent,X=!1;for(;ne;){if(ne.pendingBranch){ne.effects.push(...N),X=!0;break}ne=ne.parent}!X&&!Q&&Nu(N),V.effects=[],R&&e&&e.pendingBranch&&S===e.pendingId&&(e.deps--,e.deps===0&&!b&&e.resolve()),xo(w,"onResolve")},fallback(L){if(!V.pendingBranch)return;const{vnode:b,activeBranch:w,parentComponent:E,container:A,namespace:P}=V;xo(b,"onFallback");const N=v(w),I=()=>{V.isInFallback&&(f(null,L,A,N,E,null,P,a,l),li(V,L))},le=L.transition&&L.transition.mode==="out-in";le&&(w.transition.afterLeave=I),V.isInFallback=!0,g(w,E,null,!0),le||I()},move(L,b,w){V.activeBranch&&p(V.activeBranch,L,b,w),V.container=L},next(){return V.activeBranch&&v(V.activeBranch)},registerDep(L,b,w){const E=!!V.pendingBranch;E&&V.deps++;const A=L.vnode.el;L.asyncDep.catch(P=>{Di(P,L,0)}).then(P=>{if(L.isUnmounted||V.isUnmounted||V.pendingId!==L.suspenseId)return;L.asyncResolved=!0;const{vnode:N}=L;Fu(L,P),A&&(N.el=A);const I=!A&&L.subTree.el;b(L,N,_(A||L.subTree.el),A?null:v(L.subTree),V,o,w),I&&(N.placeholder=null,C(I)),el(L,N.el),E&&--V.deps===0&&V.resolve()})},unmount(L,b){V.isUnmounted=!0,V.activeBranch&&g(V.activeBranch,n,L,b),V.pendingBranch&&g(V.pendingBranch,n,L,b)}};return V}function tb(t,e,n,r,s,i,o,a,l){const u=e.suspense=sy(e,r,n,t.parentNode,document.createElement("div"),null,s,i,o,a,!0),h=l(t,u.pendingBranch=e.ssContent,n,u,i,o);return u.deps===0&&u.resolve(!1,!0),h}function nb(t){const{shapeFlag:e,children:n}=t,r=e&32;t.ssContent=ap(r?n.default:n),t.ssFallback=r?ap(n.fallback):de(it)}function ap(t){let e;if(me(t)){const n=yi&&t._c;n&&(t._d=!1,fe()),t=t(),n&&(t._d=!0,e=qt,oy())}return ue(t)&&(t=FI(t)),t=Yt(t),e&&!t.dynamicChildren&&(t.dynamicChildren=e.filter(n=>n!==t)),t}function iy(t,e){e&&e.pendingBranch?ue(t)?e.effects.push(...t):e.effects.push(t):Nu(t)}function li(t,e){t.activeBranch=e;const{vnode:n,parentComponent:r}=t;let s=e.el;for(;!s&&e.component;)e=e.component.subTree,s=e.el;n.el=s,r&&r.subTree===n&&(r.vnode.el=s,el(r,s))}function rb(t){const e=t.props&&t.props.suspensible;return e!=null&&e!==!1}const Ge=Symbol.for("v-fgt"),Ts=Symbol.for("v-txt"),it=Symbol.for("v-cmt"),Eo=Symbol.for("v-stc"),wo=[];let qt=null;function fe(t=!1){wo.push(qt=t?null:[])}function oy(){wo.pop(),qt=wo[wo.length-1]||null}let yi=1;function _c(t,e=!1){yi+=t,t<0&&qt&&e&&(qt.hasOnce=!0)}function ay(t){return t.dynamicChildren=yi>0?qt||ri:null,oy(),yi>0&&qt&&qt.push(t),t}function be(t,e,n,r,s,i){return ay(B(t,e,n,r,s,i,!0))}function Ht(t,e,n,r,s){return ay(de(t,e,n,r,s,!0))}function Rs(t){return t?t.__v_isVNode===!0:!1}function fn(t,e){return t.type===e.type&&t.key===e.key}const cy=({key:t})=>t??null,Ka=({ref:t,ref_key:e,ref_for:n})=>(typeof t=="number"&&(t=""+t),t!=null?ze(t)||ct(t)||me(t)?{i:At,r:t,k:e,f:!!n}:t:null);function B(t,e=null,n=null,r=0,s=null,i=t===Ge?0:1,o=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&cy(e),ref:e&&Ka(e),scopeId:A_,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:r,dynamicProps:s,dynamicChildren:null,appContext:null,ctx:At};return a?(Xh(l,n),i&128&&t.normalize(l)):n&&(l.shapeFlag|=ze(n)?8:16),yi>0&&!o&&qt&&(l.patchFlag>0||i&6)&&l.patchFlag!==32&&qt.push(l),l}const de=sb;function sb(t,e=null,n=null,r=0,s=null,i=!1){if((!t||t===F_)&&(t=it),Rs(t)){const a=an(t,e,!0);return n&&Xh(a,n),yi>0&&!i&&qt&&(a.shapeFlag&6?qt[qt.indexOf(t)]=a:qt.push(a)),a.patchFlag=-2,a}if(fb(t)&&(t=t.__vccOpts),e){e=ly(e);let{class:a,style:l}=e;a&&!ze(a)&&(e.class=Wt(a)),Le(l)&&(Yc(l)&&!ue(l)&&(l=Et({},l)),e.style=Kc(l))}const o=ze(t)?1:gc(t)?128:S_(t)?64:Le(t)?4:me(t)?2:0;return B(t,e,n,r,s,o,i,!0)}function ly(t){return t?Yc(t)||z_(t)?Et({},t):t:null}function an(t,e,n=!1,r=!1){const{props:s,ref:i,patchFlag:o,children:a,transition:l}=t,u=e?hy(s||{},e):s,h={__v_isVNode:!0,__v_skip:!0,type:t.type,props:u,key:u&&cy(u),ref:e&&e.ref?n&&i?ue(i)?i.concat(Ka(e)):[i,Ka(e)]:Ka(e):i,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:a,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==Ge?o===-1?16:o|16:o,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:l,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&an(t.ssContent),ssFallback:t.ssFallback&&an(t.ssFallback),placeholder:t.placeholder,el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return l&&r&&_i(h,l.clone(h)),h}function Je(t=" ",e=0){return de(Ts,null,t,e)}function uy(t,e){const n=de(Eo,null,t);return n.staticCount=e,n}function Gr(t="",e=!1){return e?(fe(),Ht(it,null,t)):de(it,null,t)}function Yt(t){return t==null||typeof t=="boolean"?de(it):ue(t)?de(Ge,null,t.slice()):Rs(t)?Cr(t):de(Ts,null,String(t))}function Cr(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:an(t)}function Xh(t,e){let n=0;const{shapeFlag:r}=t;if(e==null)e=null;else if(ue(e))n=16;else if(typeof e=="object")if(r&65){const s=e.default;s&&(s._c&&(s._d=!1),Xh(t,s()),s._c&&(s._d=!0));return}else{n=32;const s=e._;!s&&!z_(e)?e._ctx=At:s===3&&At&&(At.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else me(e)?(e={default:e,_ctx:At},n=32):(e=String(e),r&64?(n=16,e=[Je(e)]):n=8);t.children=e,t.shapeFlag|=n}function hy(...t){const e={};for(let n=0;n<t.length;n++){const r=t[n];for(const s in r)if(s==="class")e.class!==r.class&&(e.class=Wt([e.class,r.class]));else if(s==="style")e.style=Kc([e.style,r.style]);else if(Jo(s)){const i=e[s],o=r[s];o&&i!==o&&!(ue(i)&&i.includes(o))&&(e[s]=i?[].concat(i,o):o)}else s!==""&&(e[s]=r[s])}return e}function Bt(t,e,n,r=null){En(t,e,7,[n,r])}const ib=j_();let ob=0;function ab(t,e,n){const r=t.type,s=(e?e.appContext:t.appContext)||ib,i={uid:ob++,vnode:t,type:r,parent:e,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new i_(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(s.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Q_(r,s),emitsOptions:q_(r,s),emit:null,emitted:null,propsDefaults:$e,inheritAttrs:r.inheritAttrs,ctx:$e,data:$e,props:$e,attrs:$e,slots:$e,refs:$e,setupState:$e,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=e?e.root:i,i.emit=LI.bind(null,i),t.ce&&t.ce(i),i}let bt=null;const Ms=()=>bt||At;let yc,Uu;{const t=zc(),e=(n,r)=>{let s;return(s=t[n])||(s=t[n]=[]),s.push(r),i=>{s.length>1?s.forEach(o=>o(i)):s[0](i)}};yc=e("__VUE_INSTANCE_SETTERS__",n=>bt=n),Uu=e("__VUE_SSR_SETTERS__",n=>vi=n)}const na=t=>{const e=bt;return yc(t),t.scope.on(),()=>{t.scope.off(),yc(e)}},cp=()=>{bt&&bt.scope.off(),yc(null)};function fy(t){return t.vnode.shapeFlag&4}let vi=!1;function cb(t,e=!1,n=!1){e&&Uu(e);const{props:r,children:s}=t.vnode,i=fy(t);jI(t,r,i,e),zI(t,s,n||e);const o=i?lb(t,e):void 0;return e&&Uu(!1),o}function lb(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,CI);const{setup:r}=n;if(r){or();const s=t.setupContext=r.length>1?hb(t):null,i=na(t),o=Zo(r,t,0,[t.props,s]),a=xh(o);if(ar(),i(),(a||t.sp)&&!tr(t)&&Gh(t),a){if(o.then(cp,cp),e)return o.then(l=>{Fu(t,l)}).catch(l=>{Di(l,t,0)});t.asyncDep=o}else Fu(t,o)}else dy(t)}function Fu(t,e,n){me(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:Le(e)&&(t.setupState=w_(e)),dy(t)}function dy(t,e,n){const r=t.type;t.render||(t.render=r.render||On);{const s=na(t);or();try{PI(t)}finally{ar(),s()}}}const ub={get(t,e){return Ot(t,"get",""),t[e]}};function hb(t){const e=n=>{t.exposed=n||{}};return{attrs:new Proxy(t.attrs,ub),slots:t.slots,emit:t.emit,expose:e}}function tl(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(w_(jT(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in vo)return vo[n](t)},has(e,n){return n in e||n in vo}})):t.proxy}function Bu(t,e=!0){return me(t)?t.displayName||t.name:t.name||e&&t.__name}function fb(t){return me(t)&&"__vccOpts"in t}const Ue=(t,e)=>XT(t,e,vi);function Xe(t,e,n){try{_c(-1);const r=arguments.length;return r===2?Le(e)&&!ue(e)?Rs(e)?de(t,null,[e]):de(t,e):de(t,null,e):(r>3?n=Array.prototype.slice.call(arguments,2):r===3&&Rs(n)&&(n=[n]),de(t,e,n))}finally{_c(1)}}const db="3.5.26";let $u;const lp=typeof window<"u"&&window.trustedTypes;if(lp)try{$u=lp.createPolicy("vue",{createHTML:t=>t})}catch{}const py=$u?t=>$u.createHTML(t):t=>t,pb="http://www.w3.org/2000/svg",mb="http://www.w3.org/1998/Math/MathML",Gn=typeof document<"u"?document:null,up=Gn&&Gn.createElement("template"),gb={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,r)=>{const s=e==="svg"?Gn.createElementNS(pb,t):e==="mathml"?Gn.createElementNS(mb,t):n?Gn.createElement(t,{is:n}):Gn.createElement(t);return t==="select"&&r&&r.multiple!=null&&s.setAttribute("multiple",r.multiple),s},createText:t=>Gn.createTextNode(t),createComment:t=>Gn.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>Gn.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,n,r,s,i){const o=n?n.previousSibling:e.lastChild;if(s&&(s===i||s.nextSibling))for(;e.insertBefore(s.cloneNode(!0),n),!(s===i||!(s=s.nextSibling)););else{up.innerHTML=py(r==="svg"?`<svg>${t}</svg>`:r==="mathml"?`<math>${t}</math>`:t);const a=up.content;if(r==="svg"||r==="mathml"){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}e.insertBefore(a,n)}return[o?o.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}},Tr="transition",io="animation",Mo=Symbol("_vtc"),my={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},_b=Et({},C_,my),yb=t=>(t.displayName="Transition",t.props=_b,t),ra=yb((t,{slots:e})=>Xe(uI,vb(t),e)),ls=(t,e=[])=>{ue(t)?t.forEach(n=>n(...e)):t&&t(...e)},hp=t=>t?ue(t)?t.some(e=>e.length>1):t.length>1:!1;function vb(t){const e={};for(const N in t)N in my||(e[N]=t[N]);if(t.css===!1)return e;const{name:n="v",type:r,duration:s,enterFromClass:i=`${n}-enter-from`,enterActiveClass:o=`${n}-enter-active`,enterToClass:a=`${n}-enter-to`,appearFromClass:l=i,appearActiveClass:u=o,appearToClass:h=a,leaveFromClass:f=`${n}-leave-from`,leaveActiveClass:p=`${n}-leave-active`,leaveToClass:g=`${n}-leave-to`}=t,v=Eb(s),_=v&&v[0],C=v&&v[1],{onBeforeEnter:S,onEnter:R,onEnterCancelled:y,onLeave:O,onLeaveCancelled:V,onBeforeAppear:L=S,onAppear:b=R,onAppearCancelled:w=y}=e,E=(N,I,le,ye)=>{N._enterCancelled=ye,us(N,I?h:a),us(N,I?u:o),le&&le()},A=(N,I)=>{N._isLeaving=!1,us(N,f),us(N,g),us(N,p),I&&I()},P=N=>(I,le)=>{const ye=N?b:R,Q=()=>E(I,N,le);ls(ye,[I,Q]),fp(()=>{us(I,N?l:i),qn(I,N?h:a),hp(ye)||dp(I,r,_,Q)})};return Et(e,{onBeforeEnter(N){ls(S,[N]),qn(N,i),qn(N,o)},onBeforeAppear(N){ls(L,[N]),qn(N,l),qn(N,u)},onEnter:P(!1),onAppear:P(!0),onLeave(N,I){N._isLeaving=!0;const le=()=>A(N,I);qn(N,f),N._enterCancelled?(qn(N,p),gp(N)):(gp(N),qn(N,p)),fp(()=>{N._isLeaving&&(us(N,f),qn(N,g),hp(O)||dp(N,r,C,le))}),ls(O,[N,le])},onEnterCancelled(N){E(N,!1,void 0,!0),ls(y,[N])},onAppearCancelled(N){E(N,!0,void 0,!0),ls(w,[N])},onLeaveCancelled(N){A(N),ls(V,[N])}})}function Eb(t){if(t==null)return null;if(Le(t))return[tu(t.enter),tu(t.leave)];{const e=tu(t);return[e,e]}}function tu(t){return t_(t)}function qn(t,e){e.split(/\s+/).forEach(n=>n&&t.classList.add(n)),(t[Mo]||(t[Mo]=new Set)).add(e)}function us(t,e){e.split(/\s+/).forEach(r=>r&&t.classList.remove(r));const n=t[Mo];n&&(n.delete(e),n.size||(t[Mo]=void 0))}function fp(t){requestAnimationFrame(()=>{requestAnimationFrame(t)})}let wb=0;function dp(t,e,n,r){const s=t._endId=++wb,i=()=>{s===t._endId&&r()};if(n!=null)return setTimeout(i,n);const{type:o,timeout:a,propCount:l}=Tb(t,e);if(!o)return r();const u=o+"end";let h=0;const f=()=>{t.removeEventListener(u,p),i()},p=g=>{g.target===t&&++h>=l&&f()};setTimeout(()=>{h<l&&f()},a+1),t.addEventListener(u,p)}function Tb(t,e){const n=window.getComputedStyle(t),r=v=>(n[v]||"").split(", "),s=r(`${Tr}Delay`),i=r(`${Tr}Duration`),o=pp(s,i),a=r(`${io}Delay`),l=r(`${io}Duration`),u=pp(a,l);let h=null,f=0,p=0;e===Tr?o>0&&(h=Tr,f=o,p=i.length):e===io?u>0&&(h=io,f=u,p=l.length):(f=Math.max(o,u),h=f>0?o>u?Tr:io:null,p=h?h===Tr?i.length:l.length:0);const g=h===Tr&&/\b(?:transform|all)(?:,|$)/.test(r(`${Tr}Property`).toString());return{type:h,timeout:f,propCount:p,hasTransform:g}}function pp(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max(...e.map((n,r)=>mp(n)+mp(t[r])))}function mp(t){return t==="auto"?0:Number(t.slice(0,-1).replace(",","."))*1e3}function gp(t){return(t?t.ownerDocument:document).body.offsetHeight}function Ib(t,e,n){const r=t[Mo];r&&(e=(e?[e,...r]:[...r]).join(" ")),e==null?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}const _p=Symbol("_vod"),bb=Symbol("_vsh"),Ab=Symbol(""),Rb=/(?:^|;)\s*display\s*:/;function Sb(t,e,n){const r=t.style,s=ze(n);let i=!1;if(n&&!s){if(e)if(ze(e))for(const o of e.split(";")){const a=o.slice(0,o.indexOf(":")).trim();n[a]==null&&Qa(r,a,"")}else for(const o in e)n[o]==null&&Qa(r,o,"");for(const o in n)o==="display"&&(i=!0),Qa(r,o,n[o])}else if(s){if(e!==n){const o=r[Ab];o&&(n+=";"+o),r.cssText=n,i=Rb.test(n)}}else e&&t.removeAttribute("style");_p in t&&(t[_p]=i?r.display:"",t[bb]&&(r.display="none"))}const yp=/\s*!important$/;function Qa(t,e,n){if(ue(n))n.forEach(r=>Qa(t,e,r));else if(n==null&&(n=""),e.startsWith("--"))t.setProperty(e,n);else{const r=Cb(t,e);yp.test(n)?t.setProperty(xs(r),n.replace(yp,""),"important"):t[r]=n}}const vp=["Webkit","Moz","ms"],nu={};function Cb(t,e){const n=nu[e];if(n)return n;let r=cn(e);if(r!=="filter"&&r in t)return nu[e]=r;r=Wc(r);for(let s=0;s<vp.length;s++){const i=vp[s]+r;if(i in t)return nu[e]=i}return e}const Ep="http://www.w3.org/1999/xlink";function wp(t,e,n,r,s,i=ET(e)){r&&e.startsWith("xlink:")?n==null?t.removeAttributeNS(Ep,e.slice(6,e.length)):t.setAttributeNS(Ep,e,n):n==null||i&&!n_(n)?t.removeAttribute(e):t.setAttribute(e,i?"":yn(n)?String(n):n)}function Tp(t,e,n,r,s){if(e==="innerHTML"||e==="textContent"){n!=null&&(t[e]=e==="innerHTML"?py(n):n);return}const i=t.tagName;if(e==="value"&&i!=="PROGRESS"&&!i.includes("-")){const a=i==="OPTION"?t.getAttribute("value")||"":t.value,l=n==null?t.type==="checkbox"?"on":"":String(n);(a!==l||!("_value"in t))&&(t.value=l),n==null&&t.removeAttribute(e),t._value=n;return}let o=!1;if(n===""||n==null){const a=typeof t[e];a==="boolean"?n=n_(n):n==null&&a==="string"?(n="",o=!0):a==="number"&&(n=0,o=!0)}try{t[e]=n}catch{}o&&t.removeAttribute(s||e)}function kr(t,e,n,r){t.addEventListener(e,n,r)}function Pb(t,e,n,r){t.removeEventListener(e,n,r)}const Ip=Symbol("_vei");function kb(t,e,n,r,s=null){const i=t[Ip]||(t[Ip]={}),o=i[e];if(r&&o)o.value=r;else{const[a,l]=Nb(e);if(r){const u=i[e]=Vb(r,s);kr(t,a,u,l)}else o&&(Pb(t,a,o,l),i[e]=void 0)}}const bp=/(?:Once|Passive|Capture)$/;function Nb(t){let e;if(bp.test(t)){e={};let r;for(;r=t.match(bp);)t=t.slice(0,t.length-r[0].length),e[r[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):xs(t.slice(2)),e]}let ru=0;const Ob=Promise.resolve(),Db=()=>ru||(Ob.then(()=>ru=0),ru=Date.now());function Vb(t,e){const n=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=n.attached)return;En(xb(r,n.value),e,5,[r])};return n.value=t,n.attached=Db(),n}function xb(t,e){if(ue(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(r=>s=>!s._stopped&&r&&r(s))}else return e}const Ap=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,Mb=(t,e,n,r,s,i)=>{const o=s==="svg";e==="class"?Ib(t,r,o):e==="style"?Sb(t,n,r):Jo(e)?Dh(e)||kb(t,e,n,r,i):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):Lb(t,e,r,o))?(Tp(t,e,r),!t.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&wp(t,e,r,o,i,e!=="value")):t._isVueCE&&(/[A-Z]/.test(e)||!ze(r))?Tp(t,cn(e),r,i,e):(e==="true-value"?t._trueValue=r:e==="false-value"&&(t._falseValue=r),wp(t,e,r,o))};function Lb(t,e,n,r){if(r)return!!(e==="innerHTML"||e==="textContent"||e in t&&Ap(e)&&me(n));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="autocorrect"||e==="sandbox"&&t.tagName==="IFRAME"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const s=t.tagName;if(s==="IMG"||s==="VIDEO"||s==="CANVAS"||s==="SOURCE")return!1}return Ap(e)&&ze(n)?!1:e in t}const Ei=t=>{const e=t.props["onUpdate:modelValue"]||!1;return ue(e)?n=>oi(e,n):e};function Ub(t){t.target.composing=!0}function Rp(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const nr=Symbol("_assign");function Sp(t,e,n){return e&&(t=t.trim()),n&&(t=Gc(t)),t}const Ua={created(t,{modifiers:{lazy:e,trim:n,number:r}},s){t[nr]=Ei(s);const i=r||s.props&&s.props.type==="number";kr(t,e?"change":"input",o=>{o.target.composing||t[nr](Sp(t.value,n,i))}),(n||i)&&kr(t,"change",()=>{t.value=Sp(t.value,n,i)}),e||(kr(t,"compositionstart",Ub),kr(t,"compositionend",Rp),kr(t,"change",Rp))},mounted(t,{value:e}){t.value=e??""},beforeUpdate(t,{value:e,oldValue:n,modifiers:{lazy:r,trim:s,number:i}},o){if(t[nr]=Ei(o),t.composing)return;const a=(i||t.type==="number")&&!/^0\d/.test(t.value)?Gc(t.value):t.value,l=e??"";a!==l&&(document.activeElement===t&&t.type!=="range"&&(r&&e===n||s&&t.value.trim()===l)||(t.value=l))}},fM={deep:!0,created(t,e,n){t[nr]=Ei(n),kr(t,"change",()=>{const r=t._modelValue,s=Lo(t),i=t.checked,o=t[nr];if(ue(r)){const a=Mh(r,s),l=a!==-1;if(i&&!l)o(r.concat(s));else if(!i&&l){const u=[...r];u.splice(a,1),o(u)}}else if(Ni(r)){const a=new Set(r);i?a.add(s):a.delete(s),o(a)}else o(gy(t,i))})},mounted:Cp,beforeUpdate(t,e,n){t[nr]=Ei(n),Cp(t,e,n)}};function Cp(t,{value:e,oldValue:n},r){t._modelValue=e;let s;if(ue(e))s=Mh(e,r.props.value)>-1;else if(Ni(e))s=e.has(r.props.value);else{if(e===n)return;s=Xo(e,gy(t,!0))}t.checked!==s&&(t.checked=s)}const dM={deep:!0,created(t,{value:e,modifiers:{number:n}},r){const s=Ni(e);kr(t,"change",()=>{const i=Array.prototype.filter.call(t.options,o=>o.selected).map(o=>n?Gc(Lo(o)):Lo(o));t[nr](t.multiple?s?new Set(i):i:i[0]),t._assigning=!0,As(()=>{t._assigning=!1})}),t[nr]=Ei(r)},mounted(t,{value:e}){Pp(t,e)},beforeUpdate(t,e,n){t[nr]=Ei(n)},updated(t,{value:e}){t._assigning||Pp(t,e)}};function Pp(t,e){const n=t.multiple,r=ue(e);if(!(n&&!r&&!Ni(e))){for(let s=0,i=t.options.length;s<i;s++){const o=t.options[s],a=Lo(o);if(n)if(r){const l=typeof a;l==="string"||l==="number"?o.selected=e.some(u=>String(u)===String(a)):o.selected=Mh(e,a)>-1}else o.selected=e.has(a);else if(Xo(Lo(o),e)){t.selectedIndex!==s&&(t.selectedIndex=s);return}}!n&&t.selectedIndex!==-1&&(t.selectedIndex=-1)}}function Lo(t){return"_value"in t?t._value:t.value}function gy(t,e){const n=e?"_trueValue":"_falseValue";return n in t?t[n]:e}const Fb=["ctrl","shift","alt","meta"],Bb={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>Fb.some(n=>t[`${n}Key`]&&!e.includes(n))},nl=(t,e)=>{const n=t._withMods||(t._withMods={}),r=e.join(".");return n[r]||(n[r]=((s,...i)=>{for(let o=0;o<e.length;o++){const a=Bb[e[o]];if(a&&a(s,e))return}return t(s,...i)}))},_y=Et({patchProp:Mb},gb);let To,kp=!1;function $b(){return To||(To=QI(_y))}function Hb(){return To=kp?To:YI(_y),kp=!0,To}const jb=((...t)=>{const e=$b().createApp(...t),{mount:n}=e;return e.mount=r=>{const s=vy(r);if(!s)return;const i=e._component;!me(i)&&!i.render&&!i.template&&(i.template=s.innerHTML),s.nodeType===1&&(s.textContent="");const o=n(s,!1,yy(s));return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),o},e}),qb=((...t)=>{const e=Hb().createApp(...t),{mount:n}=e;return e.mount=r=>{const s=vy(r);if(s)return n(s,!0,yy(s))},e});function yy(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function vy(t){return ze(t)?document.querySelector(t):t}const Wb=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,Gb=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,zb=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/;function Kb(t,e){if(t==="__proto__"||t==="constructor"&&e&&typeof e=="object"&&"prototype"in e){Qb(t);return}return e}function Qb(t){console.warn(`[destr] Dropping "${t}" key to prevent prototype pollution.`)}function vc(t,e={}){if(typeof t!="string")return t;if(t[0]==='"'&&t[t.length-1]==='"'&&t.indexOf("\\")===-1)return t.slice(1,-1);const n=t.trim();if(n.length<=9)switch(n.toLowerCase()){case"true":return!0;case"false":return!1;case"undefined":return;case"null":return null;case"nan":return Number.NaN;case"infinity":return Number.POSITIVE_INFINITY;case"-infinity":return Number.NEGATIVE_INFINITY}if(!zb.test(t)){if(e.strict)throw new SyntaxError("[destr] Invalid JSON");return t}try{if(Wb.test(t)||Gb.test(t)){if(e.strict)throw new Error("[destr] Possible prototype pollution");return JSON.parse(t,Kb)}return JSON.parse(t)}catch(r){if(e.strict)throw r;return t}}const Yb=/#/g,Jb=/&/g,Xb=/\//g,Zb=/=/g,Zh=/\+/g,eA=/%5e/gi,tA=/%60/gi,nA=/%7c/gi,rA=/%20/gi;function sA(t){return encodeURI(""+t).replace(nA,"|")}function Hu(t){return sA(typeof t=="string"?t:JSON.stringify(t)).replace(Zh,"%2B").replace(rA,"+").replace(Yb,"%23").replace(Jb,"%26").replace(tA,"`").replace(eA,"^").replace(Xb,"%2F")}function su(t){return Hu(t).replace(Zb,"%3D")}function Ec(t=""){try{return decodeURIComponent(""+t)}catch{return""+t}}function iA(t){return Ec(t.replace(Zh," "))}function oA(t){return Ec(t.replace(Zh," "))}function Ey(t=""){const e=Object.create(null);t[0]==="?"&&(t=t.slice(1));for(const n of t.split("&")){const r=n.match(/([^=]+)=?(.*)/)||[];if(r.length<2)continue;const s=iA(r[1]);if(s==="__proto__"||s==="constructor")continue;const i=oA(r[2]||"");e[s]===void 0?e[s]=i:Array.isArray(e[s])?e[s].push(i):e[s]=[e[s],i]}return e}function aA(t,e){return(typeof e=="number"||typeof e=="boolean")&&(e=String(e)),e?Array.isArray(e)?e.map(n=>`${su(t)}=${Hu(n)}`).join("&"):`${su(t)}=${Hu(e)}`:su(t)}function cA(t){return Object.keys(t).filter(e=>t[e]!==void 0).map(e=>aA(e,t[e])).filter(Boolean).join("&")}const lA=/^[\s\w\0+.-]{2,}:([/\\]{1,2})/,uA=/^[\s\w\0+.-]{2,}:([/\\]{2})?/,hA=/^([/\\]\s*){2,}[^/\\]/,fA=/^[\s\0]*(blob|data|javascript|vbscript):$/i,dA=/\/$|\/\?|\/#/,pA=/^\.?\//;function Ls(t,e={}){return typeof e=="boolean"&&(e={acceptRelative:e}),e.strict?lA.test(t):uA.test(t)||(e.acceptRelative?hA.test(t):!1)}function mA(t){return!!t&&fA.test(t)}function ju(t="",e){return e?dA.test(t):t.endsWith("/")}function wc(t="",e){if(!e)return(ju(t)?t.slice(0,-1):t)||"/";if(!ju(t,!0))return t||"/";let n=t,r="";const s=t.indexOf("#");s!==-1&&(n=t.slice(0,s),r=t.slice(s));const[i,...o]=n.split("?");return((i.endsWith("/")?i.slice(0,-1):i)||"/")+(o.length>0?`?${o.join("?")}`:"")+r}function gA(t="",e){if(!e)return t.endsWith("/")?t:t+"/";if(ju(t,!0))return t||"/";let n=t,r="";const s=t.indexOf("#");if(s!==-1&&(n=t.slice(0,s),r=t.slice(s),!n))return r;const[i,...o]=n.split("?");return i+"/"+(o.length>0?`?${o.join("?")}`:"")+r}function _A(t,e){if(Ty(e)||Ls(t))return t;const n=wc(e);return t.startsWith(n)?t:ef(n,t)}function Np(t,e){if(Ty(e))return t;const n=wc(e);if(!t.startsWith(n))return t;const r=t.slice(n.length);return r[0]==="/"?r:"/"+r}function wy(t,e){const n=Ay(t),r={...Ey(n.search),...e};return n.search=cA(r),EA(n)}function Ty(t){return!t||t==="/"}function yA(t){return t&&t!=="/"}function ef(t,...e){let n=t||"";for(const r of e.filter(s=>yA(s)))if(n){const s=r.replace(pA,"");n=gA(n)+s}else n=r;return n}function Iy(...t){const e=/\/(?!\/)/,n=t.filter(Boolean),r=[];let s=0;for(const o of n)if(!(!o||o==="/")){for(const[a,l]of o.split(e).entries())if(!(!l||l===".")){if(l===".."){if(r.length===1&&Ls(r[0]))continue;r.pop(),s--;continue}if(a===1&&r[r.length-1]?.endsWith(":/")){r[r.length-1]+="/"+l;continue}r.push(l),s++}}let i=r.join("/");return s>=0?n[0]?.startsWith("/")&&!i.startsWith("/")?i="/"+i:n[0]?.startsWith("./")&&!i.startsWith("./")&&(i="./"+i):i="../".repeat(-1*s)+i,n[n.length-1]?.endsWith("/")&&!i.endsWith("/")&&(i+="/"),i}function vA(t,e){return Ec(wc(t))===Ec(wc(e))}const by=Symbol.for("ufo:protocolRelative");function Ay(t="",e){const n=t.match(/^[\s\0]*(blob:|data:|javascript:|vbscript:)(.*)/i);if(n){const[,f,p=""]=n;return{protocol:f.toLowerCase(),pathname:p,href:f+p,auth:"",host:"",search:"",hash:""}}if(!Ls(t,{acceptRelative:!0}))return Op(t);const[,r="",s,i=""]=t.replace(/\\/g,"/").match(/^[\s\0]*([\w+.-]{2,}:)?\/\/([^/@]+@)?(.*)/)||[];let[,o="",a=""]=i.match(/([^#/?]*)(.*)?/)||[];r==="file:"&&(a=a.replace(/\/(?=[A-Za-z]:)/,""));const{pathname:l,search:u,hash:h}=Op(a);return{protocol:r.toLowerCase(),auth:s?s.slice(0,Math.max(0,s.length-1)):"",host:o,pathname:l,search:u,hash:h,[by]:!r}}function Op(t=""){const[e="",n="",r=""]=(t.match(/([^#?]*)(\?[^#]*)?(#.*)?/)||[]).splice(1);return{pathname:e,search:n,hash:r}}function EA(t){const e=t.pathname||"",n=t.search?(t.search.startsWith("?")?"":"?")+t.search:"",r=t.hash||"",s=t.auth?t.auth+"@":"",i=t.host||"";return(t.protocol||t[by]?(t.protocol||"")+"//":"")+s+i+e+n+r}class wA extends Error{constructor(e,n){super(e,n),this.name="FetchError",n?.cause&&!this.cause&&(this.cause=n.cause)}}function TA(t){const e=t.error?.message||t.error?.toString()||"",n=t.request?.method||t.options?.method||"GET",r=t.request?.url||String(t.request)||"/",s=`[${n}] ${JSON.stringify(r)}`,i=t.response?`${t.response.status} ${t.response.statusText}`:"<no response>",o=`${s}: ${i}${e?` ${e}`:""}`,a=new wA(o,t.error?{cause:t.error}:void 0);for(const l of["request","options","response"])Object.defineProperty(a,l,{get(){return t[l]}});for(const[l,u]of[["data","_data"],["status","status"],["statusCode","status"],["statusText","statusText"],["statusMessage","statusText"]])Object.defineProperty(a,l,{get(){return t.response&&t.response[u]}});return a}const IA=new Set(Object.freeze(["PATCH","POST","PUT","DELETE"]));function Dp(t="GET"){return IA.has(t.toUpperCase())}function bA(t){if(t===void 0)return!1;const e=typeof t;return e==="string"||e==="number"||e==="boolean"||e===null?!0:e!=="object"?!1:Array.isArray(t)?!0:t.buffer||t instanceof FormData||t instanceof URLSearchParams?!1:t.constructor&&t.constructor.name==="Object"||typeof t.toJSON=="function"}const AA=new Set(["image/svg","application/xml","application/xhtml","application/html"]),RA=/^application\/(?:[\w!#$%&*.^`~-]*\+)?json(;.+)?$/i;function SA(t=""){if(!t)return"json";const e=t.split(";").shift()||"";return RA.test(e)?"json":e==="text/event-stream"?"stream":AA.has(e)||e.startsWith("text/")?"text":"blob"}function CA(t,e,n,r){const s=PA(e?.headers??t?.headers,n?.headers,r);let i;return(n?.query||n?.params||e?.params||e?.query)&&(i={...n?.params,...n?.query,...e?.params,...e?.query}),{...n,...e,query:i,params:i,headers:s}}function PA(t,e,n){if(!e)return new n(t);const r=new n(e);if(t)for(const[s,i]of Symbol.iterator in t||Array.isArray(t)?t:new n(t))r.set(s,i);return r}async function Fa(t,e){if(e)if(Array.isArray(e))for(const n of e)await n(t);else await e(t)}const kA=new Set([408,409,425,429,500,502,503,504]),NA=new Set([101,204,205,304]);function Ry(t={}){const{fetch:e=globalThis.fetch,Headers:n=globalThis.Headers,AbortController:r=globalThis.AbortController}=t;async function s(a){const l=a.error&&a.error.name==="AbortError"&&!a.options.timeout||!1;if(a.options.retry!==!1&&!l){let h;typeof a.options.retry=="number"?h=a.options.retry:h=Dp(a.options.method)?0:1;const f=a.response&&a.response.status||500;if(h>0&&(Array.isArray(a.options.retryStatusCodes)?a.options.retryStatusCodes.includes(f):kA.has(f))){const p=typeof a.options.retryDelay=="function"?a.options.retryDelay(a):a.options.retryDelay||0;return p>0&&await new Promise(g=>setTimeout(g,p)),i(a.request,{...a.options,retry:h-1})}}const u=TA(a);throw Error.captureStackTrace&&Error.captureStackTrace(u,i),u}const i=async function(l,u={}){const h={request:l,options:CA(l,u,t.defaults,n),response:void 0,error:void 0};if(h.options.method&&(h.options.method=h.options.method.toUpperCase()),h.options.onRequest&&(await Fa(h,h.options.onRequest),h.options.headers instanceof n||(h.options.headers=new n(h.options.headers||{}))),typeof h.request=="string"&&(h.options.baseURL&&(h.request=_A(h.request,h.options.baseURL)),h.options.query&&(h.request=wy(h.request,h.options.query),delete h.options.query),"query"in h.options&&delete h.options.query,"params"in h.options&&delete h.options.params),h.options.body&&Dp(h.options.method))if(bA(h.options.body)){const g=h.options.headers.get("content-type");typeof h.options.body!="string"&&(h.options.body=g==="application/x-www-form-urlencoded"?new URLSearchParams(h.options.body).toString():JSON.stringify(h.options.body)),g||h.options.headers.set("content-type","application/json"),h.options.headers.has("accept")||h.options.headers.set("accept","application/json")}else("pipeTo"in h.options.body&&typeof h.options.body.pipeTo=="function"||typeof h.options.body.pipe=="function")&&("duplex"in h.options||(h.options.duplex="half"));let f;if(!h.options.signal&&h.options.timeout){const g=new r;f=setTimeout(()=>{const v=new Error("[TimeoutError]: The operation was aborted due to timeout");v.name="TimeoutError",v.code=23,g.abort(v)},h.options.timeout),h.options.signal=g.signal}try{h.response=await e(h.request,h.options)}catch(g){return h.error=g,h.options.onRequestError&&await Fa(h,h.options.onRequestError),await s(h)}finally{f&&clearTimeout(f)}if((h.response.body||h.response._bodyInit)&&!NA.has(h.response.status)&&h.options.method!=="HEAD"){const g=(h.options.parseResponse?"json":h.options.responseType)||SA(h.response.headers.get("content-type")||"");switch(g){case"json":{const v=await h.response.text(),_=h.options.parseResponse||vc;h.response._data=_(v);break}case"stream":{h.response._data=h.response.body||h.response._bodyInit;break}default:h.response._data=await h.response[g]()}}return h.options.onResponse&&await Fa(h,h.options.onResponse),!h.options.ignoreResponseError&&h.response.status>=400&&h.response.status<600?(h.options.onResponseError&&await Fa(h,h.options.onResponseError),await s(h)):h.response},o=async function(l,u){return(await i(l,u))._data};return o.raw=i,o.native=(...a)=>e(...a),o.create=(a={},l={})=>Ry({...t,...l,defaults:{...t.defaults,...l.defaults,...a}}),o}const Tc=(function(){if(typeof globalThis<"u")return globalThis;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")})(),OA=Tc.fetch?(...t)=>Tc.fetch(...t):()=>Promise.reject(new Error("[ofetch] global.fetch is not supported!")),DA=Tc.Headers,VA=Tc.AbortController,xA=Ry({fetch:OA,Headers:DA,AbortController:VA}),MA=xA,LA=()=>window?.__NUXT__?.config||window?.useNuxtApp?.().payload?.config,tf=()=>LA().app,UA=()=>tf().baseURL,FA=()=>tf().buildAssetsDir,nf=(...t)=>Iy(Sy(),FA(),...t),Sy=(...t)=>{const e=tf(),n=e.cdnURL||e.baseURL;return t.length?Iy(n,...t):n};globalThis.__buildAssetsURL=nf,globalThis.__publicAssetsURL=Sy;globalThis.$fetch||(globalThis.$fetch=MA.create({baseURL:UA()}));"global"in globalThis||(globalThis.global=globalThis);function qu(t,e={},n){for(const r in t){const s=t[r],i=n?`${n}:${r}`:r;typeof s=="object"&&s!==null?qu(s,e,i):typeof s=="function"&&(e[i]=s)}return e}const BA={run:t=>t()},$A=()=>BA,Cy=typeof console.createTask<"u"?console.createTask:$A;function HA(t,e){const n=e.shift(),r=Cy(n);return t.reduce((s,i)=>s.then(()=>r.run(()=>i(...e))),Promise.resolve())}function jA(t,e){const n=e.shift(),r=Cy(n);return Promise.all(t.map(s=>r.run(()=>s(...e))))}function iu(t,e){for(const n of[...t])n(e)}let qA=class{constructor(){this._hooks={},this._before=void 0,this._after=void 0,this._deprecatedMessages=void 0,this._deprecatedHooks={},this.hook=this.hook.bind(this),this.callHook=this.callHook.bind(this),this.callHookWith=this.callHookWith.bind(this)}hook(e,n,r={}){if(!e||typeof n!="function")return()=>{};const s=e;let i;for(;this._deprecatedHooks[e];)i=this._deprecatedHooks[e],e=i.to;if(i&&!r.allowDeprecated){let o=i.message;o||(o=`${s} hook has been deprecated`+(i.to?`, please use ${i.to}`:"")),this._deprecatedMessages||(this._deprecatedMessages=new Set),this._deprecatedMessages.has(o)||(console.warn(o),this._deprecatedMessages.add(o))}if(!n.name)try{Object.defineProperty(n,"name",{get:()=>"_"+e.replace(/\W+/g,"_")+"_hook_cb",configurable:!0})}catch{}return this._hooks[e]=this._hooks[e]||[],this._hooks[e].push(n),()=>{n&&(this.removeHook(e,n),n=void 0)}}hookOnce(e,n){let r,s=(...i)=>(typeof r=="function"&&r(),r=void 0,s=void 0,n(...i));return r=this.hook(e,s),r}removeHook(e,n){if(this._hooks[e]){const r=this._hooks[e].indexOf(n);r!==-1&&this._hooks[e].splice(r,1),this._hooks[e].length===0&&delete this._hooks[e]}}deprecateHook(e,n){this._deprecatedHooks[e]=typeof n=="string"?{to:n}:n;const r=this._hooks[e]||[];delete this._hooks[e];for(const s of r)this.hook(e,s)}deprecateHooks(e){Object.assign(this._deprecatedHooks,e);for(const n in e)this.deprecateHook(n,e[n])}addHooks(e){const n=qu(e),r=Object.keys(n).map(s=>this.hook(s,n[s]));return()=>{for(const s of r.splice(0,r.length))s()}}removeHooks(e){const n=qu(e);for(const r in n)this.removeHook(r,n[r])}removeAllHooks(){for(const e in this._hooks)delete this._hooks[e]}callHook(e,...n){return n.unshift(e),this.callHookWith(HA,e,...n)}callHookParallel(e,...n){return n.unshift(e),this.callHookWith(jA,e,...n)}callHookWith(e,n,...r){const s=this._before||this._after?{name:n,args:r,context:{}}:void 0;this._before&&iu(this._before,s);const i=e(n in this._hooks?[...this._hooks[n]]:[],r);return i instanceof Promise?i.finally(()=>{this._after&&s&&iu(this._after,s)}):(this._after&&s&&iu(this._after,s),i)}beforeEach(e){return this._before=this._before||[],this._before.push(e),()=>{if(this._before!==void 0){const n=this._before.indexOf(e);n!==-1&&this._before.splice(n,1)}}}afterEach(e){return this._after=this._after||[],this._after.push(e),()=>{if(this._after!==void 0){const n=this._after.indexOf(e);n!==-1&&this._after.splice(n,1)}}}};function WA(){return new qA}function GA(t={}){let e,n=!1;const r=o=>{if(e&&e!==o)throw new Error("Context conflict")};let s;if(t.asyncContext){const o=t.AsyncLocalStorage||globalThis.AsyncLocalStorage;o?s=new o:console.warn("[unctx] `AsyncLocalStorage` is not provided.")}const i=()=>{if(s){const o=s.getStore();if(o!==void 0)return o}return e};return{use:()=>{const o=i();if(o===void 0)throw new Error("Context is not available");return o},tryUse:()=>i(),set:(o,a)=>{a||r(o),e=o,n=!0},unset:()=>{e=void 0,n=!1},call:(o,a)=>{r(o),e=o;try{return s?s.run(o,a):a()}finally{n||(e=void 0)}},async callAsync(o,a){e=o;const l=()=>{e=o},u=()=>e===o?l:void 0;Wu.add(u);try{const h=s?s.run(o,a):a();return n||(e=void 0),await h}finally{Wu.delete(u)}}}}function zA(t={}){const e={};return{get(n,r={}){return e[n]||(e[n]=GA({...t,...r})),e[n]}}}const Ic=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof global<"u"?global:typeof window<"u"?window:{},Vp="__unctx__",KA=Ic[Vp]||(Ic[Vp]=zA()),QA=(t,e={})=>KA.get(t,e),xp="__unctx_async_handlers__",Wu=Ic[xp]||(Ic[xp]=new Set);function ui(t){const e=[];for(const s of Wu){const i=s();i&&e.push(i)}const n=()=>{for(const s of e)s()};let r=t();return r&&typeof r=="object"&&"catch"in r&&(r=r.catch(s=>{throw n(),s})),[r,n]}const Mp={name:"page-fade",mode:"out-in"},YA=!1,JA=!1,Lp={id:"__nuxt-loader"},mM={componentName:"NuxtLink",prefetch:!0,prefetchOn:{visibility:!0}},XA="#__nuxt",Py="nuxt-app",Up=36e5,ZA="vite:preloadError";function ky(t=Py){return QA(t,{asyncContext:!1})}const eR="__nuxt_plugin";function tR(t){let e=0;const n={_id:t.id||Py||"nuxt-app",_scope:TT(),provide:void 0,versions:{get nuxt(){return"4.2.2"},get vue(){return n.vueApp.version}},payload:Nn({...t.ssrContext?.payload||{},data:Nn({}),state:Zr({}),once:new Set,_errors:Nn({})}),static:{data:{}},runWithContext(s){return n._scope.active&&!Lh()?n._scope.run(()=>Fp(n,s)):Fp(n,s)},isHydrating:!0,deferHydration(){if(!n.isHydrating)return()=>{};e++;let s=!1;return()=>{if(!s&&(s=!0,e--,e===0))return n.isHydrating=!1,n.callHook("app:suspense:resolve")}},_asyncDataPromises:{},_asyncData:Nn({}),_payloadRevivers:{},...t};{const s=window.__NUXT__;if(s)for(const i in s)switch(i){case"data":case"state":case"_errors":Object.assign(n.payload[i],s[i]);break;default:n.payload[i]=s[i]}}n.hooks=WA(),n.hook=n.hooks.hook,n.callHook=n.hooks.callHook,n.provide=(s,i)=>{const o="$"+s;Ba(n,o,i),Ba(n.vueApp.config.globalProperties,o,i)},Ba(n.vueApp,"$nuxt",n),Ba(n.vueApp.config.globalProperties,"$nuxt",n);{window.addEventListener(ZA,i=>{n.callHook("app:chunkError",{error:i.payload}),i.payload.message.includes("Unable to preload CSS")&&i.preventDefault()}),window.useNuxtApp||=et;const s=n.hook("app:error",(...i)=>{console.error("[nuxt] error caught during app initialization",...i)});n.hook("app:mounted",s)}const r=n.payload.config;return n.provide("config",r),n}function nR(t,e){e.hooks&&t.hooks.addHooks(e.hooks)}async function rR(t,e){if(typeof e=="function"){const{provide:n}=await t.runWithContext(()=>e(t))||{};if(n&&typeof n=="object")for(const r in n)t.provide(r,n[r])}}async function sR(t,e){const n=new Set,r=[],s=[];let i,o=0;async function a(l){const u=l.dependsOn?.filter(h=>e.some(f=>f._name===h)&&!n.has(h))??[];if(u.length>0)r.push([new Set(u),l]);else{const h=rR(t,l).then(async()=>{l._name&&(n.add(l._name),await Promise.all(r.map(async([f,p])=>{f.has(l._name)&&(f.delete(l._name),f.size===0&&(o++,await a(p)))})))}).catch(f=>{if(!l.parallel&&!t.payload.error)throw f;i||=f});l.parallel?s.push(h):await h}}for(const l of e)nR(t,l);for(const l of e)await a(l);if(await Promise.all(s),o)for(let l=0;l<o;l++)await Promise.all(s);if(i)throw t.payload.error||i}function Fn(t){if(typeof t=="function")return t;const e=t._name||t.name;return delete t.name,Object.assign(t.setup||(()=>{}),t,{[eR]:!0,_name:e})}function Fp(t,e,n){const r=()=>e();return ky(t._id).set(t),t.vueApp.runWithContext(r)}function iR(t){let e;return Jc()&&(e=Ms()?.appContext.app.$nuxt),e||=ky(t).tryUse(),e||null}function et(t){const e=iR(t);if(!e)throw new Error("[nuxt] instance unavailable");return e}function rl(t){return et().$config}function Ba(t,e,n){Object.defineProperty(t,e,{get:()=>n})}function oR(t,e){return{ctx:{table:t},matchAll:n=>Oy(n,t)}}function Ny(t){const e={};for(const n in t)e[n]=n==="dynamic"?new Map(Object.entries(t[n]).map(([r,s])=>[r,Ny(s)])):new Map(Object.entries(t[n]));return e}function aR(t){return oR(Ny(t))}function Oy(t,e,n){t.endsWith("/")&&(t=t.slice(0,-1)||"/");const r=[];for(const[i,o]of Bp(e.wildcard))(t===i||t.startsWith(i+"/"))&&r.push(o);for(const[i,o]of Bp(e.dynamic))if(t.startsWith(i+"/")){const a="/"+t.slice(i.length).split("/").splice(2).join("/");r.push(...Oy(a,o))}const s=e.static.get(t);return s&&r.push(s),r.filter(Boolean)}function Bp(t){return[...t.entries()].sort((e,n)=>e[0].length-n[0].length)}function ou(t){if(t===null||typeof t!="object")return!1;const e=Object.getPrototypeOf(t);return e!==null&&e!==Object.prototype&&Object.getPrototypeOf(e)!==null||Symbol.iterator in t?!1:Symbol.toStringTag in t?Object.prototype.toString.call(t)==="[object Module]":!0}function Gu(t,e,n=".",r){if(!ou(e))return Gu(t,{},n,r);const s=Object.assign({},e);for(const i in t){if(i==="__proto__"||i==="constructor")continue;const o=t[i];o!=null&&(r&&r(s,i,o,n)||(Array.isArray(o)&&Array.isArray(s[i])?s[i]=[...o,...s[i]]:ou(o)&&ou(s[i])?s[i]=Gu(o,s[i],(n?`${n}.`:"")+i.toString(),r):s[i]=o))}return s}function cR(t){return(...e)=>e.reduce((n,r)=>Gu(n,r,"",t),{})}const Dy=cR();function lR(t,e){try{return e in t}catch{return!1}}class $p extends Error{static __h3_error__=!0;statusCode=500;fatal=!1;unhandled=!1;statusMessage;data;cause;constructor(e,n={}){super(e,n),n.cause&&!this.cause&&(this.cause=n.cause)}toJSON(){const e={message:this.message,statusCode:zu(this.statusCode,500)};return this.statusMessage&&(e.statusMessage=Vy(this.statusMessage)),this.data!==void 0&&(e.data=this.data),e}}function uR(t){if(typeof t=="string")return new $p(t);if(hR(t))return t;const e=new $p(t.message??t.statusMessage??"",{cause:t.cause||t});if(lR(t,"stack"))try{Object.defineProperty(e,"stack",{get(){return t.stack}})}catch{try{e.stack=t.stack}catch{}}if(t.data&&(e.data=t.data),t.statusCode?e.statusCode=zu(t.statusCode,e.statusCode):t.status&&(e.statusCode=zu(t.status,e.statusCode)),t.statusMessage?e.statusMessage=t.statusMessage:t.statusText&&(e.statusMessage=t.statusText),e.statusMessage){const n=e.statusMessage;Vy(e.statusMessage)!==n&&console.warn("[h3] Please prefer using `message` for longer error messages instead of `statusMessage`. In the future, `statusMessage` will be sanitized by default.")}return t.fatal!==void 0&&(e.fatal=t.fatal),t.unhandled!==void 0&&(e.unhandled=t.unhandled),e}function hR(t){return t?.constructor?.__h3_error__===!0}const fR=/[^\u0009\u0020-\u007E]/g;function Vy(t=""){return t.replace(fR,"")}function zu(t,e=200){return!t||(typeof t=="string"&&(t=Number.parseInt(t,10)),t<100||t>999)?e:t}const xy=Symbol("layout-meta"),Ss=Symbol("route");import.meta.url.replace(/\/app\/.*$/,"/");const Gt=()=>et()?.$router,sa=()=>Jc()?Rt(Ss,et()._route):et()._route;function gM(t){return t}const dR=()=>{try{if(et()._processingMiddleware)return!0}catch{return!1}return!1},_M=(t,e)=>{t||="/";const n=typeof t=="string"?t:"path"in t?pR(t):Gt().resolve(t).href;if(e?.open){const{target:l="_blank",windowFeatures:u={}}=e.open,h=[];for(const[f,p]of Object.entries(u))p!==void 0&&h.push(`${f.toLowerCase()}=${p}`);return open(n,l,h.join(", ")),Promise.resolve()}const r=Ls(n,{acceptRelative:!0}),s=e?.external||r;if(s){if(!e?.external)throw new Error("Navigating to an external URL is not allowed by default. Use `navigateTo(url, { external: true })`.");const{protocol:l}=new URL(n,window.location.href);if(l&&mA(l))throw new Error(`Cannot navigate to a URL with '${l}' protocol.`)}const i=dR();if(!s&&i){if(e?.replace){if(typeof t=="string"){const{pathname:l,search:u,hash:h}=Ay(t);return{path:l,...u&&{query:Ey(u)},...h&&{hash:h},replace:!0}}return{...t,replace:!0}}return t}const o=Gt(),a=et();return s?(a._scope.stop(),e?.replace?location.replace(n):location.href=n,i?a.isHydrating?new Promise(()=>{}):!1:Promise.resolve()):e?.replace?o.replace(t):o.push(t)};function pR(t){return wy(t.path||"",t.query||{})+(t.hash||"")}const My="__nuxt_error",sl=()=>QT(et().payload,"error"),ms=t=>{const e=Is(t);try{const n=sl();et().hooks.callHook("app:error",e),n.value||=e}catch{throw e}return e},mR=async(t={})=>{const e=et(),n=sl();e.callHook("app:error:cleared",t),t.redirect&&await Gt().replace(t.redirect),n.value=void 0},Ly=t=>!!t&&typeof t=="object"&&My in t,Is=t=>{const e=uR(t);return Object.defineProperty(e,My,{value:!0,configurable:!1,writable:!1}),e};function gR(t){const e=yR(t),n=new ArrayBuffer(e.length),r=new DataView(n);for(let s=0;s<n.byteLength;s++)r.setUint8(s,e.charCodeAt(s));return n}const _R="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";function yR(t){t.length%4===0&&(t=t.replace(/==?$/,""));let e="",n=0,r=0;for(let s=0;s<t.length;s++)n<<=6,n|=_R.indexOf(t[s]),r+=6,r===24&&(e+=String.fromCharCode((n&16711680)>>16),e+=String.fromCharCode((n&65280)>>8),e+=String.fromCharCode(n&255),n=r=0);return r===12?(n>>=4,e+=String.fromCharCode(n)):r===18&&(n>>=2,e+=String.fromCharCode((n&65280)>>8),e+=String.fromCharCode(n&255)),e}const vR=-1,ER=-2,wR=-3,TR=-4,IR=-5,bR=-6;function AR(t,e){return RR(JSON.parse(t),e)}function RR(t,e){if(typeof t=="number")return s(t,!0);if(!Array.isArray(t)||t.length===0)throw new Error("Invalid input");const n=t,r=Array(n.length);function s(i,o=!1){if(i===vR)return;if(i===wR)return NaN;if(i===TR)return 1/0;if(i===IR)return-1/0;if(i===bR)return-0;if(o||typeof i!="number")throw new Error("Invalid input");if(i in r)return r[i];const a=n[i];if(!a||typeof a!="object")r[i]=a;else if(Array.isArray(a))if(typeof a[0]=="string"){const l=a[0],u=e&&Object.hasOwn(e,l)?e[l]:void 0;if(u){let h=a[1];return typeof h!="number"&&(h=n.push(a[1])-1),r[i]=u(s(h))}switch(l){case"Date":r[i]=new Date(a[1]);break;case"Set":const h=new Set;r[i]=h;for(let g=1;g<a.length;g+=1)h.add(s(a[g]));break;case"Map":const f=new Map;r[i]=f;for(let g=1;g<a.length;g+=2)f.set(s(a[g]),s(a[g+1]));break;case"RegExp":r[i]=new RegExp(a[1],a[2]);break;case"Object":r[i]=Object(a[1]);break;case"BigInt":r[i]=BigInt(a[1]);break;case"null":const p=Object.create(null);r[i]=p;for(let g=1;g<a.length;g+=2)p[a[g]]=s(a[g+1]);break;case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"BigInt64Array":case"BigUint64Array":{const g=globalThis[l],v=new g(s(a[1]));r[i]=a[2]!==void 0?v.subarray(a[2],a[3]):v;break}case"ArrayBuffer":{const g=a[1],v=gR(g);r[i]=v;break}case"Temporal.Duration":case"Temporal.Instant":case"Temporal.PlainDate":case"Temporal.PlainTime":case"Temporal.PlainDateTime":case"Temporal.PlainMonthDay":case"Temporal.PlainYearMonth":case"Temporal.ZonedDateTime":{const g=l.slice(9);r[i]=Temporal[g].from(a[1]);break}case"URL":{const g=new URL(a[1]);r[i]=g;break}case"URLSearchParams":{const g=new URLSearchParams(a[1]);r[i]=g;break}default:throw new Error(`Unknown type ${l}`)}}else{const l=new Array(a.length);r[i]=l;for(let u=0;u<a.length;u+=1){const h=a[u];h!==ER&&(l[u]=s(h))}}else{const l={};r[i]=l;for(const u in a){if(u==="__proto__")throw new Error("Cannot parse an object with a `__proto__` property");const h=a[u];l[u]=s(h)}}return r[i]}return s(0)}const SR=new Set(["link","style","script","noscript"]),CR=new Set(["title","titleTemplate","script","style","noscript"]),Hp=new Set(["base","meta","link","style","script","noscript"]),PR=new Set(["title","base","htmlAttrs","bodyAttrs","meta","link","style","script","noscript"]),kR=new Set(["base","title","titleTemplate","bodyAttrs","htmlAttrs","templateParams"]),NR=new Set(["key","tagPosition","tagPriority","tagDuplicateStrategy","innerHTML","textContent","processTemplateParams"]),OR=new Set(["templateParams","htmlAttrs","bodyAttrs"]),DR=new Set(["theme-color","google-site-verification","og","article","book","profile","twitter","author"]);function Ku(t,e={},n){for(const r in t){const s=t[r],i=n?`${n}:${r}`:r;typeof s=="object"&&s!==null?Ku(s,e,i):typeof s=="function"&&(e[i]=s)}return e}const Uy=(()=>{if(console.createTask)return console.createTask;const t={run:e=>e()};return()=>t})();function Fy(t,e,n,r){for(let s=n;s<t.length;s+=1)try{const i=r?r.run(()=>t[s](...e)):t[s](...e);if(i instanceof Promise)return i.then(()=>Fy(t,e,s+1,r))}catch(i){return Promise.reject(i)}}function VR(t,e,n){if(t.length>0)return Fy(t,e,0,Uy(n))}function xR(t,e,n){if(t.length>0){const r=Uy(n);return Promise.all(t.map(s=>r.run(()=>s(...e))))}}function au(t,e){for(const n of[...t])n(e)}var MR=class{_hooks;_before;_after;_deprecatedHooks;_deprecatedMessages;constructor(){this._hooks={},this._before=void 0,this._after=void 0,this._deprecatedMessages=void 0,this._deprecatedHooks={},this.hook=this.hook.bind(this),this.callHook=this.callHook.bind(this),this.callHookWith=this.callHookWith.bind(this)}hook(t,e,n={}){if(!t||typeof e!="function")return()=>{};const r=t;let s;for(;this._deprecatedHooks[t];)s=this._deprecatedHooks[t],t=s.to;if(s&&!n.allowDeprecated){let i=s.message;i||(i=`${r} hook has been deprecated`+(s.to?`, please use ${s.to}`:"")),this._deprecatedMessages||(this._deprecatedMessages=new Set),this._deprecatedMessages.has(i)||(console.warn(i),this._deprecatedMessages.add(i))}if(!e.name)try{Object.defineProperty(e,"name",{get:()=>"_"+t.replace(/\W+/g,"_")+"_hook_cb",configurable:!0})}catch{}return this._hooks[t]=this._hooks[t]||[],this._hooks[t].push(e),()=>{e&&(this.removeHook(t,e),e=void 0)}}hookOnce(t,e){let n,r=(...s)=>(typeof n=="function"&&n(),n=void 0,r=void 0,e(...s));return n=this.hook(t,r),n}removeHook(t,e){const n=this._hooks[t];if(n){const r=n.indexOf(e);r!==-1&&n.splice(r,1),n.length===0&&(this._hooks[t]=void 0)}}deprecateHook(t,e){this._deprecatedHooks[t]=typeof e=="string"?{to:e}:e;const n=this._hooks[t]||[];this._hooks[t]=void 0;for(const r of n)this.hook(t,r)}deprecateHooks(t){for(const e in t)this.deprecateHook(e,t[e])}addHooks(t){const e=Ku(t),n=Object.keys(e).map(r=>this.hook(r,e[r]));return()=>{for(const r of n)r();n.length=0}}removeHooks(t){const e=Ku(t);for(const n in e)this.removeHook(n,e[n])}removeAllHooks(){this._hooks={}}callHook(t,...e){return this.callHookWith(VR,t,e)}callHookParallel(t,...e){return this.callHookWith(xR,t,e)}callHookWith(t,e,n){const r=this._before||this._after?{name:e,args:n,context:{}}:void 0;this._before&&au(this._before,r);const s=t(this._hooks[e]?[...this._hooks[e]]:[],n,e);return s instanceof Promise?s.finally(()=>{this._after&&r&&au(this._after,r)}):(this._after&&r&&au(this._after,r),s)}beforeEach(t){return this._before=this._before||[],this._before.push(t),()=>{if(this._before!==void 0){const e=this._before.indexOf(t);e!==-1&&this._before.splice(e,1)}}}afterEach(t){return this._after=this._after||[],this._after.push(t),()=>{if(this._after!==void 0){const e=this._after.indexOf(t);e!==-1&&this._after.splice(e,1)}}}};function LR(){return new MR}const UR=["name","property","http-equiv"],FR=new Set(["viewport","description","keywords","robots"]);function By(t){const e=t.split(":");return e.length?DR.has(e[1]):!1}function Qu(t){const{props:e,tag:n}=t;if(kR.has(n))return n;if(n==="link"&&e.rel==="canonical")return"canonical";if(e.charset)return"charset";if(t.tag==="meta"){for(const r of UR)if(e[r]!==void 0){const s=e[r],i=s&&typeof s=="string"&&s.includes(":"),o=s&&FR.has(s),l=!(i||o)&&t.key?`:key:${t.key}`:"";return`${n}:${s}${l}`}}if(t.key)return`${n}:key:${t.key}`;if(e.id)return`${n}:id:${e.id}`;if(CR.has(n)){const r=t.textContent||t.innerHTML;if(r)return`${n}:content:${r}`}}function jp(t){const e=t._h||t._d;if(e)return e;const n=t.textContent||t.innerHTML;return n||`${t.tag}:${Object.entries(t.props).map(([r,s])=>`${r}:${String(s)}`).join(",")}`}function bc(t,e,n){typeof t==="function"&&(!n||n!=="titleTemplate"&&!(n[0]==="o"&&n[1]==="n"))&&(t=t());const s=e?e(n,t):t;if(Array.isArray(s))return s.map(i=>bc(i,e));if(s?.constructor===Object){const i={};for(const o of Object.keys(s))i[o]=bc(s[o],e,o);return i}return s}function BR(t,e){const n=t==="style"?new Map:new Set;function r(s){if(s==null||s===void 0)return;const i=String(s).trim();if(i)if(t==="style"){const[o,...a]=i.split(":").map(l=>l?l.trim():"");o&&a.length&&n.set(o,a.join(":"))}else i.split(" ").filter(Boolean).forEach(o=>n.add(o))}return typeof e=="string"?t==="style"?e.split(";").forEach(r):r(e):Array.isArray(e)?e.forEach(s=>r(s)):e&&typeof e=="object"&&Object.entries(e).forEach(([s,i])=>{i&&i!=="false"&&(t==="style"?n.set(String(s).trim(),String(i)):r(s))}),n}function $y(t,e){return t.props=t.props||{},e?t.tag==="templateParams"?(t.props=e,t):(Object.entries(e).forEach(([n,r])=>{if(r===null){t.props[n]=null;return}if(n==="class"||n==="style"){t.props[n]=BR(n,r);return}if(NR.has(n)){if(["textContent","innerHTML"].includes(n)&&typeof r=="object"){let a=e.type;if(e.type||(a="application/json"),!a?.endsWith("json")&&a!=="speculationrules")return;e.type=a,t.props.type=a,t[n]=JSON.stringify(r)}else t[n]=r;return}const s=String(r),i=n.startsWith("data-"),o=t.tag==="meta"&&n==="content";s==="true"||s===""?t.props[n]=i||o?s:!0:!r&&i&&s==="false"?t.props[n]="false":r!==void 0&&(t.props[n]=r)}),t):t}function $R(t,e){const n=typeof e=="object"&&typeof e!="function"?e:{[t==="script"||t==="noscript"||t==="style"?"innerHTML":"textContent"]:e},r=$y({tag:t,props:{}},n);return r.key&&SR.has(r.tag)&&(r.props["data-hid"]=r._h=r.key),r.tag==="script"&&typeof r.innerHTML=="object"&&(r.innerHTML=JSON.stringify(r.innerHTML),r.props.type=r.props.type||"application/json"),Array.isArray(r.props.content)?r.props.content.map(s=>({...r,props:{...r.props,content:s}})):r}function HR(t,e){if(!t)return[];typeof t=="function"&&(t=t());const n=(s,i)=>{for(let o=0;o<e.length;o++)i=e[o](s,i);return i};t=n(void 0,t);const r=[];return t=bc(t,n),Object.entries(t||{}).forEach(([s,i])=>{if(i!==void 0)for(const o of Array.isArray(i)?i:[i])r.push($R(s,o))}),r.flat()}const qp=(t,e)=>t._w===e._w?t._p-e._p:t._w-e._w,Wp={base:-10,title:10},jR={critical:-8,high:-1,low:2},Gp={meta:{"content-security-policy":-30,charset:-20,viewport:-15},link:{preconnect:20,stylesheet:60,preload:70,modulepreload:70,prefetch:90,"dns-prefetch":90,prerender:90},script:{async:30,defer:80,sync:50},style:{imported:40,sync:60}},qR=/@import/,oo=t=>t===""||t===!0;function WR(t,e){if(typeof e.tagPriority=="number")return e.tagPriority;let n=100;const r=jR[e.tagPriority]||0,s=t.resolvedOptions.disableCapoSorting?{link:{},script:{},style:{}}:Gp;if(e.tag in Wp)n=Wp[e.tag];else if(e.tag==="meta"){const i=e.props["http-equiv"]==="content-security-policy"?"content-security-policy":e.props.charset?"charset":e.props.name==="viewport"?"viewport":null;i&&(n=Gp.meta[i])}else if(e.tag==="link"&&e.props.rel)n=s.link[e.props.rel];else if(e.tag==="script"){const i=String(e.props.type);oo(e.props.async)?n=s.script.async:e.props.src&&!oo(e.props.defer)&&!oo(e.props.async)&&i!=="module"&&!i.endsWith("json")||e.innerHTML&&!i.endsWith("json")?n=s.script.sync:(oo(e.props.defer)&&e.props.src&&!oo(e.props.async)||i==="module")&&(n=s.script.defer)}else e.tag==="style"&&(n=e.innerHTML&&qR.test(e.innerHTML)?s.style.imported:s.style.sync);return(n||100)+r}function zp(t,e){const n=typeof e=="function"?e(t):e,r=n.key||String(t.plugins.size+1);t.plugins.get(r)||(t.plugins.set(r,n),t.hooks.addHooks(n.hooks||{}))}function GR(t={}){const e=LR();e.addHooks(t.hooks||{});const n=!t.document,r=new Map,s=new Map,i=new Set,o={_entryCount:1,plugins:s,dirty:!1,resolvedOptions:t,hooks:e,ssr:n,entries:r,headEntries(){return[...r.values()]},use:a=>zp(o,a),push(a,l){const u={...l||{}};delete u.head;const h=u._index??o._entryCount++,f={_i:h,input:a,options:u},p={_poll(g=!1){o.dirty=!0,!g&&i.add(h),e.callHook("entries:updated",o)},dispose(){r.delete(h)&&o.invalidate()},patch(g){(!u.mode||u.mode==="server"&&n||u.mode==="client"&&!n)&&(f.input=g,r.set(h,f),p._poll())}};return p.patch(a),p},async resolveTags(){const a={tagMap:new Map,tags:[],entries:[...o.entries.values()]};for(await e.callHook("entries:resolve",a);i.size;){const p=i.values().next().value;i.delete(p);const g=r.get(p);if(g){const v={tags:HR(g.input,t.propResolvers||[]).map(_=>Object.assign(_,g.options)),entry:g};await e.callHook("entries:normalize",v),g._tags=v.tags.map((_,C)=>(_._w=WR(o,_),_._p=(g._i<<10)+C,_._d=Qu(_),_))}}let l=!1;a.entries.flatMap(p=>(p._tags||[]).map(g=>({...g,props:{...g.props}}))).sort(qp).reduce((p,g)=>{const v=String(g._d||g._p);if(!p.has(v))return p.set(v,g);const _=p.get(v);if((g?.tagDuplicateStrategy||(OR.has(g.tag)?"merge":null)||(g.key&&g.key===_.key?"merge":null))==="merge"){const S={..._.props};Object.entries(g.props).forEach(([R,y])=>S[R]=R==="style"?new Map([..._.props.style||new Map,...y]):R==="class"?new Set([..._.props.class||new Set,...y]):y),p.set(v,{...g,props:S})}else g._p>>10===_._p>>10&&g.tag==="meta"&&By(v)?(p.set(v,Object.assign([...Array.isArray(_)?_:[_],g],g)),l=!0):(g._w===_._w?g._p>_._p:g?._w<_?._w)&&p.set(v,g);return p},a.tagMap);const u=a.tagMap.get("title"),h=a.tagMap.get("titleTemplate");if(o._title=u?.textContent,h){const p=h?.textContent;if(o._titleTemplate=p,p){let g=typeof p=="function"?p(u?.textContent):p;typeof g=="string"&&!o.plugins.has("template-params")&&(g=g.replace("%s",u?.textContent||"")),u?g===null?a.tagMap.delete("title"):a.tagMap.set("title",{...u,textContent:g}):(h.tag="title",h.textContent=g)}}a.tags=Array.from(a.tagMap.values()),l&&(a.tags=a.tags.flat().sort(qp)),await e.callHook("tags:beforeResolve",a),await e.callHook("tags:resolve",a),await e.callHook("tags:afterResolve",a);const f=[];for(const p of a.tags){const{innerHTML:g,tag:v,props:_}=p;if(PR.has(v)&&!(Object.keys(_).length===0&&!p.innerHTML&&!p.textContent)&&!(v==="meta"&&!_.content&&!_["http-equiv"]&&!_.charset)){if(v==="script"&&g){if(String(_.type).endsWith("json")){const C=typeof g=="string"?g:JSON.stringify(g);p.innerHTML=C.replace(/</g,"\\u003C")}else typeof g=="string"&&(p.innerHTML=g.replace(new RegExp(`</${v}`,"g"),`<\\/${v}`));p._d=Qu(p)}f.push(p)}}return f},invalidate(){for(const a of r.values())i.add(a._i);o.dirty=!0,e.callHook("entries:updated",o)}};return(t?.plugins||[]).forEach(a=>zp(o,a)),o.hooks.callHook("init",o),t.init?.forEach(a=>a&&o.push(a)),o}const zR=(t,e)=>ct(e)?WT(e):e,rf="usehead";function KR(t){return{install(n){n.config.globalProperties.$unhead=t,n.config.globalProperties.$head=t,n.provide(rf,t)}}.install}function QR(){if(Jc()){const t=Rt(rf);if(!t)throw new Error("useHead() was called without provide context, ensure you call it through the setup() function.");return t}throw new Error("useHead() was called without provide context, ensure you call it through the setup() function.")}function YR(t,e={}){const n=e.head||QR();return n.ssr?n.push(t||{},e):JR(n,t,e)}function JR(t,e,n={}){const r=oe(!1);let s;return iI(()=>{const o=r.value?{}:bc(e,zR);s?s.patch(o):s=t.push(o,n)}),Ms()&&(ta(()=>{s.dispose()}),V_(()=>{r.value=!0}),D_(()=>{r.value=!1})),s}function Hy(t){const e=t||et();return e.ssrContext?.head||e.runWithContext(()=>{if(Jc()){const n=Rt(rf);if(!n)throw new Error("[nuxt] [unhead] Missing Unhead instance.");return n}})}function yM(t,e={}){const n=e.head||Hy(e.nuxt);return YR(t,{head:n,...e})}let Ya,Ja;function XR(){return Ya=$fetch(nf(`builds/meta/${rl().app.buildId}.json`),{responseType:"json"}),Ya.then(t=>{Ja=aR(t.matcher)}).catch(t=>{console.error("[nuxt] Error fetching app manifest.",t)}),Ya}function il(){return Ya||XR()}async function sf(t){const e=typeof t=="string"?t:t.path;if(await il(),!Ja)return console.error("[nuxt] Error creating app manifest matcher.",Ja),{};try{return Dy({},...Ja.matchAll(e).reverse())}catch(n){return console.error("[nuxt] Error matching route rules.",n),{}}}async function Kp(t,e={}){if(!await qy(t))return null;const r=await e0(t,e);return await jy(r)||null}const ZR="_payload.json";async function e0(t,e={}){const n=new URL(t,"http://localhost");if(n.host!=="localhost"||Ls(n.pathname,{acceptRelative:!0}))throw new Error("Payload URL must not include hostname: "+t);const r=rl(),s=e.hash||(e.fresh?Date.now():r.app.buildId),i=r.app.cdnURL,o=i&&await qy(t)?i:r.app.baseURL;return ef(o,n.pathname,ZR+(s?`?${s}`:""))}async function jy(t){const e=fetch(t,{cache:"force-cache"}).then(n=>n.text().then(Wy));try{return await e}catch(n){console.warn("[nuxt] Cannot load payload ",t,n)}return null}async function qy(t=sa().path){const e=et();return t=t==="/"?t:t.replace(/\/$/,""),(await il()).prerendered.includes(t)?!0:e.runWithContext(async()=>{const r=await sf({path:t});return!!r.prerender&&!r.redirect})}let hs=null;async function t0(){if(hs)return hs;const t=document.getElementById("__NUXT_DATA__");if(!t)return{};const e=await Wy(t.textContent||""),n=t.dataset.src?await jy(t.dataset.src):void 0;return hs={...e,...n,...window.__NUXT__},hs.config?.public&&(hs.config.public=Zr(hs.config.public)),hs}async function Wy(t){return await AR(t,et()._payloadRevivers)}function n0(t,e){et()._payloadRevivers[t]=e}const r0=[["NuxtError",t=>Is(t)],["EmptyShallowRef",t=>cr(t==="_"?void 0:t==="0n"?BigInt(0):vc(t))],["EmptyRef",t=>oe(t==="_"?void 0:t==="0n"?BigInt(0):vc(t))],["ShallowRef",t=>cr(t)],["ShallowReactive",t=>Nn(t)],["Ref",t=>oe(t)],["Reactive",t=>Zr(t)]],s0=Fn({name:"nuxt:revive-payload:client",order:-30,async setup(t){let e,n;for(const[r,s]of r0)n0(r,s);Object.assign(t.payload,([e,n]=ui(()=>t.runWithContext(t0)),e=await e,n(),e)),delete window.__NUXT__}});async function of(t,e={}){const n=e.document||t.resolvedOptions.document;if(!n||!t.dirty)return;const r={shouldRender:!0,tags:[]};if(await t.hooks.callHook("dom:beforeRender",r),!!r.shouldRender)return t._domUpdatePromise||(t._domUpdatePromise=new Promise(async s=>{const i=new Map,o=new Promise(g=>{t.resolveTags().then(v=>{g(v.map(_=>{const C=i.get(_._d)||0,S={tag:_,id:(C?`${_._d}:${C}`:_._d)||jp(_),shouldRender:!0};return _._d&&By(_._d)&&i.set(_._d,C+1),S}))})});let a=t._dom;if(!a){a={title:n.title,elMap:new Map().set("htmlAttrs",n.documentElement).set("bodyAttrs",n.body)};for(const g of["body","head"]){const v=n[g]?.children;for(const _ of v){const C=_.tagName.toLowerCase();if(!Hp.has(C))continue;const S=$y({tag:C,props:{}},{innerHTML:_.innerHTML,..._.getAttributeNames().reduce((R,y)=>(R[y]=_.getAttribute(y),R),{})||{}});if(S.key=_.getAttribute("data-hid")||void 0,S._d=Qu(S)||jp(S),a.elMap.has(S._d)){let R=1,y=S._d;for(;a.elMap.has(y);)y=`${S._d}:${R++}`;a.elMap.set(y,_)}else a.elMap.set(S._d,_)}}}a.pendingSideEffects={...a.sideEffects},a.sideEffects={};function l(g,v,_){const C=`${g}:${v}`;a.sideEffects[C]=_,delete a.pendingSideEffects[C]}function u({id:g,$el:v,tag:_}){const C=_.tag.endsWith("Attrs");a.elMap.set(g,v),C||(_.textContent&&_.textContent!==v.textContent&&(v.textContent=_.textContent),_.innerHTML&&_.innerHTML!==v.innerHTML&&(v.innerHTML=_.innerHTML),l(g,"el",()=>{v?.remove(),a.elMap.delete(g)}));for(const S in _.props){if(!Object.prototype.hasOwnProperty.call(_.props,S))continue;const R=_.props[S];if(S.startsWith("on")&&typeof R=="function"){const O=v?.dataset;if(O&&O[`${S}fired`]){const V=S.slice(0,-5);R.call(v,new Event(V.substring(2)))}v.getAttribute(`data-${S}`)!==""&&((_.tag==="bodyAttrs"?n.defaultView:v).addEventListener(S.substring(2),R.bind(v)),v.setAttribute(`data-${S}`,""));continue}const y=`attr:${S}`;if(S==="class"){if(!R)continue;for(const O of R)C&&l(g,`${y}:${O}`,()=>v.classList.remove(O)),!v.classList.contains(O)&&v.classList.add(O)}else if(S==="style"){if(!R)continue;for(const[O,V]of R)l(g,`${y}:${O}`,()=>{v.style.removeProperty(O)}),v.style.setProperty(O,V)}else R!==!1&&R!==null&&(v.getAttribute(S)!==R&&v.setAttribute(S,R===!0?"":String(R)),C&&l(g,y,()=>v.removeAttribute(S)))}}const h=[],f={bodyClose:void 0,bodyOpen:void 0,head:void 0},p=await o;for(const g of p){const{tag:v,shouldRender:_,id:C}=g;if(_){if(v.tag==="title"){n.title=v.textContent,l("title","",()=>n.title=a.title);continue}g.$el=g.$el||a.elMap.get(C),g.$el?u(g):Hp.has(v.tag)&&h.push(g)}}for(const g of h){const v=g.tag.tagPosition||"head";g.$el=n.createElement(g.tag.tag),u(g),f[v]=f[v]||n.createDocumentFragment(),f[v].appendChild(g.$el)}for(const g of p)await t.hooks.callHook("dom:renderTag",g,n,l);f.head&&n.head.appendChild(f.head),f.bodyOpen&&n.body.insertBefore(f.bodyOpen,n.body.firstChild),f.bodyClose&&n.body.appendChild(f.bodyClose);for(const g in a.pendingSideEffects)a.pendingSideEffects[g]();t._dom=a,await t.hooks.callHook("dom:rendered",{renders:p}),s()}).finally(()=>{t._domUpdatePromise=void 0,t.dirty=!1})),t._domUpdatePromise}function i0(t={}){const e=t.domOptions?.render||of;t.document=t.document||(typeof window<"u"?document:void 0);const n=t.document?.head.querySelector('script[id="unhead:payload"]')?.innerHTML||!1;return GR({...t,plugins:[...t.plugins||[],{key:"client",hooks:{"entries:updated":e}}],init:[n?JSON.parse(n):!1,...t.init||[]]})}function o0(t,e){let n=0;return()=>{const r=++n;e(()=>{n===r&&t()})}}function a0(t={}){const e=i0({domOptions:{render:o0(()=>of(e),n=>setTimeout(n,0))},...t});return e.install=KR(e),e}const c0={disableDefaults:!0},l0=Fn({name:"nuxt:head",enforce:"pre",setup(t){const e=a0(c0);t.vueApp.use(e);{let n=!0;const r=async()=>{n=!1,await of(e)};e.hooks.hook("dom:beforeRender",s=>{s.shouldRender=!n}),t.hooks.hook("page:start",()=>{n=!0}),t.hooks.hook("page:finish",()=>{t.isHydrating||r()}),t.hooks.hook("app:error",r),t.hooks.hook("app:suspense:resolve",r)}}});const Qs=typeof document<"u";function Gy(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function u0(t){return t.__esModule||t[Symbol.toStringTag]==="Module"||t.default&&Gy(t.default)}const De=Object.assign;function cu(t,e){const n={};for(const r in e){const s=e[r];n[r]=wn(s)?s.map(t):t(s)}return n}const Io=()=>{},wn=Array.isArray;function Qp(t,e){const n={};for(const r in t)n[r]=r in e?e[r]:t[r];return n}const zy=/#/g,h0=/&/g,f0=/\//g,d0=/=/g,p0=/\?/g,Ky=/\+/g,m0=/%5B/g,g0=/%5D/g,Qy=/%5E/g,_0=/%60/g,Yy=/%7B/g,y0=/%7C/g,Jy=/%7D/g,v0=/%20/g;function af(t){return t==null?"":encodeURI(""+t).replace(y0,"|").replace(m0,"[").replace(g0,"]")}function E0(t){return af(t).replace(Yy,"{").replace(Jy,"}").replace(Qy,"^")}function Yu(t){return af(t).replace(Ky,"%2B").replace(v0,"+").replace(zy,"%23").replace(h0,"%26").replace(_0,"`").replace(Yy,"{").replace(Jy,"}").replace(Qy,"^")}function w0(t){return Yu(t).replace(d0,"%3D")}function T0(t){return af(t).replace(zy,"%23").replace(p0,"%3F")}function I0(t){return T0(t).replace(f0,"%2F")}function Uo(t){if(t==null)return null;try{return decodeURIComponent(""+t)}catch{}return""+t}const b0=/\/$/,A0=t=>t.replace(b0,"");function lu(t,e,n="/"){let r,s={},i="",o="";const a=e.indexOf("#");let l=e.indexOf("?");return l=a>=0&&l>a?-1:l,l>=0&&(r=e.slice(0,l),i=e.slice(l,a>0?a:e.length),s=t(i.slice(1))),a>=0&&(r=r||e.slice(0,a),o=e.slice(a,e.length)),r=P0(r??e,n),{fullPath:r+i+o,path:r,query:s,hash:Uo(o)}}function R0(t,e){const n=e.query?t(e.query):"";return e.path+(n&&"?")+n+(e.hash||"")}function Yp(t,e){return!e||!t.toLowerCase().startsWith(e.toLowerCase())?t:t.slice(e.length)||"/"}function S0(t,e,n){const r=e.matched.length-1,s=n.matched.length-1;return r>-1&&r===s&&wi(e.matched[r],n.matched[s])&&Xy(e.params,n.params)&&t(e.query)===t(n.query)&&e.hash===n.hash}function wi(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function Xy(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(var n in t)if(!C0(t[n],e[n]))return!1;return!0}function C0(t,e){return wn(t)?Jp(t,e):wn(e)?Jp(e,t):t?.valueOf()===e?.valueOf()}function Jp(t,e){return wn(e)?t.length===e.length&&t.every((n,r)=>n===e[r]):t.length===1&&t[0]===e}function P0(t,e){if(t.startsWith("/"))return t;if(!t)return e;const n=e.split("/"),r=t.split("/"),s=r[r.length-1];(s===".."||s===".")&&r.push("");let i=n.length-1,o,a;for(o=0;o<r.length;o++)if(a=r[o],a!==".")if(a==="..")i>1&&i--;else break;return n.slice(0,i).join("/")+"/"+r.slice(o).join("/")}const sn={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};let Ju=(function(t){return t.pop="pop",t.push="push",t})({}),uu=(function(t){return t.back="back",t.forward="forward",t.unknown="",t})({});function k0(t){if(!t)if(Qs){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),A0(t)}const N0=/^[^#]+#/;function O0(t,e){return t.replace(N0,"#")+e}function D0(t,e){const n=document.documentElement.getBoundingClientRect(),r=t.getBoundingClientRect();return{behavior:e.behavior,left:r.left-n.left-(e.left||0),top:r.top-n.top-(e.top||0)}}const ol=()=>({left:window.scrollX,top:window.scrollY});function V0(t){let e;if("el"in t){const n=t.el,r=typeof n=="string"&&n.startsWith("#"),s=typeof n=="string"?r?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!s)return;e=D0(s,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.scrollX,e.top!=null?e.top:window.scrollY)}function Xp(t,e){return(history.state?history.state.position-e:-1)+t}const Xu=new Map;function x0(t,e){Xu.set(t,e)}function M0(t){const e=Xu.get(t);return Xu.delete(t),e}function L0(t){return typeof t=="string"||t&&typeof t=="object"}function Zy(t){return typeof t=="string"||typeof t=="symbol"}let Ye=(function(t){return t[t.MATCHER_NOT_FOUND=1]="MATCHER_NOT_FOUND",t[t.NAVIGATION_GUARD_REDIRECT=2]="NAVIGATION_GUARD_REDIRECT",t[t.NAVIGATION_ABORTED=4]="NAVIGATION_ABORTED",t[t.NAVIGATION_CANCELLED=8]="NAVIGATION_CANCELLED",t[t.NAVIGATION_DUPLICATED=16]="NAVIGATION_DUPLICATED",t})({});const ev=Symbol("");Ye.MATCHER_NOT_FOUND+"",Ye.NAVIGATION_GUARD_REDIRECT+"",Ye.NAVIGATION_ABORTED+"",Ye.NAVIGATION_CANCELLED+"",Ye.NAVIGATION_DUPLICATED+"";function Ti(t,e){return De(new Error,{type:t,[ev]:!0},e)}function Wn(t,e){return t instanceof Error&&ev in t&&(e==null||!!(t.type&e))}const U0=["params","query","hash"];function F0(t){if(typeof t=="string")return t;if(t.path!=null)return t.path;const e={};for(const n of U0)n in t&&(e[n]=t[n]);return JSON.stringify(e,null,2)}function B0(t){const e={};if(t===""||t==="?")return e;const n=(t[0]==="?"?t.slice(1):t).split("&");for(let r=0;r<n.length;++r){const s=n[r].replace(Ky," "),i=s.indexOf("="),o=Uo(i<0?s:s.slice(0,i)),a=i<0?null:Uo(s.slice(i+1));if(o in e){let l=e[o];wn(l)||(l=e[o]=[l]),l.push(a)}else e[o]=a}return e}function Zp(t){let e="";for(let n in t){const r=t[n];if(n=w0(n),r==null){r!==void 0&&(e+=(e.length?"&":"")+n);continue}(wn(r)?r.map(s=>s&&Yu(s)):[r&&Yu(r)]).forEach(s=>{s!==void 0&&(e+=(e.length?"&":"")+n,s!=null&&(e+="="+s))})}return e}function $0(t){const e={};for(const n in t){const r=t[n];r!==void 0&&(e[n]=wn(r)?r.map(s=>s==null?null:""+s):r==null?r:""+r)}return e}const H0=Symbol(""),em=Symbol(""),cf=Symbol(""),lf=Symbol(""),Zu=Symbol("");function ao(){let t=[];function e(r){return t.push(r),()=>{const s=t.indexOf(r);s>-1&&t.splice(s,1)}}function n(){t=[]}return{add:e,list:()=>t.slice(),reset:n}}function Pr(t,e,n,r,s,i=o=>o()){const o=r&&(r.enterCallbacks[s]=r.enterCallbacks[s]||[]);return()=>new Promise((a,l)=>{const u=p=>{p===!1?l(Ti(Ye.NAVIGATION_ABORTED,{from:n,to:e})):p instanceof Error?l(p):L0(p)?l(Ti(Ye.NAVIGATION_GUARD_REDIRECT,{from:e,to:p})):(o&&r.enterCallbacks[s]===o&&typeof p=="function"&&o.push(p),a())},h=i(()=>t.call(r&&r.instances[s],e,n,u));let f=Promise.resolve(h);t.length<3&&(f=f.then(u)),f.catch(p=>l(p))})}function hu(t,e,n,r,s=i=>i()){const i=[];for(const o of t)for(const a in o.components){let l=o.components[a];if(!(e!=="beforeRouteEnter"&&!o.instances[a]))if(Gy(l)){const u=(l.__vccOpts||l)[e];u&&i.push(Pr(u,n,r,o,a,s))}else{let u=l();i.push(()=>u.then(h=>{if(!h)throw new Error(`Couldn't resolve component "${a}" at "${o.path}"`);const f=u0(h)?h.default:h;o.mods[a]=h,o.components[a]=f;const p=(f.__vccOpts||f)[e];return p&&Pr(p,n,r,o,a,s)()}))}}return i}function j0(t,e){const n=[],r=[],s=[],i=Math.max(e.matched.length,t.matched.length);for(let o=0;o<i;o++){const a=e.matched[o];a&&(t.matched.find(u=>wi(u,a))?r.push(a):n.push(a));const l=t.matched[o];l&&(e.matched.find(u=>wi(u,l))||s.push(l))}return[n,r,s]}let q0=()=>location.protocol+"//"+location.host;function tv(t,e){const{pathname:n,search:r,hash:s}=e,i=t.indexOf("#");if(i>-1){let o=s.includes(t.slice(i))?t.slice(i).length:1,a=s.slice(o);return a[0]!=="/"&&(a="/"+a),Yp(a,"")}return Yp(n,t)+r+s}function W0(t,e,n,r){let s=[],i=[],o=null;const a=({state:p})=>{const g=tv(t,location),v=n.value,_=e.value;let C=0;if(p){if(n.value=g,e.value=p,o&&o===v){o=null;return}C=_?p.position-_.position:0}else r(g);s.forEach(S=>{S(n.value,v,{delta:C,type:Ju.pop,direction:C?C>0?uu.forward:uu.back:uu.unknown})})};function l(){o=n.value}function u(p){s.push(p);const g=()=>{const v=s.indexOf(p);v>-1&&s.splice(v,1)};return i.push(g),g}function h(){if(document.visibilityState==="hidden"){const{history:p}=window;if(!p.state)return;p.replaceState(De({},p.state,{scroll:ol()}),"")}}function f(){for(const p of i)p();i=[],window.removeEventListener("popstate",a),window.removeEventListener("pagehide",h),document.removeEventListener("visibilitychange",h)}return window.addEventListener("popstate",a),window.addEventListener("pagehide",h),document.addEventListener("visibilitychange",h),{pauseListeners:l,listen:u,destroy:f}}function tm(t,e,n,r=!1,s=!1){return{back:t,current:e,forward:n,replaced:r,position:window.history.length,scroll:s?ol():null}}function G0(t){const{history:e,location:n}=window,r={value:tv(t,n)},s={value:e.state};s.value||i(r.value,{back:null,current:r.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function i(l,u,h){const f=t.indexOf("#"),p=f>-1?(n.host&&document.querySelector("base")?t:t.slice(f))+l:q0()+t+l;try{e[h?"replaceState":"pushState"](u,"",p),s.value=u}catch(g){console.error(g),n[h?"replace":"assign"](p)}}function o(l,u){i(l,De({},e.state,tm(s.value.back,l,s.value.forward,!0),u,{position:s.value.position}),!0),r.value=l}function a(l,u){const h=De({},s.value,e.state,{forward:l,scroll:ol()});i(h.current,h,!0),i(l,De({},tm(r.value,l,null),{position:h.position+1},u),!1),r.value=l}return{location:r,state:s,push:a,replace:o}}function z0(t){t=k0(t);const e=G0(t),n=W0(t,e.state,e.location,e.replace);function r(i,o=!0){o||n.pauseListeners(),history.go(i)}const s=De({location:"",base:t,go:r,createHref:O0.bind(null,t)},e,n);return Object.defineProperty(s,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(s,"state",{enumerable:!0,get:()=>e.state.value}),s}let ys=(function(t){return t[t.Static=0]="Static",t[t.Param=1]="Param",t[t.Group=2]="Group",t})({});var dt=(function(t){return t[t.Static=0]="Static",t[t.Param=1]="Param",t[t.ParamRegExp=2]="ParamRegExp",t[t.ParamRegExpEnd=3]="ParamRegExpEnd",t[t.EscapeNext=4]="EscapeNext",t})(dt||{});const K0={type:ys.Static,value:""},Q0=/[a-zA-Z0-9_]/;function Y0(t){if(!t)return[[]];if(t==="/")return[[K0]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(g){throw new Error(`ERR (${n})/"${u}": ${g}`)}let n=dt.Static,r=n;const s=[];let i;function o(){i&&s.push(i),i=[]}let a=0,l,u="",h="";function f(){u&&(n===dt.Static?i.push({type:ys.Static,value:u}):n===dt.Param||n===dt.ParamRegExp||n===dt.ParamRegExpEnd?(i.length>1&&(l==="*"||l==="+")&&e(`A repeatable param (${u}) must be alone in its segment. eg: '/:ids+.`),i.push({type:ys.Param,value:u,regexp:h,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):e("Invalid state to consume buffer"),u="")}function p(){u+=l}for(;a<t.length;){if(l=t[a++],l==="\\"&&n!==dt.ParamRegExp){r=n,n=dt.EscapeNext;continue}switch(n){case dt.Static:l==="/"?(u&&f(),o()):l===":"?(f(),n=dt.Param):p();break;case dt.EscapeNext:p(),n=r;break;case dt.Param:l==="("?n=dt.ParamRegExp:Q0.test(l)?p():(f(),n=dt.Static,l!=="*"&&l!=="?"&&l!=="+"&&a--);break;case dt.ParamRegExp:l===")"?h[h.length-1]=="\\"?h=h.slice(0,-1)+l:n=dt.ParamRegExpEnd:h+=l;break;case dt.ParamRegExpEnd:f(),n=dt.Static,l!=="*"&&l!=="?"&&l!=="+"&&a--,h="";break;default:e("Unknown state");break}}return n===dt.ParamRegExp&&e(`Unfinished custom RegExp for param "${u}"`),f(),o(),s}const nm="[^/]+?",J0={sensitive:!1,strict:!1,start:!0,end:!0};var Lt=(function(t){return t[t._multiplier=10]="_multiplier",t[t.Root=90]="Root",t[t.Segment=40]="Segment",t[t.SubSegment=30]="SubSegment",t[t.Static=40]="Static",t[t.Dynamic=20]="Dynamic",t[t.BonusCustomRegExp=10]="BonusCustomRegExp",t[t.BonusWildcard=-50]="BonusWildcard",t[t.BonusRepeatable=-20]="BonusRepeatable",t[t.BonusOptional=-8]="BonusOptional",t[t.BonusStrict=.7000000000000001]="BonusStrict",t[t.BonusCaseSensitive=.25]="BonusCaseSensitive",t})(Lt||{});const X0=/[.+*?^${}()[\]/\\]/g;function Z0(t,e){const n=De({},J0,e),r=[];let s=n.start?"^":"";const i=[];for(const u of t){const h=u.length?[]:[Lt.Root];n.strict&&!u.length&&(s+="/");for(let f=0;f<u.length;f++){const p=u[f];let g=Lt.Segment+(n.sensitive?Lt.BonusCaseSensitive:0);if(p.type===ys.Static)f||(s+="/"),s+=p.value.replace(X0,"\\$&"),g+=Lt.Static;else if(p.type===ys.Param){const{value:v,repeatable:_,optional:C,regexp:S}=p;i.push({name:v,repeatable:_,optional:C});const R=S||nm;if(R!==nm){g+=Lt.BonusCustomRegExp;try{`${R}`}catch(O){throw new Error(`Invalid custom RegExp for param "${v}" (${R}): `+O.message)}}let y=_?`((?:${R})(?:/(?:${R}))*)`:`(${R})`;f||(y=C&&u.length<2?`(?:/${y})`:"/"+y),C&&(y+="?"),s+=y,g+=Lt.Dynamic,C&&(g+=Lt.BonusOptional),_&&(g+=Lt.BonusRepeatable),R===".*"&&(g+=Lt.BonusWildcard)}h.push(g)}r.push(h)}if(n.strict&&n.end){const u=r.length-1;r[u][r[u].length-1]+=Lt.BonusStrict}n.strict||(s+="/?"),n.end?s+="$":n.strict&&!s.endsWith("/")&&(s+="(?:/|$)");const o=new RegExp(s,n.sensitive?"":"i");function a(u){const h=u.match(o),f={};if(!h)return null;for(let p=1;p<h.length;p++){const g=h[p]||"",v=i[p-1];f[v.name]=g&&v.repeatable?g.split("/"):g}return f}function l(u){let h="",f=!1;for(const p of t){(!f||!h.endsWith("/"))&&(h+="/"),f=!1;for(const g of p)if(g.type===ys.Static)h+=g.value;else if(g.type===ys.Param){const{value:v,repeatable:_,optional:C}=g,S=v in u?u[v]:"";if(wn(S)&&!_)throw new Error(`Provided param "${v}" is an array but it is not repeatable (* or + modifiers)`);const R=wn(S)?S.join("/"):S;if(!R)if(C)p.length<2&&(h.endsWith("/")?h=h.slice(0,-1):f=!0);else throw new Error(`Missing required param "${v}"`);h+=R}}return h||"/"}return{re:o,score:r,keys:i,parse:a,stringify:l}}function eS(t,e){let n=0;for(;n<t.length&&n<e.length;){const r=e[n]-t[n];if(r)return r;n++}return t.length<e.length?t.length===1&&t[0]===Lt.Static+Lt.Segment?-1:1:t.length>e.length?e.length===1&&e[0]===Lt.Static+Lt.Segment?1:-1:0}function nv(t,e){let n=0;const r=t.score,s=e.score;for(;n<r.length&&n<s.length;){const i=eS(r[n],s[n]);if(i)return i;n++}if(Math.abs(s.length-r.length)===1){if(rm(r))return 1;if(rm(s))return-1}return s.length-r.length}function rm(t){const e=t[t.length-1];return t.length>0&&e[e.length-1]<0}const tS={strict:!1,end:!0,sensitive:!1};function nS(t,e,n){const r=Z0(Y0(t.path),n),s=De(r,{record:t,parent:e,children:[],alias:[]});return e&&!s.record.aliasOf==!e.record.aliasOf&&e.children.push(s),s}function rS(t,e){const n=[],r=new Map;e=Qp(tS,e);function s(f){return r.get(f)}function i(f,p,g){const v=!g,_=im(f);_.aliasOf=g&&g.record;const C=Qp(e,f),S=[_];if("alias"in f){const O=typeof f.alias=="string"?[f.alias]:f.alias;for(const V of O)S.push(im(De({},_,{components:g?g.record.components:_.components,path:V,aliasOf:g?g.record:_})))}let R,y;for(const O of S){const{path:V}=O;if(p&&V[0]!=="/"){const L=p.record.path,b=L[L.length-1]==="/"?"":"/";O.path=p.record.path+(V&&b+V)}if(R=nS(O,p,C),g?g.alias.push(R):(y=y||R,y!==R&&y.alias.push(R),v&&f.name&&!om(R)&&o(f.name)),rv(R)&&l(R),_.children){const L=_.children;for(let b=0;b<L.length;b++)i(L[b],R,g&&g.children[b])}g=g||R}return y?()=>{o(y)}:Io}function o(f){if(Zy(f)){const p=r.get(f);p&&(r.delete(f),n.splice(n.indexOf(p),1),p.children.forEach(o),p.alias.forEach(o))}else{const p=n.indexOf(f);p>-1&&(n.splice(p,1),f.record.name&&r.delete(f.record.name),f.children.forEach(o),f.alias.forEach(o))}}function a(){return n}function l(f){const p=oS(f,n);n.splice(p,0,f),f.record.name&&!om(f)&&r.set(f.record.name,f)}function u(f,p){let g,v={},_,C;if("name"in f&&f.name){if(g=r.get(f.name),!g)throw Ti(Ye.MATCHER_NOT_FOUND,{location:f});C=g.record.name,v=De(sm(p.params,g.keys.filter(y=>!y.optional).concat(g.parent?g.parent.keys.filter(y=>y.optional):[]).map(y=>y.name)),f.params&&sm(f.params,g.keys.map(y=>y.name))),_=g.stringify(v)}else if(f.path!=null)_=f.path,g=n.find(y=>y.re.test(_)),g&&(v=g.parse(_),C=g.record.name);else{if(g=p.name?r.get(p.name):n.find(y=>y.re.test(p.path)),!g)throw Ti(Ye.MATCHER_NOT_FOUND,{location:f,currentLocation:p});C=g.record.name,v=De({},p.params,f.params),_=g.stringify(v)}const S=[];let R=g;for(;R;)S.unshift(R.record),R=R.parent;return{name:C,path:_,params:v,matched:S,meta:iS(S)}}t.forEach(f=>i(f));function h(){n.length=0,r.clear()}return{addRoute:i,resolve:u,removeRoute:o,clearRoutes:h,getRoutes:a,getRecordMatcher:s}}function sm(t,e){const n={};for(const r of e)r in t&&(n[r]=t[r]);return n}function im(t){const e={path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:t.aliasOf,beforeEnter:t.beforeEnter,props:sS(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}};return Object.defineProperty(e,"mods",{value:{}}),e}function sS(t){const e={},n=t.props||!1;if("component"in t)e.default=n;else for(const r in t.components)e[r]=typeof n=="object"?n[r]:n;return e}function om(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function iS(t){return t.reduce((e,n)=>De(e,n.meta),{})}function oS(t,e){let n=0,r=e.length;for(;n!==r;){const i=n+r>>1;nv(t,e[i])<0?r=i:n=i+1}const s=aS(t);return s&&(r=e.lastIndexOf(s,r-1)),r}function aS(t){let e=t;for(;e=e.parent;)if(rv(e)&&nv(t,e)===0)return e}function rv({record:t}){return!!(t.name||t.components&&Object.keys(t.components).length||t.redirect)}function am(t){const e=Rt(cf),n=Rt(lf),r=Ue(()=>{const l=Me(t.to);return e.resolve(l)}),s=Ue(()=>{const{matched:l}=r.value,{length:u}=l,h=l[u-1],f=n.matched;if(!h||!f.length)return-1;const p=f.findIndex(wi.bind(null,h));if(p>-1)return p;const g=cm(l[u-2]);return u>1&&cm(h)===g&&f[f.length-1].path!==g?f.findIndex(wi.bind(null,l[u-2])):p}),i=Ue(()=>s.value>-1&&fS(n.params,r.value.params)),o=Ue(()=>s.value>-1&&s.value===n.matched.length-1&&Xy(n.params,r.value.params));function a(l={}){if(hS(l)){const u=e[Me(t.replace)?"replace":"push"](Me(t.to)).catch(Io);return t.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>u),u}return Promise.resolve()}return{route:r,href:Ue(()=>r.value.href),isActive:i,isExactActive:o,navigate:a}}function cS(t){return t.length===1?t[0]:t}const lS=tt({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:am,setup(t,{slots:e}){const n=Zr(am(t)),{options:r}=Rt(cf),s=Ue(()=>({[lm(t.activeClass,r.linkActiveClass,"router-link-active")]:n.isActive,[lm(t.exactActiveClass,r.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const i=e.default&&cS(e.default(n));return t.custom?i:Xe("a",{"aria-current":n.isExactActive?t.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:s.value},i)}}}),uS=lS;function hS(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function fS(t,e){for(const n in e){const r=e[n],s=t[n];if(typeof r=="string"){if(r!==s)return!1}else if(!wn(s)||s.length!==r.length||r.some((i,o)=>i.valueOf()!==s[o].valueOf()))return!1}return!0}function cm(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const lm=(t,e,n)=>t??e??n,dS=tt({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:e,slots:n}){const r=Rt(Zu),s=Ue(()=>t.route||r.value),i=Rt(em,0),o=Ue(()=>{let u=Me(i);const{matched:h}=s.value;let f;for(;(f=h[u])&&!f.components;)u++;return u}),a=Ue(()=>s.value.matched[o.value]);Zn(em,Ue(()=>o.value+1)),Zn(H0,a),Zn(Zu,s);const l=oe();return er(()=>[l.value,a.value,t.name],([u,h,f],[p,g,v])=>{h&&(h.instances[f]=u,g&&g!==h&&u&&u===p&&(h.leaveGuards.size||(h.leaveGuards=g.leaveGuards),h.updateGuards.size||(h.updateGuards=g.updateGuards))),u&&h&&(!g||!wi(h,g)||!p)&&(h.enterCallbacks[f]||[]).forEach(_=>_(u))},{flush:"post"}),()=>{const u=s.value,h=t.name,f=a.value,p=f&&f.components[h];if(!p)return um(n.default,{Component:p,route:u});const g=f.props[h],v=g?g===!0?u.params:typeof g=="function"?g(u):g:null,C=Xe(p,De({},v,e,{onVnodeUnmounted:S=>{S.component.isUnmounted&&(f.instances[h]=null)},ref:l}));return um(n.default,{Component:C,route:u})||C}}});function um(t,e){if(!t)return null;const n=t(e);return n.length===1?n[0]:n}const sv=dS;function pS(t){const e=rS(t.routes,t),n=t.parseQuery||B0,r=t.stringifyQuery||Zp,s=t.history,i=ao(),o=ao(),a=ao(),l=cr(sn);let u=sn;Qs&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const h=cu.bind(null,H=>""+H),f=cu.bind(null,I0),p=cu.bind(null,Uo);function g(H,re){let Z,ae;return Zy(H)?(Z=e.getRecordMatcher(H),ae=re):ae=H,e.addRoute(ae,Z)}function v(H){const re=e.getRecordMatcher(H);re&&e.removeRoute(re)}function _(){return e.getRoutes().map(H=>H.record)}function C(H){return!!e.getRecordMatcher(H)}function S(H,re){if(re=De({},re||l.value),typeof H=="string"){const D=lu(n,H,re.path),M=e.resolve({path:D.path},re),q=s.createHref(D.fullPath);return De(D,M,{params:p(M.params),hash:Uo(D.hash),redirectedFrom:void 0,href:q})}let Z;if(H.path!=null)Z=De({},H,{path:lu(n,H.path,re.path).path});else{const D=De({},H.params);for(const M in D)D[M]==null&&delete D[M];Z=De({},H,{params:f(D)}),re.params=f(re.params)}const ae=e.resolve(Z,re),Te=H.hash||"";ae.params=h(p(ae.params));const Fe=R0(r,De({},H,{hash:E0(Te),path:ae.path})),k=s.createHref(Fe);return De({fullPath:Fe,hash:Te,query:r===Zp?$0(H.query):H.query||{}},ae,{redirectedFrom:void 0,href:k})}function R(H){return typeof H=="string"?lu(n,H,l.value.path):De({},H)}function y(H,re){if(u!==H)return Ti(Ye.NAVIGATION_CANCELLED,{from:re,to:H})}function O(H){return b(H)}function V(H){return O(De(R(H),{replace:!0}))}function L(H,re){const Z=H.matched[H.matched.length-1];if(Z&&Z.redirect){const{redirect:ae}=Z;let Te=typeof ae=="function"?ae(H,re):ae;return typeof Te=="string"&&(Te=Te.includes("?")||Te.includes("#")?Te=R(Te):{path:Te},Te.params={}),De({query:H.query,hash:H.hash,params:Te.path!=null?{}:H.params},Te)}}function b(H,re){const Z=u=S(H),ae=l.value,Te=H.state,Fe=H.force,k=H.replace===!0,D=L(Z,ae);if(D)return b(De(R(D),{state:typeof D=="object"?De({},Te,D.state):Te,force:Fe,replace:k}),re||Z);const M=Z;M.redirectedFrom=re;let q;return!Fe&&S0(r,ae,Z)&&(q=Ti(Ye.NAVIGATION_DUPLICATED,{to:M,from:ae}),zt(ae,ae,!0,!1)),(q?Promise.resolve(q):A(M,ae)).catch(F=>Wn(F)?Wn(F,Ye.NAVIGATION_GUARD_REDIRECT)?F:An(F):X(F,M,ae)).then(F=>{if(F){if(Wn(F,Ye.NAVIGATION_GUARD_REDIRECT))return b(De({replace:k},R(F.to),{state:typeof F.to=="object"?De({},Te,F.to.state):Te,force:Fe}),re||M)}else F=N(M,ae,!0,k,Te);return P(M,ae,F),F})}function w(H,re){const Z=y(H,re);return Z?Promise.reject(Z):Promise.resolve()}function E(H){const re=un.values().next().value;return re&&typeof re.runWithContext=="function"?re.runWithContext(H):H()}function A(H,re){let Z;const[ae,Te,Fe]=j0(H,re);Z=hu(ae.reverse(),"beforeRouteLeave",H,re);for(const D of ae)D.leaveGuards.forEach(M=>{Z.push(Pr(M,H,re))});const k=w.bind(null,H,re);return Z.push(k),St(Z).then(()=>{Z=[];for(const D of i.list())Z.push(Pr(D,H,re));return Z.push(k),St(Z)}).then(()=>{Z=hu(Te,"beforeRouteUpdate",H,re);for(const D of Te)D.updateGuards.forEach(M=>{Z.push(Pr(M,H,re))});return Z.push(k),St(Z)}).then(()=>{Z=[];for(const D of Fe)if(D.beforeEnter)if(wn(D.beforeEnter))for(const M of D.beforeEnter)Z.push(Pr(M,H,re));else Z.push(Pr(D.beforeEnter,H,re));return Z.push(k),St(Z)}).then(()=>(H.matched.forEach(D=>D.enterCallbacks={}),Z=hu(Fe,"beforeRouteEnter",H,re,E),Z.push(k),St(Z))).then(()=>{Z=[];for(const D of o.list())Z.push(Pr(D,H,re));return Z.push(k),St(Z)}).catch(D=>Wn(D,Ye.NAVIGATION_CANCELLED)?D:Promise.reject(D))}function P(H,re,Z){a.list().forEach(ae=>E(()=>ae(H,re,Z)))}function N(H,re,Z,ae,Te){const Fe=y(H,re);if(Fe)return Fe;const k=re===sn,D=Qs?history.state:{};Z&&(ae||k?s.replace(H.fullPath,De({scroll:k&&D&&D.scroll},Te)):s.push(H.fullPath,Te)),l.value=H,zt(H,re,Z,k),An()}let I;function le(){I||(I=s.listen((H,re,Z)=>{if(!hn.listening)return;const ae=S(H),Te=L(ae,hn.currentRoute.value);if(Te){b(De(Te,{replace:!0,force:!0}),ae).catch(Io);return}u=ae;const Fe=l.value;Qs&&x0(Xp(Fe.fullPath,Z.delta),ol()),A(ae,Fe).catch(k=>Wn(k,Ye.NAVIGATION_ABORTED|Ye.NAVIGATION_CANCELLED)?k:Wn(k,Ye.NAVIGATION_GUARD_REDIRECT)?(b(De(R(k.to),{force:!0}),ae).then(D=>{Wn(D,Ye.NAVIGATION_ABORTED|Ye.NAVIGATION_DUPLICATED)&&!Z.delta&&Z.type===Ju.pop&&s.go(-1,!1)}).catch(Io),Promise.reject()):(Z.delta&&s.go(-Z.delta,!1),X(k,ae,Fe))).then(k=>{k=k||N(ae,Fe,!1),k&&(Z.delta&&!Wn(k,Ye.NAVIGATION_CANCELLED)?s.go(-Z.delta,!1):Z.type===Ju.pop&&Wn(k,Ye.NAVIGATION_ABORTED|Ye.NAVIGATION_DUPLICATED)&&s.go(-1,!1)),P(ae,Fe,k)}).catch(Io)}))}let ye=ao(),Q=ao(),ne;function X(H,re,Z){An(H);const ae=Q.list();return ae.length?ae.forEach(Te=>Te(H,re,Z)):console.error(H),Promise.reject(H)}function Ae(){return ne&&l.value!==sn?Promise.resolve():new Promise((H,re)=>{ye.add([H,re])})}function An(H){return ne||(ne=!H,le(),ye.list().forEach(([re,Z])=>H?Z(H):re()),ye.reset()),H}function zt(H,re,Z,ae){const{scrollBehavior:Te}=t;if(!Qs||!Te)return Promise.resolve();const Fe=!Z&&M0(Xp(H.fullPath,0))||(ae||!Z)&&history.state&&history.state.scroll||null;return As().then(()=>Te(H,re,Fe)).then(k=>k&&V0(k)).catch(k=>X(k,H,re))}const Tt=H=>s.go(H);let $n;const un=new Set,hn={currentRoute:l,listening:!0,addRoute:g,removeRoute:v,clearRoutes:e.clearRoutes,hasRoute:C,getRoutes:_,resolve:S,options:t,push:O,replace:V,go:Tt,back:()=>Tt(-1),forward:()=>Tt(1),beforeEach:i.add,beforeResolve:o.add,afterEach:a.add,onError:Q.add,isReady:Ae,install(H){H.component("RouterLink",uS),H.component("RouterView",sv),H.config.globalProperties.$router=hn,Object.defineProperty(H.config.globalProperties,"$route",{enumerable:!0,get:()=>Me(l)}),Qs&&!$n&&l.value===sn&&($n=!0,O(s.location).catch(ae=>{}));const re={};for(const ae in sn)Object.defineProperty(re,ae,{get:()=>l.value[ae],enumerable:!0});H.provide(cf,hn),H.provide(lf,Nn(re)),H.provide(Zu,l);const Z=H.unmount;un.add(H),H.unmount=function(){un.delete(H),un.size<1&&(u=sn,I&&I(),I=null,l.value=sn,$n=!1,ne=!1),Z()}}};function St(H){return H.reduce((re,Z)=>re.then(()=>E(Z)),Promise.resolve())}return hn}function iv(t){return Rt(lf)}const mS=/(:\w+)\([^)]+\)/g,gS=/(:\w+)[?+*]/g,_S=/:\w+/g,yS=(t,e)=>e.path.replace(mS,"$1").replace(gS,"$1").replace(_S,n=>t.params[n.slice(1)]?.toString()||""),eh=(t,e)=>{const n=t.route.matched.find(s=>s.components?.default===t.Component.type),r=e??n?.meta.key??(n&&yS(t.route,n));return typeof r=="function"?r(t.route):r},vS=(t,e)=>({default:()=>t?Xe(_I,t===!0?{}:t,e):e});function uf(t){return Array.isArray(t)?t:[t]}const ES="modulepreload",wS=function(t,e){return new URL(t,e).href},hm={},_t=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){let u=function(h){return Promise.all(h.map(f=>Promise.resolve(f).then(p=>({status:"fulfilled",value:p}),p=>({status:"rejected",reason:p}))))};const o=document.getElementsByTagName("link"),a=document.querySelector("meta[property=csp-nonce]"),l=a?.nonce||a?.getAttribute("nonce");s=u(n.map(h=>{if(h=wS(h,r),h in hm)return;hm[h]=!0;const f=h.endsWith(".css"),p=f?'[rel="stylesheet"]':"";if(r)for(let v=o.length-1;v>=0;v--){const _=o[v];if(_.href===h&&(!f||_.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${h}"]${p}`))return;const g=document.createElement("link");if(g.rel=f?"stylesheet":ES,f||(g.as="script"),g.crossOrigin="",g.href=h,l&&g.setAttribute("nonce",l),document.head.appendChild(g),f)return new Promise((v,_)=>{g.addEventListener("load",v),g.addEventListener("error",()=>_(new Error(`Unable to preload CSS for ${h}`)))})}))}function i(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return s.then(o=>{for(const a of o||[])a.status==="rejected"&&i(a.reason);return e().catch(i)})},TS={layout:!1},IS={layout:!1},bS={layout:!1},AS={layout:"dashboard"},RS={layout:"dashboard"},SS={layout:"coach"},CS={layout:"dashboard"},PS={layout:"coach"},kS={layout:"dashboard"},NS={layout:"dashboard"},fu=[{name:"index",path:"/",meta:TS||{},component:()=>_t(()=>import("./DGeCeOus.js"),__vite__mapDeps([0,1]),import.meta.url)},{name:"profilo",path:"/profilo",meta:IS||{},component:()=>_t(()=>import("./C2064cKa.js"),[],import.meta.url)},{name:"slug",path:"/:slug(.*)*",component:()=>_t(()=>import("./DyWmsFja.js"),__vite__mapDeps([2,3]),import.meta.url)},{name:"dev-upload",path:"/dev-upload",meta:bS||{},component:()=>_t(()=>import("./m8RY0HTx.js"),__vite__mapDeps([4,5,6]),import.meta.url)},{name:"panoramica",path:"/panoramica",meta:AS||{},component:()=>_t(()=>import("./ClG8XN-F.js"),__vite__mapDeps([7,8,9,10,11,12]),import.meta.url)},{name:"piste-id",path:"/piste/:id()",meta:RS||{},component:()=>_t(()=>import("./BXvf6jJM.js"),__vite__mapDeps([13,14,15,16,9,10,17,11,18]),import.meta.url)},{name:"piloti-id",path:"/piloti/:id()",meta:{...SS||{},middleware:["coach"]},component:()=>_t(()=>import("./8adkM3qp.js"),__vite__mapDeps([19,5,14,15,16,9,10,17,11,18,20,21,8,12,22,23,24,25,26]),import.meta.url)},{name:"piste",path:"/piste",meta:CS||{},component:()=>_t(()=>import("./BNYAhO3f.js"),__vite__mapDeps([27,24,9,10,11,25]),import.meta.url)},{name:"piloti",path:"/piloti",meta:{...PS||{},middleware:["coach"]},component:()=>_t(()=>import("./BAk4hA7r.js"),__vite__mapDeps([28,5,29]),import.meta.url)},{name:"sessioni-id",path:"/sessioni/:id()",meta:kS||{},component:()=>_t(()=>import("./DjgNbNK0.js"),__vite__mapDeps([30,20,9,10,17,21]),import.meta.url)},{name:"sessioni",path:"/sessioni",meta:NS||{},component:()=>_t(()=>import("./BmQjHev-.js"),__vite__mapDeps([31,22,15,16,9,10,23]),import.meta.url)}],ov=(t,e)=>({default:()=>t?Xe(ra,t===!0?{}:t,e):e.default?.()}),OS=/(:\w+)\([^)]+\)/g,DS=/(:\w+)[?+*]/g,VS=/:\w+/g;function fm(t){const e=t?.meta.key??t.path.replace(OS,"$1").replace(DS,"$1").replace(VS,n=>t.params[n.slice(1)]?.toString()||"");return typeof e=="function"?e(t):e}function xS(t,e){return t===e||e===sn?!1:fm(t)!==fm(e)?!0:!t.matched.every((r,s)=>r.components&&r.components.default===e.matched[s]?.components?.default)}function MS(t,e=!1){if(t){if(t.nodeName==="#comment"&&t.nodeValue==="[")return av(t,[],e);if(e){const n=t.cloneNode(!0);return n.querySelectorAll("[data-island-slot]").forEach(r=>{r.innerHTML=""}),[n.outerHTML]}return[t.outerHTML]}}function av(t,e=[],n=!1){if(t&&t.nodeName){if(US(t))return e;if(!LS(t)){const r=t.cloneNode(!0);n&&r.querySelectorAll?.("[data-island-slot]").forEach(s=>{s.innerHTML=""}),e.push(r.outerHTML)}av(t.nextSibling,e,n)}return e}function du(t,e){const n=t?MS(t):[e];return n?uy(n.join(""),n.length):Xe("div")}function LS(t){return t.nodeName==="#comment"&&t.nodeValue==="["}function US(t){return t.nodeName==="#comment"&&t.nodeValue==="]"}const FS={scrollBehavior(t,e,n){const r=et(),s=Gt().options?.scrollBehaviorType??"auto";if(t.path.replace(/\/$/,"")===e.path.replace(/\/$/,""))return e.hash&&!t.hash?{left:0,top:0}:t.hash?{el:t.hash,top:cv(t.hash),behavior:s}:!1;if((typeof t.meta.scrollToTop=="function"?t.meta.scrollToTop(t,e):t.meta.scrollToTop)===!1)return!1;const o=r._runningTransition?"page:transition:finish":"page:loading:end";return new Promise(a=>{if(e===sn){a(dm(t,e,n,s));return}r.hooks.hookOnce(o,()=>{requestAnimationFrame(()=>a(dm(t,e,n,s)))})})}};function cv(t){try{const e=document.querySelector(t);if(e)return(Number.parseFloat(getComputedStyle(e).scrollMarginTop)||0)+(Number.parseFloat(getComputedStyle(document.documentElement).scrollPaddingTop)||0)}catch{}return 0}function dm(t,e,n,r){if(n)return n;const s=xS(t,e);return t.hash?{el:t.hash,top:cv(t.hash),behavior:s?r:"instant"}:{left:0,top:0}}const BS={hashMode:!1,scrollBehaviorType:"auto"},Ir={...BS,...FS},$S=async(t,e)=>{let n,r;if(!t.meta?.validate)return;const s=([n,r]=ui(()=>Promise.resolve(t.meta.validate(t))),n=await n,r(),n);if(s===!0)return;const i=Is({fatal:!0,statusCode:s&&s.statusCode||404,statusMessage:s&&s.statusMessage||`Page Not Found: ${t.fullPath}`,data:{path:t.fullPath}});return typeof window<"u"&&window.history.pushState({},"",e.fullPath),i},HS=async t=>{let e,n;const r=([e,n]=ui(()=>sf({path:t.path})),e=await e,n(),e);if(r.redirect){const s=r.redirect.includes("#")?r.redirect:r.redirect+t.hash;return Ls(s,{acceptRelative:!0})?(window.location.href=s,!1):s}},jS=[$S,HS],th={coach:()=>_t(()=>import("./Dvyao-Ed.js"),[],import.meta.url)};function qS(t,e,n){const{pathname:r,search:s,hash:i}=e,o=t.indexOf("#");if(o>-1){const u=i.includes(t.slice(o))?t.slice(o).length:1;let h=i.slice(u);return h[0]!=="/"&&(h="/"+h),Np(h,"")}const a=Np(r,t),l=!n||vA(a,n)?a:n;return l+(l.includes("?")?"":s)+i}const WS=Fn({name:"nuxt:router",enforce:"pre",async setup(t){let e,n,r=rl().app.baseURL;const s=Ir.history?.(r)??z0(r),i=Ir.routes?([e,n]=ui(()=>Ir.routes(fu)),e=await e,n(),e??fu):fu;let o;const a=pS({...Ir,scrollBehavior:(C,S,R)=>{if(S===sn){o=R;return}if(Ir.scrollBehavior){if(a.options.scrollBehavior=Ir.scrollBehavior,"scrollRestoration"in window.history){const y=a.beforeEach(()=>{y(),window.history.scrollRestoration="manual"})}return Ir.scrollBehavior(C,sn,o||R)}},history:s,routes:i});"scrollRestoration"in window.history&&(window.history.scrollRestoration="auto"),t.vueApp.use(a);const l=cr(a.currentRoute.value);a.afterEach((C,S)=>{l.value=S}),Object.defineProperty(t.vueApp.config.globalProperties,"previousRoute",{get:()=>l.value});const u=qS(r,window.location,t.payload.path),h=cr(a.currentRoute.value),f=()=>{h.value=a.currentRoute.value};a.afterEach((C,S)=>{C.matched.at(-1)?.components?.default===S.matched.at(-1)?.components?.default&&f()});const p={sync:f};for(const C in h.value)Object.defineProperty(p,C,{get:()=>h.value[C],enumerable:!0});t._route=Nn(p),t._middleware||={global:[],named:{}};const g=sl();a.afterEach(async(C,S,R)=>{delete t._processingMiddleware,!t.isHydrating&&g.value&&await t.runWithContext(mR),R&&await t.callHook("page:loading:end")});try{[e,n]=ui(()=>a.isReady()),await e,n()}catch(C){[e,n]=ui(()=>t.runWithContext(()=>ms(C))),await e,n()}const v=u!==a.currentRoute.value.fullPath?a.resolve(u):a.currentRoute.value;f();const _=t.payload.state._layout;return a.beforeEach(async(C,S)=>{await t.callHook("page:loading:start"),C.meta=Zr(C.meta),t.isHydrating&&_&&!Ln(C.meta.layout)&&(C.meta.layout=_),t._processingMiddleware=!0;{const R=new Set([...jS,...t._middleware.global]);for(const y of C.matched){const O=y.meta.middleware;if(O)for(const V of uf(O))R.add(V)}{const y=await t.runWithContext(()=>sf({path:C.path}));if(y.appMiddleware)for(const O in y.appMiddleware)y.appMiddleware[O]?R.add(O):R.delete(O)}for(const y of R){const O=typeof y=="string"?t._middleware.named[y]||await th[y]?.().then(V=>V.default||V):y;if(!O)throw new Error(`Unknown route middleware: '${y}'.`);try{const V=await t.runWithContext(()=>O(C,S));if(!t.payload.serverRendered&&t.isHydrating&&(V===!1||V instanceof Error)){const L=V||Is({statusCode:404,statusMessage:`Page Not Found: ${u}`});return await t.runWithContext(()=>ms(L)),!1}if(V===!0)continue;if(V===!1)return V;if(V)return Ly(V)&&V.fatal&&await t.runWithContext(()=>ms(V)),V}catch(V){const L=Is(V);return L.fatal&&await t.runWithContext(()=>ms(L)),L}}}}),a.onError(async()=>{delete t._processingMiddleware,await t.callHook("page:loading:end")}),a.afterEach(C=>{if(C.matched.length===0)return t.runWithContext(()=>ms(Is({statusCode:404,fatal:!1,statusMessage:`Page not found: ${C.fullPath}`,data:{path:C.fullPath}})))}),t.hooks.hookOnce("app:created",async()=>{try{"name"in v&&(v.name=void 0),await a.replace({...v,force:!0}),a.options.scrollBehavior=Ir.scrollBehavior}catch(C){await t.runWithContext(()=>ms(C))}}),{provide:{router:a}}}}),pm=globalThis.requestIdleCallback||(t=>{const e=Date.now(),n={didTimeout:!1,timeRemaining:()=>Math.max(0,50-(Date.now()-e))};return setTimeout(()=>{t(n)},1)}),vM=globalThis.cancelIdleCallback||(t=>{clearTimeout(t)}),hf=t=>{const e=et();e.isHydrating?e.hooks.hookOnce("app:suspense:resolve",()=>{pm(()=>t())}):pm(()=>t())},GS=Fn({name:"nuxt:payload",setup(t){const e=new Set;Gt().beforeResolve(async(n,r)=>{if(n.path===r.path)return;const s=await Kp(n.path);if(s){for(const i of e)delete t.static.data[i];for(const i in s.data)i in t.static.data||e.add(i),t.static.data[i]=s.data[i]}}),hf(()=>{t.hooks.hook("link:prefetch",async n=>{const{hostname:r}=new URL(n,window.location.href);r===window.location.hostname&&await Kp(n).catch(()=>{console.warn("[nuxt] Error preloading payload for",n)})}),navigator.connection?.effectiveType!=="slow-2g"&&setTimeout(il,1e3)})}}),zS=Fn(()=>{const t=Gt();hf(()=>{t.beforeResolve(async()=>{await new Promise(e=>{setTimeout(e,100),requestAnimationFrame(()=>{setTimeout(e,0)})})})})}),KS=Fn(t=>{let e;async function n(){let r;try{r=await il()}catch(s){const i=s;if(!("status"in i&&(i.status===404||i.status===403)))throw i}e&&clearTimeout(e),e=setTimeout(n,Up);try{const s=await $fetch(nf("builds/latest.json")+`?${Date.now()}`);s.id!==r?.id&&(t.hooks.callHook("app:manifest:update",s),e&&clearTimeout(e))}catch{}}hf(()=>{e=setTimeout(n,Up)})});function QS(t={}){const e=t.path||window.location.pathname;let n={};try{n=vc(sessionStorage.getItem("nuxt:reload")||"{}")}catch{}if(t.force||n?.path!==e||n?.expires<Date.now()){try{sessionStorage.setItem("nuxt:reload",JSON.stringify({path:e,expires:Date.now()+(t.ttl??1e4)}))}catch{}if(t.persistState)try{sessionStorage.setItem("nuxt:reload:state",JSON.stringify({state:et().payload.state}))}catch{}window.location.pathname!==e?window.location.href=e:window.location.reload()}}const YS=Fn({name:"nuxt:chunk-reload",setup(t){const e=Gt(),n=rl(),r=new Set;e.beforeEach(()=>{r.clear()}),t.hook("app:chunkError",({error:i})=>{r.add(i)});function s(i){const o=ef(n.app.baseURL,i.fullPath);QS({path:o,persistState:!0})}t.hook("app:manifest:update",()=>{e.beforeResolve(s)}),e.onError((i,o)=>{r.has(i)&&s(o)})}}),JS=Fn({name:"nuxt:global-components"}),xr={coach:dc(()=>_t(()=>import("./DqL2FgzT.js"),__vite__mapDeps([32,33]),import.meta.url).then(t=>t.default||t)),dashboard:dc(()=>_t(()=>import("./Fa89Ob6D.js"),__vite__mapDeps([34,5,35]),import.meta.url).then(t=>t.default||t))};function XS(t){if(t?.__asyncLoader&&!t.__asyncResolved)return t.__asyncLoader()}async function ZS(t,e=Gt()){const{path:n,matched:r}=e.resolve(t);if(!r.length||(e._routePreloaded||=new Set,e._routePreloaded.has(n)))return;const s=e._preloadPromises||=[];if(s.length>4)return Promise.all(s).then(()=>ZS(t,e));e._routePreloaded.add(n);for(const i of r){const o=i.components?.default;if(typeof o!="function")continue;const a=Promise.resolve(o()).catch(()=>{}).finally(()=>s.splice(s.indexOf(a)));s.push(a)}await Promise.all(s)}const eC=Fn({name:"nuxt:prefetch",setup(t){const e=Gt();t.hooks.hook("app:mounted",()=>{e.beforeEach(async n=>{const r=n?.meta?.layout;r&&typeof xr[r]=="function"&&await xr[r]()})}),t.hooks.hook("link:prefetch",n=>{if(Ls(n))return;const r=e.resolve(n);if(!r)return;const s=r.meta.layout;let i=uf(r.meta.middleware);i=i.filter(o=>typeof o=="string");for(const o of i)typeof th[o]=="function"&&th[o]();typeof s=="string"&&s in xr&&XS(xr[s])})}}),tC={mounted(t,e){t._clickOutside=n=>{t===n.target||t.contains(n.target)||e.value(n)},document.addEventListener("click",t._clickOutside)},unmounted(t){t._clickOutside&&document.removeEventListener("click",t._clickOutside)}},nC=Fn(t=>{t.vueApp.directive("click-outside",tC)}),rC=[s0,l0,WS,GS,zS,KS,YS,JS,eC,nC],sC={class:"notification-icon"},iC={key:0,width:"16",height:"16",viewBox:"0 0 16 16"},oC={key:1,width:"16",height:"16",viewBox:"0 0 16 16"},aC={key:2,width:"16",height:"16",viewBox:"0 0 16 16"},cC={class:"notification-message"},lC=tt({__name:"SyncNotification",props:{results:{},visible:{type:Boolean}},emits:["close"],setup(t,{emit:e}){const n=t,r=e,s=oe(!1);let i=null;er(()=>n.visible,h=>{s.value=h,h&&i&&clearTimeout(i),h&&(i=setTimeout(()=>{s.value=!1,r("close")},5e3))});const o=Ue(()=>{const h=n.results.filter(v=>v.status==="created").length,f=n.results.filter(v=>v.status==="updated").length,p=n.results.filter(v=>v.status==="skipped").length,g=n.results.filter(v=>v.status==="error").length;return{created:h,updated:f,skipped:p,errors:g,total:n.results.length}}),a=Ue(()=>o.value.errors>0?"error":o.value.created>0||o.value.updated>0?"success":(o.value.total===0,"info")),l=Ue(()=>{const h=o.value;return h.total===0?"Nessun file da sincronizzare":h.errors>0?`${h.errors} errori durante la sincronizzazione`:h.created>0&&h.updated>0?`${h.created} nuovi, ${h.updated} aggiornati`:h.created>0?`${h.created} sessioni sincronizzate`:h.updated>0?`${h.updated} sessioni aggiornate`:h.skipped>0?`${h.skipped} file saltati (gi sincronizzati o di altri utenti)`:"Sincronizzazione completata"}),u=()=>{s.value=!1,r("close")};return(h,f)=>(fe(),Ht(ra,{name:"slide"},{default:tn(()=>[s.value?(fe(),be("div",{key:0,class:Wt(["sync-notification",a.value]),onClick:u},[B("div",sC,[a.value==="success"?(fe(),be("svg",iC,[...f[0]||(f[0]=[B("path",{d:"M6 10.8l-3-3L1.6 9.2l4.4 4.4 9-9L13.6 3 6 10.8z",fill:"currentColor"},null,-1)])])):a.value==="error"?(fe(),be("svg",oC,[...f[1]||(f[1]=[B("path",{d:"M8 1a7 7 0 100 14A7 7 0 008 1zm0 10.5a1 1 0 110-2 1 1 0 010 2zM9 7H7V4h2v3z",fill:"currentColor"},null,-1)])])):(fe(),be("svg",aC,[...f[2]||(f[2]=[B("path",{d:"M8 1a7 7 0 100 14A7 7 0 008 1zm1 10H7V9h2v2zm0-3H7V4h2v4z",fill:"currentColor"},null,-1)])]))]),B("span",cC,qr(l.value),1),B("button",{class:"notification-close",onClick:nl(u,["stop"])},"")],2)):Gr("",!0)]),_:1}))}}),ln=(t,e)=>{const n=t.__vccOpts||t;for(const[r,s]of e)n[r]=s;return n},uC=Object.assign(ln(lC,[["__scopeId","data-v-2cbc757e"]]),{__name:"ElectronSyncNotification"}),hC=()=>{};var mm={};const lv=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},fC=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],a=t[n++],l=((s&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},uv={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,a=o?t[s+1]:0,l=s+2<t.length,u=l?t[s+2]:0,h=i>>2,f=(i&3)<<4|a>>4;let p=(a&15)<<2|u>>6,g=u&63;l||(g=64,o||(p=64)),r.push(n[h],n[f],n[p],n[g])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(lv(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):fC(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],a=s<t.length?n[t.charAt(s)]:0;++s;const u=s<t.length?n[t.charAt(s)]:64;++s;const f=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||a==null||u==null||f==null)throw new dC;const p=i<<2|a>>4;if(r.push(p),u!==64){const g=a<<4&240|u>>2;if(r.push(g),f!==64){const v=u<<6&192|f;r.push(v)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class dC extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const pC=function(t){const e=lv(t);return uv.encodeByteArray(e,!0)},Ac=function(t){return pC(t).replace(/\./g,"")},hv=function(t){try{return uv.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function mC(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const gC=()=>mC().__FIREBASE_DEFAULTS__,_C=()=>{if(typeof process>"u"||typeof mm>"u")return;const t=mm.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},yC=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&hv(t[1]);return e&&JSON.parse(e)},al=()=>{try{return hC()||gC()||_C()||yC()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},fv=t=>al()?.emulatorHosts?.[t],vC=t=>{const e=fv(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},dv=()=>al()?.config,pv=t=>al()?.[`_${t}`];class EC{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}function Vi(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function mv(t){return(await fetch(t,{credentials:"include"})).ok}function wC(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...t};return[Ac(JSON.stringify(n)),Ac(JSON.stringify(o)),""].join(".")}const bo={};function TC(){const t={prod:[],emulator:[]};for(const e of Object.keys(bo))bo[e]?t.emulator.push(e):t.prod.push(e);return t}function IC(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let gm=!1;function gv(t,e){if(typeof window>"u"||typeof document>"u"||!Vi(window.location.host)||bo[t]===e||bo[t]||gm)return;bo[t]=e;function n(p){return`__firebase__banner__${p}`}const r="__firebase__banner",i=TC().prod.length>0;function o(){const p=document.getElementById(r);p&&p.remove()}function a(p){p.style.display="flex",p.style.background="#7faaf0",p.style.position="fixed",p.style.bottom="5px",p.style.left="5px",p.style.padding=".5em",p.style.borderRadius="5px",p.style.alignItems="center"}function l(p,g){p.setAttribute("width","24"),p.setAttribute("id",g),p.setAttribute("height","24"),p.setAttribute("viewBox","0 0 24 24"),p.setAttribute("fill","none"),p.style.marginLeft="-6px"}function u(){const p=document.createElement("span");return p.style.cursor="pointer",p.style.marginLeft="16px",p.style.fontSize="24px",p.innerHTML=" &times;",p.onclick=()=>{gm=!0,o()},p}function h(p,g){p.setAttribute("id",g),p.innerText="Learn more",p.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",p.setAttribute("target","__blank"),p.style.paddingLeft="5px",p.style.textDecoration="underline"}function f(){const p=IC(r),g=n("text"),v=document.getElementById(g)||document.createElement("span"),_=n("learnmore"),C=document.getElementById(_)||document.createElement("a"),S=n("preprendIcon"),R=document.getElementById(S)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(p.created){const y=p.element;a(y),h(C,_);const O=u();l(R,S),y.append(R,v,C,O),document.body.appendChild(y)}i?(v.innerText="Preview backend disconnected.",R.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(R.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,v.innerText="Preview backend running in this workspace."),v.setAttribute("id",g)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",f):f()}function Vt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function bC(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Vt())}function AC(){const t=al()?.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function RC(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function SC(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function CC(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function PC(){const t=Vt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function kC(){return!AC()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function NC(){try{return typeof indexedDB=="object"}catch{return!1}}function OC(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{e(s.error?.message||"")}}catch(n){e(n)}})}const DC="FirebaseError";class pr extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=DC,Object.setPrototypeOf(this,pr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ia.prototype.create)}}class ia{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?VC(i,r):"Error",a=`${this.serviceName}: ${o} (${s}).`;return new pr(s,a,r)}}function VC(t,e){return t.replace(xC,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const xC=/\{\$([^}]+)}/g;function MC(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Cs(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(_m(i)&&_m(o)){if(!Cs(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function _m(t){return t!==null&&typeof t=="object"}function oa(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function ho(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,i]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function fo(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function LC(t,e){const n=new UC(t,e);return n.subscribe.bind(n)}class UC{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");FC(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=pu),s.error===void 0&&(s.error=pu),s.complete===void 0&&(s.complete=pu);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function FC(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function pu(){}function lt(t){return t&&t._delegate?t._delegate:t}class Ps{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const gs="[DEFAULT]";class BC{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new EC;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(HC(e))try{this.getOrInitializeService({instanceIdentifier:gs})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=gs){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=gs){return this.instances.has(e)}getOptions(e=gs){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);r===a&&o.resolve(s)}return s}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),s=this.onInitCallbacks.get(r)??new Set;s.add(e),this.onInitCallbacks.set(r,s);const i=this.instances.get(r);return i&&e(i,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:$C(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=gs){return this.component?this.component.multipleInstances?e:gs:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function $C(t){return t===gs?void 0:t}function HC(t){return t.instantiationMode==="EAGER"}class jC{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new BC(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}var Re;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Re||(Re={}));const qC={debug:Re.DEBUG,verbose:Re.VERBOSE,info:Re.INFO,warn:Re.WARN,error:Re.ERROR,silent:Re.SILENT},WC=Re.INFO,GC={[Re.DEBUG]:"log",[Re.VERBOSE]:"log",[Re.INFO]:"info",[Re.WARN]:"warn",[Re.ERROR]:"error"},zC=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=GC[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class ff{constructor(e){this.name=e,this._logLevel=WC,this._logHandler=zC,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Re))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?qC[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Re.DEBUG,...e),this._logHandler(this,Re.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Re.VERBOSE,...e),this._logHandler(this,Re.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Re.INFO,...e),this._logHandler(this,Re.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Re.WARN,...e),this._logHandler(this,Re.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Re.ERROR,...e),this._logHandler(this,Re.ERROR,...e)}}const KC=(t,e)=>e.some(n=>t instanceof n);let ym,vm;function QC(){return ym||(ym=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function YC(){return vm||(vm=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const _v=new WeakMap,nh=new WeakMap,yv=new WeakMap,mu=new WeakMap,df=new WeakMap;function JC(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(Fr(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&_v.set(n,t)}).catch(()=>{}),df.set(e,t),e}function XC(t){if(nh.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});nh.set(t,e)}let rh={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return nh.get(t);if(e==="objectStoreNames")return t.objectStoreNames||yv.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Fr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function ZC(t){rh=t(rh)}function eP(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(gu(this),e,...n);return yv.set(r,e.sort?e.sort():[e]),Fr(r)}:YC().includes(t)?function(...e){return t.apply(gu(this),e),Fr(_v.get(this))}:function(...e){return Fr(t.apply(gu(this),e))}}function tP(t){return typeof t=="function"?eP(t):(t instanceof IDBTransaction&&XC(t),KC(t,QC())?new Proxy(t,rh):t)}function Fr(t){if(t instanceof IDBRequest)return JC(t);if(mu.has(t))return mu.get(t);const e=tP(t);return e!==t&&(mu.set(t,e),df.set(e,t)),e}const gu=t=>df.get(t);function nP(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),a=Fr(o);return r&&o.addEventListener("upgradeneeded",l=>{r(Fr(o.result),l.oldVersion,l.newVersion,Fr(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{i&&l.addEventListener("close",()=>i()),s&&l.addEventListener("versionchange",u=>s(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}const rP=["get","getKey","getAll","getAllKeys","count"],sP=["put","add","delete","clear"],_u=new Map;function Em(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(_u.get(e))return _u.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=sP.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||rP.includes(n)))return;const i=async function(o,...a){const l=this.transaction(o,s?"readwrite":"readonly");let u=l.store;return r&&(u=u.index(a.shift())),(await Promise.all([u[n](...a),s&&l.done]))[0]};return _u.set(e,i),i}ZC(t=>({...t,get:(e,n,r)=>Em(e,n)||t.get(e,n,r),has:(e,n)=>!!Em(e,n)||t.has(e,n)}));class iP{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(oP(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function oP(t){return t.getComponent()?.type==="VERSION"}const sh="@firebase/app",wm="0.14.6";const lr=new ff("@firebase/app"),aP="@firebase/app-compat",cP="@firebase/analytics-compat",lP="@firebase/analytics",uP="@firebase/app-check-compat",hP="@firebase/app-check",fP="@firebase/auth",dP="@firebase/auth-compat",pP="@firebase/database",mP="@firebase/data-connect",gP="@firebase/database-compat",_P="@firebase/functions",yP="@firebase/functions-compat",vP="@firebase/installations",EP="@firebase/installations-compat",wP="@firebase/messaging",TP="@firebase/messaging-compat",IP="@firebase/performance",bP="@firebase/performance-compat",AP="@firebase/remote-config",RP="@firebase/remote-config-compat",SP="@firebase/storage",CP="@firebase/storage-compat",PP="@firebase/firestore",kP="@firebase/ai",NP="@firebase/firestore-compat",OP="firebase",DP="12.6.0";const ih="[DEFAULT]",VP={[sh]:"fire-core",[aP]:"fire-core-compat",[lP]:"fire-analytics",[cP]:"fire-analytics-compat",[hP]:"fire-app-check",[uP]:"fire-app-check-compat",[fP]:"fire-auth",[dP]:"fire-auth-compat",[pP]:"fire-rtdb",[mP]:"fire-data-connect",[gP]:"fire-rtdb-compat",[_P]:"fire-fn",[yP]:"fire-fn-compat",[vP]:"fire-iid",[EP]:"fire-iid-compat",[wP]:"fire-fcm",[TP]:"fire-fcm-compat",[IP]:"fire-perf",[bP]:"fire-perf-compat",[AP]:"fire-rc",[RP]:"fire-rc-compat",[SP]:"fire-gcs",[CP]:"fire-gcs-compat",[PP]:"fire-fst",[NP]:"fire-fst-compat",[kP]:"fire-vertex","fire-js":"fire-js",[OP]:"fire-js-all"};const Fo=new Map,xP=new Map,oh=new Map;function Tm(t,e){try{t.container.addComponent(e)}catch(n){lr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Ii(t){const e=t.name;if(oh.has(e))return lr.debug(`There were multiple attempts to register component ${e}.`),!1;oh.set(e,t);for(const n of Fo.values())Tm(n,t);for(const n of xP.values())Tm(n,t);return!0}function pf(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function on(t){return t==null?!1:t.settings!==void 0}const MP={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Br=new ia("app","Firebase",MP);class LP{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Ps("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Br.create("app-deleted",{appName:this._name})}}const xi=DP;function vv(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:ih,automaticDataCollectionEnabled:!0,...e},s=r.name;if(typeof s!="string"||!s)throw Br.create("bad-app-name",{appName:String(s)});if(n||(n=dv()),!n)throw Br.create("no-options");const i=Fo.get(s);if(i){if(Cs(n,i.options)&&Cs(r,i.config))return i;throw Br.create("duplicate-app",{appName:s})}const o=new jC(s);for(const l of oh.values())o.addComponent(l);const a=new LP(n,r,o);return Fo.set(s,a),a}function Ev(t=ih){const e=Fo.get(t);if(!e&&t===ih&&dv())return vv();if(!e)throw Br.create("no-app",{appName:t});return e}function Im(){return Array.from(Fo.values())}function $r(t,e,n){let r=VP[t]??t;n&&(r+=`-${n}`);const s=r.match(/\s|\//),i=e.match(/\s|\//);if(s||i){const o=[`Unable to register library "${r}" with version "${e}":`];s&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&i&&o.push("and"),i&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),lr.warn(o.join(" "));return}Ii(new Ps(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}const UP="firebase-heartbeat-database",FP=1,Bo="firebase-heartbeat-store";let yu=null;function wv(){return yu||(yu=nP(UP,FP,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Bo)}catch(n){console.warn(n)}}}}).catch(t=>{throw Br.create("idb-open",{originalErrorMessage:t.message})})),yu}async function BP(t){try{const n=(await wv()).transaction(Bo),r=await n.objectStore(Bo).get(Tv(t));return await n.done,r}catch(e){if(e instanceof pr)lr.warn(e.message);else{const n=Br.create("idb-get",{originalErrorMessage:e?.message});lr.warn(n.message)}}}async function bm(t,e){try{const r=(await wv()).transaction(Bo,"readwrite");await r.objectStore(Bo).put(e,Tv(t)),await r.done}catch(n){if(n instanceof pr)lr.warn(n.message);else{const r=Br.create("idb-set",{originalErrorMessage:n?.message});lr.warn(r.message)}}}function Tv(t){return`${t.name}!${t.options.appId}`}const $P=1024,HP=30;class jP{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new WP(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=Am();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(s=>s.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats.length>HP){const s=GP(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){lr.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=Am(),{heartbeatsToSend:n,unsentEntries:r}=qP(this._heartbeatsCache.heartbeats),s=Ac(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(e){return lr.warn(e),""}}}function Am(){return new Date().toISOString().substring(0,10)}function qP(t,e=$P){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),Rm(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),Rm(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class WP{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return NC()?OC().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await BP(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return bm(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return bm(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function Rm(t){return Ac(JSON.stringify({version:2,heartbeats:t})).length}function GP(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}function zP(t){Ii(new Ps("platform-logger",e=>new iP(e),"PRIVATE")),Ii(new Ps("heartbeat",e=>new jP(e),"PRIVATE")),$r(sh,wm,t),$r(sh,wm,"esm2020"),$r("fire-js","")}zP("");function Iv(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const KP=Iv,bv=new ia("auth","Firebase",Iv());const Rc=new ff("@firebase/auth");function QP(t,...e){Rc.logLevel<=Re.WARN&&Rc.warn(`Auth (${xi}): ${t}`,...e)}function Xa(t,...e){Rc.logLevel<=Re.ERROR&&Rc.error(`Auth (${xi}): ${t}`,...e)}function Tn(t,...e){throw mf(t,...e)}function Dn(t,...e){return mf(t,...e)}function Av(t,e,n){const r={...KP(),[e]:n};return new ia("auth","Firebase",r).create(e,{appName:t.name})}function rr(t){return Av(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function mf(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return bv.create(t,...e)}function pe(t,e,...n){if(!t)throw mf(e,...n)}function Yn(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Xa(e),new Error(e)}function ur(t,e){t||Yn(e)}function ah(){return typeof self<"u"&&self.location?.href||""}function YP(){return Sm()==="http:"||Sm()==="https:"}function Sm(){return typeof self<"u"&&self.location?.protocol||null}function JP(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(YP()||SC()||"connection"in navigator)?navigator.onLine:!0}function XP(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}class aa{constructor(e,n){this.shortDelay=e,this.longDelay=n,ur(n>e,"Short delay should be less than long delay!"),this.isMobile=bC()||CC()}get(){return JP()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function gf(t,e){ur(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}class Rv{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Yn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Yn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Yn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const ZP={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const ek=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],tk=new aa(3e4,6e4);function mr(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function Bn(t,e,n,r,s={}){return Sv(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const a=oa({key:t.config.apiKey,...o}).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const u={method:e,headers:l,...i};return RC()||(u.referrerPolicy="no-referrer"),t.emulatorConfig&&Vi(t.emulatorConfig.host)&&(u.credentials="include"),Rv.fetch()(await Cv(t,t.config.apiHost,n,a),u)})}async function Sv(t,e,n){t._canInitEmulator=!1;const r={...ZP,...e};try{const s=new rk(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw $a(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const a=i.ok?o.errorMessage:o.error.message,[l,u]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw $a(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw $a(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw $a(t,"user-disabled",o);const h=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw Av(t,h,u);Tn(t,h)}}catch(s){if(s instanceof pr)throw s;Tn(t,"network-request-failed",{message:String(s)})}}async function ca(t,e,n,r,s={}){const i=await Bn(t,e,n,r,s);return"mfaPendingCredential"in i&&Tn(t,"multi-factor-auth-required",{_serverResponse:i}),i}async function Cv(t,e,n,r){const s=`${e}${n}?${r}`,i=t,o=i.config.emulator?gf(t.config,s):`${t.config.apiScheme}://${s}`;return ek.includes(n)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(o).toString():o}function nk(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class rk{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Dn(this.auth,"network-request-failed")),tk.get())})}}function $a(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=Dn(t,e,r);return s.customData._tokenResponse=n,s}function Cm(t){return t!==void 0&&t.enterprise!==void 0}class sk{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return nk(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function ik(t,e){return Bn(t,"GET","/v2/recaptchaConfig",mr(t,e))}async function ok(t,e){return Bn(t,"POST","/v1/accounts:delete",e)}async function Sc(t,e){return Bn(t,"POST","/v1/accounts:lookup",e)}function Ao(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function ak(t,e=!1){const n=lt(t),r=await n.getIdToken(e),s=_f(r);pe(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i?.sign_in_provider;return{claims:s,token:r,authTime:Ao(vu(s.auth_time)),issuedAtTime:Ao(vu(s.iat)),expirationTime:Ao(vu(s.exp)),signInProvider:o||null,signInSecondFactor:i?.sign_in_second_factor||null}}function vu(t){return Number(t)*1e3}function _f(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Xa("JWT malformed, contained fewer than 3 sections"),null;try{const s=hv(n);return s?JSON.parse(s):(Xa("Failed to decode base64 JWT payload"),null)}catch(s){return Xa("Caught error parsing JWT payload as JSON",s?.toString()),null}}function Pm(t){const e=_f(t);return pe(e,"internal-error"),pe(typeof e.exp<"u","internal-error"),pe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function bi(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof pr&&ck(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function ck({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}class lk{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class ch{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ao(this.lastLoginAt),this.creationTime=Ao(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Cc(t){const e=t.auth,n=await t.getIdToken(),r=await bi(t,Sc(e,{idToken:n}));pe(r?.users.length,e,"internal-error");const s=r.users[0];t._notifyReloadListener(s);const i=s.providerUserInfo?.length?Pv(s.providerUserInfo):[],o=hk(t.providerData,i),a=t.isAnonymous,l=!(t.email&&s.passwordHash)&&!o?.length,u=a?l:!1,h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new ch(s.createdAt,s.lastLoginAt),isAnonymous:u};Object.assign(t,h)}async function uk(t){const e=lt(t);await Cc(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function hk(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function Pv(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}async function fk(t,e){const n=await Sv(t,{},async()=>{const r=oa({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=await Cv(t,s,"/v1/token",`key=${i}`),a=await t._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";const l={method:"POST",headers:a,body:r};return t.emulatorConfig&&Vi(t.emulatorConfig.host)&&(l.credentials="include"),Rv.fetch()(o,l)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function dk(t,e){return Bn(t,"POST","/v2/accounts:revokeToken",mr(t,e))}class hi{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){pe(e.idToken,"internal-error"),pe(typeof e.idToken<"u","internal-error"),pe(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Pm(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){pe(e.length!==0,"internal-error");const n=Pm(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(pe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await fk(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new hi;return r&&(pe(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(pe(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(pe(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new hi,this.toJSON())}_performRefresh(){return Yn("not implemented")}}function br(t,e){pe(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class dn{constructor({uid:e,auth:n,stsTokenManager:r,...s}){this.providerId="firebase",this.proactiveRefresh=new lk(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new ch(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await bi(this,this.stsTokenManager.getToken(this.auth,e));return pe(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return ak(this,e)}reload(){return uk(this)}_assign(e){this!==e&&(pe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new dn({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){pe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Cc(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(on(this.auth.app))return Promise.reject(rr(this.auth));const e=await this.getIdToken();return await bi(this,ok(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,s=n.email??void 0,i=n.phoneNumber??void 0,o=n.photoURL??void 0,a=n.tenantId??void 0,l=n._redirectEventId??void 0,u=n.createdAt??void 0,h=n.lastLoginAt??void 0,{uid:f,emailVerified:p,isAnonymous:g,providerData:v,stsTokenManager:_}=n;pe(f&&_,e,"internal-error");const C=hi.fromJSON(this.name,_);pe(typeof f=="string",e,"internal-error"),br(r,e.name),br(s,e.name),pe(typeof p=="boolean",e,"internal-error"),pe(typeof g=="boolean",e,"internal-error"),br(i,e.name),br(o,e.name),br(a,e.name),br(l,e.name),br(u,e.name),br(h,e.name);const S=new dn({uid:f,auth:e,email:s,emailVerified:p,displayName:r,isAnonymous:g,photoURL:o,phoneNumber:i,tenantId:a,stsTokenManager:C,createdAt:u,lastLoginAt:h});return v&&Array.isArray(v)&&(S.providerData=v.map(R=>({...R}))),l&&(S._redirectEventId=l),S}static async _fromIdTokenResponse(e,n,r=!1){const s=new hi;s.updateFromServerResponse(n);const i=new dn({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await Cc(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];pe(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?Pv(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!i?.length,a=new hi;a.updateFromIdToken(r);const l=new dn({uid:s.localId,auth:e,stsTokenManager:a,isAnonymous:o}),u={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new ch(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!i?.length};return Object.assign(l,u),l}}const km=new Map;function Jn(t){ur(t instanceof Function,"Expected a class definition");let e=km.get(t);return e?(ur(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,km.set(t,e),e)}class kv{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}kv.type="NONE";const Nm=kv;function Za(t,e,n){return`firebase:${t}:${e}:${n}`}class fi{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=Za(this.userKey,s.apiKey,i),this.fullPersistenceKey=Za("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Sc(this.auth,{idToken:e}).catch(()=>{});return n?dn._fromGetAccountInfoResponse(this.auth,n,e):null}return dn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new fi(Jn(Nm),e,r);const s=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let i=s[0]||Jn(Nm);const o=Za(r,e.config.apiKey,e.name);let a=null;for(const u of n)try{const h=await u._get(o);if(h){let f;if(typeof h=="string"){const p=await Sc(e,{idToken:h}).catch(()=>{});if(!p)break;f=await dn._fromGetAccountInfoResponse(e,p,h)}else f=dn._fromJSON(e,h);u!==i&&(a=f),i=u;break}}catch{}const l=s.filter(u=>u._shouldAllowMigration);return!i._shouldAllowMigration||!l.length?new fi(i,e,r):(i=l[0],a&&await i._set(o,a.toJSON()),await Promise.all(n.map(async u=>{if(u!==i)try{await u._remove(o)}catch{}})),new fi(i,e,r))}}function Om(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Vv(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Nv(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Mv(e))return"Blackberry";if(Lv(e))return"Webos";if(Ov(e))return"Safari";if((e.includes("chrome/")||Dv(e))&&!e.includes("edge/"))return"Chrome";if(xv(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if(r?.length===2)return r[1]}return"Other"}function Nv(t=Vt()){return/firefox\//i.test(t)}function Ov(t=Vt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Dv(t=Vt()){return/crios\//i.test(t)}function Vv(t=Vt()){return/iemobile/i.test(t)}function xv(t=Vt()){return/android/i.test(t)}function Mv(t=Vt()){return/blackberry/i.test(t)}function Lv(t=Vt()){return/webos/i.test(t)}function yf(t=Vt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function pk(t=Vt()){return yf(t)&&!!window.navigator?.standalone}function mk(){return PC()&&document.documentMode===10}function Uv(t=Vt()){return yf(t)||xv(t)||Lv(t)||Mv(t)||/windows phone/i.test(t)||Vv(t)}function Fv(t,e=[]){let n;switch(t){case"Browser":n=Om(Vt());break;case"Worker":n=`${Om(Vt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${xi}/${r}`}class gk{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,a)=>{try{const l=e(i);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}async function _k(t,e={}){return Bn(t,"GET","/v2/passwordPolicy",mr(t,e))}const yk=6;class vk{constructor(e){const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??yk,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}class Ek{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Dm(this),this.idTokenSubscription=new Dm(this),this.beforeStateQueue=new gk(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=bv,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Jn(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await fi.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Sc(this,{idToken:e}),r=await dn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(on(this.app)){const i=this.app.settings.authIdToken;return i?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(i).then(o,o))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const i=this.redirectUser?._redirectEventId,o=r?._redirectEventId,a=await this.tryRedirectSignIn(e);(!i||i===o)&&a?.user&&(r=a.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(i){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(i))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return pe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Cc(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=XP()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(on(this.app))return Promise.reject(rr(this));const n=e?lt(e):null;return n&&pe(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&pe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return on(this.app)?Promise.reject(rr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return on(this.app)?Promise.reject(rr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Jn(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await _k(this),n=new vk(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new ia("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await dk(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Jn(e)||this._popupRedirectResolver;pe(n,this,"argument-error"),this.redirectPersistenceManager=await fi.create(this,[Jn(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(pe(a,this,"internal-error"),a.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,s);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return pe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Fv(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){if(on(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&QP(`Error while retrieving App Check token: ${e.error}`),e?.token}}function Us(t){return lt(t)}class Dm{constructor(e){this.auth=e,this.observer=null,this.addObserver=LC(n=>this.observer=n)}get next(){return pe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let cl={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function wk(t){cl=t}function Bv(t){return cl.loadJS(t)}function Tk(){return cl.recaptchaEnterpriseScript}function Ik(){return cl.gapiScript}function bk(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class Ak{constructor(){this.enterprise=new Rk}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class Rk{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const Sk="recaptcha-enterprise",$v="NO_RECAPTCHA";class Ck{constructor(e){this.type=Sk,this.auth=Us(e)}async verify(e="verify",n=!1){async function r(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(o,a)=>{ik(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const u=new sk(l);return i.tenantId==null?i._agentRecaptchaConfig=u:i._tenantRecaptchaConfigs[i.tenantId]=u,o(u.siteKey)}}).catch(l=>{a(l)})})}function s(i,o,a){const l=window.grecaptcha;Cm(l)?l.enterprise.ready(()=>{l.enterprise.execute(i,{action:e}).then(u=>{o(u)}).catch(()=>{o($v)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new Ak().execute("siteKey",{action:"verify"}):new Promise((i,o)=>{r(this.auth).then(a=>{if(!n&&Cm(window.grecaptcha))s(a,i,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=Tk();l.length!==0&&(l+=a),Bv(l).then(()=>{s(a,i,o)}).catch(u=>{o(u)})}}).catch(a=>{o(a)})})}}async function Vm(t,e,n,r=!1,s=!1){const i=new Ck(t);let o;if(s)o=$v;else try{o=await i.verify(n)}catch{o=await i.verify(n,!0)}const a={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in a){const l=a.phoneEnrollmentInfo.phoneNumber,u=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:l,recaptchaToken:u,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){const l=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:l,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return r?Object.assign(a,{captchaResp:o}):Object.assign(a,{captchaResponse:o}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function lh(t,e,n,r,s){if(t._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await Vm(t,e,n,n==="getOobCode");return r(t,i)}else return r(t,e).catch(async i=>{if(i.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await Vm(t,e,n,n==="getOobCode");return r(t,o)}else return Promise.reject(i)})}function Pk(t,e){const n=pf(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(Cs(i,e??{}))return s;Tn(s,"already-initialized")}return n.initialize({options:e})}function kk(t,e){const n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(Jn);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}function Nk(t,e,n){const r=Us(t);pe(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,i=Hv(e),{host:o,port:a}=Ok(e),l=a===null?"":`:${a}`,u={url:`${i}//${o}${l}/`},h=Object.freeze({host:o,port:a,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){pe(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),pe(Cs(u,r.config.emulator)&&Cs(h,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=u,r.emulatorConfig=h,r.settings.appVerificationDisabledForTesting=!0,Vi(o)?(mv(`${i}//${o}${l}`),gv("Auth",!0)):Dk()}function Hv(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function Ok(t){const e=Hv(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:xm(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:xm(o)}}}function xm(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function Dk(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}class vf{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Yn("not implemented")}_getIdTokenResponse(e){return Yn("not implemented")}_linkToIdToken(e,n){return Yn("not implemented")}_getReauthenticationResolver(e){return Yn("not implemented")}}async function Vk(t,e){return Bn(t,"POST","/v1/accounts:signUp",e)}async function xk(t,e){return ca(t,"POST","/v1/accounts:signInWithPassword",mr(t,e))}async function Mk(t,e){return Bn(t,"POST","/v1/accounts:sendOobCode",mr(t,e))}async function Lk(t,e){return Mk(t,e)}async function Uk(t,e){return ca(t,"POST","/v1/accounts:signInWithEmailLink",mr(t,e))}async function Fk(t,e){return ca(t,"POST","/v1/accounts:signInWithEmailLink",mr(t,e))}class $o extends vf{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new $o(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new $o(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return lh(e,n,"signInWithPassword",xk);case"emailLink":return Uk(e,{email:this._email,oobCode:this._password});default:Tn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return lh(e,r,"signUpPassword",Vk);case"emailLink":return Fk(e,{idToken:n,email:this._email,oobCode:this._password});default:Tn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function di(t,e){return ca(t,"POST","/v1/accounts:signInWithIdp",mr(t,e))}const Bk="http://localhost";class ks extends vf{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new ks(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Tn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s,...i}=n;if(!r||!s)return null;const o=new ks(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return di(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,di(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,di(e,n)}buildRequest(){const e={requestUri:Bk,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=oa(n)}return e}}function $k(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function Hk(t){const e=ho(fo(t)).link,n=e?ho(fo(e)).deep_link_id:null,r=ho(fo(t)).deep_link_id;return(r?ho(fo(r)).link:null)||r||n||e||t}class Ef{constructor(e){const n=ho(fo(e)),r=n.apiKey??null,s=n.oobCode??null,i=$k(n.mode??null);pe(r&&s&&i,"argument-error"),this.apiKey=r,this.operation=i,this.code=s,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=Hk(e);try{return new Ef(n)}catch{return null}}}class Mi{constructor(){this.providerId=Mi.PROVIDER_ID}static credential(e,n){return $o._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=Ef.parseLink(n);return pe(r,"argument-error"),$o._fromEmailAndCode(e,r.code,r.tenantId)}}Mi.PROVIDER_ID="password";Mi.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Mi.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class jv{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class la extends jv{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Nr extends la{constructor(){super("facebook.com")}static credential(e){return ks._fromParams({providerId:Nr.PROVIDER_ID,signInMethod:Nr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Nr.credentialFromTaggedObject(e)}static credentialFromError(e){return Nr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Nr.credential(e.oauthAccessToken)}catch{return null}}}Nr.FACEBOOK_SIGN_IN_METHOD="facebook.com";Nr.PROVIDER_ID="facebook.com";class Or extends la{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return ks._fromParams({providerId:Or.PROVIDER_ID,signInMethod:Or.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Or.credentialFromTaggedObject(e)}static credentialFromError(e){return Or.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Or.credential(n,r)}catch{return null}}}Or.GOOGLE_SIGN_IN_METHOD="google.com";Or.PROVIDER_ID="google.com";class Dr extends la{constructor(){super("github.com")}static credential(e){return ks._fromParams({providerId:Dr.PROVIDER_ID,signInMethod:Dr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Dr.credentialFromTaggedObject(e)}static credentialFromError(e){return Dr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Dr.credential(e.oauthAccessToken)}catch{return null}}}Dr.GITHUB_SIGN_IN_METHOD="github.com";Dr.PROVIDER_ID="github.com";class Vr extends la{constructor(){super("twitter.com")}static credential(e,n){return ks._fromParams({providerId:Vr.PROVIDER_ID,signInMethod:Vr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Vr.credentialFromTaggedObject(e)}static credentialFromError(e){return Vr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Vr.credential(n,r)}catch{return null}}}Vr.TWITTER_SIGN_IN_METHOD="twitter.com";Vr.PROVIDER_ID="twitter.com";async function jk(t,e){return ca(t,"POST","/v1/accounts:signUp",mr(t,e))}class Ns{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await dn._fromIdTokenResponse(e,r,s),o=Mm(r);return new Ns({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=Mm(r);return new Ns({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function Mm(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}class Pc extends pr{constructor(e,n,r,s){super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,Pc.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new Pc(e,n,r,s)}}function qv(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?Pc._fromErrorAndOperation(t,i,e,r):i})}async function qk(t,e,n=!1){const r=await bi(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Ns._forOperation(t,"link",r)}async function Wk(t,e,n=!1){const{auth:r}=t;if(on(r.app))return Promise.reject(rr(r));const s="reauthenticate";try{const i=await bi(t,qv(r,s,e,t),n);pe(i.idToken,r,"internal-error");const o=_f(i.idToken);pe(o,r,"internal-error");const{sub:a}=o;return pe(t.uid===a,r,"user-mismatch"),Ns._forOperation(t,s,i)}catch(i){throw i?.code==="auth/user-not-found"&&Tn(r,"user-mismatch"),i}}async function Wv(t,e,n=!1){if(on(t.app))return Promise.reject(rr(t));const r="signIn",s=await qv(t,r,e),i=await Ns._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}async function Gk(t,e){return Wv(Us(t),e)}async function Gv(t){const e=Us(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function zk(t,e,n){if(on(t.app))return Promise.reject(rr(t));const r=Us(t),o=await lh(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",jk).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&Gv(t),l}),a=await Ns._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(a.user),a}function Kk(t,e,n){return on(t.app)?Promise.reject(rr(t)):Gk(lt(t),Mi.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&Gv(t),r})}async function Lm(t,e){const n=lt(t),s={requestType:"VERIFY_EMAIL",idToken:await t.getIdToken()},{email:i}=await Lk(n.auth,s);i!==t.email&&await t.reload()}async function Qk(t,e){return Bn(t,"POST","/v1/accounts:update",e)}async function Yk(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=lt(t),i={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},o=await bi(r,Qk(r.auth,i));r.displayName=o.displayName||null,r.photoURL=o.photoUrl||null;const a=r.providerData.find(({providerId:l})=>l==="password");a&&(a.displayName=r.displayName,a.photoURL=r.photoURL),await r._updateTokensIfNecessary(o)}function Jk(t,e,n,r){return lt(t).onIdTokenChanged(e,n,r)}function Xk(t,e,n){return lt(t).beforeAuthStateChanged(e,n)}function Zk(t,e,n,r){return lt(t).onAuthStateChanged(e,n,r)}function e1(t){return lt(t).signOut()}const kc="__sak";class zv{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(kc,"1"),this.storage.removeItem(kc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const t1=1e3,n1=10;class Kv extends zv{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Uv(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);mk()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,n1):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},t1)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}Kv.type="LOCAL";const r1=Kv;class Qv extends zv{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}Qv.type="SESSION";const Yv=Qv;function s1(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}class ll{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new ll(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!o?.size)return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const a=Array.from(o).map(async u=>u(n.origin,i)),l=await s1(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}ll.receivers=[];function wf(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}class i1{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((a,l)=>{const u=wf("",20);s.port1.start();const h=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(f){const p=f;if(p.data.eventId===u)switch(p.data.status){case"ack":clearTimeout(h),i=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),a(p.data.response);break;default:clearTimeout(h),clearTimeout(i),l(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}function Vn(){return window}function o1(t){Vn().location.href=t}function Jv(){return typeof Vn().WorkerGlobalScope<"u"&&typeof Vn().importScripts=="function"}async function a1(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function c1(){return navigator?.serviceWorker?.controller||null}function l1(){return Jv()?self:null}const Xv="firebaseLocalStorageDb",u1=1,Nc="firebaseLocalStorage",Zv="fbase_key";class ua{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function ul(t,e){return t.transaction([Nc],e?"readwrite":"readonly").objectStore(Nc)}function h1(){const t=indexedDB.deleteDatabase(Xv);return new ua(t).toPromise()}function uh(){const t=indexedDB.open(Xv,u1);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Nc,{keyPath:Zv})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Nc)?e(r):(r.close(),await h1(),e(await uh()))})})}async function Um(t,e,n){const r=ul(t,!0).put({[Zv]:e,value:n});return new ua(r).toPromise()}async function f1(t,e){const n=ul(t,!1).get(e),r=await new ua(n).toPromise();return r===void 0?null:r.value}function Fm(t,e){const n=ul(t,!0).delete(e);return new ua(n).toPromise()}const d1=800,p1=3;class eE{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await uh(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>p1)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Jv()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=ll._getInstance(l1()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await a1(),!this.activeServiceWorker)return;this.sender=new i1(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||c1()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await uh();return await Um(e,kc,"1"),await Fm(e,kc),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>Um(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>f1(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Fm(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=ul(s,!1).getAll();return new ua(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),d1)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}eE.type="LOCAL";const m1=eE;new aa(3e4,6e4);function g1(t,e){return e?Jn(e):(pe(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}class Tf extends vf{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return di(e,this._buildIdpRequest())}_linkToIdToken(e,n){return di(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return di(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function _1(t){return Wv(t.auth,new Tf(t),t.bypassAuthState)}function y1(t){const{auth:e,user:n}=t;return pe(n,e,"internal-error"),Wk(n,new Tf(t),t.bypassAuthState)}async function v1(t){const{auth:e,user:n}=t;return pe(n,e,"internal-error"),qk(n,new Tf(t),t.bypassAuthState)}class tE{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return _1;case"linkViaPopup":case"linkViaRedirect":return v1;case"reauthViaPopup":case"reauthViaRedirect":return y1;default:Tn(this.auth,"internal-error")}}resolve(e){ur(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ur(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const E1=new aa(2e3,1e4);class ti extends tE{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,ti.currentPopupAction&&ti.currentPopupAction.cancel(),ti.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return pe(e,this.auth,"internal-error"),e}async onExecution(){ur(this.filter.length===1,"Popup operations only handle one event");const e=wf();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Dn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Dn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ti.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Dn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,E1.get())};e()}}ti.currentPopupAction=null;const w1="pendingRedirect",ec=new Map;class T1 extends tE{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=ec.get(this.auth._key());if(!e){try{const r=await I1(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}ec.set(this.auth._key(),e)}return this.bypassAuthState||ec.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function I1(t,e){const n=R1(e),r=A1(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function b1(t,e){ec.set(t._key(),e)}function A1(t){return Jn(t._redirectPersistence)}function R1(t){return Za(w1,t.config.apiKey,t.name)}async function S1(t,e,n=!1){if(on(t.app))return Promise.reject(rr(t));const r=Us(t),s=g1(r,e),o=await new T1(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}const C1=600*1e3;class P1{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!k1(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){if(e.error&&!nE(e)){const r=e.error.code?.split("auth/")[1]||"internal-error";n.onError(Dn(this.auth,r))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=C1&&this.cachedEventUids.clear(),this.cachedEventUids.has(Bm(e))}saveEventToCache(e){this.cachedEventUids.add(Bm(e)),this.lastProcessedEventTime=Date.now()}}function Bm(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function nE({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function k1(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return nE(t);default:return!1}}async function N1(t,e={}){return Bn(t,"GET","/v1/projects",e)}const O1=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,D1=/^https?/;async function V1(t){if(t.config.emulator)return;const{authorizedDomains:e}=await N1(t);for(const n of e)try{if(x1(n))return}catch{}Tn(t,"unauthorized-domain")}function x1(t){const e=ah(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!D1.test(n))return!1;if(O1.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}const M1=new aa(3e4,6e4);function $m(){const t=Vn().___jsl;if(t?.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function L1(t){return new Promise((e,n)=>{function r(){$m(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{$m(),n(Dn(t,"network-request-failed"))},timeout:M1.get()})}if(Vn().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(Vn().gapi?.load)r();else{const s=bk("iframefcb");return Vn()[s]=()=>{gapi.load?r():n(Dn(t,"network-request-failed"))},Bv(`${Ik()}?onload=${s}`).catch(i=>n(i))}}).catch(e=>{throw tc=null,e})}let tc=null;function U1(t){return tc=tc||L1(t),tc}const F1=new aa(5e3,15e3),B1="__/auth/iframe",$1="emulator/auth/iframe",H1={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},j1=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function q1(t){const e=t.config;pe(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?gf(e,$1):`https://${t.config.authDomain}/${B1}`,r={apiKey:e.apiKey,appName:t.name,v:xi},s=j1.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${oa(r).slice(1)}`}async function W1(t){const e=await U1(t),n=Vn().gapi;return pe(n,t,"internal-error"),e.open({where:document.body,url:q1(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:H1,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=Dn(t,"network-request-failed"),a=Vn().setTimeout(()=>{i(o)},F1.get());function l(){Vn().clearTimeout(a),s(r)}r.ping(l).then(l,()=>{i(o)})}))}const G1={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},z1=500,K1=600,Q1="_blank",Y1="http://localhost";class Hm{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function J1(t,e,n,r=z1,s=K1){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l={...G1,width:r.toString(),height:s.toString(),top:i,left:o},u=Vt().toLowerCase();n&&(a=Dv(u)?Q1:n),Nv(u)&&(e=e||Y1,l.scrollbars="yes");const h=Object.entries(l).reduce((p,[g,v])=>`${p}${g}=${v},`,"");if(pk(u)&&a!=="_self")return X1(e||"",a),new Hm(null);const f=window.open(e||"",a,h);pe(f,t,"popup-blocked");try{f.focus()}catch{}return new Hm(f)}function X1(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}const Z1="__/auth/handler",eN="emulator/auth/handler",tN=encodeURIComponent("fac");async function jm(t,e,n,r,s,i){pe(t.config.authDomain,t,"auth-domain-config-required"),pe(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:xi,eventId:s};if(e instanceof jv){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",MC(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,f]of Object.entries({}))o[h]=f}if(e instanceof la){const h=e.getScopes().filter(f=>f!=="");h.length>0&&(o.scopes=h.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const h of Object.keys(a))a[h]===void 0&&delete a[h];const l=await t._getAppCheckToken(),u=l?`#${tN}=${encodeURIComponent(l)}`:"";return`${nN(t)}?${oa(a).slice(1)}${u}`}function nN({config:t}){return t.emulator?gf(t,eN):`https://${t.authDomain}/${Z1}`}const Eu="webStorageSupport";class rN{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Yv,this._completeRedirectFn=S1,this._overrideRedirectResult=b1}async _openPopup(e,n,r,s){ur(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const i=await jm(e,n,r,ah(),s);return J1(e,i,wf())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await jm(e,n,r,ah(),s);return o1(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(ur(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await W1(e),r=new P1(e);return n.register("authEvent",s=>(pe(s?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Eu,{type:Eu},s=>{const i=s?.[0]?.[Eu];i!==void 0&&n(!!i),Tn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=V1(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return Uv()||Ov()||yf()}}const sN=rN;var qm="@firebase/auth",Wm="1.12.0";class iN{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){pe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function oN(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function aN(t){Ii(new Ps("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;pe(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Fv(t)},u=new Ek(r,s,i,l);return kk(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Ii(new Ps("auth-internal",e=>{const n=Us(e.getProvider("auth").getImmediate());return(r=>new iN(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),$r(qm,Wm,oN(t)),$r(qm,Wm,"esm2020")}const cN=300,lN=pv("authIdTokenMaxAge")||cN;let Gm=null;const uN=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>lN)return;const s=n?.token;Gm!==s&&(Gm=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function hN(t=Ev()){const e=pf(t,"auth");if(e.isInitialized())return e.getImmediate();const n=Pk(t,{popupRedirectResolver:sN,persistence:[m1,r1,Yv]}),r=pv("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const o=uN(i.toString());Xk(n,o,()=>o(n.currentUser)),Jk(n,a=>o(a))}}const s=fv("auth");return s&&Nk(n,`http://${s}`),n}function fN(){return document.getElementsByTagName("head")?.[0]??document}wk({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=Dn("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",fN().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});aN("Browser");var zm=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var Hr,rE;(function(){var t;function e(b,w){function E(){}E.prototype=w.prototype,b.F=w.prototype,b.prototype=new E,b.prototype.constructor=b,b.D=function(A,P,N){for(var I=Array(arguments.length-2),le=2;le<arguments.length;le++)I[le-2]=arguments[le];return w.prototype[P].apply(A,I)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(b,w,E){E||(E=0);const A=Array(16);if(typeof w=="string")for(var P=0;P<16;++P)A[P]=w.charCodeAt(E++)|w.charCodeAt(E++)<<8|w.charCodeAt(E++)<<16|w.charCodeAt(E++)<<24;else for(P=0;P<16;++P)A[P]=w[E++]|w[E++]<<8|w[E++]<<16|w[E++]<<24;w=b.g[0],E=b.g[1],P=b.g[2];let N=b.g[3],I;I=w+(N^E&(P^N))+A[0]+3614090360&4294967295,w=E+(I<<7&4294967295|I>>>25),I=N+(P^w&(E^P))+A[1]+3905402710&4294967295,N=w+(I<<12&4294967295|I>>>20),I=P+(E^N&(w^E))+A[2]+606105819&4294967295,P=N+(I<<17&4294967295|I>>>15),I=E+(w^P&(N^w))+A[3]+3250441966&4294967295,E=P+(I<<22&4294967295|I>>>10),I=w+(N^E&(P^N))+A[4]+4118548399&4294967295,w=E+(I<<7&4294967295|I>>>25),I=N+(P^w&(E^P))+A[5]+1200080426&4294967295,N=w+(I<<12&4294967295|I>>>20),I=P+(E^N&(w^E))+A[6]+2821735955&4294967295,P=N+(I<<17&4294967295|I>>>15),I=E+(w^P&(N^w))+A[7]+4249261313&4294967295,E=P+(I<<22&4294967295|I>>>10),I=w+(N^E&(P^N))+A[8]+1770035416&4294967295,w=E+(I<<7&4294967295|I>>>25),I=N+(P^w&(E^P))+A[9]+2336552879&4294967295,N=w+(I<<12&4294967295|I>>>20),I=P+(E^N&(w^E))+A[10]+4294925233&4294967295,P=N+(I<<17&4294967295|I>>>15),I=E+(w^P&(N^w))+A[11]+2304563134&4294967295,E=P+(I<<22&4294967295|I>>>10),I=w+(N^E&(P^N))+A[12]+1804603682&4294967295,w=E+(I<<7&4294967295|I>>>25),I=N+(P^w&(E^P))+A[13]+4254626195&4294967295,N=w+(I<<12&4294967295|I>>>20),I=P+(E^N&(w^E))+A[14]+2792965006&4294967295,P=N+(I<<17&4294967295|I>>>15),I=E+(w^P&(N^w))+A[15]+1236535329&4294967295,E=P+(I<<22&4294967295|I>>>10),I=w+(P^N&(E^P))+A[1]+4129170786&4294967295,w=E+(I<<5&4294967295|I>>>27),I=N+(E^P&(w^E))+A[6]+3225465664&4294967295,N=w+(I<<9&4294967295|I>>>23),I=P+(w^E&(N^w))+A[11]+643717713&4294967295,P=N+(I<<14&4294967295|I>>>18),I=E+(N^w&(P^N))+A[0]+3921069994&4294967295,E=P+(I<<20&4294967295|I>>>12),I=w+(P^N&(E^P))+A[5]+3593408605&4294967295,w=E+(I<<5&4294967295|I>>>27),I=N+(E^P&(w^E))+A[10]+38016083&4294967295,N=w+(I<<9&4294967295|I>>>23),I=P+(w^E&(N^w))+A[15]+3634488961&4294967295,P=N+(I<<14&4294967295|I>>>18),I=E+(N^w&(P^N))+A[4]+3889429448&4294967295,E=P+(I<<20&4294967295|I>>>12),I=w+(P^N&(E^P))+A[9]+568446438&4294967295,w=E+(I<<5&4294967295|I>>>27),I=N+(E^P&(w^E))+A[14]+3275163606&4294967295,N=w+(I<<9&4294967295|I>>>23),I=P+(w^E&(N^w))+A[3]+4107603335&4294967295,P=N+(I<<14&4294967295|I>>>18),I=E+(N^w&(P^N))+A[8]+1163531501&4294967295,E=P+(I<<20&4294967295|I>>>12),I=w+(P^N&(E^P))+A[13]+2850285829&4294967295,w=E+(I<<5&4294967295|I>>>27),I=N+(E^P&(w^E))+A[2]+4243563512&4294967295,N=w+(I<<9&4294967295|I>>>23),I=P+(w^E&(N^w))+A[7]+1735328473&4294967295,P=N+(I<<14&4294967295|I>>>18),I=E+(N^w&(P^N))+A[12]+2368359562&4294967295,E=P+(I<<20&4294967295|I>>>12),I=w+(E^P^N)+A[5]+4294588738&4294967295,w=E+(I<<4&4294967295|I>>>28),I=N+(w^E^P)+A[8]+2272392833&4294967295,N=w+(I<<11&4294967295|I>>>21),I=P+(N^w^E)+A[11]+1839030562&4294967295,P=N+(I<<16&4294967295|I>>>16),I=E+(P^N^w)+A[14]+4259657740&4294967295,E=P+(I<<23&4294967295|I>>>9),I=w+(E^P^N)+A[1]+2763975236&4294967295,w=E+(I<<4&4294967295|I>>>28),I=N+(w^E^P)+A[4]+1272893353&4294967295,N=w+(I<<11&4294967295|I>>>21),I=P+(N^w^E)+A[7]+4139469664&4294967295,P=N+(I<<16&4294967295|I>>>16),I=E+(P^N^w)+A[10]+3200236656&4294967295,E=P+(I<<23&4294967295|I>>>9),I=w+(E^P^N)+A[13]+681279174&4294967295,w=E+(I<<4&4294967295|I>>>28),I=N+(w^E^P)+A[0]+3936430074&4294967295,N=w+(I<<11&4294967295|I>>>21),I=P+(N^w^E)+A[3]+3572445317&4294967295,P=N+(I<<16&4294967295|I>>>16),I=E+(P^N^w)+A[6]+76029189&4294967295,E=P+(I<<23&4294967295|I>>>9),I=w+(E^P^N)+A[9]+3654602809&4294967295,w=E+(I<<4&4294967295|I>>>28),I=N+(w^E^P)+A[12]+3873151461&4294967295,N=w+(I<<11&4294967295|I>>>21),I=P+(N^w^E)+A[15]+530742520&4294967295,P=N+(I<<16&4294967295|I>>>16),I=E+(P^N^w)+A[2]+3299628645&4294967295,E=P+(I<<23&4294967295|I>>>9),I=w+(P^(E|~N))+A[0]+4096336452&4294967295,w=E+(I<<6&4294967295|I>>>26),I=N+(E^(w|~P))+A[7]+1126891415&4294967295,N=w+(I<<10&4294967295|I>>>22),I=P+(w^(N|~E))+A[14]+2878612391&4294967295,P=N+(I<<15&4294967295|I>>>17),I=E+(N^(P|~w))+A[5]+4237533241&4294967295,E=P+(I<<21&4294967295|I>>>11),I=w+(P^(E|~N))+A[12]+1700485571&4294967295,w=E+(I<<6&4294967295|I>>>26),I=N+(E^(w|~P))+A[3]+2399980690&4294967295,N=w+(I<<10&4294967295|I>>>22),I=P+(w^(N|~E))+A[10]+4293915773&4294967295,P=N+(I<<15&4294967295|I>>>17),I=E+(N^(P|~w))+A[1]+2240044497&4294967295,E=P+(I<<21&4294967295|I>>>11),I=w+(P^(E|~N))+A[8]+1873313359&4294967295,w=E+(I<<6&4294967295|I>>>26),I=N+(E^(w|~P))+A[15]+4264355552&4294967295,N=w+(I<<10&4294967295|I>>>22),I=P+(w^(N|~E))+A[6]+2734768916&4294967295,P=N+(I<<15&4294967295|I>>>17),I=E+(N^(P|~w))+A[13]+1309151649&4294967295,E=P+(I<<21&4294967295|I>>>11),I=w+(P^(E|~N))+A[4]+4149444226&4294967295,w=E+(I<<6&4294967295|I>>>26),I=N+(E^(w|~P))+A[11]+3174756917&4294967295,N=w+(I<<10&4294967295|I>>>22),I=P+(w^(N|~E))+A[2]+718787259&4294967295,P=N+(I<<15&4294967295|I>>>17),I=E+(N^(P|~w))+A[9]+3951481745&4294967295,b.g[0]=b.g[0]+w&4294967295,b.g[1]=b.g[1]+(P+(I<<21&4294967295|I>>>11))&4294967295,b.g[2]=b.g[2]+P&4294967295,b.g[3]=b.g[3]+N&4294967295}r.prototype.v=function(b,w){w===void 0&&(w=b.length);const E=w-this.blockSize,A=this.C;let P=this.h,N=0;for(;N<w;){if(P==0)for(;N<=E;)s(this,b,N),N+=this.blockSize;if(typeof b=="string"){for(;N<w;)if(A[P++]=b.charCodeAt(N++),P==this.blockSize){s(this,A),P=0;break}}else for(;N<w;)if(A[P++]=b[N++],P==this.blockSize){s(this,A),P=0;break}}this.h=P,this.o+=w},r.prototype.A=function(){var b=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);b[0]=128;for(var w=1;w<b.length-8;++w)b[w]=0;w=this.o*8;for(var E=b.length-8;E<b.length;++E)b[E]=w&255,w/=256;for(this.v(b),b=Array(16),w=0,E=0;E<4;++E)for(let A=0;A<32;A+=8)b[w++]=this.g[E]>>>A&255;return b};function i(b,w){var E=a;return Object.prototype.hasOwnProperty.call(E,b)?E[b]:E[b]=w(b)}function o(b,w){this.h=w;const E=[];let A=!0;for(let P=b.length-1;P>=0;P--){const N=b[P]|0;A&&N==w||(E[P]=N,A=!1)}this.g=E}var a={};function l(b){return-128<=b&&b<128?i(b,function(w){return new o([w|0],w<0?-1:0)}):new o([b|0],b<0?-1:0)}function u(b){if(isNaN(b)||!isFinite(b))return f;if(b<0)return C(u(-b));const w=[];let E=1;for(let A=0;b>=E;A++)w[A]=b/E|0,E*=4294967296;return new o(w,0)}function h(b,w){if(b.length==0)throw Error("number format error: empty string");if(w=w||10,w<2||36<w)throw Error("radix out of range: "+w);if(b.charAt(0)=="-")return C(h(b.substring(1),w));if(b.indexOf("-")>=0)throw Error('number format error: interior "-" character');const E=u(Math.pow(w,8));let A=f;for(let N=0;N<b.length;N+=8){var P=Math.min(8,b.length-N);const I=parseInt(b.substring(N,N+P),w);P<8?(P=u(Math.pow(w,P)),A=A.j(P).add(u(I))):(A=A.j(E),A=A.add(u(I)))}return A}var f=l(0),p=l(1),g=l(16777216);t=o.prototype,t.m=function(){if(_(this))return-C(this).m();let b=0,w=1;for(let E=0;E<this.g.length;E++){const A=this.i(E);b+=(A>=0?A:4294967296+A)*w,w*=4294967296}return b},t.toString=function(b){if(b=b||10,b<2||36<b)throw Error("radix out of range: "+b);if(v(this))return"0";if(_(this))return"-"+C(this).toString(b);const w=u(Math.pow(b,6));var E=this;let A="";for(;;){const P=O(E,w).g;E=S(E,P.j(w));let N=((E.g.length>0?E.g[0]:E.h)>>>0).toString(b);if(E=P,v(E))return N+A;for(;N.length<6;)N="0"+N;A=N+A}},t.i=function(b){return b<0?0:b<this.g.length?this.g[b]:this.h};function v(b){if(b.h!=0)return!1;for(let w=0;w<b.g.length;w++)if(b.g[w]!=0)return!1;return!0}function _(b){return b.h==-1}t.l=function(b){return b=S(this,b),_(b)?-1:v(b)?0:1};function C(b){const w=b.g.length,E=[];for(let A=0;A<w;A++)E[A]=~b.g[A];return new o(E,~b.h).add(p)}t.abs=function(){return _(this)?C(this):this},t.add=function(b){const w=Math.max(this.g.length,b.g.length),E=[];let A=0;for(let P=0;P<=w;P++){let N=A+(this.i(P)&65535)+(b.i(P)&65535),I=(N>>>16)+(this.i(P)>>>16)+(b.i(P)>>>16);A=I>>>16,N&=65535,I&=65535,E[P]=I<<16|N}return new o(E,E[E.length-1]&-2147483648?-1:0)};function S(b,w){return b.add(C(w))}t.j=function(b){if(v(this)||v(b))return f;if(_(this))return _(b)?C(this).j(C(b)):C(C(this).j(b));if(_(b))return C(this.j(C(b)));if(this.l(g)<0&&b.l(g)<0)return u(this.m()*b.m());const w=this.g.length+b.g.length,E=[];for(var A=0;A<2*w;A++)E[A]=0;for(A=0;A<this.g.length;A++)for(let P=0;P<b.g.length;P++){const N=this.i(A)>>>16,I=this.i(A)&65535,le=b.i(P)>>>16,ye=b.i(P)&65535;E[2*A+2*P]+=I*ye,R(E,2*A+2*P),E[2*A+2*P+1]+=N*ye,R(E,2*A+2*P+1),E[2*A+2*P+1]+=I*le,R(E,2*A+2*P+1),E[2*A+2*P+2]+=N*le,R(E,2*A+2*P+2)}for(b=0;b<w;b++)E[b]=E[2*b+1]<<16|E[2*b];for(b=w;b<2*w;b++)E[b]=0;return new o(E,0)};function R(b,w){for(;(b[w]&65535)!=b[w];)b[w+1]+=b[w]>>>16,b[w]&=65535,w++}function y(b,w){this.g=b,this.h=w}function O(b,w){if(v(w))throw Error("division by zero");if(v(b))return new y(f,f);if(_(b))return w=O(C(b),w),new y(C(w.g),C(w.h));if(_(w))return w=O(b,C(w)),new y(C(w.g),w.h);if(b.g.length>30){if(_(b)||_(w))throw Error("slowDivide_ only works with positive integers.");for(var E=p,A=w;A.l(b)<=0;)E=V(E),A=V(A);var P=L(E,1),N=L(A,1);for(A=L(A,2),E=L(E,2);!v(A);){var I=N.add(A);I.l(b)<=0&&(P=P.add(E),N=I),A=L(A,1),E=L(E,1)}return w=S(b,P.j(w)),new y(P,w)}for(P=f;b.l(w)>=0;){for(E=Math.max(1,Math.floor(b.m()/w.m())),A=Math.ceil(Math.log(E)/Math.LN2),A=A<=48?1:Math.pow(2,A-48),N=u(E),I=N.j(w);_(I)||I.l(b)>0;)E-=A,N=u(E),I=N.j(w);v(N)&&(N=p),P=P.add(N),b=S(b,I)}return new y(P,b)}t.B=function(b){return O(this,b).h},t.and=function(b){const w=Math.max(this.g.length,b.g.length),E=[];for(let A=0;A<w;A++)E[A]=this.i(A)&b.i(A);return new o(E,this.h&b.h)},t.or=function(b){const w=Math.max(this.g.length,b.g.length),E=[];for(let A=0;A<w;A++)E[A]=this.i(A)|b.i(A);return new o(E,this.h|b.h)},t.xor=function(b){const w=Math.max(this.g.length,b.g.length),E=[];for(let A=0;A<w;A++)E[A]=this.i(A)^b.i(A);return new o(E,this.h^b.h)};function V(b){const w=b.g.length+1,E=[];for(let A=0;A<w;A++)E[A]=b.i(A)<<1|b.i(A-1)>>>31;return new o(E,b.h)}function L(b,w){const E=w>>5;w%=32;const A=b.g.length-E,P=[];for(let N=0;N<A;N++)P[N]=w>0?b.i(N+E)>>>w|b.i(N+E+1)<<32-w:b.i(N+E);return new o(P,b.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,rE=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=u,o.fromString=h,Hr=o}).apply(typeof zm<"u"?zm:typeof self<"u"?self:typeof window<"u"?window:{});var Ha=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var sE,po,iE,nc,hh,oE,aE,cE;(function(){var t,e=Object.defineProperty;function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof Ha=="object"&&Ha];for(var d=0;d<c.length;++d){var m=c[d];if(m&&m.Math==Math)return m}throw Error("Cannot find global object")}var r=n(this);function s(c,d){if(d)e:{var m=r;c=c.split(".");for(var T=0;T<c.length-1;T++){var x=c[T];if(!(x in m))break e;m=m[x]}c=c[c.length-1],T=m[c],d=d(T),d!=T&&d!=null&&e(m,c,{configurable:!0,writable:!0,value:d})}}s("Symbol.dispose",function(c){return c||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(c){return c||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(c){return c||function(d){var m=[],T;for(T in d)Object.prototype.hasOwnProperty.call(d,T)&&m.push([T,d[T]]);return m}});var i=i||{},o=this||self;function a(c){var d=typeof c;return d=="object"&&c!=null||d=="function"}function l(c,d,m){return c.call.apply(c.bind,arguments)}function u(c,d,m){return u=l,u.apply(null,arguments)}function h(c,d){var m=Array.prototype.slice.call(arguments,1);return function(){var T=m.slice();return T.push.apply(T,arguments),c.apply(this,T)}}function f(c,d){function m(){}m.prototype=d.prototype,c.Z=d.prototype,c.prototype=new m,c.prototype.constructor=c,c.Ob=function(T,x,U){for(var J=Array(arguments.length-2),we=2;we<arguments.length;we++)J[we-2]=arguments[we];return d.prototype[x].apply(T,J)}}var p=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?c=>c&&AsyncContext.Snapshot.wrap(c):c=>c;function g(c){const d=c.length;if(d>0){const m=Array(d);for(let T=0;T<d;T++)m[T]=c[T];return m}return[]}function v(c,d){for(let T=1;T<arguments.length;T++){const x=arguments[T];var m=typeof x;if(m=m!="object"?m:x?Array.isArray(x)?"array":m:"null",m=="array"||m=="object"&&typeof x.length=="number"){m=c.length||0;const U=x.length||0;c.length=m+U;for(let J=0;J<U;J++)c[m+J]=x[J]}else c.push(x)}}class _{constructor(d,m){this.i=d,this.j=m,this.h=0,this.g=null}get(){let d;return this.h>0?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function C(c){o.setTimeout(()=>{throw c},0)}function S(){var c=b;let d=null;return c.g&&(d=c.g,c.g=c.g.next,c.g||(c.h=null),d.next=null),d}class R{constructor(){this.h=this.g=null}add(d,m){const T=y.get();T.set(d,m),this.h?this.h.next=T:this.g=T,this.h=T}}var y=new _(()=>new O,c=>c.reset());class O{constructor(){this.next=this.g=this.h=null}set(d,m){this.h=d,this.g=m,this.next=null}reset(){this.next=this.g=this.h=null}}let V,L=!1,b=new R,w=()=>{const c=Promise.resolve(void 0);V=()=>{c.then(E)}};function E(){for(var c;c=S();){try{c.h.call(c.g)}catch(m){C(m)}var d=y;d.j(c),d.h<100&&(d.h++,c.next=d.g,d.g=c)}L=!1}function A(){this.u=this.u,this.C=this.C}A.prototype.u=!1,A.prototype.dispose=function(){this.u||(this.u=!0,this.N())},A.prototype[Symbol.dispose]=function(){this.dispose()},A.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function P(c,d){this.type=c,this.g=this.target=d,this.defaultPrevented=!1}P.prototype.h=function(){this.defaultPrevented=!0};var N=(function(){if(!o.addEventListener||!Object.defineProperty)return!1;var c=!1,d=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const m=()=>{};o.addEventListener("test",m,d),o.removeEventListener("test",m,d)}catch{}return c})();function I(c){return/^[\s\xa0]*$/.test(c)}function le(c,d){P.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c&&this.init(c,d)}f(le,P),le.prototype.init=function(c,d){const m=this.type=c.type,T=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;this.target=c.target||c.srcElement,this.g=d,d=c.relatedTarget,d||(m=="mouseover"?d=c.fromElement:m=="mouseout"&&(d=c.toElement)),this.relatedTarget=d,T?(this.clientX=T.clientX!==void 0?T.clientX:T.pageX,this.clientY=T.clientY!==void 0?T.clientY:T.pageY,this.screenX=T.screenX||0,this.screenY=T.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=c.pointerType,this.state=c.state,this.i=c,c.defaultPrevented&&le.Z.h.call(this)},le.prototype.h=function(){le.Z.h.call(this);const c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var ye="closure_listenable_"+(Math.random()*1e6|0),Q=0;function ne(c,d,m,T,x){this.listener=c,this.proxy=null,this.src=d,this.type=m,this.capture=!!T,this.ha=x,this.key=++Q,this.da=this.fa=!1}function X(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function Ae(c,d,m){for(const T in c)d.call(m,c[T],T,c)}function An(c,d){for(const m in c)d.call(void 0,c[m],m,c)}function zt(c){const d={};for(const m in c)d[m]=c[m];return d}const Tt="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function $n(c,d){let m,T;for(let x=1;x<arguments.length;x++){T=arguments[x];for(m in T)c[m]=T[m];for(let U=0;U<Tt.length;U++)m=Tt[U],Object.prototype.hasOwnProperty.call(T,m)&&(c[m]=T[m])}}function un(c){this.src=c,this.g={},this.h=0}un.prototype.add=function(c,d,m,T,x){const U=c.toString();c=this.g[U],c||(c=this.g[U]=[],this.h++);const J=St(c,d,T,x);return J>-1?(d=c[J],m||(d.fa=!1)):(d=new ne(d,this.src,U,!!T,x),d.fa=m,c.push(d)),d};function hn(c,d){const m=d.type;if(m in c.g){var T=c.g[m],x=Array.prototype.indexOf.call(T,d,void 0),U;(U=x>=0)&&Array.prototype.splice.call(T,x,1),U&&(X(d),c.g[m].length==0&&(delete c.g[m],c.h--))}}function St(c,d,m,T){for(let x=0;x<c.length;++x){const U=c[x];if(!U.da&&U.listener==d&&U.capture==!!m&&U.ha==T)return x}return-1}var H="closure_lm_"+(Math.random()*1e6|0),re={};function Z(c,d,m,T,x){if(Array.isArray(d)){for(let U=0;U<d.length;U++)Z(c,d[U],m,T,x);return null}return m=W(m),c&&c[ye]?c.J(d,m,a(T)?!!T.capture:!1,x):ae(c,d,m,!1,T,x)}function ae(c,d,m,T,x,U){if(!d)throw Error("Invalid event type");const J=a(x)?!!x.capture:!!x;let we=q(c);if(we||(c[H]=we=new un(c)),m=we.add(d,m,T,J,U),m.proxy)return m;if(T=Te(),m.proxy=T,T.src=c,T.listener=m,c.addEventListener)N||(x=J),x===void 0&&(x=!1),c.addEventListener(d.toString(),T,x);else if(c.attachEvent)c.attachEvent(D(d.toString()),T);else if(c.addListener&&c.removeListener)c.addListener(T);else throw Error("addEventListener and attachEvent are unavailable.");return m}function Te(){function c(m){return d.call(c.src,c.listener,m)}const d=M;return c}function Fe(c,d,m,T,x){if(Array.isArray(d))for(var U=0;U<d.length;U++)Fe(c,d[U],m,T,x);else T=a(T)?!!T.capture:!!T,m=W(m),c&&c[ye]?(c=c.i,U=String(d).toString(),U in c.g&&(d=c.g[U],m=St(d,m,T,x),m>-1&&(X(d[m]),Array.prototype.splice.call(d,m,1),d.length==0&&(delete c.g[U],c.h--)))):c&&(c=q(c))&&(d=c.g[d.toString()],c=-1,d&&(c=St(d,m,T,x)),(m=c>-1?d[c]:null)&&k(m))}function k(c){if(typeof c!="number"&&c&&!c.da){var d=c.src;if(d&&d[ye])hn(d.i,c);else{var m=c.type,T=c.proxy;d.removeEventListener?d.removeEventListener(m,T,c.capture):d.detachEvent?d.detachEvent(D(m),T):d.addListener&&d.removeListener&&d.removeListener(T),(m=q(d))?(hn(m,c),m.h==0&&(m.src=null,d[H]=null)):X(c)}}}function D(c){return c in re?re[c]:re[c]="on"+c}function M(c,d){if(c.da)c=!0;else{d=new le(d,this);const m=c.listener,T=c.ha||c.src;c.fa&&k(c),c=m.call(T,d)}return c}function q(c){return c=c[H],c instanceof un?c:null}var F="__closure_events_fn_"+(Math.random()*1e9>>>0);function W(c){return typeof c=="function"?c:(c[F]||(c[F]=function(d){return c.handleEvent(d)}),c[F])}function K(){A.call(this),this.i=new un(this),this.M=this,this.G=null}f(K,A),K.prototype[ye]=!0,K.prototype.removeEventListener=function(c,d,m,T){Fe(this,c,d,m,T)};function z(c,d){var m,T=c.G;if(T)for(m=[];T;T=T.G)m.push(T);if(c=c.M,T=d.type||d,typeof d=="string")d=new P(d,c);else if(d instanceof P)d.target=d.target||c;else{var x=d;d=new P(T,c),$n(d,x)}x=!0;let U,J;if(m)for(J=m.length-1;J>=0;J--)U=d.g=m[J],x=Y(U,T,!0,d)&&x;if(U=d.g=c,x=Y(U,T,!0,d)&&x,x=Y(U,T,!1,d)&&x,m)for(J=0;J<m.length;J++)U=d.g=m[J],x=Y(U,T,!1,d)&&x}K.prototype.N=function(){if(K.Z.N.call(this),this.i){var c=this.i;for(const d in c.g){const m=c.g[d];for(let T=0;T<m.length;T++)X(m[T]);delete c.g[d],c.h--}}this.G=null},K.prototype.J=function(c,d,m,T){return this.i.add(String(c),d,!1,m,T)},K.prototype.K=function(c,d,m,T){return this.i.add(String(c),d,!0,m,T)};function Y(c,d,m,T){if(d=c.i.g[String(d)],!d)return!0;d=d.concat();let x=!0;for(let U=0;U<d.length;++U){const J=d[U];if(J&&!J.da&&J.capture==m){const we=J.listener,ft=J.ha||J.src;J.fa&&hn(c.i,J),x=we.call(ft,T)!==!1&&x}}return x&&!T.defaultPrevented}function G(c,d){if(typeof c!="function")if(c&&typeof c.handleEvent=="function")c=u(c.handleEvent,c);else throw Error("Invalid listener argument");return Number(d)>2147483647?-1:o.setTimeout(c,d||0)}function he(c){c.g=G(()=>{c.g=null,c.i&&(c.i=!1,he(c))},c.l);const d=c.h;c.h=null,c.m.apply(null,d)}class te extends A{constructor(d,m){super(),this.m=d,this.l=m,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:he(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ie(c){A.call(this),this.h=c,this.g={}}f(ie,A);var _e=[];function Ie(c){Ae(c.g,function(d,m){this.g.hasOwnProperty(m)&&k(d)},c),c.g={}}ie.prototype.N=function(){ie.Z.N.call(this),Ie(this)},ie.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Oe=o.JSON.stringify,Ne=o.JSON.parse,Ct=class{stringify(c){return o.JSON.stringify(c,void 0)}parse(c){return o.JSON.parse(c,void 0)}};function ut(){}function Ft(){}var ht={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Hn(){P.call(this,"d")}f(Hn,P);function Hs(){P.call(this,"c")}f(Hs,P);var nt={},Kt=null;function rs(){return Kt=Kt||new K}nt.Ia="serverreachability";function ji(c){P.call(this,nt.Ia,c)}f(ji,P);function qi(c){const d=rs();z(d,new ji(d))}nt.STAT_EVENT="statevent";function sd(c,d){P.call(this,nt.STAT_EVENT,c),this.stat=d}f(sd,P);function xt(c){const d=rs();z(d,new sd(d,c))}nt.Ja="timingevent";function id(c,d){P.call(this,nt.Ja,c),this.size=d}f(id,P);function Wi(c,d){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){c()},d)}function Gi(){this.g=!0}Gi.prototype.ua=function(){this.g=!1};function $w(c,d,m,T,x,U){c.info(function(){if(c.g)if(U){var J="",we=U.split("&");for(let Be=0;Be<we.length;Be++){var ft=we[Be].split("=");if(ft.length>1){const mt=ft[0];ft=ft[1];const Sn=mt.split("_");J=Sn.length>=2&&Sn[1]=="type"?J+(mt+"="+ft+"&"):J+(mt+"=redacted&")}}}else J=null;else J=U;return"XMLHTTP REQ ("+T+") [attempt "+x+"]: "+d+`
`+m+`
`+J})}function Hw(c,d,m,T,x,U,J){c.info(function(){return"XMLHTTP RESP ("+T+") [ attempt "+x+"]: "+d+`
`+m+`
`+U+" "+J})}function js(c,d,m,T){c.info(function(){return"XMLHTTP TEXT ("+d+"): "+qw(c,m)+(T?" "+T:"")})}function jw(c,d){c.info(function(){return"TIMEOUT: "+d})}Gi.prototype.info=function(){};function qw(c,d){if(!c.g)return d;if(!d)return null;try{const U=JSON.parse(d);if(U){for(c=0;c<U.length;c++)if(Array.isArray(U[c])){var m=U[c];if(!(m.length<2)){var T=m[1];if(Array.isArray(T)&&!(T.length<1)){var x=T[0];if(x!="noop"&&x!="stop"&&x!="close")for(let J=1;J<T.length;J++)T[J]=""}}}}return Oe(U)}catch{return d}}var Ea={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},od={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},ad;function Nl(){}f(Nl,ut),Nl.prototype.g=function(){return new XMLHttpRequest},ad=new Nl;function zi(c){return encodeURIComponent(String(c))}function Ww(c){var d=1;c=c.split(":");const m=[];for(;d>0&&c.length;)m.push(c.shift()),d--;return c.length&&m.push(c.join(":")),m}function gr(c,d,m,T){this.j=c,this.i=d,this.l=m,this.S=T||1,this.V=new ie(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new cd}function cd(){this.i=null,this.g="",this.h=!1}var ld={},Ol={};function Dl(c,d,m){c.M=1,c.A=Ta(Rn(d)),c.u=m,c.R=!0,ud(c,null)}function ud(c,d){c.F=Date.now(),wa(c),c.B=Rn(c.A);var m=c.B,T=c.S;Array.isArray(T)||(T=[String(T)]),Id(m.i,"t",T),c.C=0,m=c.j.L,c.h=new cd,c.g=$d(c.j,m?d:null,!c.u),c.P>0&&(c.O=new te(u(c.Y,c,c.g),c.P)),d=c.V,m=c.g,T=c.ba;var x="readystatechange";Array.isArray(x)||(x&&(_e[0]=x.toString()),x=_e);for(let U=0;U<x.length;U++){const J=Z(m,x[U],T||d.handleEvent,!1,d.h||d);if(!J)break;d.g[J.key]=J}d=c.J?zt(c.J):{},c.u?(c.v||(c.v="POST"),d["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.B,c.v,c.u,d)):(c.v="GET",c.g.ea(c.B,c.v,null,d)),qi(),$w(c.i,c.v,c.B,c.l,c.S,c.u)}gr.prototype.ba=function(c){c=c.target;const d=this.O;d&&vr(c)==3?d.j():this.Y(c)},gr.prototype.Y=function(c){try{if(c==this.g)e:{const we=vr(this.g),ft=this.g.ya(),Be=this.g.ca();if(!(we<3)&&(we!=3||this.g&&(this.h.h||this.g.la()||kd(this.g)))){this.K||we!=4||ft==7||(ft==8||Be<=0?qi(3):qi(2)),Vl(this);var d=this.g.ca();this.X=d;var m=Gw(this);if(this.o=d==200,Hw(this.i,this.v,this.B,this.l,this.S,we,d),this.o){if(this.U&&!this.L){t:{if(this.g){var T,x=this.g;if((T=x.g?x.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!I(T)){var U=T;break t}}U=null}if(c=U)js(this.i,this.l,c,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,xl(this,c);else{this.o=!1,this.m=3,xt(12),ss(this),Ki(this);break e}}if(this.R){c=!0;let mt;for(;!this.K&&this.C<m.length;)if(mt=zw(this,m),mt==Ol){we==4&&(this.m=4,xt(14),c=!1),js(this.i,this.l,null,"[Incomplete Response]");break}else if(mt==ld){this.m=4,xt(15),js(this.i,this.l,m,"[Invalid Chunk]"),c=!1;break}else js(this.i,this.l,mt,null),xl(this,mt);if(hd(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),we!=4||m.length!=0||this.h.h||(this.m=1,xt(16),c=!1),this.o=this.o&&c,!c)js(this.i,this.l,m,"[Invalid Chunked Response]"),ss(this),Ki(this);else if(m.length>0&&!this.W){this.W=!0;var J=this.j;J.g==this&&J.aa&&!J.P&&(J.j.info("Great, no buffering proxy detected. Bytes received: "+m.length),jl(J),J.P=!0,xt(11))}}else js(this.i,this.l,m,null),xl(this,m);we==4&&ss(this),this.o&&!this.K&&(we==4?Ld(this.j,this):(this.o=!1,wa(this)))}else aT(this.g),d==400&&m.indexOf("Unknown SID")>0?(this.m=3,xt(12)):(this.m=0,xt(13)),ss(this),Ki(this)}}}catch{}};function Gw(c){if(!hd(c))return c.g.la();const d=kd(c.g);if(d==="")return"";let m="";const T=d.length,x=vr(c.g)==4;if(!c.h.i){if(typeof TextDecoder>"u")return ss(c),Ki(c),"";c.h.i=new o.TextDecoder}for(let U=0;U<T;U++)c.h.h=!0,m+=c.h.i.decode(d[U],{stream:!(x&&U==T-1)});return d.length=0,c.h.g+=m,c.C=0,c.h.g}function hd(c){return c.g?c.v=="GET"&&c.M!=2&&c.j.Aa:!1}function zw(c,d){var m=c.C,T=d.indexOf(`
`,m);return T==-1?Ol:(m=Number(d.substring(m,T)),isNaN(m)?ld:(T+=1,T+m>d.length?Ol:(d=d.slice(T,T+m),c.C=T+m,d)))}gr.prototype.cancel=function(){this.K=!0,ss(this)};function wa(c){c.T=Date.now()+c.H,fd(c,c.H)}function fd(c,d){if(c.D!=null)throw Error("WatchDog timer not null");c.D=Wi(u(c.aa,c),d)}function Vl(c){c.D&&(o.clearTimeout(c.D),c.D=null)}gr.prototype.aa=function(){this.D=null;const c=Date.now();c-this.T>=0?(jw(this.i,this.B),this.M!=2&&(qi(),xt(17)),ss(this),this.m=2,Ki(this)):fd(this,this.T-c)};function Ki(c){c.j.I==0||c.K||Ld(c.j,c)}function ss(c){Vl(c);var d=c.O;d&&typeof d.dispose=="function"&&d.dispose(),c.O=null,Ie(c.V),c.g&&(d=c.g,c.g=null,d.abort(),d.dispose())}function xl(c,d){try{var m=c.j;if(m.I!=0&&(m.g==c||Ml(m.h,c))){if(!c.L&&Ml(m.h,c)&&m.I==3){try{var T=m.Ba.g.parse(d)}catch{T=null}if(Array.isArray(T)&&T.length==3){var x=T;if(x[0]==0){e:if(!m.v){if(m.g)if(m.g.F+3e3<c.F)Sa(m),Aa(m);else break e;Hl(m),xt(18)}}else m.xa=x[1],0<m.xa-m.K&&x[2]<37500&&m.F&&m.A==0&&!m.C&&(m.C=Wi(u(m.Va,m),6e3));md(m.h)<=1&&m.ta&&(m.ta=void 0)}else os(m,11)}else if((c.L||m.g==c)&&Sa(m),!I(d))for(x=m.Ba.g.parse(d),d=0;d<x.length;d++){let Be=x[d];const mt=Be[0];if(!(mt<=m.K))if(m.K=mt,Be=Be[1],m.I==2)if(Be[0]=="c"){m.M=Be[1],m.ba=Be[2];const Sn=Be[3];Sn!=null&&(m.ka=Sn,m.j.info("VER="+m.ka));const as=Be[4];as!=null&&(m.za=as,m.j.info("SVER="+m.za));const Er=Be[5];Er!=null&&typeof Er=="number"&&Er>0&&(T=1.5*Er,m.O=T,m.j.info("backChannelRequestTimeoutMs_="+T)),T=m;const wr=c.g;if(wr){const Pa=wr.g?wr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Pa){var U=T.h;U.g||Pa.indexOf("spdy")==-1&&Pa.indexOf("quic")==-1&&Pa.indexOf("h2")==-1||(U.j=U.l,U.g=new Set,U.h&&(Ll(U,U.h),U.h=null))}if(T.G){const ql=wr.g?wr.g.getResponseHeader("X-HTTP-Session-Id"):null;ql&&(T.wa=ql,We(T.J,T.G,ql))}}m.I=3,m.l&&m.l.ra(),m.aa&&(m.T=Date.now()-c.F,m.j.info("Handshake RTT: "+m.T+"ms")),T=m;var J=c;if(T.na=Bd(T,T.L?T.ba:null,T.W),J.L){gd(T.h,J);var we=J,ft=T.O;ft&&(we.H=ft),we.D&&(Vl(we),wa(we)),T.g=J}else xd(T);m.i.length>0&&Ra(m)}else Be[0]!="stop"&&Be[0]!="close"||os(m,7);else m.I==3&&(Be[0]=="stop"||Be[0]=="close"?Be[0]=="stop"?os(m,7):$l(m):Be[0]!="noop"&&m.l&&m.l.qa(Be),m.A=0)}}qi(4)}catch{}}var Kw=class{constructor(c,d){this.g=c,this.map=d}};function dd(c){this.l=c||10,o.PerformanceNavigationTiming?(c=o.performance.getEntriesByType("navigation"),c=c.length>0&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function pd(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function md(c){return c.h?1:c.g?c.g.size:0}function Ml(c,d){return c.h?c.h==d:c.g?c.g.has(d):!1}function Ll(c,d){c.g?c.g.add(d):c.h=d}function gd(c,d){c.h&&c.h==d?c.h=null:c.g&&c.g.has(d)&&c.g.delete(d)}dd.prototype.cancel=function(){if(this.i=_d(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function _d(c){if(c.h!=null)return c.i.concat(c.h.G);if(c.g!=null&&c.g.size!==0){let d=c.i;for(const m of c.g.values())d=d.concat(m.G);return d}return g(c.i)}var yd=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Qw(c,d){if(c){c=c.split("&");for(let m=0;m<c.length;m++){const T=c[m].indexOf("=");let x,U=null;T>=0?(x=c[m].substring(0,T),U=c[m].substring(T+1)):x=c[m],d(x,U?decodeURIComponent(U.replace(/\+/g," ")):"")}}}function _r(c){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let d;c instanceof _r?(this.l=c.l,Qi(this,c.j),this.o=c.o,this.g=c.g,Yi(this,c.u),this.h=c.h,Ul(this,bd(c.i)),this.m=c.m):c&&(d=String(c).match(yd))?(this.l=!1,Qi(this,d[1]||"",!0),this.o=Ji(d[2]||""),this.g=Ji(d[3]||"",!0),Yi(this,d[4]),this.h=Ji(d[5]||"",!0),Ul(this,d[6]||"",!0),this.m=Ji(d[7]||"")):(this.l=!1,this.i=new Zi(null,this.l))}_r.prototype.toString=function(){const c=[];var d=this.j;d&&c.push(Xi(d,vd,!0),":");var m=this.g;return(m||d=="file")&&(c.push("//"),(d=this.o)&&c.push(Xi(d,vd,!0),"@"),c.push(zi(m).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m=this.u,m!=null&&c.push(":",String(m))),(m=this.h)&&(this.g&&m.charAt(0)!="/"&&c.push("/"),c.push(Xi(m,m.charAt(0)=="/"?Xw:Jw,!0))),(m=this.i.toString())&&c.push("?",m),(m=this.m)&&c.push("#",Xi(m,eT)),c.join("")},_r.prototype.resolve=function(c){const d=Rn(this);let m=!!c.j;m?Qi(d,c.j):m=!!c.o,m?d.o=c.o:m=!!c.g,m?d.g=c.g:m=c.u!=null;var T=c.h;if(m)Yi(d,c.u);else if(m=!!c.h){if(T.charAt(0)!="/")if(this.g&&!this.h)T="/"+T;else{var x=d.h.lastIndexOf("/");x!=-1&&(T=d.h.slice(0,x+1)+T)}if(x=T,x==".."||x==".")T="";else if(x.indexOf("./")!=-1||x.indexOf("/.")!=-1){T=x.lastIndexOf("/",0)==0,x=x.split("/");const U=[];for(let J=0;J<x.length;){const we=x[J++];we=="."?T&&J==x.length&&U.push(""):we==".."?((U.length>1||U.length==1&&U[0]!="")&&U.pop(),T&&J==x.length&&U.push("")):(U.push(we),T=!0)}T=U.join("/")}else T=x}return m?d.h=T:m=c.i.toString()!=="",m?Ul(d,bd(c.i)):m=!!c.m,m&&(d.m=c.m),d};function Rn(c){return new _r(c)}function Qi(c,d,m){c.j=m?Ji(d,!0):d,c.j&&(c.j=c.j.replace(/:$/,""))}function Yi(c,d){if(d){if(d=Number(d),isNaN(d)||d<0)throw Error("Bad port number "+d);c.u=d}else c.u=null}function Ul(c,d,m){d instanceof Zi?(c.i=d,tT(c.i,c.l)):(m||(d=Xi(d,Zw)),c.i=new Zi(d,c.l))}function We(c,d,m){c.i.set(d,m)}function Ta(c){return We(c,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),c}function Ji(c,d){return c?d?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function Xi(c,d,m){return typeof c=="string"?(c=encodeURI(c).replace(d,Yw),m&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function Yw(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var vd=/[#\/\?@]/g,Jw=/[#\?:]/g,Xw=/[#\?]/g,Zw=/[#\?@]/g,eT=/#/g;function Zi(c,d){this.h=this.g=null,this.i=c||null,this.j=!!d}function is(c){c.g||(c.g=new Map,c.h=0,c.i&&Qw(c.i,function(d,m){c.add(decodeURIComponent(d.replace(/\+/g," ")),m)}))}t=Zi.prototype,t.add=function(c,d){is(this),this.i=null,c=qs(this,c);let m=this.g.get(c);return m||this.g.set(c,m=[]),m.push(d),this.h+=1,this};function Ed(c,d){is(c),d=qs(c,d),c.g.has(d)&&(c.i=null,c.h-=c.g.get(d).length,c.g.delete(d))}function wd(c,d){return is(c),d=qs(c,d),c.g.has(d)}t.forEach=function(c,d){is(this),this.g.forEach(function(m,T){m.forEach(function(x){c.call(d,x,T,this)},this)},this)};function Td(c,d){is(c);let m=[];if(typeof d=="string")wd(c,d)&&(m=m.concat(c.g.get(qs(c,d))));else for(c=Array.from(c.g.values()),d=0;d<c.length;d++)m=m.concat(c[d]);return m}t.set=function(c,d){return is(this),this.i=null,c=qs(this,c),wd(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[d]),this.h+=1,this},t.get=function(c,d){return c?(c=Td(this,c),c.length>0?String(c[0]):d):d};function Id(c,d,m){Ed(c,d),m.length>0&&(c.i=null,c.g.set(qs(c,d),g(m)),c.h+=m.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],d=Array.from(this.g.keys());for(let T=0;T<d.length;T++){var m=d[T];const x=zi(m);m=Td(this,m);for(let U=0;U<m.length;U++){let J=x;m[U]!==""&&(J+="="+zi(m[U])),c.push(J)}}return this.i=c.join("&")};function bd(c){const d=new Zi;return d.i=c.i,c.g&&(d.g=new Map(c.g),d.h=c.h),d}function qs(c,d){return d=String(d),c.j&&(d=d.toLowerCase()),d}function tT(c,d){d&&!c.j&&(is(c),c.i=null,c.g.forEach(function(m,T){const x=T.toLowerCase();T!=x&&(Ed(this,T),Id(this,x,m))},c)),c.j=d}function nT(c,d){const m=new Gi;if(o.Image){const T=new Image;T.onload=h(yr,m,"TestLoadImage: loaded",!0,d,T),T.onerror=h(yr,m,"TestLoadImage: error",!1,d,T),T.onabort=h(yr,m,"TestLoadImage: abort",!1,d,T),T.ontimeout=h(yr,m,"TestLoadImage: timeout",!1,d,T),o.setTimeout(function(){T.ontimeout&&T.ontimeout()},1e4),T.src=c}else d(!1)}function rT(c,d){const m=new Gi,T=new AbortController,x=setTimeout(()=>{T.abort(),yr(m,"TestPingServer: timeout",!1,d)},1e4);fetch(c,{signal:T.signal}).then(U=>{clearTimeout(x),U.ok?yr(m,"TestPingServer: ok",!0,d):yr(m,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(x),yr(m,"TestPingServer: error",!1,d)})}function yr(c,d,m,T,x){try{x&&(x.onload=null,x.onerror=null,x.onabort=null,x.ontimeout=null),T(m)}catch{}}function sT(){this.g=new Ct}function Fl(c){this.i=c.Sb||null,this.h=c.ab||!1}f(Fl,ut),Fl.prototype.g=function(){return new Ia(this.i,this.h)};function Ia(c,d){K.call(this),this.H=c,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}f(Ia,K),t=Ia.prototype,t.open=function(c,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=c,this.D=d,this.readyState=1,to(this)},t.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const d={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};c&&(d.body=c),(this.H||o).fetch(new Request(this.D,d)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,eo(this)),this.readyState=0},t.Pa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,to(this)),this.g&&(this.readyState=3,to(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Ad(this)}else c.text().then(this.Oa.bind(this),this.ga.bind(this))};function Ad(c){c.j.read().then(c.Ma.bind(c)).catch(c.ga.bind(c))}t.Ma=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var d=c.value?c.value:new Uint8Array(0);(d=this.B.decode(d,{stream:!c.done}))&&(this.response=this.responseText+=d)}c.done?eo(this):to(this),this.readyState==3&&Ad(this)}},t.Oa=function(c){this.g&&(this.response=this.responseText=c,eo(this))},t.Na=function(c){this.g&&(this.response=c,eo(this))},t.ga=function(){this.g&&eo(this)};function eo(c){c.readyState=4,c.l=null,c.j=null,c.B=null,to(c)}t.setRequestHeader=function(c,d){this.A.append(c,d)},t.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],d=this.h.entries();for(var m=d.next();!m.done;)m=m.value,c.push(m[0]+": "+m[1]),m=d.next();return c.join(`\r
`)};function to(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(Ia.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function Rd(c){let d="";return Ae(c,function(m,T){d+=T,d+=":",d+=m,d+=`\r
`}),d}function Bl(c,d,m){e:{for(T in m){var T=!1;break e}T=!0}T||(m=Rd(m),typeof c=="string"?m!=null&&zi(m):We(c,d,m))}function Qe(c){K.call(this),this.headers=new Map,this.L=c||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}f(Qe,K);var iT=/^https?$/i,oT=["POST","PUT"];t=Qe.prototype,t.Fa=function(c){this.H=c},t.ea=function(c,d,m,T){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);d=d?d.toUpperCase():"GET",this.D=c,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():ad.g(),this.g.onreadystatechange=p(u(this.Ca,this));try{this.B=!0,this.g.open(d,String(c),!0),this.B=!1}catch(U){Sd(this,U);return}if(c=m||"",m=new Map(this.headers),T)if(Object.getPrototypeOf(T)===Object.prototype)for(var x in T)m.set(x,T[x]);else if(typeof T.keys=="function"&&typeof T.get=="function")for(const U of T.keys())m.set(U,T.get(U));else throw Error("Unknown input type for opt_headers: "+String(T));T=Array.from(m.keys()).find(U=>U.toLowerCase()=="content-type"),x=o.FormData&&c instanceof o.FormData,!(Array.prototype.indexOf.call(oT,d,void 0)>=0)||T||x||m.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[U,J]of m)this.g.setRequestHeader(U,J);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(c),this.v=!1}catch(U){Sd(this,U)}};function Sd(c,d){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=d,c.o=5,Cd(c),ba(c)}function Cd(c){c.A||(c.A=!0,z(c,"complete"),z(c,"error"))}t.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=c||7,z(this,"complete"),z(this,"abort"),ba(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ba(this,!0)),Qe.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?Pd(this):this.Xa())},t.Xa=function(){Pd(this)};function Pd(c){if(c.h&&typeof i<"u"){if(c.v&&vr(c)==4)setTimeout(c.Ca.bind(c),0);else if(z(c,"readystatechange"),vr(c)==4){c.h=!1;try{const U=c.ca();e:switch(U){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var m;if(!(m=d)){var T;if(T=U===0){let J=String(c.D).match(yd)[1]||null;!J&&o.self&&o.self.location&&(J=o.self.location.protocol.slice(0,-1)),T=!iT.test(J?J.toLowerCase():"")}m=T}if(m)z(c,"complete"),z(c,"success");else{c.o=6;try{var x=vr(c)>2?c.g.statusText:""}catch{x=""}c.l=x+" ["+c.ca()+"]",Cd(c)}}finally{ba(c)}}}}function ba(c,d){if(c.g){c.m&&(clearTimeout(c.m),c.m=null);const m=c.g;c.g=null,d||z(c,"ready");try{m.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function vr(c){return c.g?c.g.readyState:0}t.ca=function(){try{return vr(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(c){if(this.g){var d=this.g.responseText;return c&&d.indexOf(c)==0&&(d=d.substring(c.length)),Ne(d)}};function kd(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.F){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function aT(c){const d={};c=(c.g&&vr(c)>=2&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let T=0;T<c.length;T++){if(I(c[T]))continue;var m=Ww(c[T]);const x=m[0];if(m=m[1],typeof m!="string")continue;m=m.trim();const U=d[x]||[];d[x]=U,U.push(m)}An(d,function(T){return T.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function no(c,d,m){return m&&m.internalChannelParams&&m.internalChannelParams[c]||d}function Nd(c){this.za=0,this.i=[],this.j=new Gi,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=no("failFast",!1,c),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=no("baseRetryDelayMs",5e3,c),this.Za=no("retryDelaySeedMs",1e4,c),this.Ta=no("forwardChannelMaxRetries",2,c),this.va=no("forwardChannelRequestTimeoutMs",2e4,c),this.ma=c&&c.xmlHttpFactory||void 0,this.Ua=c&&c.Rb||void 0,this.Aa=c&&c.useFetchStreams||!1,this.O=void 0,this.L=c&&c.supportsCrossDomainXhr||!1,this.M="",this.h=new dd(c&&c.concurrentRequestLimit),this.Ba=new sT,this.S=c&&c.fastHandshake||!1,this.R=c&&c.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=c&&c.Pb||!1,c&&c.ua&&this.j.ua(),c&&c.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&c&&c.detectBufferingProxy||!1,this.ia=void 0,c&&c.longPollingTimeout&&c.longPollingTimeout>0&&(this.ia=c.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=Nd.prototype,t.ka=8,t.I=1,t.connect=function(c,d,m,T){xt(0),this.W=c,this.H=d||{},m&&T!==void 0&&(this.H.OSID=m,this.H.OAID=T),this.F=this.X,this.J=Bd(this,null,this.W),Ra(this)};function $l(c){if(Od(c),c.I==3){var d=c.V++,m=Rn(c.J);if(We(m,"SID",c.M),We(m,"RID",d),We(m,"TYPE","terminate"),ro(c,m),d=new gr(c,c.j,d),d.M=2,d.A=Ta(Rn(m)),m=!1,o.navigator&&o.navigator.sendBeacon)try{m=o.navigator.sendBeacon(d.A.toString(),"")}catch{}!m&&o.Image&&(new Image().src=d.A,m=!0),m||(d.g=$d(d.j,null),d.g.ea(d.A)),d.F=Date.now(),wa(d)}Fd(c)}function Aa(c){c.g&&(jl(c),c.g.cancel(),c.g=null)}function Od(c){Aa(c),c.v&&(o.clearTimeout(c.v),c.v=null),Sa(c),c.h.cancel(),c.m&&(typeof c.m=="number"&&o.clearTimeout(c.m),c.m=null)}function Ra(c){if(!pd(c.h)&&!c.m){c.m=!0;var d=c.Ea;V||w(),L||(V(),L=!0),b.add(d,c),c.D=0}}function cT(c,d){return md(c.h)>=c.h.j-(c.m?1:0)?!1:c.m?(c.i=d.G.concat(c.i),!0):c.I==1||c.I==2||c.D>=(c.Sa?0:c.Ta)?!1:(c.m=Wi(u(c.Ea,c,d),Ud(c,c.D)),c.D++,!0)}t.Ea=function(c){if(this.m)if(this.m=null,this.I==1){if(!c){this.V=Math.floor(Math.random()*1e5),c=this.V++;const x=new gr(this,this.j,c);let U=this.o;if(this.U&&(U?(U=zt(U),$n(U,this.U)):U=this.U),this.u!==null||this.R||(x.J=U,U=null),this.S)e:{for(var d=0,m=0;m<this.i.length;m++){t:{var T=this.i[m];if("__data__"in T.map&&(T=T.map.__data__,typeof T=="string")){T=T.length;break t}T=void 0}if(T===void 0)break;if(d+=T,d>4096){d=m;break e}if(d===4096||m===this.i.length-1){d=m+1;break e}}d=1e3}else d=1e3;d=Vd(this,x,d),m=Rn(this.J),We(m,"RID",c),We(m,"CVER",22),this.G&&We(m,"X-HTTP-Session-Id",this.G),ro(this,m),U&&(this.R?d="headers="+zi(Rd(U))+"&"+d:this.u&&Bl(m,this.u,U)),Ll(this.h,x),this.Ra&&We(m,"TYPE","init"),this.S?(We(m,"$req",d),We(m,"SID","null"),x.U=!0,Dl(x,m,null)):Dl(x,m,d),this.I=2}}else this.I==3&&(c?Dd(this,c):this.i.length==0||pd(this.h)||Dd(this))};function Dd(c,d){var m;d?m=d.l:m=c.V++;const T=Rn(c.J);We(T,"SID",c.M),We(T,"RID",m),We(T,"AID",c.K),ro(c,T),c.u&&c.o&&Bl(T,c.u,c.o),m=new gr(c,c.j,m,c.D+1),c.u===null&&(m.J=c.o),d&&(c.i=d.G.concat(c.i)),d=Vd(c,m,1e3),m.H=Math.round(c.va*.5)+Math.round(c.va*.5*Math.random()),Ll(c.h,m),Dl(m,T,d)}function ro(c,d){c.H&&Ae(c.H,function(m,T){We(d,T,m)}),c.l&&Ae({},function(m,T){We(d,T,m)})}function Vd(c,d,m){m=Math.min(c.i.length,m);const T=c.l?u(c.l.Ka,c.l,c):null;e:{var x=c.i;let we=-1;for(;;){const ft=["count="+m];we==-1?m>0?(we=x[0].g,ft.push("ofs="+we)):we=0:ft.push("ofs="+we);let Be=!0;for(let mt=0;mt<m;mt++){var U=x[mt].g;const Sn=x[mt].map;if(U-=we,U<0)we=Math.max(0,x[mt].g-100),Be=!1;else try{U="req"+U+"_"||"";try{var J=Sn instanceof Map?Sn:Object.entries(Sn);for(const[as,Er]of J){let wr=Er;a(Er)&&(wr=Oe(Er)),ft.push(U+as+"="+encodeURIComponent(wr))}}catch(as){throw ft.push(U+"type="+encodeURIComponent("_badmap")),as}}catch{T&&T(Sn)}}if(Be){J=ft.join("&");break e}}J=void 0}return c=c.i.splice(0,m),d.G=c,J}function xd(c){if(!c.g&&!c.v){c.Y=1;var d=c.Da;V||w(),L||(V(),L=!0),b.add(d,c),c.A=0}}function Hl(c){return c.g||c.v||c.A>=3?!1:(c.Y++,c.v=Wi(u(c.Da,c),Ud(c,c.A)),c.A++,!0)}t.Da=function(){if(this.v=null,Md(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var c=4*this.T;this.j.info("BP detection timer enabled: "+c),this.B=Wi(u(this.Wa,this),c)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,xt(10),Aa(this),Md(this))};function jl(c){c.B!=null&&(o.clearTimeout(c.B),c.B=null)}function Md(c){c.g=new gr(c,c.j,"rpc",c.Y),c.u===null&&(c.g.J=c.o),c.g.P=0;var d=Rn(c.na);We(d,"RID","rpc"),We(d,"SID",c.M),We(d,"AID",c.K),We(d,"CI",c.F?"0":"1"),!c.F&&c.ia&&We(d,"TO",c.ia),We(d,"TYPE","xmlhttp"),ro(c,d),c.u&&c.o&&Bl(d,c.u,c.o),c.O&&(c.g.H=c.O);var m=c.g;c=c.ba,m.M=1,m.A=Ta(Rn(d)),m.u=null,m.R=!0,ud(m,c)}t.Va=function(){this.C!=null&&(this.C=null,Aa(this),Hl(this),xt(19))};function Sa(c){c.C!=null&&(o.clearTimeout(c.C),c.C=null)}function Ld(c,d){var m=null;if(c.g==d){Sa(c),jl(c),c.g=null;var T=2}else if(Ml(c.h,d))m=d.G,gd(c.h,d),T=1;else return;if(c.I!=0){if(d.o)if(T==1){m=d.u?d.u.length:0,d=Date.now()-d.F;var x=c.D;T=rs(),z(T,new id(T,m)),Ra(c)}else xd(c);else if(x=d.m,x==3||x==0&&d.X>0||!(T==1&&cT(c,d)||T==2&&Hl(c)))switch(m&&m.length>0&&(d=c.h,d.i=d.i.concat(m)),x){case 1:os(c,5);break;case 4:os(c,10);break;case 3:os(c,6);break;default:os(c,2)}}}function Ud(c,d){let m=c.Qa+Math.floor(Math.random()*c.Za);return c.isActive()||(m*=2),m*d}function os(c,d){if(c.j.info("Error code "+d),d==2){var m=u(c.bb,c),T=c.Ua;const x=!T;T=new _r(T||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||Qi(T,"https"),Ta(T),x?nT(T.toString(),m):rT(T.toString(),m)}else xt(2);c.I=0,c.l&&c.l.pa(d),Fd(c),Od(c)}t.bb=function(c){c?(this.j.info("Successfully pinged google.com"),xt(2)):(this.j.info("Failed to ping google.com"),xt(1))};function Fd(c){if(c.I=0,c.ja=[],c.l){const d=_d(c.h);(d.length!=0||c.i.length!=0)&&(v(c.ja,d),v(c.ja,c.i),c.h.i.length=0,g(c.i),c.i.length=0),c.l.oa()}}function Bd(c,d,m){var T=m instanceof _r?Rn(m):new _r(m);if(T.g!="")d&&(T.g=d+"."+T.g),Yi(T,T.u);else{var x=o.location;T=x.protocol,d=d?d+"."+x.hostname:x.hostname,x=+x.port;const U=new _r(null);T&&Qi(U,T),d&&(U.g=d),x&&Yi(U,x),m&&(U.h=m),T=U}return m=c.G,d=c.wa,m&&d&&We(T,m,d),We(T,"VER",c.ka),ro(c,T),T}function $d(c,d,m){if(d&&!c.L)throw Error("Can't create secondary domain capable XhrIo object.");return d=c.Aa&&!c.ma?new Qe(new Fl({ab:m})):new Qe(c.ma),d.Fa(c.L),d}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Hd(){}t=Hd.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function Ca(){}Ca.prototype.g=function(c,d){return new Qt(c,d)};function Qt(c,d){K.call(this),this.g=new Nd(d),this.l=c,this.h=d&&d.messageUrlParams||null,c=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(c?c["X-WebChannel-Content-Type"]=d.messageContentType:c={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.sa&&(c?c["X-WebChannel-Client-Profile"]=d.sa:c={"X-WebChannel-Client-Profile":d.sa}),this.g.U=c,(c=d&&d.Qb)&&!I(c)&&(this.g.u=c),this.A=d&&d.supportsCrossDomainXhr||!1,this.v=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!I(d)&&(this.g.G=d,c=this.h,c!==null&&d in c&&(c=this.h,d in c&&delete c[d])),this.j=new Ws(this)}f(Qt,K),Qt.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Qt.prototype.close=function(){$l(this.g)},Qt.prototype.o=function(c){var d=this.g;if(typeof c=="string"){var m={};m.__data__=c,c=m}else this.v&&(m={},m.__data__=Oe(c),c=m);d.i.push(new Kw(d.Ya++,c)),d.I==3&&Ra(d)},Qt.prototype.N=function(){this.g.l=null,delete this.j,$l(this.g),delete this.g,Qt.Z.N.call(this)};function jd(c){Hn.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var d=c.__sm__;if(d){e:{for(const m in d){c=m;break e}c=void 0}(this.i=c)&&(c=this.i,d=d!==null&&c in d?d[c]:void 0),this.data=d}else this.data=c}f(jd,Hn);function qd(){Hs.call(this),this.status=1}f(qd,Hs);function Ws(c){this.g=c}f(Ws,Hd),Ws.prototype.ra=function(){z(this.g,"a")},Ws.prototype.qa=function(c){z(this.g,new jd(c))},Ws.prototype.pa=function(c){z(this.g,new qd)},Ws.prototype.oa=function(){z(this.g,"b")},Ca.prototype.createWebChannel=Ca.prototype.g,Qt.prototype.send=Qt.prototype.o,Qt.prototype.open=Qt.prototype.m,Qt.prototype.close=Qt.prototype.close,cE=function(){return new Ca},aE=function(){return rs()},oE=nt,hh={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Ea.NO_ERROR=0,Ea.TIMEOUT=8,Ea.HTTP_ERROR=6,nc=Ea,od.COMPLETE="complete",iE=od,Ft.EventType=ht,ht.OPEN="a",ht.CLOSE="b",ht.ERROR="c",ht.MESSAGE="d",K.prototype.listen=K.prototype.J,po=Ft,Qe.prototype.listenOnce=Qe.prototype.K,Qe.prototype.getLastError=Qe.prototype.Ha,Qe.prototype.getLastErrorCode=Qe.prototype.ya,Qe.prototype.getStatus=Qe.prototype.ca,Qe.prototype.getResponseJson=Qe.prototype.La,Qe.prototype.getResponseText=Qe.prototype.la,Qe.prototype.send=Qe.prototype.ea,Qe.prototype.setWithCredentials=Qe.prototype.Fa,sE=Qe}).apply(typeof Ha<"u"?Ha:typeof self<"u"?self:typeof window<"u"?window:{});const Km="@firebase/firestore",Qm="4.9.3";class Nt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Nt.UNAUTHENTICATED=new Nt(null),Nt.GOOGLE_CREDENTIALS=new Nt("google-credentials-uid"),Nt.FIRST_PARTY=new Nt("first-party-uid"),Nt.MOCK_USER=new Nt("mock-user");let Li="12.7.0";const Os=new ff("@firebase/firestore");function Ys(){return Os.logLevel}function se(t,...e){if(Os.logLevel<=Re.DEBUG){const n=e.map(If);Os.debug(`Firestore (${Li}): ${t}`,...n)}}function hr(t,...e){if(Os.logLevel<=Re.ERROR){const n=e.map(If);Os.error(`Firestore (${Li}): ${t}`,...n)}}function Ds(t,...e){if(Os.logLevel<=Re.WARN){const n=e.map(If);Os.warn(`Firestore (${Li}): ${t}`,...n)}}function If(t){if(typeof t=="string")return t;try{return(function(n){return JSON.stringify(n)})(t)}catch{return t}}function ge(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,lE(t,r,n)}function lE(t,e,n){let r=`FIRESTORE (${Li}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw hr(r),new Error(r)}function xe(t,e,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,t||lE(e,s,r)}function Ee(t,e){return t}const $={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ee extends pr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class sr{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}class uE{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class hE{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(Nt.UNAUTHENTICATED)))}shutdown(){}}class dN{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class pN{constructor(e){this.t=e,this.currentUser=Nt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){xe(this.o===void 0,42304);let r=this.i;const s=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let i=new sr;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new sr,e.enqueueRetryable((()=>s(this.currentUser)))};const o=()=>{const l=i;e.enqueueRetryable((async()=>{await l.promise,await s(this.currentUser)}))},a=l=>{se("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit((l=>a(l))),setTimeout((()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(se("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new sr)}}),0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((r=>this.i!==e?(se("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(xe(typeof r.accessToken=="string",31837,{l:r}),new uE(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return xe(e===null||typeof e=="string",2055,{h:e}),new Nt(e)}}class mN{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=Nt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class gN{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new mN(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(Nt.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Ym{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class _N{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,on(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){xe(this.o===void 0,3512);const r=i=>{i.error!=null&&se("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.m;return this.m=i.token,se("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable((()=>r(i)))};const s=i=>{se("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((i=>s(i))),setTimeout((()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?s(i):se("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new Ym(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(xe(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new Ym(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function yN(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}class hl{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=yN(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%62))}return r}}function Se(t,e){return t<e?-1:t>e?1:0}function fh(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const s=t.charAt(r),i=e.charAt(r);if(s!==i)return wu(s)===wu(i)?Se(s,i):wu(s)?1:-1}return Se(t.length,e.length)}const vN=55296,EN=57343;function wu(t){const e=t.charCodeAt(0);return e>=vN&&e<=EN}function Ai(t,e,n){return t.length===e.length&&t.every(((r,s)=>n(r,e[s])))}const Jm="__name__";class kn{constructor(e,n,r){n===void 0?n=0:n>e.length&&ge(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&ge(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return kn.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof kn?e.forEach((r=>{n.push(r)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=kn.compareSegments(e.get(s),n.get(s));if(i!==0)return i}return Se(e.length,n.length)}static compareSegments(e,n){const r=kn.isNumericId(e),s=kn.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?kn.extractNumericId(e).compare(kn.extractNumericId(n)):fh(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Hr.fromString(e.substring(4,e.length-2))}}class je extends kn{construct(e,n,r){return new je(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new ee($.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter((s=>s.length>0)))}return new je(n)}static emptyPath(){return new je([])}}const wN=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class vt extends kn{construct(e,n,r){return new vt(e,n,r)}static isValidIdentifier(e){return wN.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),vt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Jm}static keyField(){return new vt([Jm])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new ee($.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const a=e[s];if(a==="\\"){if(s+1===e.length)throw new ee($.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[s+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new ee($.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,s+=2}else a==="`"?(o=!o,s++):a!=="."||o?(r+=a,s++):(i(),s++)}if(i(),o)throw new ee($.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new vt(n)}static emptyPath(){return new vt([])}}class ce{constructor(e){this.path=e}static fromPath(e){return new ce(je.fromString(e))}static fromName(e){return new ce(je.fromString(e).popFirst(5))}static empty(){return new ce(je.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&je.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return je.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ce(new je(e.slice()))}}function fE(t,e,n){if(!n)throw new ee($.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function dE(t,e,n,r){if(e===!0&&r===!0)throw new ee($.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Xm(t){if(!ce.isDocumentKey(t))throw new ee($.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Zm(t){if(ce.isDocumentKey(t))throw new ee($.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function pE(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function fl(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ge(12329,{type:typeof t})}function In(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new ee($.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=fl(t);throw new ee($.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function at(t,e){const n={typeString:t};return e&&(n.value=e),n}function ha(t,e){if(!pE(t))throw new ee($.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const s=e[r].typeString,i="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const o=t[r];if(s&&typeof o!==s){n=`JSON field '${r}' must be a ${s}.`;break}if(i!==void 0&&o!==i.value){n=`Expected '${r}' field to equal '${i.value}'`;break}}if(n)throw new ee($.INVALID_ARGUMENT,n);return!0}const eg=-62135596800,tg=1e6;class qe{static now(){return qe.fromMillis(Date.now())}static fromDate(e){return qe.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*tg);return new qe(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ee($.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ee($.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<eg)throw new ee($.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ee($.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/tg}_compareTo(e){return this.seconds===e.seconds?Se(this.nanoseconds,e.nanoseconds):Se(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:qe._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(ha(e,qe._jsonSchema))return new qe(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-eg;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}qe._jsonSchemaVersion="firestore/timestamp/1.0",qe._jsonSchema={type:at("string",qe._jsonSchemaVersion),seconds:at("number"),nanoseconds:at("number")};class ve{static fromTimestamp(e){return new ve(e)}static min(){return new ve(new qe(0,0))}static max(){return new ve(new qe(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const Ho=-1;function TN(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=ve.fromTimestamp(r===1e9?new qe(n+1,0):new qe(n,r));return new zr(s,ce.empty(),e)}function IN(t){return new zr(t.readTime,t.key,Ho)}class zr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new zr(ve.min(),ce.empty(),Ho)}static max(){return new zr(ve.max(),ce.empty(),Ho)}}function bN(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ce.comparator(t.documentKey,e.documentKey),n!==0?n:Se(t.largestBatchId,e.largestBatchId))}const AN="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class RN{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function Ui(t){if(t.code!==$.FAILED_PRECONDITION||t.message!==AN)throw t;se("LocalStore","Unexpectedly lost primary lease")}class j{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ge(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new j(((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof j?n:j.resolve(n)}catch(n){return j.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):j.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):j.reject(n)}static resolve(e){return new j(((n,r)=>{n(e)}))}static reject(e){return new j(((n,r)=>{r(e)}))}static waitFor(e){return new j(((n,r)=>{let s=0,i=0,o=!1;e.forEach((a=>{++s,a.next((()=>{++i,o&&i===s&&n()}),(l=>r(l)))})),o=!0,i===s&&n()}))}static or(e){let n=j.resolve(!1);for(const r of e)n=n.next((s=>s?j.resolve(s):r()));return n}static forEach(e,n){const r=[];return e.forEach(((s,i)=>{r.push(n.call(this,s,i))})),this.waitFor(r)}static mapArray(e,n){return new j(((r,s)=>{const i=e.length,o=new Array(i);let a=0;for(let l=0;l<i;l++){const u=l;n(e[u]).next((h=>{o[u]=h,++a,a===i&&r(o)}),(h=>s(h)))}}))}static doWhile(e,n){return new j(((r,s)=>{const i=()=>{e()===!0?n().next((()=>{i()}),s):r()};i()}))}}function SN(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Fi(t){return t.name==="IndexedDbTransactionError"}class dl{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}dl.ce=-1;const bf=-1;function pl(t){return t==null}function Oc(t){return t===0&&1/t==-1/0}function CN(t){return typeof t=="number"&&Number.isInteger(t)&&!Oc(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}const mE="";function PN(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=ng(e)),e=kN(t.get(n),e);return ng(e)}function kN(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const i=t.charAt(s);switch(i){case"\0":n+="";break;case mE:n+="";break;default:n+=i}}return n}function ng(t){return t+mE+""}function rg(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function es(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function gE(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}class Ke{constructor(e,n){this.comparator=e,this.root=n||It.EMPTY}insert(e,n){return new Ke(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,It.BLACK,null,null))}remove(e){return new Ke(this.comparator,this.root.remove(e,this.comparator).copy(null,null,It.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,r)=>(e(n,r),!1)))}toString(){const e=[];return this.inorderTraversal(((n,r)=>(e.push(`${n}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ja(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ja(this.root,e,this.comparator,!1)}getReverseIterator(){return new ja(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ja(this.root,e,this.comparator,!0)}}class ja{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class It{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??It.RED,this.left=s??It.EMPTY,this.right=i??It.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new It(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return It.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return It.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,It.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,It.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ge(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ge(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw ge(27949);return e+(this.isRed()?0:1)}}It.EMPTY=null,It.RED=!0,It.BLACK=!1;It.EMPTY=new class{constructor(){this.size=0}get key(){throw ge(57766)}get value(){throw ge(16141)}get color(){throw ge(16727)}get left(){throw ge(29726)}get right(){throw ge(36894)}copy(e,n,r,s,i){return this}insert(e,n,r){return new It(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class pt{constructor(e){this.comparator=e,this.data=new Ke(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,r)=>(e(n),!1)))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new sg(this.data.getIterator())}getIteratorFrom(e){return new sg(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((r=>{n=n.add(r)})),n}isEqual(e){if(!(e instanceof pt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new pt(this.comparator);return n.data=e,n}}class sg{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class Zt{constructor(e){this.fields=e,e.sort(vt.comparator)}static empty(){return new Zt([])}unionWith(e){let n=new pt(vt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Zt(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Ai(this.fields,e.fields,((n,r)=>n.isEqual(r)))}}class _E extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class wt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new _E("Invalid base64 string: "+i):i}})(e);return new wt(n)}static fromUint8Array(e){const n=(function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i})(e);return new wt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Se(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}wt.EMPTY_BYTE_STRING=new wt("");const NN=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Kr(t){if(xe(!!t,39018),typeof t=="string"){let e=0;const n=NN.exec(t);if(xe(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:rt(t.seconds),nanos:rt(t.nanos)}}function rt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Qr(t){return typeof t=="string"?wt.fromBase64String(t):wt.fromUint8Array(t)}const yE="server_timestamp",vE="__type__",EE="__previous_value__",wE="__local_write_time__";function Af(t){return(t?.mapValue?.fields||{})[vE]?.stringValue===yE}function ml(t){const e=t.mapValue.fields[EE];return Af(e)?ml(e):e}function jo(t){const e=Kr(t.mapValue.fields[wE].timestampValue);return new qe(e.seconds,e.nanos)}class ON{constructor(e,n,r,s,i,o,a,l,u,h){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=u,this.isUsingEmulator=h}}const Dc="(default)";class Ri{constructor(e,n){this.projectId=e,this.database=n||Dc}static empty(){return new Ri("","")}get isDefaultDatabase(){return this.database===Dc}isEqual(e){return e instanceof Ri&&e.projectId===this.projectId&&e.database===this.database}}const TE="__type__",DN="__max__",qa={mapValue:{}},IE="__vector__",Vc="value";function Yr(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Af(t)?4:xN(t)?9007199254740991:VN(t)?10:11:ge(28295,{value:t})}function Un(t,e){if(t===e)return!0;const n=Yr(t);if(n!==Yr(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return jo(t).isEqual(jo(e));case 3:return(function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=Kr(s.timestampValue),a=Kr(i.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos})(t,e);case 5:return t.stringValue===e.stringValue;case 6:return(function(s,i){return Qr(s.bytesValue).isEqual(Qr(i.bytesValue))})(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return(function(s,i){return rt(s.geoPointValue.latitude)===rt(i.geoPointValue.latitude)&&rt(s.geoPointValue.longitude)===rt(i.geoPointValue.longitude)})(t,e);case 2:return(function(s,i){if("integerValue"in s&&"integerValue"in i)return rt(s.integerValue)===rt(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=rt(s.doubleValue),a=rt(i.doubleValue);return o===a?Oc(o)===Oc(a):isNaN(o)&&isNaN(a)}return!1})(t,e);case 9:return Ai(t.arrayValue.values||[],e.arrayValue.values||[],Un);case 10:case 11:return(function(s,i){const o=s.mapValue.fields||{},a=i.mapValue.fields||{};if(rg(o)!==rg(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!Un(o[l],a[l])))return!1;return!0})(t,e);default:return ge(52216,{left:t})}}function qo(t,e){return(t.values||[]).find((n=>Un(n,e)))!==void 0}function Si(t,e){if(t===e)return 0;const n=Yr(t),r=Yr(e);if(n!==r)return Se(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Se(t.booleanValue,e.booleanValue);case 2:return(function(i,o){const a=rt(i.integerValue||i.doubleValue),l=rt(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1})(t,e);case 3:return ig(t.timestampValue,e.timestampValue);case 4:return ig(jo(t),jo(e));case 5:return fh(t.stringValue,e.stringValue);case 6:return(function(i,o){const a=Qr(i),l=Qr(o);return a.compareTo(l)})(t.bytesValue,e.bytesValue);case 7:return(function(i,o){const a=i.split("/"),l=o.split("/");for(let u=0;u<a.length&&u<l.length;u++){const h=Se(a[u],l[u]);if(h!==0)return h}return Se(a.length,l.length)})(t.referenceValue,e.referenceValue);case 8:return(function(i,o){const a=Se(rt(i.latitude),rt(o.latitude));return a!==0?a:Se(rt(i.longitude),rt(o.longitude))})(t.geoPointValue,e.geoPointValue);case 9:return og(t.arrayValue,e.arrayValue);case 10:return(function(i,o){const a=i.fields||{},l=o.fields||{},u=a[Vc]?.arrayValue,h=l[Vc]?.arrayValue,f=Se(u?.values?.length||0,h?.values?.length||0);return f!==0?f:og(u,h)})(t.mapValue,e.mapValue);case 11:return(function(i,o){if(i===qa.mapValue&&o===qa.mapValue)return 0;if(i===qa.mapValue)return 1;if(o===qa.mapValue)return-1;const a=i.fields||{},l=Object.keys(a),u=o.fields||{},h=Object.keys(u);l.sort(),h.sort();for(let f=0;f<l.length&&f<h.length;++f){const p=fh(l[f],h[f]);if(p!==0)return p;const g=Si(a[l[f]],u[h[f]]);if(g!==0)return g}return Se(l.length,h.length)})(t.mapValue,e.mapValue);default:throw ge(23264,{he:n})}}function ig(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Se(t,e);const n=Kr(t),r=Kr(e),s=Se(n.seconds,r.seconds);return s!==0?s:Se(n.nanos,r.nanos)}function og(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=Si(n[s],r[s]);if(i)return i}return Se(n.length,r.length)}function Ci(t){return dh(t)}function dh(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(function(n){const r=Kr(n);return`time(${r.seconds},${r.nanos})`})(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?(function(n){return Qr(n).toBase64()})(t.bytesValue):"referenceValue"in t?(function(n){return ce.fromName(n).toString()})(t.referenceValue):"geoPointValue"in t?(function(n){return`geo(${n.latitude},${n.longitude})`})(t.geoPointValue):"arrayValue"in t?(function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=dh(i);return r+"]"})(t.arrayValue):"mapValue"in t?(function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${dh(n.fields[o])}`;return s+"}"})(t.mapValue):ge(61005,{value:t})}function rc(t){switch(Yr(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=ml(t);return e?16+rc(e):16;case 5:return 2*t.stringValue.length;case 6:return Qr(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((s,i)=>s+rc(i)),0)})(t.arrayValue);case 10:case 11:return(function(r){let s=0;return es(r.fields,((i,o)=>{s+=i.length+rc(o)})),s})(t.mapValue);default:throw ge(13486,{value:t})}}function ag(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function ph(t){return!!t&&"integerValue"in t}function Rf(t){return!!t&&"arrayValue"in t}function cg(t){return!!t&&"nullValue"in t}function lg(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function sc(t){return!!t&&"mapValue"in t}function VN(t){return(t?.mapValue?.fields||{})[TE]?.stringValue===IE}function Ro(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return es(t.mapValue.fields,((n,r)=>e.mapValue.fields[n]=Ro(r))),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Ro(t.arrayValue.values[n]);return e}return{...t}}function xN(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===DN}class jt{constructor(e){this.value=e}static empty(){return new jt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!sc(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ro(n)}setAll(e){let n=vt.emptyPath(),r={},s=[];e.forEach(((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,s),r={},s=[],n=a.popLast()}o?r[a.lastSegment()]=Ro(o):s.push(a.lastSegment())}));const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());sc(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Un(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];sc(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){es(n,((s,i)=>e[s]=i));for(const s of r)delete e[s]}clone(){return new jt(Ro(this.value))}}function bE(t){const e=[];return es(t.fields,((n,r)=>{const s=new vt([n]);if(sc(r)){const i=bE(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)})),new Zt(e)}class Dt{constructor(e,n,r,s,i,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=a}static newInvalidDocument(e){return new Dt(e,0,ve.min(),ve.min(),ve.min(),jt.empty(),0)}static newFoundDocument(e,n,r,s){return new Dt(e,1,n,ve.min(),r,s,0)}static newNoDocument(e,n){return new Dt(e,2,n,ve.min(),ve.min(),jt.empty(),0)}static newUnknownDocument(e,n){return new Dt(e,3,n,ve.min(),ve.min(),jt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ve.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=jt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=jt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ve.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Dt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Dt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class xc{constructor(e,n){this.position=e,this.inclusive=n}}function ug(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=ce.comparator(ce.fromName(o.referenceValue),n.key):r=Si(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function hg(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Un(t.position[n],e.position[n]))return!1;return!0}class Wo{constructor(e,n="asc"){this.field=e,this.dir=n}}function MN(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}class AE{}class ot extends AE{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new UN(e,n,r):n==="array-contains"?new $N(e,r):n==="in"?new HN(e,r):n==="not-in"?new jN(e,r):n==="array-contains-any"?new qN(e,r):new ot(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new FN(e,r):new BN(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Si(n,this.value)):n!==null&&Yr(this.value)===Yr(n)&&this.matchesComparison(Si(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ge(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class bn extends AE{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new bn(e,n)}matches(e){return RE(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function RE(t){return t.op==="and"}function SE(t){return LN(t)&&RE(t)}function LN(t){for(const e of t.filters)if(e instanceof bn)return!1;return!0}function mh(t){if(t instanceof ot)return t.field.canonicalString()+t.op.toString()+Ci(t.value);if(SE(t))return t.filters.map((e=>mh(e))).join(",");{const e=t.filters.map((n=>mh(n))).join(",");return`${t.op}(${e})`}}function CE(t,e){return t instanceof ot?(function(r,s){return s instanceof ot&&r.op===s.op&&r.field.isEqual(s.field)&&Un(r.value,s.value)})(t,e):t instanceof bn?(function(r,s){return s instanceof bn&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce(((i,o,a)=>i&&CE(o,s.filters[a])),!0):!1})(t,e):void ge(19439)}function PE(t){return t instanceof ot?(function(n){return`${n.field.canonicalString()} ${n.op} ${Ci(n.value)}`})(t):t instanceof bn?(function(n){return n.op.toString()+" {"+n.getFilters().map(PE).join(" ,")+"}"})(t):"Filter"}class UN extends ot{constructor(e,n,r){super(e,n,r),this.key=ce.fromName(r.referenceValue)}matches(e){const n=ce.comparator(e.key,this.key);return this.matchesComparison(n)}}class FN extends ot{constructor(e,n){super(e,"in",n),this.keys=kE("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class BN extends ot{constructor(e,n){super(e,"not-in",n),this.keys=kE("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function kE(t,e){return(e.arrayValue?.values||[]).map((n=>ce.fromName(n.referenceValue)))}class $N extends ot{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Rf(n)&&qo(n.arrayValue,this.value)}}class HN extends ot{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&qo(this.value.arrayValue,n)}}class jN extends ot{constructor(e,n){super(e,"not-in",n)}matches(e){if(qo(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!qo(this.value.arrayValue,n)}}class qN extends ot{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Rf(n)||!n.arrayValue.values)&&n.arrayValue.values.some((r=>qo(this.value.arrayValue,r)))}}class WN{constructor(e,n=null,r=[],s=[],i=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=a,this.Te=null}}function fg(t,e=null,n=[],r=[],s=null,i=null,o=null){return new WN(t,e,n,r,s,i,o)}function Sf(t){const e=Ee(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((r=>mh(r))).join(","),n+="|ob:",n+=e.orderBy.map((r=>(function(i){return i.field.canonicalString()+i.dir})(r))).join(","),pl(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((r=>Ci(r))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((r=>Ci(r))).join(",")),e.Te=n}return e.Te}function Cf(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!MN(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!CE(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!hg(t.startAt,e.startAt)&&hg(t.endAt,e.endAt)}function gh(t){return ce.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}class Bi{constructor(e,n=null,r=[],s=[],i=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=l,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function GN(t,e,n,r,s,i,o,a){return new Bi(t,e,n,r,s,i,o,a)}function Pf(t){return new Bi(t)}function dg(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function NE(t){return t.collectionGroup!==null}function So(t){const e=Ee(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const i of e.explicitOrderBy)e.Ie.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new pt(vt.comparator);return o.filters.forEach((l=>{l.getFlattenedFilters().forEach((u=>{u.isInequality()&&(a=a.add(u.field))}))})),a})(e).forEach((i=>{n.has(i.canonicalString())||i.isKeyField()||e.Ie.push(new Wo(i,r))})),n.has(vt.keyField().canonicalString())||e.Ie.push(new Wo(vt.keyField(),r))}return e.Ie}function xn(t){const e=Ee(t);return e.Ee||(e.Ee=zN(e,So(t))),e.Ee}function zN(t,e){if(t.limitType==="F")return fg(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map((s=>{const i=s.dir==="desc"?"asc":"desc";return new Wo(s.field,i)}));const n=t.endAt?new xc(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new xc(t.startAt.position,t.startAt.inclusive):null;return fg(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function _h(t,e){const n=t.filters.concat([e]);return new Bi(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function yh(t,e,n){return new Bi(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function gl(t,e){return Cf(xn(t),xn(e))&&t.limitType===e.limitType}function OE(t){return`${Sf(xn(t))}|lt:${t.limitType}`}function Js(t){return`Query(target=${(function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map((s=>PE(s))).join(", ")}]`),pl(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map((s=>(function(o){return`${o.field.canonicalString()} (${o.dir})`})(s))).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map((s=>Ci(s))).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map((s=>Ci(s))).join(",")),`Target(${r})`})(xn(t))}; limitType=${t.limitType})`}function _l(t,e){return e.isFoundDocument()&&(function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):ce.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)})(t,e)&&(function(r,s){for(const i of So(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0})(t,e)&&(function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0})(t,e)&&(function(r,s){return!(r.startAt&&!(function(o,a,l){const u=ug(o,a,l);return o.inclusive?u<=0:u<0})(r.startAt,So(r),s)||r.endAt&&!(function(o,a,l){const u=ug(o,a,l);return o.inclusive?u>=0:u>0})(r.endAt,So(r),s))})(t,e)}function KN(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function DE(t){return(e,n)=>{let r=!1;for(const s of So(t)){const i=QN(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function QN(t,e,n){const r=t.field.isKeyField()?ce.comparator(e.key,n.key):(function(i,o,a){const l=o.data.field(i),u=a.data.field(i);return l!==null&&u!==null?Si(l,u):ge(42886)})(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return ge(19790,{direction:t.dir})}}class Fs{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){es(this.inner,((n,r)=>{for(const[s,i]of r)e(s,i)}))}isEmpty(){return gE(this.inner)}size(){return this.innerSize}}const YN=new Ke(ce.comparator);function fr(){return YN}const VE=new Ke(ce.comparator);function mo(...t){let e=VE;for(const n of t)e=e.insert(n.key,n);return e}function xE(t){let e=VE;return t.forEach(((n,r)=>e=e.insert(n,r.overlayedDocument))),e}function vs(){return Co()}function ME(){return Co()}function Co(){return new Fs((t=>t.toString()),((t,e)=>t.isEqual(e)))}const JN=new Ke(ce.comparator),XN=new pt(ce.comparator);function Ce(...t){let e=XN;for(const n of t)e=e.add(n);return e}const ZN=new pt(Se);function eO(){return ZN}function kf(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Oc(e)?"-0":e}}function LE(t){return{integerValue:""+t}}function tO(t,e){return CN(e)?LE(e):kf(t,e)}class yl{constructor(){this._=void 0}}function nO(t,e,n){return t instanceof Go?(function(s,i){const o={fields:{[vE]:{stringValue:yE},[wE]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&Af(i)&&(i=ml(i)),i&&(o.fields[EE]=i),{mapValue:o}})(n,e):t instanceof zo?FE(t,e):t instanceof Ko?BE(t,e):(function(s,i){const o=UE(s,i),a=pg(o)+pg(s.Ae);return ph(o)&&ph(s.Ae)?LE(a):kf(s.serializer,a)})(t,e)}function rO(t,e,n){return t instanceof zo?FE(t,e):t instanceof Ko?BE(t,e):n}function UE(t,e){return t instanceof Mc?(function(r){return ph(r)||(function(i){return!!i&&"doubleValue"in i})(r)})(e)?e:{integerValue:0}:null}class Go extends yl{}class zo extends yl{constructor(e){super(),this.elements=e}}function FE(t,e){const n=$E(e);for(const r of t.elements)n.some((s=>Un(s,r)))||n.push(r);return{arrayValue:{values:n}}}class Ko extends yl{constructor(e){super(),this.elements=e}}function BE(t,e){let n=$E(e);for(const r of t.elements)n=n.filter((s=>!Un(s,r)));return{arrayValue:{values:n}}}class Mc extends yl{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function pg(t){return rt(t.integerValue||t.doubleValue)}function $E(t){return Rf(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}class sO{constructor(e,n){this.field=e,this.transform=n}}function iO(t,e){return t.field.isEqual(e.field)&&(function(r,s){return r instanceof zo&&s instanceof zo||r instanceof Ko&&s instanceof Ko?Ai(r.elements,s.elements,Un):r instanceof Mc&&s instanceof Mc?Un(r.Ae,s.Ae):r instanceof Go&&s instanceof Go})(t.transform,e.transform)}class oO{constructor(e,n){this.version=e,this.transformResults=n}}class mn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new mn}static exists(e){return new mn(void 0,e)}static updateTime(e){return new mn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function ic(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class vl{}function HE(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Nf(t.key,mn.none()):new fa(t.key,t.data,mn.none());{const n=t.data,r=jt.empty();let s=new pt(vt.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new ts(t.key,r,new Zt(s.toArray()),mn.none())}}function aO(t,e,n){t instanceof fa?(function(s,i,o){const a=s.value.clone(),l=gg(s.fieldTransforms,i,o.transformResults);a.setAll(l),i.convertToFoundDocument(o.version,a).setHasCommittedMutations()})(t,e,n):t instanceof ts?(function(s,i,o){if(!ic(s.precondition,i))return void i.convertToUnknownDocument(o.version);const a=gg(s.fieldTransforms,i,o.transformResults),l=i.data;l.setAll(jE(s)),l.setAll(a),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()})(t,e,n):(function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()})(0,e,n)}function Po(t,e,n,r){return t instanceof fa?(function(i,o,a,l){if(!ic(i.precondition,o))return a;const u=i.value.clone(),h=_g(i.fieldTransforms,l,o);return u.setAll(h),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null})(t,e,n,r):t instanceof ts?(function(i,o,a,l){if(!ic(i.precondition,o))return a;const u=_g(i.fieldTransforms,l,o),h=o.data;return h.setAll(jE(i)),h.setAll(u),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),a===null?null:a.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map((f=>f.field)))})(t,e,n,r):(function(i,o,a){return ic(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a})(t,e,n)}function cO(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=UE(r.transform,s||null);i!=null&&(n===null&&(n=jt.empty()),n.set(r.field,i))}return n||null}function mg(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!(function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&Ai(r,s,((i,o)=>iO(i,o)))})(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class fa extends vl{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class ts extends vl{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function jE(t){const e=new Map;return t.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}})),e}function gg(t,e,n){const r=new Map;xe(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,a=e.data.field(i.field);r.set(i.field,rO(o,a,n[s]))}return r}function _g(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,nO(i,o,e))}return r}class Nf extends vl{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class lO extends vl{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class uO{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&aO(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Po(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Po(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=ME();return this.mutations.forEach((s=>{const i=e.get(s.key),o=i.overlayedDocument;let a=this.applyToLocalView(o,i.mutatedFields);a=n.has(s.key)?null:a;const l=HE(o,a);l!==null&&r.set(s.key,l),o.isValidDocument()||o.convertToNoDocument(ve.min())})),r}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),Ce())}isEqual(e){return this.batchId===e.batchId&&Ai(this.mutations,e.mutations,((n,r)=>mg(n,r)))&&Ai(this.baseMutations,e.baseMutations,((n,r)=>mg(n,r)))}}class Of{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){xe(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let s=(function(){return JN})();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new Of(e,n,r,s)}}class hO{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class fO{constructor(e,n){this.count=e,this.unchangedNames=n}}var st,Pe;function dO(t){switch(t){case $.OK:return ge(64938);case $.CANCELLED:case $.UNKNOWN:case $.DEADLINE_EXCEEDED:case $.RESOURCE_EXHAUSTED:case $.INTERNAL:case $.UNAVAILABLE:case $.UNAUTHENTICATED:return!1;case $.INVALID_ARGUMENT:case $.NOT_FOUND:case $.ALREADY_EXISTS:case $.PERMISSION_DENIED:case $.FAILED_PRECONDITION:case $.ABORTED:case $.OUT_OF_RANGE:case $.UNIMPLEMENTED:case $.DATA_LOSS:return!0;default:return ge(15467,{code:t})}}function qE(t){if(t===void 0)return hr("GRPC error has no .code"),$.UNKNOWN;switch(t){case st.OK:return $.OK;case st.CANCELLED:return $.CANCELLED;case st.UNKNOWN:return $.UNKNOWN;case st.DEADLINE_EXCEEDED:return $.DEADLINE_EXCEEDED;case st.RESOURCE_EXHAUSTED:return $.RESOURCE_EXHAUSTED;case st.INTERNAL:return $.INTERNAL;case st.UNAVAILABLE:return $.UNAVAILABLE;case st.UNAUTHENTICATED:return $.UNAUTHENTICATED;case st.INVALID_ARGUMENT:return $.INVALID_ARGUMENT;case st.NOT_FOUND:return $.NOT_FOUND;case st.ALREADY_EXISTS:return $.ALREADY_EXISTS;case st.PERMISSION_DENIED:return $.PERMISSION_DENIED;case st.FAILED_PRECONDITION:return $.FAILED_PRECONDITION;case st.ABORTED:return $.ABORTED;case st.OUT_OF_RANGE:return $.OUT_OF_RANGE;case st.UNIMPLEMENTED:return $.UNIMPLEMENTED;case st.DATA_LOSS:return $.DATA_LOSS;default:return ge(39323,{code:t})}}(Pe=st||(st={}))[Pe.OK=0]="OK",Pe[Pe.CANCELLED=1]="CANCELLED",Pe[Pe.UNKNOWN=2]="UNKNOWN",Pe[Pe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Pe[Pe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Pe[Pe.NOT_FOUND=5]="NOT_FOUND",Pe[Pe.ALREADY_EXISTS=6]="ALREADY_EXISTS",Pe[Pe.PERMISSION_DENIED=7]="PERMISSION_DENIED",Pe[Pe.UNAUTHENTICATED=16]="UNAUTHENTICATED",Pe[Pe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Pe[Pe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Pe[Pe.ABORTED=10]="ABORTED",Pe[Pe.OUT_OF_RANGE=11]="OUT_OF_RANGE",Pe[Pe.UNIMPLEMENTED=12]="UNIMPLEMENTED",Pe[Pe.INTERNAL=13]="INTERNAL",Pe[Pe.UNAVAILABLE=14]="UNAVAILABLE",Pe[Pe.DATA_LOSS=15]="DATA_LOSS";function pO(){return new TextEncoder}const mO=new Hr([4294967295,4294967295],0);function yg(t){const e=pO().encode(t),n=new rE;return n.update(e),new Uint8Array(n.digest())}function vg(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new Hr([n,r],0),new Hr([s,i],0)]}class Df{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new go(`Invalid padding: ${n}`);if(r<0)throw new go(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new go(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new go(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Hr.fromNumber(this.ge)}ye(e,n,r){let s=e.add(n.multiply(Hr.fromNumber(r)));return s.compare(mO)===1&&(s=new Hr([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=yg(e),[r,s]=vg(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(r,s,i);if(!this.we(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new Df(i,s,n);return r.forEach((a=>o.insert(a))),o}insert(e){if(this.ge===0)return;const n=yg(e),[r,s]=vg(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(r,s,i);this.Se(o)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class go extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class El{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,da.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new El(ve.min(),s,new Ke(Se),fr(),Ce())}}class da{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new da(r,n,Ce(),Ce(),Ce())}}class oc{constructor(e,n,r,s){this.be=e,this.removedTargetIds=n,this.key=r,this.De=s}}class WE{constructor(e,n){this.targetId=e,this.Ce=n}}class GE{constructor(e,n,r=wt.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class Eg{constructor(){this.ve=0,this.Fe=wg(),this.Me=wt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Ce(),n=Ce(),r=Ce();return this.Fe.forEach(((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:ge(38017,{changeType:i})}})),new da(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=wg()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,xe(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class gO{constructor(e){this.Ge=e,this.ze=new Map,this.je=fr(),this.Je=Wa(),this.He=Wa(),this.Ye=new Ke(Se)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:ge(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((r,s)=>{this.rt(s)&&n(s)}))}st(e){const n=e.targetId,r=e.Ce.count,s=this.ot(n);if(s){const i=s.target;if(gh(i))if(r===0){const o=new ce(i.path);this.et(n,o,Dt.newNoDocument(o,ve.min()))}else xe(r===1,20013,{expectedCount:r});else{const o=this._t(n);if(o!==r){const a=this.ut(e),l=a?this.ct(a,e,o):1;if(l!==0){this.it(n);const u=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,u)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,a;try{o=Qr(r).toUint8Array()}catch(l){if(l instanceof _E)return Ds("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new Df(o,s,i)}catch(l){return Ds(l instanceof go?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.ge===0?null:a}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let s=0;return r.forEach((i=>{const o=this.Ge.ht(),a=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(a)||(this.et(n,i,null),s++)})),s}Tt(e){const n=new Map;this.ze.forEach(((i,o)=>{const a=this.ot(o);if(a){if(i.current&&gh(a.target)){const l=new ce(a.target.path);this.It(l).has(o)||this.Et(o,l)||this.et(o,l,Dt.newNoDocument(l,e))}i.Be&&(n.set(o,i.ke()),i.qe())}}));let r=Ce();this.He.forEach(((i,o)=>{let a=!0;o.forEachWhile((l=>{const u=this.ot(l);return!u||u.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)})),a&&(r=r.add(i))})),this.je.forEach(((i,o)=>o.setReadTime(e)));const s=new El(e,n,this.Ye,this.je,r);return this.je=fr(),this.Je=Wa(),this.He=Wa(),this.Ye=new Ke(Se),s}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,n)?s.Qe(n,1):s.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new Eg,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new pt(Se),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new pt(Se),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||se("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Eg),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function Wa(){return new Ke(ce.comparator)}function wg(){return new Ke(ce.comparator)}const _O={asc:"ASCENDING",desc:"DESCENDING"},yO={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},vO={and:"AND",or:"OR"};class EO{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function vh(t,e){return t.useProto3Json||pl(e)?e:{value:e}}function Lc(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function zE(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function wO(t,e){return Lc(t,e.toTimestamp())}function Mn(t){return xe(!!t,49232),ve.fromTimestamp((function(n){const r=Kr(n);return new qe(r.seconds,r.nanos)})(t))}function Vf(t,e){return Eh(t,e).canonicalString()}function Eh(t,e){const n=(function(s){return new je(["projects",s.projectId,"databases",s.database])})(t).child("documents");return e===void 0?n:n.child(e)}function KE(t){const e=je.fromString(t);return xe(ZE(e),10190,{key:e.toString()}),e}function wh(t,e){return Vf(t.databaseId,e.path)}function Tu(t,e){const n=KE(e);if(n.get(1)!==t.databaseId.projectId)throw new ee($.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new ee($.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ce(YE(n))}function QE(t,e){return Vf(t.databaseId,e)}function TO(t){const e=KE(t);return e.length===4?je.emptyPath():YE(e)}function Th(t){return new je(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function YE(t){return xe(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function Tg(t,e,n){return{name:wh(t,e),fields:n.value.mapValue.fields}}function IO(t,e){let n;if("targetChange"in e){e.targetChange;const r=(function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:ge(39313,{state:u})})(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=(function(u,h){return u.useProto3Json?(xe(h===void 0||typeof h=="string",58123),wt.fromBase64String(h||"")):(xe(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),wt.fromUint8Array(h||new Uint8Array))})(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&(function(u){const h=u.code===void 0?$.UNKNOWN:qE(u.code);return new ee(h,u.message||"")})(o);n=new GE(r,s,i,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=Tu(t,r.document.name),i=Mn(r.document.updateTime),o=r.document.createTime?Mn(r.document.createTime):ve.min(),a=new jt({mapValue:{fields:r.document.fields}}),l=Dt.newFoundDocument(s,i,o,a),u=r.targetIds||[],h=r.removedTargetIds||[];n=new oc(u,h,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=Tu(t,r.document),i=r.readTime?Mn(r.readTime):ve.min(),o=Dt.newNoDocument(s,i),a=r.removedTargetIds||[];n=new oc([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=Tu(t,r.document),i=r.removedTargetIds||[];n=new oc([],i,s,null)}else{if(!("filter"in e))return ge(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new fO(s,i),a=r.targetId;n=new WE(a,o)}}return n}function bO(t,e){let n;if(e instanceof fa)n={update:Tg(t,e.key,e.value)};else if(e instanceof Nf)n={delete:wh(t,e.key)};else if(e instanceof ts)n={update:Tg(t,e.key,e.data),updateMask:DO(e.fieldMask)};else{if(!(e instanceof lO))return ge(16599,{Vt:e.type});n={verify:wh(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((r=>(function(i,o){const a=o.transform;if(a instanceof Go)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof zo)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Ko)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Mc)return{fieldPath:o.field.canonicalString(),increment:a.Ae};throw ge(20930,{transform:o.transform})})(0,r)))),e.precondition.isNone||(n.currentDocument=(function(s,i){return i.updateTime!==void 0?{updateTime:wO(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:ge(27497)})(t,e.precondition)),n}function AO(t,e){return t&&t.length>0?(xe(e!==void 0,14353),t.map((n=>(function(s,i){let o=s.updateTime?Mn(s.updateTime):Mn(i);return o.isEqual(ve.min())&&(o=Mn(i)),new oO(o,s.transformResults||[])})(n,e)))):[]}function RO(t,e){return{documents:[QE(t,e.path)]}}function SO(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=QE(t,s);const i=(function(u){if(u.length!==0)return XE(bn.create(u,"and"))})(e.filters);i&&(n.structuredQuery.where=i);const o=(function(u){if(u.length!==0)return u.map((h=>(function(p){return{field:Xs(p.field),direction:kO(p.dir)}})(h)))})(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=vh(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=(function(u){return{before:u.inclusive,values:u.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(u){return{before:!u.inclusive,values:u.position}})(e.endAt)),{ft:n,parent:s}}function CO(t){let e=TO(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){xe(r===1,65062);const h=n.from[0];h.allDescendants?s=h.collectionId:e=e.child(h.collectionId)}let i=[];n.where&&(i=(function(f){const p=JE(f);return p instanceof bn&&SE(p)?p.getFilters():[p]})(n.where));let o=[];n.orderBy&&(o=(function(f){return f.map((p=>(function(v){return new Wo(Zs(v.field),(function(C){switch(C){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(v.direction))})(p)))})(n.orderBy));let a=null;n.limit&&(a=(function(f){let p;return p=typeof f=="object"?f.value:f,pl(p)?null:p})(n.limit));let l=null;n.startAt&&(l=(function(f){const p=!!f.before,g=f.values||[];return new xc(g,p)})(n.startAt));let u=null;return n.endAt&&(u=(function(f){const p=!f.before,g=f.values||[];return new xc(g,p)})(n.endAt)),GN(e,s,o,i,a,"F",l,u)}function PO(t,e){const n=(function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ge(28987,{purpose:s})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function JE(t){return t.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Zs(n.unaryFilter.field);return ot.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=Zs(n.unaryFilter.field);return ot.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Zs(n.unaryFilter.field);return ot.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Zs(n.unaryFilter.field);return ot.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ge(61313);default:return ge(60726)}})(t):t.fieldFilter!==void 0?(function(n){return ot.create(Zs(n.fieldFilter.field),(function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ge(58110);default:return ge(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(t):t.compositeFilter!==void 0?(function(n){return bn.create(n.compositeFilter.filters.map((r=>JE(r))),(function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return ge(1026)}})(n.compositeFilter.op))})(t):ge(30097,{filter:t})}function kO(t){return _O[t]}function NO(t){return yO[t]}function OO(t){return vO[t]}function Xs(t){return{fieldPath:t.canonicalString()}}function Zs(t){return vt.fromServerFormat(t.fieldPath)}function XE(t){return t instanceof ot?(function(n){if(n.op==="=="){if(lg(n.value))return{unaryFilter:{field:Xs(n.field),op:"IS_NAN"}};if(cg(n.value))return{unaryFilter:{field:Xs(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(lg(n.value))return{unaryFilter:{field:Xs(n.field),op:"IS_NOT_NAN"}};if(cg(n.value))return{unaryFilter:{field:Xs(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Xs(n.field),op:NO(n.op),value:n.value}}})(t):t instanceof bn?(function(n){const r=n.getFilters().map((s=>XE(s)));return r.length===1?r[0]:{compositeFilter:{op:OO(n.op),filters:r}}})(t):ge(54877,{filter:t})}function DO(t){const e=[];return t.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function ZE(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}class Mr{constructor(e,n,r,s,i=ve.min(),o=ve.min(),a=wt.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new Mr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Mr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Mr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Mr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class VO{constructor(e){this.yt=e}}function xO(t){const e=CO({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?yh(e,e.limit,"L"):e}class MO{constructor(){this.Cn=new LO}addToCollectionParentIndex(e,n){return this.Cn.add(n),j.resolve()}getCollectionParents(e,n){return j.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return j.resolve()}deleteFieldIndex(e,n){return j.resolve()}deleteAllFieldIndexes(e){return j.resolve()}createTargetIndexes(e,n){return j.resolve()}getDocumentsMatchingTarget(e,n){return j.resolve(null)}getIndexType(e,n){return j.resolve(0)}getFieldIndexes(e,n){return j.resolve([])}getNextCollectionGroupToUpdate(e){return j.resolve(null)}getMinOffset(e,n){return j.resolve(zr.min())}getMinOffsetFromCollectionGroup(e,n){return j.resolve(zr.min())}updateCollectionGroup(e,n,r){return j.resolve()}updateIndexEntries(e,n){return j.resolve()}}class LO{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new pt(je.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new pt(je.comparator)).toArray()}}const Ig={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},ew=41943040;class $t{static withCacheSize(e){return new $t(e,$t.DEFAULT_COLLECTION_PERCENTILE,$t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}$t.DEFAULT_COLLECTION_PERCENTILE=10,$t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,$t.DEFAULT=new $t(ew,$t.DEFAULT_COLLECTION_PERCENTILE,$t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),$t.DISABLED=new $t(-1,0,0);class Pi{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Pi(0)}static cr(){return new Pi(-1)}}const bg="LruGarbageCollector",UO=1048576;function Ag([t,e],[n,r]){const s=Se(t,n);return s===0?Se(e,r):s}class FO{constructor(e){this.Ir=e,this.buffer=new pt(Ag),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();Ag(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class BO{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){se(bg,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Fi(n)?se(bg,"Ignoring IndexedDB error during garbage collection: ",n):await Ui(n)}await this.Vr(3e5)}))}}class $O{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next((r=>Math.floor(n/100*r)))}nthSequenceNumber(e,n){if(n===0)return j.resolve(dl.ce);const r=new FO(n);return this.mr.forEachTarget(e,(s=>r.Ar(s.sequenceNumber))).next((()=>this.mr.pr(e,(s=>r.Ar(s))))).next((()=>r.maxValue))}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(se("LruGarbageCollector","Garbage collection skipped; disabled"),j.resolve(Ig)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(se("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Ig):this.yr(e,n)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,s,i,o,a,l,u;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((f=>(f>this.params.maximumSequenceNumbersToCollect?(se("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),s=this.params.maximumSequenceNumbersToCollect):s=f,o=Date.now(),this.nthSequenceNumber(e,s)))).next((f=>(r=f,a=Date.now(),this.removeTargets(e,r,n)))).next((f=>(i=f,l=Date.now(),this.removeOrphanedDocuments(e,r)))).next((f=>(u=Date.now(),Ys()<=Re.DEBUG&&se("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-h}ms
	Determined least recently used ${s} in `+(a-o)+`ms
	Removed ${i} targets in `+(l-a)+`ms
	Removed ${f} documents in `+(u-l)+`ms
Total Duration: ${u-h}ms`),j.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:f}))))}}function HO(t,e){return new $O(t,e)}class jO{constructor(){this.changes=new Fs((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Dt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?j.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class qO{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}class WO{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next((s=>(r=s,this.remoteDocumentCache.getEntry(e,n)))).next((s=>(r!==null&&Po(r.mutation,s,Zt.empty(),qe.now()),s)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.getLocalViewOfDocuments(e,r,Ce()).next((()=>r))))}getLocalViewOfDocuments(e,n,r=Ce()){const s=vs();return this.populateOverlays(e,s,n).next((()=>this.computeViews(e,n,s,r).next((i=>{let o=mo();return i.forEach(((a,l)=>{o=o.insert(a,l.overlayedDocument)})),o}))))}getOverlayedDocuments(e,n){const r=vs();return this.populateOverlays(e,r,n).next((()=>this.computeViews(e,n,r,Ce())))}populateOverlays(e,n,r){const s=[];return r.forEach((i=>{n.has(i)||s.push(i)})),this.documentOverlayCache.getOverlays(e,s).next((i=>{i.forEach(((o,a)=>{n.set(o,a)}))}))}computeViews(e,n,r,s){let i=fr();const o=Co(),a=(function(){return Co()})();return n.forEach(((l,u)=>{const h=r.get(u.key);s.has(u.key)&&(h===void 0||h.mutation instanceof ts)?i=i.insert(u.key,u):h!==void 0?(o.set(u.key,h.mutation.getFieldMask()),Po(h.mutation,u,h.mutation.getFieldMask(),qe.now())):o.set(u.key,Zt.empty())})),this.recalculateAndSaveOverlays(e,i).next((l=>(l.forEach(((u,h)=>o.set(u,h))),n.forEach(((u,h)=>a.set(u,new qO(h,o.get(u)??null)))),a)))}recalculateAndSaveOverlays(e,n){const r=Co();let s=new Ke(((o,a)=>o-a)),i=Ce();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((o=>{for(const a of o)a.keys().forEach((l=>{const u=n.get(l);if(u===null)return;let h=r.get(l)||Zt.empty();h=a.applyToLocalView(u,h),r.set(l,h);const f=(s.get(a.batchId)||Ce()).add(l);s=s.insert(a.batchId,f)}))})).next((()=>{const o=[],a=s.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),u=l.key,h=l.value,f=ME();h.forEach((p=>{if(!i.has(p)){const g=HE(n.get(p),r.get(p));g!==null&&f.set(p,g),i=i.add(p)}})),o.push(this.documentOverlayCache.saveOverlays(e,u,f))}return j.waitFor(o)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,n,r,s){return(function(o){return ce.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):NE(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next((i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):j.resolve(vs());let a=Ho,l=i;return o.next((u=>j.forEach(u,((h,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),i.get(h)?j.resolve():this.remoteDocumentCache.getEntry(e,h).next((p=>{l=l.insert(h,p)}))))).next((()=>this.populateOverlays(e,u,i))).next((()=>this.computeViews(e,l,u,Ce()))).next((h=>({batchId:a,changes:xE(h)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ce(n)).next((r=>{let s=mo();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s}))}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=mo();return this.indexManager.getCollectionParents(e,i).next((a=>j.forEach(a,(l=>{const u=(function(f,p){return new Bi(p,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)})(n,l.child(i));return this.getDocumentsMatchingCollectionQuery(e,u,r,s).next((h=>{h.forEach(((f,p)=>{o=o.insert(f,p)}))}))})).next((()=>o))))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next((o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s)))).next((o=>{i.forEach(((l,u)=>{const h=u.getKey();o.get(h)===null&&(o=o.insert(h,Dt.newInvalidDocument(h)))}));let a=mo();return o.forEach(((l,u)=>{const h=i.get(l);h!==void 0&&Po(h.mutation,u,Zt.empty(),qe.now()),_l(n,u)&&(a=a.insert(l,u))})),a}))}}class GO{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return j.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,(function(s){return{id:s.id,version:s.version,createTime:Mn(s.createTime)}})(n)),j.resolve()}getNamedQuery(e,n){return j.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,(function(s){return{name:s.name,query:xO(s.bundledQuery),readTime:Mn(s.readTime)}})(n)),j.resolve()}}class zO{constructor(){this.overlays=new Ke(ce.comparator),this.qr=new Map}getOverlay(e,n){return j.resolve(this.overlays.get(n))}getOverlays(e,n){const r=vs();return j.forEach(n,(s=>this.getOverlay(e,s).next((i=>{i!==null&&r.set(s,i)})))).next((()=>r))}saveOverlays(e,n,r){return r.forEach(((s,i)=>{this.St(e,n,i)})),j.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.qr.get(r);return s!==void 0&&(s.forEach((i=>this.overlays=this.overlays.remove(i))),this.qr.delete(r)),j.resolve()}getOverlaysForCollection(e,n,r){const s=vs(),i=n.length+1,o=new ce(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,u=l.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===i&&l.largestBatchId>r&&s.set(l.getKey(),l)}return j.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new Ke(((u,h)=>u-h));const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>r){let h=i.get(u.largestBatchId);h===null&&(h=vs(),i=i.insert(u.largestBatchId,h)),h.set(u.getKey(),u)}}const a=vs(),l=i.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach(((u,h)=>a.set(u,h))),!(a.size()>=s)););return j.resolve(a)}St(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.qr.get(s.largestBatchId).delete(r.key);this.qr.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new hO(n,r));let i=this.qr.get(n);i===void 0&&(i=Ce(),this.qr.set(n,i)),this.qr.set(n,i.add(r.key))}}class KO{constructor(){this.sessionToken=wt.EMPTY_BYTE_STRING}getSessionToken(e){return j.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,j.resolve()}}class xf{constructor(){this.Qr=new pt(yt.$r),this.Ur=new pt(yt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new yt(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach((r=>this.addReference(r,n)))}removeReference(e,n){this.Gr(new yt(e,n))}zr(e,n){e.forEach((r=>this.removeReference(r,n)))}jr(e){const n=new ce(new je([])),r=new yt(n,e),s=new yt(n,e+1),i=[];return this.Ur.forEachInRange([r,s],(o=>{this.Gr(o),i.push(o.key)})),i}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new ce(new je([])),r=new yt(n,e),s=new yt(n,e+1);let i=Ce();return this.Ur.forEachInRange([r,s],(o=>{i=i.add(o.key)})),i}containsKey(e){const n=new yt(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class yt{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return ce.comparator(e.key,n.key)||Se(e.Yr,n.Yr)}static Kr(e,n){return Se(e.Yr,n.Yr)||ce.comparator(e.key,n.key)}}class QO{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new pt(yt.$r)}checkEmpty(e){return j.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new uO(i,n,r,s);this.mutationQueue.push(o);for(const a of s)this.Zr=this.Zr.add(new yt(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return j.resolve(o)}lookupMutationBatch(e,n){return j.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.ei(r),i=s<0?0:s;return j.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return j.resolve(this.mutationQueue.length===0?bf:this.tr-1)}getAllMutationBatches(e){return j.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new yt(n,0),s=new yt(n,Number.POSITIVE_INFINITY),i=[];return this.Zr.forEachInRange([r,s],(o=>{const a=this.Xr(o.Yr);i.push(a)})),j.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new pt(Se);return n.forEach((s=>{const i=new yt(s,0),o=new yt(s,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([i,o],(a=>{r=r.add(a.Yr)}))})),j.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;ce.isDocumentKey(i)||(i=i.child(""));const o=new yt(new ce(i),0);let a=new pt(Se);return this.Zr.forEachWhile((l=>{const u=l.key.path;return!!r.isPrefixOf(u)&&(u.length===s&&(a=a.add(l.Yr)),!0)}),o),j.resolve(this.ti(a))}ti(e){const n=[];return e.forEach((r=>{const s=this.Xr(r);s!==null&&n.push(s)})),n}removeMutationBatch(e,n){xe(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return j.forEach(n.mutations,(s=>{const i=new yt(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)})).next((()=>{this.Zr=r}))}ir(e){}containsKey(e,n){const r=new yt(n,0),s=this.Zr.firstAfterOrEqual(r);return j.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,j.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class YO{constructor(e){this.ri=e,this.docs=(function(){return new Ke(ce.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return j.resolve(r?r.document.mutableCopy():Dt.newInvalidDocument(n))}getEntries(e,n){let r=fr();return n.forEach((s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():Dt.newInvalidDocument(s))})),j.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=fr();const o=n.path,a=new ce(o.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:u,value:{document:h}}=l.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||bN(IN(h),r)<=0||(s.has(h.key)||_l(n,h))&&(i=i.insert(h.key,h.mutableCopy()))}return j.resolve(i)}getAllFromCollectionGroup(e,n,r,s){ge(9500)}ii(e,n){return j.forEach(this.docs,(r=>n(r)))}newChangeBuffer(e){return new JO(this)}getSize(e){return j.resolve(this.size)}}class JO extends jO{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach(((r,s)=>{s.isValidDocument()?n.push(this.Nr.addEntry(e,s)):this.Nr.removeEntry(r)})),j.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}class XO{constructor(e){this.persistence=e,this.si=new Fs((n=>Sf(n)),Cf),this.lastRemoteSnapshotVersion=ve.min(),this.highestTargetId=0,this.oi=0,this._i=new xf,this.targetCount=0,this.ai=Pi.ur()}forEachTarget(e,n){return this.si.forEach(((r,s)=>n(s))),j.resolve()}getLastRemoteSnapshotVersion(e){return j.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return j.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),j.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),j.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new Pi(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,j.resolve()}updateTargetData(e,n){return this.Pr(n),j.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,j.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.si.forEach(((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.si.delete(o),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),s++)})),j.waitFor(i).next((()=>s))}getTargetCount(e){return j.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return j.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),j.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach((o=>{i.push(s.markPotentiallyOrphaned(e,o))})),j.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),j.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return j.resolve(r)}containsKey(e,n){return j.resolve(this._i.containsKey(n))}}class tw{constructor(e,n){this.ui={},this.overlays={},this.ci=new dl(0),this.li=!1,this.li=!0,this.hi=new KO,this.referenceDelegate=e(this),this.Pi=new XO(this),this.indexManager=new MO,this.remoteDocumentCache=(function(s){return new YO(s)})((r=>this.referenceDelegate.Ti(r))),this.serializer=new VO(n),this.Ii=new GO(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new zO,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new QO(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){se("MemoryPersistence","Starting transaction:",e);const s=new ZO(this.ci.next());return this.referenceDelegate.Ei(),r(s).next((i=>this.referenceDelegate.di(s).next((()=>i)))).toPromise().then((i=>(s.raiseOnCommittedEvent(),i)))}Ai(e,n){return j.or(Object.values(this.ui).map((r=>()=>r.containsKey(e,n))))}}class ZO extends RN{constructor(e){super(),this.currentSequenceNumber=e}}class Mf{constructor(e){this.persistence=e,this.Ri=new xf,this.Vi=null}static mi(e){return new Mf(e)}get fi(){if(this.Vi)return this.Vi;throw ge(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),j.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),j.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),j.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach((s=>this.fi.add(s.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next((s=>{s.forEach((i=>this.fi.add(i.toString())))})).next((()=>r.removeTargetData(e,n)))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return j.forEach(this.fi,(r=>{const s=ce.fromPath(r);return this.gi(e,s).next((i=>{i||n.removeEntry(s,ve.min())}))})).next((()=>(this.Vi=null,n.apply(e))))}updateLimboDocument(e,n){return this.gi(e,n).next((r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(e){return 0}gi(e,n){return j.or([()=>j.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class Uc{constructor(e,n){this.persistence=e,this.pi=new Fs((r=>PN(r.path)),((r,s)=>r.isEqual(s))),this.garbageCollector=HO(this,n)}static mi(e,n){return new Uc(e,n)}Ei(){}di(e){return j.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>n.next((s=>r+s))))}wr(e){let n=0;return this.pr(e,(r=>{n++})).next((()=>n))}pr(e,n){return j.forEach(this.pi,((r,s)=>this.br(e,r,s).next((i=>i?j.resolve():n(s)))))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),i=s.newChangeBuffer();return s.ii(e,(o=>this.br(e,o,n).next((a=>{a||(r++,i.removeEntry(o,ve.min()))})))).next((()=>i.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),j.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),j.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),j.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),j.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=rc(e.data.value)),n}br(e,n,r){return j.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.pi.get(n);return j.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class Lf{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=s}static As(e,n){let r=Ce(),s=Ce();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new Lf(e,n.fromCache,r,s)}}class eD{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class tD{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return kC()?8:SN(Vt())>0?6:4})()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.ys(e,n).next((o=>{i.result=o})).next((()=>{if(!i.result)return this.ws(e,n,s,r).next((o=>{i.result=o}))})).next((()=>{if(i.result)return;const o=new eD;return this.Ss(e,n,o).next((a=>{if(i.result=a,this.Vs)return this.bs(e,n,o,a.size)}))})).next((()=>i.result))}bs(e,n,r,s){return r.documentReadCount<this.fs?(Ys()<=Re.DEBUG&&se("QueryEngine","SDK will not create cache indexes for query:",Js(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),j.resolve()):(Ys()<=Re.DEBUG&&se("QueryEngine","Query:",Js(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.gs*s?(Ys()<=Re.DEBUG&&se("QueryEngine","The SDK decides to create cache indexes for query:",Js(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,xn(n))):j.resolve())}ys(e,n){if(dg(n))return j.resolve(null);let r=xn(n);return this.indexManager.getIndexType(e,r).next((s=>s===0?null:(n.limit!==null&&s===1&&(n=yh(n,null,"F"),r=xn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next((i=>{const o=Ce(...i);return this.ps.getDocuments(e,o).next((a=>this.indexManager.getMinOffset(e,r).next((l=>{const u=this.Ds(n,a);return this.Cs(n,u,o,l.readTime)?this.ys(e,yh(n,null,"F")):this.vs(e,u,n,l)}))))})))))}ws(e,n,r,s){return dg(n)||s.isEqual(ve.min())?j.resolve(null):this.ps.getDocuments(e,r).next((i=>{const o=this.Ds(n,i);return this.Cs(n,o,r,s)?j.resolve(null):(Ys()<=Re.DEBUG&&se("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Js(n)),this.vs(e,o,n,TN(s,Ho)).next((a=>a)))}))}Ds(e,n){let r=new pt(DE(e));return n.forEach(((s,i)=>{_l(e,i)&&(r=r.add(i))})),r}Cs(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Ss(e,n,r){return Ys()<=Re.DEBUG&&se("QueryEngine","Using full collection scan to execute query:",Js(n)),this.ps.getDocumentsMatchingQuery(e,n,zr.min(),r)}vs(e,n,r,s){return this.ps.getDocumentsMatchingQuery(e,r,s).next((i=>(n.forEach((o=>{i=i.insert(o.key,o)})),i)))}}const Uf="LocalStore",nD=3e8;class rD{constructor(e,n,r,s){this.persistence=e,this.Fs=n,this.serializer=s,this.Ms=new Ke(Se),this.xs=new Fs((i=>Sf(i)),Cf),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new WO(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.Ms)))}}function sD(t,e,n,r){return new rD(t,e,n,r)}async function nw(t,e){const n=Ee(t);return await n.persistence.runTransaction("Handle user change","readonly",(r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next((i=>(s=i,n.Bs(e),n.mutationQueue.getAllMutationBatches(r)))).next((i=>{const o=[],a=[];let l=Ce();for(const u of s){o.push(u.batchId);for(const h of u.mutations)l=l.add(h.key)}for(const u of i){a.push(u.batchId);for(const h of u.mutations)l=l.add(h.key)}return n.localDocuments.getDocuments(r,l).next((u=>({Ls:u,removedBatchIds:o,addedBatchIds:a})))}))}))}function iD(t,e){const n=Ee(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const s=e.batch.keys(),i=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(a,l,u,h){const f=u.batch,p=f.keys();let g=j.resolve();return p.forEach((v=>{g=g.next((()=>h.getEntry(l,v))).next((_=>{const C=u.docVersions.get(v);xe(C!==null,48541),_.version.compareTo(C)<0&&(f.applyToRemoteDocument(_,u),_.isValidDocument()&&(_.setReadTime(u.commitVersion),h.addEntry(_)))}))})),g.next((()=>a.mutationQueue.removeMutationBatch(l,f)))})(n,r,e,i).next((()=>i.apply(r))).next((()=>n.mutationQueue.performConsistencyCheck(r))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(a){let l=Ce();for(let u=0;u<a.mutationResults.length;++u)a.mutationResults[u].transformResults.length>0&&(l=l.add(a.batch.mutations[u].key));return l})(e)))).next((()=>n.localDocuments.getDocuments(r,s)))}))}function rw(t){const e=Ee(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.Pi.getLastRemoteSnapshotVersion(n)))}function oD(t,e){const n=Ee(t),r=e.snapshotVersion;let s=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(i=>{const o=n.Ns.newChangeBuffer({trackRemovals:!0});s=n.Ms;const a=[];e.targetChanges.forEach(((h,f)=>{const p=s.get(f);if(!p)return;a.push(n.Pi.removeMatchingKeys(i,h.removedDocuments,f).next((()=>n.Pi.addMatchingKeys(i,h.addedDocuments,f))));let g=p.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(f)!==null?g=g.withResumeToken(wt.EMPTY_BYTE_STRING,ve.min()).withLastLimboFreeSnapshotVersion(ve.min()):h.resumeToken.approximateByteSize()>0&&(g=g.withResumeToken(h.resumeToken,r)),s=s.insert(f,g),(function(_,C,S){return _.resumeToken.approximateByteSize()===0||C.snapshotVersion.toMicroseconds()-_.snapshotVersion.toMicroseconds()>=nD?!0:S.addedDocuments.size+S.modifiedDocuments.size+S.removedDocuments.size>0})(p,g,h)&&a.push(n.Pi.updateTargetData(i,g))}));let l=fr(),u=Ce();if(e.documentUpdates.forEach((h=>{e.resolvedLimboDocuments.has(h)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(i,h))})),a.push(aD(i,o,e.documentUpdates).next((h=>{l=h.ks,u=h.qs}))),!r.isEqual(ve.min())){const h=n.Pi.getLastRemoteSnapshotVersion(i).next((f=>n.Pi.setTargetsMetadata(i,i.currentSequenceNumber,r)));a.push(h)}return j.waitFor(a).next((()=>o.apply(i))).next((()=>n.localDocuments.getLocalViewOfDocuments(i,l,u))).next((()=>l))})).then((i=>(n.Ms=s,i)))}function aD(t,e,n){let r=Ce(),s=Ce();return n.forEach((i=>r=r.add(i))),e.getEntries(t,r).next((i=>{let o=fr();return n.forEach(((a,l)=>{const u=i.get(a);l.isFoundDocument()!==u.isFoundDocument()&&(s=s.add(a)),l.isNoDocument()&&l.version.isEqual(ve.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!u.isValidDocument()||l.version.compareTo(u.version)>0||l.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):se(Uf,"Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",l.version)})),{ks:o,qs:s}}))}function cD(t,e){const n=Ee(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=bf),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function lD(t,e){const n=Ee(t);return n.persistence.runTransaction("Allocate target","readwrite",(r=>{let s;return n.Pi.getTargetData(r,e).next((i=>i?(s=i,j.resolve(s)):n.Pi.allocateTargetId(r).next((o=>(s=new Mr(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,s).next((()=>s)))))))})).then((r=>{const s=n.Ms.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r}))}async function Ih(t,e,n){const r=Ee(t),s=r.Ms.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,(o=>r.persistence.referenceDelegate.removeTarget(o,s)))}catch(o){if(!Fi(o))throw o;se(Uf,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Ms=r.Ms.remove(e),r.xs.delete(s.target)}function Rg(t,e,n){const r=Ee(t);let s=ve.min(),i=Ce();return r.persistence.runTransaction("Execute query","readwrite",(o=>(function(l,u,h){const f=Ee(l),p=f.xs.get(h);return p!==void 0?j.resolve(f.Ms.get(p)):f.Pi.getTargetData(u,h)})(r,o,xn(e)).next((a=>{if(a)return s=a.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(o,a.targetId).next((l=>{i=l}))})).next((()=>r.Fs.getDocumentsMatchingQuery(o,e,n?s:ve.min(),n?i:Ce()))).next((a=>(uD(r,KN(e),a),{documents:a,Qs:i})))))}function uD(t,e,n){let r=t.Os.get(e)||ve.min();n.forEach(((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)})),t.Os.set(e,r)}class Sg{constructor(){this.activeTargetIds=eO()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class hD{constructor(){this.Mo=new Sg,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Sg,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class fD{Oo(e){}shutdown(){}}const Cg="ConnectivityMonitor";class Pg{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){se(Cg,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){se(Cg,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let Ga=null;function bh(){return Ga===null?Ga=(function(){return 268435456+Math.round(2147483648*Math.random())})():Ga++,"0x"+Ga.toString(16)}const Iu="RestConnection",dD={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class pD{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${s}`,this.Wo=this.databaseId.database===Dc?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Go(e,n,r,s,i){const o=bh(),a=this.zo(e,n.toUriEncodedString());se(Iu,`Sending RPC '${e}' ${o}:`,a,r);const l={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(l,s,i);const{host:u}=new URL(a),h=Vi(u);return this.Jo(e,a,l,r,h).then((f=>(se(Iu,`Received RPC '${e}' ${o}: `,f),f)),(f=>{throw Ds(Iu,`RPC '${e}' ${o} failed with error: `,f,"url: ",a,"request:",r),f}))}Ho(e,n,r,s,i,o){return this.Go(e,n,r,s,i)}jo(e,n,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Li})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((s,i)=>e[i]=s)),r&&r.headers.forEach(((s,i)=>e[i]=s))}zo(e,n){const r=dD[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}class mD{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const Pt="WebChannelConnection";class gD extends pD{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,s,i){const o=bh();return new Promise(((a,l)=>{const u=new sE;u.setWithCredentials(!0),u.listenOnce(iE.COMPLETE,(()=>{try{switch(u.getLastErrorCode()){case nc.NO_ERROR:const f=u.getResponseJson();se(Pt,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(f)),a(f);break;case nc.TIMEOUT:se(Pt,`RPC '${e}' ${o} timed out`),l(new ee($.DEADLINE_EXCEEDED,"Request time out"));break;case nc.HTTP_ERROR:const p=u.getStatus();if(se(Pt,`RPC '${e}' ${o} failed with status:`,p,"response text:",u.getResponseText()),p>0){let g=u.getResponseJson();Array.isArray(g)&&(g=g[0]);const v=g?.error;if(v&&v.status&&v.message){const _=(function(S){const R=S.toLowerCase().replace(/_/g,"-");return Object.values($).indexOf(R)>=0?R:$.UNKNOWN})(v.status);l(new ee(_,v.message))}else l(new ee($.UNKNOWN,"Server responded with status "+u.getStatus()))}else l(new ee($.UNAVAILABLE,"Connection failed."));break;default:ge(9055,{l_:e,streamId:o,h_:u.getLastErrorCode(),P_:u.getLastError()})}}finally{se(Pt,`RPC '${e}' ${o} completed.`)}}));const h=JSON.stringify(s);se(Pt,`RPC '${e}' ${o} sending request:`,s),u.send(n,"POST",h,r,15)}))}T_(e,n,r){const s=bh(),i=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=cE(),a=aE(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(l.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(l.useFetchStreams=!0),this.jo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const h=i.join("");se(Pt,`Creating RPC '${e}' stream ${s}: ${h}`,l);const f=o.createWebChannel(h,l);this.I_(f);let p=!1,g=!1;const v=new mD({Yo:C=>{g?se(Pt,`Not sending because RPC '${e}' stream ${s} is closed:`,C):(p||(se(Pt,`Opening RPC '${e}' stream ${s} transport.`),f.open(),p=!0),se(Pt,`RPC '${e}' stream ${s} sending:`,C),f.send(C))},Zo:()=>f.close()}),_=(C,S,R)=>{C.listen(S,(y=>{try{R(y)}catch(O){setTimeout((()=>{throw O}),0)}}))};return _(f,po.EventType.OPEN,(()=>{g||(se(Pt,`RPC '${e}' stream ${s} transport opened.`),v.o_())})),_(f,po.EventType.CLOSE,(()=>{g||(g=!0,se(Pt,`RPC '${e}' stream ${s} transport closed`),v.a_(),this.E_(f))})),_(f,po.EventType.ERROR,(C=>{g||(g=!0,Ds(Pt,`RPC '${e}' stream ${s} transport errored. Name:`,C.name,"Message:",C.message),v.a_(new ee($.UNAVAILABLE,"The operation could not be completed")))})),_(f,po.EventType.MESSAGE,(C=>{if(!g){const S=C.data[0];xe(!!S,16349);const R=S,y=R?.error||R[0]?.error;if(y){se(Pt,`RPC '${e}' stream ${s} received error:`,y);const O=y.status;let V=(function(w){const E=st[w];if(E!==void 0)return qE(E)})(O),L=y.message;V===void 0&&(V=$.INTERNAL,L="Unknown error status: "+O+" with message "+y.message),g=!0,v.a_(new ee(V,L)),f.close()}else se(Pt,`RPC '${e}' stream ${s} received:`,S),v.u_(S)}})),_(a,oE.STAT_EVENT,(C=>{C.stat===hh.PROXY?se(Pt,`RPC '${e}' stream ${s} detected buffering proxy`):C.stat===hh.NOPROXY&&se(Pt,`RPC '${e}' stream ${s} detected no buffering proxy`)})),setTimeout((()=>{v.__()}),0),v}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((n=>n===e))}}function bu(){return typeof document<"u"?document:null}function wl(t){return new EO(t,!0)}class sw{constructor(e,n,r=1e3,s=1.5,i=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=s,this.R_=i,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),s=Math.max(0,n-r);s>0&&se("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,s,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const kg="PersistentStream";class iw{constructor(e,n,r,s,i,o,a,l){this.Mi=e,this.S_=r,this.b_=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new sw(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===$.RESOURCE_EXHAUSTED?(hr(n.toString()),hr("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===$.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,s])=>{this.D_===n&&this.G_(r,s)}),(r=>{e((()=>{const s=new ee($.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(s)}))}))}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo((()=>{r((()=>this.listener.Xo()))})),this.stream.t_((()=>{r((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((s=>{r((()=>this.z_(s)))})),this.stream.onMessage((s=>{r((()=>++this.F_==1?this.J_(s):this.onNext(s)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return se(kg,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget((()=>this.D_===e?n():(se(kg,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class _D extends iw{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=IO(this.serializer,e),r=(function(i){if(!("targetChange"in i))return ve.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?ve.min():o.readTime?Mn(o.readTime):ve.min()})(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=Th(this.serializer),n.addTarget=(function(i,o){let a;const l=o.target;if(a=gh(l)?{documents:RO(i,l)}:{query:SO(i,l).ft},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=zE(i,o.resumeToken);const u=vh(i,o.expectedCount);u!==null&&(a.expectedCount=u)}else if(o.snapshotVersion.compareTo(ve.min())>0){a.readTime=Lc(i,o.snapshotVersion.toTimestamp());const u=vh(i,o.expectedCount);u!==null&&(a.expectedCount=u)}return a})(this.serializer,e);const r=PO(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=Th(this.serializer),n.removeTarget=e,this.q_(n)}}class yD extends iw{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return xe(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,xe(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){xe(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=AO(e.writeResults,e.commitTime),r=Mn(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=Th(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((r=>bO(this.serializer,r)))};this.q_(n)}}class vD{}class ED extends vD{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new ee($.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([i,o])=>this.connection.Go(e,Eh(n,r),s,i,o))).catch((i=>{throw i.name==="FirebaseError"?(i.code===$.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new ee($.UNKNOWN,i.toString())}))}Ho(e,n,r,s,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([o,a])=>this.connection.Ho(e,Eh(n,r),s,o,a,i))).catch((o=>{throw o.name==="FirebaseError"?(o.code===$.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ee($.UNKNOWN,o.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class wD{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(hr(n),this.aa=!1):se("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const Vs="RemoteStore";class TD{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=i,this.Aa.Oo((o=>{r.enqueueAndForget((async()=>{Bs(this)&&(se(Vs,"Restarting streams for network reachability change."),await(async function(l){const u=Ee(l);u.Ea.add(4),await pa(u),u.Ra.set("Unknown"),u.Ea.delete(4),await Tl(u)})(this))}))})),this.Ra=new wD(r,s)}}async function Tl(t){if(Bs(t))for(const e of t.da)await e(!0)}async function pa(t){for(const e of t.da)await e(!1)}function ow(t,e){const n=Ee(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),Hf(n)?$f(n):$i(n).O_()&&Bf(n,e))}function Ff(t,e){const n=Ee(t),r=$i(n);n.Ia.delete(e),r.O_()&&aw(n,e),n.Ia.size===0&&(r.O_()?r.L_():Bs(n)&&n.Ra.set("Unknown"))}function Bf(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ve.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}$i(t).Y_(e)}function aw(t,e){t.Va.Ue(e),$i(t).Z_(e)}function $f(t){t.Va=new gO({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),$i(t).start(),t.Ra.ua()}function Hf(t){return Bs(t)&&!$i(t).x_()&&t.Ia.size>0}function Bs(t){return Ee(t).Ea.size===0}function cw(t){t.Va=void 0}async function ID(t){t.Ra.set("Online")}async function bD(t){t.Ia.forEach(((e,n)=>{Bf(t,e)}))}async function AD(t,e){cw(t),Hf(t)?(t.Ra.ha(e),$f(t)):t.Ra.set("Unknown")}async function RD(t,e,n){if(t.Ra.set("Online"),e instanceof GE&&e.state===2&&e.cause)try{await(async function(s,i){const o=i.cause;for(const a of i.targetIds)s.Ia.has(a)&&(await s.remoteSyncer.rejectListen(a,o),s.Ia.delete(a),s.Va.removeTarget(a))})(t,e)}catch(r){se(Vs,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Fc(t,r)}else if(e instanceof oc?t.Va.Ze(e):e instanceof WE?t.Va.st(e):t.Va.tt(e),!n.isEqual(ve.min()))try{const r=await rw(t.localStore);n.compareTo(r)>=0&&await(function(i,o){const a=i.Va.Tt(o);return a.targetChanges.forEach(((l,u)=>{if(l.resumeToken.approximateByteSize()>0){const h=i.Ia.get(u);h&&i.Ia.set(u,h.withResumeToken(l.resumeToken,o))}})),a.targetMismatches.forEach(((l,u)=>{const h=i.Ia.get(l);if(!h)return;i.Ia.set(l,h.withResumeToken(wt.EMPTY_BYTE_STRING,h.snapshotVersion)),aw(i,l);const f=new Mr(h.target,l,u,h.sequenceNumber);Bf(i,f)})),i.remoteSyncer.applyRemoteEvent(a)})(t,n)}catch(r){se(Vs,"Failed to raise snapshot:",r),await Fc(t,r)}}async function Fc(t,e,n){if(!Fi(e))throw e;t.Ea.add(1),await pa(t),t.Ra.set("Offline"),n||(n=()=>rw(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{se(Vs,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await Tl(t)}))}function lw(t,e){return e().catch((n=>Fc(t,n,e)))}async function Il(t){const e=Ee(t),n=Jr(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:bf;for(;SD(e);)try{const s=await cD(e.localStore,r);if(s===null){e.Ta.length===0&&n.L_();break}r=s.batchId,CD(e,s)}catch(s){await Fc(e,s)}uw(e)&&hw(e)}function SD(t){return Bs(t)&&t.Ta.length<10}function CD(t,e){t.Ta.push(e);const n=Jr(t);n.O_()&&n.X_&&n.ea(e.mutations)}function uw(t){return Bs(t)&&!Jr(t).x_()&&t.Ta.length>0}function hw(t){Jr(t).start()}async function PD(t){Jr(t).ra()}async function kD(t){const e=Jr(t);for(const n of t.Ta)e.ea(n.mutations)}async function ND(t,e,n){const r=t.Ta.shift(),s=Of.from(r,e,n);await lw(t,(()=>t.remoteSyncer.applySuccessfulWrite(s))),await Il(t)}async function OD(t,e){e&&Jr(t).X_&&await(async function(r,s){if((function(o){return dO(o)&&o!==$.ABORTED})(s.code)){const i=r.Ta.shift();Jr(r).B_(),await lw(r,(()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s))),await Il(r)}})(t,e),uw(t)&&hw(t)}async function Ng(t,e){const n=Ee(t);n.asyncQueue.verifyOperationInProgress(),se(Vs,"RemoteStore received new credentials");const r=Bs(n);n.Ea.add(3),await pa(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Tl(n)}async function DD(t,e){const n=Ee(t);e?(n.Ea.delete(2),await Tl(n)):e||(n.Ea.add(2),await pa(n),n.Ra.set("Unknown"))}function $i(t){return t.ma||(t.ma=(function(n,r,s){const i=Ee(n);return i.sa(),new _D(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)})(t.datastore,t.asyncQueue,{Xo:ID.bind(null,t),t_:bD.bind(null,t),r_:AD.bind(null,t),H_:RD.bind(null,t)}),t.da.push((async e=>{e?(t.ma.B_(),Hf(t)?$f(t):t.Ra.set("Unknown")):(await t.ma.stop(),cw(t))}))),t.ma}function Jr(t){return t.fa||(t.fa=(function(n,r,s){const i=Ee(n);return i.sa(),new yD(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)})(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:PD.bind(null,t),r_:OD.bind(null,t),ta:kD.bind(null,t),na:ND.bind(null,t)}),t.da.push((async e=>{e?(t.fa.B_(),await Il(t)):(await t.fa.stop(),t.Ta.length>0&&(se(Vs,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))}))),t.fa}class jf{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new sr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((o=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,a=new jf(e,n,o,s,i);return a.start(r),a}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ee($.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function qf(t,e){if(hr("AsyncQueue",`${e}: ${t}`),Fi(t))return new ee($.UNAVAILABLE,`${e}: ${t}`);throw t}class pi{static emptySet(e){return new pi(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||ce.comparator(n.key,r.key):(n,r)=>ce.comparator(n.key,r.key),this.keyedMap=mo(),this.sortedSet=new Ke(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,r)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof pi)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new pi;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}class Og{constructor(){this.ga=new Ke(ce.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):ge(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,r)=>{e.push(r)})),e}}class ki{constructor(e,n,r,s,i,o,a,l,u){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=u}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach((a=>{o.push({type:0,doc:a})})),new ki(e,n,pi.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&gl(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}class VD{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class xD{constructor(){this.queries=Dg(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const s=Ee(n),i=s.queries;s.queries=Dg(),i.forEach(((o,a)=>{for(const l of a.Sa)l.onError(r)}))})(this,new ee($.ABORTED,"Firestore shutting down"))}}function Dg(){return new Fs((t=>OE(t)),gl)}async function fw(t,e){const n=Ee(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.ba()&&e.Da()&&(r=2):(i=new VD,r=e.Da()?0:1);try{switch(r){case 0:i.wa=await n.onListen(s,!0);break;case 1:i.wa=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const a=qf(o,`Initialization of query '${Js(e.query)}' failed`);return void e.onError(a)}n.queries.set(s,i),i.Sa.push(e),e.va(n.onlineState),i.wa&&e.Fa(i.wa)&&Wf(n)}async function dw(t,e){const n=Ee(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.Sa.indexOf(e);o>=0&&(i.Sa.splice(o,1),i.Sa.length===0?s=e.Da()?0:1:!i.ba()&&e.Da()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function MD(t,e){const n=Ee(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const a of o.Sa)a.Fa(s)&&(r=!0);o.wa=s}}r&&Wf(n)}function LD(t,e,n){const r=Ee(t),s=r.queries.get(e);if(s)for(const i of s.Sa)i.onError(n);r.queries.delete(e)}function Wf(t){t.Ca.forEach((e=>{e.next()}))}var Ah,Vg;(Vg=Ah||(Ah={})).Ma="default",Vg.Cache="cache";class pw{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new ki(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=ki.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Ah.Cache}}class mw{constructor(e){this.key=e}}class gw{constructor(e){this.key=e}}class UD{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Ce(),this.mutatedKeys=Ce(),this.eu=DE(e),this.tu=new pi(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new Og,s=n?n.tu:this.tu;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,a=!1;const l=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,u=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal(((h,f)=>{const p=s.get(h),g=_l(this.query,f)?f:null,v=!!p&&this.mutatedKeys.has(p.key),_=!!g&&(g.hasLocalMutations||this.mutatedKeys.has(g.key)&&g.hasCommittedMutations);let C=!1;p&&g?p.data.isEqual(g.data)?v!==_&&(r.track({type:3,doc:g}),C=!0):this.su(p,g)||(r.track({type:2,doc:g}),C=!0,(l&&this.eu(g,l)>0||u&&this.eu(g,u)<0)&&(a=!0)):!p&&g?(r.track({type:0,doc:g}),C=!0):p&&!g&&(r.track({type:1,doc:p}),C=!0,(l||u)&&(a=!0)),C&&(g?(o=o.add(g),i=_?i.add(h):i.delete(h)):(o=o.delete(h),i=i.delete(h)))})),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),i=i.delete(h.key),r.track({type:1,doc:h})}return{tu:o,iu:r,Cs:a,mutatedKeys:i}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort(((h,f)=>(function(g,v){const _=C=>{switch(C){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ge(20277,{Rt:C})}};return _(g)-_(v)})(h.type,f.type)||this.eu(h.doc,f.doc))),this.ou(r),s=s??!1;const a=n&&!s?this._u():[],l=this.Xa.size===0&&this.current&&!s?1:0,u=l!==this.Za;return this.Za=l,o.length!==0||u?{snapshot:new ki(this.query,e.tu,i,o,e.mutatedKeys,l===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:a}:{au:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Og,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Ya=this.Ya.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ya=this.Ya.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Ce(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))}));const n=[];return e.forEach((r=>{this.Xa.has(r)||n.push(new gw(r))})),this.Xa.forEach((r=>{e.has(r)||n.push(new mw(r))})),n}cu(e){this.Ya=e.Qs,this.Xa=Ce();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return ki.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Gf="SyncEngine";class FD{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class BD{constructor(e){this.key=e,this.hu=!1}}class $D{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new Fs((a=>OE(a)),gl),this.Iu=new Map,this.Eu=new Set,this.du=new Ke(ce.comparator),this.Au=new Map,this.Ru=new xf,this.Vu={},this.mu=new Map,this.fu=Pi.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function HD(t,e,n=!0){const r=Tw(t);let s;const i=r.Tu.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.lu()):s=await _w(r,e,n,!0),s}async function jD(t,e){const n=Tw(t);await _w(n,e,!0,!1)}async function _w(t,e,n,r){const s=await lD(t.localStore,xn(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let a;return r&&(a=await qD(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&ow(t.remoteStore,s),a}async function qD(t,e,n,r,s){t.pu=(f,p,g)=>(async function(_,C,S,R){let y=C.view.ru(S);y.Cs&&(y=await Rg(_.localStore,C.query,!1).then((({documents:b})=>C.view.ru(b,y))));const O=R&&R.targetChanges.get(C.targetId),V=R&&R.targetMismatches.get(C.targetId)!=null,L=C.view.applyChanges(y,_.isPrimaryClient,O,V);return Mg(_,C.targetId,L.au),L.snapshot})(t,f,p,g);const i=await Rg(t.localStore,e,!0),o=new UD(e,i.Qs),a=o.ru(i.documents),l=da.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),u=o.applyChanges(a,t.isPrimaryClient,l);Mg(t,n,u.au);const h=new FD(e,n,o);return t.Tu.set(e,h),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),u.snapshot}async function WD(t,e,n){const r=Ee(t),s=r.Tu.get(e),i=r.Iu.get(s.targetId);if(i.length>1)return r.Iu.set(s.targetId,i.filter((o=>!gl(o,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await Ih(r.localStore,s.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(s.targetId),n&&Ff(r.remoteStore,s.targetId),Rh(r,s.targetId)})).catch(Ui)):(Rh(r,s.targetId),await Ih(r.localStore,s.targetId,!0))}async function GD(t,e){const n=Ee(t),r=n.Tu.get(e),s=n.Iu.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Ff(n.remoteStore,r.targetId))}async function zD(t,e,n){const r=eV(t);try{const s=await(function(o,a){const l=Ee(o),u=qe.now(),h=a.reduce(((g,v)=>g.add(v.key)),Ce());let f,p;return l.persistence.runTransaction("Locally write mutations","readwrite",(g=>{let v=fr(),_=Ce();return l.Ns.getEntries(g,h).next((C=>{v=C,v.forEach(((S,R)=>{R.isValidDocument()||(_=_.add(S))}))})).next((()=>l.localDocuments.getOverlayedDocuments(g,v))).next((C=>{f=C;const S=[];for(const R of a){const y=cO(R,f.get(R.key).overlayedDocument);y!=null&&S.push(new ts(R.key,y,bE(y.value.mapValue),mn.exists(!0)))}return l.mutationQueue.addMutationBatch(g,u,S,a)})).next((C=>{p=C;const S=C.applyToLocalDocumentSet(f,_);return l.documentOverlayCache.saveOverlays(g,C.batchId,S)}))})).then((()=>({batchId:p.batchId,changes:xE(f)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),(function(o,a,l){let u=o.Vu[o.currentUser.toKey()];u||(u=new Ke(Se)),u=u.insert(a,l),o.Vu[o.currentUser.toKey()]=u})(r,s.batchId,n),await ma(r,s.changes),await Il(r.remoteStore)}catch(s){const i=qf(s,"Failed to persist write");n.reject(i)}}async function yw(t,e){const n=Ee(t);try{const r=await oD(n.localStore,e);e.targetChanges.forEach(((s,i)=>{const o=n.Au.get(i);o&&(xe(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?o.hu=!0:s.modifiedDocuments.size>0?xe(o.hu,14607):s.removedDocuments.size>0&&(xe(o.hu,42227),o.hu=!1))})),await ma(n,r,e)}catch(r){await Ui(r)}}function xg(t,e,n){const r=Ee(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Tu.forEach(((i,o)=>{const a=o.view.va(e);a.snapshot&&s.push(a.snapshot)})),(function(o,a){const l=Ee(o);l.onlineState=a;let u=!1;l.queries.forEach(((h,f)=>{for(const p of f.Sa)p.va(a)&&(u=!0)})),u&&Wf(l)})(r.eventManager,e),s.length&&r.Pu.H_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function KD(t,e,n){const r=Ee(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Au.get(e),i=s&&s.key;if(i){let o=new Ke(ce.comparator);o=o.insert(i,Dt.newNoDocument(i,ve.min()));const a=Ce().add(i),l=new El(ve.min(),new Map,new Ke(Se),o,a);await yw(r,l),r.du=r.du.remove(i),r.Au.delete(e),zf(r)}else await Ih(r.localStore,e,!1).then((()=>Rh(r,e,n))).catch(Ui)}async function QD(t,e){const n=Ee(t),r=e.batch.batchId;try{const s=await iD(n.localStore,e);Ew(n,r,null),vw(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await ma(n,s)}catch(s){await Ui(s)}}async function YD(t,e,n){const r=Ee(t);try{const s=await(function(o,a){const l=Ee(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",(u=>{let h;return l.mutationQueue.lookupMutationBatch(u,a).next((f=>(xe(f!==null,37113),h=f.keys(),l.mutationQueue.removeMutationBatch(u,f)))).next((()=>l.mutationQueue.performConsistencyCheck(u))).next((()=>l.documentOverlayCache.removeOverlaysForBatchId(u,h,a))).next((()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,h))).next((()=>l.localDocuments.getDocuments(u,h)))}))})(r.localStore,e);Ew(r,e,n),vw(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await ma(r,s)}catch(s){await Ui(s)}}function vw(t,e){(t.mu.get(e)||[]).forEach((n=>{n.resolve()})),t.mu.delete(e)}function Ew(t,e,n){const r=Ee(t);let s=r.Vu[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Vu[r.currentUser.toKey()]=s}}function Rh(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach((r=>{t.Ru.containsKey(r)||ww(t,r)}))}function ww(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(Ff(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),zf(t))}function Mg(t,e,n){for(const r of n)r instanceof mw?(t.Ru.addReference(r.key,e),JD(t,r)):r instanceof gw?(se(Gf,"Document no longer in limbo: "+r.key),t.Ru.removeReference(r.key,e),t.Ru.containsKey(r.key)||ww(t,r.key)):ge(19791,{wu:r})}function JD(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Eu.has(r)||(se(Gf,"New document in limbo: "+n),t.Eu.add(r),zf(t))}function zf(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new ce(je.fromString(e)),r=t.fu.next();t.Au.set(r,new BD(n)),t.du=t.du.insert(n,r),ow(t.remoteStore,new Mr(xn(Pf(n.path)),r,"TargetPurposeLimboResolution",dl.ce))}}async function ma(t,e,n){const r=Ee(t),s=[],i=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach(((a,l)=>{o.push(r.pu(l,e,n).then((u=>{if((u||n)&&r.isPrimaryClient){const h=u?!u.fromCache:n?.targetChanges.get(l.targetId)?.current;r.sharedClientState.updateQueryState(l.targetId,h?"current":"not-current")}if(u){s.push(u);const h=Lf.As(l.targetId,u);i.push(h)}})))})),await Promise.all(o),r.Pu.H_(s),await(async function(l,u){const h=Ee(l);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",(f=>j.forEach(u,(p=>j.forEach(p.Es,(g=>h.persistence.referenceDelegate.addReference(f,p.targetId,g))).next((()=>j.forEach(p.ds,(g=>h.persistence.referenceDelegate.removeReference(f,p.targetId,g)))))))))}catch(f){if(!Fi(f))throw f;se(Uf,"Failed to update sequence numbers: "+f)}for(const f of u){const p=f.targetId;if(!f.fromCache){const g=h.Ms.get(p),v=g.snapshotVersion,_=g.withLastLimboFreeSnapshotVersion(v);h.Ms=h.Ms.insert(p,_)}}})(r.localStore,i))}async function XD(t,e){const n=Ee(t);if(!n.currentUser.isEqual(e)){se(Gf,"User change. New user:",e.toKey());const r=await nw(n.localStore,e);n.currentUser=e,(function(i,o){i.mu.forEach((a=>{a.forEach((l=>{l.reject(new ee($.CANCELLED,o))}))})),i.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await ma(n,r.Ls)}}function ZD(t,e){const n=Ee(t),r=n.Au.get(e);if(r&&r.hu)return Ce().add(r.key);{let s=Ce();const i=n.Iu.get(e);if(!i)return s;for(const o of i){const a=n.Tu.get(o);s=s.unionWith(a.view.nu)}return s}}function Tw(t){const e=Ee(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=yw.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=ZD.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=KD.bind(null,e),e.Pu.H_=MD.bind(null,e.eventManager),e.Pu.yu=LD.bind(null,e.eventManager),e}function eV(t){const e=Ee(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=QD.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=YD.bind(null,e),e}class Bc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=wl(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return sD(this.persistence,new tD,e.initialUser,this.serializer)}Cu(e){return new tw(Mf.mi,this.serializer)}Du(e){return new hD}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Bc.provider={build:()=>new Bc};class tV extends Bc{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){xe(this.persistence.referenceDelegate instanceof Uc,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new BO(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?$t.withCacheSize(this.cacheSizeBytes):$t.DEFAULT;return new tw((r=>Uc.mi(r,n)),this.serializer)}}class Sh{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>xg(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=XD.bind(null,this.syncEngine),await DD(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new xD})()}createDatastore(e){const n=wl(e.databaseInfo.databaseId),r=(function(i){return new gD(i)})(e.databaseInfo);return(function(i,o,a,l){return new ED(i,o,a,l)})(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return(function(r,s,i,o,a){return new TD(r,s,i,o,a)})(this.localStore,this.datastore,e.asyncQueue,(n=>xg(this.syncEngine,n,0)),(function(){return Pg.v()?new Pg:new fD})())}createSyncEngine(e,n){return(function(s,i,o,a,l,u,h){const f=new $D(s,i,o,a,l,u);return h&&(f.gu=!0),f})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){await(async function(n){const r=Ee(n);se(Vs,"RemoteStore shutting down."),r.Ea.add(5),await pa(r),r.Aa.shutdown(),r.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Sh.provider={build:()=>new Sh};class Iw{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):hr("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}const Xr="FirestoreClient";class nV{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=Nt.UNAUTHENTICATED,this.clientId=hl.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,(async o=>{se(Xr,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(r,(o=>(se(Xr,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new sr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=qf(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function Au(t,e){t.asyncQueue.verifyOperationInProgress(),se(Xr,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener((async s=>{r.isEqual(s)||(await nw(e.localStore,s),r=s)})),e.persistence.setDatabaseDeletedListener((()=>t.terminate())),t._offlineComponents=e}async function Lg(t,e){t.asyncQueue.verifyOperationInProgress();const n=await rV(t);se(Xr,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener((r=>Ng(e.remoteStore,r))),t.setAppCheckTokenChangeListener(((r,s)=>Ng(e.remoteStore,s))),t._onlineComponents=e}async function rV(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){se(Xr,"Using user provided OfflineComponentProvider");try{await Au(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(s){return s.name==="FirebaseError"?s.code===$.FAILED_PRECONDITION||s.code===$.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11})(n))throw n;Ds("Error using user provided cache. Falling back to memory cache: "+n),await Au(t,new Bc)}}else se(Xr,"Using default OfflineComponentProvider"),await Au(t,new tV(void 0));return t._offlineComponents}async function bw(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(se(Xr,"Using user provided OnlineComponentProvider"),await Lg(t,t._uninitializedComponentsProvider._online)):(se(Xr,"Using default OnlineComponentProvider"),await Lg(t,new Sh))),t._onlineComponents}function sV(t){return bw(t).then((e=>e.syncEngine))}async function Aw(t){const e=await bw(t),n=e.eventManager;return n.onListen=HD.bind(null,e.syncEngine),n.onUnlisten=WD.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=jD.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=GD.bind(null,e.syncEngine),n}function iV(t,e,n={}){const r=new sr;return t.asyncQueue.enqueueAndForget((async()=>(function(i,o,a,l,u){const h=new Iw({next:p=>{h.Nu(),o.enqueueAndForget((()=>dw(i,f)));const g=p.docs.has(a);!g&&p.fromCache?u.reject(new ee($.UNAVAILABLE,"Failed to get document because the client is offline.")):g&&p.fromCache&&l&&l.source==="server"?u.reject(new ee($.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(p)},error:p=>u.reject(p)}),f=new pw(Pf(a.path),h,{includeMetadataChanges:!0,qa:!0});return fw(i,f)})(await Aw(t),t.asyncQueue,e,n,r))),r.promise}function oV(t,e,n={}){const r=new sr;return t.asyncQueue.enqueueAndForget((async()=>(function(i,o,a,l,u){const h=new Iw({next:p=>{h.Nu(),o.enqueueAndForget((()=>dw(i,f))),p.fromCache&&l.source==="server"?u.reject(new ee($.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(p)},error:p=>u.reject(p)}),f=new pw(a,h,{includeMetadataChanges:!0,qa:!0});return fw(i,f)})(await Aw(t),t.asyncQueue,e,n,r))),r.promise}function Rw(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}const Ug=new Map;const Sw="firestore.googleapis.com",Fg=!0;class Bg{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ee($.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Sw,this.ssl=Fg}else this.host=e.host,this.ssl=e.ssl??Fg;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=ew;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<UO)throw new ee($.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}dE("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Rw(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new ee($.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new ee($.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new ee($.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,s){return r.timeoutSeconds===s.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class bl{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Bg({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ee($.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ee($.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Bg(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new hE;switch(r.type){case"firstParty":return new gN(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ee($.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const r=Ug.get(n);r&&(se("ComponentProvider","Removing Datastore"),Ug.delete(n),r.terminate())})(this),Promise.resolve()}}function Cw(t,e,n,r={}){t=In(t,bl);const s=Vi(e),i=t._getSettings(),o={...i,emulatorOptions:t._getEmulatorOptions()},a=`${e}:${n}`;s&&(mv(`https://${a}`),gv("Firestore",!0)),i.host!==Sw&&i.host!==a&&Ds("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const l={...i,host:a,ssl:s,emulatorOptions:r};if(!Cs(l,o)&&(t._setSettings(l),r.mockUserToken)){let u,h;if(typeof r.mockUserToken=="string")u=r.mockUserToken,h=Nt.MOCK_USER;else{u=wC(r.mockUserToken,t._app?.options.projectId);const f=r.mockUserToken.sub||r.mockUserToken.user_id;if(!f)throw new ee($.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new Nt(f)}t._authCredentials=new dN(new uE(u,h))}}class ns{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new ns(this.firestore,e,this._query)}}class Ze{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ir(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ze(this.firestore,e,this._key)}toJSON(){return{type:Ze._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(ha(n,Ze._jsonSchema))return new Ze(e,r||null,new ce(je.fromString(n.referencePath)))}}Ze._jsonSchemaVersion="firestore/documentReference/1.0",Ze._jsonSchema={type:at("string",Ze._jsonSchemaVersion),referencePath:at("string")};class ir extends ns{constructor(e,n,r){super(e,n,Pf(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ze(this.firestore,null,new ce(e))}withConverter(e){return new ir(this.firestore,e,this._path)}}function $c(t,e,...n){if(t=lt(t),fE("collection","path",e),t instanceof bl){const r=je.fromString(e,...n);return Zm(r),new ir(t,null,r)}{if(!(t instanceof Ze||t instanceof ir))throw new ee($.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(je.fromString(e,...n));return Zm(r),new ir(t.firestore,null,r)}}function Xn(t,e,...n){if(t=lt(t),arguments.length===1&&(e=hl.newId()),fE("doc","path",e),t instanceof bl){const r=je.fromString(e,...n);return Xm(r),new Ze(t,null,new ce(r))}{if(!(t instanceof Ze||t instanceof ir))throw new ee($.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(je.fromString(e,...n));return Xm(r),new Ze(t.firestore,t instanceof ir?t.converter:null,new ce(r))}}const $g="AsyncQueue";class Hg{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new sw(this,"async_queue_retry"),this._c=()=>{const r=bu();r&&se($g,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=bu();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=bu();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new sr;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Fi(e))throw e;se($g,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,hr("INTERNAL UNHANDLED ERROR: ",jg(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const s=jf.createAndSchedule(this,e,n,r,(i=>this.hc(i)));return this.tc.push(s),s}uc(){this.nc&&ge(47125,{Pc:jg(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,r)=>n.targetTimeMs-r.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function jg(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class $s extends bl{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new Hg,this._persistenceKey=s?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Hg(e),this._firestoreClient=void 0,await e}}}function Pw(t,e){const n=typeof t=="object"?t:Ev(),r=typeof t=="string"?t:Dc,s=pf(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=vC("firestore");i&&Cw(s,...i)}return s}function Al(t){if(t._terminated)throw new ee($.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||aV(t),t._firestoreClient}function aV(t){const e=t._freezeSettings(),n=(function(s,i,o,a){return new ON(s,i,o,a.host,a.ssl,a.experimentalForceLongPolling,a.experimentalAutoDetectLongPolling,Rw(a.experimentalLongPollingOptions),a.useFetchStreams,a.isUsingEmulator)})(t._databaseId,t._app?.options.appId||"",t._persistenceKey,e);t._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new nV(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&(function(s){const i=s?._online.build();return{_offline:s?._offline.build(i),_online:i}})(t._componentsProvider))}class Jt{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Jt(wt.fromBase64String(e))}catch(n){throw new ee($.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Jt(wt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Jt._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(ha(e,Jt._jsonSchema))return Jt.fromBase64String(e.bytes)}}Jt._jsonSchemaVersion="firestore/bytes/1.0",Jt._jsonSchema={type:at("string",Jt._jsonSchemaVersion),bytes:at("string")};class ga{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new ee($.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new vt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class _a{constructor(e){this._methodName=e}}class gn{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ee($.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ee($.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Se(this._lat,e._lat)||Se(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:gn._jsonSchemaVersion}}static fromJSON(e){if(ha(e,gn._jsonSchema))return new gn(e.latitude,e.longitude)}}gn._jsonSchemaVersion="firestore/geoPoint/1.0",gn._jsonSchema={type:at("string",gn._jsonSchemaVersion),latitude:at("number"),longitude:at("number")};class _n{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0})(this._values,e._values)}toJSON(){return{type:_n._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(ha(e,_n._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new _n(e.vectorValues);throw new ee($.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}_n._jsonSchemaVersion="firestore/vectorValue/1.0",_n._jsonSchema={type:at("string",_n._jsonSchemaVersion),vectorValues:at("object")};const cV=/^__.*__$/;class lV{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new ts(e,this.data,this.fieldMask,n,this.fieldTransforms):new fa(e,this.data,n,this.fieldTransforms)}}class kw{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new ts(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function Nw(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ge(40011,{Ac:t})}}class Kf{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.Rc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Kf({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const n=this.path?.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){const n=this.path?.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Hc(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(Nw(this.Ac)&&cV.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class uV{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||wl(e)}Cc(e,n,r,s=!1){return new Kf({Ac:e,methodName:n,Dc:r,path:vt.emptyPath(),fc:!1,bc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Qf(t){const e=t._freezeSettings(),n=wl(t._databaseId);return new uV(t._databaseId,!!e.ignoreUndefinedProperties,n)}function hV(t,e,n,r,s,i={}){const o=t.Cc(i.merge||i.mergeFields?2:0,e,n,s);Jf("Data must be an object, but it was:",o,r);const a=Ow(r,o);let l,u;if(i.merge)l=new Zt(o.fieldMask),u=o.fieldTransforms;else if(i.mergeFields){const h=[];for(const f of i.mergeFields){const p=Ch(e,f,n);if(!o.contains(p))throw new ee($.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);Vw(h,p)||h.push(p)}l=new Zt(h),u=o.fieldTransforms.filter((f=>l.covers(f.field)))}else l=null,u=o.fieldTransforms;return new lV(new jt(a),l,u)}class Rl extends _a{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Rl}}class Yf extends _a{_toFieldTransform(e){return new sO(e.path,new Go)}isEqual(e){return e instanceof Yf}}function fV(t,e,n,r){const s=t.Cc(1,e,n);Jf("Data must be an object, but it was:",s,r);const i=[],o=jt.empty();es(r,((l,u)=>{const h=Xf(e,l,n);u=lt(u);const f=s.yc(h);if(u instanceof Rl)i.push(h);else{const p=ya(u,f);p!=null&&(i.push(h),o.set(h,p))}}));const a=new Zt(i);return new kw(o,a,s.fieldTransforms)}function dV(t,e,n,r,s,i){const o=t.Cc(1,e,n),a=[Ch(e,r,n)],l=[s];if(i.length%2!=0)throw new ee($.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let p=0;p<i.length;p+=2)a.push(Ch(e,i[p])),l.push(i[p+1]);const u=[],h=jt.empty();for(let p=a.length-1;p>=0;--p)if(!Vw(u,a[p])){const g=a[p];let v=l[p];v=lt(v);const _=o.yc(g);if(v instanceof Rl)u.push(g);else{const C=ya(v,_);C!=null&&(u.push(g),h.set(g,C))}}const f=new Zt(u);return new kw(h,f,o.fieldTransforms)}function pV(t,e,n,r=!1){return ya(n,t.Cc(r?4:3,e))}function ya(t,e){if(Dw(t=lt(t)))return Jf("Unsupported field value:",e,t),Ow(t,e);if(t instanceof _a)return(function(r,s){if(!Nw(s.Ac))throw s.Sc(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Sc(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)})(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(r,s){const i=[];let o=0;for(const a of r){let l=ya(a,s.wc(o));l==null&&(l={nullValue:"NULL_VALUE"}),i.push(l),o++}return{arrayValue:{values:i}}})(t,e)}return(function(r,s){if((r=lt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return tO(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=qe.fromDate(r);return{timestampValue:Lc(s.serializer,i)}}if(r instanceof qe){const i=new qe(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Lc(s.serializer,i)}}if(r instanceof gn)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Jt)return{bytesValue:zE(s.serializer,r._byteString)};if(r instanceof Ze){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.Sc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Vf(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof _n)return(function(o,a){return{mapValue:{fields:{[TE]:{stringValue:IE},[Vc]:{arrayValue:{values:o.toArray().map((u=>{if(typeof u!="number")throw a.Sc("VectorValues must only contain numeric values.");return kf(a.serializer,u)}))}}}}}})(r,s);throw s.Sc(`Unsupported field value: ${fl(r)}`)})(t,e)}function Ow(t,e){const n={};return gE(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):es(t,((r,s)=>{const i=ya(s,e.mc(r));i!=null&&(n[r]=i)})),{mapValue:{fields:n}}}function Dw(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof qe||t instanceof gn||t instanceof Jt||t instanceof Ze||t instanceof _a||t instanceof _n)}function Jf(t,e,n){if(!Dw(n)||!pE(n)){const r=fl(n);throw r==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+r)}}function Ch(t,e,n){if((e=lt(e))instanceof ga)return e._internalPath;if(typeof e=="string")return Xf(t,e);throw Hc("Field path arguments must be of type string or ",t,!1,void 0,n)}const mV=new RegExp("[~\\*/\\[\\]]");function Xf(t,e,n){if(e.search(mV)>=0)throw Hc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new ga(...e.split("."))._internalPath}catch{throw Hc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Hc(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(i||o)&&(l+=" (found",i&&(l+=` in field ${r}`),o&&(l+=` in document ${s}`),l+=")"),new ee($.INVALID_ARGUMENT,a+t+l)}function Vw(t,e){return t.some((n=>n.isEqual(e)))}class xw{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Ze(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new gV(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Sl("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class gV extends xw{data(){return super.data()}}function Sl(t,e){return typeof e=="string"?Xf(t,e):e instanceof ga?e._internalPath:e._delegate._internalPath}function _V(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new ee($.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Zf{}class ed extends Zf{}function Ph(t,e,...n){let r=[];e instanceof Zf&&r.push(e),r=r.concat(n),(function(i){const o=i.filter((l=>l instanceof Cl)).length,a=i.filter((l=>l instanceof va)).length;if(o>1||o>0&&a>0)throw new ee($.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const s of r)t=s._apply(t);return t}class va extends ed{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new va(e,n,r)}_apply(e){const n=this._parse(e);return Mw(e._query,n),new ns(e.firestore,e.converter,_h(e._query,n))}_parse(e){const n=Qf(e.firestore);return(function(i,o,a,l,u,h,f){let p;if(u.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new ee($.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){Wg(f,h);const v=[];for(const _ of f)v.push(qg(l,i,_));p={arrayValue:{values:v}}}else p=qg(l,i,f)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||Wg(f,h),p=pV(a,o,f,h==="in"||h==="not-in");return ot.create(u,h,p)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function yV(t,e,n){const r=e,s=Sl("where",t);return va._create(s,r,n)}class Cl extends Zf{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Cl(e,n)}_parse(e){const n=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return n.length===1?n[0]:bn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(s,i){let o=s;const a=i.getFlattenedFilters();for(const l of a)Mw(o,l),o=_h(o,l)})(e._query,n),new ns(e.firestore,e.converter,_h(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Pl extends ed{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Pl(e,n)}_apply(e){const n=(function(s,i,o){if(s.startAt!==null)throw new ee($.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new ee($.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Wo(i,o)})(e._query,this._field,this._direction);return new ns(e.firestore,e.converter,(function(s,i){const o=s.explicitOrderBy.concat([i]);return new Bi(s.path,s.collectionGroup,o,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)})(e._query,n))}}function kh(t,e="asc"){const n=e,r=Sl("orderBy",t);return Pl._create(r,n)}function qg(t,e,n){if(typeof(n=lt(n))=="string"){if(n==="")throw new ee($.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!NE(e)&&n.indexOf("/")!==-1)throw new ee($.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(je.fromString(n));if(!ce.isDocumentKey(r))throw new ee($.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return ag(t,new ce(r))}if(n instanceof Ze)return ag(t,n._key);throw new ee($.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${fl(n)}.`)}function Wg(t,e){if(!Array.isArray(t)||t.length===0)throw new ee($.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Mw(t,e){const n=(function(s,i){for(const o of s)for(const a of o.getFlattenedFilters())if(i.indexOf(a.op)>=0)return a.op;return null})(t.filters,(function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new ee($.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ee($.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class Lw{convertValue(e,n="none"){switch(Yr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return rt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Qr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw ge(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return es(e,((s,i)=>{r[s]=this.convertValue(i,n)})),r}convertVectorValue(e){const n=e.fields?.[Vc].arrayValue?.values?.map((r=>rt(r.doubleValue)));return new _n(n)}convertGeoPoint(e){return new gn(rt(e.latitude),rt(e.longitude))}convertArray(e,n){return(e.values||[]).map((r=>this.convertValue(r,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const r=ml(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(jo(e));default:return null}}convertTimestamp(e){const n=Kr(e);return new qe(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=je.fromString(e);xe(ZE(r),9688,{name:e});const s=new Ri(r.get(1),r.get(3)),i=new ce(r.popFirst(5));return s.isEqual(n)||hr(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}function vV(t,e,n){let r;return r=t?t.toFirestore(e):e,r}class ni{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class jr extends xw{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new ko(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Sl("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ee($.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=jr._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}jr._jsonSchemaVersion="firestore/documentSnapshot/1.0",jr._jsonSchema={type:at("string",jr._jsonSchemaVersion),bundleSource:at("string","DocumentSnapshot"),bundleName:at("string"),bundle:at("string")};class ko extends jr{data(e={}){return super.data(e)}}class bs{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new ni(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((r=>{e.call(n,new ko(this._firestore,this._userDataWriter,r.key,r,new ni(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ee($.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map((a=>{const l=new ko(s._firestore,s._userDataWriter,a.doc.key,a.doc,new ni(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}}))}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter((a=>i||a.type!==3)).map((a=>{const l=new ko(s._firestore,s._userDataWriter,a.doc.key,a.doc,new ni(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);let u=-1,h=-1;return a.type!==0&&(u=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),h=o.indexOf(a.doc.key)),{type:EV(a.type),doc:l,oldIndex:u,newIndex:h}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ee($.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=bs._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=hl.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],s=[];return this.docs.forEach((i=>{i._document!==null&&(n.push(i._document),r.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),s.push(i.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function EV(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ge(61501,{type:t})}}function Qo(t){t=In(t,Ze);const e=In(t.firestore,$s);return iV(Al(e),t._key).then((n=>TV(e,t,n)))}bs._jsonSchemaVersion="firestore/querySnapshot/1.0",bs._jsonSchema={type:at("string",bs._jsonSchemaVersion),bundleSource:at("string","QuerySnapshot"),bundleName:at("string"),bundle:at("string")};class Uw extends Lw{constructor(e){super(),this.firestore=e}convertBytes(e){return new Jt(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Ze(this.firestore,null,n)}}function No(t){t=In(t,ns);const e=In(t.firestore,$s),n=Al(e),r=new Uw(e);return _V(t._query),oV(n,t._query).then((s=>new bs(e,r,t,s)))}function mi(t,e,n){t=In(t,Ze);const r=In(t.firestore,$s),s=vV(t.converter,e);return kl(r,[hV(Qf(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,mn.none())])}function wV(t,e,n,...r){t=In(t,Ze);const s=In(t.firestore,$s),i=Qf(s);let o;return o=typeof(e=lt(e))=="string"||e instanceof ga?dV(i,"updateDoc",t._key,e,n,r):fV(i,"updateDoc",t._key,e),kl(s,[o.toMutation(t._key,mn.exists(!0))])}function Fw(t){return kl(In(t.firestore,$s),[new Nf(t._key,mn.none())])}function kl(t,e){return(function(r,s){const i=new sr;return r.asyncQueue.enqueueAndForget((async()=>zD(await sV(r),s,i))),i.promise})(Al(t),e)}function TV(t,e,n){const r=n.docs.get(e._key),s=new Uw(t);return new jr(t,s,e._key,r,new ni(n.hasPendingWrites,n.fromCache),e.converter)}function Nh(){return new Yf("serverTimestamp")}(function(e,n=!0){(function(s){Li=s})(xi),Ii(new Ps("firestore",((r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),a=new $s(new pN(r.getProvider("auth-internal")),new _N(o,r.getProvider("app-check-internal")),(function(u,h){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new ee($.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ri(u.options.projectId,h)})(o,s),o);return i={useFetchStreams:n,...i},a._setSettings(i),a}),"PUBLIC").setMultipleInstances(!0)),$r(Km,Qm,e),$r(Km,Qm,"esm2020")})();const IV=Object.freeze(Object.defineProperty({__proto__:null,AbstractUserDataWriter:Lw,Bytes:Jt,CollectionReference:ir,DocumentReference:Ze,DocumentSnapshot:jr,FieldPath:ga,FieldValue:_a,Firestore:$s,FirestoreError:ee,GeoPoint:gn,Query:ns,QueryCompositeFilterConstraint:Cl,QueryConstraint:ed,QueryDocumentSnapshot:ko,QueryFieldFilterConstraint:va,QueryOrderByConstraint:Pl,QuerySnapshot:bs,SnapshotMetadata:ni,Timestamp:qe,VectorValue:_n,_AutoId:hl,_ByteString:wt,_DatabaseId:Ri,_DocumentKey:ce,_EmptyAuthCredentialsProvider:hE,_FieldPath:vt,_cast:In,_logWarn:Ds,_validateIsNotUsedTogether:dE,collection:$c,connectFirestoreEmulator:Cw,deleteDoc:Fw,doc:Xn,ensureFirestoreConfigured:Al,executeWrite:kl,getDoc:Qo,getDocs:No,getFirestore:Pw,orderBy:kh,query:Ph,serverTimestamp:Nh,setDoc:mi,updateDoc:wV,where:yV},Symbol.toStringTag,{value:"Module"}));var bV="firebase",AV="12.7.0";$r(bV,AV,"app");const RV={apiKey:"AIzaSyCx092q7up_BXFgK2e13A-IQ3uDjwf6J5A",authDomain:"accsuite117.firebaseapp.com",projectId:"accsuite117",storageBucket:"accsuite117.firebasestorage.app",messagingSenderId:"352958845592",appId:"1:352958845592:web:bb6a7fbe04f6181707f6ed"};let Yo,_s,Xt;Im().length?Yo=Im()[0]:Yo=vv(RV);_s=hN(Yo);Xt=Pw(Yo);const SV=Object.freeze(Object.defineProperty({__proto__:null,get app(){return Yo},get auth(){return _s},get db(){return Xt}},Symbol.toStringTag,{value:"Module"})),rn=oe(null),fs=oe("pilot"),Gg=oe(!0),ds=oe(null);let zg=!1;function Hi(){const t=Ue(()=>!!rn.value),e=Ue(()=>rn.value?.emailVerified??!1),n=Ue(()=>rn.value?.email??""),r=Ue(()=>rn.value?.displayName??""),s=Ue(()=>fs.value==="coach"),i=async v=>{try{const _=Xn(Xt,"users",v.uid),C=await Qo(_);if(!C.exists())await mi(_,{email:v.email,nickname:v.displayName||"Utente",role:"pilot",createdAt:new Date().toISOString(),emailVerified:v.emailVerified}),fs.value="pilot",console.log("[AUTH] Created missing user profile");else{const S=C.data();fs.value=S.role||"pilot"}}catch(_){console.error("[AUTH] Failed to ensure user document:",_),fs.value="pilot"}},o=()=>{zg||(zg=!0,Zk(_s,async v=>{rn.value=v,v?await i(v):fs.value="pilot",Gg.value=!1,console.log("[AUTH] State changed:",v?.email??"logged out","| Role:",fs.value)}))},a=async(v,_,C,S="",R="")=>{ds.value=null;try{const O=(await zk(_s,v,_)).user;return await Yk(O,{displayName:C}),await mi(Xn(Xt,"users",O.uid),{firstName:S,lastName:R,nickname:C,email:v,role:"pilot",coachId:null,createdAt:new Date().toISOString(),emailVerified:!1}),await Lm(O),console.log("[AUTH] Registered:",v,"Verification email sent"),{success:!0,user:O}}catch(y){return console.error("[AUTH] Register error:",y.code),ds.value=g(y.code),{success:!1,error:ds.value}}},l=async(v,_)=>{ds.value=null;try{const C=await Kk(_s,v,_);return console.log("[AUTH] Logged in:",v),{success:!0,user:C.user}}catch(C){return console.error("[AUTH] Login error:",C.code),ds.value=g(C.code),{success:!1,error:ds.value}}},u=async()=>{try{return await e1(_s),console.log("[AUTH] Logged out"),{success:!0}}catch(v){return console.error("[AUTH] Logout error:",v),{success:!1,error:v.message}}},h=async()=>{if(!rn.value)return{success:!1,error:"Utente non autenticato"};try{return await Lm(rn.value),console.log("[AUTH] Verification email resent"),{success:!0}}catch(v){return console.error("[AUTH] Resend error:",v.code),{success:!1,error:g(v.code)}}},f=async()=>{if(!rn.value)return{verified:!1,error:"Utente non autenticato"};try{await rn.value.reload(),rn.value=_s.currentUser;const v=rn.value?.emailVerified??!1;return console.log("[AUTH] Email verified check:",v),{verified:v,error:null}}catch(v){return console.error("[AUTH] Check verification error:",v),{verified:!1,error:v.message}}},p=async v=>{try{const _=await Qo(Xn(Xt,"users",v));return _.exists()?_.data():null}catch(_){return console.error("[AUTH] Get profile error:",_),null}},g=v=>({"auth/email-already-in-use":"Email gi registrata","auth/weak-password":"Password troppo debole (min. 6 caratteri)","auth/invalid-email":"Email non valida","auth/user-not-found":"Utente non trovato","auth/wrong-password":"Password errata","auth/invalid-credential":"Credenziali non valide","auth/too-many-requests":"Troppi tentativi, riprova pi tardi","auth/network-request-failed":"Errore di rete, controlla la connessione"})[v]||"Errore di autenticazione";return o(),{currentUser:rn,isLoading:Gg,authError:ds,isAuthenticated:t,isEmailVerified:e,userEmail:n,userDisplayName:r,register:a,login:l,logout:u,resendVerificationEmail:h,checkEmailVerified:f,getUserProfile:p,userRole:fs,isCoach:s}}const Ar={PRACTICE:0,QUALIFY:1,RACE:2};function wM(t){switch(t){case 0:return"practice";case 1:return"qualify";case 2:return"race";default:return"practice"}}function TM(t){if(!t||t<=0)return"--:--.---";const e=Math.round(t),n=Math.floor(e/6e4),r=Math.floor(e%6e4/1e3),s=e%1e3;return`${n}:${r.toString().padStart(2,"0")}.${s.toString().padStart(3,"0")}`}function IM(t){return t?t.split("_").map((e,n)=>e.match(/^gt\d$/i)||e.length<=2?e.toUpperCase():e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()).join(" "):"Unknown"}function bM(t){return t?t.split("_").map(e=>e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()).join(" "):"Unknown"}function AM(t){if(!t)return"-";const e=new Date(t);return`${e.getDate()} ${["Gen","Feb","Mar","Apr","Mag","Giu","Lug","Ago","Set","Ott","Nov","Dic"][e.getMonth()]} ${e.getFullYear()}`}function RM(t){if(!t)return"-";const e=new Date(t);return`${e.getDate()} ${["GENNAIO","FEBBRAIO","MARZO","APRILE","MAGGIO","GIUGNO","LUGLIO","AGOSTO","SETTEMBRE","OTTOBRE","NOVEMBRE","DICEMBRE"][e.getMonth()]} ${e.getFullYear()}`}function SM(t){if(!t)return"-";const e=new Date(t);return`${e.getHours().toString().padStart(2,"0")}:${e.getMinutes().toString().padStart(2,"0")}`}function CV(){const t=oe([]),e=oe(!1),n=oe(null),{currentUser:r}=Hi();async function s(v){const _=v||r.value?.uid;if(!_)return console.warn("[TELEMETRY] No user ID provided"),[];e.value=!0,n.value=null;try{const C=$c(Xt,`users/${_}/sessions`);let S;try{const R=Ph(C,kh("uploadedAt","desc"));S=await No(R)}catch{console.warn("[TELEMETRY] orderBy failed, fetching without order"),S=await No(C)}return t.value=S.docs.map(R=>{const y=R.data();return{sessionId:R.id,fileHash:y.fileHash||null,fileName:y.fileName||null,uploadedAt:y.uploadedAt||null,meta:y.meta||{},summary:y.summary||{},rawChunkCount:y.rawChunkCount||0,rawSizeBytes:y.rawSizeBytes||0}}),t.value.sort((R,y)=>(y.meta.date_start||"").localeCompare(R.meta.date_start||"")),console.log(`[TELEMETRY] Loaded ${t.value.length} sessions for user ${_}`),t.value}catch(C){return console.error("[TELEMETRY] Error loading sessions:",C),n.value=C.message,[]}finally{e.value=!1}}async function i(v,_){const C=_||r.value?.uid;if(!C)return null;try{const S=Xn(Xt,`users/${C}/sessions/${v}`),R=await Qo(S);if(!R.exists()||(R.data().rawChunkCount||0)===0)return null;const V=$c(Xt,`users/${C}/sessions/${v}/rawChunks`),L=Ph(V,kh("idx","asc")),b=await No(L),w=[];b.forEach(A=>{const P=A.data();w.push({idx:P.idx,chunk:P.chunk})}),w.sort((A,P)=>A.idx-P.idx);const E=w.map(A=>A.chunk).join("");return JSON.parse(E)}catch(S){return console.error("[TELEMETRY] Error fetching full session:",S),null}}const o=Ue(()=>t.value.length===0?null:t.value[0]),a=Ue(()=>o.value?.meta.car||null),l=Ue(()=>o.value?.meta.track||null),u=Ue(()=>{const v=["Flood","Wet","Damp","Greasy","Green","Fast","Optimum"],_={};for(const C of t.value){const S=(C.meta.track||"unknown").toLowerCase(),R=C.summary;if(!_[S]){const b={};v.forEach(w=>{b[w]={bestQualy:null,bestQualyTemp:null,bestRace:null,bestRaceTemp:null,bestAvgRace:null,bestAvgRaceTemp:null}}),_[S]={track:C.meta.track,sessions:0,lastSession:C.meta.date_start,bestQualy:null,bestQualyConditions:null,bestRace:null,bestRaceConditions:null,bestAvgRace:null,bestAvgRaceConditions:null,bestByGrip:b}}_[S].sessions++,C.meta.date_start>_[S].lastSession&&(_[S].lastSession=C.meta.date_start);const y=R?.best_by_grip;if(y)for(const b of v){const w=y[b];if(!w)continue;const E=_[S].bestByGrip[b];E&&(w.bestQualy&&(!E.bestQualy||w.bestQualy<E.bestQualy)&&(E.bestQualy=w.bestQualy,E.bestQualyTemp=w.bestQualyTemp),w.bestRace&&(!E.bestRace||w.bestRace<E.bestRace)&&(E.bestRace=w.bestRace,E.bestRaceTemp=w.bestRaceTemp),w.bestAvgRace&&(!E.bestAvgRace||w.bestAvgRace<E.bestAvgRace)&&(E.bestAvgRace=w.bestAvgRace,E.bestAvgRaceTemp=w.bestAvgRaceTemp))}const O=R?.best_qualy_ms;O?(!_[S].bestQualy||O<_[S].bestQualy)&&(_[S].bestQualy=O,_[S].bestQualyConditions=R.best_qualy_conditions||null):C.meta.session_type===Ar.QUALIFY&&R?.bestLap&&(!_[S].bestQualy||R.bestLap<_[S].bestQualy)&&(_[S].bestQualy=R.bestLap,_[S].bestQualyConditions=null);const V=R?.best_race_ms;V?(!_[S].bestRace||V<_[S].bestRace)&&(_[S].bestRace=V,_[S].bestRaceConditions=R.best_race_conditions||null):C.meta.session_type===Ar.RACE&&R?.bestLap&&(!_[S].bestRace||R.bestLap<_[S].bestRace)&&(_[S].bestRace=R.bestLap,_[S].bestRaceConditions=null);const L=R?.best_avg_race_ms;L&&(!_[S].bestAvgRace||L<_[S].bestAvgRace)&&(_[S].bestAvgRace=L,_[S].bestAvgRaceConditions=R.best_avg_race_conditions||null)}return Object.values(_).sort((C,S)=>(S.lastSession||"").localeCompare(C.lastSession||""))});function h(v){return t.value.filter(_=>(_.meta.track||"").toLowerCase()===v.toLowerCase())}function f(v){return t.value.find(_=>_.sessionId===v)}function p(v=7){const _=new Date,C=["Dom","Lun","Mar","Mer","Gio","Ven","Sab"],S=[];for(let R=v-1;R>=0;R--){const y=new Date(_.getTime()-R*24*60*60*1e3),O=y.toISOString().split("T")[0]||"",V=t.value.filter(E=>E.meta.date_start?.startsWith(O));let L=0,b=0,w=0;for(const E of V){const A=E.summary?.totalTime||0,P=Math.round(A/6e4);switch(E.meta.session_type){case Ar.PRACTICE:L+=P;break;case Ar.QUALIFY:b+=P;break;case Ar.RACE:w+=P;break}}S.push({day:C[y.getDay()]||"N/A",practice:L,qualify:b,race:w})}return S}const g=Ue(()=>{const v=new Date,_=new Date(v.getTime()-10080*60*1e3);let C=0,S=0,R=0,y=0,O=0,V=0;for(const L of t.value){if(new Date(L.meta.date_start)<_)continue;const w=L.summary?.totalTime||0,E=Math.round(w/6e4);switch(L.meta.session_type){case Ar.PRACTICE:C+=E,S++;break;case Ar.QUALIFY:R+=E,y++;break;case Ar.RACE:O+=E,V++;break}}return{practice:{minutes:C,sessions:S},qualify:{minutes:R,sessions:y},race:{minutes:O,sessions:V}}});return{sessions:t,isLoading:e,error:n,loadSessions:s,fetchSessionFull:i,getSessionsForTrack:h,getSession:f,getActivityData:p,lastSession:o,lastUsedCar:a,lastUsedTrack:l,trackStats:u,activityTotals:g}}const PV=4e5;function kV(){const{currentUser:t}=Hi(),{loadSessions:e}=CV(),n=oe(!1),r=oe(0),s=oe([]),i=oe(null),o=Ue(()=>typeof window>"u"?!1:!!window.electronAPI);async function a(C){const S=new TextEncoder().encode(C),R=await crypto.subtle.digest("SHA-256",S);return Array.from(new Uint8Array(R)).map(O=>O.toString(16).padStart(2,"0")).join("")}function l(C,S){return`${C}_${S}`.replace(/[^a-zA-Z0-9]/g,"_").substring(0,100)}async function u(C,S){const R=Xn(Xt,`users/${C}/sessions/${S}`),y=await Qo(R);return y.exists()?{id:S,...y.data()}:null}async function h(C,S){try{const R=$c(Xt,`users/${C}/sessions/${S}/rawChunks`),O=(await No(R)).docs.map(V=>Fw(V.ref));await Promise.all(O)}catch(R){console.warn("[SYNC] Error deleting old chunks:",R.message)}}function f(C){const S=C.session_info||{},R=C.stints||[],y={track:S.track||C.track||"Unknown",date_start:S.date_start||C.date||new Date().toISOString(),date_end:S.date_end||null,car:S.car_model||S.car||C.car||null,session_type:S.session_type??null,driver:S.driver||null},O=["Flood","Wet","Damp","Greasy","Green","Fast","Optimum"],V={};O.forEach(I=>{V[I]={bestQualy:null,bestQualyTemp:null,bestRace:null,bestRaceTemp:null,bestAvgRace:null,bestAvgRaceTemp:null}});let L=null,b=null,w=null,E=null,A=null,P=null;R.forEach(I=>{const le=I.type==="Qualify",ye=I.laps||[];if(ye.forEach(Q=>{if(Q.is_valid&&!Q.has_pit_stop&&Q.lap_time_ms){const ne=Q.track_grip_status||"Unknown",X=Q.air_temp||0,Ae={airTemp:X,roadTemp:Q.road_temp||0,grip:ne};V[ne]&&(le?(!V[ne].bestQualy||Q.lap_time_ms<V[ne].bestQualy)&&(V[ne].bestQualy=Q.lap_time_ms,V[ne].bestQualyTemp=X):(!V[ne].bestRace||Q.lap_time_ms<V[ne].bestRace)&&(V[ne].bestRace=Q.lap_time_ms,V[ne].bestRaceTemp=X)),le?(!L||Q.lap_time_ms<L)&&(L=Q.lap_time_ms,b=Ae):(!w||Q.lap_time_ms<w)&&(w=Q.lap_time_ms,E=Ae)}}),!le&&I.avg_clean_lap&&ye.length>=5){const Q=ye.find(Ae=>Ae.is_valid&&!Ae.has_pit_stop),ne=Q?.track_grip_status||ye[0]?.track_grip_status||"Unknown",X=Q?.air_temp||ye[0]?.air_temp||0;V[ne]&&(!V[ne].bestAvgRace||I.avg_clean_lap<V[ne].bestAvgRace)&&(V[ne].bestAvgRace=I.avg_clean_lap,V[ne].bestAvgRaceTemp=X),(!A||I.avg_clean_lap<A)&&(A=I.avg_clean_lap,P={airTemp:X,roadTemp:Q?.road_temp||0,grip:ne})}});const N={laps:S.laps_total||C.laps?.length||0,lapsValid:S.laps_valid||0,bestLap:S.session_best_lap||C.bestLap||null,avgCleanLap:S.avg_clean_lap||null,totalTime:S.total_drive_time_ms||0,stintCount:R.length||0,best_qualy_ms:L,best_qualy_conditions:b,best_race_ms:w,best_race_conditions:E,best_avg_race_ms:A,best_avg_race_conditions:P,best_by_grip:V};return{meta:y,summary:N}}function p(C,S){const R=[];for(let y=0;y<C.length;y+=S)R.push(C.slice(y,y+S));return R}async function g(C,S,R,y){try{const O=C.ownerId||null;if(O&&O!==y)return console.log(`[SYNC] Skipped ${R}: owner mismatch (file: ${O}, current: ${y})`),{status:"skipped",fileName:R,reason:"owner_mismatch"};O||console.log(`[SYNC] Warning: ${R} has no ownerId (pre-login session)`);const{meta:V,summary:L}=f(C),b=l(V.date_start,V.track),w=await a(S),E=await u(y,b);let A=!1,P=!0;E&&(A=!0,E.fileHash===w?P=!1:await h(y,b));const N=p(S,PV),I=Xn(Xt,`users/${y}/sessions/${b}`);await mi(I,{fileHash:w,fileName:R,uploadedAt:Nh(),meta:V,summary:L,rawChunkCount:N.length,rawSizeBytes:S.length,rawEncoding:"json-string",version:(E?.version||0)+1});const le=Xn(Xt,`users/${y}/uploads/${w}`);if(await mi(le,{fileName:R,uploadedAt:Nh(),sessionId:b}),P)for(let Q=0;Q<N.length;Q++){const ne=Xn(Xt,`users/${y}/sessions/${b}/rawChunks/${Q}`);await mi(ne,{idx:Q,chunk:N[Q]})}let ye="created";return A&&(ye=P?"updated":"refreshed"),console.log(`[SYNC] ${ye}: ${R} -> ${b} (Q: ${L.best_qualy_ms}, R: ${L.best_race_ms})`),{status:ye,fileName:R,sessionId:b}}catch(O){return console.error("[SYNC] Error:",O),{status:"error",fileName:R,error:O.message}}}async function v(){if(!o.value)return console.log("[SYNC] Not running in Electron, skipping sync"),[];if(!t.value)return console.log("[SYNC] No user logged in, skipping sync"),[];if(n.value)return console.log("[SYNC] Already syncing, skipping"),[];n.value=!0,r.value=0,s.value=[];const C=t.value.uid,S=window.electronAPI,R=[];try{const y=await S.getTelemetryFiles();if(console.log(`[SYNC] Found ${y.length} files to process`),y.length===0)return n.value=!1,[];for(let E=0;E<y.length;E++){const A=y[E];r.value=Math.round(E/y.length*100);try{const P=await S.readFile(A.path);if(!P){R.push({status:"error",fileName:A.name,error:"Could not read file"});continue}const N=JSON.stringify(P),I=await g(P,N,A.name,C);R.push(I),(I.status==="created"||I.status==="updated")&&await S.updateRegistry(A.name,{uploadedBy:C,sessionId:I.sessionId,uploadedAt:new Date().toISOString()})}catch(P){console.error(`[SYNC] Error processing ${A.name}:`,P),R.push({status:"error",fileName:A.name,error:P.message})}}r.value=100,s.value=R,i.value=new Date;const O=R.filter(E=>E.status==="created").length,V=R.filter(E=>E.status==="updated").length,L=R.filter(E=>E.status==="unchanged").length,b=R.filter(E=>E.status==="skipped").length,w=R.filter(E=>E.status==="error").length;return console.log(`[SYNC] Complete: ${O} created, ${V} updated, ${L} unchanged, ${b} skipped, ${w} errors`),(O>0||V>0)&&(console.log("[SYNC] Refreshing dashboard data..."),await e()),R}catch(y){return console.error("[SYNC] Sync failed:",y),[{status:"error",fileName:"sync",error:y.message}]}finally{n.value=!1}}function _(){if(!o.value)return;const C=window.electronAPI;C.onFilesChanged(S=>{(S.new.length>0||S.modified.length>0)&&(console.log(`[SYNC] Files changed: ${S.new.length} new, ${S.modified.length} modified`),v())}),C.onInitialFiles(S=>{console.log(`[SYNC] Initial files: ${S.files.length}`)}),console.log("[SYNC] Auto-sync setup complete")}return{isElectron:o,isSyncing:n,syncProgress:r,syncResults:s,lastSyncTime:i,syncTelemetryFiles:v,setupAutoSync:_}}const NV={key:0,class:"electron-titlebar"},OV={class:"titlebar-buttons-left"},DV=["title","disabled"],VV=tt({__name:"ElectronTitlebar",setup(t){const e=oe(!1),n=oe(!1),{isSyncing:r,syncTelemetryFiles:s,setupAutoSync:i}=kV(),o=oe(!1),a=oe([]);Wr(async()=>{if(e.value=!!window.electronAPI,e.value){try{n.value=await window.electronAPI.windowIsMaximized()}catch{console.log("[TITLEBAR] Could not get maximized state")}i()}});const l=()=>{window.electronAPI?.pageRefresh()},u=async()=>{console.log("[TITLEBAR] Manual sync triggered");const v=await s();console.log("[TITLEBAR] Sync complete:",v),a.value=v,o.value=!0},h=()=>{window.electronAPI?.windowMinimize()},f=async()=>{const v=await window.electronAPI?.windowMaximize();n.value=v},p=()=>{window.electronAPI?.windowClose()},g=()=>{o.value=!1};return(v,_)=>{const C=uC;return e.value?(fe(),be("div",NV,[_[5]||(_[5]=B("div",{class:"titlebar-drag-region"},[B("span",{class:"titlebar-title"},"ACC Telemetry Dashboard")],-1)),B("div",OV,[B("button",{class:"titlebar-btn",title:"Aggiorna pagina (F5)",onClick:l},[..._[0]||(_[0]=[B("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[B("path",{d:"M21 12a9 9 0 11-9-9c2.52 0 4.93 1 6.74 2.74L21 8"}),B("path",{d:"M21 3v5h-5"})],-1)])]),B("button",{class:Wt(["titlebar-btn",{syncing:Me(r)}]),title:Me(r)?"Sincronizzazione in corso...":"Sincronizza file",disabled:Me(r),onClick:u},[..._[1]||(_[1]=[B("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[B("path",{d:"M23 4v6h-6"}),B("path",{d:"M1 20v-6h6"}),B("path",{d:"M3.51 9a9 9 0 0114.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0020.49 15"})],-1)])],10,DV)]),B("div",{class:"titlebar-buttons-right"},[B("button",{class:"titlebar-btn",title:"Minimizza",onClick:h},[..._[2]||(_[2]=[B("svg",{width:"12",height:"12",viewBox:"0 0 12 12"},[B("rect",{y:"5",width:"12",height:"2",fill:"currentColor"})],-1)])]),B("button",{class:"titlebar-btn",title:"Massimizza",onClick:f},[..._[3]||(_[3]=[B("svg",{width:"12",height:"12",viewBox:"0 0 12 12"},[B("rect",{x:"1",y:"1",width:"10",height:"10",stroke:"currentColor","stroke-width":"2",fill:"none"})],-1)])]),B("button",{class:"titlebar-btn titlebar-close",title:"Chiudi",onClick:p},[..._[4]||(_[4]=[B("svg",{width:"12",height:"12",viewBox:"0 0 12 12"},[B("path",{d:"M1 1l10 10M11 1L1 11",stroke:"currentColor","stroke-width":"2"})],-1)])])]),de(C,{results:a.value,visible:o.value,onClose:g},null,8,["results","visible"])])):Gr("",!0)}}}),xV=Object.assign(ln(VV,[["__scopeId","data-v-58e20638"]]),{__name:"ElectronTitlebar"}),za="<div></div>",Ru=new WeakMap;function MV(t){if(Ru.has(t))return Ru.get(t);const e={...t};return e.render?e.render=(n,r,s,i,o,a)=>{if(i.mounted$??n.mounted$){const l=t.render?.bind(n)(n,r,s,i,o,a);return l.children===null||typeof l.children=="string"?an(l):Xe(l)}return du(n._.vnode.el,za)}:e.template&&=`
      <template v-if="mounted$">${t.template}</template>
      <template v-else>${za}</template>
    `,e.setup=(n,r)=>{const s=et(),i=cr(s.isHydrating===!1),o=Ms();if(s.isHydrating){const l={...o.attrs},u=LV(o);for(const h in l)delete o.attrs[h];Wr(()=>{Object.assign(o.attrs,l),o.vnode.dirs=u})}Wr(()=>{i.value=!0});const a=t.setup?.(n,r)||{};return xh(a)?Promise.resolve(a).then(l=>typeof l!="function"?(l||={},l.mounted$=i,l):(...u)=>{if(i.value||!s.isHydrating){const h=l(...u);return h.children===null||typeof h.children=="string"?an(h):Xe(h)}return du(o?.vnode.el,za)}):typeof a=="function"?(...l)=>{if(i.value){const u=a(...l),h=e.inheritAttrs!==!1?r.attrs:void 0;return u.children===null||typeof u.children=="string"?an(u,h):Xe(u,h)}return du(o?.vnode.el,za)}:Object.assign(a,{mounted$:i})},Ru.set(t,e),e}function LV(t){if(!t||!t.vnode.dirs)return null;const e=t.vnode.dirs;return t.vnode.dirs=null,e}function UV(t={}){const e=cr(""),n=cr(t.politeness||"polite"),r=Hy();function s(u="",h="polite"){e.value=u,n.value=h}function i(u){return s(u,"polite")}function o(u){return s(u,"assertive")}function a(){s(document?.title?.trim(),n.value)}function l(){r?.hooks?.removeHook("dom:rendered",a)}return a(),r?.hooks?.hook("dom:rendered",()=>{a()}),{_cleanup:l,message:e,politeness:n,set:s,polite:i,assertive:o}}function FV(t={}){const e=et(),n=e._routeAnnouncer||=UV(t);return t.politeness!==n.politeness.value&&(n.politeness.value=t.politeness||"polite"),Lh()&&(e._routeAnnouncerDeps||=0,e._routeAnnouncerDeps++,IT(()=>{e._routeAnnouncerDeps--,e._routeAnnouncerDeps===0&&(n._cleanup(),delete e._routeAnnouncer)})),n}const BV=tt({name:"NuxtRouteAnnouncer",props:{atomic:{type:Boolean,default:!1},politeness:{type:String,default:"polite"}},setup(t,{slots:e,expose:n}){const{set:r,polite:s,assertive:i,message:o,politeness:a}=FV({politeness:t.politeness});return n({set:r,polite:s,assertive:i,message:o,politeness:a}),()=>Xe("span",{class:"nuxt-route-announcer",style:{position:"absolute"}},Xe("span",{role:"alert","aria-live":a.value,"aria-atomic":t.atomic,style:{border:"0",clip:"rect(0 0 0 0)","clip-path":"inset(50%)",height:"1px",width:"1px",overflow:"hidden",position:"absolute","white-space":"nowrap","word-wrap":"normal",margin:"-1px",padding:"0"}},e.default?e.default({message:o.value}):o.value))}}),$V=["type","value","placeholder","autocomplete","maxlength","disabled"],HV=tt({__name:"BaseInput",props:{modelValue:{},type:{default:"text"},placeholder:{default:""},autocomplete:{default:"off"},maxlength:{},error:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(t,{emit:e}){const n=e,r=s=>{const i=s.target;n("update:modelValue",i.value)};return(s,i)=>(fe(),be("input",{type:t.type,value:t.modelValue,placeholder:t.placeholder,autocomplete:t.autocomplete,maxlength:t.maxlength,disabled:t.disabled,class:Wt(["form-input",{"form-input--error":t.error}]),onInput:r},null,42,$V))}}),td=Object.assign(ln(HV,[["__scopeId","data-v-91b986db"]]),{__name:"UiBaseInput"}),jV={key:0,class:"form-error"},qV=tt({__name:"FormError",props:{message:{},visible:{type:Boolean,default:!1}},setup(t){return(e,n)=>t.visible&&t.message?(fe(),be("div",jV,qr(t.message),1)):Gr("",!0)}}),nd=Object.assign(ln(qV,[["__scopeId","data-v-75d4b223"]]),{__name:"UiFormError"}),WV=["type","disabled"],GV=tt({__name:"BaseButton",props:{variant:{default:"primary"},loading:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},type:{default:"button"}},emits:["click"],setup(t,{emit:e}){const n=t,r=e,s=i=>{!n.loading&&!n.disabled&&r("click",i)};return(i,o)=>(fe(),be("button",{type:t.type,class:Wt(["btn",`btn--${t.variant}`,{"btn--loading":t.loading}]),disabled:t.disabled||t.loading,onClick:s},[SI(i.$slots,"default",{},void 0)],10,WV))}}),rd=Object.assign(ln(GV,[["__scopeId","data-v-d54604fc"]]),{__name:"UiBaseButton"}),zV=tt({__name:"LoginForm",emits:["submit","forgotPassword"],setup(t,{expose:e,emit:n}){const r=oe(""),s=oe(""),i=oe(""),o=oe(!1),a=n,l=()=>{if(i.value="",!r.value.trim()){i.value="Inserisci la tua email.";return}if(!s.value){i.value="Inserisci la password.";return}a("submit",{email:r.value.trim(),password:s.value})},u=()=>{i.value=""};return e({setError:h=>{i.value=h},setLoading:h=>{o.value=h},reset:()=>{r.value="",s.value="",i.value="",o.value=!1}}),(h,f)=>{const p=td,g=nd,v=rd;return fe(),be("form",{class:"auth-form",onSubmit:nl(l,["prevent"])},[de(p,{modelValue:r.value,"onUpdate:modelValue":f[0]||(f[0]=_=>r.value=_),type:"email",placeholder:"Email",autocomplete:"email",error:!!i.value&&i.value.includes("email"),onInput:u},null,8,["modelValue","error"]),de(p,{modelValue:s.value,"onUpdate:modelValue":f[1]||(f[1]=_=>s.value=_),type:"password",placeholder:"Password",autocomplete:"current-password",error:!!i.value&&i.value.includes("password"),onInput:u},null,8,["modelValue","error"]),de(g,{message:i.value,visible:!!i.value},null,8,["message","visible"]),de(v,{type:"submit",variant:"primary",loading:o.value},{default:tn(()=>[...f[3]||(f[3]=[Je(" ACCEDI ",-1)])]),_:1},8,["loading"]),de(v,{variant:"link",onClick:f[2]||(f[2]=_=>a("forgotPassword"))},{default:tn(()=>[...f[4]||(f[4]=[Je(" Password dimenticata? ",-1)])]),_:1})],32)}}}),KV=Object.assign(ln(zV,[["__scopeId","data-v-5927dcd2"]]),{__name:"AuthLoginForm"}),QV={class:"name-row"},YV=tt({__name:"RegisterForm",emits:["submit"],setup(t,{expose:e,emit:n}){const r=oe(""),s=oe(""),i=oe(""),o=oe(""),a=oe(""),l=oe(""),u=oe(""),h=oe(!1),f=n,p=()=>{if(u.value="",!r.value.trim()){u.value="Inserisci il tuo nome.";return}if(!s.value.trim()){u.value="Inserisci il tuo cognome.";return}if(!i.value.trim()){u.value="Scegli un nickname.";return}if(i.value.trim().length<3){u.value="Il nickname deve essere di almeno 3 caratteri.";return}if(!o.value.trim()){u.value="Inserisci la tua email.";return}if(!a.value){u.value="Inserisci una password.";return}if(a.value.length<6){u.value="La password deve essere di almeno 6 caratteri.";return}if(!l.value){u.value="Conferma la password.";return}if(a.value!==l.value){u.value="Le password non coincidono.";return}f("submit",{firstName:r.value.trim(),lastName:s.value.trim(),nickname:i.value.trim(),email:o.value.trim(),password:a.value})},g=()=>{u.value=""};return e({setError:v=>{u.value=v},setLoading:v=>{h.value=v},reset:()=>{r.value="",s.value="",i.value="",o.value="",a.value="",l.value="",u.value="",h.value=!1}}),(v,_)=>{const C=td,S=nd,R=rd;return fe(),be("form",{class:"auth-form",onSubmit:nl(p,["prevent"])},[B("div",QV,[de(C,{modelValue:r.value,"onUpdate:modelValue":_[0]||(_[0]=y=>r.value=y),type:"text",placeholder:"Nome",autocomplete:"given-name",onInput:g},null,8,["modelValue"]),de(C,{modelValue:s.value,"onUpdate:modelValue":_[1]||(_[1]=y=>s.value=y),type:"text",placeholder:"Cognome",autocomplete:"family-name",onInput:g},null,8,["modelValue"])]),de(C,{modelValue:i.value,"onUpdate:modelValue":_[2]||(_[2]=y=>i.value=y),type:"text",placeholder:"Nickname (visibile agli altri)",autocomplete:"username",maxlength:20,onInput:g},null,8,["modelValue"]),de(C,{modelValue:o.value,"onUpdate:modelValue":_[3]||(_[3]=y=>o.value=y),type:"email",placeholder:"Email",autocomplete:"email",onInput:g},null,8,["modelValue"]),de(C,{modelValue:a.value,"onUpdate:modelValue":_[4]||(_[4]=y=>a.value=y),type:"password",placeholder:"Password (min. 6 caratteri)",autocomplete:"new-password",onInput:g},null,8,["modelValue"]),de(C,{modelValue:l.value,"onUpdate:modelValue":_[5]||(_[5]=y=>l.value=y),type:"password",placeholder:"Conferma Password",autocomplete:"new-password",onInput:g},null,8,["modelValue"]),de(S,{message:u.value,visible:!!u.value},null,8,["message","visible"]),de(R,{type:"submit",variant:"primary",loading:h.value},{default:tn(()=>[..._[6]||(_[6]=[Je(" REGISTRATI ",-1)])]),_:1},8,["loading"])],32)}}}),JV=Object.assign(ln(YV,[["__scopeId","data-v-d0f96507"]]),{__name:"AuthRegisterForm"}),XV={class:"reset-form"},ZV={key:0,class:"reset-success"},ex=tt({__name:"ResetPasswordForm",emits:["submit","back"],setup(t,{expose:e,emit:n}){const r=oe(""),s=oe(""),i=oe(!1),o=oe(!1),a=n,l=()=>{if(s.value="",!r.value.trim()){s.value="Inserisci la tua email.";return}a("submit",r.value.trim())},u=()=>{s.value=""};return e({setError:h=>{s.value=h},setLoading:h=>{o.value=h},setSuccess:h=>{i.value=h},reset:()=>{r.value="",s.value="",i.value=!1,o.value=!1}}),(h,f)=>{const p=rd,g=td,v=nd;return fe(),be("div",XV,[i.value?(fe(),be("div",ZV,[f[4]||(f[4]=B("span",{class:"reset-success__icon"},"",-1)),f[5]||(f[5]=B("p",{class:"reset-success__text"}," Email inviata! Controlla la tua casella di posta (anche spam). ",-1)),de(p,{variant:"link",onClick:f[0]||(f[0]=_=>a("back"))},{default:tn(()=>[...f[3]||(f[3]=[Je("  Torna al login ",-1)])]),_:1})])):(fe(),be("form",{key:1,class:"auth-form",onSubmit:nl(l,["prevent"])},[f[8]||(f[8]=B("h3",{class:"reset-form__title"},"Recupera Password",-1)),f[9]||(f[9]=B("p",{class:"reset-form__description"},[Je(" Inserisci la tua email. Ti invieremo un link per reimpostare la password. "),B("br"),B("small",null,"Controlla anche la cartella spam.")],-1)),de(g,{modelValue:r.value,"onUpdate:modelValue":f[1]||(f[1]=_=>r.value=_),type:"email",placeholder:"Email",autocomplete:"email",onInput:u},null,8,["modelValue"]),de(v,{message:s.value,visible:!!s.value},null,8,["message","visible"]),de(p,{type:"submit",variant:"primary",loading:o.value},{default:tn(()=>[...f[6]||(f[6]=[Je(" INVIA LINK ",-1)])]),_:1},8,["loading"]),de(p,{variant:"link",onClick:f[2]||(f[2]=_=>a("back"))},{default:tn(()=>[...f[7]||(f[7]=[Je("  Torna al login ",-1)])]),_:1})],32))])}}}),tx=Object.assign(ln(ex,[["__scopeId","data-v-17ef1ec5"]]),{__name:"AuthResetPasswordForm"}),nx={class:"auth-overlay"},rx={class:"auth-card__body"},sx={key:0,class:"auth-nav"},ix={class:"auth-form-container"},ox=tt({__name:"AuthOverlay",emits:["login-success","register-success"],setup(t,{emit:e}){const n=oe("login"),r=oe("login"),s=oe(),i=oe(),o=oe(),{login:a,register:l}=Hi(),u=oe(!1),h=e,f=Ue(()=>{switch(r.value){case"register":return"form-height--register";case"reset":return"form-height--reset";default:return"form-height--login"}}),p=R=>{n.value=R,r.value=R},g=()=>{r.value="reset"},v=()=>{r.value="login",n.value="login",o.value?.reset()},_=async R=>{u.value=!0;const y=await a(R.email,R.password);u.value=!1,y.success?h("login-success",R.email):s.value?.setError(y.error)},C=async R=>{u.value=!0;const y=await l(R.email,R.password,R.nickname,R.firstName,R.lastName);u.value=!1,y.success?h("register-success",R.email):i.value?.setError(y.error)},S=R=>{console.log("[AUTH] Reset:",R),o.value?.setSuccess(!0)};return(R,y)=>{const O=KV,V=JV,L=tx;return fe(),be("div",nx,[y[4]||(y[4]=B("div",{class:"auth-overlay__ambient"},[B("div",{class:"ambient-glow ambient-glow--red"}),B("div",{class:"ambient-glow ambient-glow--gold"})],-1)),B("div",{class:Wt(["auth-card",f.value])},[y[3]||(y[3]=B("div",{class:"auth-card__glow"},null,-1)),B("div",rx,[y[2]||(y[2]=B("header",{class:"auth-header"},[B("div",{class:"brand"},[B("span",{class:"brand__badge"},"ACC"),B("span",{class:"brand__name"},"TELEMETRY")])],-1)),r.value!=="reset"?(fe(),be("nav",sx,[B("button",{class:Wt(["auth-nav__item",{"is-active":n.value==="login"}]),onClick:y[0]||(y[0]=b=>p("login"))}," Login ",2),B("button",{class:Wt(["auth-nav__item",{"is-active":n.value==="register"}]),onClick:y[1]||(y[1]=b=>p("register"))}," Registrati ",2)])):Gr("",!0),B("div",ix,[de(ra,{name:"liquid",mode:"out-in"},{default:tn(()=>[r.value==="login"?(fe(),Ht(O,{key:"login",ref_key:"loginFormRef",ref:s,onSubmit:_,onForgotPassword:g},null,512)):r.value==="register"?(fe(),Ht(V,{key:"register",ref_key:"registerFormRef",ref:i,onSubmit:C},null,512)):(fe(),Ht(L,{key:"reset",ref_key:"resetFormRef",ref:o,onSubmit:S,onBack:v},null,512))]),_:1})])])],2)])}}}),ax=Object.assign(ln(ox,[["__scopeId","data-v-e0e84998"]]),{__name:"AuthOverlay"}),cx={class:"email-verification"},lx={class:"verify-email"},ux={key:0,class:"error-message"},hx={key:1,class:"error-message resend-error"},fx=["disabled"],dx=["disabled"],px=tt({__name:"RegistrationSuccess",props:{email:{},requireEmailVerification:{type:Boolean}},emits:["goToDashboard","resendEmail"],setup(t,{emit:e}){const n=e,{checkEmailVerified:r,resendVerificationEmail:s}=Hi(),i=oe(!1),o=oe(!1),a=oe(null),l=oe(!1),u=oe(!1),h=async()=>{i.value=!0,a.value=null,u.value=!1;const p=await s();i.value=!1,p.success?(o.value=!0,setTimeout(()=>o.value=!1,3e3)):a.value=p.error||"Errore invio email",n("resendEmail")},f=async()=>{l.value=!0,u.value=!1;const p=await r();l.value=!1,p.verified?n("goToDashboard"):u.value=!0};return(p,g)=>(fe(),be("div",cx,[g[2]||(g[2]=B("div",{class:"verify-icon"},"",-1)),g[3]||(g[3]=B("h2",{class:"verify-title"},"Verifica la tua email",-1)),B("p",lx,qr(t.email),1),g[4]||(g[4]=B("div",{class:"verify-box"},[B("p",{class:"verify-text"},"Clicca il link nell'email per attivare l'account."),B("p",{class:"verify-hint"},"Controlla anche Spam")],-1)),u.value?(fe(),be("div",ux," Email non verificata ")):Gr("",!0),a.value?(fe(),be("div",hx,qr(a.value),1)):Gr("",!0),B("button",{class:Wt(["verify-btn",{"verify-btn--loading":l.value}]),disabled:l.value,onClick:f},[l.value?(fe(),be(Ge,{key:0},[g[0]||(g[0]=B("span",{class:"spinner"},null,-1)),g[1]||(g[1]=Je(" Controllo... ",-1))],64)):(fe(),be(Ge,{key:1},[Je(" Ho confermato l'email ")],64))],10,fx),B("button",{class:"resend-btn",disabled:i.value||o.value,onClick:h},[i.value?(fe(),be(Ge,{key:0},[Je("Invio in corso...")],64)):o.value?(fe(),be(Ge,{key:1},[Je(" Email inviata")],64)):(fe(),be(Ge,{key:2},[Je("Rinvia email di verifica")],64))],8,dx)]))}}),mx=Object.assign(ln(px,[["__scopeId","data-v-f958603b"]]),{__name:"AuthRegistrationSuccess"}),Bw=(t="RouteProvider")=>tt({name:t,props:{route:{type:Object,required:!0},vnode:Object,vnodeRef:Object,renderKey:String,trackRootNodes:Boolean},setup(e){const n=e.renderKey,r=e.route,s={};for(const i in e.route)Object.defineProperty(s,i,{get:()=>n===e.renderKey?e.route[i]:r[i],enumerable:!0});return Zn(Ss,Nn(s)),()=>e.vnode?Xe(e.vnode,{ref:e.vnodeRef}):e.vnode}}),gx=Bw(),Kg=new WeakMap,_x=tt({name:"NuxtPage",inheritAttrs:!1,props:{name:{type:String},transition:{type:[Boolean,Object],default:void 0},keepalive:{type:[Boolean,Object],default:void 0},route:{type:Object},pageKey:{type:[Function,String],default:null}},setup(t,{attrs:e,slots:n,expose:r}){const s=et(),i=oe(),o=Rt(Ss,null);let a;r({pageRef:i});const l=Rt(xy,null);let u;const h=s.deferHydration();if(s.isHydrating){const p=s.hooks.hookOnce("app:error",h);Gt().beforeEach(p)}t.pageKey&&er(()=>t.pageKey,(p,g)=>{p!==g&&s.callHook("page:loading:start")});let f=!1;{const p=Gt().beforeResolve(()=>{f=!1});ta(()=>{p()})}return()=>Xe(sv,{name:t.name,route:t.route,...e},{default:p=>{const g=vx(o,p.route,p.Component),v=o&&o.matched.length===p.route.matched.length;if(!p.Component){if(u&&!v)return u;h();return}if(u&&l&&!l.isCurrent(p.route))return u;if(g&&o&&(!l||l?.isCurrent(o)))return v?u:null;const _=eh(p,t.pageKey),C=Ex(o,p.route,p.Component);!s.isHydrating&&a===_&&!C&&As(()=>{f=!0,s.callHook("page:loading:end")}),a=_;const S=!!(t.transition??p.route.meta.pageTransition??Mp),R=S&&yx([t.transition,p.route.meta.pageTransition,Mp,{onAfterLeave(){delete s._runningTransition,s.callHook("page:transition:finish",p.Component)}}]),y=t.keepalive??p.route.meta.keepalive??JA;return u=ov(S&&R,vS(y,Xe(Jh,{suspensible:!0,onPending:()=>{S&&(s._runningTransition=!0),s.callHook("page:start",p.Component)},onResolve:async()=>{await As();try{s._route.sync?.(),await s.callHook("page:finish",p.Component),delete s._runningTransition,!f&&!C&&(f=!0,await s.callHook("page:loading:end"))}finally{h()}}},{default:()=>{const O={key:_||void 0,vnode:n.default?wx(n.default,p):p.Component,route:p.route,renderKey:_||void 0,trackRootNodes:S,vnodeRef:i};if(!y)return Xe(gx,O);const V=p.Component.type,L=V;let b=Kg.get(L);return b||(b=Bw(V.name||V.__name),Kg.set(L,b)),Xe(b,O)}}))).default(),u}})}});function yx(t){const e=[];for(const n of t)n&&e.push({...n,onAfterLeave:n.onAfterLeave?uf(n.onAfterLeave):void 0});return Dy(...e)}function vx(t,e,n){if(!t)return!1;const r=e.matched.findIndex(s=>s.components?.default===n?.type);return!r||r===-1?!1:e.matched.slice(0,r).some((s,i)=>s.components?.default!==t.matched[i]?.components?.default)||n&&eh({route:e,Component:n})!==eh({route:t,Component:n})}function Ex(t,e,n){return t?e.matched.findIndex(s=>s.components?.default===n?.type)<e.matched.length-1:!1}function wx(t,e){const n=t(e);return n.length===1?Xe(n[0]):Xe(Ge,void 0,n)}const Tx=tt({name:"LayoutLoader",inheritAttrs:!1,props:{name:String,layoutProps:Object},setup(t,e){return()=>Xe(xr[t.name],t.layoutProps,e.slots)}}),Ix={name:{type:[String,Boolean,Object],default:null},fallback:{type:[String,Object],default:null}},bx=tt({name:"NuxtLayout",inheritAttrs:!1,props:Ix,setup(t,e){const n=et(),r=Rt(Ss),i=!r||r===sa()?iv():r,o=Ue(()=>{let h=Me(t.name)??i?.meta.layout??"default";return h&&!(h in xr)&&t.fallback&&(h=Me(t.fallback)),h}),a=cr();e.expose({layoutRef:a});const l=n.deferHydration();if(n.isHydrating){const h=n.hooks.hookOnce("app:error",l);Gt().beforeEach(h)}let u;return()=>{const h=o.value&&o.value in xr,f=i?.meta.layoutTransition??YA,p=u;return u=o.value,ov(h&&f,{default:()=>Xe(Jh,{suspensible:!0,onResolve:()=>{As(l)}},{default:()=>Xe(Ax,{layoutProps:hy(e.attrs,{ref:a}),key:o.value||void 0,name:o.value,shouldProvide:!t.name,isRenderingNewLayout:g=>g!==p&&g===o.value,hasTransition:!!f},e.slots)})}).default()}}}),Ax=tt({name:"NuxtLayoutProvider",inheritAttrs:!1,props:{name:{type:[String,Boolean]},layoutProps:{type:Object},hasTransition:{type:Boolean},shouldProvide:{type:Boolean},isRenderingNewLayout:{type:Function,required:!0}},setup(t,e){const n=t.name;t.shouldProvide&&Zn(xy,{isCurrent:i=>n===(i.meta.layout??"default")});const r=Rt(Ss);if(r&&r===sa()){const i=iv(),o={};for(const a in i){const l=a;Object.defineProperty(o,l,{enumerable:!0,get:()=>t.isRenderingNewLayout(t.name)?i[l]:r[l]})}Zn(Ss,Nn(o))}return()=>!n||typeof n=="string"&&!(n in xr)?e.slots.default?.():Xe(Tx,{key:n,layoutProps:t.layoutProps,name:n},e.slots)}}),Rx={class:"user-dropdown"},Sx={class:"user-name"},Cx={key:0,class:"dropdown-menu"},Px=tt({__name:"UserDropdown",props:{userName:{}},emits:["logout","goToProfile"],setup(t,{emit:e}){const n=e,r=oe(!1),s=()=>{r.value=!r.value},i=()=>{r.value=!1},o=()=>{i(),n("goToProfile")},a=()=>{n("logout"),i()};return(l,u)=>{const h=RI("click-outside");return co((fe(),be("div",Rx,[B("button",{class:"dropdown-trigger",onClick:s},[B("span",Sx,qr(t.userName),1),(fe(),be("svg",{class:Wt(["arrow-icon",{"arrow-icon--open":r.value}]),width:"12",height:"12",viewBox:"0 0 12 12",fill:"none"},[...u[0]||(u[0]=[B("path",{d:"M3 4.5L6 7.5L9 4.5",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)])],2))]),de(ra,{name:"dropdown"},{default:tn(()=>[r.value?(fe(),be("div",Cx,[B("button",{class:"dropdown-item",onClick:o},[...u[1]||(u[1]=[B("svg",{class:"item-icon",width:"16",height:"16",viewBox:"0 0 16 16",fill:"none"},[B("circle",{cx:"8",cy:"5",r:"3",stroke:"currentColor","stroke-width":"1.5"}),B("path",{d:"M2 14c0-3 2.5-5 6-5s6 2 6 5",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round"})],-1),Je(" Profilo ",-1)])]),u[3]||(u[3]=B("button",{class:"dropdown-item dropdown-item--disabled",disabled:""},[B("svg",{class:"item-icon",width:"16",height:"16",viewBox:"0 0 16 16",fill:"none"},[B("circle",{cx:"8",cy:"8",r:"6",stroke:"currentColor","stroke-width":"1.5"}),B("path",{d:"M8 5v3l2 2",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round"})]),Je(" Impostazioni ")],-1)),u[4]||(u[4]=B("div",{class:"dropdown-divider"},null,-1)),B("button",{class:"dropdown-item dropdown-item--danger",onClick:a},[...u[2]||(u[2]=[B("svg",{class:"item-icon",width:"16",height:"16",viewBox:"0 0 16 16",fill:"none"},[B("path",{d:"M6 2H4a2 2 0 00-2 2v8a2 2 0 002 2h2M11 11l3-3-3-3M14 8H6",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"})],-1),Je(" Logout ",-1)])])])):Gr("",!0)]),_:1})])),[[h,i]])}}}),kx=Object.assign(ln(Px,[["__scopeId","data-v-a926000c"]]),{__name:"UiUserDropdown"}),Nx={class:"profile-page"},Ox={class:"profile-header"},Dx={class:"header-inner"},Vx={class:"header-right"},xx={class:"profile-main"},Mx={class:"profile-container"},Lx={class:"profile-grid"},Ux={class:"profile-sidebar"},Fx={class:"user-info"},Bx={class:"user-nickname"},$x={class:"user-email"},Hx={class:"profile-content"},jx={class:"profile-card"},qx={class:"equipment-form"},Wx={class:"form-group"},Gx={class:"form-group"},zx={class:"form-group"},Kx={class:"form-group"},Qx=["disabled"],Yx=tt({__name:"ProfilePage",props:{userEmail:{},userNickname:{}},emits:["logout","back"],setup(t,{emit:e}){const n=t,r=e,{currentUser:s,getUserProfile:i}=Hi(),o=Ue(()=>n.userNickname?n.userNickname:n.userEmail?n.userEmail.split("@")[0]??"Utente":"Utente"),a=oe({volante:"",corona:"",pedaliera:"",struttura:""}),l=oe(!1),u=oe(!1);Wr(async()=>{if(s.value){const v=await i(s.value.uid);v?.equipment&&(a.value={...a.value,...v.equipment})}});const h=async()=>{if(s.value){l.value=!0;try{const{doc:v,updateDoc:_}=await _t(async()=>{const{doc:S,updateDoc:R}=await Promise.resolve().then(()=>IV);return{doc:S,updateDoc:R}},void 0,import.meta.url),{db:C}=await _t(async()=>{const{db:S}=await Promise.resolve().then(()=>SV);return{db:S}},void 0,import.meta.url);await _(v(C,"users",s.value.uid),{equipment:a.value}),u.value=!0,setTimeout(()=>u.value=!1,2e3)}catch(v){console.error("[PROFILE] Save error:",v)}finally{l.value=!1}}},f=()=>r("logout"),p=()=>{},g=()=>{r("back")};return(v,_)=>{const C=kx;return fe(),be("div",Nx,[B("header",Ox,[B("div",Dx,[B("div",{class:"header-left"},[B("button",{class:"back-btn",onClick:g},[..._[4]||(_[4]=[B("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none"},[B("path",{d:"M12 4L6 10L12 16",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1),Je(" Dashboard ",-1)])])]),_[5]||(_[5]=B("div",{class:"header-brand"},[B("span",{class:"brand-badge"},"ACC"),B("span",{class:"brand-name"},"TELEMETRY")],-1)),B("div",Vx,[de(C,{"user-name":o.value,onLogout:f,onGoToProfile:p},null,8,["user-name"])])])]),B("main",xx,[B("div",Mx,[_[12]||(_[12]=B("h1",{class:"page-title"},"Profilo Pilota",-1)),B("div",Lx,[B("div",Ux,[_[6]||(_[6]=uy('<div class="avatar-container" data-v-e186b73a><svg class="avatar-helmet" viewBox="0 0 100 100" fill="none" data-v-e186b73a><defs data-v-e186b73a><linearGradient id="helmetGrad" x1="0%" y1="0%" x2="100%" y2="100%" data-v-e186b73a><stop offset="0%" stop-color="#e10600" data-v-e186b73a></stop><stop offset="100%" stop-color="#ff6b00" data-v-e186b73a></stop></linearGradient></defs><path d="M50 10C30 10 15 25 15 45V60C15 75 25 85 40 88L45 90H55L60 88C75 85 85 75 85 60V45C85 25 70 10 50 10Z" stroke="url(#helmetGrad)" stroke-width="3" fill="none" data-v-e186b73a></path><path d="M20 45H80C80 45 78 55 50 55C22 55 20 45 20 45Z" stroke="url(#helmetGrad)" stroke-width="2" fill="rgba(225,6,0,0.1)" data-v-e186b73a></path><line x1="50" y1="15" x2="50" y2="85" stroke="url(#helmetGrad)" stroke-width="1.5" data-v-e186b73a></line></svg></div>',1)),B("div",Fx,[B("h2",Bx,qr(o.value),1),B("p",$x,qr(t.userEmail),1)])]),B("div",Hx,[B("div",jx,[_[11]||(_[11]=B("h3",{class:"card-title"},[B("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none"},[B("circle",{cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"2"}),B("circle",{cx:"12",cy:"12",r:"4",stroke:"currentColor","stroke-width":"2"})]),Je(" Attrezzatura Sim Racing ")],-1)),B("div",qx,[B("div",Wx,[_[7]||(_[7]=B("label",{class:"form-label"},"Volante / Base",-1)),co(B("input",{"onUpdate:modelValue":_[0]||(_[0]=S=>a.value.volante=S),type:"text",class:"form-input",placeholder:"Es. Fanatec CSL DD 8Nm"},null,512),[[Ua,a.value.volante]])]),B("div",Gx,[_[8]||(_[8]=B("label",{class:"form-label"},"Corona / Rim",-1)),co(B("input",{"onUpdate:modelValue":_[1]||(_[1]=S=>a.value.corona=S),type:"text",class:"form-input",placeholder:"Es. ClubSport Formula V2"},null,512),[[Ua,a.value.corona]])]),B("div",zx,[_[9]||(_[9]=B("label",{class:"form-label"},"Pedaliera",-1)),co(B("input",{"onUpdate:modelValue":_[2]||(_[2]=S=>a.value.pedaliera=S),type:"text",class:"form-input",placeholder:"Es. CSL Pedals + Load Cell"},null,512),[[Ua,a.value.pedaliera]])]),B("div",Kx,[_[10]||(_[10]=B("label",{class:"form-label"},"Struttura / Rig",-1)),co(B("input",{"onUpdate:modelValue":_[3]||(_[3]=S=>a.value.struttura=S),type:"text",class:"form-input",placeholder:"Es. Next Level Racing 2.0"},null,512),[[Ua,a.value.struttura]])]),B("button",{class:Wt(["save-btn",{"save-btn--success":u.value}]),disabled:l.value,onClick:h},[l.value?(fe(),be(Ge,{key:0},[Je("Salvataggio...")],64)):u.value?(fe(),be(Ge,{key:1},[Je(" Salvato")],64)):(fe(),be(Ge,{key:2},[Je("Salva Modifiche")],64))],10,Qx)])])])])])])])}}}),Jx=Object.assign(ln(Yx,[["__scopeId","data-v-e186b73a"]]),{__name:"ProfilePage"}),Xx=MV(BV),Zx={id:"app"},eM={key:"initializing",class:"initializing-screen"},tM={key:"register-success",class:"auth-wrapper"},nM={class:"auth-card-standalone"},rM={key:"loading",class:"loading-screen"},sM={key:"dashboard",class:"dashboard-wrapper"},iM={key:"profile",class:"profile-wrapper"},oM="dissolve-fade-zoom",aM=tt({__name:"app",setup(t){sa();const e=Gt();Wr(()=>{const S=sessionStorage.getItem("spa-redirect-path");S&&(sessionStorage.removeItem("spa-redirect-path"),setTimeout(()=>{e.push(S)},100))});const{currentUser:n,isLoading:r,logout:s}=Hi(),i=oe("initializing"),o=oe("login"),a=oe(""),l=oe(!1),u=oe(!1);er(r,S=>{!S&&!l.value&&(l.value=!0,n.value?(a.value=n.value.email||"",u.value&&!n.value.emailVerified?(i.value="auth",o.value="register-success"):i.value="dashboard"):i.value="auth")},{immediate:!0}),er(n,(S,R)=>{l.value&&(S?(a.value=S.email||"",u.value&&!S.emailVerified?(i.value!=="auth"||o.value!=="register-success")&&(i.value="auth",o.value="register-success"):i.value==="auth"&&o.value!=="register-success"&&(i.value="loading",setTimeout(()=>{i.value="dashboard"},1e3))):R&&(i.value="auth",o.value="login"))});const h=S=>{if(a.value=S,u.value&&n.value&&!n.value.emailVerified){o.value="register-success";return}i.value="loading",setTimeout(()=>{i.value="dashboard",e.push("/panoramica")},1500)},f=S=>{a.value=S,u.value?o.value="register-success":(i.value="loading",setTimeout(()=>{i.value="dashboard",e.push("/panoramica")},1500))},p=()=>{i.value="loading",setTimeout(()=>{i.value="dashboard",e.push("/panoramica")},1500)},g=()=>{console.log("[AUTH] Resending verification email to:",a.value)},v=async()=>{await s(),a.value="",o.value="login",i.value="auth"},_=()=>{i.value="profile"},C=()=>{i.value="dashboard"};return Zn("goToProfile",_),(S,R)=>{const y=xV,O=Xx,V=ax,L=mx,b=_x,w=bx,E=Jx;return fe(),be("div",Zx,[de(y),de(O),de(ra,{name:oM,mode:"out-in"},{default:tn(()=>[i.value==="initializing"?(fe(),be("div",eM,[...R[0]||(R[0]=[B("div",{class:"initializing-content"},[B("div",{class:"initializing-spinner"})],-1)])])):i.value==="auth"&&o.value!=="register-success"?(fe(),Ht(V,{key:"auth",onLoginSuccess:h,onRegisterSuccess:f})):i.value==="auth"&&o.value==="register-success"?(fe(),be("div",tM,[B("div",nM,[de(L,{email:a.value,"require-email-verification":u.value,onGoToDashboard:p,onResendEmail:g},null,8,["email","require-email-verification"])])])):i.value==="loading"?(fe(),be("div",rM,[...R[1]||(R[1]=[B("div",{class:"loading-content"},[B("div",{class:"loading-spinner"}),B("p",{class:"loading-text"},"Caricamento Dashboard...")],-1)])])):i.value==="dashboard"?(fe(),be("div",sM,[de(w,null,{default:tn(()=>[de(b)]),_:1})])):i.value==="profile"?(fe(),be("div",iM,[de(E,{onBack:C,onLogout:v})])):Gr("",!0)]),_:1})])}}}),cM={__name:"nuxt-error-page",props:{error:Object},setup(t){const n=t.error,r=Number(n.statusCode||500),s=r===404,i=n.statusMessage??(s?"Page Not Found":"Internal Server Error"),o=n.message||n.toString(),a=void 0,h=s?dc(()=>_t(()=>import("./D8b97SsP.js"),__vite__mapDeps([36,5,37]),import.meta.url)):dc(()=>_t(()=>import("./ECnbCeBx.js"),__vite__mapDeps([38,39]),import.meta.url));return(f,p)=>(fe(),Ht(Me(h),yT(ly({statusCode:Me(r),statusMessage:Me(i),description:Me(o),stack:Me(a)})),null,16))}},lM={key:0},Qg={__name:"nuxt-root",setup(t){const e=()=>null,n=et(),r=n.deferHydration();if(n.isHydrating){const u=n.hooks.hookOnce("app:error",r);Gt().beforeEach(u)}const s=!1;Zn(Ss,sa()),n.hooks.callHookWith(u=>u.map(h=>h()),"vue:setup");const i=sl(),o=!1,a=/bot\b|chrome-lighthouse|facebookexternalhit|google\b/i;U_((u,h,f)=>{if(n.hooks.callHook("vue:error",u,h,f).catch(p=>console.error("[nuxt] Error in `vue:error` hook",p)),a.test(navigator.userAgent))return n.hooks.callHook("app:error",u),console.error(`[nuxt] Not rendering error page for bot with user agent \`${navigator.userAgent}\`:`,u),!1;if(Ly(u)&&(u.fatal||u.unhandled))return n.runWithContext(()=>ms(u)),!1});const l=!1;return(u,h)=>(fe(),Ht(Jh,{onResolve:Me(r)},{default:tn(()=>[Me(o)?(fe(),be("div",lM)):Me(i)?(fe(),Ht(Me(cM),{key:1,error:Me(i)},null,8,["error"])):Me(l)?(fe(),Ht(Me(e),{key:2,context:Me(l)},null,8,["context"])):Me(s)?(fe(),Ht(AI(Me(s)),{key:3})):(fe(),Ht(Me(aM),{key:4}))]),_:1},8,["onResolve"]))}};let Yg;{let t;Yg=async function(){if(t)return t;const n=!!(window.__NUXT__?.serverRendered??document.getElementById("__NUXT_DATA__")?.dataset.ssr==="true"),r=n?qb(Qg):jb(Qg),s=tR({vueApp:r});async function i(o){await s.callHook("app:error",o),s.payload.error||=Is(o)}r.config.errorHandler=i,s.hook("app:suspense:resolve",()=>{r.config.errorHandler===i&&(r.config.errorHandler=void 0)}),!n&&Lp.id&&s.hook("app:suspense:resolve",()=>{document.getElementById(Lp.id)?.remove()});try{await sR(s,rC)}catch(o){i(o)}try{await s.hooks.callHook("app:created",r),await s.hooks.callHook("app:beforeMount",r),r.mount(XA),await s.hooks.callHook("app:mounted",r),await As()}catch(o){i(o)}return r},t=Yg().catch(e=>{throw console.error("Error while mounting app:",e),e})}export{CV as $,mM as A,yM as B,be as C,fe as D,B as E,qr as F,de as G,tn as H,Je as I,Ht as J,Me as K,Jx as L,sa as M,Gr as N,Ge as O,hM as P,Xn as Q,Xt as R,mi as S,Nh as T,$c as U,No as V,Fw as W,Qo as X,Kc as Y,Wt as Z,ln as _,Hi as a,bM as a0,TM as a1,wM as a2,IM as a3,co as a4,dM as a5,Ua as a6,uy as a7,Ph as a8,yV as a9,SM as aa,kx as ab,SI as ac,db as ad,L_ as ae,ke as af,As as ag,Yc as ah,Rt as ai,Zn as aj,nl as ak,ra as al,RM as am,fM as an,AM as ao,tt as b,Gt as c,gM as d,ui as e,et as f,hf as g,ta as h,Xe as i,uM as j,pR as k,ZS as l,Ue as m,_M as n,Wr as o,Ey as p,Ls as q,oe as r,cr as s,ef as t,rl as u,gA as v,er as w,wc as x,pm as y,vM as z};
