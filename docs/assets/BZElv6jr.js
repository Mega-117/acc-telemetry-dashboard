const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./Ci7UodE8.js","./index.Du2RZnax.css","./hAf1NoBB.js","./_...BBgSxync.css","./B-9puQ2k.js","./DxN0rXxE.js","./dev-upload.CAfU5vij.css","./T15pg3hI.js","./DRjxa58n.js","./B8eVOSqV.js","./PageContainer.DMW25oBZ.css","./CUyUvbYw.js","./BhhFScsI.js","./PanoramicaPage.i9JPIuPs.css","./BmN6WGVX.js","./CdtmOy0Z.js","./B2Vr-QoL.js","./PaginationControls.CNLm8WGw.css","./VLSqd9l6.js","./TrackDetailPage.urSrkZ7K.css","./BRJnN6Cr.js","./dev-cleanup.DSSvWY_E.css","./DRMOub1B.js","./DJroEmaY.js","./SessionDetailPage.peqHGhhN.css","./DoABhFDn.js","./SessioniPage.BxYhrgzv.css","./DsbfW986.js","./PistePage.CNmJAgPo.css","./_id_.D9laFF8O.css","./pxfwJOWd.js","./DiVuGCuu.js","./index.Dzufv81H.css","./OMGJkeww.js","./VbJklEK-.js","./dev-data-audit.5t95g-Ny.css","./BQ32EAEH.js","./BpmooI1H.js","./coach.Fr5SOs7k.css","./Cj-uBS3z.js","./dashboard.jH60z8Xe.css","./Bz2WExuP.js","./error-404.BLrjNXsr.css","./DZR-v4-X.js","./error-500.DLkAwcfL.css"])))=>i.map(i=>d[i]);
(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function n(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(r){if(r.ep)return;r.ep=!0;const i=n(r);fetch(r.href,i)}})();function Kh(t){const e=Object.create(null);for(const n of t.split(","))e[n]=1;return n=>n in e}const Ye={},ai=[],Mn=()=>{},T_=()=>!1,ra=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),Qh=t=>t.startsWith("onUpdate:"),Ct=Object.assign,Yh=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},Bw=Object.prototype.hasOwnProperty,je=(t,e)=>Bw.call(t,e),ve=Array.isArray,ci=t=>Mi(t)==="[object Map]",Li=t=>Mi(t)==="[object Set]",op=t=>Mi(t)==="[object Date]",$w=t=>Mi(t)==="[object RegExp]",Ie=t=>typeof t=="function",nt=t=>typeof t=="string",bn=t=>typeof t=="symbol",We=t=>t!==null&&typeof t=="object",Jh=t=>(We(t)||Ie(t))&&Ie(t.then)&&Ie(t.catch),w_=Object.prototype.toString,Mi=t=>w_.call(t),Hw=t=>Mi(t).slice(8,-1),b_=t=>Mi(t)==="[object Object]",tl=t=>nt(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,li=Kh(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),nl=t=>{const e=Object.create(null);return(n=>e[n]||(e[n]=t(n)))},jw=/-\w/g,pn=nl(t=>t.replace(jw,e=>e.slice(1).toUpperCase())),qw=/\B([A-Z])/g,rr=nl(t=>t.replace(qw,"-$1").toLowerCase()),sl=nl(t=>t.charAt(0).toUpperCase()+t.slice(1)),ru=nl(t=>t?`on${sl(t)}`:""),js=(t,e)=>!Object.is(t,e),ui=(t,...e)=>{for(let n=0;n<t.length;n++)t[n](...e)},I_=(t,e,n,s=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:s,value:n})},rl=t=>{const e=parseFloat(t);return isNaN(e)?t:e},A_=t=>{const e=nt(t)?Number(t):NaN;return isNaN(e)?t:e};let ap;const il=()=>ap||(ap=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function ol(t){if(ve(t)){const e={};for(let n=0;n<t.length;n++){const s=t[n],r=nt(s)?Kw(s):ol(s);if(r)for(const i in r)e[i]=r[i]}return e}else if(nt(t)||We(t))return t}const Gw=/;(?![^(]*\))/g,Ww=/:([^]+)/,zw=/\/\*[^]*?\*\//g;function Kw(t){const e={};return t.replace(zw,"").split(Gw).forEach(n=>{if(n){const s=n.split(Ww);s.length>1&&(e[s[0].trim()]=s[1].trim())}}),e}function Ot(t){let e="";if(nt(t))e=t;else if(ve(t))for(let n=0;n<t.length;n++){const s=Ot(t[n]);s&&(e+=s+" ")}else if(We(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}function Qw(t){if(!t)return null;let{class:e,style:n}=t;return e&&!nt(e)&&(t.class=Ot(e)),n&&(t.style=ol(n)),t}const Yw="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Jw=Kh(Yw);function R_(t){return!!t||t===""}function Xw(t,e){if(t.length!==e.length)return!1;let n=!0;for(let s=0;n&&s<t.length;s++)n=ia(t[s],e[s]);return n}function ia(t,e){if(t===e)return!0;let n=op(t),s=op(e);if(n||s)return n&&s?t.getTime()===e.getTime():!1;if(n=bn(t),s=bn(e),n||s)return t===e;if(n=ve(t),s=ve(e),n||s)return n&&s?Xw(t,e):!1;if(n=We(t),s=We(e),n||s){if(!n||!s)return!1;const r=Object.keys(t).length,i=Object.keys(e).length;if(r!==i)return!1;for(const o in t){const a=t.hasOwnProperty(o),l=e.hasOwnProperty(o);if(a&&!l||!a&&l||!ia(t[o],e[o]))return!1}}return String(t)===String(e)}function Xh(t,e){return t.findIndex(n=>ia(n,e))}const S_=t=>!!(t&&t.__v_isRef===!0),_n=t=>nt(t)?t:t==null?"":ve(t)||We(t)&&(t.toString===w_||!Ie(t.toString))?S_(t)?_n(t.value):JSON.stringify(t,C_,2):String(t),C_=(t,e)=>S_(e)?C_(t,e.value):ci(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[s,r],i)=>(n[iu(s,i)+" =>"]=r,n),{})}:Li(e)?{[`Set(${e.size})`]:[...e.values()].map(n=>iu(n))}:bn(e)?iu(e):We(e)&&!ve(e)&&!b_(e)?String(e):e,iu=(t,e="")=>{var n;return bn(t)?`Symbol(${(n=t.description)!=null?n:e})`:t};let xt;class P_{constructor(e=!1){this.detached=e,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=xt,!e&&xt&&(this.index=(xt.scopes||(xt.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].pause();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].resume();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].resume()}}run(e){if(this._active){const n=xt;try{return xt=this,e()}finally{xt=n}}}on(){++this._on===1&&(this.prevScope=xt,xt=this)}off(){this._on>0&&--this._on===0&&(xt=this.prevScope,this.prevScope=void 0)}stop(e){if(this._active){this._active=!1;let n,s;for(n=0,s=this.effects.length;n<s;n++)this.effects[n].stop();for(this.effects.length=0,n=0,s=this.cleanups.length;n<s;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,s=this.scopes.length;n<s;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const r=this.parent.scopes.pop();r&&r!==this&&(this.parent.scopes[this.index]=r,r.index=this.index)}this.parent=void 0}}}function Zw(t){return new P_(t)}function Zh(){return xt}function eb(t,e=!1){xt&&xt.cleanups.push(t)}let Je;const ou=new WeakSet;class k_{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,xt&&xt.active&&xt.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,ou.has(this)&&(ou.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||D_(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,cp(this),O_(this);const e=Je,n=En;Je=this,En=!0;try{return this.fn()}finally{V_(this),Je=e,En=n,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)nf(e);this.deps=this.depsTail=void 0,cp(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?ou.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){ju(this)&&this.run()}get dirty(){return ju(this)}}let N_=0,bo,Io;function D_(t,e=!1){if(t.flags|=8,e){t.next=Io,Io=t;return}t.next=bo,bo=t}function ef(){N_++}function tf(){if(--N_>0)return;if(Io){let e=Io;for(Io=void 0;e;){const n=e.next;e.next=void 0,e.flags&=-9,e=n}}let t;for(;bo;){let e=bo;for(bo=void 0;e;){const n=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(s){t||(t=s)}e=n}}if(t)throw t}function O_(t){for(let e=t.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function V_(t){let e,n=t.depsTail,s=n;for(;s;){const r=s.prevDep;s.version===-1?(s===n&&(n=r),nf(s),tb(s)):e=s,s.dep.activeLink=s.prevActiveLink,s.prevActiveLink=void 0,s=r}t.deps=e,t.depsTail=n}function ju(t){for(let e=t.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(L_(e.dep.computed)||e.dep.version!==e.version))return!0;return!!t._dirty}function L_(t){if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===Bo)||(t.globalVersion=Bo,!t.isSSR&&t.flags&128&&(!t.deps&&!t._dirty||!ju(t))))return;t.flags|=2;const e=t.dep,n=Je,s=En;Je=t,En=!0;try{O_(t);const r=t.fn(t._value);(e.version===0||js(r,t._value))&&(t.flags|=128,t._value=r,e.version++)}catch(r){throw e.version++,r}finally{Je=n,En=s,V_(t),t.flags&=-3}}function nf(t,e=!1){const{dep:n,prevSub:s,nextSub:r}=t;if(s&&(s.nextSub=r,t.prevSub=void 0),r&&(r.prevSub=s,t.nextSub=void 0),n.subs===t&&(n.subs=s,!s&&n.computed)){n.computed.flags&=-5;for(let i=n.computed.deps;i;i=i.nextDep)nf(i,!0)}!e&&!--n.sc&&n.map&&n.map.delete(n.key)}function tb(t){const{prevDep:e,nextDep:n}=t;e&&(e.nextDep=n,t.prevDep=void 0),n&&(n.prevDep=e,t.nextDep=void 0)}let En=!0;const M_=[];function cs(){M_.push(En),En=!1}function ls(){const t=M_.pop();En=t===void 0?!0:t}function cp(t){const{cleanup:e}=t;if(t.cleanup=void 0,e){const n=Je;Je=void 0;try{e()}finally{Je=n}}}let Bo=0;class nb{constructor(e,n){this.sub=e,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class sf{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(e){if(!Je||!En||Je===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==Je)n=this.activeLink=new nb(Je,this),Je.deps?(n.prevDep=Je.depsTail,Je.depsTail.nextDep=n,Je.depsTail=n):Je.deps=Je.depsTail=n,x_(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const s=n.nextDep;s.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=s),n.prevDep=Je.depsTail,n.nextDep=void 0,Je.depsTail.nextDep=n,Je.depsTail=n,Je.deps===n&&(Je.deps=s)}return n}trigger(e){this.version++,Bo++,this.notify(e)}notify(e){ef();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{tf()}}}function x_(t){if(t.dep.sc++,t.sub.flags&4){const e=t.dep.computed;if(e&&!t.dep.subs){e.flags|=20;for(let s=e.deps;s;s=s.nextDep)x_(s)}const n=t.dep.subs;n!==t&&(t.prevSub=n,n&&(n.nextSub=t)),t.dep.subs=t}}const vc=new WeakMap,Sr=Symbol(""),qu=Symbol(""),$o=Symbol("");function Ut(t,e,n){if(En&&Je){let s=vc.get(t);s||vc.set(t,s=new Map);let r=s.get(n);r||(s.set(n,r=new sf),r.map=s,r.key=n),r.track()}}function Xn(t,e,n,s,r,i){const o=vc.get(t);if(!o){Bo++;return}const a=l=>{l&&l.trigger()};if(ef(),e==="clear")o.forEach(a);else{const l=ve(t),u=l&&tl(n);if(l&&n==="length"){const h=Number(s);o.forEach((f,p)=>{(p==="length"||p===$o||!bn(p)&&p>=h)&&a(f)})}else switch((n!==void 0||o.has(void 0))&&a(o.get(n)),u&&a(o.get($o)),e){case"add":l?u&&a(o.get("length")):(a(o.get(Sr)),ci(t)&&a(o.get(qu)));break;case"delete":l||(a(o.get(Sr)),ci(t)&&a(o.get(qu)));break;case"set":ci(t)&&a(o.get(Sr));break}}tf()}function sb(t,e){const n=vc.get(t);return n&&n.get(e)}function Yr(t){const e=Ue(t);return e===t?e:(Ut(e,"iterate",$o),an(t)?e:e.map(In))}function al(t){return Ut(t=Ue(t),"iterate",$o),t}function Ns(t,e){return Hn(t)?qs(t)?vi(In(e)):vi(e):In(e)}const rb={__proto__:null,[Symbol.iterator](){return au(this,Symbol.iterator,t=>Ns(this,t))},concat(...t){return Yr(this).concat(...t.map(e=>ve(e)?Yr(e):e))},entries(){return au(this,"entries",t=>(t[1]=Ns(this,t[1]),t))},every(t,e){return zn(this,"every",t,e,void 0,arguments)},filter(t,e){return zn(this,"filter",t,e,n=>n.map(s=>Ns(this,s)),arguments)},find(t,e){return zn(this,"find",t,e,n=>Ns(this,n),arguments)},findIndex(t,e){return zn(this,"findIndex",t,e,void 0,arguments)},findLast(t,e){return zn(this,"findLast",t,e,n=>Ns(this,n),arguments)},findLastIndex(t,e){return zn(this,"findLastIndex",t,e,void 0,arguments)},forEach(t,e){return zn(this,"forEach",t,e,void 0,arguments)},includes(...t){return cu(this,"includes",t)},indexOf(...t){return cu(this,"indexOf",t)},join(t){return Yr(this).join(t)},lastIndexOf(...t){return cu(this,"lastIndexOf",t)},map(t,e){return zn(this,"map",t,e,void 0,arguments)},pop(){return uo(this,"pop")},push(...t){return uo(this,"push",t)},reduce(t,...e){return lp(this,"reduce",t,e)},reduceRight(t,...e){return lp(this,"reduceRight",t,e)},shift(){return uo(this,"shift")},some(t,e){return zn(this,"some",t,e,void 0,arguments)},splice(...t){return uo(this,"splice",t)},toReversed(){return Yr(this).toReversed()},toSorted(t){return Yr(this).toSorted(t)},toSpliced(...t){return Yr(this).toSpliced(...t)},unshift(...t){return uo(this,"unshift",t)},values(){return au(this,"values",t=>Ns(this,t))}};function au(t,e,n){const s=al(t),r=s[e]();return s!==t&&!an(t)&&(r._next=r.next,r.next=()=>{const i=r._next();return i.done||(i.value=n(i.value)),i}),r}const ib=Array.prototype;function zn(t,e,n,s,r,i){const o=al(t),a=o!==t&&!an(t),l=o[e];if(l!==ib[e]){const f=l.apply(t,i);return a?In(f):f}let u=n;o!==t&&(a?u=function(f,p){return n.call(this,Ns(t,f),p,t)}:n.length>2&&(u=function(f,p){return n.call(this,f,p,t)}));const h=l.call(o,u,s);return a&&r?r(h):h}function lp(t,e,n,s){const r=al(t);let i=n;return r!==t&&(an(t)?n.length>3&&(i=function(o,a,l){return n.call(this,o,a,l,t)}):i=function(o,a,l){return n.call(this,o,Ns(t,a),l,t)}),r[e](i,...s)}function cu(t,e,n){const s=Ue(t);Ut(s,"iterate",$o);const r=s[e](...n);return(r===-1||r===!1)&&cl(n[0])?(n[0]=Ue(n[0]),s[e](...n)):r}function uo(t,e,n=[]){cs(),ef();const s=Ue(t)[e].apply(t,n);return tf(),ls(),s}const ob=Kh("__proto__,__v_isRef,__isVue"),F_=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(bn));function ab(t){bn(t)||(t=String(t));const e=Ue(this);return Ut(e,"has",t),e.hasOwnProperty(t)}class U_{constructor(e=!1,n=!1){this._isReadonly=e,this._isShallow=n}get(e,n,s){if(n==="__v_skip")return e.__v_skip;const r=this._isReadonly,i=this._isShallow;if(n==="__v_isReactive")return!r;if(n==="__v_isReadonly")return r;if(n==="__v_isShallow")return i;if(n==="__v_raw")return s===(r?i?_b:j_:i?H_:$_).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(s)?e:void 0;const o=ve(e);if(!r){let l;if(o&&(l=rb[n]))return l;if(n==="hasOwnProperty")return ab}const a=Reflect.get(e,n,vt(e)?e:s);if((bn(n)?F_.has(n):ob(n))||(r||Ut(e,"get",n),i))return a;if(vt(a)){const l=o&&tl(n)?a:a.value;return r&&We(l)?Wu(l):l}return We(a)?r?Wu(a):ir(a):a}}class B_ extends U_{constructor(e=!1){super(!1,e)}set(e,n,s,r){let i=e[n];const o=ve(e)&&tl(n);if(!this._isShallow){const u=Hn(i);if(!an(s)&&!Hn(s)&&(i=Ue(i),s=Ue(s)),!o&&vt(i)&&!vt(s))return u||(i.value=s),!0}const a=o?Number(n)<e.length:je(e,n),l=Reflect.set(e,n,s,vt(e)?e:r);return e===Ue(r)&&(a?js(s,i)&&Xn(e,"set",n,s):Xn(e,"add",n,s)),l}deleteProperty(e,n){const s=je(e,n);e[n];const r=Reflect.deleteProperty(e,n);return r&&s&&Xn(e,"delete",n,void 0),r}has(e,n){const s=Reflect.has(e,n);return(!bn(n)||!F_.has(n))&&Ut(e,"has",n),s}ownKeys(e){return Ut(e,"iterate",ve(e)?"length":Sr),Reflect.ownKeys(e)}}class cb extends U_{constructor(e=!1){super(!0,e)}set(e,n){return!0}deleteProperty(e,n){return!0}}const lb=new B_,ub=new cb,hb=new B_(!0);const Gu=t=>t,xa=t=>Reflect.getPrototypeOf(t);function fb(t,e,n){return function(...s){const r=this.__v_raw,i=Ue(r),o=ci(i),a=t==="entries"||t===Symbol.iterator&&o,l=t==="keys"&&o,u=r[t](...s),h=n?Gu:e?vi:In;return!e&&Ut(i,"iterate",l?qu:Sr),{next(){const{value:f,done:p}=u.next();return p?{value:f,done:p}:{value:a?[h(f[0]),h(f[1])]:h(f),done:p}},[Symbol.iterator](){return this}}}}function Fa(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function db(t,e){const n={get(r){const i=this.__v_raw,o=Ue(i),a=Ue(r);t||(js(r,a)&&Ut(o,"get",r),Ut(o,"get",a));const{has:l}=xa(o),u=e?Gu:t?vi:In;if(l.call(o,r))return u(i.get(r));if(l.call(o,a))return u(i.get(a));i!==o&&i.get(r)},get size(){const r=this.__v_raw;return!t&&Ut(Ue(r),"iterate",Sr),r.size},has(r){const i=this.__v_raw,o=Ue(i),a=Ue(r);return t||(js(r,a)&&Ut(o,"has",r),Ut(o,"has",a)),r===a?i.has(r):i.has(r)||i.has(a)},forEach(r,i){const o=this,a=o.__v_raw,l=Ue(a),u=e?Gu:t?vi:In;return!t&&Ut(l,"iterate",Sr),a.forEach((h,f)=>r.call(i,u(h),u(f),o))}};return Ct(n,t?{add:Fa("add"),set:Fa("set"),delete:Fa("delete"),clear:Fa("clear")}:{add(r){!e&&!an(r)&&!Hn(r)&&(r=Ue(r));const i=Ue(this);return xa(i).has.call(i,r)||(i.add(r),Xn(i,"add",r,r)),this},set(r,i){!e&&!an(i)&&!Hn(i)&&(i=Ue(i));const o=Ue(this),{has:a,get:l}=xa(o);let u=a.call(o,r);u||(r=Ue(r),u=a.call(o,r));const h=l.call(o,r);return o.set(r,i),u?js(i,h)&&Xn(o,"set",r,i):Xn(o,"add",r,i),this},delete(r){const i=Ue(this),{has:o,get:a}=xa(i);let l=o.call(i,r);l||(r=Ue(r),l=o.call(i,r)),a&&a.call(i,r);const u=i.delete(r);return l&&Xn(i,"delete",r,void 0),u},clear(){const r=Ue(this),i=r.size!==0,o=r.clear();return i&&Xn(r,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(r=>{n[r]=fb(r,t,e)}),n}function rf(t,e){const n=db(t,e);return(s,r,i)=>r==="__v_isReactive"?!t:r==="__v_isReadonly"?t:r==="__v_raw"?s:Reflect.get(je(n,r)&&r in s?n:s,r,i)}const pb={get:rf(!1,!1)},mb={get:rf(!1,!0)},gb={get:rf(!0,!1)};const $_=new WeakMap,H_=new WeakMap,j_=new WeakMap,_b=new WeakMap;function yb(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function vb(t){return t.__v_skip||!Object.isExtensible(t)?0:yb(Hw(t))}function ir(t){return Hn(t)?t:of(t,!1,lb,pb,$_)}function Ln(t){return of(t,!1,hb,mb,H_)}function Wu(t){return of(t,!0,ub,gb,j_)}function of(t,e,n,s,r){if(!We(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const i=vb(t);if(i===0)return t;const o=r.get(t);if(o)return o;const a=new Proxy(t,i===2?s:n);return r.set(t,a),a}function qs(t){return Hn(t)?qs(t.__v_raw):!!(t&&t.__v_isReactive)}function Hn(t){return!!(t&&t.__v_isReadonly)}function an(t){return!!(t&&t.__v_isShallow)}function cl(t){return t?!!t.__v_raw:!1}function Ue(t){const e=t&&t.__v_raw;return e?Ue(e):t}function Eb(t){return!je(t,"__v_skip")&&Object.isExtensible(t)&&I_(t,"__v_skip",!0),t}const In=t=>We(t)?ir(t):t,vi=t=>We(t)?Wu(t):t;function vt(t){return t?t.__v_isRef===!0:!1}function de(t){return q_(t,!1)}function us(t){return q_(t,!0)}function q_(t,e){return vt(t)?t:new Tb(t,e)}class Tb{constructor(e,n){this.dep=new sf,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?e:Ue(e),this._value=n?e:In(e),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(e){const n=this._rawValue,s=this.__v_isShallow||an(e)||Hn(e);e=s?e:Ue(e),js(e,n)&&(this._rawValue=e,this._value=s?e:In(e),this.dep.trigger())}}function Ge(t){return vt(t)?t.value:t}function wb(t){return Ie(t)?t():Ge(t)}const bb={get:(t,e,n)=>e==="__v_raw"?t:Ge(Reflect.get(t,e,n)),set:(t,e,n,s)=>{const r=t[e];return vt(r)&&!vt(n)?(r.value=n,!0):Reflect.set(t,e,n,s)}};function G_(t){return qs(t)?t:new Proxy(t,bb)}class Ib{constructor(e,n,s){this._object=e,this._key=n,this._defaultValue=s,this.__v_isRef=!0,this._value=void 0,this._raw=Ue(e);let r=!0,i=e;if(!ve(e)||!tl(String(n)))do r=!cl(i)||an(i);while(r&&(i=i.__v_raw));this._shallow=r}get value(){let e=this._object[this._key];return this._shallow&&(e=Ge(e)),this._value=e===void 0?this._defaultValue:e}set value(e){if(this._shallow&&vt(this._raw[this._key])){const n=this._object[this._key];if(vt(n)){n.value=e;return}}this._object[this._key]=e}get dep(){return sb(this._raw,this._key)}}class Ab{constructor(e){this._getter=e,this.__v_isRef=!0,this.__v_isReadonly=!0,this._value=void 0}get value(){return this._value=this._getter()}}function Rb(t,e,n){return vt(t)?t:Ie(t)?new Ab(t):We(t)&&arguments.length>1?Sb(t,e,n):de(t)}function Sb(t,e,n){return new Ib(t,e,n)}class Cb{constructor(e,n,s){this.fn=e,this.setter=n,this._value=void 0,this.dep=new sf(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Bo-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=s}notify(){if(this.flags|=16,!(this.flags&8)&&Je!==this)return D_(this,!0),!0}get value(){const e=this.dep.track();return L_(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function Pb(t,e,n=!1){let s,r;return Ie(t)?s=t:(s=t.get,r=t.set),new Cb(s,r,n)}const Ua={},Ec=new WeakMap;let Tr;function kb(t,e=!1,n=Tr){if(n){let s=Ec.get(n);s||Ec.set(n,s=[]),s.push(t)}}function Nb(t,e,n=Ye){const{immediate:s,deep:r,once:i,scheduler:o,augmentJob:a,call:l}=n,u=S=>r?S:an(S)||r===!1||r===0?Zn(S,1):Zn(S);let h,f,p,m,b=!1,v=!1;if(vt(t)?(f=()=>t.value,b=an(t)):qs(t)?(f=()=>u(t),b=!0):ve(t)?(v=!0,b=t.some(S=>qs(S)||an(S)),f=()=>t.map(S=>{if(vt(S))return S.value;if(qs(S))return u(S);if(Ie(S))return l?l(S,2):S()})):Ie(t)?e?f=l?()=>l(t,2):t:f=()=>{if(p){cs();try{p()}finally{ls()}}const S=Tr;Tr=h;try{return l?l(t,3,[m]):t(m)}finally{Tr=S}}:f=Mn,e&&r){const S=f,O=r===!0?1/0:r;f=()=>Zn(S(),O)}const D=Zh(),V=()=>{h.stop(),D&&D.active&&Yh(D.effects,h)};if(i&&e){const S=e;e=(...O)=>{S(...O),V()}}let N=v?new Array(t.length).fill(Ua):Ua;const _=S=>{if(!(!(h.flags&1)||!h.dirty&&!S))if(e){const O=h.run();if(r||b||(v?O.some((U,T)=>js(U,N[T])):js(O,N))){p&&p();const U=Tr;Tr=h;try{const T=[O,N===Ua?void 0:v&&N[0]===Ua?[]:N,m];N=O,l?l(e,3,T):e(...T)}finally{Tr=U}}}else h.run()};return a&&a(_),h=new k_(f),h.scheduler=o?()=>o(_,!1):_,m=S=>kb(S,!1,h),p=h.onStop=()=>{const S=Ec.get(h);if(S){if(l)l(S,4);else for(const O of S)O();Ec.delete(h)}},e?s?_(!0):N=h.run():o?o(_.bind(null,!0),!0):h.run(),V.pause=h.pause.bind(h),V.resume=h.resume.bind(h),V.stop=V,V}function Zn(t,e=1/0,n){if(e<=0||!We(t)||t.__v_skip||(n=n||new Map,(n.get(t)||0)>=e))return t;if(n.set(t,e),e--,vt(t))Zn(t.value,e,n);else if(ve(t))for(let s=0;s<t.length;s++)Zn(t[s],e,n);else if(Li(t)||ci(t))t.forEach(s=>{Zn(s,e,n)});else if(b_(t)){for(const s in t)Zn(t[s],e,n);for(const s of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,s)&&Zn(t[s],e,n)}return t}function oa(t,e,n,s){try{return s?t(...s):t()}catch(r){xi(r,e,n)}}function An(t,e,n,s){if(Ie(t)){const r=oa(t,e,n,s);return r&&Jh(r)&&r.catch(i=>{xi(i,e,n)}),r}if(ve(t)){const r=[];for(let i=0;i<t.length;i++)r.push(An(t[i],e,n,s));return r}}function xi(t,e,n,s=!0){const r=e?e.vnode:null,{errorHandler:i,throwUnhandledErrorInProduction:o}=e&&e.appContext.config||Ye;if(e){let a=e.parent;const l=e.proxy,u=`https://vuejs.org/error-reference/#runtime-${n}`;for(;a;){const h=a.ec;if(h){for(let f=0;f<h.length;f++)if(h[f](t,l,u)===!1)return}a=a.parent}if(i){cs(),oa(i,null,10,[t,l,u]),ls();return}}Db(t,n,r,s,o)}function Db(t,e,n,s=!0,r=!1){if(r)throw t;console.error(t)}const Gt=[];let Nn=-1;const hi=[];let Ds=null,Xr=0;const W_=Promise.resolve();let Tc=null;function Ys(t){const e=Tc||W_;return t?e.then(this?t.bind(this):t):e}function Ob(t){let e=Nn+1,n=Gt.length;for(;e<n;){const s=e+n>>>1,r=Gt[s],i=Ho(r);i<t||i===t&&r.flags&2?e=s+1:n=s}return e}function af(t){if(!(t.flags&1)){const e=Ho(t),n=Gt[Gt.length-1];!n||!(t.flags&2)&&e>=Ho(n)?Gt.push(t):Gt.splice(Ob(e),0,t),t.flags|=1,z_()}}function z_(){Tc||(Tc=W_.then(K_))}function zu(t){ve(t)?hi.push(...t):Ds&&t.id===-1?Ds.splice(Xr+1,0,t):t.flags&1||(hi.push(t),t.flags|=1),z_()}function up(t,e,n=Nn+1){for(;n<Gt.length;n++){const s=Gt[n];if(s&&s.flags&2){if(t&&s.id!==t.uid)continue;Gt.splice(n,1),n--,s.flags&4&&(s.flags&=-2),s(),s.flags&4||(s.flags&=-2)}}}function wc(t){if(hi.length){const e=[...new Set(hi)].sort((n,s)=>Ho(n)-Ho(s));if(hi.length=0,Ds){Ds.push(...e);return}for(Ds=e,Xr=0;Xr<Ds.length;Xr++){const n=Ds[Xr];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}Ds=null,Xr=0}}const Ho=t=>t.id==null?t.flags&2?-1:1/0:t.id;function K_(t){try{for(Nn=0;Nn<Gt.length;Nn++){const e=Gt[Nn];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),oa(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;Nn<Gt.length;Nn++){const e=Gt[Nn];e&&(e.flags&=-2)}Nn=-1,Gt.length=0,wc(),Tc=null,(Gt.length||hi.length)&&K_()}}let Dt=null,Q_=null;function bc(t){const e=Dt;return Dt=t,Q_=t&&t.type.__scopeId||null,e}function cn(t,e=Dt,n){if(!e||t._n)return t;const s=(...r)=>{s._d&&Pc(-1);const i=bc(e);let o;try{o=t(...r)}finally{bc(i),s._d&&Pc(1)}return o};return s._n=!0,s._c=!0,s._d=!0,s}function mo(t,e){if(Dt===null)return t;const n=dl(Dt),s=t.dirs||(t.dirs=[]);for(let r=0;r<e.length;r++){let[i,o,a,l=Ye]=e[r];i&&(Ie(i)&&(i={mounted:i,updated:i}),i.deep&&Zn(o),s.push({dir:i,instance:n,value:o,oldValue:void 0,arg:a,modifiers:l}))}return t}function Dn(t,e,n,s){const r=t.dirs,i=e&&e.dirs;for(let o=0;o<r.length;o++){const a=r[o];i&&(a.oldValue=i[o].value);let l=a.dir[s];l&&(cs(),An(l,n,8,[t.el,a,t,e]),ls())}}function ns(t,e){if(Nt){let n=Nt.provides;const s=Nt.parent&&Nt.parent.provides;s===n&&(n=Nt.provides=Object.create(s)),n[t]=e}}function Vt(t,e,n=!1){const s=$r();if(s||Cr){let r=Cr?Cr._context.provides:s?s.parent==null||s.ce?s.vnode.appContext&&s.vnode.appContext.provides:s.parent.provides:void 0;if(r&&t in r)return r[t];if(arguments.length>1)return n&&Ie(e)?e.call(s&&s.proxy):e}}function ll(){return!!($r()||Cr)}const Vb=Symbol.for("v-scx"),Lb=()=>Vt(Vb);function Mb(t,e){return cf(t,null,e)}function xn(t,e,n){return cf(t,e,n)}function cf(t,e,n=Ye){const{immediate:s,deep:r,flush:i,once:o}=n,a=Ct({},n),l=e&&s||!e&&i!=="post";let u;if(wi){if(i==="sync"){const m=Lb();u=m.__watcherHandles||(m.__watcherHandles=[])}else if(!l){const m=()=>{};return m.stop=Mn,m.resume=Mn,m.pause=Mn,m}}const h=Nt;a.call=(m,b,v)=>An(m,h,b,v);let f=!1;i==="post"?a.scheduler=m=>{mt(m,h&&h.suspense)}:i!=="sync"&&(f=!0,a.scheduler=(m,b)=>{b?m():af(m)}),a.augmentJob=m=>{e&&(m.flags|=4),f&&(m.flags|=2,h&&(m.id=h.uid,m.i=h))};const p=Nb(t,e,a);return wi&&(u?u.push(p):l&&p()),p}function xb(t,e,n){const s=this.proxy,r=nt(t)?t.includes(".")?Y_(s,t):()=>s[t]:t.bind(s,s);let i;Ie(e)?i=e:(i=e.handler,n=e);const o=la(this),a=cf(r,i.bind(s),n);return o(),a}function Y_(t,e){const n=e.split(".");return()=>{let s=t;for(let r=0;r<n.length&&s;r++)s=s[n[r]];return s}}const J_=Symbol("_vte"),X_=t=>t.__isTeleport,Ao=t=>t&&(t.disabled||t.disabled===""),hp=t=>t&&(t.defer||t.defer===""),fp=t=>typeof SVGElement<"u"&&t instanceof SVGElement,dp=t=>typeof MathMLElement=="function"&&t instanceof MathMLElement,Ku=(t,e)=>{const n=t&&t.to;return nt(n)?e?e(n):null:n},Z_={name:"Teleport",__isTeleport:!0,process(t,e,n,s,r,i,o,a,l,u){const{mc:h,pc:f,pbc:p,o:{insert:m,querySelector:b,createText:v,createComment:D}}=u,V=Ao(e.props);let{shapeFlag:N,children:_,dynamicChildren:S}=e;if(t==null){const O=e.el=v(""),U=e.anchor=v("");m(O,n,s),m(U,n,s);const T=(E,R)=>{N&16&&h(_,E,R,r,i,o,a,l)},y=()=>{const E=e.target=Ku(e.props,b),R=ey(E,e,v,m);E&&(o!=="svg"&&fp(E)?o="svg":o!=="mathml"&&dp(E)&&(o="mathml"),r&&r.isCE&&(r.ce._teleportTargets||(r.ce._teleportTargets=new Set)).add(E),V||(T(E,R),sc(e,!1)))};V&&(T(n,U),sc(e,!0)),hp(e.props)?(e.el.__isMounted=!1,mt(()=>{y(),delete e.el.__isMounted},i)):y()}else{if(hp(e.props)&&t.el.__isMounted===!1){mt(()=>{Z_.process(t,e,n,s,r,i,o,a,l,u)},i);return}e.el=t.el,e.targetStart=t.targetStart;const O=e.anchor=t.anchor,U=e.target=t.target,T=e.targetAnchor=t.targetAnchor,y=Ao(t.props),E=y?n:U,R=y?O:T;if(o==="svg"||fp(U)?o="svg":(o==="mathml"||dp(U))&&(o="mathml"),S?(p(t.dynamicChildren,S,E,r,i,o,a),pf(t,e,!0)):l||f(t,e,E,R,r,i,o,a,!1),V)y?e.props&&t.props&&e.props.to!==t.props.to&&(e.props.to=t.props.to):Ba(e,n,O,u,1);else if((e.props&&e.props.to)!==(t.props&&t.props.to)){const P=e.target=Ku(e.props,b);P&&Ba(e,P,null,u,0)}else y&&Ba(e,U,T,u,1);sc(e,V)}},remove(t,e,n,{um:s,o:{remove:r}},i){const{shapeFlag:o,children:a,anchor:l,targetStart:u,targetAnchor:h,target:f,props:p}=t;if(f&&(r(u),r(h)),i&&r(l),o&16){const m=i||!Ao(p);for(let b=0;b<a.length;b++){const v=a[b];s(v,e,n,m,!!v.dynamicChildren)}}},move:Ba,hydrate:Fb};function Ba(t,e,n,{o:{insert:s},m:r},i=2){i===0&&s(t.targetAnchor,e,n);const{el:o,anchor:a,shapeFlag:l,children:u,props:h}=t,f=i===2;if(f&&s(o,e,n),(!f||Ao(h))&&l&16)for(let p=0;p<u.length;p++)r(u[p],e,n,2);f&&s(a,e,n)}function Fb(t,e,n,s,r,i,{o:{nextSibling:o,parentNode:a,querySelector:l,insert:u,createText:h}},f){function p(v,D,V,N){D.anchor=f(o(v),D,a(v),n,s,r,i),D.targetStart=V,D.targetAnchor=N}const m=e.target=Ku(e.props,l),b=Ao(e.props);if(m){const v=m._lpa||m.firstChild;if(e.shapeFlag&16)if(b)p(t,e,v,v&&o(v));else{e.anchor=o(t);let D=v;for(;D;){if(D&&D.nodeType===8){if(D.data==="teleport start anchor")e.targetStart=D;else if(D.data==="teleport anchor"){e.targetAnchor=D,m._lpa=e.targetAnchor&&o(e.targetAnchor);break}}D=o(D)}e.targetAnchor||ey(m,e,h,u),f(v&&o(v),e,m,n,s,r,i)}sc(e,b)}else b&&e.shapeFlag&16&&p(t,e,t,o(t));return e.anchor&&o(e.anchor)}const WM=Z_;function sc(t,e){const n=t.ctx;if(n&&n.ut){let s,r;for(e?(s=t.el,r=t.anchor):(s=t.targetStart,r=t.targetAnchor);s&&s!==r;)s.nodeType===1&&s.setAttribute("data-v-owner",n.uid),s=s.nextSibling;n.ut()}}function ey(t,e,n,s){const r=e.targetStart=n(""),i=e.targetAnchor=n("");return r[J_]=i,t&&(s(r,t),s(i,t)),i}const Jn=Symbol("_leaveCb"),$a=Symbol("_enterCb");function Ub(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Js(()=>{t.isMounted=!0}),ca(()=>{t.isUnmounting=!0}),t}const ln=[Function,Array],ty={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:ln,onEnter:ln,onAfterEnter:ln,onEnterCancelled:ln,onBeforeLeave:ln,onLeave:ln,onAfterLeave:ln,onLeaveCancelled:ln,onBeforeAppear:ln,onAppear:ln,onAfterAppear:ln,onAppearCancelled:ln},ny=t=>{const e=t.subTree;return e.component?ny(e.component):e},Bb={name:"BaseTransition",props:ty,setup(t,{slots:e}){const n=$r(),s=Ub();return()=>{const r=e.default&&iy(e.default(),!0);if(!r||!r.length)return;const i=sy(r),o=Ue(t),{mode:a}=o;if(s.isLeaving)return lu(i);const l=pp(i);if(!l)return lu(i);let u=Qu(l,o,s,n,f=>u=f);l.type!==gt&&Ei(l,u);let h=n.subTree&&pp(n.subTree);if(h&&h.type!==gt&&!yn(h,l)&&ny(n).type!==gt){let f=Qu(h,o,s,n);if(Ei(h,f),a==="out-in"&&l.type!==gt)return s.isLeaving=!0,f.afterLeave=()=>{s.isLeaving=!1,n.job.flags&8||n.update(),delete f.afterLeave,h=void 0},lu(i);a==="in-out"&&l.type!==gt?f.delayLeave=(p,m,b)=>{const v=ry(s,h);v[String(h.key)]=h,p[Jn]=()=>{m(),p[Jn]=void 0,delete u.delayedLeave,h=void 0},u.delayedLeave=()=>{b(),delete u.delayedLeave,h=void 0}}:h=void 0}else h&&(h=void 0);return i}}};function sy(t){let e=t[0];if(t.length>1){for(const n of t)if(n.type!==gt){e=n;break}}return e}const $b=Bb;function ry(t,e){const{leavingVNodes:n}=t;let s=n.get(e.type);return s||(s=Object.create(null),n.set(e.type,s)),s}function Qu(t,e,n,s,r){const{appear:i,mode:o,persisted:a=!1,onBeforeEnter:l,onEnter:u,onAfterEnter:h,onEnterCancelled:f,onBeforeLeave:p,onLeave:m,onAfterLeave:b,onLeaveCancelled:v,onBeforeAppear:D,onAppear:V,onAfterAppear:N,onAppearCancelled:_}=e,S=String(t.key),O=ry(n,t),U=(E,R)=>{E&&An(E,s,9,R)},T=(E,R)=>{const P=R[1];U(E,R),ve(E)?E.every(C=>C.length<=1)&&P():E.length<=1&&P()},y={mode:o,persisted:a,beforeEnter(E){let R=l;if(!n.isMounted)if(i)R=D||l;else return;E[Jn]&&E[Jn](!0);const P=O[S];P&&yn(t,P)&&P.el[Jn]&&P.el[Jn](),U(R,[E])},enter(E){let R=u,P=h,C=f;if(!n.isMounted)if(i)R=V||u,P=N||h,C=_||f;else return;let A=!1;const pe=E[$a]=Te=>{A||(A=!0,Te?U(C,[E]):U(P,[E]),y.delayedLeave&&y.delayedLeave(),E[$a]=void 0)};R?T(R,[E,pe]):pe()},leave(E,R){const P=String(t.key);if(E[$a]&&E[$a](!0),n.isUnmounting)return R();U(p,[E]);let C=!1;const A=E[Jn]=pe=>{C||(C=!0,R(),pe?U(v,[E]):U(b,[E]),E[Jn]=void 0,O[P]===t&&delete O[P])};O[P]=t,m?T(m,[E,A]):A()},clone(E){const R=Qu(E,e,n,s,r);return r&&r(R),R}};return y}function lu(t){if(aa(t))return t=dn(t),t.children=null,t}function pp(t){if(!aa(t))return X_(t.type)&&t.children?sy(t.children):t;if(t.component)return t.component.subTree;const{shapeFlag:e,children:n}=t;if(n){if(e&16)return n[0];if(e&32&&Ie(n.default))return n.default()}}function Ei(t,e){t.shapeFlag&6&&t.component?(t.transition=e,Ei(t.component.subTree,e)):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function iy(t,e=!1,n){let s=[],r=0;for(let i=0;i<t.length;i++){let o=t[i];const a=n==null?o.key:String(n)+String(o.key!=null?o.key:i);o.type===ze?(o.patchFlag&128&&r++,s=s.concat(iy(o.children,e,a))):(e||o.type!==gt)&&s.push(a!=null?dn(o,{key:a}):o)}if(r>1)for(let i=0;i<s.length;i++)s[i].patchFlag=-2;return s}function ut(t,e){return Ie(t)?Ct({name:t.name},e,{setup:t}):t}function lf(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}const Ic=new WeakMap;function fi(t,e,n,s,r=!1){if(ve(t)){t.forEach((b,v)=>fi(b,e&&(ve(e)?e[v]:e),n,s,r));return}if(ss(s)&&!r){s.shapeFlag&512&&s.type.__asyncResolved&&s.component.subTree.component&&fi(t,e,n,s.component.subTree);return}const i=s.shapeFlag&4?dl(s.component):s.el,o=r?null:i,{i:a,r:l}=t,u=e&&e.r,h=a.refs===Ye?a.refs={}:a.refs,f=a.setupState,p=Ue(f),m=f===Ye?T_:b=>je(p,b);if(u!=null&&u!==l){if(mp(e),nt(u))h[u]=null,m(u)&&(f[u]=null);else if(vt(u)){u.value=null;const b=e;b.k&&(h[b.k]=null)}}if(Ie(l))oa(l,a,12,[o,h]);else{const b=nt(l),v=vt(l);if(b||v){const D=()=>{if(t.f){const V=b?m(l)?f[l]:h[l]:l.value;if(r)ve(V)&&Yh(V,i);else if(ve(V))V.includes(i)||V.push(i);else if(b)h[l]=[i],m(l)&&(f[l]=h[l]);else{const N=[i];l.value=N,t.k&&(h[t.k]=N)}}else b?(h[l]=o,m(l)&&(f[l]=o)):v&&(l.value=o,t.k&&(h[t.k]=o))};if(o){const V=()=>{D(),Ic.delete(t)};V.id=-1,Ic.set(t,V),mt(V,n)}else mp(t),D()}}}function mp(t){const e=Ic.get(t);e&&(e.flags|=8,Ic.delete(t))}let gp=!1;const Jr=()=>{gp||(console.error("Hydration completed but contains mismatches."),gp=!0)},Hb=t=>t.namespaceURI.includes("svg")&&t.tagName!=="foreignObject",jb=t=>t.namespaceURI.includes("MathML"),Ha=t=>{if(t.nodeType===1){if(Hb(t))return"svg";if(jb(t))return"mathml"}},ri=t=>t.nodeType===8;function qb(t){const{mt:e,p:n,o:{patchProp:s,createText:r,nextSibling:i,parentNode:o,remove:a,insert:l,createComment:u}}=t,h=(_,S)=>{if(!S.hasChildNodes()){n(null,_,S),wc(),S._vnode=_;return}f(S.firstChild,_,null,null,null),wc(),S._vnode=_},f=(_,S,O,U,T,y=!1)=>{y=y||!!S.dynamicChildren;const E=ri(_)&&_.data==="[",R=()=>v(_,S,O,U,T,E),{type:P,ref:C,shapeFlag:A,patchFlag:pe}=S;let Te=_.nodeType;S.el=_,pe===-2&&(y=!1,S.dynamicChildren=null);let le=null;switch(P){case Pr:Te!==3?S.children===""?(l(S.el=r(""),o(_),_),le=_):le=R():(_.data!==S.children&&(Jr(),_.data=S.children),le=i(_));break;case gt:N(_)?(le=i(_),V(S.el=_.content.firstChild,_,O)):Te!==8||E?le=R():le=i(_);break;case So:if(E&&(_=i(_),Te=_.nodeType),Te===1||Te===3){le=_;const he=!S.children.length;for(let oe=0;oe<S.staticCount;oe++)he&&(S.children+=le.nodeType===1?le.outerHTML:le.data),oe===S.staticCount-1&&(S.anchor=le),le=i(le);return E?i(le):le}else R();break;case ze:E?le=b(_,S,O,U,T,y):le=R();break;default:if(A&1)(Te!==1||S.type.toLowerCase()!==_.tagName.toLowerCase())&&!N(_)?le=R():le=p(_,S,O,U,T,y);else if(A&6){S.slotScopeIds=T;const he=o(_);if(E?le=D(_):ri(_)&&_.data==="teleport start"?le=D(_,_.data,"teleport end"):le=i(_),e(S,he,null,O,U,Ha(he),y),ss(S)&&!S.type.__asyncResolved){let oe;E?(oe=we(ze),oe.anchor=le?le.previousSibling:he.lastChild):oe=_.nodeType===3?Qe(""):we("div"),oe.el=_,S.component.subTree=oe}}else A&64?Te!==8?le=R():le=S.type.hydrate(_,S,O,U,T,y,t,m):A&128&&(le=S.type.hydrate(_,S,O,U,Ha(o(_)),T,y,t,f))}return C!=null&&fi(C,null,U,S),le},p=(_,S,O,U,T,y)=>{y=y||!!S.dynamicChildren;const{type:E,props:R,patchFlag:P,shapeFlag:C,dirs:A,transition:pe}=S,Te=E==="input"||E==="option";if(Te||P!==-1){A&&Dn(S,null,O,"created");let le=!1;if(N(_)){le=Sy(null,pe)&&O&&O.vnode.props&&O.vnode.props.appear;const oe=_.content.firstChild;if(le){const Re=oe.getAttribute("class");Re&&(oe.$cls=Re),pe.beforeEnter(oe)}V(oe,_,O),S.el=_=oe}if(C&16&&!(R&&(R.innerHTML||R.textContent))){let oe=m(_.firstChild,S,_,O,U,T,y);for(;oe;){ja(_,1)||Jr();const Re=oe;oe=oe.nextSibling,a(Re)}}else if(C&8){let oe=S.children;oe[0]===`
`&&(_.tagName==="PRE"||_.tagName==="TEXTAREA")&&(oe=oe.slice(1));const{textContent:Re}=_;Re!==oe&&Re!==oe.replace(/\r\n|\r/g,`
`)&&(ja(_,0)||Jr(),_.textContent=S.children)}if(R){if(Te||!y||P&48){const oe=_.tagName.includes("-");for(const Re in R)(Te&&(Re.endsWith("value")||Re==="indeterminate")||ra(Re)&&!li(Re)||Re[0]==="."||oe)&&s(_,Re,null,R[Re],void 0,O)}else if(R.onClick)s(_,"onClick",null,R.onClick,void 0,O);else if(P&4&&qs(R.style))for(const oe in R.style)R.style[oe]}let he;(he=R&&R.onVnodeBeforeMount)&&Qt(he,O,S),A&&Dn(S,null,O,"beforeMount"),((he=R&&R.onVnodeMounted)||A||le)&&Ny(()=>{he&&Qt(he,O,S),le&&pe.enter(_),A&&Dn(S,null,O,"mounted")},U)}return _.nextSibling},m=(_,S,O,U,T,y,E)=>{E=E||!!S.dynamicChildren;const R=S.children,P=R.length;for(let C=0;C<P;C++){const A=E?R[C]:R[C]=sn(R[C]),pe=A.type===Pr;_?(pe&&!E&&C+1<P&&sn(R[C+1]).type===Pr&&(l(r(_.data.slice(A.children.length)),O,i(_)),_.data=A.children),_=f(_,A,U,T,y,E)):pe&&!A.children?l(A.el=r(""),O):(ja(O,1)||Jr(),n(null,A,O,null,U,T,Ha(O),y))}return _},b=(_,S,O,U,T,y)=>{const{slotScopeIds:E}=S;E&&(T=T?T.concat(E):E);const R=o(_),P=m(i(_),S,R,O,U,T,y);return P&&ri(P)&&P.data==="]"?i(S.anchor=P):(Jr(),l(S.anchor=u("]"),R,P),P)},v=(_,S,O,U,T,y)=>{if(ja(_.parentElement,1)||Jr(),S.el=null,y){const P=D(_);for(;;){const C=i(_);if(C&&C!==P)a(C);else break}}const E=i(_),R=o(_);return a(_),n(null,S,R,E,O,U,Ha(R),T),O&&(O.vnode.el=S.el,fl(O,S.el)),E},D=(_,S="[",O="]")=>{let U=0;for(;_;)if(_=i(_),_&&ri(_)&&(_.data===S&&U++,_.data===O)){if(U===0)return i(_);U--}return _},V=(_,S,O)=>{const U=S.parentNode;U&&U.replaceChild(_,S);let T=O;for(;T;)T.vnode.el===S&&(T.vnode.el=T.subTree.el=_),T=T.parent},N=_=>_.nodeType===1&&_.tagName==="TEMPLATE";return[h,f]}const _p="data-allow-mismatch",Gb={0:"text",1:"children",2:"class",3:"style",4:"attribute"};function ja(t,e){if(e===0||e===1)for(;t&&!t.hasAttribute(_p);)t=t.parentElement;const n=t&&t.getAttribute(_p);if(n==null)return!1;if(n==="")return!0;{const s=n.split(",");return e===0&&s.includes("children")?!0:s.includes(Gb[e])}}il().requestIdleCallback;il().cancelIdleCallback;function Wb(t,e){if(ri(t)&&t.data==="["){let n=1,s=t.nextSibling;for(;s;){if(s.nodeType===1){if(e(s)===!1)break}else if(ri(s))if(s.data==="]"){if(--n===0)break}else s.data==="["&&n++;s=s.nextSibling}}else e(t)}const ss=t=>!!t.type.__asyncLoader;function Ac(t){Ie(t)&&(t={loader:t});const{loader:e,loadingComponent:n,errorComponent:s,delay:r=200,hydrate:i,timeout:o,suspensible:a=!0,onError:l}=t;let u=null,h,f=0;const p=()=>(f++,u=null,m()),m=()=>{let b;return u||(b=u=e().catch(v=>{if(v=v instanceof Error?v:new Error(String(v)),l)return new Promise((D,V)=>{l(v,()=>D(p()),()=>V(v),f+1)});throw v}).then(v=>b!==u&&u?u:(v&&(v.__esModule||v[Symbol.toStringTag]==="Module")&&(v=v.default),h=v,v)))};return ut({name:"AsyncComponentWrapper",__asyncLoader:m,__asyncHydrate(b,v,D){let V=!1;(v.bu||(v.bu=[])).push(()=>V=!0);const N=()=>{V||D()},_=i?()=>{const S=i(N,O=>Wb(b,O));S&&(v.bum||(v.bum=[])).push(S)}:N;h?_():m().then(()=>!v.isUnmounted&&_())},get __asyncResolved(){return h},setup(){const b=Nt;if(lf(b),h)return()=>qa(h,b);const v=_=>{u=null,xi(_,b,13,!s)};if(a&&b.suspense||wi)return m().then(_=>()=>qa(_,b)).catch(_=>(v(_),()=>s?we(s,{error:_}):null));const D=de(!1),V=de(),N=de(!!r);return r&&setTimeout(()=>{N.value=!1},r),o!=null&&setTimeout(()=>{if(!D.value&&!V.value){const _=new Error(`Async component timed out after ${o}ms.`);v(_),V.value=_}},o),m().then(()=>{D.value=!0,b.parent&&aa(b.parent.vnode)&&b.parent.update()}).catch(_=>{v(_),V.value=_}),()=>{if(D.value&&h)return qa(h,b);if(V.value&&s)return we(s,{error:V.value});if(n&&!N.value)return qa(n,b)}}})}function qa(t,e){const{ref:n,props:s,children:r,ce:i}=e.vnode,o=we(t,s,r);return o.ref=n,o.ce=i,delete e.vnode.ce,o}const aa=t=>t.type.__isKeepAlive,zb={name:"KeepAlive",__isKeepAlive:!0,props:{include:[String,RegExp,Array],exclude:[String,RegExp,Array],max:[String,Number]},setup(t,{slots:e}){const n=$r(),s=n.ctx;if(!s.renderer)return()=>{const N=e.default&&e.default();return N&&N.length===1?N[0]:N};const r=new Map,i=new Set;let o=null;const a=n.suspense,{renderer:{p:l,m:u,um:h,o:{createElement:f}}}=s,p=f("div");s.activate=(N,_,S,O,U)=>{const T=N.component;u(N,_,S,0,a),l(T.vnode,N,_,S,T,a,O,N.slotScopeIds,U),mt(()=>{T.isDeactivated=!1,T.a&&ui(T.a);const y=N.props&&N.props.onVnodeMounted;y&&Qt(y,T.parent,N)},a)},s.deactivate=N=>{const _=N.component;Sc(_.m),Sc(_.a),u(N,p,null,1,a),mt(()=>{_.da&&ui(_.da);const S=N.props&&N.props.onVnodeUnmounted;S&&Qt(S,_.parent,N),_.isDeactivated=!0},a)};function m(N){uu(N),h(N,n,a,!0)}function b(N){r.forEach((_,S)=>{const O=rh(ss(_)?_.type.__asyncResolved||{}:_.type);O&&!N(O)&&v(S)})}function v(N){const _=r.get(N);_&&(!o||!yn(_,o))?m(_):o&&uu(o),r.delete(N),i.delete(N)}xn(()=>[t.include,t.exclude],([N,_])=>{N&&b(S=>go(N,S)),_&&b(S=>!go(_,S))},{flush:"post",deep:!0});let D=null;const V=()=>{D!=null&&(Cc(n.subTree.type)?mt(()=>{r.set(D,Ga(n.subTree))},n.subTree.suspense):r.set(D,Ga(n.subTree)))};return Js(V),ly(V),ca(()=>{r.forEach(N=>{const{subTree:_,suspense:S}=n,O=Ga(_);if(N.type===O.type&&N.key===O.key){uu(O);const U=O.component.da;U&&mt(U,S);return}m(N)})}),()=>{if(D=null,!e.default)return o=null;const N=e.default(),_=N[0];if(N.length>1)return o=null,N;if(!Dr(_)||!(_.shapeFlag&4)&&!(_.shapeFlag&128))return o=null,_;let S=Ga(_);if(S.type===gt)return o=null,S;const O=S.type,U=rh(ss(S)?S.type.__asyncResolved||{}:O),{include:T,exclude:y,max:E}=t;if(T&&(!U||!go(T,U))||y&&U&&go(y,U))return S.shapeFlag&=-257,o=S,_;const R=S.key==null?O:S.key,P=r.get(R);return S.el&&(S=dn(S),_.shapeFlag&128&&(_.ssContent=S)),D=R,P?(S.el=P.el,S.component=P.component,S.transition&&Ei(S,S.transition),S.shapeFlag|=512,i.delete(R),i.add(R)):(i.add(R),E&&i.size>parseInt(E,10)&&v(i.values().next().value)),S.shapeFlag|=256,o=S,Cc(_.type)?_:S}}},Kb=zb;function go(t,e){return ve(t)?t.some(n=>go(n,e)):nt(t)?t.split(",").includes(e):$w(t)?(t.lastIndex=0,t.test(e)):!1}function oy(t,e){cy(t,"a",e)}function ay(t,e){cy(t,"da",e)}function cy(t,e,n=Nt){const s=t.__wdc||(t.__wdc=()=>{let r=n;for(;r;){if(r.isDeactivated)return;r=r.parent}return t()});if(ul(e,s,n),n){let r=n.parent;for(;r&&r.parent;)aa(r.parent.vnode)&&Qb(s,e,n,r),r=r.parent}}function Qb(t,e,n,s){const r=ul(e,t,s,!0);uy(()=>{Yh(s[e],r)},n)}function uu(t){t.shapeFlag&=-257,t.shapeFlag&=-513}function Ga(t){return t.shapeFlag&128?t.ssContent:t}function ul(t,e,n=Nt,s=!1){if(n){const r=n[t]||(n[t]=[]),i=e.__weh||(e.__weh=(...o)=>{cs();const a=la(n),l=An(e,n,t,o);return a(),ls(),l});return s?r.unshift(i):r.push(i),i}}const gs=t=>(e,n=Nt)=>{(!wi||t==="sp")&&ul(t,(...s)=>e(...s),n)},Yb=gs("bm"),Js=gs("m"),Jb=gs("bu"),ly=gs("u"),ca=gs("bum"),uy=gs("um"),Xb=gs("sp"),Zb=gs("rtg"),eI=gs("rtc");function hy(t,e=Nt){ul("ec",t,e)}const uf="components",tI="directives";function zM(t,e){return hf(uf,t,!0,e)||t}const fy=Symbol.for("v-ndc");function nI(t){return nt(t)?hf(uf,t,!1)||t:t||fy}function sI(t){return hf(tI,t)}function hf(t,e,n=!0,s=!1){const r=Dt||Nt;if(r){const i=r.type;if(t===uf){const a=rh(i,!1);if(a&&(a===e||a===pn(e)||a===sl(pn(e))))return i}const o=yp(r[t]||i[t],e)||yp(r.appContext[t],e);return!o&&s?i:o}}function yp(t,e){return t&&(t[e]||t[pn(e)]||t[sl(pn(e))])}function KM(t,e,n,s){let r;const i=n,o=ve(t);if(o||nt(t)){const a=o&&qs(t);let l=!1,u=!1;a&&(l=!an(t),u=Hn(t),t=al(t)),r=new Array(t.length);for(let h=0,f=t.length;h<f;h++)r[h]=e(l?u?vi(In(t[h])):In(t[h]):t[h],h,void 0,i)}else if(typeof t=="number"){r=new Array(t);for(let a=0;a<t;a++)r[a]=e(a+1,a,void 0,i)}else if(We(t))if(t[Symbol.iterator])r=Array.from(t,(a,l)=>e(a,l,void 0,i));else{const a=Object.keys(t);r=new Array(a.length);for(let l=0,u=a.length;l<u;l++){const h=a[l];r[l]=e(t[h],h,l,i)}}else r=[];return r}function rI(t,e,n={},s,r){if(Dt.ce||Dt.parent&&ss(Dt.parent)&&Dt.parent.ce){const u=Object.keys(n).length>0;return _e(),Jt(ze,null,[we("slot",n,s)],u?-2:64)}let i=t[e];i&&i._c&&(i._d=!1),_e();const o=i&&dy(i(n)),a=n.key||o&&o.key,l=Jt(ze,{key:(a&&!bn(a)?a:`_${e}`)+(!o&&s?"_fb":"")},o||[],o&&t._===1?64:-2);return i&&i._c&&(i._d=!0),l}function dy(t){return t.some(e=>Dr(e)?!(e.type===gt||e.type===ze&&!dy(e.children)):!0)?t:null}const Yu=t=>t?xy(t)?dl(t):Yu(t.parent):null,Ro=Ct(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>Yu(t.parent),$root:t=>Yu(t.root),$host:t=>t.ce,$emit:t=>t.emit,$options:t=>my(t),$forceUpdate:t=>t.f||(t.f=()=>{af(t.update)}),$nextTick:t=>t.n||(t.n=Ys.bind(t.proxy)),$watch:t=>xb.bind(t)}),hu=(t,e)=>t!==Ye&&!t.__isScriptSetup&&je(t,e),iI={get({_:t},e){if(e==="__v_skip")return!0;const{ctx:n,setupState:s,data:r,props:i,accessCache:o,type:a,appContext:l}=t;if(e[0]!=="$"){const p=o[e];if(p!==void 0)switch(p){case 1:return s[e];case 2:return r[e];case 4:return n[e];case 3:return i[e]}else{if(hu(s,e))return o[e]=1,s[e];if(r!==Ye&&je(r,e))return o[e]=2,r[e];if(je(i,e))return o[e]=3,i[e];if(n!==Ye&&je(n,e))return o[e]=4,n[e];Ju&&(o[e]=0)}}const u=Ro[e];let h,f;if(u)return e==="$attrs"&&Ut(t.attrs,"get",""),u(t);if((h=a.__cssModules)&&(h=h[e]))return h;if(n!==Ye&&je(n,e))return o[e]=4,n[e];if(f=l.config.globalProperties,je(f,e))return f[e]},set({_:t},e,n){const{data:s,setupState:r,ctx:i}=t;return hu(r,e)?(r[e]=n,!0):s!==Ye&&je(s,e)?(s[e]=n,!0):je(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(i[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:s,appContext:r,props:i,type:o}},a){let l;return!!(n[a]||t!==Ye&&a[0]!=="$"&&je(t,a)||hu(e,a)||je(i,a)||je(s,a)||je(Ro,a)||je(r.config.globalProperties,a)||(l=o.__cssModules)&&l[a])},defineProperty(t,e,n){return n.get!=null?t._.accessCache[e]=0:je(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}};function vp(t){return ve(t)?t.reduce((e,n)=>(e[n]=null,e),{}):t}let Ju=!0;function oI(t){const e=my(t),n=t.proxy,s=t.ctx;Ju=!1,e.beforeCreate&&Ep(e.beforeCreate,t,"bc");const{data:r,computed:i,methods:o,watch:a,provide:l,inject:u,created:h,beforeMount:f,mounted:p,beforeUpdate:m,updated:b,activated:v,deactivated:D,beforeDestroy:V,beforeUnmount:N,destroyed:_,unmounted:S,render:O,renderTracked:U,renderTriggered:T,errorCaptured:y,serverPrefetch:E,expose:R,inheritAttrs:P,components:C,directives:A,filters:pe}=e;if(u&&aI(u,s,null),o)for(const he in o){const oe=o[he];Ie(oe)&&(s[he]=oe.bind(n))}if(r){const he=r.call(n,n);We(he)&&(t.data=ir(he))}if(Ju=!0,i)for(const he in i){const oe=i[he],Re=Ie(oe)?oe.bind(n,n):Ie(oe.get)?oe.get.bind(n,n):Mn,De=!Ie(oe)&&Ie(oe.set)?oe.set.bind(n):Mn,Z=Fe({get:Re,set:De});Object.defineProperty(s,he,{enumerable:!0,configurable:!0,get:()=>Z.value,set:x=>Z.value=x})}if(a)for(const he in a)py(a[he],s,n,he);if(l){const he=Ie(l)?l.call(n):l;Reflect.ownKeys(he).forEach(oe=>{ns(oe,he[oe])})}h&&Ep(h,t,"c");function le(he,oe){ve(oe)?oe.forEach(Re=>he(Re.bind(n))):oe&&he(oe.bind(n))}if(le(Yb,f),le(Js,p),le(Jb,m),le(ly,b),le(oy,v),le(ay,D),le(hy,y),le(eI,U),le(Zb,T),le(ca,N),le(uy,S),le(Xb,E),ve(R))if(R.length){const he=t.exposed||(t.exposed={});R.forEach(oe=>{Object.defineProperty(he,oe,{get:()=>n[oe],set:Re=>n[oe]=Re,enumerable:!0})})}else t.exposed||(t.exposed={});O&&t.render===Mn&&(t.render=O),P!=null&&(t.inheritAttrs=P),C&&(t.components=C),A&&(t.directives=A),E&&lf(t)}function aI(t,e,n=Mn){ve(t)&&(t=Xu(t));for(const s in t){const r=t[s];let i;We(r)?"default"in r?i=Vt(r.from||s,r.default,!0):i=Vt(r.from||s):i=Vt(r),vt(i)?Object.defineProperty(e,s,{enumerable:!0,configurable:!0,get:()=>i.value,set:o=>i.value=o}):e[s]=i}}function Ep(t,e,n){An(ve(t)?t.map(s=>s.bind(e.proxy)):t.bind(e.proxy),e,n)}function py(t,e,n,s){let r=s.includes(".")?Y_(n,s):()=>n[s];if(nt(t)){const i=e[t];Ie(i)&&xn(r,i)}else if(Ie(t))xn(r,t.bind(n));else if(We(t))if(ve(t))t.forEach(i=>py(i,e,n,s));else{const i=Ie(t.handler)?t.handler.bind(n):e[t.handler];Ie(i)&&xn(r,i,t)}}function my(t){const e=t.type,{mixins:n,extends:s}=e,{mixins:r,optionsCache:i,config:{optionMergeStrategies:o}}=t.appContext,a=i.get(e);let l;return a?l=a:!r.length&&!n&&!s?l=e:(l={},r.length&&r.forEach(u=>Rc(l,u,o,!0)),Rc(l,e,o)),We(e)&&i.set(e,l),l}function Rc(t,e,n,s=!1){const{mixins:r,extends:i}=e;i&&Rc(t,i,n,!0),r&&r.forEach(o=>Rc(t,o,n,!0));for(const o in e)if(!(s&&o==="expose")){const a=cI[o]||n&&n[o];t[o]=a?a(t[o],e[o]):e[o]}return t}const cI={data:Tp,props:wp,emits:wp,methods:_o,computed:_o,beforeCreate:jt,created:jt,beforeMount:jt,mounted:jt,beforeUpdate:jt,updated:jt,beforeDestroy:jt,beforeUnmount:jt,destroyed:jt,unmounted:jt,activated:jt,deactivated:jt,errorCaptured:jt,serverPrefetch:jt,components:_o,directives:_o,watch:uI,provide:Tp,inject:lI};function Tp(t,e){return e?t?function(){return Ct(Ie(t)?t.call(this,this):t,Ie(e)?e.call(this,this):e)}:e:t}function lI(t,e){return _o(Xu(t),Xu(e))}function Xu(t){if(ve(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function jt(t,e){return t?[...new Set([].concat(t,e))]:e}function _o(t,e){return t?Ct(Object.create(null),t,e):e}function wp(t,e){return t?ve(t)&&ve(e)?[...new Set([...t,...e])]:Ct(Object.create(null),vp(t),vp(e??{})):e}function uI(t,e){if(!t)return e;if(!e)return t;const n=Ct(Object.create(null),t);for(const s in e)n[s]=jt(t[s],e[s]);return n}function gy(){return{app:null,config:{isNativeTag:T_,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let hI=0;function fI(t,e){return function(s,r=null){Ie(s)||(s=Ct({},s)),r!=null&&!We(r)&&(r=null);const i=gy(),o=new WeakSet,a=[];let l=!1;const u=i.app={_uid:hI++,_component:s,_props:r,_container:null,_context:i,_instance:null,version:qI,get config(){return i.config},set config(h){},use(h,...f){return o.has(h)||(h&&Ie(h.install)?(o.add(h),h.install(u,...f)):Ie(h)&&(o.add(h),h(u,...f))),u},mixin(h){return i.mixins.includes(h)||i.mixins.push(h),u},component(h,f){return f?(i.components[h]=f,u):i.components[h]},directive(h,f){return f?(i.directives[h]=f,u):i.directives[h]},mount(h,f,p){if(!l){const m=u._ceVNode||we(s,r);return m.appContext=i,p===!0?p="svg":p===!1&&(p=void 0),f&&e?e(m,h):t(m,h,p),l=!0,u._container=h,h.__vue_app__=u,dl(m.component)}},onUnmount(h){a.push(h)},unmount(){l&&(An(a,u._instance,16),t(null,u._container),delete u._container.__vue_app__)},provide(h,f){return i.provides[h]=f,u},runWithContext(h){const f=Cr;Cr=u;try{return h()}finally{Cr=f}}};return u}}let Cr=null;const dI=(t,e)=>e==="modelValue"||e==="model-value"?t.modelModifiers:t[`${e}Modifiers`]||t[`${pn(e)}Modifiers`]||t[`${rr(e)}Modifiers`];function pI(t,e,...n){if(t.isUnmounted)return;const s=t.vnode.props||Ye;let r=n;const i=e.startsWith("update:"),o=i&&dI(s,e.slice(7));o&&(o.trim&&(r=n.map(h=>nt(h)?h.trim():h)),o.number&&(r=n.map(rl)));let a,l=s[a=ru(e)]||s[a=ru(pn(e))];!l&&i&&(l=s[a=ru(rr(e))]),l&&An(l,t,6,r);const u=s[a+"Once"];if(u){if(!t.emitted)t.emitted={};else if(t.emitted[a])return;t.emitted[a]=!0,An(u,t,6,r)}}const mI=new WeakMap;function _y(t,e,n=!1){const s=n?mI:e.emitsCache,r=s.get(t);if(r!==void 0)return r;const i=t.emits;let o={},a=!1;if(!Ie(t)){const l=u=>{const h=_y(u,e,!0);h&&(a=!0,Ct(o,h))};!n&&e.mixins.length&&e.mixins.forEach(l),t.extends&&l(t.extends),t.mixins&&t.mixins.forEach(l)}return!i&&!a?(We(t)&&s.set(t,null),null):(ve(i)?i.forEach(l=>o[l]=null):Ct(o,i),We(t)&&s.set(t,o),o)}function hl(t,e){return!t||!ra(e)?!1:(e=e.slice(2).replace(/Once$/,""),je(t,e[0].toLowerCase()+e.slice(1))||je(t,rr(e))||je(t,e))}function fu(t){const{type:e,vnode:n,proxy:s,withProxy:r,propsOptions:[i],slots:o,attrs:a,emit:l,render:u,renderCache:h,props:f,data:p,setupState:m,ctx:b,inheritAttrs:v}=t,D=bc(t);let V,N;try{if(n.shapeFlag&4){const S=r||s,O=S;V=sn(u.call(O,S,h,f,m,p,b)),N=a}else{const S=e;V=sn(S.length>1?S(f,{attrs:a,slots:o,emit:l}):S(f,null)),N=e.props?a:_I(a)}}catch(S){Co.length=0,xi(S,t,1),V=we(gt)}let _=V;if(N&&v!==!1){const S=Object.keys(N),{shapeFlag:O}=_;S.length&&O&7&&(i&&S.some(Qh)&&(N=yI(N,i)),_=dn(_,N,!1,!0))}return n.dirs&&(_=dn(_,null,!1,!0),_.dirs=_.dirs?_.dirs.concat(n.dirs):n.dirs),n.transition&&Ei(_,n.transition),V=_,bc(D),V}function gI(t,e=!0){let n;for(let s=0;s<t.length;s++){const r=t[s];if(Dr(r)){if(r.type!==gt||r.children==="v-if"){if(n)return;n=r}}else return}return n}const _I=t=>{let e;for(const n in t)(n==="class"||n==="style"||ra(n))&&((e||(e={}))[n]=t[n]);return e},yI=(t,e)=>{const n={};for(const s in t)(!Qh(s)||!(s.slice(9)in e))&&(n[s]=t[s]);return n};function vI(t,e,n){const{props:s,children:r,component:i}=t,{props:o,children:a,patchFlag:l}=e,u=i.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&l>=0){if(l&1024)return!0;if(l&16)return s?bp(s,o,u):!!o;if(l&8){const h=e.dynamicProps;for(let f=0;f<h.length;f++){const p=h[f];if(o[p]!==s[p]&&!hl(u,p))return!0}}}else return(r||a)&&(!a||!a.$stable)?!0:s===o?!1:s?o?bp(s,o,u):!0:!!o;return!1}function bp(t,e,n){const s=Object.keys(e);if(s.length!==Object.keys(t).length)return!0;for(let r=0;r<s.length;r++){const i=s[r];if(e[i]!==t[i]&&!hl(n,i))return!0}return!1}function fl({vnode:t,parent:e},n){for(;e;){const s=e.subTree;if(s.suspense&&s.suspense.activeBranch===t&&(s.el=t.el),s===t)(t=e.vnode).el=n,e=e.parent;else break}}const yy={},vy=()=>Object.create(yy),Ey=t=>Object.getPrototypeOf(t)===yy;function EI(t,e,n,s=!1){const r={},i=vy();t.propsDefaults=Object.create(null),Ty(t,e,r,i);for(const o in t.propsOptions[0])o in r||(r[o]=void 0);n?t.props=s?r:Ln(r):t.type.props?t.props=r:t.props=i,t.attrs=i}function TI(t,e,n,s){const{props:r,attrs:i,vnode:{patchFlag:o}}=t,a=Ue(r),[l]=t.propsOptions;let u=!1;if((s||o>0)&&!(o&16)){if(o&8){const h=t.vnode.dynamicProps;for(let f=0;f<h.length;f++){let p=h[f];if(hl(t.emitsOptions,p))continue;const m=e[p];if(l)if(je(i,p))m!==i[p]&&(i[p]=m,u=!0);else{const b=pn(p);r[b]=Zu(l,a,b,m,t,!1)}else m!==i[p]&&(i[p]=m,u=!0)}}}else{Ty(t,e,r,i)&&(u=!0);let h;for(const f in a)(!e||!je(e,f)&&((h=rr(f))===f||!je(e,h)))&&(l?n&&(n[f]!==void 0||n[h]!==void 0)&&(r[f]=Zu(l,a,f,void 0,t,!0)):delete r[f]);if(i!==a)for(const f in i)(!e||!je(e,f))&&(delete i[f],u=!0)}u&&Xn(t.attrs,"set","")}function Ty(t,e,n,s){const[r,i]=t.propsOptions;let o=!1,a;if(e)for(let l in e){if(li(l))continue;const u=e[l];let h;r&&je(r,h=pn(l))?!i||!i.includes(h)?n[h]=u:(a||(a={}))[h]=u:hl(t.emitsOptions,l)||(!(l in s)||u!==s[l])&&(s[l]=u,o=!0)}if(i){const l=Ue(n),u=a||Ye;for(let h=0;h<i.length;h++){const f=i[h];n[f]=Zu(r,l,f,u[f],t,!je(u,f))}}return o}function Zu(t,e,n,s,r,i){const o=t[n];if(o!=null){const a=je(o,"default");if(a&&s===void 0){const l=o.default;if(o.type!==Function&&!o.skipFactory&&Ie(l)){const{propsDefaults:u}=r;if(n in u)s=u[n];else{const h=la(r);s=u[n]=l.call(null,e),h()}}else s=l;r.ce&&r.ce._setProp(n,s)}o[0]&&(i&&!a?s=!1:o[1]&&(s===""||s===rr(n))&&(s=!0))}return s}const wI=new WeakMap;function wy(t,e,n=!1){const s=n?wI:e.propsCache,r=s.get(t);if(r)return r;const i=t.props,o={},a=[];let l=!1;if(!Ie(t)){const h=f=>{l=!0;const[p,m]=wy(f,e,!0);Ct(o,p),m&&a.push(...m)};!n&&e.mixins.length&&e.mixins.forEach(h),t.extends&&h(t.extends),t.mixins&&t.mixins.forEach(h)}if(!i&&!l)return We(t)&&s.set(t,ai),ai;if(ve(i))for(let h=0;h<i.length;h++){const f=pn(i[h]);Ip(f)&&(o[f]=Ye)}else if(i)for(const h in i){const f=pn(h);if(Ip(f)){const p=i[h],m=o[f]=ve(p)||Ie(p)?{type:p}:Ct({},p),b=m.type;let v=!1,D=!0;if(ve(b))for(let V=0;V<b.length;++V){const N=b[V],_=Ie(N)&&N.name;if(_==="Boolean"){v=!0;break}else _==="String"&&(D=!1)}else v=Ie(b)&&b.name==="Boolean";m[0]=v,m[1]=D,(v||je(m,"default"))&&a.push(f)}}const u=[o,a];return We(t)&&s.set(t,u),u}function Ip(t){return t[0]!=="$"&&!li(t)}const ff=t=>t==="_"||t==="_ctx"||t==="$stable",df=t=>ve(t)?t.map(sn):[sn(t)],bI=(t,e,n)=>{if(e._n)return e;const s=cn((...r)=>df(e(...r)),n);return s._c=!1,s},by=(t,e,n)=>{const s=t._ctx;for(const r in t){if(ff(r))continue;const i=t[r];if(Ie(i))e[r]=bI(r,i,s);else if(i!=null){const o=df(i);e[r]=()=>o}}},Iy=(t,e)=>{const n=df(e);t.slots.default=()=>n},Ay=(t,e,n)=>{for(const s in e)(n||!ff(s))&&(t[s]=e[s])},II=(t,e,n)=>{const s=t.slots=vy();if(t.vnode.shapeFlag&32){const r=e._;r?(Ay(s,e,n),n&&I_(s,"_",r,!0)):by(e,s)}else e&&Iy(t,e)},AI=(t,e,n)=>{const{vnode:s,slots:r}=t;let i=!0,o=Ye;if(s.shapeFlag&32){const a=e._;a?n&&a===1?i=!1:Ay(r,e,n):(i=!e.$stable,by(e,r)),o=e}else e&&(Iy(t,e),o={default:1});if(i)for(const a in r)!ff(a)&&o[a]==null&&delete r[a]},mt=Ny;function RI(t){return Ry(t)}function SI(t){return Ry(t,qb)}function Ry(t,e){const n=il();n.__VUE__=!0;const{insert:s,remove:r,patchProp:i,createElement:o,createText:a,createComment:l,setText:u,setElementText:h,parentNode:f,nextSibling:p,setScopeId:m=Mn,insertStaticContent:b}=t,v=(w,k,M,W=null,B=null,$=null,X=void 0,te=null,ie=!!k.dynamicChildren)=>{if(w===k)return;w&&!yn(w,k)&&(W=L(w),x(w,B,$,!0),w=null),k.patchFlag===-2&&(ie=!1,k.dynamicChildren=null);const{type:re,ref:Ee,shapeFlag:fe}=k;switch(re){case Pr:D(w,k,M,W);break;case gt:V(w,k,M,W);break;case So:w==null&&N(k,M,W,X);break;case ze:C(w,k,M,W,B,$,X,te,ie);break;default:fe&1?O(w,k,M,W,B,$,X,te,ie):fe&6?A(w,k,M,W,B,$,X,te,ie):(fe&64||fe&128)&&re.process(w,k,M,W,B,$,X,te,ie,ne)}Ee!=null&&B?fi(Ee,w&&w.ref,$,k||w,!k):Ee==null&&w&&w.ref!=null&&fi(w.ref,null,$,w,!0)},D=(w,k,M,W)=>{if(w==null)s(k.el=a(k.children),M,W);else{const B=k.el=w.el;k.children!==w.children&&u(B,k.children)}},V=(w,k,M,W)=>{w==null?s(k.el=l(k.children||""),M,W):k.el=w.el},N=(w,k,M,W)=>{[w.el,w.anchor]=b(w.children,k,M,W,w.el,w.anchor)},_=({el:w,anchor:k},M,W)=>{let B;for(;w&&w!==k;)B=p(w),s(w,M,W),w=B;s(k,M,W)},S=({el:w,anchor:k})=>{let M;for(;w&&w!==k;)M=p(w),r(w),w=M;r(k)},O=(w,k,M,W,B,$,X,te,ie)=>{if(k.type==="svg"?X="svg":k.type==="math"&&(X="mathml"),w==null)U(k,M,W,B,$,X,te,ie);else{const re=w.el&&w.el._isVueCE?w.el:null;try{re&&re._beginPatch(),E(w,k,B,$,X,te,ie)}finally{re&&re._endPatch()}}},U=(w,k,M,W,B,$,X,te)=>{let ie,re;const{props:Ee,shapeFlag:fe,transition:ge,dirs:Se}=w;if(ie=w.el=o(w.type,$,Ee&&Ee.is,Ee),fe&8?h(ie,w.children):fe&16&&y(w.children,ie,null,W,B,du(w,$),X,te),Se&&Dn(w,null,W,"created"),T(ie,w,w.scopeId,X,W),Ee){for(const $e in Ee)$e!=="value"&&!li($e)&&i(ie,$e,null,Ee[$e],$,W);"value"in Ee&&i(ie,"value",null,Ee.value,$),(re=Ee.onVnodeBeforeMount)&&Qt(re,W,w)}Se&&Dn(w,null,W,"beforeMount");const Oe=Sy(B,ge);Oe&&ge.beforeEnter(ie),s(ie,k,M),((re=Ee&&Ee.onVnodeMounted)||Oe||Se)&&mt(()=>{re&&Qt(re,W,w),Oe&&ge.enter(ie),Se&&Dn(w,null,W,"mounted")},B)},T=(w,k,M,W,B)=>{if(M&&m(w,M),W)for(let $=0;$<W.length;$++)m(w,W[$]);if(B){let $=B.subTree;if(k===$||Cc($.type)&&($.ssContent===k||$.ssFallback===k)){const X=B.vnode;T(w,X,X.scopeId,X.slotScopeIds,B.parent)}}},y=(w,k,M,W,B,$,X,te,ie=0)=>{for(let re=ie;re<w.length;re++){const Ee=w[re]=te?Os(w[re]):sn(w[re]);v(null,Ee,k,M,W,B,$,X,te)}},E=(w,k,M,W,B,$,X)=>{const te=k.el=w.el;let{patchFlag:ie,dynamicChildren:re,dirs:Ee}=k;ie|=w.patchFlag&16;const fe=w.props||Ye,ge=k.props||Ye;let Se;if(M&&mr(M,!1),(Se=ge.onVnodeBeforeUpdate)&&Qt(Se,M,k,w),Ee&&Dn(k,w,M,"beforeUpdate"),M&&mr(M,!0),(fe.innerHTML&&ge.innerHTML==null||fe.textContent&&ge.textContent==null)&&h(te,""),re?R(w.dynamicChildren,re,te,M,W,du(k,B),$):X||oe(w,k,te,null,M,W,du(k,B),$,!1),ie>0){if(ie&16)P(te,fe,ge,M,B);else if(ie&2&&fe.class!==ge.class&&i(te,"class",null,ge.class,B),ie&4&&i(te,"style",fe.style,ge.style,B),ie&8){const Oe=k.dynamicProps;for(let $e=0;$e<Oe.length;$e++){const Be=Oe[$e],Lt=fe[Be],Et=ge[Be];(Et!==Lt||Be==="value")&&i(te,Be,Lt,Et,B,M)}}ie&1&&w.children!==k.children&&h(te,k.children)}else!X&&re==null&&P(te,fe,ge,M,B);((Se=ge.onVnodeUpdated)||Ee)&&mt(()=>{Se&&Qt(Se,M,k,w),Ee&&Dn(k,w,M,"updated")},W)},R=(w,k,M,W,B,$,X)=>{for(let te=0;te<k.length;te++){const ie=w[te],re=k[te],Ee=ie.el&&(ie.type===ze||!yn(ie,re)||ie.shapeFlag&198)?f(ie.el):M;v(ie,re,Ee,null,W,B,$,X,!0)}},P=(w,k,M,W,B)=>{if(k!==M){if(k!==Ye)for(const $ in k)!li($)&&!($ in M)&&i(w,$,k[$],null,B,W);for(const $ in M){if(li($))continue;const X=M[$],te=k[$];X!==te&&$!=="value"&&i(w,$,te,X,B,W)}"value"in M&&i(w,"value",k.value,M.value,B)}},C=(w,k,M,W,B,$,X,te,ie)=>{const re=k.el=w?w.el:a(""),Ee=k.anchor=w?w.anchor:a("");let{patchFlag:fe,dynamicChildren:ge,slotScopeIds:Se}=k;Se&&(te=te?te.concat(Se):Se),w==null?(s(re,M,W),s(Ee,M,W),y(k.children||[],M,Ee,B,$,X,te,ie)):fe>0&&fe&64&&ge&&w.dynamicChildren&&w.dynamicChildren.length===ge.length?(R(w.dynamicChildren,ge,M,B,$,X,te),(k.key!=null||B&&k===B.subTree)&&pf(w,k,!0)):oe(w,k,M,Ee,B,$,X,te,ie)},A=(w,k,M,W,B,$,X,te,ie)=>{k.slotScopeIds=te,w==null?k.shapeFlag&512?B.ctx.activate(k,M,W,X,ie):pe(k,M,W,B,$,X,ie):Te(w,k,ie)},pe=(w,k,M,W,B,$,X)=>{const te=w.component=FI(w,W,B);if(aa(w)&&(te.ctx.renderer=ne),UI(te,!1,X),te.asyncDep){if(B&&B.registerDep(te,le,X),!w.el){const ie=te.subTree=we(gt);V(null,ie,k,M),w.placeholder=ie.el}}else le(te,w,k,M,B,$,X)},Te=(w,k,M)=>{const W=k.component=w.component;if(vI(w,k,M))if(W.asyncDep&&!W.asyncResolved){he(W,k,M);return}else W.next=k,W.update();else k.el=w.el,W.vnode=k},le=(w,k,M,W,B,$,X)=>{const te=()=>{if(w.isMounted){let{next:fe,bu:ge,u:Se,parent:Oe,vnode:$e}=w;{const Tt=Cy(w);if(Tt){fe&&(fe.el=$e.el,he(w,fe,X)),Tt.asyncDep.then(()=>{w.isUnmounted||te()});return}}let Be=fe,Lt;mr(w,!1),fe?(fe.el=$e.el,he(w,fe,X)):fe=$e,ge&&ui(ge),(Lt=fe.props&&fe.props.onVnodeBeforeUpdate)&&Qt(Lt,Oe,fe,$e),mr(w,!0);const Et=fu(w),Kt=w.subTree;w.subTree=Et,v(Kt,Et,f(Kt.el),L(Kt),w,B,$),fe.el=Et.el,Be===null&&fl(w,Et.el),Se&&mt(Se,B),(Lt=fe.props&&fe.props.onVnodeUpdated)&&mt(()=>Qt(Lt,Oe,fe,$e),B)}else{let fe;const{el:ge,props:Se}=k,{bm:Oe,m:$e,parent:Be,root:Lt,type:Et}=w,Kt=ss(k);if(mr(w,!1),Oe&&ui(Oe),!Kt&&(fe=Se&&Se.onVnodeBeforeMount)&&Qt(fe,Be,k),mr(w,!0),ge&&ue){const Tt=()=>{w.subTree=fu(w),ue(ge,w.subTree,w,B,null)};Kt&&Et.__asyncHydrate?Et.__asyncHydrate(ge,w,Tt):Tt()}else{Lt.ce&&Lt.ce._def.shadowRoot!==!1&&Lt.ce._injectChildStyle(Et);const Tt=w.subTree=fu(w);v(null,Tt,M,W,w,B,$),k.el=Tt.el}if($e&&mt($e,B),!Kt&&(fe=Se&&Se.onVnodeMounted)){const Tt=k;mt(()=>Qt(fe,Be,Tt),B)}(k.shapeFlag&256||Be&&ss(Be.vnode)&&Be.vnode.shapeFlag&256)&&w.a&&mt(w.a,B),w.isMounted=!0,k=M=W=null}};w.scope.on();const ie=w.effect=new k_(te);w.scope.off();const re=w.update=ie.run.bind(ie),Ee=w.job=ie.runIfDirty.bind(ie);Ee.i=w,Ee.id=w.uid,ie.scheduler=()=>af(Ee),mr(w,!0),re()},he=(w,k,M)=>{k.component=w;const W=w.vnode.props;w.vnode=k,w.next=null,TI(w,k.props,W,M),AI(w,k.children,M),cs(),up(w),ls()},oe=(w,k,M,W,B,$,X,te,ie=!1)=>{const re=w&&w.children,Ee=w?w.shapeFlag:0,fe=k.children,{patchFlag:ge,shapeFlag:Se}=k;if(ge>0){if(ge&128){De(re,fe,M,W,B,$,X,te,ie);return}else if(ge&256){Re(re,fe,M,W,B,$,X,te,ie);return}}Se&8?(Ee&16&&ee(re,B,$),fe!==re&&h(M,fe)):Ee&16?Se&16?De(re,fe,M,W,B,$,X,te,ie):ee(re,B,$,!0):(Ee&8&&h(M,""),Se&16&&y(fe,M,W,B,$,X,te,ie))},Re=(w,k,M,W,B,$,X,te,ie)=>{w=w||ai,k=k||ai;const re=w.length,Ee=k.length,fe=Math.min(re,Ee);let ge;for(ge=0;ge<fe;ge++){const Se=k[ge]=ie?Os(k[ge]):sn(k[ge]);v(w[ge],Se,M,null,B,$,X,te,ie)}re>Ee?ee(w,B,$,!0,!1,fe):y(k,M,W,B,$,X,te,ie,fe)},De=(w,k,M,W,B,$,X,te,ie)=>{let re=0;const Ee=k.length;let fe=w.length-1,ge=Ee-1;for(;re<=fe&&re<=ge;){const Se=w[re],Oe=k[re]=ie?Os(k[re]):sn(k[re]);if(yn(Se,Oe))v(Se,Oe,M,null,B,$,X,te,ie);else break;re++}for(;re<=fe&&re<=ge;){const Se=w[fe],Oe=k[ge]=ie?Os(k[ge]):sn(k[ge]);if(yn(Se,Oe))v(Se,Oe,M,null,B,$,X,te,ie);else break;fe--,ge--}if(re>fe){if(re<=ge){const Se=ge+1,Oe=Se<Ee?k[Se].el:W;for(;re<=ge;)v(null,k[re]=ie?Os(k[re]):sn(k[re]),M,Oe,B,$,X,te,ie),re++}}else if(re>ge)for(;re<=fe;)x(w[re],B,$,!0),re++;else{const Se=re,Oe=re,$e=new Map;for(re=Oe;re<=ge;re++){const ht=k[re]=ie?Os(k[re]):sn(k[re]);ht.key!=null&&$e.set(ht.key,re)}let Be,Lt=0;const Et=ge-Oe+1;let Kt=!1,Tt=0;const Wn=new Array(Et);for(re=0;re<Et;re++)Wn[re]=0;for(re=Se;re<=fe;re++){const ht=w[re];if(Lt>=Et){x(ht,B,$,!0);continue}let tn;if(ht.key!=null)tn=$e.get(ht.key);else for(Be=Oe;Be<=ge;Be++)if(Wn[Be-Oe]===0&&yn(ht,k[Be])){tn=Be;break}tn===void 0?x(ht,B,$,!0):(Wn[tn-Oe]=re+1,tn>=Tt?Tt=tn:Kt=!0,v(ht,k[tn],M,null,B,$,X,te,ie),Lt++)}const Wr=Kt?CI(Wn):ai;for(Be=Wr.length-1,re=Et-1;re>=0;re--){const ht=Oe+re,tn=k[ht],ur=k[ht+1],Qi=ht+1<Ee?ur.el||Py(ur):W;Wn[re]===0?v(null,tn,M,Qi,B,$,X,te,ie):Kt&&(Be<0||re!==Wr[Be]?Z(tn,M,Qi,2):Be--)}}},Z=(w,k,M,W,B=null)=>{const{el:$,type:X,transition:te,children:ie,shapeFlag:re}=w;if(re&6){Z(w.component.subTree,k,M,W);return}if(re&128){w.suspense.move(k,M,W);return}if(re&64){X.move(w,k,M,ne);return}if(X===ze){s($,k,M);for(let fe=0;fe<ie.length;fe++)Z(ie[fe],k,M,W);s(w.anchor,k,M);return}if(X===So){_(w,k,M);return}if(W!==2&&re&1&&te)if(W===0)te.beforeEnter($),s($,k,M),mt(()=>te.enter($),B);else{const{leave:fe,delayLeave:ge,afterLeave:Se}=te,Oe=()=>{w.ctx.isUnmounted?r($):s($,k,M)},$e=()=>{$._isLeaving&&$[Jn](!0),fe($,()=>{Oe(),Se&&Se()})};ge?ge($,Oe,$e):$e()}else s($,k,M)},x=(w,k,M,W=!1,B=!1)=>{const{type:$,props:X,ref:te,children:ie,dynamicChildren:re,shapeFlag:Ee,patchFlag:fe,dirs:ge,cacheIndex:Se}=w;if(fe===-2&&(B=!1),te!=null&&(cs(),fi(te,null,M,w,!0),ls()),Se!=null&&(k.renderCache[Se]=void 0),Ee&256){k.ctx.deactivate(w);return}const Oe=Ee&1&&ge,$e=!ss(w);let Be;if($e&&(Be=X&&X.onVnodeBeforeUnmount)&&Qt(Be,k,w),Ee&6)z(w.component,M,W);else{if(Ee&128){w.suspense.unmount(M,W);return}Oe&&Dn(w,null,k,"beforeUnmount"),Ee&64?w.type.remove(w,k,M,ne,W):re&&!re.hasOnce&&($!==ze||fe>0&&fe&64)?ee(re,k,M,!1,!0):($===ze&&fe&384||!B&&Ee&16)&&ee(ie,k,M),W&&Q(w)}($e&&(Be=X&&X.onVnodeUnmounted)||Oe)&&mt(()=>{Be&&Qt(Be,k,w),Oe&&Dn(w,null,k,"unmounted")},M)},Q=w=>{const{type:k,el:M,anchor:W,transition:B}=w;if(k===ze){G(M,W);return}if(k===So){S(w);return}const $=()=>{r(M),B&&!B.persisted&&B.afterLeave&&B.afterLeave()};if(w.shapeFlag&1&&B&&!B.persisted){const{leave:X,delayLeave:te}=B,ie=()=>X(M,$);te?te(w.el,$,ie):ie()}else $()},G=(w,k)=>{let M;for(;w!==k;)M=p(w),r(w),w=M;r(k)},z=(w,k,M)=>{const{bum:W,scope:B,job:$,subTree:X,um:te,m:ie,a:re}=w;Sc(ie),Sc(re),W&&ui(W),B.stop(),$&&($.flags|=8,x(X,w,k,M)),te&&mt(te,k),mt(()=>{w.isUnmounted=!0},k)},ee=(w,k,M,W=!1,B=!1,$=0)=>{for(let X=$;X<w.length;X++)x(w[X],k,M,W,B)},L=w=>{if(w.shapeFlag&6)return L(w.component.subTree);if(w.shapeFlag&128)return w.suspense.next();const k=p(w.anchor||w.el),M=k&&k[J_];return M?p(M):k};let q=!1;const Y=(w,k,M)=>{let W;w==null?k._vnode&&(x(k._vnode,null,null,!0),W=k._vnode.component):v(k._vnode||null,w,k,null,null,null,M),k._vnode=w,q||(q=!0,up(W),wc(),q=!1)},ne={p:v,um:x,m:Z,r:Q,mt:pe,mc:y,pc:oe,pbc:R,n:L,o:t};let se,ue;return e&&([se,ue]=e(ne)),{render:Y,hydrate:se,createApp:fI(Y,se)}}function du({type:t,props:e},n){return n==="svg"&&t==="foreignObject"||n==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:n}function mr({effect:t,job:e},n){n?(t.flags|=32,e.flags|=4):(t.flags&=-33,e.flags&=-5)}function Sy(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function pf(t,e,n=!1){const s=t.children,r=e.children;if(ve(s)&&ve(r))for(let i=0;i<s.length;i++){const o=s[i];let a=r[i];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=r[i]=Os(r[i]),a.el=o.el),!n&&a.patchFlag!==-2&&pf(o,a)),a.type===Pr&&(a.patchFlag!==-1?a.el=o.el:a.__elIndex=i+(t.type===ze?1:0)),a.type===gt&&!a.el&&(a.el=o.el)}}function CI(t){const e=t.slice(),n=[0];let s,r,i,o,a;const l=t.length;for(s=0;s<l;s++){const u=t[s];if(u!==0){if(r=n[n.length-1],t[r]<u){e[s]=r,n.push(s);continue}for(i=0,o=n.length-1;i<o;)a=i+o>>1,t[n[a]]<u?i=a+1:o=a;u<t[n[i]]&&(i>0&&(e[s]=n[i-1]),n[i]=s)}}for(i=n.length,o=n[i-1];i-- >0;)n[i]=o,o=e[o];return n}function Cy(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:Cy(e)}function Sc(t){if(t)for(let e=0;e<t.length;e++)t[e].flags|=8}function Py(t){if(t.placeholder)return t.placeholder;const e=t.component;return e?Py(e.subTree):null}const Cc=t=>t.__isSuspense;let eh=0;const PI={name:"Suspense",__isSuspense:!0,process(t,e,n,s,r,i,o,a,l,u){if(t==null)kI(e,n,s,r,i,o,a,l,u);else{if(i&&i.deps>0&&!t.suspense.isInFallback){e.suspense=t.suspense,e.suspense.vnode=e,e.el=t.el;return}NI(t,e,n,s,r,o,a,l,u)}},hydrate:DI,normalize:OI},mf=PI;function jo(t,e){const n=t.props&&t.props[e];Ie(n)&&n()}function kI(t,e,n,s,r,i,o,a,l){const{p:u,o:{createElement:h}}=l,f=h("div"),p=t.suspense=ky(t,r,s,e,f,n,i,o,a,l);u(null,p.pendingBranch=t.ssContent,f,null,s,p,i,o),p.deps>0?(jo(t,"onPending"),jo(t,"onFallback"),u(null,t.ssFallback,e,n,s,null,i,o),di(p,t.ssFallback)):p.resolve(!1,!0)}function NI(t,e,n,s,r,i,o,a,{p:l,um:u,o:{createElement:h}}){const f=e.suspense=t.suspense;f.vnode=e,e.el=t.el;const p=e.ssContent,m=e.ssFallback,{activeBranch:b,pendingBranch:v,isInFallback:D,isHydrating:V}=f;if(v)f.pendingBranch=p,yn(v,p)?(l(v,p,f.hiddenContainer,null,r,f,i,o,a),f.deps<=0?f.resolve():D&&(V||(l(b,m,n,s,r,null,i,o,a),di(f,m)))):(f.pendingId=eh++,V?(f.isHydrating=!1,f.activeBranch=v):u(v,r,f),f.deps=0,f.effects.length=0,f.hiddenContainer=h("div"),D?(l(null,p,f.hiddenContainer,null,r,f,i,o,a),f.deps<=0?f.resolve():(l(b,m,n,s,r,null,i,o,a),di(f,m))):b&&yn(b,p)?(l(b,p,n,s,r,f,i,o,a),f.resolve(!0)):(l(null,p,f.hiddenContainer,null,r,f,i,o,a),f.deps<=0&&f.resolve()));else if(b&&yn(b,p))l(b,p,n,s,r,f,i,o,a),di(f,p);else if(jo(e,"onPending"),f.pendingBranch=p,p.shapeFlag&512?f.pendingId=p.component.suspenseId:f.pendingId=eh++,l(null,p,f.hiddenContainer,null,r,f,i,o,a),f.deps<=0)f.resolve();else{const{timeout:N,pendingId:_}=f;N>0?setTimeout(()=>{f.pendingId===_&&f.fallback(m)},N):N===0&&f.fallback(m)}}function ky(t,e,n,s,r,i,o,a,l,u,h=!1){const{p:f,m:p,um:m,n:b,o:{parentNode:v,remove:D}}=u;let V;const N=VI(t);N&&e&&e.pendingBranch&&(V=e.pendingId,e.deps++);const _=t.props?A_(t.props.timeout):void 0,S=i,O={vnode:t,parent:e,parentComponent:n,namespace:o,container:s,hiddenContainer:r,deps:0,pendingId:eh++,timeout:typeof _=="number"?_:-1,activeBranch:null,pendingBranch:null,isInFallback:!h,isHydrating:h,isUnmounted:!1,effects:[],resolve(U=!1,T=!1){const{vnode:y,activeBranch:E,pendingBranch:R,pendingId:P,effects:C,parentComponent:A,container:pe,isInFallback:Te}=O;let le=!1;O.isHydrating?O.isHydrating=!1:U||(le=E&&R.transition&&R.transition.mode==="out-in",le&&(E.transition.afterLeave=()=>{P===O.pendingId&&(p(R,pe,i===S?b(E):i,0),zu(C),Te&&y.ssFallback&&(y.ssFallback.el=null))}),E&&(v(E.el)===pe&&(i=b(E)),m(E,A,O,!0),!le&&Te&&y.ssFallback&&mt(()=>y.ssFallback.el=null,O)),le||p(R,pe,i,0)),di(O,R),O.pendingBranch=null,O.isInFallback=!1;let he=O.parent,oe=!1;for(;he;){if(he.pendingBranch){he.effects.push(...C),oe=!0;break}he=he.parent}!oe&&!le&&zu(C),O.effects=[],N&&e&&e.pendingBranch&&V===e.pendingId&&(e.deps--,e.deps===0&&!T&&e.resolve()),jo(y,"onResolve")},fallback(U){if(!O.pendingBranch)return;const{vnode:T,activeBranch:y,parentComponent:E,container:R,namespace:P}=O;jo(T,"onFallback");const C=b(y),A=()=>{O.isInFallback&&(f(null,U,R,C,E,null,P,a,l),di(O,U))},pe=U.transition&&U.transition.mode==="out-in";pe&&(y.transition.afterLeave=A),O.isInFallback=!0,m(y,E,null,!0),pe||A()},move(U,T,y){O.activeBranch&&p(O.activeBranch,U,T,y),O.container=U},next(){return O.activeBranch&&b(O.activeBranch)},registerDep(U,T,y){const E=!!O.pendingBranch;E&&O.deps++;const R=U.vnode.el;U.asyncDep.catch(P=>{xi(P,U,0)}).then(P=>{if(U.isUnmounted||O.isUnmounted||O.pendingId!==U.suspenseId)return;U.asyncResolved=!0;const{vnode:C}=U;sh(U,P),R&&(C.el=R);const A=!R&&U.subTree.el;T(U,C,v(R||U.subTree.el),R?null:b(U.subTree),O,o,y),A&&(C.placeholder=null,D(A)),fl(U,C.el),E&&--O.deps===0&&O.resolve()})},unmount(U,T){O.isUnmounted=!0,O.activeBranch&&m(O.activeBranch,n,U,T),O.pendingBranch&&m(O.pendingBranch,n,U,T)}};return O}function DI(t,e,n,s,r,i,o,a,l){const u=e.suspense=ky(e,s,n,t.parentNode,document.createElement("div"),null,r,i,o,a,!0),h=l(t,u.pendingBranch=e.ssContent,n,u,i,o);return u.deps===0&&u.resolve(!1,!0),h}function OI(t){const{shapeFlag:e,children:n}=t,s=e&32;t.ssContent=Ap(s?n.default:n),t.ssFallback=s?Ap(n.fallback):we(gt)}function Ap(t){let e;if(Ie(t)){const n=Ti&&t._c;n&&(t._d=!1,_e()),t=t(),n&&(t._d=!0,e=Zt,Dy())}return ve(t)&&(t=gI(t)),t=sn(t),e&&!t.dynamicChildren&&(t.dynamicChildren=e.filter(n=>n!==t)),t}function Ny(t,e){e&&e.pendingBranch?ve(t)?e.effects.push(...t):e.effects.push(t):zu(t)}function di(t,e){t.activeBranch=e;const{vnode:n,parentComponent:s}=t;let r=e.el;for(;!r&&e.component;)e=e.component.subTree,r=e.el;n.el=r,s&&s.subTree===n&&(s.vnode.el=r,fl(s,r))}function VI(t){const e=t.props&&t.props.suspensible;return e!=null&&e!==!1}const ze=Symbol.for("v-fgt"),Pr=Symbol.for("v-txt"),gt=Symbol.for("v-cmt"),So=Symbol.for("v-stc"),Co=[];let Zt=null;function _e(t=!1){Co.push(Zt=t?null:[])}function Dy(){Co.pop(),Zt=Co[Co.length-1]||null}let Ti=1;function Pc(t,e=!1){Ti+=t,t<0&&Zt&&e&&(Zt.hasOnce=!0)}function Oy(t){return t.dynamicChildren=Ti>0?Zt||ai:null,Dy(),Ti>0&&Zt&&Zt.push(t),t}function ke(t,e,n,s,r,i){return Oy(j(t,e,n,s,r,i,!0))}function Jt(t,e,n,s,r){return Oy(we(t,e,n,s,r,!0))}function Dr(t){return t?t.__v_isVNode===!0:!1}function yn(t,e){return t.type===e.type&&t.key===e.key}const Vy=({key:t})=>t??null,rc=({ref:t,ref_key:e,ref_for:n})=>(typeof t=="number"&&(t=""+t),t!=null?nt(t)||vt(t)||Ie(t)?{i:Dt,r:t,k:e,f:!!n}:t:null);function j(t,e=null,n=null,s=0,r=null,i=t===ze?0:1,o=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&Vy(e),ref:e&&rc(e),scopeId:Q_,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:s,dynamicProps:r,dynamicChildren:null,appContext:null,ctx:Dt};return a?(gf(l,n),i&128&&t.normalize(l)):n&&(l.shapeFlag|=nt(n)?8:16),Ti>0&&!o&&Zt&&(l.patchFlag>0||i&6)&&l.patchFlag!==32&&Zt.push(l),l}const we=LI;function LI(t,e=null,n=null,s=0,r=null,i=!1){if((!t||t===fy)&&(t=gt),Dr(t)){const a=dn(t,e,!0);return n&&gf(a,n),Ti>0&&!i&&Zt&&(a.shapeFlag&6?Zt[Zt.indexOf(t)]=a:Zt.push(a)),a.patchFlag=-2,a}if(jI(t)&&(t=t.__vccOpts),e){e=Ly(e);let{class:a,style:l}=e;a&&!nt(a)&&(e.class=Ot(a)),We(l)&&(cl(l)&&!ve(l)&&(l=Ct({},l)),e.style=ol(l))}const o=nt(t)?1:Cc(t)?128:X_(t)?64:We(t)?4:Ie(t)?2:0;return j(t,e,n,s,r,o,i,!0)}function Ly(t){return t?cl(t)||Ey(t)?Ct({},t):t:null}function dn(t,e,n=!1,s=!1){const{props:r,ref:i,patchFlag:o,children:a,transition:l}=t,u=e?My(r||{},e):r,h={__v_isVNode:!0,__v_skip:!0,type:t.type,props:u,key:u&&Vy(u),ref:e&&e.ref?n&&i?ve(i)?i.concat(rc(e)):[i,rc(e)]:rc(e):i,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:a,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==ze?o===-1?16:o|16:o,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:l,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&dn(t.ssContent),ssFallback:t.ssFallback&&dn(t.ssFallback),placeholder:t.placeholder,el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return l&&s&&Ei(h,l.clone(h)),h}function Qe(t=" ",e=0){return we(Pr,null,t,e)}function th(t,e){const n=we(So,null,t);return n.staticCount=e,n}function hs(t="",e=!1){return e?(_e(),Jt(gt,null,t)):we(gt,null,t)}function sn(t){return t==null||typeof t=="boolean"?we(gt):ve(t)?we(ze,null,t.slice()):Dr(t)?Os(t):we(Pr,null,String(t))}function Os(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:dn(t)}function gf(t,e){let n=0;const{shapeFlag:s}=t;if(e==null)e=null;else if(ve(e))n=16;else if(typeof e=="object")if(s&65){const r=e.default;r&&(r._c&&(r._d=!1),gf(t,r()),r._c&&(r._d=!0));return}else{n=32;const r=e._;!r&&!Ey(e)?e._ctx=Dt:r===3&&Dt&&(Dt.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else Ie(e)?(e={default:e,_ctx:Dt},n=32):(e=String(e),s&64?(n=16,e=[Qe(e)]):n=8);t.children=e,t.shapeFlag|=n}function My(...t){const e={};for(let n=0;n<t.length;n++){const s=t[n];for(const r in s)if(r==="class")e.class!==s.class&&(e.class=Ot([e.class,s.class]));else if(r==="style")e.style=ol([e.style,s.style]);else if(ra(r)){const i=e[r],o=s[r];o&&i!==o&&!(ve(i)&&i.includes(o))&&(e[r]=i?[].concat(i,o):o)}else r!==""&&(e[r]=s[r])}return e}function Qt(t,e,n,s=null){An(t,e,7,[n,s])}const MI=gy();let xI=0;function FI(t,e,n){const s=t.type,r=(e?e.appContext:t.appContext)||MI,i={uid:xI++,vnode:t,type:s,parent:e,appContext:r,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new P_(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(r.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:wy(s,r),emitsOptions:_y(s,r),emit:null,emitted:null,propsDefaults:Ye,inheritAttrs:s.inheritAttrs,ctx:Ye,data:Ye,props:Ye,attrs:Ye,slots:Ye,refs:Ye,setupState:Ye,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=e?e.root:i,i.emit=pI.bind(null,i),t.ce&&t.ce(i),i}let Nt=null;const $r=()=>Nt||Dt;let kc,nh;{const t=il(),e=(n,s)=>{let r;return(r=t[n])||(r=t[n]=[]),r.push(s),i=>{r.length>1?r.forEach(o=>o(i)):r[0](i)}};kc=e("__VUE_INSTANCE_SETTERS__",n=>Nt=n),nh=e("__VUE_SSR_SETTERS__",n=>wi=n)}const la=t=>{const e=Nt;return kc(t),t.scope.on(),()=>{t.scope.off(),kc(e)}},Rp=()=>{Nt&&Nt.scope.off(),kc(null)};function xy(t){return t.vnode.shapeFlag&4}let wi=!1;function UI(t,e=!1,n=!1){e&&nh(e);const{props:s,children:r}=t.vnode,i=xy(t);EI(t,s,i,e),II(t,r,n||e);const o=i?BI(t,e):void 0;return e&&nh(!1),o}function BI(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,iI);const{setup:s}=n;if(s){cs();const r=t.setupContext=s.length>1?HI(t):null,i=la(t),o=oa(s,t,0,[t.props,r]),a=Jh(o);if(ls(),i(),(a||t.sp)&&!ss(t)&&lf(t),a){if(o.then(Rp,Rp),e)return o.then(l=>{sh(t,l)}).catch(l=>{xi(l,t,0)});t.asyncDep=o}else sh(t,o)}else Fy(t)}function sh(t,e,n){Ie(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:We(e)&&(t.setupState=G_(e)),Fy(t)}function Fy(t,e,n){const s=t.type;t.render||(t.render=s.render||Mn);{const r=la(t);cs();try{oI(t)}finally{ls(),r()}}}const $I={get(t,e){return Ut(t,"get",""),t[e]}};function HI(t){const e=n=>{t.exposed=n||{}};return{attrs:new Proxy(t.attrs,$I),slots:t.slots,emit:t.emit,expose:e}}function dl(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(G_(Eb(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in Ro)return Ro[n](t)},has(e,n){return n in e||n in Ro}})):t.proxy}function rh(t,e=!0){return Ie(t)?t.displayName||t.name:t.name||e&&t.__name}function jI(t){return Ie(t)&&"__vccOpts"in t}const Fe=(t,e)=>Pb(t,e,wi);function ot(t,e,n){try{Pc(-1);const s=arguments.length;return s===2?We(e)&&!ve(e)?Dr(e)?we(t,null,[e]):we(t,e):we(t,null,e):(s>3?n=Array.prototype.slice.call(arguments,2):s===3&&Dr(n)&&(n=[n]),we(t,e,n))}finally{Pc(1)}}const qI="3.5.26";let ih;const Sp=typeof window<"u"&&window.trustedTypes;if(Sp)try{ih=Sp.createPolicy("vue",{createHTML:t=>t})}catch{}const Uy=ih?t=>ih.createHTML(t):t=>t,GI="http://www.w3.org/2000/svg",WI="http://www.w3.org/1998/Math/MathML",Yn=typeof document<"u"?document:null,Cp=Yn&&Yn.createElement("template"),zI={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,s)=>{const r=e==="svg"?Yn.createElementNS(GI,t):e==="mathml"?Yn.createElementNS(WI,t):n?Yn.createElement(t,{is:n}):Yn.createElement(t);return t==="select"&&s&&s.multiple!=null&&r.setAttribute("multiple",s.multiple),r},createText:t=>Yn.createTextNode(t),createComment:t=>Yn.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>Yn.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,n,s,r,i){const o=n?n.previousSibling:e.lastChild;if(r&&(r===i||r.nextSibling))for(;e.insertBefore(r.cloneNode(!0),n),!(r===i||!(r=r.nextSibling)););else{Cp.innerHTML=Uy(s==="svg"?`<svg>${t}</svg>`:s==="mathml"?`<math>${t}</math>`:t);const a=Cp.content;if(s==="svg"||s==="mathml"){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}e.insertBefore(a,n)}return[o?o.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}},As="transition",ho="animation",qo=Symbol("_vtc"),By={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},KI=Ct({},ty,By),QI=t=>(t.displayName="Transition",t.props=KI,t),ua=QI((t,{slots:e})=>ot($b,YI(t),e)),gr=(t,e=[])=>{ve(t)?t.forEach(n=>n(...e)):t&&t(...e)},Pp=t=>t?ve(t)?t.some(e=>e.length>1):t.length>1:!1;function YI(t){const e={};for(const C in t)C in By||(e[C]=t[C]);if(t.css===!1)return e;const{name:n="v",type:s,duration:r,enterFromClass:i=`${n}-enter-from`,enterActiveClass:o=`${n}-enter-active`,enterToClass:a=`${n}-enter-to`,appearFromClass:l=i,appearActiveClass:u=o,appearToClass:h=a,leaveFromClass:f=`${n}-leave-from`,leaveActiveClass:p=`${n}-leave-active`,leaveToClass:m=`${n}-leave-to`}=t,b=JI(r),v=b&&b[0],D=b&&b[1],{onBeforeEnter:V,onEnter:N,onEnterCancelled:_,onLeave:S,onLeaveCancelled:O,onBeforeAppear:U=V,onAppear:T=N,onAppearCancelled:y=_}=e,E=(C,A,pe,Te)=>{C._enterCancelled=Te,_r(C,A?h:a),_r(C,A?u:o),pe&&pe()},R=(C,A)=>{C._isLeaving=!1,_r(C,f),_r(C,m),_r(C,p),A&&A()},P=C=>(A,pe)=>{const Te=C?T:N,le=()=>E(A,C,pe);gr(Te,[A,le]),kp(()=>{_r(A,C?l:i),Kn(A,C?h:a),Pp(Te)||Np(A,s,v,le)})};return Ct(e,{onBeforeEnter(C){gr(V,[C]),Kn(C,i),Kn(C,o)},onBeforeAppear(C){gr(U,[C]),Kn(C,l),Kn(C,u)},onEnter:P(!1),onAppear:P(!0),onLeave(C,A){C._isLeaving=!0;const pe=()=>R(C,A);Kn(C,f),C._enterCancelled?(Kn(C,p),Vp(C)):(Vp(C),Kn(C,p)),kp(()=>{C._isLeaving&&(_r(C,f),Kn(C,m),Pp(S)||Np(C,s,D,pe))}),gr(S,[C,pe])},onEnterCancelled(C){E(C,!1,void 0,!0),gr(_,[C])},onAppearCancelled(C){E(C,!0,void 0,!0),gr(y,[C])},onLeaveCancelled(C){R(C),gr(O,[C])}})}function JI(t){if(t==null)return null;if(We(t))return[pu(t.enter),pu(t.leave)];{const e=pu(t);return[e,e]}}function pu(t){return A_(t)}function Kn(t,e){e.split(/\s+/).forEach(n=>n&&t.classList.add(n)),(t[qo]||(t[qo]=new Set)).add(e)}function _r(t,e){e.split(/\s+/).forEach(s=>s&&t.classList.remove(s));const n=t[qo];n&&(n.delete(e),n.size||(t[qo]=void 0))}function kp(t){requestAnimationFrame(()=>{requestAnimationFrame(t)})}let XI=0;function Np(t,e,n,s){const r=t._endId=++XI,i=()=>{r===t._endId&&s()};if(n!=null)return setTimeout(i,n);const{type:o,timeout:a,propCount:l}=ZI(t,e);if(!o)return s();const u=o+"end";let h=0;const f=()=>{t.removeEventListener(u,p),i()},p=m=>{m.target===t&&++h>=l&&f()};setTimeout(()=>{h<l&&f()},a+1),t.addEventListener(u,p)}function ZI(t,e){const n=window.getComputedStyle(t),s=b=>(n[b]||"").split(", "),r=s(`${As}Delay`),i=s(`${As}Duration`),o=Dp(r,i),a=s(`${ho}Delay`),l=s(`${ho}Duration`),u=Dp(a,l);let h=null,f=0,p=0;e===As?o>0&&(h=As,f=o,p=i.length):e===ho?u>0&&(h=ho,f=u,p=l.length):(f=Math.max(o,u),h=f>0?o>u?As:ho:null,p=h?h===As?i.length:l.length:0);const m=h===As&&/\b(?:transform|all)(?:,|$)/.test(s(`${As}Property`).toString());return{type:h,timeout:f,propCount:p,hasTransform:m}}function Dp(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max(...e.map((n,s)=>Op(n)+Op(t[s])))}function Op(t){return t==="auto"?0:Number(t.slice(0,-1).replace(",","."))*1e3}function Vp(t){return(t?t.ownerDocument:document).body.offsetHeight}function eA(t,e,n){const s=t[qo];s&&(e=(e?[e,...s]:[...s]).join(" ")),e==null?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}const Lp=Symbol("_vod"),tA=Symbol("_vsh"),nA=Symbol(""),sA=/(?:^|;)\s*display\s*:/;function rA(t,e,n){const s=t.style,r=nt(n);let i=!1;if(n&&!r){if(e)if(nt(e))for(const o of e.split(";")){const a=o.slice(0,o.indexOf(":")).trim();n[a]==null&&ic(s,a,"")}else for(const o in e)n[o]==null&&ic(s,o,"");for(const o in n)o==="display"&&(i=!0),ic(s,o,n[o])}else if(r){if(e!==n){const o=s[nA];o&&(n+=";"+o),s.cssText=n,i=sA.test(n)}}else e&&t.removeAttribute("style");Lp in t&&(t[Lp]=i?s.display:"",t[tA]&&(s.display="none"))}const Mp=/\s*!important$/;function ic(t,e,n){if(ve(n))n.forEach(s=>ic(t,e,s));else if(n==null&&(n=""),e.startsWith("--"))t.setProperty(e,n);else{const s=iA(t,e);Mp.test(n)?t.setProperty(rr(s),n.replace(Mp,""),"important"):t[s]=n}}const xp=["Webkit","Moz","ms"],mu={};function iA(t,e){const n=mu[e];if(n)return n;let s=pn(e);if(s!=="filter"&&s in t)return mu[e]=s;s=sl(s);for(let r=0;r<xp.length;r++){const i=xp[r]+s;if(i in t)return mu[e]=i}return e}const Fp="http://www.w3.org/1999/xlink";function Up(t,e,n,s,r,i=Jw(e)){s&&e.startsWith("xlink:")?n==null?t.removeAttributeNS(Fp,e.slice(6,e.length)):t.setAttributeNS(Fp,e,n):n==null||i&&!R_(n)?t.removeAttribute(e):t.setAttribute(e,i?"":bn(n)?String(n):n)}function Bp(t,e,n,s,r){if(e==="innerHTML"||e==="textContent"){n!=null&&(t[e]=e==="innerHTML"?Uy(n):n);return}const i=t.tagName;if(e==="value"&&i!=="PROGRESS"&&!i.includes("-")){const a=i==="OPTION"?t.getAttribute("value")||"":t.value,l=n==null?t.type==="checkbox"?"on":"":String(n);(a!==l||!("_value"in t))&&(t.value=l),n==null&&t.removeAttribute(e),t._value=n;return}let o=!1;if(n===""||n==null){const a=typeof t[e];a==="boolean"?n=R_(n):n==null&&a==="string"?(n="",o=!0):a==="number"&&(n=0,o=!0)}try{t[e]=n}catch{}o&&t.removeAttribute(r||e)}function Ls(t,e,n,s){t.addEventListener(e,n,s)}function oA(t,e,n,s){t.removeEventListener(e,n,s)}const $p=Symbol("_vei");function aA(t,e,n,s,r=null){const i=t[$p]||(t[$p]={}),o=i[e];if(s&&o)o.value=s;else{const[a,l]=cA(e);if(s){const u=i[e]=hA(s,r);Ls(t,a,u,l)}else o&&(oA(t,a,o,l),i[e]=void 0)}}const Hp=/(?:Once|Passive|Capture)$/;function cA(t){let e;if(Hp.test(t)){e={};let s;for(;s=t.match(Hp);)t=t.slice(0,t.length-s[0].length),e[s[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):rr(t.slice(2)),e]}let gu=0;const lA=Promise.resolve(),uA=()=>gu||(lA.then(()=>gu=0),gu=Date.now());function hA(t,e){const n=s=>{if(!s._vts)s._vts=Date.now();else if(s._vts<=n.attached)return;An(fA(s,n.value),e,5,[s])};return n.value=t,n.attached=uA(),n}function fA(t,e){if(ve(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(s=>r=>!r._stopped&&s&&s(r))}else return e}const jp=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,dA=(t,e,n,s,r,i)=>{const o=r==="svg";e==="class"?eA(t,s,o):e==="style"?rA(t,n,s):ra(e)?Qh(e)||aA(t,e,n,s,i):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):pA(t,e,s,o))?(Bp(t,e,s),!t.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&Up(t,e,s,o,i,e!=="value")):t._isVueCE&&(/[A-Z]/.test(e)||!nt(s))?Bp(t,pn(e),s,i,e):(e==="true-value"?t._trueValue=s:e==="false-value"&&(t._falseValue=s),Up(t,e,s,o))};function pA(t,e,n,s){if(s)return!!(e==="innerHTML"||e==="textContent"||e in t&&jp(e)&&Ie(n));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="autocorrect"||e==="sandbox"&&t.tagName==="IFRAME"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const r=t.tagName;if(r==="IMG"||r==="VIDEO"||r==="CANVAS"||r==="SOURCE")return!1}return jp(e)&&nt(n)?!1:e in t}const bi=t=>{const e=t.props["onUpdate:modelValue"]||!1;return ve(e)?n=>ui(e,n):e};function mA(t){t.target.composing=!0}function qp(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const rs=Symbol("_assign");function Gp(t,e,n){return e&&(t=t.trim()),n&&(t=rl(t)),t}const Wa={created(t,{modifiers:{lazy:e,trim:n,number:s}},r){t[rs]=bi(r);const i=s||r.props&&r.props.type==="number";Ls(t,e?"change":"input",o=>{o.target.composing||t[rs](Gp(t.value,n,i))}),(n||i)&&Ls(t,"change",()=>{t.value=Gp(t.value,n,i)}),e||(Ls(t,"compositionstart",mA),Ls(t,"compositionend",qp),Ls(t,"change",qp))},mounted(t,{value:e}){t.value=e??""},beforeUpdate(t,{value:e,oldValue:n,modifiers:{lazy:s,trim:r,number:i}},o){if(t[rs]=bi(o),t.composing)return;const a=(i||t.type==="number")&&!/^0\d/.test(t.value)?rl(t.value):t.value,l=e??"";a!==l&&(document.activeElement===t&&t.type!=="range"&&(s&&e===n||r&&t.value.trim()===l)||(t.value=l))}},QM={deep:!0,created(t,e,n){t[rs]=bi(n),Ls(t,"change",()=>{const s=t._modelValue,r=Go(t),i=t.checked,o=t[rs];if(ve(s)){const a=Xh(s,r),l=a!==-1;if(i&&!l)o(s.concat(r));else if(!i&&l){const u=[...s];u.splice(a,1),o(u)}}else if(Li(s)){const a=new Set(s);i?a.add(r):a.delete(r),o(a)}else o($y(t,i))})},mounted:Wp,beforeUpdate(t,e,n){t[rs]=bi(n),Wp(t,e,n)}};function Wp(t,{value:e,oldValue:n},s){t._modelValue=e;let r;if(ve(e))r=Xh(e,s.props.value)>-1;else if(Li(e))r=e.has(s.props.value);else{if(e===n)return;r=ia(e,$y(t,!0))}t.checked!==r&&(t.checked=r)}const YM={deep:!0,created(t,{value:e,modifiers:{number:n}},s){const r=Li(e);Ls(t,"change",()=>{const i=Array.prototype.filter.call(t.options,o=>o.selected).map(o=>n?rl(Go(o)):Go(o));t[rs](t.multiple?r?new Set(i):i:i[0]),t._assigning=!0,Ys(()=>{t._assigning=!1})}),t[rs]=bi(s)},mounted(t,{value:e}){zp(t,e)},beforeUpdate(t,e,n){t[rs]=bi(n)},updated(t,{value:e}){t._assigning||zp(t,e)}};function zp(t,e){const n=t.multiple,s=ve(e);if(!(n&&!s&&!Li(e))){for(let r=0,i=t.options.length;r<i;r++){const o=t.options[r],a=Go(o);if(n)if(s){const l=typeof a;l==="string"||l==="number"?o.selected=e.some(u=>String(u)===String(a)):o.selected=Xh(e,a)>-1}else o.selected=e.has(a);else if(ia(Go(o),e)){t.selectedIndex!==r&&(t.selectedIndex=r);return}}!n&&t.selectedIndex!==-1&&(t.selectedIndex=-1)}}function Go(t){return"_value"in t?t._value:t.value}function $y(t,e){const n=e?"_trueValue":"_falseValue";return n in t?t[n]:e}const gA=["ctrl","shift","alt","meta"],_A={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>gA.some(n=>t[`${n}Key`]&&!e.includes(n))},pl=(t,e)=>{const n=t._withMods||(t._withMods={}),s=e.join(".");return n[s]||(n[s]=((r,...i)=>{for(let o=0;o<e.length;o++){const a=_A[e[o]];if(a&&a(r,e))return}return t(r,...i)}))},yA={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},JM=(t,e)=>{const n=t._withKeys||(t._withKeys={}),s=e.join(".");return n[s]||(n[s]=(r=>{if(!("key"in r))return;const i=rr(r.key);if(e.some(o=>o===i||yA[o]===i))return t(r)}))},Hy=Ct({patchProp:dA},zI);let Po,Kp=!1;function vA(){return Po||(Po=RI(Hy))}function EA(){return Po=Kp?Po:SI(Hy),Kp=!0,Po}const TA=((...t)=>{const e=vA().createApp(...t),{mount:n}=e;return e.mount=s=>{const r=qy(s);if(!r)return;const i=e._component;!Ie(i)&&!i.render&&!i.template&&(i.template=r.innerHTML),r.nodeType===1&&(r.textContent="");const o=n(r,!1,jy(r));return r instanceof Element&&(r.removeAttribute("v-cloak"),r.setAttribute("data-v-app","")),o},e}),wA=((...t)=>{const e=EA().createApp(...t),{mount:n}=e;return e.mount=s=>{const r=qy(s);if(r)return n(r,!0,jy(r))},e});function jy(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function qy(t){return nt(t)?document.querySelector(t):t}const bA=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,IA=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,AA=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/;function RA(t,e){if(t==="__proto__"||t==="constructor"&&e&&typeof e=="object"&&"prototype"in e){SA(t);return}return e}function SA(t){console.warn(`[destr] Dropping "${t}" key to prevent prototype pollution.`)}function Nc(t,e={}){if(typeof t!="string")return t;if(t[0]==='"'&&t[t.length-1]==='"'&&t.indexOf("\\")===-1)return t.slice(1,-1);const n=t.trim();if(n.length<=9)switch(n.toLowerCase()){case"true":return!0;case"false":return!1;case"undefined":return;case"null":return null;case"nan":return Number.NaN;case"infinity":return Number.POSITIVE_INFINITY;case"-infinity":return Number.NEGATIVE_INFINITY}if(!AA.test(t)){if(e.strict)throw new SyntaxError("[destr] Invalid JSON");return t}try{if(bA.test(t)||IA.test(t)){if(e.strict)throw new Error("[destr] Possible prototype pollution");return JSON.parse(t,RA)}return JSON.parse(t)}catch(s){if(e.strict)throw s;return t}}const CA=/#/g,PA=/&/g,kA=/\//g,NA=/=/g,_f=/\+/g,DA=/%5e/gi,OA=/%60/gi,VA=/%7c/gi,LA=/%20/gi;function MA(t){return encodeURI(""+t).replace(VA,"|")}function oh(t){return MA(typeof t=="string"?t:JSON.stringify(t)).replace(_f,"%2B").replace(LA,"+").replace(CA,"%23").replace(PA,"%26").replace(OA,"`").replace(DA,"^").replace(kA,"%2F")}function _u(t){return oh(t).replace(NA,"%3D")}function Dc(t=""){try{return decodeURIComponent(""+t)}catch{return""+t}}function xA(t){return Dc(t.replace(_f," "))}function FA(t){return Dc(t.replace(_f," "))}function Gy(t=""){const e=Object.create(null);t[0]==="?"&&(t=t.slice(1));for(const n of t.split("&")){const s=n.match(/([^=]+)=?(.*)/)||[];if(s.length<2)continue;const r=xA(s[1]);if(r==="__proto__"||r==="constructor")continue;const i=FA(s[2]||"");e[r]===void 0?e[r]=i:Array.isArray(e[r])?e[r].push(i):e[r]=[e[r],i]}return e}function UA(t,e){return(typeof e=="number"||typeof e=="boolean")&&(e=String(e)),e?Array.isArray(e)?e.map(n=>`${_u(t)}=${oh(n)}`).join("&"):`${_u(t)}=${oh(e)}`:_u(t)}function BA(t){return Object.keys(t).filter(e=>t[e]!==void 0).map(e=>UA(e,t[e])).filter(Boolean).join("&")}const $A=/^[\s\w\0+.-]{2,}:([/\\]{1,2})/,HA=/^[\s\w\0+.-]{2,}:([/\\]{2})?/,jA=/^([/\\]\s*){2,}[^/\\]/,qA=/^[\s\0]*(blob|data|javascript|vbscript):$/i,GA=/\/$|\/\?|\/#/,WA=/^\.?\//;function Hr(t,e={}){return typeof e=="boolean"&&(e={acceptRelative:e}),e.strict?$A.test(t):HA.test(t)||(e.acceptRelative?jA.test(t):!1)}function zA(t){return!!t&&qA.test(t)}function ah(t="",e){return e?GA.test(t):t.endsWith("/")}function Oc(t="",e){if(!e)return(ah(t)?t.slice(0,-1):t)||"/";if(!ah(t,!0))return t||"/";let n=t,s="";const r=t.indexOf("#");r!==-1&&(n=t.slice(0,r),s=t.slice(r));const[i,...o]=n.split("?");return((i.endsWith("/")?i.slice(0,-1):i)||"/")+(o.length>0?`?${o.join("?")}`:"")+s}function KA(t="",e){if(!e)return t.endsWith("/")?t:t+"/";if(ah(t,!0))return t||"/";let n=t,s="";const r=t.indexOf("#");if(r!==-1&&(n=t.slice(0,r),s=t.slice(r),!n))return s;const[i,...o]=n.split("?");return i+"/"+(o.length>0?`?${o.join("?")}`:"")+s}function QA(t,e){if(zy(e)||Hr(t))return t;const n=Oc(e);return t.startsWith(n)?t:yf(n,t)}function Qp(t,e){if(zy(e))return t;const n=Oc(e);if(!t.startsWith(n))return t;const s=t.slice(n.length);return s[0]==="/"?s:"/"+s}function Wy(t,e){const n=Yy(t),s={...Gy(n.search),...e};return n.search=BA(s),XA(n)}function zy(t){return!t||t==="/"}function YA(t){return t&&t!=="/"}function yf(t,...e){let n=t||"";for(const s of e.filter(r=>YA(r)))if(n){const r=s.replace(WA,"");n=KA(n)+r}else n=s;return n}function Ky(...t){const e=/\/(?!\/)/,n=t.filter(Boolean),s=[];let r=0;for(const o of n)if(!(!o||o==="/")){for(const[a,l]of o.split(e).entries())if(!(!l||l===".")){if(l===".."){if(s.length===1&&Hr(s[0]))continue;s.pop(),r--;continue}if(a===1&&s[s.length-1]?.endsWith(":/")){s[s.length-1]+="/"+l;continue}s.push(l),r++}}let i=s.join("/");return r>=0?n[0]?.startsWith("/")&&!i.startsWith("/")?i="/"+i:n[0]?.startsWith("./")&&!i.startsWith("./")&&(i="./"+i):i="../".repeat(-1*r)+i,n[n.length-1]?.endsWith("/")&&!i.endsWith("/")&&(i+="/"),i}function JA(t,e){return Dc(Oc(t))===Dc(Oc(e))}const Qy=Symbol.for("ufo:protocolRelative");function Yy(t="",e){const n=t.match(/^[\s\0]*(blob:|data:|javascript:|vbscript:)(.*)/i);if(n){const[,f,p=""]=n;return{protocol:f.toLowerCase(),pathname:p,href:f+p,auth:"",host:"",search:"",hash:""}}if(!Hr(t,{acceptRelative:!0}))return Yp(t);const[,s="",r,i=""]=t.replace(/\\/g,"/").match(/^[\s\0]*([\w+.-]{2,}:)?\/\/([^/@]+@)?(.*)/)||[];let[,o="",a=""]=i.match(/([^#/?]*)(.*)?/)||[];s==="file:"&&(a=a.replace(/\/(?=[A-Za-z]:)/,""));const{pathname:l,search:u,hash:h}=Yp(a);return{protocol:s.toLowerCase(),auth:r?r.slice(0,Math.max(0,r.length-1)):"",host:o,pathname:l,search:u,hash:h,[Qy]:!s}}function Yp(t=""){const[e="",n="",s=""]=(t.match(/([^#?]*)(\?[^#]*)?(#.*)?/)||[]).splice(1);return{pathname:e,search:n,hash:s}}function XA(t){const e=t.pathname||"",n=t.search?(t.search.startsWith("?")?"":"?")+t.search:"",s=t.hash||"",r=t.auth?t.auth+"@":"",i=t.host||"";return(t.protocol||t[Qy]?(t.protocol||"")+"//":"")+r+i+e+n+s}class ZA extends Error{constructor(e,n){super(e,n),this.name="FetchError",n?.cause&&!this.cause&&(this.cause=n.cause)}}function eR(t){const e=t.error?.message||t.error?.toString()||"",n=t.request?.method||t.options?.method||"GET",s=t.request?.url||String(t.request)||"/",r=`[${n}] ${JSON.stringify(s)}`,i=t.response?`${t.response.status} ${t.response.statusText}`:"<no response>",o=`${r}: ${i}${e?` ${e}`:""}`,a=new ZA(o,t.error?{cause:t.error}:void 0);for(const l of["request","options","response"])Object.defineProperty(a,l,{get(){return t[l]}});for(const[l,u]of[["data","_data"],["status","status"],["statusCode","status"],["statusText","statusText"],["statusMessage","statusText"]])Object.defineProperty(a,l,{get(){return t.response&&t.response[u]}});return a}const tR=new Set(Object.freeze(["PATCH","POST","PUT","DELETE"]));function Jp(t="GET"){return tR.has(t.toUpperCase())}function nR(t){if(t===void 0)return!1;const e=typeof t;return e==="string"||e==="number"||e==="boolean"||e===null?!0:e!=="object"?!1:Array.isArray(t)?!0:t.buffer||t instanceof FormData||t instanceof URLSearchParams?!1:t.constructor&&t.constructor.name==="Object"||typeof t.toJSON=="function"}const sR=new Set(["image/svg","application/xml","application/xhtml","application/html"]),rR=/^application\/(?:[\w!#$%&*.^`~-]*\+)?json(;.+)?$/i;function iR(t=""){if(!t)return"json";const e=t.split(";").shift()||"";return rR.test(e)?"json":e==="text/event-stream"?"stream":sR.has(e)||e.startsWith("text/")?"text":"blob"}function oR(t,e,n,s){const r=aR(e?.headers??t?.headers,n?.headers,s);let i;return(n?.query||n?.params||e?.params||e?.query)&&(i={...n?.params,...n?.query,...e?.params,...e?.query}),{...n,...e,query:i,params:i,headers:r}}function aR(t,e,n){if(!e)return new n(t);const s=new n(e);if(t)for(const[r,i]of Symbol.iterator in t||Array.isArray(t)?t:new n(t))s.set(r,i);return s}async function za(t,e){if(e)if(Array.isArray(e))for(const n of e)await n(t);else await e(t)}const cR=new Set([408,409,425,429,500,502,503,504]),lR=new Set([101,204,205,304]);function Jy(t={}){const{fetch:e=globalThis.fetch,Headers:n=globalThis.Headers,AbortController:s=globalThis.AbortController}=t;async function r(a){const l=a.error&&a.error.name==="AbortError"&&!a.options.timeout||!1;if(a.options.retry!==!1&&!l){let h;typeof a.options.retry=="number"?h=a.options.retry:h=Jp(a.options.method)?0:1;const f=a.response&&a.response.status||500;if(h>0&&(Array.isArray(a.options.retryStatusCodes)?a.options.retryStatusCodes.includes(f):cR.has(f))){const p=typeof a.options.retryDelay=="function"?a.options.retryDelay(a):a.options.retryDelay||0;return p>0&&await new Promise(m=>setTimeout(m,p)),i(a.request,{...a.options,retry:h-1})}}const u=eR(a);throw Error.captureStackTrace&&Error.captureStackTrace(u,i),u}const i=async function(l,u={}){const h={request:l,options:oR(l,u,t.defaults,n),response:void 0,error:void 0};if(h.options.method&&(h.options.method=h.options.method.toUpperCase()),h.options.onRequest&&(await za(h,h.options.onRequest),h.options.headers instanceof n||(h.options.headers=new n(h.options.headers||{}))),typeof h.request=="string"&&(h.options.baseURL&&(h.request=QA(h.request,h.options.baseURL)),h.options.query&&(h.request=Wy(h.request,h.options.query),delete h.options.query),"query"in h.options&&delete h.options.query,"params"in h.options&&delete h.options.params),h.options.body&&Jp(h.options.method))if(nR(h.options.body)){const m=h.options.headers.get("content-type");typeof h.options.body!="string"&&(h.options.body=m==="application/x-www-form-urlencoded"?new URLSearchParams(h.options.body).toString():JSON.stringify(h.options.body)),m||h.options.headers.set("content-type","application/json"),h.options.headers.has("accept")||h.options.headers.set("accept","application/json")}else("pipeTo"in h.options.body&&typeof h.options.body.pipeTo=="function"||typeof h.options.body.pipe=="function")&&("duplex"in h.options||(h.options.duplex="half"));let f;if(!h.options.signal&&h.options.timeout){const m=new s;f=setTimeout(()=>{const b=new Error("[TimeoutError]: The operation was aborted due to timeout");b.name="TimeoutError",b.code=23,m.abort(b)},h.options.timeout),h.options.signal=m.signal}try{h.response=await e(h.request,h.options)}catch(m){return h.error=m,h.options.onRequestError&&await za(h,h.options.onRequestError),await r(h)}finally{f&&clearTimeout(f)}if((h.response.body||h.response._bodyInit)&&!lR.has(h.response.status)&&h.options.method!=="HEAD"){const m=(h.options.parseResponse?"json":h.options.responseType)||iR(h.response.headers.get("content-type")||"");switch(m){case"json":{const b=await h.response.text(),v=h.options.parseResponse||Nc;h.response._data=v(b);break}case"stream":{h.response._data=h.response.body||h.response._bodyInit;break}default:h.response._data=await h.response[m]()}}return h.options.onResponse&&await za(h,h.options.onResponse),!h.options.ignoreResponseError&&h.response.status>=400&&h.response.status<600?(h.options.onResponseError&&await za(h,h.options.onResponseError),await r(h)):h.response},o=async function(l,u){return(await i(l,u))._data};return o.raw=i,o.native=(...a)=>e(...a),o.create=(a={},l={})=>Jy({...t,...l,defaults:{...t.defaults,...l.defaults,...a}}),o}const Vc=(function(){if(typeof globalThis<"u")return globalThis;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")})(),uR=Vc.fetch?(...t)=>Vc.fetch(...t):()=>Promise.reject(new Error("[ofetch] global.fetch is not supported!")),hR=Vc.Headers,fR=Vc.AbortController,dR=Jy({fetch:uR,Headers:hR,AbortController:fR}),pR=dR,mR=()=>window?.__NUXT__?.config||window?.useNuxtApp?.().payload?.config,vf=()=>mR().app,gR=()=>vf().baseURL,_R=()=>vf().buildAssetsDir,Ef=(...t)=>Ky(Xy(),_R(),...t),Xy=(...t)=>{const e=vf(),n=e.cdnURL||e.baseURL;return t.length?Ky(n,...t):n};globalThis.__buildAssetsURL=Ef,globalThis.__publicAssetsURL=Xy;globalThis.$fetch||(globalThis.$fetch=pR.create({baseURL:gR()}));"global"in globalThis||(globalThis.global=globalThis);function ch(t,e={},n){for(const s in t){const r=t[s],i=n?`${n}:${s}`:s;typeof r=="object"&&r!==null?ch(r,e,i):typeof r=="function"&&(e[i]=r)}return e}const yR={run:t=>t()},vR=()=>yR,Zy=typeof console.createTask<"u"?console.createTask:vR;function ER(t,e){const n=e.shift(),s=Zy(n);return t.reduce((r,i)=>r.then(()=>s.run(()=>i(...e))),Promise.resolve())}function TR(t,e){const n=e.shift(),s=Zy(n);return Promise.all(t.map(r=>s.run(()=>r(...e))))}function yu(t,e){for(const n of[...t])n(e)}let wR=class{constructor(){this._hooks={},this._before=void 0,this._after=void 0,this._deprecatedMessages=void 0,this._deprecatedHooks={},this.hook=this.hook.bind(this),this.callHook=this.callHook.bind(this),this.callHookWith=this.callHookWith.bind(this)}hook(e,n,s={}){if(!e||typeof n!="function")return()=>{};const r=e;let i;for(;this._deprecatedHooks[e];)i=this._deprecatedHooks[e],e=i.to;if(i&&!s.allowDeprecated){let o=i.message;o||(o=`${r} hook has been deprecated`+(i.to?`, please use ${i.to}`:"")),this._deprecatedMessages||(this._deprecatedMessages=new Set),this._deprecatedMessages.has(o)||(console.warn(o),this._deprecatedMessages.add(o))}if(!n.name)try{Object.defineProperty(n,"name",{get:()=>"_"+e.replace(/\W+/g,"_")+"_hook_cb",configurable:!0})}catch{}return this._hooks[e]=this._hooks[e]||[],this._hooks[e].push(n),()=>{n&&(this.removeHook(e,n),n=void 0)}}hookOnce(e,n){let s,r=(...i)=>(typeof s=="function"&&s(),s=void 0,r=void 0,n(...i));return s=this.hook(e,r),s}removeHook(e,n){if(this._hooks[e]){const s=this._hooks[e].indexOf(n);s!==-1&&this._hooks[e].splice(s,1),this._hooks[e].length===0&&delete this._hooks[e]}}deprecateHook(e,n){this._deprecatedHooks[e]=typeof n=="string"?{to:n}:n;const s=this._hooks[e]||[];delete this._hooks[e];for(const r of s)this.hook(e,r)}deprecateHooks(e){Object.assign(this._deprecatedHooks,e);for(const n in e)this.deprecateHook(n,e[n])}addHooks(e){const n=ch(e),s=Object.keys(n).map(r=>this.hook(r,n[r]));return()=>{for(const r of s.splice(0,s.length))r()}}removeHooks(e){const n=ch(e);for(const s in n)this.removeHook(s,n[s])}removeAllHooks(){for(const e in this._hooks)delete this._hooks[e]}callHook(e,...n){return n.unshift(e),this.callHookWith(ER,e,...n)}callHookParallel(e,...n){return n.unshift(e),this.callHookWith(TR,e,...n)}callHookWith(e,n,...s){const r=this._before||this._after?{name:n,args:s,context:{}}:void 0;this._before&&yu(this._before,r);const i=e(n in this._hooks?[...this._hooks[n]]:[],s);return i instanceof Promise?i.finally(()=>{this._after&&r&&yu(this._after,r)}):(this._after&&r&&yu(this._after,r),i)}beforeEach(e){return this._before=this._before||[],this._before.push(e),()=>{if(this._before!==void 0){const n=this._before.indexOf(e);n!==-1&&this._before.splice(n,1)}}}afterEach(e){return this._after=this._after||[],this._after.push(e),()=>{if(this._after!==void 0){const n=this._after.indexOf(e);n!==-1&&this._after.splice(n,1)}}}};function bR(){return new wR}function IR(t={}){let e,n=!1;const s=o=>{if(e&&e!==o)throw new Error("Context conflict")};let r;if(t.asyncContext){const o=t.AsyncLocalStorage||globalThis.AsyncLocalStorage;o?r=new o:console.warn("[unctx] `AsyncLocalStorage` is not provided.")}const i=()=>{if(r){const o=r.getStore();if(o!==void 0)return o}return e};return{use:()=>{const o=i();if(o===void 0)throw new Error("Context is not available");return o},tryUse:()=>i(),set:(o,a)=>{a||s(o),e=o,n=!0},unset:()=>{e=void 0,n=!1},call:(o,a)=>{s(o),e=o;try{return r?r.run(o,a):a()}finally{n||(e=void 0)}},async callAsync(o,a){e=o;const l=()=>{e=o},u=()=>e===o?l:void 0;lh.add(u);try{const h=r?r.run(o,a):a();return n||(e=void 0),await h}finally{lh.delete(u)}}}}function AR(t={}){const e={};return{get(n,s={}){return e[n]||(e[n]=IR({...t,...s})),e[n]}}}const Lc=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof global<"u"?global:typeof window<"u"?window:{},Xp="__unctx__",RR=Lc[Xp]||(Lc[Xp]=AR()),SR=(t,e={})=>RR.get(t,e),Zp="__unctx_async_handlers__",lh=Lc[Zp]||(Lc[Zp]=new Set);function pi(t){const e=[];for(const r of lh){const i=r();i&&e.push(i)}const n=()=>{for(const r of e)r()};let s=t();return s&&typeof s=="object"&&"catch"in s&&(s=s.catch(r=>{throw n(),r})),[s,n]}const em={name:"page-fade",mode:"out-in"},CR=!1,PR=!1,tm={id:"__nuxt-loader"},ZM={componentName:"NuxtLink",prefetch:!0,prefetchOn:{visibility:!0}},kR="#__nuxt",ev="nuxt-app",nm=36e5,NR="vite:preloadError";function tv(t=ev){return SR(t,{asyncContext:!1})}const DR="__nuxt_plugin";function OR(t){let e=0;const n={_id:t.id||ev||"nuxt-app",_scope:Zw(),provide:void 0,versions:{get nuxt(){return"4.2.2"},get vue(){return n.vueApp.version}},payload:Ln({...t.ssrContext?.payload||{},data:Ln({}),state:ir({}),once:new Set,_errors:Ln({})}),static:{data:{}},runWithContext(r){return n._scope.active&&!Zh()?n._scope.run(()=>sm(n,r)):sm(n,r)},isHydrating:!0,deferHydration(){if(!n.isHydrating)return()=>{};e++;let r=!1;return()=>{if(!r&&(r=!0,e--,e===0))return n.isHydrating=!1,n.callHook("app:suspense:resolve")}},_asyncDataPromises:{},_asyncData:Ln({}),_payloadRevivers:{},...t};{const r=window.__NUXT__;if(r)for(const i in r)switch(i){case"data":case"state":case"_errors":Object.assign(n.payload[i],r[i]);break;default:n.payload[i]=r[i]}}n.hooks=bR(),n.hook=n.hooks.hook,n.callHook=n.hooks.callHook,n.provide=(r,i)=>{const o="$"+r;Ka(n,o,i),Ka(n.vueApp.config.globalProperties,o,i)},Ka(n.vueApp,"$nuxt",n),Ka(n.vueApp.config.globalProperties,"$nuxt",n);{window.addEventListener(NR,i=>{n.callHook("app:chunkError",{error:i.payload}),i.payload.message.includes("Unable to preload CSS")&&i.preventDefault()}),window.useNuxtApp||=ct;const r=n.hook("app:error",(...i)=>{console.error("[nuxt] error caught during app initialization",...i)});n.hook("app:mounted",r)}const s=n.payload.config;return n.provide("config",s),n}function VR(t,e){e.hooks&&t.hooks.addHooks(e.hooks)}async function LR(t,e){if(typeof e=="function"){const{provide:n}=await t.runWithContext(()=>e(t))||{};if(n&&typeof n=="object")for(const s in n)t.provide(s,n[s])}}async function MR(t,e){const n=new Set,s=[],r=[];let i,o=0;async function a(l){const u=l.dependsOn?.filter(h=>e.some(f=>f._name===h)&&!n.has(h))??[];if(u.length>0)s.push([new Set(u),l]);else{const h=LR(t,l).then(async()=>{l._name&&(n.add(l._name),await Promise.all(s.map(async([f,p])=>{f.has(l._name)&&(f.delete(l._name),f.size===0&&(o++,await a(p)))})))}).catch(f=>{if(!l.parallel&&!t.payload.error)throw f;i||=f});l.parallel?r.push(h):await h}}for(const l of e)VR(t,l);for(const l of e)await a(l);if(await Promise.all(r),o)for(let l=0;l<o;l++)await Promise.all(r);if(i)throw t.payload.error||i}function qn(t){if(typeof t=="function")return t;const e=t._name||t.name;return delete t.name,Object.assign(t.setup||(()=>{}),t,{[DR]:!0,_name:e})}function sm(t,e,n){const s=()=>e();return tv(t._id).set(t),t.vueApp.runWithContext(s)}function xR(t){let e;return ll()&&(e=$r()?.appContext.app.$nuxt),e||=tv(t).tryUse(),e||null}function ct(t){const e=xR(t);if(!e)throw new Error("[nuxt] instance unavailable");return e}function ml(t){return ct().$config}function Ka(t,e,n){Object.defineProperty(t,e,{get:()=>n})}function FR(t,e){return{ctx:{table:t},matchAll:n=>sv(n,t)}}function nv(t){const e={};for(const n in t)e[n]=n==="dynamic"?new Map(Object.entries(t[n]).map(([s,r])=>[s,nv(r)])):new Map(Object.entries(t[n]));return e}function UR(t){return FR(nv(t))}function sv(t,e,n){t.endsWith("/")&&(t=t.slice(0,-1)||"/");const s=[];for(const[i,o]of rm(e.wildcard))(t===i||t.startsWith(i+"/"))&&s.push(o);for(const[i,o]of rm(e.dynamic))if(t.startsWith(i+"/")){const a="/"+t.slice(i.length).split("/").splice(2).join("/");s.push(...sv(a,o))}const r=e.static.get(t);return r&&s.push(r),s.filter(Boolean)}function rm(t){return[...t.entries()].sort((e,n)=>e[0].length-n[0].length)}function vu(t){if(t===null||typeof t!="object")return!1;const e=Object.getPrototypeOf(t);return e!==null&&e!==Object.prototype&&Object.getPrototypeOf(e)!==null||Symbol.iterator in t?!1:Symbol.toStringTag in t?Object.prototype.toString.call(t)==="[object Module]":!0}function uh(t,e,n=".",s){if(!vu(e))return uh(t,{},n,s);const r=Object.assign({},e);for(const i in t){if(i==="__proto__"||i==="constructor")continue;const o=t[i];o!=null&&(s&&s(r,i,o,n)||(Array.isArray(o)&&Array.isArray(r[i])?r[i]=[...o,...r[i]]:vu(o)&&vu(r[i])?r[i]=uh(o,r[i],(n?`${n}.`:"")+i.toString(),s):r[i]=o))}return r}function BR(t){return(...e)=>e.reduce((n,s)=>uh(n,s,"",t),{})}const rv=BR();function $R(t,e){try{return e in t}catch{return!1}}class im extends Error{static __h3_error__=!0;statusCode=500;fatal=!1;unhandled=!1;statusMessage;data;cause;constructor(e,n={}){super(e,n),n.cause&&!this.cause&&(this.cause=n.cause)}toJSON(){const e={message:this.message,statusCode:hh(this.statusCode,500)};return this.statusMessage&&(e.statusMessage=iv(this.statusMessage)),this.data!==void 0&&(e.data=this.data),e}}function HR(t){if(typeof t=="string")return new im(t);if(jR(t))return t;const e=new im(t.message??t.statusMessage??"",{cause:t.cause||t});if($R(t,"stack"))try{Object.defineProperty(e,"stack",{get(){return t.stack}})}catch{try{e.stack=t.stack}catch{}}if(t.data&&(e.data=t.data),t.statusCode?e.statusCode=hh(t.statusCode,e.statusCode):t.status&&(e.statusCode=hh(t.status,e.statusCode)),t.statusMessage?e.statusMessage=t.statusMessage:t.statusText&&(e.statusMessage=t.statusText),e.statusMessage){const n=e.statusMessage;iv(e.statusMessage)!==n&&console.warn("[h3] Please prefer using `message` for longer error messages instead of `statusMessage`. In the future, `statusMessage` will be sanitized by default.")}return t.fatal!==void 0&&(e.fatal=t.fatal),t.unhandled!==void 0&&(e.unhandled=t.unhandled),e}function jR(t){return t?.constructor?.__h3_error__===!0}const qR=/[^\u0009\u0020-\u007E]/g;function iv(t=""){return t.replace(qR,"")}function hh(t,e=200){return!t||(typeof t=="string"&&(t=Number.parseInt(t,10)),t<100||t>999)?e:t}const ov=Symbol("layout-meta"),Or=Symbol("route");import.meta.url.replace(/\/app\/.*$/,"/");const zt=()=>ct()?.$router,Fi=()=>ll()?Vt(Or,ct()._route):ct()._route;function ex(t){return t}const GR=()=>{try{if(ct()._processingMiddleware)return!0}catch{return!1}return!1},tx=(t,e)=>{t||="/";const n=typeof t=="string"?t:"path"in t?WR(t):zt().resolve(t).href;if(e?.open){const{target:l="_blank",windowFeatures:u={}}=e.open,h=[];for(const[f,p]of Object.entries(u))p!==void 0&&h.push(`${f.toLowerCase()}=${p}`);return open(n,l,h.join(", ")),Promise.resolve()}const s=Hr(n,{acceptRelative:!0}),r=e?.external||s;if(r){if(!e?.external)throw new Error("Navigating to an external URL is not allowed by default. Use `navigateTo(url, { external: true })`.");const{protocol:l}=new URL(n,window.location.href);if(l&&zA(l))throw new Error(`Cannot navigate to a URL with '${l}' protocol.`)}const i=GR();if(!r&&i){if(e?.replace){if(typeof t=="string"){const{pathname:l,search:u,hash:h}=Yy(t);return{path:l,...u&&{query:Gy(u)},...h&&{hash:h},replace:!0}}return{...t,replace:!0}}return t}const o=zt(),a=ct();return r?(a._scope.stop(),e?.replace?location.replace(n):location.href=n,i?a.isHydrating?new Promise(()=>{}):!1:Promise.resolve()):e?.replace?o.replace(t):o.push(t)};function WR(t){return Wy(t.path||"",t.query||{})+(t.hash||"")}const av="__nuxt_error",gl=()=>Rb(ct().payload,"error"),wr=t=>{const e=kr(t);try{const n=gl();ct().hooks.callHook("app:error",e),n.value||=e}catch{throw e}return e},zR=async(t={})=>{const e=ct(),n=gl();e.callHook("app:error:cleared",t),t.redirect&&await zt().replace(t.redirect),n.value=void 0},cv=t=>!!t&&typeof t=="object"&&av in t,kr=t=>{const e=HR(t);return Object.defineProperty(e,av,{value:!0,configurable:!1,writable:!1}),e};function KR(t){const e=YR(t),n=new ArrayBuffer(e.length),s=new DataView(n);for(let r=0;r<n.byteLength;r++)s.setUint8(r,e.charCodeAt(r));return n}const QR="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";function YR(t){t.length%4===0&&(t=t.replace(/==?$/,""));let e="",n=0,s=0;for(let r=0;r<t.length;r++)n<<=6,n|=QR.indexOf(t[r]),s+=6,s===24&&(e+=String.fromCharCode((n&16711680)>>16),e+=String.fromCharCode((n&65280)>>8),e+=String.fromCharCode(n&255),n=s=0);return s===12?(n>>=4,e+=String.fromCharCode(n)):s===18&&(n>>=2,e+=String.fromCharCode((n&65280)>>8),e+=String.fromCharCode(n&255)),e}const JR=-1,XR=-2,ZR=-3,e0=-4,t0=-5,n0=-6;function s0(t,e){return r0(JSON.parse(t),e)}function r0(t,e){if(typeof t=="number")return r(t,!0);if(!Array.isArray(t)||t.length===0)throw new Error("Invalid input");const n=t,s=Array(n.length);function r(i,o=!1){if(i===JR)return;if(i===ZR)return NaN;if(i===e0)return 1/0;if(i===t0)return-1/0;if(i===n0)return-0;if(o||typeof i!="number")throw new Error("Invalid input");if(i in s)return s[i];const a=n[i];if(!a||typeof a!="object")s[i]=a;else if(Array.isArray(a))if(typeof a[0]=="string"){const l=a[0],u=e&&Object.hasOwn(e,l)?e[l]:void 0;if(u){let h=a[1];return typeof h!="number"&&(h=n.push(a[1])-1),s[i]=u(r(h))}switch(l){case"Date":s[i]=new Date(a[1]);break;case"Set":const h=new Set;s[i]=h;for(let m=1;m<a.length;m+=1)h.add(r(a[m]));break;case"Map":const f=new Map;s[i]=f;for(let m=1;m<a.length;m+=2)f.set(r(a[m]),r(a[m+1]));break;case"RegExp":s[i]=new RegExp(a[1],a[2]);break;case"Object":s[i]=Object(a[1]);break;case"BigInt":s[i]=BigInt(a[1]);break;case"null":const p=Object.create(null);s[i]=p;for(let m=1;m<a.length;m+=2)p[a[m]]=r(a[m+1]);break;case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"BigInt64Array":case"BigUint64Array":{const m=globalThis[l],b=new m(r(a[1]));s[i]=a[2]!==void 0?b.subarray(a[2],a[3]):b;break}case"ArrayBuffer":{const m=a[1],b=KR(m);s[i]=b;break}case"Temporal.Duration":case"Temporal.Instant":case"Temporal.PlainDate":case"Temporal.PlainTime":case"Temporal.PlainDateTime":case"Temporal.PlainMonthDay":case"Temporal.PlainYearMonth":case"Temporal.ZonedDateTime":{const m=l.slice(9);s[i]=Temporal[m].from(a[1]);break}case"URL":{const m=new URL(a[1]);s[i]=m;break}case"URLSearchParams":{const m=new URLSearchParams(a[1]);s[i]=m;break}default:throw new Error(`Unknown type ${l}`)}}else{const l=new Array(a.length);s[i]=l;for(let u=0;u<a.length;u+=1){const h=a[u];h!==XR&&(l[u]=r(h))}}else{const l={};s[i]=l;for(const u in a){if(u==="__proto__")throw new Error("Cannot parse an object with a `__proto__` property");const h=a[u];l[u]=r(h)}}return s[i]}return r(0)}const i0=new Set(["link","style","script","noscript"]),o0=new Set(["title","titleTemplate","script","style","noscript"]),om=new Set(["base","meta","link","style","script","noscript"]),a0=new Set(["title","base","htmlAttrs","bodyAttrs","meta","link","style","script","noscript"]),c0=new Set(["base","title","titleTemplate","bodyAttrs","htmlAttrs","templateParams"]),l0=new Set(["key","tagPosition","tagPriority","tagDuplicateStrategy","innerHTML","textContent","processTemplateParams"]),u0=new Set(["templateParams","htmlAttrs","bodyAttrs"]),h0=new Set(["theme-color","google-site-verification","og","article","book","profile","twitter","author"]);function fh(t,e={},n){for(const s in t){const r=t[s],i=n?`${n}:${s}`:s;typeof r=="object"&&r!==null?fh(r,e,i):typeof r=="function"&&(e[i]=r)}return e}const lv=(()=>{if(console.createTask)return console.createTask;const t={run:e=>e()};return()=>t})();function uv(t,e,n,s){for(let r=n;r<t.length;r+=1)try{const i=s?s.run(()=>t[r](...e)):t[r](...e);if(i instanceof Promise)return i.then(()=>uv(t,e,r+1,s))}catch(i){return Promise.reject(i)}}function f0(t,e,n){if(t.length>0)return uv(t,e,0,lv(n))}function d0(t,e,n){if(t.length>0){const s=lv(n);return Promise.all(t.map(r=>s.run(()=>r(...e))))}}function Eu(t,e){for(const n of[...t])n(e)}var p0=class{_hooks;_before;_after;_deprecatedHooks;_deprecatedMessages;constructor(){this._hooks={},this._before=void 0,this._after=void 0,this._deprecatedMessages=void 0,this._deprecatedHooks={},this.hook=this.hook.bind(this),this.callHook=this.callHook.bind(this),this.callHookWith=this.callHookWith.bind(this)}hook(t,e,n={}){if(!t||typeof e!="function")return()=>{};const s=t;let r;for(;this._deprecatedHooks[t];)r=this._deprecatedHooks[t],t=r.to;if(r&&!n.allowDeprecated){let i=r.message;i||(i=`${s} hook has been deprecated`+(r.to?`, please use ${r.to}`:"")),this._deprecatedMessages||(this._deprecatedMessages=new Set),this._deprecatedMessages.has(i)||(console.warn(i),this._deprecatedMessages.add(i))}if(!e.name)try{Object.defineProperty(e,"name",{get:()=>"_"+t.replace(/\W+/g,"_")+"_hook_cb",configurable:!0})}catch{}return this._hooks[t]=this._hooks[t]||[],this._hooks[t].push(e),()=>{e&&(this.removeHook(t,e),e=void 0)}}hookOnce(t,e){let n,s=(...r)=>(typeof n=="function"&&n(),n=void 0,s=void 0,e(...r));return n=this.hook(t,s),n}removeHook(t,e){const n=this._hooks[t];if(n){const s=n.indexOf(e);s!==-1&&n.splice(s,1),n.length===0&&(this._hooks[t]=void 0)}}deprecateHook(t,e){this._deprecatedHooks[t]=typeof e=="string"?{to:e}:e;const n=this._hooks[t]||[];this._hooks[t]=void 0;for(const s of n)this.hook(t,s)}deprecateHooks(t){for(const e in t)this.deprecateHook(e,t[e])}addHooks(t){const e=fh(t),n=Object.keys(e).map(s=>this.hook(s,e[s]));return()=>{for(const s of n)s();n.length=0}}removeHooks(t){const e=fh(t);for(const n in e)this.removeHook(n,e[n])}removeAllHooks(){this._hooks={}}callHook(t,...e){return this.callHookWith(f0,t,e)}callHookParallel(t,...e){return this.callHookWith(d0,t,e)}callHookWith(t,e,n){const s=this._before||this._after?{name:e,args:n,context:{}}:void 0;this._before&&Eu(this._before,s);const r=t(this._hooks[e]?[...this._hooks[e]]:[],n,e);return r instanceof Promise?r.finally(()=>{this._after&&s&&Eu(this._after,s)}):(this._after&&s&&Eu(this._after,s),r)}beforeEach(t){return this._before=this._before||[],this._before.push(t),()=>{if(this._before!==void 0){const e=this._before.indexOf(t);e!==-1&&this._before.splice(e,1)}}}afterEach(t){return this._after=this._after||[],this._after.push(t),()=>{if(this._after!==void 0){const e=this._after.indexOf(t);e!==-1&&this._after.splice(e,1)}}}};function m0(){return new p0}const g0=["name","property","http-equiv"],_0=new Set(["viewport","description","keywords","robots"]);function hv(t){const e=t.split(":");return e.length?h0.has(e[1]):!1}function dh(t){const{props:e,tag:n}=t;if(c0.has(n))return n;if(n==="link"&&e.rel==="canonical")return"canonical";if(e.charset)return"charset";if(t.tag==="meta"){for(const s of g0)if(e[s]!==void 0){const r=e[s],i=r&&typeof r=="string"&&r.includes(":"),o=r&&_0.has(r),l=!(i||o)&&t.key?`:key:${t.key}`:"";return`${n}:${r}${l}`}}if(t.key)return`${n}:key:${t.key}`;if(e.id)return`${n}:id:${e.id}`;if(o0.has(n)){const s=t.textContent||t.innerHTML;if(s)return`${n}:content:${s}`}}function am(t){const e=t._h||t._d;if(e)return e;const n=t.textContent||t.innerHTML;return n||`${t.tag}:${Object.entries(t.props).map(([s,r])=>`${s}:${String(r)}`).join(",")}`}function Mc(t,e,n){typeof t==="function"&&(!n||n!=="titleTemplate"&&!(n[0]==="o"&&n[1]==="n"))&&(t=t());const r=e?e(n,t):t;if(Array.isArray(r))return r.map(i=>Mc(i,e));if(r?.constructor===Object){const i={};for(const o of Object.keys(r))i[o]=Mc(r[o],e,o);return i}return r}function y0(t,e){const n=t==="style"?new Map:new Set;function s(r){if(r==null||r===void 0)return;const i=String(r).trim();if(i)if(t==="style"){const[o,...a]=i.split(":").map(l=>l?l.trim():"");o&&a.length&&n.set(o,a.join(":"))}else i.split(" ").filter(Boolean).forEach(o=>n.add(o))}return typeof e=="string"?t==="style"?e.split(";").forEach(s):s(e):Array.isArray(e)?e.forEach(r=>s(r)):e&&typeof e=="object"&&Object.entries(e).forEach(([r,i])=>{i&&i!=="false"&&(t==="style"?n.set(String(r).trim(),String(i)):s(r))}),n}function fv(t,e){return t.props=t.props||{},e?t.tag==="templateParams"?(t.props=e,t):(Object.entries(e).forEach(([n,s])=>{if(s===null){t.props[n]=null;return}if(n==="class"||n==="style"){t.props[n]=y0(n,s);return}if(l0.has(n)){if(["textContent","innerHTML"].includes(n)&&typeof s=="object"){let a=e.type;if(e.type||(a="application/json"),!a?.endsWith("json")&&a!=="speculationrules")return;e.type=a,t.props.type=a,t[n]=JSON.stringify(s)}else t[n]=s;return}const r=String(s),i=n.startsWith("data-"),o=t.tag==="meta"&&n==="content";r==="true"||r===""?t.props[n]=i||o?r:!0:!s&&i&&r==="false"?t.props[n]="false":s!==void 0&&(t.props[n]=s)}),t):t}function v0(t,e){const n=typeof e=="object"&&typeof e!="function"?e:{[t==="script"||t==="noscript"||t==="style"?"innerHTML":"textContent"]:e},s=fv({tag:t,props:{}},n);return s.key&&i0.has(s.tag)&&(s.props["data-hid"]=s._h=s.key),s.tag==="script"&&typeof s.innerHTML=="object"&&(s.innerHTML=JSON.stringify(s.innerHTML),s.props.type=s.props.type||"application/json"),Array.isArray(s.props.content)?s.props.content.map(r=>({...s,props:{...s.props,content:r}})):s}function E0(t,e){if(!t)return[];typeof t=="function"&&(t=t());const n=(r,i)=>{for(let o=0;o<e.length;o++)i=e[o](r,i);return i};t=n(void 0,t);const s=[];return t=Mc(t,n),Object.entries(t||{}).forEach(([r,i])=>{if(i!==void 0)for(const o of Array.isArray(i)?i:[i])s.push(v0(r,o))}),s.flat()}const cm=(t,e)=>t._w===e._w?t._p-e._p:t._w-e._w,lm={base:-10,title:10},T0={critical:-8,high:-1,low:2},um={meta:{"content-security-policy":-30,charset:-20,viewport:-15},link:{preconnect:20,stylesheet:60,preload:70,modulepreload:70,prefetch:90,"dns-prefetch":90,prerender:90},script:{async:30,defer:80,sync:50},style:{imported:40,sync:60}},w0=/@import/,fo=t=>t===""||t===!0;function b0(t,e){if(typeof e.tagPriority=="number")return e.tagPriority;let n=100;const s=T0[e.tagPriority]||0,r=t.resolvedOptions.disableCapoSorting?{link:{},script:{},style:{}}:um;if(e.tag in lm)n=lm[e.tag];else if(e.tag==="meta"){const i=e.props["http-equiv"]==="content-security-policy"?"content-security-policy":e.props.charset?"charset":e.props.name==="viewport"?"viewport":null;i&&(n=um.meta[i])}else if(e.tag==="link"&&e.props.rel)n=r.link[e.props.rel];else if(e.tag==="script"){const i=String(e.props.type);fo(e.props.async)?n=r.script.async:e.props.src&&!fo(e.props.defer)&&!fo(e.props.async)&&i!=="module"&&!i.endsWith("json")||e.innerHTML&&!i.endsWith("json")?n=r.script.sync:(fo(e.props.defer)&&e.props.src&&!fo(e.props.async)||i==="module")&&(n=r.script.defer)}else e.tag==="style"&&(n=e.innerHTML&&w0.test(e.innerHTML)?r.style.imported:r.style.sync);return(n||100)+s}function hm(t,e){const n=typeof e=="function"?e(t):e,s=n.key||String(t.plugins.size+1);t.plugins.get(s)||(t.plugins.set(s,n),t.hooks.addHooks(n.hooks||{}))}function I0(t={}){const e=m0();e.addHooks(t.hooks||{});const n=!t.document,s=new Map,r=new Map,i=new Set,o={_entryCount:1,plugins:r,dirty:!1,resolvedOptions:t,hooks:e,ssr:n,entries:s,headEntries(){return[...s.values()]},use:a=>hm(o,a),push(a,l){const u={...l||{}};delete u.head;const h=u._index??o._entryCount++,f={_i:h,input:a,options:u},p={_poll(m=!1){o.dirty=!0,!m&&i.add(h),e.callHook("entries:updated",o)},dispose(){s.delete(h)&&o.invalidate()},patch(m){(!u.mode||u.mode==="server"&&n||u.mode==="client"&&!n)&&(f.input=m,s.set(h,f),p._poll())}};return p.patch(a),p},async resolveTags(){const a={tagMap:new Map,tags:[],entries:[...o.entries.values()]};for(await e.callHook("entries:resolve",a);i.size;){const p=i.values().next().value;i.delete(p);const m=s.get(p);if(m){const b={tags:E0(m.input,t.propResolvers||[]).map(v=>Object.assign(v,m.options)),entry:m};await e.callHook("entries:normalize",b),m._tags=b.tags.map((v,D)=>(v._w=b0(o,v),v._p=(m._i<<10)+D,v._d=dh(v),v))}}let l=!1;a.entries.flatMap(p=>(p._tags||[]).map(m=>({...m,props:{...m.props}}))).sort(cm).reduce((p,m)=>{const b=String(m._d||m._p);if(!p.has(b))return p.set(b,m);const v=p.get(b);if((m?.tagDuplicateStrategy||(u0.has(m.tag)?"merge":null)||(m.key&&m.key===v.key?"merge":null))==="merge"){const V={...v.props};Object.entries(m.props).forEach(([N,_])=>V[N]=N==="style"?new Map([...v.props.style||new Map,..._]):N==="class"?new Set([...v.props.class||new Set,..._]):_),p.set(b,{...m,props:V})}else m._p>>10===v._p>>10&&m.tag==="meta"&&hv(b)?(p.set(b,Object.assign([...Array.isArray(v)?v:[v],m],m)),l=!0):(m._w===v._w?m._p>v._p:m?._w<v?._w)&&p.set(b,m);return p},a.tagMap);const u=a.tagMap.get("title"),h=a.tagMap.get("titleTemplate");if(o._title=u?.textContent,h){const p=h?.textContent;if(o._titleTemplate=p,p){let m=typeof p=="function"?p(u?.textContent):p;typeof m=="string"&&!o.plugins.has("template-params")&&(m=m.replace("%s",u?.textContent||"")),u?m===null?a.tagMap.delete("title"):a.tagMap.set("title",{...u,textContent:m}):(h.tag="title",h.textContent=m)}}a.tags=Array.from(a.tagMap.values()),l&&(a.tags=a.tags.flat().sort(cm)),await e.callHook("tags:beforeResolve",a),await e.callHook("tags:resolve",a),await e.callHook("tags:afterResolve",a);const f=[];for(const p of a.tags){const{innerHTML:m,tag:b,props:v}=p;if(a0.has(b)&&!(Object.keys(v).length===0&&!p.innerHTML&&!p.textContent)&&!(b==="meta"&&!v.content&&!v["http-equiv"]&&!v.charset)){if(b==="script"&&m){if(String(v.type).endsWith("json")){const D=typeof m=="string"?m:JSON.stringify(m);p.innerHTML=D.replace(/</g,"\\u003C")}else typeof m=="string"&&(p.innerHTML=m.replace(new RegExp(`</${b}`,"g"),`<\\/${b}`));p._d=dh(p)}f.push(p)}}return f},invalidate(){for(const a of s.values())i.add(a._i);o.dirty=!0,e.callHook("entries:updated",o)}};return(t?.plugins||[]).forEach(a=>hm(o,a)),o.hooks.callHook("init",o),t.init?.forEach(a=>a&&o.push(a)),o}const A0=(t,e)=>vt(e)?wb(e):e,Tf="usehead";function R0(t){return{install(n){n.config.globalProperties.$unhead=t,n.config.globalProperties.$head=t,n.provide(Tf,t)}}.install}function S0(){if(ll()){const t=Vt(Tf);if(!t)throw new Error("useHead() was called without provide context, ensure you call it through the setup() function.");return t}throw new Error("useHead() was called without provide context, ensure you call it through the setup() function.")}function C0(t,e={}){const n=e.head||S0();return n.ssr?n.push(t||{},e):P0(n,t,e)}function P0(t,e,n={}){const s=de(!1);let r;return Mb(()=>{const o=s.value?{}:Mc(e,A0);r?r.patch(o):r=t.push(o,n)}),$r()&&(ca(()=>{r.dispose()}),ay(()=>{s.value=!0}),oy(()=>{s.value=!1})),r}function dv(t){const e=t||ct();return e.ssrContext?.head||e.runWithContext(()=>{if(ll()){const n=Vt(Tf);if(!n)throw new Error("[nuxt] [unhead] Missing Unhead instance.");return n}})}function nx(t,e={}){const n=e.head||dv(e.nuxt);return C0(t,{head:n,...e})}let oc,ac;function k0(){return oc=$fetch(Ef(`builds/meta/${ml().app.buildId}.json`),{responseType:"json"}),oc.then(t=>{ac=UR(t.matcher)}).catch(t=>{console.error("[nuxt] Error fetching app manifest.",t)}),oc}function _l(){return oc||k0()}async function wf(t){const e=typeof t=="string"?t:t.path;if(await _l(),!ac)return console.error("[nuxt] Error creating app manifest matcher.",ac),{};try{return rv({},...ac.matchAll(e).reverse())}catch(n){return console.error("[nuxt] Error matching route rules.",n),{}}}async function fm(t,e={}){if(!await mv(t))return null;const s=await D0(t,e);return await pv(s)||null}const N0="_payload.json";async function D0(t,e={}){const n=new URL(t,"http://localhost");if(n.host!=="localhost"||Hr(n.pathname,{acceptRelative:!0}))throw new Error("Payload URL must not include hostname: "+t);const s=ml(),r=e.hash||(e.fresh?Date.now():s.app.buildId),i=s.app.cdnURL,o=i&&await mv(t)?i:s.app.baseURL;return yf(o,n.pathname,N0+(r?`?${r}`:""))}async function pv(t){const e=fetch(t,{cache:"force-cache"}).then(n=>n.text().then(gv));try{return await e}catch(n){console.warn("[nuxt] Cannot load payload ",t,n)}return null}async function mv(t=Fi().path){const e=ct();return t=t==="/"?t:t.replace(/\/$/,""),(await _l()).prerendered.includes(t)?!0:e.runWithContext(async()=>{const s=await wf({path:t});return!!s.prerender&&!s.redirect})}let yr=null;async function O0(){if(yr)return yr;const t=document.getElementById("__NUXT_DATA__");if(!t)return{};const e=await gv(t.textContent||""),n=t.dataset.src?await pv(t.dataset.src):void 0;return yr={...e,...n,...window.__NUXT__},yr.config?.public&&(yr.config.public=ir(yr.config.public)),yr}async function gv(t){return await s0(t,ct()._payloadRevivers)}function V0(t,e){ct()._payloadRevivers[t]=e}const L0=[["NuxtError",t=>kr(t)],["EmptyShallowRef",t=>us(t==="_"?void 0:t==="0n"?BigInt(0):Nc(t))],["EmptyRef",t=>de(t==="_"?void 0:t==="0n"?BigInt(0):Nc(t))],["ShallowRef",t=>us(t)],["ShallowReactive",t=>Ln(t)],["Ref",t=>de(t)],["Reactive",t=>ir(t)]],M0=qn({name:"nuxt:revive-payload:client",order:-30,async setup(t){let e,n;for(const[s,r]of L0)V0(s,r);Object.assign(t.payload,([e,n]=pi(()=>t.runWithContext(O0)),e=await e,n(),e)),delete window.__NUXT__}});async function bf(t,e={}){const n=e.document||t.resolvedOptions.document;if(!n||!t.dirty)return;const s={shouldRender:!0,tags:[]};if(await t.hooks.callHook("dom:beforeRender",s),!!s.shouldRender)return t._domUpdatePromise||(t._domUpdatePromise=new Promise(async r=>{const i=new Map,o=new Promise(m=>{t.resolveTags().then(b=>{m(b.map(v=>{const D=i.get(v._d)||0,V={tag:v,id:(D?`${v._d}:${D}`:v._d)||am(v),shouldRender:!0};return v._d&&hv(v._d)&&i.set(v._d,D+1),V}))})});let a=t._dom;if(!a){a={title:n.title,elMap:new Map().set("htmlAttrs",n.documentElement).set("bodyAttrs",n.body)};for(const m of["body","head"]){const b=n[m]?.children;for(const v of b){const D=v.tagName.toLowerCase();if(!om.has(D))continue;const V=fv({tag:D,props:{}},{innerHTML:v.innerHTML,...v.getAttributeNames().reduce((N,_)=>(N[_]=v.getAttribute(_),N),{})||{}});if(V.key=v.getAttribute("data-hid")||void 0,V._d=dh(V)||am(V),a.elMap.has(V._d)){let N=1,_=V._d;for(;a.elMap.has(_);)_=`${V._d}:${N++}`;a.elMap.set(_,v)}else a.elMap.set(V._d,v)}}}a.pendingSideEffects={...a.sideEffects},a.sideEffects={};function l(m,b,v){const D=`${m}:${b}`;a.sideEffects[D]=v,delete a.pendingSideEffects[D]}function u({id:m,$el:b,tag:v}){const D=v.tag.endsWith("Attrs");a.elMap.set(m,b),D||(v.textContent&&v.textContent!==b.textContent&&(b.textContent=v.textContent),v.innerHTML&&v.innerHTML!==b.innerHTML&&(b.innerHTML=v.innerHTML),l(m,"el",()=>{b?.remove(),a.elMap.delete(m)}));for(const V in v.props){if(!Object.prototype.hasOwnProperty.call(v.props,V))continue;const N=v.props[V];if(V.startsWith("on")&&typeof N=="function"){const S=b?.dataset;if(S&&S[`${V}fired`]){const O=V.slice(0,-5);N.call(b,new Event(O.substring(2)))}b.getAttribute(`data-${V}`)!==""&&((v.tag==="bodyAttrs"?n.defaultView:b).addEventListener(V.substring(2),N.bind(b)),b.setAttribute(`data-${V}`,""));continue}const _=`attr:${V}`;if(V==="class"){if(!N)continue;for(const S of N)D&&l(m,`${_}:${S}`,()=>b.classList.remove(S)),!b.classList.contains(S)&&b.classList.add(S)}else if(V==="style"){if(!N)continue;for(const[S,O]of N)l(m,`${_}:${S}`,()=>{b.style.removeProperty(S)}),b.style.setProperty(S,O)}else N!==!1&&N!==null&&(b.getAttribute(V)!==N&&b.setAttribute(V,N===!0?"":String(N)),D&&l(m,_,()=>b.removeAttribute(V)))}}const h=[],f={bodyClose:void 0,bodyOpen:void 0,head:void 0},p=await o;for(const m of p){const{tag:b,shouldRender:v,id:D}=m;if(v){if(b.tag==="title"){n.title=b.textContent,l("title","",()=>n.title=a.title);continue}m.$el=m.$el||a.elMap.get(D),m.$el?u(m):om.has(b.tag)&&h.push(m)}}for(const m of h){const b=m.tag.tagPosition||"head";m.$el=n.createElement(m.tag.tag),u(m),f[b]=f[b]||n.createDocumentFragment(),f[b].appendChild(m.$el)}for(const m of p)await t.hooks.callHook("dom:renderTag",m,n,l);f.head&&n.head.appendChild(f.head),f.bodyOpen&&n.body.insertBefore(f.bodyOpen,n.body.firstChild),f.bodyClose&&n.body.appendChild(f.bodyClose);for(const m in a.pendingSideEffects)a.pendingSideEffects[m]();t._dom=a,await t.hooks.callHook("dom:rendered",{renders:p}),r()}).finally(()=>{t._domUpdatePromise=void 0,t.dirty=!1})),t._domUpdatePromise}function x0(t={}){const e=t.domOptions?.render||bf;t.document=t.document||(typeof window<"u"?document:void 0);const n=t.document?.head.querySelector('script[id="unhead:payload"]')?.innerHTML||!1;return I0({...t,plugins:[...t.plugins||[],{key:"client",hooks:{"entries:updated":e}}],init:[n?JSON.parse(n):!1,...t.init||[]]})}function F0(t,e){let n=0;return()=>{const s=++n;e(()=>{n===s&&t()})}}function U0(t={}){const e=x0({domOptions:{render:F0(()=>bf(e),n=>setTimeout(n,0))},...t});return e.install=R0(e),e}const B0={disableDefaults:!0},$0=qn({name:"nuxt:head",enforce:"pre",setup(t){const e=U0(B0);t.vueApp.use(e);{let n=!0;const s=async()=>{n=!1,await bf(e)};e.hooks.hook("dom:beforeRender",r=>{r.shouldRender=!n}),t.hooks.hook("page:start",()=>{n=!0}),t.hooks.hook("page:finish",()=>{t.isHydrating||s()}),t.hooks.hook("app:error",s),t.hooks.hook("app:suspense:resolve",s)}}});const Zr=typeof document<"u";function _v(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function H0(t){return t.__esModule||t[Symbol.toStringTag]==="Module"||t.default&&_v(t.default)}const He=Object.assign;function Tu(t,e){const n={};for(const s in e){const r=e[s];n[s]=Rn(r)?r.map(t):t(r)}return n}const ko=()=>{},Rn=Array.isArray;function dm(t,e){const n={};for(const s in t)n[s]=s in e?e[s]:t[s];return n}const yv=/#/g,j0=/&/g,q0=/\//g,G0=/=/g,W0=/\?/g,vv=/\+/g,z0=/%5B/g,K0=/%5D/g,Ev=/%5E/g,Q0=/%60/g,Tv=/%7B/g,Y0=/%7C/g,wv=/%7D/g,J0=/%20/g;function If(t){return t==null?"":encodeURI(""+t).replace(Y0,"|").replace(z0,"[").replace(K0,"]")}function X0(t){return If(t).replace(Tv,"{").replace(wv,"}").replace(Ev,"^")}function ph(t){return If(t).replace(vv,"%2B").replace(J0,"+").replace(yv,"%23").replace(j0,"%26").replace(Q0,"`").replace(Tv,"{").replace(wv,"}").replace(Ev,"^")}function Z0(t){return ph(t).replace(G0,"%3D")}function eS(t){return If(t).replace(yv,"%23").replace(W0,"%3F")}function tS(t){return eS(t).replace(q0,"%2F")}function Wo(t){if(t==null)return null;try{return decodeURIComponent(""+t)}catch{}return""+t}const nS=/\/$/,sS=t=>t.replace(nS,"");function wu(t,e,n="/"){let s,r={},i="",o="";const a=e.indexOf("#");let l=e.indexOf("?");return l=a>=0&&l>a?-1:l,l>=0&&(s=e.slice(0,l),i=e.slice(l,a>0?a:e.length),r=t(i.slice(1))),a>=0&&(s=s||e.slice(0,a),o=e.slice(a,e.length)),s=aS(s??e,n),{fullPath:s+i+o,path:s,query:r,hash:Wo(o)}}function rS(t,e){const n=e.query?t(e.query):"";return e.path+(n&&"?")+n+(e.hash||"")}function pm(t,e){return!e||!t.toLowerCase().startsWith(e.toLowerCase())?t:t.slice(e.length)||"/"}function iS(t,e,n){const s=e.matched.length-1,r=n.matched.length-1;return s>-1&&s===r&&Ii(e.matched[s],n.matched[r])&&bv(e.params,n.params)&&t(e.query)===t(n.query)&&e.hash===n.hash}function Ii(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function bv(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(var n in t)if(!oS(t[n],e[n]))return!1;return!0}function oS(t,e){return Rn(t)?mm(t,e):Rn(e)?mm(e,t):t?.valueOf()===e?.valueOf()}function mm(t,e){return Rn(e)?t.length===e.length&&t.every((n,s)=>n===e[s]):t.length===1&&t[0]===e}function aS(t,e){if(t.startsWith("/"))return t;if(!t)return e;const n=e.split("/"),s=t.split("/"),r=s[s.length-1];(r===".."||r===".")&&s.push("");let i=n.length-1,o,a;for(o=0;o<s.length;o++)if(a=s[o],a!==".")if(a==="..")i>1&&i--;else break;return n.slice(0,i).join("/")+"/"+s.slice(o).join("/")}const hn={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};let mh=(function(t){return t.pop="pop",t.push="push",t})({}),bu=(function(t){return t.back="back",t.forward="forward",t.unknown="",t})({});function cS(t){if(!t)if(Zr){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),sS(t)}const lS=/^[^#]+#/;function uS(t,e){return t.replace(lS,"#")+e}function hS(t,e){const n=document.documentElement.getBoundingClientRect(),s=t.getBoundingClientRect();return{behavior:e.behavior,left:s.left-n.left-(e.left||0),top:s.top-n.top-(e.top||0)}}const yl=()=>({left:window.scrollX,top:window.scrollY});function fS(t){let e;if("el"in t){const n=t.el,s=typeof n=="string"&&n.startsWith("#"),r=typeof n=="string"?s?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!r)return;e=hS(r,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.scrollX,e.top!=null?e.top:window.scrollY)}function gm(t,e){return(history.state?history.state.position-e:-1)+t}const gh=new Map;function dS(t,e){gh.set(t,e)}function pS(t){const e=gh.get(t);return gh.delete(t),e}function mS(t){return typeof t=="string"||t&&typeof t=="object"}function Iv(t){return typeof t=="string"||typeof t=="symbol"}let it=(function(t){return t[t.MATCHER_NOT_FOUND=1]="MATCHER_NOT_FOUND",t[t.NAVIGATION_GUARD_REDIRECT=2]="NAVIGATION_GUARD_REDIRECT",t[t.NAVIGATION_ABORTED=4]="NAVIGATION_ABORTED",t[t.NAVIGATION_CANCELLED=8]="NAVIGATION_CANCELLED",t[t.NAVIGATION_DUPLICATED=16]="NAVIGATION_DUPLICATED",t})({});const Av=Symbol("");it.MATCHER_NOT_FOUND+"",it.NAVIGATION_GUARD_REDIRECT+"",it.NAVIGATION_ABORTED+"",it.NAVIGATION_CANCELLED+"",it.NAVIGATION_DUPLICATED+"";function Ai(t,e){return He(new Error,{type:t,[Av]:!0},e)}function Qn(t,e){return t instanceof Error&&Av in t&&(e==null||!!(t.type&e))}const gS=["params","query","hash"];function _S(t){if(typeof t=="string")return t;if(t.path!=null)return t.path;const e={};for(const n of gS)n in t&&(e[n]=t[n]);return JSON.stringify(e,null,2)}function yS(t){const e={};if(t===""||t==="?")return e;const n=(t[0]==="?"?t.slice(1):t).split("&");for(let s=0;s<n.length;++s){const r=n[s].replace(vv," "),i=r.indexOf("="),o=Wo(i<0?r:r.slice(0,i)),a=i<0?null:Wo(r.slice(i+1));if(o in e){let l=e[o];Rn(l)||(l=e[o]=[l]),l.push(a)}else e[o]=a}return e}function _m(t){let e="";for(let n in t){const s=t[n];if(n=Z0(n),s==null){s!==void 0&&(e+=(e.length?"&":"")+n);continue}(Rn(s)?s.map(r=>r&&ph(r)):[s&&ph(s)]).forEach(r=>{r!==void 0&&(e+=(e.length?"&":"")+n,r!=null&&(e+="="+r))})}return e}function vS(t){const e={};for(const n in t){const s=t[n];s!==void 0&&(e[n]=Rn(s)?s.map(r=>r==null?null:""+r):s==null?s:""+s)}return e}const ES=Symbol(""),ym=Symbol(""),Af=Symbol(""),Rf=Symbol(""),_h=Symbol("");function po(){let t=[];function e(s){return t.push(s),()=>{const r=t.indexOf(s);r>-1&&t.splice(r,1)}}function n(){t=[]}return{add:e,list:()=>t.slice(),reset:n}}function Vs(t,e,n,s,r,i=o=>o()){const o=s&&(s.enterCallbacks[r]=s.enterCallbacks[r]||[]);return()=>new Promise((a,l)=>{const u=p=>{p===!1?l(Ai(it.NAVIGATION_ABORTED,{from:n,to:e})):p instanceof Error?l(p):mS(p)?l(Ai(it.NAVIGATION_GUARD_REDIRECT,{from:e,to:p})):(o&&s.enterCallbacks[r]===o&&typeof p=="function"&&o.push(p),a())},h=i(()=>t.call(s&&s.instances[r],e,n,u));let f=Promise.resolve(h);t.length<3&&(f=f.then(u)),f.catch(p=>l(p))})}function Iu(t,e,n,s,r=i=>i()){const i=[];for(const o of t)for(const a in o.components){let l=o.components[a];if(!(e!=="beforeRouteEnter"&&!o.instances[a]))if(_v(l)){const u=(l.__vccOpts||l)[e];u&&i.push(Vs(u,n,s,o,a,r))}else{let u=l();i.push(()=>u.then(h=>{if(!h)throw new Error(`Couldn't resolve component "${a}" at "${o.path}"`);const f=H0(h)?h.default:h;o.mods[a]=h,o.components[a]=f;const p=(f.__vccOpts||f)[e];return p&&Vs(p,n,s,o,a,r)()}))}}return i}function TS(t,e){const n=[],s=[],r=[],i=Math.max(e.matched.length,t.matched.length);for(let o=0;o<i;o++){const a=e.matched[o];a&&(t.matched.find(u=>Ii(u,a))?s.push(a):n.push(a));const l=t.matched[o];l&&(e.matched.find(u=>Ii(u,l))||r.push(l))}return[n,s,r]}let wS=()=>location.protocol+"//"+location.host;function Rv(t,e){const{pathname:n,search:s,hash:r}=e,i=t.indexOf("#");if(i>-1){let o=r.includes(t.slice(i))?t.slice(i).length:1,a=r.slice(o);return a[0]!=="/"&&(a="/"+a),pm(a,"")}return pm(n,t)+s+r}function bS(t,e,n,s){let r=[],i=[],o=null;const a=({state:p})=>{const m=Rv(t,location),b=n.value,v=e.value;let D=0;if(p){if(n.value=m,e.value=p,o&&o===b){o=null;return}D=v?p.position-v.position:0}else s(m);r.forEach(V=>{V(n.value,b,{delta:D,type:mh.pop,direction:D?D>0?bu.forward:bu.back:bu.unknown})})};function l(){o=n.value}function u(p){r.push(p);const m=()=>{const b=r.indexOf(p);b>-1&&r.splice(b,1)};return i.push(m),m}function h(){if(document.visibilityState==="hidden"){const{history:p}=window;if(!p.state)return;p.replaceState(He({},p.state,{scroll:yl()}),"")}}function f(){for(const p of i)p();i=[],window.removeEventListener("popstate",a),window.removeEventListener("pagehide",h),document.removeEventListener("visibilitychange",h)}return window.addEventListener("popstate",a),window.addEventListener("pagehide",h),document.addEventListener("visibilitychange",h),{pauseListeners:l,listen:u,destroy:f}}function vm(t,e,n,s=!1,r=!1){return{back:t,current:e,forward:n,replaced:s,position:window.history.length,scroll:r?yl():null}}function IS(t){const{history:e,location:n}=window,s={value:Rv(t,n)},r={value:e.state};r.value||i(s.value,{back:null,current:s.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function i(l,u,h){const f=t.indexOf("#"),p=f>-1?(n.host&&document.querySelector("base")?t:t.slice(f))+l:wS()+t+l;try{e[h?"replaceState":"pushState"](u,"",p),r.value=u}catch(m){console.error(m),n[h?"replace":"assign"](p)}}function o(l,u){i(l,He({},e.state,vm(r.value.back,l,r.value.forward,!0),u,{position:r.value.position}),!0),s.value=l}function a(l,u){const h=He({},r.value,e.state,{forward:l,scroll:yl()});i(h.current,h,!0),i(l,He({},vm(s.value,l,null),{position:h.position+1},u),!1),s.value=l}return{location:s,state:r,push:a,replace:o}}function AS(t){t=cS(t);const e=IS(t),n=bS(t,e.state,e.location,e.replace);function s(i,o=!0){o||n.pauseListeners(),history.go(i)}const r=He({location:"",base:t,go:s,createHref:uS.bind(null,t)},e,n);return Object.defineProperty(r,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(r,"state",{enumerable:!0,get:()=>e.state.value}),r}let Ar=(function(t){return t[t.Static=0]="Static",t[t.Param=1]="Param",t[t.Group=2]="Group",t})({});var bt=(function(t){return t[t.Static=0]="Static",t[t.Param=1]="Param",t[t.ParamRegExp=2]="ParamRegExp",t[t.ParamRegExpEnd=3]="ParamRegExpEnd",t[t.EscapeNext=4]="EscapeNext",t})(bt||{});const RS={type:Ar.Static,value:""},SS=/[a-zA-Z0-9_]/;function CS(t){if(!t)return[[]];if(t==="/")return[[RS]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(m){throw new Error(`ERR (${n})/"${u}": ${m}`)}let n=bt.Static,s=n;const r=[];let i;function o(){i&&r.push(i),i=[]}let a=0,l,u="",h="";function f(){u&&(n===bt.Static?i.push({type:Ar.Static,value:u}):n===bt.Param||n===bt.ParamRegExp||n===bt.ParamRegExpEnd?(i.length>1&&(l==="*"||l==="+")&&e(`A repeatable param (${u}) must be alone in its segment. eg: '/:ids+.`),i.push({type:Ar.Param,value:u,regexp:h,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):e("Invalid state to consume buffer"),u="")}function p(){u+=l}for(;a<t.length;){if(l=t[a++],l==="\\"&&n!==bt.ParamRegExp){s=n,n=bt.EscapeNext;continue}switch(n){case bt.Static:l==="/"?(u&&f(),o()):l===":"?(f(),n=bt.Param):p();break;case bt.EscapeNext:p(),n=s;break;case bt.Param:l==="("?n=bt.ParamRegExp:SS.test(l)?p():(f(),n=bt.Static,l!=="*"&&l!=="?"&&l!=="+"&&a--);break;case bt.ParamRegExp:l===")"?h[h.length-1]=="\\"?h=h.slice(0,-1)+l:n=bt.ParamRegExpEnd:h+=l;break;case bt.ParamRegExpEnd:f(),n=bt.Static,l!=="*"&&l!=="?"&&l!=="+"&&a--,h="";break;default:e("Unknown state");break}}return n===bt.ParamRegExp&&e(`Unfinished custom RegExp for param "${u}"`),f(),o(),r}const Em="[^/]+?",PS={sensitive:!1,strict:!1,start:!0,end:!0};var qt=(function(t){return t[t._multiplier=10]="_multiplier",t[t.Root=90]="Root",t[t.Segment=40]="Segment",t[t.SubSegment=30]="SubSegment",t[t.Static=40]="Static",t[t.Dynamic=20]="Dynamic",t[t.BonusCustomRegExp=10]="BonusCustomRegExp",t[t.BonusWildcard=-50]="BonusWildcard",t[t.BonusRepeatable=-20]="BonusRepeatable",t[t.BonusOptional=-8]="BonusOptional",t[t.BonusStrict=.7000000000000001]="BonusStrict",t[t.BonusCaseSensitive=.25]="BonusCaseSensitive",t})(qt||{});const kS=/[.+*?^${}()[\]/\\]/g;function NS(t,e){const n=He({},PS,e),s=[];let r=n.start?"^":"";const i=[];for(const u of t){const h=u.length?[]:[qt.Root];n.strict&&!u.length&&(r+="/");for(let f=0;f<u.length;f++){const p=u[f];let m=qt.Segment+(n.sensitive?qt.BonusCaseSensitive:0);if(p.type===Ar.Static)f||(r+="/"),r+=p.value.replace(kS,"\\$&"),m+=qt.Static;else if(p.type===Ar.Param){const{value:b,repeatable:v,optional:D,regexp:V}=p;i.push({name:b,repeatable:v,optional:D});const N=V||Em;if(N!==Em){m+=qt.BonusCustomRegExp;try{`${N}`}catch(S){throw new Error(`Invalid custom RegExp for param "${b}" (${N}): `+S.message)}}let _=v?`((?:${N})(?:/(?:${N}))*)`:`(${N})`;f||(_=D&&u.length<2?`(?:/${_})`:"/"+_),D&&(_+="?"),r+=_,m+=qt.Dynamic,D&&(m+=qt.BonusOptional),v&&(m+=qt.BonusRepeatable),N===".*"&&(m+=qt.BonusWildcard)}h.push(m)}s.push(h)}if(n.strict&&n.end){const u=s.length-1;s[u][s[u].length-1]+=qt.BonusStrict}n.strict||(r+="/?"),n.end?r+="$":n.strict&&!r.endsWith("/")&&(r+="(?:/|$)");const o=new RegExp(r,n.sensitive?"":"i");function a(u){const h=u.match(o),f={};if(!h)return null;for(let p=1;p<h.length;p++){const m=h[p]||"",b=i[p-1];f[b.name]=m&&b.repeatable?m.split("/"):m}return f}function l(u){let h="",f=!1;for(const p of t){(!f||!h.endsWith("/"))&&(h+="/"),f=!1;for(const m of p)if(m.type===Ar.Static)h+=m.value;else if(m.type===Ar.Param){const{value:b,repeatable:v,optional:D}=m,V=b in u?u[b]:"";if(Rn(V)&&!v)throw new Error(`Provided param "${b}" is an array but it is not repeatable (* or + modifiers)`);const N=Rn(V)?V.join("/"):V;if(!N)if(D)p.length<2&&(h.endsWith("/")?h=h.slice(0,-1):f=!0);else throw new Error(`Missing required param "${b}"`);h+=N}}return h||"/"}return{re:o,score:s,keys:i,parse:a,stringify:l}}function DS(t,e){let n=0;for(;n<t.length&&n<e.length;){const s=e[n]-t[n];if(s)return s;n++}return t.length<e.length?t.length===1&&t[0]===qt.Static+qt.Segment?-1:1:t.length>e.length?e.length===1&&e[0]===qt.Static+qt.Segment?1:-1:0}function Sv(t,e){let n=0;const s=t.score,r=e.score;for(;n<s.length&&n<r.length;){const i=DS(s[n],r[n]);if(i)return i;n++}if(Math.abs(r.length-s.length)===1){if(Tm(s))return 1;if(Tm(r))return-1}return r.length-s.length}function Tm(t){const e=t[t.length-1];return t.length>0&&e[e.length-1]<0}const OS={strict:!1,end:!0,sensitive:!1};function VS(t,e,n){const s=NS(CS(t.path),n),r=He(s,{record:t,parent:e,children:[],alias:[]});return e&&!r.record.aliasOf==!e.record.aliasOf&&e.children.push(r),r}function LS(t,e){const n=[],s=new Map;e=dm(OS,e);function r(f){return s.get(f)}function i(f,p,m){const b=!m,v=bm(f);v.aliasOf=m&&m.record;const D=dm(e,f),V=[v];if("alias"in f){const S=typeof f.alias=="string"?[f.alias]:f.alias;for(const O of S)V.push(bm(He({},v,{components:m?m.record.components:v.components,path:O,aliasOf:m?m.record:v})))}let N,_;for(const S of V){const{path:O}=S;if(p&&O[0]!=="/"){const U=p.record.path,T=U[U.length-1]==="/"?"":"/";S.path=p.record.path+(O&&T+O)}if(N=VS(S,p,D),m?m.alias.push(N):(_=_||N,_!==N&&_.alias.push(N),b&&f.name&&!Im(N)&&o(f.name)),Cv(N)&&l(N),v.children){const U=v.children;for(let T=0;T<U.length;T++)i(U[T],N,m&&m.children[T])}m=m||N}return _?()=>{o(_)}:ko}function o(f){if(Iv(f)){const p=s.get(f);p&&(s.delete(f),n.splice(n.indexOf(p),1),p.children.forEach(o),p.alias.forEach(o))}else{const p=n.indexOf(f);p>-1&&(n.splice(p,1),f.record.name&&s.delete(f.record.name),f.children.forEach(o),f.alias.forEach(o))}}function a(){return n}function l(f){const p=FS(f,n);n.splice(p,0,f),f.record.name&&!Im(f)&&s.set(f.record.name,f)}function u(f,p){let m,b={},v,D;if("name"in f&&f.name){if(m=s.get(f.name),!m)throw Ai(it.MATCHER_NOT_FOUND,{location:f});D=m.record.name,b=He(wm(p.params,m.keys.filter(_=>!_.optional).concat(m.parent?m.parent.keys.filter(_=>_.optional):[]).map(_=>_.name)),f.params&&wm(f.params,m.keys.map(_=>_.name))),v=m.stringify(b)}else if(f.path!=null)v=f.path,m=n.find(_=>_.re.test(v)),m&&(b=m.parse(v),D=m.record.name);else{if(m=p.name?s.get(p.name):n.find(_=>_.re.test(p.path)),!m)throw Ai(it.MATCHER_NOT_FOUND,{location:f,currentLocation:p});D=m.record.name,b=He({},p.params,f.params),v=m.stringify(b)}const V=[];let N=m;for(;N;)V.unshift(N.record),N=N.parent;return{name:D,path:v,params:b,matched:V,meta:xS(V)}}t.forEach(f=>i(f));function h(){n.length=0,s.clear()}return{addRoute:i,resolve:u,removeRoute:o,clearRoutes:h,getRoutes:a,getRecordMatcher:r}}function wm(t,e){const n={};for(const s of e)s in t&&(n[s]=t[s]);return n}function bm(t){const e={path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:t.aliasOf,beforeEnter:t.beforeEnter,props:MS(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}};return Object.defineProperty(e,"mods",{value:{}}),e}function MS(t){const e={},n=t.props||!1;if("component"in t)e.default=n;else for(const s in t.components)e[s]=typeof n=="object"?n[s]:n;return e}function Im(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function xS(t){return t.reduce((e,n)=>He(e,n.meta),{})}function FS(t,e){let n=0,s=e.length;for(;n!==s;){const i=n+s>>1;Sv(t,e[i])<0?s=i:n=i+1}const r=US(t);return r&&(s=e.lastIndexOf(r,s-1)),s}function US(t){let e=t;for(;e=e.parent;)if(Cv(e)&&Sv(t,e)===0)return e}function Cv({record:t}){return!!(t.name||t.components&&Object.keys(t.components).length||t.redirect)}function Am(t){const e=Vt(Af),n=Vt(Rf),s=Fe(()=>{const l=Ge(t.to);return e.resolve(l)}),r=Fe(()=>{const{matched:l}=s.value,{length:u}=l,h=l[u-1],f=n.matched;if(!h||!f.length)return-1;const p=f.findIndex(Ii.bind(null,h));if(p>-1)return p;const m=Rm(l[u-2]);return u>1&&Rm(h)===m&&f[f.length-1].path!==m?f.findIndex(Ii.bind(null,l[u-2])):p}),i=Fe(()=>r.value>-1&&qS(n.params,s.value.params)),o=Fe(()=>r.value>-1&&r.value===n.matched.length-1&&bv(n.params,s.value.params));function a(l={}){if(jS(l)){const u=e[Ge(t.replace)?"replace":"push"](Ge(t.to)).catch(ko);return t.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>u),u}return Promise.resolve()}return{route:s,href:Fe(()=>s.value.href),isActive:i,isExactActive:o,navigate:a}}function BS(t){return t.length===1?t[0]:t}const $S=ut({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:Am,setup(t,{slots:e}){const n=ir(Am(t)),{options:s}=Vt(Af),r=Fe(()=>({[Sm(t.activeClass,s.linkActiveClass,"router-link-active")]:n.isActive,[Sm(t.exactActiveClass,s.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const i=e.default&&BS(e.default(n));return t.custom?i:ot("a",{"aria-current":n.isExactActive?t.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:r.value},i)}}}),HS=$S;function jS(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function qS(t,e){for(const n in e){const s=e[n],r=t[n];if(typeof s=="string"){if(s!==r)return!1}else if(!Rn(r)||r.length!==s.length||s.some((i,o)=>i.valueOf()!==r[o].valueOf()))return!1}return!0}function Rm(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const Sm=(t,e,n)=>t??e??n,GS=ut({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:e,slots:n}){const s=Vt(_h),r=Fe(()=>t.route||s.value),i=Vt(ym,0),o=Fe(()=>{let u=Ge(i);const{matched:h}=r.value;let f;for(;(f=h[u])&&!f.components;)u++;return u}),a=Fe(()=>r.value.matched[o.value]);ns(ym,Fe(()=>o.value+1)),ns(ES,a),ns(_h,r);const l=de();return xn(()=>[l.value,a.value,t.name],([u,h,f],[p,m,b])=>{h&&(h.instances[f]=u,m&&m!==h&&u&&u===p&&(h.leaveGuards.size||(h.leaveGuards=m.leaveGuards),h.updateGuards.size||(h.updateGuards=m.updateGuards))),u&&h&&(!m||!Ii(h,m)||!p)&&(h.enterCallbacks[f]||[]).forEach(v=>v(u))},{flush:"post"}),()=>{const u=r.value,h=t.name,f=a.value,p=f&&f.components[h];if(!p)return Cm(n.default,{Component:p,route:u});const m=f.props[h],b=m?m===!0?u.params:typeof m=="function"?m(u):m:null,D=ot(p,He({},b,e,{onVnodeUnmounted:V=>{V.component.isUnmounted&&(f.instances[h]=null)},ref:l}));return Cm(n.default,{Component:D,route:u})||D}}});function Cm(t,e){if(!t)return null;const n=t(e);return n.length===1?n[0]:n}const Pv=GS;function WS(t){const e=LS(t.routes,t),n=t.parseQuery||yS,s=t.stringifyQuery||_m,r=t.history,i=po(),o=po(),a=po(),l=us(hn);let u=hn;Zr&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const h=Tu.bind(null,L=>""+L),f=Tu.bind(null,tS),p=Tu.bind(null,Wo);function m(L,q){let Y,ne;return Iv(L)?(Y=e.getRecordMatcher(L),ne=q):ne=L,e.addRoute(ne,Y)}function b(L){const q=e.getRecordMatcher(L);q&&e.removeRoute(q)}function v(){return e.getRoutes().map(L=>L.record)}function D(L){return!!e.getRecordMatcher(L)}function V(L,q){if(q=He({},q||l.value),typeof L=="string"){const k=wu(n,L,q.path),M=e.resolve({path:k.path},q),W=r.createHref(k.fullPath);return He(k,M,{params:p(M.params),hash:Wo(k.hash),redirectedFrom:void 0,href:W})}let Y;if(L.path!=null)Y=He({},L,{path:wu(n,L.path,q.path).path});else{const k=He({},L.params);for(const M in k)k[M]==null&&delete k[M];Y=He({},L,{params:f(k)}),q.params=f(q.params)}const ne=e.resolve(Y,q),se=L.hash||"";ne.params=h(p(ne.params));const ue=rS(s,He({},L,{hash:X0(se),path:ne.path})),w=r.createHref(ue);return He({fullPath:ue,hash:se,query:s===_m?vS(L.query):L.query||{}},ne,{redirectedFrom:void 0,href:w})}function N(L){return typeof L=="string"?wu(n,L,l.value.path):He({},L)}function _(L,q){if(u!==L)return Ai(it.NAVIGATION_CANCELLED,{from:q,to:L})}function S(L){return T(L)}function O(L){return S(He(N(L),{replace:!0}))}function U(L,q){const Y=L.matched[L.matched.length-1];if(Y&&Y.redirect){const{redirect:ne}=Y;let se=typeof ne=="function"?ne(L,q):ne;return typeof se=="string"&&(se=se.includes("?")||se.includes("#")?se=N(se):{path:se},se.params={}),He({query:L.query,hash:L.hash,params:se.path!=null?{}:L.params},se)}}function T(L,q){const Y=u=V(L),ne=l.value,se=L.state,ue=L.force,w=L.replace===!0,k=U(Y,ne);if(k)return T(He(N(k),{state:typeof k=="object"?He({},se,k.state):se,force:ue,replace:w}),q||Y);const M=Y;M.redirectedFrom=q;let W;return!ue&&iS(s,ne,Y)&&(W=Ai(it.NAVIGATION_DUPLICATED,{to:M,from:ne}),Z(ne,ne,!0,!1)),(W?Promise.resolve(W):R(M,ne)).catch(B=>Qn(B)?Qn(B,it.NAVIGATION_GUARD_REDIRECT)?B:De(B):oe(B,M,ne)).then(B=>{if(B){if(Qn(B,it.NAVIGATION_GUARD_REDIRECT))return T(He({replace:w},N(B.to),{state:typeof B.to=="object"?He({},se,B.to.state):se,force:ue}),q||M)}else B=C(M,ne,!0,w,se);return P(M,ne,B),B})}function y(L,q){const Y=_(L,q);return Y?Promise.reject(Y):Promise.resolve()}function E(L){const q=G.values().next().value;return q&&typeof q.runWithContext=="function"?q.runWithContext(L):L()}function R(L,q){let Y;const[ne,se,ue]=TS(L,q);Y=Iu(ne.reverse(),"beforeRouteLeave",L,q);for(const k of ne)k.leaveGuards.forEach(M=>{Y.push(Vs(M,L,q))});const w=y.bind(null,L,q);return Y.push(w),ee(Y).then(()=>{Y=[];for(const k of i.list())Y.push(Vs(k,L,q));return Y.push(w),ee(Y)}).then(()=>{Y=Iu(se,"beforeRouteUpdate",L,q);for(const k of se)k.updateGuards.forEach(M=>{Y.push(Vs(M,L,q))});return Y.push(w),ee(Y)}).then(()=>{Y=[];for(const k of ue)if(k.beforeEnter)if(Rn(k.beforeEnter))for(const M of k.beforeEnter)Y.push(Vs(M,L,q));else Y.push(Vs(k.beforeEnter,L,q));return Y.push(w),ee(Y)}).then(()=>(L.matched.forEach(k=>k.enterCallbacks={}),Y=Iu(ue,"beforeRouteEnter",L,q,E),Y.push(w),ee(Y))).then(()=>{Y=[];for(const k of o.list())Y.push(Vs(k,L,q));return Y.push(w),ee(Y)}).catch(k=>Qn(k,it.NAVIGATION_CANCELLED)?k:Promise.reject(k))}function P(L,q,Y){a.list().forEach(ne=>E(()=>ne(L,q,Y)))}function C(L,q,Y,ne,se){const ue=_(L,q);if(ue)return ue;const w=q===hn,k=Zr?history.state:{};Y&&(ne||w?r.replace(L.fullPath,He({scroll:w&&k&&k.scroll},se)):r.push(L.fullPath,se)),l.value=L,Z(L,q,Y,w),De()}let A;function pe(){A||(A=r.listen((L,q,Y)=>{if(!z.listening)return;const ne=V(L),se=U(ne,z.currentRoute.value);if(se){T(He(se,{replace:!0,force:!0}),ne).catch(ko);return}u=ne;const ue=l.value;Zr&&dS(gm(ue.fullPath,Y.delta),yl()),R(ne,ue).catch(w=>Qn(w,it.NAVIGATION_ABORTED|it.NAVIGATION_CANCELLED)?w:Qn(w,it.NAVIGATION_GUARD_REDIRECT)?(T(He(N(w.to),{force:!0}),ne).then(k=>{Qn(k,it.NAVIGATION_ABORTED|it.NAVIGATION_DUPLICATED)&&!Y.delta&&Y.type===mh.pop&&r.go(-1,!1)}).catch(ko),Promise.reject()):(Y.delta&&r.go(-Y.delta,!1),oe(w,ne,ue))).then(w=>{w=w||C(ne,ue,!1),w&&(Y.delta&&!Qn(w,it.NAVIGATION_CANCELLED)?r.go(-Y.delta,!1):Y.type===mh.pop&&Qn(w,it.NAVIGATION_ABORTED|it.NAVIGATION_DUPLICATED)&&r.go(-1,!1)),P(ne,ue,w)}).catch(ko)}))}let Te=po(),le=po(),he;function oe(L,q,Y){De(L);const ne=le.list();return ne.length?ne.forEach(se=>se(L,q,Y)):console.error(L),Promise.reject(L)}function Re(){return he&&l.value!==hn?Promise.resolve():new Promise((L,q)=>{Te.add([L,q])})}function De(L){return he||(he=!L,pe(),Te.list().forEach(([q,Y])=>L?Y(L):q()),Te.reset()),L}function Z(L,q,Y,ne){const{scrollBehavior:se}=t;if(!Zr||!se)return Promise.resolve();const ue=!Y&&pS(gm(L.fullPath,0))||(ne||!Y)&&history.state&&history.state.scroll||null;return Ys().then(()=>se(L,q,ue)).then(w=>w&&fS(w)).catch(w=>oe(w,L,q))}const x=L=>r.go(L);let Q;const G=new Set,z={currentRoute:l,listening:!0,addRoute:m,removeRoute:b,clearRoutes:e.clearRoutes,hasRoute:D,getRoutes:v,resolve:V,options:t,push:S,replace:O,go:x,back:()=>x(-1),forward:()=>x(1),beforeEach:i.add,beforeResolve:o.add,afterEach:a.add,onError:le.add,isReady:Re,install(L){L.component("RouterLink",HS),L.component("RouterView",Pv),L.config.globalProperties.$router=z,Object.defineProperty(L.config.globalProperties,"$route",{enumerable:!0,get:()=>Ge(l)}),Zr&&!Q&&l.value===hn&&(Q=!0,S(r.location).catch(ne=>{}));const q={};for(const ne in hn)Object.defineProperty(q,ne,{get:()=>l.value[ne],enumerable:!0});L.provide(Af,z),L.provide(Rf,Ln(q)),L.provide(_h,l);const Y=L.unmount;G.add(L),L.unmount=function(){G.delete(L),G.size<1&&(u=hn,A&&A(),A=null,l.value=hn,Q=!1,he=!1),Y()}}};function ee(L){return L.reduce((q,Y)=>q.then(()=>E(Y)),Promise.resolve())}return z}function kv(t){return Vt(Rf)}const zS=/(:\w+)\([^)]+\)/g,KS=/(:\w+)[?+*]/g,QS=/:\w+/g,YS=(t,e)=>e.path.replace(zS,"$1").replace(KS,"$1").replace(QS,n=>t.params[n.slice(1)]?.toString()||""),yh=(t,e)=>{const n=t.route.matched.find(r=>r.components?.default===t.Component.type),s=e??n?.meta.key??(n&&YS(t.route,n));return typeof s=="function"?s(t.route):s},JS=(t,e)=>({default:()=>t?ot(Kb,t===!0?{}:t,e):e});function Sf(t){return Array.isArray(t)?t:[t]}const XS="modulepreload",ZS=function(t,e){return new URL(t,e).href},Pm={},ft=function(e,n,s){let r=Promise.resolve();if(n&&n.length>0){let u=function(h){return Promise.all(h.map(f=>Promise.resolve(f).then(p=>({status:"fulfilled",value:p}),p=>({status:"rejected",reason:p}))))};const o=document.getElementsByTagName("link"),a=document.querySelector("meta[property=csp-nonce]"),l=a?.nonce||a?.getAttribute("nonce");r=u(n.map(h=>{if(h=ZS(h,s),h in Pm)return;Pm[h]=!0;const f=h.endsWith(".css"),p=f?'[rel="stylesheet"]':"";if(s)for(let b=o.length-1;b>=0;b--){const v=o[b];if(v.href===h&&(!f||v.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${h}"]${p}`))return;const m=document.createElement("link");if(m.rel=f?"stylesheet":XS,f||(m.as="script"),m.crossOrigin="",m.href=h,l&&m.setAttribute("nonce",l),document.head.appendChild(m),f)return new Promise((b,v)=>{m.addEventListener("load",b),m.addEventListener("error",()=>v(new Error(`Unable to preload CSS for ${h}`)))})}))}function i(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return r.then(o=>{for(const a of o||[])a.status==="rejected"&&i(a.reason);return e().catch(i)})},eC={layout:!1},tC={layout:!1},nC={layout:!1},sC={layout:"dashboard"},rC={layout:"dashboard"},iC={layout:"coach"},oC={layout:"dashboard"},aC={layout:"coach"},cC={layout:"dashboard"},lC={layout:"dashboard"},Au=[{name:"index",path:"/",meta:eC||{},component:()=>ft(()=>import("./Ci7UodE8.js"),__vite__mapDeps([0,1]),import.meta.url)},{name:"profilo",path:"/profilo",meta:tC||{},component:()=>ft(()=>import("./CKS8qvRx.js"),[],import.meta.url)},{name:"slug",path:"/:slug(.*)*",component:()=>ft(()=>import("./hAf1NoBB.js"),__vite__mapDeps([2,3]),import.meta.url)},{name:"dev-upload",path:"/dev-upload",meta:nC||{},component:()=>ft(()=>import("./B-9puQ2k.js"),__vite__mapDeps([4,5,6]),import.meta.url)},{name:"panoramica",path:"/panoramica",meta:sC||{},component:()=>ft(()=>import("./T15pg3hI.js"),__vite__mapDeps([7,8,9,10,11,12,13]),import.meta.url)},{name:"piste-id",path:"/piste/:id()",meta:rC||{},component:()=>ft(()=>import("./BmN6WGVX.js"),__vite__mapDeps([14,15,16,17,9,10,18,11,12,19]),import.meta.url)},{name:"dev-cleanup",path:"/dev-cleanup",component:()=>ft(()=>import("./BRJnN6Cr.js"),__vite__mapDeps([20,5,9,10,21]),import.meta.url)},{name:"piloti-id",path:"/piloti/:id()",meta:{...iC||{},middleware:["coach-or-admin"]},component:()=>ft(()=>import("./DRMOub1B.js"),__vite__mapDeps([22,5,15,16,17,9,10,18,11,12,19,23,24,8,13,25,26,27,28,29]),import.meta.url)},{name:"piste",path:"/piste",meta:oC||{},component:()=>ft(()=>import("./pxfwJOWd.js"),__vite__mapDeps([30,27,9,10,11,12,28]),import.meta.url)},{name:"piloti",path:"/piloti",meta:{...aC||{},middleware:["coach-or-admin"]},component:()=>ft(()=>import("./DiVuGCuu.js"),__vite__mapDeps([31,5,32]),import.meta.url)},{name:"sessioni-id",path:"/sessioni/:id()",meta:cC||{},component:()=>ft(()=>import("./OMGJkeww.js"),__vite__mapDeps([33,23,9,10,18,12,24]),import.meta.url)},{name:"dev-data-audit",path:"/dev-data-audit",component:()=>ft(()=>import("./VbJklEK-.js"),__vite__mapDeps([34,5,9,10,35]),import.meta.url)},{name:"sessioni",path:"/sessioni",meta:lC||{},component:()=>ft(()=>import("./BQ32EAEH.js"),__vite__mapDeps([36,25,16,17,9,10,12,26]),import.meta.url)}],Nv=(t,e)=>({default:()=>t?ot(ua,t===!0?{}:t,e):e.default?.()}),uC=/(:\w+)\([^)]+\)/g,hC=/(:\w+)[?+*]/g,fC=/:\w+/g;function km(t){const e=t?.meta.key??t.path.replace(uC,"$1").replace(hC,"$1").replace(fC,n=>t.params[n.slice(1)]?.toString()||"");return typeof e=="function"?e(t):e}function dC(t,e){return t===e||e===hn?!1:km(t)!==km(e)?!0:!t.matched.every((s,r)=>s.components&&s.components.default===e.matched[r]?.components?.default)}function pC(t,e=!1){if(t){if(t.nodeName==="#comment"&&t.nodeValue==="[")return Dv(t,[],e);if(e){const n=t.cloneNode(!0);return n.querySelectorAll("[data-island-slot]").forEach(s=>{s.innerHTML=""}),[n.outerHTML]}return[t.outerHTML]}}function Dv(t,e=[],n=!1){if(t&&t.nodeName){if(gC(t))return e;if(!mC(t)){const s=t.cloneNode(!0);n&&s.querySelectorAll?.("[data-island-slot]").forEach(r=>{r.innerHTML=""}),e.push(s.outerHTML)}Dv(t.nextSibling,e,n)}return e}function Ru(t,e){const n=t?pC(t):[e];return n?th(n.join(""),n.length):ot("div")}function mC(t){return t.nodeName==="#comment"&&t.nodeValue==="["}function gC(t){return t.nodeName==="#comment"&&t.nodeValue==="]"}const _C={scrollBehavior(t,e,n){const s=ct(),r=zt().options?.scrollBehaviorType??"auto";if(t.path.replace(/\/$/,"")===e.path.replace(/\/$/,""))return e.hash&&!t.hash?{left:0,top:0}:t.hash?{el:t.hash,top:Ov(t.hash),behavior:r}:!1;if((typeof t.meta.scrollToTop=="function"?t.meta.scrollToTop(t,e):t.meta.scrollToTop)===!1)return!1;const o=s._runningTransition?"page:transition:finish":"page:loading:end";return new Promise(a=>{if(e===hn){a(Nm(t,e,n,r));return}s.hooks.hookOnce(o,()=>{requestAnimationFrame(()=>a(Nm(t,e,n,r)))})})}};function Ov(t){try{const e=document.querySelector(t);if(e)return(Number.parseFloat(getComputedStyle(e).scrollMarginTop)||0)+(Number.parseFloat(getComputedStyle(document.documentElement).scrollPaddingTop)||0)}catch{}return 0}function Nm(t,e,n,s){if(n)return n;const r=dC(t,e);return t.hash?{el:t.hash,top:Ov(t.hash),behavior:r?s:"instant"}:{left:0,top:0}}const yC={hashMode:!1,scrollBehaviorType:"auto"},Rs={...yC,..._C},vC=async(t,e)=>{let n,s;if(!t.meta?.validate)return;const r=([n,s]=pi(()=>Promise.resolve(t.meta.validate(t))),n=await n,s(),n);if(r===!0)return;const i=kr({fatal:!0,statusCode:r&&r.statusCode||404,statusMessage:r&&r.statusMessage||`Page Not Found: ${t.fullPath}`,data:{path:t.fullPath}});return typeof window<"u"&&window.history.pushState({},"",e.fullPath),i},EC=async t=>{let e,n;const s=([e,n]=pi(()=>wf({path:t.path})),e=await e,n(),e);if(s.redirect){const r=s.redirect.includes("#")?s.redirect:s.redirect+t.hash;return Hr(r,{acceptRelative:!0})?(window.location.href=r,!1):r}},TC=[vC,EC],vh={"coach-or-admin":()=>ft(()=>import("./BX6CKWW2.js"),[],import.meta.url),coach:()=>ft(()=>import("./D9Lbvlb7.js"),[],import.meta.url)};function wC(t,e,n){const{pathname:s,search:r,hash:i}=e,o=t.indexOf("#");if(o>-1){const u=i.includes(t.slice(o))?t.slice(o).length:1;let h=i.slice(u);return h[0]!=="/"&&(h="/"+h),Qp(h,"")}const a=Qp(s,t),l=!n||JA(a,n)?a:n;return l+(l.includes("?")?"":r)+i}const bC=qn({name:"nuxt:router",enforce:"pre",async setup(t){let e,n,s=ml().app.baseURL;const r=Rs.history?.(s)??AS(s),i=Rs.routes?([e,n]=pi(()=>Rs.routes(Au)),e=await e,n(),e??Au):Au;let o;const a=WS({...Rs,scrollBehavior:(D,V,N)=>{if(V===hn){o=N;return}if(Rs.scrollBehavior){if(a.options.scrollBehavior=Rs.scrollBehavior,"scrollRestoration"in window.history){const _=a.beforeEach(()=>{_(),window.history.scrollRestoration="manual"})}return Rs.scrollBehavior(D,hn,o||N)}},history:r,routes:i});"scrollRestoration"in window.history&&(window.history.scrollRestoration="auto"),t.vueApp.use(a);const l=us(a.currentRoute.value);a.afterEach((D,V)=>{l.value=V}),Object.defineProperty(t.vueApp.config.globalProperties,"previousRoute",{get:()=>l.value});const u=wC(s,window.location,t.payload.path),h=us(a.currentRoute.value),f=()=>{h.value=a.currentRoute.value};a.afterEach((D,V)=>{D.matched.at(-1)?.components?.default===V.matched.at(-1)?.components?.default&&f()});const p={sync:f};for(const D in h.value)Object.defineProperty(p,D,{get:()=>h.value[D],enumerable:!0});t._route=Ln(p),t._middleware||={global:[],named:{}};const m=gl();a.afterEach(async(D,V,N)=>{delete t._processingMiddleware,!t.isHydrating&&m.value&&await t.runWithContext(zR),N&&await t.callHook("page:loading:end")});try{[e,n]=pi(()=>a.isReady()),await e,n()}catch(D){[e,n]=pi(()=>t.runWithContext(()=>wr(D))),await e,n()}const b=u!==a.currentRoute.value.fullPath?a.resolve(u):a.currentRoute.value;f();const v=t.payload.state._layout;return a.beforeEach(async(D,V)=>{await t.callHook("page:loading:start"),D.meta=ir(D.meta),t.isHydrating&&v&&!Hn(D.meta.layout)&&(D.meta.layout=v),t._processingMiddleware=!0;{const N=new Set([...TC,...t._middleware.global]);for(const _ of D.matched){const S=_.meta.middleware;if(S)for(const O of Sf(S))N.add(O)}{const _=await t.runWithContext(()=>wf({path:D.path}));if(_.appMiddleware)for(const S in _.appMiddleware)_.appMiddleware[S]?N.add(S):N.delete(S)}for(const _ of N){const S=typeof _=="string"?t._middleware.named[_]||await vh[_]?.().then(O=>O.default||O):_;if(!S)throw new Error(`Unknown route middleware: '${_}'.`);try{const O=await t.runWithContext(()=>S(D,V));if(!t.payload.serverRendered&&t.isHydrating&&(O===!1||O instanceof Error)){const U=O||kr({statusCode:404,statusMessage:`Page Not Found: ${u}`});return await t.runWithContext(()=>wr(U)),!1}if(O===!0)continue;if(O===!1)return O;if(O)return cv(O)&&O.fatal&&await t.runWithContext(()=>wr(O)),O}catch(O){const U=kr(O);return U.fatal&&await t.runWithContext(()=>wr(U)),U}}}}),a.onError(async()=>{delete t._processingMiddleware,await t.callHook("page:loading:end")}),a.afterEach(D=>{if(D.matched.length===0)return t.runWithContext(()=>wr(kr({statusCode:404,fatal:!1,statusMessage:`Page not found: ${D.fullPath}`,data:{path:D.fullPath}})))}),t.hooks.hookOnce("app:created",async()=>{try{"name"in b&&(b.name=void 0),await a.replace({...b,force:!0}),a.options.scrollBehavior=Rs.scrollBehavior}catch(D){await t.runWithContext(()=>wr(D))}}),{provide:{router:a}}}}),Dm=globalThis.requestIdleCallback||(t=>{const e=Date.now(),n={didTimeout:!1,timeRemaining:()=>Math.max(0,50-(Date.now()-e))};return setTimeout(()=>{t(n)},1)}),sx=globalThis.cancelIdleCallback||(t=>{clearTimeout(t)}),Cf=t=>{const e=ct();e.isHydrating?e.hooks.hookOnce("app:suspense:resolve",()=>{Dm(()=>t())}):Dm(()=>t())},IC=qn({name:"nuxt:payload",setup(t){const e=new Set;zt().beforeResolve(async(n,s)=>{if(n.path===s.path)return;const r=await fm(n.path);if(r){for(const i of e)delete t.static.data[i];for(const i in r.data)i in t.static.data||e.add(i),t.static.data[i]=r.data[i]}}),Cf(()=>{t.hooks.hook("link:prefetch",async n=>{const{hostname:s}=new URL(n,window.location.href);s===window.location.hostname&&await fm(n).catch(()=>{console.warn("[nuxt] Error preloading payload for",n)})}),navigator.connection?.effectiveType!=="slow-2g"&&setTimeout(_l,1e3)})}}),AC=qn(()=>{const t=zt();Cf(()=>{t.beforeResolve(async()=>{await new Promise(e=>{setTimeout(e,100),requestAnimationFrame(()=>{setTimeout(e,0)})})})})}),RC=qn(t=>{let e;async function n(){let s;try{s=await _l()}catch(r){const i=r;if(!("status"in i&&(i.status===404||i.status===403)))throw i}e&&clearTimeout(e),e=setTimeout(n,nm);try{const r=await $fetch(Ef("builds/latest.json")+`?${Date.now()}`);r.id!==s?.id&&(t.hooks.callHook("app:manifest:update",r),e&&clearTimeout(e))}catch{}}Cf(()=>{e=setTimeout(n,nm)})});function SC(t={}){const e=t.path||window.location.pathname;let n={};try{n=Nc(sessionStorage.getItem("nuxt:reload")||"{}")}catch{}if(t.force||n?.path!==e||n?.expires<Date.now()){try{sessionStorage.setItem("nuxt:reload",JSON.stringify({path:e,expires:Date.now()+(t.ttl??1e4)}))}catch{}if(t.persistState)try{sessionStorage.setItem("nuxt:reload:state",JSON.stringify({state:ct().payload.state}))}catch{}window.location.pathname!==e?window.location.href=e:window.location.reload()}}const CC=qn({name:"nuxt:chunk-reload",setup(t){const e=zt(),n=ml(),s=new Set;e.beforeEach(()=>{s.clear()}),t.hook("app:chunkError",({error:i})=>{s.add(i)});function r(i){const o=yf(n.app.baseURL,i.fullPath);SC({path:o,persistState:!0})}t.hook("app:manifest:update",()=>{e.beforeResolve(r)}),e.onError((i,o)=>{s.has(i)&&r(o)})}}),PC=qn({name:"nuxt:global-components"}),Bs={coach:Ac(()=>ft(()=>import("./BpmooI1H.js"),__vite__mapDeps([37,38]),import.meta.url).then(t=>t.default||t)),dashboard:Ac(()=>ft(()=>import("./Cj-uBS3z.js"),__vite__mapDeps([39,5,40]),import.meta.url).then(t=>t.default||t))};function kC(t){if(t?.__asyncLoader&&!t.__asyncResolved)return t.__asyncLoader()}async function NC(t,e=zt()){const{path:n,matched:s}=e.resolve(t);if(!s.length||(e._routePreloaded||=new Set,e._routePreloaded.has(n)))return;const r=e._preloadPromises||=[];if(r.length>4)return Promise.all(r).then(()=>NC(t,e));e._routePreloaded.add(n);for(const i of s){const o=i.components?.default;if(typeof o!="function")continue;const a=Promise.resolve(o()).catch(()=>{}).finally(()=>r.splice(r.indexOf(a)));r.push(a)}await Promise.all(r)}const DC=qn({name:"nuxt:prefetch",setup(t){const e=zt();t.hooks.hook("app:mounted",()=>{e.beforeEach(async n=>{const s=n?.meta?.layout;s&&typeof Bs[s]=="function"&&await Bs[s]()})}),t.hooks.hook("link:prefetch",n=>{if(Hr(n))return;const s=e.resolve(n);if(!s)return;const r=s.meta.layout;let i=Sf(s.meta.middleware);i=i.filter(o=>typeof o=="string");for(const o of i)typeof vh[o]=="function"&&vh[o]();typeof r=="string"&&r in Bs&&kC(Bs[r])})}}),OC={mounted(t,e){t._clickOutside=n=>{t===n.target||t.contains(n.target)||e.value(n)},document.addEventListener("click",t._clickOutside)},unmounted(t){t._clickOutside&&document.removeEventListener("click",t._clickOutside)}},VC=qn(t=>{t.vueApp.directive("click-outside",OC)}),LC=[M0,$0,bC,IC,AC,RC,CC,PC,DC,VC],MC={class:"notification-icon"},xC={key:0,width:"16",height:"16",viewBox:"0 0 16 16"},FC={key:1,width:"16",height:"16",viewBox:"0 0 16 16"},UC={key:2,width:"16",height:"16",viewBox:"0 0 16 16"},BC={class:"notification-message"},$C=ut({__name:"SyncNotification",props:{results:{},visible:{type:Boolean}},emits:["close"],setup(t,{emit:e}){const n=t,s=e,r=de(!1);let i=null;xn(()=>n.visible,h=>{r.value=h,h&&i&&clearTimeout(i),h&&(i=setTimeout(()=>{r.value=!1,s("close")},5e3))});const o=Fe(()=>{const h=n.results.filter(b=>b.status==="created").length,f=n.results.filter(b=>b.status==="updated").length,p=n.results.filter(b=>b.status==="skipped").length,m=n.results.filter(b=>b.status==="error").length;return{created:h,updated:f,skipped:p,errors:m,total:n.results.length}}),a=Fe(()=>o.value.errors>0?"error":o.value.created>0||o.value.updated>0?"success":(o.value.total===0,"info")),l=Fe(()=>{const h=o.value;return h.total===0?"Nessun file da sincronizzare":h.errors>0?`${h.errors} errori durante la sincronizzazione`:h.created>0&&h.updated>0?`${h.created} nuovi, ${h.updated} aggiornati`:h.created>0?`${h.created} sessioni sincronizzate`:h.updated>0?`${h.updated} sessioni aggiornate`:h.skipped>0?`${h.skipped} file saltati (gi sincronizzati o di altri utenti)`:"Sincronizzazione completata"}),u=()=>{r.value=!1,s("close")};return(h,f)=>(_e(),Jt(ua,{name:"slide"},{default:cn(()=>[r.value?(_e(),ke("div",{key:0,class:Ot(["sync-notification",a.value]),onClick:u},[j("div",MC,[a.value==="success"?(_e(),ke("svg",xC,[...f[0]||(f[0]=[j("path",{d:"M6 10.8l-3-3L1.6 9.2l4.4 4.4 9-9L13.6 3 6 10.8z",fill:"currentColor"},null,-1)])])):a.value==="error"?(_e(),ke("svg",FC,[...f[1]||(f[1]=[j("path",{d:"M8 1a7 7 0 100 14A7 7 0 008 1zm0 10.5a1 1 0 110-2 1 1 0 010 2zM9 7H7V4h2v3z",fill:"currentColor"},null,-1)])])):(_e(),ke("svg",UC,[...f[2]||(f[2]=[j("path",{d:"M8 1a7 7 0 100 14A7 7 0 008 1zm1 10H7V9h2v2zm0-3H7V4h2v4z",fill:"currentColor"},null,-1)])]))]),j("span",BC,_n(l.value),1),j("button",{class:"notification-close",onClick:pl(u,["stop"])},"")],2)):hs("",!0)]),_:1}))}}),gn=(t,e)=>{const n=t.__vccOpts||t;for(const[s,r]of e)n[s]=r;return n},HC=Object.assign(gn($C,[["__scopeId","data-v-2cbc757e"]]),{__name:"ElectronSyncNotification"}),jC=()=>{};var Om={};const Vv=function(t){const e=[];let n=0;for(let s=0;s<t.length;s++){let r=t.charCodeAt(s);r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=r&63|128):(r&64512)===55296&&s+1<t.length&&(t.charCodeAt(s+1)&64512)===56320?(r=65536+((r&1023)<<10)+(t.charCodeAt(++s)&1023),e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=r&63|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=r&63|128)}return e},qC=function(t){const e=[];let n=0,s=0;for(;n<t.length;){const r=t[n++];if(r<128)e[s++]=String.fromCharCode(r);else if(r>191&&r<224){const i=t[n++];e[s++]=String.fromCharCode((r&31)<<6|i&63)}else if(r>239&&r<365){const i=t[n++],o=t[n++],a=t[n++],l=((r&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;e[s++]=String.fromCharCode(55296+(l>>10)),e[s++]=String.fromCharCode(56320+(l&1023))}else{const i=t[n++],o=t[n++];e[s++]=String.fromCharCode((r&15)<<12|(i&63)<<6|o&63)}}return e.join("")},Lv={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let r=0;r<t.length;r+=3){const i=t[r],o=r+1<t.length,a=o?t[r+1]:0,l=r+2<t.length,u=l?t[r+2]:0,h=i>>2,f=(i&3)<<4|a>>4;let p=(a&15)<<2|u>>6,m=u&63;l||(m=64,o||(p=64)),s.push(n[h],n[f],n[p],n[m])}return s.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Vv(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):qC(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let r=0;r<t.length;){const i=n[t.charAt(r++)],a=r<t.length?n[t.charAt(r)]:0;++r;const u=r<t.length?n[t.charAt(r)]:64;++r;const f=r<t.length?n[t.charAt(r)]:64;if(++r,i==null||a==null||u==null||f==null)throw new GC;const p=i<<2|a>>4;if(s.push(p),u!==64){const m=a<<4&240|u>>2;if(s.push(m),f!==64){const b=u<<6&192|f;s.push(b)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class GC extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const WC=function(t){const e=Vv(t);return Lv.encodeByteArray(e,!0)},xc=function(t){return WC(t).replace(/\./g,"")},Mv=function(t){try{return Lv.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function zC(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const KC=()=>zC().__FIREBASE_DEFAULTS__,QC=()=>{if(typeof process>"u"||typeof Om>"u")return;const t=Om.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},YC=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Mv(t[1]);return e&&JSON.parse(e)},vl=()=>{try{return jC()||KC()||QC()||YC()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},xv=t=>vl()?.emulatorHosts?.[t],JC=t=>{const e=xv(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),s]:[e.substring(0,n),s]},Fv=()=>vl()?.config,Uv=t=>vl()?.[`_${t}`];class XC{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,s))}}}function Ui(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Bv(t){return(await fetch(t,{credentials:"include"})).ok}function ZC(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=e||"demo-project",r=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${s}`,aud:s,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...t};return[xc(JSON.stringify(n)),xc(JSON.stringify(o)),""].join(".")}const No={};function eP(){const t={prod:[],emulator:[]};for(const e of Object.keys(No))No[e]?t.emulator.push(e):t.prod.push(e);return t}function tP(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let Vm=!1;function $v(t,e){if(typeof window>"u"||typeof document>"u"||!Ui(window.location.host)||No[t]===e||No[t]||Vm)return;No[t]=e;function n(p){return`__firebase__banner__${p}`}const s="__firebase__banner",i=eP().prod.length>0;function o(){const p=document.getElementById(s);p&&p.remove()}function a(p){p.style.display="flex",p.style.background="#7faaf0",p.style.position="fixed",p.style.bottom="5px",p.style.left="5px",p.style.padding=".5em",p.style.borderRadius="5px",p.style.alignItems="center"}function l(p,m){p.setAttribute("width","24"),p.setAttribute("id",m),p.setAttribute("height","24"),p.setAttribute("viewBox","0 0 24 24"),p.setAttribute("fill","none"),p.style.marginLeft="-6px"}function u(){const p=document.createElement("span");return p.style.cursor="pointer",p.style.marginLeft="16px",p.style.fontSize="24px",p.innerHTML=" &times;",p.onclick=()=>{Vm=!0,o()},p}function h(p,m){p.setAttribute("id",m),p.innerText="Learn more",p.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",p.setAttribute("target","__blank"),p.style.paddingLeft="5px",p.style.textDecoration="underline"}function f(){const p=tP(s),m=n("text"),b=document.getElementById(m)||document.createElement("span"),v=n("learnmore"),D=document.getElementById(v)||document.createElement("a"),V=n("preprendIcon"),N=document.getElementById(V)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(p.created){const _=p.element;a(_),h(D,v);const S=u();l(N,V),_.append(N,b,D,S),document.body.appendChild(_)}i?(b.innerText="Preview backend disconnected.",N.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(N.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,b.innerText="Preview backend running in this workspace."),b.setAttribute("id",m)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",f):f()}function $t(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function nP(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test($t())}function sP(){const t=vl()?.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function rP(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function iP(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function oP(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function aP(){const t=$t();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function cP(){return!sP()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function lP(){try{return typeof indexedDB=="object"}catch{return!1}}function uP(){return new Promise((t,e)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(s);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(s),t(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{e(r.error?.message||"")}}catch(n){e(n)}})}const hP="FirebaseError";class _s extends Error{constructor(e,n,s){super(n),this.code=e,this.customData=s,this.name=hP,Object.setPrototypeOf(this,_s.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ha.prototype.create)}}class ha{constructor(e,n,s){this.service=e,this.serviceName=n,this.errors=s}create(e,...n){const s=n[0]||{},r=`${this.service}/${e}`,i=this.errors[e],o=i?fP(i,s):"Error",a=`${this.serviceName}: ${o} (${r}).`;return new _s(r,a,s)}}function fP(t,e){return t.replace(dP,(n,s)=>{const r=e[s];return r!=null?String(r):`<${s}?>`})}const dP=/\{\$([^}]+)}/g;function pP(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Vr(t,e){if(t===e)return!0;const n=Object.keys(t),s=Object.keys(e);for(const r of n){if(!s.includes(r))return!1;const i=t[r],o=e[r];if(Lm(i)&&Lm(o)){if(!Vr(i,o))return!1}else if(i!==o)return!1}for(const r of s)if(!n.includes(r))return!1;return!0}function Lm(t){return t!==null&&typeof t=="object"}function fa(t){const e=[];for(const[n,s]of Object.entries(t))Array.isArray(s)?s.forEach(r=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function yo(t){const e={};return t.replace(/^\?/,"").split("&").forEach(s=>{if(s){const[r,i]=s.split("=");e[decodeURIComponent(r)]=decodeURIComponent(i)}}),e}function vo(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function mP(t,e){const n=new gP(t,e);return n.subscribe.bind(n)}class gP{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,s){let r;if(e===void 0&&n===void 0&&s===void 0)throw new Error("Missing Observer.");_P(e,["next","error","complete"])?r=e:r={next:e,error:n,complete:s},r.next===void 0&&(r.next=Su),r.error===void 0&&(r.error=Su),r.complete===void 0&&(r.complete=Su);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function _P(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Su(){}function lt(t){return t&&t._delegate?t._delegate:t}class Lr{constructor(e,n,s){this.name=e,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const br="[DEFAULT]";class yP{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const s=new XC;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:n});r&&s.resolve(r)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e?.identifier),s=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(r){if(s)return null;throw r}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(EP(e))try{this.getOrInitializeService({instanceIdentifier:br})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:r});s.resolve(i)}catch{}}}}clearInstance(e=br){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=br){return this.instances.has(e)}getOptions(e=br){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[i,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);s===a&&o.resolve(r)}return r}onInit(e,n){const s=this.normalizeInstanceIdentifier(n),r=this.onInitCallbacks.get(s)??new Set;r.add(e),this.onInitCallbacks.set(s,r);const i=this.instances.get(s);return i&&e(i,s),()=>{r.delete(e)}}invokeOnInitCallbacks(e,n){const s=this.onInitCallbacks.get(n);if(s)for(const r of s)try{r(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:vP(e),options:n}),this.instances.set(e,s),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=br){return this.component?this.component.multipleInstances?e:br:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function vP(t){return t===br?void 0:t}function EP(t){return t.instantiationMode==="EAGER"}class TP{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new yP(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}var Ve;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Ve||(Ve={}));const wP={debug:Ve.DEBUG,verbose:Ve.VERBOSE,info:Ve.INFO,warn:Ve.WARN,error:Ve.ERROR,silent:Ve.SILENT},bP=Ve.INFO,IP={[Ve.DEBUG]:"log",[Ve.VERBOSE]:"log",[Ve.INFO]:"info",[Ve.WARN]:"warn",[Ve.ERROR]:"error"},AP=(t,e,...n)=>{if(e<t.logLevel)return;const s=new Date().toISOString(),r=IP[e];if(r)console[r](`[${s}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Pf{constructor(e){this.name=e,this._logLevel=bP,this._logHandler=AP,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ve))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?wP[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ve.DEBUG,...e),this._logHandler(this,Ve.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ve.VERBOSE,...e),this._logHandler(this,Ve.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ve.INFO,...e),this._logHandler(this,Ve.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ve.WARN,...e),this._logHandler(this,Ve.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ve.ERROR,...e),this._logHandler(this,Ve.ERROR,...e)}}const RP=(t,e)=>e.some(n=>t instanceof n);let Mm,xm;function SP(){return Mm||(Mm=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function CP(){return xm||(xm=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Hv=new WeakMap,Eh=new WeakMap,jv=new WeakMap,Cu=new WeakMap,kf=new WeakMap;function PP(t){const e=new Promise((n,s)=>{const r=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(Gs(t.result)),r()},o=()=>{s(t.error),r()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&Hv.set(n,t)}).catch(()=>{}),kf.set(e,t),e}function kP(t){if(Eh.has(t))return;const e=new Promise((n,s)=>{const r=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),r()},o=()=>{s(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});Eh.set(t,e)}let Th={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Eh.get(t);if(e==="objectStoreNames")return t.objectStoreNames||jv.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Gs(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function NP(t){Th=t(Th)}function DP(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const s=t.call(Pu(this),e,...n);return jv.set(s,e.sort?e.sort():[e]),Gs(s)}:CP().includes(t)?function(...e){return t.apply(Pu(this),e),Gs(Hv.get(this))}:function(...e){return Gs(t.apply(Pu(this),e))}}function OP(t){return typeof t=="function"?DP(t):(t instanceof IDBTransaction&&kP(t),RP(t,SP())?new Proxy(t,Th):t)}function Gs(t){if(t instanceof IDBRequest)return PP(t);if(Cu.has(t))return Cu.get(t);const e=OP(t);return e!==t&&(Cu.set(t,e),kf.set(e,t)),e}const Pu=t=>kf.get(t);function VP(t,e,{blocked:n,upgrade:s,blocking:r,terminated:i}={}){const o=indexedDB.open(t,e),a=Gs(o);return s&&o.addEventListener("upgradeneeded",l=>{s(Gs(o.result),l.oldVersion,l.newVersion,Gs(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{i&&l.addEventListener("close",()=>i()),r&&l.addEventListener("versionchange",u=>r(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}const LP=["get","getKey","getAll","getAllKeys","count"],MP=["put","add","delete","clear"],ku=new Map;function Fm(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(ku.get(e))return ku.get(e);const n=e.replace(/FromIndex$/,""),s=e!==n,r=MP.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(r||LP.includes(n)))return;const i=async function(o,...a){const l=this.transaction(o,r?"readwrite":"readonly");let u=l.store;return s&&(u=u.index(a.shift())),(await Promise.all([u[n](...a),r&&l.done]))[0]};return ku.set(e,i),i}NP(t=>({...t,get:(e,n,s)=>Fm(e,n)||t.get(e,n,s),has:(e,n)=>!!Fm(e,n)||t.has(e,n)}));class xP{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(FP(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function FP(t){return t.getComponent()?.type==="VERSION"}const wh="@firebase/app",Um="0.14.6";const fs=new Pf("@firebase/app"),UP="@firebase/app-compat",BP="@firebase/analytics-compat",$P="@firebase/analytics",HP="@firebase/app-check-compat",jP="@firebase/app-check",qP="@firebase/auth",GP="@firebase/auth-compat",WP="@firebase/database",zP="@firebase/data-connect",KP="@firebase/database-compat",QP="@firebase/functions",YP="@firebase/functions-compat",JP="@firebase/installations",XP="@firebase/installations-compat",ZP="@firebase/messaging",ek="@firebase/messaging-compat",tk="@firebase/performance",nk="@firebase/performance-compat",sk="@firebase/remote-config",rk="@firebase/remote-config-compat",ik="@firebase/storage",ok="@firebase/storage-compat",ak="@firebase/firestore",ck="@firebase/ai",lk="@firebase/firestore-compat",uk="firebase",hk="12.6.0";const bh="[DEFAULT]",fk={[wh]:"fire-core",[UP]:"fire-core-compat",[$P]:"fire-analytics",[BP]:"fire-analytics-compat",[jP]:"fire-app-check",[HP]:"fire-app-check-compat",[qP]:"fire-auth",[GP]:"fire-auth-compat",[WP]:"fire-rtdb",[zP]:"fire-data-connect",[KP]:"fire-rtdb-compat",[QP]:"fire-fn",[YP]:"fire-fn-compat",[JP]:"fire-iid",[XP]:"fire-iid-compat",[ZP]:"fire-fcm",[ek]:"fire-fcm-compat",[tk]:"fire-perf",[nk]:"fire-perf-compat",[sk]:"fire-rc",[rk]:"fire-rc-compat",[ik]:"fire-gcs",[ok]:"fire-gcs-compat",[ak]:"fire-fst",[lk]:"fire-fst-compat",[ck]:"fire-vertex","fire-js":"fire-js",[uk]:"fire-js-all"};const zo=new Map,dk=new Map,Ih=new Map;function Bm(t,e){try{t.container.addComponent(e)}catch(n){fs.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Ri(t){const e=t.name;if(Ih.has(e))return fs.debug(`There were multiple attempts to register component ${e}.`),!1;Ih.set(e,t);for(const n of zo.values())Bm(n,t);for(const n of dk.values())Bm(n,t);return!0}function Nf(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function fn(t){return t==null?!1:t.settings!==void 0}const pk={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ws=new ha("app","Firebase",pk);class mk{constructor(e,n,s){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new Lr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ws.create("app-deleted",{appName:this._name})}}const Bi=hk;function qv(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const s={name:bh,automaticDataCollectionEnabled:!0,...e},r=s.name;if(typeof r!="string"||!r)throw Ws.create("bad-app-name",{appName:String(r)});if(n||(n=Fv()),!n)throw Ws.create("no-options");const i=zo.get(r);if(i){if(Vr(n,i.options)&&Vr(s,i.config))return i;throw Ws.create("duplicate-app",{appName:r})}const o=new TP(r);for(const l of Ih.values())o.addComponent(l);const a=new mk(n,s,o);return zo.set(r,a),a}function Gv(t=bh){const e=zo.get(t);if(!e&&t===bh&&Fv())return qv();if(!e)throw Ws.create("no-app",{appName:t});return e}function $m(){return Array.from(zo.values())}function zs(t,e,n){let s=fk[t]??t;n&&(s+=`-${n}`);const r=s.match(/\s|\//),i=e.match(/\s|\//);if(r||i){const o=[`Unable to register library "${s}" with version "${e}":`];r&&o.push(`library name "${s}" contains illegal characters (whitespace or "/")`),r&&i&&o.push("and"),i&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),fs.warn(o.join(" "));return}Ri(new Lr(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}const gk="firebase-heartbeat-database",_k=1,Ko="firebase-heartbeat-store";let Nu=null;function Wv(){return Nu||(Nu=VP(gk,_k,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Ko)}catch(n){console.warn(n)}}}}).catch(t=>{throw Ws.create("idb-open",{originalErrorMessage:t.message})})),Nu}async function yk(t){try{const n=(await Wv()).transaction(Ko),s=await n.objectStore(Ko).get(zv(t));return await n.done,s}catch(e){if(e instanceof _s)fs.warn(e.message);else{const n=Ws.create("idb-get",{originalErrorMessage:e?.message});fs.warn(n.message)}}}async function Hm(t,e){try{const s=(await Wv()).transaction(Ko,"readwrite");await s.objectStore(Ko).put(e,zv(t)),await s.done}catch(n){if(n instanceof _s)fs.warn(n.message);else{const s=Ws.create("idb-set",{originalErrorMessage:n?.message});fs.warn(s.message)}}}function zv(t){return`${t.name}!${t.options.appId}`}const vk=1024,Ek=30;class Tk{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new bk(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=jm();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(r=>r.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:n}),this._heartbeatsCache.heartbeats.length>Ek){const r=Ik(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(r,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){fs.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=jm(),{heartbeatsToSend:n,unsentEntries:s}=wk(this._heartbeatsCache.heartbeats),r=xc(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}catch(e){return fs.warn(e),""}}}function jm(){return new Date().toISOString().substring(0,10)}function wk(t,e=vk){const n=[];let s=t.slice();for(const r of t){const i=n.find(o=>o.agent===r.agent);if(i){if(i.dates.push(r.date),qm(n)>e){i.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),qm(n)>e){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class bk{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return lP()?uP().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await yk(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return Hm(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return Hm(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function qm(t){return xc(JSON.stringify({version:2,heartbeats:t})).length}function Ik(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let s=1;s<t.length;s++)t[s].date<n&&(n=t[s].date,e=s);return e}function Ak(t){Ri(new Lr("platform-logger",e=>new xP(e),"PRIVATE")),Ri(new Lr("heartbeat",e=>new Tk(e),"PRIVATE")),zs(wh,Um,t),zs(wh,Um,"esm2020"),zs("fire-js","")}Ak("");function Kv(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Rk=Kv,Qv=new ha("auth","Firebase",Kv());const Fc=new Pf("@firebase/auth");function Sk(t,...e){Fc.logLevel<=Ve.WARN&&Fc.warn(`Auth (${Bi}): ${t}`,...e)}function cc(t,...e){Fc.logLevel<=Ve.ERROR&&Fc.error(`Auth (${Bi}): ${t}`,...e)}function Sn(t,...e){throw Df(t,...e)}function Fn(t,...e){return Df(t,...e)}function Yv(t,e,n){const s={...Rk(),[e]:n};return new ha("auth","Firebase",s).create(e,{appName:t.name})}function is(t){return Yv(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Df(t,...e){if(typeof t!="string"){const n=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=t.name),t._errorFactory.create(n,...s)}return Qv.create(t,...e)}function be(t,e,...n){if(!t)throw Df(e,...n)}function es(t){const e="INTERNAL ASSERTION FAILED: "+t;throw cc(e),new Error(e)}function ds(t,e){t||es(e)}function Ah(){return typeof self<"u"&&self.location?.href||""}function Ck(){return Gm()==="http:"||Gm()==="https:"}function Gm(){return typeof self<"u"&&self.location?.protocol||null}function Pk(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Ck()||iP()||"connection"in navigator)?navigator.onLine:!0}function kk(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}class da{constructor(e,n){this.shortDelay=e,this.longDelay=n,ds(n>e,"Short delay should be less than long delay!"),this.isMobile=nP()||oP()}get(){return Pk()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Of(t,e){ds(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}class Jv{static initialize(e,n,s){this.fetchImpl=e,n&&(this.headersImpl=n),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;es("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;es("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;es("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Nk={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const Dk=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Ok=new da(3e4,6e4);function ys(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function Gn(t,e,n,s,r={}){return Xv(t,r,async()=>{let i={},o={};s&&(e==="GET"?o=s:i={body:JSON.stringify(s)});const a=fa({key:t.config.apiKey,...o}).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const u={method:e,headers:l,...i};return rP()||(u.referrerPolicy="no-referrer"),t.emulatorConfig&&Ui(t.emulatorConfig.host)&&(u.credentials="include"),Jv.fetch()(await Zv(t,t.config.apiHost,n,a),u)})}async function Xv(t,e,n){t._canInitEmulator=!1;const s={...Nk,...e};try{const r=new Lk(t),i=await Promise.race([n(),r.promise]);r.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw Qa(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const a=i.ok?o.errorMessage:o.error.message,[l,u]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Qa(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw Qa(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw Qa(t,"user-disabled",o);const h=s[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw Yv(t,h,u);Sn(t,h)}}catch(r){if(r instanceof _s)throw r;Sn(t,"network-request-failed",{message:String(r)})}}async function pa(t,e,n,s,r={}){const i=await Gn(t,e,n,s,r);return"mfaPendingCredential"in i&&Sn(t,"multi-factor-auth-required",{_serverResponse:i}),i}async function Zv(t,e,n,s){const r=`${e}${n}?${s}`,i=t,o=i.config.emulator?Of(t.config,r):`${t.config.apiScheme}://${r}`;return Dk.includes(n)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(o).toString():o}function Vk(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Lk{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,s)=>{this.timer=setTimeout(()=>s(Fn(this.auth,"network-request-failed")),Ok.get())})}}function Qa(t,e,n){const s={appName:t.name};n.email&&(s.email=n.email),n.phoneNumber&&(s.phoneNumber=n.phoneNumber);const r=Fn(t,e,s);return r.customData._tokenResponse=n,r}function Wm(t){return t!==void 0&&t.enterprise!==void 0}class Mk{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return Vk(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function xk(t,e){return Gn(t,"GET","/v2/recaptchaConfig",ys(t,e))}async function Fk(t,e){return Gn(t,"POST","/v1/accounts:delete",e)}async function Uc(t,e){return Gn(t,"POST","/v1/accounts:lookup",e)}function Do(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function Uk(t,e=!1){const n=lt(t),s=await n.getIdToken(e),r=Vf(s);be(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");const i=typeof r.firebase=="object"?r.firebase:void 0,o=i?.sign_in_provider;return{claims:r,token:s,authTime:Do(Du(r.auth_time)),issuedAtTime:Do(Du(r.iat)),expirationTime:Do(Du(r.exp)),signInProvider:o||null,signInSecondFactor:i?.sign_in_second_factor||null}}function Du(t){return Number(t)*1e3}function Vf(t){const[e,n,s]=t.split(".");if(e===void 0||n===void 0||s===void 0)return cc("JWT malformed, contained fewer than 3 sections"),null;try{const r=Mv(n);return r?JSON.parse(r):(cc("Failed to decode base64 JWT payload"),null)}catch(r){return cc("Caught error parsing JWT payload as JSON",r?.toString()),null}}function zm(t){const e=Vf(t);return be(e,"internal-error"),be(typeof e.exp<"u","internal-error"),be(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function Si(t,e,n=!1){if(n)return e;try{return await e}catch(s){throw s instanceof _s&&Bk(s)&&t.auth.currentUser===t&&await t.auth.signOut(),s}}function Bk({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}class $k{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const s=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class Rh{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Do(this.lastLoginAt),this.creationTime=Do(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Bc(t){const e=t.auth,n=await t.getIdToken(),s=await Si(t,Uc(e,{idToken:n}));be(s?.users.length,e,"internal-error");const r=s.users[0];t._notifyReloadListener(r);const i=r.providerUserInfo?.length?eE(r.providerUserInfo):[],o=jk(t.providerData,i),a=t.isAnonymous,l=!(t.email&&r.passwordHash)&&!o?.length,u=a?l:!1,h={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:o,metadata:new Rh(r.createdAt,r.lastLoginAt),isAnonymous:u};Object.assign(t,h)}async function Hk(t){const e=lt(t);await Bc(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function jk(t,e){return[...t.filter(s=>!e.some(r=>r.providerId===s.providerId)),...e]}function eE(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}async function qk(t,e){const n=await Xv(t,{},async()=>{const s=fa({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:i}=t.config,o=await Zv(t,r,"/v1/token",`key=${i}`),a=await t._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";const l={method:"POST",headers:a,body:s};return t.emulatorConfig&&Ui(t.emulatorConfig.host)&&(l.credentials="include"),Jv.fetch()(o,l)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function Gk(t,e){return Gn(t,"POST","/v2/accounts:revokeToken",ys(t,e))}class mi{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){be(e.idToken,"internal-error"),be(typeof e.idToken<"u","internal-error"),be(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):zm(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){be(e.length!==0,"internal-error");const n=zm(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(be(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:s,refreshToken:r,expiresIn:i}=await qk(e,n);this.updateTokensAndExpiration(s,r,Number(i))}updateTokensAndExpiration(e,n,s){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,n){const{refreshToken:s,accessToken:r,expirationTime:i}=n,o=new mi;return s&&(be(typeof s=="string","internal-error",{appName:e}),o.refreshToken=s),r&&(be(typeof r=="string","internal-error",{appName:e}),o.accessToken=r),i&&(be(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new mi,this.toJSON())}_performRefresh(){return es("not implemented")}}function Ss(t,e){be(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class vn{constructor({uid:e,auth:n,stsTokenManager:s,...r}){this.providerId="firebase",this.proactiveRefresh=new $k(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.providerData=r.providerData?[...r.providerData]:[],this.metadata=new Rh(r.createdAt||void 0,r.lastLoginAt||void 0)}async getIdToken(e){const n=await Si(this,this.stsTokenManager.getToken(this.auth,e));return be(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return Uk(this,e)}reload(){return Hk(this)}_assign(e){this!==e&&(be(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new vn({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){be(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),n&&await Bc(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(fn(this.auth.app))return Promise.reject(is(this.auth));const e=await this.getIdToken();return await Si(this,Fk(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const s=n.displayName??void 0,r=n.email??void 0,i=n.phoneNumber??void 0,o=n.photoURL??void 0,a=n.tenantId??void 0,l=n._redirectEventId??void 0,u=n.createdAt??void 0,h=n.lastLoginAt??void 0,{uid:f,emailVerified:p,isAnonymous:m,providerData:b,stsTokenManager:v}=n;be(f&&v,e,"internal-error");const D=mi.fromJSON(this.name,v);be(typeof f=="string",e,"internal-error"),Ss(s,e.name),Ss(r,e.name),be(typeof p=="boolean",e,"internal-error"),be(typeof m=="boolean",e,"internal-error"),Ss(i,e.name),Ss(o,e.name),Ss(a,e.name),Ss(l,e.name),Ss(u,e.name),Ss(h,e.name);const V=new vn({uid:f,auth:e,email:r,emailVerified:p,displayName:s,isAnonymous:m,photoURL:o,phoneNumber:i,tenantId:a,stsTokenManager:D,createdAt:u,lastLoginAt:h});return b&&Array.isArray(b)&&(V.providerData=b.map(N=>({...N}))),l&&(V._redirectEventId=l),V}static async _fromIdTokenResponse(e,n,s=!1){const r=new mi;r.updateFromServerResponse(n);const i=new vn({uid:n.localId,auth:e,stsTokenManager:r,isAnonymous:s});return await Bc(i),i}static async _fromGetAccountInfoResponse(e,n,s){const r=n.users[0];be(r.localId!==void 0,"internal-error");const i=r.providerUserInfo!==void 0?eE(r.providerUserInfo):[],o=!(r.email&&r.passwordHash)&&!i?.length,a=new mi;a.updateFromIdToken(s);const l=new vn({uid:r.localId,auth:e,stsTokenManager:a,isAnonymous:o}),u={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:i,metadata:new Rh(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!i?.length};return Object.assign(l,u),l}}const Km=new Map;function ts(t){ds(t instanceof Function,"Expected a class definition");let e=Km.get(t);return e?(ds(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Km.set(t,e),e)}class tE{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}tE.type="NONE";const Qm=tE;function lc(t,e,n){return`firebase:${t}:${e}:${n}`}class gi{constructor(e,n,s){this.persistence=e,this.auth=n,this.userKey=s;const{config:r,name:i}=this.auth;this.fullUserKey=lc(this.userKey,r.apiKey,i),this.fullPersistenceKey=lc("persistence",r.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Uc(this.auth,{idToken:e}).catch(()=>{});return n?vn._fromGetAccountInfoResponse(this.auth,n,e):null}return vn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,s="authUser"){if(!n.length)return new gi(ts(Qm),e,s);const r=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let i=r[0]||ts(Qm);const o=lc(s,e.config.apiKey,e.name);let a=null;for(const u of n)try{const h=await u._get(o);if(h){let f;if(typeof h=="string"){const p=await Uc(e,{idToken:h}).catch(()=>{});if(!p)break;f=await vn._fromGetAccountInfoResponse(e,p,h)}else f=vn._fromJSON(e,h);u!==i&&(a=f),i=u;break}}catch{}const l=r.filter(u=>u._shouldAllowMigration);return!i._shouldAllowMigration||!l.length?new gi(i,e,s):(i=l[0],a&&await i._set(o,a.toJSON()),await Promise.all(n.map(async u=>{if(u!==i)try{await u._remove(o)}catch{}})),new gi(i,e,s))}}function Ym(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(iE(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(nE(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(aE(e))return"Blackberry";if(cE(e))return"Webos";if(sE(e))return"Safari";if((e.includes("chrome/")||rE(e))&&!e.includes("edge/"))return"Chrome";if(oE(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=t.match(n);if(s?.length===2)return s[1]}return"Other"}function nE(t=$t()){return/firefox\//i.test(t)}function sE(t=$t()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function rE(t=$t()){return/crios\//i.test(t)}function iE(t=$t()){return/iemobile/i.test(t)}function oE(t=$t()){return/android/i.test(t)}function aE(t=$t()){return/blackberry/i.test(t)}function cE(t=$t()){return/webos/i.test(t)}function Lf(t=$t()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function Wk(t=$t()){return Lf(t)&&!!window.navigator?.standalone}function zk(){return aP()&&document.documentMode===10}function lE(t=$t()){return Lf(t)||oE(t)||cE(t)||aE(t)||/windows phone/i.test(t)||iE(t)}function uE(t,e=[]){let n;switch(t){case"Browser":n=Ym($t());break;case"Worker":n=`${Ym($t())}-${t}`;break;default:n=t}const s=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Bi}/${s}`}class Kk{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const s=i=>new Promise((o,a)=>{try{const l=e(i);o(l)}catch(l){a(l)}});s.onAbort=n,this.queue.push(s);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const s of this.queue)await s(e),s.onAbort&&n.push(s.onAbort)}catch(s){n.reverse();for(const r of n)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s?.message})}}}async function Qk(t,e={}){return Gn(t,"GET","/v2/passwordPolicy",ys(t,e))}const Yk=6;class Jk{constructor(e){const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??Yk,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const s=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;s&&(n.meetsMinPasswordLength=e.length>=s),r&&(n.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let s;for(let r=0;r<e.length;r++)s=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(n,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,n,s,r,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}class Xk{constructor(e,n,s,r){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=s,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Jm(this),this.idTokenSubscription=new Jm(this),this.beforeStateQueue=new Kk(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Qv,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=ts(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await gi.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Uc(this,{idToken:e}),s=await vn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(s)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(fn(this.app)){const i=this.app.settings.authIdToken;return i?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(i).then(o,o))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let s=n,r=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const i=this.redirectUser?._redirectEventId,o=s?._redirectEventId,a=await this.tryRedirectSignIn(e);(!i||i===o)&&a?.user&&(s=a.user,r=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(s)}catch(i){s=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(i))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return be(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Bc(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=kk()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(fn(this.app))return Promise.reject(is(this));const n=e?lt(e):null;return n&&be(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&be(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return fn(this.app)?Promise.reject(is(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return fn(this.app)?Promise.reject(is(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ts(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await Qk(this),n=new Jk(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new ha("auth","Firebase",e())}onAuthStateChanged(e,n,s){return this.registerStateListener(this.authStateSubscription,e,n,s)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,s){return this.registerStateListener(this.idTokenSubscription,e,n,s)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(s.tenantId=this.tenantId),await Gk(this,s)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,n){const s=await this.getOrInitRedirectPersistenceManager(n);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&ts(e)||this._popupRedirectResolver;be(n,this,"argument-error"),this.redirectPersistenceManager=await gi.create(this,[ts(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,s,r){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(be(a,this,"internal-error"),a.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,s,r);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return be(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=uE(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(e["X-Firebase-Client"]=n);const s=await this._getAppCheckToken();return s&&(e["X-Firebase-AppCheck"]=s),e}async _getAppCheckToken(){if(fn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&Sk(`Error while retrieving App Check token: ${e.error}`),e?.token}}function jr(t){return lt(t)}class Jm{constructor(e){this.auth=e,this.observer=null,this.addObserver=mP(n=>this.observer=n)}get next(){return be(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let El={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Zk(t){El=t}function hE(t){return El.loadJS(t)}function e1(){return El.recaptchaEnterpriseScript}function t1(){return El.gapiScript}function n1(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class s1{constructor(){this.enterprise=new r1}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class r1{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const i1="recaptcha-enterprise",fE="NO_RECAPTCHA";class o1{constructor(e){this.type=i1,this.auth=jr(e)}async verify(e="verify",n=!1){async function s(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(o,a)=>{xk(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const u=new Mk(l);return i.tenantId==null?i._agentRecaptchaConfig=u:i._tenantRecaptchaConfigs[i.tenantId]=u,o(u.siteKey)}}).catch(l=>{a(l)})})}function r(i,o,a){const l=window.grecaptcha;Wm(l)?l.enterprise.ready(()=>{l.enterprise.execute(i,{action:e}).then(u=>{o(u)}).catch(()=>{o(fE)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new s1().execute("siteKey",{action:"verify"}):new Promise((i,o)=>{s(this.auth).then(a=>{if(!n&&Wm(window.grecaptcha))r(a,i,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=e1();l.length!==0&&(l+=a),hE(l).then(()=>{r(a,i,o)}).catch(u=>{o(u)})}}).catch(a=>{o(a)})})}}async function Xm(t,e,n,s=!1,r=!1){const i=new o1(t);let o;if(r)o=fE;else try{o=await i.verify(n)}catch{o=await i.verify(n,!0)}const a={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in a){const l=a.phoneEnrollmentInfo.phoneNumber,u=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:l,recaptchaToken:u,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){const l=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:l,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return s?Object.assign(a,{captchaResp:o}):Object.assign(a,{captchaResponse:o}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function Sh(t,e,n,s,r){if(t._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await Xm(t,e,n,n==="getOobCode");return s(t,i)}else return s(t,e).catch(async i=>{if(i.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await Xm(t,e,n,n==="getOobCode");return s(t,o)}else return Promise.reject(i)})}function a1(t,e){const n=Nf(t,"auth");if(n.isInitialized()){const r=n.getImmediate(),i=n.getOptions();if(Vr(i,e??{}))return r;Sn(r,"already-initialized")}return n.initialize({options:e})}function c1(t,e){const n=e?.persistence||[],s=(Array.isArray(n)?n:[n]).map(ts);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(s,e?.popupRedirectResolver)}function l1(t,e,n){const s=jr(t);be(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const r=!1,i=dE(e),{host:o,port:a}=u1(e),l=a===null?"":`:${a}`,u={url:`${i}//${o}${l}/`},h=Object.freeze({host:o,port:a,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:r})});if(!s._canInitEmulator){be(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),be(Vr(u,s.config.emulator)&&Vr(h,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=u,s.emulatorConfig=h,s.settings.appVerificationDisabledForTesting=!0,Ui(o)?(Bv(`${i}//${o}${l}`),$v("Auth",!0)):h1()}function dE(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function u1(t){const e=dE(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const s=n[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(s);if(r){const i=r[1];return{host:i,port:Zm(s.substr(i.length+1))}}else{const[i,o]=s.split(":");return{host:i,port:Zm(o)}}}function Zm(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function h1(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}class Mf{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return es("not implemented")}_getIdTokenResponse(e){return es("not implemented")}_linkToIdToken(e,n){return es("not implemented")}_getReauthenticationResolver(e){return es("not implemented")}}async function f1(t,e){return Gn(t,"POST","/v1/accounts:signUp",e)}async function d1(t,e){return pa(t,"POST","/v1/accounts:signInWithPassword",ys(t,e))}async function p1(t,e){return Gn(t,"POST","/v1/accounts:sendOobCode",ys(t,e))}async function m1(t,e){return p1(t,e)}async function g1(t,e){return pa(t,"POST","/v1/accounts:signInWithEmailLink",ys(t,e))}async function _1(t,e){return pa(t,"POST","/v1/accounts:signInWithEmailLink",ys(t,e))}class Qo extends Mf{constructor(e,n,s,r=null){super("password",s),this._email=e,this._password=n,this._tenantId=r}static _fromEmailAndPassword(e,n){return new Qo(e,n,"password")}static _fromEmailAndCode(e,n,s=null){return new Qo(e,n,"emailLink",s)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Sh(e,n,"signInWithPassword",d1);case"emailLink":return g1(e,{email:this._email,oobCode:this._password});default:Sn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const s={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Sh(e,s,"signUpPassword",f1);case"emailLink":return _1(e,{idToken:n,email:this._email,oobCode:this._password});default:Sn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function _i(t,e){return pa(t,"POST","/v1/accounts:signInWithIdp",ys(t,e))}const y1="http://localhost";class Mr extends Mf{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Mr(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Sn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:r,...i}=n;if(!s||!r)return null;const o=new Mr(s,r);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return _i(e,n)}_linkToIdToken(e,n){const s=this.buildRequest();return s.idToken=n,_i(e,s)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,_i(e,n)}buildRequest(){const e={requestUri:y1,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=fa(n)}return e}}function v1(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function E1(t){const e=yo(vo(t)).link,n=e?yo(vo(e)).deep_link_id:null,s=yo(vo(t)).deep_link_id;return(s?yo(vo(s)).link:null)||s||n||e||t}class xf{constructor(e){const n=yo(vo(e)),s=n.apiKey??null,r=n.oobCode??null,i=v1(n.mode??null);be(s&&r&&i,"argument-error"),this.apiKey=s,this.operation=i,this.code=r,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=E1(e);try{return new xf(n)}catch{return null}}}class $i{constructor(){this.providerId=$i.PROVIDER_ID}static credential(e,n){return Qo._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const s=xf.parseLink(n);return be(s,"argument-error"),Qo._fromEmailAndCode(e,s.code,s.tenantId)}}$i.PROVIDER_ID="password";$i.EMAIL_PASSWORD_SIGN_IN_METHOD="password";$i.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class pE{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class ma extends pE{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Ms extends ma{constructor(){super("facebook.com")}static credential(e){return Mr._fromParams({providerId:Ms.PROVIDER_ID,signInMethod:Ms.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ms.credentialFromTaggedObject(e)}static credentialFromError(e){return Ms.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ms.credential(e.oauthAccessToken)}catch{return null}}}Ms.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ms.PROVIDER_ID="facebook.com";class xs extends ma{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Mr._fromParams({providerId:xs.PROVIDER_ID,signInMethod:xs.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return xs.credentialFromTaggedObject(e)}static credentialFromError(e){return xs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:s}=e;if(!n&&!s)return null;try{return xs.credential(n,s)}catch{return null}}}xs.GOOGLE_SIGN_IN_METHOD="google.com";xs.PROVIDER_ID="google.com";class Fs extends ma{constructor(){super("github.com")}static credential(e){return Mr._fromParams({providerId:Fs.PROVIDER_ID,signInMethod:Fs.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Fs.credentialFromTaggedObject(e)}static credentialFromError(e){return Fs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Fs.credential(e.oauthAccessToken)}catch{return null}}}Fs.GITHUB_SIGN_IN_METHOD="github.com";Fs.PROVIDER_ID="github.com";class Us extends ma{constructor(){super("twitter.com")}static credential(e,n){return Mr._fromParams({providerId:Us.PROVIDER_ID,signInMethod:Us.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Us.credentialFromTaggedObject(e)}static credentialFromError(e){return Us.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:s}=e;if(!n||!s)return null;try{return Us.credential(n,s)}catch{return null}}}Us.TWITTER_SIGN_IN_METHOD="twitter.com";Us.PROVIDER_ID="twitter.com";async function T1(t,e){return pa(t,"POST","/v1/accounts:signUp",ys(t,e))}class xr{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,s,r=!1){const i=await vn._fromIdTokenResponse(e,s,r),o=eg(s);return new xr({user:i,providerId:o,_tokenResponse:s,operationType:n})}static async _forOperation(e,n,s){await e._updateTokensIfNecessary(s,!0);const r=eg(s);return new xr({user:e,providerId:r,_tokenResponse:s,operationType:n})}}function eg(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}class $c extends _s{constructor(e,n,s,r){super(n.code,n.message),this.operationType=s,this.user=r,Object.setPrototypeOf(this,$c.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,n,s,r){return new $c(e,n,s,r)}}function mE(t,e,n,s){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?$c._fromErrorAndOperation(t,i,e,s):i})}async function w1(t,e,n=!1){const s=await Si(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return xr._forOperation(t,"link",s)}async function b1(t,e,n=!1){const{auth:s}=t;if(fn(s.app))return Promise.reject(is(s));const r="reauthenticate";try{const i=await Si(t,mE(s,r,e,t),n);be(i.idToken,s,"internal-error");const o=Vf(i.idToken);be(o,s,"internal-error");const{sub:a}=o;return be(t.uid===a,s,"user-mismatch"),xr._forOperation(t,r,i)}catch(i){throw i?.code==="auth/user-not-found"&&Sn(s,"user-mismatch"),i}}async function gE(t,e,n=!1){if(fn(t.app))return Promise.reject(is(t));const s="signIn",r=await mE(t,s,e),i=await xr._fromIdTokenResponse(t,s,r);return n||await t._updateCurrentUser(i.user),i}async function I1(t,e){return gE(jr(t),e)}async function _E(t){const e=jr(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function A1(t,e,n){if(fn(t.app))return Promise.reject(is(t));const s=jr(t),o=await Sh(s,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",T1).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&_E(t),l}),a=await xr._fromIdTokenResponse(s,"signIn",o);return await s._updateCurrentUser(a.user),a}function R1(t,e,n){return fn(t.app)?Promise.reject(is(t)):I1(lt(t),$i.credential(e,n)).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&_E(t),s})}async function tg(t,e){const n=lt(t),r={requestType:"VERIFY_EMAIL",idToken:await t.getIdToken()},{email:i}=await m1(n.auth,r);i!==t.email&&await t.reload()}async function S1(t,e){return Gn(t,"POST","/v1/accounts:update",e)}async function C1(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const s=lt(t),i={idToken:await s.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},o=await Si(s,S1(s.auth,i));s.displayName=o.displayName||null,s.photoURL=o.photoUrl||null;const a=s.providerData.find(({providerId:l})=>l==="password");a&&(a.displayName=s.displayName,a.photoURL=s.photoURL),await s._updateTokensIfNecessary(o)}function P1(t,e,n,s){return lt(t).onIdTokenChanged(e,n,s)}function k1(t,e,n){return lt(t).beforeAuthStateChanged(e,n)}function N1(t,e,n,s){return lt(t).onAuthStateChanged(e,n,s)}function D1(t){return lt(t).signOut()}const Hc="__sak";class yE{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Hc,"1"),this.storage.removeItem(Hc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const O1=1e3,V1=10;class vE extends yE{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=lE(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const s=this.storage.getItem(n),r=this.localCache[n];s!==r&&e(n,r,s)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const s=e.key;n?this.detachListener():this.stopPolling();const r=()=>{const o=this.storage.getItem(s);!n&&this.localCache[s]===o||this.notifyListeners(s,o)},i=this.storage.getItem(s);zk()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,V1):r()}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const r of Array.from(s))r(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:s}),!0)})},O1)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}vE.type="LOCAL";const L1=vE;class EE extends yE{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}EE.type="SESSION";const TE=EE;function M1(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}class Tl{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(r=>r.isListeningto(e));if(n)return n;const s=new Tl(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:s,eventType:r,data:i}=n.data,o=this.handlersMap[r];if(!o?.size)return;n.ports[0].postMessage({status:"ack",eventId:s,eventType:r});const a=Array.from(o).map(async u=>u(n.origin,i)),l=await M1(a);n.ports[0].postMessage({status:"done",eventId:s,eventType:r,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Tl.receivers=[];function Ff(t="",e=10){let n="";for(let s=0;s<e;s++)n+=Math.floor(Math.random()*10);return t+n}class x1{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,s=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,o;return new Promise((a,l)=>{const u=Ff("",20);r.port1.start();const h=setTimeout(()=>{l(new Error("unsupported_event"))},s);o={messageChannel:r,onMessage(f){const p=f;if(p.data.eventId===u)switch(p.data.status){case"ack":clearTimeout(h),i=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),a(p.data.response);break;default:clearTimeout(h),clearTimeout(i),l(new Error("invalid_response"));break}}},this.handlers.add(o),r.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:n},[r.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}function Un(){return window}function F1(t){Un().location.href=t}function wE(){return typeof Un().WorkerGlobalScope<"u"&&typeof Un().importScripts=="function"}async function U1(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function B1(){return navigator?.serviceWorker?.controller||null}function $1(){return wE()?self:null}const bE="firebaseLocalStorageDb",H1=1,jc="firebaseLocalStorage",IE="fbase_key";class ga{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function wl(t,e){return t.transaction([jc],e?"readwrite":"readonly").objectStore(jc)}function j1(){const t=indexedDB.deleteDatabase(bE);return new ga(t).toPromise()}function Ch(){const t=indexedDB.open(bE,H1);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const s=t.result;try{s.createObjectStore(jc,{keyPath:IE})}catch(r){n(r)}}),t.addEventListener("success",async()=>{const s=t.result;s.objectStoreNames.contains(jc)?e(s):(s.close(),await j1(),e(await Ch()))})})}async function ng(t,e,n){const s=wl(t,!0).put({[IE]:e,value:n});return new ga(s).toPromise()}async function q1(t,e){const n=wl(t,!1).get(e),s=await new ga(n).toPromise();return s===void 0?null:s.value}function sg(t,e){const n=wl(t,!0).delete(e);return new ga(n).toPromise()}const G1=800,W1=3;class AE{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Ch(),this.db)}async _withRetries(e){let n=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(n++>W1)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return wE()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Tl._getInstance($1()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await U1(),!this.activeServiceWorker)return;this.sender=new x1(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||B1()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Ch();return await ng(e,Hc,"1"),await sg(e,Hc),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(s=>ng(s,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(s=>q1(s,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>sg(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(r=>{const i=wl(r,!1).getAll();return new ga(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],s=new Set;if(e.length!==0)for(const{fbase_key:r,value:i}of e)s.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),n.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!s.has(r)&&(this.notifyListeners(r,null),n.push(r));return n}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const r of Array.from(s))r(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),G1)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}AE.type="LOCAL";const z1=AE;new da(3e4,6e4);function K1(t,e){return e?ts(e):(be(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}class Uf extends Mf{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return _i(e,this._buildIdpRequest())}_linkToIdToken(e,n){return _i(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return _i(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function Q1(t){return gE(t.auth,new Uf(t),t.bypassAuthState)}function Y1(t){const{auth:e,user:n}=t;return be(n,e,"internal-error"),b1(n,new Uf(t),t.bypassAuthState)}async function J1(t){const{auth:e,user:n}=t;return be(n,e,"internal-error"),w1(n,new Uf(t),t.bypassAuthState)}class RE{constructor(e,n,s,r,i=!1){this.auth=e,this.resolver=s,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:s,postBody:r,tenantId:i,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:s,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Q1;case"linkViaPopup":case"linkViaRedirect":return J1;case"reauthViaPopup":case"reauthViaRedirect":return Y1;default:Sn(this.auth,"internal-error")}}resolve(e){ds(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ds(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const X1=new da(2e3,1e4);class ii extends RE{constructor(e,n,s,r,i){super(e,n,r,i),this.provider=s,this.authWindow=null,this.pollId=null,ii.currentPopupAction&&ii.currentPopupAction.cancel(),ii.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return be(e,this.auth,"internal-error"),e}async onExecution(){ds(this.filter.length===1,"Popup operations only handle one event");const e=Ff();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Fn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Fn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ii.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Fn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,X1.get())};e()}}ii.currentPopupAction=null;const Z1="pendingRedirect",uc=new Map;class eN extends RE{constructor(e,n,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,s),this.eventId=null}async execute(){let e=uc.get(this.auth._key());if(!e){try{const s=await tN(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(n){e=()=>Promise.reject(n)}uc.set(this.auth._key(),e)}return this.bypassAuthState||uc.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function tN(t,e){const n=rN(e),s=sN(t);if(!await s._isAvailable())return!1;const r=await s._get(n)==="true";return await s._remove(n),r}function nN(t,e){uc.set(t._key(),e)}function sN(t){return ts(t._redirectPersistence)}function rN(t){return lc(Z1,t.config.apiKey,t.name)}async function iN(t,e,n=!1){if(fn(t.app))return Promise.reject(is(t));const s=jr(t),r=K1(s,e),o=await new eN(s,r,n).execute();return o&&!n&&(delete o.user._redirectEventId,await s._persistUserIfCurrent(o.user),await s._setRedirectUser(null,e)),o}const oN=600*1e3;class aN{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(n=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!cN(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){if(e.error&&!SE(e)){const s=e.error.code?.split("auth/")[1]||"internal-error";n.onError(Fn(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const s=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=oN&&this.cachedEventUids.clear(),this.cachedEventUids.has(rg(e))}saveEventToCache(e){this.cachedEventUids.add(rg(e)),this.lastProcessedEventTime=Date.now()}}function rg(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function SE({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function cN(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return SE(t);default:return!1}}async function lN(t,e={}){return Gn(t,"GET","/v1/projects",e)}const uN=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,hN=/^https?/;async function fN(t){if(t.config.emulator)return;const{authorizedDomains:e}=await lN(t);for(const n of e)try{if(dN(n))return}catch{}Sn(t,"unauthorized-domain")}function dN(t){const e=Ah(),{protocol:n,hostname:s}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&s===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===s}if(!hN.test(n))return!1;if(uN.test(t))return s===t;const r=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(s)}const pN=new da(3e4,6e4);function ig(){const t=Un().___jsl;if(t?.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function mN(t){return new Promise((e,n)=>{function s(){ig(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{ig(),n(Fn(t,"network-request-failed"))},timeout:pN.get()})}if(Un().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(Un().gapi?.load)s();else{const r=n1("iframefcb");return Un()[r]=()=>{gapi.load?s():n(Fn(t,"network-request-failed"))},hE(`${t1()}?onload=${r}`).catch(i=>n(i))}}).catch(e=>{throw hc=null,e})}let hc=null;function gN(t){return hc=hc||mN(t),hc}const _N=new da(5e3,15e3),yN="__/auth/iframe",vN="emulator/auth/iframe",EN={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},TN=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function wN(t){const e=t.config;be(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Of(e,vN):`https://${t.config.authDomain}/${yN}`,s={apiKey:e.apiKey,appName:t.name,v:Bi},r=TN.get(t.config.apiHost);r&&(s.eid=r);const i=t._getFrameworks();return i.length&&(s.fw=i.join(",")),`${n}?${fa(s).slice(1)}`}async function bN(t){const e=await gN(t),n=Un().gapi;return be(n,t,"internal-error"),e.open({where:document.body,url:wN(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:EN,dontclear:!0},s=>new Promise(async(r,i)=>{await s.restyle({setHideOnLeave:!1});const o=Fn(t,"network-request-failed"),a=Un().setTimeout(()=>{i(o)},_N.get());function l(){Un().clearTimeout(a),r(s)}s.ping(l).then(l,()=>{i(o)})}))}const IN={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},AN=500,RN=600,SN="_blank",CN="http://localhost";class og{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function PN(t,e,n,s=AN,r=RN){const i=Math.max((window.screen.availHeight-r)/2,0).toString(),o=Math.max((window.screen.availWidth-s)/2,0).toString();let a="";const l={...IN,width:s.toString(),height:r.toString(),top:i,left:o},u=$t().toLowerCase();n&&(a=rE(u)?SN:n),nE(u)&&(e=e||CN,l.scrollbars="yes");const h=Object.entries(l).reduce((p,[m,b])=>`${p}${m}=${b},`,"");if(Wk(u)&&a!=="_self")return kN(e||"",a),new og(null);const f=window.open(e||"",a,h);be(f,t,"popup-blocked");try{f.focus()}catch{}return new og(f)}function kN(t,e){const n=document.createElement("a");n.href=t,n.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(s)}const NN="__/auth/handler",DN="emulator/auth/handler",ON=encodeURIComponent("fac");async function ag(t,e,n,s,r,i){be(t.config.authDomain,t,"auth-domain-config-required"),be(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:s,v:Bi,eventId:r};if(e instanceof pE){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",pP(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,f]of Object.entries({}))o[h]=f}if(e instanceof ma){const h=e.getScopes().filter(f=>f!=="");h.length>0&&(o.scopes=h.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const h of Object.keys(a))a[h]===void 0&&delete a[h];const l=await t._getAppCheckToken(),u=l?`#${ON}=${encodeURIComponent(l)}`:"";return`${VN(t)}?${fa(a).slice(1)}${u}`}function VN({config:t}){return t.emulator?Of(t,DN):`https://${t.authDomain}/${NN}`}const Ou="webStorageSupport";class LN{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=TE,this._completeRedirectFn=iN,this._overrideRedirectResult=nN}async _openPopup(e,n,s,r){ds(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const i=await ag(e,n,s,Ah(),r);return PN(e,i,Ff())}async _openRedirect(e,n,s,r){await this._originValidation(e);const i=await ag(e,n,s,Ah(),r);return F1(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:r,promise:i}=this.eventManagers[n];return r?Promise.resolve(r):(ds(i,"If manager is not set, promise should be"),i)}const s=this.initAndGetManager(e);return this.eventManagers[n]={promise:s},s.catch(()=>{delete this.eventManagers[n]}),s}async initAndGetManager(e){const n=await bN(e),s=new aN(e);return n.register("authEvent",r=>(be(r?.authEvent,e,"invalid-auth-event"),{status:s.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=n,s}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Ou,{type:Ou},r=>{const i=r?.[0]?.[Ou];i!==void 0&&n(!!i),Sn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=fN(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return lE()||sE()||Lf()}}const MN=LN;var cg="@firebase/auth",lg="1.12.0";class xN{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(s=>{e(s?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){be(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function FN(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function UN(t){Ri(new Lr("auth",(e,{options:n})=>{const s=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=s.options;be(o&&!o.includes(":"),"invalid-api-key",{appName:s.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:uE(t)},u=new Xk(s,r,i,l);return c1(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,s)=>{e.getProvider("auth-internal").initialize()})),Ri(new Lr("auth-internal",e=>{const n=jr(e.getProvider("auth").getImmediate());return(s=>new xN(s))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),zs(cg,lg,FN(t)),zs(cg,lg,"esm2020")}const BN=300,$N=Uv("authIdTokenMaxAge")||BN;let ug=null;const HN=t=>async e=>{const n=e&&await e.getIdTokenResult(),s=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(s&&s>$N)return;const r=n?.token;ug!==r&&(ug=r,await fetch(t,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))};function jN(t=Gv()){const e=Nf(t,"auth");if(e.isInitialized())return e.getImmediate();const n=a1(t,{popupRedirectResolver:MN,persistence:[z1,L1,TE]}),s=Uv("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(s,location.origin);if(location.origin===i.origin){const o=HN(i.toString());k1(n,o,()=>o(n.currentUser)),P1(n,a=>o(a))}}const r=xv("auth");return r&&l1(n,`http://${r}`),n}function qN(){return document.getElementsByTagName("head")?.[0]??document}Zk({loadJS(t){return new Promise((e,n)=>{const s=document.createElement("script");s.setAttribute("src",t),s.onload=e,s.onerror=r=>{const i=Fn("internal-error");i.customData=r,n(i)},s.type="text/javascript",s.charset="UTF-8",qN().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});UN("Browser");var hg=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var Ks,CE;(function(){var t;function e(T,y){function E(){}E.prototype=y.prototype,T.F=y.prototype,T.prototype=new E,T.prototype.constructor=T,T.D=function(R,P,C){for(var A=Array(arguments.length-2),pe=2;pe<arguments.length;pe++)A[pe-2]=arguments[pe];return y.prototype[P].apply(R,A)}}function n(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(s,n),s.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(T,y,E){E||(E=0);const R=Array(16);if(typeof y=="string")for(var P=0;P<16;++P)R[P]=y.charCodeAt(E++)|y.charCodeAt(E++)<<8|y.charCodeAt(E++)<<16|y.charCodeAt(E++)<<24;else for(P=0;P<16;++P)R[P]=y[E++]|y[E++]<<8|y[E++]<<16|y[E++]<<24;y=T.g[0],E=T.g[1],P=T.g[2];let C=T.g[3],A;A=y+(C^E&(P^C))+R[0]+3614090360&4294967295,y=E+(A<<7&4294967295|A>>>25),A=C+(P^y&(E^P))+R[1]+3905402710&4294967295,C=y+(A<<12&4294967295|A>>>20),A=P+(E^C&(y^E))+R[2]+606105819&4294967295,P=C+(A<<17&4294967295|A>>>15),A=E+(y^P&(C^y))+R[3]+3250441966&4294967295,E=P+(A<<22&4294967295|A>>>10),A=y+(C^E&(P^C))+R[4]+4118548399&4294967295,y=E+(A<<7&4294967295|A>>>25),A=C+(P^y&(E^P))+R[5]+1200080426&4294967295,C=y+(A<<12&4294967295|A>>>20),A=P+(E^C&(y^E))+R[6]+2821735955&4294967295,P=C+(A<<17&4294967295|A>>>15),A=E+(y^P&(C^y))+R[7]+4249261313&4294967295,E=P+(A<<22&4294967295|A>>>10),A=y+(C^E&(P^C))+R[8]+1770035416&4294967295,y=E+(A<<7&4294967295|A>>>25),A=C+(P^y&(E^P))+R[9]+2336552879&4294967295,C=y+(A<<12&4294967295|A>>>20),A=P+(E^C&(y^E))+R[10]+4294925233&4294967295,P=C+(A<<17&4294967295|A>>>15),A=E+(y^P&(C^y))+R[11]+2304563134&4294967295,E=P+(A<<22&4294967295|A>>>10),A=y+(C^E&(P^C))+R[12]+1804603682&4294967295,y=E+(A<<7&4294967295|A>>>25),A=C+(P^y&(E^P))+R[13]+4254626195&4294967295,C=y+(A<<12&4294967295|A>>>20),A=P+(E^C&(y^E))+R[14]+2792965006&4294967295,P=C+(A<<17&4294967295|A>>>15),A=E+(y^P&(C^y))+R[15]+1236535329&4294967295,E=P+(A<<22&4294967295|A>>>10),A=y+(P^C&(E^P))+R[1]+4129170786&4294967295,y=E+(A<<5&4294967295|A>>>27),A=C+(E^P&(y^E))+R[6]+3225465664&4294967295,C=y+(A<<9&4294967295|A>>>23),A=P+(y^E&(C^y))+R[11]+643717713&4294967295,P=C+(A<<14&4294967295|A>>>18),A=E+(C^y&(P^C))+R[0]+3921069994&4294967295,E=P+(A<<20&4294967295|A>>>12),A=y+(P^C&(E^P))+R[5]+3593408605&4294967295,y=E+(A<<5&4294967295|A>>>27),A=C+(E^P&(y^E))+R[10]+38016083&4294967295,C=y+(A<<9&4294967295|A>>>23),A=P+(y^E&(C^y))+R[15]+3634488961&4294967295,P=C+(A<<14&4294967295|A>>>18),A=E+(C^y&(P^C))+R[4]+3889429448&4294967295,E=P+(A<<20&4294967295|A>>>12),A=y+(P^C&(E^P))+R[9]+568446438&4294967295,y=E+(A<<5&4294967295|A>>>27),A=C+(E^P&(y^E))+R[14]+3275163606&4294967295,C=y+(A<<9&4294967295|A>>>23),A=P+(y^E&(C^y))+R[3]+4107603335&4294967295,P=C+(A<<14&4294967295|A>>>18),A=E+(C^y&(P^C))+R[8]+1163531501&4294967295,E=P+(A<<20&4294967295|A>>>12),A=y+(P^C&(E^P))+R[13]+2850285829&4294967295,y=E+(A<<5&4294967295|A>>>27),A=C+(E^P&(y^E))+R[2]+4243563512&4294967295,C=y+(A<<9&4294967295|A>>>23),A=P+(y^E&(C^y))+R[7]+1735328473&4294967295,P=C+(A<<14&4294967295|A>>>18),A=E+(C^y&(P^C))+R[12]+2368359562&4294967295,E=P+(A<<20&4294967295|A>>>12),A=y+(E^P^C)+R[5]+4294588738&4294967295,y=E+(A<<4&4294967295|A>>>28),A=C+(y^E^P)+R[8]+2272392833&4294967295,C=y+(A<<11&4294967295|A>>>21),A=P+(C^y^E)+R[11]+1839030562&4294967295,P=C+(A<<16&4294967295|A>>>16),A=E+(P^C^y)+R[14]+4259657740&4294967295,E=P+(A<<23&4294967295|A>>>9),A=y+(E^P^C)+R[1]+2763975236&4294967295,y=E+(A<<4&4294967295|A>>>28),A=C+(y^E^P)+R[4]+1272893353&4294967295,C=y+(A<<11&4294967295|A>>>21),A=P+(C^y^E)+R[7]+4139469664&4294967295,P=C+(A<<16&4294967295|A>>>16),A=E+(P^C^y)+R[10]+3200236656&4294967295,E=P+(A<<23&4294967295|A>>>9),A=y+(E^P^C)+R[13]+681279174&4294967295,y=E+(A<<4&4294967295|A>>>28),A=C+(y^E^P)+R[0]+3936430074&4294967295,C=y+(A<<11&4294967295|A>>>21),A=P+(C^y^E)+R[3]+3572445317&4294967295,P=C+(A<<16&4294967295|A>>>16),A=E+(P^C^y)+R[6]+76029189&4294967295,E=P+(A<<23&4294967295|A>>>9),A=y+(E^P^C)+R[9]+3654602809&4294967295,y=E+(A<<4&4294967295|A>>>28),A=C+(y^E^P)+R[12]+3873151461&4294967295,C=y+(A<<11&4294967295|A>>>21),A=P+(C^y^E)+R[15]+530742520&4294967295,P=C+(A<<16&4294967295|A>>>16),A=E+(P^C^y)+R[2]+3299628645&4294967295,E=P+(A<<23&4294967295|A>>>9),A=y+(P^(E|~C))+R[0]+4096336452&4294967295,y=E+(A<<6&4294967295|A>>>26),A=C+(E^(y|~P))+R[7]+1126891415&4294967295,C=y+(A<<10&4294967295|A>>>22),A=P+(y^(C|~E))+R[14]+2878612391&4294967295,P=C+(A<<15&4294967295|A>>>17),A=E+(C^(P|~y))+R[5]+4237533241&4294967295,E=P+(A<<21&4294967295|A>>>11),A=y+(P^(E|~C))+R[12]+1700485571&4294967295,y=E+(A<<6&4294967295|A>>>26),A=C+(E^(y|~P))+R[3]+2399980690&4294967295,C=y+(A<<10&4294967295|A>>>22),A=P+(y^(C|~E))+R[10]+4293915773&4294967295,P=C+(A<<15&4294967295|A>>>17),A=E+(C^(P|~y))+R[1]+2240044497&4294967295,E=P+(A<<21&4294967295|A>>>11),A=y+(P^(E|~C))+R[8]+1873313359&4294967295,y=E+(A<<6&4294967295|A>>>26),A=C+(E^(y|~P))+R[15]+4264355552&4294967295,C=y+(A<<10&4294967295|A>>>22),A=P+(y^(C|~E))+R[6]+2734768916&4294967295,P=C+(A<<15&4294967295|A>>>17),A=E+(C^(P|~y))+R[13]+1309151649&4294967295,E=P+(A<<21&4294967295|A>>>11),A=y+(P^(E|~C))+R[4]+4149444226&4294967295,y=E+(A<<6&4294967295|A>>>26),A=C+(E^(y|~P))+R[11]+3174756917&4294967295,C=y+(A<<10&4294967295|A>>>22),A=P+(y^(C|~E))+R[2]+718787259&4294967295,P=C+(A<<15&4294967295|A>>>17),A=E+(C^(P|~y))+R[9]+3951481745&4294967295,T.g[0]=T.g[0]+y&4294967295,T.g[1]=T.g[1]+(P+(A<<21&4294967295|A>>>11))&4294967295,T.g[2]=T.g[2]+P&4294967295,T.g[3]=T.g[3]+C&4294967295}s.prototype.v=function(T,y){y===void 0&&(y=T.length);const E=y-this.blockSize,R=this.C;let P=this.h,C=0;for(;C<y;){if(P==0)for(;C<=E;)r(this,T,C),C+=this.blockSize;if(typeof T=="string"){for(;C<y;)if(R[P++]=T.charCodeAt(C++),P==this.blockSize){r(this,R),P=0;break}}else for(;C<y;)if(R[P++]=T[C++],P==this.blockSize){r(this,R),P=0;break}}this.h=P,this.o+=y},s.prototype.A=function(){var T=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);T[0]=128;for(var y=1;y<T.length-8;++y)T[y]=0;y=this.o*8;for(var E=T.length-8;E<T.length;++E)T[E]=y&255,y/=256;for(this.v(T),T=Array(16),y=0,E=0;E<4;++E)for(let R=0;R<32;R+=8)T[y++]=this.g[E]>>>R&255;return T};function i(T,y){var E=a;return Object.prototype.hasOwnProperty.call(E,T)?E[T]:E[T]=y(T)}function o(T,y){this.h=y;const E=[];let R=!0;for(let P=T.length-1;P>=0;P--){const C=T[P]|0;R&&C==y||(E[P]=C,R=!1)}this.g=E}var a={};function l(T){return-128<=T&&T<128?i(T,function(y){return new o([y|0],y<0?-1:0)}):new o([T|0],T<0?-1:0)}function u(T){if(isNaN(T)||!isFinite(T))return f;if(T<0)return D(u(-T));const y=[];let E=1;for(let R=0;T>=E;R++)y[R]=T/E|0,E*=4294967296;return new o(y,0)}function h(T,y){if(T.length==0)throw Error("number format error: empty string");if(y=y||10,y<2||36<y)throw Error("radix out of range: "+y);if(T.charAt(0)=="-")return D(h(T.substring(1),y));if(T.indexOf("-")>=0)throw Error('number format error: interior "-" character');const E=u(Math.pow(y,8));let R=f;for(let C=0;C<T.length;C+=8){var P=Math.min(8,T.length-C);const A=parseInt(T.substring(C,C+P),y);P<8?(P=u(Math.pow(y,P)),R=R.j(P).add(u(A))):(R=R.j(E),R=R.add(u(A)))}return R}var f=l(0),p=l(1),m=l(16777216);t=o.prototype,t.m=function(){if(v(this))return-D(this).m();let T=0,y=1;for(let E=0;E<this.g.length;E++){const R=this.i(E);T+=(R>=0?R:4294967296+R)*y,y*=4294967296}return T},t.toString=function(T){if(T=T||10,T<2||36<T)throw Error("radix out of range: "+T);if(b(this))return"0";if(v(this))return"-"+D(this).toString(T);const y=u(Math.pow(T,6));var E=this;let R="";for(;;){const P=S(E,y).g;E=V(E,P.j(y));let C=((E.g.length>0?E.g[0]:E.h)>>>0).toString(T);if(E=P,b(E))return C+R;for(;C.length<6;)C="0"+C;R=C+R}},t.i=function(T){return T<0?0:T<this.g.length?this.g[T]:this.h};function b(T){if(T.h!=0)return!1;for(let y=0;y<T.g.length;y++)if(T.g[y]!=0)return!1;return!0}function v(T){return T.h==-1}t.l=function(T){return T=V(this,T),v(T)?-1:b(T)?0:1};function D(T){const y=T.g.length,E=[];for(let R=0;R<y;R++)E[R]=~T.g[R];return new o(E,~T.h).add(p)}t.abs=function(){return v(this)?D(this):this},t.add=function(T){const y=Math.max(this.g.length,T.g.length),E=[];let R=0;for(let P=0;P<=y;P++){let C=R+(this.i(P)&65535)+(T.i(P)&65535),A=(C>>>16)+(this.i(P)>>>16)+(T.i(P)>>>16);R=A>>>16,C&=65535,A&=65535,E[P]=A<<16|C}return new o(E,E[E.length-1]&-2147483648?-1:0)};function V(T,y){return T.add(D(y))}t.j=function(T){if(b(this)||b(T))return f;if(v(this))return v(T)?D(this).j(D(T)):D(D(this).j(T));if(v(T))return D(this.j(D(T)));if(this.l(m)<0&&T.l(m)<0)return u(this.m()*T.m());const y=this.g.length+T.g.length,E=[];for(var R=0;R<2*y;R++)E[R]=0;for(R=0;R<this.g.length;R++)for(let P=0;P<T.g.length;P++){const C=this.i(R)>>>16,A=this.i(R)&65535,pe=T.i(P)>>>16,Te=T.i(P)&65535;E[2*R+2*P]+=A*Te,N(E,2*R+2*P),E[2*R+2*P+1]+=C*Te,N(E,2*R+2*P+1),E[2*R+2*P+1]+=A*pe,N(E,2*R+2*P+1),E[2*R+2*P+2]+=C*pe,N(E,2*R+2*P+2)}for(T=0;T<y;T++)E[T]=E[2*T+1]<<16|E[2*T];for(T=y;T<2*y;T++)E[T]=0;return new o(E,0)};function N(T,y){for(;(T[y]&65535)!=T[y];)T[y+1]+=T[y]>>>16,T[y]&=65535,y++}function _(T,y){this.g=T,this.h=y}function S(T,y){if(b(y))throw Error("division by zero");if(b(T))return new _(f,f);if(v(T))return y=S(D(T),y),new _(D(y.g),D(y.h));if(v(y))return y=S(T,D(y)),new _(D(y.g),y.h);if(T.g.length>30){if(v(T)||v(y))throw Error("slowDivide_ only works with positive integers.");for(var E=p,R=y;R.l(T)<=0;)E=O(E),R=O(R);var P=U(E,1),C=U(R,1);for(R=U(R,2),E=U(E,2);!b(R);){var A=C.add(R);A.l(T)<=0&&(P=P.add(E),C=A),R=U(R,1),E=U(E,1)}return y=V(T,P.j(y)),new _(P,y)}for(P=f;T.l(y)>=0;){for(E=Math.max(1,Math.floor(T.m()/y.m())),R=Math.ceil(Math.log(E)/Math.LN2),R=R<=48?1:Math.pow(2,R-48),C=u(E),A=C.j(y);v(A)||A.l(T)>0;)E-=R,C=u(E),A=C.j(y);b(C)&&(C=p),P=P.add(C),T=V(T,A)}return new _(P,T)}t.B=function(T){return S(this,T).h},t.and=function(T){const y=Math.max(this.g.length,T.g.length),E=[];for(let R=0;R<y;R++)E[R]=this.i(R)&T.i(R);return new o(E,this.h&T.h)},t.or=function(T){const y=Math.max(this.g.length,T.g.length),E=[];for(let R=0;R<y;R++)E[R]=this.i(R)|T.i(R);return new o(E,this.h|T.h)},t.xor=function(T){const y=Math.max(this.g.length,T.g.length),E=[];for(let R=0;R<y;R++)E[R]=this.i(R)^T.i(R);return new o(E,this.h^T.h)};function O(T){const y=T.g.length+1,E=[];for(let R=0;R<y;R++)E[R]=T.i(R)<<1|T.i(R-1)>>>31;return new o(E,T.h)}function U(T,y){const E=y>>5;y%=32;const R=T.g.length-E,P=[];for(let C=0;C<R;C++)P[C]=y>0?T.i(C+E)>>>y|T.i(C+E+1)<<32-y:T.i(C+E);return new o(P,T.h)}s.prototype.digest=s.prototype.A,s.prototype.reset=s.prototype.u,s.prototype.update=s.prototype.v,CE=s,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=u,o.fromString=h,Ks=o}).apply(typeof hg<"u"?hg:typeof self<"u"?self:typeof window<"u"?window:{});var Ya=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var PE,Eo,kE,fc,Ph,NE,DE,OE;(function(){var t,e=Object.defineProperty;function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof Ya=="object"&&Ya];for(var d=0;d<c.length;++d){var g=c[d];if(g&&g.Math==Math)return g}throw Error("Cannot find global object")}var s=n(this);function r(c,d){if(d)e:{var g=s;c=c.split(".");for(var I=0;I<c.length-1;I++){var F=c[I];if(!(F in g))break e;g=g[F]}c=c[c.length-1],I=g[c],d=d(I),d!=I&&d!=null&&e(g,c,{configurable:!0,writable:!0,value:d})}}r("Symbol.dispose",function(c){return c||Symbol("Symbol.dispose")}),r("Array.prototype.values",function(c){return c||function(){return this[Symbol.iterator]()}}),r("Object.entries",function(c){return c||function(d){var g=[],I;for(I in d)Object.prototype.hasOwnProperty.call(d,I)&&g.push([I,d[I]]);return g}});var i=i||{},o=this||self;function a(c){var d=typeof c;return d=="object"&&c!=null||d=="function"}function l(c,d,g){return c.call.apply(c.bind,arguments)}function u(c,d,g){return u=l,u.apply(null,arguments)}function h(c,d){var g=Array.prototype.slice.call(arguments,1);return function(){var I=g.slice();return I.push.apply(I,arguments),c.apply(this,I)}}function f(c,d){function g(){}g.prototype=d.prototype,c.Z=d.prototype,c.prototype=new g,c.prototype.constructor=c,c.Ob=function(I,F,H){for(var ae=Array(arguments.length-2),Ne=2;Ne<arguments.length;Ne++)ae[Ne-2]=arguments[Ne];return d.prototype[F].apply(I,ae)}}var p=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?c=>c&&AsyncContext.Snapshot.wrap(c):c=>c;function m(c){const d=c.length;if(d>0){const g=Array(d);for(let I=0;I<d;I++)g[I]=c[I];return g}return[]}function b(c,d){for(let I=1;I<arguments.length;I++){const F=arguments[I];var g=typeof F;if(g=g!="object"?g:F?Array.isArray(F)?"array":g:"null",g=="array"||g=="object"&&typeof F.length=="number"){g=c.length||0;const H=F.length||0;c.length=g+H;for(let ae=0;ae<H;ae++)c[g+ae]=F[ae]}else c.push(F)}}class v{constructor(d,g){this.i=d,this.j=g,this.h=0,this.g=null}get(){let d;return this.h>0?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function D(c){o.setTimeout(()=>{throw c},0)}function V(){var c=T;let d=null;return c.g&&(d=c.g,c.g=c.g.next,c.g||(c.h=null),d.next=null),d}class N{constructor(){this.h=this.g=null}add(d,g){const I=_.get();I.set(d,g),this.h?this.h.next=I:this.g=I,this.h=I}}var _=new v(()=>new S,c=>c.reset());class S{constructor(){this.next=this.g=this.h=null}set(d,g){this.h=d,this.g=g,this.next=null}reset(){this.next=this.g=this.h=null}}let O,U=!1,T=new N,y=()=>{const c=Promise.resolve(void 0);O=()=>{c.then(E)}};function E(){for(var c;c=V();){try{c.h.call(c.g)}catch(g){D(g)}var d=_;d.j(c),d.h<100&&(d.h++,c.next=d.g,d.g=c)}U=!1}function R(){this.u=this.u,this.C=this.C}R.prototype.u=!1,R.prototype.dispose=function(){this.u||(this.u=!0,this.N())},R.prototype[Symbol.dispose]=function(){this.dispose()},R.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function P(c,d){this.type=c,this.g=this.target=d,this.defaultPrevented=!1}P.prototype.h=function(){this.defaultPrevented=!0};var C=(function(){if(!o.addEventListener||!Object.defineProperty)return!1;var c=!1,d=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const g=()=>{};o.addEventListener("test",g,d),o.removeEventListener("test",g,d)}catch{}return c})();function A(c){return/^[\s\xa0]*$/.test(c)}function pe(c,d){P.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c&&this.init(c,d)}f(pe,P),pe.prototype.init=function(c,d){const g=this.type=c.type,I=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;this.target=c.target||c.srcElement,this.g=d,d=c.relatedTarget,d||(g=="mouseover"?d=c.fromElement:g=="mouseout"&&(d=c.toElement)),this.relatedTarget=d,I?(this.clientX=I.clientX!==void 0?I.clientX:I.pageX,this.clientY=I.clientY!==void 0?I.clientY:I.pageY,this.screenX=I.screenX||0,this.screenY=I.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=c.pointerType,this.state=c.state,this.i=c,c.defaultPrevented&&pe.Z.h.call(this)},pe.prototype.h=function(){pe.Z.h.call(this);const c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var Te="closure_listenable_"+(Math.random()*1e6|0),le=0;function he(c,d,g,I,F){this.listener=c,this.proxy=null,this.src=d,this.type=g,this.capture=!!I,this.ha=F,this.key=++le,this.da=this.fa=!1}function oe(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function Re(c,d,g){for(const I in c)d.call(g,c[I],I,c)}function De(c,d){for(const g in c)d.call(void 0,c[g],g,c)}function Z(c){const d={};for(const g in c)d[g]=c[g];return d}const x="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Q(c,d){let g,I;for(let F=1;F<arguments.length;F++){I=arguments[F];for(g in I)c[g]=I[g];for(let H=0;H<x.length;H++)g=x[H],Object.prototype.hasOwnProperty.call(I,g)&&(c[g]=I[g])}}function G(c){this.src=c,this.g={},this.h=0}G.prototype.add=function(c,d,g,I,F){const H=c.toString();c=this.g[H],c||(c=this.g[H]=[],this.h++);const ae=ee(c,d,I,F);return ae>-1?(d=c[ae],g||(d.fa=!1)):(d=new he(d,this.src,H,!!I,F),d.fa=g,c.push(d)),d};function z(c,d){const g=d.type;if(g in c.g){var I=c.g[g],F=Array.prototype.indexOf.call(I,d,void 0),H;(H=F>=0)&&Array.prototype.splice.call(I,F,1),H&&(oe(d),c.g[g].length==0&&(delete c.g[g],c.h--))}}function ee(c,d,g,I){for(let F=0;F<c.length;++F){const H=c[F];if(!H.da&&H.listener==d&&H.capture==!!g&&H.ha==I)return F}return-1}var L="closure_lm_"+(Math.random()*1e6|0),q={};function Y(c,d,g,I,F){if(Array.isArray(d)){for(let H=0;H<d.length;H++)Y(c,d[H],g,I,F);return null}return g=$(g),c&&c[Te]?c.J(d,g,a(I)?!!I.capture:!1,F):ne(c,d,g,!1,I,F)}function ne(c,d,g,I,F,H){if(!d)throw Error("Invalid event type");const ae=a(F)?!!F.capture:!!F;let Ne=W(c);if(Ne||(c[L]=Ne=new G(c)),g=Ne.add(d,g,I,ae,H),g.proxy)return g;if(I=se(),g.proxy=I,I.src=c,I.listener=g,c.addEventListener)C||(F=ae),F===void 0&&(F=!1),c.addEventListener(d.toString(),I,F);else if(c.attachEvent)c.attachEvent(k(d.toString()),I);else if(c.addListener&&c.removeListener)c.addListener(I);else throw Error("addEventListener and attachEvent are unavailable.");return g}function se(){function c(g){return d.call(c.src,c.listener,g)}const d=M;return c}function ue(c,d,g,I,F){if(Array.isArray(d))for(var H=0;H<d.length;H++)ue(c,d[H],g,I,F);else I=a(I)?!!I.capture:!!I,g=$(g),c&&c[Te]?(c=c.i,H=String(d).toString(),H in c.g&&(d=c.g[H],g=ee(d,g,I,F),g>-1&&(oe(d[g]),Array.prototype.splice.call(d,g,1),d.length==0&&(delete c.g[H],c.h--)))):c&&(c=W(c))&&(d=c.g[d.toString()],c=-1,d&&(c=ee(d,g,I,F)),(g=c>-1?d[c]:null)&&w(g))}function w(c){if(typeof c!="number"&&c&&!c.da){var d=c.src;if(d&&d[Te])z(d.i,c);else{var g=c.type,I=c.proxy;d.removeEventListener?d.removeEventListener(g,I,c.capture):d.detachEvent?d.detachEvent(k(g),I):d.addListener&&d.removeListener&&d.removeListener(I),(g=W(d))?(z(g,c),g.h==0&&(g.src=null,d[L]=null)):oe(c)}}}function k(c){return c in q?q[c]:q[c]="on"+c}function M(c,d){if(c.da)c=!0;else{d=new pe(d,this);const g=c.listener,I=c.ha||c.src;c.fa&&w(c),c=g.call(I,d)}return c}function W(c){return c=c[L],c instanceof G?c:null}var B="__closure_events_fn_"+(Math.random()*1e9>>>0);function $(c){return typeof c=="function"?c:(c[B]||(c[B]=function(d){return c.handleEvent(d)}),c[B])}function X(){R.call(this),this.i=new G(this),this.M=this,this.G=null}f(X,R),X.prototype[Te]=!0,X.prototype.removeEventListener=function(c,d,g,I){ue(this,c,d,g,I)};function te(c,d){var g,I=c.G;if(I)for(g=[];I;I=I.G)g.push(I);if(c=c.M,I=d.type||d,typeof d=="string")d=new P(d,c);else if(d instanceof P)d.target=d.target||c;else{var F=d;d=new P(I,c),Q(d,F)}F=!0;let H,ae;if(g)for(ae=g.length-1;ae>=0;ae--)H=d.g=g[ae],F=ie(H,I,!0,d)&&F;if(H=d.g=c,F=ie(H,I,!0,d)&&F,F=ie(H,I,!1,d)&&F,g)for(ae=0;ae<g.length;ae++)H=d.g=g[ae],F=ie(H,I,!1,d)&&F}X.prototype.N=function(){if(X.Z.N.call(this),this.i){var c=this.i;for(const d in c.g){const g=c.g[d];for(let I=0;I<g.length;I++)oe(g[I]);delete c.g[d],c.h--}}this.G=null},X.prototype.J=function(c,d,g,I){return this.i.add(String(c),d,!1,g,I)},X.prototype.K=function(c,d,g,I){return this.i.add(String(c),d,!0,g,I)};function ie(c,d,g,I){if(d=c.i.g[String(d)],!d)return!0;d=d.concat();let F=!0;for(let H=0;H<d.length;++H){const ae=d[H];if(ae&&!ae.da&&ae.capture==g){const Ne=ae.listener,wt=ae.ha||ae.src;ae.fa&&z(c.i,ae),F=Ne.call(wt,I)!==!1&&F}}return F&&!I.defaultPrevented}function re(c,d){if(typeof c!="function")if(c&&typeof c.handleEvent=="function")c=u(c.handleEvent,c);else throw Error("Invalid listener argument");return Number(d)>2147483647?-1:o.setTimeout(c,d||0)}function Ee(c){c.g=re(()=>{c.g=null,c.i&&(c.i=!1,Ee(c))},c.l);const d=c.h;c.h=null,c.m.apply(null,d)}class fe extends R{constructor(d,g){super(),this.m=d,this.l=g,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:Ee(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ge(c){R.call(this),this.h=c,this.g={}}f(ge,R);var Se=[];function Oe(c){Re(c.g,function(d,g){this.g.hasOwnProperty(g)&&w(d)},c),c.g={}}ge.prototype.N=function(){ge.Z.N.call(this),Oe(this)},ge.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var $e=o.JSON.stringify,Be=o.JSON.parse,Lt=class{stringify(c){return o.JSON.stringify(c,void 0)}parse(c){return o.JSON.parse(c,void 0)}};function Et(){}function Kt(){}var Tt={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Wn(){P.call(this,"d")}f(Wn,P);function Wr(){P.call(this,"c")}f(Wr,P);var ht={},tn=null;function ur(){return tn=tn||new X}ht.Ia="serverreachability";function Qi(c){P.call(this,ht.Ia,c)}f(Qi,P);function Yi(c){const d=ur();te(d,new Qi(d))}ht.STAT_EVENT="statevent";function vd(c,d){P.call(this,ht.STAT_EVENT,c),this.stat=d}f(vd,P);function Ht(c){const d=ur();te(d,new vd(d,c))}ht.Ja="timingevent";function Ed(c,d){P.call(this,ht.Ja,c),this.size=d}f(Ed,P);function Ji(c,d){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){c()},d)}function Xi(){this.g=!0}Xi.prototype.ua=function(){this.g=!1};function yw(c,d,g,I,F,H){c.info(function(){if(c.g)if(H){var ae="",Ne=H.split("&");for(let Ke=0;Ke<Ne.length;Ke++){var wt=Ne[Ke].split("=");if(wt.length>1){const At=wt[0];wt=wt[1];const kn=At.split("_");ae=kn.length>=2&&kn[1]=="type"?ae+(At+"="+wt+"&"):ae+(At+"=redacted&")}}}else ae=null;else ae=H;return"XMLHTTP REQ ("+I+") [attempt "+F+"]: "+d+`
`+g+`
`+ae})}function vw(c,d,g,I,F,H,ae){c.info(function(){return"XMLHTTP RESP ("+I+") [ attempt "+F+"]: "+d+`
`+g+`
`+H+" "+ae})}function zr(c,d,g,I){c.info(function(){return"XMLHTTP TEXT ("+d+"): "+Tw(c,g)+(I?" "+I:"")})}function Ew(c,d){c.info(function(){return"TIMEOUT: "+d})}Xi.prototype.info=function(){};function Tw(c,d){if(!c.g)return d;if(!d)return null;try{const H=JSON.parse(d);if(H){for(c=0;c<H.length;c++)if(Array.isArray(H[c])){var g=H[c];if(!(g.length<2)){var I=g[1];if(Array.isArray(I)&&!(I.length<1)){var F=I[0];if(F!="noop"&&F!="stop"&&F!="close")for(let ae=1;ae<I.length;ae++)I[ae]=""}}}}return $e(H)}catch{return d}}var Sa={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Td={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},wd;function ql(){}f(ql,Et),ql.prototype.g=function(){return new XMLHttpRequest},wd=new ql;function Zi(c){return encodeURIComponent(String(c))}function ww(c){var d=1;c=c.split(":");const g=[];for(;d>0&&c.length;)g.push(c.shift()),d--;return c.length&&g.push(c.join(":")),g}function vs(c,d,g,I){this.j=c,this.i=d,this.l=g,this.S=I||1,this.V=new ge(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new bd}function bd(){this.i=null,this.g="",this.h=!1}var Id={},Gl={};function Wl(c,d,g){c.M=1,c.A=Pa(Pn(d)),c.u=g,c.R=!0,Ad(c,null)}function Ad(c,d){c.F=Date.now(),Ca(c),c.B=Pn(c.A);var g=c.B,I=c.S;Array.isArray(I)||(I=[String(I)]),Fd(g.i,"t",I),c.C=0,g=c.j.L,c.h=new bd,c.g=np(c.j,g?d:null,!c.u),c.P>0&&(c.O=new fe(u(c.Y,c,c.g),c.P)),d=c.V,g=c.g,I=c.ba;var F="readystatechange";Array.isArray(F)||(F&&(Se[0]=F.toString()),F=Se);for(let H=0;H<F.length;H++){const ae=Y(g,F[H],I||d.handleEvent,!1,d.h||d);if(!ae)break;d.g[ae.key]=ae}d=c.J?Z(c.J):{},c.u?(c.v||(c.v="POST"),d["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.B,c.v,c.u,d)):(c.v="GET",c.g.ea(c.B,c.v,null,d)),Yi(),yw(c.i,c.v,c.B,c.l,c.S,c.u)}vs.prototype.ba=function(c){c=c.target;const d=this.O;d&&ws(c)==3?d.j():this.Y(c)},vs.prototype.Y=function(c){try{if(c==this.g)e:{const Ne=ws(this.g),wt=this.g.ya(),Ke=this.g.ca();if(!(Ne<3)&&(Ne!=3||this.g&&(this.h.h||this.g.la()||Gd(this.g)))){this.K||Ne!=4||wt==7||(wt==8||Ke<=0?Yi(3):Yi(2)),zl(this);var d=this.g.ca();this.X=d;var g=bw(this);if(this.o=d==200,vw(this.i,this.v,this.B,this.l,this.S,Ne,d),this.o){if(this.U&&!this.L){t:{if(this.g){var I,F=this.g;if((I=F.g?F.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!A(I)){var H=I;break t}}H=null}if(c=H)zr(this.i,this.l,c,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Kl(this,c);else{this.o=!1,this.m=3,Ht(12),hr(this),eo(this);break e}}if(this.R){c=!0;let At;for(;!this.K&&this.C<g.length;)if(At=Iw(this,g),At==Gl){Ne==4&&(this.m=4,Ht(14),c=!1),zr(this.i,this.l,null,"[Incomplete Response]");break}else if(At==Id){this.m=4,Ht(15),zr(this.i,this.l,g,"[Invalid Chunk]"),c=!1;break}else zr(this.i,this.l,At,null),Kl(this,At);if(Rd(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ne!=4||g.length!=0||this.h.h||(this.m=1,Ht(16),c=!1),this.o=this.o&&c,!c)zr(this.i,this.l,g,"[Invalid Chunked Response]"),hr(this),eo(this);else if(g.length>0&&!this.W){this.W=!0;var ae=this.j;ae.g==this&&ae.aa&&!ae.P&&(ae.j.info("Great, no buffering proxy detected. Bytes received: "+g.length),nu(ae),ae.P=!0,Ht(11))}}else zr(this.i,this.l,g,null),Kl(this,g);Ne==4&&hr(this),this.o&&!this.K&&(Ne==4?Xd(this.j,this):(this.o=!1,Ca(this)))}else Fw(this.g),d==400&&g.indexOf("Unknown SID")>0?(this.m=3,Ht(12)):(this.m=0,Ht(13)),hr(this),eo(this)}}}catch{}};function bw(c){if(!Rd(c))return c.g.la();const d=Gd(c.g);if(d==="")return"";let g="";const I=d.length,F=ws(c.g)==4;if(!c.h.i){if(typeof TextDecoder>"u")return hr(c),eo(c),"";c.h.i=new o.TextDecoder}for(let H=0;H<I;H++)c.h.h=!0,g+=c.h.i.decode(d[H],{stream:!(F&&H==I-1)});return d.length=0,c.h.g+=g,c.C=0,c.h.g}function Rd(c){return c.g?c.v=="GET"&&c.M!=2&&c.j.Aa:!1}function Iw(c,d){var g=c.C,I=d.indexOf(`
`,g);return I==-1?Gl:(g=Number(d.substring(g,I)),isNaN(g)?Id:(I+=1,I+g>d.length?Gl:(d=d.slice(I,I+g),c.C=I+g,d)))}vs.prototype.cancel=function(){this.K=!0,hr(this)};function Ca(c){c.T=Date.now()+c.H,Sd(c,c.H)}function Sd(c,d){if(c.D!=null)throw Error("WatchDog timer not null");c.D=Ji(u(c.aa,c),d)}function zl(c){c.D&&(o.clearTimeout(c.D),c.D=null)}vs.prototype.aa=function(){this.D=null;const c=Date.now();c-this.T>=0?(Ew(this.i,this.B),this.M!=2&&(Yi(),Ht(17)),hr(this),this.m=2,eo(this)):Sd(this,this.T-c)};function eo(c){c.j.I==0||c.K||Xd(c.j,c)}function hr(c){zl(c);var d=c.O;d&&typeof d.dispose=="function"&&d.dispose(),c.O=null,Oe(c.V),c.g&&(d=c.g,c.g=null,d.abort(),d.dispose())}function Kl(c,d){try{var g=c.j;if(g.I!=0&&(g.g==c||Ql(g.h,c))){if(!c.L&&Ql(g.h,c)&&g.I==3){try{var I=g.Ba.g.parse(d)}catch{I=null}if(Array.isArray(I)&&I.length==3){var F=I;if(F[0]==0){e:if(!g.v){if(g.g)if(g.g.F+3e3<c.F)Va(g),Da(g);else break e;tu(g),Ht(18)}}else g.xa=F[1],0<g.xa-g.K&&F[2]<37500&&g.F&&g.A==0&&!g.C&&(g.C=Ji(u(g.Va,g),6e3));kd(g.h)<=1&&g.ta&&(g.ta=void 0)}else dr(g,11)}else if((c.L||g.g==c)&&Va(g),!A(d))for(F=g.Ba.g.parse(d),d=0;d<F.length;d++){let Ke=F[d];const At=Ke[0];if(!(At<=g.K))if(g.K=At,Ke=Ke[1],g.I==2)if(Ke[0]=="c"){g.M=Ke[1],g.ba=Ke[2];const kn=Ke[3];kn!=null&&(g.ka=kn,g.j.info("VER="+g.ka));const pr=Ke[4];pr!=null&&(g.za=pr,g.j.info("SVER="+g.za));const bs=Ke[5];bs!=null&&typeof bs=="number"&&bs>0&&(I=1.5*bs,g.O=I,g.j.info("backChannelRequestTimeoutMs_="+I)),I=g;const Is=c.g;if(Is){const Ma=Is.g?Is.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ma){var H=I.h;H.g||Ma.indexOf("spdy")==-1&&Ma.indexOf("quic")==-1&&Ma.indexOf("h2")==-1||(H.j=H.l,H.g=new Set,H.h&&(Yl(H,H.h),H.h=null))}if(I.G){const su=Is.g?Is.g.getResponseHeader("X-HTTP-Session-Id"):null;su&&(I.wa=su,tt(I.J,I.G,su))}}g.I=3,g.l&&g.l.ra(),g.aa&&(g.T=Date.now()-c.F,g.j.info("Handshake RTT: "+g.T+"ms")),I=g;var ae=c;if(I.na=tp(I,I.L?I.ba:null,I.W),ae.L){Nd(I.h,ae);var Ne=ae,wt=I.O;wt&&(Ne.H=wt),Ne.D&&(zl(Ne),Ca(Ne)),I.g=ae}else Yd(I);g.i.length>0&&Oa(g)}else Ke[0]!="stop"&&Ke[0]!="close"||dr(g,7);else g.I==3&&(Ke[0]=="stop"||Ke[0]=="close"?Ke[0]=="stop"?dr(g,7):eu(g):Ke[0]!="noop"&&g.l&&g.l.qa(Ke),g.A=0)}}Yi(4)}catch{}}var Aw=class{constructor(c,d){this.g=c,this.map=d}};function Cd(c){this.l=c||10,o.PerformanceNavigationTiming?(c=o.performance.getEntriesByType("navigation"),c=c.length>0&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Pd(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function kd(c){return c.h?1:c.g?c.g.size:0}function Ql(c,d){return c.h?c.h==d:c.g?c.g.has(d):!1}function Yl(c,d){c.g?c.g.add(d):c.h=d}function Nd(c,d){c.h&&c.h==d?c.h=null:c.g&&c.g.has(d)&&c.g.delete(d)}Cd.prototype.cancel=function(){if(this.i=Dd(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function Dd(c){if(c.h!=null)return c.i.concat(c.h.G);if(c.g!=null&&c.g.size!==0){let d=c.i;for(const g of c.g.values())d=d.concat(g.G);return d}return m(c.i)}var Od=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Rw(c,d){if(c){c=c.split("&");for(let g=0;g<c.length;g++){const I=c[g].indexOf("=");let F,H=null;I>=0?(F=c[g].substring(0,I),H=c[g].substring(I+1)):F=c[g],d(F,H?decodeURIComponent(H.replace(/\+/g," ")):"")}}}function Es(c){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let d;c instanceof Es?(this.l=c.l,to(this,c.j),this.o=c.o,this.g=c.g,no(this,c.u),this.h=c.h,Jl(this,Ud(c.i)),this.m=c.m):c&&(d=String(c).match(Od))?(this.l=!1,to(this,d[1]||"",!0),this.o=so(d[2]||""),this.g=so(d[3]||"",!0),no(this,d[4]),this.h=so(d[5]||"",!0),Jl(this,d[6]||"",!0),this.m=so(d[7]||"")):(this.l=!1,this.i=new io(null,this.l))}Es.prototype.toString=function(){const c=[];var d=this.j;d&&c.push(ro(d,Vd,!0),":");var g=this.g;return(g||d=="file")&&(c.push("//"),(d=this.o)&&c.push(ro(d,Vd,!0),"@"),c.push(Zi(g).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g=this.u,g!=null&&c.push(":",String(g))),(g=this.h)&&(this.g&&g.charAt(0)!="/"&&c.push("/"),c.push(ro(g,g.charAt(0)=="/"?Pw:Cw,!0))),(g=this.i.toString())&&c.push("?",g),(g=this.m)&&c.push("#",ro(g,Nw)),c.join("")},Es.prototype.resolve=function(c){const d=Pn(this);let g=!!c.j;g?to(d,c.j):g=!!c.o,g?d.o=c.o:g=!!c.g,g?d.g=c.g:g=c.u!=null;var I=c.h;if(g)no(d,c.u);else if(g=!!c.h){if(I.charAt(0)!="/")if(this.g&&!this.h)I="/"+I;else{var F=d.h.lastIndexOf("/");F!=-1&&(I=d.h.slice(0,F+1)+I)}if(F=I,F==".."||F==".")I="";else if(F.indexOf("./")!=-1||F.indexOf("/.")!=-1){I=F.lastIndexOf("/",0)==0,F=F.split("/");const H=[];for(let ae=0;ae<F.length;){const Ne=F[ae++];Ne=="."?I&&ae==F.length&&H.push(""):Ne==".."?((H.length>1||H.length==1&&H[0]!="")&&H.pop(),I&&ae==F.length&&H.push("")):(H.push(Ne),I=!0)}I=H.join("/")}else I=F}return g?d.h=I:g=c.i.toString()!=="",g?Jl(d,Ud(c.i)):g=!!c.m,g&&(d.m=c.m),d};function Pn(c){return new Es(c)}function to(c,d,g){c.j=g?so(d,!0):d,c.j&&(c.j=c.j.replace(/:$/,""))}function no(c,d){if(d){if(d=Number(d),isNaN(d)||d<0)throw Error("Bad port number "+d);c.u=d}else c.u=null}function Jl(c,d,g){d instanceof io?(c.i=d,Dw(c.i,c.l)):(g||(d=ro(d,kw)),c.i=new io(d,c.l))}function tt(c,d,g){c.i.set(d,g)}function Pa(c){return tt(c,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),c}function so(c,d){return c?d?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function ro(c,d,g){return typeof c=="string"?(c=encodeURI(c).replace(d,Sw),g&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function Sw(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var Vd=/[#\/\?@]/g,Cw=/[#\?:]/g,Pw=/[#\?]/g,kw=/[#\?@]/g,Nw=/#/g;function io(c,d){this.h=this.g=null,this.i=c||null,this.j=!!d}function fr(c){c.g||(c.g=new Map,c.h=0,c.i&&Rw(c.i,function(d,g){c.add(decodeURIComponent(d.replace(/\+/g," ")),g)}))}t=io.prototype,t.add=function(c,d){fr(this),this.i=null,c=Kr(this,c);let g=this.g.get(c);return g||this.g.set(c,g=[]),g.push(d),this.h+=1,this};function Ld(c,d){fr(c),d=Kr(c,d),c.g.has(d)&&(c.i=null,c.h-=c.g.get(d).length,c.g.delete(d))}function Md(c,d){return fr(c),d=Kr(c,d),c.g.has(d)}t.forEach=function(c,d){fr(this),this.g.forEach(function(g,I){g.forEach(function(F){c.call(d,F,I,this)},this)},this)};function xd(c,d){fr(c);let g=[];if(typeof d=="string")Md(c,d)&&(g=g.concat(c.g.get(Kr(c,d))));else for(c=Array.from(c.g.values()),d=0;d<c.length;d++)g=g.concat(c[d]);return g}t.set=function(c,d){return fr(this),this.i=null,c=Kr(this,c),Md(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[d]),this.h+=1,this},t.get=function(c,d){return c?(c=xd(this,c),c.length>0?String(c[0]):d):d};function Fd(c,d,g){Ld(c,d),g.length>0&&(c.i=null,c.g.set(Kr(c,d),m(g)),c.h+=g.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],d=Array.from(this.g.keys());for(let I=0;I<d.length;I++){var g=d[I];const F=Zi(g);g=xd(this,g);for(let H=0;H<g.length;H++){let ae=F;g[H]!==""&&(ae+="="+Zi(g[H])),c.push(ae)}}return this.i=c.join("&")};function Ud(c){const d=new io;return d.i=c.i,c.g&&(d.g=new Map(c.g),d.h=c.h),d}function Kr(c,d){return d=String(d),c.j&&(d=d.toLowerCase()),d}function Dw(c,d){d&&!c.j&&(fr(c),c.i=null,c.g.forEach(function(g,I){const F=I.toLowerCase();I!=F&&(Ld(this,I),Fd(this,F,g))},c)),c.j=d}function Ow(c,d){const g=new Xi;if(o.Image){const I=new Image;I.onload=h(Ts,g,"TestLoadImage: loaded",!0,d,I),I.onerror=h(Ts,g,"TestLoadImage: error",!1,d,I),I.onabort=h(Ts,g,"TestLoadImage: abort",!1,d,I),I.ontimeout=h(Ts,g,"TestLoadImage: timeout",!1,d,I),o.setTimeout(function(){I.ontimeout&&I.ontimeout()},1e4),I.src=c}else d(!1)}function Vw(c,d){const g=new Xi,I=new AbortController,F=setTimeout(()=>{I.abort(),Ts(g,"TestPingServer: timeout",!1,d)},1e4);fetch(c,{signal:I.signal}).then(H=>{clearTimeout(F),H.ok?Ts(g,"TestPingServer: ok",!0,d):Ts(g,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(F),Ts(g,"TestPingServer: error",!1,d)})}function Ts(c,d,g,I,F){try{F&&(F.onload=null,F.onerror=null,F.onabort=null,F.ontimeout=null),I(g)}catch{}}function Lw(){this.g=new Lt}function Xl(c){this.i=c.Sb||null,this.h=c.ab||!1}f(Xl,Et),Xl.prototype.g=function(){return new ka(this.i,this.h)};function ka(c,d){X.call(this),this.H=c,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}f(ka,X),t=ka.prototype,t.open=function(c,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=c,this.D=d,this.readyState=1,ao(this)},t.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const d={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};c&&(d.body=c),(this.H||o).fetch(new Request(this.D,d)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,oo(this)),this.readyState=0},t.Pa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,ao(this)),this.g&&(this.readyState=3,ao(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Bd(this)}else c.text().then(this.Oa.bind(this),this.ga.bind(this))};function Bd(c){c.j.read().then(c.Ma.bind(c)).catch(c.ga.bind(c))}t.Ma=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var d=c.value?c.value:new Uint8Array(0);(d=this.B.decode(d,{stream:!c.done}))&&(this.response=this.responseText+=d)}c.done?oo(this):ao(this),this.readyState==3&&Bd(this)}},t.Oa=function(c){this.g&&(this.response=this.responseText=c,oo(this))},t.Na=function(c){this.g&&(this.response=c,oo(this))},t.ga=function(){this.g&&oo(this)};function oo(c){c.readyState=4,c.l=null,c.j=null,c.B=null,ao(c)}t.setRequestHeader=function(c,d){this.A.append(c,d)},t.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],d=this.h.entries();for(var g=d.next();!g.done;)g=g.value,c.push(g[0]+": "+g[1]),g=d.next();return c.join(`\r
`)};function ao(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(ka.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function $d(c){let d="";return Re(c,function(g,I){d+=I,d+=":",d+=g,d+=`\r
`}),d}function Zl(c,d,g){e:{for(I in g){var I=!1;break e}I=!0}I||(g=$d(g),typeof c=="string"?g!=null&&Zi(g):tt(c,d,g))}function rt(c){X.call(this),this.headers=new Map,this.L=c||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}f(rt,X);var Mw=/^https?$/i,xw=["POST","PUT"];t=rt.prototype,t.Fa=function(c){this.H=c},t.ea=function(c,d,g,I){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);d=d?d.toUpperCase():"GET",this.D=c,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():wd.g(),this.g.onreadystatechange=p(u(this.Ca,this));try{this.B=!0,this.g.open(d,String(c),!0),this.B=!1}catch(H){Hd(this,H);return}if(c=g||"",g=new Map(this.headers),I)if(Object.getPrototypeOf(I)===Object.prototype)for(var F in I)g.set(F,I[F]);else if(typeof I.keys=="function"&&typeof I.get=="function")for(const H of I.keys())g.set(H,I.get(H));else throw Error("Unknown input type for opt_headers: "+String(I));I=Array.from(g.keys()).find(H=>H.toLowerCase()=="content-type"),F=o.FormData&&c instanceof o.FormData,!(Array.prototype.indexOf.call(xw,d,void 0)>=0)||I||F||g.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[H,ae]of g)this.g.setRequestHeader(H,ae);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(c),this.v=!1}catch(H){Hd(this,H)}};function Hd(c,d){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=d,c.o=5,jd(c),Na(c)}function jd(c){c.A||(c.A=!0,te(c,"complete"),te(c,"error"))}t.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=c||7,te(this,"complete"),te(this,"abort"),Na(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Na(this,!0)),rt.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?qd(this):this.Xa())},t.Xa=function(){qd(this)};function qd(c){if(c.h&&typeof i<"u"){if(c.v&&ws(c)==4)setTimeout(c.Ca.bind(c),0);else if(te(c,"readystatechange"),ws(c)==4){c.h=!1;try{const H=c.ca();e:switch(H){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var g;if(!(g=d)){var I;if(I=H===0){let ae=String(c.D).match(Od)[1]||null;!ae&&o.self&&o.self.location&&(ae=o.self.location.protocol.slice(0,-1)),I=!Mw.test(ae?ae.toLowerCase():"")}g=I}if(g)te(c,"complete"),te(c,"success");else{c.o=6;try{var F=ws(c)>2?c.g.statusText:""}catch{F=""}c.l=F+" ["+c.ca()+"]",jd(c)}}finally{Na(c)}}}}function Na(c,d){if(c.g){c.m&&(clearTimeout(c.m),c.m=null);const g=c.g;c.g=null,d||te(c,"ready");try{g.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function ws(c){return c.g?c.g.readyState:0}t.ca=function(){try{return ws(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(c){if(this.g){var d=this.g.responseText;return c&&d.indexOf(c)==0&&(d=d.substring(c.length)),Be(d)}};function Gd(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.F){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function Fw(c){const d={};c=(c.g&&ws(c)>=2&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let I=0;I<c.length;I++){if(A(c[I]))continue;var g=ww(c[I]);const F=g[0];if(g=g[1],typeof g!="string")continue;g=g.trim();const H=d[F]||[];d[F]=H,H.push(g)}De(d,function(I){return I.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function co(c,d,g){return g&&g.internalChannelParams&&g.internalChannelParams[c]||d}function Wd(c){this.za=0,this.i=[],this.j=new Xi,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=co("failFast",!1,c),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=co("baseRetryDelayMs",5e3,c),this.Za=co("retryDelaySeedMs",1e4,c),this.Ta=co("forwardChannelMaxRetries",2,c),this.va=co("forwardChannelRequestTimeoutMs",2e4,c),this.ma=c&&c.xmlHttpFactory||void 0,this.Ua=c&&c.Rb||void 0,this.Aa=c&&c.useFetchStreams||!1,this.O=void 0,this.L=c&&c.supportsCrossDomainXhr||!1,this.M="",this.h=new Cd(c&&c.concurrentRequestLimit),this.Ba=new Lw,this.S=c&&c.fastHandshake||!1,this.R=c&&c.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=c&&c.Pb||!1,c&&c.ua&&this.j.ua(),c&&c.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&c&&c.detectBufferingProxy||!1,this.ia=void 0,c&&c.longPollingTimeout&&c.longPollingTimeout>0&&(this.ia=c.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=Wd.prototype,t.ka=8,t.I=1,t.connect=function(c,d,g,I){Ht(0),this.W=c,this.H=d||{},g&&I!==void 0&&(this.H.OSID=g,this.H.OAID=I),this.F=this.X,this.J=tp(this,null,this.W),Oa(this)};function eu(c){if(zd(c),c.I==3){var d=c.V++,g=Pn(c.J);if(tt(g,"SID",c.M),tt(g,"RID",d),tt(g,"TYPE","terminate"),lo(c,g),d=new vs(c,c.j,d),d.M=2,d.A=Pa(Pn(g)),g=!1,o.navigator&&o.navigator.sendBeacon)try{g=o.navigator.sendBeacon(d.A.toString(),"")}catch{}!g&&o.Image&&(new Image().src=d.A,g=!0),g||(d.g=np(d.j,null),d.g.ea(d.A)),d.F=Date.now(),Ca(d)}ep(c)}function Da(c){c.g&&(nu(c),c.g.cancel(),c.g=null)}function zd(c){Da(c),c.v&&(o.clearTimeout(c.v),c.v=null),Va(c),c.h.cancel(),c.m&&(typeof c.m=="number"&&o.clearTimeout(c.m),c.m=null)}function Oa(c){if(!Pd(c.h)&&!c.m){c.m=!0;var d=c.Ea;O||y(),U||(O(),U=!0),T.add(d,c),c.D=0}}function Uw(c,d){return kd(c.h)>=c.h.j-(c.m?1:0)?!1:c.m?(c.i=d.G.concat(c.i),!0):c.I==1||c.I==2||c.D>=(c.Sa?0:c.Ta)?!1:(c.m=Ji(u(c.Ea,c,d),Zd(c,c.D)),c.D++,!0)}t.Ea=function(c){if(this.m)if(this.m=null,this.I==1){if(!c){this.V=Math.floor(Math.random()*1e5),c=this.V++;const F=new vs(this,this.j,c);let H=this.o;if(this.U&&(H?(H=Z(H),Q(H,this.U)):H=this.U),this.u!==null||this.R||(F.J=H,H=null),this.S)e:{for(var d=0,g=0;g<this.i.length;g++){t:{var I=this.i[g];if("__data__"in I.map&&(I=I.map.__data__,typeof I=="string")){I=I.length;break t}I=void 0}if(I===void 0)break;if(d+=I,d>4096){d=g;break e}if(d===4096||g===this.i.length-1){d=g+1;break e}}d=1e3}else d=1e3;d=Qd(this,F,d),g=Pn(this.J),tt(g,"RID",c),tt(g,"CVER",22),this.G&&tt(g,"X-HTTP-Session-Id",this.G),lo(this,g),H&&(this.R?d="headers="+Zi($d(H))+"&"+d:this.u&&Zl(g,this.u,H)),Yl(this.h,F),this.Ra&&tt(g,"TYPE","init"),this.S?(tt(g,"$req",d),tt(g,"SID","null"),F.U=!0,Wl(F,g,null)):Wl(F,g,d),this.I=2}}else this.I==3&&(c?Kd(this,c):this.i.length==0||Pd(this.h)||Kd(this))};function Kd(c,d){var g;d?g=d.l:g=c.V++;const I=Pn(c.J);tt(I,"SID",c.M),tt(I,"RID",g),tt(I,"AID",c.K),lo(c,I),c.u&&c.o&&Zl(I,c.u,c.o),g=new vs(c,c.j,g,c.D+1),c.u===null&&(g.J=c.o),d&&(c.i=d.G.concat(c.i)),d=Qd(c,g,1e3),g.H=Math.round(c.va*.5)+Math.round(c.va*.5*Math.random()),Yl(c.h,g),Wl(g,I,d)}function lo(c,d){c.H&&Re(c.H,function(g,I){tt(d,I,g)}),c.l&&Re({},function(g,I){tt(d,I,g)})}function Qd(c,d,g){g=Math.min(c.i.length,g);const I=c.l?u(c.l.Ka,c.l,c):null;e:{var F=c.i;let Ne=-1;for(;;){const wt=["count="+g];Ne==-1?g>0?(Ne=F[0].g,wt.push("ofs="+Ne)):Ne=0:wt.push("ofs="+Ne);let Ke=!0;for(let At=0;At<g;At++){var H=F[At].g;const kn=F[At].map;if(H-=Ne,H<0)Ne=Math.max(0,F[At].g-100),Ke=!1;else try{H="req"+H+"_"||"";try{var ae=kn instanceof Map?kn:Object.entries(kn);for(const[pr,bs]of ae){let Is=bs;a(bs)&&(Is=$e(bs)),wt.push(H+pr+"="+encodeURIComponent(Is))}}catch(pr){throw wt.push(H+"type="+encodeURIComponent("_badmap")),pr}}catch{I&&I(kn)}}if(Ke){ae=wt.join("&");break e}}ae=void 0}return c=c.i.splice(0,g),d.G=c,ae}function Yd(c){if(!c.g&&!c.v){c.Y=1;var d=c.Da;O||y(),U||(O(),U=!0),T.add(d,c),c.A=0}}function tu(c){return c.g||c.v||c.A>=3?!1:(c.Y++,c.v=Ji(u(c.Da,c),Zd(c,c.A)),c.A++,!0)}t.Da=function(){if(this.v=null,Jd(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var c=4*this.T;this.j.info("BP detection timer enabled: "+c),this.B=Ji(u(this.Wa,this),c)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Ht(10),Da(this),Jd(this))};function nu(c){c.B!=null&&(o.clearTimeout(c.B),c.B=null)}function Jd(c){c.g=new vs(c,c.j,"rpc",c.Y),c.u===null&&(c.g.J=c.o),c.g.P=0;var d=Pn(c.na);tt(d,"RID","rpc"),tt(d,"SID",c.M),tt(d,"AID",c.K),tt(d,"CI",c.F?"0":"1"),!c.F&&c.ia&&tt(d,"TO",c.ia),tt(d,"TYPE","xmlhttp"),lo(c,d),c.u&&c.o&&Zl(d,c.u,c.o),c.O&&(c.g.H=c.O);var g=c.g;c=c.ba,g.M=1,g.A=Pa(Pn(d)),g.u=null,g.R=!0,Ad(g,c)}t.Va=function(){this.C!=null&&(this.C=null,Da(this),tu(this),Ht(19))};function Va(c){c.C!=null&&(o.clearTimeout(c.C),c.C=null)}function Xd(c,d){var g=null;if(c.g==d){Va(c),nu(c),c.g=null;var I=2}else if(Ql(c.h,d))g=d.G,Nd(c.h,d),I=1;else return;if(c.I!=0){if(d.o)if(I==1){g=d.u?d.u.length:0,d=Date.now()-d.F;var F=c.D;I=ur(),te(I,new Ed(I,g)),Oa(c)}else Yd(c);else if(F=d.m,F==3||F==0&&d.X>0||!(I==1&&Uw(c,d)||I==2&&tu(c)))switch(g&&g.length>0&&(d=c.h,d.i=d.i.concat(g)),F){case 1:dr(c,5);break;case 4:dr(c,10);break;case 3:dr(c,6);break;default:dr(c,2)}}}function Zd(c,d){let g=c.Qa+Math.floor(Math.random()*c.Za);return c.isActive()||(g*=2),g*d}function dr(c,d){if(c.j.info("Error code "+d),d==2){var g=u(c.bb,c),I=c.Ua;const F=!I;I=new Es(I||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||to(I,"https"),Pa(I),F?Ow(I.toString(),g):Vw(I.toString(),g)}else Ht(2);c.I=0,c.l&&c.l.pa(d),ep(c),zd(c)}t.bb=function(c){c?(this.j.info("Successfully pinged google.com"),Ht(2)):(this.j.info("Failed to ping google.com"),Ht(1))};function ep(c){if(c.I=0,c.ja=[],c.l){const d=Dd(c.h);(d.length!=0||c.i.length!=0)&&(b(c.ja,d),b(c.ja,c.i),c.h.i.length=0,m(c.i),c.i.length=0),c.l.oa()}}function tp(c,d,g){var I=g instanceof Es?Pn(g):new Es(g);if(I.g!="")d&&(I.g=d+"."+I.g),no(I,I.u);else{var F=o.location;I=F.protocol,d=d?d+"."+F.hostname:F.hostname,F=+F.port;const H=new Es(null);I&&to(H,I),d&&(H.g=d),F&&no(H,F),g&&(H.h=g),I=H}return g=c.G,d=c.wa,g&&d&&tt(I,g,d),tt(I,"VER",c.ka),lo(c,I),I}function np(c,d,g){if(d&&!c.L)throw Error("Can't create secondary domain capable XhrIo object.");return d=c.Aa&&!c.ma?new rt(new Xl({ab:g})):new rt(c.ma),d.Fa(c.L),d}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function sp(){}t=sp.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function La(){}La.prototype.g=function(c,d){return new nn(c,d)};function nn(c,d){X.call(this),this.g=new Wd(d),this.l=c,this.h=d&&d.messageUrlParams||null,c=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(c?c["X-WebChannel-Content-Type"]=d.messageContentType:c={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.sa&&(c?c["X-WebChannel-Client-Profile"]=d.sa:c={"X-WebChannel-Client-Profile":d.sa}),this.g.U=c,(c=d&&d.Qb)&&!A(c)&&(this.g.u=c),this.A=d&&d.supportsCrossDomainXhr||!1,this.v=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!A(d)&&(this.g.G=d,c=this.h,c!==null&&d in c&&(c=this.h,d in c&&delete c[d])),this.j=new Qr(this)}f(nn,X),nn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},nn.prototype.close=function(){eu(this.g)},nn.prototype.o=function(c){var d=this.g;if(typeof c=="string"){var g={};g.__data__=c,c=g}else this.v&&(g={},g.__data__=$e(c),c=g);d.i.push(new Aw(d.Ya++,c)),d.I==3&&Oa(d)},nn.prototype.N=function(){this.g.l=null,delete this.j,eu(this.g),delete this.g,nn.Z.N.call(this)};function rp(c){Wn.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var d=c.__sm__;if(d){e:{for(const g in d){c=g;break e}c=void 0}(this.i=c)&&(c=this.i,d=d!==null&&c in d?d[c]:void 0),this.data=d}else this.data=c}f(rp,Wn);function ip(){Wr.call(this),this.status=1}f(ip,Wr);function Qr(c){this.g=c}f(Qr,sp),Qr.prototype.ra=function(){te(this.g,"a")},Qr.prototype.qa=function(c){te(this.g,new rp(c))},Qr.prototype.pa=function(c){te(this.g,new ip)},Qr.prototype.oa=function(){te(this.g,"b")},La.prototype.createWebChannel=La.prototype.g,nn.prototype.send=nn.prototype.o,nn.prototype.open=nn.prototype.m,nn.prototype.close=nn.prototype.close,OE=function(){return new La},DE=function(){return ur()},NE=ht,Ph={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Sa.NO_ERROR=0,Sa.TIMEOUT=8,Sa.HTTP_ERROR=6,fc=Sa,Td.COMPLETE="complete",kE=Td,Kt.EventType=Tt,Tt.OPEN="a",Tt.CLOSE="b",Tt.ERROR="c",Tt.MESSAGE="d",X.prototype.listen=X.prototype.J,Eo=Kt,rt.prototype.listenOnce=rt.prototype.K,rt.prototype.getLastError=rt.prototype.Ha,rt.prototype.getLastErrorCode=rt.prototype.ya,rt.prototype.getStatus=rt.prototype.ca,rt.prototype.getResponseJson=rt.prototype.La,rt.prototype.getResponseText=rt.prototype.la,rt.prototype.send=rt.prototype.ea,rt.prototype.setWithCredentials=rt.prototype.Fa,PE=rt}).apply(typeof Ya<"u"?Ya:typeof self<"u"?self:typeof window<"u"?window:{});const fg="@firebase/firestore",dg="4.9.3";class Ft{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ft.UNAUTHENTICATED=new Ft(null),Ft.GOOGLE_CREDENTIALS=new Ft("google-credentials-uid"),Ft.FIRST_PARTY=new Ft("first-party-uid"),Ft.MOCK_USER=new Ft("mock-user");let Hi="12.7.0";const Fr=new Pf("@firebase/firestore");function ei(){return Fr.logLevel}function me(t,...e){if(Fr.logLevel<=Ve.DEBUG){const n=e.map(Bf);Fr.debug(`Firestore (${Hi}): ${t}`,...n)}}function ps(t,...e){if(Fr.logLevel<=Ve.ERROR){const n=e.map(Bf);Fr.error(`Firestore (${Hi}): ${t}`,...n)}}function Ur(t,...e){if(Fr.logLevel<=Ve.WARN){const n=e.map(Bf);Fr.warn(`Firestore (${Hi}): ${t}`,...n)}}function Bf(t){if(typeof t=="string")return t;try{return(function(n){return JSON.stringify(n)})(t)}catch{return t}}function Ae(t,e,n){let s="Unexpected state";typeof e=="string"?s=e:n=e,VE(t,s,n)}function VE(t,e,n){let s=`FIRESTORE (${Hi}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{s+=" CONTEXT: "+JSON.stringify(n)}catch{s+=" CONTEXT: "+n}throw ps(s),new Error(s)}function qe(t,e,n,s){let r="Unexpected state";typeof n=="string"?r=n:s=n,t||VE(e,r,s)}function Pe(t,e){return t}const K={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ce extends _s{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class os{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}class LE{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class ME{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(Ft.UNAUTHENTICATED)))}shutdown(){}}class GN{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class WN{constructor(e){this.t=e,this.currentUser=Ft.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){qe(this.o===void 0,42304);let s=this.i;const r=l=>this.i!==s?(s=this.i,n(l)):Promise.resolve();let i=new os;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new os,e.enqueueRetryable((()=>r(this.currentUser)))};const o=()=>{const l=i;e.enqueueRetryable((async()=>{await l.promise,await r(this.currentUser)}))},a=l=>{me("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit((l=>a(l))),setTimeout((()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(me("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new os)}}),0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((s=>this.i!==e?(me("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(qe(typeof s.accessToken=="string",31837,{l:s}),new LE(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return qe(e===null||typeof e=="string",2055,{h:e}),new Ft(e)}}class zN{constructor(e,n,s){this.P=e,this.T=n,this.I=s,this.type="FirstParty",this.user=Ft.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class KN{constructor(e,n,s){this.P=e,this.T=n,this.I=s}getToken(){return Promise.resolve(new zN(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(Ft.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class pg{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class QN{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,fn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){qe(this.o===void 0,3512);const s=i=>{i.error!=null&&me("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.m;return this.m=i.token,me("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable((()=>s(i)))};const r=i=>{me("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((i=>r(i))),setTimeout((()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?r(i):me("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new pg(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(qe(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new pg(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function YN(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let s=0;s<t;s++)n[s]=Math.floor(256*Math.random());return n}class bl{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const r=YN(40);for(let i=0;i<r.length;++i)s.length<20&&r[i]<n&&(s+=e.charAt(r[i]%62))}return s}}function Le(t,e){return t<e?-1:t>e?1:0}function kh(t,e){const n=Math.min(t.length,e.length);for(let s=0;s<n;s++){const r=t.charAt(s),i=e.charAt(s);if(r!==i)return Vu(r)===Vu(i)?Le(r,i):Vu(r)?1:-1}return Le(t.length,e.length)}const JN=55296,XN=57343;function Vu(t){const e=t.charCodeAt(0);return e>=JN&&e<=XN}function Ci(t,e,n){return t.length===e.length&&t.every(((s,r)=>n(s,e[r])))}const mg="__name__";class On{constructor(e,n,s){n===void 0?n=0:n>e.length&&Ae(637,{offset:n,range:e.length}),s===void 0?s=e.length-n:s>e.length-n&&Ae(1746,{length:s,range:e.length-n}),this.segments=e,this.offset=n,this.len=s}get length(){return this.len}isEqual(e){return On.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof On?e.forEach((s=>{n.push(s)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,s=this.limit();n<s;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const s=Math.min(e.length,n.length);for(let r=0;r<s;r++){const i=On.compareSegments(e.get(r),n.get(r));if(i!==0)return i}return Le(e.length,n.length)}static compareSegments(e,n){const s=On.isNumericId(e),r=On.isNumericId(n);return s&&!r?-1:!s&&r?1:s&&r?On.extractNumericId(e).compare(On.extractNumericId(n)):kh(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ks.fromString(e.substring(4,e.length-2))}}class Ze extends On{construct(e,n,s){return new Ze(e,n,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const s of e){if(s.indexOf("//")>=0)throw new ce(K.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);n.push(...s.split("/").filter((r=>r.length>0)))}return new Ze(n)}static emptyPath(){return new Ze([])}}const ZN=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class St extends On{construct(e,n,s){return new St(e,n,s)}static isValidIdentifier(e){return ZN.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),St.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===mg}static keyField(){return new St([mg])}static fromServerFormat(e){const n=[];let s="",r=0;const i=()=>{if(s.length===0)throw new ce(K.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(s),s=""};let o=!1;for(;r<e.length;){const a=e[r];if(a==="\\"){if(r+1===e.length)throw new ce(K.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[r+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new ce(K.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=l,r+=2}else a==="`"?(o=!o,r++):a!=="."||o?(s+=a,r++):(i(),r++)}if(i(),o)throw new ce(K.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new St(n)}static emptyPath(){return new St([])}}class ye{constructor(e){this.path=e}static fromPath(e){return new ye(Ze.fromString(e))}static fromName(e){return new ye(Ze.fromString(e).popFirst(5))}static empty(){return new ye(Ze.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ze.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ze.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ye(new Ze(e.slice()))}}function xE(t,e,n){if(!n)throw new ce(K.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function FE(t,e,n,s){if(e===!0&&s===!0)throw new ce(K.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function gg(t){if(!ye.isDocumentKey(t))throw new ce(K.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function _g(t){if(ye.isDocumentKey(t))throw new ce(K.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function UE(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function Il(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=(function(s){return s.constructor?s.constructor.name:null})(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Ae(12329,{type:typeof t})}function mn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new ce(K.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Il(t);throw new ce(K.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function yt(t,e){const n={typeString:t};return e&&(n.value=e),n}function _a(t,e){if(!UE(t))throw new ce(K.INVALID_ARGUMENT,"JSON must be an object");let n;for(const s in e)if(e[s]){const r=e[s].typeString,i="value"in e[s]?{value:e[s].value}:void 0;if(!(s in t)){n=`JSON missing required field: '${s}'`;break}const o=t[s];if(r&&typeof o!==r){n=`JSON field '${s}' must be a ${r}.`;break}if(i!==void 0&&o!==i.value){n=`Expected '${s}' field to equal '${i.value}'`;break}}if(n)throw new ce(K.INVALID_ARGUMENT,n);return!0}const yg=-62135596800,vg=1e6;class et{static now(){return et.fromMillis(Date.now())}static fromDate(e){return et.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),s=Math.floor((e-1e3*n)*vg);return new et(n,s)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ce(K.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ce(K.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<yg)throw new ce(K.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ce(K.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/vg}_compareTo(e){return this.seconds===e.seconds?Le(this.nanoseconds,e.nanoseconds):Le(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:et._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(_a(e,et._jsonSchema))return new et(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-yg;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}et._jsonSchemaVersion="firestore/timestamp/1.0",et._jsonSchema={type:yt("string",et._jsonSchemaVersion),seconds:yt("number"),nanoseconds:yt("number")};class Ce{static fromTimestamp(e){return new Ce(e)}static min(){return new Ce(new et(0,0))}static max(){return new Ce(new et(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const Yo=-1;function eD(t,e){const n=t.toTimestamp().seconds,s=t.toTimestamp().nanoseconds+1,r=Ce.fromTimestamp(s===1e9?new et(n+1,0):new et(n,s));return new Xs(r,ye.empty(),e)}function tD(t){return new Xs(t.readTime,t.key,Yo)}class Xs{constructor(e,n,s){this.readTime=e,this.documentKey=n,this.largestBatchId=s}static min(){return new Xs(Ce.min(),ye.empty(),Yo)}static max(){return new Xs(Ce.max(),ye.empty(),Yo)}}function nD(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ye.comparator(t.documentKey,e.documentKey),n!==0?n:Le(t.largestBatchId,e.largestBatchId))}const sD="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class rD{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function ji(t){if(t.code!==K.FAILED_PRECONDITION||t.message!==sD)throw t;me("LocalStore","Unexpectedly lost primary lease")}class J{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Ae(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new J(((s,r)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(s,r)},this.catchCallback=i=>{this.wrapFailure(n,i).next(s,r)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof J?n:J.resolve(n)}catch(n){return J.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):J.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):J.reject(n)}static resolve(e){return new J(((n,s)=>{n(e)}))}static reject(e){return new J(((n,s)=>{s(e)}))}static waitFor(e){return new J(((n,s)=>{let r=0,i=0,o=!1;e.forEach((a=>{++r,a.next((()=>{++i,o&&i===r&&n()}),(l=>s(l)))})),o=!0,i===r&&n()}))}static or(e){let n=J.resolve(!1);for(const s of e)n=n.next((r=>r?J.resolve(r):s()));return n}static forEach(e,n){const s=[];return e.forEach(((r,i)=>{s.push(n.call(this,r,i))})),this.waitFor(s)}static mapArray(e,n){return new J(((s,r)=>{const i=e.length,o=new Array(i);let a=0;for(let l=0;l<i;l++){const u=l;n(e[u]).next((h=>{o[u]=h,++a,a===i&&s(o)}),(h=>r(h)))}}))}static doWhile(e,n){return new J(((s,r)=>{const i=()=>{e()===!0?n().next((()=>{i()}),r):s()};i()}))}}function iD(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function qi(t){return t.name==="IndexedDbTransactionError"}class Al{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>n.writeSequenceNumber(s))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Al.ce=-1;const $f=-1;function Rl(t){return t==null}function qc(t){return t===0&&1/t==-1/0}function oD(t){return typeof t=="number"&&Number.isInteger(t)&&!qc(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}const BE="";function aD(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=Eg(e)),e=cD(t.get(n),e);return Eg(e)}function cD(t,e){let n=e;const s=t.length;for(let r=0;r<s;r++){const i=t.charAt(r);switch(i){case"\0":n+="";break;case BE:n+="";break;default:n+=i}}return n}function Eg(t){return t+BE+""}function Tg(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function or(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function $E(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}class st{constructor(e,n){this.comparator=e,this.root=n||kt.EMPTY}insert(e,n){return new st(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,kt.BLACK,null,null))}remove(e){return new st(this.comparator,this.root.remove(e,this.comparator).copy(null,null,kt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return n.value;s<0?n=n.left:s>0&&(n=n.right)}return null}indexOf(e){let n=0,s=this.root;for(;!s.isEmpty();){const r=this.comparator(e,s.key);if(r===0)return n+s.left.size;r<0?s=s.left:(n+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,s)=>(e(n,s),!1)))}toString(){const e=[];return this.inorderTraversal(((n,s)=>(e.push(`${n}:${s}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ja(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ja(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ja(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ja(this.root,e,this.comparator,!0)}}class Ja{constructor(e,n,s,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?s(e.key,n):1,n&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class kt{constructor(e,n,s,r,i){this.key=e,this.value=n,this.color=s??kt.RED,this.left=r??kt.EMPTY,this.right=i??kt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,s,r,i){return new kt(e??this.key,n??this.value,s??this.color,r??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,s){let r=this;const i=s(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,n,s),null):i===0?r.copy(null,n,null,null,null):r.copy(null,null,null,null,r.right.insert(e,n,s)),r.fixUp()}removeMin(){if(this.left.isEmpty())return kt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let s,r=this;if(n(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),n(e,r.key)===0){if(r.right.isEmpty())return kt.EMPTY;s=r.right.min(),r=r.copy(s.key,s.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,kt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,kt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ae(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ae(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ae(27949);return e+(this.isRed()?0:1)}}kt.EMPTY=null,kt.RED=!0,kt.BLACK=!1;kt.EMPTY=new class{constructor(){this.size=0}get key(){throw Ae(57766)}get value(){throw Ae(16141)}get color(){throw Ae(16727)}get left(){throw Ae(29726)}get right(){throw Ae(36894)}copy(e,n,s,r,i){return this}insert(e,n,s){return new kt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class It{constructor(e){this.comparator=e,this.data=new st(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,s)=>(e(n),!1)))}forEachInRange(e,n){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const r=s.getNext();if(this.comparator(r.key,e[1])>=0)return;n(r.key)}}forEachWhile(e,n){let s;for(s=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new wg(this.data.getIterator())}getIteratorFrom(e){return new wg(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((s=>{n=n.add(s)})),n}isEqual(e){if(!(e instanceof It)||this.size!==e.size)return!1;const n=this.data.getIterator(),s=e.data.getIterator();for(;n.hasNext();){const r=n.getNext().key,i=s.getNext().key;if(this.comparator(r,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new It(this.comparator);return n.data=e,n}}class wg{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class on{constructor(e){this.fields=e,e.sort(St.comparator)}static empty(){return new on([])}unionWith(e){let n=new It(St.comparator);for(const s of this.fields)n=n.add(s);for(const s of e)n=n.add(s);return new on(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Ci(this.fields,e.fields,((n,s)=>n.isEqual(s)))}}class HE extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Pt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(r){try{return atob(r)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new HE("Invalid base64 string: "+i):i}})(e);return new Pt(n)}static fromUint8Array(e){const n=(function(r){let i="";for(let o=0;o<r.length;++o)i+=String.fromCharCode(r[o]);return i})(e);return new Pt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const s=new Uint8Array(n.length);for(let r=0;r<n.length;r++)s[r]=n.charCodeAt(r);return s})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Le(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Pt.EMPTY_BYTE_STRING=new Pt("");const lD=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Zs(t){if(qe(!!t,39018),typeof t=="string"){let e=0;const n=lD.exec(t);if(qe(!!n,46558,{timestamp:t}),n[1]){let r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}const s=new Date(t);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:dt(t.seconds),nanos:dt(t.nanos)}}function dt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function er(t){return typeof t=="string"?Pt.fromBase64String(t):Pt.fromUint8Array(t)}const jE="server_timestamp",qE="__type__",GE="__previous_value__",WE="__local_write_time__";function Hf(t){return(t?.mapValue?.fields||{})[qE]?.stringValue===jE}function Sl(t){const e=t.mapValue.fields[GE];return Hf(e)?Sl(e):e}function Jo(t){const e=Zs(t.mapValue.fields[WE].timestampValue);return new et(e.seconds,e.nanos)}class uD{constructor(e,n,s,r,i,o,a,l,u,h){this.databaseId=e,this.appId=n,this.persistenceKey=s,this.host=r,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=u,this.isUsingEmulator=h}}const Gc="(default)";class Pi{constructor(e,n){this.projectId=e,this.database=n||Gc}static empty(){return new Pi("","")}get isDefaultDatabase(){return this.database===Gc}isEqual(e){return e instanceof Pi&&e.projectId===this.projectId&&e.database===this.database}}const zE="__type__",hD="__max__",Xa={mapValue:{}},KE="__vector__",Wc="value";function tr(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Hf(t)?4:dD(t)?9007199254740991:fD(t)?10:11:Ae(28295,{value:t})}function jn(t,e){if(t===e)return!0;const n=tr(t);if(n!==tr(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Jo(t).isEqual(Jo(e));case 3:return(function(r,i){if(typeof r.timestampValue=="string"&&typeof i.timestampValue=="string"&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const o=Zs(r.timestampValue),a=Zs(i.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos})(t,e);case 5:return t.stringValue===e.stringValue;case 6:return(function(r,i){return er(r.bytesValue).isEqual(er(i.bytesValue))})(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return(function(r,i){return dt(r.geoPointValue.latitude)===dt(i.geoPointValue.latitude)&&dt(r.geoPointValue.longitude)===dt(i.geoPointValue.longitude)})(t,e);case 2:return(function(r,i){if("integerValue"in r&&"integerValue"in i)return dt(r.integerValue)===dt(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const o=dt(r.doubleValue),a=dt(i.doubleValue);return o===a?qc(o)===qc(a):isNaN(o)&&isNaN(a)}return!1})(t,e);case 9:return Ci(t.arrayValue.values||[],e.arrayValue.values||[],jn);case 10:case 11:return(function(r,i){const o=r.mapValue.fields||{},a=i.mapValue.fields||{};if(Tg(o)!==Tg(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!jn(o[l],a[l])))return!1;return!0})(t,e);default:return Ae(52216,{left:t})}}function Xo(t,e){return(t.values||[]).find((n=>jn(n,e)))!==void 0}function ki(t,e){if(t===e)return 0;const n=tr(t),s=tr(e);if(n!==s)return Le(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return Le(t.booleanValue,e.booleanValue);case 2:return(function(i,o){const a=dt(i.integerValue||i.doubleValue),l=dt(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1})(t,e);case 3:return bg(t.timestampValue,e.timestampValue);case 4:return bg(Jo(t),Jo(e));case 5:return kh(t.stringValue,e.stringValue);case 6:return(function(i,o){const a=er(i),l=er(o);return a.compareTo(l)})(t.bytesValue,e.bytesValue);case 7:return(function(i,o){const a=i.split("/"),l=o.split("/");for(let u=0;u<a.length&&u<l.length;u++){const h=Le(a[u],l[u]);if(h!==0)return h}return Le(a.length,l.length)})(t.referenceValue,e.referenceValue);case 8:return(function(i,o){const a=Le(dt(i.latitude),dt(o.latitude));return a!==0?a:Le(dt(i.longitude),dt(o.longitude))})(t.geoPointValue,e.geoPointValue);case 9:return Ig(t.arrayValue,e.arrayValue);case 10:return(function(i,o){const a=i.fields||{},l=o.fields||{},u=a[Wc]?.arrayValue,h=l[Wc]?.arrayValue,f=Le(u?.values?.length||0,h?.values?.length||0);return f!==0?f:Ig(u,h)})(t.mapValue,e.mapValue);case 11:return(function(i,o){if(i===Xa.mapValue&&o===Xa.mapValue)return 0;if(i===Xa.mapValue)return 1;if(o===Xa.mapValue)return-1;const a=i.fields||{},l=Object.keys(a),u=o.fields||{},h=Object.keys(u);l.sort(),h.sort();for(let f=0;f<l.length&&f<h.length;++f){const p=kh(l[f],h[f]);if(p!==0)return p;const m=ki(a[l[f]],u[h[f]]);if(m!==0)return m}return Le(l.length,h.length)})(t.mapValue,e.mapValue);default:throw Ae(23264,{he:n})}}function bg(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Le(t,e);const n=Zs(t),s=Zs(e),r=Le(n.seconds,s.seconds);return r!==0?r:Le(n.nanos,s.nanos)}function Ig(t,e){const n=t.values||[],s=e.values||[];for(let r=0;r<n.length&&r<s.length;++r){const i=ki(n[r],s[r]);if(i)return i}return Le(n.length,s.length)}function Ni(t){return Nh(t)}function Nh(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(function(n){const s=Zs(n);return`time(${s.seconds},${s.nanos})`})(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?(function(n){return er(n).toBase64()})(t.bytesValue):"referenceValue"in t?(function(n){return ye.fromName(n).toString()})(t.referenceValue):"geoPointValue"in t?(function(n){return`geo(${n.latitude},${n.longitude})`})(t.geoPointValue):"arrayValue"in t?(function(n){let s="[",r=!0;for(const i of n.values||[])r?r=!1:s+=",",s+=Nh(i);return s+"]"})(t.arrayValue):"mapValue"in t?(function(n){const s=Object.keys(n.fields||{}).sort();let r="{",i=!0;for(const o of s)i?i=!1:r+=",",r+=`${o}:${Nh(n.fields[o])}`;return r+"}"})(t.mapValue):Ae(61005,{value:t})}function dc(t){switch(tr(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Sl(t);return e?16+dc(e):16;case 5:return 2*t.stringValue.length;case 6:return er(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return(function(s){return(s.values||[]).reduce(((r,i)=>r+dc(i)),0)})(t.arrayValue);case 10:case 11:return(function(s){let r=0;return or(s.fields,((i,o)=>{r+=i.length+dc(o)})),r})(t.mapValue);default:throw Ae(13486,{value:t})}}function Ag(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Dh(t){return!!t&&"integerValue"in t}function jf(t){return!!t&&"arrayValue"in t}function Rg(t){return!!t&&"nullValue"in t}function Sg(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function pc(t){return!!t&&"mapValue"in t}function fD(t){return(t?.mapValue?.fields||{})[zE]?.stringValue===KE}function Oo(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return or(t.mapValue.fields,((n,s)=>e.mapValue.fields[n]=Oo(s))),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Oo(t.arrayValue.values[n]);return e}return{...t}}function dD(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===hD}class Xt{constructor(e){this.value=e}static empty(){return new Xt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let s=0;s<e.length-1;++s)if(n=(n.mapValue.fields||{})[e.get(s)],!pc(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Oo(n)}setAll(e){let n=St.emptyPath(),s={},r=[];e.forEach(((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,s,r),s={},r=[],n=a.popLast()}o?s[a.lastSegment()]=Oo(o):r.push(a.lastSegment())}));const i=this.getFieldsMap(n);this.applyChanges(i,s,r)}delete(e){const n=this.field(e.popLast());pc(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return jn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let s=0;s<e.length;++s){let r=n.mapValue.fields[e.get(s)];pc(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},n.mapValue.fields[e.get(s)]=r),n=r}return n.mapValue.fields}applyChanges(e,n,s){or(n,((r,i)=>e[r]=i));for(const r of s)delete e[r]}clone(){return new Xt(Oo(this.value))}}function QE(t){const e=[];return or(t.fields,((n,s)=>{const r=new St([n]);if(pc(s)){const i=QE(s.mapValue).fields;if(i.length===0)e.push(r);else for(const o of i)e.push(r.child(o))}else e.push(r)})),new on(e)}class Bt{constructor(e,n,s,r,i,o,a){this.key=e,this.documentType=n,this.version=s,this.readTime=r,this.createTime=i,this.data=o,this.documentState=a}static newInvalidDocument(e){return new Bt(e,0,Ce.min(),Ce.min(),Ce.min(),Xt.empty(),0)}static newFoundDocument(e,n,s,r){return new Bt(e,1,n,Ce.min(),s,r,0)}static newNoDocument(e,n){return new Bt(e,2,n,Ce.min(),Ce.min(),Xt.empty(),0)}static newUnknownDocument(e,n){return new Bt(e,3,n,Ce.min(),Ce.min(),Xt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Ce.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Xt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Xt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ce.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Bt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Bt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class zc{constructor(e,n){this.position=e,this.inclusive=n}}function Cg(t,e,n){let s=0;for(let r=0;r<t.position.length;r++){const i=e[r],o=t.position[r];if(i.field.isKeyField()?s=ye.comparator(ye.fromName(o.referenceValue),n.key):s=ki(o,n.data.field(i.field)),i.dir==="desc"&&(s*=-1),s!==0)break}return s}function Pg(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!jn(t.position[n],e.position[n]))return!1;return!0}class Zo{constructor(e,n="asc"){this.field=e,this.dir=n}}function pD(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}class YE{}class _t extends YE{constructor(e,n,s){super(),this.field=e,this.op=n,this.value=s}static create(e,n,s){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,s):new gD(e,n,s):n==="array-contains"?new vD(e,s):n==="in"?new ED(e,s):n==="not-in"?new TD(e,s):n==="array-contains-any"?new wD(e,s):new _t(e,n,s)}static createKeyFieldInFilter(e,n,s){return n==="in"?new _D(e,s):new yD(e,s)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(ki(n,this.value)):n!==null&&tr(this.value)===tr(n)&&this.matchesComparison(ki(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ae(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Cn extends YE{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Cn(e,n)}matches(e){return JE(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function JE(t){return t.op==="and"}function XE(t){return mD(t)&&JE(t)}function mD(t){for(const e of t.filters)if(e instanceof Cn)return!1;return!0}function Oh(t){if(t instanceof _t)return t.field.canonicalString()+t.op.toString()+Ni(t.value);if(XE(t))return t.filters.map((e=>Oh(e))).join(",");{const e=t.filters.map((n=>Oh(n))).join(",");return`${t.op}(${e})`}}function ZE(t,e){return t instanceof _t?(function(s,r){return r instanceof _t&&s.op===r.op&&s.field.isEqual(r.field)&&jn(s.value,r.value)})(t,e):t instanceof Cn?(function(s,r){return r instanceof Cn&&s.op===r.op&&s.filters.length===r.filters.length?s.filters.reduce(((i,o,a)=>i&&ZE(o,r.filters[a])),!0):!1})(t,e):void Ae(19439)}function eT(t){return t instanceof _t?(function(n){return`${n.field.canonicalString()} ${n.op} ${Ni(n.value)}`})(t):t instanceof Cn?(function(n){return n.op.toString()+" {"+n.getFilters().map(eT).join(" ,")+"}"})(t):"Filter"}class gD extends _t{constructor(e,n,s){super(e,n,s),this.key=ye.fromName(s.referenceValue)}matches(e){const n=ye.comparator(e.key,this.key);return this.matchesComparison(n)}}class _D extends _t{constructor(e,n){super(e,"in",n),this.keys=tT("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class yD extends _t{constructor(e,n){super(e,"not-in",n),this.keys=tT("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function tT(t,e){return(e.arrayValue?.values||[]).map((n=>ye.fromName(n.referenceValue)))}class vD extends _t{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return jf(n)&&Xo(n.arrayValue,this.value)}}class ED extends _t{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Xo(this.value.arrayValue,n)}}class TD extends _t{constructor(e,n){super(e,"not-in",n)}matches(e){if(Xo(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Xo(this.value.arrayValue,n)}}class wD extends _t{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!jf(n)||!n.arrayValue.values)&&n.arrayValue.values.some((s=>Xo(this.value.arrayValue,s)))}}class bD{constructor(e,n=null,s=[],r=[],i=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=s,this.filters=r,this.limit=i,this.startAt=o,this.endAt=a,this.Te=null}}function kg(t,e=null,n=[],s=[],r=null,i=null,o=null){return new bD(t,e,n,s,r,i,o)}function qf(t){const e=Pe(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((s=>Oh(s))).join(","),n+="|ob:",n+=e.orderBy.map((s=>(function(i){return i.field.canonicalString()+i.dir})(s))).join(","),Rl(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((s=>Ni(s))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((s=>Ni(s))).join(",")),e.Te=n}return e.Te}function Gf(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!pD(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!ZE(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Pg(t.startAt,e.startAt)&&Pg(t.endAt,e.endAt)}function Vh(t){return ye.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}class Gi{constructor(e,n=null,s=[],r=[],i=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=s,this.filters=r,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=l,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function ID(t,e,n,s,r,i,o,a){return new Gi(t,e,n,s,r,i,o,a)}function Wf(t){return new Gi(t)}function Ng(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function nT(t){return t.collectionGroup!==null}function Vo(t){const e=Pe(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const i of e.explicitOrderBy)e.Ie.push(i),n.add(i.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new It(St.comparator);return o.filters.forEach((l=>{l.getFlattenedFilters().forEach((u=>{u.isInequality()&&(a=a.add(u.field))}))})),a})(e).forEach((i=>{n.has(i.canonicalString())||i.isKeyField()||e.Ie.push(new Zo(i,s))})),n.has(St.keyField().canonicalString())||e.Ie.push(new Zo(St.keyField(),s))}return e.Ie}function Bn(t){const e=Pe(t);return e.Ee||(e.Ee=AD(e,Vo(t))),e.Ee}function AD(t,e){if(t.limitType==="F")return kg(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map((r=>{const i=r.dir==="desc"?"asc":"desc";return new Zo(r.field,i)}));const n=t.endAt?new zc(t.endAt.position,t.endAt.inclusive):null,s=t.startAt?new zc(t.startAt.position,t.startAt.inclusive):null;return kg(t.path,t.collectionGroup,e,t.filters,t.limit,n,s)}}function Lh(t,e){const n=t.filters.concat([e]);return new Gi(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Mh(t,e,n){return new Gi(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Cl(t,e){return Gf(Bn(t),Bn(e))&&t.limitType===e.limitType}function sT(t){return`${qf(Bn(t))}|lt:${t.limitType}`}function ti(t){return`Query(target=${(function(n){let s=n.path.canonicalString();return n.collectionGroup!==null&&(s+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(s+=`, filters: [${n.filters.map((r=>eT(r))).join(", ")}]`),Rl(n.limit)||(s+=", limit: "+n.limit),n.orderBy.length>0&&(s+=`, orderBy: [${n.orderBy.map((r=>(function(o){return`${o.field.canonicalString()} (${o.dir})`})(r))).join(", ")}]`),n.startAt&&(s+=", startAt: ",s+=n.startAt.inclusive?"b:":"a:",s+=n.startAt.position.map((r=>Ni(r))).join(",")),n.endAt&&(s+=", endAt: ",s+=n.endAt.inclusive?"a:":"b:",s+=n.endAt.position.map((r=>Ni(r))).join(",")),`Target(${s})`})(Bn(t))}; limitType=${t.limitType})`}function Pl(t,e){return e.isFoundDocument()&&(function(s,r){const i=r.key.path;return s.collectionGroup!==null?r.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(i):ye.isDocumentKey(s.path)?s.path.isEqual(i):s.path.isImmediateParentOf(i)})(t,e)&&(function(s,r){for(const i of Vo(s))if(!i.field.isKeyField()&&r.data.field(i.field)===null)return!1;return!0})(t,e)&&(function(s,r){for(const i of s.filters)if(!i.matches(r))return!1;return!0})(t,e)&&(function(s,r){return!(s.startAt&&!(function(o,a,l){const u=Cg(o,a,l);return o.inclusive?u<=0:u<0})(s.startAt,Vo(s),r)||s.endAt&&!(function(o,a,l){const u=Cg(o,a,l);return o.inclusive?u>=0:u>0})(s.endAt,Vo(s),r))})(t,e)}function RD(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function rT(t){return(e,n)=>{let s=!1;for(const r of Vo(t)){const i=SD(r,e,n);if(i!==0)return i;s=s||r.field.isKeyField()}return 0}}function SD(t,e,n){const s=t.field.isKeyField()?ye.comparator(e.key,n.key):(function(i,o,a){const l=o.data.field(i),u=a.data.field(i);return l!==null&&u!==null?ki(l,u):Ae(42886)})(t.field,e,n);switch(t.dir){case"asc":return s;case"desc":return-1*s;default:return Ae(19790,{direction:t.dir})}}class qr{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s!==void 0){for(const[r,i]of s)if(this.equalsFn(r,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const s=this.mapKeyFn(e),r=this.inner[s];if(r===void 0)return this.inner[s]=[[e,n]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,n]);r.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return!1;for(let r=0;r<s.length;r++)if(this.equalsFn(s[r][0],e))return s.length===1?delete this.inner[n]:s.splice(r,1),this.innerSize--,!0;return!1}forEach(e){or(this.inner,((n,s)=>{for(const[r,i]of s)e(r,i)}))}isEmpty(){return $E(this.inner)}size(){return this.innerSize}}const CD=new st(ye.comparator);function ms(){return CD}const iT=new st(ye.comparator);function To(...t){let e=iT;for(const n of t)e=e.insert(n.key,n);return e}function oT(t){let e=iT;return t.forEach(((n,s)=>e=e.insert(n,s.overlayedDocument))),e}function Rr(){return Lo()}function aT(){return Lo()}function Lo(){return new qr((t=>t.toString()),((t,e)=>t.isEqual(e)))}const PD=new st(ye.comparator),kD=new It(ye.comparator);function Me(...t){let e=kD;for(const n of t)e=e.add(n);return e}const ND=new It(Le);function DD(){return ND}function zf(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:qc(e)?"-0":e}}function cT(t){return{integerValue:""+t}}function OD(t,e){return oD(e)?cT(e):zf(t,e)}class kl{constructor(){this._=void 0}}function VD(t,e,n){return t instanceof ea?(function(r,i){const o={fields:{[qE]:{stringValue:jE},[WE]:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&Hf(i)&&(i=Sl(i)),i&&(o.fields[GE]=i),{mapValue:o}})(n,e):t instanceof ta?uT(t,e):t instanceof na?hT(t,e):(function(r,i){const o=lT(r,i),a=Dg(o)+Dg(r.Ae);return Dh(o)&&Dh(r.Ae)?cT(a):zf(r.serializer,a)})(t,e)}function LD(t,e,n){return t instanceof ta?uT(t,e):t instanceof na?hT(t,e):n}function lT(t,e){return t instanceof Kc?(function(s){return Dh(s)||(function(i){return!!i&&"doubleValue"in i})(s)})(e)?e:{integerValue:0}:null}class ea extends kl{}class ta extends kl{constructor(e){super(),this.elements=e}}function uT(t,e){const n=fT(e);for(const s of t.elements)n.some((r=>jn(r,s)))||n.push(s);return{arrayValue:{values:n}}}class na extends kl{constructor(e){super(),this.elements=e}}function hT(t,e){let n=fT(e);for(const s of t.elements)n=n.filter((r=>!jn(r,s)));return{arrayValue:{values:n}}}class Kc extends kl{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function Dg(t){return dt(t.integerValue||t.doubleValue)}function fT(t){return jf(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}class MD{constructor(e,n){this.field=e,this.transform=n}}function xD(t,e){return t.field.isEqual(e.field)&&(function(s,r){return s instanceof ta&&r instanceof ta||s instanceof na&&r instanceof na?Ci(s.elements,r.elements,jn):s instanceof Kc&&r instanceof Kc?jn(s.Ae,r.Ae):s instanceof ea&&r instanceof ea})(t.transform,e.transform)}class FD{constructor(e,n){this.version=e,this.transformResults=n}}class en{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new en}static exists(e){return new en(void 0,e)}static updateTime(e){return new en(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function mc(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Nl{}function dT(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Dl(t.key,en.none()):new ya(t.key,t.data,en.none());{const n=t.data,s=Xt.empty();let r=new It(St.comparator);for(let i of e.fields)if(!r.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?s.delete(i):s.set(i,o),r=r.add(i)}return new ar(t.key,s,new on(r.toArray()),en.none())}}function UD(t,e,n){t instanceof ya?(function(r,i,o){const a=r.value.clone(),l=Vg(r.fieldTransforms,i,o.transformResults);a.setAll(l),i.convertToFoundDocument(o.version,a).setHasCommittedMutations()})(t,e,n):t instanceof ar?(function(r,i,o){if(!mc(r.precondition,i))return void i.convertToUnknownDocument(o.version);const a=Vg(r.fieldTransforms,i,o.transformResults),l=i.data;l.setAll(pT(r)),l.setAll(a),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()})(t,e,n):(function(r,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()})(0,e,n)}function Mo(t,e,n,s){return t instanceof ya?(function(i,o,a,l){if(!mc(i.precondition,o))return a;const u=i.value.clone(),h=Lg(i.fieldTransforms,l,o);return u.setAll(h),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null})(t,e,n,s):t instanceof ar?(function(i,o,a,l){if(!mc(i.precondition,o))return a;const u=Lg(i.fieldTransforms,l,o),h=o.data;return h.setAll(pT(i)),h.setAll(u),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),a===null?null:a.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map((f=>f.field)))})(t,e,n,s):(function(i,o,a){return mc(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a})(t,e,n)}function BD(t,e){let n=null;for(const s of t.fieldTransforms){const r=e.data.field(s.field),i=lT(s.transform,r||null);i!=null&&(n===null&&(n=Xt.empty()),n.set(s.field,i))}return n||null}function Og(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!(function(s,r){return s===void 0&&r===void 0||!(!s||!r)&&Ci(s,r,((i,o)=>xD(i,o)))})(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class ya extends Nl{constructor(e,n,s,r=[]){super(),this.key=e,this.value=n,this.precondition=s,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class ar extends Nl{constructor(e,n,s,r,i=[]){super(),this.key=e,this.data=n,this.fieldMask=s,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function pT(t){const e=new Map;return t.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const s=t.data.field(n);e.set(n,s)}})),e}function Vg(t,e,n){const s=new Map;qe(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let r=0;r<n.length;r++){const i=t[r],o=i.transform,a=e.data.field(i.field);s.set(i.field,LD(o,a,n[r]))}return s}function Lg(t,e,n){const s=new Map;for(const r of t){const i=r.transform,o=n.data.field(r.field);s.set(r.field,VD(i,o,e))}return s}class Dl extends Nl{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class $D extends Nl{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class HD{constructor(e,n,s,r){this.batchId=e,this.localWriteTime=n,this.baseMutations=s,this.mutations=r}applyToRemoteDocument(e,n){const s=n.mutationResults;for(let r=0;r<this.mutations.length;r++){const i=this.mutations[r];i.key.isEqual(e.key)&&UD(i,e,s[r])}}applyToLocalView(e,n){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(n=Mo(s,e,n,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(n=Mo(s,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const s=aT();return this.mutations.forEach((r=>{const i=e.get(r.key),o=i.overlayedDocument;let a=this.applyToLocalView(o,i.mutatedFields);a=n.has(r.key)?null:a;const l=dT(o,a);l!==null&&s.set(r.key,l),o.isValidDocument()||o.convertToNoDocument(Ce.min())})),s}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),Me())}isEqual(e){return this.batchId===e.batchId&&Ci(this.mutations,e.mutations,((n,s)=>Og(n,s)))&&Ci(this.baseMutations,e.baseMutations,((n,s)=>Og(n,s)))}}class Kf{constructor(e,n,s,r){this.batch=e,this.commitVersion=n,this.mutationResults=s,this.docVersions=r}static from(e,n,s){qe(e.mutations.length===s.length,58842,{me:e.mutations.length,fe:s.length});let r=(function(){return PD})();const i=e.mutations;for(let o=0;o<i.length;o++)r=r.insert(i[o].key,s[o].version);return new Kf(e,n,s,r)}}class jD{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class qD{constructor(e,n){this.count=e,this.unchangedNames=n}}var pt,xe;function GD(t){switch(t){case K.OK:return Ae(64938);case K.CANCELLED:case K.UNKNOWN:case K.DEADLINE_EXCEEDED:case K.RESOURCE_EXHAUSTED:case K.INTERNAL:case K.UNAVAILABLE:case K.UNAUTHENTICATED:return!1;case K.INVALID_ARGUMENT:case K.NOT_FOUND:case K.ALREADY_EXISTS:case K.PERMISSION_DENIED:case K.FAILED_PRECONDITION:case K.ABORTED:case K.OUT_OF_RANGE:case K.UNIMPLEMENTED:case K.DATA_LOSS:return!0;default:return Ae(15467,{code:t})}}function mT(t){if(t===void 0)return ps("GRPC error has no .code"),K.UNKNOWN;switch(t){case pt.OK:return K.OK;case pt.CANCELLED:return K.CANCELLED;case pt.UNKNOWN:return K.UNKNOWN;case pt.DEADLINE_EXCEEDED:return K.DEADLINE_EXCEEDED;case pt.RESOURCE_EXHAUSTED:return K.RESOURCE_EXHAUSTED;case pt.INTERNAL:return K.INTERNAL;case pt.UNAVAILABLE:return K.UNAVAILABLE;case pt.UNAUTHENTICATED:return K.UNAUTHENTICATED;case pt.INVALID_ARGUMENT:return K.INVALID_ARGUMENT;case pt.NOT_FOUND:return K.NOT_FOUND;case pt.ALREADY_EXISTS:return K.ALREADY_EXISTS;case pt.PERMISSION_DENIED:return K.PERMISSION_DENIED;case pt.FAILED_PRECONDITION:return K.FAILED_PRECONDITION;case pt.ABORTED:return K.ABORTED;case pt.OUT_OF_RANGE:return K.OUT_OF_RANGE;case pt.UNIMPLEMENTED:return K.UNIMPLEMENTED;case pt.DATA_LOSS:return K.DATA_LOSS;default:return Ae(39323,{code:t})}}(xe=pt||(pt={}))[xe.OK=0]="OK",xe[xe.CANCELLED=1]="CANCELLED",xe[xe.UNKNOWN=2]="UNKNOWN",xe[xe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",xe[xe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",xe[xe.NOT_FOUND=5]="NOT_FOUND",xe[xe.ALREADY_EXISTS=6]="ALREADY_EXISTS",xe[xe.PERMISSION_DENIED=7]="PERMISSION_DENIED",xe[xe.UNAUTHENTICATED=16]="UNAUTHENTICATED",xe[xe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",xe[xe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",xe[xe.ABORTED=10]="ABORTED",xe[xe.OUT_OF_RANGE=11]="OUT_OF_RANGE",xe[xe.UNIMPLEMENTED=12]="UNIMPLEMENTED",xe[xe.INTERNAL=13]="INTERNAL",xe[xe.UNAVAILABLE=14]="UNAVAILABLE",xe[xe.DATA_LOSS=15]="DATA_LOSS";function WD(){return new TextEncoder}const zD=new Ks([4294967295,4294967295],0);function Mg(t){const e=WD().encode(t),n=new CE;return n.update(e),new Uint8Array(n.digest())}function xg(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),s=e.getUint32(4,!0),r=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new Ks([n,s],0),new Ks([r,i],0)]}class Qf{constructor(e,n,s){if(this.bitmap=e,this.padding=n,this.hashCount=s,n<0||n>=8)throw new wo(`Invalid padding: ${n}`);if(s<0)throw new wo(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new wo(`Invalid hash count: ${s}`);if(e.length===0&&n!==0)throw new wo(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Ks.fromNumber(this.ge)}ye(e,n,s){let r=e.add(n.multiply(Ks.fromNumber(s)));return r.compare(zD)===1&&(r=new Ks([r.getBits(0),r.getBits(1)],0)),r.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=Mg(e),[s,r]=xg(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(s,r,i);if(!this.we(o))return!1}return!0}static create(e,n,s){const r=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new Qf(i,r,n);return s.forEach((a=>o.insert(a))),o}insert(e){if(this.ge===0)return;const n=Mg(e),[s,r]=xg(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(s,r,i);this.Se(o)}}Se(e){const n=Math.floor(e/8),s=e%8;this.bitmap[n]|=1<<s}}class wo extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Ol{constructor(e,n,s,r,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=s,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,s){const r=new Map;return r.set(e,va.createSynthesizedTargetChangeForCurrentChange(e,n,s)),new Ol(Ce.min(),r,new st(Le),ms(),Me())}}class va{constructor(e,n,s,r,i){this.resumeToken=e,this.current=n,this.addedDocuments=s,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,s){return new va(s,n,Me(),Me(),Me())}}class gc{constructor(e,n,s,r){this.be=e,this.removedTargetIds=n,this.key=s,this.De=r}}class gT{constructor(e,n){this.targetId=e,this.Ce=n}}class _T{constructor(e,n,s=Pt.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=n,this.resumeToken=s,this.cause=r}}class Fg{constructor(){this.ve=0,this.Fe=Ug(),this.Me=Pt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Me(),n=Me(),s=Me();return this.Fe.forEach(((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:n=n.add(r);break;case 1:s=s.add(r);break;default:Ae(38017,{changeType:i})}})),new va(this.Me,this.xe,e,n,s)}qe(){this.Oe=!1,this.Fe=Ug()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,qe(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class KD{constructor(e){this.Ge=e,this.ze=new Map,this.je=ms(),this.Je=Za(),this.He=Za(),this.Ye=new st(Le)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const s=this.nt(n);switch(e.state){case 0:this.rt(n)&&s.Le(e.resumeToken);break;case 1:s.Ke(),s.Ne||s.qe(),s.Le(e.resumeToken);break;case 2:s.Ke(),s.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(s.We(),s.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),s.Le(e.resumeToken));break;default:Ae(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((s,r)=>{this.rt(r)&&n(r)}))}st(e){const n=e.targetId,s=e.Ce.count,r=this.ot(n);if(r){const i=r.target;if(Vh(i))if(s===0){const o=new ye(i.path);this.et(n,o,Bt.newNoDocument(o,Ce.min()))}else qe(s===1,20013,{expectedCount:s});else{const o=this._t(n);if(o!==s){const a=this.ut(e),l=a?this.ct(a,e,o):1;if(l!==0){this.it(n);const u=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,u)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:s="",padding:r=0},hashCount:i=0}=n;let o,a;try{o=er(s).toUint8Array()}catch(l){if(l instanceof HE)return Ur("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new Qf(o,r,i)}catch(l){return Ur(l instanceof wo?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.ge===0?null:a}ct(e,n,s){return n.Ce.count===s-this.Pt(e,n.targetId)?0:2}Pt(e,n){const s=this.Ge.getRemoteKeysForTarget(n);let r=0;return s.forEach((i=>{const o=this.Ge.ht(),a=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(a)||(this.et(n,i,null),r++)})),r}Tt(e){const n=new Map;this.ze.forEach(((i,o)=>{const a=this.ot(o);if(a){if(i.current&&Vh(a.target)){const l=new ye(a.target.path);this.It(l).has(o)||this.Et(o,l)||this.et(o,l,Bt.newNoDocument(l,e))}i.Be&&(n.set(o,i.ke()),i.qe())}}));let s=Me();this.He.forEach(((i,o)=>{let a=!0;o.forEachWhile((l=>{const u=this.ot(l);return!u||u.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)})),a&&(s=s.add(i))})),this.je.forEach(((i,o)=>o.setReadTime(e)));const r=new Ol(e,n,this.Ye,this.je,s);return this.je=ms(),this.Je=Za(),this.He=Za(),this.Ye=new st(Le),r}Xe(e,n){if(!this.rt(e))return;const s=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,s),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,s){if(!this.rt(e))return;const r=this.nt(e);this.Et(e,n)?r.Qe(n,1):r.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),s&&(this.je=this.je.insert(n,s))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new Fg,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new It(Le),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new It(Le),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||me("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Fg),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function Za(){return new st(ye.comparator)}function Ug(){return new st(ye.comparator)}const QD={asc:"ASCENDING",desc:"DESCENDING"},YD={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},JD={and:"AND",or:"OR"};class XD{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function xh(t,e){return t.useProto3Json||Rl(e)?e:{value:e}}function Qc(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function yT(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function ZD(t,e){return Qc(t,e.toTimestamp())}function $n(t){return qe(!!t,49232),Ce.fromTimestamp((function(n){const s=Zs(n);return new et(s.seconds,s.nanos)})(t))}function Yf(t,e){return Fh(t,e).canonicalString()}function Fh(t,e){const n=(function(r){return new Ze(["projects",r.projectId,"databases",r.database])})(t).child("documents");return e===void 0?n:n.child(e)}function vT(t){const e=Ze.fromString(t);return qe(IT(e),10190,{key:e.toString()}),e}function Uh(t,e){return Yf(t.databaseId,e.path)}function Lu(t,e){const n=vT(e);if(n.get(1)!==t.databaseId.projectId)throw new ce(K.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new ce(K.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ye(TT(n))}function ET(t,e){return Yf(t.databaseId,e)}function eO(t){const e=vT(t);return e.length===4?Ze.emptyPath():TT(e)}function Bh(t){return new Ze(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function TT(t){return qe(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function Bg(t,e,n){return{name:Uh(t,e),fields:n.value.mapValue.fields}}function tO(t,e){let n;if("targetChange"in e){e.targetChange;const s=(function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:Ae(39313,{state:u})})(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],i=(function(u,h){return u.useProto3Json?(qe(h===void 0||typeof h=="string",58123),Pt.fromBase64String(h||"")):(qe(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),Pt.fromUint8Array(h||new Uint8Array))})(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&(function(u){const h=u.code===void 0?K.UNKNOWN:mT(u.code);return new ce(h,u.message||"")})(o);n=new _T(s,r,i,a||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const r=Lu(t,s.document.name),i=$n(s.document.updateTime),o=s.document.createTime?$n(s.document.createTime):Ce.min(),a=new Xt({mapValue:{fields:s.document.fields}}),l=Bt.newFoundDocument(r,i,o,a),u=s.targetIds||[],h=s.removedTargetIds||[];n=new gc(u,h,l.key,l)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const r=Lu(t,s.document),i=s.readTime?$n(s.readTime):Ce.min(),o=Bt.newNoDocument(r,i),a=s.removedTargetIds||[];n=new gc([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const r=Lu(t,s.document),i=s.removedTargetIds||[];n=new gc([],i,r,null)}else{if(!("filter"in e))return Ae(11601,{Rt:e});{e.filter;const s=e.filter;s.targetId;const{count:r=0,unchangedNames:i}=s,o=new qD(r,i),a=s.targetId;n=new gT(a,o)}}return n}function nO(t,e){let n;if(e instanceof ya)n={update:Bg(t,e.key,e.value)};else if(e instanceof Dl)n={delete:Uh(t,e.key)};else if(e instanceof ar)n={update:Bg(t,e.key,e.data),updateMask:hO(e.fieldMask)};else{if(!(e instanceof $D))return Ae(16599,{Vt:e.type});n={verify:Uh(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((s=>(function(i,o){const a=o.transform;if(a instanceof ea)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof ta)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof na)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Kc)return{fieldPath:o.field.canonicalString(),increment:a.Ae};throw Ae(20930,{transform:o.transform})})(0,s)))),e.precondition.isNone||(n.currentDocument=(function(r,i){return i.updateTime!==void 0?{updateTime:ZD(r,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:Ae(27497)})(t,e.precondition)),n}function sO(t,e){return t&&t.length>0?(qe(e!==void 0,14353),t.map((n=>(function(r,i){let o=r.updateTime?$n(r.updateTime):$n(i);return o.isEqual(Ce.min())&&(o=$n(i)),new FD(o,r.transformResults||[])})(n,e)))):[]}function rO(t,e){return{documents:[ET(t,e.path)]}}function iO(t,e){const n={structuredQuery:{}},s=e.path;let r;e.collectionGroup!==null?(r=s,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=s.popLast(),n.structuredQuery.from=[{collectionId:s.lastSegment()}]),n.parent=ET(t,r);const i=(function(u){if(u.length!==0)return bT(Cn.create(u,"and"))})(e.filters);i&&(n.structuredQuery.where=i);const o=(function(u){if(u.length!==0)return u.map((h=>(function(p){return{field:ni(p.field),direction:cO(p.dir)}})(h)))})(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=xh(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=(function(u){return{before:u.inclusive,values:u.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(u){return{before:!u.inclusive,values:u.position}})(e.endAt)),{ft:n,parent:r}}function oO(t){let e=eO(t.parent);const n=t.structuredQuery,s=n.from?n.from.length:0;let r=null;if(s>0){qe(s===1,65062);const h=n.from[0];h.allDescendants?r=h.collectionId:e=e.child(h.collectionId)}let i=[];n.where&&(i=(function(f){const p=wT(f);return p instanceof Cn&&XE(p)?p.getFilters():[p]})(n.where));let o=[];n.orderBy&&(o=(function(f){return f.map((p=>(function(b){return new Zo(si(b.field),(function(D){switch(D){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(b.direction))})(p)))})(n.orderBy));let a=null;n.limit&&(a=(function(f){let p;return p=typeof f=="object"?f.value:f,Rl(p)?null:p})(n.limit));let l=null;n.startAt&&(l=(function(f){const p=!!f.before,m=f.values||[];return new zc(m,p)})(n.startAt));let u=null;return n.endAt&&(u=(function(f){const p=!f.before,m=f.values||[];return new zc(m,p)})(n.endAt)),ID(e,r,o,i,a,"F",l,u)}function aO(t,e){const n=(function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ae(28987,{purpose:r})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function wT(t){return t.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const s=si(n.unaryFilter.field);return _t.create(s,"==",{doubleValue:NaN});case"IS_NULL":const r=si(n.unaryFilter.field);return _t.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=si(n.unaryFilter.field);return _t.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=si(n.unaryFilter.field);return _t.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ae(61313);default:return Ae(60726)}})(t):t.fieldFilter!==void 0?(function(n){return _t.create(si(n.fieldFilter.field),(function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ae(58110);default:return Ae(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(t):t.compositeFilter!==void 0?(function(n){return Cn.create(n.compositeFilter.filters.map((s=>wT(s))),(function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return Ae(1026)}})(n.compositeFilter.op))})(t):Ae(30097,{filter:t})}function cO(t){return QD[t]}function lO(t){return YD[t]}function uO(t){return JD[t]}function ni(t){return{fieldPath:t.canonicalString()}}function si(t){return St.fromServerFormat(t.fieldPath)}function bT(t){return t instanceof _t?(function(n){if(n.op==="=="){if(Sg(n.value))return{unaryFilter:{field:ni(n.field),op:"IS_NAN"}};if(Rg(n.value))return{unaryFilter:{field:ni(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Sg(n.value))return{unaryFilter:{field:ni(n.field),op:"IS_NOT_NAN"}};if(Rg(n.value))return{unaryFilter:{field:ni(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ni(n.field),op:lO(n.op),value:n.value}}})(t):t instanceof Cn?(function(n){const s=n.getFilters().map((r=>bT(r)));return s.length===1?s[0]:{compositeFilter:{op:uO(n.op),filters:s}}})(t):Ae(54877,{filter:t})}function hO(t){const e=[];return t.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function IT(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}class $s{constructor(e,n,s,r,i=Ce.min(),o=Ce.min(),a=Pt.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=s,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new $s(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new $s(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new $s(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new $s(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class fO{constructor(e){this.yt=e}}function dO(t){const e=oO({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Mh(e,e.limit,"L"):e}class pO{constructor(){this.Cn=new mO}addToCollectionParentIndex(e,n){return this.Cn.add(n),J.resolve()}getCollectionParents(e,n){return J.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return J.resolve()}deleteFieldIndex(e,n){return J.resolve()}deleteAllFieldIndexes(e){return J.resolve()}createTargetIndexes(e,n){return J.resolve()}getDocumentsMatchingTarget(e,n){return J.resolve(null)}getIndexType(e,n){return J.resolve(0)}getFieldIndexes(e,n){return J.resolve([])}getNextCollectionGroupToUpdate(e){return J.resolve(null)}getMinOffset(e,n){return J.resolve(Xs.min())}getMinOffsetFromCollectionGroup(e,n){return J.resolve(Xs.min())}updateCollectionGroup(e,n,s){return J.resolve()}updateIndexEntries(e,n){return J.resolve()}}class mO{constructor(){this.index={}}add(e){const n=e.lastSegment(),s=e.popLast(),r=this.index[n]||new It(Ze.comparator),i=!r.has(s);return this.index[n]=r.add(s),i}has(e){const n=e.lastSegment(),s=e.popLast(),r=this.index[n];return r&&r.has(s)}getEntries(e){return(this.index[e]||new It(Ze.comparator)).toArray()}}const $g={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},AT=41943040;class Yt{static withCacheSize(e){return new Yt(e,Yt.DEFAULT_COLLECTION_PERCENTILE,Yt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=s}}Yt.DEFAULT_COLLECTION_PERCENTILE=10,Yt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Yt.DEFAULT=new Yt(AT,Yt.DEFAULT_COLLECTION_PERCENTILE,Yt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Yt.DISABLED=new Yt(-1,0,0);class Di{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Di(0)}static cr(){return new Di(-1)}}const Hg="LruGarbageCollector",gO=1048576;function jg([t,e],[n,s]){const r=Le(t,n);return r===0?Le(e,s):r}class _O{constructor(e){this.Ir=e,this.buffer=new It(jg),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const s=this.buffer.last();jg(n,s)<0&&(this.buffer=this.buffer.delete(s).add(n))}}get maxValue(){return this.buffer.last()[0]}}class yO{constructor(e,n,s){this.garbageCollector=e,this.asyncQueue=n,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){me(Hg,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){qi(n)?me(Hg,"Ignoring IndexedDB error during garbage collection: ",n):await ji(n)}await this.Vr(3e5)}))}}class vO{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next((s=>Math.floor(n/100*s)))}nthSequenceNumber(e,n){if(n===0)return J.resolve(Al.ce);const s=new _O(n);return this.mr.forEachTarget(e,(r=>s.Ar(r.sequenceNumber))).next((()=>this.mr.pr(e,(r=>s.Ar(r))))).next((()=>s.maxValue))}removeTargets(e,n,s){return this.mr.removeTargets(e,n,s)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(me("LruGarbageCollector","Garbage collection skipped; disabled"),J.resolve($g)):this.getCacheSize(e).next((s=>s<this.params.cacheSizeCollectionThreshold?(me("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),$g):this.yr(e,n)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let s,r,i,o,a,l,u;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((f=>(f>this.params.maximumSequenceNumbersToCollect?(me("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),r=this.params.maximumSequenceNumbersToCollect):r=f,o=Date.now(),this.nthSequenceNumber(e,r)))).next((f=>(s=f,a=Date.now(),this.removeTargets(e,s,n)))).next((f=>(i=f,l=Date.now(),this.removeOrphanedDocuments(e,s)))).next((f=>(u=Date.now(),ei()<=Ve.DEBUG&&me("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-h}ms
	Determined least recently used ${r} in `+(a-o)+`ms
	Removed ${i} targets in `+(l-a)+`ms
	Removed ${f} documents in `+(u-l)+`ms
Total Duration: ${u-h}ms`),J.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:f}))))}}function EO(t,e){return new vO(t,e)}class TO{constructor(){this.changes=new qr((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Bt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const s=this.changes.get(n);return s!==void 0?J.resolve(s):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class wO{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}class bO{constructor(e,n,s,r){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=s,this.indexManager=r}getDocument(e,n){let s=null;return this.documentOverlayCache.getOverlay(e,n).next((r=>(s=r,this.remoteDocumentCache.getEntry(e,n)))).next((r=>(s!==null&&Mo(s.mutation,r,on.empty(),et.now()),r)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((s=>this.getLocalViewOfDocuments(e,s,Me()).next((()=>s))))}getLocalViewOfDocuments(e,n,s=Me()){const r=Rr();return this.populateOverlays(e,r,n).next((()=>this.computeViews(e,n,r,s).next((i=>{let o=To();return i.forEach(((a,l)=>{o=o.insert(a,l.overlayedDocument)})),o}))))}getOverlayedDocuments(e,n){const s=Rr();return this.populateOverlays(e,s,n).next((()=>this.computeViews(e,n,s,Me())))}populateOverlays(e,n,s){const r=[];return s.forEach((i=>{n.has(i)||r.push(i)})),this.documentOverlayCache.getOverlays(e,r).next((i=>{i.forEach(((o,a)=>{n.set(o,a)}))}))}computeViews(e,n,s,r){let i=ms();const o=Lo(),a=(function(){return Lo()})();return n.forEach(((l,u)=>{const h=s.get(u.key);r.has(u.key)&&(h===void 0||h.mutation instanceof ar)?i=i.insert(u.key,u):h!==void 0?(o.set(u.key,h.mutation.getFieldMask()),Mo(h.mutation,u,h.mutation.getFieldMask(),et.now())):o.set(u.key,on.empty())})),this.recalculateAndSaveOverlays(e,i).next((l=>(l.forEach(((u,h)=>o.set(u,h))),n.forEach(((u,h)=>a.set(u,new wO(h,o.get(u)??null)))),a)))}recalculateAndSaveOverlays(e,n){const s=Lo();let r=new st(((o,a)=>o-a)),i=Me();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((o=>{for(const a of o)a.keys().forEach((l=>{const u=n.get(l);if(u===null)return;let h=s.get(l)||on.empty();h=a.applyToLocalView(u,h),s.set(l,h);const f=(r.get(a.batchId)||Me()).add(l);r=r.insert(a.batchId,f)}))})).next((()=>{const o=[],a=r.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),u=l.key,h=l.value,f=aT();h.forEach((p=>{if(!i.has(p)){const m=dT(n.get(p),s.get(p));m!==null&&f.set(p,m),i=i.add(p)}})),o.push(this.documentOverlayCache.saveOverlays(e,u,f))}return J.waitFor(o)})).next((()=>s))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((s=>this.recalculateAndSaveOverlays(e,s)))}getDocumentsMatchingQuery(e,n,s,r){return(function(o){return ye.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):nT(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,s,r):this.getDocumentsMatchingCollectionQuery(e,n,s,r)}getNextDocuments(e,n,s,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,s,r).next((i=>{const o=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,s.largestBatchId,r-i.size):J.resolve(Rr());let a=Yo,l=i;return o.next((u=>J.forEach(u,((h,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),i.get(h)?J.resolve():this.remoteDocumentCache.getEntry(e,h).next((p=>{l=l.insert(h,p)}))))).next((()=>this.populateOverlays(e,u,i))).next((()=>this.computeViews(e,l,u,Me()))).next((h=>({batchId:a,changes:oT(h)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ye(n)).next((s=>{let r=To();return s.isFoundDocument()&&(r=r.insert(s.key,s)),r}))}getDocumentsMatchingCollectionGroupQuery(e,n,s,r){const i=n.collectionGroup;let o=To();return this.indexManager.getCollectionParents(e,i).next((a=>J.forEach(a,(l=>{const u=(function(f,p){return new Gi(p,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)})(n,l.child(i));return this.getDocumentsMatchingCollectionQuery(e,u,s,r).next((h=>{h.forEach(((f,p)=>{o=o.insert(f,p)}))}))})).next((()=>o))))}getDocumentsMatchingCollectionQuery(e,n,s,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,s.largestBatchId).next((o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,s,i,r)))).next((o=>{i.forEach(((l,u)=>{const h=u.getKey();o.get(h)===null&&(o=o.insert(h,Bt.newInvalidDocument(h)))}));let a=To();return o.forEach(((l,u)=>{const h=i.get(l);h!==void 0&&Mo(h.mutation,u,on.empty(),et.now()),Pl(n,u)&&(a=a.insert(l,u))})),a}))}}class IO{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return J.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,(function(r){return{id:r.id,version:r.version,createTime:$n(r.createTime)}})(n)),J.resolve()}getNamedQuery(e,n){return J.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,(function(r){return{name:r.name,query:dO(r.bundledQuery),readTime:$n(r.readTime)}})(n)),J.resolve()}}class AO{constructor(){this.overlays=new st(ye.comparator),this.qr=new Map}getOverlay(e,n){return J.resolve(this.overlays.get(n))}getOverlays(e,n){const s=Rr();return J.forEach(n,(r=>this.getOverlay(e,r).next((i=>{i!==null&&s.set(r,i)})))).next((()=>s))}saveOverlays(e,n,s){return s.forEach(((r,i)=>{this.St(e,n,i)})),J.resolve()}removeOverlaysForBatchId(e,n,s){const r=this.qr.get(s);return r!==void 0&&(r.forEach((i=>this.overlays=this.overlays.remove(i))),this.qr.delete(s)),J.resolve()}getOverlaysForCollection(e,n,s){const r=Rr(),i=n.length+1,o=new ye(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,u=l.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===i&&l.largestBatchId>s&&r.set(l.getKey(),l)}return J.resolve(r)}getOverlaysForCollectionGroup(e,n,s,r){let i=new st(((u,h)=>u-h));const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>s){let h=i.get(u.largestBatchId);h===null&&(h=Rr(),i=i.insert(u.largestBatchId,h)),h.set(u.getKey(),u)}}const a=Rr(),l=i.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach(((u,h)=>a.set(u,h))),!(a.size()>=r)););return J.resolve(a)}St(e,n,s){const r=this.overlays.get(s.key);if(r!==null){const o=this.qr.get(r.largestBatchId).delete(s.key);this.qr.set(r.largestBatchId,o)}this.overlays=this.overlays.insert(s.key,new jD(n,s));let i=this.qr.get(n);i===void 0&&(i=Me(),this.qr.set(n,i)),this.qr.set(n,i.add(s.key))}}class RO{constructor(){this.sessionToken=Pt.EMPTY_BYTE_STRING}getSessionToken(e){return J.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,J.resolve()}}class Jf{constructor(){this.Qr=new It(Rt.$r),this.Ur=new It(Rt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const s=new Rt(e,n);this.Qr=this.Qr.add(s),this.Ur=this.Ur.add(s)}Wr(e,n){e.forEach((s=>this.addReference(s,n)))}removeReference(e,n){this.Gr(new Rt(e,n))}zr(e,n){e.forEach((s=>this.removeReference(s,n)))}jr(e){const n=new ye(new Ze([])),s=new Rt(n,e),r=new Rt(n,e+1),i=[];return this.Ur.forEachInRange([s,r],(o=>{this.Gr(o),i.push(o.key)})),i}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new ye(new Ze([])),s=new Rt(n,e),r=new Rt(n,e+1);let i=Me();return this.Ur.forEachInRange([s,r],(o=>{i=i.add(o.key)})),i}containsKey(e){const n=new Rt(e,0),s=this.Qr.firstAfterOrEqual(n);return s!==null&&e.isEqual(s.key)}}class Rt{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return ye.comparator(e.key,n.key)||Le(e.Yr,n.Yr)}static Kr(e,n){return Le(e.Yr,n.Yr)||ye.comparator(e.key,n.key)}}class SO{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new It(Rt.$r)}checkEmpty(e){return J.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,s,r){const i=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new HD(i,n,s,r);this.mutationQueue.push(o);for(const a of r)this.Zr=this.Zr.add(new Rt(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return J.resolve(o)}lookupMutationBatch(e,n){return J.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const s=n+1,r=this.ei(s),i=r<0?0:r;return J.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return J.resolve(this.mutationQueue.length===0?$f:this.tr-1)}getAllMutationBatches(e){return J.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const s=new Rt(n,0),r=new Rt(n,Number.POSITIVE_INFINITY),i=[];return this.Zr.forEachInRange([s,r],(o=>{const a=this.Xr(o.Yr);i.push(a)})),J.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let s=new It(Le);return n.forEach((r=>{const i=new Rt(r,0),o=new Rt(r,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([i,o],(a=>{s=s.add(a.Yr)}))})),J.resolve(this.ti(s))}getAllMutationBatchesAffectingQuery(e,n){const s=n.path,r=s.length+1;let i=s;ye.isDocumentKey(i)||(i=i.child(""));const o=new Rt(new ye(i),0);let a=new It(Le);return this.Zr.forEachWhile((l=>{const u=l.key.path;return!!s.isPrefixOf(u)&&(u.length===r&&(a=a.add(l.Yr)),!0)}),o),J.resolve(this.ti(a))}ti(e){const n=[];return e.forEach((s=>{const r=this.Xr(s);r!==null&&n.push(r)})),n}removeMutationBatch(e,n){qe(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Zr;return J.forEach(n.mutations,(r=>{const i=new Rt(r.key,n.batchId);return s=s.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)})).next((()=>{this.Zr=s}))}ir(e){}containsKey(e,n){const s=new Rt(n,0),r=this.Zr.firstAfterOrEqual(s);return J.resolve(n.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,J.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class CO{constructor(e){this.ri=e,this.docs=(function(){return new st(ye.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const s=n.key,r=this.docs.get(s),i=r?r.size:0,o=this.ri(n);return this.docs=this.docs.insert(s,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const s=this.docs.get(n);return J.resolve(s?s.document.mutableCopy():Bt.newInvalidDocument(n))}getEntries(e,n){let s=ms();return n.forEach((r=>{const i=this.docs.get(r);s=s.insert(r,i?i.document.mutableCopy():Bt.newInvalidDocument(r))})),J.resolve(s)}getDocumentsMatchingQuery(e,n,s,r){let i=ms();const o=n.path,a=new ye(o.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:u,value:{document:h}}=l.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||nD(tD(h),s)<=0||(r.has(h.key)||Pl(n,h))&&(i=i.insert(h.key,h.mutableCopy()))}return J.resolve(i)}getAllFromCollectionGroup(e,n,s,r){Ae(9500)}ii(e,n){return J.forEach(this.docs,(s=>n(s)))}newChangeBuffer(e){return new PO(this)}getSize(e){return J.resolve(this.size)}}class PO extends TO{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach(((s,r)=>{r.isValidDocument()?n.push(this.Nr.addEntry(e,r)):this.Nr.removeEntry(s)})),J.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}class kO{constructor(e){this.persistence=e,this.si=new qr((n=>qf(n)),Gf),this.lastRemoteSnapshotVersion=Ce.min(),this.highestTargetId=0,this.oi=0,this._i=new Jf,this.targetCount=0,this.ai=Di.ur()}forEachTarget(e,n){return this.si.forEach(((s,r)=>n(r))),J.resolve()}getLastRemoteSnapshotVersion(e){return J.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return J.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),J.resolve(this.highestTargetId)}setTargetsMetadata(e,n,s){return s&&(this.lastRemoteSnapshotVersion=s),n>this.oi&&(this.oi=n),J.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new Di(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,J.resolve()}updateTargetData(e,n){return this.Pr(n),J.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,J.resolve()}removeTargets(e,n,s){let r=0;const i=[];return this.si.forEach(((o,a)=>{a.sequenceNumber<=n&&s.get(a.targetId)===null&&(this.si.delete(o),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),r++)})),J.waitFor(i).next((()=>r))}getTargetCount(e){return J.resolve(this.targetCount)}getTargetData(e,n){const s=this.si.get(n)||null;return J.resolve(s)}addMatchingKeys(e,n,s){return this._i.Wr(n,s),J.resolve()}removeMatchingKeys(e,n,s){this._i.zr(n,s);const r=this.persistence.referenceDelegate,i=[];return r&&n.forEach((o=>{i.push(r.markPotentiallyOrphaned(e,o))})),J.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),J.resolve()}getMatchingKeysForTargetId(e,n){const s=this._i.Hr(n);return J.resolve(s)}containsKey(e,n){return J.resolve(this._i.containsKey(n))}}class RT{constructor(e,n){this.ui={},this.overlays={},this.ci=new Al(0),this.li=!1,this.li=!0,this.hi=new RO,this.referenceDelegate=e(this),this.Pi=new kO(this),this.indexManager=new pO,this.remoteDocumentCache=(function(r){return new CO(r)})((s=>this.referenceDelegate.Ti(s))),this.serializer=new fO(n),this.Ii=new IO(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new AO,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let s=this.ui[e.toKey()];return s||(s=new SO(n,this.referenceDelegate),this.ui[e.toKey()]=s),s}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,s){me("MemoryPersistence","Starting transaction:",e);const r=new NO(this.ci.next());return this.referenceDelegate.Ei(),s(r).next((i=>this.referenceDelegate.di(r).next((()=>i)))).toPromise().then((i=>(r.raiseOnCommittedEvent(),i)))}Ai(e,n){return J.or(Object.values(this.ui).map((s=>()=>s.containsKey(e,n))))}}class NO extends rD{constructor(e){super(),this.currentSequenceNumber=e}}class Xf{constructor(e){this.persistence=e,this.Ri=new Jf,this.Vi=null}static mi(e){return new Xf(e)}get fi(){if(this.Vi)return this.Vi;throw Ae(60996)}addReference(e,n,s){return this.Ri.addReference(s,n),this.fi.delete(s.toString()),J.resolve()}removeReference(e,n,s){return this.Ri.removeReference(s,n),this.fi.add(s.toString()),J.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),J.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach((r=>this.fi.add(r.toString())));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,n.targetId).next((r=>{r.forEach((i=>this.fi.add(i.toString())))})).next((()=>s.removeTargetData(e,n)))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return J.forEach(this.fi,(s=>{const r=ye.fromPath(s);return this.gi(e,r).next((i=>{i||n.removeEntry(r,Ce.min())}))})).next((()=>(this.Vi=null,n.apply(e))))}updateLimboDocument(e,n){return this.gi(e,n).next((s=>{s?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(e){return 0}gi(e,n){return J.or([()=>J.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class Yc{constructor(e,n){this.persistence=e,this.pi=new qr((s=>aD(s.path)),((s,r)=>s.isEqual(r))),this.garbageCollector=EO(this,n)}static mi(e,n){return new Yc(e,n)}Ei(){}di(e){return J.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((s=>n.next((r=>s+r))))}wr(e){let n=0;return this.pr(e,(s=>{n++})).next((()=>n))}pr(e,n){return J.forEach(this.pi,((s,r)=>this.br(e,s,r).next((i=>i?J.resolve():n(r)))))}removeTargets(e,n,s){return this.persistence.getTargetCache().removeTargets(e,n,s)}removeOrphanedDocuments(e,n){let s=0;const r=this.persistence.getRemoteDocumentCache(),i=r.newChangeBuffer();return r.ii(e,(o=>this.br(e,o,n).next((a=>{a||(s++,i.removeEntry(o,Ce.min()))})))).next((()=>i.apply(e))).next((()=>s))}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),J.resolve()}removeTarget(e,n){const s=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,n,s){return this.pi.set(s,e.currentSequenceNumber),J.resolve()}removeReference(e,n,s){return this.pi.set(s,e.currentSequenceNumber),J.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),J.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=dc(e.data.value)),n}br(e,n,s){return J.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const r=this.pi.get(n);return J.resolve(r!==void 0&&r>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class Zf{constructor(e,n,s,r){this.targetId=e,this.fromCache=n,this.Es=s,this.ds=r}static As(e,n){let s=Me(),r=Me();for(const i of n.docChanges)switch(i.type){case 0:s=s.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new Zf(e,n.fromCache,s,r)}}class DO{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class OO{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return cP()?8:iD($t())>0?6:4})()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,s,r){const i={result:null};return this.ys(e,n).next((o=>{i.result=o})).next((()=>{if(!i.result)return this.ws(e,n,r,s).next((o=>{i.result=o}))})).next((()=>{if(i.result)return;const o=new DO;return this.Ss(e,n,o).next((a=>{if(i.result=a,this.Vs)return this.bs(e,n,o,a.size)}))})).next((()=>i.result))}bs(e,n,s,r){return s.documentReadCount<this.fs?(ei()<=Ve.DEBUG&&me("QueryEngine","SDK will not create cache indexes for query:",ti(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),J.resolve()):(ei()<=Ve.DEBUG&&me("QueryEngine","Query:",ti(n),"scans",s.documentReadCount,"local documents and returns",r,"documents as results."),s.documentReadCount>this.gs*r?(ei()<=Ve.DEBUG&&me("QueryEngine","The SDK decides to create cache indexes for query:",ti(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Bn(n))):J.resolve())}ys(e,n){if(Ng(n))return J.resolve(null);let s=Bn(n);return this.indexManager.getIndexType(e,s).next((r=>r===0?null:(n.limit!==null&&r===1&&(n=Mh(n,null,"F"),s=Bn(n)),this.indexManager.getDocumentsMatchingTarget(e,s).next((i=>{const o=Me(...i);return this.ps.getDocuments(e,o).next((a=>this.indexManager.getMinOffset(e,s).next((l=>{const u=this.Ds(n,a);return this.Cs(n,u,o,l.readTime)?this.ys(e,Mh(n,null,"F")):this.vs(e,u,n,l)}))))})))))}ws(e,n,s,r){return Ng(n)||r.isEqual(Ce.min())?J.resolve(null):this.ps.getDocuments(e,s).next((i=>{const o=this.Ds(n,i);return this.Cs(n,o,s,r)?J.resolve(null):(ei()<=Ve.DEBUG&&me("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),ti(n)),this.vs(e,o,n,eD(r,Yo)).next((a=>a)))}))}Ds(e,n){let s=new It(rT(e));return n.forEach(((r,i)=>{Pl(e,i)&&(s=s.add(i))})),s}Cs(e,n,s,r){if(e.limit===null)return!1;if(s.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Ss(e,n,s){return ei()<=Ve.DEBUG&&me("QueryEngine","Using full collection scan to execute query:",ti(n)),this.ps.getDocumentsMatchingQuery(e,n,Xs.min(),s)}vs(e,n,s,r){return this.ps.getDocumentsMatchingQuery(e,s,r).next((i=>(n.forEach((o=>{i=i.insert(o.key,o)})),i)))}}const ed="LocalStore",VO=3e8;class LO{constructor(e,n,s,r){this.persistence=e,this.Fs=n,this.serializer=r,this.Ms=new st(Le),this.xs=new qr((i=>qf(i)),Gf),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(s)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new bO(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.Ms)))}}function MO(t,e,n,s){return new LO(t,e,n,s)}async function ST(t,e){const n=Pe(t);return await n.persistence.runTransaction("Handle user change","readonly",(s=>{let r;return n.mutationQueue.getAllMutationBatches(s).next((i=>(r=i,n.Bs(e),n.mutationQueue.getAllMutationBatches(s)))).next((i=>{const o=[],a=[];let l=Me();for(const u of r){o.push(u.batchId);for(const h of u.mutations)l=l.add(h.key)}for(const u of i){a.push(u.batchId);for(const h of u.mutations)l=l.add(h.key)}return n.localDocuments.getDocuments(s,l).next((u=>({Ls:u,removedBatchIds:o,addedBatchIds:a})))}))}))}function xO(t,e){const n=Pe(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(s=>{const r=e.batch.keys(),i=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(a,l,u,h){const f=u.batch,p=f.keys();let m=J.resolve();return p.forEach((b=>{m=m.next((()=>h.getEntry(l,b))).next((v=>{const D=u.docVersions.get(b);qe(D!==null,48541),v.version.compareTo(D)<0&&(f.applyToRemoteDocument(v,u),v.isValidDocument()&&(v.setReadTime(u.commitVersion),h.addEntry(v)))}))})),m.next((()=>a.mutationQueue.removeMutationBatch(l,f)))})(n,s,e,i).next((()=>i.apply(s))).next((()=>n.mutationQueue.performConsistencyCheck(s))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(s,r,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,(function(a){let l=Me();for(let u=0;u<a.mutationResults.length;++u)a.mutationResults[u].transformResults.length>0&&(l=l.add(a.batch.mutations[u].key));return l})(e)))).next((()=>n.localDocuments.getDocuments(s,r)))}))}function CT(t){const e=Pe(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.Pi.getLastRemoteSnapshotVersion(n)))}function FO(t,e){const n=Pe(t),s=e.snapshotVersion;let r=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(i=>{const o=n.Ns.newChangeBuffer({trackRemovals:!0});r=n.Ms;const a=[];e.targetChanges.forEach(((h,f)=>{const p=r.get(f);if(!p)return;a.push(n.Pi.removeMatchingKeys(i,h.removedDocuments,f).next((()=>n.Pi.addMatchingKeys(i,h.addedDocuments,f))));let m=p.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(f)!==null?m=m.withResumeToken(Pt.EMPTY_BYTE_STRING,Ce.min()).withLastLimboFreeSnapshotVersion(Ce.min()):h.resumeToken.approximateByteSize()>0&&(m=m.withResumeToken(h.resumeToken,s)),r=r.insert(f,m),(function(v,D,V){return v.resumeToken.approximateByteSize()===0||D.snapshotVersion.toMicroseconds()-v.snapshotVersion.toMicroseconds()>=VO?!0:V.addedDocuments.size+V.modifiedDocuments.size+V.removedDocuments.size>0})(p,m,h)&&a.push(n.Pi.updateTargetData(i,m))}));let l=ms(),u=Me();if(e.documentUpdates.forEach((h=>{e.resolvedLimboDocuments.has(h)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(i,h))})),a.push(UO(i,o,e.documentUpdates).next((h=>{l=h.ks,u=h.qs}))),!s.isEqual(Ce.min())){const h=n.Pi.getLastRemoteSnapshotVersion(i).next((f=>n.Pi.setTargetsMetadata(i,i.currentSequenceNumber,s)));a.push(h)}return J.waitFor(a).next((()=>o.apply(i))).next((()=>n.localDocuments.getLocalViewOfDocuments(i,l,u))).next((()=>l))})).then((i=>(n.Ms=r,i)))}function UO(t,e,n){let s=Me(),r=Me();return n.forEach((i=>s=s.add(i))),e.getEntries(t,s).next((i=>{let o=ms();return n.forEach(((a,l)=>{const u=i.get(a);l.isFoundDocument()!==u.isFoundDocument()&&(r=r.add(a)),l.isNoDocument()&&l.version.isEqual(Ce.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!u.isValidDocument()||l.version.compareTo(u.version)>0||l.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):me(ed,"Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",l.version)})),{ks:o,qs:r}}))}function BO(t,e){const n=Pe(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(s=>(e===void 0&&(e=$f),n.mutationQueue.getNextMutationBatchAfterBatchId(s,e))))}function $O(t,e){const n=Pe(t);return n.persistence.runTransaction("Allocate target","readwrite",(s=>{let r;return n.Pi.getTargetData(s,e).next((i=>i?(r=i,J.resolve(r)):n.Pi.allocateTargetId(s).next((o=>(r=new $s(e,o,"TargetPurposeListen",s.currentSequenceNumber),n.Pi.addTargetData(s,r).next((()=>r)))))))})).then((s=>{const r=n.Ms.get(s.targetId);return(r===null||s.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(s.targetId,s),n.xs.set(e,s.targetId)),s}))}async function $h(t,e,n){const s=Pe(t),r=s.Ms.get(e),i=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",i,(o=>s.persistence.referenceDelegate.removeTarget(o,r)))}catch(o){if(!qi(o))throw o;me(ed,`Failed to update sequence numbers for target ${e}: ${o}`)}s.Ms=s.Ms.remove(e),s.xs.delete(r.target)}function qg(t,e,n){const s=Pe(t);let r=Ce.min(),i=Me();return s.persistence.runTransaction("Execute query","readwrite",(o=>(function(l,u,h){const f=Pe(l),p=f.xs.get(h);return p!==void 0?J.resolve(f.Ms.get(p)):f.Pi.getTargetData(u,h)})(s,o,Bn(e)).next((a=>{if(a)return r=a.lastLimboFreeSnapshotVersion,s.Pi.getMatchingKeysForTargetId(o,a.targetId).next((l=>{i=l}))})).next((()=>s.Fs.getDocumentsMatchingQuery(o,e,n?r:Ce.min(),n?i:Me()))).next((a=>(HO(s,RD(e),a),{documents:a,Qs:i})))))}function HO(t,e,n){let s=t.Os.get(e)||Ce.min();n.forEach(((r,i)=>{i.readTime.compareTo(s)>0&&(s=i.readTime)})),t.Os.set(e,s)}class Gg{constructor(){this.activeTargetIds=DD()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class jO{constructor(){this.Mo=new Gg,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,s){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,s){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Gg,Promise.resolve()}handleUserChange(e,n,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class qO{Oo(e){}shutdown(){}}const Wg="ConnectivityMonitor";class zg{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){me(Wg,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){me(Wg,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let ec=null;function Hh(){return ec===null?ec=(function(){return 268435456+Math.round(2147483648*Math.random())})():ec++,"0x"+ec.toString(16)}const Mu="RestConnection",GO={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class WO{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${s}/databases/${r}`,this.Wo=this.databaseId.database===Gc?`project_id=${s}`:`project_id=${s}&database_id=${r}`}Go(e,n,s,r,i){const o=Hh(),a=this.zo(e,n.toUriEncodedString());me(Mu,`Sending RPC '${e}' ${o}:`,a,s);const l={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(l,r,i);const{host:u}=new URL(a),h=Ui(u);return this.Jo(e,a,l,s,h).then((f=>(me(Mu,`Received RPC '${e}' ${o}: `,f),f)),(f=>{throw Ur(Mu,`RPC '${e}' ${o} failed with error: `,f,"url: ",a,"request:",s),f}))}Ho(e,n,s,r,i,o){return this.Go(e,n,s,r,i)}jo(e,n,s){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Hi})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((r,i)=>e[i]=r)),s&&s.headers.forEach(((r,i)=>e[i]=r))}zo(e,n){const s=GO[e];return`${this.Uo}/v1/${n}:${s}`}terminate(){}}class zO{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const Mt="WebChannelConnection";class KO extends WO{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,s,r,i){const o=Hh();return new Promise(((a,l)=>{const u=new PE;u.setWithCredentials(!0),u.listenOnce(kE.COMPLETE,(()=>{try{switch(u.getLastErrorCode()){case fc.NO_ERROR:const f=u.getResponseJson();me(Mt,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(f)),a(f);break;case fc.TIMEOUT:me(Mt,`RPC '${e}' ${o} timed out`),l(new ce(K.DEADLINE_EXCEEDED,"Request time out"));break;case fc.HTTP_ERROR:const p=u.getStatus();if(me(Mt,`RPC '${e}' ${o} failed with status:`,p,"response text:",u.getResponseText()),p>0){let m=u.getResponseJson();Array.isArray(m)&&(m=m[0]);const b=m?.error;if(b&&b.status&&b.message){const v=(function(V){const N=V.toLowerCase().replace(/_/g,"-");return Object.values(K).indexOf(N)>=0?N:K.UNKNOWN})(b.status);l(new ce(v,b.message))}else l(new ce(K.UNKNOWN,"Server responded with status "+u.getStatus()))}else l(new ce(K.UNAVAILABLE,"Connection failed."));break;default:Ae(9055,{l_:e,streamId:o,h_:u.getLastErrorCode(),P_:u.getLastError()})}}finally{me(Mt,`RPC '${e}' ${o} completed.`)}}));const h=JSON.stringify(r);me(Mt,`RPC '${e}' ${o} sending request:`,r),u.send(n,"POST",h,s,15)}))}T_(e,n,s){const r=Hh(),i=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=OE(),a=DE(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(l.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(l.useFetchStreams=!0),this.jo(l.initMessageHeaders,n,s),l.encodeInitMessageHeaders=!0;const h=i.join("");me(Mt,`Creating RPC '${e}' stream ${r}: ${h}`,l);const f=o.createWebChannel(h,l);this.I_(f);let p=!1,m=!1;const b=new zO({Yo:D=>{m?me(Mt,`Not sending because RPC '${e}' stream ${r} is closed:`,D):(p||(me(Mt,`Opening RPC '${e}' stream ${r} transport.`),f.open(),p=!0),me(Mt,`RPC '${e}' stream ${r} sending:`,D),f.send(D))},Zo:()=>f.close()}),v=(D,V,N)=>{D.listen(V,(_=>{try{N(_)}catch(S){setTimeout((()=>{throw S}),0)}}))};return v(f,Eo.EventType.OPEN,(()=>{m||(me(Mt,`RPC '${e}' stream ${r} transport opened.`),b.o_())})),v(f,Eo.EventType.CLOSE,(()=>{m||(m=!0,me(Mt,`RPC '${e}' stream ${r} transport closed`),b.a_(),this.E_(f))})),v(f,Eo.EventType.ERROR,(D=>{m||(m=!0,Ur(Mt,`RPC '${e}' stream ${r} transport errored. Name:`,D.name,"Message:",D.message),b.a_(new ce(K.UNAVAILABLE,"The operation could not be completed")))})),v(f,Eo.EventType.MESSAGE,(D=>{if(!m){const V=D.data[0];qe(!!V,16349);const N=V,_=N?.error||N[0]?.error;if(_){me(Mt,`RPC '${e}' stream ${r} received error:`,_);const S=_.status;let O=(function(y){const E=pt[y];if(E!==void 0)return mT(E)})(S),U=_.message;O===void 0&&(O=K.INTERNAL,U="Unknown error status: "+S+" with message "+_.message),m=!0,b.a_(new ce(O,U)),f.close()}else me(Mt,`RPC '${e}' stream ${r} received:`,V),b.u_(V)}})),v(a,NE.STAT_EVENT,(D=>{D.stat===Ph.PROXY?me(Mt,`RPC '${e}' stream ${r} detected buffering proxy`):D.stat===Ph.NOPROXY&&me(Mt,`RPC '${e}' stream ${r} detected no buffering proxy`)})),setTimeout((()=>{b.__()}),0),b}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((n=>n===e))}}function xu(){return typeof document<"u"?document:null}function Vl(t){return new XD(t,!0)}class PT{constructor(e,n,s=1e3,r=1.5,i=6e4){this.Mi=e,this.timerId=n,this.d_=s,this.A_=r,this.R_=i,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),s=Math.max(0,Date.now()-this.f_),r=Math.max(0,n-s);r>0&&me("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,r,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const Kg="PersistentStream";class kT{constructor(e,n,s,r,i,o,a,l){this.Mi=e,this.S_=s,this.b_=r,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new PT(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===K.RESOURCE_EXHAUSTED?(ps(n.toString()),ps("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===K.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([s,r])=>{this.D_===n&&this.G_(s,r)}),(s=>{e((()=>{const r=new ce(K.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(r)}))}))}G_(e,n){const s=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo((()=>{s((()=>this.listener.Xo()))})),this.stream.t_((()=>{s((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((r=>{s((()=>this.z_(r)))})),this.stream.onMessage((r=>{s((()=>++this.F_==1?this.J_(r):this.onNext(r)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return me(Kg,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget((()=>this.D_===e?n():(me(Kg,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class QO extends kT{constructor(e,n,s,r,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,s,r,o),this.serializer=i}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=tO(this.serializer,e),s=(function(i){if(!("targetChange"in i))return Ce.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?Ce.min():o.readTime?$n(o.readTime):Ce.min()})(e);return this.listener.H_(n,s)}Y_(e){const n={};n.database=Bh(this.serializer),n.addTarget=(function(i,o){let a;const l=o.target;if(a=Vh(l)?{documents:rO(i,l)}:{query:iO(i,l).ft},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=yT(i,o.resumeToken);const u=xh(i,o.expectedCount);u!==null&&(a.expectedCount=u)}else if(o.snapshotVersion.compareTo(Ce.min())>0){a.readTime=Qc(i,o.snapshotVersion.toTimestamp());const u=xh(i,o.expectedCount);u!==null&&(a.expectedCount=u)}return a})(this.serializer,e);const s=aO(this.serializer,e);s&&(n.labels=s),this.q_(n)}Z_(e){const n={};n.database=Bh(this.serializer),n.removeTarget=e,this.q_(n)}}class YO extends kT{constructor(e,n,s,r,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,s,r,o),this.serializer=i}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return qe(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,qe(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){qe(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=sO(e.writeResults,e.commitTime),s=$n(e.commitTime);return this.listener.na(s,n)}ra(){const e={};e.database=Bh(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((s=>nO(this.serializer,s)))};this.q_(n)}}class JO{}class XO extends JO{constructor(e,n,s,r){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=s,this.serializer=r,this.ia=!1}sa(){if(this.ia)throw new ce(K.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,s,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([i,o])=>this.connection.Go(e,Fh(n,s),r,i,o))).catch((i=>{throw i.name==="FirebaseError"?(i.code===K.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new ce(K.UNKNOWN,i.toString())}))}Ho(e,n,s,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([o,a])=>this.connection.Ho(e,Fh(n,s),r,o,a,i))).catch((o=>{throw o.name==="FirebaseError"?(o.code===K.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ce(K.UNKNOWN,o.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class ZO{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(ps(n),this.aa=!1):me("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const Br="RemoteStore";class eV{constructor(e,n,s,r,i){this.localStore=e,this.datastore=n,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=i,this.Aa.Oo((o=>{s.enqueueAndForget((async()=>{Gr(this)&&(me(Br,"Restarting streams for network reachability change."),await(async function(l){const u=Pe(l);u.Ea.add(4),await Ea(u),u.Ra.set("Unknown"),u.Ea.delete(4),await Ll(u)})(this))}))})),this.Ra=new ZO(s,r)}}async function Ll(t){if(Gr(t))for(const e of t.da)await e(!0)}async function Ea(t){for(const e of t.da)await e(!1)}function NT(t,e){const n=Pe(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),rd(n)?sd(n):Wi(n).O_()&&nd(n,e))}function td(t,e){const n=Pe(t),s=Wi(n);n.Ia.delete(e),s.O_()&&DT(n,e),n.Ia.size===0&&(s.O_()?s.L_():Gr(n)&&n.Ra.set("Unknown"))}function nd(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ce.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Wi(t).Y_(e)}function DT(t,e){t.Va.Ue(e),Wi(t).Z_(e)}function sd(t){t.Va=new KD({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),Wi(t).start(),t.Ra.ua()}function rd(t){return Gr(t)&&!Wi(t).x_()&&t.Ia.size>0}function Gr(t){return Pe(t).Ea.size===0}function OT(t){t.Va=void 0}async function tV(t){t.Ra.set("Online")}async function nV(t){t.Ia.forEach(((e,n)=>{nd(t,e)}))}async function sV(t,e){OT(t),rd(t)?(t.Ra.ha(e),sd(t)):t.Ra.set("Unknown")}async function rV(t,e,n){if(t.Ra.set("Online"),e instanceof _T&&e.state===2&&e.cause)try{await(async function(r,i){const o=i.cause;for(const a of i.targetIds)r.Ia.has(a)&&(await r.remoteSyncer.rejectListen(a,o),r.Ia.delete(a),r.Va.removeTarget(a))})(t,e)}catch(s){me(Br,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await Jc(t,s)}else if(e instanceof gc?t.Va.Ze(e):e instanceof gT?t.Va.st(e):t.Va.tt(e),!n.isEqual(Ce.min()))try{const s=await CT(t.localStore);n.compareTo(s)>=0&&await(function(i,o){const a=i.Va.Tt(o);return a.targetChanges.forEach(((l,u)=>{if(l.resumeToken.approximateByteSize()>0){const h=i.Ia.get(u);h&&i.Ia.set(u,h.withResumeToken(l.resumeToken,o))}})),a.targetMismatches.forEach(((l,u)=>{const h=i.Ia.get(l);if(!h)return;i.Ia.set(l,h.withResumeToken(Pt.EMPTY_BYTE_STRING,h.snapshotVersion)),DT(i,l);const f=new $s(h.target,l,u,h.sequenceNumber);nd(i,f)})),i.remoteSyncer.applyRemoteEvent(a)})(t,n)}catch(s){me(Br,"Failed to raise snapshot:",s),await Jc(t,s)}}async function Jc(t,e,n){if(!qi(e))throw e;t.Ea.add(1),await Ea(t),t.Ra.set("Offline"),n||(n=()=>CT(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{me(Br,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await Ll(t)}))}function VT(t,e){return e().catch((n=>Jc(t,n,e)))}async function Ml(t){const e=Pe(t),n=nr(e);let s=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:$f;for(;iV(e);)try{const r=await BO(e.localStore,s);if(r===null){e.Ta.length===0&&n.L_();break}s=r.batchId,oV(e,r)}catch(r){await Jc(e,r)}LT(e)&&MT(e)}function iV(t){return Gr(t)&&t.Ta.length<10}function oV(t,e){t.Ta.push(e);const n=nr(t);n.O_()&&n.X_&&n.ea(e.mutations)}function LT(t){return Gr(t)&&!nr(t).x_()&&t.Ta.length>0}function MT(t){nr(t).start()}async function aV(t){nr(t).ra()}async function cV(t){const e=nr(t);for(const n of t.Ta)e.ea(n.mutations)}async function lV(t,e,n){const s=t.Ta.shift(),r=Kf.from(s,e,n);await VT(t,(()=>t.remoteSyncer.applySuccessfulWrite(r))),await Ml(t)}async function uV(t,e){e&&nr(t).X_&&await(async function(s,r){if((function(o){return GD(o)&&o!==K.ABORTED})(r.code)){const i=s.Ta.shift();nr(s).B_(),await VT(s,(()=>s.remoteSyncer.rejectFailedWrite(i.batchId,r))),await Ml(s)}})(t,e),LT(t)&&MT(t)}async function Qg(t,e){const n=Pe(t);n.asyncQueue.verifyOperationInProgress(),me(Br,"RemoteStore received new credentials");const s=Gr(n);n.Ea.add(3),await Ea(n),s&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Ll(n)}async function hV(t,e){const n=Pe(t);e?(n.Ea.delete(2),await Ll(n)):e||(n.Ea.add(2),await Ea(n),n.Ra.set("Unknown"))}function Wi(t){return t.ma||(t.ma=(function(n,s,r){const i=Pe(n);return i.sa(),new QO(s,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)})(t.datastore,t.asyncQueue,{Xo:tV.bind(null,t),t_:nV.bind(null,t),r_:sV.bind(null,t),H_:rV.bind(null,t)}),t.da.push((async e=>{e?(t.ma.B_(),rd(t)?sd(t):t.Ra.set("Unknown")):(await t.ma.stop(),OT(t))}))),t.ma}function nr(t){return t.fa||(t.fa=(function(n,s,r){const i=Pe(n);return i.sa(),new YO(s,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)})(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:aV.bind(null,t),r_:uV.bind(null,t),ta:cV.bind(null,t),na:lV.bind(null,t)}),t.da.push((async e=>{e?(t.fa.B_(),await Ml(t)):(await t.fa.stop(),t.Ta.length>0&&(me(Br,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))}))),t.fa}class id{constructor(e,n,s,r,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=s,this.op=r,this.removalCallback=i,this.deferred=new os,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((o=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,s,r,i){const o=Date.now()+s,a=new id(e,n,o,r,i);return a.start(s),a}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ce(K.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function od(t,e){if(ps("AsyncQueue",`${e}: ${t}`),qi(t))return new ce(K.UNAVAILABLE,`${e}: ${t}`);throw t}class yi{static emptySet(e){return new yi(e.comparator)}constructor(e){this.comparator=e?(n,s)=>e(n,s)||ye.comparator(n.key,s.key):(n,s)=>ye.comparator(n.key,s.key),this.keyedMap=To(),this.sortedSet=new st(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,s)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof yi)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;n.hasNext();){const r=n.getNext().key,i=s.getNext().key;if(!r.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const s=new yi;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=n,s}}class Yg{constructor(){this.ga=new st(ye.comparator)}track(e){const n=e.doc.key,s=this.ga.get(n);s?e.type!==0&&s.type===3?this.ga=this.ga.insert(n,e):e.type===3&&s.type!==1?this.ga=this.ga.insert(n,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.ga=this.ga.remove(n):e.type===1&&s.type===2?this.ga=this.ga.insert(n,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):Ae(63341,{Rt:e,pa:s}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,s)=>{e.push(s)})),e}}class Oi{constructor(e,n,s,r,i,o,a,l,u){this.query=e,this.docs=n,this.oldDocs=s,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=u}static fromInitialDocuments(e,n,s,r,i){const o=[];return n.forEach((a=>{o.push({type:0,doc:a})})),new Oi(e,n,yi.emptySet(n),o,s,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Cl(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,s=e.docChanges;if(n.length!==s.length)return!1;for(let r=0;r<n.length;r++)if(n[r].type!==s[r].type||!n[r].doc.isEqual(s[r].doc))return!1;return!0}}class fV{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class dV{constructor(){this.queries=Jg(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,s){const r=Pe(n),i=r.queries;r.queries=Jg(),i.forEach(((o,a)=>{for(const l of a.Sa)l.onError(s)}))})(this,new ce(K.ABORTED,"Firestore shutting down"))}}function Jg(){return new qr((t=>sT(t)),Cl)}async function xT(t,e){const n=Pe(t);let s=3;const r=e.query;let i=n.queries.get(r);i?!i.ba()&&e.Da()&&(s=2):(i=new fV,s=e.Da()?0:1);try{switch(s){case 0:i.wa=await n.onListen(r,!0);break;case 1:i.wa=await n.onListen(r,!1);break;case 2:await n.onFirstRemoteStoreListen(r)}}catch(o){const a=od(o,`Initialization of query '${ti(e.query)}' failed`);return void e.onError(a)}n.queries.set(r,i),i.Sa.push(e),e.va(n.onlineState),i.wa&&e.Fa(i.wa)&&ad(n)}async function FT(t,e){const n=Pe(t),s=e.query;let r=3;const i=n.queries.get(s);if(i){const o=i.Sa.indexOf(e);o>=0&&(i.Sa.splice(o,1),i.Sa.length===0?r=e.Da()?0:1:!i.ba()&&e.Da()&&(r=2))}switch(r){case 0:return n.queries.delete(s),n.onUnlisten(s,!0);case 1:return n.queries.delete(s),n.onUnlisten(s,!1);case 2:return n.onLastRemoteStoreUnlisten(s);default:return}}function pV(t,e){const n=Pe(t);let s=!1;for(const r of e){const i=r.query,o=n.queries.get(i);if(o){for(const a of o.Sa)a.Fa(r)&&(s=!0);o.wa=r}}s&&ad(n)}function mV(t,e,n){const s=Pe(t),r=s.queries.get(e);if(r)for(const i of r.Sa)i.onError(n);s.queries.delete(e)}function ad(t){t.Ca.forEach((e=>{e.next()}))}var jh,Xg;(Xg=jh||(jh={})).Ma="default",Xg.Cache="cache";class UT{constructor(e,n,s){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(e){if(!this.options.includeMetadataChanges){const s=[];for(const r of e.docChanges)r.type!==3&&s.push(r);e=new Oi(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const s=n!=="Offline";return(!this.options.qa||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Oi.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==jh.Cache}}class BT{constructor(e){this.key=e}}class $T{constructor(e){this.key=e}}class gV{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Me(),this.mutatedKeys=Me(),this.eu=rT(e),this.tu=new yi(this.eu)}get nu(){return this.Ya}ru(e,n){const s=n?n.iu:new Yg,r=n?n.tu:this.tu;let i=n?n.mutatedKeys:this.mutatedKeys,o=r,a=!1;const l=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,u=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal(((h,f)=>{const p=r.get(h),m=Pl(this.query,f)?f:null,b=!!p&&this.mutatedKeys.has(p.key),v=!!m&&(m.hasLocalMutations||this.mutatedKeys.has(m.key)&&m.hasCommittedMutations);let D=!1;p&&m?p.data.isEqual(m.data)?b!==v&&(s.track({type:3,doc:m}),D=!0):this.su(p,m)||(s.track({type:2,doc:m}),D=!0,(l&&this.eu(m,l)>0||u&&this.eu(m,u)<0)&&(a=!0)):!p&&m?(s.track({type:0,doc:m}),D=!0):p&&!m&&(s.track({type:1,doc:p}),D=!0,(l||u)&&(a=!0)),D&&(m?(o=o.add(m),i=v?i.add(h):i.delete(h)):(o=o.delete(h),i=i.delete(h)))})),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),i=i.delete(h.key),s.track({type:1,doc:h})}return{tu:o,iu:s,Cs:a,mutatedKeys:i}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,s,r){const i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort(((h,f)=>(function(m,b){const v=D=>{switch(D){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ae(20277,{Rt:D})}};return v(m)-v(b)})(h.type,f.type)||this.eu(h.doc,f.doc))),this.ou(s),r=r??!1;const a=n&&!r?this._u():[],l=this.Xa.size===0&&this.current&&!r?1:0,u=l!==this.Za;return this.Za=l,o.length!==0||u?{snapshot:new Oi(this.query,e.tu,i,o,e.mutatedKeys,l===0,u,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:a}:{au:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Yg,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Ya=this.Ya.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ya=this.Ya.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Me(),this.tu.forEach((s=>{this.uu(s.key)&&(this.Xa=this.Xa.add(s.key))}));const n=[];return e.forEach((s=>{this.Xa.has(s)||n.push(new $T(s))})),this.Xa.forEach((s=>{e.has(s)||n.push(new BT(s))})),n}cu(e){this.Ya=e.Qs,this.Xa=Me();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Oi.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const cd="SyncEngine";class _V{constructor(e,n,s){this.query=e,this.targetId=n,this.view=s}}class yV{constructor(e){this.key=e,this.hu=!1}}class vV{constructor(e,n,s,r,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=s,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new qr((a=>sT(a)),Cl),this.Iu=new Map,this.Eu=new Set,this.du=new st(ye.comparator),this.Au=new Map,this.Ru=new Jf,this.Vu={},this.mu=new Map,this.fu=Di.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function EV(t,e,n=!0){const s=zT(t);let r;const i=s.Tu.get(e);return i?(s.sharedClientState.addLocalQueryTarget(i.targetId),r=i.view.lu()):r=await HT(s,e,n,!0),r}async function TV(t,e){const n=zT(t);await HT(n,e,!0,!1)}async function HT(t,e,n,s){const r=await $O(t.localStore,Bn(e)),i=r.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let a;return s&&(a=await wV(t,e,i,o==="current",r.resumeToken)),t.isPrimaryClient&&n&&NT(t.remoteStore,r),a}async function wV(t,e,n,s,r){t.pu=(f,p,m)=>(async function(v,D,V,N){let _=D.view.ru(V);_.Cs&&(_=await qg(v.localStore,D.query,!1).then((({documents:T})=>D.view.ru(T,_))));const S=N&&N.targetChanges.get(D.targetId),O=N&&N.targetMismatches.get(D.targetId)!=null,U=D.view.applyChanges(_,v.isPrimaryClient,S,O);return e_(v,D.targetId,U.au),U.snapshot})(t,f,p,m);const i=await qg(t.localStore,e,!0),o=new gV(e,i.Qs),a=o.ru(i.documents),l=va.createSynthesizedTargetChangeForCurrentChange(n,s&&t.onlineState!=="Offline",r),u=o.applyChanges(a,t.isPrimaryClient,l);e_(t,n,u.au);const h=new _V(e,n,o);return t.Tu.set(e,h),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),u.snapshot}async function bV(t,e,n){const s=Pe(t),r=s.Tu.get(e),i=s.Iu.get(r.targetId);if(i.length>1)return s.Iu.set(r.targetId,i.filter((o=>!Cl(o,e)))),void s.Tu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(r.targetId),s.sharedClientState.isActiveQueryTarget(r.targetId)||await $h(s.localStore,r.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(r.targetId),n&&td(s.remoteStore,r.targetId),qh(s,r.targetId)})).catch(ji)):(qh(s,r.targetId),await $h(s.localStore,r.targetId,!0))}async function IV(t,e){const n=Pe(t),s=n.Tu.get(e),r=n.Iu.get(s.targetId);n.isPrimaryClient&&r.length===1&&(n.sharedClientState.removeLocalQueryTarget(s.targetId),td(n.remoteStore,s.targetId))}async function AV(t,e,n){const s=DV(t);try{const r=await(function(o,a){const l=Pe(o),u=et.now(),h=a.reduce(((m,b)=>m.add(b.key)),Me());let f,p;return l.persistence.runTransaction("Locally write mutations","readwrite",(m=>{let b=ms(),v=Me();return l.Ns.getEntries(m,h).next((D=>{b=D,b.forEach(((V,N)=>{N.isValidDocument()||(v=v.add(V))}))})).next((()=>l.localDocuments.getOverlayedDocuments(m,b))).next((D=>{f=D;const V=[];for(const N of a){const _=BD(N,f.get(N.key).overlayedDocument);_!=null&&V.push(new ar(N.key,_,QE(_.value.mapValue),en.exists(!0)))}return l.mutationQueue.addMutationBatch(m,u,V,a)})).next((D=>{p=D;const V=D.applyToLocalDocumentSet(f,v);return l.documentOverlayCache.saveOverlays(m,D.batchId,V)}))})).then((()=>({batchId:p.batchId,changes:oT(f)})))})(s.localStore,e);s.sharedClientState.addPendingMutation(r.batchId),(function(o,a,l){let u=o.Vu[o.currentUser.toKey()];u||(u=new st(Le)),u=u.insert(a,l),o.Vu[o.currentUser.toKey()]=u})(s,r.batchId,n),await Ta(s,r.changes),await Ml(s.remoteStore)}catch(r){const i=od(r,"Failed to persist write");n.reject(i)}}async function jT(t,e){const n=Pe(t);try{const s=await FO(n.localStore,e);e.targetChanges.forEach(((r,i)=>{const o=n.Au.get(i);o&&(qe(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1,22616),r.addedDocuments.size>0?o.hu=!0:r.modifiedDocuments.size>0?qe(o.hu,14607):r.removedDocuments.size>0&&(qe(o.hu,42227),o.hu=!1))})),await Ta(n,s,e)}catch(s){await ji(s)}}function Zg(t,e,n){const s=Pe(t);if(s.isPrimaryClient&&n===0||!s.isPrimaryClient&&n===1){const r=[];s.Tu.forEach(((i,o)=>{const a=o.view.va(e);a.snapshot&&r.push(a.snapshot)})),(function(o,a){const l=Pe(o);l.onlineState=a;let u=!1;l.queries.forEach(((h,f)=>{for(const p of f.Sa)p.va(a)&&(u=!0)})),u&&ad(l)})(s.eventManager,e),r.length&&s.Pu.H_(r),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function RV(t,e,n){const s=Pe(t);s.sharedClientState.updateQueryState(e,"rejected",n);const r=s.Au.get(e),i=r&&r.key;if(i){let o=new st(ye.comparator);o=o.insert(i,Bt.newNoDocument(i,Ce.min()));const a=Me().add(i),l=new Ol(Ce.min(),new Map,new st(Le),o,a);await jT(s,l),s.du=s.du.remove(i),s.Au.delete(e),ld(s)}else await $h(s.localStore,e,!1).then((()=>qh(s,e,n))).catch(ji)}async function SV(t,e){const n=Pe(t),s=e.batch.batchId;try{const r=await xO(n.localStore,e);GT(n,s,null),qT(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await Ta(n,r)}catch(r){await ji(r)}}async function CV(t,e,n){const s=Pe(t);try{const r=await(function(o,a){const l=Pe(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",(u=>{let h;return l.mutationQueue.lookupMutationBatch(u,a).next((f=>(qe(f!==null,37113),h=f.keys(),l.mutationQueue.removeMutationBatch(u,f)))).next((()=>l.mutationQueue.performConsistencyCheck(u))).next((()=>l.documentOverlayCache.removeOverlaysForBatchId(u,h,a))).next((()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,h))).next((()=>l.localDocuments.getDocuments(u,h)))}))})(s.localStore,e);GT(s,e,n),qT(s,e),s.sharedClientState.updateMutationState(e,"rejected",n),await Ta(s,r)}catch(r){await ji(r)}}function qT(t,e){(t.mu.get(e)||[]).forEach((n=>{n.resolve()})),t.mu.delete(e)}function GT(t,e,n){const s=Pe(t);let r=s.Vu[s.currentUser.toKey()];if(r){const i=r.get(e);i&&(n?i.reject(n):i.resolve(),r=r.remove(e)),s.Vu[s.currentUser.toKey()]=r}}function qh(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const s of t.Iu.get(e))t.Tu.delete(s),n&&t.Pu.yu(s,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach((s=>{t.Ru.containsKey(s)||WT(t,s)}))}function WT(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(td(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),ld(t))}function e_(t,e,n){for(const s of n)s instanceof BT?(t.Ru.addReference(s.key,e),PV(t,s)):s instanceof $T?(me(cd,"Document no longer in limbo: "+s.key),t.Ru.removeReference(s.key,e),t.Ru.containsKey(s.key)||WT(t,s.key)):Ae(19791,{wu:s})}function PV(t,e){const n=e.key,s=n.path.canonicalString();t.du.get(n)||t.Eu.has(s)||(me(cd,"New document in limbo: "+n),t.Eu.add(s),ld(t))}function ld(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new ye(Ze.fromString(e)),s=t.fu.next();t.Au.set(s,new yV(n)),t.du=t.du.insert(n,s),NT(t.remoteStore,new $s(Bn(Wf(n.path)),s,"TargetPurposeLimboResolution",Al.ce))}}async function Ta(t,e,n){const s=Pe(t),r=[],i=[],o=[];s.Tu.isEmpty()||(s.Tu.forEach(((a,l)=>{o.push(s.pu(l,e,n).then((u=>{if((u||n)&&s.isPrimaryClient){const h=u?!u.fromCache:n?.targetChanges.get(l.targetId)?.current;s.sharedClientState.updateQueryState(l.targetId,h?"current":"not-current")}if(u){r.push(u);const h=Zf.As(l.targetId,u);i.push(h)}})))})),await Promise.all(o),s.Pu.H_(r),await(async function(l,u){const h=Pe(l);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",(f=>J.forEach(u,(p=>J.forEach(p.Es,(m=>h.persistence.referenceDelegate.addReference(f,p.targetId,m))).next((()=>J.forEach(p.ds,(m=>h.persistence.referenceDelegate.removeReference(f,p.targetId,m)))))))))}catch(f){if(!qi(f))throw f;me(ed,"Failed to update sequence numbers: "+f)}for(const f of u){const p=f.targetId;if(!f.fromCache){const m=h.Ms.get(p),b=m.snapshotVersion,v=m.withLastLimboFreeSnapshotVersion(b);h.Ms=h.Ms.insert(p,v)}}})(s.localStore,i))}async function kV(t,e){const n=Pe(t);if(!n.currentUser.isEqual(e)){me(cd,"User change. New user:",e.toKey());const s=await ST(n.localStore,e);n.currentUser=e,(function(i,o){i.mu.forEach((a=>{a.forEach((l=>{l.reject(new ce(K.CANCELLED,o))}))})),i.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await Ta(n,s.Ls)}}function NV(t,e){const n=Pe(t),s=n.Au.get(e);if(s&&s.hu)return Me().add(s.key);{let r=Me();const i=n.Iu.get(e);if(!i)return r;for(const o of i){const a=n.Tu.get(o);r=r.unionWith(a.view.nu)}return r}}function zT(t){const e=Pe(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=jT.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=NV.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=RV.bind(null,e),e.Pu.H_=pV.bind(null,e.eventManager),e.Pu.yu=mV.bind(null,e.eventManager),e}function DV(t){const e=Pe(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=SV.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=CV.bind(null,e),e}class Xc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Vl(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return MO(this.persistence,new OO,e.initialUser,this.serializer)}Cu(e){return new RT(Xf.mi,this.serializer)}Du(e){return new jO}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Xc.provider={build:()=>new Xc};class OV extends Xc{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){qe(this.persistence.referenceDelegate instanceof Yc,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new yO(s,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Yt.withCacheSize(this.cacheSizeBytes):Yt.DEFAULT;return new RT((s=>Yc.mi(s,n)),this.serializer)}}class Gh{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>Zg(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=kV.bind(null,this.syncEngine),await hV(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new dV})()}createDatastore(e){const n=Vl(e.databaseInfo.databaseId),s=(function(i){return new KO(i)})(e.databaseInfo);return(function(i,o,a,l){return new XO(i,o,a,l)})(e.authCredentials,e.appCheckCredentials,s,n)}createRemoteStore(e){return(function(s,r,i,o,a){return new eV(s,r,i,o,a)})(this.localStore,this.datastore,e.asyncQueue,(n=>Zg(this.syncEngine,n,0)),(function(){return zg.v()?new zg:new qO})())}createSyncEngine(e,n){return(function(r,i,o,a,l,u,h){const f=new vV(r,i,o,a,l,u);return h&&(f.gu=!0),f})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){await(async function(n){const s=Pe(n);me(Br,"RemoteStore shutting down."),s.Ea.add(5),await Ea(s),s.Aa.shutdown(),s.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Gh.provider={build:()=>new Gh};class KT{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):ps("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}const sr="FirestoreClient";class VV{constructor(e,n,s,r,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=s,this.databaseInfo=r,this.user=Ft.UNAUTHENTICATED,this.clientId=bl.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(s,(async o=>{me(sr,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(s,(o=>(me(sr,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new os;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const s=od(n,"Failed to shutdown persistence");e.reject(s)}})),e.promise}}async function Fu(t,e){t.asyncQueue.verifyOperationInProgress(),me(sr,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let s=n.initialUser;t.setCredentialChangeListener((async r=>{s.isEqual(r)||(await ST(e.localStore,r),s=r)})),e.persistence.setDatabaseDeletedListener((()=>t.terminate())),t._offlineComponents=e}async function t_(t,e){t.asyncQueue.verifyOperationInProgress();const n=await LV(t);me(sr,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener((s=>Qg(e.remoteStore,s))),t.setAppCheckTokenChangeListener(((s,r)=>Qg(e.remoteStore,r))),t._onlineComponents=e}async function LV(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){me(sr,"Using user provided OfflineComponentProvider");try{await Fu(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(r){return r.name==="FirebaseError"?r.code===K.FAILED_PRECONDITION||r.code===K.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11})(n))throw n;Ur("Error using user provided cache. Falling back to memory cache: "+n),await Fu(t,new Xc)}}else me(sr,"Using default OfflineComponentProvider"),await Fu(t,new OV(void 0));return t._offlineComponents}async function QT(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(me(sr,"Using user provided OnlineComponentProvider"),await t_(t,t._uninitializedComponentsProvider._online)):(me(sr,"Using default OnlineComponentProvider"),await t_(t,new Gh))),t._onlineComponents}function MV(t){return QT(t).then((e=>e.syncEngine))}async function YT(t){const e=await QT(t),n=e.eventManager;return n.onListen=EV.bind(null,e.syncEngine),n.onUnlisten=bV.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=TV.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=IV.bind(null,e.syncEngine),n}function xV(t,e,n={}){const s=new os;return t.asyncQueue.enqueueAndForget((async()=>(function(i,o,a,l,u){const h=new KT({next:p=>{h.Nu(),o.enqueueAndForget((()=>FT(i,f)));const m=p.docs.has(a);!m&&p.fromCache?u.reject(new ce(K.UNAVAILABLE,"Failed to get document because the client is offline.")):m&&p.fromCache&&l&&l.source==="server"?u.reject(new ce(K.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(p)},error:p=>u.reject(p)}),f=new UT(Wf(a.path),h,{includeMetadataChanges:!0,qa:!0});return xT(i,f)})(await YT(t),t.asyncQueue,e,n,s))),s.promise}function FV(t,e,n={}){const s=new os;return t.asyncQueue.enqueueAndForget((async()=>(function(i,o,a,l,u){const h=new KT({next:p=>{h.Nu(),o.enqueueAndForget((()=>FT(i,f))),p.fromCache&&l.source==="server"?u.reject(new ce(K.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(p)},error:p=>u.reject(p)}),f=new UT(a,h,{includeMetadataChanges:!0,qa:!0});return xT(i,f)})(await YT(t),t.asyncQueue,e,n,s))),s.promise}function JT(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}const n_=new Map;const XT="firestore.googleapis.com",s_=!0;class r_{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ce(K.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=XT,this.ssl=s_}else this.host=e.host,this.ssl=e.ssl??s_;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=AT;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<gO)throw new ce(K.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}FE("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=JT(e.experimentalLongPollingOptions??{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new ce(K.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new ce(K.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new ce(K.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(s,r){return s.timeoutSeconds===r.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class xl{constructor(e,n,s,r){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=s,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new r_({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ce(K.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ce(K.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new r_(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(s){if(!s)return new ME;switch(s.type){case"firstParty":return new KN(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new ce(K.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const s=n_.get(n);s&&(me("ComponentProvider","Removing Datastore"),n_.delete(n),s.terminate())})(this),Promise.resolve()}}function ZT(t,e,n,s={}){t=mn(t,xl);const r=Ui(e),i=t._getSettings(),o={...i,emulatorOptions:t._getEmulatorOptions()},a=`${e}:${n}`;r&&(Bv(`https://${a}`),$v("Firestore",!0)),i.host!==XT&&i.host!==a&&Ur("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const l={...i,host:a,ssl:r,emulatorOptions:s};if(!Vr(l,o)&&(t._setSettings(l),s.mockUserToken)){let u,h;if(typeof s.mockUserToken=="string")u=s.mockUserToken,h=Ft.MOCK_USER;else{u=ZC(s.mockUserToken,t._app?.options.projectId);const f=s.mockUserToken.sub||s.mockUserToken.user_id;if(!f)throw new ce(K.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new Ft(f)}t._authCredentials=new GN(new LE(u,h))}}class cr{constructor(e,n,s){this.converter=n,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new cr(this.firestore,e,this._query)}}class at{constructor(e,n,s){this.converter=n,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new as(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new at(this.firestore,e,this._key)}toJSON(){return{type:at._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,s){if(_a(n,at._jsonSchema))return new at(e,s||null,new ye(Ze.fromString(n.referencePath)))}}at._jsonSchemaVersion="firestore/documentReference/1.0",at._jsonSchema={type:yt("string",at._jsonSchemaVersion),referencePath:yt("string")};class as extends cr{constructor(e,n,s){super(e,n,Wf(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new at(this.firestore,null,new ye(e))}withConverter(e){return new as(this.firestore,e,this._path)}}function Vn(t,e,...n){if(t=lt(t),xE("collection","path",e),t instanceof xl){const s=Ze.fromString(e,...n);return _g(s),new as(t,null,s)}{if(!(t instanceof at||t instanceof as))throw new ce(K.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=t._path.child(Ze.fromString(e,...n));return _g(s),new as(t.firestore,null,s)}}function Wt(t,e,...n){if(t=lt(t),arguments.length===1&&(e=bl.newId()),xE("doc","path",e),t instanceof xl){const s=Ze.fromString(e,...n);return gg(s),new at(t,null,new ye(s))}{if(!(t instanceof at||t instanceof as))throw new ce(K.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=t._path.child(Ze.fromString(e,...n));return gg(s),new at(t.firestore,t instanceof as?t.converter:null,new ye(s))}}const i_="AsyncQueue";class o_{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new PT(this,"async_queue_retry"),this._c=()=>{const s=xu();s&&me(i_,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=e;const n=xu();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=xu();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new os;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!qi(e))throw e;me(i_,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((s=>{throw this.nc=s,this.rc=!1,ps("INTERNAL UNHANDLED ERROR: ",a_(s)),s})).then((s=>(this.rc=!1,s))))));return this.ac=n,n}enqueueAfterDelay(e,n,s){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const r=id.createAndSchedule(this,e,n,s,(i=>this.hc(i)));return this.tc.push(r),r}uc(){this.nc&&Ae(47125,{Pc:a_(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,s)=>n.targetTimeMs-s.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function a_(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class lr extends xl{constructor(e,n,s,r){super(e,n,s,r),this.type="firestore",this._queue=new o_,this._persistenceKey=r?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new o_(e),this._firestoreClient=void 0,await e}}}function ew(t,e){const n=typeof t=="object"?t:Gv(),s=typeof t=="string"?t:Gc,r=Nf(n,"firestore").getImmediate({identifier:s});if(!r._initialized){const i=JC("firestore");i&&ZT(r,...i)}return r}function wa(t){if(t._terminated)throw new ce(K.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||UV(t),t._firestoreClient}function UV(t){const e=t._freezeSettings(),n=(function(r,i,o,a){return new uD(r,i,o,a.host,a.ssl,a.experimentalForceLongPolling,a.experimentalAutoDetectLongPolling,JT(a.experimentalLongPollingOptions),a.useFetchStreams,a.isUsingEmulator)})(t._databaseId,t._app?.options.appId||"",t._persistenceKey,e);t._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new VV(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&(function(r){const i=r?._online.build();return{_offline:r?._offline.build(i),_online:i}})(t._componentsProvider))}class rn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new rn(Pt.fromBase64String(e))}catch(n){throw new ce(K.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new rn(Pt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:rn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(_a(e,rn._jsonSchema))return rn.fromBase64String(e.bytes)}}rn._jsonSchemaVersion="firestore/bytes/1.0",rn._jsonSchema={type:yt("string",rn._jsonSchemaVersion),bytes:yt("string")};class zi{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new ce(K.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new St(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class ba{constructor(e){this._methodName=e}}class Tn{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ce(K.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ce(K.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Le(this._lat,e._lat)||Le(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Tn._jsonSchemaVersion}}static fromJSON(e){if(_a(e,Tn._jsonSchema))return new Tn(e.latitude,e.longitude)}}Tn._jsonSchemaVersion="firestore/geoPoint/1.0",Tn._jsonSchema={type:yt("string",Tn._jsonSchemaVersion),latitude:yt("number"),longitude:yt("number")};class wn{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(s,r){if(s.length!==r.length)return!1;for(let i=0;i<s.length;++i)if(s[i]!==r[i])return!1;return!0})(this._values,e._values)}toJSON(){return{type:wn._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(_a(e,wn._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new wn(e.vectorValues);throw new ce(K.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}wn._jsonSchemaVersion="firestore/vectorValue/1.0",wn._jsonSchema={type:yt("string",wn._jsonSchemaVersion),vectorValues:yt("object")};const BV=/^__.*__$/;class $V{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return this.fieldMask!==null?new ar(e,this.data,this.fieldMask,n,this.fieldTransforms):new ya(e,this.data,n,this.fieldTransforms)}}class tw{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return new ar(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function nw(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ae(40011,{Ac:t})}}class ud{constructor(e,n,s,r,i,o){this.settings=e,this.databaseId=n,this.serializer=s,this.ignoreUndefinedProperties=r,i===void 0&&this.Rc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new ud({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const n=this.path?.child(e),s=this.Vc({path:n,fc:!1});return s.gc(e),s}yc(e){const n=this.path?.child(e),s=this.Vc({path:n,fc:!1});return s.Rc(),s}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Zc(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(nw(this.Ac)&&BV.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class HV{constructor(e,n,s){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=s||Vl(e)}Cc(e,n,s,r=!1){return new ud({Ac:e,methodName:n,Dc:s,path:St.emptyPath(),fc:!1,bc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Fl(t){const e=t._freezeSettings(),n=Vl(t._databaseId);return new HV(t._databaseId,!!e.ignoreUndefinedProperties,n)}function sw(t,e,n,s,r,i={}){const o=t.Cc(i.merge||i.mergeFields?2:0,e,n,r);fd("Data must be an object, but it was:",o,s);const a=ow(s,o);let l,u;if(i.merge)l=new on(o.fieldMask),u=o.fieldTransforms;else if(i.mergeFields){const h=[];for(const f of i.mergeFields){const p=Wh(e,f,n);if(!o.contains(p))throw new ce(K.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);cw(h,p)||h.push(p)}l=new on(h),u=o.fieldTransforms.filter((f=>l.covers(f.field)))}else l=null,u=o.fieldTransforms;return new $V(new Xt(a),l,u)}class Ul extends ba{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Ul}}class hd extends ba{_toFieldTransform(e){return new MD(e.path,new ea)}isEqual(e){return e instanceof hd}}function rw(t,e,n,s){const r=t.Cc(1,e,n);fd("Data must be an object, but it was:",r,s);const i=[],o=Xt.empty();or(s,((l,u)=>{const h=dd(e,l,n);u=lt(u);const f=r.yc(h);if(u instanceof Ul)i.push(h);else{const p=Ia(u,f);p!=null&&(i.push(h),o.set(h,p))}}));const a=new on(i);return new tw(o,a,r.fieldTransforms)}function iw(t,e,n,s,r,i){const o=t.Cc(1,e,n),a=[Wh(e,s,n)],l=[r];if(i.length%2!=0)throw new ce(K.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let p=0;p<i.length;p+=2)a.push(Wh(e,i[p])),l.push(i[p+1]);const u=[],h=Xt.empty();for(let p=a.length-1;p>=0;--p)if(!cw(u,a[p])){const m=a[p];let b=l[p];b=lt(b);const v=o.yc(m);if(b instanceof Ul)u.push(m);else{const D=Ia(b,v);D!=null&&(u.push(m),h.set(m,D))}}const f=new on(u);return new tw(h,f,o.fieldTransforms)}function jV(t,e,n,s=!1){return Ia(n,t.Cc(s?4:3,e))}function Ia(t,e){if(aw(t=lt(t)))return fd("Unsupported field value:",e,t),ow(t,e);if(t instanceof ba)return(function(s,r){if(!nw(r.Ac))throw r.Sc(`${s._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Sc(`${s._methodName}() is not currently supported inside arrays`);const i=s._toFieldTransform(r);i&&r.fieldTransforms.push(i)})(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(s,r){const i=[];let o=0;for(const a of s){let l=Ia(a,r.wc(o));l==null&&(l={nullValue:"NULL_VALUE"}),i.push(l),o++}return{arrayValue:{values:i}}})(t,e)}return(function(s,r){if((s=lt(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return OD(r.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const i=et.fromDate(s);return{timestampValue:Qc(r.serializer,i)}}if(s instanceof et){const i=new et(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:Qc(r.serializer,i)}}if(s instanceof Tn)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof rn)return{bytesValue:yT(r.serializer,s._byteString)};if(s instanceof at){const i=r.databaseId,o=s.firestore._databaseId;if(!o.isEqual(i))throw r.Sc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Yf(s.firestore._databaseId||r.databaseId,s._key.path)}}if(s instanceof wn)return(function(o,a){return{mapValue:{fields:{[zE]:{stringValue:KE},[Wc]:{arrayValue:{values:o.toArray().map((u=>{if(typeof u!="number")throw a.Sc("VectorValues must only contain numeric values.");return zf(a.serializer,u)}))}}}}}})(s,r);throw r.Sc(`Unsupported field value: ${Il(s)}`)})(t,e)}function ow(t,e){const n={};return $E(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):or(t,((s,r)=>{const i=Ia(r,e.mc(s));i!=null&&(n[s]=i)})),{mapValue:{fields:n}}}function aw(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof et||t instanceof Tn||t instanceof rn||t instanceof at||t instanceof ba||t instanceof wn)}function fd(t,e,n){if(!aw(n)||!UE(n)){const s=Il(n);throw s==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+s)}}function Wh(t,e,n){if((e=lt(e))instanceof zi)return e._internalPath;if(typeof e=="string")return dd(t,e);throw Zc("Field path arguments must be of type string or ",t,!1,void 0,n)}const qV=new RegExp("[~\\*/\\[\\]]");function dd(t,e,n){if(e.search(qV)>=0)throw Zc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new zi(...e.split("."))._internalPath}catch{throw Zc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Zc(t,e,n,s,r){const i=s&&!s.isEmpty(),o=r!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(i||o)&&(l+=" (found",i&&(l+=` in field ${s}`),o&&(l+=` in document ${r}`),l+=")"),new ce(K.INVALID_ARGUMENT,a+t+l)}function cw(t,e){return t.some((n=>n.isEqual(e)))}class lw{constructor(e,n,s,r,i){this._firestore=e,this._userDataWriter=n,this._key=s,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new at(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new GV(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Bl("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class GV extends lw{data(){return super.data()}}function Bl(t,e){return typeof e=="string"?dd(t,e):e instanceof zi?e._internalPath:e._delegate._internalPath}function WV(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new ce(K.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class pd{}class md extends pd{}function ks(t,e,...n){let s=[];e instanceof pd&&s.push(e),s=s.concat(n),(function(i){const o=i.filter((l=>l instanceof $l)).length,a=i.filter((l=>l instanceof Aa)).length;if(o>1||o>0&&a>0)throw new ce(K.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(s);for(const r of s)t=r._apply(t);return t}class Aa extends md{constructor(e,n,s){super(),this._field=e,this._op=n,this._value=s,this.type="where"}static _create(e,n,s){return new Aa(e,n,s)}_apply(e){const n=this._parse(e);return uw(e._query,n),new cr(e.firestore,e.converter,Lh(e._query,n))}_parse(e){const n=Fl(e.firestore);return(function(i,o,a,l,u,h,f){let p;if(u.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new ce(K.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){l_(f,h);const b=[];for(const v of f)b.push(c_(l,i,v));p={arrayValue:{values:b}}}else p=c_(l,i,f)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||l_(f,h),p=jV(a,o,f,h==="in"||h==="not-in");return _t.create(u,h,p)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function _c(t,e,n){const s=e,r=Bl("where",t);return Aa._create(r,s,n)}class $l extends pd{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new $l(e,n)}_parse(e){const n=this._queryConstraints.map((s=>s._parse(e))).filter((s=>s.getFilters().length>0));return n.length===1?n[0]:Cn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(r,i){let o=r;const a=i.getFlattenedFilters();for(const l of a)uw(o,l),o=Lh(o,l)})(e._query,n),new cr(e.firestore,e.converter,Lh(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Hl extends md{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Hl(e,n)}_apply(e){const n=(function(r,i,o){if(r.startAt!==null)throw new ce(K.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(r.endAt!==null)throw new ce(K.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Zo(i,o)})(e._query,this._field,this._direction);return new cr(e.firestore,e.converter,(function(r,i){const o=r.explicitOrderBy.concat([i]);return new Gi(r.path,r.collectionGroup,o,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)})(e._query,n))}}function zh(t,e="asc"){const n=e,s=Bl("orderBy",t);return Hl._create(s,n)}function c_(t,e,n){if(typeof(n=lt(n))=="string"){if(n==="")throw new ce(K.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!nT(e)&&n.indexOf("/")!==-1)throw new ce(K.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const s=e.path.child(Ze.fromString(n));if(!ye.isDocumentKey(s))throw new ce(K.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return Ag(t,new ye(s))}if(n instanceof at)return Ag(t,n._key);throw new ce(K.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Il(n)}.`)}function l_(t,e){if(!Array.isArray(t)||t.length===0)throw new ce(K.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function uw(t,e){const n=(function(r,i){for(const o of r)for(const a of o.getFlattenedFilters())if(i.indexOf(a.op)>=0)return a.op;return null})(t.filters,(function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new ce(K.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ce(K.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class hw{convertValue(e,n="none"){switch(tr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return dt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(er(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Ae(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const s={};return or(e,((r,i)=>{s[r]=this.convertValue(i,n)})),s}convertVectorValue(e){const n=e.fields?.[Wc].arrayValue?.values?.map((s=>dt(s.doubleValue)));return new wn(n)}convertGeoPoint(e){return new Tn(dt(e.latitude),dt(e.longitude))}convertArray(e,n){return(e.values||[]).map((s=>this.convertValue(s,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const s=Sl(e);return s==null?null:this.convertValue(s,n);case"estimate":return this.convertTimestamp(Jo(e));default:return null}}convertTimestamp(e){const n=Zs(e);return new et(n.seconds,n.nanos)}convertDocumentKey(e,n){const s=Ze.fromString(e);qe(IT(s),9688,{name:e});const r=new Pi(s.get(1),s.get(3)),i=new ye(s.popFirst(5));return r.isEqual(n)||ps(`Document ${i} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}function fw(t,e,n){let s;return s=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,s}class oi{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Qs extends lw{constructor(e,n,s,r,i,o){super(e,n,s,r,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new xo(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const s=this._document.data.field(Bl("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ce(K.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Qs._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Qs._jsonSchemaVersion="firestore/documentSnapshot/1.0",Qs._jsonSchema={type:yt("string",Qs._jsonSchemaVersion),bundleSource:yt("string","DocumentSnapshot"),bundleName:yt("string"),bundle:yt("string")};class xo extends Qs{data(e={}){return super.data(e)}}class Nr{constructor(e,n,s,r){this._firestore=e,this._userDataWriter=n,this._snapshot=r,this.metadata=new oi(r.hasPendingWrites,r.fromCache),this.query=s}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((s=>{e.call(n,new xo(this._firestore,this._userDataWriter,s.key,s,new oi(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ce(K.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(r,i){if(r._snapshot.oldDocs.isEmpty()){let o=0;return r._snapshot.docChanges.map((a=>{const l=new xo(r._firestore,r._userDataWriter,a.doc.key,a.doc,new oi(r._snapshot.mutatedKeys.has(a.doc.key),r._snapshot.fromCache),r.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}}))}{let o=r._snapshot.oldDocs;return r._snapshot.docChanges.filter((a=>i||a.type!==3)).map((a=>{const l=new xo(r._firestore,r._userDataWriter,a.doc.key,a.doc,new oi(r._snapshot.mutatedKeys.has(a.doc.key),r._snapshot.fromCache),r.query.converter);let u=-1,h=-1;return a.type!==0&&(u=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),h=o.indexOf(a.doc.key)),{type:zV(a.type),doc:l,oldIndex:u,newIndex:h}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ce(K.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Nr._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=bl.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],s=[],r=[];return this.docs.forEach((i=>{i._document!==null&&(n.push(i._document),s.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),r.push(i.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function zV(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ae(61501,{type:t})}}function Vi(t){t=mn(t,at);const e=mn(t.firestore,lr);return xV(wa(e),t._key).then((n=>KV(e,t,n)))}Nr._jsonSchemaVersion="firestore/querySnapshot/1.0",Nr._jsonSchema={type:yt("string",Nr._jsonSchemaVersion),bundleSource:yt("string","QuerySnapshot"),bundleName:yt("string"),bundle:yt("string")};class dw extends hw{constructor(e){super(),this.firestore=e}convertBytes(e){return new rn(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new at(this.firestore,null,n)}}function Fo(t){t=mn(t,cr);const e=mn(t.firestore,lr),n=wa(e),s=new dw(e);return WV(t._query),FV(n,t._query).then((r=>new Nr(e,s,t,r)))}function Hs(t,e,n){t=mn(t,at);const s=mn(t.firestore,lr),r=fw(t.converter,e,n);return Ra(s,[sw(Fl(s),"setDoc",t._key,r,t.converter!==null,n).toMutation(t._key,en.none())])}function pw(t,e,n,...s){t=mn(t,at);const r=mn(t.firestore,lr),i=Fl(r);let o;return o=typeof(e=lt(e))=="string"||e instanceof zi?iw(i,"updateDoc",t._key,e,n,s):rw(i,"updateDoc",t._key,e),Ra(r,[o.toMutation(t._key,en.exists(!0))])}function Uo(t){return Ra(mn(t.firestore,lr),[new Dl(t._key,en.none())])}function Ra(t,e){return(function(s,r){const i=new os;return s.asyncQueue.enqueueAndForget((async()=>AV(await MV(s),r,i))),i.promise})(wa(t),e)}function KV(t,e,n){const s=n.docs.get(e._key),r=new dw(t);return new Qs(t,r,e._key,s,new oi(n.hasPendingWrites,n.fromCache),e.converter)}class mw{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Fl(e)}set(e,n,s){this._verifyNotCommitted();const r=Uu(e,this._firestore),i=fw(r.converter,n,s),o=sw(this._dataReader,"WriteBatch.set",r._key,i,r.converter!==null,s);return this._mutations.push(o.toMutation(r._key,en.none())),this}update(e,n,s,...r){this._verifyNotCommitted();const i=Uu(e,this._firestore);let o;return o=typeof(n=lt(n))=="string"||n instanceof zi?iw(this._dataReader,"WriteBatch.update",i._key,n,s,r):rw(this._dataReader,"WriteBatch.update",i._key,n),this._mutations.push(o.toMutation(i._key,en.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=Uu(e,this._firestore);return this._mutations=this._mutations.concat(new Dl(n._key,en.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new ce(K.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Uu(t,e){if((t=lt(t)).firestore!==e)throw new ce(K.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}function yc(){return new hd("serverTimestamp")}function gw(t){return wa(t=mn(t,lr)),new mw(t,(e=>Ra(t,e)))}(function(e,n=!0){(function(r){Hi=r})(Bi),Ri(new Lr("firestore",((s,{instanceIdentifier:r,options:i})=>{const o=s.getProvider("app").getImmediate(),a=new lr(new WN(s.getProvider("auth-internal")),new QN(o,s.getProvider("app-check-internal")),(function(u,h){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new ce(K.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Pi(u.options.projectId,h)})(o,r),o);return i={useFetchStreams:n,...i},a._setSettings(i),a}),"PUBLIC").setMultipleInstances(!0)),zs(fg,dg,e),zs(fg,dg,"esm2020")})();const QV=Object.freeze(Object.defineProperty({__proto__:null,AbstractUserDataWriter:hw,Bytes:rn,CollectionReference:as,DocumentReference:at,DocumentSnapshot:Qs,FieldPath:zi,FieldValue:ba,Firestore:lr,FirestoreError:ce,GeoPoint:Tn,Query:cr,QueryCompositeFilterConstraint:$l,QueryConstraint:md,QueryDocumentSnapshot:xo,QueryFieldFilterConstraint:Aa,QueryOrderByConstraint:Hl,QuerySnapshot:Nr,SnapshotMetadata:oi,Timestamp:et,VectorValue:wn,WriteBatch:mw,_AutoId:bl,_ByteString:Pt,_DatabaseId:Pi,_DocumentKey:ye,_EmptyAuthCredentialsProvider:ME,_FieldPath:St,_cast:mn,_logWarn:Ur,_validateIsNotUsedTogether:FE,collection:Vn,connectFirestoreEmulator:ZT,deleteDoc:Uo,doc:Wt,ensureFirestoreConfigured:wa,executeWrite:Ra,getDoc:Vi,getDocs:Fo,getFirestore:ew,orderBy:zh,query:ks,serverTimestamp:yc,setDoc:Hs,updateDoc:pw,where:_c,writeBatch:gw},Symbol.toStringTag,{value:"Module"}));var YV="firebase",JV="12.7.0";zs(YV,JV,"app");const XV={apiKey:"AIzaSyCx092q7up_BXFgK2e13A-IQ3uDjwf6J5A",authDomain:"accsuite117.firebaseapp.com",projectId:"accsuite117",storageBucket:"accsuite117.firebasestorage.app",messagingSenderId:"352958845592",appId:"1:352958845592:web:bb6a7fbe04f6181707f6ed"};let sa,Ir,Xe;$m().length?sa=$m()[0]:sa=qv(XV);Ir=jN(sa);Xe=ew(sa);const ZV=Object.freeze(Object.defineProperty({__proto__:null,get app(){return sa},get auth(){return Ir},get db(){return Xe}},Symbol.toStringTag,{value:"Module"})),un=de(null),Cs=de("pilot"),u_=de(!0),vr=de(null);let h_=!1;function Ki(){const t=Fe(()=>!!un.value),e=Fe(()=>un.value?.emailVerified??!1),n=Fe(()=>un.value?.email??""),s=Fe(()=>un.value?.displayName??""),r=Fe(()=>Cs.value==="coach"),i=Fe(()=>Cs.value==="admin"),o=async v=>{try{const D=Wt(Xe,"users",v.uid),V=await Vi(D);if(!V.exists())await Hs(D,{email:v.email,nickname:v.displayName||"Utente",role:"pilot",createdAt:new Date().toISOString(),emailVerified:v.emailVerified}),Cs.value="pilot",console.log("[AUTH] Created missing user profile");else{const N=V.data();Cs.value=N.role||"pilot"}}catch(D){console.error("[AUTH] Failed to ensure user document:",D),Cs.value="pilot"}},a=()=>{h_||(h_=!0,N1(Ir,async v=>{if(un.value=v,v){await o(v);try{const D=window.electronAPI;if(console.log("[AUTH] electronAPI exists:",!!D),console.log("[AUTH] saveUserIdentity exists:",!!D?.saveUserIdentity),D?.saveUserIdentity){console.log("[AUTH] Calling saveUserIdentity with:",{userId:v.uid,email:v.email,displayName:v.displayName});const V=await D.saveUserIdentity({userId:v.uid,email:v.email,displayName:v.displayName||v.email?.split("@")[0]||"User"});console.log("[AUTH] Electron identity saved:",V?"":"")}else console.log("[AUTH] Not in Electron environment (electronAPI not available)")}catch(D){console.error("[AUTH] Identity save failed:",D)}}else{Cs.value="pilot";try{const D=window.electronAPI;D?.clearUserIdentity&&(await D.clearUserIdentity(),console.log("[AUTH] Electron identity cleared"))}catch{}}u_.value=!1,console.log("[AUTH] State changed:",v?.email??"logged out","| Role:",Cs.value)}))},l=async(v,D,V,N="",_="")=>{vr.value=null;try{const O=(await A1(Ir,v,D)).user;return await C1(O,{displayName:V}),await Hs(Wt(Xe,"users",O.uid),{firstName:N,lastName:_,nickname:V,email:v,role:"pilot",coachId:null,createdAt:new Date().toISOString(),emailVerified:!1}),await tg(O),console.log("[AUTH] Registered:",v,"Verification email sent"),{success:!0,user:O}}catch(S){return console.error("[AUTH] Register error:",S.code),vr.value=b(S.code),{success:!1,error:vr.value}}},u=async(v,D)=>{vr.value=null;try{const V=await R1(Ir,v,D);return console.log("[AUTH] Logged in:",v),{success:!0,user:V.user}}catch(V){return console.error("[AUTH] Login error:",V.code),vr.value=b(V.code),{success:!1,error:vr.value}}},h=async()=>{try{return await D1(Ir),console.log("[AUTH] Logged out"),{success:!0}}catch(v){return console.error("[AUTH] Logout error:",v),{success:!1,error:v.message}}},f=async()=>{if(!un.value)return{success:!1,error:"Utente non autenticato"};try{return await tg(un.value),console.log("[AUTH] Verification email resent"),{success:!0}}catch(v){return console.error("[AUTH] Resend error:",v.code),{success:!1,error:b(v.code)}}},p=async()=>{if(!un.value)return{verified:!1,error:"Utente non autenticato"};try{await un.value.reload(),un.value=Ir.currentUser;const v=un.value?.emailVerified??!1;return console.log("[AUTH] Email verified check:",v),{verified:v,error:null}}catch(v){return console.error("[AUTH] Check verification error:",v),{verified:!1,error:v.message}}},m=async v=>{try{const D=await Vi(Wt(Xe,"users",v));return D.exists()?D.data():null}catch(D){return console.error("[AUTH] Get profile error:",D),null}},b=v=>({"auth/email-already-in-use":"Email gi registrata","auth/weak-password":"Password troppo debole (min. 6 caratteri)","auth/invalid-email":"Email non valida","auth/user-not-found":"Utente non trovato","auth/wrong-password":"Password errata","auth/invalid-credential":"Credenziali non valide","auth/too-many-requests":"Troppi tentativi, riprova pi tardi","auth/network-request-failed":"Errore di rete, controlla la connessione"})[v]||"Errore di autenticazione";return a(),{currentUser:un,isLoading:u_,authError:vr,isAuthenticated:t,isEmailVerified:e,userEmail:n,userDisplayName:s,register:l,login:u,logout:h,resendVerificationEmail:f,checkEmailVerified:p,getUserProfile:m,userRole:Cs,isCoach:r,isAdmin:i}}let el=0,f_=0;async function Bu(t){return el++,console.log(`%c[FIREBASE]  READ #${el}: ${t.path}`,"color: #4CAF50"),Vi(t)}async function Er(t){el++,console.log(`%c[FIREBASE]  QUERY #${el}: (collection query)`,"color: #4CAF50");const e=await Fo(t);return console.log(`%c[FIREBASE]     Returned ${e.docs.length} documents`,"color: #8BC34A"),e}async function eL(t,e){return f_++,console.log(`%c[FIREBASE]  WRITE #${f_}: ${t.path}`,"color: #FF9800"),Hs(t,e)}const Ps={PRACTICE:0,QUALIFY:1,RACE:2};function ix(t){switch(t){case 0:return"practice";case 1:return"qualify";case 2:return"race";default:return"practice"}}function ox(t){if(!t||t<=0)return"--:--.---";const e=Math.round(t),n=Math.floor(e/6e4),s=Math.floor(e%6e4/1e3),r=e%1e3;return`${n}:${s.toString().padStart(2,"0")}.${r.toString().padStart(3,"0")}`}function $u(t){if(!t||t<=0)return"0h 0m";const e=Math.floor(t/36e5),n=Math.floor(t%36e5/6e4);return e>0?`${e}h ${n}m`:`${n}m`}function ax(t){return t?t.split("_").map((e,n)=>e.match(/^gt\d$/i)||e.length<=2?e.toUpperCase():e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()).join(" "):"Unknown"}function cx(t){return t?t.split("_").map(e=>e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()).join(" "):"Unknown"}function lx(t){if(!t)return"-";const e=new Date(t);return`${e.getDate()} ${["Gen","Feb","Mar","Apr","Mag","Giu","Lug","Ago","Set","Ott","Nov","Dic"][e.getMonth()]} ${e.getFullYear()}`}function ux(t){if(!t)return"-";const e=new Date(t);return`${e.getDate()} ${["GENNAIO","FEBBRAIO","MARZO","APRILE","MAGGIO","GIUGNO","LUGLIO","AGOSTO","SETTEMBRE","OTTOBRE","NOVEMBRE","DICEMBRE"][e.getMonth()]} ${e.getFullYear()}`}function hx(t){if(!t)return"-";const e=new Date(t);return`${e.getHours().toString().padStart(2,"0")}:${e.getMinutes().toString().padStart(2,"0")}`}const tL=de([]),nL=de(!1),sL=de(null),d_=de(null),tc=de(!1),p_="acc_trackBests_cache",m_="acc_trackActivity_cache";function g_(t,e,n){if(!(typeof window>"u"))try{const s={userId:n,data:e,timestamp:Date.now()};sessionStorage.setItem(t,JSON.stringify(s)),console.log(`[CACHE]  Saved ${t} to sessionStorage`)}catch(s){console.warn("[CACHE] Failed to save to sessionStorage:",s)}}function __(t,e){if(typeof window>"u")return null;try{const n=sessionStorage.getItem(t);if(!n)return null;const{userId:s,data:r,timestamp:i}=JSON.parse(n);return s!==e?(console.log(`[CACHE] Different user, invalidating ${t}`),sessionStorage.removeItem(t),null):Date.now()-i>36e5?(console.log(`[CACHE] Cache expired, invalidating ${t}`),sessionStorage.removeItem(t),null):(console.log(`[CACHE]  Loaded ${t} from sessionStorage (age: ${Math.round((Date.now()-i)/1e3)}s)`),r)}catch(n){return console.warn("[CACHE] Failed to load from sessionStorage:",n),null}}function jl(){const t=tL,e=nL,n=sL,{currentUser:s}=Ki(),r=Fe(()=>typeof window>"u"?!1:!!window.electronAPI);function i(Z,x){return`${Z.split(".")[0]}_${x}`.replace(/[^a-zA-Z0-9]/g,"_").substring(0,100)}function o(Z){const x=Z.session_info||{},Q=Z.stints||[],G={track:x.track||Z.track||"Unknown",date_start:x.date_start||Z.date||new Date().toISOString(),date_end:x.date_end||null,car:x.car_model||x.car||Z.car||"",session_type:x.session_type??0,driver:x.driver||null},z=["Flood","Wet","Damp","Greasy","Green","Fast","Optimum"],ee={};z.forEach(k=>{ee[k]={bestQualy:null,bestQualyTemp:null,bestRace:null,bestRaceTemp:null,bestAvgRace:null,bestAvgRaceTemp:null}});let L=null,q=null,Y=null,ne=null,se=null,ue=null;Q.forEach(k=>{const M=k.type==="Qualify",W=k.laps||[];W.forEach($=>{if($.is_valid&&!$.has_pit_stop&&$.lap_time_ms){const X=$.track_grip_status||"Unknown",te=$.air_temp||0,ie={airTemp:te,roadTemp:$.road_temp||0,grip:X};ee[X]&&(M?(!ee[X].bestQualy||$.lap_time_ms<ee[X].bestQualy)&&(ee[X].bestQualy=$.lap_time_ms,ee[X].bestQualyTemp=te):(!ee[X].bestRace||$.lap_time_ms<ee[X].bestRace)&&(ee[X].bestRace=$.lap_time_ms,ee[X].bestRaceTemp=te)),M?(!L||$.lap_time_ms<L)&&(L=$.lap_time_ms,q=ie):(!Y||$.lap_time_ms<Y)&&(Y=$.lap_time_ms,ne=ie)}});const B=W.filter($=>$.is_valid&&!$.has_pit_stop);if(!M&&k.avg_clean_lap&&B.length>=5){const $=B[0],X=$?.track_grip_status||"Unknown",te=$?.air_temp||0;ee[X]&&(!ee[X].bestAvgRace||k.avg_clean_lap<ee[X].bestAvgRace)&&(ee[X].bestAvgRace=k.avg_clean_lap,ee[X].bestAvgRaceTemp=te),(!se||k.avg_clean_lap<se)&&(se=k.avg_clean_lap,ue={airTemp:te,roadTemp:$?.road_temp||0,grip:X})}});const w={laps:x.laps_total||Z.laps?.length||0,lapsValid:x.laps_valid||0,bestLap:x.session_best_lap||Z.bestLap||null,avgCleanLap:x.avg_clean_lap||null,totalTime:x.total_drive_time_ms||0,stintCount:Q.length||0,best_qualy_ms:L,best_qualy_conditions:q,best_race_ms:Y,best_race_conditions:ne,best_avg_race_ms:se,best_avg_race_conditions:ue,best_by_grip:ee};return{meta:G,summary:w}}async function a(){if(!r.value)return[];const Z=window.electronAPI,x=await Z.getTelemetryFiles();if(!x||x.length===0)return[];const Q=s.value?.uid,G=[];for(const z of x)try{const ee=await Z.readFile(z.path);if(!ee||ee.ownerId&&ee.ownerId!==Q)continue;const{meta:L,summary:q}=o(ee),Y=i(L.date_start,L.track);G.push({sessionId:Y,fileHash:"",fileName:z.name,uploadedAt:null,meta:L,summary:q,rawChunkCount:0,rawSizeBytes:0})}catch(ee){console.warn(`[TELEMETRY] Error reading local file ${z.name}:`,ee)}return G.sort((z,ee)=>(ee.meta.date_start||"").localeCompare(z.meta.date_start||"")),G}async function l(Z){const x=Vn(Xe,`users/${Z}/sessions`);let Q;try{const G=ks(x,zh("uploadedAt","desc"));Q=await Er(G)}catch{console.warn("[TELEMETRY] orderBy failed, fetching without order"),Q=await Er(x)}return Q.docs.map(G=>{const z=G.data();return{sessionId:G.id,fileHash:z.fileHash||null,fileName:z.fileName||null,uploadedAt:z.uploadedAt||null,meta:z.meta||{},summary:z.summary||{},rawChunkCount:z.rawChunkCount||0,rawSizeBytes:z.rawSizeBytes||0}})}async function u(Z,x=!1){const Q=Z||s.value?.uid;if(!Q)return console.warn("[TELEMETRY] No user ID provided"),[];const G=d_.value!==Q;if(!x&&!G&&t.value.length>0)return console.log(`%c[TELEMETRY]  Using CACHED sessions (${t.value.length}), skipping Firebase query`,"color: #9C27B0"),t.value;d_.value=Q,e.value=!0,n.value=null;try{const z=!Z||Z===s.value?.uid;let ee=[];if(r.value&&z)try{ee=await a(),console.log(`[TELEMETRY] Found ${ee.length} local files`)}catch(se){console.warn("[TELEMETRY] Local load failed:",se)}const L=await l(Q),q=new Map;for(const se of L){const ue=(se.meta.date_start||"").split(".")[0],w=(se.meta.track||"").toLowerCase().replace(/[^a-z0-9]/g,"_"),k=`${ue}_${w}`,M=q.get(k);if(!M)q.set(k,se);else{const W=M.uploadedAt?.toMillis?.()||0;(se.uploadedAt?.toMillis?.()||0)>W&&q.set(k,se)}}const Y=L.length-q.size;Y>0&&console.log(`[TELEMETRY]  Removed ${Y} duplicate sessions (same date + track)`);let ne=0;for(const se of ee){const ue=(se.meta.date_start||"").split(".")[0],w=(se.meta.track||"").toLowerCase().replace(/[^a-z0-9]/g,"_"),k=`${ue}_${w}`;q.has(k)||(q.set(k,se),ne++)}return ne>0&&console.log(`[TELEMETRY]  Merged ${ne} local-only sessions (not yet uploaded)`),t.value=Array.from(q.values()),t.value.sort((se,ue)=>(ue.meta.date_start||"").localeCompare(se.meta.date_start||"")),console.log(`[TELEMETRY]  Loaded ${t.value.length} sessions (${L.length} Firebase + ${ne} local-only)`),t.value}catch(z){return console.error("[TELEMETRY] Error loading sessions:",z),n.value=z.message,[]}finally{e.value=!1}}async function h(Z,x){const Q=x||s.value?.uid;if(!Q)return null;const G=!x||x===s.value?.uid;if(r.value&&G)try{const z=window.electronAPI,ee=await z.getTelemetryFiles();for(const L of ee){const q=await z.readFile(L.path);if(!q||q.ownerId&&q.ownerId!==Q)continue;const Y=q.session_info||{};if(i(Y.date_start||q.date||"",Y.track||q.track||"")===Z)return console.log("[TELEMETRY]  Loaded full session from LOCAL file (0 Firebase reads)"),q}}catch(z){console.warn("[TELEMETRY] Local fetchSessionFull failed, falling back to Firebase:",z)}try{const z=Q!==s.value?.uid,ee=Wt(Xe,`users/${Q}/sessions/${Z}`),L=await Bu(ee);if(!L.exists()||(L.data().rawChunkCount||0)===0)return null;const ne=Vn(Xe,`users/${Q}/sessions/${Z}/rawChunks`),se=z?ks(ne,_c("isPublic","==",!0)):ks(ne,zh("idx","asc")),ue=await Er(se),w=[];ue.forEach(M=>{const W=M.data();w.push({idx:W.idx,chunk:W.chunk})}),w.sort((M,W)=>M.idx-W.idx);const k=w.map(M=>M.chunk).join("");return console.log(`[TELEMETRY] Loaded full session from Firebase chunks${z?" (EXTERNAL)":""}`),JSON.parse(k)}catch(z){return console.error("[TELEMETRY] Error fetching full session:",z),null}}async function f(Z,x){const Q=Z.toLowerCase().replace(/[^a-z0-9]/g,"_"),G=["Flood","Wet","Damp","Greasy","Green","Fast","Optimum"],z={};G.forEach(L=>{z[L]={bestQualy:null,bestQualyTemp:null,bestQualySessionId:null,bestQualyDate:null,bestRace:null,bestRaceTemp:null,bestRaceSessionId:null,bestRaceDate:null,bestAvgRace:null,bestAvgRaceTemp:null,bestAvgRaceSessionId:null,bestAvgRaceDate:null}});const ee=t.value.filter(L=>{const q=L.meta.track.toLowerCase().replace(/[^a-z0-9]/g,"_");return q.includes(Q)||Q.includes(q)});if(ee.length===0)return z;for(const L of ee){const q=L.meta.date_start||null,Y=L.summary?.best_by_grip;if(Y)for(const ne of G){const se=Y[ne];if(!se)continue;const ue=z[ne];ue&&(se.bestQualy&&(!ue.bestQualy||se.bestQualy<ue.bestQualy)&&(ue.bestQualy=se.bestQualy,ue.bestQualyTemp=se.bestQualyTemp,ue.bestQualySessionId=L.sessionId,ue.bestQualyDate=q),se.bestRace&&(!ue.bestRace||se.bestRace<ue.bestRace)&&(ue.bestRace=se.bestRace,ue.bestRaceTemp=se.bestRaceTemp,ue.bestRaceSessionId=L.sessionId,ue.bestRaceDate=q),se.bestAvgRace&&(!ue.bestAvgRace||se.bestAvgRace<ue.bestAvgRace)&&(ue.bestAvgRace=se.bestAvgRace,ue.bestAvgRaceTemp=se.bestAvgRaceTemp,ue.bestAvgRaceSessionId=L.sessionId,ue.bestAvgRaceDate=q))}}return console.log(`[TELEMETRY]  Calculated trackBests for ${Q} from ${ee.length} sessions (0 extra queries)`),z}async function p(Z,x="Optimum",Q){return(await b(Z,Q))[x]||{bestQualy:null,bestQualyTemp:null,bestQualySessionId:null,bestQualyDate:null,bestRace:null,bestRaceTemp:null,bestRaceSessionId:null,bestRaceDate:null,bestAvgRace:null,bestAvgRaceTemp:null,bestAvgRaceSessionId:null,bestAvgRaceDate:null}}const m=de({});async function b(Z,x){const Q=x||s.value?.uid,G=Z.toLowerCase().replace(/[^a-z0-9]/g,"_"),z=`${G}_${Q||"anon"}`;if(m.value[z])return console.log(`[TELEMETRY] trackBests cache HIT for ${G}`),m.value[z];if(Q&&!r.value)try{const L=Wt(Xe,`users/${Q}/trackBests/${G}`),q=await Bu(L);if(q.exists()){const Y=q.data();console.log(`[TELEMETRY] trackBests Firebase HIT for ${G}`);const ne={},se=Y.bests||Y,ue=["Flood","Wet","Damp","Greasy","Green","Fast","Optimum"];for(const w of ue)se[w]&&(ne[w]=se[w]);if(se.Opt){const w=se.Opt;if(!ne.Optimum)ne.Optimum=w;else{const k=ne.Optimum;w.bestQualy&&(!k.bestQualy||w.bestQualy<k.bestQualy)&&(k.bestQualy=w.bestQualy,k.bestQualyTemp=w.bestQualyTemp,k.bestQualySessionId=w.bestQualySessionId,k.bestQualyDate=w.bestQualyDate),w.bestRace&&(!k.bestRace||w.bestRace<k.bestRace)&&(k.bestRace=w.bestRace,k.bestRaceTemp=w.bestRaceTemp,k.bestRaceSessionId=w.bestRaceSessionId,k.bestRaceDate=w.bestRaceDate),w.bestAvgRace&&(!k.bestAvgRace||w.bestAvgRace<k.bestAvgRace)&&(k.bestAvgRace=w.bestAvgRace,k.bestAvgRaceTemp=w.bestAvgRaceTemp,k.bestAvgRaceSessionId=w.bestAvgRaceSessionId,k.bestAvgRaceDate=w.bestAvgRaceDate)}}return m.value[z]=ne,ne}}catch(L){console.warn("[TELEMETRY] Error reading trackBests from Firebase:",L)}console.log(`[TELEMETRY] trackBests MISS for ${G}, calculating...`);const ee=await f(Z);if(Q&&!r.value)try{const L=Wt(Xe,`users/${Q}/trackBests/${G}`);await eL(L,{trackId:G,bests:ee,lastUpdated:new Date().toISOString()}),console.log(`[TELEMETRY] trackBests SAVED to Firebase for ${G}`)}catch(L){console.warn("[TELEMETRY] Error saving trackBests to Firebase:",L)}return m.value[z]=ee,ee}async function v(Z,x,Q=!1){const G=Z.toLowerCase().replace(/[^a-z0-9]/g,"_"),z=x||s.value?.uid,ee=`${G}_${z||"anon"}`;if(delete m.value[ee],console.log(`[TELEMETRY] trackBests cache INVALIDATED for ${G}`),Q&&z&&!r.value)try{const L=Wt(Xe,`users/${z}/trackBests/${G}`);await Uo(L),console.log(`[TELEMETRY] trackBests DELETED from Firebase for ${G}`)}catch(L){console.warn("[TELEMETRY] Error deleting trackBests from Firebase:",L)}}async function D(Z,x){return console.log(`[TELEMETRY] FORCE RECALCULATING trackBests for ${Z}`),await v(Z,x,!0),await b(Z,x)}async function V(Z){const x=Z||s.value?.uid;if(!x)return console.warn("[PREFETCH] No user ID, skipping prefetch"),0;const Q=__(p_,x),G=__(m_,x);if(Q&&Object.keys(Q).length>0)return console.log(`[PREFETCH]  Using sessionStorage cache: ${Object.keys(Q).length} trackBests`),Object.assign(m.value,Q),G&&Object.assign(N.value,G),tc.value=!0,Object.keys(Q).length;console.log(`[PREFETCH]  Starting batch prefetch for user ${x}`);const z=Date.now();try{const ee=Vn(Xe,`users/${x}/trackBests`),L=await Er(ks(ee));let q=0;const Y=["Flood","Wet","Damp","Greasy","Green","Fast","Optimum"];L.forEach(se=>{const ue=se.id,w=se.data(),k=`${ue}_${x}`,M={},W=w.bests||w;for(const B of Y)W[B]&&(M[B]=W[B]);if(W.Opt){const B=W.Opt;if(!M.Optimum)M.Optimum=B;else{const $=M.Optimum;B.bestQualy&&(!$.bestQualy||B.bestQualy<$.bestQualy)&&($.bestQualy=B.bestQualy,$.bestQualyTemp=B.bestQualyTemp,$.bestQualySessionId=B.bestQualySessionId,$.bestQualyDate=B.bestQualyDate),B.bestRace&&(!$.bestRace||B.bestRace<$.bestRace)&&($.bestRace=B.bestRace,$.bestRaceTemp=B.bestRaceTemp,$.bestRaceSessionId=B.bestRaceSessionId,$.bestRaceDate=B.bestRaceDate),B.bestAvgRace&&(!$.bestAvgRace||B.bestAvgRace<$.bestAvgRace)&&($.bestAvgRace=B.bestAvgRace,$.bestAvgRaceTemp=B.bestAvgRaceTemp,$.bestAvgRaceSessionId=B.bestAvgRaceSessionId,$.bestAvgRaceDate=B.bestAvgRaceDate)}}if(m.value[k]=M,w.activity){const B=w.activity;N.value[k]={totalLaps:B.totalLaps||0,validLaps:B.validLaps||0,validPercent:B.totalLaps>0?Math.round(B.validLaps/B.totalLaps*100):0,totalTimeMs:B.totalTimeMs||0,totalTimeFormatted:$u(B.totalTimeMs||0),sessionCount:B.sessionCount||0,lastSessionDate:B.lastSessionDate}}q++});const ne=Date.now()-z;return console.log(`[PREFETCH]  Loaded ${q} trackBests in ${ne}ms (1 query instead of ${q})`),g_(p_,m.value,x),g_(m_,N.value,x),tc.value=!0,q}catch(ee){return console.error("[PREFETCH] Error during batch prefetch:",ee),tc.value=!0,0}}const N=de({});async function _(Z,x){const Q=Z.toLowerCase().replace(/[^a-z0-9]/g,"_"),G=x||s.value?.uid,z=`${Q}_${G||"anon"}`;if(N.value[z])return N.value[z];if(G&&!r.value)try{const L=Wt(Xe,`users/${G}/trackBests/${Q}`),q=await Bu(L);if(q.exists()){const Y=q.data();if(Y.activity){const ne=Y.activity,se={totalLaps:ne.totalLaps||0,validLaps:ne.validLaps||0,validPercent:ne.totalLaps>0?Math.round(ne.validLaps/ne.totalLaps*100):0,totalTimeMs:ne.totalTimeMs||0,totalTimeFormatted:$u(ne.totalTimeMs||0),sessionCount:ne.sessionCount||0,lastSessionDate:ne.lastSessionDate};return N.value[z]=se,console.log(`[TELEMETRY] trackActivity Firebase HIT for ${Q}`),se}}}catch(L){console.warn("[TELEMETRY] Error reading trackActivity from Firebase:",L)}console.log(`[TELEMETRY] trackActivity MISS for ${Q}, calculating...`);const ee=A(Z);return N.value[z]=ee,ee}async function S(Z,x,Q,G){const z=await p(Z,x,G);function ee(L,q){if(!L)return null;const Y=Math.round(q||Q),se=(Q-Y)*100;return Math.round(L+se)}return{theoQualy:ee(z.bestQualy,z.bestQualyTemp),theoRace:ee(z.bestRace,z.bestRaceTemp),theoAvgRace:ee(z.bestAvgRace,z.bestAvgRaceTemp),historicQualy:z.bestQualy,historicQualyTemp:z.bestQualyTemp,historicRace:z.bestRace,historicRaceTemp:z.bestRaceTemp,historicAvgRace:z.bestAvgRace,historicAvgRaceTemp:z.bestAvgRaceTemp,grip:x,stintTemp:Q}}async function O(Z,x){const Q=await f(Z),G={};for(const[z,ee]of Object.entries(Q))G[z]={bestAvgRace:ee.bestAvgRace,bestAvgRaceTemp:ee.bestAvgRaceTemp};return G}async function U(Z,x){const Q=await f(Z);let G=null;for(const z of Object.keys(Q)){const ee=Q[z];if(!ee)continue;const L=ee.bestAvgRace;L&&(!G||L<G)&&(G=L)}return G}const T=Fe(()=>t.value.length===0?null:t.value[0]),y=Fe(()=>T.value?.meta.car||null),E=Fe(()=>T.value?.meta.track||null),R=Fe(()=>{const Z=["Flood","Wet","Damp","Greasy","Green","Fast","Optimum"],x={};for(const Q of t.value){const G=(Q.meta.track||"unknown").toLowerCase(),z=Q.summary;if(!x[G]){const ne={};Z.forEach(se=>{ne[se]={bestQualy:null,bestQualyTemp:null,bestRace:null,bestRaceTemp:null,bestAvgRace:null,bestAvgRaceTemp:null}}),x[G]={track:Q.meta.track,sessions:0,lastSession:Q.meta.date_start,bestQualy:null,bestQualyConditions:null,bestRace:null,bestRaceConditions:null,bestAvgRace:null,bestAvgRaceConditions:null,bestByGrip:ne}}x[G].sessions++,Q.meta.date_start>x[G].lastSession&&(x[G].lastSession=Q.meta.date_start);const ee=z?.best_by_grip;if(ee){const ne=se=>se==="Opt"?"Optimum":se;for(const se in ee){const ue=ne(se);if(!Z.includes(ue))continue;const w=ee[se];if(!w)continue;const k=x[G].bestByGrip[ue];k&&(w.bestQualy&&(!k.bestQualy||w.bestQualy<k.bestQualy)&&(k.bestQualy=w.bestQualy,k.bestQualyTemp=w.bestQualyTemp),w.bestRace&&(!k.bestRace||w.bestRace<k.bestRace)&&(k.bestRace=w.bestRace,k.bestRaceTemp=w.bestRaceTemp),w.bestAvgRace&&(!k.bestAvgRace||w.bestAvgRace<k.bestAvgRace)&&(k.bestAvgRace=w.bestAvgRace,k.bestAvgRaceTemp=w.bestAvgRaceTemp))}}const L=z?.best_qualy_ms;L?(!x[G].bestQualy||L<x[G].bestQualy)&&(x[G].bestQualy=L,x[G].bestQualyConditions=z.best_qualy_conditions||null):Q.meta.session_type===Ps.QUALIFY&&z?.bestLap&&(!x[G].bestQualy||z.bestLap<x[G].bestQualy)&&(x[G].bestQualy=z.bestLap,x[G].bestQualyConditions=null);const q=z?.best_race_ms;q?(!x[G].bestRace||q<x[G].bestRace)&&(x[G].bestRace=q,x[G].bestRaceConditions=z.best_race_conditions||null):Q.meta.session_type===Ps.RACE&&z?.bestLap&&(!x[G].bestRace||z.bestLap<x[G].bestRace)&&(x[G].bestRace=z.bestLap,x[G].bestRaceConditions=null);const Y=z?.best_avg_race_ms;Y&&(!x[G].bestAvgRace||Y<x[G].bestAvgRace)&&(x[G].bestAvgRace=Y,x[G].bestAvgRaceConditions=z.best_avg_race_conditions||null)}return Object.values(x).sort((Q,G)=>(G.lastSession||"").localeCompare(Q.lastSession||""))});function P(Z){return t.value.filter(x=>(x.meta.track||"").toLowerCase()===Z.toLowerCase())}function C(Z){return t.value.find(x=>x.sessionId===Z)}function A(Z){const x=P(Z);let Q=0,G=0,z=0;for(const ee of x)Q+=ee.summary?.laps||0,G+=ee.summary?.lapsValid||0,z+=ee.summary?.totalTime||0;return{totalLaps:Q,validLaps:G,validPercent:Q>0?Math.round(G/Q*100):0,totalTimeMs:z,totalTimeFormatted:$u(z),sessionCount:x.length}}function pe(Z,x){return P(Z).sort((G,z)=>(G.meta.date_start||"").localeCompare(z.meta.date_start||"")).map(G=>{const z=G.summary;let ee=null,L=null;return x&&z?.best_by_grip?.[x]?(ee=z.best_by_grip[x].bestQualy,L=z.best_by_grip[x].bestRace):(ee=z?.best_qualy_ms||null,L=z?.best_race_ms||null),{date:G.meta.date_start,sessionId:G.sessionId,bestQualy:ee,bestRace:L,sessionType:G.meta.session_type}}).filter(G=>G.bestQualy||G.bestRace)}function Te(Z=7){const x=new Date,Q=["Dom","Lun","Mar","Mer","Gio","Ven","Sab"],G=[];for(let z=Z-1;z>=0;z--){const ee=new Date(x.getTime()-z*24*60*60*1e3),L=ee.toISOString().split("T")[0]||"",q=t.value.filter(ue=>ue.meta.date_start?.startsWith(L));let Y=0,ne=0,se=0;for(const ue of q){const w=ue.summary?.totalTime||0,k=Math.round(w/6e4);switch(ue.meta.session_type){case Ps.PRACTICE:Y+=k;break;case Ps.QUALIFY:ne+=k;break;case Ps.RACE:se+=k;break}}G.push({day:Q[ee.getDay()]||"N/A",practice:Y,qualify:ne,race:se})}return G}const le=Fe(()=>{const Z=new Date,x=new Date(Z.getTime()-10080*60*1e3);let Q=0,G=0,z=0,ee=0,L=0,q=0;for(const Y of t.value){if(new Date(Y.meta.date_start)<x)continue;const se=Y.summary?.totalTime||0,ue=Math.round(se/6e4);switch(Y.meta.session_type){case Ps.PRACTICE:Q+=ue,G++;break;case Ps.QUALIFY:z+=ue,ee++;break;case Ps.RACE:L+=ue,q++;break}}return{practice:{minutes:Q,sessions:G},qualify:{minutes:z,sessions:ee},race:{minutes:L,sessions:q}}});async function he(Z,x){const Q=s.value?.uid;if(!Q)throw new Error("Not authenticated");const G=Wt(Xe,`users/${Q}/sessions/${Z}`);await pw(G,{isPublic:x}),console.log(`[SHARING] Session ${Z} set isPublic=${x}`);const z=Vn(Xe,`users/${Q}/sessions/${Z}/rawChunks`),ee=await Er(ks(z));if(ee.docs.length>0){const L=gw(Xe);ee.docs.forEach(q=>{L.update(q.ref,{isPublic:x})}),await L.commit(),console.log(`[SHARING] Updated ${ee.docs.length} chunks with isPublic=${x}`)}}async function oe(){const Z=s.value?.uid;if(!Z)return 0;const x=Vn(Xe,`users/${Z}/sessions`),Q=ks(x,_c("isPublic","==",!0));return(await Er(Q)).docs.length}async function Re(){const Z=s.value?.uid;if(!Z)throw new Error("Not authenticated");const x=Vn(Xe,`users/${Z}/sessions`),Q=ks(x,_c("isPublic","==",!0)),G=await Er(Q);let z=0;for(const ee of G.docs)await he(ee.id,!1),z++;return console.log(`[SHARING] Revoked ${z} shared sessions`),z}async function De(Z){const x=s.value?.uid;if(!x)throw new Error("Not authenticated");return await he(Z,!0),`${typeof window<"u"?window.location.origin:""}/sessioni/${Z}?userId=${x}`}return{sessions:t,isLoading:e,error:n,loadSessions:u,fetchSessionFull:h,getSessionsForTrack:P,getSession:C,getActivityData:Te,getTrackActivityTotals:A,getHistoricalBestTimes:pe,calculateAllBestTimesForTrack:f,calculateBestAvgRaceForTrack:O,getBestAvgRaceForTrack:U,getBestTimesForGrip:p,getTheoreticalTimes:S,getTrackBests:b,invalidateTrackBests:v,forceRecalculateTrackBests:D,prefetchAllTrackBests:V,isPrefetchComplete:Fe(()=>tc.value),getTrackActivity:_,lastSession:T,lastUsedCar:y,lastUsedTrack:E,trackStats:R,activityTotals:le,setSessionPublic:he,countSharedSessions:oe,revokeAllSharedSessions:Re,generateShareLink:De}}const rL=4e5;function iL(){const{currentUser:t}=Ki(),{loadSessions:e}=jl(),n=de(!1),s=de(0),r=de([]),i=de(null),o=Fe(()=>typeof window>"u"?!1:!!window.electronAPI);async function a(N){const _=new TextEncoder().encode(N),S=await crypto.subtle.digest("SHA-256",_);return Array.from(new Uint8Array(S)).map(U=>U.toString(16).padStart(2,"0")).join("")}function l(N,_){return`${N.split(".")[0]}_${_}`.replace(/[^a-zA-Z0-9]/g,"_").substring(0,100)}async function u(N,_){const S=Wt(Xe,`users/${N}/sessions/${_}`),O=await Vi(S);return O.exists()?{id:_,...O.data()}:null}async function h(N,_){try{const S=Vn(Xe,`users/${N}/sessions/${_}/rawChunks`),U=(await Fo(S)).docs.map(T=>Uo(T.ref));await Promise.all(U)}catch(S){console.warn("[SYNC] Error deleting old chunks:",S.message)}}function f(N){const _=N.session_info||{},S=N.stints||[],O={track:_.track||N.track||"Unknown",date_start:_.date_start||N.date||new Date().toISOString(),date_end:_.date_end||null,car:_.car_model||_.car||N.car||null,session_type:_.session_type??null,driver:_.driver||null},U=["Flood","Wet","Damp","Greasy","Green","Fast","Optimum"],T={};U.forEach(he=>{T[he]={bestQualy:null,bestQualyTemp:null,bestRace:null,bestRaceTemp:null,bestAvgRace:null,bestAvgRaceTemp:null}});const y=he=>he==="Opt"?"Optimum":he;let E=null,R=null,P=null,C=null,A=null,pe=null;const Te=_.session_type===1;S.forEach(he=>{const oe=Te||he.type==="Qualify",Re=he.laps||[];if(Re.forEach(De=>{if(De.is_valid&&!De.has_pit_stop&&De.lap_time_ms){const Z=y(De.track_grip_status||"Unknown"),x=De.air_temp||0,Q={airTemp:x,roadTemp:De.road_temp||0,grip:Z};T[Z]&&(oe?(!T[Z].bestQualy||De.lap_time_ms<T[Z].bestQualy)&&(T[Z].bestQualy=De.lap_time_ms,T[Z].bestQualyTemp=x):(!T[Z].bestRace||De.lap_time_ms<T[Z].bestRace)&&(T[Z].bestRace=De.lap_time_ms,T[Z].bestRaceTemp=x)),oe?(!E||De.lap_time_ms<E)&&(E=De.lap_time_ms,R=Q):(!P||De.lap_time_ms<P)&&(P=De.lap_time_ms,C=Q)}}),!oe&&he.avg_clean_lap&&Re.length>=5){const De=Re.find(G=>G.is_valid&&!G.has_pit_stop),Z=De?.track_grip_status||Re[0]?.track_grip_status||"Unknown",x=y(Z),Q=De?.air_temp||Re[0]?.air_temp||0;T[x]&&(!T[x].bestAvgRace||he.avg_clean_lap<T[x].bestAvgRace)&&(T[x].bestAvgRace=he.avg_clean_lap,T[x].bestAvgRaceTemp=Q),(!A||he.avg_clean_lap<A)&&(A=he.avg_clean_lap,pe={airTemp:Q,roadTemp:De?.road_temp||0,grip:x})}});const le={laps:_.laps_total||N.laps?.length||0,lapsValid:_.laps_valid||0,bestLap:_.session_best_lap||N.bestLap||null,avgCleanLap:_.avg_clean_lap||null,totalTime:_.total_drive_time_ms||0,stintCount:S.length||0,best_qualy_ms:E,best_qualy_conditions:R,best_race_ms:P,best_race_conditions:C,best_avg_race_ms:A,best_avg_race_conditions:pe,best_by_grip:T};return{meta:O,summary:le}}function p(N,_){const S=[];for(let O=0;O<N.length;O+=_)S.push(N.slice(O,O+_));return S}async function m(N,_,S,O){try{const U=N.ownerId||null;if(U&&U!==O)return console.log(`[SYNC] Skipped ${S}: owner mismatch (file: ${U}, current: ${O})`),{status:"skipped",fileName:S,reason:"owner_mismatch"};U||console.log(`[SYNC] Warning: ${S} has no ownerId (pre-login session)`);const{meta:T,summary:y}=f(N),E=l(T.date_start,T.track),R=await a(_),P=await u(O,E);let C=!1,A=!0;P&&(C=!0,P.fileHash===R?A=!1:await h(O,E));const pe=p(_,rL),Te=Wt(Xe,`users/${O}/sessions/${E}`);await Hs(Te,{fileHash:R,fileName:S,uploadedAt:yc(),meta:T,summary:y,rawChunkCount:pe.length,rawSizeBytes:_.length,rawEncoding:"json-string",version:(P?.version||0)+1});const le=Wt(Xe,`users/${O}/uploads/${R}`);if(await Hs(le,{fileName:S,uploadedAt:yc(),sessionId:E}),A)for(let Re=0;Re<pe.length;Re++){const De=Wt(Xe,`users/${O}/sessions/${E}/rawChunks/${Re}`);await Hs(De,{idx:Re,chunk:pe[Re]})}await v(O,T.track,E,T.date_start,y);const he=await b(O,T.track,T.date_start,E);let oe="created";return C&&(oe=A?"updated":"refreshed"),console.log(`[SYNC] ${oe}: ${S} -> ${E} (Q: ${y.best_qualy_ms}, R: ${y.best_race_ms})${he>0?` [cleaned ${he} old duplicate(s)]`:""}`),{status:oe,fileName:S,sessionId:E}}catch(U){return console.error("[SYNC] Error:",U),{status:"error",fileName:S,error:U.message}}}async function b(N,_,S,O){try{const U=Vn(Xe,`users/${N}/sessions`),T=await Fo(U),y=_.toLowerCase().replace(/\s+/g,"_"),R=S.split(".")[0].split(":").slice(0,2).join(":");let P=0;for(const C of T.docs){const A=C.id,pe=C.data();if(A===O||!/^\d{13}_/.test(A)||(pe.meta?.track||"").toLowerCase().replace(/\s+/g,"_")!==y||(pe.meta?.date_start||"").split(":").slice(0,2).join(":")!==R)continue;console.log(`[SYNC]  Auto-deleting old format duplicate: ${A}`);const Re=Vn(Xe,`users/${N}/sessions/${A}/rawChunks`),De=await Fo(Re);for(const Z of De.docs)await Uo(Z.ref);await Uo(C.ref),P++}return P>0&&console.log(`[SYNC]  Auto-cleaned ${P} old format duplicate(s) for ${_}`),P}catch(U){return console.warn("[SYNC]  Error during auto-cleanup:",U.message),0}}async function v(N,_,S,O,U){const T=_.toLowerCase().replace(/\s+/g,"_"),y=Wt(Xe,`users/${N}/trackBests/${T}`);try{const E=await Vi(y),R=E.exists()?E.data():null,P=["Flood","Wet","Damp","Greasy","Green","Fast","Optimum"],C=R?.bests||(R?Object.fromEntries(P.filter(x=>R[x]).map(x=>[x,R[x]])):{});let A=!1;P.forEach(x=>{const Q=U.best_by_grip?.[x];Q&&(C[x]||(C[x]={bestQualy:null,bestQualyTemp:null,bestQualySessionId:null,bestQualyDate:null,bestRace:null,bestRaceTemp:null,bestRaceSessionId:null,bestRaceDate:null,bestAvgRace:null,bestAvgRaceTemp:null,bestAvgRaceSessionId:null,bestAvgRaceDate:null}),Q.bestQualy&&(!C[x].bestQualy||Q.bestQualy<C[x].bestQualy)&&(C[x].bestQualy=Q.bestQualy,C[x].bestQualyTemp=Q.bestQualyTemp,C[x].bestQualySessionId=S,C[x].bestQualyDate=O,A=!0),Q.bestRace&&(!C[x].bestRace||Q.bestRace<C[x].bestRace)&&(C[x].bestRace=Q.bestRace,C[x].bestRaceTemp=Q.bestRaceTemp,C[x].bestRaceSessionId=S,C[x].bestRaceDate=O,A=!0),Q.bestAvgRace&&(!C[x].bestAvgRace||Q.bestAvgRace<C[x].bestAvgRace)&&(C[x].bestAvgRace=Q.bestAvgRace,C[x].bestAvgRaceTemp=Q.bestAvgRaceTemp,C[x].bestAvgRaceSessionId=S,C[x].bestAvgRaceDate=O,A=!0))});const pe=R?.activity||{totalLaps:0,validLaps:0,totalTimeMs:0,sessionCount:0},Te=R?.syncedSessionIds||[],le=Te.includes(S),he=U.laps||0,oe=U.lapsValid||0,Re=U.totalTime||0,De=le?pe:{totalLaps:pe.totalLaps+he,validLaps:pe.validLaps+oe,totalTimeMs:pe.totalTimeMs+Re,sessionCount:pe.sessionCount+1,lastSessionDate:O},Z=le?Te:[...Te,S].slice(-100);return await Hs(y,{trackId:T,bests:C,activity:De,syncedSessionIds:Z,lastUpdated:yc()}),console.log(A?`[SYNC]  Updated trackBests for ${T} (bests + activity)`:le?`[SYNC]  No trackBests changes for ${T}`:`[SYNC]  Updated trackBests activity for ${T}`),A||!le}catch(E){return console.warn(`[SYNC]  Error updating trackBests for ${T}:`,E.message),!1}}async function D(){if(!o.value)return console.log("[SYNC] Not running in Electron, skipping sync"),[];if(!t.value)return console.log("[SYNC] No user logged in, skipping sync"),[];if(n.value)return console.log("[SYNC] Already syncing, skipping"),[];n.value=!0,s.value=0,r.value=[];const N=t.value.uid,_=window.electronAPI,S=[];try{const O=await _.getTelemetryFiles();if(console.log(`[SYNC] Found ${O.length} files to process`),O.length===0)return n.value=!1,[];for(let P=0;P<O.length;P++){const C=O[P];s.value=Math.round(P/O.length*100);try{const A=await _.readFile(C.path);if(!A){S.push({status:"error",fileName:C.name,error:"Could not read file"});continue}const pe=JSON.stringify(A),Te=await m(A,pe,C.name,N);S.push(Te),(Te.status==="created"||Te.status==="updated")&&await _.updateRegistry(C.name,{uploadedBy:N,sessionId:Te.sessionId,uploadedAt:new Date().toISOString()})}catch(A){console.error(`[SYNC] Error processing ${C.name}:`,A),S.push({status:"error",fileName:C.name,error:A.message})}}s.value=100,r.value=S,i.value=new Date;const U=S.filter(P=>P.status==="created").length,T=S.filter(P=>P.status==="updated").length,y=S.filter(P=>P.status==="unchanged").length,E=S.filter(P=>P.status==="skipped").length,R=S.filter(P=>P.status==="error").length;return console.log(`[SYNC] Complete: ${U} created, ${T} updated, ${y} unchanged, ${E} skipped, ${R} errors`),(U>0||T>0)&&(console.log("[SYNC] Refreshing dashboard data..."),await e()),S}catch(O){return console.error("[SYNC] Sync failed:",O),[{status:"error",fileName:"sync",error:O.message}]}finally{n.value=!1}}function V(){if(!o.value)return;const N=window.electronAPI;N.onFilesChanged(_=>{(_.new.length>0||_.modified.length>0)&&(console.log(`[SYNC] Files changed: ${_.new.length} new, ${_.modified.length} modified`),D())}),N.onInitialFiles(_=>{console.log(`[SYNC] Initial files: ${_.files.length}`)}),console.log("[SYNC] Auto-sync setup complete")}return{isElectron:o,isSyncing:n,syncProgress:s,syncResults:r,lastSyncTime:i,syncTelemetryFiles:D,setupAutoSync:V}}const oL={key:0,class:"electron-titlebar"},aL={class:"titlebar-buttons-left"},cL=["title","disabled"],lL=["title","disabled"],uL=ut({__name:"ElectronTitlebar",setup(t){const e=Fi(),n=zt(),s=de(!1),r=de(!1),i=de(!1),{isSyncing:o,syncTelemetryFiles:a,setupAutoSync:l}=iL(),{loadSessions:u}=jl(),h=de(!1),f=de([]);Js(async()=>{if(s.value=!!window.electronAPI,s.value){try{r.value=await window.electronAPI.windowIsMaximized()}catch{console.log("[TITLEBAR] Could not get maximized state")}l()}});const p=()=>Object.keys(e.params).length>0,m=async()=>{if(p()){console.log("[TITLEBAR] Soft refresh for dynamic route:",e.fullPath),i.value=!0;try{const _=e.fullPath;await n.replace({path:"/panoramica",query:{_refresh:Date.now()}}),await Ys(),await u(void 0,!0),await n.replace(_),console.log("[TITLEBAR] Soft refresh complete")}catch(_){console.error("[TITLEBAR] Soft refresh failed:",_),window.electronAPI?.pageRefresh()}finally{i.value=!1}}else console.log("[TITLEBAR] Hard refresh for static route:",e.fullPath),window.electronAPI?.pageRefresh()},b=async()=>{console.log("[TITLEBAR] Manual sync triggered");const _=await a();console.log("[TITLEBAR] Sync complete:",_),f.value=_,h.value=!0},v=()=>{window.electronAPI?.windowMinimize()},D=async()=>{const _=await window.electronAPI?.windowMaximize();r.value=_},V=()=>{window.electronAPI?.windowClose()},N=()=>{h.value=!1};return(_,S)=>{const O=HC;return s.value?(_e(),ke("div",oL,[S[5]||(S[5]=j("div",{class:"titlebar-drag-region"},[j("span",{class:"titlebar-title"},"ACC Telemetry Dashboard")],-1)),j("div",aL,[j("button",{class:Ot(["titlebar-btn",{refreshing:i.value}]),title:i.value?"Aggiornamento in corso...":"Aggiorna pagina (Smart Refresh)",disabled:i.value,onClick:m},[...S[0]||(S[0]=[j("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[j("path",{d:"M21 12a9 9 0 11-9-9c2.52 0 4.93 1 6.74 2.74L21 8"}),j("path",{d:"M21 3v5h-5"})],-1)])],10,cL),j("button",{class:Ot(["titlebar-btn",{syncing:Ge(o)}]),title:Ge(o)?"Sincronizzazione in corso...":"Sincronizza file",disabled:Ge(o),onClick:b},[...S[1]||(S[1]=[j("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[j("path",{d:"M23 4v6h-6"}),j("path",{d:"M1 20v-6h6"}),j("path",{d:"M3.51 9a9 9 0 0114.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0020.49 15"})],-1)])],10,lL)]),j("div",{class:"titlebar-buttons-right"},[j("button",{class:"titlebar-btn",title:"Minimizza",onClick:v},[...S[2]||(S[2]=[j("svg",{width:"12",height:"12",viewBox:"0 0 12 12"},[j("rect",{y:"5",width:"12",height:"2",fill:"currentColor"})],-1)])]),j("button",{class:"titlebar-btn",title:"Massimizza",onClick:D},[...S[3]||(S[3]=[j("svg",{width:"12",height:"12",viewBox:"0 0 12 12"},[j("rect",{x:"1",y:"1",width:"10",height:"10",stroke:"currentColor","stroke-width":"2",fill:"none"})],-1)])]),j("button",{class:"titlebar-btn titlebar-close",title:"Chiudi",onClick:V},[...S[4]||(S[4]=[j("svg",{width:"12",height:"12",viewBox:"0 0 12 12"},[j("path",{d:"M1 1l10 10M11 1L1 11",stroke:"currentColor","stroke-width":"2"})],-1)])])]),we(O,{results:f.value,visible:h.value,onClose:N},null,8,["results","visible"])])):hs("",!0)}}}),hL=Object.assign(gn(uL,[["__scopeId","data-v-79773db3"]]),{__name:"ElectronTitlebar"}),nc="<div></div>",Hu=new WeakMap;function fL(t){if(Hu.has(t))return Hu.get(t);const e={...t};return e.render?e.render=(n,s,r,i,o,a)=>{if(i.mounted$??n.mounted$){const l=t.render?.bind(n)(n,s,r,i,o,a);return l.children===null||typeof l.children=="string"?dn(l):ot(l)}return Ru(n._.vnode.el,nc)}:e.template&&=`
      <template v-if="mounted$">${t.template}</template>
      <template v-else>${nc}</template>
    `,e.setup=(n,s)=>{const r=ct(),i=us(r.isHydrating===!1),o=$r();if(r.isHydrating){const l={...o.attrs},u=dL(o);for(const h in l)delete o.attrs[h];Js(()=>{Object.assign(o.attrs,l),o.vnode.dirs=u})}Js(()=>{i.value=!0});const a=t.setup?.(n,s)||{};return Jh(a)?Promise.resolve(a).then(l=>typeof l!="function"?(l||={},l.mounted$=i,l):(...u)=>{if(i.value||!r.isHydrating){const h=l(...u);return h.children===null||typeof h.children=="string"?dn(h):ot(h)}return Ru(o?.vnode.el,nc)}):typeof a=="function"?(...l)=>{if(i.value){const u=a(...l),h=e.inheritAttrs!==!1?s.attrs:void 0;return u.children===null||typeof u.children=="string"?dn(u,h):ot(u,h)}return Ru(o?.vnode.el,nc)}:Object.assign(a,{mounted$:i})},Hu.set(t,e),e}function dL(t){if(!t||!t.vnode.dirs)return null;const e=t.vnode.dirs;return t.vnode.dirs=null,e}function pL(t={}){const e=us(""),n=us(t.politeness||"polite"),s=dv();function r(u="",h="polite"){e.value=u,n.value=h}function i(u){return r(u,"polite")}function o(u){return r(u,"assertive")}function a(){r(document?.title?.trim(),n.value)}function l(){s?.hooks?.removeHook("dom:rendered",a)}return a(),s?.hooks?.hook("dom:rendered",()=>{a()}),{_cleanup:l,message:e,politeness:n,set:r,polite:i,assertive:o}}function mL(t={}){const e=ct(),n=e._routeAnnouncer||=pL(t);return t.politeness!==n.politeness.value&&(n.politeness.value=t.politeness||"polite"),Zh()&&(e._routeAnnouncerDeps||=0,e._routeAnnouncerDeps++,eb(()=>{e._routeAnnouncerDeps--,e._routeAnnouncerDeps===0&&(n._cleanup(),delete e._routeAnnouncer)})),n}const gL=ut({name:"NuxtRouteAnnouncer",props:{atomic:{type:Boolean,default:!1},politeness:{type:String,default:"polite"}},setup(t,{slots:e,expose:n}){const{set:s,polite:r,assertive:i,message:o,politeness:a}=mL({politeness:t.politeness});return n({set:s,polite:r,assertive:i,message:o,politeness:a}),()=>ot("span",{class:"nuxt-route-announcer",style:{position:"absolute"}},ot("span",{role:"alert","aria-live":a.value,"aria-atomic":t.atomic,style:{border:"0",clip:"rect(0 0 0 0)","clip-path":"inset(50%)",height:"1px",width:"1px",overflow:"hidden",position:"absolute","white-space":"nowrap","word-wrap":"normal",margin:"-1px",padding:"0"}},e.default?e.default({message:o.value}):o.value))}}),_L=["type","value","placeholder","autocomplete","maxlength","disabled"],yL=ut({__name:"BaseInput",props:{modelValue:{},type:{default:"text"},placeholder:{default:""},autocomplete:{default:"off"},maxlength:{},error:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(t,{emit:e}){const n=e,s=r=>{const i=r.target;n("update:modelValue",i.value)};return(r,i)=>(_e(),ke("input",{type:t.type,value:t.modelValue,placeholder:t.placeholder,autocomplete:t.autocomplete,maxlength:t.maxlength,disabled:t.disabled,class:Ot(["form-input",{"form-input--error":t.error}]),onInput:s},null,42,_L))}}),gd=Object.assign(gn(yL,[["__scopeId","data-v-91b986db"]]),{__name:"UiBaseInput"}),vL={key:0,class:"form-error"},EL=ut({__name:"FormError",props:{message:{},visible:{type:Boolean,default:!1}},setup(t){return(e,n)=>t.visible&&t.message?(_e(),ke("div",vL,_n(t.message),1)):hs("",!0)}}),_d=Object.assign(gn(EL,[["__scopeId","data-v-75d4b223"]]),{__name:"UiFormError"}),TL=["type","disabled"],wL=ut({__name:"BaseButton",props:{variant:{default:"primary"},loading:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},type:{default:"button"}},emits:["click"],setup(t,{emit:e}){const n=t,s=e,r=i=>{!n.loading&&!n.disabled&&s("click",i)};return(i,o)=>(_e(),ke("button",{type:t.type,class:Ot(["btn",`btn--${t.variant}`,{"btn--loading":t.loading}]),disabled:t.disabled||t.loading,onClick:r},[rI(i.$slots,"default",{},void 0)],10,TL))}}),yd=Object.assign(gn(wL,[["__scopeId","data-v-d54604fc"]]),{__name:"UiBaseButton"}),bL=ut({__name:"LoginForm",emits:["submit","forgotPassword"],setup(t,{expose:e,emit:n}){const s=de(""),r=de(""),i=de(""),o=de(!1),a=n,l=()=>{if(i.value="",!s.value.trim()){i.value="Inserisci la tua email.";return}if(!r.value){i.value="Inserisci la password.";return}a("submit",{email:s.value.trim(),password:r.value})},u=()=>{i.value=""};return e({setError:h=>{i.value=h},setLoading:h=>{o.value=h},reset:()=>{s.value="",r.value="",i.value="",o.value=!1}}),(h,f)=>{const p=gd,m=_d,b=yd;return _e(),ke("form",{class:"auth-form",onSubmit:pl(l,["prevent"])},[we(p,{modelValue:s.value,"onUpdate:modelValue":f[0]||(f[0]=v=>s.value=v),type:"email",placeholder:"Email",autocomplete:"email",error:!!i.value&&i.value.includes("email"),onInput:u},null,8,["modelValue","error"]),we(p,{modelValue:r.value,"onUpdate:modelValue":f[1]||(f[1]=v=>r.value=v),type:"password",placeholder:"Password",autocomplete:"current-password",error:!!i.value&&i.value.includes("password"),onInput:u},null,8,["modelValue","error"]),we(m,{message:i.value,visible:!!i.value},null,8,["message","visible"]),we(b,{type:"submit",variant:"primary",loading:o.value},{default:cn(()=>[...f[3]||(f[3]=[Qe(" ACCEDI ",-1)])]),_:1},8,["loading"]),we(b,{variant:"link",onClick:f[2]||(f[2]=v=>a("forgotPassword"))},{default:cn(()=>[...f[4]||(f[4]=[Qe(" Password dimenticata? ",-1)])]),_:1})],32)}}}),IL=Object.assign(gn(bL,[["__scopeId","data-v-5927dcd2"]]),{__name:"AuthLoginForm"}),AL={class:"name-row"},RL=ut({__name:"RegisterForm",emits:["submit"],setup(t,{expose:e,emit:n}){const s=de(""),r=de(""),i=de(""),o=de(""),a=de(""),l=de(""),u=de(""),h=de(!1),f=n,p=()=>{if(u.value="",!s.value.trim()){u.value="Inserisci il tuo nome.";return}if(!r.value.trim()){u.value="Inserisci il tuo cognome.";return}if(!i.value.trim()){u.value="Scegli un nickname.";return}if(i.value.trim().length<3){u.value="Il nickname deve essere di almeno 3 caratteri.";return}if(!o.value.trim()){u.value="Inserisci la tua email.";return}if(!a.value){u.value="Inserisci una password.";return}if(a.value.length<6){u.value="La password deve essere di almeno 6 caratteri.";return}if(!l.value){u.value="Conferma la password.";return}if(a.value!==l.value){u.value="Le password non coincidono.";return}f("submit",{firstName:s.value.trim(),lastName:r.value.trim(),nickname:i.value.trim(),email:o.value.trim(),password:a.value})},m=()=>{u.value=""};return e({setError:b=>{u.value=b},setLoading:b=>{h.value=b},reset:()=>{s.value="",r.value="",i.value="",o.value="",a.value="",l.value="",u.value="",h.value=!1}}),(b,v)=>{const D=gd,V=_d,N=yd;return _e(),ke("form",{class:"auth-form",onSubmit:pl(p,["prevent"])},[j("div",AL,[we(D,{modelValue:s.value,"onUpdate:modelValue":v[0]||(v[0]=_=>s.value=_),type:"text",placeholder:"Nome",autocomplete:"given-name",onInput:m},null,8,["modelValue"]),we(D,{modelValue:r.value,"onUpdate:modelValue":v[1]||(v[1]=_=>r.value=_),type:"text",placeholder:"Cognome",autocomplete:"family-name",onInput:m},null,8,["modelValue"])]),we(D,{modelValue:i.value,"onUpdate:modelValue":v[2]||(v[2]=_=>i.value=_),type:"text",placeholder:"Nickname (visibile agli altri)",autocomplete:"username",maxlength:20,onInput:m},null,8,["modelValue"]),we(D,{modelValue:o.value,"onUpdate:modelValue":v[3]||(v[3]=_=>o.value=_),type:"email",placeholder:"Email",autocomplete:"email",onInput:m},null,8,["modelValue"]),we(D,{modelValue:a.value,"onUpdate:modelValue":v[4]||(v[4]=_=>a.value=_),type:"password",placeholder:"Password (min. 6 caratteri)",autocomplete:"new-password",onInput:m},null,8,["modelValue"]),we(D,{modelValue:l.value,"onUpdate:modelValue":v[5]||(v[5]=_=>l.value=_),type:"password",placeholder:"Conferma Password",autocomplete:"new-password",onInput:m},null,8,["modelValue"]),we(V,{message:u.value,visible:!!u.value},null,8,["message","visible"]),we(N,{type:"submit",variant:"primary",loading:h.value},{default:cn(()=>[...v[6]||(v[6]=[Qe(" REGISTRATI ",-1)])]),_:1},8,["loading"])],32)}}}),SL=Object.assign(gn(RL,[["__scopeId","data-v-d0f96507"]]),{__name:"AuthRegisterForm"}),CL={class:"reset-form"},PL={key:0,class:"reset-success"},kL=ut({__name:"ResetPasswordForm",emits:["submit","back"],setup(t,{expose:e,emit:n}){const s=de(""),r=de(""),i=de(!1),o=de(!1),a=n,l=()=>{if(r.value="",!s.value.trim()){r.value="Inserisci la tua email.";return}a("submit",s.value.trim())},u=()=>{r.value=""};return e({setError:h=>{r.value=h},setLoading:h=>{o.value=h},setSuccess:h=>{i.value=h},reset:()=>{s.value="",r.value="",i.value=!1,o.value=!1}}),(h,f)=>{const p=yd,m=gd,b=_d;return _e(),ke("div",CL,[i.value?(_e(),ke("div",PL,[f[4]||(f[4]=j("span",{class:"reset-success__icon"},"",-1)),f[5]||(f[5]=j("p",{class:"reset-success__text"}," Email inviata! Controlla la tua casella di posta (anche spam). ",-1)),we(p,{variant:"link",onClick:f[0]||(f[0]=v=>a("back"))},{default:cn(()=>[...f[3]||(f[3]=[Qe("  Torna al login ",-1)])]),_:1})])):(_e(),ke("form",{key:1,class:"auth-form",onSubmit:pl(l,["prevent"])},[f[8]||(f[8]=j("h3",{class:"reset-form__title"},"Recupera Password",-1)),f[9]||(f[9]=j("p",{class:"reset-form__description"},[Qe(" Inserisci la tua email. Ti invieremo un link per reimpostare la password. "),j("br"),j("small",null,"Controlla anche la cartella spam.")],-1)),we(m,{modelValue:s.value,"onUpdate:modelValue":f[1]||(f[1]=v=>s.value=v),type:"email",placeholder:"Email",autocomplete:"email",onInput:u},null,8,["modelValue"]),we(b,{message:r.value,visible:!!r.value},null,8,["message","visible"]),we(p,{type:"submit",variant:"primary",loading:o.value},{default:cn(()=>[...f[6]||(f[6]=[Qe(" INVIA LINK ",-1)])]),_:1},8,["loading"]),we(p,{variant:"link",onClick:f[2]||(f[2]=v=>a("back"))},{default:cn(()=>[...f[7]||(f[7]=[Qe("  Torna al login ",-1)])]),_:1})],32))])}}}),NL=Object.assign(gn(kL,[["__scopeId","data-v-17ef1ec5"]]),{__name:"AuthResetPasswordForm"}),DL={class:"auth-overlay"},OL={class:"auth-card__body"},VL={key:0,class:"auth-nav"},LL={class:"auth-form-container"},ML=ut({__name:"AuthOverlay",emits:["login-success","register-success"],setup(t,{emit:e}){const n=de("login"),s=de("login"),r=de(),i=de(),o=de(),{login:a,register:l}=Ki(),u=de(!1),h=e,f=Fe(()=>{switch(s.value){case"register":return"form-height--register";case"reset":return"form-height--reset";default:return"form-height--login"}}),p=N=>{n.value=N,s.value=N},m=()=>{s.value="reset"},b=()=>{s.value="login",n.value="login",o.value?.reset()},v=async N=>{u.value=!0;const _=await a(N.email,N.password);u.value=!1,_.success?h("login-success",N.email):r.value?.setError(_.error)},D=async N=>{u.value=!0;const _=await l(N.email,N.password,N.nickname,N.firstName,N.lastName);u.value=!1,_.success?h("register-success",N.email):i.value?.setError(_.error)},V=N=>{console.log("[AUTH] Reset:",N),o.value?.setSuccess(!0)};return(N,_)=>{const S=IL,O=SL,U=NL;return _e(),ke("div",DL,[_[4]||(_[4]=j("div",{class:"auth-overlay__ambient"},[j("div",{class:"ambient-glow ambient-glow--red"}),j("div",{class:"ambient-glow ambient-glow--gold"})],-1)),j("div",{class:Ot(["auth-card",f.value])},[_[3]||(_[3]=j("div",{class:"auth-card__glow"},null,-1)),j("div",OL,[_[2]||(_[2]=j("header",{class:"auth-header"},[j("div",{class:"brand"},[j("span",{class:"brand__badge"},"ACC"),j("span",{class:"brand__name"},"TELEMETRY")])],-1)),s.value!=="reset"?(_e(),ke("nav",VL,[j("button",{class:Ot(["auth-nav__item",{"is-active":n.value==="login"}]),onClick:_[0]||(_[0]=T=>p("login"))}," Login ",2),j("button",{class:Ot(["auth-nav__item",{"is-active":n.value==="register"}]),onClick:_[1]||(_[1]=T=>p("register"))}," Registrati ",2)])):hs("",!0),j("div",LL,[we(ua,{name:"liquid",mode:"out-in"},{default:cn(()=>[s.value==="login"?(_e(),Jt(S,{key:"login",ref_key:"loginFormRef",ref:r,onSubmit:v,onForgotPassword:m},null,512)):s.value==="register"?(_e(),Jt(O,{key:"register",ref_key:"registerFormRef",ref:i,onSubmit:D},null,512)):(_e(),Jt(U,{key:"reset",ref_key:"resetFormRef",ref:o,onSubmit:V,onBack:b},null,512))]),_:1})])])],2)])}}}),xL=Object.assign(gn(ML,[["__scopeId","data-v-e0e84998"]]),{__name:"AuthOverlay"}),FL={class:"email-verification"},UL={class:"verify-email"},BL={key:0,class:"error-message"},$L={key:1,class:"error-message resend-error"},HL=["disabled"],jL=["disabled"],qL=ut({__name:"RegistrationSuccess",props:{email:{},requireEmailVerification:{type:Boolean}},emits:["goToDashboard","resendEmail"],setup(t,{emit:e}){const n=e,{checkEmailVerified:s,resendVerificationEmail:r}=Ki(),i=de(!1),o=de(!1),a=de(null),l=de(!1),u=de(!1),h=async()=>{i.value=!0,a.value=null,u.value=!1;const p=await r();i.value=!1,p.success?(o.value=!0,setTimeout(()=>o.value=!1,3e3)):a.value=p.error||"Errore invio email",n("resendEmail")},f=async()=>{l.value=!0,u.value=!1;const p=await s();l.value=!1,p.verified?n("goToDashboard"):u.value=!0};return(p,m)=>(_e(),ke("div",FL,[m[2]||(m[2]=j("div",{class:"verify-icon"},"",-1)),m[3]||(m[3]=j("h2",{class:"verify-title"},"Verifica la tua email",-1)),j("p",UL,_n(t.email),1),m[4]||(m[4]=j("div",{class:"verify-box"},[j("p",{class:"verify-text"},"Clicca il link nell'email per attivare l'account."),j("p",{class:"verify-hint"},"Controlla anche Spam")],-1)),u.value?(_e(),ke("div",BL," Email non verificata ")):hs("",!0),a.value?(_e(),ke("div",$L,_n(a.value),1)):hs("",!0),j("button",{class:Ot(["verify-btn",{"verify-btn--loading":l.value}]),disabled:l.value,onClick:f},[l.value?(_e(),ke(ze,{key:0},[m[0]||(m[0]=j("span",{class:"spinner"},null,-1)),m[1]||(m[1]=Qe(" Controllo... ",-1))],64)):(_e(),ke(ze,{key:1},[Qe(" Ho confermato l'email ")],64))],10,HL),j("button",{class:"resend-btn",disabled:i.value||o.value,onClick:h},[i.value?(_e(),ke(ze,{key:0},[Qe("Invio in corso...")],64)):o.value?(_e(),ke(ze,{key:1},[Qe(" Email inviata")],64)):(_e(),ke(ze,{key:2},[Qe("Rinvia email di verifica")],64))],8,jL)]))}}),GL=Object.assign(gn(qL,[["__scopeId","data-v-f958603b"]]),{__name:"AuthRegistrationSuccess"}),_w=(t="RouteProvider")=>ut({name:t,props:{route:{type:Object,required:!0},vnode:Object,vnodeRef:Object,renderKey:String,trackRootNodes:Boolean},setup(e){const n=e.renderKey,s=e.route,r={};for(const i in e.route)Object.defineProperty(r,i,{get:()=>n===e.renderKey?e.route[i]:s[i],enumerable:!0});return ns(Or,Ln(r)),()=>e.vnode?ot(e.vnode,{ref:e.vnodeRef}):e.vnode}}),WL=_w(),y_=new WeakMap,zL=ut({name:"NuxtPage",inheritAttrs:!1,props:{name:{type:String},transition:{type:[Boolean,Object],default:void 0},keepalive:{type:[Boolean,Object],default:void 0},route:{type:Object},pageKey:{type:[Function,String],default:null}},setup(t,{attrs:e,slots:n,expose:s}){const r=ct(),i=de(),o=Vt(Or,null);let a;s({pageRef:i});const l=Vt(ov,null);let u;const h=r.deferHydration();if(r.isHydrating){const p=r.hooks.hookOnce("app:error",h);zt().beforeEach(p)}t.pageKey&&xn(()=>t.pageKey,(p,m)=>{p!==m&&r.callHook("page:loading:start")});let f=!1;{const p=zt().beforeResolve(()=>{f=!1});ca(()=>{p()})}return()=>ot(Pv,{name:t.name,route:t.route,...e},{default:p=>{const m=QL(o,p.route,p.Component),b=o&&o.matched.length===p.route.matched.length;if(!p.Component){if(u&&!b)return u;h();return}if(u&&l&&!l.isCurrent(p.route))return u;if(m&&o&&(!l||l?.isCurrent(o)))return b?u:null;const v=yh(p,t.pageKey),D=YL(o,p.route,p.Component);!r.isHydrating&&a===v&&!D&&Ys(()=>{f=!0,r.callHook("page:loading:end")}),a=v;const V=!!(t.transition??p.route.meta.pageTransition??em),N=V&&KL([t.transition,p.route.meta.pageTransition,em,{onAfterLeave(){delete r._runningTransition,r.callHook("page:transition:finish",p.Component)}}]),_=t.keepalive??p.route.meta.keepalive??PR;return u=Nv(V&&N,JS(_,ot(mf,{suspensible:!0,onPending:()=>{V&&(r._runningTransition=!0),r.callHook("page:start",p.Component)},onResolve:async()=>{await Ys();try{r._route.sync?.(),await r.callHook("page:finish",p.Component),delete r._runningTransition,!f&&!D&&(f=!0,await r.callHook("page:loading:end"))}finally{h()}}},{default:()=>{const S={key:v||void 0,vnode:n.default?JL(n.default,p):p.Component,route:p.route,renderKey:v||void 0,trackRootNodes:V,vnodeRef:i};if(!_)return ot(WL,S);const O=p.Component.type,U=O;let T=y_.get(U);return T||(T=_w(O.name||O.__name),y_.set(U,T)),ot(T,S)}}))).default(),u}})}});function KL(t){const e=[];for(const n of t)n&&e.push({...n,onAfterLeave:n.onAfterLeave?Sf(n.onAfterLeave):void 0});return rv(...e)}function QL(t,e,n){if(!t)return!1;const s=e.matched.findIndex(r=>r.components?.default===n?.type);return!s||s===-1?!1:e.matched.slice(0,s).some((r,i)=>r.components?.default!==t.matched[i]?.components?.default)||n&&yh({route:e,Component:n})!==yh({route:t,Component:n})}function YL(t,e,n){return t?e.matched.findIndex(r=>r.components?.default===n?.type)<e.matched.length-1:!1}function JL(t,e){const n=t(e);return n.length===1?ot(n[0]):ot(ze,void 0,n)}const XL=ut({name:"LayoutLoader",inheritAttrs:!1,props:{name:String,layoutProps:Object},setup(t,e){return()=>ot(Bs[t.name],t.layoutProps,e.slots)}}),ZL={name:{type:[String,Boolean,Object],default:null},fallback:{type:[String,Object],default:null}},eM=ut({name:"NuxtLayout",inheritAttrs:!1,props:ZL,setup(t,e){const n=ct(),s=Vt(Or),i=!s||s===Fi()?kv():s,o=Fe(()=>{let h=Ge(t.name)??i?.meta.layout??"default";return h&&!(h in Bs)&&t.fallback&&(h=Ge(t.fallback)),h}),a=us();e.expose({layoutRef:a});const l=n.deferHydration();if(n.isHydrating){const h=n.hooks.hookOnce("app:error",l);zt().beforeEach(h)}let u;return()=>{const h=o.value&&o.value in Bs,f=i?.meta.layoutTransition??CR,p=u;return u=o.value,Nv(h&&f,{default:()=>ot(mf,{suspensible:!0,onResolve:()=>{Ys(l)}},{default:()=>ot(tM,{layoutProps:My(e.attrs,{ref:a}),key:o.value||void 0,name:o.value,shouldProvide:!t.name,isRenderingNewLayout:m=>m!==p&&m===o.value,hasTransition:!!f},e.slots)})}).default()}}}),tM=ut({name:"NuxtLayoutProvider",inheritAttrs:!1,props:{name:{type:[String,Boolean]},layoutProps:{type:Object},hasTransition:{type:Boolean},shouldProvide:{type:Boolean},isRenderingNewLayout:{type:Function,required:!0}},setup(t,e){const n=t.name;t.shouldProvide&&ns(ov,{isCurrent:i=>n===(i.meta.layout??"default")});const s=Vt(Or);if(s&&s===Fi()){const i=kv(),o={};for(const a in i){const l=a;Object.defineProperty(o,l,{enumerable:!0,get:()=>t.isRenderingNewLayout(t.name)?i[l]:s[l]})}ns(Or,Ln(o))}return()=>!n||typeof n=="string"&&!(n in Bs)?e.slots.default?.():ot(XL,{key:n,layoutProps:t.layoutProps,name:n},e.slots)}}),nM={class:"user-dropdown"},sM={class:"user-name"},rM={key:0,class:"dropdown-menu"},iM=ut({__name:"UserDropdown",props:{userName:{}},emits:["logout","goToProfile"],setup(t,{emit:e}){const n=e,s=de(!1),r=()=>{s.value=!s.value},i=()=>{s.value=!1},o=()=>{i(),n("goToProfile")},a=()=>{n("logout"),i()};return(l,u)=>{const h=sI("click-outside");return mo((_e(),ke("div",nM,[j("button",{class:"dropdown-trigger",onClick:r},[j("span",sM,_n(t.userName),1),(_e(),ke("svg",{class:Ot(["arrow-icon",{"arrow-icon--open":s.value}]),width:"12",height:"12",viewBox:"0 0 12 12",fill:"none"},[...u[0]||(u[0]=[j("path",{d:"M3 4.5L6 7.5L9 4.5",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)])],2))]),we(ua,{name:"dropdown"},{default:cn(()=>[s.value?(_e(),ke("div",rM,[j("button",{class:"dropdown-item",onClick:o},[...u[1]||(u[1]=[j("svg",{class:"item-icon",width:"16",height:"16",viewBox:"0 0 16 16",fill:"none"},[j("circle",{cx:"8",cy:"5",r:"3",stroke:"currentColor","stroke-width":"1.5"}),j("path",{d:"M2 14c0-3 2.5-5 6-5s6 2 6 5",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round"})],-1),Qe(" Profilo ",-1)])]),u[3]||(u[3]=j("button",{class:"dropdown-item dropdown-item--disabled",disabled:""},[j("svg",{class:"item-icon",width:"16",height:"16",viewBox:"0 0 16 16",fill:"none"},[j("circle",{cx:"8",cy:"8",r:"6",stroke:"currentColor","stroke-width":"1.5"}),j("path",{d:"M8 5v3l2 2",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round"})]),Qe(" Impostazioni ")],-1)),u[4]||(u[4]=j("div",{class:"dropdown-divider"},null,-1)),j("button",{class:"dropdown-item dropdown-item--danger",onClick:a},[...u[2]||(u[2]=[j("svg",{class:"item-icon",width:"16",height:"16",viewBox:"0 0 16 16",fill:"none"},[j("path",{d:"M6 2H4a2 2 0 00-2 2v8a2 2 0 002 2h2M11 11l3-3-3-3M14 8H6",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"})],-1),Qe(" Logout ",-1)])])])):hs("",!0)]),_:1})])),[[h,i]])}}}),oM=Object.assign(gn(iM,[["__scopeId","data-v-a926000c"]]),{__name:"UiUserDropdown"}),aM={class:"profile-page"},cM={class:"profile-header"},lM={class:"header-inner"},uM={class:"header-right"},hM={class:"profile-main"},fM={class:"profile-container"},dM={class:"page-title"},pM={class:"profile-grid"},mM={class:"profile-sidebar"},gM={class:"user-info"},_M={class:"user-nickname"},yM={class:"user-email"},vM={class:"profile-content"},EM={class:"profile-card"},TM={class:"equipment-form"},wM={class:"form-group"},bM={class:"form-group"},IM={class:"form-group"},AM={class:"form-group"},RM=["disabled"],SM={class:"profile-card sharing-card"},CM={class:"sharing-info"},PM={key:0,class:"sharing-count"},kM={key:1,class:"sharing-count sharing-count--empty"},NM=["disabled"],DM=ut({__name:"ProfilePage",props:{userEmail:{},userNickname:{},userRole:{}},emits:["logout","back"],setup(t,{emit:e}){const n=t,s=e,{currentUser:r,getUserProfile:i}=Ki(),o=Fe(()=>n.userNickname?n.userNickname:n.userEmail?n.userEmail.split("@")[0]??"Utente":"Utente"),a=Fe(()=>({pilot:"Profilo Pilota",coach:"Profilo Coach",admin:"Profilo Admin"})[n.userRole||"pilot"]),l=Fe(()=>({pilot:"PILOTA",coach:"COACH",admin:"ADMIN"})[n.userRole||"pilot"]),u=de({volante:"",corona:"",pedaliera:"",struttura:""}),h=de(!1),f=de(!1);Js(async()=>{if(r.value){const T=await i(r.value.uid);T?.equipment&&(u.value={...u.value,...T.equipment}),await V()}});const{countSharedSessions:p,revokeAllSharedSessions:m}=jl(),b=de(0),v=de(!1),D=de(!1);async function V(){b.value=await p()}async function N(){if(!v.value){v.value=!0,D.value=!1;try{const T=await m();b.value=0,D.value=!0,console.log(`[PROFILE] Revoked ${T} shared sessions`),setTimeout(()=>D.value=!1,2e3)}catch(T){console.error("[PROFILE] Revoke error:",T)}finally{v.value=!1}}}const _=async()=>{if(r.value){h.value=!0;try{const{doc:T,updateDoc:y}=await ft(async()=>{const{doc:R,updateDoc:P}=await Promise.resolve().then(()=>QV);return{doc:R,updateDoc:P}},void 0,import.meta.url),{db:E}=await ft(async()=>{const{db:R}=await Promise.resolve().then(()=>ZV);return{db:R}},void 0,import.meta.url);await y(T(E,"users",r.value.uid),{equipment:u.value}),f.value=!0,setTimeout(()=>f.value=!1,2e3)}catch(T){console.error("[PROFILE] Save error:",T)}finally{h.value=!1}}},S=()=>s("logout"),O=()=>{},U=()=>{s("back")};return(T,y)=>{const E=oM;return _e(),ke("div",aM,[j("header",cM,[j("div",lM,[j("div",{class:"header-left"},[j("button",{class:"back-btn",onClick:U},[...y[4]||(y[4]=[j("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none"},[j("path",{d:"M12 4L6 10L12 16",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1),Qe(" Dashboard ",-1)])])]),y[5]||(y[5]=j("div",{class:"header-brand"},[j("span",{class:"brand-badge"},"ACC"),j("span",{class:"brand-name"},"TELEMETRY")],-1)),j("div",uM,[we(E,{"user-name":o.value,onLogout:S,onGoToProfile:O},null,8,["user-name"])])])]),j("main",hM,[j("div",fM,[j("h1",dM,_n(a.value),1),j("div",pM,[j("div",mM,[y[6]||(y[6]=th('<div class="avatar-container" data-v-e679b5af><svg class="avatar-helmet" viewBox="0 0 100 100" fill="none" data-v-e679b5af><defs data-v-e679b5af><linearGradient id="helmetGrad" x1="0%" y1="0%" x2="100%" y2="100%" data-v-e679b5af><stop offset="0%" stop-color="#e10600" data-v-e679b5af></stop><stop offset="100%" stop-color="#ff6b00" data-v-e679b5af></stop></linearGradient></defs><path d="M50 10C30 10 15 25 15 45V60C15 75 25 85 40 88L45 90H55L60 88C75 85 85 75 85 60V45C85 25 70 10 50 10Z" stroke="url(#helmetGrad)" stroke-width="3" fill="none" data-v-e679b5af></path><path d="M20 45H80C80 45 78 55 50 55C22 55 20 45 20 45Z" stroke="url(#helmetGrad)" stroke-width="2" fill="rgba(225,6,0,0.1)" data-v-e679b5af></path><line x1="50" y1="15" x2="50" y2="85" stroke="url(#helmetGrad)" stroke-width="1.5" data-v-e679b5af></line></svg></div>',1)),j("div",gM,[j("h2",_M,_n(o.value),1),j("span",{class:Ot(["role-badge",`role-badge--${t.userRole||"pilot"}`])},_n(l.value),3),j("p",yM,_n(t.userEmail||"Email non disponibile"),1)])]),j("div",vM,[j("div",EM,[y[11]||(y[11]=j("h3",{class:"card-title"},[j("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none"},[j("circle",{cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"2"}),j("circle",{cx:"12",cy:"12",r:"4",stroke:"currentColor","stroke-width":"2"})]),Qe(" Attrezzatura Sim Racing ")],-1)),j("div",TM,[j("div",wM,[y[7]||(y[7]=j("label",{class:"form-label"},"Volante / Base",-1)),mo(j("input",{"onUpdate:modelValue":y[0]||(y[0]=R=>u.value.volante=R),type:"text",class:"form-input",placeholder:"Es. Fanatec CSL DD 8Nm"},null,512),[[Wa,u.value.volante]])]),j("div",bM,[y[8]||(y[8]=j("label",{class:"form-label"},"Corona / Rim",-1)),mo(j("input",{"onUpdate:modelValue":y[1]||(y[1]=R=>u.value.corona=R),type:"text",class:"form-input",placeholder:"Es. ClubSport Formula V2"},null,512),[[Wa,u.value.corona]])]),j("div",IM,[y[9]||(y[9]=j("label",{class:"form-label"},"Pedaliera",-1)),mo(j("input",{"onUpdate:modelValue":y[2]||(y[2]=R=>u.value.pedaliera=R),type:"text",class:"form-input",placeholder:"Es. CSL Pedals + Load Cell"},null,512),[[Wa,u.value.pedaliera]])]),j("div",AM,[y[10]||(y[10]=j("label",{class:"form-label"},"Struttura / Rig",-1)),mo(j("input",{"onUpdate:modelValue":y[3]||(y[3]=R=>u.value.struttura=R),type:"text",class:"form-input",placeholder:"Es. Next Level Racing 2.0"},null,512),[[Wa,u.value.struttura]])]),j("button",{class:Ot(["save-btn",{"save-btn--success":f.value}]),disabled:h.value,onClick:_},[h.value?(_e(),ke(ze,{key:0},[Qe("Salvataggio...")],64)):f.value?(_e(),ke(ze,{key:1},[Qe(" Salvato")],64)):(_e(),ke(ze,{key:2},[Qe("Salva Modifiche")],64))],10,RM)])]),j("div",SM,[y[14]||(y[14]=th('<h3 class="card-title" data-v-e679b5af><svg width="24" height="24" viewBox="0 0 24 24" fill="none" data-v-e679b5af><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-e679b5af></path><polyline points="15 3 21 3 21 9" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-e679b5af></polyline><line x1="10" y1="14" x2="21" y2="3" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-e679b5af></line></svg> Sessioni Condivise </h3>',1)),j("div",CM,[b.value>0?(_e(),ke("p",PM,[y[12]||(y[12]=Qe(" Hai ",-1)),j("strong",null,_n(b.value),1),y[13]||(y[13]=Qe(" sessioni condivise pubblicamente. ",-1))])):(_e(),ke("p",kM," Nessuna sessione condivisa. ")),b.value>0?(_e(),ke("button",{key:2,class:Ot(["revoke-btn",{"revoke-btn--success":D.value}]),disabled:v.value,onClick:N},[v.value?(_e(),ke(ze,{key:0},[Qe("Revocando...")],64)):D.value?(_e(),ke(ze,{key:1},[Qe(" Revocate")],64)):(_e(),ke(ze,{key:2},[Qe(" Revoca tutte le condivisioni")],64))],10,NM)):hs("",!0)])])])])])])])}}}),OM=Object.assign(gn(DM,[["__scopeId","data-v-e679b5af"]]),{__name:"ProfilePage"}),VM=fL(gL),LM={id:"app"},MM={key:"initializing",class:"initializing-screen"},xM={key:"register-success",class:"auth-wrapper"},FM={class:"auth-card-standalone"},UM={key:"loading",class:"loading-screen"},BM={key:"dashboard",class:"dashboard-wrapper"},$M={key:"profile",class:"profile-wrapper"},HM="dissolve-fade-zoom",jM=ut({__name:"app",setup(t){Fi();const e=zt();Js(()=>{const S=sessionStorage.getItem("spa-redirect-path");S&&(sessionStorage.removeItem("spa-redirect-path"),setTimeout(()=>{e.push(S)},100))});const{currentUser:n,isLoading:s,logout:r}=Ki(),{prefetchAllTrackBests:i,loadSessions:o}=jl(),a=de(!1),l=de("initializing"),u=de("login"),h=de(""),f=de(!1),p=de(!1);xn(l,async S=>{if(S==="dashboard"&&!a.value&&n.value){a.value=!0,console.log("[APP]  Starting global prefetch..."),await o();const O=await i();console.log(`[APP]  Prefetch complete: ${O} trackBests cached`)}}),xn(s,S=>{!S&&!f.value&&(f.value=!0,n.value?(h.value=n.value.email||"",p.value&&!n.value.emailVerified?(l.value="auth",u.value="register-success"):l.value="dashboard"):l.value="auth")},{immediate:!0}),xn(n,(S,O)=>{f.value&&(S?(h.value=S.email||"",p.value&&!S.emailVerified?(l.value!=="auth"||u.value!=="register-success")&&(l.value="auth",u.value="register-success"):l.value==="auth"&&u.value!=="register-success"&&(l.value="loading",setTimeout(()=>{l.value="dashboard"},1e3))):O&&(l.value="auth",u.value="login"))});const m=S=>{if(h.value=S,p.value&&n.value&&!n.value.emailVerified){u.value="register-success";return}l.value="loading",setTimeout(()=>{l.value="dashboard",e.push("/panoramica")},1500)},b=S=>{h.value=S,p.value?u.value="register-success":(l.value="loading",setTimeout(()=>{l.value="dashboard",e.push("/panoramica")},1500))},v=()=>{l.value="loading",setTimeout(()=>{l.value="dashboard",e.push("/panoramica")},1500)},D=()=>{console.log("[AUTH] Resending verification email to:",h.value)},V=async()=>{await r(),h.value="",u.value="login",l.value="auth"},N=()=>{l.value="profile"},_=()=>{l.value="dashboard"};return ns("goToProfile",N),(S,O)=>{const U=hL,T=VM,y=xL,E=GL,R=zL,P=eM,C=OM;return _e(),ke("div",LM,[we(U),we(T),we(ua,{name:HM,mode:"out-in"},{default:cn(()=>[l.value==="initializing"?(_e(),ke("div",MM,[...O[0]||(O[0]=[j("div",{class:"initializing-content"},[j("div",{class:"initializing-spinner"})],-1)])])):l.value==="auth"&&u.value!=="register-success"?(_e(),Jt(y,{key:"auth",onLoginSuccess:m,onRegisterSuccess:b})):l.value==="auth"&&u.value==="register-success"?(_e(),ke("div",xM,[j("div",FM,[we(E,{email:h.value,"require-email-verification":p.value,onGoToDashboard:v,onResendEmail:D},null,8,["email","require-email-verification"])])])):l.value==="loading"?(_e(),ke("div",UM,[...O[1]||(O[1]=[j("div",{class:"loading-content"},[j("div",{class:"loading-spinner"}),j("p",{class:"loading-text"},"Caricamento Dashboard...")],-1)])])):l.value==="dashboard"?(_e(),ke("div",BM,[we(P,null,{default:cn(()=>[we(R)]),_:1})])):l.value==="profile"?(_e(),ke("div",$M,[we(C,{onBack:_,onLogout:V})])):hs("",!0)]),_:1})])}}}),qM={__name:"nuxt-error-page",props:{error:Object},setup(t){const n=t.error,s=Number(n.statusCode||500),r=s===404,i=n.statusMessage??(r?"Page Not Found":"Internal Server Error"),o=n.message||n.toString(),a=void 0,h=r?Ac(()=>ft(()=>import("./Bz2WExuP.js"),__vite__mapDeps([41,5,42]),import.meta.url)):Ac(()=>ft(()=>import("./DZR-v4-X.js"),__vite__mapDeps([43,44]),import.meta.url));return(f,p)=>(_e(),Jt(Ge(h),Qw(Ly({statusCode:Ge(s),statusMessage:Ge(i),description:Ge(o),stack:Ge(a)})),null,16))}},GM={key:0},v_={__name:"nuxt-root",setup(t){const e=()=>null,n=ct(),s=n.deferHydration();if(n.isHydrating){const u=n.hooks.hookOnce("app:error",s);zt().beforeEach(u)}const r=!1;ns(Or,Fi()),n.hooks.callHookWith(u=>u.map(h=>h()),"vue:setup");const i=gl(),o=!1,a=/bot\b|chrome-lighthouse|facebookexternalhit|google\b/i;hy((u,h,f)=>{if(n.hooks.callHook("vue:error",u,h,f).catch(p=>console.error("[nuxt] Error in `vue:error` hook",p)),a.test(navigator.userAgent))return n.hooks.callHook("app:error",u),console.error(`[nuxt] Not rendering error page for bot with user agent \`${navigator.userAgent}\`:`,u),!1;if(cv(u)&&(u.fatal||u.unhandled))return n.runWithContext(()=>wr(u)),!1});const l=!1;return(u,h)=>(_e(),Jt(mf,{onResolve:Ge(s)},{default:cn(()=>[Ge(o)?(_e(),ke("div",GM)):Ge(i)?(_e(),Jt(Ge(qM),{key:1,error:Ge(i)},null,8,["error"])):Ge(l)?(_e(),Jt(Ge(e),{key:2,context:Ge(l)},null,8,["context"])):Ge(r)?(_e(),Jt(nI(Ge(r)),{key:3})):(_e(),Jt(Ge(jM),{key:4}))]),_:1},8,["onResolve"]))}};let E_;{let t;E_=async function(){if(t)return t;const n=!!(window.__NUXT__?.serverRendered??document.getElementById("__NUXT_DATA__")?.dataset.ssr==="true"),s=n?wA(v_):TA(v_),r=OR({vueApp:s});async function i(o){await r.callHook("app:error",o),r.payload.error||=kr(o)}s.config.errorHandler=i,r.hook("app:suspense:resolve",()=>{s.config.errorHandler===i&&(s.config.errorHandler=void 0)}),!n&&tm.id&&r.hook("app:suspense:resolve",()=>{document.getElementById(tm.id)?.remove()});try{await MR(r,LC)}catch(o){i(o)}try{await r.hooks.callHook("app:created",s),await r.hooks.callHook("app:beforeMount",s),s.mount(kR),await r.hooks.callHook("app:mounted",s),await Ys()}catch(o){i(o)}return s},t=E_().catch(e=>{throw console.error("Error while mounting app:",e),e})}export{ol as $,Dm as A,sx as B,ZM as C,nx as D,ke as E,_e as F,j as G,_n as H,we as I,cn as J,Qe as K,Jt as L,Ge as M,OM as N,Fi as O,hs as P,ze as Q,KM as R,Wt as S,Xe as T,Hs as U,yc as V,Vn as W,Fo as X,Uo as Y,Vi as Z,gn as _,Ki as a,Ot as a0,ks as a1,jl as a2,cx as a3,ox as a4,ix as a5,ax as a6,mo as a7,YM as a8,pl as a9,Wa as aa,th as ab,_c as ac,hx as ad,QM as ae,rI as af,oM as ag,qI as ah,uy as ai,Ue as aj,Ys as ak,cl as al,WM as am,JM as an,ux as ao,ua as ap,lx as aq,ut as b,zt as c,ex as d,pi as e,ct as f,Cf as g,ca as h,Vt as i,ot as j,zM as k,Gy as l,WR as m,tx as n,Js as o,ns as p,NC as q,de as r,us as s,Fe as t,ml as u,Hr as v,xn as w,yf as x,KA as y,Oc as z};
