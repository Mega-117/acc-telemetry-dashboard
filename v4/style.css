/* ===== CSS Variables & Design System ===== */
:root {
    /* Colors - Dark Theme */
    --bg-primary: #0a0a0f;
    --bg-secondary: #12121a;
    --bg-card: #1a1a25;
    --bg-card-hover: #22222f;
    --bg-elevated: #252533;

    /* === THEME ACCENT COLORS (Switchable) === */
    --theme-accent: #6366f1;
    --theme-accent-rgb: 99, 102, 241;
    --theme-accent-light: #818cf8;
    --theme-accent-dark: #4f46e5;
    --theme-accent-glow: rgba(var(--theme-accent-rgb), 0.3);
    --theme-accent-subtle: rgba(var(--theme-accent-rgb), 0.1);
    --theme-accent-border: rgba(var(--theme-accent-rgb), 0.25);

    --theme-secondary: #8b5cf6;
    --theme-secondary-rgb: 139, 92, 246;
    --theme-secondary-light: #a78bfa;
    --theme-secondary-glow: rgba(var(--theme-secondary-rgb), 0.3);

    /* Legacy Accent Colors (mapped to theme) */
    --accent-primary: var(--theme-accent);
    --accent-primary-glow: var(--theme-accent-glow);
    --accent-secondary: var(--theme-secondary);

    /* Status Colors (Fixed across themes) */
    --accent-success: #22c55e;
    --accent-success-light: #4ade80;
    --accent-success-glow: rgba(34, 197, 94, 0.3);
    --accent-warning: #f59e0b;
    --accent-warning-light: #fbbf24;
    --accent-warning-glow: rgba(245, 158, 11, 0.3);
    --accent-danger: #ef4444;
    --accent-danger-light: #f87171;
    --accent-danger-glow: rgba(239, 68, 68, 0.3);
    --accent-info: #3b82f6;
    --accent-info-light: #60a5fa;

    /* Text Colors */
    --text-primary: #ffffff;
    --text-secondary: #a1a1aa;
    --text-muted: #71717a;

    /* Gradients (using theme colors) */
    --gradient-primary: linear-gradient(135deg, var(--theme-accent) 0%, var(--theme-secondary) 100%);
    --gradient-success: linear-gradient(135deg, #22c55e 0%, #16a34a 100%);
    --gradient-warning: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);
    --gradient-danger: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);
    --gradient-card: linear-gradient(180deg, rgba(255, 255, 255, 0.05) 0%, rgba(255, 255, 255, 0) 100%);

    /* Chart Colors */
    --chart-primary: var(--theme-accent);
    --chart-secondary: #f97316;
    --chart-best: #22c55e;
    --chart-invalid: #ef4444;

    /* Borders */
    --border-color: rgba(255, 255, 255, 0.08);
    --border-radius-sm: 8px;
    --border-radius-md: 12px;
    --border-radius-lg: 16px;
    --border-radius-xl: 24px;

    /* Shadows */
    --shadow-sm: 0 2px 8px rgba(0, 0, 0, 0.3);
    --shadow-md: 0 4px 20px rgba(0, 0, 0, 0.4);
    --shadow-lg: 0 8px 40px rgba(0, 0, 0, 0.5);
    --shadow-glow: 0 0 30px var(--theme-accent-glow);

    /* Transitions */
    --transition-fast: 0.15s ease;
    --transition-normal: 0.25s ease;
    --transition-slow: 0.4s ease;

    /* Typography */
    --font-primary: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
    --font-display: 'Outfit', 'Inter', sans-serif;
}

/* =============================================
   THEME PALETTES - 10 Color Schemes
   ============================================= */

/* Theme: Neon Cyan (Cyberpunk) */
[data-theme="neon-cyan"] {
    --theme-accent: #00f5ff;
    --theme-accent-rgb: 0, 245, 255;
    --theme-accent-light: #67ffff;
    --theme-accent-dark: #00c4cc;
    --theme-secondary: #00d4aa;
    --theme-secondary-rgb: 0, 212, 170;
    --theme-secondary-light: #5cffdb;
}

/* Theme: Lime Flash (Fresh Green) */
[data-theme="lime-flash"] {
    --theme-accent: #84cc16;
    --theme-accent-rgb: 132, 204, 22;
    --theme-accent-light: #a3e635;
    --theme-accent-dark: #65a30d;
    --theme-secondary: #22c55e;
    --theme-secondary-rgb: 34, 197, 94;
    --theme-secondary-light: #4ade80;
}

/* Theme: Sunset Orange (Warm) */
[data-theme="sunset-orange"] {
    --theme-accent: #f97316;
    --theme-accent-rgb: 249, 115, 22;
    --theme-accent-light: #fb923c;
    --theme-accent-dark: #ea580c;
    --theme-secondary: #ef4444;
    --theme-secondary-rgb: 239, 68, 68;
    --theme-secondary-light: #f87171;
}

/* Theme: Pink Fury (Hot Pink) */
[data-theme="pink-fury"] {
    --theme-accent: #ec4899;
    --theme-accent-rgb: 236, 72, 153;
    --theme-accent-light: #f472b6;
    --theme-accent-dark: #db2777;
    --theme-secondary: #a855f7;
    --theme-secondary-rgb: 168, 85, 247;
    --theme-secondary-light: #c084fc;
}

/* Theme: Golden Rush (Luxury Gold) */
[data-theme="golden-rush"] {
    --theme-accent: #eab308;
    --theme-accent-rgb: 234, 179, 8;
    --theme-accent-light: #facc15;
    --theme-accent-dark: #ca8a04;
    --theme-secondary: #f59e0b;
    --theme-secondary-rgb: 245, 158, 11;
    --theme-secondary-light: #fbbf24;
}

/* Theme: Ice Blue (Cool) */
[data-theme="ice-blue"] {
    --theme-accent: #38bdf8;
    --theme-accent-rgb: 56, 189, 248;
    --theme-accent-light: #7dd3fc;
    --theme-accent-dark: #0ea5e9;
    --theme-secondary: #06b6d4;
    --theme-secondary-rgb: 6, 182, 212;
    --theme-secondary-light: #22d3ee;
}

/* Theme: Toxic Green (Neon) */
[data-theme="toxic-green"] {
    --theme-accent: #22c55e;
    --theme-accent-rgb: 34, 197, 94;
    --theme-accent-light: #4ade80;
    --theme-accent-dark: #16a34a;
    --theme-secondary: #84cc16;
    --theme-secondary-rgb: 132, 204, 22;
    --theme-secondary-light: #a3e635;
}

/* Theme: Crimson Red (Racing) */
[data-theme="crimson-red"] {
    --theme-accent: #dc2626;
    --theme-accent-rgb: 220, 38, 38;
    --theme-accent-light: #ef4444;
    --theme-accent-dark: #b91c1c;
    --theme-secondary: #f97316;
    --theme-secondary-rgb: 249, 115, 22;
    --theme-secondary-light: #fb923c;
}

/* Theme: Ultra Violet (Deep Purple) */
[data-theme="ultra-violet"] {
    --theme-accent: #a855f7;
    --theme-accent-rgb: 168, 85, 247;
    --theme-accent-light: #c084fc;
    --theme-accent-dark: #9333ea;
    --theme-secondary: #ec4899;
    --theme-secondary-rgb: 236, 72, 153;
    --theme-secondary-light: #f472b6;
}

/* ===== Splash Screen - SimRacing Style ===== */
.splash-overlay {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    z-index: 9999;
    display: flex;
    align-items: center;
    justify-content: center;
    background: linear-gradient(180deg,
            rgba(8, 8, 15, 0.98) 0%,
            rgba(12, 12, 22, 0.99) 50%,
            rgba(8, 8, 15, 0.98) 100%);
    overflow: hidden;
}

/* Speed lines background effect */
.splash-overlay::before {
    content: '';
    position: absolute;
    inset: 0;
    background:
        repeating-linear-gradient(90deg,
            transparent 0px,
            transparent 100px,
            rgba(99, 102, 241, 0.03) 100px,
            rgba(99, 102, 241, 0.03) 101px);
    animation: speedLinesDrift 20s linear infinite;
}

@keyframes speedLinesDrift {
    0% {
        transform: translateX(0);
    }

    100% {
        transform: translateX(-100px);
    }
}

.splash-overlay.exiting {
    animation: racingWipeOut 0.8s cubic-bezier(0.7, 0, 0.3, 1) forwards;
}

@keyframes racingWipeOut {
    0% {
        clip-path: inset(0 0 0 0);
        opacity: 1;
    }

    50% {
        clip-path: inset(0 0 0 0);
        opacity: 1;
    }

    100% {
        clip-path: inset(0 0 100% 0);
        opacity: 0;
    }
}

/* Particles container */
.splash-particles {
    position: absolute;
    inset: 0;
    overflow: hidden;
    pointer-events: none;
}

.splash-particle {
    position: absolute;
    width: 3px;
    height: 3px;
    background: var(--accent-primary);
    border-radius: 50%;
    opacity: 0;
    box-shadow: 0 0 6px var(--accent-primary);
}

/* Main splash box - clean minimal style */
.splash-box {
    position: relative;
    padding: 50px 70px;
    background: rgba(15, 15, 25, 0.9);
    border-radius: 16px;
    border: 2px solid var(--accent-primary);
    animation: fluoGlow 3s ease-in-out infinite;
}

/* Simple fluorescent glow breathing */
@keyframes fluoGlow {

    0%,
    100% {
        box-shadow:
            0 0 20px rgba(99, 102, 241, 0.3),
            0 0 40px rgba(99, 102, 241, 0.15);
    }

    50% {
        box-shadow:
            0 0 30px rgba(139, 92, 246, 0.5),
            0 0 60px rgba(139, 92, 246, 0.3),
            0 0 100px rgba(99, 102, 241, 0.15);
    }
}

/* Outer glow ring */
.splash-glow {
    position: absolute;
    inset: -30px;
    border-radius: 40px;
    border: 1px solid transparent;
    background: radial-gradient(ellipse at center,
            rgba(99, 102, 241, 0.1) 0%,
            transparent 70%);
    z-index: -1;
    animation: glowRing 3s ease-in-out infinite;
    pointer-events: none;
}

@keyframes glowRing {

    0%,
    100% {
        opacity: 0.4;
    }

    50% {
        opacity: 0.8;
    }
}

/* Splash content */
.splash-content {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 35px;
    position: relative;
    z-index: 1;
}

/* Logo - matching reference image style */
.splash-logo {
    display: flex;
    align-items: center;
    gap: 14px;
}

.splash-logo-mark {
    font-family: var(--font-display);
    font-size: 1.6rem;
    font-weight: 700;
    color: var(--accent-primary);
    letter-spacing: 0.05em;
    padding: 8px 14px;
    border: 2px solid var(--accent-primary);
    border-radius: 6px;
    background: transparent;
    position: relative;
}

/* Subtle glow on ACC badge */
.splash-logo-mark::after {
    content: '';
    position: absolute;
    inset: -4px;
    border-radius: 8px;
    background: radial-gradient(ellipse at center,
            rgba(99, 102, 241, 0.2) 0%,
            transparent 70%);
    z-index: -1;
    animation: badgeGlow 1.5s ease-in-out infinite;
}

@keyframes badgeGlow {

    0%,
    100% {
        opacity: 0.5;
    }

    15%,
    45% {
        opacity: 1;
    }
}

.splash-logo-text {
    font-family: var(--font-display);
    font-size: 1.6rem;
    font-weight: 600;
    color: var(--text-primary);
    letter-spacing: 0.2em;
    text-transform: uppercase;
}

/* Buttons in splash */
.splash-buttons {
    display: flex;
    gap: 14px;
}

.splash-btn {
    padding: 12px 24px;
    font-size: 0.85rem;
    letter-spacing: 0.1em;
    border-radius: 8px;
    transition: all 0.25s ease;
}

.splash-btn:hover {
    transform: translateY(-2px);
    box-shadow: 0 8px 25px rgba(99, 102, 241, 0.3);
}

/* Professional Morph Animation */
.splash-overlay.morphing {
    animation: none;
}

.splash-overlay.morphing .splash-box {
    animation: professionalFadeOut 0.7s cubic-bezier(0.4, 0, 0.2, 1) forwards;
}

.splash-overlay.morphing .splash-glow {
    animation: glowFadeOut 0.5s ease-out forwards;
}

.splash-overlay.morphing .splash-content {
    animation: contentFadeOut 0.5s cubic-bezier(0.4, 0, 0.2, 1) forwards;
}

@keyframes professionalFadeOut {
    0% {
        transform: scale(1);
        opacity: 1;
    }

    100% {
        transform: scale(0.96);
        opacity: 0;
    }
}

@keyframes glowFadeOut {
    0% {
        opacity: 1;
    }

    100% {
        opacity: 0;
    }
}

@keyframes contentFadeOut {
    0% {
        transform: translateY(0);
        opacity: 1;
    }

    100% {
        transform: translateY(-15px);
        opacity: 0;
    }
}

/* Particle explosion animation */
@keyframes particleExplode {
    0% {
        opacity: 1;
        transform: translate(0, 0) scale(1);
    }

    100% {
        opacity: 0;
        transform: translate(var(--tx), var(--ty)) scale(0);
    }
}

/* Hide splash when done */
.splash-overlay.hidden {
    display: none;
}

/* App container during splash - gradual reveal */
.app-container.splash-active {
    opacity: 0;
    visibility: hidden;
}

.app-container.splash-active.revealing {
    opacity: 1;
    visibility: visible;
}

/* Staggered entrance animations for dashboard elements */
.app-container.splash-active.revealing .header {
    animation: revealFromTop 0.8s cubic-bezier(0.4, 0, 0.2, 1) forwards;
    animation-delay: 0.1s;
    opacity: 0;
}

.app-container.splash-active.revealing .nav-tabs {
    animation: revealFromBottom 0.8s cubic-bezier(0.4, 0, 0.2, 1) forwards;
    animation-delay: 0.2s;
    opacity: 0;
}

.app-container.splash-active.revealing .view.active {
    animation: revealFadeIn 1s cubic-bezier(0.4, 0, 0.2, 1) forwards;
    animation-delay: 0.35s;
    opacity: 0;
}

@keyframes revealFromTop {
    0% {
        opacity: 0;
        transform: translateY(-20px);
    }

    100% {
        opacity: 1;
        transform: translateY(0);
    }
}

@keyframes revealFromBottom {
    0% {
        opacity: 0;
        transform: translateY(15px);
    }

    100% {
        opacity: 1;
        transform: translateY(0);
    }
}

@keyframes revealFadeIn {
    0% {
        opacity: 0;
        transform: translateY(25px);
    }

    100% {
        opacity: 1;
        transform: translateY(0);
    }
}

/* ===== Reset & Base ===== */
*,
*::before,
*::after {
    box-sizing: border-box;
    margin: 0;
    padding: 0;
}

html {
    font-size: 16px;
    scroll-behavior: smooth;
}

body {
    font-family: var(--font-primary);
    background: var(--bg-primary);
    color: var(--text-primary);
    min-height: 100vh;
    line-height: 1.6;
    overflow-x: hidden;
}

/* Background Pattern */
body::before {
    content: '';
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background:
        radial-gradient(ellipse at 20% 0%, rgba(99, 102, 241, 0.15) 0%, transparent 50%),
        radial-gradient(ellipse at 80% 100%, rgba(139, 92, 246, 0.1) 0%, transparent 50%);
    pointer-events: none;
    z-index: -1;
}

/* ===== App Container ===== */
.app-container {
    max-width: 1400px;
    margin: 0 auto;
    padding: 0 24px;
}

/* ===== Header ===== */
.main-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 24px 0;
    border-bottom: 1px solid var(--border-color);
    margin-bottom: 24px;
}

.logo {
    display: flex;
    align-items: center;
    gap: 12px;
}

.logo-icon {
    font-size: 2rem;
    filter: drop-shadow(0 0 10px var(--accent-primary-glow));
}

/* Professional Logo Mark - Typography based */
.logo-mark {
    font-family: var(--font-display);
    font-size: 1.5rem;
    font-weight: 800;
    letter-spacing: 2px;
    color: var(--accent-primary);
    padding: 4px 10px;
    border: 2px solid var(--accent-primary);
    border-radius: 4px;
    white-space: nowrap;
}

.logo h1 {
    font-family: var(--font-display);
    font-size: 1.75rem;
    font-weight: 700;
    background: var(--gradient-primary);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
}

/* ===== Buttons ===== */
.btn {
    display: inline-flex;
    align-items: center;
    gap: 8px;
    padding: 12px 24px;
    font-family: var(--font-primary);
    font-size: 0.925rem;
    font-weight: 600;
    border: none;
    border-radius: var(--border-radius-md);
    cursor: pointer;
    transition: all var(--transition-normal);
}

.btn-primary {
    background: var(--gradient-primary);
    color: white;
    box-shadow: var(--shadow-sm), 0 0 20px var(--accent-primary-glow);
}

.btn-primary:hover {
    transform: translateY(-2px);
    box-shadow: var(--shadow-md), 0 0 30px var(--accent-primary-glow);
}

.btn-secondary {
    background: var(--bg-elevated);
    color: var(--text-primary);
    border: 1px solid var(--border-color);
}

.btn-secondary:hover {
    background: var(--bg-card-hover);
    border-color: var(--accent-primary);
}

.btn-back {
    background: transparent;
    color: var(--text-secondary);
    padding: 8px 16px;
}

.btn-back:hover {
    color: var(--text-primary);
    background: var(--bg-card);
}

/* Accent button for Driver History */
.btn-accent {
    background: linear-gradient(135deg, #10b981 0%, #059669 100%);
    color: white;
    box-shadow: var(--shadow-sm), 0 0 20px rgba(16, 185, 129, 0.3);
}

.btn-accent:hover {
    transform: translateY(-2px);
    box-shadow: var(--shadow-md), 0 0 30px rgba(16, 185, 129, 0.4);
}

.btn-icon-text {
    font-size: 1rem;
}

/* History button - amber accent */
.btn-history {
    background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);
    color: white;
    box-shadow: var(--shadow-sm), 0 0 15px rgba(245, 158, 11, 0.25);
}

.btn-history:hover {
    transform: translateY(-2px);
    box-shadow: var(--shadow-md), 0 0 25px rgba(245, 158, 11, 0.35);
}

/* ===== Theme Selector Dropdown ===== */
.theme-selector {
    position: relative;
    margin-right: 8px;
}

.theme-selector select {
    appearance: none;
    -webkit-appearance: none;
    background: linear-gradient(145deg, var(--bg-card) 0%, var(--bg-elevated) 100%);
    border: 1px solid var(--theme-accent-border);
    border-radius: var(--border-radius-md);
    padding: 10px 36px 10px 14px;
    font-family: var(--font-primary);
    font-size: 0.85rem;
    font-weight: 500;
    color: var(--text-primary);
    cursor: pointer;
    transition: all var(--transition-normal);
    min-width: 140px;
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 12 12'%3E%3Cpath fill='%236366f1' d='M6 8L2 4h8z'/%3E%3C/svg%3E");
    background-repeat: no-repeat;
    background-position: right 12px center;
}

.theme-selector select:hover {
    border-color: var(--theme-accent);
    box-shadow: 0 0 15px var(--theme-accent-glow);
}

.theme-selector select:focus {
    outline: none;
    border-color: var(--theme-accent);
    box-shadow: 0 0 20px var(--theme-accent-glow), 0 0 0 2px var(--theme-accent-subtle);
}

.theme-selector select option {
    background: var(--bg-card);
    color: var(--text-primary);
    padding: 10px;
}

/* Icon-only button */
.btn-icon {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    width: 44px;
    height: 44px;
    padding: 0;
    font-size: 1.4rem;
    background: var(--bg-elevated);
    color: var(--text-primary);
    border: 1px solid var(--border-color);
    border-radius: var(--border-radius-md);
}

.btn-icon:hover {
    background: var(--bg-card-hover);
    border-color: var(--accent-primary);
}

/* Header Menu Dropdown */
.header-menu {
    position: relative;
}

.header-dropdown {
    position: absolute;
    top: calc(100% + 8px);
    right: 0;
    min-width: 180px;
    background: var(--bg-card);
    border: 1px solid var(--border-color);
    border-radius: var(--border-radius-md);
    box-shadow: var(--shadow-lg);
    display: none;
    z-index: 100;
    overflow: hidden;
}

.header-dropdown.active {
    display: block;
    animation: dropdownSlide 0.2s ease;
}

@keyframes dropdownSlide {
    from {
        opacity: 0;
        transform: translateY(-8px);
    }

    to {
        opacity: 1;
        transform: translateY(0);
    }
}

.header-dropdown button {
    width: 100%;
    padding: 12px 16px;
    text-align: left;
    background: transparent;
    border: none;
    color: var(--text-primary);
    font-family: var(--font-primary);
    font-size: 0.9rem;
    cursor: pointer;
    transition: background 0.15s ease;
}

.header-dropdown button:hover {
    background: var(--bg-elevated);
}

.header-dropdown button:not(:last-child) {
    border-bottom: 1px solid var(--border-color);
}

/* ===== Navigation Tabs ===== */
.nav-tabs {
    position: relative;
    display: flex;
    gap: 0;
    padding: 5px;
    background: linear-gradient(135deg, rgba(255, 255, 255, 0.06) 0%, rgba(255, 255, 255, 0.02) 100%);
    backdrop-filter: blur(12px) saturate(180%);
    -webkit-backdrop-filter: blur(12px) saturate(180%);
    border-radius: 12px;
    border: 1px solid rgba(255, 255, 255, 0.1);
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.12), inset 0 1px 0 rgba(255, 255, 255, 0.06);
    margin-bottom: 24px;
    overflow: visible;
}

/* Sliding indicator for nav-tabs */
.nav-tabs::before {
    content: '';
    position: absolute;
    top: 6px;
    left: 6px;
    width: calc(33.333% - 6px);
    height: calc(100% - 12px);
    background: var(--gradient-primary);
    border-radius: 10px;
    transition: transform 0.45s cubic-bezier(0.34, 1.40, 0.64, 1),
        box-shadow 0.3s ease;
    box-shadow:
        0 0 20px rgba(99, 102, 241, 0.5),
        0 4px 16px rgba(99, 102, 241, 0.4),
        0 2px 6px rgba(99, 102, 241, 0.3),
        inset 0 1px 0 rgba(255, 255, 255, 0.25),
        inset 0 -1px 0 rgba(0, 0, 0, 0.1);
    z-index: 0;
    will-change: transform;
    /* Position controlled by data attribute or class */
    transform: translateX(calc(var(--tab-index, 0) * 100%));
}

.nav-tabs:hover::before {
    box-shadow:
        0 0 28px rgba(99, 102, 241, 0.6),
        0 6px 24px rgba(99, 102, 241, 0.5),
        0 2px 8px rgba(99, 102, 241, 0.35),
        inset 0 1px 0 rgba(255, 255, 255, 0.3),
        inset 0 -1px 0 rgba(0, 0, 0, 0.1);
}

/* Position classes for the indicator */
.nav-tabs.tab-1::before {
    transform: translateX(0);
}

.nav-tabs.tab-2::before {
    transform: translateX(100%);
}

.nav-tabs.tab-3::before {
    transform: translateX(200%);
}

.nav-tab {
    position: relative;
    z-index: 1;
    flex: 1;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 10px;
    padding: 14px 24px;
    background: transparent;
    border: none;
    border-radius: 10px;
    color: rgba(255, 255, 255, 0.45);
    font-family: var(--font-primary);
    font-size: 0.85rem;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    cursor: pointer;
    -webkit-font-smoothing: antialiased;
    transition: color 0.25s ease;
}

.nav-tab:hover:not(.active) {
    color: rgba(255, 255, 255, 0.7);
}

.nav-tab.active {
    color: white;
    text-shadow: 0 1px 1px rgba(0, 0, 0, 0.2);
}

.tab-icon {
    font-size: 1.25rem;
}

.tab-label {
    display: inline !important;
    font-family: var(--font-primary);
    font-size: 0.9rem;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 1px;
    color: inherit;
}

/* ===== Cards ===== */
.card {
    background: var(--bg-card);
    border: 1px solid var(--border-color);
    border-radius: var(--border-radius-lg);
    padding: 24px;
    transition: all var(--transition-normal);
    position: relative;
    overflow: hidden;
}

.card::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 1px;
    background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.1), transparent);
}

.card:hover {
    border-color: rgba(255, 255, 255, 0.15);
    transform: translateY(-2px);
}

.card-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 20px;
}

.card-header h2,
.card-header h3 {
    font-family: var(--font-display);
    font-weight: 600;
    color: var(--text-primary);
}

.card-header h2 {
    font-size: 1.25rem;
}

.card-header h3 {
    font-size: 1.1rem;
}

/* ===== Badges ===== */
.badge {
    display: inline-flex;
    align-items: center;
    gap: 6px;
    padding: 6px 12px;
    font-size: 0.8rem;
    font-weight: 600;
    border-radius: 20px;
}

.badge-success {
    background: rgba(16, 185, 129, 0.15);
    color: var(--accent-success);
}

.badge-warning {
    background: rgba(245, 158, 11, 0.15);
    color: var(--accent-warning);
}

.badge-danger {
    background: rgba(239, 68, 68, 0.15);
    color: var(--accent-danger);
}

.badge-info {
    background: rgba(59, 130, 246, 0.15);
    color: var(--accent-info);
}

/* ===== Overview New Layout ===== */
.overview-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 24px 32px;
    background: var(--bg-card);
    border: 1px solid var(--border-color);
    border-radius: var(--border-radius-lg);
    margin-bottom: 24px;
}

.overview-header h1 {
    font-family: var(--font-display);
    font-size: 1.6rem;
    font-weight: 800;
    letter-spacing: 1px;
    background: var(--gradient-primary);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
}

.driver-badge {
    padding: 8px 16px;
    background: var(--bg-elevated);
    border: 1px solid var(--border-color);
    border-radius: 20px;
    font-size: 0.9rem;
    font-weight: 600;
    color: var(--accent-primary);
}

/* Toggle Switch */
.view-toggle-container {
    display: flex;
    justify-content: center;
    margin-bottom: 32px;
}

.view-toggle {
    display: flex;
    gap: 4px;
    padding: 4px;
    background: var(--bg-secondary);
    border-radius: var(--border-radius-lg);
    border: 1px solid var(--border-color);
}

.toggle-btn {
    padding: 12px 28px;
    font-family: var(--font-primary);
    font-size: 0.9rem;
    font-weight: 600;
    border: none;
    border-radius: var(--border-radius-md);
    background: transparent;
    color: var(--text-secondary);
    cursor: pointer;
    transition: all var(--transition-normal);
}

.toggle-btn.active {
    background: var(--gradient-primary);
    color: white;
    box-shadow: 0 2px 10px var(--accent-primary-glow);
}

.toggle-btn:not(.active):hover {
    color: var(--text-primary);
    /*background: var(--bg-card);*/
}

/* Overview Sections */
.overview-section {
    background: var(--bg-card);
    border: 1px solid var(--border-color);
    border-radius: var(--border-radius-lg);
    padding: 24px;
    margin-bottom: 20px;
}

.section-title {
    font-family: var(--font-display);
    font-size: 0.85rem;
    font-weight: 700;
    letter-spacing: 1px;
    color: var(--text-primary);
    margin-bottom: 16px;
    text-transform: uppercase;
}

/* Section Header with Selector */
.section-header-with-selector {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 16px;
}

.section-header-with-selector .section-title {
    margin-bottom: 0;
}

/* Year Selector */
.year-selector-container {
    display: flex;
    align-items: center;
    gap: 8px;
}

.year-selector {
    appearance: none;
    -webkit-appearance: none;
    background: var(--bg-elevated);
    color: var(--text-primary);
    border: 1px solid var(--border-color);
    border-radius: var(--border-radius-sm);
    padding: 6px 28px 6px 12px;
    font-family: var(--font-primary);
    font-size: 0.75rem;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    cursor: pointer;
    transition: all var(--transition-normal);
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 24 24' fill='none' stroke='%2371717a' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='6 9 12 15 18 9'%3E%3C/polyline%3E%3C/svg%3E");
    background-repeat: no-repeat;
    background-position: right 8px center;
}

.year-selector:hover {
    border-color: var(--accent-primary);
    background-color: var(--bg-card-hover);
}

.year-selector:focus {
    outline: none;
    border-color: var(--accent-primary);
    box-shadow: 0 0 0 2px var(--accent-primary-glow);
}

.year-selector option {
    background: var(--bg-card);
    color: var(--text-primary);
    padding: 8px;
}

.section-subtitle {
    font-weight: 400;
    text-transform: none;
    color: var(--text-muted);
    opacity: 0.7;
}

.chart-subtitle {
    font-weight: 400;
    color: var(--text-muted);
}

/* Two Column Layout */
.two-column-row {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 16px;
    margin-bottom: 16px;
}

.section-half {
    margin-bottom: 0;
}

/* Quality Compact */
.quality-compact {
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: 16px;
}

.quality-value-big {
    font-family: var(--font-display);
    font-size: 2.5rem;
    font-weight: 800;
    color: var(--accent-success);
    line-height: 1;
}

.quality-detail {
    font-size: 0.9rem;
    color: var(--text-muted);
    margin-top: 8px;
}

/* Distribution Inline - Compact */
.distribution-inline {
    display: flex;
    align-items: center;
    gap: 10px;
    padding: 4px 0;
}

.legend-inline {
    display: flex;
    flex-direction: column;
    gap: 6px;
}

.legend-row {
    display: flex;
    align-items: center;
    gap: 8px;
    font-size: 0.85rem;
    color: var(--text-primary);
}

.legend-row span:last-child {
    font-weight: 600;
    color: var(--text-secondary);
    margin-left: 4px;
}

.dot {
    width: 10px;
    height: 10px;
    border-radius: 50%;
    flex-shrink: 0;
}

.dot.practice {
    background: var(--accent-primary);
}

.dot.qualify {
    background: var(--accent-warning);
}

.dot.race {
    background: var(--accent-success);
}

/* Stats Rows */
.stats-row-3 {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 16px;
}

.stats-row-2 {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 16px;
}

.stat-box {
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: 20px;
    background: var(--bg-elevated);
    border-radius: var(--border-radius-md);
    text-align: center;
    transition: all var(--transition-fast);
}

.stat-box.highlight {
    background: linear-gradient(135deg, rgba(99, 102, 241, 0.15) 0%, rgba(139, 92, 246, 0.1) 100%);
    border: 1px solid rgba(99, 102, 241, 0.3);
}

.stat-label {
    font-size: 0.8rem;
    color: var(--text-secondary);
    margin-bottom: 8px;
}

.stat-value {
    font-family: var(--font-display);
    font-size: 1.5rem;
    font-weight: 700;
    color: var(--text-primary);
}

/* Distribution Section */
.distribution-container {
    display: flex;
    align-items: center;
    gap: 40px;
}

.donut-container {
    flex-shrink: 0;
}

.distribution-legend {
    flex: 1;
    display: flex;
    flex-direction: column;
    gap: 12px;
}

.legend-item {
    display: flex;
    align-items: center;
    gap: 12px;
    font-size: 1rem;
    color: var(--text-primary);
}

.legend-color {
    width: 12px;
    height: 12px;
    border-radius: 3px;
}

.legend-color.practice {
    background: var(--accent-primary);
}

.legend-color.qualify {
    background: var(--accent-warning);
}

.legend-color.race {
    background: var(--accent-success);
}

.legend-value {
    margin-left: auto;
    font-weight: 600;
    color: var(--text-secondary);
}

/* Track Chips */
.tracks-chips {
    display: flex;
    flex-wrap: wrap;
    gap: 8px;
}

.track-chip {
    display: inline-block;
    padding: 6px 14px;
    background: var(--bg-elevated);
    border: 1px solid var(--border-color);
    border-radius: 20px;
    font-size: 0.85rem;
    font-weight: 500;
    color: var(--text-primary);
}

.track-chip.empty {
    color: var(--text-muted);
    font-style: italic;
    background: transparent;
    border-color: transparent;
}

.track-chip.extra {
    background: var(--accent-primary);
    border-color: var(--accent-primary);
    color: white;
}

/* Rhythm Chart - Fixed baseline */
.rhythm-chart {
    display: flex;
    justify-content: space-between;
    gap: 6px;
}

.rhythm-bar {
    flex: 1;
    display: flex;
    flex-direction: column;
    align-items: center;
}

.rhythm-bar-wrapper {
    height: 60px;
    display: flex;
    align-items: flex-end;
    width: 100%;
    justify-content: center;
}

.rhythm-fill {
    width: 70%;
    max-width: 32px;
    background: var(--gradient-primary);
    border-radius: 3px 3px 0 0;
    transition: height 0.3s ease;
}

.rhythm-label {
    font-size: 0.65rem;
    color: var(--text-muted);
    margin-top: 4px;
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

.rhythm-value {
    font-size: 0.7rem;
    color: var(--text-secondary);
    font-weight: 600;
    margin-top: 2px;
    min-height: 14px;
}

/* Compact sections */
.section-compact {
    padding: 16px 24px;
}

/* Tab disabled */
.nav-tab.disabled {
    opacity: 0.4;
    cursor: not-allowed;
    pointer-events: none;
}

/* ===== SESSION DETAIL VIEW ===== */

/* Session Detail Header */
.session-detail-header {
    display: flex;
    align-items: center;
    gap: 20px;
    padding: 16px 0;
    margin-bottom: 16px;
}

.session-info-header h2 {
    font-family: var(--font-display);
    font-size: 1.5rem;
    font-weight: 700;
    color: var(--text-primary);
    margin-bottom: 4px;
}

.session-meta-header {
    display: flex;
    align-items: center;
    gap: 12px;
    font-size: 0.9rem;
    color: var(--text-secondary);
}

.session-type-badge {
    padding: 4px 12px;
    background: var(--accent-primary);
    color: white;
    border-radius: 12px;
    font-size: 0.75rem;
    font-weight: 600;
    text-transform: uppercase;
}

/* Session Synthesis */
.session-synthesis {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: 12px;
    margin-bottom: 20px;
}

.synth-item {
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: 16px;
    background: var(--bg-card);
    border: 1px solid var(--border-color);
    border-radius: var(--border-radius-md);
    text-align: center;
}

.synth-item.highlight {
    background: linear-gradient(135deg, rgba(99, 102, 241, 0.15) 0%, rgba(139, 92, 246, 0.1) 100%);
    border-color: var(--accent-primary);
}

.synth-value {
    font-family: var(--font-display);
    font-size: 1.5rem;
    font-weight: 700;
    color: var(--text-primary);
}

.synth-item.highlight .synth-value {
    color: var(--accent-primary);
}

.synth-label {
    font-size: 0.75rem;
    color: var(--text-muted);
    margin-top: 4px;
    text-transform: uppercase;
}

/* Session Section */
.session-section {
    background: var(--bg-card);
    border: 1px solid var(--border-color);
    border-radius: var(--border-radius-lg);
    padding: 20px;
    margin-bottom: 16px;
}

.section-title-sm {
    font-family: var(--font-display);
    font-size: 0.75rem;
    font-weight: 700;
    letter-spacing: 1px;
    color: var(--text-muted);
    margin-bottom: 16px;
    text-transform: uppercase;
}

/* Lap Chart Container */
.lap-chart-container {
    height: 200px;
    display: flex;
    align-items: flex-end;
    gap: 4px;
    padding: 10px 0;
}

.lap-bar {
    flex: 1;
    display: flex;
    flex-direction: column;
    align-items: center;
    cursor: pointer;
    transition: all var(--transition-fast);
}

.lap-bar:hover .lap-bar-fill {
    opacity: 1;
}

.lap-bar-fill {
    width: 80%;
    background: var(--gradient-primary);
    border-radius: 3px 3px 0 0;
    opacity: 0.8;
    transition: all var(--transition-fast);
}

.lap-bar-fill.invalid {
    background: var(--accent-danger);
    opacity: 0.5;
}

.lap-bar-fill.best {
    background: var(--gradient-success);
}

.lap-bar-num {
    font-size: 0.6rem;
    color: var(--text-muted);
    margin-top: 4px;
}

/* Stints Compact List */
.stints-compact-list {
    display: flex;
    gap: 12px;
    flex-wrap: wrap;
}

.stint-compact-card {
    flex: 1;
    min-width: 150px;
    padding: 12px 16px;
    background: var(--bg-elevated);
    border-radius: var(--border-radius-md);
    cursor: pointer;
    transition: all var(--transition-fast);
}

.stint-compact-card:hover {
    background: var(--bg-card-hover);
    transform: translateY(-2px);
}

.stint-compact-card.active {
    border: 2px solid var(--accent-primary);
}

.stint-compact-title {
    font-weight: 600;
    color: var(--text-primary);
    margin-bottom: 4px;
}

.stint-compact-meta {
    font-size: 0.8rem;
    color: var(--text-muted);
}

/* Laps Table */
.laps-table-container {
    overflow-x: auto;
}

.laps-table {
    width: 100%;
    border-collapse: collapse;
    font-size: 0.85rem;
}

.laps-table th,
.laps-table td {
    padding: 10px 12px;
    text-align: center;
    border-bottom: 1px solid var(--border-color);
}

.laps-table th {
    font-size: 0.7rem;
    font-weight: 600;
    color: var(--text-muted);
    text-transform: uppercase;
    background: var(--bg-elevated);
}

.laps-table tr:hover {
    background: var(--bg-elevated);
}

.laps-table .lap-time {
    font-family: var(--font-display);
    font-weight: 600;
}

.laps-table .best-lap {
    color: var(--accent-success);
}

.laps-table .invalid-lap {
    color: var(--accent-danger);
    opacity: 0.6;
}

.laps-table .sector-time {
    font-size: 0.8rem;
    color: var(--text-secondary);
}

.laps-table .sector-best {
    color: var(--accent-success);
    font-weight: 600;
}

.laps-table .valid-icon {
    font-size: 1rem;
}

.btn-action {
    flex: 1;
    padding: 16px 24px;
    background: var(--gradient-primary);
    color: white;
    border: none;
    border-radius: var(--border-radius-md);
    font-family: var(--font-primary);
    font-size: 1rem;
    font-weight: 600;
    cursor: pointer;
    transition: all var(--transition-normal);
}

.btn-action:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 20px var(--accent-primary-glow);
}

.btn-action-secondary {
    flex: 1;
    padding: 16px 24px;
    background: var(--bg-card);
    color: var(--text-primary);
    border: 1px solid var(--border-color);
    border-radius: var(--border-radius-md);
    font-family: var(--font-primary);
    font-size: 1rem;
    font-weight: 600;
    cursor: pointer;
    transition: all var(--transition-normal);
}

.btn-action-secondary:hover {
    background: var(--bg-elevated);
    border-color: var(--accent-primary);
}

/* ===== Sessions New Layout ===== */
.sessions-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 24px 32px;
    background: var(--bg-card);
    border: 1px solid var(--border-color);
    border-radius: var(--border-radius-lg);
    margin-bottom: 20px;
}

.sessions-header h1 {
    font-family: var(--font-display);
    font-size: 1.6rem;
    font-weight: 800;
    letter-spacing: 1px;
}

.filters-bar {
    padding: 16px 24px;
    background: var(--bg-card);
    border: 1px solid var(--border-color);
    border-radius: var(--border-radius-lg);
    margin-bottom: 12px;
}

.filter-group {
    display: flex;
    align-items: center;
    gap: 12px;
    flex-wrap: wrap;
}

.filter-group label {
    font-size: 0.85rem;
    font-weight: 600;
    color: var(--text-secondary);
}

.filter-input {
    padding: 10px 16px;
    background: var(--bg-elevated);
    border: 1px solid var(--border-color);
    border-radius: var(--border-radius-sm);
    color: var(--text-primary);
    font-family: var(--font-primary);
    font-size: 0.9rem;
    min-width: 140px;
}

.filter-input:focus {
    outline: none;
    border-color: var(--accent-primary);
}

.sorting-bar {
    display: flex;
    align-items: center;
    gap: 12px;
    padding: 12px 24px;
    background: var(--bg-secondary);
    border-radius: var(--border-radius-md);
    margin-bottom: 20px;
}

.sort-label {
    font-size: 0.85rem;
    color: var(--text-muted);
}

.sort-btn {
    padding: 8px 16px;
    background: transparent;
    border: 1px solid transparent;
    border-radius: var(--border-radius-sm);
    color: var(--text-secondary);
    font-family: var(--font-primary);
    font-size: 0.85rem;
    font-weight: 500;
    cursor: pointer;
    transition: all var(--transition-fast);
}

.sort-btn:hover {
    color: var(--text-primary);
}

.sort-btn.active {
    background: var(--bg-card);
    border-color: var(--border-color);
    color: var(--accent-primary);
}

/* Session Cards New Style */
.session-card-new {
    background: var(--bg-card);
    border: 1px solid var(--border-color);
    border-radius: var(--border-radius-lg);
    padding: 20px 24px;
    margin-bottom: 12px;
    transition: all var(--transition-normal);
}

.session-card-new:hover {
    border-color: var(--accent-primary);
    transform: translateX(4px);
}

.session-main {
    font-size: 1rem;
    color: var(--text-primary);
    margin-bottom: 8px;
}

.session-meta {
    font-size: 0.9rem;
    color: var(--text-secondary);
    margin-bottom: 8px;
}

.session-best {
    font-family: var(--font-display);
    font-size: 1.1rem;
    font-weight: 700;
    color: var(--accent-success);
    margin-bottom: 12px;
}

.session-action {
    display: flex;
    justify-content: flex-end;
}

/* ===== Stats Section (kept for compatibility) ===== */
.stats-section {
    margin-bottom: 48px;
    padding-bottom: 32px;
    border-bottom: 1px solid var(--border-color);
}

.global-section {
    border-bottom: none;
}

.section-header {
    display: flex;
    align-items: center;
    gap: 16px;
    margin-bottom: 24px;
}

.section-header h2 {
    font-family: var(--font-display);
    font-size: 1.25rem;
    font-weight: 600;
}

/* Scope Badges */
.scope-badge {
    padding: 4px 12px;
    font-size: 0.7rem;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    border-radius: 4px;
}

.scope-badge.period {
    background: rgba(139, 92, 246, 0.2);
    color: var(--accent-secondary);
    border: 1px solid var(--accent-secondary);
}

.scope-badge.global {
    background: rgba(59, 130, 246, 0.2);
    color: var(--accent-info);
    border: 1px solid var(--accent-info);
}

.period-range,
.global-info {
    color: var(--text-muted);
    font-size: 0.9rem;
    margin-left: auto;
}

/* ===== Quick Stats Grid ===== */
.quick-stats-grid {
    display: grid;
    grid-template-columns: repeat(5, 1fr);
    gap: 16px;
    margin-bottom: 24px;
}

.quick-stat-card {
    background: var(--bg-card);
    border: 1px solid var(--border-color);
    border-radius: var(--border-radius-md);
    padding: 20px;
    text-align: center;
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 8px;
    transition: all var(--transition-normal);
}

.quick-stat-card:hover {
    border-color: rgba(255, 255, 255, 0.15);
}

.quick-stat-card.highlight {
    background: linear-gradient(135deg, var(--bg-card) 0%, rgba(99, 102, 241, 0.15) 100%);
    border-color: var(--accent-primary);
}

.qs-icon {
    font-size: 1.5rem;
}

.qs-value {
    font-family: var(--font-display);
    font-size: 1.75rem;
    font-weight: 700;
    color: var(--text-primary);
}

.qs-label {
    font-size: 0.8rem;
    color: var(--text-secondary);
}

.qs-sub {
    font-size: 0.75rem;
    color: var(--text-muted);
}

/* ===== Activity Card ===== */
.activity-card {
    margin-bottom: 24px;
}

/* ===== Performance Row ===== */
.performance-row {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 16px;
}

/* ===== Global Section Styles ===== */
.global-totals-row {
    display: grid;
    grid-template-columns: repeat(5, 1fr);
    gap: 16px;
    margin-bottom: 24px;
}

.global-stat {
    display: flex;
    align-items: center;
    gap: 12px;
    padding: 16px;
    background: var(--bg-elevated);
    border-radius: var(--border-radius-md);
}

.gs-icon {
    font-size: 1.5rem;
}

.gs-content {
    display: flex;
    flex-direction: column;
}

.gs-value {
    font-family: var(--font-display);
    font-size: 1.25rem;
    font-weight: 700;
}

.gs-label {
    font-size: 0.75rem;
    color: var(--text-muted);
}

/* ===== Best Laps Card ===== */
.best-laps-card {
    padding: 20px;
}

.best-laps-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
    gap: 12px;
}

.best-lap-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 12px 16px;
    background: var(--bg-elevated);
    border-radius: var(--border-radius-sm);
    transition: all var(--transition-fast);
}

.best-lap-item:hover {
    background: var(--bg-card-hover);
}

.bli-track {
    font-weight: 600;
}

.bli-time {
    font-family: var(--font-display);
    font-weight: 700;
    color: var(--accent-success);
}

.bli-car {
    font-size: 0.8rem;
    color: var(--text-muted);
}

/* ===== Stats Grid ===== */
.stats-grid {
    display: grid;
    grid-template-columns: repeat(12, 1fr);
    gap: 24px;
    margin-bottom: 32px;
}

.card-large {
    grid-column: span 6;
}

.best-lap-card {
    grid-column: span 6;
}

.stat-card {
    grid-column: span 4;
    display: flex;
    align-items: center;
    gap: 20px;
}

.stat-icon {
    width: 56px;
    height: 56px;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: var(--border-radius-md);
    font-size: 1.5rem;
}

.stat-icon.green {
    background: rgba(16, 185, 129, 0.15);
}

.stat-icon.blue {
    background: rgba(59, 130, 246, 0.15);
}

.stat-icon.orange {
    background: rgba(245, 158, 11, 0.15);
}

.stat-content {
    display: flex;
    flex-direction: column;
}

.stat-value {
    font-family: var(--font-display);
    font-size: 1.75rem;
    font-weight: 700;
    color: var(--text-primary);
}

.stat-label {
    font-size: 0.875rem;
    color: var(--text-secondary);
}

/* ===== Performance Metrics (Rings) ===== */
.performance-metrics {
    display: flex;
    justify-content: space-around;
    align-items: center;
    padding: 20px 0;
}

.metric-ring {
    position: relative;
    width: 120px;
    height: 120px;
}

.metric-ring svg {
    width: 100%;
    height: 100%;
    transform: rotate(-90deg);
}

.ring-bg {
    fill: none;
    stroke: var(--bg-elevated);
    stroke-width: 8;
}

.ring-progress {
    fill: none;
    stroke: url(#progressGradient);
    stroke-width: 8;
    stroke-linecap: round;
    transition: stroke-dashoffset 1s ease;
}

#consistencyRing .ring-progress {
    stroke: var(--accent-success);
}

#validityRing .ring-progress {
    stroke: var(--accent-info);
}

.metric-value {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    text-align: center;
}

.metric-value span:first-child {
    display: block;
    font-family: var(--font-display);
    font-size: 1.5rem;
    font-weight: 700;
}

.metric-label {
    font-size: 0.75rem;
    color: var(--text-secondary);
}

/* ===== Best Lap Card ===== */
.best-lap-card {
    background: linear-gradient(135deg, var(--bg-card) 0%, rgba(16, 185, 129, 0.1) 100%);
}

.best-time {
    font-family: var(--font-display);
    font-size: 3rem;
    font-weight: 800;
    text-align: center;
    background: var(--gradient-success);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    margin: 0;
    letter-spacing: -1px;
}

.best-time-details {
    display: flex;
    justify-content: center;
    gap: 40px;
}

.detail-item {
    display: flex;
    flex-direction: column;
    align-items: center;
}

.detail-label {
    font-size: 0.8rem;
    color: var(--text-muted);
    margin-bottom: 4px;
}

.detail-value {
    font-weight: 600;
    color: var(--text-primary);
}

/* ===== Analysis Section ===== */
.analysis-section,
.sector-analysis-section {
    margin-bottom: 32px;
}

.analysis-section h2,
.sector-analysis-section h2 {
    font-family: var(--font-display);
    font-size: 1.25rem;
    font-weight: 600;
    margin-bottom: 20px;
    color: var(--text-primary);
}

.improvement-cards {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    gap: 16px;
}

.improvement-card {
    background: var(--bg-card);
    border: 1px solid var(--border-color);
    border-radius: var(--border-radius-md);
    padding: 20px;
    display: flex;
    align-items: flex-start;
    gap: 16px;
}

.improvement-icon {
    width: 44px;
    height: 44px;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: var(--border-radius-sm);
    font-size: 1.25rem;
    flex-shrink: 0;
}

.improvement-icon.good {
    background: rgba(16, 185, 129, 0.15);
}

.improvement-icon.improve {
    background: rgba(245, 158, 11, 0.15);
}

.improvement-icon.critical {
    background: rgba(239, 68, 68, 0.15);
}

.improvement-content h4 {
    font-weight: 600;
    margin-bottom: 4px;
}

.improvement-content p {
    font-size: 0.875rem;
    color: var(--text-secondary);
}

/* ===== Sector Bars ===== */
.sector-bars {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 20px;
}

.sector-bar-container {
    background: var(--bg-card);
    border: 1px solid var(--border-color);
    border-radius: var(--border-radius-md);
    padding: 20px;
}

.sector-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 16px;
}

.sector-header h4 {
    font-weight: 600;
}

.sector-time {
    font-family: var(--font-display);
    font-weight: 700;
    color: var(--accent-success);
}

.sector-bar {
    height: 8px;
    background: var(--bg-elevated);
    border-radius: 4px;
    overflow: hidden;
    margin-bottom: 12px;
}

.sector-bar-fill {
    height: 100%;
    border-radius: 4px;
    transition: width 0.8s ease;
}

.sector-bar-fill.s1 {
    background: var(--gradient-primary);
}

.sector-bar-fill.s2 {
    background: var(--gradient-success);
}

.sector-bar-fill.s3 {
    background: var(--gradient-warning);
}

.sector-stats {
    display: flex;
    justify-content: space-between;
    font-size: 0.8rem;
    color: var(--text-secondary);
}

/* ===== Empty State ===== */
.empty-state {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    padding: 60px 20px;
    text-align: center;
}

.empty-icon {
    font-size: 4rem;
    margin-bottom: 16px;
    opacity: 0.5;
}

.empty-state p {
    color: var(--text-secondary);
    margin-bottom: 20px;
}

/* ===== Sessions View ===== */
#sessions-view {
    max-width: 1400px;
    padding: 0 24px;
    margin: 0 auto;
    width: 100%;
}

.sessions-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 24px;
}

.sessions-header h2 {
    font-family: var(--font-display);
    font-size: 1.5rem;
    font-weight: 600;
}

.filter-controls {
    display: flex;
    gap: 12px;
}

.filter-select {
    padding: 10px 16px;
    background: var(--bg-card);
    border: 1px solid var(--border-color);
    border-radius: var(--border-radius-sm);
    color: var(--text-primary);
    font-family: var(--font-primary);
    font-size: 0.9rem;
    cursor: pointer;
    transition: all var(--transition-fast);
}

.filter-select:hover,
.filter-select:focus {
    border-color: var(--accent-primary);
    outline: none;
}

.sessions-list {
    display: flex;
    flex-direction: column;
    gap: 16px;
}

.session-card {
    background: var(--bg-card);
    border-top: 1px solid var(--border-color);
    border-radius: var(--border-radius-lg);
    padding: 24px;
    cursor: pointer;
    transition: all var(--transition-normal);
    display: grid;
    grid-template-columns: auto 1fr auto;
    gap: 24px;
    align-items: center;
}

.session-card:hover {
    /*border-color: var(--accent-primary);*/
    background: var(--bg-card-hover);

}

.session-date {
    text-align: center;
    padding: 16px;
    background: var(--bg-elevated);
    border-radius: var(--border-radius-md);
    min-width: 80px;
}

.session-date .day {
    font-family: var(--font-display);
    font-size: 1.75rem;
    font-weight: 700;
    display: block;
}

.session-date .month {
    font-size: 0.8rem;
    color: var(--text-secondary);
    text-transform: uppercase;
}

.session-info h3 {
    font-weight: 600;
    margin-bottom: 8px;
}

.session-meta {
    display: flex;
    gap: 20px;
    flex-wrap: wrap;
}

.session-meta-item {
    display: flex;
    align-items: center;
    gap: 6px;
    font-size: 0.875rem;
    color: var(--text-secondary);
}

.session-stats {
    display: flex;
    gap: 24px;
    text-align: center;
}

.session-stat {
    display: flex;
    flex-direction: column;
}

.session-stat-value {
    font-family: var(--font-display);
    font-size: 1.25rem;
    font-weight: 700;
}

.session-stat-value.best {
    color: var(--accent-success);
}

.session-stat-label {
    font-size: 0.75rem;
    color: var(--text-muted);
}

/* ===== Stints View ===== */
.stints-header {
    display: flex;
    align-items: center;
    gap: 24px;
    margin-bottom: 32px;
    padding-bottom: 24px;
    border-bottom: 1px solid var(--border-color);
}

.session-summary h2 {
    font-family: var(--font-display);
    font-size: 1.5rem;
    font-weight: 600;
}

.session-summary p {
    color: var(--text-secondary);
    font-size: 0.9rem;
}

.stints-container {
    display: flex;
    flex-direction: column;
    gap: 24px;
}

.stint-card {
    background: var(--bg-card);
    border: 1px solid var(--border-color);
    border-radius: var(--border-radius-lg);
    overflow: hidden;
}

.stint-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 20px 24px;
    background: var(--bg-elevated);
    border-bottom: 1px solid var(--border-color);
}

.stint-title {
    display: flex;
    align-items: center;
    gap: 12px;
}

.stint-number {
    width: 40px;
    height: 40px;
    display: flex;
    align-items: center;
    justify-content: center;
    background: var(--gradient-primary);
    border-radius: 50%;
    font-weight: 700;
}

.stint-title h3 {
    font-weight: 600;
}

.stint-title span {
    color: var(--text-secondary);
    font-size: 0.875rem;
}

.stint-summary {
    display: flex;
    gap: 24px;
}

.stint-summary-item {
    text-align: center;
}

.stint-summary-value {
    font-family: var(--font-display);
    font-weight: 700;
}

.stint-summary-label {
    font-size: 0.75rem;
    color: var(--text-muted);
}

.stint-laps {
    padding: 0;
}

.lap-row {
    display: grid;
    grid-template-columns: 60px 1fr 100px 100px 100px 140px 80px;
    gap: 16px;
    padding: 16px 24px;
    border-bottom: 1px solid var(--border-color);
    align-items: center;
    transition: background var(--transition-fast);
}

.lap-row:hover {
    background: var(--bg-elevated);
}

.lap-row:last-child {
    border-bottom: none;
}

.lap-row.header {
    font-size: 0.8rem;
    color: var(--text-muted);
    text-transform: uppercase;
    font-weight: 600;
    background: rgba(0, 0, 0, 0.2);
}

.lap-number {
    font-weight: 600;
}

.lap-sectors {
    display: flex;
    gap: 8px;
}

.sector-chip {
    padding: 6px 12px;
    background: var(--bg-elevated);
    border-radius: var(--border-radius-sm);
    font-size: 0.85rem;
    font-family: var(--font-display);
    font-weight: 500;
}

.sector-chip.best {
    background: rgba(16, 185, 129, 0.2);
    color: var(--accent-success);
}

.sector-chip.worst {
    background: rgba(239, 68, 68, 0.2);
    color: var(--accent-danger);
}

.lap-time {
    font-family: var(--font-display);
    font-weight: 700;
}

.lap-time.best {
    color: var(--accent-success);
}

.lap-time.invalid {
    color: var(--accent-danger);
    text-decoration: line-through;
}

.lap-fuel {
    font-size: 0.9rem;
    color: var(--text-secondary);
}

.lap-conditions {
    display: flex;
    gap: 8px;
    font-size: 0.85rem;
}

.lap-validity {
    display: flex;
    align-items: center;
    justify-content: center;
}

/* ===== Session Overview Styles ===== */
.session-overview {
    margin-bottom: 32px;
}

.session-quick-stats {
    display: grid;
    grid-template-columns: repeat(5, 1fr);
    gap: 16px;
    margin-bottom: 24px;
}

.quick-stat {
    background: var(--bg-card);
    border: 1px solid var(--border-color);
    border-radius: var(--border-radius-md);
    padding: 20px;
    text-align: center;
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 8px;
}

.qs-icon {
    font-size: 1.5rem;
}

.qs-value {
    font-family: var(--font-display);
    font-size: 1.5rem;
    font-weight: 700;
    color: var(--text-primary);
}

.qs-label {
    font-size: 0.8rem;
    color: var(--text-secondary);
}

/* Session Charts Row */
.session-charts-row {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 20px;
    margin-bottom: 24px;
}

.chart-card {
    min-height: 280px;
}

.chart-card .card-header {
    margin-bottom: 16px;
}

/* Lap Times Chart */
.lap-times-chart {
    height: 180px;
    display: flex;
    align-items: flex-end;
    gap: 4px;
    padding: 0 10px;
}

.lap-bar-container {
    flex: 1;
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 4px;
}

.lap-bar {
    width: 100%;
    min-height: 10px;
    border-radius: 4px 4px 0 0;
    transition: all var(--transition-normal);
    cursor: pointer;
}

.lap-bar.valid {
    background: var(--gradient-primary);
}

.lap-bar.invalid {
    background: var(--gradient-danger);
    opacity: 0.6;
}

.lap-bar.best {
    background: var(--gradient-success);
    box-shadow: 0 0 10px var(--accent-success-glow);
}

.lap-bar:hover {
    transform: scaleY(1.05);
    opacity: 0.9;
}

.lap-bar-label {
    font-size: 0.65rem;
    color: var(--text-muted);
}

.lap-bar-time {
    font-size: 0.6rem;
    color: var(--text-secondary);
    writing-mode: vertical-rl;
    text-orientation: mixed;
    transform: rotate(180deg);
    max-height: 60px;
    overflow: hidden;
}

/* Sector Improvement Analysis */
.sector-improvement {
    display: flex;
    flex-direction: column;
    gap: 16px;
}

.sector-row {
    display: flex;
    align-items: center;
    gap: 16px;
    padding: 12px;
    background: var(--bg-elevated);
    border-radius: var(--border-radius-sm);
}

.sector-label {
    font-weight: 600;
    min-width: 80px;
}

.sector-times {
    flex: 1;
    display: flex;
    flex-direction: column;
    gap: 4px;
}

.sector-best-avg {
    display: flex;
    gap: 16px;
    font-size: 0.85rem;
}

.sector-best {
    color: var(--accent-success);
}

.sector-avg {
    color: var(--text-secondary);
}

.sector-variance-bar {
    height: 6px;
    background: var(--bg-card);
    border-radius: 3px;
    overflow: hidden;
}

.sector-variance-fill {
    height: 100%;
    border-radius: 3px;
    transition: width 0.5s ease;
}

.sector-variance-fill.low {
    background: var(--gradient-success);
}

.sector-variance-fill.medium {
    background: var(--gradient-warning);
}

.sector-variance-fill.high {
    background: var(--gradient-danger);
}

.sector-priority {
    display: flex;
    align-items: center;
    gap: 6px;
    padding: 6px 12px;
    border-radius: 20px;
    font-size: 0.75rem;
    font-weight: 600;
    min-width: 100px;
    justify-content: center;
}

.sector-priority.focus {
    background: rgba(239, 68, 68, 0.15);
    color: var(--accent-danger);
}

.sector-priority.good {
    background: rgba(16, 185, 129, 0.15);
    color: var(--accent-success);
}

.sector-priority.ok {
    background: rgba(245, 158, 11, 0.15);
    color: var(--accent-warning);
}

/* Consistency Card */
.consistency-card {
    margin-bottom: 32px;
}

.consistency-metrics {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: 20px;
}

.consistency-metric {
    text-align: center;
    padding: 16px;
    background: var(--bg-elevated);
    border-radius: var(--border-radius-sm);
}

.cm-value {
    font-family: var(--font-display);
    font-size: 1.5rem;
    font-weight: 700;
    display: block;
    margin-bottom: 4px;
}

.cm-value.good {
    color: var(--accent-success);
}

.cm-value.warning {
    color: var(--accent-warning);
}

.cm-value.bad {
    color: var(--accent-danger);
}

.cm-label {
    font-size: 0.8rem;
    color: var(--text-secondary);
}

/* Stint Selector */
.stint-selector {
    margin-bottom: 24px;
}

.stint-selector h2 {
    font-family: var(--font-display);
    font-size: 1.25rem;
    font-weight: 600;
    margin-bottom: 16px;
}

.stint-tabs {
    display: flex;
    gap: 12px;
    flex-wrap: wrap;
}

.stint-tab {
    display: flex;
    align-items: center;
    gap: 12px;
    padding: 16px 24px;
    background: var(--bg-card);
    border: 1px solid var(--border-color);
    border-radius: var(--border-radius-md);
    cursor: pointer;
    transition: all var(--transition-normal);
}

.stint-tab:hover {
    border-color: var(--accent-primary);
    background: var(--bg-card-hover);
}

.stint-tab.active {
    border-color: var(--accent-primary);
    background: rgba(99, 102, 241, 0.1);
}

.stint-tab-number {
    width: 36px;
    height: 36px;
    display: flex;
    align-items: center;
    justify-content: center;
    background: var(--gradient-primary);
    border-radius: 50%;
    font-weight: 700;
    font-size: 0.9rem;
}

.stint-tab-info {
    display: flex;
    flex-direction: column;
}

.stint-tab-title {
    font-weight: 600;
}

.stint-tab-meta {
    font-size: 0.8rem;
    color: var(--text-secondary);
}

/* Stint Detail View */
.stint-detail {
    background: var(--bg-card);
    border: 1px solid var(--border-color);
    border-radius: var(--border-radius-lg);
    overflow: hidden;
}

.stint-detail-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 20px 24px;
    background: var(--bg-elevated);
    border-bottom: 1px solid var(--border-color);
}

.stint-detail-stats {
    display: flex;
    gap: 32px;
}

.stint-detail-stat {
    text-align: center;
}

.sds-value {
    font-family: var(--font-display);
    font-size: 1.25rem;
    font-weight: 700;
    display: block;
}

.sds-value.best {
    color: var(--accent-success);
}

.sds-label {
    font-size: 0.75rem;
    color: var(--text-muted);
}

/* Stint Sector Comparison */
.stint-sector-comparison {
    padding: 20px 24px;
    border-bottom: 1px solid var(--border-color);
}

.stint-sector-comparison h4 {
    font-size: 0.9rem;
    font-weight: 600;
    margin-bottom: 16px;
    color: var(--text-secondary);
}

.sector-comparison-grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 16px;
}

.sector-comparison-item {
    background: var(--bg-primary);
    border-radius: var(--border-radius-sm);
    padding: 16px;
    text-align: center;
}

.sci-header {
    font-weight: 600;
    margin-bottom: 12px;
    color: var(--text-secondary);
}

.sci-best {
    font-family: var(--font-display);
    font-size: 1.25rem;
    font-weight: 700;
    color: var(--accent-success);
    display: block;
    margin-bottom: 8px;
}

.sci-variance {
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 8px;
    font-size: 0.8rem;
}

.sci-variance-value {
    padding: 4px 8px;
    border-radius: 4px;
    font-weight: 600;
}

.sci-variance-value.low {
    background: rgba(16, 185, 129, 0.15);
    color: var(--accent-success);
}

.sci-variance-value.medium {
    background: rgba(245, 158, 11, 0.15);
    color: var(--accent-warning);
}

.sci-variance-value.high {
    background: rgba(239, 68, 68, 0.15);
    color: var(--accent-danger);
}

/* Stint Laps Table */
.stint-laps-table {
    padding: 0;
}

/* Stint Summary Phrase */
.stint-summary-phrase {
    padding: 16px 20px;
    margin-bottom: 20px;
    background: linear-gradient(135deg, rgba(99, 102, 241, 0.1) 0%, rgba(139, 92, 246, 0.08) 100%);
    border: 1px solid rgba(99, 102, 241, 0.2);
    border-radius: var(--border-radius-md);
    font-size: 0.95rem;
    font-weight: 500;
    color: var(--text-secondary);
    line-height: 1.5;
}

/* ===== Weekly Overview Styles ===== */
.weekly-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 32px;
    padding: 24px;
    background: var(--bg-card);
    border: 1px solid var(--border-color);
    border-radius: var(--border-radius-lg);
}

.week-info h2 {
    font-family: var(--font-display);
    font-size: 1.5rem;
    font-weight: 700;
    margin-bottom: 4px;
}

.week-range {
    color: var(--text-secondary);
    font-size: 0.9rem;
}

.driver-info {
    text-align: right;
}

.driver-name {
    font-family: var(--font-display);
    font-size: 1.25rem;
    font-weight: 600;
    color: var(--accent-primary);
}

/* Weekly Stats Grid */
.weekly-stats-grid {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: 20px;
    margin-bottom: 32px;
}

.weekly-stat-card {
    display: flex;
    flex-direction: column;
    align-items: center;
    text-align: center;
    padding: 28px 20px;
}

.weekly-stat-card.highlight {
    background: linear-gradient(135deg, var(--bg-card) 0%, rgba(99, 102, 241, 0.15) 100%);
    border-color: var(--accent-primary);
}

.stat-icon-large {
    font-size: 2.5rem;
    margin-bottom: 16px;
}

.stat-main {
    display: flex;
    flex-direction: column;
    align-items: center;
}

.stat-value-large {
    font-family: var(--font-display);
    font-size: 2.25rem;
    font-weight: 800;
    color: var(--text-primary);
    line-height: 1.1;
}

.stat-label-large {
    font-size: 0.9rem;
    color: var(--text-secondary);
    margin-top: 4px;
}

.stat-sub {
    font-size: 0.8rem;
    color: var(--text-muted);
    margin-top: 8px;
}

/* Breakdown Row */
.breakdown-row {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 20px;
    margin-bottom: 32px;
}

.breakdown-card {
    padding: 20px;
}

.breakdown-card .card-header {
    margin-bottom: 16px;
}

.tracks-list,
.cars-list {
    display: flex;
    flex-wrap: wrap;
    gap: 8px;
}

.track-chip,
.car-chip {
    padding: 8px 14px;
    background: var(--bg-elevated);
    border-radius: var(--border-radius-sm);
    font-size: 0.85rem;
    font-weight: 500;
    transition: all var(--transition-fast);
}

.track-chip:hover,
.car-chip:hover {
    background: var(--accent-primary);
    color: white;
}

.empty-state-small {
    padding: 20px;
    text-align: center;
    color: var(--text-muted);
}

/* Session Types Breakdown */
.session-types-breakdown {
    display: flex;
    flex-direction: column;
    gap: 12px;
}

.session-type-item {
    display: flex;
    align-items: center;
    gap: 12px;
    padding: 12px;
    background: var(--bg-elevated);
    border-radius: var(--border-radius-sm);
}

.type-icon {
    width: 36px;
    height: 36px;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: 50%;
    font-weight: 700;
    font-size: 0.9rem;
}

.type-icon.practice {
    background: rgba(59, 130, 246, 0.2);
    color: var(--accent-info);
}

.type-icon.qualifying {
    background: rgba(139, 92, 246, 0.2);
    color: var(--accent-secondary);
}

.type-icon.race {
    background: rgba(239, 68, 68, 0.2);
    color: var(--accent-danger);
}

.type-info {
    display: flex;
    justify-content: space-between;
    align-items: center;
    flex: 1;
}

.type-name {
    font-weight: 500;
}

.type-count {
    font-family: var(--font-display);
    font-weight: 700;
    font-size: 1.1rem;
}

/* Performance Overview */
.performance-overview {
    margin-bottom: 32px;
}

.performance-overview h2 {
    font-family: var(--font-display);
    font-size: 1.25rem;
    font-weight: 600;
    margin-bottom: 20px;
}

.performance-grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 20px;
}

.perf-card {
    padding: 20px;
}

.perf-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 16px;
}

.perf-title {
    font-weight: 600;
}

.perf-badge {
    font-family: var(--font-display);
    font-weight: 700;
    font-size: 1.1rem;
    padding: 4px 12px;
    background: var(--bg-elevated);
    border-radius: 20px;
}

.perf-bar-container {
    height: 10px;
    background: var(--bg-elevated);
    border-radius: 5px;
    overflow: hidden;
    margin-bottom: 12px;
}

.perf-bar {
    height: 100%;
    background: var(--gradient-primary);
    border-radius: 5px;
    transition: width 0.8s ease;
}

.perf-bar.validity {
    background: var(--gradient-success);
}

.perf-bar.stint {
    background: var(--gradient-warning);
}

.perf-desc {
    font-size: 0.8rem;
    color: var(--text-muted);
}

/* Activity Section */
.activity-section {
    margin-bottom: 32px;
}

.activity-section h2 {
    font-family: var(--font-display);
    font-size: 1.25rem;
    font-weight: 600;
    margin-bottom: 20px;
}

.activity-week {
    display: grid;
    grid-template-columns: repeat(7, 1fr);
    gap: 12px;
    background: var(--bg-card);
    border: 1px solid var(--border-color);
    border-radius: var(--border-radius-lg);
    padding: 24px;
}

.day-activity {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 8px;
}

.day-label {
    font-size: 0.85rem;
    font-weight: 600;
    color: var(--text-secondary);
}

.day-bar {
    width: 100%;
    height: 80px;
    background: var(--bg-elevated);
    border-radius: var(--border-radius-sm);
    position: relative;
    overflow: hidden;
    display: flex;
    align-items: flex-end;
}

.day-fill {
    width: 100%;
    background: var(--gradient-primary);
    border-radius: var(--border-radius-sm);
    transition: height 0.5s ease;
}

.day-time {
    font-size: 0.75rem;
    color: var(--text-muted);
    font-weight: 500;
}

/* ===== View Toggle ===== */
.view {
    display: none;
    animation: fadeIn 0.3s ease;
}

.view.active {
    display: block;
}

@keyframes fadeIn {
    from {
        opacity: 0;
        transform: translateY(10px);
    }

    to {
        opacity: 1;
        transform: translateY(0);
    }
}

/* ===== Responsive Design ===== */
@media (max-width: 1200px) {
    .stats-grid {
        grid-template-columns: repeat(6, 1fr);
    }

    .card-large,
    .best-lap-card {
        grid-column: span 6;
    }

    .stat-card {
        grid-column: span 2;
    }
}

@media (max-width: 900px) {
    .stats-grid {
        grid-template-columns: 1fr;
    }

    .card-large,
    .best-lap-card,
    .stat-card {
        grid-column: span 1;
    }

    .sector-bars {
        grid-template-columns: 1fr;
    }

    .session-card {
        grid-template-columns: 1fr;
        gap: 16px;
    }

    .session-date {
        display: none;
    }

    .lap-row {
        grid-template-columns: 50px 1fr auto;
        font-size: 0.85rem;
    }

    .lap-row .lap-sectors,
    .lap-row .lap-conditions {
        display: none;
    }
}

@media (max-width: 600px) {
    .app-container {
        padding: 0 16px;
    }

    .main-header {
        flex-direction: column;
        gap: 16px;
        text-align: center;
    }

    .nav-tabs {
        flex-direction: column;
    }

    .tab-label {
        display: none;
    }

    .performance-metrics {
        flex-direction: column;
        gap: 24px;
    }
}

/* ===== Scrollbar ===== */
::-webkit-scrollbar {
    width: 8px;
    height: 8px;
}

::-webkit-scrollbar-track {
    background: var(--bg-secondary);
}

::-webkit-scrollbar-thumb {
    background: var(--bg-elevated);
    border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
    background: var(--accent-primary);
}

/* ===== RESPONSIVE DESIGN ===== */

/* Tablet: 768px - 1024px */
@media (max-width: 1024px) {
    .app-container {
        padding: 0 16px;
    }

    .overview-header {
        flex-direction: column;
        gap: 12px;
        align-items: stretch;
    }

    .two-column-row {
        grid-template-columns: 1fr;
        gap: 12px;
    }

    .stats-row-3 {
        grid-template-columns: repeat(3, 1fr);
        gap: 12px;
    }

    .rhythm-bar-wrapper {
        height: 50px;
    }

    .session-card-new {
        padding: 16px;
    }
}

/* Mobile Large: 768px */
@media (max-width: 768px) {
    html {
        font-size: 14px;
    }

    .app-container {
        padding: 0 12px;
    }

    /* Header */
    .app-header {
        padding: 12px 16px;
    }

    .header-title {
        font-size: 1rem;
    }

    /* Navigation */
    .nav-tabs {
        gap: 4px;
        padding: 8px;
    }

    .nav-tab {
        padding: 10px 12px;
        min-width: 60px;
    }

    .tab-label {
        display: none;
    }

    .tab-icon {
        font-size: 1.2rem;
    }

    /* Overview Sections */
    .overview-section {
        padding: 16px;
        margin-bottom: 12px;
    }

    .section-title {
        font-size: 0.75rem;
        margin-bottom: 12px;
    }

    .section-subtitle {
        display: none;
    }

    /* Stats */
    .stats-row-3 {
        grid-template-columns: 1fr 1fr 1fr;
        gap: 8px;
    }

    .stat-box {
        padding: 12px 8px;
    }

    .stat-value {
        font-size: 1.3rem;
    }

    .stat-label {
        font-size: 0.65rem;
    }

    /* Quality */
    .quality-value-big {
        font-size: 2rem;
    }

    .quality-detail {
        font-size: 0.8rem;
    }

    /* Distribution */
    .distribution-inline {
        flex-direction: column;
        align-items: flex-start;
        gap: 12px;
    }

    .distribution-inline canvas {
        align-self: center;
    }

    .legend-inline {
        width: 100%;
    }

    .legend-row {
        font-size: 0.8rem;
    }

    /* Tracks */
    .track-chip {
        padding: 4px 10px;
        font-size: 0.75rem;
    }

    /* Rhythm Chart */
    .rhythm-bar-wrapper {
        height: 40px;
    }

    .rhythm-label {
        font-size: 0.55rem;
    }

    .rhythm-value {
        font-size: 0.6rem;
    }

    /* Actions */
    .actions-section {
        flex-direction: column;
    }

    .btn-action {
        width: 100%;
        justify-content: center;
    }

    /* Sessions */
    .sessions-header {
        flex-direction: column;
        gap: 12px;
    }

    .filters-bar {
        flex-wrap: wrap;
        gap: 8px;
    }

    .filter-select {
        flex: 1 1 calc(50% - 4px);
        min-width: 100px;
    }

    .sort-bar {
        flex-wrap: wrap;
        gap: 8px;
    }

    .session-card-new {
        padding: 12px;
    }

    .session-main {
        font-size: 0.85rem;
    }

    .session-meta {
        font-size: 0.75rem;
    }
}

/* Mobile Small: 480px */
@media (max-width: 480px) {
    html {
        font-size: 13px;
    }

    .app-container {
        padding: 0 8px;
    }

    /* Stats in single column on very small screens */
    .stats-row-3 {
        grid-template-columns: 1fr;
        gap: 8px;
    }

    .stat-box {
        flex-direction: row;
        justify-content: space-between;
        padding: 12px 16px;
    }

    .stat-label {
        margin-bottom: 0;
    }

    /* Toggle */
    .view-toggle {
        width: 100%;
    }

    .toggle-btn {
        flex: 1;
        padding: 10px 8px;
        font-size: 0.75rem;
    }

    /* Filters */
    .filter-select {
        flex: 1 1 100%;
    }

    /* Session cards */
    .session-card-new {
        padding: 10px;
    }

    .session-main {
        font-size: 0.8rem;
        word-break: break-word;
    }

    .session-action {
        width: 100%;
        margin-top: 8px;
    }

    .session-action .btn {
        width: 100%;
    }
}

/* ===== Pit Lap Styling ===== */
.pit-in-lap {
    background: rgba(239, 68, 68, 0.1) !important;
    opacity: 0.7;
}

.pit-out-lap {
    background: rgba(245, 158, 11, 0.1) !important;
    opacity: 0.7;
}

.best-lap {
    background: rgba(34, 197, 94, 0.15) !important;
}

.best-lap .lap-time {
    color: var(--accent-success);
    font-weight: 700;
}

.invalid-lap {
    background: rgba(239, 68, 68, 0.08) !important;
}

.invalid-lap .lap-time {
    color: var(--accent-danger);
    text-decoration: line-through;
}

/* ===== Lap Badges Stylish ===== */
.lap-badge {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    width: 24px;
    height: 24px;
    border-radius: 6px;
    font-weight: 700;
    font-size: 0.75rem;
    text-transform: uppercase;
}

.lap-badge.pit-stop {
    background: linear-gradient(135deg, #f59e0b, #d97706);
    color: #000;
    box-shadow: 0 2px 8px rgba(245, 158, 11, 0.4);
}

.lap-badge.pit-out {
    background: linear-gradient(135deg, #8b5cf6, #7c3aed);
    color: #fff;
    box-shadow: 0 2px 8px rgba(139, 92, 246, 0.4);
}

.lap-badge.valid {
    background: rgba(34, 197, 94, 0.2);
    color: var(--accent-success);
}

.lap-badge.invalid {
    background: rgba(239, 68, 68, 0.2);
    color: var(--accent-danger);
}

.lap-badge.best {
    background: linear-gradient(135deg, #22c55e, #16a34a);
    color: #fff;
    box-shadow: 0 2px 8px rgba(34, 197, 94, 0.4);
    animation: pulse-best 2s infinite;
}

@keyframes pulse-best {

    0%,
    100% {
        box-shadow: 0 2px 8px rgba(34, 197, 94, 0.4);
    }

    50% {
        box-shadow: 0 2px 16px rgba(34, 197, 94, 0.6);
    }
}

.pit-stop-lap {
    background: rgba(245, 158, 11, 0.1) !important;
    opacity: 0.8;
}

.sector-na {
    color: var(--text-muted);
    font-style: italic;
}

.status-cell {
    text-align: center;
}

/* ===== Mobile Responsive Improvements ===== */
@media (max-width: 480px) {

    /* Header buttons stack */
    .header-controls {
        flex-direction: column;
        gap: 8px;
        width: 100%;
    }

    .header-controls .btn {
        width: 100%;
        justify-content: center;
        border: 1px solid #ffffff1c;
    }

    /* Laps table horizontal scroll */
    .laps-table-container {
        overflow-x: auto;
        -webkit-overflow-scrolling: touch;
    }

    .laps-table {
        min-width: 600px;
        font-size: 0.75rem;
    }

    .laps-table th,
    .laps-table td {
        padding: 8px 6px;
        white-space: nowrap;
    }

    /* Synthesis cards smaller */
    .session-synthesis {
        gap: 8px;
    }

    .synth-item {
        padding: 12px 8px;
    }

    .synth-value {
        font-size: 1.1rem;
    }

    .synth-label {
        font-size: 0.65rem;
    }

    /* Session detail header compact */
    .session-detail-header {
        flex-direction: column;
        align-items: flex-start;
        gap: 12px;
    }

    .session-meta-header {
        flex-wrap: wrap;
        gap: 8px;
    }

    /* Badge smaller on mobile */
    .lap-badge {
        width: 20px;
        height: 20px;
        font-size: 0.65rem;
    }
}

/* ===== Glassmorphism Cards ===== */
.glass-card {
    background: rgba(26, 26, 37, 0.7);
    backdrop-filter: blur(12px);
    -webkit-backdrop-filter: blur(12px);
    border: 1px solid rgba(255, 255, 255, 0.1);
    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

/* ===== Weather Badge ===== */
.weather-badge {
    font-size: 1.2rem;
    animation: weather-pulse 3s infinite;
}

@keyframes weather-pulse {

    0%,
    100% {
        transform: scale(1);
    }

    50% {
        transform: scale(1.1);
    }
}

/* ===== Grip Badge ===== */
.grip-badge {
    padding: 4px 10px;
    border-radius: 12px;
    font-size: 0.7rem;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

.grip-text[data-grip="Flooded"],
.grip-badge[data-grip="Flooded"] {
    background: linear-gradient(135deg, #3b82f6, #2563eb);
    color: white;
}

.grip-text[data-grip="Wet"],
.grip-badge[data-grip="Wet"] {
    background: linear-gradient(135deg, #8b5cf6, #7c3aed);
    color: white;
}

.grip-text[data-grip="Damp"],
.grip-badge[data-grip="Damp"] {
    background: linear-gradient(135deg, #f59e0b, #d97706);
    color: black;
}

.grip-text[data-grip="Greasy"],
.grip-badge[data-grip="Greasy"] {
    background: linear-gradient(135deg, #eab308, #ca8a04);
    color: black;
}

.grip-text[data-grip="Green"],
.grip-badge[data-grip="Green"] {
    background: linear-gradient(135deg, #22c55e, #16a34a);
    color: white;
}

.grip-text[data-grip="Fast"],
.grip-badge[data-grip="Fast"] {
    background: linear-gradient(135deg, #10b981, #059669);
    color: white;
}

.grip-text[data-grip="Optimum"],
.grip-badge[data-grip="Optimum"] {
    background: linear-gradient(135deg, #fbbf24, #f59e0b);
    color: black;
    box-shadow: 0 0 12px rgba(251, 191, 36, 0.5);
}

/* ===== Conditions Bar ===== */
.conditions-bar {
    display: flex;
    justify-content: center;
    gap: 24px;
    padding: 16px 20px;
    background: rgba(26, 26, 37, 0.5);
    border-radius: var(--border-radius-md);
    margin-bottom: 20px;
    flex-wrap: wrap;
}

.condition-item {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 4px;
}

.condition-icon {
    font-size: 1.5rem;
}

.condition-value {
    font-size: 1rem;
    font-weight: 600;
    color: var(--text-primary);
}

.condition-label {
    font-size: 0.65rem;
    color: var(--text-muted);
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

/* ===== Stint Timeline ===== */
.stint-timeline {
    display: flex;
    align-items: center;
    gap: 0;
    padding: 20px;
    background: rgba(26, 26, 37, 0.5);
    border-radius: var(--border-radius-md);
    overflow-x: auto;
}

.stint-block {
    display: flex;
    flex-direction: column;
    align-items: center;
    flex: 1;
    min-width: 80px;
}

.stint-bar {
    width: 100%;
    height: 32px;
    border-radius: 6px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: 600;
    font-size: 0.8rem;
    color: white;
    position: relative;
}

.stint-bar.qualify {
    background: linear-gradient(135deg, #8b5cf6, #7c3aed);
}

.stint-bar.race {
    background: linear-gradient(135deg, #ef4444, #dc2626);
}

.stint-bar.practice {
    background: linear-gradient(135deg, #3b82f6, #2563eb);
}

.stint-info {
    display: flex;
    flex-direction: column;
    align-items: center;
    margin-top: 8px;
    gap: 2px;
}

.stint-laps {
    font-size: 0.85rem;
    font-weight: 600;
    color: var(--text-primary);
}

.stint-time {
    font-size: 0.7rem;
    color: var(--text-muted);
}

.pit-divider {
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: 0 8px;
}

.pit-icon {
    font-size: 1.5rem;
    animation: pit-bounce 1s infinite;
}

@keyframes pit-bounce {

    0%,
    100% {
        transform: translateY(0);
    }

    50% {
        transform: translateY(-4px);
    }
}

.pit-label {
    font-size: 0.6rem;
    color: var(--text-muted);
    text-transform: uppercase;
}

/* ===== Table Row Hover Glow ===== */
.laps-table tbody tr {
    transition: all var(--transition-fast);
}

.laps-table tbody tr:hover {
    background: rgba(99, 102, 241, 0.1) !important;
    box-shadow: inset 0 0 0 1px rgba(99, 102, 241, 0.3);
}

.laps-table tbody tr.best-lap:hover {
    background: rgba(34, 197, 94, 0.2) !important;
    box-shadow: inset 0 0 0 1px rgba(34, 197, 94, 0.4);
}

.laps-table tbody tr.invalid-lap:hover {
    background: rgba(239, 68, 68, 0.15) !important;
}

/* ===== Delta Colors ===== */
.delta-faster {
    color: var(--accent-success);
    font-weight: 600;
}

.delta-slower {
    color: var(--accent-danger);
}

.delta-pb {
    color: #fbbf24;
    font-weight: 700;
}

/* ===== Session Detail Layout Improvements ===== */
#stints-view {
    padding: 0 20px 40px;
    max-width: 1400px;
    margin: 0 auto;
}

.session-detail-header {
    display: flex;
    align-items: center;
    gap: 24px;
    padding: 20px 0;
    border-bottom: 1px solid var(--border-color);
    margin-bottom: 24px;
}

.session-info-header h2 {
    font-size: 1.8rem;
    font-weight: 700;
    margin-bottom: 8px;
    background: var(--gradient-primary);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
}

.session-meta-header {
    display: flex;
    align-items: center;
    gap: 12px;
    flex-wrap: wrap;
}

.session-type-badge {
    padding: 4px 12px;
    border-radius: 20px;
    font-size: 0.75rem;
    font-weight: 600;
    text-transform: uppercase;
    background: var(--gradient-primary);
    color: white;
}

/* ===== Session Synthesis Grid ===== */
.session-synthesis {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: 16px;
    margin-bottom: 28px;
    padding: 20px;
    border-radius: var(--border-radius-lg);
}

.synth-item {
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: 16px 12px;
    background: rgba(255, 255, 255, 0.03);
    border-radius: var(--border-radius-md);
    border: 1px solid rgba(255, 255, 255, 0.05);
    transition: all var(--transition-fast);
}

.synth-item:hover {
    background: rgba(255, 255, 255, 0.06);
    transform: translateY(-2px);
}

.synth-item.highlight {
    background: rgba(34, 197, 94, 0.1);
    border-color: rgba(34, 197, 94, 0.3);
}

.synth-value {
    font-size: 1.5rem;
    font-weight: 700;
    color: var(--text-primary);
    margin-bottom: 4px;
}

.synth-item.highlight .synth-value {
    color: var(--accent-success);
}

.synth-label {
    font-size: 0.7rem;
    color: var(--text-muted);
    text-transform: uppercase;
    letter-spacing: 1px;
}

/* ===== Session Sections ===== */
.session-section {
    margin-bottom: 28px;
}

.section-title-sm {
    font-size: 0.85rem;
    font-weight: 600;
    color: var(--text-secondary);
    text-transform: uppercase;
    letter-spacing: 1.5px;
    margin-bottom: 16px;
    padding-bottom: 8px;
    border-bottom: 1px solid rgba(255, 255, 255, 0.08);
}

/* ===== Laps Table Container ===== */
.laps-table-container {
    background: var(--bg-card);
    border-radius: var(--border-radius-lg);
    border: 1px solid var(--border-color);
    overflow: hidden;
}

.laps-table {
    width: 100%;
    border-collapse: collapse;
}

.laps-table thead {
    background: rgba(255, 255, 255, 0.03);
}

.laps-table th {
    padding: 14px 12px;
    text-align: center;
    font-size: 0.75rem;
    font-weight: 600;
    color: var(--text-muted);
    text-transform: uppercase;
    letter-spacing: 0.5px;
    border-bottom: 1px solid var(--border-color);
}

.laps-table td {
    padding: 14px 12px;
    font-size: 0.9rem;
    color: var(--text-primary);
    border-bottom: 1px solid rgba(255, 255, 255, 0.04);
}

.laps-table tbody tr:last-child td {
    border-bottom: none;
}

.lap-time {
    font-family: 'Inter', monospace;
    font-weight: 600;
    font-size: 0.95rem;
}

.sector-time {
    font-family: 'Inter', monospace;
    font-size: 0.85rem;
    color: var(--text-secondary);
}

.sector-best {
    color: var(--accent-success);
    font-weight: 600;
}

/* ===== Lap Analysis Filters ===== */
.lap-filters-bar {
    display: flex;
    flex-wrap: wrap;
    gap: 20px;
    padding: 16px 20px;
    background: var(--bg-card);
    border: 1px solid var(--border-color);
    border-radius: var(--border-radius-lg) var(--border-radius-lg) 0 0;
    border-bottom: none;
    margin-bottom: 0;
}

/* Stats Cards Row */
.lap-stats-row {
    display: flex;
    gap: 12px;
    padding: 12px 20px;
    background: rgba(255, 255, 255, 0.02);
    border: 1px solid var(--border-color);
    border-top: none;
    border-bottom: none;
}

.lap-stat-card {
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: 8px 16px;
    background: var(--bg-elevated);
    border-radius: var(--border-radius-sm);
    min-width: 80px;
}

.lap-stat-value {
    font-family: var(--font-mono);
    font-size: 0.9rem;
    font-weight: 700;
    color: var(--text-primary);
}

.lap-stat-value.optimal {
    color: var(--accent-success);
}

.lap-stat-value.average {
    color: var(--accent-primary);
}

.lap-stat-value.delta {
    color: var(--accent-warning);
}

.lap-stat-label {
    font-size: 0.6rem;
    color: var(--text-muted);
    text-transform: uppercase;
    letter-spacing: 0.3px;
    margin-top: 2px;
}

/* Connect section below filters */
.lap-chart-wrapper {
    border: 1px solid var(--border-color);
    border-radius: 0 0 var(--border-radius-lg) var(--border-radius-lg);
    padding: 16px;
    margin-bottom: 20px;
    background: var(--bg-card);
    height: 220px;
    /* Fixed height to prevent resize on filter change */
}

.filter-group-inline {
    display: flex;
    align-items: center;
    gap: 10px;
}

.lap-filters-bar .filter-label {
    font-size: 0.7rem;
    font-weight: 600;
    color: var(--text-muted);
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

.toggle-group {
    display: flex;
    gap: 4px;
}

.filter-toggle-btn {
    padding: 6px 12px;
    font-family: var(--font-primary);
    font-size: 0.7rem;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.3px;
    background: var(--bg-elevated);
    border: 1px solid var(--border-color);
    border-radius: var(--border-radius-sm);
    color: var(--text-secondary);
    cursor: pointer;
    transition: all var(--transition-normal);
}

.filter-toggle-btn:hover {
    border-color: var(--accent-primary);
    color: var(--text-primary);
}

.filter-toggle-btn.active {
    background: var(--gradient-primary);
    border-color: var(--accent-primary);
    color: white;
    box-shadow: 0 2px 8px var(--accent-primary-glow);
}

/* ===== Status Badges for Laps Table ===== */
.status-badge {
    display: inline-block;
    padding: 3px 8px;
    font-size: 0.6rem;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 0.3px;
    border-radius: 4px;
    white-space: nowrap;
}

.status-badge.best {
    background: linear-gradient(135deg, #22c55e, #16a34a);
    color: white;
    box-shadow: 0 2px 6px rgba(34, 197, 94, 0.4);
}

.status-badge.pit-in {
    background: linear-gradient(135deg, #f97316, #ea580c);
    color: white;
}

.status-badge.pit-out {
    background: linear-gradient(135deg, #fb923c, #f97316);
    color: white;
}

.status-badge.ok {
    background: rgba(255, 255, 255, 0.05);
    color: var(--text-muted);
    border: 1px solid var(--border-color);
}

.status-badge.cut {
    background: linear-gradient(135deg, #ef4444, #dc2626);
    color: white;
}

/* ===== Sessions Grid & Compact Cards ===== */
.sessions-grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 10px;
    margin-bottom: 24px;
}

/* Ultra-Compact Session Card - 2 rows */
.session-card-compact {
    background: var(--bg-card);
    border: 1px solid var(--border-color);
    border-radius: var(--border-radius-md);
    padding: 10px 12px;
    cursor: pointer;
    transition: all var(--transition-normal);
}

.session-card-compact:hover {
    border-color: var(--accent-primary);
    background: var(--bg-card-hover);
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
}

/* Card Row 1 - Date, Track, Type, Best Lap */
.card-row-1 {
    display: flex;
    align-items: center;
    gap: 8px;
    margin-bottom: 6px;
}

.session-card-compact .card-date {
    font-size: 0.65rem;
    color: var(--text-muted);
    text-transform: uppercase;
    letter-spacing: 0.3px;
    white-space: nowrap;
}

.session-card-compact .card-track {
    font-family: var(--font-display);
    font-size: 0.85rem;
    font-weight: 700;
    color: var(--text-primary);
    flex: 1;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
}

.session-card-compact .session-type-badge {
    padding: 2px 6px;
    font-size: 0.55rem;
    border-radius: 3px;
}

.session-card-compact .best-time {
    font-family: var(--font-mono);
    font-size: 0.85rem;
    font-weight: 700;
    color: var(--accent-success);
    white-space: nowrap;
}

.session-card-compact .best-time.no-time {
    color: var(--text-muted);
    font-size: 0.75rem;
}

/* Card Row 2 - Car, Laps, Validity */
.card-row-2 {
    display: flex;
    align-items: center;
    gap: 10px;
}

.session-card-compact .card-car {
    font-size: 0.7rem;
    color: var(--text-secondary);
    flex: 1;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
}

.card-laps {
    font-size: 0.65rem;
    color: var(--text-secondary);
    white-space: nowrap;
}

.laps-label {
    font-size: 0.55rem;
    color: var(--text-muted);
    text-transform: uppercase;
    letter-spacing: 0.3px;
}

/* Validity Compact */
.validity-compact {
    display: flex;
    align-items: center;
    gap: 4px;
}

.validity-label {
    font-size: 0.55rem;
    color: var(--text-muted);
    text-transform: uppercase;
    letter-spacing: 0.3px;
}

.validity-text {
    font-size: 0.65rem;
    font-weight: 600;
    color: var(--text-secondary);
    white-space: nowrap;
}

.validity-bar-mini {
    width: 40px;
    height: 3px;
    background: rgba(255, 255, 255, 0.1);
    border-radius: 2px;
    overflow: hidden;
}

.validity-bar-mini .validity-progress {
    height: 100%;
    border-radius: 2px;
}

.validity-progress.high {
    background: var(--accent-success);
}

.validity-progress.medium {
    background: var(--accent-warning);
}

.validity-progress.low {
    background: var(--accent-danger);
}

/* Session Type Badge Colors */
.session-type-badge {
    display: inline-block;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 0.3px;
}

.session-type-badge.practice {
    background: rgba(59, 130, 246, 0.2);
    color: #60a5fa;
    border: 1px solid rgba(59, 130, 246, 0.4);
}

.session-type-badge.qualify {
    background: rgba(168, 85, 247, 0.2);
    color: #c084fc;
    border: 1px solid rgba(168, 85, 247, 0.4);
}

.session-type-badge.race {
    background: rgba(239, 68, 68, 0.2);
    color: #f87171;
    border: 1px solid rgba(239, 68, 68, 0.4);
}

/* Card Action */
.card-action {
    display: flex;
    justify-content: flex-end;
}

.card-action .btn {
    padding: 8px 16px;
    font-size: 0.75rem;
}

/* ===== Pagination Controls ===== */
.pagination-controls {
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 16px;
    padding: 20px;
    background: var(--bg-card);
    border: 1px solid var(--border-color);
    border-radius: var(--border-radius-lg);
    margin-top: 16px;
}

.pagination-btn {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    padding: 10px 20px;
    background: var(--bg-elevated);
    border: 1px solid var(--border-color);
    border-radius: var(--border-radius-md);
    color: var(--text-primary);
    font-family: var(--font-primary);
    font-size: 0.8rem;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    cursor: pointer;
    transition: all var(--transition-normal);
}

.pagination-btn:hover:not(:disabled) {
    background: var(--gradient-primary);
    border-color: var(--accent-primary);
    color: white;
}

.pagination-btn:disabled {
    opacity: 0.4;
    cursor: not-allowed;
}

.pagination-info {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 2px;
}

.pagination-current {
    font-size: 0.9rem;
    font-weight: 600;
    color: var(--text-primary);
}

.pagination-total {
    font-size: 0.75rem;
    color: var(--text-muted);
}

/* Empty state for sessions grid */
.sessions-grid .empty-state {
    grid-column: 1 / -1;
}

/* ===== Responsive Session Detail ===== */
@media (max-width: 768px) {
    .session-synthesis {
        grid-template-columns: repeat(2, 1fr);
        gap: 12px;
        padding: 16px;
    }

    .synth-value {
        font-size: 1.25rem;
    }

    .session-detail-header {
        flex-direction: column;
        align-items: flex-start;
        gap: 16px;
    }

    .conditions-bar {
        gap: 16px;
        padding: 12px 16px;
    }

    /* Sessions Grid Responsive */
    .sessions-grid {
        grid-template-columns: repeat(2, 1fr);
        gap: 8px;
    }

    .session-card-compact .card-track {
        font-size: 0.8rem;
    }

    .session-card-compact .best-time {
        font-size: 0.8rem;
    }

    /* Pagination Responsive */
    .pagination-controls {
        flex-wrap: wrap;
        gap: 12px;
        padding: 16px;
    }

    .pagination-btn {
        padding: 10px 16px;
        font-size: 0.75rem;
    }
}

@media (max-width: 480px) {
    #stints-view {
        padding: 0 12px 24px;
    }

    .session-synthesis {
        grid-template-columns: 1fr 1fr;
        gap: 8px;
        padding: 12px;
    }

    .synth-item {
        padding: 12px 8px;
    }

    .synth-value {
        font-size: 1.1rem;
    }

    .synth-label {
        font-size: 0.6rem;
    }

    .session-info-header h2 {
        font-size: 1.4rem;
    }

    .section-title-sm {
        font-size: 0.75rem;
    }

    /* Responsive Chart and Filters */
    .lap-filters-bar {
        flex-direction: column;
        gap: 12px;
        padding: 12px;
    }

    .lap-stats-row {
        flex-wrap: wrap;
        padding: 10px 12px;
        gap: 8px;
    }

    .lap-stat-card {
        padding: 6px 10px;
        min-width: 60px;
    }

    .lap-stat-value {
        font-size: 0.75rem;
    }

    .lap-stat-label {
        font-size: 0.5rem;
    }

    .lap-chart-wrapper {
        padding: 12px;
    }

    #lapTimesChartCanvas {
        height: auto !important;
    }

    /* Sessions Grid - Mobile Single Column */
    .sessions-grid {
        grid-template-columns: 1fr;
        gap: 8px;
    }

    .session-card-compact {
        padding: 10px;
    }

    .card-row-1 {
        flex-wrap: wrap;
        gap: 6px;
    }

    .session-card-compact .card-date {
        font-size: 0.6rem;
    }

    .session-card-compact .card-track {
        font-size: 0.8rem;
        order: -1;
        flex-basis: 100%;
        margin-bottom: 2px;
    }

    .session-card-compact .session-type-badge {
        padding: 2px 5px;
        font-size: 0.5rem;
    }

    .session-card-compact .best-time {
        font-size: 0.85rem;
        margin-left: auto;
    }

    .card-row-2 {
        flex-wrap: wrap;
        gap: 6px;
    }

    .session-card-compact .card-car {
        flex-basis: 100%;
        font-size: 0.65rem;
    }

    .validity-bar-mini {
        width: 30px;
    }

    /* Pagination Mobile */
    .pagination-controls {
        padding: 12px;
    }

    .pagination-btn {
        padding: 8px 12px;
        font-size: 0.7rem;
    }

    .pagination-current {
        font-size: 0.8rem;
    }
}

/* ===== Comprehensive Responsive Design ===== */

/* Large Tablet / Small Desktop (1024px) */
@media (max-width: 1024px) {
    .app-container {
        padding: 0 16px;
    }

    .main-header {
        padding: 16px 0;
    }

    .logo h1 {
        font-size: 1.4rem;
    }

    .btn {
        padding: 10px 18px;
        font-size: 0.85rem;
    }

    .overview-header {
        padding: 20px 24px;
    }

    .overview-header h1 {
        font-size: 1.3rem;
    }
}

/* Tablet (768px) */
@media (max-width: 768px) {

    /* Header */
    .main-header {
        flex-direction: column;
        gap: 16px;
        padding: 16px 0;
    }

    .header-controls {
        width: 100%;
        display: flex;
        gap: 8px;
    }

    .header-controls .btn {
        flex: 1;
        justify-content: center;
        padding: 12px 16px;
    }

    /* Navigation */
    .nav-tabs {
        gap: 4px;
        padding: 6px;
        margin-bottom: 20px;
    }

    .nav-tab {
        padding: 12px 16px;
    }

    .tab-label {
        font-size: 0.75rem;
    }

    /* Overview */
    .overview-header {
        flex-direction: column;
        align-items: flex-start;
        gap: 12px;
        padding: 16px 20px;
    }

    .overview-header h1 {
        font-size: 1.2rem;
    }

    .driver-badge {
        font-size: 0.7rem;
    }

    /* View Toggle */
    .view-toggle-container {
        margin-bottom: 16px;
    }

    .view-toggle {
        width: 100%;
    }

    .toggle-btn {
        flex: 1;
        padding: 10px 16px;
        font-size: 0.75rem;
    }

    /* Two Column Layout */
    .two-column-row {
        grid-template-columns: 1fr;
        gap: 16px;
    }

    /* Stats */
    .stats-row-3 {
        grid-template-columns: 1fr;
        gap: 12px;
    }

    .stat-box {
        padding: 16px;
    }

    .stat-value {
        font-size: 1.3rem;
    }

    /* Overview Sections */
    .overview-section {
        padding: 16px;
        margin-bottom: 16px;
    }

    .section-title {
        font-size: 0.75rem;
        margin-bottom: 12px;
    }

    /* Quality */
    .quality-value-big {
        font-size: 2rem;
    }

    /* Distribution */
    .distribution-inline {
        flex-direction: column;
        align-items: center;
        gap: 16px;
    }

    .legend-inline {
        flex-direction: row;
        flex-wrap: wrap;
        justify-content: center;
        gap: 12px;
    }

    /* Tracks Chips */
    .tracks-chips {
        gap: 6px;
    }

    .track-chip {
        padding: 6px 12px;
        font-size: 0.7rem;
    }

    /* Sessions Header */
    .sessions-header {
        flex-direction: column;
        align-items: flex-start;
        gap: 12px;
        padding: 16px 20px;
    }

    .sessions-header h1 {
        font-size: 1.3rem;
    }

    /* Filters */
    .filters-bar {
        padding: 16px;
    }

    .filter-group {
        flex-direction: column;
        gap: 10px;
    }

    .filter-group label {
        width: 100%;
        margin-bottom: 4px;
    }

    .filter-select {
        width: 100%;
        min-width: unset;
    }

    .filter-input {
        width: 100%;
    }

    /* Sorting */
    .sorting-bar {
        flex-wrap: wrap;
        gap: 8px;
        padding: 12px 16px;
    }

    .sort-label {
        width: 100%;
        margin-bottom: 4px;
    }

    .sort-btn {
        flex: 1;
        min-width: calc(33% - 8px);
        justify-content: center;
    }

    /* Session Cards */
    .session-card {
        padding: 16px;
    }

    .session-card-content {
        flex-direction: column;
        gap: 12px;
    }

    .session-card-main {
        width: 100%;
    }

    .session-card-stats {
        width: 100%;
        justify-content: space-between;
    }

    .session-card-action {
        width: 100%;
        margin-top: 8px;
    }

    .session-card-action .btn {
        width: 100%;
        justify-content: center;
    }

    /* Actions Section */
    .actions-section {
        flex-direction: column;
        gap: 12px;
    }

    .btn-action,
    .btn-action-secondary {
        width: 100%;
        justify-content: center;
    }

    /* Laps Table */
    .laps-table-container {
        overflow-x: auto;
        -webkit-overflow-scrolling: touch;
    }

    .laps-table {
        min-width: 600px;
    }

    .laps-table th,
    .laps-table td {
        padding: 10px 8px;
        font-size: 0.8rem;
    }

    /* Stint Timeline */
    .stint-timeline {
        overflow-x: auto;
        padding-bottom: 8px;
    }

    .stint-block {
        min-width: 100px;
    }
}

/* Mobile (480px) */
@media (max-width: 480px) {
    .app-container {
        padding: 0 12px;
    }

    /* Header */
    .logo {
        gap: 8px;
    }

    .logo-mark {
        font-size: 1.2rem;
        padding: 3px 8px;
    }

    .logo h1 {
        font-size: 1.1rem;
    }

    .header-controls {
        flex-direction: column;
    }

    .header-controls .btn {
        font-size: 0.8rem;
    }

    /* Navigation */
    .nav-tabs {
        padding: 4px;
    }

    .nav-tab {
        padding: 10px 8px;
    }

    .tab-label {
        font-size: 0.65rem;
        letter-spacing: 0.5px;
    }

    /* Overview */
    .overview-header {
        padding: 14px 16px;
    }

    .overview-header h1 {
        font-size: 1rem;
    }

    /* Stats */
    .stat-box {
        padding: 14px;
    }

    .stat-label {
        font-size: 0.65rem;
    }

    .stat-value {
        font-size: 1.1rem;
    }

    /* Overview Sections */
    .overview-section {
        padding: 14px;
        margin-bottom: 12px;
    }

    .section-title {
        font-size: 0.7rem;
    }

    /* Quality */
    .quality-compact {
        padding: 12px;
    }

    .quality-value-big {
        font-size: 1.8rem !important;
    }

    .quality-detail {
        font-size: 0.8rem;
    }

    /* Sessions */
    .sessions-header {
        padding: 14px 16px;
    }

    .sessions-header h1 {
        font-size: 1.1rem;
    }

    /* Filters */
    .filters-bar {
        padding: 12px;
    }

    .filter-select,
    .filter-input {
        padding: 10px 12px;
        font-size: 0.8rem;
    }

    /* Sorting */
    .sorting-bar {
        padding: 10px 12px;
    }

    .sort-btn {
        padding: 8px 12px;
        font-size: 0.7rem;
    }

    /* Session Cards */
    .session-card {
        padding: 14px;
    }

    .session-track-name {
        font-size: 1rem;
    }

    .session-car-name {
        font-size: 0.75rem;
    }

    /* Actions */
    .btn-action,
    .btn-action-secondary {
        padding: 14px 20px;
        font-size: 0.8rem;
    }

    /* Conditions Bar */
    .conditions-bar {
        flex-wrap: wrap;
        gap: 12px;
        padding: 12px;
    }

    .condition-item {
        min-width: calc(50% - 6px);
        text-align: center;
    }

    .condition-label {
        font-size: 0.6rem;
    }

    .condition-value {
        font-size: 0.85rem;
    }

    /* Rhythm Chart */
    .rhythm-chart-wrapper {
        overflow-x: auto;
    }

    /* Empty State */
    .empty-state {
        padding: 24px 16px;
    }

    .empty-icon {
        font-size: 2rem;
    }

    .empty-state p {
        font-size: 0.9rem;
    }
}

/* ===== Liquid Glass Animations ===== */

/* Smooth Cubic Bezier for Apple-like feel */
:root {
    --ease-smooth: cubic-bezier(0.4, 0, 0.2, 1);
    --ease-bounce: cubic-bezier(0.34, 1.56, 0.64, 1);
    --ease-glass: cubic-bezier(0.25, 0.46, 0.45, 0.94);
}

/* View Transitions */
.view {
    opacity: 0;
    transform: translateY(12px) scale(0.98);
    transition:
        opacity 0.4s var(--ease-smooth),
        transform 0.4s var(--ease-smooth);
    pointer-events: none;
}

.view.active {
    opacity: 1;
    transform: translateY(0) scale(1);
    pointer-events: auto;
}

/* Content Fade-In Animation */
@keyframes liquidFadeIn {
    from {
        opacity: 0;
        transform: translateY(16px);
        filter: blur(4px);
    }

    to {
        opacity: 1;
        transform: translateY(0);
        filter: blur(0);
    }
}

@keyframes liquidScaleIn {
    from {
        opacity: 0;
        transform: scale(0.92);
        filter: blur(6px);
    }

    to {
        opacity: 1;
        transform: scale(1);
        filter: blur(0);
    }
}

/* Stagger Animation for Cards */
.view.active .stat-box,
.view.active .synth-item {
    animation: liquidFadeIn 0.5s var(--ease-smooth) forwards;
    animation-delay: calc(var(--stagger-index, 0) * 0.08s);
}

.view.active .stat-box:nth-child(1) {
    --stagger-index: 0;
}

.view.active .stat-box:nth-child(2) {
    --stagger-index: 1;
}

.view.active .stat-box:nth-child(3) {
    --stagger-index: 2;
}

.view.active .synth-item:nth-child(1) {
    --stagger-index: 0;
}

.view.active .synth-item:nth-child(2) {
    --stagger-index: 1;
}

.view.active .synth-item:nth-child(3) {
    --stagger-index: 2;
}

.view.active .synth-item:nth-child(4) {
    --stagger-index: 3;
}

/* Toggle Button Liquid Glass Effect - Apple Quality */
.view-toggle {
    position: relative;
    display: inline-flex;
    gap: 0;
    padding: 6px;
    background: linear-gradient(135deg,
            rgba(255, 255, 255, 0.06) 0%,
            rgba(255, 255, 255, 0.02) 100%);
    backdrop-filter: blur(16px) saturate(180%);
    -webkit-backdrop-filter: blur(16px) saturate(180%);
    border-radius: 14px;
    border: 1px solid rgba(255, 255, 255, 0.12);
    box-shadow:
        0 4px 30px rgba(0, 0, 0, 0.15),
        0 1px 3px rgba(0, 0, 0, 0.1),
        inset 0 1px 0 rgba(255, 255, 255, 0.08),
        inset 0 -1px 0 rgba(0, 0, 0, 0.05);
    overflow: visible;
    /* CRITICAL: Allow glow to extend beyond container during bounce */
}

/* Sliding indicator - the animated pill */
.view-toggle::before {
    content: '';
    position: absolute;
    top: 6px;
    left: 6px;
    width: calc(50% - 6px);
    height: calc(100% - 12px);
    background: var(--gradient-primary);
    border-radius: 10px;
    transition:
        transform 0.45s cubic-bezier(0.34, 1.40, 0.64, 1),
        box-shadow 0.3s ease;
    /* Extended glow that follows the indicator during animation */
    box-shadow:
        0 0 20px rgba(99, 102, 241, 0.5),
        0 4px 16px rgba(99, 102, 241, 0.4),
        0 2px 6px rgba(99, 102, 241, 0.3),
        inset 0 1px 0 rgba(255, 255, 255, 0.25),
        inset 0 -1px 0 rgba(0, 0, 0, 0.1);
    z-index: 0;
    will-change: transform;
}

.view-toggle:hover::before {
    box-shadow:
        0 0 28px rgba(99, 102, 241, 0.6),
        0 6px 24px rgba(99, 102, 241, 0.5),
        0 2px 8px rgba(99, 102, 241, 0.35),
        inset 0 1px 0 rgba(255, 255, 255, 0.3),
        inset 0 -1px 0 rgba(0, 0, 0, 0.1);
}

.view-toggle.global-active::before {
    transform: translateX(calc(100% + 0px));
}

/* Toggle buttons */
.toggle-btn {
    position: relative;
    z-index: 1;
    flex: 1;
    padding: 11px 26px;
    font-family: var(--font-primary);
    font-size: 0.82rem;
    font-weight: 600;
    letter-spacing: 0.3px;
    text-transform: uppercase;
    border: none;
    border-radius: 10px;
    background: transparent;
    color: rgba(255, 255, 255, 0.45);
    cursor: pointer;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    transition:
        color 0.25s ease,
        opacity 0.25s ease;
    user-select: none;
}

.toggle-btn:hover:not(.active) {
    color: rgba(255, 255, 255, 0.7);
}

.toggle-btn.active {
    color: white;
    text-shadow: 0 1px 1px rgba(0, 0, 0, 0.2);
}

/* Glassmorphism Enhancement */
.glass-card {
    background: rgba(255, 255, 255, 0.04);
    backdrop-filter: blur(20px);
    -webkit-backdrop-filter: blur(20px);
    border: 1px solid rgba(255, 255, 255, 0.08);
    box-shadow:
        0 8px 32px rgba(0, 0, 0, 0.3),
        inset 0 1px 0 rgba(255, 255, 255, 0.1);
}

/* Card Hover Effects */
.session-card-compact,
.stat-box,
.synth-item,
.lap-stat-card {
    transition:
        transform 0.3s var(--ease-smooth),
        box-shadow 0.3s var(--ease-smooth),
        background 0.3s var(--ease-smooth),
        border-color 0.3s var(--ease-smooth);
}

.session-card-compact:hover {
    transform: translateY(-4px) scale(1.01);
    box-shadow:
        0 12px 40px rgba(0, 0, 0, 0.4),
        0 0 0 1px rgba(99, 102, 241, 0.3);
}

.stat-box:hover,
.synth-item:hover {
    transform: translateY(-2px);
    box-shadow: 0 8px 24px rgba(0, 0, 0, 0.3);
}

/* Button Glow Effects */
.btn {
    transition:
        transform 0.2s var(--ease-smooth),
        box-shadow 0.3s var(--ease-smooth),
        background 0.3s var(--ease-smooth);
}

.btn:hover {
    transform: translateY(-2px);
}

.btn-primary:hover {
    box-shadow:
        0 8px 24px rgba(99, 102, 241, 0.4),
        0 0 0 1px rgba(99, 102, 241, 0.6);
}

/* Filter Toggle Buttons */
.filter-toggle-btn {
    transition:
        all 0.3s var(--ease-smooth);
    position: relative;
    overflow: hidden;
}

.filter-toggle-btn::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg,
            transparent,
            rgba(255, 255, 255, 0.1),
            transparent);
    transition: left 0.5s var(--ease-smooth);
}

.filter-toggle-btn:hover::before {
    left: 100%;
}

.filter-toggle-btn.active {
    transform: scale(1.02);
}

/* Chart Wrapper Animation */
.lap-chart-wrapper {
    transition: opacity 0.3s var(--ease-smooth);
}

/* Nav Tabs - Smooth Background Animation */
.nav-tab {
    position: relative;
    transition:
        color 0.4s var(--ease-smooth),
        background 0.4s var(--ease-smooth),
        box-shadow 0.4s var(--ease-smooth),
        transform 0.2s var(--ease-smooth);
}

.nav-tab:hover:not(.active):not(.disabled) {
    transform: translateY(-1px);
}

/* Table Row Hover Animation */
.laps-table tbody tr {
    transition:
        background 0.3s var(--ease-smooth),
        transform 0.2s var(--ease-smooth);
}

.laps-table tbody tr:hover {
    transform: scale(1.005);
}

/* Ripple Effect for Buttons */
@keyframes ripple {
    to {
        transform: scale(4);
        opacity: 0;
    }
}

/* Stats Value Counter Animation */
@keyframes countUp {
    from {
        opacity: 0;
        transform: translateY(10px);
    }

    to {
        opacity: 1;
        transform: translateY(0);
    }
}

.stat-value,
.synth-value,
.lap-stat-value {
    animation: countUp 0.5s var(--ease-smooth) forwards;
}

/* Loading Shimmer */
@keyframes shimmer {
    0% {
        background-position: -200% 0;
    }

    100% {
        background-position: 200% 0;
    }
}

.loading-shimmer {
    background: linear-gradient(90deg,
            rgba(255, 255, 255, 0.03) 25%,
            rgba(255, 255, 255, 0.08) 50%,
            rgba(255, 255, 255, 0.03) 75%);
    background-size: 200% 100%;
    animation: shimmer 1.5s infinite;
}

/* Pulse Animation for Highlights */
@keyframes glassPulse {

    0%,
    100% {
        box-shadow: 0 0 0 0 rgba(99, 102, 241, 0.4);
    }

    50% {
        box-shadow: 0 0 0 8px rgba(99, 102, 241, 0);
    }
}

.stat-box.highlight,
.synth-item.highlight {
    animation: glassPulse 2s var(--ease-smooth) infinite;
}

/* Smooth Scrollbar */
::-webkit-scrollbar {
    width: 8px;
    height: 8px;
}

::-webkit-scrollbar-track {
    background: rgba(255, 255, 255, 0.03);
    border-radius: 4px;
}

::-webkit-scrollbar-thumb {
    background: rgba(255, 255, 255, 0.15);
    border-radius: 4px;
    transition: background 0.3s;
}

::-webkit-scrollbar-thumb:hover {
    background: rgba(255, 255, 255, 0.25);
}

/* ===== Data Refresh Animation ===== */
/* Glow effect when switching between week/global modes */
@keyframes dataRefreshGlow {
    0% {
        box-shadow:
            inset 0 0 0 1px rgba(99, 102, 241, 0),
            0 0 0 rgba(99, 102, 241, 0);
    }

    30% {
        box-shadow:
            inset 0 0 0 1px rgba(99, 102, 241, 0.5),
            0 0 25px rgba(99, 102, 241, 0.35);
    }

    100% {
        box-shadow:
            inset 0 0 0 1px rgba(99, 102, 241, 0),
            0 0 0 rgba(99, 102, 241, 0);
    }
}

/* Apply glow only to main section cards (ATTIVIT, QUALIT, DISTRIBUZIONE, PISTE, RITMO) */
#overview-view.data-refreshing .overview-section:not(.actions-section),
#overview-view.data-refreshing .two-column-row {
    animation: dataRefreshGlow 0.7s ease-out;
}

/* Stagger the animation for wave effect */
#overview-view.data-refreshing>.overview-section:nth-of-type(1) {
    animation-delay: 0ms;
}

#overview-view.data-refreshing>.two-column-row {
    animation-delay: 80ms;
}

#overview-view.data-refreshing>.overview-section:nth-of-type(2) {
    animation-delay: 160ms;
}

#overview-view.data-refreshing>.overview-section:nth-of-type(3) {
    animation-delay: 240ms;
}

/* ================================================
   RESPONSIVE DESIGN - Media Queries
   ================================================ */

/* Large Laptop (max-width: 1200px) */
@media (max-width: 1200px) {
    .app-container {
        padding: 1.5rem;
    }

    .two-column-row {
        gap: 16px;
    }
}

/* Tablet (max-width: 1024px) */
@media (max-width: 1024px) {
    .app-container {
        padding: 1rem;
    }

    .header {
        flex-wrap: wrap;
        gap: 12px;
    }

    .header-actions {
        gap: 8px;
    }

    .btn {
        padding: 8px 16px;
        font-size: 0.8rem;
    }

    .two-column-row {
        flex-direction: column;
    }

    .two-column-row>* {
        width: 100%;
    }

    .overview-section {
        padding: 20px;
    }

    .stat-value {
        font-size: 2rem;
    }
}

/* Small Tablet (max-width: 768px) */
@media (max-width: 768px) {
    .app-container {
        padding: 0.75rem;
    }

    /* Header - Stack vertically */
    .header {
        flex-direction: column;
        align-items: stretch;
        gap: 12px;
    }

    .header-left {
        justify-content: center;
    }

    .header-actions {
        justify-content: center;
        flex-wrap: wrap;
    }

    .logo-mark {
        font-size: 0.9rem;
        padding: 5px 10px;
    }

    .logo-text {
        font-size: 1rem;
    }

    /* Navigation Tabs - Keep horizontal, smaller */
    .nav-tabs {
        padding: 4px;
        gap: 4px;
        flex-direction: row !important;
        flex-wrap: nowrap;
    }

    .nav-tab {
        padding: 10px 16px;
        font-size: 0.75rem;
    }

    /* View Toggle */
    .view-toggle {
        padding: 3px;
    }

    .toggle-btn {
        padding: 6px 12px;
        font-size: 0.7rem;
    }

    /* Cards */
    .overview-section {
        padding: 16px;
    }

    .section-title {
        font-size: 0.7rem;
    }

    .stat-value {
        font-size: 1.6rem;
    }

    .stat-label {
        font-size: 0.7rem;
    }

    .stat-box {
        padding: 14px;
    }

    /* Splash Screen */
    .splash-box {
        padding: 30px 40px;
        margin: 16px;
    }

    .splash-logo-mark {
        font-size: 1.3rem;
        padding: 6px 10px;
    }

    .splash-logo-text {
        font-size: 1.3rem;
    }

    .splash-buttons {
        flex-direction: column;
        gap: 10px;
        width: 100%;
    }

    .splash-btn {
        width: 100%;
        text-align: center;
    }
}

/* Mobile (max-width: 480px) - Minimum 12px font size */
@media (max-width: 480px) {

    /* Set base font-size to 18px so 0.7rem = 12.6px minimum */
    html {
        font-size: 18px !important;
    }

    .app-container {
        padding: 0.75rem;
    }

    /* Header - Larger */
    .header,
    .main-header {
        padding: 16px;
        gap: 14px;
    }

    .logo {
        gap: 10px;
    }

    .logo-mark {
        font-size: 1rem;
        padding: 6px 12px;
    }

    .logo-text,
    .main-header h1 {
        font-size: 1.15rem;
        letter-spacing: 0.12em;
    }

    /* Driver badge - min 12px */
    .driver-badge {
        padding: 8px 16px;
        font-size: 13px !important;
    }

    /* All buttons - min 12px */
    .btn,
    .header-actions .btn,
    .header-controls .btn {
        padding: 12px 18px;
        font-size: 13px !important;
    }

    /* Navigation - min 12px */
    .nav-tabs-container {
        padding: 0 10px;
    }

    .nav-tabs {
        width: 100%;
        max-width: 100%;
        padding: 6px;
        flex-direction: row !important;
        flex-wrap: nowrap;
        margin-bottom: 20px;
    }

    .nav-tabs::before {
        top: 6px;
        left: 6px;
        width: calc(33.333% - 5px);
        height: calc(100% - 12px);
    }

    .nav-tab {
        flex: 1;
        padding: 14px 8px;
        font-size: 13px !important;
        text-align: center;
        gap: 6px;
    }

    .tab-icon {
        font-size: 1.1rem;
    }

    .tab-label {
        font-size: 13px !important;
        letter-spacing: 0.5px;
    }

    /* View Toggle - min 12px */
    .view-toggle {
        padding: 5px;
    }

    .toggle-btn {
        padding: 12px 18px;
        font-size: 13px !important;
    }

    /* Cards - min 12px */
    .overview-section {
        padding: 20px;
        margin-bottom: 18px;
    }

    .section-title {
        font-size: 0.85rem;
        margin-bottom: 18px;
    }

    .stat-value {
        font-size: 2rem;
    }

    .stat-label {
        font-size: 0.9rem;
    }

    .stat-box {
        padding: 18px;
    }

    .card-stats-grid {
        gap: 14px;
    }

    .stats-row-3 {
        gap: 12px;
    }

    /* Overview title */
    .overview-title h1 {
        font-size: 1.4rem;
    }

    /* Charts */
    .chart-container {
        height: 180px;
    }

    /* Tracks Chips */
    .tracks-chips {
        gap: 10px;
    }

    .track-chip {
        font-size: 0.85rem;
        padding: 8px 14px;
    }

    /* Splash Screen - Larger */
    .splash-box {
        padding: 32px 28px;
        margin: 16px;
        border-radius: 14px;
    }

    .splash-content {
        gap: 32px;
    }

    .splash-logo {
        gap: 12px;
    }

    .splash-logo-mark {
        font-size: 1.4rem;
        padding: 8px 14px;
    }

    .splash-logo-text {
        font-size: 1.4rem;
        letter-spacing: 0.18em;
    }

    .splash-btn {
        padding: 14px 26px;
        font-size: 14px;
    }

    /* Sessions Table - min 12px */
    .sessions-table {
        font-size: 13px;
    }

    .sessions-table th,
    .sessions-table td {
        padding: 12px 10px;
        font-size: 13px;
    }

    /* Hide less important columns on mobile */
    .sessions-table th:nth-child(4),
    .sessions-table td:nth-child(4),
    .sessions-table th:nth-child(5),
    .sessions-table td:nth-child(5) {
        display: none;
    }

    /* Legend items - min 12px */
    .legend-item {
        font-size: 13px;
    }

    /* Year Selector */
    .year-selector {
        font-size: 13px;
        padding: 8px 14px;
    }

    /* Action buttons */
    .btn-action,
    .btn-action-secondary {
        font-size: 14px;
        padding: 14px 20px;
    }

    /* Sessions header */
    .sessions-header h1 {
        font-size: 1.3rem;
    }

    /* Filters - min 12px */
    .filter-group label {
        font-size: 13px;
    }

    .filter-group select,
    .filter-group input {
        font-size: 13px;
        padding: 10px 14px;
    }

    /* Session Cards - min 12px */
    .session-card,
    .session-card * {
        font-size: 12px;
    }

    .session-card .session-date {
        font-size: 13px;
    }

    .session-card .session-track {
        font-size: 14px;
    }

    .session-card .session-car {
        font-size: 12px;
    }

    .session-card .session-type {
        font-size: 12px;
        padding: 4px 10px;
    }

    .session-card .session-laps,
    .session-card .session-best {
        font-size: 12px;
    }

    /* Session compact cards */
    .compact-session-card,
    .compact-session-card * {
        font-size: 12px;
    }

    .compact-session-card .date-badge {
        font-size: 12px;
    }

    .compact-session-card .track-name {
        font-size: 13px;
    }

    .compact-session-card .car-name {
        font-size: 12px;
    }

    .compact-session-card .session-badge {
        font-size: 12px;
        padding: 4px 8px;
    }

    .compact-session-card .laps-count,
    .compact-session-card .best-time {
        font-size: 12px;
    }

    /* Stint View - min 12px */
    .stint-header,
    .stint-header * {
        font-size: 12px;
    }

    .stint-header h1 {
        font-size: 1.2rem;
    }

    .condition-label,
    .condition-value {
        font-size: 12px;
    }

    .condition-badge {
        font-size: 12px;
        padding: 4px 10px;
    }

    .synth-label,
    .synth-value {
        font-size: 12px;
    }

    .stint-timeline-title {
        font-size: 13px;
    }

    .lap-row,
    .lap-row * {
        font-size: 12px !important;
    }

    /* All small text elements - min 12px */
    .text-muted,
    .text-secondary,
    small,
    .small {
        font-size: 12px !important;
    }

    /* Condition labels and badges - min 12px */
    .condition-label,
    .condition-value,
    .grip-badge,
    .weather-badge {
        font-size: 12px !important;
    }

    /* Session card elements - min 12px */
    .card-date,
    .session-date,
    .date-badge {
        font-size: 12px !important;
    }

    .session-type-badge,
    .type-badge {
        font-size: 12px !important;
        padding: 4px 10px;
    }

    /* Sort buttons - min 12px */
    .sort-btn,
    .sort-label,
    .filter-label {
        font-size: 12px !important;
    }

    /* Back button - min 12px */
    .btn-back {
        font-size: 12px !important;
    }

    /* ======= CRITICAL: Force 12px on ALL remaining elements ======= */

    /* All buttons and interactive elements */
    button,
    .btn,
    .btn-primary,
    .btn-secondary,
    .btn-action,
    .btn-action-secondary,
    [class*="btn"] {
        font-size: 12px !important;
    }

    /* All nav tabs and labels */
    .nav-tab,
    .nav-tab *,
    .tab-label,
    [class*="tab"] span {
        font-size: 12px !important;
    }

    /* All badges */
    .driver-badge,
    .grip-badge,
    .weather-badge,
    .session-badge,
    .session-type-badge,
    .type-badge,
    [class*="badge"] {
        font-size: 12px !important;
    }

    /* All labels and titles */
    .section-title,
    .stat-label,
    .condition-label,
    .condition-value,
    .synth-label,
    .synth-value,
    [class*="label"] {
        font-size: 12px !important;
    }

    /* Filter and sort elements */
    .filter-toggle-btn,
    .filter-btn,
    [class*="filter"],
    [class*="sort"] {
        font-size: 12px !important;
    }

    /* Card content */
    .session-card-compact *,
    .card-date,
    .card-info,
    [class*="card"] span,
    [class*="card"] small {
        font-size: 12px !important;
    }

    /* Stint and timeline elements */
    .stint-time,
    .stint-label,
    .timeline-label,
    [class*="stint"] span,
    [class*="timeline"] span {
        font-size: 12px !important;
    }

    /* Legend and chart labels */
    .legend-item,
    .legend-label,
    .chart-label {
        font-size: 12px !important;
    }

    /* NOTE: Removed aggressive .main-content span and .view span rules
       that were overriding larger font sizes like stat values and percentages */
}

/* Extra Small Mobile (max-width: 360px) */
@media (max-width: 360px) {
    .header-actions {
        flex-direction: column;
        width: 100%;
    }

    .header-actions .btn {
        width: 100%;
        font-size: 0.85rem;
        padding: 12px 16px;
    }

    .stat-value {
        font-size: 1.6rem;
    }

    .stat-label {
        font-size: 0.85rem;
    }

    /* Minimum 10px fonts (0.625rem) - using 0.75rem = 12px for readability */
    .nav-tab {
        padding: 12px 6px;
        font-size: 0.75rem;
    }

    .toggle-btn {
        padding: 10px 14px;
        font-size: 0.8rem;
    }

    .section-title {
        font-size: 0.8rem;
    }

    .legend-item {
        font-size: 0.75rem;
    }

    .track-chip {
        font-size: 0.75rem;
        padding: 6px 12px;
    }

    .splash-logo {
        flex-direction: column;
        gap: 8px;
        text-align: center;
    }

    .splash-logo-mark,
    .splash-logo-text {
        font-size: 1.2rem;
    }
}

/* ===== ATTIVIT Box Styles ===== */
.box-attivita {
    display: flex;
    flex-direction: column;
    gap: 16px;
}

.section-header-row {
    display: flex;
    align-items: baseline;
    gap: 12px;
}

.section-subtitle {
    font-size: 0.75rem;
    color: var(--text-muted);
    font-weight: 400;
}

/* KPI Cards Row */
.attivita-kpi-row {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: 12px;
}

.attivita-kpi-card {
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: 16px 8px;
    background: rgba(40, 40, 55, 0.5);
    border-radius: var(--border-radius-sm);
    border: 1px solid var(--border-color);
}

.attivita-kpi-card .kpi-value {
    font-size: 1.8rem;
    font-weight: 700;
    color: var(--text-primary);
    line-height: 1.1;
}

.attivita-kpi-card .kpi-unit {
    font-size: 0.7rem;
    font-weight: 600;
    color: var(--accent-primary);
    letter-spacing: 0.5px;
    margin-top: 2px;
}

.attivita-kpi-card .kpi-label {
    font-size: 0.65rem;
    color: var(--text-muted);
    text-transform: capitalize;
    margin-top: 4px;
}

/* Chart Section */
.attivita-chart-section {
    background: rgba(40, 40, 55, 0.4);
    border-radius: var(--border-radius-sm);
    padding: 12px;
}

.attivita-chart-title {
    display: block;
    font-size: 0.75rem;
    color: var(--text-secondary);
    margin-bottom: 8px;
}

.attivita-chart-container {
    height: 100px;
    position: relative;
}

.attivita-chart-container canvas {
    width: 100% !important;
    height: 100% !important;
}

/* Session Types Section */
.session-types-section {
    background: rgba(255, 255, 255, 0.03);
    border-radius: var(--border-radius-sm);
    padding: 12px;
}

.session-types-title {
    display: block;
    font-size: 0.75rem;
    color: var(--text-secondary);
    margin-bottom: 10px;
}

/* Stacked Bar */
.session-stacked-bar {
    display: flex;
    height: 8px;
    border-radius: 4px;
    overflow: hidden;
    background: rgba(50, 50, 60, 0.5);
    margin-bottom: 12px;
}

.stacked-segment {
    height: 100%;
    transition: width 0.3s ease;
}

.stacked-segment.practice {
    background: #60a5fa;
}

.stacked-segment.qualy {
    background: #fbbf24;
}

.stacked-segment.race {
    background: #f87171;
}

/* Session Chips */
.session-chips {
    display: flex;
    flex-wrap: wrap;
    gap: 8px;
}

.session-chip {
    padding: 2px 7px 2px;
    border-radius: 20px;
    font-size: 0.7rem;
    font-weight: 500;
    border: 1px solid transparent;
}

.session-chip.practice {
    background: rgba(96, 165, 250, 0.15);
    color: #60a5fa;
    border-color: rgba(96, 165, 250, 0.3);
}

.session-chip.qualy {
    background: rgba(251, 191, 36, 0.15);
    color: #fbbf24;
    border-color: rgba(251, 191, 36, 0.3);
}

.session-chip.race {
    background: rgba(248, 113, 113, 0.15);
    color: #f87171;
    border-color: rgba(248, 113, 113, 0.3);
}

/* ===== QUALIT Box Styles ===== */
.box-qualita {
    display: flex;
    flex-direction: column;
    gap: 20px;
}

.qualita-main {
    display: flex;
    flex-direction: column;
    gap: 16px;
}

.qualita-big-value {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 4px;
}

.qualita-percent {
    font-size: 3rem;
    font-weight: 800;
    color: var(--accent-success);
    line-height: 1;
}

.qualita-context {
    font-size: 0.75rem;
    color: var(--text-muted);
}

.qualita-bar-container {
    display: flex;
    flex-direction: column;
    gap: 6px;
}

.qualita-bar {
    height: 8px;
    background: rgba(50, 50, 60, 0.5);
    border-radius: 4px;
    overflow: hidden;
}

.qualita-bar-fill {
    height: 100%;
    background: var(--gradient-success);
    border-radius: 4px;
    transition: width 0.5s ease;
}

.qualita-counts {
    font-size: 0.7rem;
    color: var(--text-muted);
    text-align: center;
}

.qualita-distribution {
    padding-top: 16px;
    border-top: 1px solid var(--border-color);
}

.distribution-title {
    display: block;
    font-size: 0.75rem;
    color: var(--text-secondary);
    margin-bottom: 12px;
}

/* ===== SESSION DETAIL PAGE - NEW LAYOUT ===== */

/* 1 Session Header Block */
.session-header-block {
    background: var(--bg-card);
    border: 1px solid var(--border-color);
    border-radius: var(--border-radius-lg);
    padding: 20px 24px;
    margin-bottom: 16px;
}

.session-title-row h1 {
    font-family: var(--font-display);
    font-size: 1.4rem;
    font-weight: 700;
    color: var(--text-primary);
    margin: 12px 0 8px;
}

.session-context-row {
    display: flex;
    flex-wrap: wrap;
    align-items: center;
    gap: 6px;
    font-size: 0.85rem;
    color: var(--text-secondary);
}

.context-item {
    color: var(--text-secondary);
}

.context-item.weather {
    color: var(--accent-info);
}

.context-item.duration {
    color: var(--text-primary);
    font-weight: 600;
}

.context-separator {
    color: var(--text-muted);
    opacity: 0.5;
}

/* 2 Session Summary Bar */
.session-summary-bar {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 0;
    background: var(--bg-card);
    border: 1px solid var(--border-color);
    border-radius: var(--border-radius-lg);
    padding: 16px 24px;
    margin-bottom: 16px;
}

.summary-item {
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: 0 24px;
}

.summary-item.highlight .summary-value {
    color: var(--accent-success);
}

.summary-value {
    font-size: 1.5rem;
    font-weight: 700;
    color: var(--text-primary);
    line-height: 1.2;
}

.summary-label {
    font-size: 0.7rem;
    color: var(--text-muted);
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

.summary-divider {
    width: 1px;
    height: 40px;
    background: var(--border-color);
}

/* 3 Stint Selector */
.stint-selector-block {
    display: flex;
    align-items: center;
    gap: 16px;
    margin-bottom: 16px;
    padding: 12px 16px;
    background: var(--bg-secondary);
    border-radius: var(--border-radius-md);
}

.selector-label {
    font-size: 0.8rem;
    font-weight: 600;
    color: var(--text-muted);
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

.stint-tabs {
    display: flex;
    flex-wrap: wrap;
    gap: 8px;
}

.stint-tab {
    padding: 10px 16px;
    background: var(--bg-card);
    border: 1px solid var(--border-color);
    border-radius: var(--border-radius-sm);
    color: var(--text-secondary);
    font-size: 0.8rem;
    font-weight: 500;
    cursor: pointer;
    transition: all var(--transition-fast);
}

.stint-tab:hover {
    border-color: var(--accent-primary);
    color: var(--text-primary);
}

.stint-tab.active {
    background: var(--gradient-primary);
    border-color: var(--accent-primary);
    color: white;
    box-shadow: 0 0 15px var(--accent-primary-glow);
}

/* 4 Stint Header Block */
.stint-header-block {
    background: rgba(99, 102, 241, 0.08);
    border-left: 4px solid var(--accent-primary);
    border-radius: 0 var(--border-radius-md) var(--border-radius-md) 0;
    padding: 16px 20px;
    margin-bottom: 20px;
}

.stint-title {
    font-family: var(--font-display);
    font-size: 1.1rem;
    font-weight: 700;
    color: var(--text-primary);
    margin: 0 0 6px;
}

.stint-meta {
    display: flex;
    flex-wrap: wrap;
    align-items: center;
    gap: 6px;
    font-size: 0.8rem;
    color: var(--text-secondary);
}

.meta-separator {
    color: var(--text-muted);
    opacity: 0.5;
}

/* 5 Stint KPI Row */
.stint-kpi-row {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: 16px;
    margin-bottom: 24px;
}

.stint-kpi-card {
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: 20px 16px;
    background: var(--bg-card);
    border: 1px solid var(--border-color);
    border-radius: var(--border-radius-md);
    text-align: center;
}

.stint-kpi-card .kpi-label {
    font-size: 0.7rem;
    font-weight: 600;
    color: var(--text-muted);
    text-transform: uppercase;
    letter-spacing: 0.5px;
    margin-bottom: 8px;
}

.stint-kpi-card .kpi-value {
    font-size: 1.6rem;
    font-weight: 700;
    color: var(--text-primary);
    line-height: 1.1;
}

.stint-kpi-card .kpi-sublabel {
    font-size: 0.65rem;
    color: var(--text-muted);
    margin-top: 4px;
}

.stint-kpi-card .kpi-sublabel-clean {
    font-size: 0.65rem;
    color: var(--accent-success);
    margin-top: 4px;
    font-weight: 500;
}

/* 6 Chart Sections */
.chart-section {
    background: var(--bg-card);
    border: 1px solid var(--border-color);
    border-radius: var(--border-radius-lg);
    padding: 20px;
    margin-bottom: 20px;
}

.chart-section-title {
    font-family: var(--font-display);
    font-size: 0.85rem;
    font-weight: 600;
    color: var(--text-secondary);
    text-transform: uppercase;
    letter-spacing: 0.5px;
    margin-bottom: 16px;
}

.consistency-chart-wrapper {
    height: 200px;
    position: relative;
}

.consistency-chart-wrapper canvas {
    width: 100% !important;
    height: 100% !important;
}

/* 7 Sectors Section */
.sectors-section {
    background: var(--bg-card);
    border: 1px solid var(--border-color);
    border-radius: var(--border-radius-lg);
    padding: 20px;
    margin-bottom: 20px;
}

.sectors-grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 16px;
}

.sector-card {
    background: rgba(40, 40, 55, 0.5);
    border-radius: var(--border-radius-sm);
    padding: 12px;
}

.sector-label {
    display: block;
    font-size: 0.75rem;
    font-weight: 600;
    color: var(--text-secondary);
    text-transform: uppercase;
    letter-spacing: 0.5px;
    margin-bottom: 10px;
    text-align: center;
}

.sector-chart-wrapper {
    height: 80px;
    position: relative;
}

.sector-chart-wrapper canvas {
    width: 100% !important;
    height: 100% !important;
}

/* Sector Summary View (for long stints) */
.sector-summary {
    display: flex;
    flex-direction: column;
    gap: 8px;
    padding: 8px 0;
}

.sector-stat {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 4px 8px;
    background: rgba(30, 30, 40, 0.5);
    border-radius: 4px;
}

.sector-stat .stat-label {
    font-size: 0.65rem;
    font-weight: 600;
    color: var(--text-muted);
    text-transform: uppercase;
}

.sector-stat .stat-value {
    font-size: 0.85rem;
    font-weight: 600;
    color: var(--text-primary);
    font-family: var(--font-mono);
}

.sector-stat .stat-value.best {
    color: var(--accent-success);
}

.variability-indicator {
    text-align: center;
    font-size: 0.9rem;
    letter-spacing: 2px;
    margin-top: 4px;
}

/* 8 Comparison Section */
.comparison-section {
    background: var(--bg-card);
    border: 1px solid var(--border-color);
    border-radius: var(--border-radius-lg);
    padding: 20px;
    margin-bottom: 20px;
}

.comparison-controls {
    display: flex;
    align-items: center;
    gap: 16px;
    margin-bottom: 16px;
}

.comparison-selector {
    display: flex;
    align-items: center;
    gap: 8px;
}

.comparison-selector label {
    font-size: 0.85rem;
    font-weight: 600;
    color: var(--text-secondary);
}

.compare-select {
    padding: 8px 12px;
    background: var(--bg-elevated);
    border: 1px solid var(--border-color);
    border-radius: var(--border-radius-sm);
    color: var(--text-primary);
    font-size: 0.85rem;
    cursor: pointer;
}

.compare-select:focus {
    outline: none;
    border-color: var(--accent-primary);
}

.btn-compare {
    padding: 10px 20px;
    background: var(--bg-elevated);
    border: 1px solid var(--accent-primary);
    border-radius: var(--border-radius-sm);
    color: var(--accent-primary);
    font-size: 0.8rem;
    font-weight: 600;
    cursor: pointer;
    transition: all var(--transition-fast);
}

.btn-compare:hover {
    background: var(--accent-primary);
    color: white;
}

.comparison-warning {
    padding: 10px 14px;
    background: rgba(245, 158, 11, 0.1);
    border-left: 3px solid var(--accent-warning);
    border-radius: 0 var(--border-radius-sm) var(--border-radius-sm) 0;
    color: var(--accent-warning);
    font-size: 0.8rem;
    margin-bottom: 16px;
}

.comparison-chart-wrapper {
    height: 180px;
    position: relative;
}

.comparison-chart-wrapper canvas {
    width: 100% !important;
    height: 100% !important;
}

.comparison-placeholder {
    padding: 24px;
    text-align: center;
    color: var(--text-muted);
    font-size: 0.85rem;
    font-style: italic;
}

/* 9 Collapsible Lap Table */
.lap-table-section {
    background: var(--bg-card);
    border: 1px solid var(--border-color);
    border-radius: var(--border-radius-lg);
    overflow: hidden;
}

.table-toggle {
    display: flex;
    align-items: center;
    gap: 12px;
    width: 100%;
    padding: 16px 20px;
    background: transparent;
    border: none;
    color: var(--text-secondary);
    font-size: 0.9rem;
    font-weight: 600;
    cursor: pointer;
    transition: all var(--transition-fast);
}

.table-toggle:hover {
    background: rgba(255, 255, 255, 0.03);
    color: var(--text-primary);
}

.toggle-icon {
    font-size: 0.8rem;
    transition: transform var(--transition-fast);
}

.table-toggle.expanded .toggle-icon {
    transform: rotate(90deg);
}

.toggle-text {
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

.toggle-count {
    color: var(--text-muted);
    font-weight: 400;
}

.lap-table-container.collapsed {
    max-height: 0;
    overflow: hidden;
    transition: max-height 0.3s ease;
}

.lap-table-container.expanded {
    max-height: 1000px;
    overflow: auto;
}

/* Lap Summary Bar */
.lap-summary-bar {
    display: flex;
    justify-content: center;
    gap: 32px;
    padding: 12px 20px;
    background: rgba(30, 30, 40, 0.5);
    border-top: 1px solid var(--border-color);
}

.lap-summary-item {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 2px;
}

.lap-summary-item .summary-stat-label {
    font-size: 0.65rem;
    font-weight: 600;
    color: var(--text-muted);
    text-transform: uppercase;
}

.lap-summary-item .summary-stat-value {
    font-size: 0.95rem;
    font-weight: 600;
    color: var(--text-primary);
    font-family: var(--font-mono);
}

.lap-summary-item.best .summary-stat-value {
    color: var(--accent-success);
}

.lap-summary-item.worst .summary-stat-value {
    color: var(--accent-danger);
}

/* Responsive adjustments */
@media (max-width: 768px) {
    .session-summary-bar {
        flex-wrap: wrap;
        gap: 16px;
    }

    .summary-divider {
        display: none;
    }

    .stint-kpi-row {
        grid-template-columns: repeat(2, 1fr);
    }

    .sectors-grid {
        grid-template-columns: 1fr;
    }

    .comparison-controls {
        flex-direction: column;
        align-items: stretch;
    }
}

/*  */
/* SESSIONS PAGE VARIANTS                                                       */
/*  */

/* Variant Switcher */
.sessions-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 16px;
}

.variant-switcher {
    display: flex;
    align-items: center;
    gap: 8px;
}

.switcher-label {
    font-size: 0.7rem;
    color: var(--text-muted);
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

.variant-btn {
    padding: 8px 14px;
    background: var(--bg-card);
    border: 1px solid var(--border-color);
    border-radius: var(--border-radius-sm);
    color: var(--text-secondary);
    font-size: 0.8rem;
    cursor: pointer;
    transition: all var(--transition-fast);
}

.variant-btn:hover {
    border-color: var(--accent-primary);
    color: var(--text-primary);
}

.variant-btn.active {
    background: var(--gradient-primary);
    border-color: var(--accent-primary);
    color: white;
}

/* Period Tabs - styled like nav-tabs */
.period-tabs {
    position: relative;
    display: flex;
    gap: 0;
    padding: 5px;
    background: linear-gradient(135deg,
            rgba(255, 255, 255, 0.06) 0%,
            rgba(255, 255, 255, 0.02) 100%);
    backdrop-filter: blur(12px) saturate(180%);
    -webkit-backdrop-filter: blur(12px) saturate(180%);
    border-radius: 12px;
    border: 1px solid rgba(255, 255, 255, 0.1);
    box-shadow:
        0 4px 20px rgba(0, 0, 0, 0.12),
        inset 0 1px 0 rgba(255, 255, 255, 0.06);
    margin-bottom: 24px;
    overflow: visible;
}

/* Sliding indicator */
.period-tabs::before {
    content: '';
    position: absolute;
    top: 5px;
    left: 5px;
    width: calc(33.333% - 3.33px);
    height: calc(100% - 10px);
    background: var(--gradient-primary);
    border-radius: 8px;
    transition: transform 0.4s cubic-bezier(0.34, 1.40, 0.64, 1),
        box-shadow 0.3s ease;
    box-shadow:
        0 0 16px rgba(99, 102, 241, 0.5),
        0 4px 12px rgba(99, 102, 241, 0.35);
    z-index: 0;
    will-change: transform;
    transform: translateX(calc(var(--period-index, 2) * 100%));
}

.period-tabs.period-today::before {
    transform: translateX(0);
}

.period-tabs.period-week::before {
    transform: translateX(100%);
}

.period-tabs.period-all::before {
    transform: translateX(200%);
}

.period-tab {
    position: relative;
    z-index: 1;
    flex: 1;
    padding: 12px 20px;
    background: transparent;
    border: none;
    color: rgba(255, 255, 255, 0.45);
    font-size: 0.8rem;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    cursor: pointer;
    transition: color 0.25s ease;
    border-radius: 8px;
}

.period-tab:hover:not(.active) {
    color: rgba(255, 255, 255, 0.7);
}

.period-tab.active {
    color: white;
    text-shadow: 0 1px 1px rgba(0, 0, 0, 0.2);
}

/*  */
/* SESSIONS FILTERS BAR                                                         */
/*  */

.sessions-filters {
    display: flex;
    justify-content: space-between;
    align-items: center;
    gap: 16px;
    margin-bottom: 20px;
    padding: 12px 16px;
    background: var(--bg-card);
    border: 1px solid var(--border-color);
    border-radius: var(--border-radius-md);
}

.filter-group {
    display: flex;
    gap: 12px;
}

.filter-select {
    padding: 10px 16px;
    background: var(--bg-elevated);
    border: 1px solid var(--border-color);
    border-radius: var(--border-radius-sm);
    color: var(--text-primary);
    font-size: 0.9rem;
    font-family: var(--font-primary);
    cursor: pointer;
    transition: all var(--transition-fast);
    min-width: 160px;
}

.filter-select:hover {
    border-color: var(--accent-primary);
}

.filter-select:focus {
    outline: none;
    border-color: var(--accent-primary);
    box-shadow: 0 0 0 2px rgba(99, 102, 241, 0.2);
}

.filter-date {
    padding: 10px 14px;
    background: var(--bg-elevated);
    border: 1px solid var(--border-color);
    border-radius: var(--border-radius-sm);
    color: var(--text-primary);
    font-size: 0.85rem;
    font-family: var(--font-primary);
    cursor: pointer;
    transition: all var(--transition-fast);
    min-width: 140px;
    color-scheme: dark;
}

.filter-date.compact {
    min-width: 125px;
    padding: 8px 10px;
}

.date-range-container {
    display: flex;
    align-items: center;
    gap: 10px;
}

.date-label {
    font-size: 0.85rem;
    color: rgba(255, 255, 255, 0.5);
    font-weight: 500;
}

.filter-date::-webkit-calendar-picker-indicator {
    opacity: 0.5;
    cursor: pointer;
    transition: opacity 0.2s;
    transform: scale(0.9);
}

.filter-date:hover::-webkit-calendar-picker-indicator {
    opacity: 1;
}

.filter-date:hover,
.filter-date:focus {
    border-color: var(--accent-primary);
    outline: none;
}


.filter-search {
    width: 100%;
    padding: 10px 16px;
    background: var(--bg-elevated);
    border: 1px solid var(--border-color);
    border-radius: var(--border-radius-sm);
    color: var(--text-primary);
    font-size: 0.9rem;
    font-family: var(--font-primary);
    transition: all var(--transition-fast);
}

.filter-search::placeholder {
    color: var(--text-muted);
}

.filter-search:focus {
    outline: none;
    border-color: var(--accent-primary);
    box-shadow: 0 0 0 2px rgba(99, 102, 241, 0.2);
}

@media (max-width: 768px) {
    .sessions-filters {
        flex-direction: column;
        align-items: stretch;
    }

    .filter-group {
        flex-wrap: wrap;
    }

    .filter-select {
        flex: 1;
        min-width: 120px;
    }

    .search-group {
        max-width: 100%;
    }
}

/*  */
/* VARIANTE 1: GIORNATE (grouped by day) - REFINED UI                          */
/*  */

.giornate-container {
    display: flex;
    flex-direction: column;
    gap: 24px;
}

/*  */
/* LIVELLO 1: HEADER GIORNATA                                                   */
/*  */
/* HEADER GIORNATA (Data + Info)                                                */
/*  */
.giornata-block {
    background: var(--bg-card);
    border: 1px solid var(--border-color);
    border-radius: var(--border-radius-lg);
    overflow: hidden;
}

.giornata-header {
    display: flex;
    justify-content: space-between;
    align-items: flex-end;
    padding: 24px 20px 16px 20px;
    /* Pi spazio sopra */
    border-bottom: 0px;
    background: linear-gradient(135deg,
            rgba(255, 255, 255, 0.06) 0%,
            rgba(255, 255, 255, 0.02) 100%)
}

.giornata-date {
    display: flex;
    flex-direction: column;
    gap: 4px;
}

.date-text {
    font-family: var(--font-display);
    font-size: 1.5rem;
    /* Aumentato da 1.35rem */
    font-weight: 700;
    color: var(--text-primary);
    text-transform: uppercase;
    letter-spacing: 0.02em;
}

.giornata-date .track-name {
    font-size: 0.95rem;
    color: var(--text-secondary);
    font-weight: 400;
    margin-top: 2px;
}

.giornata-stats {
    font-size: 0.9375rem;
    color: rgba(255, 255, 255, 0.6);
    text-align: right;
    line-height: 1.6;
}

/*  */
/* LIVELLO 2 & 3: SESSIONI - GRIGLIA FISSA A COLONNE                           */
/*  */
.giornata-sessions {
    display: flex;
    flex-direction: column;
}

.giornata-session {
    display: grid;
    grid-template-columns: 110px 70px 1fr 300px 90px;
    align-items: center;
    gap: 16px;
    padding: 16px 20px;
    border-bottom: 1px solid rgba(255, 255, 255, 0.05);
    cursor: pointer;
    transition: background var(--transition-fast);
}

.giornata-session:last-child {
    border-bottom: none;
}

.giornata-session:hover {
    background: rgba(99, 102, 241, 0.06);
}

/* Colonna 1: TIPO (Badge + Label) */
.session-type-col {
    display: flex;
    align-items: center;
    gap: 8px;
    height: 24px;
}

.session-type-dot {
    width: 8px;
    height: 8px;
    border-radius: 50%;
    flex-shrink: 0;
}

.session-type-dot.practice {
    background: #6366f1;
    box-shadow: 0 0 8px rgba(99, 102, 241, 0.6);
}

.session-type-dot.qualify {
    background: #f59e0b;
    box-shadow: 0 0 8px rgba(245, 158, 11, 0.6);
}

.session-type-dot.race {
    background: #ef4444;
    box-shadow: 0 0 8px rgba(239, 68, 68, 0.6);
}

.session-type-label {
    font-weight: 700;
    font-size: 0.9375rem;
    color: var(--text-primary);
    text-transform: uppercase;
    letter-spacing: 0.02em;
    line-height: 24px;
}

/* Colonna 2: ORARIO */
.session-time-col {
    font-size: 0.95rem;
    /* Aumentato da 0.875rem */
    color: rgba(255, 255, 255, 0.75);
    /* Pi visibile */
    font-family: var(--font-mono);
    line-height: 24px;
    white-space: nowrap;
}

/* Colonna 3: PISTA  AUTO */
.session-car-col {
    color: var(--text-secondary);
    font-size: 0.9375rem;
    font-weight: 400;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    line-height: 24px;
}

.session-car-col strong {
    color: var(--text-primary);
    font-weight: 600;
}

/* Colonna 4: STATS (Gerarchia Best Lap) */
.session-metrics {
    display: flex;
    justify-content: flex-end;
    align-items: center;
    gap: 0;
    /* Gestito dalle larghezze fisse */
    height: 24px;
}

.metric {
    color: rgba(255, 255, 255, 0.6);
    /* Leggermente meno focus per label standard */
    white-space: nowrap;
    text-align: right;
    line-height: 24px;
    font-size: 0.875rem;
}

/* Larghezze fisse per allineamento verticale perfetto */
.metric:nth-child(1) {
    width: 70px;
}

/* Giri */
.metric:nth-child(2) {
    width: 140px;
}

/* Best */
.metric:nth-child(3) {
    width: 100px;
}

/* Puliti */

.metric strong {
    color: var(--text-primary);
    font-weight: 600;
    font-family: var(--font-mono);
    font-size: 0.9375rem;
}

/* Best Lap Highlight (il secondo elemento metric) */
.metric:nth-child(2) strong {
    font-size: 1.1rem;
    /* Pi grande */
    color: #fff;
    /* Bianco puro */
    font-weight: 700;
}

/* Colonna 5: CTA */
.session-action {
    height: 36px;
    /* Altezza fissa per evitare balli */
    padding: 0 14px;
    background: rgba(99, 102, 241, 0.1);
    border: 1px solid rgba(99, 102, 241, 0.3);
    border-radius: var(--border-radius-sm);
    color: var(--accent-primary);
    font-size: 0.85rem;
    font-weight: 600;
    cursor: pointer;
    transition: all var(--transition-fast);
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 4px;
}

.session-action::after {
    content: '';
    font-size: 0.95rem;
    transition: transform 0.2s ease;
}

.session-action:hover {
    background: var(--accent-primary);
    border-color: var(--accent-primary);
    color: white;
}

.session-action:hover::after {
    transform: translateX(3px);
}

/*  */
/* LOAD MORE BUTTON                                                             */
/*  */
.load-more-container {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 12px;
    padding: 24px;
}

.btn-load-more {
    padding: 14px 32px;
    background: linear-gradient(135deg, rgba(99, 102, 241, 0.15) 0%, rgba(139, 92, 246, 0.1) 100%);
    border: 1px solid rgba(99, 102, 241, 0.4);
    border-radius: var(--border-radius-md);
    color: var(--accent-primary);
    font-size: 0.9375rem;
    font-weight: 600;
    cursor: pointer;
    transition: all var(--transition-fast);
}

.btn-load-more:hover {
    background: var(--accent-primary);
    color: white;
    box-shadow: 0 4px 16px rgba(99, 102, 241, 0.4);
}

.sessions-count {
    font-size: 0.875rem;
    color: rgba(255, 255, 255, 0.5);
}

/*  */
/* RESPONSIVE: MOBILE (< 768px)                                                 */
/*  */
@media (max-width: 768px) {
    .giornata-header {
        flex-direction: column;
        gap: 8px;
        padding: 16px;
        align-items: flex-start;
    }

    .date-text {
        font-size: 1.15rem;
        /* Ridotto per mobile */
    }

    .giornata-stats {
        text-align: left;
        width: 100%;
        padding-top: 8px;
        border-top: 1px solid rgba(255, 255, 255, 0.05);
        font-size: 0.8rem;
    }

    /* Layout Mobile: Grid Area */
    .giornata-session {
        display: grid;
        grid-template-columns: 1fr auto;
        grid-template-areas:
            "type time"
            "car car"
            "stats stats"
            "cta cta";
        gap: 10px 8px;
        padding: 14px;
    }

    .session-type-col {
        grid-area: type;
        width: auto;
    }

    .session-type-label {
        font-size: 0.8rem;
    }

    .session-time-col {
        grid-area: time;
        text-align: right;
        font-size: 0.85rem;
        /* Bilanciato */
        color: rgba(255, 255, 255, 0.7);
        width: auto;
    }

    .session-car-col {
        grid-area: car;
        font-size: 0.95rem;
        /* Un filo pi piccolo */
        white-space: normal;
        line-height: 1.35;
    }

    .session-metrics {
        grid-area: stats;
        display: grid;
        grid-template-columns: repeat(3, 1fr);
        width: 100%;
        gap: 4px;
        background: rgba(255, 255, 255, 0.03);
        padding: 8px 10px;
        border-radius: 6px;
        height: auto;
    }

    .metric {
        width: auto !important;
        min-width: 0;
        text-align: center;
        font-size: 0.75rem;
        /* Label piccole */
        justify-content: center;
        display: flex;
        flex-direction: column;
        /* Impila Label e Valore */
        line-height: 1.2;
        gap: 2px;
    }

    /* Gestione valori stats su mobile */
    .metric strong {
        font-size: 0.9rem;
        display: block;
    }

    /* Best Lap su mobile */
    .metric:nth-child(2) strong {
        font-size: 1rem;
        /* Importante ma non enorme */
    }

    /* Reset specific widths */
    .metric:nth-child(1),
    .metric:nth-child(2),
    .metric:nth-child(3) {
        width: auto;
    }

    .session-action {
        grid-area: cta;
        width: 100%;
        justify-content: center;
        font-size: 0.8rem;
        padding: 8px;
        height: 32px;
    }

    /* Filters stacking */
    .sessions-filters {
        flex-direction: column;
        align-items: stretch;
    }

    .filter-group,
    .date-range-container {
        flex-wrap: wrap;
        width: 100%;
    }

    .filter-select {
        flex: 1;
        min-width: 100px;
        font-size: 0.85rem;
        padding: 8px;
    }

    .filter-date.compact {
        flex: 1;
        min-width: 100px;
        font-size: 0.85rem;
    }

    .date-label {
        font-size: 0.8rem;
        min-width: fit-content;
    }
}



/*  */
/* VARIANTE 2: TIMELINE (chronological flow)                                   */
/*  */

.timeline-container {
    position: relative;
    padding-left: 40px;
}

.timeline-container::before {
    content: '';
    position: absolute;
    left: 12px;
    top: 0;
    bottom: 0;
    width: 2px;
    background: var(--border-color);
}

.timeline-item {
    position: relative;
    padding: 16px 20px;
    margin-bottom: 16px;
    background: var(--bg-card);
    border: 1px solid var(--border-color);
    border-radius: var(--border-radius-md);
    cursor: pointer;
    transition: all var(--transition-fast);
}

.timeline-item::before {
    content: '';
    position: absolute;
    left: -34px;
    top: 20px;
    width: 12px;
    height: 12px;
    border-radius: 50%;
    background: var(--accent-primary);
    border: 3px solid var(--bg-primary);
}

.timeline-item.practice::before {
    background: var(--accent-primary);
}

.timeline-item.qualify::before {
    background: var(--accent-warning);
}

.timeline-item.race::before {
    background: var(--accent-success);
}

.timeline-item:hover {
    border-color: var(--accent-primary);
    transform: translateX(4px);
}

.timeline-header {
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    margin-bottom: 8px;
}

.timeline-time {
    font-size: 0.8rem;
    color: var(--text-muted);
    font-family: var(--font-mono);
}

.timeline-type {
    font-weight: 700;
    color: var(--text-primary);
    text-transform: uppercase;
    font-size: 0.9rem;
}

.timeline-track {
    color: var(--accent-primary);
    font-weight: 500;
    font-size: 0.9rem;
}

.timeline-details {
    display: flex;
    gap: 16px;
    font-size: 0.8rem;
    color: var(--text-secondary);
    margin-top: 8px;
}

.timeline-car {
    color: var(--text-muted);
    font-size: 0.8rem;
}

/*  */
/* VARIANTE 3: CARDS (filtered cards)                                          */
/*  */

.cards-filters {
    display: flex;
    gap: 12px;
    margin-bottom: 20px;
}

.cards-filters .filter-select {
    padding: 10px 14px;
    background: var(--bg-card);
    border: 1px solid var(--border-color);
    border-radius: var(--border-radius-sm);
    color: var(--text-primary);
    font-size: 0.85rem;
}

.cards-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
    gap: 16px;
}

.session-card-v3 {
    background: var(--bg-card);
    border: 1px solid var(--border-color);
    border-radius: var(--border-radius-lg);
    overflow: hidden;
    cursor: pointer;
    transition: all var(--transition-fast);
}

.session-card-v3:hover {
    border-color: var(--accent-primary);
    transform: translateY(-2px);
    box-shadow: 0 8px 25px rgba(0, 0, 0, 0.3);
}

.card-header {
    padding: 16px;
    background: rgba(99, 102, 241, 0.05);
    border-bottom: 1px solid var(--border-color);
}

.card-track {
    font-family: var(--font-display);
    font-size: 1rem;
    font-weight: 700;
    color: var(--text-primary);
}

.card-date {
    font-size: 0.8rem;
    color: var(--text-muted);
    margin-top: 2px;
}

.card-type {
    display: inline-block;
    padding: 4px 10px;
    margin-top: 8px;
    font-size: 0.7rem;
    font-weight: 600;
    text-transform: uppercase;
    border-radius: 4px;
}

.card-type.practice {
    background: rgba(99, 102, 241, 0.15);
    color: var(--accent-primary);
}

.card-type.qualify {
    background: rgba(245, 158, 11, 0.15);
    color: var(--accent-warning);
}

.card-type.race {
    background: rgba(16, 185, 129, 0.15);
    color: var(--accent-success);
}

.card-car {
    font-size: 0.85rem;
    color: var(--text-secondary);
    margin-top: 4px;
}

.card-body {
    padding: 16px;
}

.card-stats {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 12px;
}

.card-stat {
    display: flex;
    flex-direction: column;
}

.card-stat-label {
    font-size: 0.65rem;
    color: var(--text-muted);
    text-transform: uppercase;
}

.card-stat-value {
    font-size: 0.95rem;
    font-weight: 600;
    color: var(--text-primary);
}

.card-stat-value.best {
    color: var(--accent-success);
}

.card-footer {
    padding: 12px 16px;
    border-top: 1px solid var(--border-color);
    text-align: center;
}

.card-open-btn {
    padding: 8px 20px;
    background: transparent;
    border: 1px solid var(--accent-primary);
    border-radius: var(--border-radius-sm);
    color: var(--accent-primary);
    font-size: 0.8rem;
    font-weight: 500;
    cursor: pointer;
    transition: all var(--transition-fast);
}

.card-open-btn:hover {
    background: var(--accent-primary);
    color: white;
}

/*  */
/* OVERVIEW PAGE VARIANTS                                                       */
/*  */

/* Variant Switcher */
.variant-controls {
    display: flex;
    justify-content: center;
    gap: 12px;
    margin-bottom: 24px;
    padding: 12px;
    background: var(--bg-card);
    border: 1px solid var(--border-color);
    border-radius: var(--border-radius-lg);
}

.btn-variant {
    padding: 8px 16px;
    background: transparent;
    border: 1px solid var(--border-color);
    border-radius: var(--border-radius-sm);
    color: var(--text-secondary);
    font-size: 0.8rem;
    cursor: pointer;
    transition: all 0.2s;
}

.btn-variant.active,
.btn-variant:hover {
    background: var(--accent-primary);
    color: white;
    border-color: var(--accent-primary);
}

/* Layout System */
.overview-variant {
    display: none;
    width: 100%;
}

.overview-variant.active {
    display: block;
    animation: fadeIn 0.3s ease;
}

.grid-12 {
    display: grid;
    grid-template-columns: repeat(12, 1fr);
    gap: 16px;
}

.col-12 {
    grid-column: span 12;
}

.col-7 {
    grid-column: span 7;
}

.col-6 {
    grid-column: span 6;
}

.col-5 {
    grid-column: span 5;
}

/* Components Styling Updates */
.overview-section {
    background: var(--bg-card);
    border: 1px solid var(--border-color);
    border-radius: var(--border-radius-lg);
    padding: 16px;
}

.section-hero {
    /* For V2 Activity Hero */
}

.section-hero .chart-container {
    height: 220px;
    /* Taller chart */
}

/* KPI STRIP (V3) */
.kpi-strip {
    display: grid;
    grid-template-columns: repeat(5, 1fr);
    gap: 12px;
    margin-bottom: 16px;
}

.kpi-card-mini {
    background: var(--bg-card);
    border: 1px solid var(--border-color);
    border-radius: var(--border-radius-md);
    padding: 12px;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    text-align: center;
    height: 80px;
}

.kpi-mini-label {
    font-size: 0.7rem;
    color: var(--text-muted);
    text-transform: uppercase;
    margin-bottom: 4px;
}

.kpi-mini-value {
    font-size: 1.2rem;
    font-weight: 700;
    color: var(--text-primary);
}

/* Responsive */
@media (max-width: 1200px) {

    /* Tablet behavior */
    .overview-grid-v1 .box-attivita,
    .overview-grid-v1 .box-qualita {
        grid-column: span 12;
    }

    .col-7,
    .col-6,
    .col-5 {
        grid-column: span 12 !important;
    }
}

@media (max-width: 768px) {
    .grid-12 {
        display: flex;
        flex-direction: column;
        gap: 12px;
    }

    .kpi-strip {
        grid-template-columns: repeat(2, 1fr);
    }

    .kpi-strip .kpi-card-mini:last-child {
        grid-column: span 2;
    }

    .actions-section {
        flex-direction: column;
    }

    .btn-action,
    .btn-action-secondary {
        width: 100%;
    }

    /* Wrap KPI row on mobile */
    .attivita-kpi-row {
        flex-wrap: wrap;
    }

    .attivita-kpi-item {
        flex: 1 1 45%;
        min-width: 140px;
    }
}


/* ===== Quality Box Variants ===== */
.box-qualita {
    display: flex;
    flex-direction: column;
}

.section-header-row {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 16px;
    width: 100%;
}

.quality-switcher {
    display: flex;
    gap: 4px;
    background: rgba(0, 0, 0, 0.2);
    padding: 3px;
    border-radius: 6px;
}

.q-btn {
    background: transparent;
    border: none;
    color: var(--text-muted);
    padding: 4px 8px;
    font-size: 0.75rem;
    border-radius: 4px;
    cursor: pointer;
    font-weight: 600;
    transition: all 0.2s;
}

.q-btn:hover {
    color: white;
    background: rgba(255, 255, 255, 0.05);
}

.q-btn.active {
    background: var(--accent-primary);
    color: white;
    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
}

.quality-variants-content {
    flex: 1;
    position: relative;
    min-height: 120px;
}

.q-variant {
    display: none;
    width: 100%;
    animation: fadeIn 0.3s ease;
}

.q-variant.active {
    display: block;
}

@keyframes fadeIn {
    from {
        opacity: 0;
        transform: translateY(5px);
    }

    to {
        opacity: 1;
        transform: translateY(0);
    }
}

/* Variant A: Top Bars */
.variant-header {
    font-size: 0.8rem;
    text-transform: uppercase;
    letter-spacing: 0.05em;
    color: var(--text-secondary);
    margin-bottom: 12px;
}

.tracks-bars-container {
    display: flex;
    flex-direction: column;
    gap: 10px;
}

.track-bar-row {
    display: flex;
    flex-direction: column;
    gap: 4px;
    cursor: pointer;
    padding: 4px 6px;
    border-radius: 6px;
    transition: background 0.2s;
}

.track-bar-row:hover {
    background: rgba(255, 255, 255, 0.03);
}

.track-info-line {
    display: flex;
    justify-content: space-between;
    font-size: 0.85rem;
    font-weight: 500;
    color: var(--text-primary);
}

.track-stats-minor {
    font-size: 0.75rem;
    color: var(--text-muted);
}

.track-progress-bg {
    height: 6px;
    background: rgba(255, 255, 255, 0.08);
    border-radius: 3px;
    overflow: hidden;
}

.track-progress-fill {
    height: 100%;
    width: 0;
    border-radius: 3px;
    transition: width 0.6s cubic-bezier(0.2, 0.8, 0.2, 1);
}

.variant-footer {
    font-size: 0.8rem;
    color: var(--accent-primary);
    margin-top: 12px;
    cursor: pointer;
    text-align: right;
}

.variant-footer:hover {
    text-decoration: underline;
}

/* Variant B: Treemap */
.treemap-container {
    display: flex;
    flex-wrap: wrap;
    align-content: flex-start;
    gap: 2px;
    height: 180px;
    border-radius: 8px;
    overflow: hidden;
    background: rgba(255, 255, 255, 0.02);
}

.treemap-item {
    position: relative;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    flex-grow: 1;
    min-width: 60px;
    min-height: 40px;
    padding: 4px;
    transition: all 0.2s;
    cursor: pointer;
    border: 1px solid rgba(0, 0, 0, 0.1);
    background-size: cover;
    background-position: center;
}

.treemap-item::before {
    content: '';
    position: absolute;
    inset: 0;
    background: inherit;
    filter: brightness(0.8);
    z-index: 0;
}

.treemap-item:hover {
    z-index: 10;
    transform: scale(1.05);
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.5);
    border-color: rgba(255, 255, 255, 0.5);
}

.treemap-label {
    position: relative;
    z-index: 1;
    font-size: 0.75rem;
    font-weight: 700;
    color: white;
    text-align: center;
    text-shadow: 0 1px 3px rgba(0, 0, 0, 0.8);
    line-height: 1.1;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    max-width: 100%;
}

.treemap-value {
    position: relative;
    z-index: 1;
    font-size: 0.7rem;
    color: rgba(255, 255, 255, 0.9);
    text-shadow: 0 1px 2px rgba(0, 0, 0, 0.8);
    margin-top: 2px;
}

/* Variant C: Table */
.tracks-table-container {
    display: flex;
    flex-direction: column;
}

.table-header,
.table-row {
    display: grid;
    grid-template-columns: 2fr 1fr 1fr 1.5fr;
    gap: 8px;
    padding: 6px 4px;
    font-size: 0.8rem;
    align-items: center;
}

.table-header {
    color: var(--text-muted);
    border-bottom: 1px solid var(--border-color);
    font-size: 0.7rem;
    text-transform: uppercase;
    letter-spacing: 0.05em;
}

.table-row {
    border-bottom: 1px solid rgba(255, 255, 255, 0.03);
    transition: background 0.2s;
    cursor: pointer;
}

.table-row:hover {
    background: rgba(255, 255, 255, 0.03);
}

.text-right {
    text-align: right;
}

.sparkline-cell svg {
    width: 100%;
    height: 24px;
    display: block;
    overflow: visible;
}

.sparkline-path {
    fill: none;
    stroke: var(--accent-success);
    stroke-width: 2px;
    stroke-linecap: round;
    vector-effect: non-scaling-stroke;
}

.stat-best {
    font-family: monospace;
    color: var(--text-secondary);
}


/* ===== FOCUS DI GUIDA Box ===== */
.box-focus {
    display: flex;
    flex-direction: column;
    gap: 24px;
}

.header-text-group {
    display: flex;
    flex-direction: column;
}

.section-subtitle {
    font-size: 0.75rem;
    color: var(--text-secondary);
    margin-top: -2px;
}

/* Focus Switcher */
.focus-switcher {
    display: flex;
    gap: 4px;
    background: rgba(0, 0, 0, 0.2);
    padding: 3px;
    border-radius: 6px;
    align-self: flex-start;
}

.f-btn {
    background: transparent;
    border: none;
    color: var(--text-muted);
    padding: 4px 8px;
    font-size: 0.75rem;
    border-radius: 4px;
    cursor: pointer;
    font-weight: 600;
    transition: all 0.2s;
}

.f-btn:hover {
    color: white;
    background: rgba(255, 255, 255, 0.05);
}

.f-btn.active {
    background: var(--accent-primary);
    color: white;
    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
}

/* Clean Section */
.focus-clean-section {
    display: flex;
    flex-direction: column;
    gap: 8px;
}

.clean-header-row {
    display: flex;
    align-items: baseline;
    gap: 12px;
}

.clean-percent {
    font-size: 1.8rem;
    font-weight: 700;
    color: var(--accent-primary);
    letter-spacing: -1px;
    line-height: 1;
}

.clean-label {
    font-size: 0.75rem;
    font-weight: 600;
    color: var(--text-secondary);
    text-transform: uppercase;
    letter-spacing: 0.05em;
}

.clean-bar-container {
    display: flex;
    align-items: center;
    gap: 12px;
}

.clean-bar-bg {
    flex: 1;
    height: 10px;
    background: rgba(255, 255, 255, 0.08);
    border-radius: 5px;
    overflow: hidden;
}

.clean-bar-fill {
    height: 100%;
    background: var(--accent-primary);
    border-radius: 5px;
    transition: width 0.6s ease;
}

.clean-stats {
    font-size: 0.8rem;
    color: var(--text-muted);
    white-space: nowrap;
}

/* Tracks Section */
.focus-tracks-section {
    display: flex;
    flex-direction: column;
    gap: 12px;
    border-top: 1px solid var(--border-color);
    padding-top: 16px;
    margin-top: 8px;
}

.subsection-title {
    font-size: 0.75rem;
    font-weight: 700;
    color: var(--text-secondary);
    text-transform: uppercase;
    letter-spacing: 0.05em;
    margin-bottom: 8px;
}

.f-variant {
    display: none;
    animation: fadeIn 0.3s ease;
}

.f-variant.active {
    display: block;
}

/* V1: Main (Bars) */
.tracks-main-container {
    display: flex;
    flex-direction: column;
    gap: 12px;
}

.focus-track-row {
    display: flex;
    flex-direction: column;
    gap: 4px;
    cursor: pointer;
}

.focus-track-bar-bg {
    height: 8px;
    background: rgba(255, 255, 255, 0.08);
    border-radius: 4px;
    overflow: hidden;
    width: 100%;
}

.focus-track-bar-fill {
    height: 100%;
    width: 0;
    background: var(--accent-primary);
    border-radius: 4px;
    transition: width 0.5s ease;
}

.focus-track-info {
    display: flex;
    justify-content: space-between;
    font-size: 0.9rem;
    font-weight: 500;
    color: var(--text-primary);
}

.focus-track-mins {
    color: var(--text-secondary);
    font-size: 0.8rem;
}

.focus-track-row:hover .focus-track-bar-fill {
    filter: brightness(1.2);
}

/* V2: Storage (Single Bar) */
.storage-wrapper {
    display: flex;
    flex-direction: column;
    gap: 12px;
}

.tracks-storage-bar {
    display: flex;
    height: 24px;
    background: rgba(255, 255, 255, 0.05);
    border-radius: 6px;
    overflow: hidden;
    width: 100%;
}

.storage-segment {
    height: 100%;
    transition: width 0.5s ease;
    position: relative;
    cursor: pointer;
}

.storage-segment:hover {
    filter: brightness(1.2);
}

.storage-segment:not(:last-child) {
    border-right: 2px solid var(--bg-card);
}

.storage-legend {
    display: flex;
    flex-wrap: wrap;
    gap: 12px;
    font-size: 0.75rem;
    color: var(--text-secondary);
}

.storage-legend-item {
    display: flex;
    align-items: center;
    gap: 6px;
}

.legend-dot {
    width: 8px;
    height: 8px;
    border-radius: 50%;
}

.storage-total-label {
    font-size: 0.8rem;
    color: var(--text-muted);
    text-align: right;
    margin-top: 8px;
}

/* V3: List (Inline) */
.tracks-list-container {
    display: flex;
    flex-direction: column;
    gap: 8px;
}

.track-list-item {
    display: flex;
    align-items: center;
    gap: 12px;
    font-size: 0.85rem;
    cursor: pointer;
    padding: 4px 0;
    border-bottom: 1px solid rgba(255, 255, 255, 0.02);
}

.track-list-name {
    width: 80px;
    font-weight: 500;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

.track-list-bar-bg {
    flex: 1;
    height: 6px;
    background: rgba(255, 255, 255, 0.08);
    border-radius: 3px;
    overflow: hidden;
}

.track-list-bar-fill {
    height: 100%;
    background: var(--accent-primary);
    border-radius: 3px;
    transition: width 0.5s ease;
}

.track-list-val {
    width: 60px;
    text-align: right;
    color: var(--text-secondary);
    font-size: 0.8rem;
}


/* ===== NEW LAYOUT (Grid 50/50) ===== */
.overview-layout {
    display: flex;
    gap: 24px;
    align-items: stretch;
    /* Align heights */
}

.layout-col-left,
.layout-col-right {
    flex: 1;
    display: flex;
    flex-direction: column;
    gap: 20px;
    min-width: 0;
    /* Prevent flex overflow */
}

/* Heights */
.box-attivita,
.box-focus {
    flex: 1;
    /* Make them expand to fill column height if needed */
    display: flex;
    flex-direction: column;
}

/* Activity Chart Extended Height */
.extended-height {
    height: 240px !important;
    /* Force height increase */
    min-height: 240px;
}

.chart-header-compact {
    margin-bottom: 8px;
    /* Less space */
}

.attivita-chart-section {
    flex: 1;
    /* Expand chart section to fill space */
    display: flex;
    flex-direction: column;
}

/* CTA Last Session */
.layout-cta-row {
    display: flex;
    justify-content: flex-end;
    /* Align right */
}

.cta-last-session {
    /* Style closer to secondary action but visible */
    background: rgba(255, 255, 255, 0.05);
    border: 1px solid rgba(255, 255, 255, 0.1);
    color: var(--text-secondary);
    padding: 8px 16px;
    border-radius: 6px;
    font-size: 0.85rem;
    cursor: pointer;
    transition: all 0.2s;
}

.cta-last-session:hover {
    background: rgba(255, 255, 255, 0.1);
    color: white;
    border-color: rgba(255, 255, 255, 0.2);
}

/* Responsive for Overview Layout */
@media (max-width: 1024px) {
    .overview-layout {
        flex-direction: column;
    }

    .layout-col-left,
    .layout-col-right {
        width: 100%;
        min-width: unset;
    }
}

/* Focus Box Refinements */
.gradient-fill {
    transition: width 0.6s ease, background-color 0.3s ease;
}


/* V3 Scroll */
.tracks-list-container {
    max-height: 180px;
    overflow-y: auto;
    padding-right: 4px;
}

.tracks-list-container::-webkit-scrollbar {
    width: 4px;
}

.tracks-list-container::-webkit-scrollbar-thumb {
    background: rgba(255, 255, 255, 0.2);
    border-radius: 2px;
}


/* Fix Splash Hidden State */
.splash-overlay.hidden {
    display: none !important;
    pointer-events: none;
}


/* KPI Boxes Restoration */
.attivita-kpi-row {
    display: flex;
    gap: 12px;
    margin-bottom: 20px;
}

.attivita-kpi-item {
    flex: 1;
    background: rgba(255, 255, 255, 0.03);
    border: 1px solid rgba(255, 255, 255, 0.08);
    border-radius: 12px;
    padding: 12px 8px;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    text-align: center;
    transition: background 0.2s;
}

.attivita-kpi-item:hover {
    background: rgba(255, 255, 255, 0.05);
}

.attivita-kpi-item .kpi-value {
    font-size: 1.4rem;
    font-weight: 700;
    color: var(--text-primary);
    line-height: 1.2;
}

.attivita-kpi-item .kpi-unit {
    font-size: 0.75rem;
    color: var(--text-secondary);
    font-weight: 500;
    margin-top: 4px;
    text-transform: uppercase;
    letter-spacing: 0.05em;
}


/* ===== Focus Box Refinements (Sintesi/Dettaglio) ===== */

/* Header & Toggles */
.focus-header-row {
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    margin-bottom: 25px;
    /* Spacing from title to content */
}

/* Segmented Control - Top Right */
.focus-toggle-group {
    display: flex;
    background: rgba(255, 255, 255, 0.05);
    border-radius: 8px;
    padding: 3px;
    border: 1px solid rgba(255, 255, 255, 0.08);
}

.toggle-segment {
    background: transparent;
    border: none;
    color: var(--text-secondary);
    padding: 6px 14px;
    font-size: 0.7rem;
    font-weight: 600;
    text-transform: uppercase;
    border-radius: 6px;
    cursor: pointer;
    transition: all 0.2s ease;
    letter-spacing: 0.05em;
}

.toggle-segment.active {
    background: rgba(255, 255, 255, 0.1);
    color: var(--text-primary);
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.2);
}

.toggle-segment:hover:not(.active) {
    color: var(--text-primary);
    background: rgba(255, 255, 255, 0.03);
}

/* Clean Laps Gradient Bar */
.focus-clean-section {
    margin-bottom: 24px;
}

.clean-header-row {
    display: flex;
    align-items: baseline;
    gap: 12px;
    margin-bottom: 8px;
}

.clean-percent {
    font-size: 1.8rem;
    font-weight: 700;
    line-height: 1;
    /* Color will be set by JS or gradient text? User said 'Gradient CSS' for bar. */
    /* Let's keep text white or matching logic. */
    color: var(--text-primary);
}

.clean-label {
    font-size: 0.75rem;
    text-transform: uppercase;
    color: var(--text-secondary);
    font-weight: 600;
    letter-spacing: 0.1em;
}

.focus-clean-bar-bg {
    height: 10px;
    background: rgba(255, 255, 255, 0.06);
    border-radius: 10px;
    overflow: hidden;
    position: relative;
    margin-bottom: 6px;
}

.focus-clean-bar-fill.gradient-fill {
    height: 100%;
    /* Red -> Orange -> Yellow -> Green Gradient */
    background: linear-gradient(90deg,
            #ef4444 0%,
            #f97316 35%,
            #eab308 65%,
            #22c55e 100%);
    border-radius: 10px;
    transition: width 0.8s cubic-bezier(0.4, 0, 0.2, 1);
}

.clean-stats {
    text-align: right;
    font-size: 0.8rem;
    color: var(--text-muted);
}

.focus-divider {
    height: 1px;
    background: rgba(255, 255, 255, 0.05);
    margin: 20px 0;
}

/* Storage Bar Container Styles (V2/Sintesi) */
.storage-bar-container {
    height: 16px;
    /* Slightly taller for visibility */
    display: flex;
    border-radius: 4px;
    overflow: hidden;
    margin-bottom: 12px;
}

/* Tracks List (Dettaglio) override */
.tracks-list-container {
    max-height: 240px;
    /* Max 7 rows approx */
}


/* Refined Layout Spacing */
.focus-clean-section {
    margin-bottom: 12px !important;
}

.focus-divider {
    margin: 12px 0 !important;
}

/* Focus Box Footer CTA */
.focus-footer-cta {
    margin-top: auto;
    padding-top: 16px;
    display: flex;
    justify-content: flex-end;
}

/* Ensure content fills height for auto margin to work */
.box-focus {
    display: flex;
    flex-direction: column;
}

.box-focus .focus-content {
    flex: 1;
    display: flex;
    flex-direction: column;
}

/* CTA Button Styling (Purple/Primary) */
.cta-last-session {
    background: var(--accent-primary) !important;
    color: #ffffff !important;
    border: none !important;
    padding: 10px 20px;
    font-weight: 600;
    font-size: 0.85rem;
    box-shadow: 0 4px 12px rgba(99, 102, 241, 0.4);
    letter-spacing: 0.05em;
}

.cta-last-session:hover {
    background: var(--accent-secondary) !important;
    transform: translateY(-2px);
    box-shadow: 0 6px 16px rgba(99, 102, 241, 0.6);
}


/* Focus Box Variants Toggling */
.f-variant,
.f-variant-cars {
    display: none;
}

.f-variant.active,
.f-variant-cars.active {
    display: block;
    animation: fadeIn 0.3s ease;
}

@keyframes fadeIn {
    from {
        opacity: 0;
        transform: translateY(2px);
    }

    to {
        opacity: 1;
        transform: translateY(0);
    }
}

/* Cars Header same as Piste */
.cars-header-row {
    margin-bottom: 12px;
}


/* Focus Box Fluid Scroll Layout */
.box-focus {
    display: flex;
    flex-direction: column;
    height: 100%;
    /* Ensure it fills parent grid cell */
    min-height: 0;
}

.box-focus .focus-content {
    flex: 1;
    display: flex;
    flex-direction: column;
    overflow: hidden;
    /* Prevent parent scroll */
    min-height: 0;
}

/* Dynamic Wrapper - Scrollable */
.focus-dynamic-content {
    flex: 1;
    overflow-y: auto;
    min-height: 0;
    padding-right: 6px;
    /* Space for scrollbar */
    /* Custom Scrollbar */
    scrollbar-width: thin;
    scrollbar-color: rgba(255, 255, 255, 0.2) transparent;
}

.focus-dynamic-content::-webkit-scrollbar {
    width: 4px;
}

.focus-dynamic-content::-webkit-scrollbar-track {
    background: transparent;
}

.focus-dynamic-content::-webkit-scrollbar-thumb {
    background-color: rgba(255, 255, 255, 0.2);
    border-radius: 4px;
}

.focus-dynamic-content::-webkit-scrollbar-thumb:hover {
    background-color: rgba(255, 255, 255, 0.3);
}

/* Ensure Header & Footer are outside scroll */
.focus-header-row,
.focus-clean-section,
.focus-footer-cta {
    flex-shrink: 0;
}


/* Spacing compensation for removed divider */
.focus-cars-section {
    margin-bottom: 25px;
}


/* ===== Session Type Bar & Chips (Refined) ===== */
.session-types-section {
    margin-top: auto;
    width: 100%;
}

.session-types-title {
    display: block;
    font-size: 0.8rem;
    color: var(--text-secondary);
    margin-bottom: 8px;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.05em;
}

/* Bar aligned with Focus Box (Storage Bar) */
.session-stacked-bar {
    width: 100%;
    height: 16px;
    /* Increased to match Focus Box */
    background: rgba(255, 255, 255, 0.05);
    border-radius: 6px;
    display: flex;
    overflow: hidden;
    margin-bottom: 12px;

}

.stacked-segment {
    height: 100%;
    transition: width 0.3s ease;
}

.stacked-segment:not(:last-child) {
    border-right: 2px solid var(--bg-card);
}

/* Colors */
.stacked-segment.practice {
    background-color: #3b82f6;
}

.stacked-segment.qualy {
    background-color: #eab308;
}

.stacked-segment.race {
    background-color: #ef4444;
}

/* Chips Styling (Rectangular, Bordered) */
.session-chips {
    display: flex;
    flex-wrap: wrap;
    /* Allow wrapping */
    gap: 8px;
}

.session-chip {
    display: flex;
    align-items: center;
    gap: 8px;
    font-size: 0.75rem;
    padding: 5px 10px;
    border-radius: 6px;
    /* Match bar radius */
    background: rgba(0, 0, 0, 0.2);
    /* Very dark/transparent */
    border: 1px solid transparent;
    transition: all 0.2s;
    cursor: default;
    color: var(--text-secondary);
    width: fit-content;
    /* Ensure compact width */
}

.session-chip:hover {
    background: rgba(255, 255, 255, 0.05);
}

/* Chip Colors (Border) */
.session-chip.practice {
    border-color: #3b82f6;
}

.session-chip.qualy {
    border-color: #eab308;
}

.session-chip.race {
    border-color: #ef4444;
}

/* Chip Typography Hierarchy */
.chip-type {
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 0.05em;
}

.session-chip.practice .chip-type {
    color: #60a5fa;
}

.session-chip.qualy .chip-type {
    color: #facc15;
}

.session-chip.race .chip-type {
    color: #f87171;
}

.chip-details {
    color: var(--text-primary);
    font-weight: 500;
}

.chip-separator {
    color: var(--text-muted);
    margin: 0 4px;
}

/* =========================================
   SESSION LAYOUT VARIANTS & TOGGLE
   ========================================= */

/* --- 1. Layout Toggle Switcher --- */
.layout-toggle-group {
    display: flex;
    gap: 4px;
    margin-left: auto;
    /* Push to right in flex container */
    background: var(--bg-card);
    padding: 4px;
    border-radius: 6px;
    border: 1px solid var(--border-color);
}

.layout-btn {
    padding: 4px 10px;
    font-size: 0.75rem;
    font-weight: 600;
    color: var(--text-muted);
    background: transparent;
    border: none;
    border-radius: 4px;
    cursor: pointer;
    transition: all 0.2s;
    text-transform: uppercase;
}

.layout-btn:hover {
    color: var(--text-secondary);
    background: rgba(255, 255, 255, 0.05);
}

.layout-btn.active {
    color: var(--text-primary);
    background: var(--bg-elevated);
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.2);
}

/* --- 2. Simplified Daily Header --- */
.giornata-header.simplified {
    flex-direction: column;
    align-items: flex-start;
    padding: 12px 20px;


    margin-bottom: 0;
}

.giornata-date-row .date-text {
    font-size: 0.95rem;
    font-weight: 700;
    color: var(--text-primary);
    font-family: var(--font-display);
    letter-spacing: 0.5px;
}

.giornata-stats-row {
    font-size: 0.75rem;
    color: var(--text-muted);
    margin-top: 2px;
}

/* --- 3. Base Session Card (Strict Wireframe Grid) --- */
.session-card {
    display: grid;
    /* DESKTOP (>1200px): Strict Single Row */
    /* [Type] [Time] [Track] [Car] [Metrics] [Action] */
    grid-template-columns: 90px 70px 0.5fr 1.2fr 1fr auto;
    grid-template-areas: "type time track car metrics action";
    align-items: center;
    gap: 0;
    /* Gaps handled by padding/borders internally to simulate dividers */
    padding: 0 16px;
    background: var(--bg-card);
    transition: background 0.15s ease;
    text-decoration: none;
    cursor: pointer;
    border-radius: 0;
    margin-bottom: 0;
    font-size: 0.9rem;
    height: 64px;
    /* Fixed height guideline (soft) */
}

.session-card:hover {
    background: var(--bg-elevated);
}

/* --- CELLS --- */
.sess-type {
    grid-area: type;
    padding: 0 12px 0 0;

    height: 100%;
    display: flex;
    align-items: center;
}

.sess-time {
    grid-area: time;
    padding: 0 12px;

    height: 100%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-family: monospace;
    color: var(--text-secondary);
}

.sess-track {
    grid-area: track;
    padding: 0 12px;

    height: 100%;
    display: flex;
    align-items: center;
    font-weight: 700;
    color: var(--text-primary);
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

.sess-car {
    grid-area: car;
    padding: 0 12px;

    height: 100%;
    display: flex;
    align-items: center;
    color: var(--text-muted);
    font-size: 0.85rem;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

/* METRICS CONTAINER */
.sess-metrics {
    grid-area: metrics;
    padding: 0 16px;
    height: 100%;
    display: flex;
    align-items: center;
    gap: 12px;
    width: 100%;
}

.metric-group {
    display: flex;
    align-items: center;
    gap: 6px;
    white-space: nowrap;
}

.metric-group .lbl {
    color: var(--text-muted);
    font-size: 0.8rem;
    text-transform: uppercase;
}

.metric-group .val {
    color: var(--text-primary);
    font-weight: 600;
    font-size: 0.9rem;
}

.metric-divider {
    width: 1px;
    height: 16px;
    background: rgba(255, 255, 255, 0.1);
}

.metric-bar {
    flex: 1;
    min-width: 60px;
    max-width: 120px;
}

.metric-bar .mini-validity-bar {
    width: 100%;
    height: 6px;
    background: rgba(255, 255, 255, 0.1);
    border-radius: 3px;
    overflow: hidden;
}

.metric-bar .fill {
    height: 100%;
    border-radius: 3px;
}

.metric-best {
    display: flex;
    align-items: center;
    gap: 8px;
    margin-left: auto;
}

/* Push to right of metrics block */
.metric-best .lbl {
    color: var(--text-muted);
    font-size: 0.75rem;
    font-weight: 700;
    text-transform: uppercase;
}

.metric-best .val {
    font-family: monospace;
    font-weight: 700;
    color: var(--text-primary);
}

.metric-best .val.highlight-best {
    color: var(--accent-success);
}


/* ACTION */
.sess-action {
    grid-area: action;
    padding-left: 12px;

    height: 100%;
    display: flex;
    align-items: center;
}

.session-action-btn {
    padding: 4px 12px;
    background: transparent;
    border: 1px solid var(--border-color);
    color: var(--text-secondary);
    border-radius: 4px;
    font-size: 0.75rem;
    cursor: pointer;
    transition: all 0.2s;
}

.session-action-btn:hover {
    background: var(--accent-primary);
    color: white;
    border-color: var(--accent-primary);
}

/* CHIPS */
.session-chip {
    padding: 4px 7px 2px;
    border-radius: 4px;
    font-size: 0.7rem;
    font-weight: 700;
    text-transform: uppercase;
    display: inline-block;
    background: transparent;
    border: 1px solid currentColor;
}

.chip-practice {
    color: #60a5fa;
    border-color: rgba(96, 165, 250, 0.3);
    background: rgba(96, 165, 250, 0.1) !important;
}

.chip-qualify {
    color: #facc15;
    border-color: rgba(250, 204, 21, 0.3);
    background: rgba(250, 204, 21, 0.1) !important;
}

.chip-race {
    color: #f87171;
    border-color: rgba(248, 113, 113, 0.3);
    background: rgba(248, 113, 113, 0.1) !important;
}

/* Common Cell Styles */
.sc-cell {
    display: flex;
    align-items: center;
    white-space: nowrap;
}

.sc-time {
    font-family: monospace;
    font-size: 0.9rem;
    color: var(--text-secondary);
}

.sc-track-car {
    gap: 8px;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
}

.sc-track {
    font-weight: 700;
    color: var(--text-primary);
}

.sc-car {
    color: var(--text-muted);
    font-size: 0.9rem;
}

.sc-separator {
    color: var(--text-muted);
    opacity: 0.5;
    margin: 0 4px;
}

.sc-chip {
    min-width: 60px;
}

.sc-chip span.session-chip {
    padding: 2px 8px;
    /* Slightly more padding */
    border-radius: 4px;
    font-size: 0.7rem;
    /* Slightly larger text */
    font-weight: 700;
    text-transform: uppercase;
    display: inline-block;
    background: transparent;
    border: 1px solid currentColor;
    width: auto;
}

/* Specific chip rules */
.chip-practice {
    color: #60a5fa;
    border-color: rgba(96, 165, 250, 0.3);
    background: rgba(96, 165, 250, 0.1) !important;
}

.chip-qualify {
    color: #facc15;
    border-color: rgba(250, 204, 21, 0.3);
    background: rgba(250, 204, 21, 0.1) !important;
}

.chip-race {
    color: #f87171;
    border-color: rgba(248, 113, 113, 0.3);
    background: rgba(248, 113, 113, 0.1) !important;
}

.sc-stats {
    gap: 16px;
    font-size: 0.85rem;
    color: var(--text-secondary);
}

/* Increased gap */
.sc-stats strong {
    color: var(--text-primary);
    font-weight: 600;
}

.sc-bar .mini-validity-bar {
    width: 100%;
    height: 5px;
    background: rgba(255, 255, 255, 0.1);
    border-radius: 3px;
    overflow: hidden;
}

.sc-bar .fill {
    height: 100%;
    border-radius: 3px;
}

.sc-best {
    gap: 10px;
    justify-content: flex-end;
}

.sc-best .sc-label {
    font-size: 0.65rem;
    color: var(--text-muted);
    font-weight: 700;
}

.sc-value {
    font-family: monospace;
    font-weight: 600;
    color: var(--text-primary);
}

.sc-value.highlight-best {
    color: var(--accent-success);
}

/* --- TABLET & MOBILE (< 1200px) --- */
@media (max-width: 1199px) {

    /* SHARED MOBILE/TABLET BASE: CARD CONTAINER */
    .session-card {
        display: grid;
        grid-template-columns: 1fr auto;
        grid-template-areas:
            "type time"
            "track track"
            "car car"
            "metrics metrics"
            "footer footer";
        height: auto;
        padding: 16px;
        gap: 0;
        align-items: center;
        position: relative;
    }

    /* BLOCK 1: HEADER (Row 1) */
    .sess-type {
        grid-area: type;
        width: auto;
        border: none;
        padding: 0;
        height: auto;
        display: inline-flex;
        margin-bottom: 8px;
        /* Spacing below chip */
    }

    .sess-time {
        grid-area: time;
        width: auto;
        border: none;
        padding: 0;
        height: auto;
        display: inline-block;
        color: white;
        font-weight: 700;
        font-family: var(--font-display);
        justify-self: end;
        /* Align to right edge */
        margin-bottom: 8px;
        /* Align with chip spacing */
    }

    /* BLOCK 2: DETAILS (Row 2 & 3) */
    .sess-track {
        grid-area: track;
        width: 100%;
        border: none;
        padding: 0;
        height: auto;
        display: block;
        font-size: 1.1rem;
        /* Per mockup: larger white text */
        font-weight: 800;
        margin-bottom: 4px;
        margin-top: 0;
        white-space: normal;
        color: white;
    }

    .sess-car {
        grid-area: car;
        width: 100%;
        border: none;
        padding: 0;
        height: auto;
        display: block;
        color: var(--text-muted);
        margin-bottom: 16px;
        /* Space before metrics */
        white-space: normal;
        font-size: 0.9rem;
    }

    /* SEPARATOR REMOVED (Mockup cleanliness) */
    .session-card::after {
        content: none;
    }

    /* BLOCK 3: METRICS (Row 4) */
    .sess-metrics {
        grid-area: metrics;
        padding: 0;
        border: none;
        height: auto;
        display: flex;
        /* Flex row for metrics */
        flex-wrap: nowrap;
        /* Force single line if possible, or wrap controlled */
        align-items: center;
        width: 100%;
        gap: 8px;
        margin-bottom: 16px;
        /* Space before footer */
    }

    /* Metrics Layout: GIRI 6 | VALIDI 100% | BAR */
    .metric-group .lbl {
        font-size: 0.7rem;
        color: #888;
        margin-right: 4px;
        text-transform: uppercase;
    }

    .metric-group .val {
        font-size: 0.9rem;
        color: white;
        font-weight: 700;
    }

    .metric-divider {
        height: 12px;
        margin: 0 4px;
        border-right: 1px solid rgba(255, 255, 255, 0.2);
        width: 0;
        background: none;
    }

    .metric-bar {
        flex: 1;
        /* Take remaining space */
        min-width: 60px;
    }

    .metric-bar .mini-validity-bar {
        height: 6px;
    }

    /* BLOCK 4: FOOTER (Row 5 - Best + Action) */
    /* NOTE: Best is inside .sess-metrics HTML. We need to HACK it layout-wise if we can't change HTML. 
       HTML Structure: .sess-metrics { ... .metric-best } 
       
       Solution: Float .metric-best to new line? 
       Flex Wrap:
       .sess-metrics { flex-wrap: wrap; }
       .metric-best { flex-basis: 100%; order: 10; margin-top: ... }
       
       BUT Action is a sibling of .sess-metrics.
       
       So:
       Row 4 (Metrics): [Giri] [Valid] [Bar]
       Row 5 (Footer): [Best]          [Action]
       
       We need .metric-best to VISUALLY appear in Row 5 Left.
       We need .sess-action (sibling) to appear in Row 5 Right.
       
       If we use CSS Grid on Parent .session-card:
       "metrics" area is Row 4.
       "footer" area is Row 5.
       
       .sess-action -> grid-area: footer; justify-self: end;
       
       How to move .metric-best to footer?
       Technically impossible to move child to parent's grid area without `display: subgrid` (limited support).
       
       Fallback: 
       Make .sess-metrics span Row 4 AND Row 5.
       .sess-metrics { grid-row: 4 / 6; display: flex; flex-wrap: wrap; align-items: flex-end; }
       
       Then .metric-best { width: 50%; }
       .sess-action { grid-area: footer; align-self: end; justify-self: end; z-index: 2; margin-bottom: 2px; }
       
       Actually, simplified approach:
       Let .metric-best stay in metrics block.
       Force metrics block to wrap.
       .metric-best { width: 100%; margin-top: 12px; }
       
       Then Position Action ABSOLUTELY bottom-right?
       No, "Apri" button might overlap long text.
       
       Safe bet: Flex layout for the Footer row simulation.
       Since .sess-action is AFTER .sess-metrics.
       We can float .sess-action right?
       
       Let's try absolute positioning for Action, it's the standard solution for "Card Action Bottom Right" in restrictive HTML.
    */

    .metric-best {
        display: none;
        /* Hide standard best */
    }

    /* Wait, we can't hide it, user wants to see it! */
    /* Re-enable and position */
    .metric-best {
        display: flex;
        position: absolute;
        bottom: 18px;
        left: 16px;
        align-items: center;
        gap: 8px;
    }

    .sess-action {
        grid-area: footer;
        justify-self: end;
        /* If we absolute position best, we can leave action in normal flow? */
        /* No, Action needs to be strictly bottom right. */
    }

    /* The footer row needs height. */


    /* Reserve space for footer */

    .sess-action {

        margin: 0;
        padding: 0;
        border: none;
    }

    .sess-metrics {
        margin-bottom: 0;
    }

    /* No margin needed if footer is absolute */
}

/* STRICT MOBILE TWEAKS (< 768px) */
@media (max-width: 768px) {
    .sess-track {
        font-size: 1.2rem;
    }

    /* Even larger on mobile? */
    .metric-bar {
        min-width: 40px;
    }

    /* Shrink bar to fit logic */
}

/* =========================================
   SESSION DETAIL VIEW (STINT PAGE) - SPEC
   ========================================= */

/* --- 1. Session Header Block --- */
.session-header-block {
    padding: 1.5rem 2rem;
    background: var(--bg-card);
    border-bottom: 1px solid var(--border-color);
    margin-bottom: 0;
}

.session-title-row {
    display: flex;
    align-items: center;
    gap: 1rem;
    margin-bottom: 0.5rem;
}

.session-type-badge {
    display: inline-block;
    padding: 0.25rem 0.75rem;
    font-size: 0.75rem;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 0.05em;
    border-radius: 4px;
    background: rgba(99, 102, 241, 0.15);
    color: var(--accent-primary);
    border: 1px solid rgba(99, 102, 241, 0.3);
}

.session-type-badge.practice {
    background: rgba(96, 165, 250, 0.15);
    color: #60a5fa;
    border-color: rgba(96, 165, 250, 0.3);
}

.session-type-badge.qualify {
    background: rgba(250, 204, 21, 0.15);
    color: #facc15;
    border-color: rgba(250, 204, 21, 0.3);
}

.session-type-badge.race {
    background: rgba(248, 113, 113, 0.15);
    color: #f87171;
    border-color: rgba(248, 113, 113, 0.3);
}

.session-date {
    font-size: 0.9rem;
    color: var(--text-secondary);
    font-weight: 500;
}

.session-context-row {
    display: flex;
    flex-wrap: wrap;
    align-items: center;
    gap: 0.5rem;
    font-size: 0.85rem;
    color: var(--text-muted);
}

.context-item {
    white-space: nowrap;
}

.context-item.track {
    font-weight: 600;
    color: var(--text-primary);
}

.context-separator {
    color: var(--text-muted);
    opacity: 0.4;
}

/* --- 2. Summary Bar --- */
.session-summary-bar {
    display: flex;
    flex-wrap: wrap;
    align-items: center;
    gap: 0;
    padding: 1rem 2rem;
    background: var(--bg-secondary);
    border-bottom: 1px solid var(--border-color);
}

.summary-item {
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: 0.5rem 1.5rem;
}

.summary-value {
    font-size: 1.25rem;
    font-weight: 700;
    color: var(--text-primary);
    font-family: var(--font-display);
}

.summary-value.best {
    color: var(--accent-success);
}

.summary-label {
    font-size: 0.7rem;
    color: var(--text-muted);
    text-transform: uppercase;
    letter-spacing: 0.05em;
    margin-top: 0.125rem;
}

.summary-divider {
    width: 1px;
    height: 40px;
    background: rgba(255, 255, 255, 0.1);
}

.summary-item.highlight {
    flex-direction: column;
    gap: 0.25rem;
}

.clean-percent-row {
    display: flex;
    align-items: baseline;
    gap: 0.5rem;
}

.clean-bar-mini {
    width: 80px;
    height: 6px;
    background: rgba(255, 255, 255, 0.1);
    border-radius: 3px;
    overflow: hidden;
}

.clean-bar-fill.gradient-fill {
    height: 100%;
    border-radius: 3px;
    background: linear-gradient(90deg, #ef4444 0%, #f59e0b 35%, #22c55e 70%, #22c55e 100%);
    background-size: 100px 100%;
}

/* --- 3. Timeline Block --- */
.stint-timeline-block {
    display: flex;
    align-items: center;
    gap: 1rem;
    padding: 1rem 2rem;
    background: var(--bg-card);
    border-bottom: 1px solid var(--border-color);
}

.timeline-label {
    font-size: 0.75rem;
    font-weight: 700;
    color: var(--text-muted);
    text-transform: uppercase;
    letter-spacing: 0.1em;
    flex-shrink: 0;
}

.stint-timeline {
    display: flex;
    flex: 1;
    gap: 4px;
    height: 40px;
    align-items: stretch;
}

.stint-segment {
    flex: 1;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    padding: 0.25rem 0.5rem;
    border-radius: 6px;
    cursor: pointer;
    transition: transform 0.15s, box-shadow 0.15s, background 0.15s;
    min-width: 60px;
    background: var(--bg-elevated);
    border: 1px solid var(--border-color);
}

.stint-segment:hover,
.stint-segment.highlighted {
    transform: scaleY(1.08);
    box-shadow: 0 0 12px rgba(99, 102, 241, 0.4);
    border-color: var(--accent-primary);
}

.stint-segment.active {
    background: var(--accent-primary);
    border-color: var(--accent-primary);
}

.stint-segment .stint-name {
    font-size: 0.7rem;
    font-weight: 700;
    color: var(--text-primary);
    text-transform: uppercase;
}

.stint-segment .stint-meta {
    font-size: 0.65rem;
    color: var(--text-muted);
}

.stint-segment.type-race {
    border-left: 3px solid #f87171;
}

.stint-segment.type-practice {
    border-left: 3px solid #60a5fa;
}

.stint-segment.type-qualy {
    border-left: 3px solid #facc15;
}

.pit-separator {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    font-size: 0.65rem;
    color: var(--text-muted);
    gap: 2px;
    padding: 0 4px;
}

.pit-separator .pit-icon {
    font-size: 0.9rem;
}

/* --- 4. Analysis Section --- */
.analysis-section {
    padding: 1.5rem 2rem;
    background: var(--bg-primary);
}

.analysis-header-row {
    margin-bottom: 1rem;
}

.analysis-scope-label {
    font-size: 0.75rem;
    font-weight: 600;
    color: var(--accent-primary);
    text-transform: uppercase;
    letter-spacing: 0.05em;
    padding: 0.25rem 0.75rem;
    background: rgba(99, 102, 241, 0.1);
    border-radius: 4px;
}

.analysis-kpi-row {
    display: flex;
    flex-wrap: wrap;
    gap: 1rem;
    margin-bottom: 1.5rem;
}

.analysis-kpi-card {
    flex: 1;
    min-width: 120px;
    background: var(--bg-card);
    border: 1px solid var(--border-color);
    border-radius: 8px;
    padding: 1rem;
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 0.25rem;
}

.analysis-kpi-card .kpi-label {
    font-size: 0.65rem;
    font-weight: 700;
    color: var(--text-muted);
    text-transform: uppercase;
    letter-spacing: 0.05em;
}

.analysis-kpi-card .kpi-value {
    font-size: 1.5rem;
    font-weight: 700;
    color: var(--text-primary);
    font-family: var(--font-display);
}

.analysis-kpi-card .kpi-value.best {
    color: var(--accent-success);
}

.analysis-kpi-card .kpi-sublabel {
    font-size: 0.65rem;
    color: var(--text-muted);
}

/* Chart Controls */
.chart-controls {
    display: flex;
    flex-wrap: wrap;
    gap: 1rem;
    align-items: center;
    padding: 0.75rem 1rem;
    background: var(--bg-card);
    border: 1px solid var(--border-color);
    border-radius: 8px;
    margin-bottom: 1rem;
}

.control-group {
    display: flex;
    align-items: center;
    gap: 0.5rem;
}

.control-group label {
    font-size: 0.7rem;
    font-weight: 600;
    color: var(--text-muted);
    text-transform: uppercase;
    letter-spacing: 0.03em;
}

.control-group select {
    background: var(--bg-elevated);
    border: 1px solid var(--border-color);
    border-radius: 4px;
    padding: 0.375rem 0.75rem;
    color: var(--text-primary);
    font-size: 0.85rem;
    cursor: pointer;
    transition: border-color 0.15s;
}

.control-group select:hover {
    border-color: var(--accent-primary);
}

.control-group select:focus {
    outline: none;
    border-color: var(--accent-primary);
    box-shadow: 0 0 0 2px rgba(99, 102, 241, 0.2);
}

.btn-reset {
    margin-left: auto;
    padding: 0.375rem 1rem;
    font-size: 0.75rem;
    font-weight: 600;
    background: transparent;
    border: 1px solid var(--border-color);
    color: var(--text-secondary);
    border-radius: 4px;
    cursor: pointer;
    transition: all 0.15s;
}

.btn-reset:hover {
    background: var(--bg-elevated);
    color: var(--text-primary);
    border-color: var(--text-muted);
}

/* ECG Chart Wrapper */
.ecg-chart-wrapper {
    background: var(--bg-card);
    border: 1px solid var(--border-color);
    border-radius: 8px;
    padding: 1rem;
    height: 250px;
    position: relative;
}

.ecg-chart-wrapper canvas {
    width: 100% !important;
    height: 100% !important;
}

/* --- 5. Lap Table Section --- */
.lap-table-section {
    padding: 1.5rem 2rem;
    background: var(--bg-secondary);
}

.section-title-inline {
    font-size: 0.85rem;
    font-weight: 700;
    color: var(--text-muted);
    text-transform: uppercase;
    letter-spacing: 0.1em;
    margin-bottom: 1rem;
}

.lap-table-container {
    background: var(--bg-card);
    border: 1px solid var(--border-color);
    border-radius: 8px;
    overflow: hidden;
    max-height: 400px;
    overflow-y: auto;
}

.laps-table {
    width: 100%;
    border-collapse: collapse;
    font-size: 0.85rem;
}

.laps-table thead {
    position: sticky;
    top: 0;
    background: var(--bg-elevated);
    z-index: 1;
}

.laps-table th {
    padding: 0.75rem 1rem;
    text-align: left;
    font-size: 0.7rem;
    font-weight: 700;
    color: var(--text-muted);
    text-transform: uppercase;
    letter-spacing: 0.05em;
    border-bottom: 1px solid var(--border-color);
}

.laps-table td {
    padding: 0.625rem 1rem;
    border-bottom: 1px solid rgba(255, 255, 255, 0.05);
    color: var(--text-secondary);
}

.laps-table tbody tr {
    transition: background 0.15s;
}

.laps-table tbody tr:hover {
    background: rgba(99, 102, 241, 0.05);
}

.laps-table tbody tr.highlighted {
    background: rgba(99, 102, 241, 0.12);
}

.laps-table tbody tr.best-lap td {
    color: var(--accent-success);
}

.laps-table tbody tr.invalid-lap td {
    color: var(--accent-danger);
    opacity: 0.7;
}

.status-chip {
    display: inline-block;
    padding: 2px 6px;
    font-size: 0.65rem;
    font-weight: 700;
    text-transform: uppercase;
    border-radius: 3px;
}

.status-chip.valid {
    background: rgba(34, 197, 94, 0.15);
    color: #22c55e;
}

.status-chip.best {
    background: rgba(34, 197, 94, 0.25);
    color: #22c55e;
}

.status-chip.cut {
    background: rgba(239, 68, 68, 0.15);
    color: #ef4444;
}

.status-chip.pit-in {
    background: rgba(251, 146, 60, 0.15);
    color: #fb923c;
}

.status-chip.pit-out {
    background: rgba(251, 146, 60, 0.15);
    color: #fb923c;
}

/* --- 6. Dev Toggle Block --- */
.dev-toggle-block {
    position: fixed;
    bottom: 1rem;
    right: 1rem;
    display: flex;
    align-items: center;
    gap: 0.5rem;
    padding: 0.5rem 1rem;
    background: rgba(0, 0, 0, 0.8);
    border: 1px solid var(--accent-warning);
    border-radius: 8px;
    z-index: 1000;
}

.dev-label {
    font-size: 0.65rem;
    font-weight: 700;
    color: var(--accent-warning);
    text-transform: uppercase;
}

.btn-dev {
    padding: 0.25rem 0.5rem;
    font-size: 0.7rem;
    background: transparent;
    border: 1px solid var(--text-muted);
    color: var(--text-secondary);
    border-radius: 4px;
    cursor: pointer;
}

.btn-dev:hover {
    background: var(--bg-elevated);
    color: var(--text-primary);
}

/* --- 7. Responsive Adjustments --- */
@media (max-width: 1024px) {

    .session-header-block,
    .session-summary-bar,
    .stint-timeline-block,
    .analysis-section,
    .lap-table-section {
        padding-left: 1rem;
        padding-right: 1rem;
    }

    .analysis-kpi-row {
        gap: 0.75rem;
    }

    .analysis-kpi-card {
        min-width: 100px;
        padding: 0.75rem;
    }

    .analysis-kpi-card .kpi-value {
        font-size: 1.25rem;
    }
}

@media (max-width: 768px) {
    .session-summary-bar {
        flex-wrap: wrap;
        gap: 0.5rem;
    }

    .summary-item {
        padding: 0.5rem 1rem;
    }

    .summary-divider {
        display: none;
    }

    .chart-controls {
        flex-direction: column;
        align-items: stretch;
    }

    .control-group {
        justify-content: space-between;
    }

    .btn-reset {
        margin-left: 0;
        margin-top: 0.5rem;
    }

    .stint-timeline {
        flex-wrap: wrap;
        height: auto;
        gap: 6px;
    }

    .stint-segment {
        min-width: 80px;
        flex: 0 0 auto;
    }
}

/* =========================================
   UX REFINEMENTS - Visual Consistency
   ========================================= */

/* 1. Unified Section Headers */
.analysis-scope-label {
    display: inline-block;
    font-size: 0.8rem;
    font-weight: 700;
    color: var(--text-muted);
    text-transform: uppercase;
    letter-spacing: 0.1em;
    padding: 0;
    background: none;
    border-radius: 0;
}

/* 2. Summary Bar - Improved Alignment */
.session-summary-bar {
    padding: 1.25rem 2rem;
    justify-content: flex-start;
}

.summary-item {
    padding: 0.5rem 1.25rem;
    min-width: 90px;
}

.summary-item:first-child {
    padding-left: 0;
}

/* 3. Consistent KPI Card Sizing */
.analysis-kpi-card {
    padding: 1.25rem 1rem;
    min-width: 140px;
}

.analysis-kpi-card .kpi-value {
    font-size: 1.4rem;
    line-height: 1.2;
}

/* 4. Timeline Block - Visual Unity */
.stint-timeline-block {
    padding: 1.25rem 2rem;
    background: var(--bg-secondary);
}

/* 5. Analysis Section - Consistent Padding */
.analysis-section {
    padding: 1.5rem 2rem 2rem;
}

.analysis-header-row {
    margin-bottom: 1.25rem;
    display: flex;
    align-items: center;
    justify-content: space-between;
}

/* 6. Chart Controls - Better Grouping */
.chart-controls {
    gap: 0.75rem;
    padding: 0.625rem 1rem;
    margin-bottom: 1.25rem;
}

.control-group {
    gap: 0.375rem;
}

.control-group label {
    font-size: 0.65rem;
    min-width: auto;
}

.control-group select {
    padding: 0.3rem 0.625rem;
    font-size: 0.8rem;
}

.btn-reset {
    margin-left: 0.5rem;
    padding: 0.3rem 0.875rem;
}

/* 7. Lap Table Section - Unified Spacing */
.lap-table-section {
    padding: 1.5rem 2rem 2rem;
}

.section-title-inline {
    font-size: 0.8rem;
    letter-spacing: 0.1em;
    margin-bottom: 1.25rem;
}

/* 8. ECG Chart - Better Proportions */
.ecg-chart-wrapper {
    height: 220px;
    padding: 1.25rem;
}

/* 9. Back Button - Consistent with Header */
.session-header-block .btn-back {
    position: absolute;
    top: 1.5rem;
    right: 2rem;
    padding: 0.5rem 1rem;
    font-size: 0.8rem;
    background: var(--bg-elevated);
    border: 1px solid var(--border-color);
    border-radius: 6px;
    color: var(--text-secondary);
    cursor: pointer;
    transition: all 0.15s;
}

.session-header-block .btn-back:hover {
    background: var(--accent-primary);
    color: white;
    border-color: var(--accent-primary);
}

.session-header-block {
    position: relative;
}

/* 10. KPI Row - Even Distribution */
.analysis-kpi-row {
    gap: 0.875rem;
    margin-bottom: 1.25rem;
}

/* 11. Dividers - Subtle Enhancement */
.summary-divider {
    height: 32px;
    background: rgba(255, 255, 255, 0.08);
    margin: 0 0.5rem;
}

/* 12. Clean Bar - Better Visibility */
.clean-bar-mini {
    width: 70px;
    height: 5px;
    margin-top: 4px;
}

/* 13. Lap Table - Refined Cells */
.laps-table td {
    font-size: 0.8rem;
    padding: 0.5rem 0.75rem;
}

.laps-table th {
    font-size: 0.65rem;
    padding: 0.625rem 0.75rem;
}

/* 14. Status Chips - Consistent Size */
.status-chip {
    padding: 3px 8px;
    font-size: 0.6rem;
    letter-spacing: 0.03em;
}

/* 15. Context Row - Better Hierarchy */
.session-context-row {
    gap: 0.625rem;
    font-size: 0.8rem;
}

.context-separator {
    opacity: 0.3;
    font-size: 0.6rem;
}

/* =====================================================
   SESSION DETAIL VIEW (sd-*) - SPEC COMPLIANT
   ===================================================== */

/* 1. HEADER SESSIONE */
.sd-header {
    display: flex;
    flex-direction: column;
    gap: 0.75rem;
    padding: 1.5rem 2rem;
    background: var(--bg-card);
    border: 1px solid var(--border-color);
    border-radius: var(--border-radius-lg);
    margin-bottom: 1.5rem;
}

.sd-header .btn-back {
    align-self: flex-start;
    margin-bottom: 0.5rem;
}

.sd-header-row {
    display: flex;
    flex-wrap: wrap;
    align-items: center;
    gap: 0.5rem;
}

.sd-session-type {
    font-family: var(--font-display);
    font-size: 1rem;
    font-weight: 700;
    color: var(--accent-primary);
    text-transform: uppercase;
    letter-spacing: 0.05em;
}

.sd-separator {
    color: var(--text-muted);
    font-size: 0.8rem;
}

.sd-date,
.sd-track,
.sd-car,
.sd-weather,
.sd-temp,
.sd-grip {
    font-size: 0.875rem;
    color: var(--text-secondary);
}

.sd-track,
.sd-car {
    font-weight: 500;
    color: var(--text-primary);
}

.sd-weather {
    font-weight: 500;
}

/* 2. RIEPILOGO NUMERICO (Summary) */
.sd-summary {
    display: flex;
    flex-wrap: wrap;
    gap: 1.5rem;
    padding: 1.25rem 2rem;
    background: var(--bg-card);
    border: 1px solid var(--border-color);
    border-radius: var(--border-radius-lg);
    margin-bottom: 1.5rem;
}

.sd-summary-item {
    display: flex;
    flex-direction: column;
    align-items: center;
    min-width: 80px;
}

.sd-summary-value {
    font-family: var(--font-display);
    font-size: 1.5rem;
    font-weight: 700;
    color: var(--text-primary);
}

.sd-summary-value.best {
    color: var(--accent-success);
}

.sd-summary-label {
    font-size: 0.7rem;
    color: var(--text-muted);
    text-transform: uppercase;
    letter-spacing: 0.05em;
}

/* Clean laps item with gradient bar */
.sd-clean-item {
    flex: 1;
    min-width: 150px;
}

.sd-clean-header {
    display: flex;
    align-items: baseline;
    gap: 0.5rem;
    margin-bottom: 0.5rem;
}

.sd-clean-bar {
    width: 100%;
    height: 8px;
    background: rgba(255, 255, 255, 0.1);
    border-radius: 4px;
    overflow: hidden;
}

.sd-clean-bar-fill {
    height: 100%;
    border-radius: 4px;
    transition: width 0.4s ease, background 0.4s ease;
    /* Dynamic gradient based on percentage (set via JS) */
    background: linear-gradient(90deg, #ef4444 0%, #f59e0b 50%, #10b981 100%);
    background-size: 200% 100%;
}

/* Gradient position based on value */
.sd-clean-bar-fill[data-percent="100"] {
    background-position: 100% 0;
}

.sd-clean-bar-fill[data-percent="75"] {
    background-position: 75% 0;
}

.sd-clean-bar-fill[data-percent="50"] {
    background-position: 50% 0;
}

.sd-clean-bar-fill[data-percent="25"] {
    background-position: 25% 0;
}

.sd-clean-bar-fill[data-percent="0"] {
    background-position: 0% 0;
}

/* 3. TIMELINE STINT */
.sd-timeline-section {
    margin-bottom: 1.5rem;
}

.sd-timeline {
    display: flex;
    align-items: center;
    gap: 0;
    padding: 1rem 1.5rem;
    background: var(--bg-card);
    border: 1px solid var(--border-color);
    border-radius: var(--border-radius-lg);
    overflow-x: auto;
}

.sd-stint-block {
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: 0.75rem 1.25rem;
    background: rgba(99, 102, 241, 0.1);
    border: 2px solid transparent;
    border-radius: var(--border-radius-md);
    cursor: pointer;
    transition: all 0.2s ease;
    min-width: 100px;
    flex: 1;
}

.sd-stint-block:hover {
    background: rgba(99, 102, 241, 0.2);
    border-color: var(--accent-primary);
}

.sd-stint-block.active {
    background: rgba(99, 102, 241, 0.25);
    border-color: var(--accent-primary);
    box-shadow: 0 0 15px var(--accent-primary-glow);
}

.sd-stint-block.type-race {
    background: rgba(239, 68, 68, 0.1);
}

.sd-stint-block.type-race.active {
    background: rgba(239, 68, 68, 0.25);
    border-color: var(--accent-danger);
}

.sd-stint-block.type-qualy {
    background: rgba(245, 158, 11, 0.1);
}

.sd-stint-block.type-qualy.active {
    background: rgba(245, 158, 11, 0.25);
    border-color: var(--accent-warning);
}

.sd-stint-name {
    font-family: var(--font-display);
    font-size: 0.85rem;
    font-weight: 700;
    color: var(--text-primary);
    margin-bottom: 0.25rem;
}

.sd-stint-meta {
    font-size: 0.7rem;
    color: var(--text-muted);
}

.sd-pit-divider {
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: 0 0.5rem;
    color: var(--text-muted);
}

.sd-pit-icon {
    font-size: 1rem;
}

.sd-pit-label {
    font-size: 0.6rem;
    text-transform: uppercase;
    letter-spacing: 0.05em;
}

/* 4. SEZIONE ANALISI */
.sd-analysis {
    background: var(--bg-card);
    border: 1px solid var(--border-color);
    border-radius: var(--border-radius-lg);
    padding: 1.5rem 2rem;
    margin-bottom: 1.5rem;
}

.sd-analysis-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 1rem;
}

.sd-scope-label {
    font-size: 0.8rem;
    color: var(--text-muted);
    font-style: italic;
}

.btn-reset {
    padding: 0.4rem 0.875rem;
    font-size: 0.75rem;
    background: var(--bg-elevated);
    border: 1px solid var(--border-color);
    color: var(--text-secondary);
    border-radius: 6px;
    cursor: pointer;
    transition: all 0.15s;
}

.btn-reset:hover {
    background: var(--accent-primary);
    color: white;
    border-color: var(--accent-primary);
}

/* KPI Row */
.sd-kpi-row {
    display: flex;
    gap: 1rem;
    margin-bottom: 1.25rem;
    flex-wrap: wrap;
}

.sd-kpi-card {
    flex: 1;
    min-width: 100px;
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: 1rem;
    background: var(--bg-elevated);
    border-radius: var(--border-radius-md);
    border: 1px solid var(--border-color);
}

.sd-kpi-label {
    font-size: 0.65rem;
    font-weight: 600;
    color: var(--text-muted);
    text-transform: uppercase;
    letter-spacing: 0.08em;
    margin-bottom: 0.25rem;
}

.sd-kpi-value {
    font-family: var(--font-display);
    font-size: 1.25rem;
    font-weight: 700;
    color: var(--text-primary);
}

.sd-kpi-sub {
    font-size: 0.65rem;
    color: var(--text-muted);
}

/* Chart Controls */
.sd-chart-controls {
    display: flex;
    flex-wrap: wrap;
    gap: 1rem;
    margin-bottom: 1rem;
    padding-bottom: 1rem;
    border-bottom: 1px solid var(--border-color);
}

.sd-control-group {
    display: flex;
    align-items: center;
    gap: 0.5rem;
}

.sd-control-group label {
    font-size: 0.75rem;
    color: var(--text-muted);
}

.sd-control-select {
    padding: 0.4rem 0.75rem;
    background: var(--bg-elevated);
    border: 1px solid var(--border-color);
    border-radius: 6px;
    color: var(--text-primary);
    font-size: 0.8rem;
    cursor: pointer;
}

.sd-toggle-group {
    display: flex;
    gap: 2px;
    background: var(--bg-secondary);
    padding: 2px;
    border-radius: 6px;
}

.sd-toggle {
    padding: 0.35rem 0.75rem;
    font-size: 0.75rem;
    font-weight: 500;
    background: transparent;
    border: none;
    color: var(--text-muted);
    border-radius: 4px;
    cursor: pointer;
    transition: all 0.15s;
}

.sd-toggle:hover {
    color: var(--text-primary);
}

.sd-toggle.active {
    background: var(--accent-primary);
    color: white;
}

.sd-compare-selectors {
    display: flex;
    align-items: center;
    gap: 0.5rem;
}

/* Checkbox controls */
.sd-checkbox-group {
    display: flex;
    gap: 1rem;
}

.sd-checkbox-label {
    display: flex;
    align-items: center;
    gap: 0.4rem;
    font-size: 0.8rem;
    color: var(--text-secondary);
    cursor: pointer;
    user-select: none;
}

.sd-checkbox-label input[type="checkbox"] {
    width: 16px;
    height: 16px;
    accent-color: var(--accent-primary);
    cursor: pointer;
}

.sd-checkbox-label:hover {
    color: var(--text-primary);
}

.sd-vs {
    font-size: 0.8rem;
    font-weight: 600;
    color: var(--text-muted);
}

/* ECG Chart Wrapper */
.sd-chart-wrapper {
    height: 250px;
    position: relative;
}

.sd-chart-wrapper canvas {
    width: 100% !important;
    height: 100% !important;
}

/* 5. TABELLA GIRI */
.sd-lap-table-section {
    background: var(--bg-card);
    border: 1px solid var(--border-color);
    border-radius: var(--border-radius-lg);
    padding: 1.5rem 2rem;
}

.sd-section-title {
    font-family: var(--font-display);
    font-size: 0.8rem;
    font-weight: 700;
    color: var(--text-muted);
    text-transform: uppercase;
    letter-spacing: 0.1em;
    margin-bottom: 1rem;
}

.sd-lap-table {
    width: 100%;
    border-collapse: collapse;
}

.sd-lap-table th {
    font-size: 0.7rem;
    font-weight: 600;
    color: var(--text-muted);
    text-transform: uppercase;
    letter-spacing: 0.05em;
    padding: 0.75rem 1rem;
    text-align: left;
    border-bottom: 1px solid var(--border-color);
}

.sd-lap-table td {
    font-size: 0.85rem;
    padding: 0.6rem 1rem;
    color: var(--text-primary);
    border-bottom: 1px solid rgba(255, 255, 255, 0.03);
}

.sd-lap-table tbody tr {
    transition: background 0.15s;
}

.sd-lap-table tbody tr:hover {
    background: rgba(99, 102, 241, 0.08);
}

.sd-lap-table tbody tr.highlight {
    background: rgba(99, 102, 241, 0.15);
}

.sd-lap-table tbody tr.best-lap td {
    color: var(--accent-success);
}

.sd-lap-table tbody tr.cut-lap td {
    color: var(--accent-danger);
    opacity: 0.8;
}

/* Status badges in table */
.sd-status-badge {
    display: inline-block;
    padding: 0.2rem 0.5rem;
    font-size: 0.65rem;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 0.03em;
    border-radius: 4px;
}

.sd-status-badge.best {
    background: rgba(16, 185, 129, 0.2);
    color: var(--accent-success);
}

.sd-status-badge.cut {
    background: rgba(239, 68, 68, 0.2);
    color: var(--accent-danger);
}

.sd-status-badge.pit {
    background: rgba(245, 158, 11, 0.2);
    color: var(--accent-warning);
}

.sd-status-badge.ok {
    background: rgba(255, 255, 255, 0.08);
    color: var(--text-muted);
}

/* Responsive adjustments */
@media (max-width: 768px) {
    .sd-header-row {
        flex-direction: column;
        align-items: flex-start;
    }

    .sd-separator {
        display: none;
    }

    .sd-summary {
        flex-direction: column;
        gap: 1rem;
    }

    .sd-summary-item {
        flex-direction: row;
        justify-content: space-between;
        width: 100%;
    }

    .sd-kpi-row {
        flex-direction: column;
    }

    .sd-chart-controls {
        flex-direction: column;
    }

    .sd-lap-table {
        font-size: 0.75rem;
    }

    .sd-lap-table th,
    .sd-lap-table td {
        padding: 0.5rem;
    }
}

/* ===== Driver History View ===== */
.driver-history-header {
    display: flex;
    align-items: center;
    gap: 1rem;
    margin-bottom: 2rem;
}

.dh-title {
    font-family: var(--font-display);
    font-size: 1.5rem;
    font-weight: 700;
    color: var(--text-primary);
}

/* Overall Stats Row */
.dh-overall-stats {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: 1rem;
    margin-bottom: 2rem;
}

.dh-stat-card {
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: 1.5rem;
    background: var(--bg-card);
    border: 1px solid var(--border-color);
    border-radius: var(--border-radius-md);
}

.dh-stat-value {
    font-family: var(--font-display);
    font-size: 2rem;
    font-weight: 700;
    color: var(--accent-primary);
}

.dh-stat-label {
    font-size: 0.85rem;
    color: var(--text-secondary);
    margin-top: 0.25rem;
}

/* Track Cards Grid */
.dh-tracks-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
    gap: 1.5rem;
    margin-bottom: 2rem;
}

.dh-track-card {
    display: flex;
    flex-direction: column;
    padding: 1.5rem;
    background: var(--bg-card);
    border: 1px solid var(--border-color);
    border-radius: var(--border-radius-lg);
    cursor: pointer;
    transition: all 0.2s ease;
}

.dh-track-card:hover {
    border-color: var(--accent-primary);
    transform: translateY(-2px);
    box-shadow: 0 8px 20px rgba(99, 102, 241, 0.15);
}

.dh-track-name {
    font-family: var(--font-display);
    font-size: 1.1rem;
    font-weight: 600;
    color: var(--text-primary);
    margin-bottom: 0.75rem;
}

.dh-track-stats {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 0.5rem;
    font-size: 0.85rem;
}

.dh-track-stat {
    display: flex;
    flex-direction: column;
}

.dh-track-stat-value {
    font-weight: 600;
    color: var(--text-primary);
}

.dh-track-stat-label {
    font-size: 0.75rem;
    color: var(--text-muted);
}

.dh-track-best {
    margin-top: 0.75rem;
    padding-top: 0.75rem;
    border-top: 1px solid var(--border-color);
}

.dh-track-best-time {
    font-family: var(--font-display);
    font-size: 1.25rem;
    font-weight: 700;
    color: var(--accent-success);
}

.dh-track-best-date {
    font-size: 0.75rem;
    color: var(--text-muted);
}

/* Track Detail Panel */
.dh-track-detail {
    background: var(--bg-card);
    border: 1px solid var(--border-color);
    border-radius: var(--border-radius-lg);
    padding: 1.5rem;
    margin-top: 1rem;
    max-width: 1400px;
    margin: 0 auto;
    padding: 0 1rem;
}

.dh-detail-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 1.5rem;
}

.dh-detail-header h3 {
    font-family: var(--font-display);
    font-size: 1.3rem;
    font-weight: 600;
}

.dh-detail-stats {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
    gap: 1rem;
    margin-bottom: 1.5rem;
}

.dh-detail-stat {
    text-align: center;
    padding: 1rem;
    background: var(--bg-secondary);
    border-radius: var(--border-radius-sm);
}

.dh-trend-chart-wrapper {
    margin-bottom: 1.5rem;
}

.dh-trend-chart-wrapper h4 {
    font-size: 0.95rem;
    color: var(--text-secondary);
    margin-bottom: 0.75rem;
}

.dh-trend-chart-wrapper canvas {
    max-height: 250px;
}

.dh-sessions-list h4 {
    font-size: 0.95rem;
    color: var(--text-secondary);
    margin-bottom: 0.75rem;
}

.dh-session-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 0.75rem 1rem;
    background: var(--bg-secondary);
    border-radius: var(--border-radius-sm);
    margin-bottom: 0.5rem;
    cursor: pointer;
    transition: background 0.15s ease;
}

.dh-session-item:hover {
    background: var(--bg-elevated);
}

.dh-session-date {
    font-weight: 500;
}

.dh-session-best {
    font-weight: 600;
    color: var(--accent-success);
}

.dh-session-weather {
    font-size: 0.85rem;
    color: var(--text-muted);
}

/* Responsive */
@media (max-width: 768px) {
    .dh-overall-stats {
        grid-template-columns: repeat(2, 1fr);
    }

    .dh-tracks-grid {
        grid-template-columns: 1fr;
    }

    .driver-history-header {
        flex-direction: column;
        align-items: flex-start;
    }
}

/* ===== Driver History - Layout Toggle & Container ===== */
.dh-container {
    max-width: 1400px;
    margin: 0 auto;
    padding: 0 1rem;
}

.dh-layout-toggle {
    display: flex;
    gap: 4px;
    padding: 4px;
    background: var(--bg-secondary);
    border-radius: var(--border-radius-md);
    border: 1px solid var(--border-color);
}

.dh-layout-btn {
    padding: 8px 14px;
    font-size: 0.8rem;
    font-weight: 500;
    background: transparent;
    border: none;
    border-radius: var(--border-radius-sm);
    color: var(--text-muted);
    cursor: pointer;
    transition: all 0.15s ease;
}

.dh-layout-btn:hover {
    color: var(--text-primary);
}

.dh-layout-btn.active {
    background: var(--accent-primary);
    color: white;
}

/* Rows Layout */
.dh-tracks-grid.layout-rows {
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
}

.dh-tracks-grid.layout-rows .dh-track-card {
    flex-direction: row;
    align-items: center;
    gap: 1.5rem;
    padding: 1rem 1.5rem;
}

.dh-tracks-grid.layout-rows .dh-track-name {
    min-width: 180px;
    margin-bottom: 0;
}

.dh-tracks-grid.layout-rows .dh-track-stats {
    display: flex;
    gap: 2rem;
}

.dh-tracks-grid.layout-rows .dh-track-stat {
    flex-direction: row;
    gap: 0.5rem;
    align-items: baseline;
}

.dh-tracks-grid.layout-rows .dh-track-best {
    margin: 0;
    padding: 0;
    border: none;
    margin-left: auto;
    text-align: right;
}

/* Compact Layout */
.dh-tracks-grid.layout-compact {
    display: flex;
    flex-wrap: wrap;
    gap: 0.5rem;
}

.dh-tracks-grid.layout-compact .dh-track-card {
    flex-direction: row;
    align-items: center;
    gap: 1rem;
    padding: 0.75rem 1rem;
    flex: 1 1 auto;
    min-width: 200px;
}

.dh-tracks-grid.layout-compact .dh-track-name {
    font-size: 0.9rem;
    margin-bottom: 0;
}

.dh-tracks-grid.layout-compact .dh-track-stats {
    display: none;
}

.dh-tracks-grid.layout-compact .dh-track-best {
    margin: 0;
    padding: 0;
    border: none;
    margin-left: auto;
}

.dh-tracks-grid.layout-compact .dh-track-best-time {
    font-size: 1rem;
}

.dh-tracks-grid.layout-compact .dh-track-best-date {
    display: none;
}

/* Sessions list - scrollable for many items */
.dh-sessions-list {
    max-height: 300px;
    overflow-y: auto;
}

.dh-sessions-list::-webkit-scrollbar {
    width: 6px;
}

.dh-sessions-list::-webkit-scrollbar-track {
    background: var(--bg-secondary);
    border-radius: 3px;
}

.dh-sessions-list::-webkit-scrollbar-thumb {
    background: var(--accent-primary);
    border-radius: 3px;
}

/* ===== Driver History - Table Layout ===== */
.dh-tracks-grid.layout-table {
    display: block;
}

.dh-tracks-table {
    width: 100%;
    border-collapse: collapse;
    background: var(--bg-card);
    border-radius: var(--border-radius-md);
    overflow: hidden;
}

.dh-tracks-table th,
.dh-tracks-table td {
    padding: 1rem;
    text-align: left;
    border-bottom: 1px solid var(--border-color);
}

.dh-tracks-table th {
    background: var(--bg-elevated);
    font-size: 0.75rem;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    color: var(--text-muted);
    cursor: pointer;
    user-select: none;
    transition: color 0.15s ease;
}

.dh-tracks-table th:hover {
    color: var(--accent-primary);
}

.dh-tracks-table th.sorted {
    color: var(--accent-primary);
}

.dh-tracks-table th .sort-icon {
    margin-left: 0.5rem;
    opacity: 0.5;
}

.dh-tracks-table th.sorted .sort-icon {
    opacity: 1;
}

.dh-tracks-table tbody tr {
    cursor: pointer;
    transition: background 0.15s ease;
}

.dh-tracks-table tbody tr:hover {
    background: var(--bg-elevated);
}

.dh-tracks-table .track-name {
    font-weight: 600;
    color: var(--text-primary);
}

.dh-tracks-table .best-lap {
    font-weight: 700;
    color: var(--accent-success);
    font-family: var(--font-display);
}

.dh-tracks-table .last-activity {
    color: var(--text-muted);
    font-size: 0.85rem;
}

/* === Layout Fixes === */
/* Better hover on rows */
.dh-tracks-grid.layout-rows .dh-track-card:hover {
    background: var(--bg-elevated);
    border-color: var(--accent-primary);
    box-shadow: 0 4px 12px rgba(99, 102, 241, 0.15);
}

.dh-tracks-grid.layout-rows .dh-track-card::after {
    content: '';
    position: absolute;
    right: 1.5rem;
    color: var(--text-muted);
    opacity: 0;
    transition: opacity 0.15s ease, transform 0.15s ease;
}

.dh-tracks-grid.layout-rows .dh-track-card:hover::after {
    opacity: 1;
    transform: translateX(4px);
}

/* Compact tooltip */
.dh-tracks-grid.layout-compact .dh-track-card {
    position: relative;
}

.dh-tracks-grid.layout-compact .dh-track-card[data-tooltip]::before {
    content: attr(data-tooltip);
    position: absolute;
    bottom: 100%;
    left: 50%;
    transform: translateX(-50%);
    padding: 0.5rem 0.75rem;
    background: var(--bg-elevated);
    border: 1px solid var(--border-color);
    border-radius: var(--border-radius-sm);
    font-size: 0.75rem;
    color: var(--text-secondary);
    white-space: nowrap;
    opacity: 0;
    visibility: hidden;
    transition: opacity 0.2s ease, visibility 0.2s ease;
    z-index: 10;
    pointer-events: none;
}

.dh-tracks-grid.layout-compact .dh-track-card:hover[data-tooltip]::before {
    opacity: 1;
    visibility: visible;
}

/* Personal best badge */
.dh-track-card.is-personal-best {
    border-color: var(--accent-success);
}

.dh-track-card.is-personal-best .dh-track-name::after {
    content: '';
    margin-left: 0.5rem;
}

/* Trend indicator */
.dh-trend-indicator {
    display: inline-flex;
    align-items: center;
    gap: 0.25rem;
    padding: 0.125rem 0.375rem;
    border-radius: 4px;
    font-size: 0.7rem;
    font-weight: 600;
}

.dh-trend-indicator.improving {
    background: rgba(16, 185, 129, 0.15);
    color: var(--accent-success);
}

.dh-trend-indicator.declining {
    background: rgba(239, 68, 68, 0.15);
    color: var(--accent-danger);
}

/* ===== Driver History - Record Cards ===== */
.dh-records-section {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 1rem;
    margin-bottom: 1.5rem;
}

.dh-record-card {
    background: var(--bg-card);
    border-radius: var(--border-radius-lg);
    padding: 1.5rem;
    border: 2px solid transparent;
    transition: all 0.2s ease;
}

.dh-record-card:hover {
    transform: translateY(-2px);
    box-shadow: var(--shadow-lg);
}

.dh-record-race {
    border-color: rgba(16, 185, 129, 0.3);
    background: linear-gradient(135deg, rgba(16, 185, 129, 0.08) 0%, transparent 100%);
}

.dh-record-quali {
    border-color: rgba(99, 102, 241, 0.3);
    background: linear-gradient(135deg, rgba(99, 102, 241, 0.08) 0%, transparent 100%);
}

.dh-record-type {
    font-size: 0.75rem;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 1px;
    color: var(--text-muted);
    margin-bottom: 0.5rem;
}

.dh-record-race .dh-record-type {
    color: var(--accent-success);
}

.dh-record-quali .dh-record-type {
    color: var(--accent-primary);
}

.dh-record-time {
    font-size: 2rem;
    font-weight: 700;
    font-family: var(--font-display);
    color: var(--text-primary);
    margin-bottom: 1rem;
}

.dh-record-conditions {
    display: flex;
    flex-wrap: wrap;
    gap: 0.5rem;
    margin-bottom: 1rem;
}

.dh-condition {
    display: inline-flex;
    align-items: center;
    gap: 0.25rem;
    padding: 0.25rem 0.5rem;
    background: var(--bg-elevated);
    border-radius: var(--border-radius-sm);
    font-size: 0.75rem;
    color: var(--text-secondary);
}

/* Chart Legend */
.dh-chart-legend {
    display: flex;
    gap: 1.5rem;
    margin-bottom: 0.75rem;
    font-size: 0.85rem;
}

.dh-legend-race {
    color: var(--accent-success);
}

.dh-legend-quali {
    color: var(--accent-primary);
}

/* Sessions Toggle */
.dh-sessions-toggle {
    margin-top: 1.5rem;
    text-align: center;
}

.dh-sessions-toggle .btn-ghost {
    color: var(--text-muted);
    font-size: 0.85rem;
}

.dh-sessions-toggle .btn-ghost:hover {
    color: var(--text-primary);
}

/* btn-ghost and btn-sm */
.btn-ghost {
    background: transparent;
    border: none;
    color: var(--text-secondary);
    cursor: pointer;
    padding: 0.5rem 1rem;
    border-radius: var(--border-radius-sm);
    transition: all 0.15s ease;
}

.btn-ghost:hover {
    background: var(--bg-elevated);
    color: var(--accent-primary);
}

.btn-sm {
    padding: 0.375rem 0.75rem;
    font-size: 0.8rem;
}

/* Responsive */
@media (max-width: 600px) {
    .dh-records-section {
        grid-template-columns: 1fr;
    }
}

/* ===== Track Card Best Times Layout ===== */
.dh-track-bests {
    display: flex;
    gap: 1rem;
    padding-top: 1rem;
    border-top: 1px solid var(--border-color);
    margin-top: auto;
}

.dh-track-best-item {
    flex: 1;
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 0.25rem;
    padding: 0.5rem;
    border-radius: var(--border-radius-sm);
    background: var(--bg-elevated);
}

.dh-track-best-item.no-data {
    opacity: 0.5;
}

.dh-best-race {
    border-left: 3px solid var(--accent-success);
}

.dh-best-quali {
    border-left: 3px solid var(--accent-primary);
}

.dh-best-icon {
    font-size: 1rem;
}

.dh-best-time {
    font-size: 1.1rem;
    font-weight: 700;
    font-family: var(--font-display);
    color: var(--text-primary);
}

.dh-best-label {
    font-size: 0.7rem;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    color: var(--text-muted);
}

/* Table columns colors */
.dh-tracks-table .best-race {
    color: var(--accent-success);
}

.dh-tracks-table .best-quali {
    color: var(--accent-primary);
}

/* Rows layout - show both times inline */
.dh-tracks-grid.layout-rows .dh-track-bests {
    flex-direction: row;
    gap: 1.5rem;
    padding: 0;
    border: none;
    margin: 0;
    margin-left: auto;
}

.dh-tracks-grid.layout-rows .dh-track-best-item {
    flex-direction: row;
    gap: 0.5rem;
    padding: 0.25rem 0.75rem;
}

/* Compact layout - show only best with badge */
.dh-tracks-grid.layout-compact .dh-track-bests {
    flex-direction: row;
    gap: 0.5rem;
    padding: 0;
    border: none;
    margin: 0;
    margin-left: auto;
}

.dh-tracks-grid.layout-compact .dh-track-best-item {
    padding: 0.25rem 0.5rem;
    flex-direction: row;
    gap: 0.25rem;
}

.dh-tracks-grid.layout-compact .dh-track-best-item.no-data {
    display: none;
}

.dh-tracks-grid.layout-compact .dh-best-time {
    font-size: 0.9rem;
}

.dh-tracks-grid.layout-compact .dh-best-label {
    display: none;
}

/* ===== PROFESSIONAL LAYOUT OPTIMIZATION ===== */

/* Overall Stats - More compact */
.dh-overall-stats {
    display: flex;
    flex-wrap: wrap;
    gap: 0.75rem;
    margin-bottom: 1.5rem;
}

.dh-stat-card {
    flex: 1 1 auto;
    min-width: 120px;
    padding: 1rem;
    display: flex;
    flex-direction: row;
    align-items: center;
    gap: 0.75rem;
}

.dh-stat-value {
    font-size: 1.5rem;
}

/* Cards - 3-4 columns on desktop, 2 on tablet */
.dh-tracks-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(260px, 1fr));
    gap: 1rem;
}

.dh-track-card {
    padding: 1rem;
}

.dh-track-name {
    font-size: 1rem;
    margin-bottom: 0.5rem;
}

.dh-track-stats {
    grid-template-columns: repeat(3, 1fr);
    gap: 0.25rem;
    margin-bottom: 0.5rem;
}

.dh-track-stat-value {
    font-size: 0.9rem;
}

.dh-track-stat-label {
    font-size: 0.65rem;
}

/* Rows - 2 columns layout */
.dh-tracks-grid.layout-rows {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 0.5rem;
}

.dh-tracks-grid.layout-rows .dh-track-card {
    padding: 0.75rem 1rem;
    gap: 1rem;
}

.dh-tracks-grid.layout-rows .dh-track-name {
    min-width: 140px;
    font-size: 0.9rem;
}

.dh-tracks-grid.layout-rows .dh-track-stats {
    display: none;
    /* Hide stats for cleaner look */
}

/* Compact - Maximum density, 4-5 columns */
.dh-tracks-grid.layout-compact {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
    gap: 0.5rem;
}

.dh-tracks-grid.layout-compact .dh-track-card {
    padding: 0.5rem 0.75rem;
    min-width: auto;
    flex: none;
}

.dh-tracks-grid.layout-compact .dh-track-name {
    font-size: 0.85rem;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    max-width: 100px;
}

/* Table - Compact cells */
.dh-tracks-table th,
.dh-tracks-table td {
    padding: 0.6rem 0.75rem;
    font-size: 0.85rem;
}

.dh-tracks-table th {
    font-size: 0.7rem;
}

/* Detail Panel - 2 column records */
.dh-records-section {
    grid-template-columns: repeat(2, 1fr);
    gap: 0.75rem;
}

.dh-record-card {
    padding: 1rem;
}

.dh-record-time {
    font-size: 1.5rem;
}

/* Detail stats - inline flow */
.dh-detail-stats {
    display: flex;
    flex-wrap: wrap;
    gap: 0.5rem;
    margin-bottom: 1rem;
}

.dh-detail-stat {
    padding: 0.5rem 1rem;
    text-align: left;
    display: flex;
    gap: 0.5rem;
    align-items: baseline;
    flex: 0 0 auto;
}

/* Responsive breakpoints */
@media (min-width: 1200px) {
    .dh-tracks-grid {
        grid-template-columns: repeat(4, 1fr);
    }

    .dh-tracks-grid.layout-rows {
        grid-template-columns: repeat(2, 1fr);
    }

    .dh-tracks-grid.layout-compact {
        grid-template-columns: repeat(5, 1fr);
    }
}

@media (max-width: 900px) {
    .dh-tracks-grid.layout-rows {
        grid-template-columns: 1fr;
    }

    .dh-records-section {
        grid-template-columns: 1fr;
    }
}

@media (max-width: 600px) {
    .dh-tracks-grid {
        grid-template-columns: repeat(2, 1fr);
    }

    .dh-tracks-grid.layout-compact {
        grid-template-columns: repeat(2, 1fr);
    }

    .dh-overall-stats {
        flex-direction: column;
    }
}

/* ===== Table Time Cells - Text only, no background ===== */
.dh-tracks-table .best-race {
    color: var(--accent-success);
    font-weight: 600;
    font-family: var(--font-display);
    background: transparent !important;
}

.dh-tracks-table .best-quali {
    color: var(--accent-primary);
    font-weight: 600;
    font-family: var(--font-display);
    background: transparent !important;
}

/* Override any old .best-lap styles */
.dh-tracks-table .best-lap {
    background: transparent !important;
}

/* ===== TRACK DETAIL PANEL - OPTIMIZED LAYOUT ===== */

/* Panel container */
.dh-track-detail {
    background: var(--bg-card);
    border: 1px solid var(--border-color);
    border-radius: var(--border-radius-lg);
    padding: 1.25rem;
    margin-top: 1rem;
}

/* Header - more compact */
.dh-detail-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 1rem;
    padding-bottom: 0.75rem;
    border-bottom: 1px solid var(--border-color);
}

.dh-detail-header h3 {
    font-family: var(--font-display);
    font-size: 1.2rem;
    font-weight: 600;
    margin: 0;
}

/* Record cards - side by side, compact */
.dh-records-section {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 0.75rem;
    margin-bottom: 1rem;
}

.dh-record-card {
    padding: 1rem;
    border-radius: var(--border-radius-md);
}

.dh-record-type {
    font-size: 0.7rem;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    margin-bottom: 0.25rem;
}

.dh-record-time {
    font-size: 1.6rem;
    font-weight: 700;
    margin-bottom: 0.5rem;
    line-height: 1;
}

.dh-record-conditions {
    display: flex;
    flex-wrap: wrap;
    gap: 0.4rem;
    margin-bottom: 0.5rem;
}

.dh-condition {
    font-size: 0.7rem;
    padding: 0.2rem 0.4rem;
}

.dh-record-card .btn-ghost {
    font-size: 0.75rem;
    padding: 0.25rem 0.5rem;
    margin-top: 0.25rem;
}

/* Stats row - truly inline, minimal */
.dh-detail-stats {
    display: flex;
    flex-wrap: wrap;
    gap: 0.5rem;
    margin-bottom: 1rem;
    padding: 0.5rem 0;
    border-top: 1px solid var(--border-color);
    border-bottom: 1px solid var(--border-color);
}

.dh-detail-stat {
    display: flex;
    align-items: baseline;
    gap: 0.35rem;
    padding: 0.35rem 0.75rem;
    background: var(--bg-elevated);
    border-radius: var(--border-radius-sm);
}

.dh-detail-stat .dh-stat-value {
    font-family: var(--font-display);
    font-size: 1rem;
    font-weight: 700;
    color: var(--text-primary);
}

.dh-detail-stat .dh-stat-label {
    font-size: 0.7rem;
    color: var(--text-muted);
    text-transform: lowercase;
}

/* Chart section - compact header with inline legend */
.dh-trend-chart-wrapper {
    margin-bottom: 0.75rem;
}

.dh-trend-chart-wrapper h4 {
    display: flex;
    align-items: center;
    gap: 1rem;
    font-size: 0.8rem;
    font-weight: 600;
    color: var(--text-secondary);
    margin-bottom: 0.5rem;
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

.dh-chart-legend {
    display: inline-flex;
    gap: 1rem;
    font-size: 0.75rem;
    font-weight: 400;
    text-transform: none;
    letter-spacing: 0;
}

.dh-legend-race {
    color: var(--accent-success);
}

.dh-legend-quali {
    color: var(--accent-primary);
}

.dh-trend-chart-wrapper canvas {
    max-height: 200px;
}

/* Sessions toggle - minimal */
.dh-sessions-toggle {
    margin-top: 0.75rem;
    padding-top: 0.75rem;
    border-top: 1px solid var(--border-color);
    text-align: left;
}

.dh-sessions-toggle .btn-ghost {
    font-size: 0.8rem;
    padding: 0.35rem 0.75rem;
}

/* Mobile responsive */
@media (max-width: 600px) {
    .dh-records-section {
        grid-template-columns: 1fr;
    }

    .dh-record-time {
        font-size: 1.3rem;
    }

    .dh-detail-stats {
        flex-direction: column;
    }
}

/* ============================================================
   LAYOUT VARIANTS - DRIVER HISTORY NEW SYSTEM
   ============================================================ */

/* ===== MAIN HEADER ===== */
.dh-main-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 1rem 0;
    margin-bottom: 1.5rem;
    border-bottom: 1px solid var(--border-color);
    flex-wrap: wrap;
    gap: 1rem;
}

.dh-header-left {
    display: flex;
    align-items: center;
    gap: 1rem;
}

.dh-header-left .dh-title {
    font-family: var(--font-display);
    font-size: 1.25rem;
    font-weight: 700;
    letter-spacing: 1px;
    margin: 0;
}

/* ===== TOGGLE CONTROLS ===== */
.dh-variant-toggles {
    display: flex;
    gap: 1.5rem;
    align-items: center;
}

.dh-toggle-group {
    display: flex;
    align-items: center;
    gap: 0.5rem;
}

.dh-toggle-label {
    font-size: 0.75rem;
    color: var(--text-muted);
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

.dh-toggle-buttons {
    display: flex;
    background: var(--bg-secondary);
    padding: 3px;
    border-radius: var(--border-radius-md);
    border: 1px solid var(--border-color);
}

.dh-variant-btn {
    padding: 0.4rem 0.8rem;
    font-size: 0.75rem;
    font-weight: 500;
    background: transparent;
    border: none;
    border-radius: var(--border-radius-sm);
    color: var(--text-muted);
    cursor: pointer;
    transition: all 0.15s ease;
}

.dh-variant-btn:hover {
    color: var(--text-primary);
}

.dh-variant-btn.active {
    background: var(--accent-primary);
    color: white;
}

/* ===== DYNAMIC LAYOUT CONTAINER ===== */
.dh-dynamic-layout {
    display: grid;
    gap: 1rem;
    min-height: 500px;
}

/* ===== COMMON SECTIONS ===== */

/* Header Info Bar */
.dh-info-bar {
    display: flex;
    gap: 2rem;
    padding: 0.75rem 1.25rem;
    background: var(--bg-card);
    border: 1px solid var(--border-color);
    border-radius: var(--border-radius-md);
    align-items: center;
    flex-wrap: wrap;
}

.dh-pilot-name {
    font-family: var(--font-display);
    font-size: 1rem;
    font-weight: 600;
}

.dh-period {
    color: var(--text-muted);
    font-size: 0.85rem;
}

.dh-info-stats {
    display: flex;
    gap: 1.5rem;
    margin-left: auto;
}

.dh-info-stat {
    display: flex;
    align-items: baseline;
    gap: 0.35rem;
    font-size: 0.85rem;
}

.dh-info-stat strong {
    color: var(--text-primary);
}

.dh-info-stat span {
    color: var(--text-muted);
}

/* Best Reference Cards */
.dh-best-cards {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 1rem;
}

.dh-best-card {
    background: var(--bg-card);
    border: 1px solid var(--border-color);
    border-radius: var(--border-radius-lg);
    padding: 1.25rem;
    transition: all 0.2s ease;
}

.dh-best-card:hover {
    transform: translateY(-2px);
    box-shadow: var(--shadow-md);
}

.dh-best-card.quali {
    border-left: 3px solid var(--accent-primary);
}

.dh-best-card.race {
    border-left: 3px solid var(--accent-success);
}

.dh-best-card-type {
    font-size: 0.7rem;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    color: var(--text-muted);
    margin-bottom: 0.35rem;
}

.dh-best-card.quali .dh-best-card-type {
    color: var(--accent-primary);
}

.dh-best-card.race .dh-best-card-type {
    color: var(--accent-success);
}

.dh-best-card-time {
    font-family: var(--font-display);
    font-size: 1.75rem;
    font-weight: 700;
    color: var(--text-primary);
    margin-bottom: 0.5rem;
    line-height: 1;
}

.dh-best-card-meta {
    font-size: 0.8rem;
    color: var(--text-secondary);
}

.dh-best-card-date {
    font-size: 0.75rem;
    color: var(--text-muted);
    margin-top: 0.25rem;
}

/* Performance Trend Chart Section */
.dh-trend-section {
    background: var(--bg-card);
    border: 1px solid var(--border-color);
    border-radius: var(--border-radius-lg);
    padding: 1.25rem;
}

.dh-trend-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 0.75rem;
}

.dh-trend-title {
    font-size: 0.8rem;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    color: var(--text-secondary);
}

.dh-trend-controls {
    display: flex;
    align-items: center;
    gap: 1rem;
}

.dh-trend-legend {
    display: flex;
    gap: 1rem;
    font-size: 0.75rem;
}

.dh-trend-legend-item {
    display: flex;
    align-items: center;
    gap: 0.35rem;
}

.dh-trend-legend-dot {
    width: 8px;
    height: 8px;
    border-radius: 50%;
}

.dh-trend-legend-dot.race {
    background: var(--accent-success);
}

.dh-trend-legend-dot.quali {
    background: var(--accent-primary);
}

.dh-trend-checkbox {
    display: flex;
    align-items: center;
    gap: 0.35rem;
    font-size: 0.75rem;
    color: var(--text-muted);
    cursor: pointer;
}

.dh-trend-checkbox input {
    accent-color: var(--accent-primary);
}

.dh-trend-canvas-wrapper {
    height: 220px;
    position: relative;
}

.dh-trend-canvas-wrapper canvas {
    width: 100% !important;
    height: 100% !important;
}

/* Filters Section */
.dh-filters-section {
    background: var(--bg-card);
    border: 1px solid var(--border-color);
    border-radius: var(--border-radius-lg);
    padding: 1rem 1.25rem;
}

.dh-filters-title {
    font-size: 0.7rem;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    color: var(--text-muted);
    margin-bottom: 0.75rem;
}

.dh-filters-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
    gap: 0.75rem;
}

.dh-filter-group label {
    display: block;
    font-size: 0.7rem;
    color: var(--text-muted);
    margin-bottom: 0.25rem;
}

.dh-filter-group select {
    width: 100%;
    padding: 0.4rem 0.6rem;
    font-size: 0.8rem;
    background: var(--bg-elevated);
    border: 1px solid var(--border-color);
    border-radius: var(--border-radius-sm);
    color: var(--text-primary);
}

/* Context Section */
.dh-context-section {
    background: var(--bg-card);
    border: 1px solid var(--border-color);
    border-radius: var(--border-radius-lg);
    padding: 1rem 1.25rem;
}

.dh-context-title {
    font-size: 0.7rem;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    color: var(--text-muted);
    margin-bottom: 0.75rem;
}

.dh-context-items {
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
}

.dh-context-item {
    display: flex;
    justify-content: space-between;
    font-size: 0.8rem;
}

.dh-context-item-label {
    color: var(--text-muted);
}

.dh-context-item-value {
    color: var(--text-primary);
    font-weight: 500;
}

/* Track Breakdown List */
.dh-tracks-section {
    background: var(--bg-card);
    border: 1px solid var(--border-color);
    border-radius: var(--border-radius-lg);
    padding: 1rem 1.25rem;
}

.dh-tracks-title {
    font-size: 0.7rem;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    color: var(--text-muted);
    margin-bottom: 0.75rem;
}

.dh-tracks-list {
    display: flex;
    flex-direction: column;
    gap: 0.35rem;
    max-height: 200px;
    overflow-y: auto;
}

.dh-track-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 0.5rem 0.75rem;
    background: var(--bg-elevated);
    border-radius: var(--border-radius-sm);
    cursor: pointer;
    transition: all 0.15s ease;
    font-size: 0.85rem;
}

.dh-track-item:hover {
    background: rgba(99, 102, 241, 0.15);
}

.dh-track-item.selected {
    background: rgba(99, 102, 241, 0.25);
    border-left: 2px solid var(--accent-primary);
}

.dh-track-item-name {
    font-weight: 500;
}

.dh-track-item-stats {
    display: flex;
    gap: 1rem;
    color: var(--text-muted);
    font-size: 0.75rem;
}

/* Key Sessions */
.dh-sessions-section {
    background: var(--bg-card);
    border: 1px solid var(--border-color);
    border-radius: var(--border-radius-lg);
    padding: 1rem 1.25rem;
}

.dh-sessions-title {
    font-size: 0.7rem;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    color: var(--text-muted);
    margin-bottom: 0.75rem;
}

.dh-key-sessions {
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
}

.dh-key-session {
    display: flex;
    align-items: center;
    gap: 0.75rem;
    padding: 0.6rem 0.75rem;
    background: var(--bg-elevated);
    border-radius: var(--border-radius-sm);
    cursor: pointer;
    transition: all 0.15s ease;
}

.dh-key-session:hover {
    background: rgba(99, 102, 241, 0.15);
}

.dh-key-session-icon {
    font-size: 1rem;
}

.dh-key-session-info {
    flex: 1;
}

.dh-key-session-type {
    font-size: 0.8rem;
    font-weight: 500;
}

.dh-key-session-date {
    font-size: 0.7rem;
    color: var(--text-muted);
}

.dh-key-session-arrow {
    color: var(--text-muted);
    font-size: 0.8rem;
}

/* ===== LAYOUT GRIDS FOR VARIANTS ===== */

/* --- STYLE A: CLASSIC/ANALYTIC --- */
.dh-layout-A1 {
    grid-template-columns: 1fr;
    grid-template-rows: auto auto auto auto auto;
    grid-template-areas:
        "info"
        "bests"
        "trend"
        "filters-context"
        "tracks-sessions";
}

.dh-layout-A1 .dh-info-bar {
    grid-area: info;
}

.dh-layout-A1 .dh-best-cards {
    grid-area: bests;
}

.dh-layout-A1 .dh-trend-section {
    grid-area: trend;
}

.dh-layout-A1 .dh-filters-context {
    grid-area: filters-context;
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 1rem;
}

.dh-layout-A1 .dh-tracks-sessions {
    grid-area: tracks-sessions;
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 1rem;
}

/* --- STYLE B: VISUAL FIRST --- */
.dh-layout-B1 {
    grid-template-columns: 1fr;
    grid-template-rows: auto auto auto auto auto;
    grid-template-areas:
        "info"
        "trend"
        "bests"
        "tracks-context"
        "sessions";
}

.dh-layout-B1 .dh-trend-section {
    grid-area: trend;
    min-height: 280px;
}

.dh-layout-B1 .dh-trend-section .dh-trend-canvas-wrapper {
    height: 260px;
}

.dh-layout-B1 .dh-best-cards {
    grid-area: bests;
}

.dh-layout-B1 .dh-info-bar {
    grid-area: info;
}

.dh-layout-B1 .dh-tracks-context {
    grid-area: tracks-context;
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 1rem;
}

.dh-layout-B1 .dh-sessions-section {
    grid-area: sessions;
}

.dh-layout-B1 .dh-key-sessions {
    flex-direction: row;
    flex-wrap: wrap;
    gap: 1rem;
}

.dh-layout-B1 .dh-key-session {
    flex: 1 1 200px;
}

/* --- STYLE C: CONTROL PANEL --- */
.dh-layout-C1 {
    grid-template-columns: 1fr;
    grid-template-rows: auto auto auto auto;
    grid-template-areas:
        "info"
        "filters-bests"
        "trend"
        "tracks-sessions";
}

.dh-layout-C1 .dh-info-bar {
    grid-area: info;
}

.dh-layout-C1 .dh-filters-bests {
    grid-area: filters-bests;
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 1rem;
}

.dh-layout-C1 .dh-trend-section {
    grid-area: trend;
}

.dh-layout-C1 .dh-tracks-sessions {
    grid-area: tracks-sessions;
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 1rem;
}

/* --- FOCUS 1: TREND-FIRST --- */
/* Same as A1 */

/* --- FOCUS 2: TRACK-FIRST --- */
.dh-layout-A2,
.dh-layout-B2,
.dh-layout-C2 {
    grid-template-columns: 1fr;
    grid-template-rows: auto auto auto auto auto;
    grid-template-areas:
        "info"
        "tracks-bests"
        "trend"
        "filters-context"
        "sessions";
}

.dh-layout-A2 .dh-tracks-bests,
.dh-layout-B2 .dh-tracks-bests,
.dh-layout-C2 .dh-tracks-bests {
    grid-area: tracks-bests;
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 1rem;
}

/* --- FOCUS 3: REFERENCE-FIRST (Coach) --- */
.dh-layout-A3,
.dh-layout-B3,
.dh-layout-C3 {
    grid-template-columns: 1fr;
    grid-template-rows: auto auto auto auto auto;
    grid-template-areas:
        "info"
        "bests-inline"
        "trend"
        "filters-tracks"
        "sessions";
}

.dh-layout-A3 .dh-bests-inline,
.dh-layout-B3 .dh-bests-inline,
.dh-layout-C3 .dh-bests-inline {
    grid-area: bests-inline;
    background: var(--bg-card);
    border: 1px solid var(--border-color);
    border-radius: var(--border-radius-lg);
    padding: 1rem 1.25rem;
}

.dh-bests-inline-row {
    display: flex;
    gap: 3rem;
    flex-wrap: wrap;
}

.dh-best-inline-item {
    display: flex;
    align-items: baseline;
    gap: 1rem;
}

.dh-best-inline-type {
    font-size: 0.75rem;
    font-weight: 600;
    text-transform: uppercase;
    color: var(--text-muted);
}

.dh-best-inline-type.quali {
    color: var(--accent-primary);
}

.dh-best-inline-type.race {
    color: var(--accent-success);
}

.dh-best-inline-time {
    font-family: var(--font-display);
    font-size: 1.25rem;
    font-weight: 700;
}

.dh-best-inline-meta {
    font-size: 0.8rem;
    color: var(--text-muted);
}

/* ===== RESPONSIVE ===== */
@media (max-width: 900px) {
    .dh-main-header {
        flex-direction: column;
        align-items: flex-start;
    }

    .dh-variant-toggles {
        flex-wrap: wrap;
    }

    .dh-layout-A1 .dh-filters-context,
    .dh-layout-A1 .dh-tracks-sessions,
    .dh-layout-B1 .dh-tracks-context,
    .dh-layout-C1 .dh-filters-bests,
    .dh-layout-C1 .dh-tracks-sessions,
    .dh-layout-A2 .dh-tracks-bests,
    .dh-layout-B2 .dh-tracks-bests,
    .dh-layout-C2 .dh-tracks-bests {
        grid-template-columns: 1fr;
    }

    .dh-best-cards {
        grid-template-columns: 1fr;
    }

    .dh-info-stats {
        margin-left: 0;
        width: 100%;
        justify-content: flex-start;
    }
}

@media (max-width: 600px) {
    .dh-toggle-group {
        flex-direction: column;
        align-items: flex-start;
        gap: 0.25rem;
    }

    .dh-bests-inline-row {
        flex-direction: column;
        gap: 1rem;
    }
}

/* ===== ADDITIONAL LAYOUT SECTION STYLES ===== */

/* Filters + Tracks Row */
.dh-filters-tracks {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 1rem;
}

/* Bests Vertical Container */
.dh-bests-vertical .dh-best-cards {
    grid-template-columns: 1fr;
}

/* Focus 2 (Track-First) specific */
.dh-layout-A2 .dh-trend-section,
.dh-layout-B2 .dh-trend-section,
.dh-layout-C2 .dh-trend-section {
    grid-area: trend;
}

.dh-layout-A2 .dh-filters-context,
.dh-layout-B2 .dh-filters-context,
.dh-layout-C2 .dh-filters-context {
    grid-area: filters-context;
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 1rem;
}

.dh-layout-A2 .dh-sessions-section,
.dh-layout-B2 .dh-sessions-section,
.dh-layout-C2 .dh-sessions-section {
    grid-area: sessions;
}

/* Focus 3 (Coach/Reference-First) specific */
.dh-layout-A3 .dh-filters-tracks,
.dh-layout-B3 .dh-filters-tracks,
.dh-layout-C3 .dh-filters-tracks {
    grid-area: filters-tracks;
}

.dh-layout-A3 .dh-trend-section,
.dh-layout-B3 .dh-trend-section,
.dh-layout-C3 .dh-trend-section {
    grid-area: trend;
}

.dh-layout-A3 .dh-sessions-section,
.dh-layout-B3 .dh-sessions-section,
.dh-layout-C3 .dh-sessions-section {
    grid-area: sessions;
}

/* Style B Visual Enhancements */
.dh-layout-B1 .dh-trend-section,
.dh-layout-B2 .dh-trend-section,
.dh-layout-B3 .dh-trend-section {
    background: linear-gradient(135deg, var(--bg-card) 0%, rgba(99, 102, 241, 0.05) 100%);
    border-color: rgba(99, 102, 241, 0.2);
}

/* Style C Control Panel Styling */
.dh-layout-C1 .dh-filters-section,
.dh-layout-C2 .dh-filters-section,
.dh-layout-C3 .dh-filters-section {
    background: var(--bg-elevated);
    border-color: rgba(99, 102, 241, 0.15);
}

/* Selected Track Highlight on Best Cards */
.dh-best-card:hover {
    cursor: pointer;
}

.dh-best-card.selected {
    border-color: var(--accent-primary);
    box-shadow: 0 0 12px rgba(99, 102, 241, 0.3);
}

/* Enhanced empty state for chart */
.dh-trend-canvas-wrapper.no-data {
    display: flex;
    align-items: center;
    justify-content: center;
    color: var(--text-muted);
    font-size: 0.9rem;
}

/* Key sessions horizontal layout for Style B */
.dh-layout-B1 .dh-key-sessions,
.dh-layout-B2 .dh-key-sessions,
.dh-layout-B3 .dh-key-sessions {
    display: flex;
    flex-direction: row;
    flex-wrap: wrap;
    gap: 0.75rem;
}

.dh-layout-B1 .dh-key-session,
.dh-layout-B2 .dh-key-session,
.dh-layout-B3 .dh-key-session {
    flex: 1 1 180px;
}

/* Improved responsive breakpoints */
@media (max-width: 1200px) {

    .dh-filters-tracks,
    .dh-filters-context,
    .dh-tracks-bests,
    .dh-tracks-sessions,
    .dh-tracks-context,
    .dh-filters-bests {
        grid-template-columns: 1fr;
    }

    .dh-bests-vertical .dh-best-cards {
        grid-template-columns: 1fr 1fr;
    }
}

@media (max-width: 768px) {
    .dh-best-cards {
        grid-template-columns: 1fr;
    }

    .dh-bests-inline-row {
        flex-direction: column;
        gap: 1rem;
    }

    .dh-info-bar {
        flex-direction: column;
        align-items: flex-start;
        gap: 1rem;
    }

    .dh-info-stats {
        margin-left: 0;
        flex-wrap: wrap;
    }

    .dh-layout-B1 .dh-key-sessions,
    .dh-layout-B2 .dh-key-sessions,
    .dh-layout-B3 .dh-key-sessions {
        flex-direction: column;
    }
}

/* ============================================================
   DRIVER HISTORY - SIMPLIFIED LAYOUT
   ============================================================ */

/* Pilot Bar (Header 1) */
.dh-pilot-bar {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 0.75rem 1.25rem;
    background: var(--bg-card);
    border: 1px solid var(--border-color);
    border-radius: var(--border-radius-md);
    margin-bottom: 0.5rem;
}

.dh-pilot-info {
    display: flex;
    align-items: baseline;
    gap: 1rem;
}

.dh-pilot-name {
    font-family: var(--font-display);
    font-size: 1rem;
    font-weight: 600;
    color: var(--text-primary);
}

.dh-pilot-period {
    font-size: 0.85rem;
    color: var(--text-muted);
}

.dh-pilot-stats {
    display: flex;
    gap: 2rem;
}

.dh-pilot-stats .dh-stat {
    font-size: 0.85rem;
    color: var(--text-muted);
}

.dh-pilot-stats .dh-stat strong {
    color: var(--text-primary);
    font-weight: 600;
}

/* Bests Bar (Header 2) */
.dh-bests-bar {
    display: flex;
    gap: 2rem;
    padding: 0.75rem 1.25rem;
    background: var(--bg-card);
    border: 1px solid var(--border-color);
    border-radius: var(--border-radius-md);
    margin-bottom: 1rem;
}

.dh-best-item {
    display: flex;
    align-items: center;
    gap: 1rem;
}

.dh-best-label {
    font-size: 0.7rem;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

.dh-best-quali .dh-best-label {
    color: var(--accent-primary);
}

.dh-best-race .dh-best-label {
    color: var(--accent-success);
}

.dh-best-time {
    font-family: var(--font-display);
    font-size: 1.5rem;
    font-weight: 700;
    color: var(--text-primary);
}

.dh-best-meta {
    font-size: 0.8rem;
    color: var(--text-muted);
}

/* Chart Section */
.dh-chart-section {
    background: var(--bg-card);
    border: 1px solid var(--border-color);
    border-radius: var(--border-radius-lg);
    padding: 1.25rem;
    margin-bottom: 1rem;
}

.dh-chart-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 1rem;
}

.dh-chart-title {
    font-family: var(--font-display);
    font-size: 0.9rem;
    font-weight: 600;
    color: var(--text-secondary);
}

.dh-chart-legend {
    display: flex;
    gap: 1.5rem;
    font-size: 0.8rem;
}

.dh-legend-item {
    display: flex;
    align-items: center;
    gap: 0.4rem;
    color: var(--text-muted);
}

.dh-legend-dot {
    width: 10px;
    height: 10px;
    border-radius: 50%;
}

.dh-legend-dot.quali {
    background: var(--accent-primary);
}

.dh-legend-dot.race {
    background: var(--accent-success);
}

.dh-chart-wrapper {
    height: 300px;
    position: relative;
}

.dh-chart-wrapper canvas {
    width: 100% !important;
    height: 100% !important;
}

/* Back button */
.dh-back-btn {
    margin-top: 0.5rem;
}

/* Responsive */
@media (max-width: 768px) {
    .dh-pilot-bar {
        flex-direction: column;
        align-items: flex-start;
        gap: 0.75rem;
    }

    .dh-pilot-stats {
        flex-wrap: wrap;
        gap: 1rem;
    }

    .dh-bests-bar {
        flex-direction: column;
        gap: 1rem;
    }
}

/* ============================================================
   DRIVER HISTORY - ENHANCED STYLING
   ============================================================ */

/* Main Content: Chart + Track List side by side */
.dh-main-content {
    display: grid;
    grid-template-columns: 1fr 200px;
    gap: 1rem;
    margin-bottom: 1rem;
}

/* Chart Section - enhanced */
.dh-chart-section {
    flex: 1;
}

.dh-chart-title {
    font-family: var(--font-display);
    font-size: 1.25rem;
    font-weight: 700;
    color: #ffffff;
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

/* Track Sidebar */
.dh-track-sidebar {
    background: var(--bg-card);
    border: 1px solid var(--border-color);
    border-radius: var(--border-radius-lg);
    padding: 1rem;
    display: flex;
    flex-direction: column;
}

.dh-sidebar-title {
    font-family: var(--font-display);
    font-size: 0.8rem;
    font-weight: 600;
    color: var(--text-muted);
    text-transform: uppercase;
    letter-spacing: 0.5px;
    margin-bottom: 0.75rem;
    padding-bottom: 0.5rem;
    border-bottom: 1px solid var(--border-color);
}

.dh-track-list {
    display: flex;
    flex-direction: column;
    gap: 0.25rem;
    overflow-y: auto;
    max-height: 260px;
}

.dh-track-item {
    padding: 0.6rem 0.75rem;
    background: transparent;
    border: 1px solid transparent;
    border-radius: var(--border-radius-md);
    cursor: pointer;
    transition: all 0.2s ease;
    font-size: 0.85rem;
    color: var(--text-secondary);
}

.dh-track-item:hover {
    background: rgba(99, 102, 241, 0.1);
    border-color: rgba(99, 102, 241, 0.2);
}

.dh-track-item.active {
    background: rgba(99, 102, 241, 0.15);
    border-color: var(--accent-primary);
    color: var(--text-primary);
    font-weight: 600;
}

/* Best Times Bar - Enhanced Layout */
.dh-bests-bar {
    display: flex;
    align-items: stretch;
    gap: 0;
    padding: 0;
    background: var(--bg-card);
    border: 1px solid var(--border-color);
    border-radius: var(--border-radius-md);
    margin-bottom: 1rem;
    overflow: hidden;
}

.dh-best-item {
    flex: 1;
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 1rem 1.5rem;
    gap: 1.5rem;
}

.dh-best-separator {
    width: 1px;
    background: var(--border-color);
    align-self: stretch;
}

.dh-best-content {
    display: flex;
    align-items: center;
    gap: 1rem;
}

.dh-best-label {
    font-size: 0.7rem;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    white-space: nowrap;
}

.dh-best-quali .dh-best-label {
    color: var(--accent-primary);
}

.dh-best-race .dh-best-label {
    color: var(--accent-success);
}

.dh-best-time {
    font-family: var(--font-display);
    font-size: 1.6rem;
    font-weight: 700;
    color: var(--text-primary);
}

.dh-best-details {
    display: flex;
    flex-direction: column;
    align-items: flex-end;
    gap: 0.4rem;
}

.dh-best-meta {
    font-size: 0.75rem;
    color: var(--text-muted);
    text-align: right;
}

.dh-best-cta {
    background: transparent;
    border: 1px solid rgba(99, 102, 241, 0.3);
    color: var(--accent-primary);
    padding: 0.35rem 0.75rem;
    border-radius: var(--border-radius-sm);
    font-size: 0.7rem;
    font-weight: 500;
    cursor: pointer;
    transition: all 0.2s ease;
    white-space: nowrap;
}

.dh-best-cta:hover {
    background: rgba(99, 102, 241, 0.15);
    border-color: var(--accent-primary);
}

.dh-best-race .dh-best-cta {
    border-color: rgba(16, 185, 129, 0.3);
    color: var(--accent-success);
}

.dh-best-race .dh-best-cta:hover {
    background: rgba(16, 185, 129, 0.15);
    border-color: var(--accent-success);
}

/* Responsive */
@media (max-width: 900px) {
    .dh-main-content {
        grid-template-columns: 1fr;
    }

    .dh-track-sidebar {
        order: -1;
    }

    .dh-track-list {
        flex-direction: row;
        flex-wrap: wrap;
        max-height: none;
    }

    .dh-track-item {
        flex: 0 0 auto;
    }
}

@media (max-width: 768px) {
    .dh-bests-bar {
        flex-direction: column;
    }

    .dh-best-separator {
        width: auto;
        height: 1px;
    }

    .dh-best-item {
        flex-direction: column;
        align-items: flex-start;
        gap: 0.75rem;
    }

    .dh-best-details {
        align-items: flex-start;
    }
}

/* ============================================================
   DRIVER HISTORY - BOTTOM ROW (Best Times + Tracks)
   ============================================================ */

/* Bottom row: Best Times box + Track List side by side */
.dh-bottom-row {
    display: grid;
    grid-template-columns: 1fr 200px;
    gap: 1rem;
    margin-bottom: 1rem;
}

/* Best Times Box */
.dh-bests-box {
    background: var(--bg-card);
    border: 1px solid var(--border-color);
    border-radius: var(--border-radius-lg);
    padding: 1.25rem;
}

.dh-bests-title {
    font-family: var(--font-display);
    font-size: 0.85rem;
    color: var(--text-muted);
    margin-bottom: 1rem;
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

.dh-bests-title span {
    color: var(--text-primary);
    font-weight: 600;
}

.dh-bests-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 1.5rem;
}

.dh-bests-grid .dh-best-item {
    display: flex;
    flex-direction: column;
    gap: 0.4rem;
    padding: 1rem;
    background: rgba(0, 0, 0, 0.2);
    border-radius: var(--border-radius-md);
}

.dh-bests-grid .dh-best-label {
    font-size: 0.65rem;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

.dh-bests-grid .dh-best-quali .dh-best-label {
    color: var(--accent-primary);
}

.dh-bests-grid .dh-best-race .dh-best-label {
    color: var(--accent-success);
}

.dh-bests-grid .dh-best-time {
    font-family: var(--font-display);
    font-size: 1.5rem;
    font-weight: 700;
    color: var(--text-primary);
}

.dh-bests-grid .dh-best-meta {
    font-size: 0.75rem;
    color: var(--text-muted);
}

.dh-bests-grid .dh-best-cta {
    margin-top: 0.5rem;
    align-self: flex-start;
}

/* Last Session indicator in header */
.dh-last-session {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    background: rgba(99, 102, 241, 0.1);
    border: 1px solid rgba(99, 102, 241, 0.3);
    border-radius: var(--border-radius-md);
    padding: 0.4rem 0.8rem;
}

.dh-last-label {
    font-size: 0.75rem;
    color: var(--text-muted);
}

.dh-last-track {
    font-size: 0.85rem;
    font-weight: 600;
    color: var(--accent-primary);
}

/* Responsive for bottom row */
@media (max-width: 900px) {
    .dh-bottom-row {
        grid-template-columns: 1fr;
    }

    .dh-bests-grid {
        grid-template-columns: 1fr;
    }
}

/* ============================================================
   DRIVER HISTORY - HIGH-TECH LAYOUT
   ============================================================ */

/* Header Bar */
.dh-header-bar {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 0.75rem 1.25rem;
    background: var(--bg-card);
    border: 1px solid var(--border-color);
    border-radius: var(--border-radius-lg);
    margin-bottom: 1rem;
    backdrop-filter: blur(10px);
}

.dh-header-left {
    display: flex;
    align-items: center;
}

.dh-period {
    font-size: 0.9rem;
    color: var(--text-muted);
    font-family: var(--font-display);
}

/* Last Session Button (clickable) */
.dh-last-session-btn {
    display: flex;
    align-items: center;
    gap: 0.75rem;
    background: rgba(99, 102, 241, 0.1);
    border: 1px solid rgba(99, 102, 241, 0.4);
    border-radius: var(--border-radius-md);
    padding: 0.5rem 1rem;
    cursor: pointer;
    transition: all 0.2s ease;
}

.dh-last-session-btn:hover {
    background: rgba(99, 102, 241, 0.2);
    border-color: var(--accent-primary);
    transform: translateX(2px);
}

.dh-last-label {
    font-size: 0.7rem;
    color: var(--text-muted);
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

.dh-last-track {
    font-size: 0.95rem;
    font-weight: 600;
    color: var(--accent-primary);
}

.dh-last-arrow {
    font-size: 1rem;
    color: var(--accent-primary);
    transition: transform 0.2s ease;
}

.dh-last-session-btn:hover .dh-last-arrow {
    transform: translateX(3px);
}

/* Header Stats */
.dh-header-stats {
    display: flex;
    gap: 2rem;
}

.dh-stat-item {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 0.1rem;
}

.dh-stat-value {
    font-family: var(--font-display);
    font-size: 1rem;
    font-weight: 700;
    color: var(--text-primary);
}

.dh-stat-label {
    font-size: 0.65rem;
    color: var(--text-muted);
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

/* Main Layout: Superbox + Track Sidebar */
.dh-main-layout {
    display: grid;
    grid-template-columns: 1fr 180px;
    gap: 1rem;
    margin-bottom: 1rem;
}

/* SUPERBOX: Records + Chart container */
.dh-superbox {
    display: flex;
    flex-direction: column;
    gap: 0;
    background: var(--bg-card);
    border: 1px solid var(--border-color);
    border-radius: var(--border-radius-sm);
    overflow: hidden;
    border: 1px solid var(--border-color);
    border-radius: var(--border-radius-lg);

    box-shadow:
        0 4px 24px rgba(0, 0, 0, 0.3),
        inset 0 1px 0 rgba(255, 255, 255, 0.05);
}

/* Records Section */
.dh-records-section {
    padding: 1rem 1.25rem;
    background: rgba(99, 102, 241, 0.05);
    border-bottom: 1px solid rgba(99, 102, 241, 0.1);
}

.dh-records-header {
    display: flex;
    align-items: center;
    gap: 0.75rem;
}

.dh-records-title {
    font-family: var(--font-display);
    font-size: 0.7rem;
    font-weight: 700;
    color: var(--text-secondary);
    text-transform: uppercase;
    letter-spacing: 1px;
}

.dh-records-track {
    font-family: var(--font-display);
    font-size: 1.25rem;
    font-weight: 700;
    color: #ffffff;
}

.dh-records-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 1rem;
}

/* Record Cards */
.dh-record-card {
    display: flex;
    align-items: center;
    gap: 1rem;
    padding: 0.75rem 1rem;
    background: rgba(0, 0, 0, 0.3);
    border-radius: var(--border-radius-md);
    border-left: 3px solid;
    position: relative;
}

.dh-record-quali {
    border-left-color: var(--accent-primary);
}

.dh-record-race {
    border-left-color: var(--accent-success);
}

.dh-record-type {
    font-size: 0.6rem;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    min-width: 70px;
}

.dh-record-quali .dh-record-type {
    color: var(--accent-primary);
}

.dh-record-race .dh-record-type {
    color: var(--accent-success);
}

.dh-record-time {
    font-family: var(--font-display);
    font-size: 1.4rem;
    font-weight: 700;
    color: var(--text-primary);
    flex: 1;
}

.dh-record-meta {
    font-size: 0.75rem;
    color: var(--text-muted);
    flex: 1;
}

.dh-record-cta {
    width: 32px;
    height: 32px;
    border-radius: 50%;
    border: 1px solid rgba(255, 255, 255, 0.2);
    background: transparent;
    color: var(--text-muted);
    font-size: 1rem;
    cursor: pointer;
    transition: all 0.2s ease;
    display: flex;
    align-items: center;
    justify-content: center;
}

.dh-record-cta:hover {
    background: rgba(99, 102, 241, 0.2);
    border-color: var(--accent-primary);
    color: var(--accent-primary);
    transform: scale(1.1);
}

.dh-record-cta.hidden {
    opacity: 0.3;
    pointer-events: none;
}

/* Chart Section (within Superbox) */
.dh-superbox .dh-chart-section {
    padding: 1.5rem;
    border: none;
    background: transparent;
    margin: 0;
    border-radius: 0;
}

/* Track Sidebar (Full Height) */
.dh-track-sidebar {
    background: var(--bg-card);
    border: 1px solid rgba(99, 102, 241, 0.15);
    border-radius: var(--border-radius-lg);
    padding: 1rem;
    display: flex;
    flex-direction: column;
}

.dh-sidebar-header {
    font-family: var(--font-display);
    font-size: 0.7rem;
    font-weight: 700;
    color: var(--text-muted);
    text-transform: uppercase;
    letter-spacing: 1px;
    margin-bottom: 0.75rem;
    padding-bottom: 0.5rem;
    border-bottom: 1px solid rgba(99, 102, 241, 0.15);
}

.dh-track-list {
    display: flex;
    flex-direction: column;
    gap: 0.25rem;
    overflow-y: auto;
    flex: 1;
}

.dh-track-item {
    padding: 0.6rem 0.75rem;
    background: transparent;
    border: 1px solid transparent;
    border-radius: var(--border-radius-sm);
    cursor: pointer;
    transition: all 0.15s ease;
    font-size: 0.8rem;
    color: var(--text-secondary);
    border-left: 2px solid transparent;
}

.dh-track-item:hover {
    background: rgba(99, 102, 241, 0.1);
    color: var(--text-primary);
}

.dh-track-item.active {
    background: rgba(99, 102, 241, 0.15);
    border-left-color: var(--accent-primary);
    color: #ffffff;
    font-weight: 600;
}

/* Responsive */
@media (max-width: 900px) {
    .dh-main-layout {
        grid-template-columns: 1fr;
    }

    .dh-track-sidebar {
        order: -1;
    }

    .dh-records-grid {
        grid-template-columns: 1fr;
    }

    .dh-header-bar {
        flex-wrap: wrap;
        gap: 0.75rem;
    }
}

/* ============================================================
   DRIVER HISTORY - RECORD CARDS FIX (Better Spacing)
   ============================================================ */

/* Override cramped record cards */
.dh-records-section {
    padding: 1.5rem;
}

.dh-records-grid {
    gap: 1.5rem;
}

.dh-record-card {
    padding: 1rem 1.25rem;
    gap: 1.25rem;
    min-height: 70px;
}

.dh-record-type {
    font-size: 0.7rem;
    min-width: 80px;
    line-height: 1.4;
}

.dh-record-time {
    font-size: 1.5rem;
    min-width: 120px;
    letter-spacing: 0.5px;
}

.dh-record-meta {
    font-size: 0.8rem;
    line-height: 1.4;
    min-width: 80px;
    white-space: nowrap;
}

.dh-record-cta {
    width: 36px;
    height: 36px;
    flex-shrink: 0;
}

/* Records header spacing */
.dh-records-header {
    gap: 1rem;
}

.dh-records-title {
    font-size: 0.75rem;
}

.dh-records-track {
    font-size: 1.1rem;
}

/* ============================================================
   NAVBAR LIQUID GLASS HIDE EFFECT (Apple-style)
   ============================================================ */

/* Navbar glass transition */
.main-nav {
    transition:
        opacity 0.5s cubic-bezier(0.4, 0, 0.2, 1),
        transform 0.5s cubic-bezier(0.4, 0, 0.2, 1),
        filter 0.5s cubic-bezier(0.4, 0, 0.2, 1),
        backdrop-filter 0.5s cubic-bezier(0.4, 0, 0.2, 1);
}

/* Hidden state with liquid glass dissolve */
.main-nav.nav-hidden {
    opacity: 0;
    transform: translateY(-20px) scale(0.98);
    filter: blur(10px);
    pointer-events: none;
}

/* Visible state - restore */
.main-nav.nav-visible {
    opacity: 1;
    transform: translateY(0) scale(1);
    filter: blur(0);
    pointer-events: auto;
}

/* During transition - glass morph effect */
.main-nav.nav-transitioning {
    backdrop-filter: blur(20px) saturate(180%);
    background: rgba(15, 23, 42, 0.3);
}

/* Also hide the top nav container if needed */
.top-nav {
    transition:
        opacity 0.5s cubic-bezier(0.4, 0, 0.2, 1),
        transform 0.5s cubic-bezier(0.4, 0, 0.2, 1),
        filter 0.5s cubic-bezier(0.4, 0, 0.2, 1);
}

.top-nav.nav-hidden {
    opacity: 0;
    transform: translateY(-15px);
    filter: blur(8px);
    pointer-events: none;
}

/* ============================================================
   FIXES: Navbar, Overflow, Chart
   ============================================================ */

/* FIX 1: Navbar glass effect - target correct class */
.nav-tabs {
    transition:
        opacity 0.5s cubic-bezier(0.4, 0, 0.2, 1),
        transform 0.5s cubic-bezier(0.4, 0, 0.2, 1),
        filter 0.5s cubic-bezier(0.4, 0, 0.2, 1),
        backdrop-filter 0.5s cubic-bezier(0.4, 0, 0.2, 1) !important;
}

.nav-tabs.nav-hidden {
    opacity: 0 !important;
    transform: translateY(-20px) scale(0.98) !important;
    filter: blur(10px) !important;
    pointer-events: none !important;
    max-height: 0 !important;
    margin: 0 !important;
    padding: 0 !important;
    overflow: hidden !important;
}

.nav-tabs.nav-visible {
    opacity: 1 !important;
    transform: translateY(0) scale(1) !important;
    filter: blur(0) !important;
    pointer-events: auto !important;
}

.nav-tabs.nav-transitioning {
    backdrop-filter: blur(20px) saturate(180%);
    background: rgba(15, 23, 42, 0.3);
}

/* FIX 2: Record cards - prevent overflow */
.dh-records-section {
    overflow: hidden;
}

.dh-records-grid {
    width: 100%;
    max-width: 100%;
}

.dh-record-card {
    overflow: hidden;
    flex-wrap: nowrap;
    max-width: 100%;
}

.dh-record-meta {
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
    max-width: 120px;
}

.dh-record-time {
    flex-shrink: 0;
}

/* FIX 3: Chart X-axis - ensure dates visible */
.dh-chart-wrapper {
    min-height: 200px;
    padding-bottom: 30px;
}

.dh-chart-wrapper canvas {
    max-height: 250px;
}

/* ============================================================
   NAVBAR MORPH: Liquid Glass Transformation
   ============================================================ */

/* Container for main nav tabs */
.nav-tabs-main {
    display: flex;
    gap: 0.5rem;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

/* Container for back button (hidden by default) */
.nav-tabs-back {
    display: none;
    justify-content: center;
    align-items: center;
    width: 100%;
}

/* Morphing state: blur and scale effect */
.nav-tabs.nav-morphing {
    transform: scale(0.98);
    filter: blur(4px);
    opacity: 0.6;
}

/* Back mode: narrower navbar with centered content */
.nav-tabs.nav-back-mode {
    background: linear-gradient(135deg,
            rgba(99, 102, 241, 0.15) 0%,
            rgba(139, 92, 246, 0.1) 50%,
            rgba(15, 23, 42, 0.8) 100%);
    backdrop-filter: blur(20px) saturate(180%);
    border: 1px solid rgba(99, 102, 241, 0.3);
    box-shadow:
        0 0 30px rgba(99, 102, 241, 0.15),
        inset 0 1px 0 rgba(255, 255, 255, 0.1);
}

/* Back button styling - Liquid Glass Premium */
.nav-back-btn {
    display: flex;
    align-items: center;
    gap: 0.75rem;
    padding: 0.75rem 2rem;
    background: linear-gradient(135deg,
            rgba(99, 102, 241, 0.2) 0%,
            rgba(139, 92, 246, 0.15) 100%);
    border: 1px solid rgba(99, 102, 241, 0.4);
    border-radius: 12px;
    color: #fff;
    font-family: 'Outfit', sans-serif;
    font-size: 0.95rem;
    font-weight: 600;
    letter-spacing: 0.05em;
    cursor: pointer;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    backdrop-filter: blur(10px);
}

.nav-back-btn:hover {
    background: linear-gradient(135deg,
            rgba(99, 102, 241, 0.35) 0%,
            rgba(139, 92, 246, 0.25) 100%);
    border-color: rgba(99, 102, 241, 0.6);
    transform: translateX(-3px);
    box-shadow:
        0 0 20px rgba(99, 102, 241, 0.3),
        0 4px 15px rgba(0, 0, 0, 0.2);
}

.nav-back-btn:active {
    transform: translateX(-1px) scale(0.98);
}

.nav-back-arrow {
    font-size: 1.2rem;
    font-weight: 400;
    transition: transform 0.3s ease;
}

.nav-back-btn:hover .nav-back-arrow {
    transform: translateX(-4px);
}

.nav-back-label {
    text-transform: uppercase;
}

/* Smooth transition for the navbar itself */
.nav-tabs {
    transition:
        transform 0.3s cubic-bezier(0.4, 0, 0.2, 1),
        filter 0.3s cubic-bezier(0.4, 0, 0.2, 1),
        opacity 0.3s cubic-bezier(0.4, 0, 0.2, 1),
        background 0.3s ease,
        border-color 0.3s ease,
        box-shadow 0.3s ease !important;
}

/* ============================================================
   FIX: Unified Box, Track List, and Navbar Styling
   ============================================================ */

/* Unified Box containing both Graph and Tracks */
.dh-unified-box {



    flex: 1;
}

/* Track item text: no wrap, ellipsis */
.dh-track-item {
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    max-width: 100%;
}

.dh-track-name {
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    display: block;
    max-width: 140px;
}

/* Track sidebar: full height, scrollbar only when needed */
.dh-track-sidebar {
    display: flex;
    flex-direction: column;
    height: auto;
    min-height: 0;
}

.dh-track-list {
    flex: 1;
    overflow-y: auto;
    overflow-x: hidden;
    min-height: 0;
}

/* Hide scrollbar by default, show on hover */
.dh-track-list::-webkit-scrollbar {
    width: 6px;
}

.dh-track-list::-webkit-scrollbar-track {
    background: transparent;
}

.dh-track-list::-webkit-scrollbar-thumb {
    background: rgba(99, 102, 241, 0.3);
    border-radius: 3px;
}

.dh-track-list::-webkit-scrollbar-thumb:hover {
    background: rgba(99, 102, 241, 0.5);
}

/* Main layout flex for full height */
.dh-main-layout {
    display: flex;
    gap: 1.5rem;
    height: 100%;
    min-height: 0;
}

/* ============================================================
   FIX: Navbar Styling - Match Screenshots
   ============================================================ */

/* Reset navbar - match the screenshot styling */
.nav-tabs {
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 0;
    padding: 5px;
    margin: 0 auto 1.5rem;
    background: linear-gradient(135deg,
            rgba(255, 255, 255, 0.06) 0%,
            rgba(255, 255, 255, 0.02) 100%);
    border: 1px solid rgba(255, 255, 255, 0.1);
    border-radius: 12px;
    max-width: max-content;
}

.nav-tabs-main {
    display: flex;
    gap: 0;
    align-items: center;
}

/* Back button container - same size as main tabs */
.nav-tabs-back {
    display: none;
    justify-content: center;
    align-items: center;
}

/* Back button styling to match nav-tab */
.nav-back-btn {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    padding: 0.75rem 1.5rem;
    background: linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%);
    border: none;
    border-radius: 8px;
    color: #fff;
    font-family: 'Outfit', sans-serif;
    font-size: 0.85rem;
    font-weight: 600;
    letter-spacing: 0.05em;
    cursor: pointer;
    transition: all 0.2s ease;
    text-transform: uppercase;
}

.nav-back-btn:hover {
    background: linear-gradient(135deg, #818cf8 0%, #a78bfa 100%);
    transform: translateX(-2px);
}

.nav-back-arrow {
    font-size: 1rem;
    transition: transform 0.2s ease;
}

.nav-back-btn:hover .nav-back-arrow {
    transform: translateX(-3px);
}

/* Morphing state */
.nav-tabs.nav-morphing {
    transform: scale(0.97);
    filter: blur(2px);
    opacity: 0.7;
}

/* Back mode - slightly different background */
.nav-tabs.nav-back-mode {
    background: rgba(15, 23, 42, 0.9);
    border-color: rgba(99, 102, 241, 0.4);
}

/* ============================================================
   NAVBAR: Full Width + Shrink Left Animation
   ============================================================ */

/* Override: Navbar FULL WIDTH normally */
.nav-tabs {
    display: flex !important;
    width: 100% !important;
    max-width: 100% !important;
    justify-content: stretch !important;
    margin: 0 0 1.5rem 0 !important;
    transition:
        width 0.4s cubic-bezier(0.4, 0, 0.2, 1),
        max-width 0.4s cubic-bezier(0.4, 0, 0.2, 1),
        transform 0.3s cubic-bezier(0.4, 0, 0.2, 1),
        filter 0.3s cubic-bezier(0.4, 0, 0.2, 1),
        opacity 0.3s cubic-bezier(0.4, 0, 0.2, 1) !important;
}

/* Main tabs container - fill full width */
.nav-tabs-main {
    display: flex !important;
    flex: 1 !important;
    width: 100% !important;
}

/* Each nav-tab should expand to fill */
.nav-tabs .nav-tab {
    flex: 1 !important;
    text-align: center !important;
}

/* ============================================================
   BACK MODE: Shrink to left
   ============================================================ */
.nav-tabs.nav-back-mode {
    width: auto !important;
    max-width: max-content !important;
    justify-content: flex-start !important;
}

/* Back button container */
.nav-tabs-back {
    display: none;
    width: auto;
}

.nav-tabs.nav-back-mode .nav-tabs-back {
    display: flex !important;
}

/* Back button itself - compact design */
.nav-back-btn {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    padding: 0.75rem 1.25rem;
    background: linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%);
    border: none;
    border-radius: 8px;
    color: #fff;
    font-family: 'Outfit', sans-serif;
    font-size: 0.85rem;
    font-weight: 600;
    letter-spacing: 0.03em;
    cursor: pointer;
    transition: all 0.2s ease;
    white-space: nowrap;
}

.nav-back-btn:hover {
    background: linear-gradient(135deg, #818cf8 0%, #a78bfa 100%);
    transform: translateX(-2px);
    box-shadow: 0 4px 15px rgba(99, 102, 241, 0.3);
}

.nav-back-arrow {
    font-size: 1rem;
    transition: transform 0.2s ease;
}

.nav-back-btn:hover .nav-back-arrow {
    transform: translateX(-3px);
}

.nav-back-label {
    text-transform: uppercase;
}

/* ============================================================
   FIX: Hide main tabs when in back mode
   ============================================================ */

/* When nav-tabs is in back mode, hide the main tabs */
.nav-tabs.nav-back-mode .nav-tabs-main {
    display: none !important;
}

/* Show back button only in back mode */
.nav-tabs:not(.nav-back-mode) .nav-tabs-back {
    display: none !important;
}

/* ============================================================
   FIX: Back Button - Transparent, full-width with purple glow from nav-tab.active
   ============================================================ */

/* OVERRIDE: Back button should be like nav-tab.active - uses parent's styling */
.nav-tabs.nav-back-mode .nav-back-btn {
    background: transparent !important;
    border: none !important;
    width: 100% !important;
    border-radius: 8px !important;
    padding: 0.75rem 1.5rem !important;
    backdrop-filter: none !important;
    box-shadow: none !important;
}

/* The navbar in back mode should have the purple glow background like active tab */
.nav-tabs.nav-back-mode {
    background: linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%) !important;
    width: auto !important;
    max-width: max-content !important;
}

/* Keep the text white and properly styled */
.nav-tabs.nav-back-mode .nav-back-btn {
    color: #fff !important;
    font-weight: 600 !important;
}

.nav-tabs.nav-back-mode .nav-back-btn:hover {
    background: rgba(255, 255, 255, 0.1) !important;
    transform: translateX(-2px) !important;
}

/* ============================================================
   FINAL FIX: Back Button - Dark bg, Violet border, Orange text
   ============================================================ */

/* Navbar container in back mode - dark bg with violet border */
.nav-tabs.nav-back-mode {
    background: rgba(15, 23, 42, 0.8) !important;
    border: 1px solid rgba(99, 102, 241, 0.4) !important;
    border-radius: 12px !important;
    width: auto !important;
    max-width: max-content !important;
    padding: 0.5rem !important;
}

/* Back button - transparent with ORANGE text like STORICO */
.nav-tabs.nav-back-mode .nav-back-btn {
    background: transparent !important;
    border: none !important;
    color: #f59e0b !important;
    font-weight: 600 !important;
    padding: 0.75rem 1.5rem !important;
    border-radius: 8px !important;
}

/* Arrow also orange */
.nav-tabs.nav-back-mode .nav-back-arrow {
    color: #f59e0b !important;
}

/* Hover: slight highlight */
.nav-tabs.nav-back-mode .nav-back-btn:hover {
    background: rgba(245, 158, 11, 0.1) !important;
    color: #fbbf24 !important;
}

/* FIX: Hide the purple ::before indicator in back mode */
.nav-tabs.nav-back-mode::before {
    display: none !important;
    content: none !important;
}

/* ============================================================
   FIX: Back Button - Fluo Orange Background + White Text
   ============================================================ */

/* Override: Navbar container in back mode */
.nav-tabs.nav-back-mode {
    background: rgba(15, 23, 42, 0.8) !important;
    border: 1px solid rgba(245, 158, 11, 0.4) !important;
    border-radius: 12px !important;
    width: auto !important;
    max-width: max-content !important;
    padding: 0.5rem !important;
}

/* Back button - FLUORESCENT ORANGE background + WHITE text */
.nav-tabs.nav-back-mode .nav-back-btn {
    background: linear-gradient(135deg, #f59e0b 0%, #fbbf24 100%) !important;
    border: none !important;
    color: #ffffff !important;
    font-weight: 700 !important;
    padding: 0.75rem 1.5rem !important;
    border-radius: 8px !important;
    text-shadow: 0 1px 2px rgba(0, 0, 0, 0.2) !important;
    box-shadow: 0 4px 15px rgba(245, 158, 11, 0.3) !important;
}

/* Arrow also white */
.nav-tabs.nav-back-mode .nav-back-arrow {
    color: #ffffff !important;
}

/* Hover: brighter fluo */
.nav-tabs.nav-back-mode .nav-back-btn:hover {
    background: linear-gradient(135deg, #fbbf24 0%, #fcd34d 100%) !important;
    color: #ffffff !important;
    box-shadow: 0 6px 20px rgba(245, 158, 11, 0.5) !important;
    transform: translateX(-2px) !important;
}

/* ============================================================
   FIX: Compact Record Cards (QUALIFYING / RACE)
   ============================================================ */

/* Override: Make record cards more compact */
.dh-records-grid {
    display: flex !important;
    gap: 1rem !important;
    flex-wrap: wrap !important;
}

.dh-record-card {
    display: flex !important;
    align-items: center !important;
    gap: 0.75rem !important;
    padding: 0.6rem 1rem !important;
    min-height: auto !important;
    flex: 1 1 200px !important;
    min-width: 180px !important;
    background: rgba(15, 23, 42, 0.6) !important;
    border: 1px solid rgba(99, 102, 241, 0.2) !important;
    border-radius: 10px !important;
    border-left: 3px solid !important;
}

.dh-record-quali {
    border-left-color: var(--accent-primary) !important;
}

.dh-record-race {
    border-left-color: var(--accent-success) !important;
}

/* Type label - compact */
.dh-record-type {
    font-size: 0.65rem !important;
    font-weight: 700 !important;
    text-transform: uppercase !important;
    letter-spacing: 0.5px !important;
    min-width: 60px !important;
    margin-bottom: 0 !important;
}

/* Time - smaller */
.dh-record-time {
    font-size: 1.1rem !important;
    font-weight: 700 !important;
    flex: 1 !important;
    margin-bottom: 0 !important;
}

/* Meta - hide for compactness or keep very small */
.dh-record-meta {
    display: none !important;
}

/* Arrow button - visible and styled */
.dh-record-cta {
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    width: 28px !important;
    height: 28px !important;
    border-radius: 50% !important;
    border: 1px solid rgba(255, 255, 255, 0.2) !important;
    background: transparent !important;
    color: var(--text-muted) !important;
    font-size: 0.9rem !important;
    cursor: pointer !important;
    transition: all 0.2s ease !important;
    flex-shrink: 0 !important;
}

.dh-record-cta:hover {
    background: rgba(99, 102, 241, 0.2) !important;
    border-color: var(--accent-primary) !important;
    color: var(--accent-primary) !important;
    transform: scale(1.1) !important;
}

/* ===== NEW STINT VIEW - Redesigned Layout ===== */

/* Navigation bar with back button */
.stint-nav {
    padding: 1rem 0;
    margin-bottom: 1rem;
}

.stint-back {
    background: rgba(30, 30, 45, 0.8) !important;
    border: 1px solid rgba(255, 255, 255, 0.1) !important;
    color: var(--text-secondary) !important;
    padding: 0.6rem 1.2rem !important;
    font-size: 0.85rem !important;
    border-radius: 8px !important;
    transition: all 0.2s ease !important;
}

.stint-back:hover {
    background: rgba(40, 40, 60, 0.9) !important;
    border-color: var(--accent-primary) !important;
    color: var(--text-primary) !important;
}

/* Main Header Card */
.stint-header-card {
    background: linear-gradient(135deg, rgba(20, 20, 35, 0.95) 0%, rgba(30, 30, 50, 0.9) 100%);
    border: 1px solid rgba(255, 255, 255, 0.08);
    border-radius: 16px;
    padding: 2rem 2.5rem;
    margin-bottom: 1rem;
    position: relative;
    overflow: hidden;
}

/* Subtle glow effect */
.stint-header-card::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 2px;
    background: linear-gradient(90deg, transparent, var(--accent-primary), transparent);
    opacity: 0.5;
}

/* Title row: Track + Badge */
.stint-title-row {
    display: flex;
    align-items: center;
    gap: 1.5rem;
    margin-bottom: 0.75rem;
}

.stint-track-name {
    font-family: var(--font-display);
    font-size: 2.5rem;
    font-weight: 700;
    color: var(--text-primary);
    letter-spacing: -0.5px;
    margin: 0;
}

/* Session Type Badges - Fluo Style */
.stint-badge {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    padding: 0.4rem 1rem;
    font-family: var(--font-display);
    font-size: 0.75rem;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 1px;
    border-radius: 6px;
    border: 1px solid;
    box-shadow: 0 0 15px rgba(0, 0, 0, 0.3);
}

/* RACE - Red/Orange Fluo */
.stint-badge.race {
    background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);
    border-color: #ef4444;
    color: #ffffff;
    box-shadow: 0 0 20px rgba(239, 68, 68, 0.4);
    text-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);
}

/* QUALIFYING - Yellow Fluo */
.stint-badge.qualifying {
    background: linear-gradient(135deg, #eab308 0%, #ca8a04 100%);
    border-color: #eab308;
    color: #1a1a1a;
    box-shadow: 0 0 20px rgba(234, 179, 8, 0.4);
    text-shadow: 0 1px 1px rgba(255, 255, 255, 0.3);
}

/* PRACTICE - Blue Fluo */
.stint-badge.practice {
    background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%);
    border-color: #3b82f6;
    color: #ffffff;
    box-shadow: 0 0 20px rgba(59, 130, 246, 0.4);
    text-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);
}

/* Car name row */
.stint-car-row {
    margin-bottom: 0.5rem;
}

.stint-car-name {
    font-family: var(--font-primary);
    font-size: 1.1rem;
    font-weight: 500;
    color: var(--text-secondary);
}

/* Date/Time row */
.stint-datetime-row {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    color: var(--text-muted);
    font-size: 0.9rem;
}

.stint-separator {
    color: var(--text-muted);
    opacity: 0.5;
}

/* Weather & Conditions Card */
.stint-conditions-card {
    display: flex;
    align-items: center;
    gap: 2.5rem;
    background: rgba(20, 20, 35, 0.7);
    border: 1px solid rgba(255, 255, 255, 0.06);
    border-radius: 12px;
    padding: 1rem 2rem;
    margin-bottom: 1.5rem;
}

.stint-condition-item {
    display: flex;
    align-items: center;
    gap: 0.5rem;
}

.stint-condition-icon {
    font-size: 1.3rem;
}

.stint-condition-label {
    font-size: 0.8rem;
    color: var(--text-muted);
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

.stint-condition-value {
    font-size: 0.95rem;
    font-weight: 600;
    color: var(--text-primary);
}

/* Statistics Cards Grid */
.stint-stats-grid {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: 1rem;
    margin-bottom: 2rem;
}

.stint-stat-card {
    background: linear-gradient(135deg, rgba(25, 25, 40, 0.9) 0%, rgba(35, 35, 55, 0.8) 100%);
    border: 1px solid rgba(255, 255, 255, 0.08);
    border-radius: 14px;
    padding: 1.5rem;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    text-align: center;
    transition: all 0.2s ease;
}

.stint-stat-card:hover {
    border-color: rgba(99, 102, 241, 0.3);
    transform: translateY(-2px);
}

.stint-stat-value {
    font-family: var(--font-display);
    font-size: 2rem;
    font-weight: 700;
    color: var(--text-primary);
    line-height: 1.2;
}

.stint-stat-label {
    font-size: 0.7rem;
    font-weight: 600;
    color: var(--text-muted);
    text-transform: uppercase;
    letter-spacing: 1px;
    margin-top: 0.5rem;
}

/* Valid/Invalid split display */
.stint-valid-split {
    display: flex;
    align-items: baseline;
    gap: 0.25rem;
}

.stint-valid-count {
    font-family: var(--font-display);
    font-size: 2rem;
    font-weight: 700;
    color: var(--accent-success);
}

.stint-valid-separator {
    font-size: 1.5rem;
    color: var(--text-muted);
    margin: 0 0.25rem;
}

.stint-invalid-count {
    font-family: var(--font-display);
    font-size: 2rem;
    font-weight: 700;
    color: var(--accent-danger);
}

/* Best Lap card - special styling */
.stint-stat-best {
    border-color: rgba(245, 158, 11, 0.3);
    background: linear-gradient(135deg, rgba(30, 25, 20, 0.9) 0%, rgba(45, 35, 25, 0.8) 100%);
}

.stint-stat-best:hover {
    border-color: rgba(245, 158, 11, 0.5);
    box-shadow: 0 0 30px rgba(245, 158, 11, 0.15);
}

.stint-best-time {
    color: #f59e0b !important;
    text-shadow: 0 0 20px rgba(245, 158, 11, 0.3);
}

/* Responsive adjustments */
@media (max-width: 900px) {
    .stint-stats-grid {
        grid-template-columns: repeat(2, 1fr);
    }

    .stint-track-name {
        font-size: 2rem;
    }

    .stint-conditions-card {
        flex-wrap: wrap;
        gap: 1.5rem;
    }
}

@media (max-width: 600px) {
    .stint-stats-grid {
        grid-template-columns: 1fr;
    }

    .stint-header-card {
        padding: 1.5rem;
    }

    .stint-title-row {
        flex-direction: column;
        align-items: flex-start;
        gap: 0.75rem;
    }
}

/* ===== STINT ECG Chart Section ===== */
.stint-chart-section {
    background: rgba(15, 15, 25, 0.8);
    border: 1px solid rgba(255, 255, 255, 0.06);
    border-radius: 14px;
    padding: 1.5rem;
    margin-bottom: 1.5rem;
}

.stint-chart-header {
    margin-bottom: 1rem;
}

.stint-section-title {
    font-family: var(--font-display);
    font-size: 0.85rem;
    font-weight: 700;
    color: var(--text-muted);
    text-transform: uppercase;
    letter-spacing: 1.5px;
    margin: 0;
}

.stint-chart-wrapper {
    height: 220px;
    position: relative;
}

.stint-chart-wrapper canvas {
    width: 100% !important;
    height: 100% !important;
}

/* ===== STINT Lap Table Section ===== */
.stint-table-section {
    background: linear-gradient(180deg,
            rgba(20, 20, 35, 0.95) 0%,
            rgba(15, 15, 28, 0.98) 100%);
    border: 1px solid rgba(99, 102, 241, 0.25);
    border-radius: 14px;
    padding: 1.5rem;
    overflow-x: auto;
    box-shadow:
        0 4px 20px rgba(0, 0, 0, 0.4),
        inset 0 1px 0 rgba(255, 255, 255, 0.05);
}

.stint-table-header {
    margin-bottom: 1rem;
}

.stint-lap-table {
    width: 100%;
    border-collapse: separate;
    border-spacing: 0;
    font-family: var(--font-primary);
}

.stint-lap-table thead th {
    font-size: 0.7rem;
    font-weight: 700;
    color: var(--text-muted);
    text-transform: uppercase;
    letter-spacing: 1px;
    padding: 0.75rem 1rem;
    text-align: left;
    border-bottom: 1px solid rgba(255, 255, 255, 0.1);
}

.stint-lap-table tbody tr {
    transition: background 0.15s ease;
}

.stint-lap-table tbody tr:hover {
    background: rgba(99, 102, 241, 0.1);
}

/* Alternating rows for readability */
.stint-lap-table tbody tr:nth-child(even) {
    background: rgba(255, 255, 255, 0.02);
}

.stint-lap-table tbody tr:nth-child(even):hover {
    background: rgba(99, 102, 241, 0.1);
}

.stint-lap-table tbody td {
    font-size: 0.9rem;
    padding: 0.85rem 1rem;
    color: var(--text-primary);
    border-bottom: 1px solid rgba(255, 255, 255, 0.04);
}

/* Lap number column */
.stint-lap-table td:first-child {
    font-weight: 600;
    color: var(--text-muted);
}

/* Lap time column - highlight best */
.stint-lap-table .lap-time {
    font-family: 'Outfit', monospace;
    font-weight: 600;
}

.stint-lap-table .lap-time.best {
    color: #a855f7 !important;
    text-shadow: 0 0 10px rgba(168, 85, 247, 0.4);
}

.stint-lap-table .lap-time.invalid {
    color: var(--text-muted);
    text-decoration: line-through;
    opacity: 0.7;
}

/* Sector times - highlight best */
.stint-lap-table .sector-time {
    font-family: 'Outfit', monospace;
}

.stint-lap-table .sector-time.best-sector {
    color: #4ade80 !important;
    /* Brighter green */
    font-weight: 700;
    text-shadow: 0 0 8px rgba(74, 222, 128, 0.6);
    background: rgba(34, 197, 94, 0.15);
    border-radius: 4px;
    padding: 2px 6px;
}

/* Fuel column */
.stint-lap-table .fuel-value {
    color: var(--text-secondary);
}

/* Status badges */
.stint-status-badge {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    padding: 0.25rem 0.6rem;
    font-size: 0.65rem;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    border-radius: 4px;
    min-width: 50px;
}

/* BEST badge - Purple/Violet */
.stint-status-badge.best {
    background: linear-gradient(135deg, #a855f7 0%, #7c3aed 100%);
    color: #ffffff;
    box-shadow: 0 0 12px rgba(168, 85, 247, 0.4);
}

/* CUT badge - Red */
.stint-status-badge.cut {
    background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);
    color: #ffffff;
    box-shadow: 0 0 12px rgba(239, 68, 68, 0.3);
}

/* PIT-IN badge - Orange */
.stint-status-badge.pit-in {
    background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);
    color: #1a1a1a;
    box-shadow: 0 0 12px rgba(245, 158, 11, 0.3);
}

/* PIT-OUT badge - Orange lighter */
.stint-status-badge.pit-out {
    background: linear-gradient(135deg, #fbbf24 0%, #f59e0b 100%);
    color: #1a1a1a;
    box-shadow: 0 0 12px rgba(251, 191, 36, 0.3);
}

/* OK badge - subtle */
.stint-status-badge.ok {
    background: rgba(255, 255, 255, 0.08);
    color: var(--text-muted);
    border: 1px solid rgba(255, 255, 255, 0.1);
}

/* Best lap row highlight */
.stint-lap-table tbody tr.best-lap-row {
    background: rgba(168, 85, 247, 0.08) !important;
    border-left: 3px solid #a855f7;
}

.stint-lap-table tbody tr.best-lap-row:hover {
    background: rgba(168, 85, 247, 0.15) !important;
}

/* Cut lap row subtle styling */
.stint-lap-table tbody tr.cut-lap-row {
    opacity: 0.7;
}

/* Responsive table */
@media (max-width: 768px) {
    .stint-lap-table {
        font-size: 0.8rem;
    }

    .stint-lap-table thead th,
    .stint-lap-table tbody td {
        padding: 0.6rem 0.5rem;
    }

    .stint-chart-wrapper {
        height: 180px;
    }
}

/* =========================================
   STINT ANALYSIS BOX & CONTROLS
   ========================================= */
.stint-analysis-box {
    background: linear-gradient(145deg, rgba(30, 30, 45, 0.95) 0%, rgba(20, 20, 35, 0.98) 100%);
    border: 1px solid rgba(99, 102, 241, 0.2);
    border-radius: 16px;
    padding: 1.5rem;
    margin-top: 1.5rem;
    margin-bottom: 2rem;
    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4);
    position: relative;
    overflow: hidden;
}

/* White title for ANALISI DETTAGLIATA */
.stint-analysis-box .stint-section-title {
    color: #ffffff !important;
    font-size: 1.1rem;
    font-weight: 700;
    text-shadow: 0 0 20px rgba(99, 102, 241, 0.4);
}

.analysis-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 1.25rem;
    flex-wrap: wrap;
    gap: 1rem;
}

.analysis-controls {
    display: flex;
    gap: 0.5rem;
    align-items: flex-end;
    flex-wrap: wrap;
}

/* Aligned filter row */
.analysis-controls .control-group {
    min-width: 130px;
}

.analysis-controls .control-group.toggles {
    min-width: auto;
    margin-left: 0.5rem;
    border-left: 1px solid rgba(255, 255, 255, 0.1);
    padding-left: 1rem;
}

/* Control Groups */
.control-group {
    display: flex;
    flex-direction: column;
    gap: 0.3rem;
}

.control-label {
    font-size: 0.7rem;
    color: var(--text-muted);
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    margin-left: 0.2rem;
}

/* Select Styling */
.anal-select {
    background: rgba(20, 20, 35, 0.95);
    border: 1px solid rgba(99, 102, 241, 0.3);
    color: #ffffff;
    padding: 0.6rem 1rem;
    border-radius: 8px;
    font-family: var(--font-body);
    font-size: 0.85rem;
    font-weight: 500;
    outline: none;
    cursor: pointer;
    transition: all 0.2s ease;
    min-width: 140px;
    appearance: none;
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' fill='%236366f1' viewBox='0 0 16 16'%3E%3Cpath d='M7.247 11.14 2.451 5.658C1.885 5.013 2.345 4 3.204 4h9.592a1 1 0 0 1 .753 1.659l-4.796 5.48a1 1 0 0 1-1.506 0z'/%3E%3C/svg%3E");
    background-repeat: no-repeat;
    background-position: right 0.8rem center;
    padding-right: 2.5rem;
}

.anal-select option {
    background: #1a1a2e;
    color: #ffffff;
    padding: 0.5rem;
}

.anal-select:hover {
    background: rgba(30, 30, 50, 0.95);
    border-color: rgba(99, 102, 241, 0.6);
    box-shadow: 0 0 15px rgba(99, 102, 241, 0.2);
}

.anal-select:focus {
    border-color: #6366f1;
    box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.25);
}

/* Toggles */
.control-group.toggles {
    flex-direction: row;
    align-items: flex-end;
    height: 100%;
    padding-bottom: 0.5rem;
    gap: 1rem;
}

.anal-toggle {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    cursor: pointer;
    user-select: none;
}

.anal-toggle input[type="checkbox"] {
    appearance: none;
    width: 18px;
    height: 18px;
    border: 2px solid rgba(255, 255, 255, 0.3);
    border-radius: 4px;
    background: transparent;
    cursor: pointer;
    position: relative;
    transition: all 0.2s ease;
}

.anal-toggle input[type="checkbox"]:checked {
    background: #6366f1;
    /* Use hex since var might be unavail in preview */
    border-color: #6366f1;
}

.anal-toggle input[type="checkbox"]:checked::after {
    content: '';
    position: absolute;
    color: white;
    font-size: 12px;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    font-weight: bold;
}

.toggle-label {
    font-size: 0.85rem;
    color: var(--text-secondary);
    font-weight: 500;
}

.anal-toggle:hover .toggle-label {
    color: var(--text-primary);
}

/* Lap Manager Button */
.btn-outline-fluo {
    background: transparent;
    border: 1px solid #6366f1;
    color: #6366f1;
    padding: 0.5rem 1rem;
    border-radius: 8px;
    font-weight: 600;
    transition: all 0.2s ease;
    margin-top: auto;
    cursor: pointer;
}

.btn-outline-fluo:hover {
    background: rgba(99, 102, 241, 0.1);
    box-shadow: 0 0 15px rgba(99, 102, 241, 0.3);
}

/* Lap Manager Panel */
.lap-manager-panel {
    background: rgba(0, 0, 0, 0.3);
    border-radius: 12px;
    padding: 1rem;
    margin-bottom: 1.5rem;
    border: 1px solid rgba(255, 255, 255, 0.05);
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    max-height: 500px;
    opacity: 1;
    overflow-y: auto;
}

.lap-manager-panel.hidden {
    max-height: 0;
    padding: 0 1rem;
    margin-bottom: 0;
    opacity: 0;
    border: none;
}

.lap-manager-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 1rem;
    border-bottom: 1px solid rgba(255, 255, 255, 0.1);
    padding-bottom: 0.5rem;
}

.lm-title {
    font-size: 0.9rem;
    color: var(--text-secondary);
    font-weight: 600;
}

.btn-text-reset {
    background: none;
    border: none;
    color: #ef4444;
    font-size: 0.8rem;
    cursor: pointer;
    text-transform: uppercase;
    font-weight: 700;
}

.btn-text-reset:hover {
    text-decoration: underline;
}

.lap-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(45px, 1fr));
    gap: 0.5rem;
}

.lap-toggle-btn {
    width: 100%;
    aspect-ratio: 1;
    border: 1px solid rgba(255, 255, 255, 0.1);
    border-radius: 6px;
    background: rgba(255, 255, 255, 0.05);
    color: var(--text-secondary);
    font-size: 0.9rem;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.2s ease;
    display: flex;
    align-items: center;
    justify-content: center;
    position: relative;
}

.lap-toggle-btn:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
}

.lap-toggle-btn.valid {
    border-color: rgba(34, 197, 94, 0.3);
    color: #22c55e;
}

.lap-toggle-btn.invalid {
    border-color: rgba(239, 68, 68, 0.3);
    color: #ef4444;
}

.lap-toggle-btn.excluded {
    background: rgba(255, 255, 255, 0.02);
    color: rgba(255, 255, 255, 0.2);
    border-color: rgba(255, 255, 255, 0.05);
    text-decoration: line-through;
}

.lap-toggle-btn.best::after {
    content: '';
    position: absolute;
    top: -5px;
    right: -5px;
    color: #a855f7;
    font-size: 10px;
}

/* Compare Mode Styling */
.control-group.hidden {
    display: none;
}

.anal-select.compare-active {
    border-color: #f59e0b;
    background: rgba(245, 158, 11, 0.1);
}

/* Responsive */
@media (max-width: 900px) {
    .analysis-header {
        flex-direction: column;
        align-items: flex-start;
    }

    .analysis-controls {
        width: 100%;
        justify-content: space-between;
    }

    .control-group {
        flex: 1 1 auto;
        min-width: 100px;
    }
}

/* =========================================
   TABLE ENHANCEMENTS - SPORTY LAYOUT
   ========================================= */

/* Table Header with Sync Toggle */
.stint-table-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 1rem;
    padding-bottom: 0.75rem;
    border-bottom: 2px solid rgba(99, 102, 241, 0.3);
}

/* TABELLA GIRI title - WHITE and prominent */
.stint-table-header .stint-section-title {
    color: #ffffff !important;
    font-size: 1.1rem;
    font-weight: 700;
    letter-spacing: 1px;
    text-shadow: 0 0 15px rgba(255, 255, 255, 0.2);
}

.table-options {
    display: flex;
    align-items: center;
    gap: 1rem;
}

.table-sync-toggle {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    cursor: pointer;
    user-select: none;
    padding: 0.4rem 0.8rem;
    background: rgba(99, 102, 241, 0.1);
    border-radius: 6px;
    border: 1px solid rgba(99, 102, 241, 0.2);
    transition: all 0.2s ease;
}

.table-sync-toggle:hover {
    background: rgba(99, 102, 241, 0.2);
    border-color: rgba(99, 102, 241, 0.4);
}

.table-sync-toggle input[type="checkbox"] {
    appearance: none;
    width: 16px;
    height: 16px;
    border: 2px solid rgba(99, 102, 241, 0.5);
    border-radius: 3px;
    background: transparent;
    cursor: pointer;
    position: relative;
}

.table-sync-toggle input[type="checkbox"]:checked {
    background: #6366f1;
    border-color: #6366f1;
}

.table-sync-toggle input[type="checkbox"]:checked::after {
    content: '';
    position: absolute;
    color: white;
    font-size: 10px;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    font-weight: bold;
}

.sync-label {
    font-size: 0.75rem;
    font-weight: 600;
    color: #a1a1aa;
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

/* Stint Separator Row */
.stint-separator-row {
    background: transparent !important;
}

.stint-separator-row:hover {
    background: transparent !important;
}

.stint-separator-cell {
    padding: 1rem 0 !important;
    display: flex;
    align-items: center;
    gap: 1rem;
}

.stint-separator-line {
    flex: 1;
    height: 2px;
    background: linear-gradient(90deg, transparent, rgba(245, 158, 11, 0.5), transparent);
}

.stint-separator-label {
    font-family: var(--font-display);
    font-size: 0.7rem;
    font-weight: 700;
    color: #f59e0b;
    text-transform: uppercase;
    letter-spacing: 2px;
    padding: 0.3rem 0.8rem;
    background: rgba(245, 158, 11, 0.1);
    border: 1px solid rgba(245, 158, 11, 0.3);
    border-radius: 4px;
    white-space: nowrap;
}

/* Dimmed Rows (Excluded by filters) */
.stint-lap-table tbody tr.dimmed-row {
    opacity: 0.35;
    background: rgba(0, 0, 0, 0.2) !important;
}

.stint-lap-table tbody tr.dimmed-row:hover {
    opacity: 0.6;
}

/* Air Temp Column Styling */
.stint-lap-table .air-temp {
    color: #60a5fa;
    font-weight: 500;
}

/* Grip Column Styling */
.stint-lap-table .grip-value {
    color: #a1a1aa;
    font-size: 0.8rem;
}

/* Lap Number Column - Sporty */
.stint-lap-table .lap-number {
    font-family: var(--font-display);
    font-weight: 700;
    color: #6366f1;
}

/* Enhanced Table Spacing */
.stint-table-section {
    background: linear-gradient(145deg, rgba(30, 30, 45, 0.95) 0%, rgba(20, 20, 35, 0.98) 100%);
    border: 1px solid rgba(99, 102, 241, 0.15);
    border-radius: 16px;
    padding: 1.5rem;
    overflow-x: auto;
}

.stint-lap-table thead th {
    font-size: 0.7rem;
    font-weight: 800;
    color: #a5b4fc;
    /* Bright purple-blue for visibility */
    text-transform: uppercase;
    letter-spacing: 1.5px;
    padding: 1rem 0.75rem;
    text-align: center;
    border-bottom: 2px solid rgba(99, 102, 241, 0.4);
    background: linear-gradient(180deg,
            rgba(99, 102, 241, 0.15) 0%,
            rgba(99, 102, 241, 0.08) 100%);
    text-shadow: 0 0 10px rgba(99, 102, 241, 0.3);
}

.stint-lap-table tbody td {
    font-size: 0.85rem;
    padding: 0.75rem 0.75rem;
    text-align: center;
    color: var(--text-primary);
    border-bottom: 1px solid rgba(255, 255, 255, 0.03);
}

/* Chart Container - Better Contrast */
.stint-chart-wrapper {
    height: 280px;
    position: relative;
    background: rgba(0, 0, 0, 0.2);
    border-radius: 12px;
    padding: 1rem;
    margin-top: 1rem;
}

/* Analysis Box - Top accent bar (subtle) */
.stint-analysis-box::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 2px;
    background: linear-gradient(90deg,
            transparent,
            rgba(99, 102, 241, 0.5),
            rgba(168, 85, 247, 0.5),
            transparent);
    border-radius: 16px 16px 0 0;
}

/* =========================================
   DYNAMIC KPI BOX - LIQUID GLASS EFFECT
   ========================================= */
.stint-kpi-box {
    background: linear-gradient(145deg,
            rgba(35, 35, 55, 0.9) 0%,
            rgba(45, 40, 70, 0.85) 50%,
            rgba(30, 30, 50, 0.95) 100%);
    border: 1px solid rgba(99, 102, 241, 0.4);
    border-radius: 14px;
    padding: 1.25rem 1.5rem;
    margin-bottom: 0;
    position: relative;
    backdrop-filter: blur(16px);
    -webkit-backdrop-filter: blur(16px);
    box-shadow:
        0 8px 32px rgba(0, 0, 0, 0.4),
        0 0 20px rgba(99, 102, 241, 0.15),
        inset 0 1px 0 rgba(255, 255, 255, 0.1);

    /* LIQUID GLASS TRANSITIONS - Apple-style spring easing */
    transition:
        all 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94),
        height 0.6s cubic-bezier(0.34, 1.56, 0.64, 1),
        min-height 0.6s cubic-bezier(0.34, 1.56, 0.64, 1),
        padding 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94),
        transform 0.5s cubic-bezier(0.34, 1.56, 0.64, 1);

    /* Enable GPU acceleration for smooth animations */
    will-change: height, min-height, padding, transform, box-shadow;
    transform: translateZ(0);
    overflow: hidden;
}

/* Glow effect on focus/hover */
.stint-kpi-box:hover {
    box-shadow:
        0 12px 40px rgba(0, 0, 0, 0.5),
        0 0 30px rgba(99, 102, 241, 0.25),
        inset 0 1px 0 rgba(255, 255, 255, 0.15);
    border-color: rgba(99, 102, 241, 0.6);
}

/* Connected to analysis box below */
.stint-kpi-box::after {
    content: '';
    position: absolute;
    bottom: -1.5rem;
    left: 50%;
    transform: translateX(-50%);
    width: 2px;
    height: 1.5rem;
    background: linear-gradient(180deg, rgba(99, 102, 241, 0.5), transparent);
}

/* Top accent bar */
.stint-kpi-box::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 2px;
    background: linear-gradient(90deg,
            transparent,
            rgba(99, 102, 241, 0.8),
            rgba(168, 85, 247, 0.8),
            rgba(99, 102, 241, 0.8),
            transparent);
    border-radius: 14px 14px 0 0;
}

/* KPI Header with weather */
.kpi-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 0.75rem;
    padding-bottom: 0.5rem;
    border-bottom: 1px solid rgba(255, 255, 255, 0.06);
}

.kpi-scope-label {
    font-family: var(--font-display);
    font-size: 1rem;
    font-weight: 700;
    color: #ffffff;
    text-transform: uppercase;
    letter-spacing: 1.5px;
    text-shadow: 0 0 20px rgba(99, 102, 241, 0.3);
}

/* Weather info in header */
.kpi-weather-info {
    display: flex;
    gap: 1rem;
    align-items: center;
}

.kpi-weather-item {
    display: flex;
    align-items: center;
    gap: 0.3rem;
    font-size: 0.75rem;
    color: #a1a1aa;
}

.kpi-weather-item .weather-icon {
    font-size: 0.9rem;
}

.kpi-weather-item .weather-value {
    font-weight: 600;
    color: #60a5fa;
}

/* Liquid glass transition animation - Enhanced Apple-style */
.kpi-standard,
.kpi-compare {
    transition:
        opacity 0.45s cubic-bezier(0.25, 0.1, 0.25, 1),
        transform 0.5s cubic-bezier(0.34, 1.56, 0.64, 1),
        filter 0.4s cubic-bezier(0.25, 0.1, 0.25, 1);
    transform-origin: center;
    will-change: opacity, transform, filter;
}

/* Animating OUT state */
.kpi-standard.animating,
.kpi-compare.animating {
    opacity: 0;
    transform: scale(0.96) translateY(8px);
    filter: blur(8px);
}

/* Animating IN state - smooth entrance */
.kpi-standard:not(.animating),
.kpi-compare:not(.animating) {
    opacity: 1;
    transform: scale(1) translateY(0);
    filter: blur(0);
}

/* Value change animation */
.kpi-value {
    transition: all 0.3s ease;
}

.kpi-value.updating {
    opacity: 0.5;
    transform: scale(0.95);
}

/* Standard Mode - 5 cards in row */
.kpi-standard {
    display: grid;
    grid-template-columns: repeat(5, 1fr);
    gap: 0.75rem;
}

.kpi-card {
    background: rgba(0, 0, 0, 0.3);
    border: 1px solid rgba(255, 255, 255, 0.05);
    border-radius: 10px;
    padding: 1rem 0.75rem;
    text-align: center;
    transition: all 0.2s ease;
}

.kpi-card:hover {
    border-color: rgba(99, 102, 241, 0.3);
    transform: translateY(-2px);
}

.kpi-card.kpi-best {
    background: linear-gradient(135deg, rgba(245, 158, 11, 0.15) 0%, rgba(245, 158, 11, 0.05) 100%);
    border-color: rgba(245, 158, 11, 0.3);
}

.kpi-value {
    display: block;
    font-family: var(--font-display);
    font-size: 1.4rem;
    font-weight: 700;
    color: #ffffff;
    line-height: 1.2;
}

.kpi-card.kpi-best .kpi-value {
    color: #f59e0b;
    text-shadow: 0 0 15px rgba(245, 158, 11, 0.3);
}

.kpi-value.kpi-theo {
    color: #22c55e;
    font-size: 1.2rem;
}

.kpi-label {
    display: block;
    font-size: 0.6rem;
    font-weight: 700;
    color: #71717a;
    text-transform: uppercase;
    letter-spacing: 1px;
    margin-top: 0.4rem;
}

/* Valid count "X su Y" display */
.kpi-valid-count {
    display: block;
    font-size: 0.7rem;
    font-weight: 500;
    color: #a1a1aa;
    margin-top: 0.15rem;
}

/* Compare Mode - Two columns */
.kpi-compare {
    display: flex;
    align-items: stretch;
    gap: 0;
}

.kpi-compare.hidden {
    display: none;
}

.kpi-column {
    flex: 1;
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
}

.kpi-column-a {
    padding-right: 1rem;
}

.kpi-column-b {
    padding-left: 1rem;
}

.kpi-column-header {
    font-family: var(--font-display);
    font-size: 0.75rem;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 1.5px;
    padding: 0.5rem;
    text-align: center;
    border-radius: 6px;
    margin-bottom: 0.5rem;
}

.kpi-column-a .kpi-column-header {
    background: rgba(99, 102, 241, 0.2);
    color: #6366f1;
}

.kpi-column-b .kpi-column-header {
    background: rgba(245, 158, 11, 0.2);
    color: #f59e0b;
}

.kpi-column .kpi-card {
    padding: 0.75rem;
}

.kpi-column .kpi-value {
    font-size: 1.1rem;
}

.kpi-column .kpi-label {
    font-size: 0.55rem;
}

/* VS Divider */
.kpi-vs-divider {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    padding: 0 0.5rem;
    position: relative;
}

.kpi-vs-divider::before {
    content: '';
    position: absolute;
    top: 0;
    bottom: 0;
    width: 1px;
    background: linear-gradient(180deg, transparent, rgba(255, 255, 255, 0.2), transparent);
}

.kpi-vs {
    font-family: var(--font-display);
    font-size: 0.75rem;
    font-weight: 800;
    color: #ef4444;
    background: rgba(239, 68, 68, 0.15);
    padding: 0.5rem 0.75rem;
    border-radius: 6px;
    border: 1px solid rgba(239, 68, 68, 0.3);
    z-index: 1;
}

/* Responsive */
@media (max-width: 768px) {
    .kpi-standard {
        grid-template-columns: repeat(3, 1fr);
    }

    .kpi-compare {
        flex-direction: column;
    }

    .kpi-column-a,
    .kpi-column-b {
        padding: 0;
    }

    .kpi-vs-divider {
        padding: 1rem 0;
    }

    .kpi-vs-divider::before {
        width: 100%;
        height: 1px;
        top: 50%;
        left: 0;
        right: 0;
    }
}